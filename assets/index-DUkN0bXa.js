function $ne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function jl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uA={exports:{}},mm={};var rL;function qne(){if(rL)return mm;rL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return mm.Fragment=e,mm.jsx=n,mm.jsxs=n,mm}var iL;function Gne(){return iL||(iL=1,uA.exports=qne()),uA.exports}var m=Gne(),dA={exports:{}},lt={};var aL;function Hne(){if(aL)return lt;aL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,Z,te){this.props=U,this.context=Z,this.refs=w,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=S.prototype;function I(U,Z,te){this.props=U,this.context=Z,this.refs=w,this.updater=te||b}var N=I.prototype=new A;N.constructor=I,x(N,S.prototype),N.isPureReactComponent=!0;var O=Array.isArray;function D(){}var P={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(U,Z,te){var W=te.ref;return{$$typeof:t,type:U,key:Z,ref:W!==void 0?W:null,props:te}}function M(U,Z){return R(U.type,Z,U.props)}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function L(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return Z[te]})}var z=/\/+/g;function K(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):Z.toString(36)}function Y(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,Z,te,W,ue){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,G(oe(U._payload),Z,te,W,ue)}}if(oe)return ue=ue(U),oe=W===""?"."+K(U,0):W,O(ue)?(te="",oe!=null&&(te=oe.replace(z,"$&/")+"/"),G(ue,Z,te,"",function(Ae){return Ae})):ue!=null&&(V(ue)&&(ue=M(ue,te+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),Z.push(ue)),1;oe=0;var Se=W===""?".":W+":";if(O(U))for(var se=0;se<U.length;se++)W=U[se],ie=Se+K(W,se),oe+=G(W,Z,te,ie,ue);else if(se=v(U),typeof se=="function")for(U=se.call(U),se=0;!(W=U.next()).done;)W=W.value,ie=Se+K(W,se++),oe+=G(W,Z,te,ie,ue);else if(ie==="object"){if(typeof U.then=="function")return G(Y(U),Z,te,W,ue);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function X(U,Z,te){if(U==null)return U;var W=[],ue=0;return G(U,W,"","",function(ie){return Z.call(te,ie,ue++)}),W}function J(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var ee=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Q={map:X,forEach:function(U,Z,te){X(U,function(){Z.apply(this,arguments)},te)},count:function(U){var Z=0;return X(U,function(){Z++}),Z},toArray:function(U){return X(U,function(Z){return Z})||[]},only:function(U){if(!V(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=h,lt.Children=Q,lt.Component=S,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=c,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return P.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,Z,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var W=x({},U.props),ue=U.key;if(Z!=null)for(ie in Z.key!==void 0&&(ue=""+Z.key),Z)!C.call(Z,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Z.ref===void 0||(W[ie]=Z[ie]);var ie=arguments.length-2;if(ie===1)W.children=te;else if(1<ie){for(var oe=Array(ie),Se=0;Se<ie;Se++)oe[Se]=arguments[Se+2];W.children=oe}return R(U.type,ue,W)},lt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},lt.createElement=function(U,Z,te){var W,ue={},ie=null;if(Z!=null)for(W in Z.key!==void 0&&(ie=""+Z.key),Z)C.call(Z,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ue[W]=Z[W]);var oe=arguments.length-2;if(oe===1)ue.children=te;else if(1<oe){for(var Se=Array(oe),se=0;se<oe;se++)Se[se]=arguments[se+2];ue.children=Se}if(U&&U.defaultProps)for(W in oe=U.defaultProps,oe)ue[W]===void 0&&(ue[W]=oe[W]);return R(U,ie,ue)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:o,render:U}},lt.isValidElement=V,lt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:J}},lt.memo=function(U,Z){return{$$typeof:u,type:U,compare:Z===void 0?null:Z}},lt.startTransition=function(U){var Z=P.T,te={};P.T=te;try{var W=U(),ue=P.S;ue!==null&&ue(te,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(D,ee)}catch(ie){ee(ie)}finally{Z!==null&&te.types!==null&&(Z.types=te.types),P.T=Z}},lt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},lt.use=function(U){return P.H.use(U)},lt.useActionState=function(U,Z,te){return P.H.useActionState(U,Z,te)},lt.useCallback=function(U,Z){return P.H.useCallback(U,Z)},lt.useContext=function(U){return P.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,Z){return P.H.useDeferredValue(U,Z)},lt.useEffect=function(U,Z){return P.H.useEffect(U,Z)},lt.useEffectEvent=function(U){return P.H.useEffectEvent(U)},lt.useId=function(){return P.H.useId()},lt.useImperativeHandle=function(U,Z,te){return P.H.useImperativeHandle(U,Z,te)},lt.useInsertionEffect=function(U,Z){return P.H.useInsertionEffect(U,Z)},lt.useLayoutEffect=function(U,Z){return P.H.useLayoutEffect(U,Z)},lt.useMemo=function(U,Z){return P.H.useMemo(U,Z)},lt.useOptimistic=function(U,Z){return P.H.useOptimistic(U,Z)},lt.useReducer=function(U,Z,te){return P.H.useReducer(U,Z,te)},lt.useRef=function(U){return P.H.useRef(U)},lt.useState=function(U){return P.H.useState(U)},lt.useSyncExternalStore=function(U,Z,te){return P.H.useSyncExternalStore(U,Z,te)},lt.useTransition=function(){return P.H.useTransition()},lt.version="19.2.4",lt}var sL;function Vp(){return sL||(sL=1,dA.exports=Hne()),dA.exports}var T=Vp();const sl=jl(T),Kne=$ne({__proto__:null,default:sl},[T]);var fA={exports:{}},vm={},hA={exports:{}},pA={};var oL;function Wne(){return oL||(oL=1,(function(t){function e(G,X){var J=G.length;G.push(X);e:for(;0<J;){var ee=J-1>>>1,Q=G[ee];if(0<i(Q,X))G[ee]=X,G[J]=Q,J=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],J=G.pop();if(J!==X){G[0]=J;e:for(var ee=0,Q=G.length,U=Q>>>1;ee<U;){var Z=2*(ee+1)-1,te=G[Z],W=Z+1,ue=G[W];if(0>i(te,J))W<Q&&0>i(ue,te)?(G[ee]=ue,G[W]=J,ee=W):(G[ee]=te,G[Z]=J,ee=Z);else if(W<Q&&0>i(ue,J))G[ee]=ue,G[W]=J,ee=W;else break e}}return X}function i(G,X){var J=G.sortIndex-X.sortIndex;return J!==0?J:G.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function N(G){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=G)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(u)}}function O(G){if(x=!1,N(G),!b)if(n(c)!==null)b=!0,D||(D=!0,L());else{var X=n(u);X!==null&&Y(O,X.startTime-G)}}var D=!1,P=-1,C=5,R=-1;function M(){return w?!0:!(t.unstable_now()-R<C)}function V(){if(w=!1,D){var G=t.unstable_now();R=G;var X=!0;try{e:{b=!1,x&&(x=!1,A(P),P=-1),v=!0;var J=g;try{t:{for(N(G),h=n(c);h!==null&&!(h.expirationTime>G&&M());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,g=h.priorityLevel;var Q=ee(h.expirationTime<=G);if(G=t.unstable_now(),typeof Q=="function"){h.callback=Q,N(G),X=!0;break t}h===n(c)&&r(c),N(G)}else r(c);h=n(c)}if(h!==null)X=!0;else{var U=n(u);U!==null&&Y(O,U.startTime-G),X=!1}}break e}finally{h=null,g=J,v=!1}X=void 0}}finally{X?L():D=!1}}}var L;if(typeof I=="function")L=function(){I(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=V,L=function(){K.postMessage(null)}}else L=function(){S(V,0)};function Y(G,X){P=S(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var J=g;g=X;try{return G()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=g;g=G;try{return X()}finally{g=J}},t.unstable_scheduleCallback=function(G,X,J){var ee=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,G){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,G={id:f++,callback:X,priorityLevel:G,startTime:J,expirationTime:Q,sortIndex:-1},J>ee?(G.sortIndex=J,e(u,G),n(c)===null&&G===n(u)&&(x?(A(P),P=-1):x=!0,Y(O,J-ee))):(G.sortIndex=Q,e(c,G),b||v||(b=!0,D||(D=!0,L()))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var X=g;return function(){var J=g;g=X;try{return G.apply(this,arguments)}finally{g=J}}}})(pA)),pA}var lL;function Yne(){return lL||(lL=1,hA.exports=Wne()),hA.exports}var gA={exports:{}},Jr={};var cL;function Xne(){if(cL)return Jr;cL=1;var t=Vp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},Jr.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},Jr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Jr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Jr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Jr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Jr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Jr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Jr.requestFormReset=function(c){r.d.r(c)},Jr.unstable_batchedUpdates=function(c,u){return c(u)},Jr.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},Jr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Jr.version="19.2.4",Jr}var uL;function n8(){if(uL)return gA.exports;uL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gA.exports=Xne(),gA.exports}var dL;function Qne(){if(dL)return vm;dL=1;var t=Yne(),e=Vp(),n=n8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var B=!1,q=E.child;q;){if(q===p){B=!0,p=E,y=k;break}if(q===y){B=!0,y=E,p=k;break}q=q.sibling}if(!B){for(q=k.child;q;){if(q===p){B=!0,p=k,y=E;break}if(q===y){B=!0,y=k,p=E;break}q=q.sibling}if(!B)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function K(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case A:return(l._context.displayName||"Context")+".Consumer";case N:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return d=l.displayName||null,d!==null?d:K(l.type)||"Memo";case C:d=l._payload,l=l._init;try{return K(l(d))}catch{}}return null}var Y=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ee=[],Q=-1;function U(l){return{current:l}}function Z(l){0>Q||(l.current=ee[Q],ee[Q]=null,Q--)}function te(l,d){Q++,ee[Q]=l.current,l.current=d}var W=U(null),ue=U(null),ie=U(null),oe=U(null);function Se(l,d){switch(te(ie,d),te(ue,l),te(W,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?A4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=A4(d),l=k4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(W),te(W,l)}function se(){Z(W),Z(ue),Z(ie)}function Ae(l){l.memoizedState!==null&&te(oe,l);var d=W.current,p=k4(d,l.type);d!==p&&(te(ue,l),te(W,p))}function ve(l){ue.current===l&&(Z(W),Z(ue)),oe.current===l&&(Z(oe),fm._currentValue=J)}var ne,Pe;function be(l){if(ne===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);ne=d&&d[1]||"",Pe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+Pe}var _e=!1;function Oe(l,d){if(!l||_e)return"";_e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var ye=we}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(we){ye=we}l.call(Ce.prototype)}}else{try{throw Error()}catch(we){ye=we}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&ye&&typeof we.stack=="string")return[we.stack,ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),B=k[0],q=k[1];if(B&&q){var re=B.split(`
`),ge=q.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ge.length&&!ge[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===ge.length)for(y=re.length-1,E=ge.length-1;1<=y&&0<=E&&re[y]!==ge[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==ge[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==ge[E]){var Te=`
`+re[y].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=y&&0<=E);break}}}finally{_e=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?be(p):""}function De(l,d){switch(l.tag){case 26:case 27:case 5:return be(l.type);case 16:return be("Lazy");case 13:return l.child!==d&&d!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Oe(l.type,!1);case 11:return Oe(l.type.render,!1);case 1:return Oe(l.type,!0);case 31:return be("Activity");default:return""}}function Ye(l){try{var d="",p=null;do d+=De(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ve=Object.prototype.hasOwnProperty,it=t.unstable_scheduleCallback,Bt=t.unstable_cancelCallback,Bn=t.unstable_shouldYield,wn=t.unstable_requestPaint,yt=t.unstable_now,Ft=t.unstable_getCurrentPriorityLevel,Qr=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,mt=t.unstable_NormalPriority,ki=t.unstable_LowPriority,Zr=t.unstable_IdlePriority,Pn=t.log,Ar=t.unstable_setDisableYieldValue,Fn=null,Sn=null;function kr(l){if(typeof Pn=="function"&&Ar(l),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Fn,l)}catch{}}var Ut=Math.clz32?Math.clz32:es,ur=Math.log,di=Math.LN2;function es(l){return l>>>=0,l===0?32:31-(ur(l)/di|0)|0}var xt=256,_n=262144,En=4194304;function Xi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function wa(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=Xi(y):(B&=q,B!==0?E=Xi(B):p||(p=q&~l,p!==0&&(E=Xi(p))))):(q=y&~k,q!==0?E=Xi(q):B!==0?E=Xi(B):p||(p=y&~l,p!==0&&(E=Xi(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function fi(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function pE(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wy(){var l=En;return En<<=1,(En&62914560)===0&&(En=4194304),l}function Ls(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function _u(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function gE(l,d,p,y,E,k){var B=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,re=l.expirationTimes,ge=l.hiddenUpdates;for(p=B&~p;0<p;){var Te=31-Ut(p),Ce=1<<Te;q[Te]=0,re[Te]=-1;var ye=ge[Te];if(ye!==null)for(ge[Te]=null,Te=0;Te<ye.length;Te++){var we=ye[Te];we!==null&&(we.lane&=-536870913)}p&=~Ce}y!==0&&Eu(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(B&~d))}function Eu(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-Ut(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function vg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-Ut(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function yg(l,d){var p=d&-d;return p=(p&42)!==0?1:Tu(p),(p&(l.suspendedLanes|d))!==0?0:p}function Tu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Vo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Sy(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:X4(l.type))}function ts(l,d){var p=X.p;try{return X.p=l,d()}finally{X.p=p}}var ns=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ns,Cr="__reactProps$"+ns,Vs="__reactContainer$"+ns,yf="__reactEvents$"+ns,mE="__reactListeners$"+ns,_y="__reactHandles$"+ns,Ey="__reactResources$"+ns,Bs="__reactMarker$"+ns;function bf(l){delete l[Wn],delete l[Cr],delete l[yf],delete l[mE],delete l[_y]}function Fs(l){var d=l[Wn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Vs]||p[Wn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=R4(l);l!==null;){if(p=l[Wn])return p;l=R4(l)}return d}l=p,p=l.parentNode}return null}function Sa(l){if(l=l[Wn]||l[Vs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Qi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Us(l){var d=l[Ey];return d||(d=l[Ey]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Yn(l){l[Bs]=!0}var bg=new Set,xg={};function $s(l,d){qs(l,d),qs(l+"Capture",d)}function qs(l,d){for(xg[l]=d,l=0;l<d.length;l++)bg.add(d[l])}var wg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sg={},_g={};function Ty(l){return Ve.call(_g,l)?!0:Ve.call(Sg,l)?!1:wg.test(l)?_g[l]=!0:(Sg[l]=!0,!1)}function xf(l,d,p){if(Ty(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Zi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Xn(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function Ir(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Gl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Eg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(B){p=""+B,k.call(this,B)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function $t(l){if(!l._valueTracker){var d=Gl(l)?"checked":"value";l._valueTracker=Eg(l,d,""+l[d])}}function Au(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=Gl(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Gs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ku=/[\n"\\]/g;function Ci(l){return l.replace(ku,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function wf(l,d,p,y,E,k,B,q){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),d!=null?B==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Ir(d)):l.value!==""+Ir(d)&&(l.value=""+Ir(d)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),d!=null?Tg(l,B,Ir(d)):p!=null?Tg(l,B,Ir(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Ir(q):l.removeAttribute("name")}function Ay(l,d,p,y,E,k,B,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){$t(l);return}p=p!=null?""+Ir(p):"",d=d!=null?""+Ir(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),$t(l)}function Tg(l,d,p){d==="number"&&Gs(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Hl(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Ir(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function ky(l,d,p){if(d!=null&&(d=""+Ir(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Ir(p):""}function Kl(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Y(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Ir(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),$t(l)}function Ii(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Cy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ag(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||Cy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function kg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&Ag(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&Ag(l,k,d[k])}function Sf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _f(l){return Wl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function rs(){}var Cg=null;function _a(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Yl=null,Hs=null;function Cu(l){var d=Sa(l);if(d&&(l=d.stateNode)){var p=l[Cr]||null;e:switch(l=d.stateNode,d.type){case"input":if(wf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ci(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[Cr]||null;if(!E)throw Error(r(90));wf(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&Au(y)}break e;case"textarea":ky(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Hl(l,!!p.multiple,d,!1)}}}var Ef=!1;function Xl(l,d,p){if(Ef)return l(d,p);Ef=!0;try{var y=l(d);return y}finally{if(Ef=!1,(Yl!==null||Hs!==null)&&(Sb(),Yl&&(d=Yl,l=Hs,Hs=Yl=null,Cu(d),l)))for(d=0;d<l.length;d++)Cu(l[d])}}function is(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Cr]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=!1;if(Ea)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Iu=!1}var Ks=null,Ig=null,Pu=null;function Pg(){if(Pu)return Pu;var l,d=Ig,p=d.length,y,E="value"in Ks?Ks.value:Ks.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var B=p-l;for(y=1;y<=B&&d[p-y]===E[k-y];y++);return Pu=E.slice(l,1<y?1-y:void 0)}function Nu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Bo(){return!0}function as(){return!1}function Br(l){function d(p,y,E,k,B){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=B,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Bo:as,this.isPropagationStopped=as,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),d}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Br(Fo),Ql=h({},Fo,{view:0,detail:0}),Ng=Br(Ql),Zl,Tf,Ys,Af=h({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ys&&(Ys&&l.type==="mousemove"?(Zl=l.screenX-Ys.screenX,Tf=l.screenY-Ys.screenY):Tf=Zl=0,Ys=l),Zl)},movementY:function(l){return"movementY"in l?l.movementY:Tf}}),Og=Br(Af),Ou=h({},Af,{dataTransfer:0}),Py=Br(Ou),Ny=h({},Ql,{relatedTarget:0}),Du=Br(Ny),Dg=h({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),Oy=Br(Dg),kf=h({},Fo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Dy=Br(kf),Ry=h({},Fo,{data:0}),Xs=Br(Ry),My={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ly(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=zy[l])?!!d[l]:!1}function Jl(){return Ly}var hi=h({},Ql,{key:function(l){if(l.key){var d=My[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Nu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?jy[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jl,charCode:function(l){return l.type==="keypress"?Nu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Nu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Vy=Br(hi),By=h({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=Br(By),_=h({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jl}),j=Br(_),F=h({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Br(F),he=h({},Af,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Br(he),je=h({},Fo,{newState:0,oldState:0}),ct=Br(je),Un=[9,13,27,32],Rt=Ea&&"CompositionEvent"in window,mn=null;Ea&&"documentMode"in document&&(mn=document.documentMode);var Ta=Ea&&"TextEvent"in window&&!mn,Qs=Ea&&(!Rt||mn&&8<mn&&11>=mn),ss=" ",os=!1;function Ru(l,d){switch(l){case"keyup":return Un.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var If=!1;function hte(l,d){switch(l){case"compositionend":return Cf(d);case"keypress":return d.which!==32?null:(os=!0,ss);case"textInput":return l=d.data,l===ss&&os?null:l;default:return null}}function pte(l,d){if(If)return l==="compositionend"||!Rt&&Ru(l,d)?(l=Pg(),Pu=Ig=Ks=null,If=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Qs&&d.locale!=="ko"?null:d.data;default:return null}}var gte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!gte[l.type]:d==="textarea"}function LM(l,d,p,y){Yl?Hs?Hs.push(y):Hs=[y]:Yl=y,d=Ib(d,"onChange"),0<d.length&&(p=new Ws("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Rg=null,Mg=null;function mte(l){x4(l,0)}function Fy(l){var d=Qi(l);if(Au(d))return l}function VM(l,d){if(l==="change")return d}var BM=!1;if(Ea){var vE;if(Ea){var yE="oninput"in document;if(!yE){var FM=document.createElement("div");FM.setAttribute("oninput","return;"),yE=typeof FM.oninput=="function"}vE=yE}else vE=!1;BM=vE&&(!document.documentMode||9<document.documentMode)}function UM(){Rg&&(Rg.detachEvent("onpropertychange",$M),Mg=Rg=null)}function $M(l){if(l.propertyName==="value"&&Fy(Mg)){var d=[];LM(d,Mg,l,_a(l)),Xl(mte,d)}}function vte(l,d,p){l==="focusin"?(UM(),Rg=d,Mg=p,Rg.attachEvent("onpropertychange",$M)):l==="focusout"&&UM()}function yte(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Fy(Mg)}function bte(l,d){if(l==="click")return Fy(d)}function xte(l,d){if(l==="input"||l==="change")return Fy(d)}function wte(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ji=typeof Object.is=="function"?Object.is:wte;function jg(l,d){if(Ji(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Ve.call(d,E)||!Ji(l[E],d[E]))return!1}return!0}function qM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function GM(l,d){var p=qM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=qM(p)}}function HM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?HM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function KM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Gs(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Gs(l.document)}return d}function bE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Ste=Ea&&"documentMode"in document&&11>=document.documentMode,Pf=null,xE=null,zg=null,wE=!1;function WM(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;wE||Pf==null||Pf!==Gs(y)||(y=Pf,"selectionStart"in y&&bE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),zg&&jg(zg,y)||(zg=y,y=Ib(xE,"onSelect"),0<y.length&&(d=new Ws("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Pf)))}function Mu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Nf={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionrun:Mu("Transition","TransitionRun"),transitionstart:Mu("Transition","TransitionStart"),transitioncancel:Mu("Transition","TransitionCancel"),transitionend:Mu("Transition","TransitionEnd")},SE={},YM={};Ea&&(YM=document.createElement("div").style,"AnimationEvent"in window||(delete Nf.animationend.animation,delete Nf.animationiteration.animation,delete Nf.animationstart.animation),"TransitionEvent"in window||delete Nf.transitionend.transition);function ju(l){if(SE[l])return SE[l];if(!Nf[l])return l;var d=Nf[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in YM)return SE[l]=d[p];return l}var XM=ju("animationend"),QM=ju("animationiteration"),ZM=ju("animationstart"),_te=ju("transitionrun"),Ete=ju("transitionstart"),Tte=ju("transitioncancel"),JM=ju("transitionend"),ej=new Map,_E="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_E.push("scrollEnd");function ls(l,d){ej.set(l,d),$s(d,[l])}var Uy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Aa=[],Of=0,EE=0;function $y(){for(var l=Of,d=EE=Of=0;d<l;){var p=Aa[d];Aa[d++]=null;var y=Aa[d];Aa[d++]=null;var E=Aa[d];Aa[d++]=null;var k=Aa[d];if(Aa[d++]=null,y!==null&&E!==null){var B=y.pending;B===null?E.next=E:(E.next=B.next,B.next=E),y.pending=E}k!==0&&tj(p,E,k)}}function qy(l,d,p,y){Aa[Of++]=l,Aa[Of++]=d,Aa[Of++]=p,Aa[Of++]=y,EE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function TE(l,d,p,y){return qy(l,d,p,y),Gy(l)}function zu(l,d){return qy(l,null,null,d),Gy(l)}function tj(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-Ut(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Gy(l){if(50<am)throw am=0,RT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Df={};function Ate(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(l,d,p,y){return new Ate(l,d,p,y)}function AE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function $o(l,d){var p=l.alternate;return p===null?(p=ea(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function nj(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Hy(l,d,p,y,E,k){var B=0;if(y=l,typeof l=="function")AE(l)&&(B=1);else if(typeof l=="string")B=Nne(l,p,W.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=ea(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return Lu(p.children,E,k,d);case w:B=8,E|=24;break;case S:return l=ea(12,p,d,E|2),l.elementType=S,l.lanes=k,l;case O:return l=ea(13,p,d,E),l.elementType=O,l.lanes=k,l;case D:return l=ea(19,p,d,E),l.elementType=D,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:B=10;break e;case A:B=9;break e;case N:B=11;break e;case P:B=14;break e;case C:B=16,y=null;break e}B=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=ea(B,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function Lu(l,d,p,y){return l=ea(7,l,y,d),l.lanes=p,l}function kE(l,d,p){return l=ea(6,l,null,d),l.lanes=p,l}function rj(l){var d=ea(18,null,null,0);return d.stateNode=l,d}function CE(l,d,p){return d=ea(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var ij=new WeakMap;function ka(l,d){if(typeof l=="object"&&l!==null){var p=ij.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ye(d)},ij.set(l,d),d)}return{value:l,source:d,stack:Ye(d)}}var Rf=[],Mf=0,Ky=null,Lg=0,Ca=[],Ia=0,ec=null,Zs=1,Js="";function qo(l,d){Rf[Mf++]=Lg,Rf[Mf++]=Ky,Ky=l,Lg=d}function aj(l,d,p){Ca[Ia++]=Zs,Ca[Ia++]=Js,Ca[Ia++]=ec,ec=l;var y=Zs;l=Js;var E=32-Ut(y)-1;y&=~(1<<E),p+=1;var k=32-Ut(d)+E;if(30<k){var B=E-E%5;k=(y&(1<<B)-1).toString(32),y>>=B,E-=B,Zs=1<<32-Ut(d)+E|p<<E|y,Js=k+l}else Zs=1<<k|p<<E|y,Js=l}function IE(l){l.return!==null&&(qo(l,1),aj(l,1,0))}function PE(l){for(;l===Ky;)Ky=Rf[--Mf],Rf[Mf]=null,Lg=Rf[--Mf],Rf[Mf]=null;for(;l===ec;)ec=Ca[--Ia],Ca[Ia]=null,Js=Ca[--Ia],Ca[Ia]=null,Zs=Ca[--Ia],Ca[Ia]=null}function sj(l,d){Ca[Ia++]=Zs,Ca[Ia++]=Js,Ca[Ia++]=ec,Zs=d.id,Js=d.overflow,ec=l}var Fr=null,un=null,Ct=!1,tc=null,Pa=!1,NE=Error(r(519));function nc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vg(ka(d,l)),NE}function oj(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Wn]=l,d[Cr]=y,p){case"dialog":St("cancel",d),St("close",d);break;case"iframe":case"object":case"embed":St("load",d);break;case"video":case"audio":for(p=0;p<om.length;p++)St(om[p],d);break;case"source":St("error",d);break;case"img":case"image":case"link":St("error",d),St("load",d);break;case"details":St("toggle",d);break;case"input":St("invalid",d),Ay(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":St("invalid",d);break;case"textarea":St("invalid",d),Kl(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||E4(d.textContent,p)?(y.popover!=null&&(St("beforetoggle",d),St("toggle",d)),y.onScroll!=null&&St("scroll",d),y.onScrollEnd!=null&&St("scrollend",d),y.onClick!=null&&(d.onclick=rs),d=!0):d=!1,d||nc(l,!0)}function lj(l){for(Fr=l.return;Fr;)switch(Fr.tag){case 5:case 31:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:Fr=Fr.return}}function jf(l){if(l!==Fr)return!1;if(!Ct)return lj(l),Ct=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||YT(l.type,l.memoizedProps)),p=!p),p&&un&&nc(l),lj(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=D4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=D4(l)}else d===27?(d=un,mc(l.type)?(l=eA,eA=null,un=l):un=d):un=Fr?Oa(l.stateNode.nextSibling):null;return!0}function Vu(){un=Fr=null,Ct=!1}function OE(){var l=tc;return l!==null&&(Di===null?Di=l:Di.push.apply(Di,l),tc=null),l}function Vg(l){tc===null?tc=[l]:tc.push(l)}var DE=U(null),Bu=null,Go=null;function rc(l,d,p){te(DE,d._currentValue),d._currentValue=p}function Ho(l){l._currentValue=DE.current,Z(DE)}function RE(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function ME(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var B=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var re=0;re<d.length;re++)if(q.context===d[re]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),RE(k.return,p,l),y||(B=null);break e}k=q.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(r(341));B.lanes|=p,k=B.alternate,k!==null&&(k.lanes|=p),RE(B,p,l),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===l){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function zf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var q=E.type;Ji(E.pendingProps.value,B.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(B=E.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(fm):l=[fm])}E=E.return}l!==null&&ME(d,l,p,y),d.flags|=262144}function Wy(l){for(l=l.firstContext;l!==null;){if(!Ji(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Fu(l){Bu=l,Go=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ur(l){return cj(Bu,l)}function Yy(l,d){return Bu===null&&Fu(l),cj(l,d)}function cj(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Go===null){if(l===null)throw Error(r(308));Go=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Go=Go.next=d;return p}var kte=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},Cte=t.unstable_scheduleCallback,Ite=t.unstable_NormalPriority,Qn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jE(){return{controller:new kte,data:new Map,refCount:0}}function Bg(l){l.refCount--,l.refCount===0&&Cte(Ite,function(){l.controller.abort()})}var Fg=null,zE=0,Lf=0,Vf=null;function Pte(l,d){if(Fg===null){var p=Fg=[];zE=0,Lf=BT(),Vf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return zE++,d.then(uj,uj),d}function uj(){if(--zE===0&&Fg!==null){Vf!==null&&(Vf.status="fulfilled");var l=Fg;Fg=null,Lf=0,Vf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Nte(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var dj=G.S;G.S=function(l,d){Wz=yt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Pte(l,d),dj!==null&&dj(l,d)};var Uu=U(null);function LE(){var l=Uu.current;return l!==null?l:rn.pooledCache}function Xy(l,d){d===null?te(Uu,Uu.current):te(Uu,d.pool)}function fj(){var l=LE();return l===null?null:{parent:Qn._currentValue,pool:l}}var Bf=Error(r(460)),VE=Error(r(474)),Qy=Error(r(542)),Zy={then:function(){}};function hj(l){return l=l.status,l==="fulfilled"||l==="rejected"}function pj(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(rs,rs),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,mj(l),l;default:if(typeof d.status=="string")d.then(rs,rs);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,mj(l),l}throw qu=d,Bf}}function $u(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(qu=p,Bf):p}}var qu=null;function gj(){if(qu===null)throw Error(r(459));var l=qu;return qu=null,l}function mj(l){if(l===Bf||l===Qy)throw Error(r(483))}var Ff=null,Ug=0;function Jy(l){var d=Ug;return Ug+=1,Ff===null&&(Ff=[]),pj(Ff,l,d)}function $g(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function eb(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function vj(l){function d(de,ce){if(l){var pe=de.deletions;pe===null?(de.deletions=[ce],de.flags|=16):pe.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)d(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=$o(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,pe){return de.index=pe,l?(pe=de.alternate,pe!==null?(pe=pe.index,pe<ce?(de.flags|=67108866,ce):pe):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function B(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,pe,ke){return ce===null||ce.tag!==6?(ce=kE(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function re(de,ce,pe,ke){var Je=pe.type;return Je===x?Te(de,ce,pe.props.children,ke,pe.key):ce!==null&&(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&$u(Je)===ce.type)?(ce=E(ce,pe.props),$g(ce,pe),ce.return=de,ce):(ce=Hy(pe.type,pe.key,pe.props,null,de.mode,ke),$g(ce,pe),ce.return=de,ce)}function ge(de,ce,pe,ke){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==pe.containerInfo||ce.stateNode.implementation!==pe.implementation?(ce=CE(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe.children||[]),ce.return=de,ce)}function Te(de,ce,pe,ke,Je){return ce===null||ce.tag!==7?(ce=Lu(pe,de.mode,ke,Je),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function Ce(de,ce,pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=kE(""+ce,de.mode,pe),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return pe=Hy(ce.type,ce.key,ce.props,null,de.mode,pe),$g(pe,ce),pe.return=de,pe;case b:return ce=CE(ce,de.mode,pe),ce.return=de,ce;case C:return ce=$u(ce),Ce(de,ce,pe)}if(Y(ce)||L(ce))return ce=Lu(ce,de.mode,pe,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,Jy(ce),pe);if(ce.$$typeof===I)return Ce(de,Yy(de,ce),pe);eb(de,ce)}return null}function ye(de,ce,pe,ke){var Je=ce!==null?ce.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Je!==null?null:q(de,ce,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:return pe.key===Je?re(de,ce,pe,ke):null;case b:return pe.key===Je?ge(de,ce,pe,ke):null;case C:return pe=$u(pe),ye(de,ce,pe,ke)}if(Y(pe)||L(pe))return Je!==null?null:Te(de,ce,pe,ke,null);if(typeof pe.then=="function")return ye(de,ce,Jy(pe),ke);if(pe.$$typeof===I)return ye(de,ce,Yy(de,pe),ke);eb(de,pe)}return null}function we(de,ce,pe,ke,Je){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return de=de.get(pe)||null,q(ce,de,""+ke,Je);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return de=de.get(ke.key===null?pe:ke.key)||null,re(ce,de,ke,Je);case b:return de=de.get(ke.key===null?pe:ke.key)||null,ge(ce,de,ke,Je);case C:return ke=$u(ke),we(de,ce,pe,ke,Je)}if(Y(ke)||L(ke))return de=de.get(pe)||null,Te(ce,de,ke,Je,null);if(typeof ke.then=="function")return we(de,ce,pe,Jy(ke),Je);if(ke.$$typeof===I)return we(de,ce,pe,Yy(ce,ke),Je);eb(ce,ke)}return null}function $e(de,ce,pe,ke){for(var Je=null,Nt=null,We=ce,ft=ce=0,Tt=null;We!==null&&ft<pe.length;ft++){We.index>ft?(Tt=We,We=null):Tt=We.sibling;var Ot=ye(de,We,pe[ft],ke);if(Ot===null){We===null&&(We=Tt);break}l&&We&&Ot.alternate===null&&d(de,We),ce=k(Ot,ce,ft),Nt===null?Je=Ot:Nt.sibling=Ot,Nt=Ot,We=Tt}if(ft===pe.length)return p(de,We),Ct&&qo(de,ft),Je;if(We===null){for(;ft<pe.length;ft++)We=Ce(de,pe[ft],ke),We!==null&&(ce=k(We,ce,ft),Nt===null?Je=We:Nt.sibling=We,Nt=We);return Ct&&qo(de,ft),Je}for(We=y(We);ft<pe.length;ft++)Tt=we(We,de,ft,pe[ft],ke),Tt!==null&&(l&&Tt.alternate!==null&&We.delete(Tt.key===null?ft:Tt.key),ce=k(Tt,ce,ft),Nt===null?Je=Tt:Nt.sibling=Tt,Nt=Tt);return l&&We.forEach(function(wc){return d(de,wc)}),Ct&&qo(de,ft),Je}function at(de,ce,pe,ke){if(pe==null)throw Error(r(151));for(var Je=null,Nt=null,We=ce,ft=ce=0,Tt=null,Ot=pe.next();We!==null&&!Ot.done;ft++,Ot=pe.next()){We.index>ft?(Tt=We,We=null):Tt=We.sibling;var wc=ye(de,We,Ot.value,ke);if(wc===null){We===null&&(We=Tt);break}l&&We&&wc.alternate===null&&d(de,We),ce=k(wc,ce,ft),Nt===null?Je=wc:Nt.sibling=wc,Nt=wc,We=Tt}if(Ot.done)return p(de,We),Ct&&qo(de,ft),Je;if(We===null){for(;!Ot.done;ft++,Ot=pe.next())Ot=Ce(de,Ot.value,ke),Ot!==null&&(ce=k(Ot,ce,ft),Nt===null?Je=Ot:Nt.sibling=Ot,Nt=Ot);return Ct&&qo(de,ft),Je}for(We=y(We);!Ot.done;ft++,Ot=pe.next())Ot=we(We,de,ft,Ot.value,ke),Ot!==null&&(l&&Ot.alternate!==null&&We.delete(Ot.key===null?ft:Ot.key),ce=k(Ot,ce,ft),Nt===null?Je=Ot:Nt.sibling=Ot,Nt=Ot);return l&&We.forEach(function(Une){return d(de,Une)}),Ct&&qo(de,ft),Je}function Zt(de,ce,pe,ke){if(typeof pe=="object"&&pe!==null&&pe.type===x&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:e:{for(var Je=pe.key;ce!==null;){if(ce.key===Je){if(Je=pe.type,Je===x){if(ce.tag===7){p(de,ce.sibling),ke=E(ce,pe.props.children),ke.return=de,de=ke;break e}}else if(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&$u(Je)===ce.type){p(de,ce.sibling),ke=E(ce,pe.props),$g(ke,pe),ke.return=de,de=ke;break e}p(de,ce);break}else d(de,ce);ce=ce.sibling}pe.type===x?(ke=Lu(pe.props.children,de.mode,ke,pe.key),ke.return=de,de=ke):(ke=Hy(pe.type,pe.key,pe.props,null,de.mode,ke),$g(ke,pe),ke.return=de,de=ke)}return B(de);case b:e:{for(Je=pe.key;ce!==null;){if(ce.key===Je)if(ce.tag===4&&ce.stateNode.containerInfo===pe.containerInfo&&ce.stateNode.implementation===pe.implementation){p(de,ce.sibling),ke=E(ce,pe.children||[]),ke.return=de,de=ke;break e}else{p(de,ce);break}else d(de,ce);ce=ce.sibling}ke=CE(pe,de.mode,ke),ke.return=de,de=ke}return B(de);case C:return pe=$u(pe),Zt(de,ce,pe,ke)}if(Y(pe))return $e(de,ce,pe,ke);if(L(pe)){if(Je=L(pe),typeof Je!="function")throw Error(r(150));return pe=Je.call(pe),at(de,ce,pe,ke)}if(typeof pe.then=="function")return Zt(de,ce,Jy(pe),ke);if(pe.$$typeof===I)return Zt(de,ce,Yy(de,pe),ke);eb(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ce!==null&&ce.tag===6?(p(de,ce.sibling),ke=E(ce,pe),ke.return=de,de=ke):(p(de,ce),ke=kE(pe,de.mode,ke),ke.return=de,de=ke),B(de)):p(de,ce)}return function(de,ce,pe,ke){try{Ug=0;var Je=Zt(de,ce,pe,ke);return Ff=null,Je}catch(We){if(We===Bf||We===Qy)throw We;var Nt=ea(29,We,null,de.mode);return Nt.lanes=ke,Nt.return=de,Nt}}}var Gu=vj(!0),yj=vj(!1),ic=!1;function BE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function FE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ac(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function sc(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Mt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Gy(l),tj(l,null,p),d}return qy(l,y,d,p),Gy(l)}function qg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,vg(l,p)}}function UE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var B={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=B:k=k.next=B,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var $E=!1;function Gg(){if($E){var l=Vf;if(l!==null)throw l}}function Hg(l,d,p,y){$E=!1;var E=l.updateQueue;ic=!1;var k=E.firstBaseUpdate,B=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var re=q,ge=re.next;re.next=null,B===null?k=ge:B.next=ge,B=re;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==B&&(q===null?Te.firstBaseUpdate=ge:q.next=ge,Te.lastBaseUpdate=re))}if(k!==null){var Ce=E.baseState;B=0,Te=ge=re=null,q=k;do{var ye=q.lane&-536870913,we=ye!==q.lane;if(we?(Et&ye)===ye:(y&ye)===ye){ye!==0&&ye===Lf&&($E=!0),Te!==null&&(Te=Te.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var $e=l,at=q;ye=d;var Zt=p;switch(at.tag){case 1:if($e=at.payload,typeof $e=="function"){Ce=$e.call(Zt,Ce,ye);break e}Ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=at.payload,ye=typeof $e=="function"?$e.call(Zt,Ce,ye):$e,ye==null)break e;Ce=h({},Ce,ye);break e;case 2:ic=!0}}ye=q.callback,ye!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[ye]:we.push(ye))}else we={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ge=Te=we,re=Ce):Te=Te.next=we,B|=ye;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(re=Ce),E.baseState=re,E.firstBaseUpdate=ge,E.lastBaseUpdate=Te,k===null&&(E.shared.lanes=0),dc|=B,l.lanes=B,l.memoizedState=Ce}}function bj(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function xj(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)bj(p[l],d)}var Uf=U(null),tb=U(0);function wj(l,d){l=tl,te(tb,l),te(Uf,d),tl=l|d.baseLanes}function qE(){te(tb,tl),te(Uf,Uf.current)}function GE(){tl=tb.current,Z(Uf),Z(tb)}var ta=U(null),Na=null;function oc(l){var d=l.alternate;te($n,$n.current&1),te(ta,l),Na===null&&(d===null||Uf.current!==null||d.memoizedState!==null)&&(Na=l)}function HE(l){te($n,$n.current),te(ta,l),Na===null&&(Na=l)}function Sj(l){l.tag===22?(te($n,$n.current),te(ta,l),Na===null&&(Na=l)):lc()}function lc(){te($n,$n.current),te(ta,ta.current)}function na(l){Z(ta),Na===l&&(Na=null),Z($n)}var $n=U(0);function nb(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||ZT(p)||JT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Ko=0,ut=null,Xt=null,Zn=null,rb=!1,$f=!1,Hu=!1,ib=0,Kg=0,qf=null,Ote=0;function Nn(){throw Error(r(321))}function KE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ji(l[p],d[p]))return!1;return!0}function WE(l,d,p,y,E,k){return Ko=k,ut=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?az:cT,Hu=!1,k=p(y,E),Hu=!1,$f&&(k=Ej(d,p,y,E)),_j(l),k}function _j(l){G.H=Xg;var d=Xt!==null&&Xt.next!==null;if(Ko=0,Zn=Xt=ut=null,rb=!1,Kg=0,qf=null,d)throw Error(r(300));l===null||Jn||(l=l.dependencies,l!==null&&Wy(l)&&(Jn=!0))}function Ej(l,d,p,y){ut=l;var E=0;do{if($f&&(qf=null),Kg=0,$f=!1,25<=E)throw Error(r(301));if(E+=1,Zn=Xt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=sz,k=d(p,y)}while($f);return k}function Dte(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?Wg(d):d,l=l.useState()[0],(Xt!==null?Xt.memoizedState:null)!==l&&(ut.flags|=1024),d}function YE(){var l=ib!==0;return ib=0,l}function XE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function QE(l){if(rb){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}rb=!1}Ko=0,Zn=Xt=ut=null,$f=!1,Kg=ib=0,qf=null}function pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?ut.memoizedState=Zn=l:Zn=Zn.next=l,Zn}function qn(){if(Xt===null){var l=ut.alternate;l=l!==null?l.memoizedState:null}else l=Xt.next;var d=Zn===null?ut.memoizedState:Zn.next;if(d!==null)Zn=d,Xt=l;else{if(l===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Xt=l,l={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Zn===null?ut.memoizedState=Zn=l:Zn=Zn.next=l}return Zn}function ab(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wg(l){var d=Kg;return Kg+=1,qf===null&&(qf=[]),l=pj(qf,l,d),d=ut,(Zn===null?d.memoizedState:Zn.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?az:cT),l}function sb(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Wg(l);if(l.$$typeof===I)return Ur(l)}throw Error(r(438,String(l)))}function ZE(l){var d=null,p=ut.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=ut.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=ab(),ut.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=M;return d.index++,p}function Wo(l,d){return typeof d=="function"?d(l):d}function ob(l){var d=qn();return JE(d,Xt,l)}function JE(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var B=E.next;E.next=k.next,k.next=B}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=B=null,re=null,ge=d,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(Et&Ce)===Ce:(Ko&Ce)===Ce){var ye=ge.revertLane;if(ye===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===Lf&&(Te=!0);else if((Ko&ye)===ye){ge=ge.next,ye===Lf&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=Ce,B=k):re=re.next=Ce,ut.lanes|=ye,dc|=ye;Ce=ge.action,Hu&&p(k,Ce),k=ge.hasEagerState?ge.eagerState:p(k,Ce)}else ye={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=ye,B=k):re=re.next=ye,ut.lanes|=Ce,dc|=Ce;ge=ge.next}while(ge!==null&&ge!==d);if(re===null?B=k:re.next=q,!Ji(k,l.memoizedState)&&(Jn=!0,Te&&(p=Vf,p!==null)))throw p;l.memoizedState=k,l.baseState=B,l.baseQueue=re,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function eT(l){var d=qn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var B=E=E.next;do k=l(k,B.action),B=B.next;while(B!==E);Ji(k,d.memoizedState)||(Jn=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function Tj(l,d,p){var y=ut,E=qn(),k=Ct;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var B=!Ji((Xt||E).memoizedState,p);if(B&&(E.memoizedState=p,Jn=!0),E=E.queue,rT(Cj.bind(null,y,E,l),[l]),E.getSnapshot!==d||B||Zn!==null&&Zn.memoizedState.tag&1){if(y.flags|=2048,Gf(9,{destroy:void 0},kj.bind(null,y,E,p,d),null),rn===null)throw Error(r(349));k||(Ko&127)!==0||Aj(y,d,p)}return p}function Aj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ut.updateQueue,d===null?(d=ab(),ut.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function kj(l,d,p,y){d.value=p,d.getSnapshot=y,Ij(d)&&Pj(l)}function Cj(l,d,p){return p(function(){Ij(d)&&Pj(l)})}function Ij(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ji(l,p)}catch{return!0}}function Pj(l){var d=zu(l,2);d!==null&&Ri(d,l,2)}function tT(l){var d=pi();if(typeof l=="function"){var p=l;if(l=p(),Hu){kr(!0);try{p()}finally{kr(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:l},d}function Nj(l,d,p,y){return l.baseState=p,JE(l,Xt,typeof y=="function"?y:Wo)}function Rte(l,d,p,y,E){if(ub(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){k.listeners.push(B)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,Oj(d,k)):(k.next=p.next,d.pending=p.next=k)}}function Oj(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,B={};G.T=B;try{var q=p(E,y),re=G.S;re!==null&&re(B,q),Dj(l,d,q)}catch(ge){nT(l,d,ge)}finally{k!==null&&B.types!==null&&(k.types=B.types),G.T=k}}else try{k=p(E,y),Dj(l,d,k)}catch(ge){nT(l,d,ge)}}function Dj(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Rj(l,d,y)},function(y){return nT(l,d,y)}):Rj(l,d,p)}function Rj(l,d,p){d.status="fulfilled",d.value=p,Mj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,Oj(l,p)))}function nT(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,Mj(d),d=d.next;while(d!==y)}l.action=null}function Mj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function jj(l,d){return d}function zj(l,d){if(Ct){var p=rn.formState;if(p!==null){e:{var y=ut;if(Ct){if(un){t:{for(var E=un,k=Pa;E.nodeType!==8;){if(!k){E=null;break t}if(E=Oa(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){un=Oa(E.nextSibling),y=E.data==="F!";break e}}nc(y)}y=!1}y&&(d=p[0])}}return p=pi(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jj,lastRenderedState:d},p.queue=y,p=nz.bind(null,ut,y),y.dispatch=p,y=tT(!1),k=lT.bind(null,ut,!1,y.queue),y=pi(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=Rte.bind(null,ut,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function Lj(l){var d=qn();return Vj(d,Xt,l)}function Vj(l,d,p){if(d=JE(l,d,jj)[0],l=ob(Wo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Wg(d)}catch(B){throw B===Bf?Qy:B}else y=d;d=qn();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(ut.flags|=2048,Gf(9,{destroy:void 0},Mte.bind(null,E,p),null)),[y,k,l]}function Mte(l,d){l.action=d}function Bj(l){var d=qn(),p=Xt;if(p!==null)return Vj(d,p,l);qn(),d=d.memoizedState,p=qn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Gf(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=ut.updateQueue,d===null&&(d=ab(),ut.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function Fj(){return qn().memoizedState}function lb(l,d,p,y){var E=pi();ut.flags|=l,E.memoizedState=Gf(1|d,{destroy:void 0},p,y===void 0?null:y)}function cb(l,d,p,y){var E=qn();y=y===void 0?null:y;var k=E.memoizedState.inst;Xt!==null&&y!==null&&KE(y,Xt.memoizedState.deps)?E.memoizedState=Gf(d,k,p,y):(ut.flags|=l,E.memoizedState=Gf(1|d,k,p,y))}function Uj(l,d){lb(8390656,8,l,d)}function rT(l,d){cb(2048,8,l,d)}function jte(l){ut.flags|=4;var d=ut.updateQueue;if(d===null)d=ab(),ut.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function $j(l){var d=qn().memoizedState;return jte({ref:d,nextImpl:l}),function(){if((Mt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function qj(l,d){return cb(4,2,l,d)}function Gj(l,d){return cb(4,4,l,d)}function Hj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Kj(l,d,p){p=p!=null?p.concat([l]):null,cb(4,4,Hj.bind(null,d,l),p)}function iT(){}function Wj(l,d){var p=qn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&KE(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function Yj(l,d){var p=qn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&KE(d,y[1]))return y[0];if(y=l(),Hu){kr(!0);try{l()}finally{kr(!1)}}return p.memoizedState=[y,d],y}function aT(l,d,p){return p===void 0||(Ko&1073741824)!==0&&(Et&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=Xz(),ut.lanes|=l,dc|=l,p)}function Xj(l,d,p,y){return Ji(p,d)?p:Uf.current!==null?(l=aT(l,p,y),Ji(l,d)||(Jn=!0),l):(Ko&42)===0||(Ko&1073741824)!==0&&(Et&261930)===0?(Jn=!0,l.memoizedState=p):(l=Xz(),ut.lanes|=l,dc|=l,d)}function Qj(l,d,p,y,E){var k=X.p;X.p=k!==0&&8>k?k:8;var B=G.T,q={};G.T=q,lT(l,!1,d,p);try{var re=E(),ge=G.S;if(ge!==null&&ge(q,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Te=Nte(re,y);Yg(l,d,Te,aa(l))}else Yg(l,d,y,aa(l))}catch(Ce){Yg(l,d,{then:function(){},status:"rejected",reason:Ce},aa())}finally{X.p=k,B!==null&&q.types!==null&&(B.types=q.types),G.T=B}}function zte(){}function sT(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=Zj(l).queue;Qj(l,E,d,J,p===null?zte:function(){return Jj(l),p(y)})}function Zj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Jj(l){var d=Zj(l);d.next===null&&(d=l.alternate.memoizedState),Yg(l,d.next.queue,{},aa())}function oT(){return Ur(fm)}function ez(){return qn().memoizedState}function tz(){return qn().memoizedState}function Lte(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=aa();l=ac(p);var y=sc(d,l,p);y!==null&&(Ri(y,d,p),qg(y,d,p)),d={cache:jE()},l.payload=d;return}d=d.return}}function Vte(l,d,p){var y=aa();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ub(l)?rz(d,p):(p=TE(l,d,p,y),p!==null&&(Ri(p,l,y),iz(p,d,y)))}function nz(l,d,p){var y=aa();Yg(l,d,p,y)}function Yg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(ub(l))rz(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var B=d.lastRenderedState,q=k(B,p);if(E.hasEagerState=!0,E.eagerState=q,Ji(q,B))return qy(l,d,E,0),rn===null&&$y(),!1}catch{}if(p=TE(l,d,E,y),p!==null)return Ri(p,l,y),iz(p,d,y),!0}return!1}function lT(l,d,p,y){if(y={lane:2,revertLane:BT(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ub(l)){if(d)throw Error(r(479))}else d=TE(l,p,y,2),d!==null&&Ri(d,l,2)}function ub(l){var d=l.alternate;return l===ut||d!==null&&d===ut}function rz(l,d){$f=rb=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function iz(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,vg(l,p)}}var Xg={readContext:Ur,use:sb,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};Xg.useEffectEvent=Nn;var az={readContext:Ur,use:sb,useCallback:function(l,d){return pi().memoizedState=[l,d===void 0?null:d],l},useContext:Ur,useEffect:Uj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,lb(4194308,4,Hj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return lb(4194308,4,l,d)},useInsertionEffect:function(l,d){lb(4,2,l,d)},useMemo:function(l,d){var p=pi();d=d===void 0?null:d;var y=l();if(Hu){kr(!0);try{l()}finally{kr(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=pi();if(p!==void 0){var E=p(d);if(Hu){kr(!0);try{p(d)}finally{kr(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Vte.bind(null,ut,l),[y.memoizedState,l]},useRef:function(l){var d=pi();return l={current:l},d.memoizedState=l},useState:function(l){l=tT(l);var d=l.queue,p=nz.bind(null,ut,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:iT,useDeferredValue:function(l,d){var p=pi();return aT(p,l,d)},useTransition:function(){var l=tT(!1);return l=Qj.bind(null,ut,l.queue,!0,!1),pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=ut,E=pi();if(Ct){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),rn===null)throw Error(r(349));(Et&127)!==0||Aj(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,Uj(Cj.bind(null,y,k,l),[l]),y.flags|=2048,Gf(9,{destroy:void 0},kj.bind(null,y,k,p,d),null),p},useId:function(){var l=pi(),d=rn.identifierPrefix;if(Ct){var p=Js,y=Zs;p=(y&~(1<<32-Ut(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=ib++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=Ote++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:oT,useFormState:zj,useActionState:zj,useOptimistic:function(l){var d=pi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=lT.bind(null,ut,!0,p),p.dispatch=d,[l,d]},useMemoCache:ZE,useCacheRefresh:function(){return pi().memoizedState=Lte.bind(null,ut)},useEffectEvent:function(l){var d=pi(),p={impl:l};return d.memoizedState=p,function(){if((Mt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},cT={readContext:Ur,use:sb,useCallback:Wj,useContext:Ur,useEffect:rT,useImperativeHandle:Kj,useInsertionEffect:qj,useLayoutEffect:Gj,useMemo:Yj,useReducer:ob,useRef:Fj,useState:function(){return ob(Wo)},useDebugValue:iT,useDeferredValue:function(l,d){var p=qn();return Xj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=ob(Wo)[0],d=qn().memoizedState;return[typeof l=="boolean"?l:Wg(l),d]},useSyncExternalStore:Tj,useId:ez,useHostTransitionStatus:oT,useFormState:Lj,useActionState:Lj,useOptimistic:function(l,d){var p=qn();return Nj(p,Xt,l,d)},useMemoCache:ZE,useCacheRefresh:tz};cT.useEffectEvent=$j;var sz={readContext:Ur,use:sb,useCallback:Wj,useContext:Ur,useEffect:rT,useImperativeHandle:Kj,useInsertionEffect:qj,useLayoutEffect:Gj,useMemo:Yj,useReducer:eT,useRef:Fj,useState:function(){return eT(Wo)},useDebugValue:iT,useDeferredValue:function(l,d){var p=qn();return Xt===null?aT(p,l,d):Xj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=eT(Wo)[0],d=qn().memoizedState;return[typeof l=="boolean"?l:Wg(l),d]},useSyncExternalStore:Tj,useId:ez,useHostTransitionStatus:oT,useFormState:Bj,useActionState:Bj,useOptimistic:function(l,d){var p=qn();return Xt!==null?Nj(p,Xt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:ZE,useCacheRefresh:tz};sz.useEffectEvent=$j;function uT(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var dT={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=aa(),E=ac(y);E.payload=d,p!=null&&(E.callback=p),d=sc(l,E,y),d!==null&&(Ri(d,l,y),qg(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=aa(),E=ac(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=sc(l,E,y),d!==null&&(Ri(d,l,y),qg(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=aa(),y=ac(p);y.tag=2,d!=null&&(y.callback=d),d=sc(l,y,p),d!==null&&(Ri(d,l,p),qg(d,l,p))}};function oz(l,d,p,y,E,k,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,B):d.prototype&&d.prototype.isPureReactComponent?!jg(p,y)||!jg(E,k):!0}function lz(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&dT.enqueueReplaceState(d,d.state,null)}function Ku(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function cz(l){Uy(l)}function uz(l){console.error(l)}function dz(l){Uy(l)}function db(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function fz(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function fT(l,d,p){return p=ac(p),p.tag=3,p.payload={element:null},p.callback=function(){db(l,d)},p}function hz(l){return l=ac(l),l.tag=3,l}function pz(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){fz(d,p,y)}}var B=p.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){fz(d,p,y),typeof E!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function Bte(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&zf(d,p,E,!0),p=ta.current,p!==null){switch(p.tag){case 31:case 13:return Na===null?_b():p.alternate===null&&On===0&&(On=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Zy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),zT(l,y,E)),!1;case 22:return p.flags|=65536,y===Zy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),zT(l,y,E)),!1}throw Error(r(435,p.tag))}return zT(l,y,E),_b(),!1}if(Ct)return d=ta.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==NE&&(l=Error(r(422),{cause:y}),Vg(ka(l,p)))):(y!==NE&&(d=Error(r(423),{cause:y}),Vg(ka(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=ka(y,p),E=fT(l.stateNode,y,E),UE(l,E),On!==4&&(On=2)),!1;var k=Error(r(520),{cause:y});if(k=ka(k,p),im===null?im=[k]:im.push(k),On!==4&&(On=2),d===null)return!0;y=ka(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=fT(p.stateNode,y,l),UE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(fc===null||!fc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=hz(E),pz(E,l,p,y),UE(p,E),!1}p=p.return}while(p!==null);return!1}var hT=Error(r(461)),Jn=!1;function $r(l,d,p,y){d.child=l===null?yj(d,null,p,y):Gu(d,l.child,p,y)}function gz(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var B={};for(var q in y)q!=="ref"&&(B[q]=y[q])}else B=y;return Fu(d),y=WE(l,d,p,B,k,E),q=YE(),l!==null&&!Jn?(XE(l,d,E),Yo(l,d,E)):(Ct&&q&&IE(d),d.flags|=1,$r(l,d,y,E),d.child)}function mz(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!AE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,vz(l,d,k,y,E)):(l=Hy(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!wT(l,E)){var B=k.memoizedProps;if(p=p.compare,p=p!==null?p:jg,p(B,y)&&l.ref===d.ref)return Yo(l,d,E)}return d.flags|=1,l=$o(k,y),l.ref=d.ref,l.return=d,d.child=l}function vz(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(jg(k,y)&&l.ref===d.ref)if(Jn=!1,d.pendingProps=y=k,wT(l,E))(l.flags&131072)!==0&&(Jn=!0);else return d.lanes=l.lanes,Yo(l,d,E)}return pT(l,d,p,y,E)}function yz(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return bz(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Xy(d,k!==null?k.cachePool:null),k!==null?wj(d,k):qE(),Sj(d);else return y=d.lanes=536870912,bz(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(Xy(d,k.cachePool),wj(d,k),lc(),d.memoizedState=null):(l!==null&&Xy(d,null),qE(),lc());return $r(l,d,E,p),d.child}function Qg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function bz(l,d,p,y,E){var k=LE();return k=k===null?null:{parent:Qn._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&Xy(d,null),qE(),Sj(d),l!==null&&zf(l,d,y,!0),d.childLanes=E,null}function fb(l,d){return d=pb({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function xz(l,d,p){return Gu(d,l.child,null,p),l=fb(d,d.pendingProps),l.flags|=2,na(d),d.memoizedState=null,l}function Fte(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Ct){if(y.mode==="hidden")return l=fb(d,y),d.lanes=536870912,Qg(null,l);if(HE(d),(l=un)?(l=O4(l,Pa),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ec!==null?{id:Zs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},p=rj(l),p.return=d,d.child=p,Fr=d,un=null)):l=null,l===null)throw nc(d);return d.lanes=536870912,null}return fb(d,y)}var k=l.memoizedState;if(k!==null){var B=k.dehydrated;if(HE(d),E)if(d.flags&256)d.flags&=-257,d=xz(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Jn||zf(l,d,p,!1),E=(p&l.childLanes)!==0,Jn||E){if(y=rn,y!==null&&(B=yg(y,p),B!==0&&B!==k.retryLane))throw k.retryLane=B,zu(l,B),Ri(y,l,B),hT;_b(),d=xz(l,d,p)}else l=k.treeContext,un=Oa(B.nextSibling),Fr=d,Ct=!0,tc=null,Pa=!1,l!==null&&sj(d,l),d=fb(d,y),d.flags|=4096;return d}return l=$o(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function hb(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function pT(l,d,p,y,E){return Fu(d),p=WE(l,d,p,y,void 0,E),y=YE(),l!==null&&!Jn?(XE(l,d,E),Yo(l,d,E)):(Ct&&y&&IE(d),d.flags|=1,$r(l,d,p,E),d.child)}function wz(l,d,p,y,E,k){return Fu(d),d.updateQueue=null,p=Ej(d,y,p,E),_j(l),y=YE(),l!==null&&!Jn?(XE(l,d,k),Yo(l,d,k)):(Ct&&y&&IE(d),d.flags|=1,$r(l,d,p,k),d.child)}function Sz(l,d,p,y,E){if(Fu(d),d.stateNode===null){var k=Df,B=p.contextType;typeof B=="object"&&B!==null&&(k=Ur(B)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=dT,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},BE(d),B=p.contextType,k.context=typeof B=="object"&&B!==null?Ur(B):Df,k.state=d.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(uT(d,p,B,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(B=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),B!==k.state&&dT.enqueueReplaceState(k,k.state,null),Hg(d,y,k,E),Gg(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,re=Ku(p,q);k.props=re;var ge=k.context,Te=p.contextType;B=Df,typeof Te=="object"&&Te!==null&&(B=Ur(Te));var Ce=p.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||ge!==B)&&lz(d,k,y,B),ic=!1;var ye=d.memoizedState;k.state=ye,Hg(d,y,k,E),Gg(),ge=d.memoizedState,q||ye!==ge||ic?(typeof Ce=="function"&&(uT(d,p,Ce,y),ge=d.memoizedState),(re=ic||oz(d,p,re,y,ye,ge,B))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ge),k.props=y,k.state=ge,k.context=B,y=re):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,FE(l,d),B=d.memoizedProps,Te=Ku(p,B),k.props=Te,Ce=d.pendingProps,ye=k.context,ge=p.contextType,re=Df,typeof ge=="object"&&ge!==null&&(re=Ur(ge)),q=p.getDerivedStateFromProps,(ge=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(B!==Ce||ye!==re)&&lz(d,k,y,re),ic=!1,ye=d.memoizedState,k.state=ye,Hg(d,y,k,E),Gg();var we=d.memoizedState;B!==Ce||ye!==we||ic||l!==null&&l.dependencies!==null&&Wy(l.dependencies)?(typeof q=="function"&&(uT(d,p,q,y),we=d.memoizedState),(Te=ic||oz(d,p,Te,y,ye,we,re)||l!==null&&l.dependencies!==null&&Wy(l.dependencies))?(ge||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,re)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=re,y=Te):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,hb(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=Gu(d,l.child,null,E),d.child=Gu(d,null,p,E)):$r(l,d,p,E),d.memoizedState=k.state,l=d.child):l=Yo(l,d,E),l}function _z(l,d,p,y){return Vu(),d.flags|=256,$r(l,d,p,y),d.child}var gT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mT(l){return{baseLanes:l,cachePool:fj()}}function vT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ia),l}function Ez(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,B;if((B=k)||(B=l!==null&&l.memoizedState===null?!1:($n.current&2)!==0),B&&(E=!0,d.flags&=-129),B=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ct){if(E?oc(d):lc(),(l=un)?(l=O4(l,Pa),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ec!==null?{id:Zs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},p=rj(l),p.return=d,d.child=p,Fr=d,un=null)):l=null,l===null)throw nc(d);return JT(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(lc(),E=d.mode,q=pb({mode:"hidden",children:q},E),y=Lu(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=mT(p),y.childLanes=vT(l,B,p),d.memoizedState=gT,Qg(null,y)):(oc(d),yT(d,q))}var re=l.memoizedState;if(re!==null&&(q=re.dehydrated,q!==null)){if(k)d.flags&256?(oc(d),d.flags&=-257,d=bT(l,d,p)):d.memoizedState!==null?(lc(),d.child=l.child,d.flags|=128,d=null):(lc(),q=y.fallback,E=d.mode,y=pb({mode:"visible",children:y.children},E),q=Lu(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,Gu(d,l.child,null,p),y=d.child,y.memoizedState=mT(p),y.childLanes=vT(l,B,p),d.memoizedState=gT,d=Qg(null,y));else if(oc(d),JT(q)){if(B=q.nextSibling&&q.nextSibling.dataset,B)var ge=B.dgst;B=ge,y=Error(r(419)),y.stack="",y.digest=B,Vg({value:y,source:null,stack:null}),d=bT(l,d,p)}else if(Jn||zf(l,d,p,!1),B=(p&l.childLanes)!==0,Jn||B){if(B=rn,B!==null&&(y=yg(B,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,zu(l,y),Ri(B,l,y),hT;ZT(q)||_b(),d=bT(l,d,p)}else ZT(q)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,un=Oa(q.nextSibling),Fr=d,Ct=!0,tc=null,Pa=!1,l!==null&&sj(d,l),d=yT(d,y.children),d.flags|=4096);return d}return E?(lc(),q=y.fallback,E=d.mode,re=l.child,ge=re.sibling,y=$o(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,ge!==null?q=$o(ge,q):(q=Lu(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,Qg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=mT(p):(E=q.cachePool,E!==null?(re=Qn._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=fj(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=vT(l,B,p),d.memoizedState=gT,Qg(l.child,y)):(oc(d),p=l.child,l=p.sibling,p=$o(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(B=d.deletions,B===null?(d.deletions=[l],d.flags|=16):B.push(l)),d.child=p,d.memoizedState=null,p)}function yT(l,d){return d=pb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function pb(l,d){return l=ea(22,l,null,d),l.lanes=0,l}function bT(l,d,p){return Gu(d,l.child,null,p),l=yT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Tz(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),RE(l.return,d,p)}function xT(l,d,p,y,E,k){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=y,B.tail=p,B.tailMode=E,B.treeForkCount=k)}function Az(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var B=$n.current,q=(B&2)!==0;if(q?(B=B&1|2,d.flags|=128):B&=1,te($n,B),$r(l,d,y,p),y=Ct?Lg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Tz(l,p,d);else if(l.tag===19)Tz(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&nb(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),xT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&nb(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}xT(d,!0,p,null,k,y);break;case"together":xT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Yo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),dc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(zf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=$o(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=$o(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function wT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Wy(l)))}function Ute(l,d,p){switch(d.tag){case 3:Se(d,d.stateNode.containerInfo),rc(d,Qn,l.memoizedState.cache),Vu();break;case 27:case 5:Ae(d);break;case 4:Se(d,d.stateNode.containerInfo);break;case 10:rc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,HE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(oc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Ez(l,d,p):(oc(d),l=Yo(l,d,p),l!==null?l.sibling:null);oc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(zf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return Az(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te($n,$n.current),y)break;return null;case 22:return d.lanes=0,yz(l,d,p,d.pendingProps);case 24:rc(d,Qn,l.memoizedState.cache)}return Yo(l,d,p)}function kz(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Jn=!0;else{if(!wT(l,p)&&(d.flags&128)===0)return Jn=!1,Ute(l,d,p);Jn=(l.flags&131072)!==0}else Jn=!1,Ct&&(d.flags&1048576)!==0&&aj(d,Lg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=$u(d.elementType),d.type=l,typeof l=="function")AE(l)?(y=Ku(l,y),d.tag=1,d=Sz(null,d,l,y,p)):(d.tag=0,d=pT(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===N){d.tag=11,d=gz(null,d,l,y,p);break e}else if(E===P){d.tag=14,d=mz(null,d,l,y,p);break e}}throw d=K(l)||l,Error(r(306,d,""))}}return d;case 0:return pT(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Ku(y,d.pendingProps),Sz(l,d,y,E,p);case 3:e:{if(Se(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,FE(l,d),Hg(d,y,null,p);var B=d.memoizedState;if(y=B.cache,rc(d,Qn,y),y!==k.cache&&ME(d,[Qn],p,!0),Gg(),y=B.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:B.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=_z(l,d,y,p);break e}else if(y!==E){E=ka(Error(r(424)),d),Vg(E),d=_z(l,d,y,p);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,un=Oa(l.firstChild),Fr=d,Ct=!0,tc=null,Pa=!0,p=yj(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Vu(),y===E){d=Yo(l,d,p);break e}$r(l,d,y,p)}d=d.child}return d;case 26:return hb(l,d),l===null?(p=L4(d.type,null,d.pendingProps,null))?d.memoizedState=p:Ct||(p=d.type,l=d.pendingProps,y=Pb(ie.current).createElement(p),y[Wn]=d,y[Cr]=l,qr(y,p,l),Yn(y),d.stateNode=y):d.memoizedState=L4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ae(d),l===null&&Ct&&(y=d.stateNode=M4(d.type,d.pendingProps,ie.current),Fr=d,Pa=!0,E=un,mc(d.type)?(eA=E,un=Oa(y.firstChild)):un=E),$r(l,d,d.pendingProps.children,p),hb(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ct&&((E=y=un)&&(y=yne(y,d.type,d.pendingProps,Pa),y!==null?(d.stateNode=y,Fr=d,un=Oa(y.firstChild),Pa=!1,E=!0):E=!1),E||nc(d)),Ae(d),E=d.type,k=d.pendingProps,B=l!==null?l.memoizedProps:null,y=k.children,YT(E,k)?y=null:B!==null&&YT(E,B)&&(d.flags|=32),d.memoizedState!==null&&(E=WE(l,d,Dte,null,null,p),fm._currentValue=E),hb(l,d),$r(l,d,y,p),d.child;case 6:return l===null&&Ct&&((l=p=un)&&(p=bne(p,d.pendingProps,Pa),p!==null?(d.stateNode=p,Fr=d,un=null,l=!0):l=!1),l||nc(d)),null;case 13:return Ez(l,d,p);case 4:return Se(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=Gu(d,null,y,p):$r(l,d,y,p),d.child;case 11:return gz(l,d,d.type,d.pendingProps,p);case 7:return $r(l,d,d.pendingProps,p),d.child;case 8:return $r(l,d,d.pendingProps.children,p),d.child;case 12:return $r(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,rc(d,d.type,y.value),$r(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Fu(d),E=Ur(E),y=y(E),d.flags|=1,$r(l,d,y,p),d.child;case 14:return mz(l,d,d.type,d.pendingProps,p);case 15:return vz(l,d,d.type,d.pendingProps,p);case 19:return Az(l,d,p);case 31:return Fte(l,d,p);case 22:return yz(l,d,p,d.pendingProps);case 24:return Fu(d),y=Ur(Qn),l===null?(E=LE(),E===null&&(E=rn,k=jE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},BE(d),rc(d,Qn,E)):((l.lanes&p)!==0&&(FE(l,d),Hg(d,null,null,p),Gg()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),rc(d,Qn,y)):(y=k.cache,rc(d,Qn,y),y!==E.cache&&ME(d,[Qn],p,!0))),$r(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Xo(l){l.flags|=4}function ST(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(e4())l.flags|=8192;else throw qu=Zy,VE}else l.flags&=-16777217}function Cz(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!$4(d))if(e4())l.flags|=8192;else throw qu=Zy,VE}function gb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?wy():536870912,l.lanes|=d,Yf|=d)}function Zg(l,d){if(!Ct)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function dn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function $te(l,d,p){var y=d.pendingProps;switch(PE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(d),null;case 1:return dn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),Ho(Qn),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(jf(d)?Xo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,OE())),dn(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?(Xo(d),k!==null?(dn(d),Cz(d,k)):(dn(d),ST(d,E,null,y,p))):k?k!==l.memoizedState?(Xo(d),dn(d),Cz(d,k)):(dn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&Xo(d),dn(d),ST(d,E,l,y,p)),null;case 27:if(ve(d),p=ie.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Xo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return dn(d),null}l=W.current,jf(d)?oj(d):(l=M4(E,y,p),d.stateNode=l,Xo(d))}return dn(d),null;case 5:if(ve(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Xo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return dn(d),null}if(k=W.current,jf(d))oj(d);else{var B=Pb(ie.current);switch(k){case 1:k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=B.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?B.createElement("select",{is:y.is}):B.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?B.createElement(E,{is:y.is}):B.createElement(E)}}k[Wn]=d,k[Cr]=y;e:for(B=d.child;B!==null;){if(B.tag===5||B.tag===6)k.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===d)break e;for(;B.sibling===null;){if(B.return===null||B.return===d)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}d.stateNode=k;e:switch(qr(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Xo(d)}}return dn(d),ST(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&Xo(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ie.current,jf(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=Fr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Wn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||E4(l.nodeValue,p)),l||nc(d,!0)}else l=Pb(l).createTextNode(y),l[Wn]=d,d.stateNode=l}return dn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=jf(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Wn]=d}else Vu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),l=!1}else p=OE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(na(d),d):(na(d),null);if((d.flags&128)!==0)throw Error(r(558))}return dn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=jf(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Wn]=d}else Vu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),E=!1}else E=OE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(na(d),d):(na(d),null)}return na(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),gb(d,d.updateQueue),dn(d),null);case 4:return se(),l===null&&qT(d.stateNode.containerInfo),dn(d),null;case 10:return Ho(d.type),dn(d),null;case 19:if(Z($n),y=d.memoizedState,y===null)return dn(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)Zg(y,!1);else{if(On!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=nb(l),k!==null){for(d.flags|=128,Zg(y,!1),l=k.updateQueue,d.updateQueue=l,gb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)nj(p,l),p=p.sibling;return te($n,$n.current&1|2),Ct&&qo(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&yt()>xb&&(d.flags|=128,E=!0,Zg(y,!1),d.lanes=4194304)}else{if(!E)if(l=nb(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,gb(d,l),Zg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ct)return dn(d),null}else 2*yt()-y.renderingStartTime>xb&&p!==536870912&&(d.flags|=128,E=!0,Zg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=yt(),l.sibling=null,p=$n.current,te($n,E?p&1|2:p&1),Ct&&qo(d,y.treeForkCount),l):(dn(d),null);case 22:case 23:return na(d),GE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(dn(d),d.subtreeFlags&6&&(d.flags|=8192)):dn(d),p=d.updateQueue,p!==null&&gb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&Z(Uu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Ho(Qn),dn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function qte(l,d){switch(PE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ho(Qn),se(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return ve(d),null;case 31:if(d.memoizedState!==null){if(na(d),d.alternate===null)throw Error(r(340));Vu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(na(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Vu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Z($n),null;case 4:return se(),null;case 10:return Ho(d.type),null;case 22:case 23:return na(d),GE(),l!==null&&Z(Uu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ho(Qn),null;case 25:return null;default:return null}}function Iz(l,d){switch(PE(d),d.tag){case 3:Ho(Qn),se();break;case 26:case 27:case 5:ve(d);break;case 4:se();break;case 31:d.memoizedState!==null&&na(d);break;case 13:na(d);break;case 19:Z($n);break;case 10:Ho(d.type);break;case 22:case 23:na(d),GE(),l!==null&&Z(Uu);break;case 24:Ho(Qn)}}function Jg(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,B=p.inst;y=k(),B.destroy=y}p=p.next}while(p!==E)}}catch(q){Gt(d,d.return,q)}}function cc(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var B=y.inst,q=B.destroy;if(q!==void 0){B.destroy=void 0,E=d;var re=p,ge=q;try{ge()}catch(Te){Gt(E,re,Te)}}}y=y.next}while(y!==k)}}catch(Te){Gt(d,d.return,Te)}}function Pz(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{xj(d,p)}catch(y){Gt(l,l.return,y)}}}function Nz(l,d,p){p.props=Ku(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){Gt(l,d,y)}}function em(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){Gt(l,d,E)}}function eo(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){Gt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Gt(l,d,E)}else p.current=null}function Oz(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){Gt(l,l.return,E)}}function _T(l,d,p){try{var y=l.stateNode;fne(y,l.type,p,d),y[Cr]=d}catch(E){Gt(l,l.return,E)}}function Dz(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&mc(l.type)||l.tag===4}function ET(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Dz(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&mc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function TT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=rs));else if(y!==4&&(y===27&&mc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(TT(l,d,p),l=l.sibling;l!==null;)TT(l,d,p),l=l.sibling}function mb(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&mc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(mb(l,d,p),l=l.sibling;l!==null;)mb(l,d,p),l=l.sibling}function Rz(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);qr(d,y,p),d[Wn]=l,d[Cr]=p}catch(k){Gt(l,l.return,k)}}var Qo=!1,er=!1,AT=!1,Mz=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function Gte(l,d){if(l=l.containerInfo,KT=zb,l=KM(l),bE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var B=0,q=-1,re=-1,ge=0,Te=0,Ce=l,ye=null;t:for(;;){for(var we;Ce!==p||E!==0&&Ce.nodeType!==3||(q=B+E),Ce!==k||y!==0&&Ce.nodeType!==3||(re=B+y),Ce.nodeType===3&&(B+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)ye=Ce,Ce=we;for(;;){if(Ce===l)break t;if(ye===p&&++ge===E&&(q=B),ye===k&&++Te===y&&(re=B),(we=Ce.nextSibling)!==null)break;Ce=ye,ye=Ce.parentNode}Ce=we}p=q===-1||re===-1?null:{start:q,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(WT={focusedElem:l,selectionRange:p},zb=!1,Pr=d;Pr!==null;)if(d=Pr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Pr=l;else for(;Pr!==null;){switch(d=Pr,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var $e=Ku(p.type,E);l=y.getSnapshotBeforeUpdate($e,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(at){Gt(p,p.return,at)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)QT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":QT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Pr=l;break}Pr=d.return}}function jz(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Jo(l,p),y&4&&Jg(5,p);break;case 1:if(Jo(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(B){Gt(p,p.return,B)}else{var E=Ku(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(B){Gt(p,p.return,B)}}y&64&&Pz(p),y&512&&em(p,p.return);break;case 3:if(Jo(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{xj(l,d)}catch(B){Gt(p,p.return,B)}}break;case 27:d===null&&y&4&&Rz(p);case 26:case 5:Jo(l,p),d===null&&y&4&&Oz(p),y&512&&em(p,p.return);break;case 12:Jo(l,p);break;case 31:Jo(l,p),y&4&&Vz(l,p);break;case 13:Jo(l,p),y&4&&Bz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=ene.bind(null,p),xne(l,p))));break;case 22:if(y=p.memoizedState!==null||Qo,!y){d=d!==null&&d.memoizedState!==null||er,E=Qo;var k=er;Qo=y,(er=d)&&!k?el(l,p,(p.subtreeFlags&8772)!==0):Jo(l,p),Qo=E,er=k}break;case 30:break;default:Jo(l,p)}}function zz(l){var d=l.alternate;d!==null&&(l.alternate=null,zz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&bf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var vn=null,Pi=!1;function Zo(l,d,p){for(p=p.child;p!==null;)Lz(l,d,p),p=p.sibling}function Lz(l,d,p){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Fn,p)}catch{}switch(p.tag){case 26:er||eo(p,d),Zo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:er||eo(p,d);var y=vn,E=Pi;mc(p.type)&&(vn=p.stateNode,Pi=!1),Zo(l,d,p),cm(p.stateNode),vn=y,Pi=E;break;case 5:er||eo(p,d);case 6:if(y=vn,E=Pi,vn=null,Zo(l,d,p),vn=y,Pi=E,vn!==null)if(Pi)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(p.stateNode)}catch(k){Gt(p,d,k)}else try{vn.removeChild(p.stateNode)}catch(k){Gt(p,d,k)}break;case 18:vn!==null&&(Pi?(l=vn,P4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),rh(l)):P4(vn,p.stateNode));break;case 4:y=vn,E=Pi,vn=p.stateNode.containerInfo,Pi=!0,Zo(l,d,p),vn=y,Pi=E;break;case 0:case 11:case 14:case 15:cc(2,p,d),er||cc(4,p,d),Zo(l,d,p);break;case 1:er||(eo(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Nz(p,d,y)),Zo(l,d,p);break;case 21:Zo(l,d,p);break;case 22:er=(y=er)||p.memoizedState!==null,Zo(l,d,p),er=y;break;default:Zo(l,d,p)}}function Vz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{rh(l)}catch(p){Gt(d,d.return,p)}}}function Bz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{rh(l)}catch(p){Gt(d,d.return,p)}}function Hte(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Mz),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Mz),d;default:throw Error(r(435,l.tag))}}function vb(l,d){var p=Hte(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=tne.bind(null,l,y);y.then(E,E)}})}function Ni(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,B=d,q=B;e:for(;q!==null;){switch(q.tag){case 27:if(mc(q.type)){vn=q.stateNode,Pi=!1;break e}break;case 5:vn=q.stateNode,Pi=!1;break e;case 3:case 4:vn=q.stateNode.containerInfo,Pi=!0;break e}q=q.return}if(vn===null)throw Error(r(160));Lz(k,B,E),vn=null,Pi=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Fz(d,l),d=d.sibling}var cs=null;function Fz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ni(d,l),Oi(l),y&4&&(cc(3,l,l.return),Jg(3,l),cc(5,l,l.return));break;case 1:Ni(d,l),Oi(l),y&512&&(er||p===null||eo(p,p.return)),y&64&&Qo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=cs;if(Ni(d,l),Oi(l),y&512&&(er||p===null||eo(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[Bs]||k[Wn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),qr(k,y,p),k[Wn]=l,Yn(k),y=k;break e;case"link":var B=F4("link","href",E).get(y+(p.href||""));if(B){for(var q=0;q<B.length;q++)if(k=B[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){B.splice(q,1);break t}}k=E.createElement(y),qr(k,y,p),E.head.appendChild(k);break;case"meta":if(B=F4("meta","content",E).get(y+(p.content||""))){for(q=0;q<B.length;q++)if(k=B[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){B.splice(q,1);break t}}k=E.createElement(y),qr(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Wn]=l,Yn(k),y=k}l.stateNode=y}else U4(E,l.type,l.stateNode);else l.stateNode=B4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?U4(E,l.type,l.stateNode):B4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&_T(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ni(d,l),Oi(l),y&512&&(er||p===null||eo(p,p.return)),p!==null&&y&4&&_T(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ni(d,l),Oi(l),y&512&&(er||p===null||eo(p,p.return)),l.flags&32){E=l.stateNode;try{Ii(E,"")}catch($e){Gt(l,l.return,$e)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,_T(l,E,p!==null?p.memoizedProps:E)),y&1024&&(AT=!0);break;case 6:if(Ni(d,l),Oi(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch($e){Gt(l,l.return,$e)}}break;case 3:if(Db=null,E=cs,cs=Nb(d.containerInfo),Ni(d,l),cs=E,Oi(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{rh(d.containerInfo)}catch($e){Gt(l,l.return,$e)}AT&&(AT=!1,Uz(l));break;case 4:y=cs,cs=Nb(l.stateNode.containerInfo),Ni(d,l),Oi(l),cs=y;break;case 12:Ni(d,l),Oi(l);break;case 31:Ni(d,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,vb(l,y)));break;case 13:Ni(d,l),Oi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(bb=yt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,vb(l,y)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,ge=Qo,Te=er;if(Qo=ge||E,er=Te||re,Ni(d,l),er=Te,Qo=ge,Oi(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||Qo||er||Wu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(k=re.stateNode,E)B=k.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{q=re.stateNode;var Ce=re.memoizedProps.style,ye=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){Gt(re,re.return,$e)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){Gt(re,re.return,$e)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?N4(we,!0):N4(re.stateNode,!1)}catch($e){Gt(re,re.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,vb(l,p))));break;case 19:Ni(d,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,vb(l,y)));break;case 30:break;case 21:break;default:Ni(d,l),Oi(l)}}function Oi(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(Dz(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=ET(l);mb(l,k,E);break;case 5:var B=p.stateNode;p.flags&32&&(Ii(B,""),p.flags&=-33);var q=ET(l);mb(l,q,B);break;case 3:case 4:var re=p.stateNode.containerInfo,ge=ET(l);TT(l,ge,re);break;default:throw Error(r(161))}}catch(Te){Gt(l,l.return,Te)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Uz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Uz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Jo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)jz(l,d.alternate,d),d=d.sibling}function Wu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:cc(4,d,d.return),Wu(d);break;case 1:eo(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Nz(d,d.return,p),Wu(d);break;case 27:cm(d.stateNode);case 26:case 5:eo(d,d.return),Wu(d);break;case 22:d.memoizedState===null&&Wu(d);break;case 30:Wu(d);break;default:Wu(d)}l=l.sibling}}function el(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,B=k.flags;switch(k.tag){case 0:case 11:case 15:el(E,k,p),Jg(4,k);break;case 1:if(el(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ge){Gt(y,y.return,ge)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)bj(re[E],q)}catch(ge){Gt(y,y.return,ge)}}p&&B&64&&Pz(k),em(k,k.return);break;case 27:Rz(k);case 26:case 5:el(E,k,p),p&&y===null&&B&4&&Oz(k),em(k,k.return);break;case 12:el(E,k,p);break;case 31:el(E,k,p),p&&B&4&&Vz(E,k);break;case 13:el(E,k,p),p&&B&4&&Bz(E,k);break;case 22:k.memoizedState===null&&el(E,k,p),em(k,k.return);break;case 30:break;default:el(E,k,p)}d=d.sibling}}function kT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Bg(p))}function CT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Bg(l))}function us(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)$z(l,d,p,y),d=d.sibling}function $z(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:us(l,d,p,y),E&2048&&Jg(9,d);break;case 1:us(l,d,p,y);break;case 3:us(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Bg(l)));break;case 12:if(E&2048){us(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,B=k.id,q=k.onPostCommit;typeof q=="function"&&q(B,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){Gt(d,d.return,re)}}else us(l,d,p,y);break;case 31:us(l,d,p,y);break;case 13:us(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,B=d.alternate,d.memoizedState!==null?k._visibility&2?us(l,d,p,y):tm(l,d):k._visibility&2?us(l,d,p,y):(k._visibility|=2,Hf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&kT(B,d);break;case 24:us(l,d,p,y),E&2048&&CT(d.alternate,d);break;default:us(l,d,p,y)}}function Hf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,B=d,q=p,re=y,ge=B.flags;switch(B.tag){case 0:case 11:case 15:Hf(k,B,q,re,E),Jg(8,B);break;case 23:break;case 22:var Te=B.stateNode;B.memoizedState!==null?Te._visibility&2?Hf(k,B,q,re,E):tm(k,B):(Te._visibility|=2,Hf(k,B,q,re,E)),E&&ge&2048&&kT(B.alternate,B);break;case 24:Hf(k,B,q,re,E),E&&ge&2048&&CT(B.alternate,B);break;default:Hf(k,B,q,re,E)}d=d.sibling}}function tm(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:tm(p,y),E&2048&&kT(y.alternate,y);break;case 24:tm(p,y),E&2048&&CT(y.alternate,y);break;default:tm(p,y)}d=d.sibling}}var nm=8192;function Kf(l,d,p){if(l.subtreeFlags&nm)for(l=l.child;l!==null;)qz(l,d,p),l=l.sibling}function qz(l,d,p){switch(l.tag){case 26:Kf(l,d,p),l.flags&nm&&l.memoizedState!==null&&One(p,cs,l.memoizedState,l.memoizedProps);break;case 5:Kf(l,d,p);break;case 3:case 4:var y=cs;cs=Nb(l.stateNode.containerInfo),Kf(l,d,p),cs=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=nm,nm=16777216,Kf(l,d,p),nm=y):Kf(l,d,p));break;default:Kf(l,d,p)}}function Gz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function rm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Pr=y,Kz(y,l)}Gz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Hz(l),l=l.sibling}function Hz(l){switch(l.tag){case 0:case 11:case 15:rm(l),l.flags&2048&&cc(9,l,l.return);break;case 3:rm(l);break;case 12:rm(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,yb(l)):rm(l);break;default:rm(l)}}function yb(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Pr=y,Kz(y,l)}Gz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:cc(8,d,d.return),yb(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,yb(d));break;default:yb(d)}l=l.sibling}}function Kz(l,d){for(;Pr!==null;){var p=Pr;switch(p.tag){case 0:case 11:case 15:cc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Bg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Pr=y;else e:for(p=l;Pr!==null;){y=Pr;var E=y.sibling,k=y.return;if(zz(y),y===p){Pr=null;break e}if(E!==null){E.return=k,Pr=E;break e}Pr=k}}}var Kte={getCacheForType:function(l){var d=Ur(Qn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Ur(Qn).controller.signal}},Wte=typeof WeakMap=="function"?WeakMap:Map,Mt=0,rn=null,wt=null,Et=0,qt=0,ra=null,uc=!1,Wf=!1,IT=!1,tl=0,On=0,dc=0,Yu=0,PT=0,ia=0,Yf=0,im=null,Di=null,NT=!1,bb=0,Wz=0,xb=1/0,wb=null,fc=null,dr=0,hc=null,Xf=null,nl=0,OT=0,DT=null,Yz=null,am=0,RT=null;function aa(){return(Mt&2)!==0&&Et!==0?Et&-Et:G.T!==null?BT():Sy()}function Xz(){if(ia===0)if((Et&536870912)===0||Ct){var l=_n;_n<<=1,(_n&3932160)===0&&(_n=262144),ia=l}else ia=536870912;return l=ta.current,l!==null&&(l.flags|=32),ia}function Ri(l,d,p){(l===rn&&(qt===2||qt===9)||l.cancelPendingCommit!==null)&&(Qf(l,0),pc(l,Et,ia,!1)),_u(l,p),((Mt&2)===0||l!==rn)&&(l===rn&&((Mt&2)===0&&(Yu|=p),On===4&&pc(l,Et,ia,!1)),to(l))}function Qz(l,d,p){if((Mt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||fi(l,d),E=y?Qte(l,d):jT(l,d,!0),k=y;do{if(E===0){Wf&&!y&&pc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!Yte(p)){E=jT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){d=B;e:{var q=l;E=im;var re=q.current.memoizedState.isDehydrated;if(re&&(Qf(q,B).flags|=256),B=jT(q,B,!1),B!==2){if(IT&&!re){q.errorRecoveryDisabledLanes|=k,Yu|=k,E=4;break e}k=Di,Di=E,k!==null&&(Di===null?Di=k:Di.push.apply(Di,k))}E=B}if(k=!1,E!==2)continue}}if(E===1){Qf(l,0),pc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:pc(y,d,ia,!uc);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=bb+300-yt(),10<E)){if(pc(y,d,ia,!uc),wa(y,0,!0)!==0)break e;nl=d,y.timeoutHandle=C4(Zz.bind(null,y,p,Di,wb,NT,d,ia,Yu,Yf,uc,k,"Throttled",-0,0),E);break e}Zz(y,p,Di,wb,NT,d,ia,Yu,Yf,uc,k,null,-0,0)}}break}while(!0);to(l)}function Zz(l,d,p,y,E,k,B,q,re,ge,Te,Ce,ye,we){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rs},qz(d,k,Ce);var $e=(k&62914560)===k?bb-yt():(k&4194048)===k?Wz-yt():0;if($e=Dne(Ce,$e),$e!==null){nl=k,l.cancelPendingCommit=$e(s4.bind(null,l,d,k,p,y,E,B,q,re,Te,Ce,null,ye,we)),pc(l,k,B,!ge);return}}s4(l,d,k,p,y,E,B,q,re)}function Yte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Ji(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function pc(l,d,p,y){d&=~PT,d&=~Yu,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-Ut(E),B=1<<k;y[k]=-1,E&=~B}p!==0&&Eu(l,p,d)}function Sb(){return(Mt&6)===0?(sm(0),!1):!0}function MT(){if(wt!==null){if(qt===0)var l=wt.return;else l=wt,Go=Bu=null,QE(l),Ff=null,Ug=0,l=wt;for(;l!==null;)Iz(l.alternate,l),l=l.return;wt=null}}function Qf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,gne(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),nl=0,MT(),rn=l,wt=p=$o(l.current,null),Et=d,qt=0,ra=null,uc=!1,Wf=fi(l,d),IT=!1,Yf=ia=PT=Yu=dc=On=0,Di=im=null,NT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-Ut(y),k=1<<E;d|=l[E],y&=~k}return tl=d,$y(),p}function Jz(l,d){ut=null,G.H=Xg,d===Bf||d===Qy?(d=gj(),qt=3):d===VE?(d=gj(),qt=4):qt=d===hT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ra=d,wt===null&&(On=1,db(l,ka(d,l.current)))}function e4(){var l=ta.current;return l===null?!0:(Et&4194048)===Et?Na===null:(Et&62914560)===Et||(Et&536870912)!==0?l===Na:!1}function t4(){var l=G.H;return G.H=Xg,l===null?Xg:l}function n4(){var l=G.A;return G.A=Kte,l}function _b(){On=4,uc||(Et&4194048)!==Et&&ta.current!==null||(Wf=!0),(dc&134217727)===0&&(Yu&134217727)===0||rn===null||pc(rn,Et,ia,!1)}function jT(l,d,p){var y=Mt;Mt|=2;var E=t4(),k=n4();(rn!==l||Et!==d)&&(wb=null,Qf(l,d)),d=!1;var B=On;e:do try{if(qt!==0&&wt!==null){var q=wt,re=ra;switch(qt){case 8:MT(),B=6;break e;case 3:case 2:case 9:case 6:ta.current===null&&(d=!0);var ge=qt;if(qt=0,ra=null,Zf(l,q,re,ge),p&&Wf){B=0;break e}break;default:ge=qt,qt=0,ra=null,Zf(l,q,re,ge)}}Xte(),B=On;break}catch(Te){Jz(l,Te)}while(!0);return d&&l.shellSuspendCounter++,Go=Bu=null,Mt=y,G.H=E,G.A=k,wt===null&&(rn=null,Et=0,$y()),B}function Xte(){for(;wt!==null;)r4(wt)}function Qte(l,d){var p=Mt;Mt|=2;var y=t4(),E=n4();rn!==l||Et!==d?(wb=null,xb=yt()+500,Qf(l,d)):Wf=fi(l,d);e:do try{if(qt!==0&&wt!==null){d=wt;var k=ra;t:switch(qt){case 1:qt=0,ra=null,Zf(l,d,k,1);break;case 2:case 9:if(hj(k)){qt=0,ra=null,i4(d);break}d=function(){qt!==2&&qt!==9||rn!==l||(qt=7),to(l)},k.then(d,d);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:hj(k)?(qt=0,ra=null,i4(d)):(qt=0,ra=null,Zf(l,d,k,7));break;case 5:var B=null;switch(wt.tag){case 26:B=wt.memoizedState;case 5:case 27:var q=wt;if(B?$4(B):q.stateNode.complete){qt=0,ra=null;var re=q.sibling;if(re!==null)wt=re;else{var ge=q.return;ge!==null?(wt=ge,Eb(ge)):wt=null}break t}}qt=0,ra=null,Zf(l,d,k,5);break;case 6:qt=0,ra=null,Zf(l,d,k,6);break;case 8:MT(),On=6;break e;default:throw Error(r(462))}}Zte();break}catch(Te){Jz(l,Te)}while(!0);return Go=Bu=null,G.H=y,G.A=E,Mt=p,wt!==null?0:(rn=null,Et=0,$y(),On)}function Zte(){for(;wt!==null&&!Bn();)r4(wt)}function r4(l){var d=kz(l.alternate,l,tl);l.memoizedProps=l.pendingProps,d===null?Eb(l):wt=d}function i4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=wz(p,d,d.pendingProps,d.type,void 0,Et);break;case 11:d=wz(p,d,d.pendingProps,d.type.render,d.ref,Et);break;case 5:QE(d);default:Iz(p,d),d=wt=nj(d,tl),d=kz(p,d,tl)}l.memoizedProps=l.pendingProps,d===null?Eb(l):wt=d}function Zf(l,d,p,y){Go=Bu=null,QE(d),Ff=null,Ug=0;var E=d.return;try{if(Bte(l,E,d,p,Et)){On=1,db(l,ka(p,l.current)),wt=null;return}}catch(k){if(E!==null)throw wt=E,k;On=1,db(l,ka(p,l.current)),wt=null;return}d.flags&32768?(Ct||y===1?l=!0:Wf||(Et&536870912)!==0?l=!1:(uc=l=!0,(y===2||y===9||y===3||y===6)&&(y=ta.current,y!==null&&y.tag===13&&(y.flags|=16384))),a4(d,l)):Eb(d)}function Eb(l){var d=l;do{if((d.flags&32768)!==0){a4(d,uc);return}l=d.return;var p=$te(d.alternate,d,tl);if(p!==null){wt=p;return}if(d=d.sibling,d!==null){wt=d;return}wt=d=l}while(d!==null);On===0&&(On=5)}function a4(l,d){do{var p=qte(l.alternate,l);if(p!==null){p.flags&=32767,wt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){wt=l;return}wt=l=p}while(l!==null);On=6,wt=null}function s4(l,d,p,y,E,k,B,q,re){l.cancelPendingCommit=null;do Tb();while(dr!==0);if((Mt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=EE,gE(l,p,k,B,q,re),l===rn&&(wt=rn=null,Et=0),Xf=d,hc=l,nl=p,OT=k,DT=E,Yz=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,nne(mt,function(){return d4(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=X.p,X.p=2,B=Mt,Mt|=4;try{Gte(l,d,p)}finally{Mt=B,X.p=E,G.T=y}}dr=1,o4(),l4(),c4()}}function o4(){if(dr===1){dr=0;var l=hc,d=Xf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=X.p;X.p=2;var E=Mt;Mt|=4;try{Fz(d,l);var k=WT,B=KM(l.containerInfo),q=k.focusedElem,re=k.selectionRange;if(B!==q&&q&&q.ownerDocument&&HM(q.ownerDocument.documentElement,q)){if(re!==null&&bE(q)){var ge=re.start,Te=re.end;if(Te===void 0&&(Te=ge),"selectionStart"in q)q.selectionStart=ge,q.selectionEnd=Math.min(Te,q.value.length);else{var Ce=q.ownerDocument||document,ye=Ce&&Ce.defaultView||window;if(ye.getSelection){var we=ye.getSelection(),$e=q.textContent.length,at=Math.min(re.start,$e),Zt=re.end===void 0?at:Math.min(re.end,$e);!we.extend&&at>Zt&&(B=Zt,Zt=at,at=B);var de=GM(q,at),ce=GM(q,Zt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var pe=Ce.createRange();pe.setStart(de.node,de.offset),we.removeAllRanges(),at>Zt?(we.addRange(pe),we.extend(ce.node,ce.offset)):(pe.setEnd(ce.node,ce.offset),we.addRange(pe))}}}}for(Ce=[],we=q;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ce.length;q++){var ke=Ce[q];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}zb=!!KT,WT=KT=null}finally{Mt=E,X.p=y,G.T=p}}l.current=d,dr=2}}function l4(){if(dr===2){dr=0;var l=hc,d=Xf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=X.p;X.p=2;var E=Mt;Mt|=4;try{jz(l,d.alternate,d)}finally{Mt=E,X.p=y,G.T=p}}dr=3}}function c4(){if(dr===4||dr===3){dr=0,wn();var l=hc,d=Xf,p=nl,y=Yz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?dr=5:(dr=0,Xf=hc=null,u4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(fc=null),Vo(p),d=d.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Fn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=X.p,X.p=2,G.T=null;try{for(var k=l.onRecoverableError,B=0;B<y.length;B++){var q=y[B];k(q.value,{componentStack:q.stack})}}finally{G.T=d,X.p=E}}(nl&3)!==0&&Tb(),to(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===RT?am++:(am=0,RT=l):am=0,sm(0)}}function u4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Bg(d)))}function Tb(){return o4(),l4(),c4(),d4()}function d4(){if(dr!==5)return!1;var l=hc,d=OT;OT=0;var p=Vo(nl),y=G.T,E=X.p;try{X.p=32>p?32:p,G.T=null,p=DT,DT=null;var k=hc,B=nl;if(dr=0,Xf=hc=null,nl=0,(Mt&6)!==0)throw Error(r(331));var q=Mt;if(Mt|=4,Hz(k.current),$z(k,k.current,B,p),Mt=q,sm(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Fn,k)}catch{}return!0}finally{X.p=E,G.T=y,u4(l,d)}}function f4(l,d,p){d=ka(p,d),d=fT(l.stateNode,d,2),l=sc(l,d,2),l!==null&&(_u(l,2),to(l))}function Gt(l,d,p){if(l.tag===3)f4(l,l,p);else for(;d!==null;){if(d.tag===3){f4(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(fc===null||!fc.has(y))){l=ka(p,l),p=hz(2),y=sc(d,p,2),y!==null&&(pz(p,y,d,l),_u(y,2),to(y));break}}d=d.return}}function zT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new Wte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(IT=!0,E.add(p),l=Jte.bind(null,l,d,p),d.then(l,l))}function Jte(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,rn===l&&(Et&p)===p&&(On===4||On===3&&(Et&62914560)===Et&&300>yt()-bb?(Mt&2)===0&&Qf(l,0):PT|=p,Yf===Et&&(Yf=0)),to(l)}function h4(l,d){d===0&&(d=wy()),l=zu(l,d),l!==null&&(_u(l,d),to(l))}function ene(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),h4(l,p)}function tne(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),h4(l,p)}function nne(l,d){return it(l,d)}var Ab=null,Jf=null,LT=!1,kb=!1,VT=!1,gc=0;function to(l){l!==Jf&&l.next===null&&(Jf===null?Ab=Jf=l:Jf=Jf.next=l),kb=!0,LT||(LT=!0,ine())}function sm(l,d){if(!VT&&kb){VT=!0;do for(var p=!1,y=Ab;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var B=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-Ut(42|l)+1)-1,k&=E&~(B&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,v4(y,k))}else k=Et,k=wa(y,y===rn?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||fi(y,k)||(p=!0,v4(y,k));y=y.next}while(p);VT=!1}}function rne(){p4()}function p4(){kb=LT=!1;var l=0;gc!==0&&pne()&&(l=gc);for(var d=yt(),p=null,y=Ab;y!==null;){var E=y.next,k=g4(y,d);k===0?(y.next=null,p===null?Ab=E:p.next=E,E===null&&(Jf=p)):(p=y,(l!==0||(k&3)!==0)&&(kb=!0)),y=E}dr!==0&&dr!==5||sm(l),gc!==0&&(gc=0)}function g4(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var B=31-Ut(k),q=1<<B,re=E[B];re===-1?((q&p)===0||(q&y)!==0)&&(E[B]=pE(q,d)):re<=d&&(l.expiredLanes|=q),k&=~q}if(d=rn,p=Et,p=wa(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&(qt===2||qt===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Bt(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||fi(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Bt(y),Vo(p)){case 2:case 8:p=ze;break;case 32:p=mt;break;case 268435456:p=Zr;break;default:p=mt}return y=m4.bind(null,l),p=it(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Bt(y),l.callbackPriority=2,l.callbackNode=null,2}function m4(l,d){if(dr!==0&&dr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Tb()&&l.callbackNode!==p)return null;var y=Et;return y=wa(l,l===rn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Qz(l,y,d),g4(l,yt()),l.callbackNode!=null&&l.callbackNode===p?m4.bind(null,l):null)}function v4(l,d){if(Tb())return null;Qz(l,d,!0)}function ine(){mne(function(){(Mt&6)!==0?it(Qr,rne):p4()})}function BT(){if(gc===0){var l=Lf;l===0&&(l=xt,xt<<=1,(xt&261888)===0&&(xt=256)),gc=l}return gc}function y4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:_f(""+l)}function b4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function ane(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=y4((E[Cr]||null).action),B=y.submitter;B&&(d=(d=B[Cr]||null)?y4(d.formAction):B.getAttribute("formAction"),d!==null&&(k=d,B=null));var q=new Ws("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(gc!==0){var re=B?b4(E,B):new FormData(E);sT(p,{pending:!0,data:re,method:E.method,action:k},null,re)}}else typeof k=="function"&&(q.preventDefault(),re=B?b4(E,B):new FormData(E),sT(p,{pending:!0,data:re,method:E.method,action:k},k,re))},currentTarget:E}]})}}for(var FT=0;FT<_E.length;FT++){var UT=_E[FT],sne=UT.toLowerCase(),one=UT[0].toUpperCase()+UT.slice(1);ls(sne,"on"+one)}ls(XM,"onAnimationEnd"),ls(QM,"onAnimationIteration"),ls(ZM,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(_te,"onTransitionRun"),ls(Ete,"onTransitionStart"),ls(Tte,"onTransitionCancel"),ls(JM,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var om="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lne=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(om));function x4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var B=y.length-1;0<=B;B--){var q=y[B],re=q.instance,ge=q.currentTarget;if(q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){Uy(Te)}E.currentTarget=null,k=re}else for(B=0;B<y.length;B++){if(q=y[B],re=q.instance,ge=q.currentTarget,q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){Uy(Te)}E.currentTarget=null,k=re}}}}function St(l,d){var p=d[yf];p===void 0&&(p=d[yf]=new Set);var y=l+"__bubble";p.has(y)||(w4(d,l,2,!1),p.add(y))}function $T(l,d,p){var y=0;d&&(y|=4),w4(p,l,y,d)}var Cb="_reactListening"+Math.random().toString(36).slice(2);function qT(l){if(!l[Cb]){l[Cb]=!0,bg.forEach(function(p){p!=="selectionchange"&&(lne.has(p)||$T(p,!1,l),$T(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Cb]||(d[Cb]=!0,$T("selectionchange",!1,d))}}function w4(l,d,p,y){switch(X4(d)){case 2:var E=jne;break;case 8:E=zne;break;default:E=aA}p=E.bind(null,d,p,l),E=void 0,!Iu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function GT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var q=y.stateNode.containerInfo;if(q===E)break;if(B===4)for(B=y.return;B!==null;){var re=B.tag;if((re===3||re===4)&&B.stateNode.containerInfo===E)return;B=B.return}for(;q!==null;){if(B=Fs(q),B===null)return;if(re=B.tag,re===5||re===6||re===26||re===27){y=k=B;continue e}q=q.parentNode}}y=y.return}Xl(function(){var ge=k,Te=_a(p),Ce=[];e:{var ye=ej.get(l);if(ye!==void 0){var we=Ws,$e=l;switch(l){case"keypress":if(Nu(p)===0)break e;case"keydown":case"keyup":we=Vy;break;case"focusin":$e="focus",we=Du;break;case"focusout":$e="blur",we=Du;break;case"beforeblur":case"afterblur":we=Du;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=j;break;case XM:case QM:case ZM:we=Oy;break;case JM:we=H;break;case"scroll":case"scrollend":we=Ng;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=Dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Uo;break;case"toggle":case"beforetoggle":we=ct}var at=(d&4)!==0,Zt=!at&&(l==="scroll"||l==="scrollend"),de=at?ye!==null?ye+"Capture":null:ye;at=[];for(var ce=ge,pe;ce!==null;){var ke=ce;if(pe=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||pe===null||de===null||(ke=is(ce,de),ke!=null&&at.push(lm(ce,ke,pe))),Zt)break;ce=ce.return}0<at.length&&(ye=new we(ye,$e,null,p,Te),Ce.push({event:ye,listeners:at}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",ye&&p!==Cg&&($e=p.relatedTarget||p.fromElement)&&(Fs($e)||$e[Vs]))break e;if((we||ye)&&(ye=Te.window===Te?Te:(ye=Te.ownerDocument)?ye.defaultView||ye.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ge,$e=$e?Fs($e):null,$e!==null&&(Zt=a($e),at=$e.tag,$e!==Zt||at!==5&&at!==27&&at!==6)&&($e=null)):(we=null,$e=ge),we!==$e)){if(at=Og,ke="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(at=Uo,ke="onPointerLeave",de="onPointerEnter",ce="pointer"),Zt=we==null?ye:Qi(we),pe=$e==null?ye:Qi($e),ye=new at(ke,ce+"leave",we,p,Te),ye.target=Zt,ye.relatedTarget=pe,ke=null,Fs(Te)===ge&&(at=new at(de,ce+"enter",$e,p,Te),at.target=pe,at.relatedTarget=Zt,ke=at),Zt=ke,we&&$e)t:{for(at=cne,de=we,ce=$e,pe=0,ke=de;ke;ke=at(ke))pe++;ke=0;for(var Je=ce;Je;Je=at(Je))ke++;for(;0<pe-ke;)de=at(de),pe--;for(;0<ke-pe;)ce=at(ce),ke--;for(;pe--;){if(de===ce||ce!==null&&de===ce.alternate){at=de;break t}de=at(de),ce=at(ce)}at=null}else at=null;we!==null&&S4(Ce,ye,we,at,!1),$e!==null&&Zt!==null&&S4(Ce,Zt,$e,at,!0)}}e:{if(ye=ge?Qi(ge):window,we=ye.nodeName&&ye.nodeName.toLowerCase(),we==="select"||we==="input"&&ye.type==="file")var Nt=VM;else if(zM(ye))if(BM)Nt=xte;else{Nt=yte;var We=vte}else we=ye.nodeName,!we||we.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&Sf(ge.elementType)&&(Nt=VM):Nt=bte;if(Nt&&(Nt=Nt(l,ge))){LM(Ce,Nt,p,Te);break e}We&&We(l,ye,ge),l==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&Tg(ye,"number",ye.value)}switch(We=ge?Qi(ge):window,l){case"focusin":(zM(We)||We.contentEditable==="true")&&(Pf=We,xE=ge,zg=null);break;case"focusout":zg=xE=Pf=null;break;case"mousedown":wE=!0;break;case"contextmenu":case"mouseup":case"dragend":wE=!1,WM(Ce,p,Te);break;case"selectionchange":if(Ste)break;case"keydown":case"keyup":WM(Ce,p,Te)}var ft;if(Rt)e:{switch(l){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else If?Ru(l,p)&&(Tt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Tt="onCompositionStart");Tt&&(Qs&&p.locale!=="ko"&&(If||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&If&&(ft=Pg()):(Ks=Te,Ig="value"in Ks?Ks.value:Ks.textContent,If=!0)),We=Ib(ge,Tt),0<We.length&&(Tt=new Xs(Tt,l,null,p,Te),Ce.push({event:Tt,listeners:We}),ft?Tt.data=ft:(ft=Cf(p),ft!==null&&(Tt.data=ft)))),(ft=Ta?hte(l,p):pte(l,p))&&(Tt=Ib(ge,"onBeforeInput"),0<Tt.length&&(We=new Xs("onBeforeInput","beforeinput",null,p,Te),Ce.push({event:We,listeners:Tt}),We.data=ft)),ane(Ce,l,ge,p,Te)}x4(Ce,d)})}function lm(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Ib(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=is(l,p),E!=null&&y.unshift(lm(l,E,k)),E=is(l,d),E!=null&&y.push(lm(l,E,k))),l.tag===3)return y;l=l.return}return[]}function cne(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function S4(l,d,p,y,E){for(var k=d._reactName,B=[];p!==null&&p!==y;){var q=p,re=q.alternate,ge=q.stateNode;if(q=q.tag,re!==null&&re===y)break;q!==5&&q!==26&&q!==27||ge===null||(re=ge,E?(ge=is(p,k),ge!=null&&B.unshift(lm(p,ge,re))):E||(ge=is(p,k),ge!=null&&B.push(lm(p,ge,re)))),p=p.return}B.length!==0&&l.push({event:d,listeners:B})}var une=/\r\n?/g,dne=/\u0000|\uFFFD/g;function _4(l){return(typeof l=="string"?l:""+l).replace(une,`
`).replace(dne,"")}function E4(l,d){return d=_4(d),_4(l)===d}function Qt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Ii(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Ii(l,""+y);break;case"className":Zi(l,"class",y);break;case"tabIndex":Zi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Zi(l,p,y);break;case"style":kg(l,y,k);break;case"data":if(d!=="object"){Zi(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_f(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Qt(l,d,"name",E.name,E,null),Qt(l,d,"formEncType",E.formEncType,E,null),Qt(l,d,"formMethod",E.formMethod,E,null),Qt(l,d,"formTarget",E.formTarget,E,null)):(Qt(l,d,"encType",E.encType,E,null),Qt(l,d,"method",E.method,E,null),Qt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_f(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=rs);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=_f(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":St("beforetoggle",l),St("toggle",l),xf(l,"popover",y);break;case"xlinkActuate":Xn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Xn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Xn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Xn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Xn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Xn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Iy.get(p)||p,xf(l,p,y))}}function HT(l,d,p,y,E,k){switch(p){case"style":kg(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Ii(l,y):(typeof y=="number"||typeof y=="bigint")&&Ii(l,""+y);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"onClick":y!=null&&(l.onclick=rs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[Cr]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):xf(l,p,y)}}}function qr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",l),St("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var B=p[k];if(B!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,k,B,p,null)}}E&&Qt(l,d,"srcSet",p.srcSet,p,null),y&&Qt(l,d,"src",p.src,p,null);return;case"input":St("invalid",l);var q=k=B=E=null,re=null,ge=null;for(y in p)if(p.hasOwnProperty(y)){var Te=p[y];if(Te!=null)switch(y){case"name":E=Te;break;case"type":B=Te;break;case"checked":re=Te;break;case"defaultChecked":ge=Te;break;case"value":k=Te;break;case"defaultValue":q=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,d));break;default:Qt(l,d,y,Te,p,null)}}Ay(l,k,q,re,ge,B,E,!1);return;case"select":St("invalid",l),y=B=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":B=q;break;case"multiple":y=q;default:Qt(l,d,E,q,p,null)}d=k,p=B,l.multiple=!!y,d!=null?Hl(l,!!y,d,!1):p!=null&&Hl(l,!!y,p,!0);return;case"textarea":St("invalid",l),k=E=y=null;for(B in p)if(p.hasOwnProperty(B)&&(q=p[B],q!=null))switch(B){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Qt(l,d,B,q,p,null)}Kl(l,y,E,k);return;case"option":for(re in p)p.hasOwnProperty(re)&&(y=p[re],y!=null)&&(re==="selected"?l.selected=y&&typeof y!="function"&&typeof y!="symbol":Qt(l,d,re,y,p,null));return;case"dialog":St("beforetoggle",l),St("toggle",l),St("cancel",l),St("close",l);break;case"iframe":case"object":St("load",l);break;case"video":case"audio":for(y=0;y<om.length;y++)St(om[y],l);break;case"image":St("error",l),St("load",l);break;case"details":St("toggle",l);break;case"embed":case"source":case"link":St("error",l),St("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in p)if(p.hasOwnProperty(ge)&&(y=p[ge],y!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,ge,y,p,null)}return;default:if(Sf(d)){for(Te in p)p.hasOwnProperty(Te)&&(y=p[Te],y!==void 0&&HT(l,d,Te,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Qt(l,d,q,y,p,null))}function fne(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,B=null,q=null,re=null,ge=null,Te=null;for(we in p){var Ce=p[we];if(p.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=Ce;default:y.hasOwnProperty(we)||Qt(l,d,we,null,y,Ce)}}for(var ye in y){var we=y[ye];if(Ce=p[ye],y.hasOwnProperty(ye)&&(we!=null||Ce!=null))switch(ye){case"type":k=we;break;case"name":E=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":B=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ce&&Qt(l,d,ye,we,y,Ce)}}wf(l,B,q,re,ge,Te,k,E);return;case"select":we=B=q=ye=null;for(k in p)if(re=p[k],p.hasOwnProperty(k)&&re!=null)switch(k){case"value":break;case"multiple":we=re;default:y.hasOwnProperty(k)||Qt(l,d,k,null,y,re)}for(E in y)if(k=y[E],re=p[E],y.hasOwnProperty(E)&&(k!=null||re!=null))switch(E){case"value":ye=k;break;case"defaultValue":q=k;break;case"multiple":B=k;default:k!==re&&Qt(l,d,E,k,y,re)}d=q,p=B,y=we,ye!=null?Hl(l,!!p,ye,!1):!!y!=!!p&&(d!=null?Hl(l,!!p,d,!0):Hl(l,!!p,p?[]:"",!1));return;case"textarea":we=ye=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Qt(l,d,q,null,y,E)}for(B in y)if(E=y[B],k=p[B],y.hasOwnProperty(B)&&(E!=null||k!=null))switch(B){case"value":ye=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Qt(l,d,B,E,y,k)}ky(l,ye,we);return;case"option":for(var $e in p)ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!y.hasOwnProperty($e)&&($e==="selected"?l.selected=!1:Qt(l,d,$e,null,y,ye));for(re in y)ye=y[re],we=p[re],y.hasOwnProperty(re)&&ye!==we&&(ye!=null||we!=null)&&(re==="selected"?l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Qt(l,d,re,ye,y,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in p)ye=p[at],p.hasOwnProperty(at)&&ye!=null&&!y.hasOwnProperty(at)&&Qt(l,d,at,null,y,ye);for(ge in y)if(ye=y[ge],we=p[ge],y.hasOwnProperty(ge)&&ye!==we&&(ye!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Qt(l,d,ge,ye,y,we)}return;default:if(Sf(d)){for(var Zt in p)ye=p[Zt],p.hasOwnProperty(Zt)&&ye!==void 0&&!y.hasOwnProperty(Zt)&&HT(l,d,Zt,void 0,y,ye);for(Te in y)ye=y[Te],we=p[Te],!y.hasOwnProperty(Te)||ye===we||ye===void 0&&we===void 0||HT(l,d,Te,ye,y,we);return}}for(var de in p)ye=p[de],p.hasOwnProperty(de)&&ye!=null&&!y.hasOwnProperty(de)&&Qt(l,d,de,null,y,ye);for(Ce in y)ye=y[Ce],we=p[Ce],!y.hasOwnProperty(Ce)||ye===we||ye==null&&we==null||Qt(l,d,Ce,ye,y,we)}function T4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hne(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,B=E.initiatorType,q=E.duration;if(k&&q&&T4(B)){for(B=0,q=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],ge=re.startTime;if(ge>q)break;var Te=re.transferSize,Ce=re.initiatorType;Te&&T4(Ce)&&(re=re.responseEnd,B+=Te*(re<q?1:(q-ge)/(re-ge)))}if(--y,d+=8*(k+B)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var KT=null,WT=null;function Pb(l){return l.nodeType===9?l:l.ownerDocument}function A4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function YT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var XT=null;function pne(){var l=window.event;return l&&l.type==="popstate"?l===XT?!1:(XT=l,!0):(XT=null,!1)}var C4=typeof setTimeout=="function"?setTimeout:void 0,gne=typeof clearTimeout=="function"?clearTimeout:void 0,I4=typeof Promise=="function"?Promise:void 0,mne=typeof queueMicrotask=="function"?queueMicrotask:typeof I4<"u"?function(l){return I4.resolve(null).then(l).catch(vne)}:C4;function vne(l){setTimeout(function(){throw l})}function mc(l){return l==="head"}function P4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),rh(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")cm(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,cm(p);for(var k=p.firstChild;k;){var B=k.nextSibling,q=k.nodeName;k[Bs]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=B}}else p==="body"&&cm(l.ownerDocument.body);p=E}while(p);rh(d)}function N4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function QT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":QT(p),bf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function yne(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Bs])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Oa(l.nextSibling),l===null)break}return null}function bne(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Oa(l.nextSibling),l===null))return null;return l}function O4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Oa(l.nextSibling),l===null))return null;return l}function ZT(l){return l.data==="$?"||l.data==="$~"}function JT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function xne(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Oa(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var eA=null;function D4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Oa(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function R4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function M4(l,d,p){switch(d=Pb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function cm(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);bf(l)}var Da=new Map,j4=new Set;function Nb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var rl=X.d;X.d={f:wne,r:Sne,D:_ne,C:Ene,L:Tne,m:Ane,X:Cne,S:kne,M:Ine};function wne(){var l=rl.f(),d=Sb();return l||d}function Sne(l){var d=Sa(l);d!==null&&d.tag===5&&d.type==="form"?Jj(d):rl.r(l)}var eh=typeof document>"u"?null:document;function z4(l,d,p){var y=eh;if(y&&typeof d=="string"&&d){var E=Ci(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),j4.has(E)||(j4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),qr(d,"link",l),Yn(d),y.head.appendChild(d)))}}function _ne(l){rl.D(l),z4("dns-prefetch",l,null)}function Ene(l,d){rl.C(l,d),z4("preconnect",l,d)}function Tne(l,d,p){rl.L(l,d,p);var y=eh;if(y&&l&&d){var E='link[rel="preload"][as="'+Ci(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ci(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ci(p.imageSizes)+'"]')):E+='[href="'+Ci(l)+'"]';var k=E;switch(d){case"style":k=th(l);break;case"script":k=nh(l)}Da.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Da.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(um(k))||d==="script"&&y.querySelector(dm(k))||(d=y.createElement("link"),qr(d,"link",l),Yn(d),y.head.appendChild(d)))}}function Ane(l,d){rl.m(l,d);var p=eh;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ci(y)+'"][href="'+Ci(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=nh(l)}if(!Da.has(k)&&(l=h({rel:"modulepreload",href:l},d),Da.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(dm(k)))return}y=p.createElement("link"),qr(y,"link",l),Yn(y),p.head.appendChild(y)}}}function kne(l,d,p){rl.S(l,d,p);var y=eh;if(y&&l){var E=Us(y).hoistableStyles,k=th(l);d=d||"default";var B=E.get(k);if(!B){var q={loading:0,preload:null};if(B=y.querySelector(um(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Da.get(k))&&tA(l,p);var re=B=y.createElement("link");Yn(re),qr(re,"link",l),re._p=new Promise(function(ge,Te){re.onload=ge,re.onerror=Te}),re.addEventListener("load",function(){q.loading|=1}),re.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Ob(B,d,y)}B={type:"stylesheet",instance:B,count:1,state:q},E.set(k,B)}}}function Cne(l,d){rl.X(l,d);var p=eh;if(p&&l){var y=Us(p).hoistableScripts,E=nh(l),k=y.get(E);k||(k=p.querySelector(dm(E)),k||(l=h({src:l,async:!0},d),(d=Da.get(E))&&nA(l,d),k=p.createElement("script"),Yn(k),qr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function Ine(l,d){rl.M(l,d);var p=eh;if(p&&l){var y=Us(p).hoistableScripts,E=nh(l),k=y.get(E);k||(k=p.querySelector(dm(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Da.get(E))&&nA(l,d),k=p.createElement("script"),Yn(k),qr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function L4(l,d,p,y){var E=(E=ie.current)?Nb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=th(p.href),p=Us(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=th(p.href);var k=Us(E).hoistableStyles,B=k.get(l);if(B||(E=E.ownerDocument||E,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,B),(k=E.querySelector(um(l)))&&!k._p&&(B.instance=k,B.state.loading=5),Da.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Da.set(l,p),k||Pne(E,l,p,B.state))),d&&y===null)throw Error(r(528,""));return B}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=nh(p),p=Us(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function th(l){return'href="'+Ci(l)+'"'}function um(l){return'link[rel="stylesheet"]['+l+"]"}function V4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Pne(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),qr(d,"link",p),Yn(d),l.head.appendChild(d))}function nh(l){return'[src="'+Ci(l)+'"]'}function dm(l){return"script[async]"+l}function B4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ci(p.href)+'"]');if(y)return d.instance=y,Yn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Yn(y),qr(y,"style",E),Ob(y,p.precedence,l),d.instance=y;case"stylesheet":E=th(p.href);var k=l.querySelector(um(E));if(k)return d.state.loading|=4,d.instance=k,Yn(k),k;y=V4(p),(E=Da.get(E))&&tA(y,E),k=(l.ownerDocument||l).createElement("link"),Yn(k);var B=k;return B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),qr(k,"link",y),d.state.loading|=4,Ob(k,p.precedence,l),d.instance=k;case"script":return k=nh(p.src),(E=l.querySelector(dm(k)))?(d.instance=E,Yn(E),E):(y=p,(E=Da.get(k))&&(y=h({},p),nA(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Yn(E),qr(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,Ob(y,p.precedence,l));return d.instance}function Ob(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,B=0;B<y.length;B++){var q=y[B];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function tA(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function nA(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Db=null;function F4(l,d,p){if(Db===null){var y=new Map,E=Db=new Map;E.set(p,y)}else E=Db,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[Bs]||k[Wn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var B=k.getAttribute(d)||"";B=l+B;var q=y.get(B);q?q.push(k):y.set(B,[k])}}return y}function U4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Nne(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function $4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function One(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=th(y.href),k=d.querySelector(um(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Rb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,Yn(k);return}k=d.ownerDocument||d,y=V4(y),(E=Da.get(E))&&tA(y,E),k=k.createElement("link"),Yn(k);var B=k;B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),qr(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Rb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var rA=0;function Dne(l,d){return l.stylesheets&&l.count===0&&jb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&jb(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&rA===0&&(rA=62500*hne());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&jb(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>rA?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function Rb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Mb=null;function jb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Mb=new Map,d.forEach(Rne,l),Mb=null,Rb.call(l))}function Rne(l,d){if(!(d.state.loading&4)){var p=Mb.get(l);if(p)var y=p.get(null);else{p=new Map,Mb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var B=E[k];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(p.set(B.dataset.precedence,B),y=B)}y&&p.set(null,y)}E=d.instance,B=E.getAttribute("data-precedence"),k=p.get(B)||y,k===y&&p.set(null,E),p.set(B,E),this.count++,y=Rb.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var fm={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Mne(l,d,p,y,E,k,B,q,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function q4(l,d,p,y,E,k,B,q,re,ge,Te,Ce){return l=new Mne(l,d,p,B,re,ge,Te,Ce,q),d=1,k===!0&&(d|=24),k=ea(3,null,null,d),l.current=k,k.stateNode=l,d=jE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},BE(k),l}function G4(l){return l?(l=Df,l):Df}function H4(l,d,p,y,E,k){E=G4(E),y.context===null?y.context=E:y.pendingContext=E,y=ac(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=sc(l,y,d),p!==null&&(Ri(p,l,d),qg(p,l,d))}function K4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function iA(l,d){K4(l,d),(l=l.alternate)&&K4(l,d)}function W4(l){if(l.tag===13||l.tag===31){var d=zu(l,67108864);d!==null&&Ri(d,l,67108864),iA(l,67108864)}}function Y4(l){if(l.tag===13||l.tag===31){var d=aa();d=Tu(d);var p=zu(l,d);p!==null&&Ri(p,l,d),iA(l,d)}}var zb=!0;function jne(l,d,p,y){var E=G.T;G.T=null;var k=X.p;try{X.p=2,aA(l,d,p,y)}finally{X.p=k,G.T=E}}function zne(l,d,p,y){var E=G.T;G.T=null;var k=X.p;try{X.p=8,aA(l,d,p,y)}finally{X.p=k,G.T=E}}function aA(l,d,p,y){if(zb){var E=sA(y);if(E===null)GT(l,d,y,Lb,p),Q4(l,y);else if(Vne(E,l,d,p,y))y.stopPropagation();else if(Q4(l,y),d&4&&-1<Lne.indexOf(l)){for(;E!==null;){var k=Sa(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var B=Xi(k.pendingLanes);if(B!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;B;){var re=1<<31-Ut(B);q.entanglements[1]|=re,B&=~re}to(k),(Mt&6)===0&&(xb=yt()+500,sm(0))}}break;case 31:case 13:q=zu(k,2),q!==null&&Ri(q,k,2),Sb(),iA(k,2)}if(k=sA(y),k===null&&GT(l,d,y,Lb,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else GT(l,d,y,null,p)}}function sA(l){return l=_a(l),oA(l)}var Lb=null;function oA(l){if(Lb=null,l=Fs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Lb=l,null}function X4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ft()){case Qr:return 2;case ze:return 8;case mt:case ki:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var lA=!1,vc=null,yc=null,bc=null,hm=new Map,pm=new Map,xc=[],Lne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q4(l,d){switch(l){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":bc=null;break;case"pointerover":case"pointerout":hm.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":pm.delete(d.pointerId)}}function gm(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=Sa(d),d!==null&&W4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Vne(l,d,p,y,E){switch(d){case"focusin":return vc=gm(vc,l,d,p,y,E),!0;case"dragenter":return yc=gm(yc,l,d,p,y,E),!0;case"mouseover":return bc=gm(bc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return hm.set(k,gm(hm.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,pm.set(k,gm(pm.get(k)||null,l,d,p,y,E)),!0}return!1}function Z4(l){var d=Fs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,ts(l.priority,function(){Y4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,ts(l.priority,function(){Y4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Vb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=sA(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);Cg=y,p.target.dispatchEvent(y),Cg=null}else return d=Sa(p),d!==null&&W4(d),l.blockedOn=p,!1;d.shift()}return!0}function J4(l,d,p){Vb(l)&&p.delete(d)}function Bne(){lA=!1,vc!==null&&Vb(vc)&&(vc=null),yc!==null&&Vb(yc)&&(yc=null),bc!==null&&Vb(bc)&&(bc=null),hm.forEach(J4),pm.forEach(J4)}function Bb(l,d){l.blockedOn===d&&(l.blockedOn=null,lA||(lA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bne)))}var Fb=null;function eL(l){Fb!==l&&(Fb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fb===l&&(Fb=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if(oA(y||p)===null)continue;break}var k=Sa(p);k!==null&&(l.splice(d,3),d-=3,sT(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function rh(l){function d(re){return Bb(re,l)}vc!==null&&Bb(vc,l),yc!==null&&Bb(yc,l),bc!==null&&Bb(bc,l),hm.forEach(d),pm.forEach(d);for(var p=0;p<xc.length;p++){var y=xc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<xc.length&&(p=xc[0],p.blockedOn===null);)Z4(p),p.blockedOn===null&&xc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],B=E[Cr]||null;if(typeof k=="function")B||eL(p);else if(B){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,B=k[Cr]||null)q=B.formAction;else if(oA(E)!==null)continue}else q=B.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),eL(p)}}}function tL(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(B){return E=B})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function cA(l){this._internalRoot=l}Ub.prototype.render=cA.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=aa();H4(p,y,l,d,null,null)},Ub.prototype.unmount=cA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;H4(l.current,2,null,l,null,null),Sb(),d[Vs]=null}};function Ub(l){this._internalRoot=l}Ub.prototype.unstable_scheduleHydration=function(l){if(l){var d=Sy();l={blockedOn:null,target:l,priority:d};for(var p=0;p<xc.length&&d!==0&&d<xc[p].priority;p++);xc.splice(p,0,l),p===0&&Z4(l)}};var nL=e.version;if(nL!=="19.2.4")throw Error(r(527,nL,"19.2.4"));X.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var Fne={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$b.isDisabled&&$b.supportsFiber)try{Fn=$b.inject(Fne),Sn=$b}catch{}}return vm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=cz,k=uz,B=dz;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=q4(l,1,!1,null,null,p,y,null,E,k,B,tL),l[Vs]=d.current,qT(l),new cA(d)},vm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=cz,B=uz,q=dz,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=q4(l,1,!0,d,p??null,y,E,re,k,B,q,tL),d.context=G4(null),p=d.current,y=aa(),y=Tu(y),E=ac(y),E.callback=null,sc(p,E,y),p=y,d.current.lanes=p,_u(d,p),to(d),l[Vs]=d.current,qT(l),new Ub(d)},vm.version="19.2.4",vm}var fL;function Zne(){if(fL)return fA.exports;fL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fA.exports=Qne(),fA.exports}var Jne=Zne();const ere="modulepreload",tre=function(t){return"/personal-budget-pwa/"+t},hL={},Jh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=tre(u),u in hL)return;hL[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":ere,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function nre(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Jh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const rre=()=>{};var pL={};const r8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ire=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},GN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ire(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new are;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class are extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sre=function(t){const e=r8(t);return GN.encodeByteArray(e,!0)},i8=function(t){return sre(t).replace(/\./g,"")},a8=function(t){try{return GN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ore=()=>HN().__FIREBASE_DEFAULTS__,lre=()=>{if(typeof process>"u"||typeof pL>"u")return;const t=pL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a8(t[1]);return e&&JSON.parse(e)},SS=()=>{try{return rre()||ore()||lre()||cre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s8=t=>SS()?.emulatorHosts?.[t],ure=t=>{const e=s8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o8=()=>SS()?.config,l8=t=>SS()?.[`_${t}`];class wv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function uu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KN(t){return(await fetch(t,{credentials:"include"})).ok}const Jm={};function dre(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jm))Jm[e]?t.emulator.push(e):t.prod.push(e);return t}function fre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gL=!1;function c8(t,e){if(typeof window>"u"||typeof document>"u"||!uu(window.location.host)||Jm[t]===e||Jm[t]||gL)return;Jm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=dre().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{gL=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=fre(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),A=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const N=u();c(A,S),I.append(A,b,w,N),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function u8(){const t=SS()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gre(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vre(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d8(){return!u8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f8(){return!u8()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function yre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const bre="FirebaseError";class Ro extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bre,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bp.prototype.create)}}class Bp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?xre(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Ro(i,o,r)}}function xre(t,e){return t.replace(wre,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wre=/\{\$([^}]+)}/g;function Sre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(mL(a)&&mL(s)){if(!Zc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mL(t){return t!==null&&typeof t=="object"}function g0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Vm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _re(t,e){const n=new Ere(t,e);return n.subscribe.bind(n)}class Ere{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Tre(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=mA),i.error===void 0&&(i.error=mA),i.complete===void 0&&(i.complete=mA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tre(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mA(){}const Are=1e3,kre=2,Cre=14400*1e3,Ire=.5;function Pre(t,e=Are,n=kre){const r=e*Math.pow(n,t),i=Math.round(Ire*r*(Math.random()-.5)*2);return Math.min(Cre,r+i)}function zt(t){return t&&t._delegate?t._delegate:t}let Ao=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const td="[DEFAULT]";let Nre=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dre(e))try{this.getOrInitializeService({instanceIdentifier:td})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=td){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=td){return this.instances.has(e)}getOptions(e=td){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ore(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=td){return this.component?this.component.multipleInstances?e:td:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ore(t){return t===td?void 0:t}function Dre(t){return t.instantiationMode==="EAGER"}class Rre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const Mre={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},jre=At.INFO,zre={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Lre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zre[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let ES=class{constructor(e){this.name=e,this._logLevel=jre,this._logHandler=Lre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}};const Vre=(t,e)=>e.some(n=>t instanceof n);let vL,yL;function Bre(){return vL||(vL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fre(){return yL||(yL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h8=new WeakMap,rI=new WeakMap,p8=new WeakMap,vA=new WeakMap,WN=new WeakMap;function Ure(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(qc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&h8.set(n,t)}).catch(()=>{}),WN.set(e,t),e}function $re(t){if(rI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});rI.set(t,e)}let iI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qre(t){iI=t(iI)}function Gre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yA(this),e,...n);return p8.set(r,e.sort?e.sort():[e]),qc(r)}:Fre().includes(t)?function(...e){return t.apply(yA(this),e),qc(h8.get(this))}:function(...e){return qc(t.apply(yA(this),e))}}function Hre(t){return typeof t=="function"?Gre(t):(t instanceof IDBTransaction&&$re(t),Vre(t,Bre())?new Proxy(t,iI):t)}function qc(t){if(t instanceof IDBRequest)return Ure(t);if(vA.has(t))return vA.get(t);const e=Hre(t);return e!==t&&(vA.set(t,e),WN.set(e,t)),e}const yA=t=>WN.get(t);function Kre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=qc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(qc(s.result),c.oldVersion,c.newVersion,qc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Wre=["get","getKey","getAll","getAllKeys","count"],Yre=["put","add","delete","clear"],bA=new Map;function bL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bA.get(e))return bA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Yre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Wre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return bA.set(e,a),a}qre(t=>({...t,get:(e,n,r)=>bL(e,n)||t.get(e,n,r),has:(e,n)=>!!bL(e,n)||t.has(e,n)}));class Xre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qre(t){return t.getComponent()?.type==="VERSION"}const aI="@firebase/app",xL="0.14.8";const xl=new ES("@firebase/app"),Zre="@firebase/app-compat",Jre="@firebase/analytics-compat",eie="@firebase/analytics",tie="@firebase/app-check-compat",nie="@firebase/app-check",rie="@firebase/auth",iie="@firebase/auth-compat",aie="@firebase/database",sie="@firebase/data-connect",oie="@firebase/database-compat",lie="@firebase/functions",cie="@firebase/functions-compat",uie="@firebase/installations",die="@firebase/installations-compat",fie="@firebase/messaging",hie="@firebase/messaging-compat",pie="@firebase/performance",gie="@firebase/performance-compat",mie="@firebase/remote-config",vie="@firebase/remote-config-compat",yie="@firebase/storage",bie="@firebase/storage-compat",xie="@firebase/firestore",wie="@firebase/ai",Sie="@firebase/firestore-compat",_ie="firebase",Eie="12.9.0";const sI="[DEFAULT]",Tie={[aI]:"fire-core",[Zre]:"fire-core-compat",[eie]:"fire-analytics",[Jre]:"fire-analytics-compat",[nie]:"fire-app-check",[tie]:"fire-app-check-compat",[rie]:"fire-auth",[iie]:"fire-auth-compat",[aie]:"fire-rtdb",[sie]:"fire-data-connect",[oie]:"fire-rtdb-compat",[lie]:"fire-fn",[cie]:"fire-fn-compat",[uie]:"fire-iid",[die]:"fire-iid-compat",[fie]:"fire-fcm",[hie]:"fire-fcm-compat",[pie]:"fire-perf",[gie]:"fire-perf-compat",[mie]:"fire-rc",[vie]:"fire-rc-compat",[yie]:"fire-gcs",[bie]:"fire-gcs-compat",[xie]:"fire-fst",[Sie]:"fire-fst-compat",[wie]:"fire-vertex","fire-js":"fire-js",[_ie]:"fire-js-all"};const Ew=new Map,Aie=new Map,oI=new Map;function wL(t,e){try{t.container.addComponent(e)}catch(n){xl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wl(t){const e=t.name;if(oI.has(e))return xl.debug(`There were multiple attempts to register component ${e}.`),!1;oI.set(e,t);for(const n of Ew.values())wL(n,t);for(const n of Aie.values())wL(n,t);return!0}function Fp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ua(t){return t==null?!1:t.settings!==void 0}const kie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gc=new Bp("app","Firebase",kie);class Cie{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gc.create("app-deleted",{appName:this._name})}}const Up=Eie;function g8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gc.create("bad-app-name",{appName:String(i)});if(n||(n=o8()),!n)throw Gc.create("no-options");const a=Ew.get(i);if(a){if(Zc(n,a.options)&&Zc(r,a.config))return a;throw Gc.create("duplicate-app",{appName:i})}const s=new Rre(i);for(const c of oI.values())s.addComponent(c);const o=new Cie(n,r,s);return Ew.set(i,o),o}function YN(t=sI){const e=Ew.get(t);if(!e&&t===sI&&o8())return g8();if(!e)throw Gc.create("no-app",{appName:t});return e}function Ss(t,e,n){let r=Tie[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xl.warn(s.join(" "));return}wl(new Ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Iie="firebase-heartbeat-database",Pie=1,Sv="firebase-heartbeat-store";let xA=null;function m8(){return xA||(xA=Kre(Iie,Pie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gc.create("idb-open",{originalErrorMessage:t.message})})),xA}async function Nie(t){try{const n=(await m8()).transaction(Sv),r=await n.objectStore(Sv).get(v8(t));return await n.done,r}catch(e){if(e instanceof Ro)xl.warn(e.message);else{const n=Gc.create("idb-get",{originalErrorMessage:e?.message});xl.warn(n.message)}}}async function SL(t,e){try{const r=(await m8()).transaction(Sv,"readwrite");await r.objectStore(Sv).put(e,v8(t)),await r.done}catch(n){if(n instanceof Ro)xl.warn(n.message);else{const r=Gc.create("idb-set",{originalErrorMessage:n?.message});xl.warn(r.message)}}}function v8(t){return`${t.name}!${t.options.appId}`}const Oie=1024,Die=30;class Rie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_L();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Die){const i=zie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_L(),{heartbeatsToSend:n,unsentEntries:r}=Mie(this._heartbeatsCache.heartbeats),i=i8(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xl.warn(e),""}}}function _L(){return new Date().toISOString().substring(0,10)}function Mie(t,e=Oie){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),EL(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),EL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?yre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function EL(t){return i8(JSON.stringify({version:2,heartbeats:t})).length}function zie(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Lie(t){wl(new Ao("platform-logger",e=>new Xre(e),"PRIVATE")),wl(new Ao("heartbeat",e=>new Rie(e),"PRIVATE")),Ss(aI,xL,t),Ss(aI,xL,"esm2020"),Ss("fire-js","")}Lie("");function y8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vie=y8,b8=new Bp("auth","Firebase",y8());const Tw=new ES("@firebase/auth");function Bie(t,...e){Tw.logLevel<=At.WARN&&Tw.warn(`Auth (${Up}): ${t}`,...e)}function qx(t,...e){Tw.logLevel<=At.ERROR&&Tw.error(`Auth (${Up}): ${t}`,...e)}function Is(t,...e){throw XN(t,...e)}function bo(t,...e){return XN(t,...e)}function x8(t,e,n){const r={...Vie(),[e]:n};return new Bp("auth","Firebase",r).create(e,{appName:t.name})}function hl(t){return x8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b8.create(t,...e)}function nt(t,e,...n){if(!t)throw XN(e,...n)}function ol(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qx(e),new Error(e)}function Sl(t,e){t||ol(e)}function lI(){return typeof self<"u"&&self.location?.href||""}function Fie(){return TL()==="http:"||TL()==="https:"}function TL(){return typeof self<"u"&&self.location?.protocol||null}function Uie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fie()||gre()||"connection"in navigator)?navigator.onLine:!0}function $ie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class m0{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sl(n>e,"Short delay should be less than long delay!"),this.isMobile=hre()||mre()}get(){return Uie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function QN(t,e){Sl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class w8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ol("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ol("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ol("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Gie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hie=new m0(3e4,6e4);function Ms(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xa(t,e,n,r,i={}){return S8(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=g0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return pre()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&uu(t.emulatorConfig.host)&&(u.credentials="include"),w8.fetch()(await _8(t,t.config.apiHost,n,o),u)})}async function S8(t,e,n){t._canInitEmulator=!1;const r={...qie,...e};try{const i=new Wie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw qb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw qb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw qb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x8(t,f,u);Is(t,f)}}catch(i){if(i instanceof Ro)throw i;Is(t,"network-request-failed",{message:String(i)})}}async function v0(t,e,n,r,i={}){const a=await Xa(t,e,n,r,i);return"mfaPendingCredential"in a&&Is(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function _8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?QN(t.config,i):`${t.config.apiScheme}://${i}`;return Gie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function Kie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bo(this.auth,"network-request-failed")),Hie.get())})}}function qb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bo(t,e,r);return i.customData._tokenResponse=n,i}function AL(t){return t!==void 0&&t.enterprise!==void 0}class Yie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Kie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xie(t,e){return Xa(t,"GET","/v2/recaptchaConfig",Ms(t,e))}async function Qie(t,e){return Xa(t,"POST","/v1/accounts:delete",e)}async function Aw(t,e){return Xa(t,"POST","/v1/accounts:lookup",e)}function ev(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Zie(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=ZN(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:ev(wA(i.auth_time)),issuedAtTime:ev(wA(i.iat)),expirationTime:ev(wA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function wA(t){return Number(t)*1e3}function ZN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qx("JWT malformed, contained fewer than 3 sections"),null;try{const i=a8(n);return i?JSON.parse(i):(qx("Failed to decode base64 JWT payload"),null)}catch(i){return qx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kL(t){const e=ZN(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ep(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ro&&Jie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Jie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class eae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ev(this.lastLoginAt),this.creationTime=ev(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kw(t){const e=t.auth,n=await t.getIdToken(),r=await ep(t,Aw(e,{idToken:n}));nt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?E8(i.providerUserInfo):[],s=nae(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function tae(t){const e=zt(t);await kw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function rae(t,e){const n=await S8(t,{},async()=>{const r=g0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await _8(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&uu(t.emulatorConfig.host)&&(c.credentials="include"),w8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iae(t,e){return Xa(t,"POST","/v2/accounts:revokeToken",Ms(t,e))}class Uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=kL(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await rae(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Uh;return r&&(nt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(nt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uh,this.toJSON())}_performRefresh(){return ol("not implemented")}}function Sc(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new eae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ep(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Zie(this,e)}reload(){return tae(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(hl(this.auth));const e=await this.getIdToken();return await ep(this,Qie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;nt(h&&x,e,"internal-error");const w=Uh.fromJSON(this.name,x);nt(typeof h=="string",e,"internal-error"),Sc(r,e.name),Sc(i,e.name),nt(typeof g=="boolean",e,"internal-error"),nt(typeof v=="boolean",e,"internal-error"),Sc(a,e.name),Sc(s,e.name),Sc(o,e.name),Sc(c,e.name),Sc(u,e.name),Sc(f,e.name);const S=new xs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(A=>({...A}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Uh;i.updateFromServerResponse(n);const a=new xs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?E8(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Uh;o.updateFromIdToken(r);const c=new xs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new cI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const CL=new Map;function ll(t){Sl(t instanceof Function,"Expected a class definition");let e=CL.get(t);return e?(Sl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CL.set(t,e),e)}class T8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}T8.type="NONE";const IL=T8;function Gx(t,e,n){return`firebase:${t}:${e}:${n}`}class $h{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Aw(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $h(ll(IL),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||ll(IL);const s=Gx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await Aw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await xs._fromGetAccountInfoResponse(e,g,f)}else h=xs._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new $h(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new $h(a,e,r))}}function PL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N8(e))return"Blackberry";if(O8(e))return"Webos";if(k8(e))return"Safari";if((e.includes("chrome/")||C8(e))&&!e.includes("edge/"))return"Chrome";if(P8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function A8(t=xr()){return/firefox\//i.test(t)}function k8(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C8(t=xr()){return/crios\//i.test(t)}function I8(t=xr()){return/iemobile/i.test(t)}function P8(t=xr()){return/android/i.test(t)}function N8(t=xr()){return/blackberry/i.test(t)}function O8(t=xr()){return/webos/i.test(t)}function JN(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aae(t=xr()){return JN(t)&&!!window.navigator?.standalone}function sae(){return vre()&&document.documentMode===10}function D8(t=xr()){return JN(t)||P8(t)||O8(t)||N8(t)||/windows phone/i.test(t)||I8(t)}function R8(t,e=[]){let n;switch(t){case"Browser":n=PL(xr());break;case"Worker":n=`${PL(xr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Up}/${r}`}class oae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function lae(t,e={}){return Xa(t,"GET","/v2/passwordPolicy",Ms(t,e))}const cae=6;class uae{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cae,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class dae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NL(this),this.idTokenSubscription=new NL(this),this.beforeStateQueue=new oae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ll(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $h.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Aw(this,{idToken:e}),r=await xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ua(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$ie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(hl(this));const n=e?zt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(hl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(hl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ll(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lae(this),n=new uae(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iae(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ll(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await $h.create(this,[ll(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Bie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function du(t){return zt(t)}class NL{constructor(e){this.auth=e,this.observer=null,this.addObserver=_re(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let TS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fae(t){TS=t}function M8(t){return TS.loadJS(t)}function hae(){return TS.recaptchaEnterpriseScript}function pae(){return TS.gapiScript}function gae(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class mae{constructor(){this.enterprise=new vae}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vae{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const yae="recaptcha-enterprise",j8="NO_RECAPTCHA";class bae{constructor(e){this.type=yae,this.auth=du(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Xie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Yie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;AL(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(j8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mae().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&AL(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=hae();c.length!==0&&(c+=o),M8(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function OL(t,e,n,r=!1,i=!1){const a=new bae(t);let s;if(i)s=j8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Cw(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await OL(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await OL(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function xae(t,e){const n=Fp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Zc(a,e??{}))return i;Is(i,"already-initialized")}return n.initialize({options:e})}function wae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ll);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Sae(t,e,n){const r=du(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=z8(e),{host:s,port:o}=_ae(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(Zc(u,r.config.emulator)&&Zc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,uu(s)?(KN(`${a}//${s}${c}`),c8("Auth",!0)):Eae()}function z8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _ae(t){const e=z8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:DL(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:DL(s)}}}function DL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Eae(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class e2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ol("not implemented")}_getIdTokenResponse(e){return ol("not implemented")}_linkToIdToken(e,n){return ol("not implemented")}_getReauthenticationResolver(e){return ol("not implemented")}}async function Tae(t,e){return Xa(t,"POST","/v1/accounts:resetPassword",Ms(t,e))}async function Aae(t,e){return Xa(t,"POST","/v1/accounts:signUp",e)}async function kae(t,e){return Xa(t,"POST","/v1/accounts:update",Ms(t,e))}async function Cae(t,e){return v0(t,"POST","/v1/accounts:signInWithPassword",Ms(t,e))}async function L8(t,e){return Xa(t,"POST","/v1/accounts:sendOobCode",Ms(t,e))}async function Iae(t,e){return L8(t,e)}async function Pae(t,e){return L8(t,e)}async function Nae(t,e){return v0(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}async function Oae(t,e){return v0(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}class _v extends e2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _v(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _v(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cw(e,n,"signInWithPassword",Cae);case"emailLink":return Nae(e,{email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cw(e,r,"signUpPassword",Aae);case"emailLink":return Oae(e,{idToken:n,email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qh(t,e){return v0(t,"POST","/v1/accounts:signInWithIdp",Ms(t,e))}const Dae="http://localhost";class Md extends e2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Md(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Md(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return qh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qh(e,n)}buildRequest(){const e={requestUri:Dae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=g0(n)}return e}}function Rae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mae(t){const e=Lm(Vm(t)).link,n=e?Lm(Vm(e)).deep_link_id:null,r=Lm(Vm(t)).deep_link_id;return(r?Lm(Vm(r)).link:null)||r||n||e||t}class t2{constructor(e){const n=Lm(Vm(e)),r=n.apiKey??null,i=n.oobCode??null,a=Rae(n.mode??null);nt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Mae(e);try{return new t2(n)}catch{return null}}}class of{constructor(){this.providerId=of.PROVIDER_ID}static credential(e,n){return _v._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=t2.parseLink(n);return nt(r,"argument-error"),_v._fromEmailAndCode(e,r.code,r.tenantId)}}of.PROVIDER_ID="password";of.EMAIL_PASSWORD_SIGN_IN_METHOD="password";of.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class V8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class y0 extends V8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pc extends y0{constructor(){super("facebook.com")}static credential(e){return Md._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pc.credential(e.oauthAccessToken)}catch{return null}}}Pc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pc.PROVIDER_ID="facebook.com";class Nc extends y0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Md._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nc.credential(n,r)}catch{return null}}}Nc.GOOGLE_SIGN_IN_METHOD="google.com";Nc.PROVIDER_ID="google.com";class Oc extends y0{constructor(){super("github.com")}static credential(e){return Md._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oc.credential(e.oauthAccessToken)}catch{return null}}}Oc.GITHUB_SIGN_IN_METHOD="github.com";Oc.PROVIDER_ID="github.com";class Dc extends y0{constructor(){super("twitter.com")}static credential(e,n){return Md._fromParams({providerId:Dc.PROVIDER_ID,signInMethod:Dc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Dc.credentialFromTaggedObject(e)}static credentialFromError(e){return Dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Dc.credential(n,r)}catch{return null}}}Dc.TWITTER_SIGN_IN_METHOD="twitter.com";Dc.PROVIDER_ID="twitter.com";async function jae(t,e){return v0(t,"POST","/v1/accounts:signUp",Ms(t,e))}class jd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await xs._fromIdTokenResponse(e,r,i),s=RL(r);return new jd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RL(r);return new jd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Iw extends Ro{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Iw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Iw(e,n,r,i)}}function B8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Iw._fromErrorAndOperation(t,a,e,r):a})}async function zae(t,e,n=!1){const r=await ep(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jd._forOperation(t,"link",r)}async function F8(t,e,n=!1){const{auth:r}=t;if(ua(r.app))return Promise.reject(hl(r));const i="reauthenticate";try{const a=await ep(t,B8(r,i,e,t),n);nt(a.idToken,r,"internal-error");const s=ZN(a.idToken);nt(s,r,"internal-error");const{sub:o}=s;return nt(t.uid===o,r,"user-mismatch"),jd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Is(r,"user-mismatch"),a}}async function U8(t,e,n=!1){if(ua(t.app))return Promise.reject(hl(t));const r="signIn",i=await B8(t,r,e),a=await jd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Lae(t,e){return U8(du(t),e)}async function Vae(t,e){return F8(zt(t),e)}function Bae(t,e,n){nt(n.url?.length>0,t,"invalid-continue-uri"),nt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),nt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(nt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function n2(t){const e=du(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Fae(t,e,n){const r=du(t);await Cw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Pae)}async function Uae(t,e,n){await Tae(zt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n2(t),r})}async function $ae(t,e){await kae(zt(t),{oobCode:e})}async function qae(t,e,n){if(ua(t.app))return Promise.reject(hl(t));const r=du(t),s=await Cw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jae).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&n2(t),c}),o=await jd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Gae(t,e,n){return ua(t.app)?Promise.reject(hl(t)):Lae(zt(t),of.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n2(t),r})}async function ML(t,e){const n=zt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Bae(n.auth,i,e);const{email:a}=await Iae(n.auth,i);a!==t.email&&await t.reload()}async function Hae(t,e){return Xa(t,"POST","/v1/accounts:update",e)}async function Kae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=zt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await ep(r,Hae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function Wae(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function Yae(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function Xae(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function jL(t){return zt(t).signOut()}async function Qae(t){return zt(t).delete()}const Pw="__sak";class $8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pw,"1"),this.storage.removeItem(Pw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zae=1e3,Jae=10;class q8 extends $8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);sae()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Jae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Zae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q8.type="LOCAL";const ese=q8;class G8 extends $8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G8.type="SESSION";const H8=G8;function tse(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class AS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new AS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await tse(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}AS.receivers=[];function r2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class nse{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=r2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function xo(){return window}function rse(t){xo().location.href=t}function K8(){return typeof xo().WorkerGlobalScope<"u"&&typeof xo().importScripts=="function"}async function ise(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ase(){return navigator?.serviceWorker?.controller||null}function sse(){return K8()?self:null}const W8="firebaseLocalStorageDb",ose=1,Nw="firebaseLocalStorage",Y8="fbase_key";class b0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kS(t,e){return t.transaction([Nw],e?"readwrite":"readonly").objectStore(Nw)}function lse(){const t=indexedDB.deleteDatabase(W8);return new b0(t).toPromise()}function uI(){const t=indexedDB.open(W8,ose);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nw,{keyPath:Y8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nw)?e(r):(r.close(),await lse(),e(await uI()))})})}async function zL(t,e,n){const r=kS(t,!0).put({[Y8]:e,value:n});return new b0(r).toPromise()}async function cse(t,e){const n=kS(t,!1).get(e),r=await new b0(n).toPromise();return r===void 0?null:r.value}function LL(t,e){const n=kS(t,!0).delete(e);return new b0(n).toPromise()}const use=800,dse=3;class X8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dse)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=AS._getInstance(sse()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ise(),!this.activeServiceWorker)return;this.sender=new nse(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ase()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uI();return await zL(e,Pw,"1"),await LL(e,Pw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cse(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=kS(i,!1).getAll();return new b0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),use)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X8.type="LOCAL";const fse=X8;new m0(3e4,6e4);function hse(t,e){return e?ll(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class i2 extends e2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pse(t){return U8(t.auth,new i2(t),t.bypassAuthState)}function gse(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),F8(n,new i2(t),t.bypassAuthState)}async function mse(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),zae(n,new i2(t),t.bypassAuthState)}class Q8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pse;case"linkViaPopup":case"linkViaRedirect":return mse;case"reauthViaPopup":case"reauthViaRedirect":return gse;default:Is(this.auth,"internal-error")}}resolve(e){Sl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vse=new m0(2e3,1e4);class kh extends Q8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,kh.currentPopupAction&&kh.currentPopupAction.cancel(),kh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Sl(this.filter.length===1,"Popup operations only handle one event");const e=r2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vse.get())};e()}}kh.currentPopupAction=null;const yse="pendingRedirect",Hx=new Map;class bse extends Q8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hx.get(this.auth._key());if(!e){try{const r=await xse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hx.set(this.auth._key(),e)}return this.bypassAuthState||Hx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xse(t,e){const n=_se(e),r=Sse(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wse(t,e){Hx.set(t._key(),e)}function Sse(t){return ll(t._redirectPersistence)}function _se(t){return Gx(yse,t.config.apiKey,t.name)}async function Ese(t,e,n=!1){if(ua(t.app))return Promise.reject(hl(t));const r=du(t),i=hse(r,e),s=await new bse(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const Tse=600*1e3;class Ase{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Z8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(bo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tse&&this.cachedEventUids.clear(),this.cachedEventUids.has(VL(e))}saveEventToCache(e){this.cachedEventUids.add(VL(e)),this.lastProcessedEventTime=Date.now()}}function VL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function kse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z8(t);default:return!1}}async function Cse(t,e={}){return Xa(t,"GET","/v1/projects",e)}const Ise=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pse=/^https?/;async function Nse(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Cse(t);for(const n of e)try{if(Ose(n))return}catch{}Is(t,"unauthorized-domain")}function Ose(t){const e=lI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Pse.test(n))return!1;if(Ise.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Dse=new m0(3e4,6e4);function BL(){const t=xo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Rse(t){return new Promise((e,n)=>{function r(){BL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BL(),n(bo(t,"network-request-failed"))},timeout:Dse.get()})}if(xo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xo().gapi?.load)r();else{const i=gae("iframefcb");return xo()[i]=()=>{gapi.load?r():n(bo(t,"network-request-failed"))},M8(`${pae()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Kx=null,e})}let Kx=null;function Mse(t){return Kx=Kx||Rse(t),Kx}const jse=new m0(5e3,15e3),zse="__/auth/iframe",Lse="emulator/auth/iframe",Vse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fse(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?QN(e,Lse):`https://${t.config.authDomain}/${zse}`,r={apiKey:e.apiKey,appName:t.name,v:Up},i=Bse.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${g0(r).slice(1)}`}async function Use(t){const e=await Mse(t),n=xo().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:Fse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vse,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=bo(t,"network-request-failed"),o=xo().setTimeout(()=>{a(s)},jse.get());function c(){xo().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const $se={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qse=500,Gse=600,Hse="_blank",Kse="http://localhost";class FL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wse(t,e,n,r=qse,i=Gse){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...$se,width:r.toString(),height:i.toString(),top:a,left:s},u=xr().toLowerCase();n&&(o=C8(u)?Hse:n),A8(u)&&(e=e||Kse,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(aae(u)&&o!=="_self")return Yse(e||"",o),new FL(null);const h=window.open(e||"",o,f);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new FL(h)}function Yse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Xse="__/auth/handler",Qse="emulator/auth/handler",Zse=encodeURIComponent("fac");async function UL(t,e,n,r,i,a){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Up,eventId:i};if(e instanceof V8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Sre(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof y0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Zse}=${encodeURIComponent(c)}`:"";return`${Jse(t)}?${g0(o).slice(1)}${u}`}function Jse({config:t}){return t.emulator?QN(t,Qse):`https://${t.authDomain}/${Xse}`}const SA="webStorageSupport";class eoe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H8,this._completeRedirectFn=Ese,this._overrideRedirectResult=wse}async _openPopup(e,n,r,i){Sl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await UL(e,n,r,lI(),i);return Wse(e,a,r2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await UL(e,n,r,lI(),i);return rse(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Sl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Use(e),r=new Ase(e);return n.register("authEvent",i=>(nt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(SA,{type:SA},i=>{const a=i?.[0]?.[SA];a!==void 0&&n(!!a),Is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Nse(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return D8()||k8()||JN()}}const toe=eoe;var $L="@firebase/auth",qL="1.12.0";class noe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function roe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ioe(t){wl(new Ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;nt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R8(t)},u=new dae(r,i,a,c);return wae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wl(new Ao("auth-internal",e=>{const n=du(e.getProvider("auth").getImmediate());return(r=>new noe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss($L,qL,roe(t)),Ss($L,qL,"esm2020")}const aoe=300,soe=l8("authIdTokenMaxAge")||aoe;let GL=null;const ooe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>soe)return;const i=n?.token;GL!==i&&(GL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function J8(t=YN()){const e=Fp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xae(t,{popupRedirectResolver:toe,persistence:[fse,ese,H8]}),r=l8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=ooe(a.toString());Yae(n,s,()=>s(n.currentUser)),Wae(n,o=>s(o))}}const i=s8("auth");return i&&Sae(n,`http://${i}`),n}function loe(){return document.getElementsByTagName("head")?.[0]??document}fae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=bo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",loe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ioe("Browser");var HL="popstate";function coe(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=lf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),dI("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:Ev(a))}function r(i,a){qa(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return doe(e,n,r,t)}function Cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uoe(){return Math.random().toString(36).substring(2,10)}function KL(t,e){return{usr:t.state,key:t.key,idx:e}}function dI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lf(e):e,state:n,key:e&&e.key||r||uoe()}}function Ev({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function doe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let A=dI(x.location,w,S);n&&n(A,w),u=f()+1;let I=KL(A,u),N=x.createHref(A);try{s.pushState(I,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(N)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,S){o="REPLACE";let A=dI(x.location,w,S);n&&n(A,w),u=f();let I=KL(A,u),N=x.createHref(A);s.replaceState(I,"",N),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return foe(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(HL,h),c=w,()=>{i.removeEventListener(HL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function foe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Cn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ev(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function eq(t,e,n="/"){return hoe(t,e,n,!1)}function hoe(t,e,n,r){let i=typeof e=="string"?lf(e):e,a=_l(i.pathname||"/",n);if(a==null)return null;let s=tq(t);poe(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=Toe(a);o=_oe(s[c],u,r)}return o}function tq(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Cn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=pl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(Cn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),tq(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:woe(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of nq(s.path))a(s,o,!0,c)}),e}function nq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=nq(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function poe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Soe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var goe=/^:[\w-]+$/,moe=3,voe=2,yoe=1,boe=10,xoe=-2,WL=t=>t==="*";function woe(t,e){let n=t.split("/"),r=n.length;return n.some(WL)&&(r+=xoe),e&&(r+=voe),n.filter(i=>!WL(i)).reduce((i,a)=>i+(goe.test(a)?moe:a===""?yoe:boe),r)}function Soe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _oe(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Ow({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Ow({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:pl([a,h.pathname]),pathnameBase:Ioe(pl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=pl([a,h.pathnameBase]))}return s}function Ow(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Eoe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function Eoe(t,e=!1,n=!0){qa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Toe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function _l(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Aoe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function koe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lf(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=YL(n.substring(1),"/"):a=YL(n,e)):a=e,{pathname:a,search:Poe(r),hash:Noe(i)}}function YL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _A(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Coe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rq(t){let e=Coe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function iq(t,e,n,r=!1){let i;typeof t=="string"?i=lf(t):(i={...t},Cn(!i.pathname||!i.pathname.includes("?"),_A("?","pathname","search",i)),Cn(!i.pathname||!i.pathname.includes("#"),_A("#","pathname","hash",i)),Cn(!i.search||!i.search.includes("#"),_A("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=koe(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var pl=t=>t.join("/").replace(/\/\/+/g,"/"),Ioe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Poe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Noe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Ooe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Doe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Roe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sq(t,e){let n=t;if(typeof n!="string"||!Aoe.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(aq)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=_l(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{qa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oq=["POST","PUT","PATCH","DELETE"];new Set(oq);var Moe=["GET",...oq];new Set(Moe);var $p=T.createContext(null);$p.displayName="DataRouter";var CS=T.createContext(null);CS.displayName="DataRouterState";var joe=T.createContext(!1),lq=T.createContext({isTransitioning:!1});lq.displayName="ViewTransition";var zoe=T.createContext(new Map);zoe.displayName="Fetchers";var Loe=T.createContext(null);Loe.displayName="Await";var Qa=T.createContext(null);Qa.displayName="Navigation";var x0=T.createContext(null);x0.displayName="Location";var Mo=T.createContext({outlet:null,matches:[],isDataRoute:!1});Mo.displayName="Route";var a2=T.createContext(null);a2.displayName="RouteError";var cq="REACT_ROUTER_ERROR",Voe="REDIRECT",Boe="ROUTE_ERROR_RESPONSE";function Foe(t){if(t.startsWith(`${cq}:${Voe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Uoe(t){if(t.startsWith(`${cq}:${Boe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ooe(e.status,e.statusText,e.data)}catch{}}function $oe(t,{relative:e}={}){Cn(w0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(Qa),{hash:i,pathname:a,search:s}=S0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:pl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function w0(){return T.useContext(x0)!=null}function js(){return Cn(w0(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(x0).location}var uq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dq(t){T.useContext(Qa).static||T.useLayoutEffect(t)}function xa(){let{isDataRoute:t}=T.useContext(Mo);return t?rle():qoe()}function qoe(){Cn(w0(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext($p),{basename:e,navigator:n}=T.useContext(Qa),{matches:r}=T.useContext(Mo),{pathname:i}=js(),a=JSON.stringify(rq(r)),s=T.useRef(!1);return dq(()=>{s.current=!0}),T.useCallback((c,u={})=>{if(qa(s.current,uq),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=iq(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:pl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}T.createContext(null);function Goe(){let{matches:t}=T.useContext(Mo),e=t[t.length-1];return e?e.params:{}}function S0(t,{relative:e}={}){let{matches:n}=T.useContext(Mo),{pathname:r}=js(),i=JSON.stringify(rq(n));return T.useMemo(()=>iq(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Hoe(t,e){return fq(t,e)}function fq(t,e,n,r,i){Cn(w0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(Qa),{matches:s}=T.useContext(Mo),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let A=h&&h.path||"";pq(u,!h||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let g=js(),v;if(e){let A=typeof e=="string"?lf(e):e;Cn(f==="/"||A.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${A.pathname}" was given in the \`location\` prop.`),v=A}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let A=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=eq(t,{pathname:x});qa(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),qa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Qoe(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:pl([f,a.encodeLocation?a.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:pl([f,a.encodeLocation?a.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),s,n,r,i);return e&&S?T.createElement(x0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function Koe(){let t=nle(),e=Doe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,s)}var Woe=T.createElement(Koe,null),hq=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Uoe(t.digest);n&&(t=n)}let e=t!==void 0?T.createElement(Mo.Provider,{value:this.props.routeContext},T.createElement(a2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(Yoe,{error:t},e):e}};hq.contextType=joe;var EA=new WeakMap;function Yoe({children:t,error:e}){let{basename:n}=T.useContext(Qa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Foe(e.digest);if(r){let i=EA.get(e);if(i)throw i;let a=sq(r.location,n);if(aq&&!EA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw EA.set(e,s),s}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Xoe({routeContext:t,match:e,children:n}){let r=T.useContext($p);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Mo.Provider,{value:t},n)}function Qoe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);Cn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Roe(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||Woe,o&&(c<0&&g===0?(pq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),A=()=>{let I;return v?I=x:b?I=w:h.route.Component?I=T.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,T.createElement(Xoe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?T.createElement(hq,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):A()},null)}function s2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zoe(t){let e=T.useContext($p);return Cn(e,s2(t)),e}function Joe(t){let e=T.useContext(CS);return Cn(e,s2(t)),e}function ele(t){let e=T.useContext(Mo);return Cn(e,s2(t)),e}function o2(t){let e=ele(t),n=e.matches[e.matches.length-1];return Cn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function tle(){return o2("useRouteId")}function nle(){let t=T.useContext(a2),e=Joe("useRouteError"),n=o2("useRouteError");return t!==void 0?t:e.errors?.[n]}function rle(){let{router:t}=Zoe("useNavigate"),e=o2("useNavigate"),n=T.useRef(!1);return dq(()=>{n.current=!0}),T.useCallback(async(i,a={})=>{qa(n.current,uq),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var XL={};function pq(t,e,n){!e&&!XL[t]&&(XL[t]=!0,qa(!1,n))}T.memo(ile);function ile({routes:t,future:e,state:n,onError:r}){return fq(t,void 0,n,r,e)}function fs(t){Cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ale({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Cn(!w0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=lf(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=T.useMemo(()=>{let x=_l(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return qa(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(Qa.Provider,{value:c},T.createElement(x0.Provider,{children:e,value:b}))}function sle({children:t,location:e}){return Hoe(fI(t),e)}function fI(t,e=[]){let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){n.push.apply(n,fI(r.props.children,a));return}Cn(r.type===fs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=fI(r.props.children,a)),n.push(s)}),n}var Wx="get",Yx="application/x-www-form-urlencoded";function IS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function ole(t){return IS(t)&&t.tagName.toLowerCase()==="button"}function lle(t){return IS(t)&&t.tagName.toLowerCase()==="form"}function cle(t){return IS(t)&&t.tagName.toLowerCase()==="input"}function ule(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dle(t,e){return t.button===0&&(!e||e==="_self")&&!ule(t)}function hI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function fle(t,e){let n=hI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Gb=null;function hle(){if(Gb===null)try{new FormData(document.createElement("form"),0),Gb=!1}catch{Gb=!0}return Gb}var ple=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function TA(t){return t!=null&&!ple.has(t)?(qa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yx}"`),null):t}function gle(t,e){let n,r,i,a,s;if(lle(t)){let o=t.getAttribute("action");r=o?_l(o,e):null,n=t.getAttribute("method")||Wx,i=TA(t.getAttribute("enctype"))||Yx,a=new FormData(t)}else if(ole(t)||cle(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?_l(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Wx,i=TA(t.getAttribute("formenctype"))||TA(o.getAttribute("enctype"))||Yx,a=new FormData(o,t),!hle()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(IS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Wx,r=null,i=Yx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function l2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mle(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&_l(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function vle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yle(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ble(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await vle(a,n);return s.links?s.links():[]}return[]}));return _le(r.flat(1).filter(yle).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function xle(t,e,{includeHydrateFallback:n}={}){return wle(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function wle(t){return[...new Set(t)]}function Sle(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _le(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(Sle(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function gq(){let t=T.useContext($p);return l2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Ele(){let t=T.useContext(CS);return l2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var c2=T.createContext(void 0);c2.displayName="FrameworkContext";function mq(){let t=T.useContext(c2);return l2(t,"You must render this element inside a <HydratedRouter> element"),t}function Tle(t,e){let n=T.useContext(c2),[r,i]=T.useState(!1),[a,s]=T.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=T.useRef(null);T.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(A=>{s(A.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),T.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:ym(o,v),onBlur:ym(c,b),onMouseEnter:ym(u,v),onMouseLeave:ym(f,b),onTouchStart:ym(h,v)}]:[!1,g,{}]}function ym(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Ale({page:t,...e}){let{router:n}=gq(),r=T.useMemo(()=>eq(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(Cle,{page:t,matches:r,...e}):null}function kle(t){let{manifest:e,routeModules:n}=mq(),[r,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return ble(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Cle({page:t,matches:e,...n}){let r=js(),{future:i,manifest:a,routeModules:s}=mq(),{basename:o}=gq(),{loaderData:c,matches:u}=Ele(),f=T.useMemo(()=>QL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=T.useMemo(()=>QL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(A=>{let I=a.routes[A.route.id];!I||!I.hasLoader||(!f.some(N=>N.route.id===A.route.id)&&A.route.id in c&&s[A.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(A.route.id))}),x.size===0)return[];let S=mle(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(A=>x.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=T.useMemo(()=>xle(h,a),[h,a]),b=kle(h);return T.createElement(T.Fragment,null,g.map(x=>T.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>T.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>T.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function Ile(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ple=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ple&&(window.__reactRouterVersion="7.13.0")}catch{}function Nle({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=T.useRef();i.current==null&&(i.current=coe({window:r,v5Compat:!0}));let a=i.current,[s,o]=T.useState({action:a.action,location:a.location}),c=T.useCallback(u=>{n===!1?o(u):T.startTransition(()=>o(u))},[n]);return T.useLayoutEffect(()=>a.listen(c),[a,c]),T.createElement(ale,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var vq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yq=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=T.useContext(Qa),S=typeof u=="string"&&vq.test(u),A=sq(u,x);u=A.to;let I=$oe(u,{relative:i}),[N,O,D]=Tle(r,v),P=Mle(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function C(M){e&&e(M),M.defaultPrevented||P(M)}let R=T.createElement("a",{...v,...D,href:A.absoluteURL||I,onClick:A.isExternal||a?e:C,ref:Ile(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return N&&!S?T.createElement(T.Fragment,null,R,T.createElement(Ale,{page:I})):R});yq.displayName="Link";var Ole=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=S0(s,{relative:u.relative}),g=js(),v=T.useContext(CS),{navigator:b,basename:x}=T.useContext(Qa),w=v!=null&&Ble(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,A=g.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(A=A.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=_l(I,x)||I);const N=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=A===S||!i&&A.startsWith(S)&&A.charAt(N)==="/",D=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),P={isActive:O,isPending:D,isTransitioning:w},C=O?e:void 0,R;typeof r=="function"?R=r(P):R=[r,O?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(P):a;return T.createElement(yq,{...u,"aria-current":C,className:R,ref:f,style:M,to:s,viewTransition:o},typeof c=="function"?c(P):c)});Ole.displayName="NavLink";var Dle=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Wx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=T.useContext(Qa),w=Lle(),S=Vle(o,{relative:u}),A=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&vq.test(o),N=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let D=O.nativeEvent.submitter,P=D?.getAttribute("formmethod")||s,C=()=>w(D||O.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?T.startTransition(()=>C()):C()};return T.createElement("form",{ref:b,method:A,action:S,onSubmit:r?c:N,...v,"data-discover":!I&&t==="render"?"true":void 0})});Dle.displayName="Form";function Rle(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bq(t){let e=T.useContext($p);return Cn(e,Rle(t)),e}function Mle(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=xa(),f=js(),h=S0(t,{relative:a});return T.useCallback(g=>{if(dle(g,e)){g.preventDefault();let v=n!==void 0?n:Ev(f)===Ev(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?T.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function xq(t){qa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(hI(t)),n=T.useRef(!1),r=js(),i=T.useMemo(()=>fle(r.search,n.current?null:e.current),[r.search]),a=xa(),s=T.useCallback((o,c)=>{const u=hI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var jle=0,zle=()=>`__${String(++jle)}__`;function Lle(){let{router:t}=bq("useSubmit"),{basename:e}=T.useContext(Qa),n=tle(),r=t.fetch,i=t.navigate;return T.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=gle(a,e);if(s.navigate===!1){let g=s.fetcherKey||zle();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Vle(t,{relative:e}={}){let{basename:n}=T.useContext(Qa),r=T.useContext(Mo);Cn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...S0(t||".",{relative:e})},s=js();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:pl([n,a.pathname])),Ev(a)}function Ble(t,{relative:e}={}){let n=T.useContext(lq);Cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bq("useViewTransitionState"),i=S0(t,{relative:e});if(!n.isTransitioning)return!1;let a=_l(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=_l(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ow(i.pathname,s)!=null||Ow(i.pathname,a)!=null}var u2=n8();const Fle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ule=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ZL=t=>{const e=Ule(t);return e.charAt(0).toUpperCase()+e.slice(1)},wq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$le=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var qle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gle=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>T.createElement("svg",{ref:c,...qle,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wq("lucide",i),...!a&&!$le(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>T.createElement(u,f)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=T.forwardRef(({className:r,...i},a)=>T.createElement(Gle,{ref:a,iconNode:e,className:wq(`lucide-${Fle(ZL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ZL(t),n};const Hle=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ps=Qe("arrow-left",Hle);const Kle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Wle=Qe("arrow-right-left",Kle);const Yle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xle=Qe("arrow-right",Yle);const Qle=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Zle=Qe("bug",Qle);const Jle=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sq=Qe("calendar",Jle);const ece=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Dw=Qe("chart-column",ece);const tce=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_q=Qe("chart-pie",tce);const nce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],d2=Qe("check",nce);const rce=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ice=Qe("chevron-down",rce);const ace=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sce=Qe("chevron-left",ace);const oce=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hs=Qe("chevron-right",oce);const lce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cce=Qe("circle-alert",lce);const uce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],dce=Qe("circle-arrow-down",uce);const fce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],hce=Qe("circle-arrow-up",fce);const pce=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rw=Qe("circle-check-big",pce);const gce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],co=Qe("circle-check",gce);const mce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JL=Qe("circle",mce);const vce=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yce=Qe("clock",vce);const bce=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ch=Qe("dollar-sign",bce);const xce=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mw=Qe("download",xce);const wce=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Sce=Qe("ellipsis",wce);const _ce=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Eq=Qe("eye-off",_ce);const Ece=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tq=Qe("eye",Ece);const Tce=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ace=Qe("file-text",Tce);const kce=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],f2=Qe("folder-open",kce);const Cce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ice=Qe("folder",Cce);const Pce=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Aq=Qe("funnel",Pce);const Nce=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],tp=Qe("grip-vertical",Nce);const Oce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Dce=Qe("house",Oce);const Rce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],e3=Qe("info",Rce);const Mce=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],jce=Qe("list",Mce);const zce=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Lce=Qe("loader",zce);const Vce=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],t3=Qe("lock",Vce);const Bce=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fce=Qe("log-out",Bce);const Uce=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pI=Qe("mail",Uce);const $ce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],n3=Qe("mic",$ce);const qce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gce=Qe("pause",qce);const Hce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Kce=Qe("pen",Hce);const Wce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],cf=Qe("piggy-bank",Wce);const Yce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uf=Qe("plus",Yce);const Xce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],np=Qe("refresh-cw",Xce);const Qce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Zce=Qe("rotate-ccw",Qce);const Jce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kq=Qe("search",Jce);const eue=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tue=Qe("settings",eue);const nue=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Cq=Qe("skip-forward",nue);const rue=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Gh=Qe("sparkles",rue);const iue=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],aue=Qe("tags",iue);const sue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oue=Qe("target",sue);const lue=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tv=Qe("trash-2",lue);const cue=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Iq=Qe("trash",cue);const uue=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],due=Qe("trending-down",uue);const fue=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jc=Qe("trending-up",fue);const hue=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Td=Qe("triangle-alert",hue);const pue=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],gue=Qe("undo-2",pue);const mue=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vue=Qe("upload",mue);const yue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bue=Qe("user-plus",yue);const xue=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wue=Qe("user",xue);const Sue=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],rp=Qe("wallet",Sue);const _ue=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qp=Qe("x",_ue),r3=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},Eue=(t=>t?r3(t):r3),Tue=t=>t;function Aue(t,e=Tue){const n=sl.useSyncExternalStore(t.subscribe,sl.useCallback(()=>e(t.getState()),[t,e]),sl.useCallback(()=>e(t.getInitialState()),[t,e]));return sl.useDebugValue(n),n}const i3=t=>{const e=Eue(t),n=r=>Aue(e,r);return Object.assign(n,e),n},h2=(t=>t?i3(t):i3),a3={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},s3=t=>!!t.dispatchFromDevtools&&typeof t.dispatch=="function",Av=new Map,Hb=t=>{const e=Av.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},kue=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Av.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Av.set(n.name,i),{type:"tracked",store:t,...i}},Cue=(t,e)=>{if(e===void 0)return;const n=Av.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Av.delete(t))},Iue=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Pue=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(a3?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=kue(o,u,c);let g=!0;i.setState=((x,w,S)=>{const A=n(x,w);if(!g)return A;const I=S===void 0?{type:s||Iue(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),A):(f?.send({...I,type:`${o}/${I.type}`},{...Hb(c.name),[o]:i.getState()}),A)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),Cue(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),s3(i)){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(a3?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return AA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){v(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const A=S.state[o];if(A==null)return;JSON.stringify(i.getState())!==JSON.stringify(A)&&v(A);return}s3(i)&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Hb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Hb(c.name));case"ROLLBACK":return AA(x.state,S=>{if(o===void 0){v(S),f?.init(i.getState());return}v(S[o]),f?.init(Hb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return AA(x.state,S=>{if(o===void 0){v(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&v(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,A=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!A)return;v(o===void 0?A:A[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},Nue=Pue,AA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function Oue(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const gI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return gI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return gI(r)(n)}}}},Due=(t,e)=>(n,r,i)=>{let a={storage:Oue(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},s=!1,o=0;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return f.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,S)=>(g(w,S),h());const v=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>v;let b;const x=()=>{var w,S;if(!f)return;const A=++o;s=!1,c.forEach(N=>{var O;return N((O=r())!=null?O:v)});const I=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(w=r())!=null?w:v))||void 0;return gI(f.getItem.bind(f))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate){const O=a.migrate(N.state,N.version);return O instanceof Promise?O.then(D=>[!0,D]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var O;if(A!==o)return;const[D,P]=N;if(b=a.merge(P,(O=r())!=null?O:v),n(b,!0),D)return h()}).then(()=>{A===o&&(I?.(b,void 0),b=r(),s=!0,u.forEach(N=>N(b)))}).catch(N=>{A===o&&I?.(void 0,N)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||x(),b||v},Pq=Due;var Rue="firebase",Mue="12.9.0";Ss(Rue,Mue,"app");var o3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hc,Nq;(function(){var t;function e(P,C){function R(){}R.prototype=C.prototype,P.F=C.prototype,P.prototype=new R,P.prototype.constructor=P,P.D=function(M,V,L){for(var z=Array(arguments.length-2),K=2;K<arguments.length;K++)z[K-2]=arguments[K];return C.prototype[V].apply(M,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,R){R||(R=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(V=0;V<16;++V)M[V]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=P.g[0],R=P.g[1],V=P.g[2];let L=P.g[3],z;z=C+(L^R&(V^L))+M[0]+3614090360&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[1]+3905402710&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[2]+606105819&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[3]+3250441966&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[4]+4118548399&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[5]+1200080426&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[6]+2821735955&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[7]+4249261313&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[8]+1770035416&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[9]+2336552879&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[10]+4294925233&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[11]+2304563134&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[12]+1804603682&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[13]+4254626195&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[14]+2792965006&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[15]+1236535329&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(V^L&(R^V))+M[1]+4129170786&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[6]+3225465664&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[11]+643717713&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[0]+3921069994&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[5]+3593408605&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[10]+38016083&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[15]+3634488961&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[4]+3889429448&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[9]+568446438&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[14]+3275163606&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[3]+4107603335&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[8]+1163531501&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[13]+2850285829&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[2]+4243563512&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[7]+1735328473&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[12]+2368359562&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(R^V^L)+M[5]+4294588738&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[8]+2272392833&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[11]+1839030562&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[14]+4259657740&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[1]+2763975236&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[4]+1272893353&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[7]+4139469664&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[10]+3200236656&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[13]+681279174&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[0]+3936430074&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[3]+3572445317&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[6]+76029189&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[9]+3654602809&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[12]+3873151461&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[15]+530742520&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[2]+3299628645&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(V^(R|~L))+M[0]+4096336452&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[7]+1126891415&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[14]+2878612391&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[5]+4237533241&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[12]+1700485571&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[3]+2399980690&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[10]+4293915773&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[1]+2240044497&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[8]+1873313359&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[15]+4264355552&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[6]+2734768916&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[13]+1309151649&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[4]+4149444226&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[11]+3174756917&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[2]+718787259&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(V+(z<<21&4294967295|z>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+L&4294967295}r.prototype.v=function(P,C){C===void 0&&(C=P.length);const R=C-this.blockSize,M=this.C;let V=this.h,L=0;for(;L<C;){if(V==0)for(;L<=R;)i(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<C;)if(M[V++]=P.charCodeAt(L++),V==this.blockSize){i(this,M),V=0;break}}else for(;L<C;)if(M[V++]=P[L++],V==this.blockSize){i(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;C=this.o*8;for(var R=P.length-8;R<P.length;++R)P[R]=C&255,C/=256;for(this.v(P),P=Array(16),C=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)P[C++]=this.g[R]>>>M&255;return P};function a(P,C){var R=o;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=C(P)}function s(P,C){this.h=C;const R=[];let M=!0;for(let V=P.length-1;V>=0;V--){const L=P[V]|0;M&&L==C||(R[V]=L,M=!1)}this.g=R}var o={};function c(P){return-128<=P&&P<128?a(P,function(C){return new s([C|0],C<0?-1:0)}):new s([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return h;if(P<0)return w(u(-P));const C=[];let R=1;for(let M=0;P>=R;M++)C[M]=P/R|0,R*=4294967296;return new s(C,0)}function f(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return w(f(P.substring(1),C));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(C,8));let M=h;for(let L=0;L<P.length;L+=8){var V=Math.min(8,P.length-L);const z=parseInt(P.substring(L,L+V),C);V<8?(V=u(Math.pow(C,V)),M=M.j(V).add(u(z))):(M=M.j(R),M=M.add(u(z)))}return M}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let P=0,C=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);P+=(M>=0?M:4294967296+M)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(x(this))return"-"+w(this).toString(P);const C=u(Math.pow(P,6));var R=this;let M="";for(;;){const V=N(R,C).g;R=S(R,V.j(C));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(P);if(R=V,b(R))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(let C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function x(P){return P.h==-1}t.l=function(P){return P=S(this,P),x(P)?-1:b(P)?0:1};function w(P){const C=P.g.length,R=[];for(let M=0;M<C;M++)R[M]=~P.g[M];return new s(R,~P.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(P){const C=Math.max(this.g.length,P.g.length),R=[];let M=0;for(let V=0;V<=C;V++){let L=M+(this.i(V)&65535)+(P.i(V)&65535),z=(L>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);M=z>>>16,L&=65535,z&=65535,R[V]=z<<16|L}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(P,C){return P.add(w(C))}t.j=function(P){if(b(this)||b(P))return h;if(x(this))return x(P)?w(this).j(w(P)):w(w(this).j(P));if(x(P))return w(this.j(w(P)));if(this.l(v)<0&&P.l(v)<0)return u(this.m()*P.m());const C=this.g.length+P.g.length,R=[];for(var M=0;M<2*C;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<P.g.length;V++){const L=this.i(M)>>>16,z=this.i(M)&65535,K=P.i(V)>>>16,Y=P.i(V)&65535;R[2*M+2*V]+=z*Y,A(R,2*M+2*V),R[2*M+2*V+1]+=L*Y,A(R,2*M+2*V+1),R[2*M+2*V+1]+=z*K,A(R,2*M+2*V+1),R[2*M+2*V+2]+=L*K,A(R,2*M+2*V+2)}for(P=0;P<C;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=C;P<2*C;P++)R[P]=0;return new s(R,0)};function A(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function I(P,C){this.g=P,this.h=C}function N(P,C){if(b(C))throw Error("division by zero");if(b(P))return new I(h,h);if(x(P))return C=N(w(P),C),new I(w(C.g),w(C.h));if(x(C))return C=N(P,w(C)),new I(w(C.g),C.h);if(P.g.length>30){if(x(P)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var R=g,M=C;M.l(P)<=0;)R=O(R),M=O(M);var V=D(R,1),L=D(M,1);for(M=D(M,2),R=D(R,2);!b(M);){var z=L.add(M);z.l(P)<=0&&(V=V.add(R),L=z),M=D(M,1),R=D(R,1)}return C=S(P,V.j(C)),new I(V,C)}for(V=h;P.l(C)>=0;){for(R=Math.max(1,Math.floor(P.m()/C.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=u(R),z=L.j(C);x(z)||z.l(P)>0;)R-=M,L=u(R),z=L.j(C);b(L)&&(L=g),V=V.add(L),P=S(P,z)}return new I(V,P)}t.B=function(P){return N(this,P).h},t.and=function(P){const C=Math.max(this.g.length,P.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)&P.i(M);return new s(R,this.h&P.h)},t.or=function(P){const C=Math.max(this.g.length,P.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)|P.i(M);return new s(R,this.h|P.h)},t.xor=function(P){const C=Math.max(this.g.length,P.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)^P.i(M);return new s(R,this.h^P.h)};function O(P){const C=P.g.length+1,R=[];for(let M=0;M<C;M++)R[M]=P.i(M)<<1|P.i(M-1)>>>31;return new s(R,P.h)}function D(P,C){const R=C>>5;C%=32;const M=P.g.length-R,V=[];for(let L=0;L<M;L++)V[L]=C>0?P.i(L+R)>>>C|P.i(L+R+1)<<32-C:P.i(L+R);return new s(V,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Nq=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Hc=s}).apply(typeof o3<"u"?o3:typeof self<"u"?self:typeof window<"u"?window:{});var Kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Oq,Bm,Dq,Xx,mI,Rq,Mq,jq;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kb=="object"&&Kb];for(var j=0;j<_.length;++j){var F=_[j];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,j){if(j)e:{var F=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var he=_[H];if(!(he in F))break e;F=F[he]}_=_[_.length-1],H=F[_],j=j(H),j!=H&&j!=null&&e(F,_,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(j){var F=[],H;for(H in j)Object.prototype.hasOwnProperty.call(j,H)&&F.push([H,j[H]]);return F}});var a=a||{},s=this||self;function o(_){var j=typeof _;return j=="object"&&_!=null||j=="function"}function c(_,j,F){return _.call.apply(_.bind,arguments)}function u(_,j,F){return u=c,u.apply(null,arguments)}function f(_,j){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function h(_,j){function F(){}F.prototype=j.prototype,_.Z=j.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(H,he,xe){for(var je=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)je[ct-2]=arguments[ct];return j.prototype[he].apply(H,je)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function v(_){const j=_.length;if(j>0){const F=Array(j);for(let H=0;H<j;H++)F[H]=_[H];return F}return[]}function b(_,j){for(let H=1;H<arguments.length;H++){const he=arguments[H];var F=typeof he;if(F=F!="object"?F:he?Array.isArray(he)?"array":F:"null",F=="array"||F=="object"&&typeof he.length=="number"){F=_.length||0;const xe=he.length||0;_.length=F+xe;for(let je=0;je<xe;je++)_[F+je]=he[je]}else _.push(he)}}class x{constructor(j,F){this.i=j,this.j=F,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=P;let j=null;return _.g&&(j=_.g,_.g=_.g.next,_.g||(_.h=null),j.next=null),j}class A{constructor(){this.h=this.g=null}add(j,F){const H=I.get();H.set(j,F),this.h?this.h.next=H:this.g=H,this.h=H}}var I=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(j,F){this.h=j,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,P=new A,C=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var j=I;j.j(_),j.h<100&&(j.h++,_.next=j.g,j.g=_)}D=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(_,j){this.type=_,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,j=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,j),s.removeEventListener("test",F,j)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function K(_,j){V.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,j)}h(K,V),K.prototype.init=function(_,j){const F=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=j,j=_.relatedTarget,j||(F=="mouseover"?j=_.fromElement:F=="mouseout"&&(j=_.toElement)),this.relatedTarget=j,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),G=0;function X(_,j,F,H,he){this.listener=_,this.proxy=null,this.src=j,this.type=F,this.capture=!!H,this.ha=he,this.key=++G,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ee(_,j,F){for(const H in _)j.call(F,_[H],H,_)}function Q(_,j){for(const F in _)j.call(void 0,_[F],F,_)}function U(_){const j={};for(const F in _)j[F]=_[F];return j}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(_,j){let F,H;for(let he=1;he<arguments.length;he++){H=arguments[he];for(F in H)_[F]=H[F];for(let xe=0;xe<Z.length;xe++)F=Z[xe],Object.prototype.hasOwnProperty.call(H,F)&&(_[F]=H[F])}}function W(_){this.src=_,this.g={},this.h=0}W.prototype.add=function(_,j,F,H,he){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const je=ie(_,j,H,he);return je>-1?(j=_[je],F||(j.fa=!1)):(j=new X(j,this.src,xe,!!H,he),j.fa=F,_.push(j)),j};function ue(_,j){const F=j.type;if(F in _.g){var H=_.g[F],he=Array.prototype.indexOf.call(H,j,void 0),xe;(xe=he>=0)&&Array.prototype.splice.call(H,he,1),xe&&(J(j),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ie(_,j,F,H){for(let he=0;he<_.length;++he){const xe=_[he];if(!xe.da&&xe.listener==j&&xe.capture==!!F&&xe.ha==H)return he}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Se={};function se(_,j,F,H,he){if(Array.isArray(j)){for(let xe=0;xe<j.length;xe++)se(_,j[xe],F,H,he);return null}return F=Ye(F),_&&_[Y]?_.J(j,F,o(H)?!!H.capture:!1,he):Ae(_,j,F,!1,H,he)}function Ae(_,j,F,H,he,xe){if(!j)throw Error("Invalid event type");const je=o(he)?!!he.capture:!!he;let ct=Oe(_);if(ct||(_[oe]=ct=new W(_)),F=ct.add(j,F,H,je,xe),F.proxy)return F;if(H=ve(),F.proxy=H,H.src=_,H.listener=F,_.addEventListener)L||(he=je),he===void 0&&(he=!1),_.addEventListener(j.toString(),H,he);else if(_.attachEvent)_.attachEvent(be(j.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function ve(){function _(F){return j.call(_.src,_.listener,F)}const j=_e;return _}function ne(_,j,F,H,he){if(Array.isArray(j))for(var xe=0;xe<j.length;xe++)ne(_,j[xe],F,H,he);else H=o(H)?!!H.capture:!!H,F=Ye(F),_&&_[Y]?(_=_.i,xe=String(j).toString(),xe in _.g&&(j=_.g[xe],F=ie(j,F,H,he),F>-1&&(J(j[F]),Array.prototype.splice.call(j,F,1),j.length==0&&(delete _.g[xe],_.h--)))):_&&(_=Oe(_))&&(j=_.g[j.toString()],_=-1,j&&(_=ie(j,F,H,he)),(F=_>-1?j[_]:null)&&Pe(F))}function Pe(_){if(typeof _!="number"&&_&&!_.da){var j=_.src;if(j&&j[Y])ue(j.i,_);else{var F=_.type,H=_.proxy;j.removeEventListener?j.removeEventListener(F,H,_.capture):j.detachEvent?j.detachEvent(be(F),H):j.addListener&&j.removeListener&&j.removeListener(H),(F=Oe(j))?(ue(F,_),F.h==0&&(F.src=null,j[oe]=null)):J(_)}}}function be(_){return _ in Se?Se[_]:Se[_]="on"+_}function _e(_,j){if(_.da)_=!0;else{j=new K(j,this);const F=_.listener,H=_.ha||_.src;_.fa&&Pe(_),_=F.call(H,j)}return _}function Oe(_){return _=_[oe],_ instanceof W?_:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(_){return typeof _=="function"?_:(_[De]||(_[De]=function(j){return _.handleEvent(j)}),_[De])}function Ve(){M.call(this),this.i=new W(this),this.M=this,this.G=null}h(Ve,M),Ve.prototype[Y]=!0,Ve.prototype.removeEventListener=function(_,j,F,H){ne(this,_,j,F,H)};function it(_,j){var F,H=_.G;if(H)for(F=[];H;H=H.G)F.push(H);if(_=_.M,H=j.type||j,typeof j=="string")j=new V(j,_);else if(j instanceof V)j.target=j.target||_;else{var he=j;j=new V(H,_),te(j,he)}he=!0;let xe,je;if(F)for(je=F.length-1;je>=0;je--)xe=j.g=F[je],he=Bt(xe,H,!0,j)&&he;if(xe=j.g=_,he=Bt(xe,H,!0,j)&&he,he=Bt(xe,H,!1,j)&&he,F)for(je=0;je<F.length;je++)xe=j.g=F[je],he=Bt(xe,H,!1,j)&&he}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var _=this.i;for(const j in _.g){const F=_.g[j];for(let H=0;H<F.length;H++)J(F[H]);delete _.g[j],_.h--}}this.G=null},Ve.prototype.J=function(_,j,F,H){return this.i.add(String(_),j,!1,F,H)},Ve.prototype.K=function(_,j,F,H){return this.i.add(String(_),j,!0,F,H)};function Bt(_,j,F,H){if(j=_.i.g[String(j)],!j)return!0;j=j.concat();let he=!0;for(let xe=0;xe<j.length;++xe){const je=j[xe];if(je&&!je.da&&je.capture==F){const ct=je.listener,Un=je.ha||je.src;je.fa&&ue(_.i,je),he=ct.call(Un,H)!==!1&&he}}return he&&!H.defaultPrevented}function Bn(_,j){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:s.setTimeout(_,j||0)}function wn(_){_.g=Bn(()=>{_.g=null,_.i&&(_.i=!1,wn(_))},_.l);const j=_.h;_.h=null,_.m.apply(null,j)}class yt extends M{constructor(j,F){super(),this.m=j,this.l=F,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:wn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(_){M.call(this),this.h=_,this.g={}}h(Ft,M);var Qr=[];function ze(_){ee(_.g,function(j,F){this.g.hasOwnProperty(F)&&Pe(j)},_),_.g={}}Ft.prototype.N=function(){Ft.Z.N.call(this),ze(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=s.JSON.stringify,ki=s.JSON.parse,Zr=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function Pn(){}function Ar(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){V.call(this,"d")}h(Sn,V);function kr(){V.call(this,"c")}h(kr,V);var Ut={},ur=null;function di(){return ur=ur||new Ve}Ut.Ia="serverreachability";function es(_){V.call(this,Ut.Ia,_)}h(es,V);function xt(_){const j=di();it(j,new es(j))}Ut.STAT_EVENT="statevent";function _n(_,j){V.call(this,Ut.STAT_EVENT,_),this.stat=j}h(_n,V);function En(_){const j=di();it(j,new _n(j,_))}Ut.Ja="timingevent";function Xi(_,j){V.call(this,Ut.Ja,_),this.size=j}h(Xi,V);function wa(_,j){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},j)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function pE(_,j,F,H,he,xe){_.info(function(){if(_.g)if(xe){var je="",ct=xe.split("&");for(let Rt=0;Rt<ct.length;Rt++){var Un=ct[Rt].split("=");if(Un.length>1){const mn=Un[0];Un=Un[1];const Ta=mn.split("_");je=Ta.length>=2&&Ta[1]=="type"?je+(mn+"="+Un+"&"):je+(mn+"=redacted&")}}}else je=null;else je=xe;return"XMLHTTP REQ ("+H+") [attempt "+he+"]: "+j+`
`+F+`
`+je})}function wy(_,j,F,H,he,xe,je){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+he+"]: "+j+`
`+F+`
`+xe+" "+je})}function Ls(_,j,F,H){_.info(function(){return"XMLHTTP TEXT ("+j+"): "+gE(_,F)+(H?" "+H:"")})}function _u(_,j){_.info(function(){return"TIMEOUT: "+j})}fi.prototype.info=function(){};function gE(_,j){if(!_.g)return j;if(!j)return null;try{const xe=JSON.parse(j);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var he=H[0];if(he!="noop"&&he!="stop"&&he!="close")for(let je=1;je<H.length;je++)H[je]=""}}}}return mt(xe)}catch{return j}}var Eu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yg;function Tu(){}h(Tu,Pn),Tu.prototype.g=function(){return new XMLHttpRequest},yg=new Tu;function Vo(_){return encodeURIComponent(String(_))}function Sy(_){var j=1;_=_.split(":");const F=[];for(;j>0&&_.length;)F.push(_.shift()),j--;return _.length&&F.push(_.join(":")),F}function ts(_,j,F,H){this.j=_,this.i=j,this.l=F,this.S=H||1,this.V=new Ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var Wn={},Cr={};function Vs(_,j,F){_.M=1,_.A=Au(Xn(j)),_.u=F,_.R=!0,yf(_,null)}function yf(_,j){_.F=Date.now(),Bs(_),_.B=Xn(_.A);var F=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),Sf(F.i,"t",H),_.C=0,F=_.j.L,_.h=new ns,_.g=zy(_.j,F?j:null,!_.u),_.P>0&&(_.O=new yt(u(_.Y,_,_.g),_.P)),j=_.V,F=_.g,H=_.ba;var he="readystatechange";Array.isArray(he)||(he&&(Qr[0]=he.toString()),he=Qr);for(let xe=0;xe<he.length;xe++){const je=se(F,he[xe],H||j.handleEvent,!1,j.h||j);if(!je)break;j.g[je.key]=je}j=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,j)):(_.v="GET",_.g.ea(_.B,_.v,null,j)),xt(),pE(_.i,_.v,_.B,_.l,_.S,_.u)}ts.prototype.ba=function(_){_=_.target;const j=this.O;j&&as(_)==3?j.j():this.Y(_)},ts.prototype.Y=function(_){try{if(_==this.g)e:{const ct=as(this.g),Un=this.g.ya(),Rt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Br(this.g)))){this.K||ct!=4||Un==7||(Un==8||Rt<=0?xt(3):xt(2)),Fs(this);var j=this.g.ca();this.X=j;var F=mE(this);if(this.o=j==200,wy(this.i,this.v,this.B,this.l,this.S,ct,j),this.o){if(this.U&&!this.L){t:{if(this.g){var H,he=this.g;if((H=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var xe=H;break t}}xe=null}if(_=xe)Ls(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Us(this,_);else{this.o=!1,this.m=3,En(12),Qi(this),Sa(this);break e}}if(this.R){_=!0;let mn;for(;!this.K&&this.C<F.length;)if(mn=Ey(this,F),mn==Cr){ct==4&&(this.m=4,En(14),_=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Wn){this.m=4,En(15),Ls(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Ls(this.i,this.l,mn,null),Us(this,mn);if(_y(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||F.length!=0||this.h.h||(this.m=1,En(16),_=!1),this.o=this.o&&_,!_)Ls(this.i,this.l,F,"[Invalid Chunked Response]"),Qi(this),Sa(this);else if(F.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Dg(je),je.P=!0,En(11))}}else Ls(this.i,this.l,F,null),Us(this,F);ct==4&&Qi(this),this.o&&!this.K&&(ct==4?Dy(this.j,this):(this.o=!1,Bs(this)))}else Fo(this.g),j==400&&F.indexOf("Unknown SID")>0?(this.m=3,En(12)):(this.m=0,En(13)),Qi(this),Sa(this)}}}catch{}};function mE(_){if(!_y(_))return _.g.la();const j=Br(_.g);if(j==="")return"";let F="";const H=j.length,he=as(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Qi(_),Sa(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)_.h.h=!0,F+=_.h.i.decode(j[xe],{stream:!(he&&xe==H-1)});return j.length=0,_.h.g+=F,_.C=0,_.h.g}function _y(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function Ey(_,j){var F=_.C,H=j.indexOf(`
`,F);return H==-1?Cr:(F=Number(j.substring(F,H)),isNaN(F)?Wn:(H+=1,H+F>j.length?Cr:(j=j.slice(H,H+F),_.C=H+F,j)))}ts.prototype.cancel=function(){this.K=!0,Qi(this)};function Bs(_){_.T=Date.now()+_.H,bf(_,_.H)}function bf(_,j){if(_.D!=null)throw Error("WatchDog timer not null");_.D=wa(u(_.aa,_),j)}function Fs(_){_.D&&(s.clearTimeout(_.D),_.D=null)}ts.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(_u(this.i,this.B),this.M!=2&&(xt(),En(17)),Qi(this),this.m=2,Sa(this)):bf(this,this.T-_)};function Sa(_){_.j.I==0||_.K||Dy(_.j,_)}function Qi(_){Fs(_);var j=_.O;j&&typeof j.dispose=="function"&&j.dispose(),_.O=null,ze(_.V),_.g&&(j=_.g,_.g=null,j.abort(),j.dispose())}function Us(_,j){try{var F=_.j;if(F.I!=0&&(F.g==_||qs(F.h,_))){if(!_.L&&qs(F.h,_)&&F.I==3){try{var H=F.Ba.g.parse(j)}catch{H=null}if(Array.isArray(H)&&H.length==3){var he=H;if(he[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)kf(F),Zl(F);else break e;Du(F),En(18)}}else F.xa=he[1],0<F.xa-F.K&&he[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=wa(u(F.Va,F),6e3));$s(F.h)<=1&&F.ta&&(F.ta=void 0)}else Xs(F,11)}else if((_.L||F.g==_)&&kf(F),!z(j))for(he=F.Ba.g.parse(j),j=0;j<he.length;j++){let Rt=he[j];const mn=Rt[0];if(!(mn<=F.K))if(F.K=mn,Rt=Rt[1],F.I==2)if(Rt[0]=="c"){F.M=Rt[1],F.ba=Rt[2];const Ta=Rt[3];Ta!=null&&(F.ka=Ta,F.j.info("VER="+F.ka));const Qs=Rt[4];Qs!=null&&(F.za=Qs,F.j.info("SVER="+F.za));const ss=Rt[5];ss!=null&&typeof ss=="number"&&ss>0&&(H=1.5*ss,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const os=_.g;if(os){const Ru=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var xe=H.h;xe.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(wg(xe,xe.h),xe.h=null))}if(H.G){const Cf=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&(H.wa=Cf,$t(H.J,H.G,Cf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var je=_;if(H.na=jy(H,H.L?H.ba:null,H.W),je.L){Sg(H.h,je);var ct=je,Un=H.O;Un&&(ct.H=Un),ct.D&&(Fs(ct),Bs(ct)),H.g=je}else Ny(H);F.i.length>0&&Ys(F)}else Rt[0]!="stop"&&Rt[0]!="close"||Xs(F,7);else F.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Xs(F,7):Ng(F):Rt[0]!="noop"&&F.l&&F.l.qa(Rt),F.A=0)}}xt(4)}catch{}}var Yn=class{constructor(_,j){this.g=_,this.map=j}};function bg(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xg(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function $s(_){return _.h?1:_.g?_.g.size:0}function qs(_,j){return _.h?_.h==j:_.g?_.g.has(j):!1}function wg(_,j){_.g?_.g.add(j):_.h=j}function Sg(_,j){_.h&&_.h==j?_.h=null:_.g&&_.g.has(j)&&_.g.delete(j)}bg.prototype.cancel=function(){if(this.i=_g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function _g(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let j=_.i;for(const F of _.g.values())j=j.concat(F.G);return j}return v(_.i)}var Ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xf(_,j){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const H=_[F].indexOf("=");let he,xe=null;H>=0?(he=_[F].substring(0,H),xe=_[F].substring(H+1)):he=_[F],j(he,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Zi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;_ instanceof Zi?(this.l=_.l,Ir(this,_.j),this.o=_.o,this.g=_.g,Gl(this,_.u),this.h=_.h,Eg(this,Iy(_.i)),this.m=_.m):_&&(j=String(_).match(Ty))?(this.l=!1,Ir(this,j[1]||"",!0),this.o=Gs(j[2]||""),this.g=Gs(j[3]||"",!0),Gl(this,j[4]),this.h=Gs(j[5]||"",!0),Eg(this,j[6]||"",!0),this.m=Gs(j[7]||"")):(this.l=!1,this.i=new Kl(null,this.l))}Zi.prototype.toString=function(){const _=[];var j=this.j;j&&_.push(ku(j,wf,!0),":");var F=this.g;return(F||j=="file")&&(_.push("//"),(j=this.o)&&_.push(ku(j,wf,!0),"@"),_.push(Vo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(ku(F,F.charAt(0)=="/"?Tg:Ay,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",ku(F,ky)),_.join("")},Zi.prototype.resolve=function(_){const j=Xn(this);let F=!!_.j;F?Ir(j,_.j):F=!!_.o,F?j.o=_.o:F=!!_.g,F?j.g=_.g:F=_.u!=null;var H=_.h;if(F)Gl(j,_.u);else if(F=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var he=j.h.lastIndexOf("/");he!=-1&&(H=j.h.slice(0,he+1)+H)}if(he=H,he==".."||he==".")H="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){H=he.lastIndexOf("/",0)==0,he=he.split("/");const xe=[];for(let je=0;je<he.length;){const ct=he[je++];ct=="."?H&&je==he.length&&xe.push(""):ct==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&je==he.length&&xe.push("")):(xe.push(ct),H=!0)}H=xe.join("/")}else H=he}return F?j.h=H:F=_.i.toString()!=="",F?Eg(j,Iy(_.i)):F=!!_.m,F&&(j.m=_.m),j};function Xn(_){return new Zi(_)}function Ir(_,j,F){_.j=F?Gs(j,!0):j,_.j&&(_.j=_.j.replace(/:$/,""))}function Gl(_,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);_.u=j}else _.u=null}function Eg(_,j,F){j instanceof Kl?(_.i=j,_f(_.i,_.l)):(F||(j=ku(j,Hl)),_.i=new Kl(j,_.l))}function $t(_,j,F){_.i.set(j,F)}function Au(_){return $t(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Gs(_,j){return _?j?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ku(_,j,F){return typeof _=="string"?(_=encodeURI(_).replace(j,Ci),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ci(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var wf=/[#\/\?@]/g,Ay=/[#\?:]/g,Tg=/[#\?]/g,Hl=/[#\?@]/g,ky=/#/g;function Kl(_,j){this.h=this.g=null,this.i=_||null,this.j=!!j}function Ii(_){_.g||(_.g=new Map,_.h=0,_.i&&xf(_.i,function(j,F){_.add(decodeURIComponent(j.replace(/\+/g," ")),F)}))}t=Kl.prototype,t.add=function(_,j){Ii(this),this.i=null,_=Wl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(j),this.h+=1,this};function Cy(_,j){Ii(_),j=Wl(_,j),_.g.has(j)&&(_.i=null,_.h-=_.g.get(j).length,_.g.delete(j))}function Ag(_,j){return Ii(_),j=Wl(_,j),_.g.has(j)}t.forEach=function(_,j){Ii(this),this.g.forEach(function(F,H){F.forEach(function(he){_.call(j,he,H,this)},this)},this)};function kg(_,j){Ii(_);let F=[];if(typeof j=="string")Ag(_,j)&&(F=F.concat(_.g.get(Wl(_,j))));else for(_=Array.from(_.g.values()),j=0;j<_.length;j++)F=F.concat(_[j]);return F}t.set=function(_,j){return Ii(this),this.i=null,_=Wl(this,_),Ag(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[j]),this.h+=1,this},t.get=function(_,j){return _?(_=kg(this,_),_.length>0?String(_[0]):j):j};function Sf(_,j,F){Cy(_,j),F.length>0&&(_.i=null,_.g.set(Wl(_,j),v(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],j=Array.from(this.g.keys());for(let H=0;H<j.length;H++){var F=j[H];const he=Vo(F);F=kg(this,F);for(let xe=0;xe<F.length;xe++){let je=he;F[xe]!==""&&(je+="="+Vo(F[xe])),_.push(je)}}return this.i=_.join("&")};function Iy(_){const j=new Kl;return j.i=_.i,_.g&&(j.g=new Map(_.g),j.h=_.h),j}function Wl(_,j){return j=String(j),_.j&&(j=j.toLowerCase()),j}function _f(_,j){j&&!_.j&&(Ii(_),_.i=null,_.g.forEach(function(F,H){const he=H.toLowerCase();H!=he&&(Cy(this,H),Sf(this,he,F))},_)),_.j=j}function rs(_,j){const F=new fi;if(s.Image){const H=new Image;H.onload=f(_a,F,"TestLoadImage: loaded",!0,j,H),H.onerror=f(_a,F,"TestLoadImage: error",!1,j,H),H.onabort=f(_a,F,"TestLoadImage: abort",!1,j,H),H.ontimeout=f(_a,F,"TestLoadImage: timeout",!1,j,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else j(!1)}function Cg(_,j){const F=new fi,H=new AbortController,he=setTimeout(()=>{H.abort(),_a(F,"TestPingServer: timeout",!1,j)},1e4);fetch(_,{signal:H.signal}).then(xe=>{clearTimeout(he),xe.ok?_a(F,"TestPingServer: ok",!0,j):_a(F,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(he),_a(F,"TestPingServer: error",!1,j)})}function _a(_,j,F,H,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),H(F)}catch{}}function Yl(){this.g=new Zr}function Hs(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Hs,Pn),Hs.prototype.g=function(){return new Cu(this.i,this.h)};function Cu(_,j){Ve.call(this),this.H=_,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Cu,Ve),t=Cu.prototype,t.open=function(_,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=j,this.readyState=1,is(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(j.body=_),(this.H||s).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xl(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ef(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ef(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var j=_.value?_.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!_.done}))&&(this.response=this.responseText+=j)}_.done?Xl(this):is(this),this.readyState==3&&Ef(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Xl(this))},t.Na=function(_){this.g&&(this.response=_,Xl(this))},t.ga=function(){this.g&&Xl(this)};function Xl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,is(_)}t.setRequestHeader=function(_,j){this.A.append(_,j)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],j=this.h.entries();for(var F=j.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=j.next();return _.join(`\r
`)};function is(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Ea(_){let j="";return ee(_,function(F,H){j+=H,j+=":",j+=F,j+=`\r
`}),j}function Iu(_,j,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=Ea(F),typeof _=="string"?F!=null&&Vo(F):$t(_,j,F))}function Yt(_){Ve.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Yt,Ve);var Ks=/^https?$/i,Ig=["POST","PUT"];t=Yt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,j,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);j=j?j.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(j,String(_),!0),this.B=!1}catch(xe){Pu(this,xe);return}if(_=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var he in H)F.set(he,H[he]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),he=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(Ig,j,void 0)>=0)||H||he||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,je]of F)this.g.setRequestHeader(xe,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){Pu(this,xe)}};function Pu(_,j){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=j,_.o=5,Pg(_),Bo(_)}function Pg(_){_.A||(_.A=!0,it(_,"complete"),it(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,it(this,"complete"),it(this,"abort"),Bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nu(this):this.Xa())},t.Xa=function(){Nu(this)};function Nu(_){if(_.h&&typeof a<"u"){if(_.v&&as(_)==4)setTimeout(_.Ca.bind(_),0);else if(it(_,"readystatechange"),as(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var F;if(!(F=j)){var H;if(H=xe===0){let je=String(_.D).match(Ty)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),H=!Ks.test(je?je.toLowerCase():"")}F=H}if(F)it(_,"complete"),it(_,"success");else{_.o=6;try{var he=as(_)>2?_.g.statusText:""}catch{he=""}_.l=he+" ["+_.ca()+"]",Pg(_)}}finally{Bo(_)}}}}function Bo(_,j){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,j||it(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function as(_){return _.g?_.g.readyState:0}t.ca=function(){try{return as(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var j=this.g.responseText;return _&&j.indexOf(_)==0&&(j=j.substring(_.length)),ki(j)}};function Br(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Fo(_){const j={};_=(_.g&&as(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(z(_[H]))continue;var F=Sy(_[H]);const he=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=j[he]||[];j[he]=xe,xe.push(F)}Q(j,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(_,j,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||j}function Ql(_){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,_),this.Za=Ws("retryDelaySeedMs",1e4,_),this.Ta=Ws("forwardChannelMaxRetries",2,_),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new bg(_&&_.concurrentRequestLimit),this.Ba=new Yl,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ql.prototype,t.ka=8,t.I=1,t.connect=function(_,j,F,H){En(0),this.W=_,this.H=j||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=jy(this,null,this.W),Ys(this)};function Ng(_){if(Tf(_),_.I==3){var j=_.V++,F=Xn(_.J);if($t(F,"SID",_.M),$t(F,"RID",j),$t(F,"TYPE","terminate"),Ou(_,F),j=new ts(_,_.j,j),j.M=2,j.A=Au(Xn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(j.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=j.A,F=!0),F||(j.g=zy(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Bs(j)}My(_)}function Zl(_){_.g&&(Dg(_),_.g.cancel(),_.g=null)}function Tf(_){Zl(_),_.v&&(s.clearTimeout(_.v),_.v=null),kf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Ys(_){if(!xg(_.h)&&!_.m){_.m=!0;var j=_.Ea;O||C(),D||(O(),D=!0),P.add(j,_),_.D=0}}function Af(_,j){return $s(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=j.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=wa(u(_.Ea,_,j),Ry(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const he=new ts(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=U(xe),te(xe,this.U)):xe=this.U),this.u!==null||this.R||(he.J=xe,xe=null),this.S)e:{for(var j=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(j+=H,j>4096){j=F;break e}if(j===4096||F===this.i.length-1){j=F+1;break e}}j=1e3}else j=1e3;j=Py(this,he,j),F=Xn(this.J),$t(F,"RID",_),$t(F,"CVER",22),this.G&&$t(F,"X-HTTP-Session-Id",this.G),Ou(this,F),xe&&(this.R?j="headers="+Vo(Ea(xe))+"&"+j:this.u&&Iu(F,this.u,xe)),wg(this.h,he),this.Ra&&$t(F,"TYPE","init"),this.S?($t(F,"$req",j),$t(F,"SID","null"),he.U=!0,Vs(he,F,null)):Vs(he,F,j),this.I=2}}else this.I==3&&(_?Og(this,_):this.i.length==0||xg(this.h)||Og(this))};function Og(_,j){var F;j?F=j.l:F=_.V++;const H=Xn(_.J);$t(H,"SID",_.M),$t(H,"RID",F),$t(H,"AID",_.K),Ou(_,H),_.u&&_.o&&Iu(H,_.u,_.o),F=new ts(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),j&&(_.i=j.G.concat(_.i)),j=Py(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),wg(_.h,F),Vs(F,H,j)}function Ou(_,j){_.H&&ee(_.H,function(F,H){$t(j,H,F)}),_.l&&ee({},function(F,H){$t(j,H,F)})}function Py(_,j,F){F=Math.min(_.i.length,F);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var he=_.i;let ct=-1;for(;;){const Un=["count="+F];ct==-1?F>0?(ct=he[0].g,Un.push("ofs="+ct)):ct=0:Un.push("ofs="+ct);let Rt=!0;for(let mn=0;mn<F;mn++){var xe=he[mn].g;const Ta=he[mn].map;if(xe-=ct,xe<0)ct=Math.max(0,he[mn].g-100),Rt=!1;else try{xe="req"+xe+"_"||"";try{var je=Ta instanceof Map?Ta:Object.entries(Ta);for(const[Qs,ss]of je){let os=ss;o(ss)&&(os=mt(ss)),Un.push(xe+Qs+"="+encodeURIComponent(os))}}catch(Qs){throw Un.push(xe+"type="+encodeURIComponent("_badmap")),Qs}}catch{H&&H(Ta)}}if(Rt){je=Un.join("&");break e}}je=void 0}return _=_.i.splice(0,F),j.G=_,je}function Ny(_){if(!_.g&&!_.v){_.Y=1;var j=_.Da;O||C(),D||(O(),D=!0),P.add(j,_),_.A=0}}function Du(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=wa(u(_.Da,_),Ry(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Oy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=wa(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,En(10),Zl(this),Oy(this))};function Dg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function Oy(_){_.g=new ts(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var j=Xn(_.na);$t(j,"RID","rpc"),$t(j,"SID",_.M),$t(j,"AID",_.K),$t(j,"CI",_.F?"0":"1"),!_.F&&_.ia&&$t(j,"TO",_.ia),$t(j,"TYPE","xmlhttp"),Ou(_,j),_.u&&_.o&&Iu(j,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Au(Xn(j)),F.u=null,F.R=!0,yf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Zl(this),Du(this),En(19))};function kf(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function Dy(_,j){var F=null;if(_.g==j){kf(_),Dg(_),_.g=null;var H=2}else if(qs(_.h,j))F=j.G,Sg(_.h,j),H=1;else return;if(_.I!=0){if(j.o)if(H==1){F=j.u?j.u.length:0,j=Date.now()-j.F;var he=_.D;H=di(),it(H,new Xi(H,F)),Ys(_)}else Ny(_);else if(he=j.m,he==3||he==0&&j.X>0||!(H==1&&Af(_,j)||H==2&&Du(_)))switch(F&&F.length>0&&(j=_.h,j.i=j.i.concat(F)),he){case 1:Xs(_,5);break;case 4:Xs(_,10);break;case 3:Xs(_,6);break;default:Xs(_,2)}}}function Ry(_,j){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*j}function Xs(_,j){if(_.j.info("Error code "+j),j==2){var F=u(_.bb,_),H=_.Ua;const he=!H;H=new Zi(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ir(H,"https"),Au(H),he?rs(H.toString(),F):Cg(H.toString(),F)}else En(2);_.I=0,_.l&&_.l.pa(j),My(_),Tf(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function My(_){if(_.I=0,_.ja=[],_.l){const j=_g(_.h);(j.length!=0||_.i.length!=0)&&(b(_.ja,j),b(_.ja,_.i),_.h.i.length=0,v(_.i),_.i.length=0),_.l.oa()}}function jy(_,j,F){var H=F instanceof Zi?Xn(F):new Zi(F);if(H.g!="")j&&(H.g=j+"."+H.g),Gl(H,H.u);else{var he=s.location;H=he.protocol,j=j?j+"."+he.hostname:he.hostname,he=+he.port;const xe=new Zi(null);H&&Ir(xe,H),j&&(xe.g=j),he&&Gl(xe,he),F&&(xe.h=F),H=xe}return F=_.G,j=_.wa,F&&j&&$t(H,F,j),$t(H,"VER",_.ka),Ou(_,H),H}function zy(_,j,F){if(j&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=_.Aa&&!_.ma?new Yt(new Hs({ab:F})):new Yt(_.ma),j.Fa(_.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ly(){}t=Ly.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jl(){}Jl.prototype.g=function(_,j){return new hi(_,j)};function hi(_,j){Ve.call(this),this.g=new Ql(j),this.l=_,this.h=j&&j.messageUrlParams||null,_=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(_?_["X-WebChannel-Content-Type"]=j.messageContentType:_={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(_?_["X-WebChannel-Client-Profile"]=j.sa:_={"X-WebChannel-Client-Profile":j.sa}),this.g.U=_,(_=j&&j.Qb)&&!z(_)&&(this.g.u=_),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!z(j)&&(this.g.G=j,_=this.h,_!==null&&j in _&&(_=this.h,j in _&&delete _[j])),this.j=new Uo(this)}h(hi,Ve),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){Ng(this.g)},hi.prototype.o=function(_){var j=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=mt(_),_=F);j.i.push(new Yn(j.Ya++,_)),j.I==3&&Ys(j)},hi.prototype.N=function(){this.g.l=null,delete this.j,Ng(this.g),delete this.g,hi.Z.N.call(this)};function Vy(_){Sn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var j=_.__sm__;if(j){e:{for(const F in j){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,j=j!==null&&_ in j?j[_]:void 0),this.data=j}else this.data=_}h(Vy,Sn);function By(){kr.call(this),this.status=1}h(By,kr);function Uo(_){this.g=_}h(Uo,Ly),Uo.prototype.ra=function(){it(this.g,"a")},Uo.prototype.qa=function(_){it(this.g,new Vy(_))},Uo.prototype.pa=function(_){it(this.g,new By)},Uo.prototype.oa=function(){it(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,jq=function(){return new Jl},Mq=function(){return di()},Rq=Ut,mI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eu.NO_ERROR=0,Eu.TIMEOUT=8,Eu.HTTP_ERROR=6,Xx=Eu,vg.COMPLETE="complete",Dq=vg,Ar.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Bm=Ar,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,Oq=Yt}).apply(typeof Kb<"u"?Kb:typeof self<"u"?self:typeof window<"u"?window:{});class ni{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");let Gp="12.9.0";function jue(t){Gp=t}const zd=new ES("@firebase/firestore");function bh(){return zd.logLevel}function Ne(t,...e){if(zd.logLevel<=At.DEBUG){const n=e.map(p2);zd.debug(`Firestore (${Gp}): ${t}`,...n)}}function Gn(t,...e){if(zd.logLevel<=At.ERROR){const n=e.map(p2);zd.error(`Firestore (${Gp}): ${t}`,...n)}}function ip(t,...e){if(zd.logLevel<=At.WARN){const n=e.map(p2);zd.warn(`Firestore (${Gp}): ${t}`,...n)}}function p2(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zq(t,r,n)}function zq(t,e,n){let r=`FIRESTORE (${Gp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||zq(e,i,r)}function Ke(t,e){return t}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Ro{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class zue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ni.UNAUTHENTICATED)))}shutdown(){}}class Vue{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new wo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new wo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new zue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new ni(e)}}class Bue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Fue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ni.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ua(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l3(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $ue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class g2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=$ue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function vI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return kA(i)===kA(a)?st(i,a):kA(i)?1:-1}return st(t.length,e.length)}const que=55296,Gue=57343;function kA(t){const e=t.charCodeAt(0);return e>=que&&e<=Gue}function ap(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Lq(t){return t+"\0"}const c3="__name__";class uo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return uo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof uo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=uo.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return st(e.length,n.length)}static compareSegments(e,n){const r=uo.isNumericId(e),i=uo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?uo.extractNumericId(e).compare(uo.extractNumericId(n)):vI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hc.fromString(e.substring(4,e.length-2))}}class jt extends uo{construct(e,n,r){return new jt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new jt(n)}static emptyPath(){return new jt([])}}const Hue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends uo{construct(e,n,r){return new An(e,n,r)}static isValidIdentifier(e){return Hue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c3}static keyField(){return new An([c3])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Me(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Me(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Me(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(jt.fromString(e))}static fromName(e){return new Le(jt.fromString(e).popFirst(5))}static empty(){return new Le(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return jt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new jt(e.slice()))}}function Vq(t,e,n){if(!n)throw new Me(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kue(t,e,n,r){if(e===!0&&r===!0)throw new Me(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u3(t){if(!Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d3(t){if(Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function PS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=PS(t);throw new Me(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function _0(t,e){if(!Bq(t))throw new Me(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(Ee.INVALID_ARGUMENT,n);return!0}const f3=-62135596800,h3=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*h3);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f3)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h3}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_0(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:ar("string",ht._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new ht(0,0))}static max(){return new et(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sp=-1;class jw{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function yI(t){return t.fields.find((e=>e.kind===2))}function nd(t){return t.fields.filter((e=>e.kind!==2))}jw.UNKNOWN_ID=-1;class Qx{constructor(e,n){this.fieldPath=e,this.kind=n}}class kv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new kv(0,ma.min())}}function Fq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new ma(i,Le.empty(),e)}function Uq(t){return new ma(t.readTime,t.key,sp)}class ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ma(et.min(),Le.empty(),sp)}static max(){return new ma(et.max(),Le.empty(),sp)}}function m2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}const $q="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fu(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==$q)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const oa="SimpleDb";class NS{static open(e,n,r,i){try{return new NS(n,e.transaction(i,r))}catch(a){throw new tv(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new wo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new tv(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=v2(r.target.error);this.S.reject(new tv(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ne(oa,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Yue(n)}}class Kc{static delete(e){return Ne(oa,"Removing database:",e),cd(HN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_S())return!1;if(Kc.F())return!0;const e=xr(),n=Kc.M(e),r=0<n&&n<10,i=Gq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Kc.M(xr())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ne(oa,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new tv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Me(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Me(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new tv(e,s))},i.onupgradeneeded=a=>{Ne(oa,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Ne(oa,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=NS.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Ne(oa,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Gq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Wue{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return cd(this.U.delete())}}class tv extends Me{constructor(e,n){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function hu(t){return t.name==="IndexedDbTransactionError"}class Yue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ne(oa,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ne(oa,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cd(r)}add(e){return Ne(oa,"ADD",this.store.name,e,e),cd(this.store.add(e))}get(e){return cd(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ne(oa,"GET",this.store.name,e,n),n)))}delete(e){return Ne(oa,"DELETE",this.store.name,e),cd(this.store.delete(e))}count(){return Ne(oa,"COUNT",this.store.name),cd(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.J(a,((o,c)=>{s.push(c)})).next((()=>s))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}X(e,n){Ne(oa,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=v2(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}J(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Wue(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function cd(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=v2(r.target.error);n(i)}}))}let p3=!1;function v2(t){const e=Kc.M(xr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p3||(p3=!0,setTimeout((()=>{throw r}),0)),r}}return t}const nv="IndexBackfiller";class Xue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ne(nv,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ne(nv,`Documents written: ${n}`)}catch(n){hu(n)?Ne(nv,"Ignoring IndexedDB error during index backfill: ",n):await fu(n)}await this.re(6e4)}))}}class Que{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ne(nv,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Ne(nv,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=Uq(a);m2(s,r)>0&&(r=s)})),new ma(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Li{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Li.ce=-1;const Ad=-1;function OS(t){return t==null}function Cv(t){return t===0&&1/t==-1/0}function Hq(t){return typeof t=="number"&&Number.isInteger(t)&&!Cv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const zw="";function oi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g3(e)),e=Zue(t.get(n),e);return g3(e)}function Zue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case zw:n+="";break;default:n+=a}}return n}function g3(t){return t+zw+""}function po(t){const e=t.length;if(Xe(e>=2,64408,{path:t}),e===2)return Xe(t.charAt(0)===zw&&t.charAt(1)==="",56145,{path:t}),jt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(zw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new jt(r)}const rd="remoteDocuments",E0="owner",ih="owner",Iv="mutationQueues",Jue="userId",gs="mutations",m3="batchId",vd="userMutationsIndex",v3=["userId","batchId"];function Zx(t,e){return[t,oi(e)]}function Kq(t,e,n){return[t,oi(e),n]}const ede={},op="documentMutations",Lw="remoteDocumentsV14",tde=["prefixPath","collectionGroup","readTime","documentId"],Jx="documentKeyIndex",nde=["prefixPath","collectionGroup","documentId"],Wq="collectionGroupIndex",rde=["collectionGroup","readTime","prefixPath","documentId"],Pv="remoteDocumentGlobal",bI="remoteDocumentGlobalKey",lp="targets",Yq="queryTargetsIndex",ide=["canonicalId","targetId"],cp="targetDocuments",ade=["targetId","path"],y2="documentTargetsIndex",sde=["path","targetId"],Vw="targetGlobalKey",kd="targetGlobal",Nv="collectionParents",ode=["collectionId","parent"],up="clientMetadata",lde="clientId",DS="bundles",cde="bundleId",RS="namedQueries",ude="name",b2="indexConfiguration",dde="indexId",xI="collectionGroupIndex",fde="collectionGroup",rv="indexState",hde=["indexId","uid"],Xq="sequenceNumberIndex",pde=["uid","sequenceNumber"],iv="indexEntries",gde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qq="documentKeyIndex",mde=["indexId","uid","orderedDocumentKey"],MS="documentOverlays",vde=["userId","collectionPath","documentId"],wI="collectionPathOverlayIndex",yde=["userId","collectionPath","largestBatchId"],Zq="collectionGroupOverlayIndex",bde=["userId","collectionGroup","largestBatchId"],x2="globals",xde="name",Jq=[Iv,gs,op,rd,lp,E0,kd,cp,up,Pv,Nv,DS,RS],wde=[...Jq,MS],eG=[Iv,gs,op,Lw,lp,E0,kd,cp,up,Pv,Nv,DS,RS,MS],tG=eG,w2=[...tG,b2,rv,iv],Sde=w2,nG=[...w2,x2],_de=nG;class SI extends qq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function wr(t,e){const n=Ke(t);return Kc.O(n.le,e)}function y3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class cn{constructor(e,n){this.comparator=e,this.root=n||Xr.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wb(this.root,e,this.comparator,!0)}}class Wb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=a??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Xr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wt{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b3(this.data.getIterator())}getIteratorFrom(e){return new b3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class b3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ah(t){return t.hasNext()?t.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new Vi([])}unionWith(e){let n=new Wt(An.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ap(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class iG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iG("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const Ede=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=Ede.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(t.seconds),nanos:bn(t.nanos)}}function bn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tl(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}const aG="server_timestamp",sG="__type__",oG="__previous_value__",lG="__local_write_time__";function S2(t){return(t?.mapValue?.fields||{})[sG]?.stringValue===aG}function jS(t){const e=t.mapValue.fields[oG];return S2(e)?jS(e):e}function Ov(t){const e=El(t.mapValue.fields[lG].timestampValue);return new ht(e.seconds,e.nanos)}class Tde{constructor(e,n,r,i,a,s,o,c,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=h}}const Bw="(default)";class Ld{constructor(e,n){this.projectId=e,this.database=n||Bw}static empty(){return new Ld("","")}get isDefaultDatabase(){return this.database===Bw}isEqual(e){return e instanceof Ld&&e.projectId===this.projectId&&e.database===this.database}}function Ade(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Me(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(t.options.projectId,e)}const _2="__type__",cG="__max__",zc={mapValue:{fields:{__type__:{stringValue:cG}}}},E2="__vector__",dp="value",ew={nullValue:"NULL_VALUE"};function Jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S2(t)?4:uG(t)?9007199254740991:zS(t)?10:11:Fe(28295,{value:t})}function ko(t,e){if(t===e)return!0;const n=Jc(t);if(n!==Jc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ov(t).isEqual(Ov(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=El(i.timestampValue),o=El(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Tl(i.bytesValue).isEqual(Tl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return bn(i.geoPointValue.latitude)===bn(a.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return bn(i.integerValue)===bn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=bn(i.doubleValue),o=bn(a.doubleValue);return s===o?Cv(s)===Cv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return ap(t.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(y3(s)!==y3(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!ko(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Dv(t,e){return(t.values||[]).find((n=>ko(n,e)))!==void 0}function eu(t,e){if(t===e)return 0;const n=Jc(t),r=Jc(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=bn(a.integerValue||a.doubleValue),c=bn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return x3(t.timestampValue,e.timestampValue);case 4:return x3(Ov(t),Ov(e));case 5:return vI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=Tl(a),c=Tl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=st(o[u],c[u]);if(f!==0)return f}return st(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=st(bn(a.latitude),bn(s.latitude));return o!==0?o:st(bn(a.longitude),bn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return w3(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[dp]?.arrayValue,f=c[dp]?.arrayValue,h=st(u?.values?.length||0,f?.values?.length||0);return h!==0?h:w3(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===zc.mapValue&&s===zc.mapValue)return 0;if(a===zc.mapValue)return 1;if(s===zc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=vI(c[h],f[h]);if(g!==0)return g;const v=eu(o[c[h]],u[f[h]]);if(v!==0)return v}return st(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function x3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=El(t),r=El(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function w3(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=eu(n[i],r[i]);if(a)return a}return st(n.length,r.length)}function fp(t){return _I(t)}function _I(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=El(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Tl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=_I(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${_I(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function tw(t){switch(Jc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jS(t);return e?16+tw(e):16;case 5:return 2*t.stringValue.length;case 6:return Tl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+tw(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return pu(r.fields,((a,s)=>{i+=a.length+tw(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function Rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function EI(t){return!!t&&"integerValue"in t}function Mv(t){return!!t&&"arrayValue"in t}function S3(t){return!!t&&"nullValue"in t}function _3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nw(t){return!!t&&"mapValue"in t}function zS(t){return(t?.mapValue?.fields||{})[_2]?.stringValue===E2}function av(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=av(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=av(t.arrayValue.values[n]);return e}return{...t}}function uG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cG}const dG={mapValue:{fields:{[_2]:{stringValue:E2},[dp]:{arrayValue:{}}}}};function kde(t){return"nullValue"in t?ew:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Rv(Ld.empty(),Le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?zS(t)?dG:{mapValue:{}}:Fe(35942,{value:t})}function Cde(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Rv(Ld.empty(),Le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dG:"mapValue"in t?zS(t)?{mapValue:{}}:zc:Fe(61959,{value:t})}function E3(t,e){const n=eu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function T3(t,e){const n=eu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=av(n)}setAll(e){let n=An.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=av(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());nw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ai(av(this.value))}}function fG(t){const e=[];return pu(t.fields,((n,r)=>{const i=new An([n]);if(nw(r)){const a=fG(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Vi(e)}class zn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,et.min(),et.min(),et.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new zn(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new zn(e,2,n,et.min(),et.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,et.min(),et.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hp{constructor(e,n){this.position=e,this.inclusive=n}}function A3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(s.referenceValue),n.key):r=eu(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function k3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ko(t.position[n],e.position[n]))return!1;return!0}class jv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ide(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class hG{}class kt extends hG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Pde(e,n,r):n==="array-contains"?new Dde(e,r):n==="in"?new bG(e,r):n==="not-in"?new Rde(e,r):n==="array-contains-any"?new Mde(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nde(e,r):new Ode(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eu(n,this.value)):n!==null&&Jc(this.value)===Jc(n)&&this.matchesComparison(eu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends hG{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kt(e,n)}matches(e){return pp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pp(t){return t.op==="and"}function TI(t){return t.op==="or"}function T2(t){return pG(t)&&pp(t)}function pG(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function AI(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+fp(t.value);if(T2(t))return t.filters.map((e=>AI(e))).join(",");{const e=t.filters.map((n=>AI(n))).join(",");return`${t.op}(${e})`}}function gG(t,e){return t instanceof kt?(function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&ko(r.value,i.value)})(t,e):t instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&gG(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function mG(t,e){const n=t.filters.concat(e);return Kt.create(n,t.op)}function vG(t){return t instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${fp(n.value)}`})(t):t instanceof Kt?(function(n){return n.op.toString()+" {"+n.getFilters().map(vG).join(" ,")+"}"})(t):"Filter"}class Pde extends kt{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nde extends kt{constructor(e,n){super(e,"in",n),this.keys=yG("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Ode extends kt{constructor(e,n){super(e,"not-in",n),this.keys=yG("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function yG(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class Dde extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mv(n)&&Dv(n.arrayValue,this.value)}}class bG extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dv(this.value.arrayValue,n)}}class Rde extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dv(this.value.arrayValue,n)}}class Mde extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Dv(this.value.arrayValue,r)))}}class jde{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function kI(t,e=null,n=[],r=[],i=null,a=null,s=null){return new jde(t,e,n,r,i,a,s)}function Vd(t){const e=Ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>AI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),OS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>fp(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>fp(r))).join(",")),e.Te=n}return e.Te}function T0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ide(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k3(t.startAt,e.startAt)&&k3(t.endAt,e.endAt)}function Fw(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Uw(t,e){return t.filters.filter((n=>n instanceof kt&&n.field.isEqual(e)))}function C3(t,e,n){let r=ew,i=!0;for(const a of Uw(t,e)){let s=ew,o=!0;switch(a.op){case"<":case"<=":s=kde(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=ew}E3({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];E3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function I3(t,e,n){let r=zc,i=!0;for(const a of Uw(t,e)){let s=zc,o=!0;switch(a.op){case">=":case">":s=Cde(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=zc}T3({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];T3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Hp{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function xG(t,e,n,r,i,a,s,o){return new Hp(t,e,n,r,i,a,s,o)}function A0(t){return new Hp(t)}function P3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zde(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wG(t){return t.collectionGroup!==null}function sv(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Wt(An.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new jv(a,r))})),n.has(An.keyField().canonicalString())||e.Ie.push(new jv(An.keyField(),r))}return e.Ie}function pa(t){const e=Ke(t);return e.Ee||(e.Ee=Lde(e,sv(t))),e.Ee}function Lde(t,e){if(t.limitType==="F")return kI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new jv(i.field,a)}));const n=t.endAt?new hp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hp(t.startAt.position,t.startAt.inclusive):null;return kI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function CI(t,e){const n=t.filters.concat([e]);return new Hp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vde(t,e){const n=t.explicitOrderBy.concat([e]);return new Hp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function $w(t,e,n){return new Hp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function LS(t,e){return T0(pa(t),pa(e))&&t.limitType===e.limitType}function SG(t){return`${Vd(pa(t))}|lt:${t.limitType}`}function xh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>vG(i))).join(", ")}]`),OS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>fp(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>fp(i))).join(",")),`Target(${r})`})(pa(t))}; limitType=${t.limitType})`}function k0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of sv(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=A3(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,sv(r),i)||r.endAt&&!(function(s,o,c){const u=A3(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,sv(r),i))})(t,e)}function _G(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EG(t){return(e,n)=>{let r=!1;for(const i of sv(t)){const a=Bde(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Bde(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?eu(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class zl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return rG(this.inner)}size(){return this.innerSize}}const Fde=new cn(Le.comparator);function fa(){return Fde}const TG=new cn(Le.comparator);function Fm(...t){let e=TG;for(const n of t)e=e.insert(n.key,n);return e}function AG(t){let e=TG;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function go(){return ov()}function kG(){return ov()}function ov(){return new zl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ude=new cn(Le.comparator),$de=new Wt(Le.comparator);function vt(...t){let e=$de;for(const n of t)e=e.add(n);return e}const qde=new Wt(st);function A2(){return qde}function k2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cv(e)?"-0":e}}function CG(t){return{integerValue:""+t}}function Gde(t,e){return Hq(e)?CG(e):k2(t,e)}class VS{constructor(){this._=void 0}}function Hde(t,e,n){return t instanceof zv?(function(i,a){const s={fields:{[sG]:{stringValue:aG},[lG]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&S2(a)&&(a=jS(a)),a&&(s.fields[oG]=a),{mapValue:s}})(n,e):t instanceof Bd?PG(t,e):t instanceof gp?NG(t,e):(function(i,a){const s=IG(i,a),o=N3(s)+N3(i.Ae);return EI(s)&&EI(i.Ae)?CG(o):k2(i.serializer,o)})(t,e)}function Kde(t,e,n){return t instanceof Bd?PG(t,e):t instanceof gp?NG(t,e):n}function IG(t,e){return t instanceof Lv?(function(r){return EI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class zv extends VS{}class Bd extends VS{constructor(e){super(),this.elements=e}}function PG(t,e){const n=OG(e);for(const r of t.elements)n.some((i=>ko(i,r)))||n.push(r);return{arrayValue:{values:n}}}class gp extends VS{constructor(e){super(),this.elements=e}}function NG(t,e){let n=OG(e);for(const r of t.elements)n=n.filter((i=>!ko(i,r)));return{arrayValue:{values:n}}}class Lv extends VS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function N3(t){return bn(t.integerValue||t.doubleValue)}function OG(t){return Mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class DG{constructor(e,n){this.field=e,this.transform=n}}function Wde(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Bd&&i instanceof Bd||r instanceof gp&&i instanceof gp?ap(r.elements,i.elements,ko):r instanceof Lv&&i instanceof Lv?ko(r.Ae,i.Ae):r instanceof zv&&i instanceof zv})(t.transform,e.transform)}class Yde{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class BS{}function RG(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C0(t.key,yr.none()):new Kp(t.key,t.data,yr.none());{const n=t.data,r=ai.empty();let i=new Wt(An.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Ll(t.key,r,new Vi(i.toArray()),yr.none())}}function Xde(t,e,n){t instanceof Kp?(function(i,a,s){const o=i.value.clone(),c=D3(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Ll?(function(i,a,s){if(!rw(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=D3(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(MG(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function lv(t,e,n,r){return t instanceof Kp?(function(a,s,o,c){if(!rw(a.precondition,s))return o;const u=a.value.clone(),f=R3(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ll?(function(a,s,o,c){if(!rw(a.precondition,s))return o;const u=R3(a.fieldTransforms,c,s),f=s.data;return f.setAll(MG(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return rw(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Qde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=IG(r.transform,i||null);a!=null&&(n===null&&(n=ai.empty()),n.set(r.field,a))}return n||null}function O3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ap(r,i,((a,s)=>Wde(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kp extends BS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ll extends BS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MG(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function D3(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Kde(s,o,n[i]))}return r}function R3(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Hde(a,s,e))}return r}class C0 extends BS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jG extends BS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Xde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kG();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=RG(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),vt())}isEqual(e){return this.batchId===e.batchId&&ap(this.mutations,e.mutations,((n,r)=>O3(n,r)))&&ap(this.baseMutations,e.baseMutations,((n,r)=>O3(n,r)))}}class I2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Ude})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new I2(e,n,r,i)}}class P2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Zde{constructor(e,n){this.count=e,this.unchangedNames=n}}var nr,It;function Jde(t){switch(t){case Ee.OK:return Fe(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function zG(t){if(t===void 0)return Gn("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case nr.OK:return Ee.OK;case nr.CANCELLED:return Ee.CANCELLED;case nr.UNKNOWN:return Ee.UNKNOWN;case nr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case nr.INTERNAL:return Ee.INTERNAL;case nr.UNAVAILABLE:return Ee.UNAVAILABLE;case nr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case nr.NOT_FOUND:return Ee.NOT_FOUND;case nr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case nr.ABORTED:return Ee.ABORTED;case nr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case nr.DATA_LOSS:return Ee.DATA_LOSS;default:return Fe(39323,{code:t})}}(It=nr||(nr={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function efe(){return new TextEncoder}const tfe=new Hc([4294967295,4294967295],0);function M3(t){const e=efe().encode(t),n=new Nq;return n.update(e),new Uint8Array(n.digest())}function j3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hc([n,r],0),new Hc([i,a],0)]}class N2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Um(`Invalid padding: ${n}`);if(r<0)throw new Um(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Um(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Um(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Hc.fromNumber(r)));return i.compare(tfe)===1&&(i=new Hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=M3(e),[r,i]=j3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new N2(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=M3(e),[r,i]=j3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.be(s)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Um extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class I0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,P0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new I0(et.min(),i,new cn(st),fa(),vt())}}class P0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new P0(r,n,vt(),vt(),vt())}}class iw{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class LG{constructor(e,n){this.targetId=e,this.Ce=n}}class VG{constructor(e,n,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class z3{constructor(){this.ve=0,this.Fe=L3(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vt(),n=vt(),r=vt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new P0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=L3()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class nfe{constructor(e){this.Ge=e,this.ze=new Map,this.je=fa(),this.He=Yb(),this.Je=Yb(),this.Ze=new cn(st)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Fw(a))if(r===0){const s=new Le(a.path);this.et(n,s,zn.newNoDocument(s,et.min()))}else Xe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Tl(r).toUint8Array()}catch(c){if(c instanceof iG)return ip("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new N2(s,i,a)}catch(c){return ip(c instanceof Um?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&Fw(o.target)){const c=new Le(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zn.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.Ke())}}));let r=vt();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new I0(e,n,this.Ze,this.je,r);return this.je=fa(),this.He=Yb(),this.Je=Yb(),this.Ze=new cn(st),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new z3,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Wt(st),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Wt(st),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new z3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yb(){return new cn(Le.comparator)}function L3(){return new cn(Le.comparator)}const rfe={asc:"ASCENDING",desc:"DESCENDING"},ife={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},afe={and:"AND",or:"OR"};class sfe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function II(t,e){return t.useProto3Json||OS(e)?e:{value:e}}function mp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ofe(t,e){return mp(t,e.toTimestamp())}function _i(t){return Xe(!!t,49232),et.fromTimestamp((function(n){const r=El(n);return new ht(r.seconds,r.nanos)})(t))}function O2(t,e){return PI(t,e).canonicalString()}function PI(t,e){const n=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function FG(t){const e=jt.fromString(t);return Xe(XG(e),10190,{key:e.toString()}),e}function qw(t,e){return O2(t.databaseId,e.path)}function Cd(t,e){const n=FG(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(qG(n))}function UG(t,e){return O2(t.databaseId,e)}function $G(t){const e=FG(t);return e.length===4?jt.emptyPath():qG(e)}function NI(t){return new jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qG(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function V3(t,e,n){return{name:qw(t,e),fields:n.value.mapValue.fields}}function lfe(t,e,n){const r=Cd(t,e.name),i=_i(e.updateTime),a=e.createTime?_i(e.createTime):et.min(),s=new ai({mapValue:{fields:e.fields}}),o=zn.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function cfe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Xe(f===void 0||typeof f=="string",58123),Hn.fromBase64String(f||"")):(Xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Hn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Ee.UNKNOWN:zG(u.code);return new Me(f,u.message||"")})(s);n=new VG(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cd(t,r.document.name),a=_i(r.document.updateTime),s=r.document.createTime?_i(r.document.createTime):et.min(),o=new ai({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new iw(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cd(t,r.document),a=r.readTime?_i(r.readTime):et.min(),s=zn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new iw([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cd(t,r.document),a=r.removedTargetIds||[];n=new iw([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Zde(i,a),o=r.targetId;n=new LG(o,s)}}return n}function Gw(t,e){let n;if(e instanceof Kp)n={update:V3(t,e.key,e.value)};else if(e instanceof C0)n={delete:qw(t,e.key)};else if(e instanceof Ll)n={update:V3(t,e.key,e.data),updateMask:gfe(e.fieldMask)};else{if(!(e instanceof jG))return Fe(16599,{dt:e.type});n={verify:qw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof zv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Bd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof gp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Lv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:ofe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function OI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?yr.updateTime(_i(a.updateTime)):a.exists!==void 0?yr.exists(a.exists):yr.none()})(e.currentDocument):yr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Xe(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new zv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Bd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new gp(f)}else"increment"in o?c=new Lv(s,o.increment):Fe(16584,{proto:o});const u=An.fromServerFormat(o.fieldPath);return new DG(u,c)})(t,i))):[];if(e.update){e.update.name;const i=Cd(t,e.update.name),a=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Vi(u.map((f=>An.fromServerFormat(f))))})(e.updateMask);return new Ll(i,a,s,n,r)}return new Kp(i,a,n,r)}if(e.delete){const i=Cd(t,e.delete);return new C0(i,n)}if(e.verify){const i=Cd(t,e.verify);return new jG(i,n)}return Fe(1463,{proto:e})}function ufe(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?_i(i.updateTime):_i(a);return s.isEqual(et.min())&&(s=_i(a)),new Yde(s,i.transformResults||[])})(n,e)))):[]}function GG(t,e){return{documents:[UG(t,e.path)]}}function HG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UG(t,i);const a=(function(u){if(u.length!==0)return YG(Kt.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:wh(g.field),direction:ffe(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=II(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function KG(t){let e=$G(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=WG(h);return g instanceof Kt&&T2(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new jv(Sh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,OS(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new hp(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new hp(v,g)})(n.endAt)),xG(e,i,s,a,o,"F",c,u)}function dfe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sh(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sh(n.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sh(n.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sh(n.unaryFilter.field);return kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kt.create(Sh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Kt.create(n.compositeFilter.filters.map((r=>WG(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function ffe(t){return rfe[t]}function hfe(t){return ife[t]}function pfe(t){return afe[t]}function wh(t){return{fieldPath:t.canonicalString()}}function Sh(t){return An.fromServerFormat(t.fieldPath)}function YG(t){return t instanceof kt?(function(n){if(n.op==="=="){if(_3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NAN"}};if(S3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NOT_NAN"}};if(S3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wh(n.field),op:hfe(n.op),value:n.value}}})(t):t instanceof Kt?(function(n){const r=n.getFilters().map((i=>YG(i)));return r.length===1?r[0]:{compositeFilter:{op:pfe(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function gfe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function XG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function QG(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class cl{constructor(e,n,r,i,a=et.min(),s=et.min(),o=Hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZG{constructor(e){this.yt=e}}function mfe(t,e){let n;if(e.document)n=lfe(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=Ud(e.noDocument.readTime);n=zn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=Ud(e.unknownDocument.version);n=zn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new ht(i[0],i[1]);return et.fromTimestamp(a)})(e.readTime)),n}function B3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:qw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:mp(a,s.version.toTimestamp()),createTime:mp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fd(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Fd(e.version)}}return r}function Hw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ud(t){const e=new ht(t.seconds,t.nanoseconds);return et.fromTimestamp(e)}function ud(t,e){const n=(e.baseMutations||[]).map((a=>OI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>OI(t.yt,a))),i=ht.fromMillis(e.localWriteTimeMs);return new C2(e.batchId,i,n,r)}function $m(t){const e=Ud(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ud(t.lastLimboFreeSnapshotVersion):et.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Xe(s===1,1966,{count:s}),pa(A0($G(a.documents[0])))})(t.query):(function(a){return pa(KG(a))})(t.query),new cl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Hn.fromBase64String(t.resumeToken))}function JG(t,e){const n=Fd(e.snapshotVersion),r=Fd(e.lastLimboFreeSnapshotVersion);let i;i=Fw(e.target)?GG(t.yt,e.target):HG(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function e7(t){const e=KG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$w(e,e.limit,"L"):e}function CA(t,e){return new P2(e.largestBatchId,OI(t.yt,e.overlayMutation))}function F3(t,e){const n=e.path.lastSegment();return[t,oi(e.path.popLast()),n]}function U3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fd(r.readTime),documentKey:oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class vfe{getBundleMetadata(e,n){return $3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ud(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return $3(e).put((function(i){return{bundleId:i.id,createTime:Fd(_i(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return q3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:e7(a.bundledQuery),readTime:Ud(a.readTime)}})(r)}))}saveNamedQuery(e,n){return q3(e).put((function(i){return{name:i.name,readTime:Fd(_i(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function $3(t){return wr(t,DS)}function q3(t){return wr(t,RS)}class FS{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new FS(e,r)}getOverlay(e,n){return bm(e).get(F3(this.userId,n)).next((r=>r?CA(this.serializer,r):null))}getOverlays(e,n){const r=go();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new P2(n,s);i.push(this.bt(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(oi(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(bm(e).X(wI,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=go(),a=oi(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bm(e).H(wI,s).next((o=>{for(const c of o){const u=CA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=go();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bm(e).ee({index:Zq,range:o},((c,u,f)=>{const h=CA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}bt(e,n){return bm(e).put((function(i,a,s){const[o,c,u]=F3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function bm(t){return wr(t,MS)}class yfe{St(e){return wr(e,x2)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Hn.fromUint8Array(r):Hn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class dd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(bn(e.integerValue));else if("doubleValue"in e){const r=bn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Cv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=El(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Tl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uG(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):zS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=dp,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(bn(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Le.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}dd.Wt=new dd;const sh=255;function bfe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function G3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=bfe(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class xfe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=G3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=G3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(sh),this.sn(255)}_n(){this.an(sh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===sh?(this.sn(sh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===sh?(this.an(sh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wfe{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Sfe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xm{constructor(){this.cn=new xfe,this.ascending=new wfe(this.cn),this.descending=new Sfe(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class fd{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new fd(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:aw(this.Tn),directionalValue:aw(this.In),orderedDocumentKey:aw(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function _c(t,e){let n=t.hn-e.hn;return n!==0?n:(n=H3(t.Tn,e.Tn),n!==0?n:(n=H3(t.In,e.In),n!==0?n:Le.comparator(t.Pn,e.Pn)))}function H3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function aw(t){return f8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function K3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class W3{constructor(e){this.Vn=new Wt(((n,r)=>An.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=yI(e);if(n!==void 0&&!this.pn(n))return!1;const r=nd(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const o=this.Vn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.yn(o,c)||!this.wn(this.dn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.dn.length||!this.wn(this.dn[s++],o))return!1}return!0}bn(){if(this.fn)return null;let e=new Wt(An.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qx(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qx(r.field,r.dir==="asc"?0:1)));return new jw(jw.UNKNOWN_ID,this.collectionId,n,kv.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function t7(t){if(Xe(t instanceof kt||t instanceof Kt,20012),t instanceof kt){if(t instanceof bG){const n=t.value.arrayValue?.values?.map((r=>kt.create(t.field,"==",r)))||[];return Kt.create(n,"or")}return t}const e=t.filters.map((n=>t7(n)));return Kt.create(e,t.op)}function _fe(t){if(t.getFilters().length===0)return[];const e=MI(t7(t));return Xe(n7(e),7391),DI(e)||RI(e)?[e]:e.getFilters()}function DI(t){return t instanceof kt}function RI(t){return t instanceof Kt&&T2(t)}function n7(t){return DI(t)||RI(t)||(function(n){if(n instanceof Kt&&TI(n)){for(const r of n.getFilters())if(!DI(r)&&!RI(r))return!1;return!0}return!1})(t)}function MI(t){if(Xe(t instanceof kt||t instanceof Kt,34018),t instanceof kt)return t;if(t.filters.length===1)return MI(t.filters[0]);const e=t.filters.map((r=>MI(r)));let n=Kt.create(e,t.op);return n=Kw(n),n7(n)?n:(Xe(n instanceof Kt,64498),Xe(pp(n),40251),Xe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>D2(r,i))))}function D2(t,e){let n;return Xe(t instanceof kt||t instanceof Kt,38388),Xe(e instanceof kt||e instanceof Kt,25473),n=t instanceof kt?e instanceof kt?(function(i,a){return Kt.create([i,a],"and")})(t,e):Y3(t,e):e instanceof kt?Y3(e,t):(function(i,a){if(Xe(i.filters.length>0&&a.filters.length>0,48005),pp(i)&&pp(a))return mG(i,a.getFilters());const s=TI(i)?i:a,o=TI(i)?a:i,c=s.filters.map((u=>D2(u,o)));return Kt.create(c,"or")})(t,e),Kw(n)}function Y3(t,e){if(pp(e))return mG(e,t.getFilters());{const n=e.filters.map((r=>D2(t,r)));return Kt.create(n,"or")}}function Kw(t){if(Xe(t instanceof kt||t instanceof Kt,11850),t instanceof kt)return t;const e=t.getFilters();if(e.length===1)return Kw(e[0]);if(pG(t))return t;const n=e.map((i=>Kw(i))),r=[];return n.forEach((i=>{i instanceof kt?r.push(i):i instanceof Kt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Kt.create(r,t.op)}class Efe{constructor(){this.Sn=new R2}addToCollectionParentIndex(e,n){return this.Sn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ma.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class R2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Wt(jt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(jt.comparator)).toArray()}}const X3="IndexedDbIndexManager",Xb=new Uint8Array(0);class Tfe{constructor(e,n){this.databaseId=n,this.Dn=new R2,this.Cn=new zl((r=>Vd(r)),((r,i)=>T0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:oi(i)};return Q3(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Lq(n),""],!1,!0);return Q3(e).H(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(po(s.parent))}return r}))}addFieldIndex(e,n){const r=wm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=lh(e);return a.next((o=>{s.put(U3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=wm(e),i=lh(e),a=oh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=wm(e),r=oh(e),i=lh(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return fe.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new W3(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=oh(e);let i=!0;const a=new Map;return fe.forEach(this.vn(n),(s=>this.Fn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=vt();const o=[];return fe.forEach(a,((c,u)=>{Ne(X3,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(c)} to execute ${Vd(n)}`);const f=(function(I,N){const O=yI(N);if(O===void 0)return null;for(const D of Uw(I,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null})(u,c),h=(function(I,N){const O=new Map;for(const D of nd(N))for(const P of Uw(I,D.fieldPath))switch(P.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),P.value),Array.from(O.values())}return null})(u,c),g=(function(I,N){const O=[];let D=!0;for(const P of nd(N)){const C=P.kind===0?C3(I,P.fieldPath,I.startAt):I3(I,P.fieldPath,I.startAt);O.push(C.value),D&&(D=C.inclusive)}return new hp(O,D)})(u,c),v=(function(I,N){const O=[];let D=!0;for(const P of nd(N)){const C=P.kind===0?I3(I,P.fieldPath,I.endAt):C3(I,P.fieldPath,I.endAt);O.push(C.value),D&&(D=C.inclusive)}return new hp(O,D)})(u,c),b=this.Mn(c,u,g),x=this.Mn(c,u,v),w=this.xn(c,u,h),S=this.On(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return fe.forEach(S,(A=>r.Z(A,n.limit).next((I=>{I.forEach((N=>{const O=Le.fromSegments(N.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return fe.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=_fe(Kt.create(e.filters,"and")).map((r=>kI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Nn(n[h/u]):Xb,v=this.Bn(e,g,r[h%u],i),b=this.Ln(e,g,a[h%u],s),x=o.map((w=>this.Bn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}Bn(e,n,r,i){const a=new fd(e,Le.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new fd(e,Le.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new W3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.gn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.vn(n);return fe.forEach(i,(a=>this.Fn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Wt(An.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new xm;for(const i of nd(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.ln(i.kind);dd.Wt.Dt(a,s)}return r.un()}Nn(e){const n=new xm;return dd.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new xm;return dd.Wt.Dt(Rv(this.databaseId,n),r.ln((function(a){const s=nd(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new xm);let a=0;for(const s of nd(e)){const o=r[a++];for(const c of i)if(this.qn(n,s.fieldPath)&&Mv(o))i=this.Un(i,s,o);else{const u=c.ln(s.kind);dd.Wt.Dt(o,u)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new xm;c.seed(o.un()),dd.Wt.Dt(s,c.ln(n.kind)),a.push(c)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof kt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=wm(e),i=lh(e);return(n?r.H(xI,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new kv(h.sequenceNumber,new ma(Ud(h.readTime),new Le(po(h.documentKey)),h.largestBatchId)):kv.empty(),v=f.fields.map((([b,x])=>new Qx(An.fromServerFormat(b),x)));return new jw(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:st(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=wm(e),a=lh(e);return this.Wn(e).next((s=>i.H(xI,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put(U3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.Qn(e,i,c).next((u=>{const f=this.Gn(a,c);return u.isEqual(f)?fe.resolve():this.zn(e,a,c,u,f)})))))))}))}jn(e,n,r,i){return oh(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return oh(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=oh(e);let a=new Wt(_c);return i.ee({index:Qq,range:IDBKeyRange.only([r.indexId,this.uid,aw(this.Kn(r,n))])},((s,o)=>{a=a.add(new fd(r.indexId,n,K3(o.arrayValue),K3(o.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new Wt(_c);const i=this.kn(n,e);if(i==null)return r;const a=yI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Mv(s))for(const o of s.arrayValue.values||[])r=r.add(new fd(n.indexId,e.key,this.Nn(o),i))}else r=r.add(new fd(n.indexId,e.key,Xb,i));return r}zn(e,n,r,i,a){Ne(X3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=ah(v),w=ah(b);for(;x||w;){let S=!1,A=!1;if(x&&w){const I=f(x,w);I<0?A=!0:I>0&&(S=!0)}else x!=null?A=!0:S=!0;S?(h(w),w=ah(b)):A?(g(x),x=ah(v)):(x=ah(v),w=ah(b))}})(i,a,_c,(o=>{s.push(this.jn(e,n,r,o))}),(o=>{s.push(this.Hn(e,n,r,o))})),fe.waitFor(s)}Wn(e){let n=1;return lh(e).ee({index:Xq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>_c(s,o))).filter(((s,o,c)=>!o||_c(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=_c(s,e),c=_c(s,n);if(o===0)i[0]=e.En();else if(o>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Jn(i[s],i[s+1]))return[];const o=i[s].An(this.uid,Xb,Le.empty()),c=i[s+1].An(this.uid,Xb,Le.empty());a.push(IDBKeyRange.bound(o,c))}return a}Jn(e,n){return _c(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Z3)}getMinOffset(e,n){return fe.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||Fe(44426))))).next(Z3)}}function Q3(t){return wr(t,Nv)}function oh(t){return wr(t,iv)}function wm(t){return wr(t,b2)}function lh(t){return wr(t,rv)}function Z3(t){Xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;m2(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ma(e.readTime,e.documentKey,n)}const J3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r7=41943040;class ri{static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function i7(t,e,n){const r=t.store(gs),i=t.store(op),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Xe(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=Kq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function Ww(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(r7,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class US{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new US(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).ee({index:vd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=_h(e),s=Ec(e);return s.add({}).next((o=>{Xe(typeof o=="number",49019);const c=new C2(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((A=>Gw(v.yt,A))),S=x.mutations.map((A=>Gw(v.yt,A)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Wt(((g,v)=>st(g.canonicalString(),v.canonicalString())));for(const g of i){const v=Kq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,ede))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Zn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return Ec(e).get(n).next((r=>r?(Xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ud(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?fe.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ec(e).ee({index:vd,range:i},((s,o,c)=>{o.userId===this.userId&&(Xe(o.batchId>=r,47524,{Yn:r}),a=ud(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ad;return Ec(e).ee({index:vd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ad],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).H(vd,n).next((r=>r.map((i=>ud(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Zx(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return _h(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=po(f);if(u===this.userId&&n.path.isEqual(g))return Ec(e).get(h).next((v=>{if(!v)throw Fe(61480,{er:s,batchId:h});Xe(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(ud(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(st);const i=[];return n.forEach((a=>{const s=Zx(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=_h(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=po(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Zx(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Wt(st);return _h(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=po(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.tr(e,o)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Ec(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});Xe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ud(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return i7(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return _h(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=po(a[1]);i.push(c)}else o.done()})).next((()=>{Xe(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return a7(e,this.userId,n)}ir(e){return s7(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ad,lastStreamToken:""}))}}function a7(t,e,n){const r=Zx(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return _h(t).ee({range:a,Y:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function Ec(t){return wr(t,gs)}function _h(t){return wr(t,op)}function s7(t){return wr(t,Iv)}class $d{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $d(0)}static ar(){return new $d(-1)}}class Afe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new $d(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>et.fromTimestamp(new ht(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>ch(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return ch(e).ee(((s,o)=>{const c=$m(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return ch(e).ee(((r,i)=>{const a=$m(i);n(a)}))}ur(e){return e5(e).get(Vw).next((n=>(Xe(n!==null,2888),n)))}cr(e,n){return e5(e).put(Vw,n)}lr(e,n){return ch(e).put(JG(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Vd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ch(e).ee({range:i,index:Yq},((s,o,c)=>{const u=$m(o);T0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Rc(e);return n.forEach((s=>{const o=oi(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Rc(e);return fe.forEach(n,(a=>{const s=oi(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Rc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Rc(e);let a=vt();return i.ee({range:r,Y:!0},((s,o,c)=>{const u=po(s[1]),f=new Le(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=oi(n.path),i=IDBKeyRange.bound([r],[Lq(r)],!1,!0);let a=0;return Rc(e).ee({index:y2,Y:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return ch(e).get(n).next((r=>r?$m(r):null))}}function ch(t){return wr(t,lp)}function e5(t){return wr(t,kd)}function Rc(t){return wr(t,cp)}const t5="LruGarbageCollector",o7=1048576;function n5([t,e],[n,r]){const i=st(t,n);return i===0?st(e,r):i}class kfe{constructor(e){this.Pr=e,this.buffer=new Wt(n5),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();n5(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ne(t5,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hu(n)?Ne(t5,"Ignoring IndexedDB error during garbage collection: ",n):await fu(n)}await this.Ar(3e5)}))}}class Cfe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Li.ce);const r=new kfe(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(J3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J3):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),bh()<=At.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function c7(t,e){return new Cfe(t,e)}class Ife{constructor(e,n){this.db=e,this.garbageCollector=c7(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return Qb(e,r)}removeReference(e,n,r){return Qb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Qb(e,n)}wr(e,n){return(function(i,a){let s=!1;return s7(i).te((o=>a7(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((s,o)=>{if(o<=n){const c=this.wr(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,et.min()),Rc(e).delete((function(h){return[0,oi(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Qb(e,n)}yr(e,n){const r=Rc(e);let i,a=Li.ce;return r.ee({index:y2},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Li.ce&&n(new Le(po(i)),a),a=u,i=c):a=Li.ce})).next((()=>{a!==Li.ce&&n(new Le(po(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qb(t,e){return Rc(t).put((function(r,i){return{targetId:0,path:oi(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class u7{constructor(){this.changes=new zl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pfe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Xu(e).put(r)}removeEntry(e,n,r){return Xu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Hw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=zn.newInvalidDocument(n);return Xu(e).ee({index:Jx,range:IDBKeyRange.only(Sm(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:zn.newInvalidDocument(n)};return Xu(e).ee({index:Jx,range:IDBKeyRange.only(Sm(n))},((i,a)=>{r={document:this.Sr(n,a),size:Ww(a)}})).next((()=>r))}getEntries(e,n){let r=fa();return this.Cr(e,n,((i,a)=>{const s=this.Sr(i,a);r=r.insert(i,s)})).next((()=>r))}vr(e,n){let r=fa(),i=new cn(Le.comparator);return this.Cr(e,n,((a,s)=>{const o=this.Sr(a,s);r=r.insert(a,o),i=i.insert(a,Ww(s))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Wt(a5);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(Sm(i.first()),Sm(i.last())),s=i.getIterator();let o=s.getNext();return Xu(e).ee({index:Jx,range:a},((c,u,f)=>{const h=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&a5(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(Sm(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Hw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xu(e).H(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=fa();for(const h of u){const g=this.Sr(Le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(k0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=fa();const s=i5(n,r),o=i5(n,ma.max());return Xu(e).ee({index:Wq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Sr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new Nfe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return r5(e).get(bI).next((n=>(Xe(!!n,20021),n)))}br(e,n){return r5(e).put(bI,n)}Sr(e,n){if(n){const r=mfe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(et.min())))return r}return zn.newInvalidDocument(e)}}function d7(t){return new Pfe(t)}class Nfe extends u7{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new zl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Wt(((a,s)=>st(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=B3(this.Mr.serializer,s);i=i.add(a.path.popLast());const u=Ww(c);r+=u-o.size,n.push(this.Mr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=B3(this.Mr.serializer,s.convertToNoDocument(et.min()));n.push(this.Mr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,s)=>{this.Or.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function r5(t){return wr(t,Pv)}function Xu(t){return wr(t,Lw)}function Sm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function i5(t,e){const n=e.documentKey.path.toArray();return[t,Hw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a5(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=st(n[a],r[a]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class Ofe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class f7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&lv(r.mutation,i,Vi.empty(),ht.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,vt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=vt()){const i=go();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=Fm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=go();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,vt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=fa();const s=ov(),o=(function(){return ov()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Ll)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),lv(f.mutation,u,f.mutation.getFieldMask(),ht.now())):s.set(u.key,Vi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new Ofe(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=ov();let i=new cn(((s,o)=>s-o)),a=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Vi.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||vt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=kG();f.forEach((g=>{if(!a.has(g)){const v=RG(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return zde(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(go());let o=sp,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,vt()))).next((f=>({batchId:o,changes:AG(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let i=Fm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Fm();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new Hp(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,zn.newInvalidDocument(f)))}));let o=Fm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&lv(f.mutation,u,Vi.empty(),ht.now()),k0(n,u)&&(o=o.insert(c,u))})),o}))}}class Dfe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return fe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:_i(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:e7(i.bundledQuery),readTime:_i(i.readTime)}})(n)),fe.resolve()}}class Rfe{constructor(){this.overlays=new cn(Le.comparator),this.Lr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=go();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=go(),a=n.length+1,s=new Le(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new cn(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=go(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=go(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new P2(n,r));let a=this.Lr.get(n);a===void 0&&(a=vt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class Mfe{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class M2{constructor(){this.kr=new Wt(Dr.Kr),this.qr=new Wt(Dr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Dr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Dr(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Le(new jt([])),r=new Dr(n,e),i=new Dr(n,e+1),a=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Le(new jt([])),r=new Dr(n,e),i=new Dr(n,e+1);let a=vt();return this.qr.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Dr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Le.comparator(e.key,n.key)||st(e.Hr,n.Hr)}static Ur(e,n){return st(e.Hr,n.Hr)||Le.comparator(e.key,n.key)}}class jfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Wt(Dr.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new C2(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new Dr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ad:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dr(n,0),i=new Dr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(s=>{const o=this.Zr(s.Hr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(st);return n.forEach((i=>{const a=new Dr(i,0),s=new Dr(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{r=r.add(o.Hr)}))})),fe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const s=new Dr(new Le(a),0);let o=new Wt(st);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Hr)),!0)}),s),fe.resolve(this.Yr(o))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Xe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return fe.forEach(n.mutations,(i=>{const a=new Dr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Dr(n,0),i=this.Jr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class zfe{constructor(e){this.ti=e,this.docs=(function(){return new cn(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=fa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=fa();const s=n.path,o=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||m2(Uq(f),r)<=0||(i.has(f.key)||k0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ni(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Lfe(this)}getSize(e){return fe.resolve(this.size)}}class Lfe extends u7{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Vfe{constructor(e){this.persistence=e,this.ri=new zl((n=>Vd(n)),T0),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new M2,this.targetCount=0,this.oi=$d._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),fe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new $d(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.lr(n),fe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.si.containsKey(n))}}class j2{constructor(e,n){this._i={},this.overlays={},this.ai=new Li(0),this.ui=!1,this.ui=!0,this.ci=new Mfe,this.referenceDelegate=e(this),this.li=new Vfe(this),this.indexManager=new Efe,this.remoteDocumentCache=(function(i){return new zfe(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new ZG(n),this.Pi=new Dfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new jfe(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new Bfe(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return fe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Bfe extends qq{constructor(e){super(),this.currentSequenceNumber=e}}class $S{constructor(e){this.persistence=e,this.Ri=new M2,this.Ai=null}static Vi(e){return new $S(e)}get di(){if(this.Ai)return this.Ai;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(r=>{const i=Le.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Yw{constructor(e,n){this.persistence=e,this.fi=new zl((r=>oi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=c7(this,n)}static Vi(e,n){return new Yw(e,n)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return fe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,n).next((o=>{o||(r++,a.removeEntry(s,et.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tw(e.data.value)),n}wr(e,n,r){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ffe{constructor(e){this.serializer=e}k(e,n,r,i){const a=new NS("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(E0)})(e),(function(c){c.createObjectStore(Iv,{keyPath:Jue}),c.createObjectStore(gs,{keyPath:m3,autoIncrement:!0}).createIndex(vd,v3,{unique:!0}),c.createObjectStore(op)})(e),s5(e),(function(c){c.createObjectStore(rd)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(cp),c.deleteObjectStore(lp),c.deleteObjectStore(kd)})(e),s5(e)),s=s.next((()=>(function(c){const u=c.store(kd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(Vw,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(gs).H().next((h=>{c.deleteObjectStore(gs),c.createObjectStore(gs,{keyPath:m3,autoIncrement:!0}).createIndex(vd,v3,{unique:!0});const g=u.store(gs),v=h.map((b=>g.put(b)));return fe.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(up,{keyPath:lde})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.gi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(Pv)})(e),this.pi(a))))),r<7&&i>=7&&(s=s.next((()=>this.yi(a)))),r<8&&i>=8&&(s=s.next((()=>this.wi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.bi(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(DS,{keyPath:cde})})(e),(function(c){c.createObjectStore(RS,{keyPath:ude})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(MS,{keyPath:vde});u.createIndex(wI,yde,{unique:!1}),u.createIndex(Zq,bde,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(Lw,{keyPath:tde});u.createIndex(Jx,nde),u.createIndex(Wq,rde)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(rd)))),r<14&&i>=14&&(s=s.next((()=>this.Di(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(b2,{keyPath:dde,autoIncrement:!0}).createIndex(xI,fde,{unique:!1}),c.createObjectStore(rv,{keyPath:hde}).createIndex(Xq,pde,{unique:!1}),c.createObjectStore(iv,{keyPath:gde}).createIndex(Qq,mde,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(rv).clear()})).next((()=>{n.objectStore(iv).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(x2,{keyPath:xde})})(e)}))),r<18&&i>=18&&f8()&&(s=s.next((()=>{n.objectStore(rv).clear()})).next((()=>{n.objectStore(iv).clear()}))),s}pi(e){let n=0;return e.store(rd).ee(((r,i)=>{n+=Ww(i)})).next((()=>{const r={byteSize:n};return e.store(Pv).put(bI,r)}))}gi(e){const n=e.store(Iv),r=e.store(gs);return n.H().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Ad],[a.userId,a.lastAcknowledgedBatchId]);return r.H(vd,s).next((o=>fe.forEach(o,(c=>{Xe(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=ud(this.serializer,c);return i7(e,a.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(cp),r=e.store(rd);return e.store(kd).get(Vw).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new jt(s),u=(function(h){return[0,oi(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:oi(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}wi(e,n){e.createObjectStore(Nv,{keyPath:ode});const r=n.store(Nv),i=new R2,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:oi(c)})}};return n.store(rd).ee({Y:!0},((s,o)=>{const c=new jt(s);return a(c.popLast())})).next((()=>n.store(op).ee({Y:!0},(([s,o,c],u)=>{const f=po(o);return a(f.popLast())}))))}bi(e){const n=e.store(lp);return n.ee(((r,i)=>{const a=$m(i),s=JG(this.serializer,a);return n.put(s)}))}Si(e,n){const r=n.store(rd),i=[];return r.ee(((a,s)=>{const o=n.store(Lw),c=(function(h){return h.document?new Le(jt.fromString(h.document.name).popFirst(5)):h.noDocument?Le.fromSegments(h.noDocument.path):h.unknownDocument?Le.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Di(e,n){const r=n.store(gs),i=d7(this.serializer),a=new j2($S.Vi,this.serializer.yt);return r.H().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??vt();ud(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new ni(u),h=FS.wt(this.serializer,f),g=a.getIndexManager(f),v=US.wt(f,this.serializer,g,a.referenceDelegate);return new f7(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new SI(n,Li.ce),c).next()}))}))}}function s5(t){t.createObjectStore(cp,{keyPath:ade}).createIndex(y2,sde,{unique:!0}),t.createObjectStore(lp,{keyPath:"targetId"}).createIndex(Yq,ide,{unique:!0}),t.createObjectStore(kd)}const Tc="IndexedDbPersistence",IA=18e5,PA=5e3,NA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ufe="main";class z2{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=s,this.document=o,this.Fi=u,this.Mi=f,this.xi=h,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=g=>Promise.resolve(),!z2.v())throw new Me(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ife(this,i),this.Ki=n+Ufe,this.serializer=new ZG(c),this.qi=new Kc(this.Ki,this.xi,new Ffe(this.serializer)),this.ci=new yfe,this.li=new Afe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=d7(this.serializer),this.Pi=new vfe,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,f===!1&&Gn(Tc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,NA);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Li(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Zb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(hu(e))return Ne(Tc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne(Tc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return _m(e).get(ih).next((n=>fe.resolve(this.Xi(n))))}Yi(e){return Zb(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,IA)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=wr(n,up);return r.H().next((i=>{const a=this.ns(i,IA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?fe.resolve(!0):_m(e).get(ih).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,PA)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,NA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zb(e).H().next((r=>this.ns(r,PA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ne(Tc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[E0,up],(e=>{const n=new SI(e,Li.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Zb(e).H().next((n=>this.ns(n,IA).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return US.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tfe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return FS.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne(Tc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?_de:c===17?nG:c===16?Sde:c===15?w2:c===14?tG:c===13?eG:c===12?wde:c===11?Jq:void Fe(60245)})(this.xi);let s;return this.qi.runTransaction(e,i,a,(o=>(s=new SI(o,this.ai?this.ai.next():Li.ce),n==="readwrite-primary"?this.ji(s).next((c=>!!c||this.Hi(s))).next((c=>{if(!c)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Me(Ee.FAILED_PRECONDITION,$q);return r(s)})).next((c=>this.Zi(s).next((()=>c)))):this.Ps(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Ps(e){return _m(e).get(ih).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,PA)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(Ee.FAILED_PRECONDITION,NA)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _m(e).put(ih,n)}static v(){return Kc.v()}Ji(e){const n=_m(e);return n.get(ih).next((r=>this.Xi(r)?(Ne(Tc,"Releasing primary lease."),n.delete(ih)):fe.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;d8()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return Ne(Tc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Gn(Tc,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _m(t){return wr(t,E0)}function Zb(t){return wr(t,up)}function h7(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class L2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=vt(),i=vt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new L2(e,n.fromCache,r,i)}}class $fe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p7{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return d8()?8:Gq(xr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new $fe;return this.ys(e,n,s).next((o=>{if(a.result=o,this.As)return this.ws(e,n,s,o.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(bh()<=At.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",xh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(bh()<=At.DEBUG&&Ne("QueryEngine","Query:",xh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(bh()<=At.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",xh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pa(n))):fe.resolve())}gs(e,n){if(P3(n))return fe.resolve(null);let r=pa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=$w(n,null,"F"),r=pa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=vt(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,o);return this.Ss(n,u,s,c.readTime)?this.gs(e,$w(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,i){return P3(n)||i.isEqual(et.min())?fe.resolve(null):this.fs.getDocuments(e,r).next((a=>{const s=this.bs(n,a);return this.Ss(n,s,r,i)?fe.resolve(null):(bh()<=At.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xh(n)),this.Ds(e,s,n,Fq(i,sp)).next((o=>o)))}))}bs(e,n){let r=new Wt(EG(e));return n.forEach(((i,a)=>{k0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return bh()<=At.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",xh(n)),this.fs.getDocumentsMatchingQuery(e,n,ma.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const V2="LocalStore",qfe=3e8;class Gfe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new cn(st),this.Fs=new zl((a=>Vd(a)),T0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f7(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function g7(t,e,n,r){return new Gfe(t,e,n,r)}async function m7(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=vt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Hfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=fe.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Xe(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=vt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function v7(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Kfe(t,e){const n=Ke(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.li.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.li.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Hn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=qfe?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,v,f)&&o.push(n.li.updateTargetData(a,v))}));let c=fa(),u=vt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Wfe(a,s,e.documentUpdates).next((f=>{c=f.Bs,u=f.Ls}))),!r.isEqual(et.min())){const f=n.li.getLastRemoteSnapshotVersion(a).next((h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.vs=i,a)))}function Wfe(t,e,n){let r=vt(),i=vt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=fa();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ne(V2,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function Yfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ad),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Xw(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.li.allocateTargetId(r).next((s=>(i=new cl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function vp(t,e,n){const r=Ke(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hu(s))throw s;Ne(V2,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function jI(t,e,n){const r=Ke(t);let i=et.min(),a=vt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ke(c),g=h.Fs.get(f);return g!==void 0?fe.resolve(h.vs.get(g)):h.li.getTargetData(u,f)})(r,s,pa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:et.min(),n?a:vt()))).next((o=>(x7(r,_G(e),o),{documents:o,ks:a})))))}function y7(t,e){const n=Ke(t),r=Ke(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function b7(t,e){const n=Ke(t),r=n.Ms.get(e)||et.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,Fq(r,sp),Number.MAX_SAFE_INTEGER))).then((i=>(x7(n,e,i),i)))}function x7(t,e,n){let r=t.Ms.get(e)||et.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}const w7="firestore_clients";function o5(t,e){return`${w7}_${t}_${e}`}const S7="firestore_mutations";function l5(t,e,n){let r=`${S7}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const _7="firestore_targets";function OA(t,e){return`${_7}_${t}_${e}`}const ho="SharedClientState";class Qw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Me(i.error.code,i.error.message))),s?new Qw(e,n,i.state,a):(Gn(ho,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Me(r.error.code,r.error.message))),a?new cv(e,r.state,i):(Gn(ho,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=A2();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Hq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Zw(e,a):(Gn(ho,`Failed to parse client data for instance '${e}': ${n}`),null)}}class B2{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new B2(n.clientId,n.onlineState):(Gn(ho,`Failed to parse online state: ${e}`),null)}}class zI{constructor(){this.activeTargetIds=A2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DA{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new cn(st),this.started=!1,this.Zs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=o5(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zI),this.eo=new RegExp(`^${w7}_${s}_([^_]*)$`),this.no=new RegExp(`^${S7}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${_7}_${s}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(o5(this.persistenceKey,r));if(i){const a=Zw.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(OA(this.persistenceKey,e));if(i){const a=cv.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(OA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne(ho,"READ",e,n),n}setItem(e,n){Ne(ho,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne(ho,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Ne(ho,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let s=Li.ce;if(a!=null)try{const o=JSON.parse(a);Xe(typeof o=="number",30636,{yo:a}),s=o}catch(o){Gn(ho,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Li.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new Qw(this.currentUser,e,n,r),a=l5(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=l5(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=OA(this.persistenceKey,e),a=new cv(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Zw.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Qw.$s(new ni(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return cv.$s(i,n)}_o(e){return B2.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);Ne(ho,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Co(s,o).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=A2();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class E7{constructor(){this.vo=new zI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xfe{Mo(e){}shutdown(){}}const c5="ConnectivityMonitor";class u5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ne(c5,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ne(c5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jb=null;function LI(){return Jb===null?Jb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jb++,"0x"+Jb.toString(16)}const RA="RestConnection",Qfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Zfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Bw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=LI(),o=this.Qo(e,n.toUriEncodedString());Ne(RA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:u}=new URL(o),f=uu(u);return this.zo(e,o,c,r,f).then((h=>(Ne(RA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw ip(RA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=Qfe[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class Jfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ei="WebChannelConnection",Em=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Hh extends Zfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Hh.c_){const e=Mq();Em(e,Rq.STAT_EVENT,(n=>{n.stat===mI.PROXY?Ne(ei,"STAT_EVENT: detected buffering proxy"):n.stat===mI.NOPROXY&&Ne(ei,"STAT_EVENT: detected no buffering proxy")})),Hh.c_=!0}}zo(e,n,r,i,a){const s=LI();return new Promise(((o,c)=>{const u=new Oq;u.setWithCredentials(!0),u.listenOnce(Dq.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Xx.NO_ERROR:const h=u.getResponseJson();Ne(ei,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Xx.TIMEOUT:Ne(ei,`RPC '${e}' ${s} timed out`),c(new Me(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Xx.HTTP_ERROR:const g=u.getStatus();if(Ne(ei,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(S){const A=S.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(A)>=0?A:Ee.UNKNOWN})(b.status);c(new Me(x,b.message))}else c(new Me(Ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Me(Ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ne(ei,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ne(ei,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=LI(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,n,r),o.encodeInitMessageHeaders=!0;const u=a.join("");Ne(ei,`Creating RPC '${e}' stream ${i}: ${u}`,o);const f=s.createWebChannel(u,o);this.I_(f);let h=!1,g=!1;const v=new Jfe({Ho:b=>{g?Ne(ei,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ne(ei,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Ne(ei,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Jo:()=>f.close()});return Em(f,Bm.EventType.OPEN,(()=>{g||(Ne(ei,`RPC '${e}' stream ${i} transport opened.`),v.i_())})),Em(f,Bm.EventType.CLOSE,(()=>{g||(g=!0,Ne(ei,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(f))})),Em(f,Bm.EventType.ERROR,(b=>{g||(g=!0,ip(ei,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.o_(new Me(Ee.UNAVAILABLE,"The operation could not be completed")))})),Em(f,Bm.EventType.MESSAGE,(b=>{if(!g){const x=b.data[0];Xe(!!x,16349);const w=x,S=w?.error||w[0]?.error;if(S){Ne(ei,`RPC '${e}' stream ${i} received error:`,S);const A=S.status;let I=(function(D){const P=nr[D];if(P!==void 0)return zG(P)})(A),N=S.message;A==="NOT_FOUND"&&N.includes("database")&&N.includes("does not exist")&&N.includes(this.databaseId.database)&&ip(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=Ee.INTERNAL,N="Unknown error status: "+A+" with message "+S.message),g=!0,v.o_(new Me(I,N)),f.close()}else Ne(ei,`RPC '${e}' stream ${i} received:`,x),v.__(x)}})),Hh.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jq()}}function ehe(t){return new Hh(t)}function T7(){return typeof window<"u"?window:null}function sw(){return typeof document<"u"?document:null}function qS(t){return new sfe(t,!0)}Hh.c_=!1;class A7{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const d5="PersistentStream";class k7{constructor(e,n,r,i,a,s,o,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A7(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Me(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(d5,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ne(d5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class the extends k7{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cfe(this.serializer,e),r=(function(a){if(!("targetChange"in a))return et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?_i(s.readTime):et.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=NI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=Fw(c)?{documents:GG(a,c)}:{query:HG(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=BG(a,s.resumeToken);const u=II(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){o.readTime=mp(a,s.snapshotVersion.toTimestamp());const u=II(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=dfe(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=NI(this.serializer),n.removeTarget=e,this.K_(n)}}class nhe extends k7{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ufe(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=NI(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Gw(this.serializer,r)))};this.K_(n)}}class rhe{}class ihe extends rhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,PI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(Ee.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,PI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(Ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ahe(t,e,n,r){return new ihe(t,e,n,r)}class she{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qd="RemoteStore";class ohe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{df(this)&&(Ne(qd,"Restarting streams for network reachability change."),await(async function(c){const u=Ke(c);u.Ea.add(4),await N0(u),u.Va.set("Unknown"),u.Ea.delete(4),await GS(u)})(this))}))})),this.Va=new she(r,i)}}async function GS(t){if(df(t))for(const e of t.Ra)await e(!0)}async function N0(t){for(const e of t.Ra)await e(!1)}function HS(t,e){const n=Ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$2(n)?U2(n):Yp(n).O_()&&F2(n,e))}function yp(t,e){const n=Ke(t),r=Yp(n);n.Ia.delete(e),r.O_()&&C7(n,e),n.Ia.size===0&&(r.O_()?r.L_():df(n)&&n.Va.set("Unknown"))}function F2(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yp(t).Z_(e)}function C7(t,e){t.da.$e(e),Yp(t).X_(e)}function U2(t){t.da=new nfe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yp(t).start(),t.Va.ua()}function $2(t){return df(t)&&!Yp(t).x_()&&t.Ia.size>0}function df(t){return Ke(t).Ea.size===0}function I7(t){t.da=void 0}async function lhe(t){t.Va.set("Online")}async function che(t){t.Ia.forEach(((e,n)=>{F2(t,e)}))}async function uhe(t,e){I7(t),$2(t)?(t.Va.ha(e),U2(t)):t.Va.set("Unknown")}async function dhe(t,e,n){if(t.Va.set("Online"),e instanceof VG&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))})(t,e)}catch(r){Ne(qd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jw(t,r)}else if(e instanceof iw?t.da.Xe(e):e instanceof LG?t.da.st(e):t.da.tt(e),!n.isEqual(et.min()))try{const r=await v7(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Hn.EMPTY_BYTE_STRING,f.snapshotVersion)),C7(a,c);const h=new cl(f.target,c,u,f.sequenceNumber);F2(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Ne(qd,"Failed to raise snapshot:",r),await Jw(t,r)}}async function Jw(t,e,n){if(!hu(e))throw e;t.Ea.add(1),await N0(t),t.Va.set("Offline"),n||(n=()=>v7(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ne(qd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await GS(t)}))}function P7(t,e){return e().catch((n=>Jw(t,n,e)))}async function Wp(t){const e=Ke(t),n=tu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ad;for(;fhe(e);)try{const i=await Yfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,hhe(e,i)}catch(i){await Jw(e,i)}N7(e)&&O7(e)}function fhe(t){return df(t)&&t.Ta.length<10}function hhe(t,e){t.Ta.push(e);const n=tu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function N7(t){return df(t)&&!tu(t).x_()&&t.Ta.length>0}function O7(t){tu(t).start()}async function phe(t){tu(t).ra()}async function ghe(t){const e=tu(t);for(const n of t.Ta)e.ea(n.mutations)}async function mhe(t,e,n){const r=t.Ta.shift(),i=I2.from(r,e,n);await P7(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Wp(t)}async function vhe(t,e){e&&tu(t).Y_&&await(async function(r,i){if((function(s){return Jde(s)&&s!==Ee.ABORTED})(i.code)){const a=r.Ta.shift();tu(r).B_(),await P7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Wp(r)}})(t,e),N7(t)&&O7(t)}async function f5(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),Ne(qd,"RemoteStore received new credentials");const r=df(n);n.Ea.add(3),await N0(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await GS(n)}async function VI(t,e){const n=Ke(t);e?(n.Ea.delete(2),await GS(n)):e||(n.Ea.add(2),await N0(n),n.Va.set("Unknown"))}function Yp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ke(n);return a.sa(),new the(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:lhe.bind(null,t),Yo:che.bind(null,t),t_:uhe.bind(null,t),J_:dhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),$2(t)?U2(t):t.Va.set("Unknown")):(await t.ma.stop(),I7(t))}))),t.ma}function tu(t){return t.fa||(t.fa=(function(n,r,i){const a=Ke(n);return a.sa(),new nhe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:phe.bind(null,t),t_:vhe.bind(null,t),ta:ghe.bind(null,t),na:mhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Wp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne(qd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class q2{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new q2(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G2(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),hu(t))return new Me(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}class Kh{static emptySet(e){return new Kh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=Fm(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class h5{constructor(){this.ga=new cn(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class bp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new bp(e,n,Kh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&LS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class yhe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class bhe{constructor(){this.queries=p5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ke(n),a=i.queries;i.queries=p5(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(r)}))})(this,new Me(Ee.ABORTED,"Firestore shutting down"))}}function p5(){return new zl((t=>SG(t)),LS)}async function H2(t,e){const n=Ke(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new yhe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=G2(s,`Initialization of query '${xh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&W2(n)}async function K2(t,e){const n=Ke(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xhe(t,e){const n=Ke(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.ba)o.Fa(i)&&(r=!0);s.wa=i}}r&&W2(n)}function whe(t,e,n){const r=Ke(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function W2(t){t.Ca.forEach((e=>{e.next()}))}var BI,g5;(g5=BI||(BI={})).Ma="default",g5.Cache="cache";class Y2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==BI.Cache}}class D7{constructor(e){this.key=e}}class R7{constructor(e){this.key=e}}class She{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=vt(),this.mutatedKeys=vt(),this.eu=EG(e),this.tu=new Kh(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new h5,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=k0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new bp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new h5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new R7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new D7(r))})),n}cu(e){this.Za=e.ks,this.Ya=vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xp="SyncEngine";class _he{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ehe{constructor(e){this.key=e,this.hu=!1}}class The{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new zl((o=>SG(o)),LS),this.Iu=new Map,this.Eu=new Set,this.Ru=new cn(Le.comparator),this.Au=new Map,this.Vu=new M2,this.du={},this.mu=new Map,this.fu=$d.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ahe(t,e,n=!0){const r=KS(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await M7(r,e,n,!0),i}async function khe(t,e){const n=KS(t);await M7(n,e,!0,!1)}async function M7(t,e,n,r){const i=await Xw(t.localStore,pa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await X2(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&HS(t.remoteStore,i),o}async function X2(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,S,A){let I=w.view.ru(S);I.Ss&&(I=await jI(x.localStore,w.query,!1).then((({documents:P})=>w.view.ru(P,I))));const N=A&&A.targetChanges.get(w.targetId),O=A&&A.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(I,x.isPrimaryClient,N,O);return FI(x,w.targetId,D.au),D.snapshot})(t,h,g,v);const a=await jI(t.localStore,e,!0),s=new She(e,a.ks),o=s.ru(a.documents),c=P0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);FI(t,n,u.au);const f=new _he(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Che(t,e,n){const r=Ke(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!LS(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yp(r.remoteStore,i.targetId),xp(r,i.targetId)})).catch(fu)):(xp(r,i.targetId),await vp(r.localStore,i.targetId,!0))}async function Ihe(t,e){const n=Ke(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yp(n.remoteStore,r.targetId))}async function Phe(t,e,n){const r=eO(t);try{const i=await(function(s,o){const c=Ke(s),u=ht.now(),f=o.reduce(((v,b)=>v.add(b.key)),vt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=fa(),x=vt();return c.xs.getEntries(v,f).next((w=>{b=w,b.forEach(((S,A)=>{A.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const S=[];for(const A of o){const I=Qde(A,h.get(A.key).overlayedDocument);I!=null&&S.push(new Ll(A.key,I,fG(I.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:AG(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.du[s.currentUser.toKey()];u||(u=new cn(st)),u=u.insert(o,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,n),await gu(r,i.changes),await Wp(r.remoteStore)}catch(i){const a=G2(i,"Failed to persist write");n.reject(a)}}async function j7(t,e){const n=Ke(t);try{const r=await Kfe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Xe(s.hu,14607):i.removedDocuments.size>0&&(Xe(s.hu,42227),s.hu=!1))})),await gu(n,r,e)}catch(r){await fu(r)}}function m5(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ke(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.ba)g.va(o)&&(u=!0)})),u&&W2(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Nhe(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new cn(Le.comparator);s=s.insert(a,zn.newNoDocument(a,et.min()));const o=vt().add(a),c=new I0(et.min(),new Map,new cn(st),s,o);await j7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),J2(r)}else await vp(r.localStore,e,!1).then((()=>xp(r,e,n))).catch(fu)}async function Ohe(t,e){const n=Ke(t),r=e.batch.batchId;try{const i=await Hfe(n.localStore,e);Z2(n,r,null),Q2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gu(n,i)}catch(i){await fu(i)}}async function Dhe(t,e,n){const r=Ke(t);try{const i=await(function(s,o){const c=Ke(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Xe(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);Z2(r,e,n),Q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gu(r,i)}catch(i){await fu(i)}}function Q2(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Z2(t,e,n){const r=Ke(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||z7(t,r)}))}function z7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(yp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),J2(t))}function FI(t,e,n){for(const r of n)r instanceof D7?(t.Vu.addReference(r.key,e),Rhe(t,r)):r instanceof R7?(Ne(Xp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||z7(t,r.key)):Fe(19791,{wu:r})}function Rhe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ne(Xp,"New document in limbo: "+n),t.Eu.add(r),J2(t))}function J2(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(jt.fromString(e)),r=t.fu.next();t.Au.set(r,new Ehe(n)),t.Ru=t.Ru.insert(n,r),HS(t.remoteStore,new cl(pa(A0(n.path)),r,"TargetPurposeLimboResolution",Li.ce))}}async function gu(t,e,n){const r=Ke(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=L2.Es(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){const f=Ke(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Ts,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>fe.forEach(g.Is,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!hu(h))throw h;Ne(V2,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.vs.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.vs=f.vs.insert(g,x)}}})(r.localStore,a))}async function Mhe(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){Ne(Xp,"User change. New user:",e.toKey());const r=await m7(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Me(Ee.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(n,r.Ns)}}function jhe(t,e){const n=Ke(t),r=n.Au.get(e);if(r&&r.hu)return vt().add(r.key);{let i=vt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function zhe(t,e){const n=Ke(t),r=await jI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&FI(n,e.targetId,i.au),i}async function Lhe(t,e){const n=Ke(t);return b7(n.localStore,e).then((r=>gu(n,r)))}async function Vhe(t,e,n,r){const i=Ke(t),a=await(function(o,c){const u=Ke(o),f=Ke(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.Xn(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Wp(i.remoteStore):n==="acknowledged"||n==="rejected"?(Z2(i,e,r||null),Q2(i,e),(function(o,c){Ke(Ke(o).mutationQueue).nr(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{bu:n}),await gu(i,a)):Ne(Xp,"Cannot apply mutation batch with id: "+e)}async function Bhe(t,e){const n=Ke(t);if(KS(n),eO(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await v5(n,r.toArray());n.gu=!0,await VI(n.remoteStore,!0);for(const a of i)HS(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(xp(n,s),vp(n.localStore,s,!0)))),yp(n.remoteStore,s)})),await i,await v5(n,r),(function(s){const o=Ke(s);o.Au.forEach(((c,u)=>{yp(o.remoteStore,u)})),o.Vu.zr(),o.Au=new Map,o.Ru=new cn(Le.comparator)})(n),n.gu=!1,await VI(n.remoteStore,!1)}}async function v5(t,e,n){const r=Ke(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await Xw(r.localStore,pa(c[0]));for(const u of c){const f=r.Tu.get(u),h=await zhe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await y7(r.localStore,s);o=await Xw(r.localStore,u),await X2(r,L7(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.J_(a),i}function L7(t){return xG(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fhe(t){return(function(n){return Ke(Ke(n).persistence).hs()})(Ke(t).localStore)}async function Uhe(t,e,n,r){const i=Ke(t);if(i.gu)return void Ne(Xp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await b7(i.localStore,_G(a[0])),o=I0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Hn.EMPTY_BYTE_STRING);await gu(i,s,o);break}case"rejected":await vp(i.localStore,e,!0),xp(i,e,r);break;default:Fe(64155,n)}}async function $he(t,e,n){const r=KS(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ne(Xp,"Adding an already active target "+i);continue}const a=await y7(r.localStore,i),s=await Xw(r.localStore,a);await X2(r,L7(a),s.targetId,!1,s.resumeToken),HS(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await vp(r.localStore,i,!1).then((()=>{yp(r.remoteStore,i),xp(r,i)})).catch(fu)}}function KS(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nhe.bind(null,e),e.Pu.J_=xhe.bind(null,e.eventManager),e.Pu.yu=whe.bind(null,e.eventManager),e}function eO(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ohe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dhe.bind(null,e),e}class Vv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return g7(this.persistence,new p7,e.initialUser,this.serializer)}Cu(e){return new j2($S.Vi,this.serializer)}Du(e){return new E7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vv.provider={build:()=>new Vv};class qhe extends Vv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof Yw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new l7(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new j2((r=>Yw.Vi(r,n)),this.serializer)}}class V7 extends Vv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await eO(this.xu.syncEngine),await Wp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return g7(this.persistence,new p7,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new l7(r,e.asyncQueue,n)}Mu(e,n){const r=new Que(n,this.persistence);return new Xue(e.asyncQueue,r)}Cu(e){const n=h7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new z2(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,T7(),sw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new E7}}class Ghe extends V7{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof DA&&(this.sharedClientState.syncEngine={So:Vhe.bind(null,n),Do:Uhe.bind(null,n),Co:$he.bind(null,n),hs:Fhe.bind(null,n),bo:Lhe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await Bhe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=T7();if(!DA.v(n))throw new Me(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=h7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mhe.bind(null,this.syncEngine),await VI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bhe})()}createDatastore(e){const n=qS(e.databaseInfo.databaseId),r=ehe(e.databaseInfo);return ahe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new ohe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>m5(this.syncEngine,n,0)),(function(){return u5.v()?new u5:new Xfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new The(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ke(n);Ne(qd,"RemoteStore shutting down."),r.Ea.add(5),await N0(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bv.provider={build:()=>new Bv};class tO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const nu="FirestoreClient";class Hhe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ni.UNAUTHENTICATED,this.clientId=g2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Ne(nu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ne(nu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=G2(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function MA(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(nu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await m7(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function y5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Khe(t);Ne(nu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>f5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>f5(e.remoteStore,i))),t._onlineComponents=e}async function Khe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(nu,"Using user provided OfflineComponentProvider");try{await MA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ip("Error using user provided cache. Falling back to memory cache: "+n),await MA(t,new Vv)}}else Ne(nu,"Using default OfflineComponentProvider"),await MA(t,new qhe(void 0));return t._offlineComponents}async function B7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(nu,"Using user provided OnlineComponentProvider"),await y5(t,t._uninitializedComponentsProvider._online)):(Ne(nu,"Using default OnlineComponentProvider"),await y5(t,new Bv))),t._onlineComponents}function Whe(t){return B7(t).then((e=>e.syncEngine))}async function e1(t){const e=await B7(t),n=e.eventManager;return n.onListen=Ahe.bind(null,e.syncEngine),n.onUnlisten=Che.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=khe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ihe.bind(null,e.syncEngine),n}function Yhe(t,e,n,r){const i=new tO(r),a=new Y2(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>H2(await e1(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>K2(await e1(t),a)))}}function Xhe(t,e,n={}){const r=new wo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new tO({next:g=>{f.Nu(),s.enqueueAndForget((()=>K2(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new Me(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new Y2(A0(o.path),f,{includeMetadataChanges:!0,Ka:!0});return H2(a,h)})(await e1(t),t.asyncQueue,e,n,r))),r.promise}function Qhe(t,e,n={}){const r=new wo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new tO({next:g=>{f.Nu(),s.enqueueAndForget((()=>K2(a,h))),g.fromCache&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new Y2(o,f,{includeMetadataChanges:!0,Ka:!0});return H2(a,h)})(await e1(t),t.asyncQueue,e,n,r))),r.promise}function Zhe(t,e){const n=new wo;return t.asyncQueue.enqueueAndForget((async()=>Phe(await Whe(t),e,n))),n.promise}function F7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Jhe="ComponentProvider",b5=new Map;function epe(t,e,n,r,i){return new Tde(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,F7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const tpe="firestore.googleapis.com",x5=!0;class w5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tpe,this.ssl=x5}else this.host=e.host,this.ssl=e.ssl??x5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o7)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nO{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Lue;switch(r.type){case"firstParty":return new Fue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=b5.get(n);r&&(Ne(Jhe,"Removing Datastore"),b5.delete(n),r.terminate())})(this),Promise.resolve()}}class Vl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vl(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_0(n,Ln._jsonSchema))return new Ln(e,r||null,new Le(jt.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:ar("string",Ln._jsonSchemaVersion),referencePath:ar("string")};class Wc extends Vl{constructor(e,n,r){super(e,n,A0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Le(e))}withConverter(e){return new Wc(this.firestore,e,this._path)}}function Wr(t,e,...n){if(t=zt(t),Vq("collection","path",e),t instanceof nO){const r=jt.fromString(e,...n);return d3(r),new Wc(t,null,r)}{if(!(t instanceof Ln||t instanceof Wc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return d3(r),new Wc(t.firestore,null,r)}}function _t(t,e,...n){if(t=zt(t),arguments.length===1&&(e=g2.newId()),Vq("doc","path",e),t instanceof nO){const r=jt.fromString(e,...n);return u3(r),new Ln(t,null,new Le(r))}{if(!(t instanceof Ln||t instanceof Wc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return u3(r),new Ln(t.firestore,t instanceof Wc?t.converter:null,new Le(r))}}const S5="AsyncQueue";class _5{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A7(this,"async_queue_retry"),this._c=()=>{const r=sw();r&&Ne(S5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new wo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hu(e))throw e;Ne(S5,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",E5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=q2.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:E5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function E5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Co extends nO{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _5(e),this._firestoreClient=void 0,await e}}}function npe(t,e,n){n||(n=Bw);const r=Fp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Zc(a,e))return i;throw new Me(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o7)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&uu(e.host)&&KN(e.host),r.initialize({options:e,instanceIdentifier:n})}function O0(t){if(t._terminated)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rpe(t),t._firestoreClient}function rpe(t){const e=t._freezeSettings(),n=epe(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Hhe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(Hn.fromBase64String(e))}catch(n){throw new Me(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Va(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_0(e,Va._jsonSchema))return Va.fromBase64String(e.bytes)}}Va._jsonSchemaVersion="firestore/bytes/1.0",Va._jsonSchema={type:ar("string",Va._jsonSchemaVersion),bytes:ar("string")};class WS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class YS{constructor(e){this._methodName=e}}class So{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:So._jsonSchemaVersion}}static fromJSON(e){if(_0(e,So._jsonSchema))return new So(e.latitude,e.longitude)}}So._jsonSchemaVersion="firestore/geoPoint/1.0",So._jsonSchema={type:ar("string",So._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};class _s{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_0(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _s(e.vectorValues);throw new Me(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:ar("string",_s._jsonSchemaVersion),vectorValues:ar("object")};const ipe=/^__.*__$/;class ape{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kp(e,this.data,n,this.fieldTransforms)}}class U7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{dataSource:t})}}class XS{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new XS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return t1(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if($7(this.dataSource)&&ipe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class spe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qS(e)}createContext(e,n,r,i=!1){return new XS({dataSource:e,methodName:n,targetDoc:r,path:An.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D0(t){const e=t._freezeSettings(),n=qS(t._databaseId);return new spe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rO(t,e,n,r,i,a={}){const s=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);aO("Data must be an object, but it was:",s,r);const o=H7(r,s);let c,u;if(a.merge)c=new Vi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=Gd(e,h,n);if(!s.contains(g))throw new Me(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Y7(f,g)||f.push(g)}c=new Vi(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new ape(new ai(o),c,u)}class R0 extends YS{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof R0}}function ope(t,e,n){return new XS({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iO extends YS{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=ope(this,e,!0),r=this.Ac.map((a=>Qp(a,n))),i=new Bd(r);return new DG(e.path,i)}isEqual(e){return e instanceof iO&&Zc(this.Ac,e.Ac)}}function q7(t,e,n,r){const i=t.createContext(1,e,n);aO("Data must be an object, but it was:",i,r);const a=[],s=ai.empty();pu(r,((c,u)=>{const f=W7(e,c,n);u=zt(u);const h=i.childContextForFieldPath(f);if(u instanceof R0)a.push(f);else{const g=Qp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Vi(a);return new U7(s,o,i.fieldTransforms)}function G7(t,e,n,r,i,a){const s=t.createContext(1,e,n),o=[Gd(e,r,n)],c=[i];if(a.length%2!=0)throw new Me(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(Gd(e,a[g])),c.push(a[g+1]);const u=[],f=ai.empty();for(let g=o.length-1;g>=0;--g)if(!Y7(u,o[g])){const v=o[g];let b=c[g];b=zt(b);const x=s.childContextForFieldPath(v);if(b instanceof R0)u.push(v);else{const w=Qp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Vi(u);return new U7(f,h,s.fieldTransforms)}function lpe(t,e,n,r=!1){return Qp(n,t.createContext(r?4:3,e))}function Qp(t,e){if(K7(t=zt(t)))return aO("Unsupported field value:",e,t),H7(t,e);if(t instanceof YS)return(function(r,i){if(!$7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Qp(o,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gde(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ht.fromDate(r);return{timestampValue:mp(i.serializer,a)}}if(r instanceof ht){const a=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mp(i.serializer,a)}}if(r instanceof So)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Va)return{bytesValue:BG(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:O2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _s)return(function(s,o){const c=s instanceof _s?s.toArray():s;return{mapValue:{fields:{[_2]:{stringValue:E2},[dp]:{arrayValue:{values:c.map((f=>{if(typeof f!="number")throw o.createError("VectorValues must only contain numeric values.");return k2(o.serializer,f)}))}}}}}})(r,i);if(QG(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${PS(r)}`)})(t,e)}function H7(t,e){const n={};return rG(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(t,((r,i)=>{const a=Qp(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function K7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof So||t instanceof Va||t instanceof Ln||t instanceof YS||t instanceof _s||QG(t))}function aO(t,e,n){if(!K7(n)||!Bq(n)){const r=PS(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Gd(t,e,n){if((e=zt(e))instanceof WS)return e._internalPath;if(typeof e=="string")return W7(t,e);throw t1("Field path arguments must be of type string or ",t,!1,void 0,n)}const cpe=new RegExp("[~\\*/\\[\\]]");function W7(t,e,n){if(e.search(cpe)>=0)throw t1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new WS(...e.split("."))._internalPath}catch{throw t1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function t1(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Me(Ee.INVALID_ARGUMENT,o+t+c)}function Y7(t,e){return t.some((n=>n.isEqual(e)))}class upe{convertValue(e,n="none"){switch(Jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[dp].arrayValue?.values?.map((r=>bn(r.doubleValue)));return new _s(n)}convertGeoPoint(e){return new So(bn(e.latitude),bn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ov(e));default:return null}}convertTimestamp(e){const n=El(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=jt.fromString(e);Xe(XG(r),9688,{name:e});const i=new Ld(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class sO extends upe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function T5(){return new R0("deleteField")}function dpe(...t){return new iO("arrayUnion",t)}const A5="@firebase/firestore",k5="4.11.0";function C5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class X7{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Gd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fpe extends X7{data(){return super.data()}}function Q7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oO{}class lO extends oO{}function Bi(t,e,...n){let r=[];e instanceof oO&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof cO)).length,o=a.filter((c=>c instanceof QS)).length;if(s>1||s>0&&o>0)throw new Me(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class QS extends lO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new QS(e,n,r)}_apply(e){const n=this._parse(e);return Z7(e._query,n),new Vl(e.firestore,e.converter,CI(e._query,n))}_parse(e){const n=D0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){N5(h,f);const b=[];for(const x of h)b.push(P5(c,a,x));g={arrayValue:{values:b}}}else g=P5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||N5(h,f),g=lpe(o,s,h,f==="in"||f==="not-in");return kt.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ow(t,e,n){const r=e,i=Gd("where",t);return QS._create(i,r,n)}class cO extends oO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cO(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)Z7(s,c),s=CI(s,c)})(e._query,n),new Vl(e.firestore,e.converter,CI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uO extends lO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new uO(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jv(a,s)})(e._query,this._field,this._direction);return new Vl(e.firestore,e.converter,Vde(e._query,n))}}function Es(t,e="asc"){const n=e,r=Gd("orderBy",t);return uO._create(r,n)}class dO extends lO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dO(e,n,r)}_apply(e){return new Vl(e.firestore,e.converter,$w(e._query,this._limit,this._limitType))}}function I5(t){return dO._create("limit",t,"F")}function P5(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wG(e)&&n.indexOf("/")!==-1)throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(jt.fromString(n));if(!Le.isDocumentKey(r))throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rv(t,new Le(r))}if(n instanceof Ln)return Rv(t,n._key);throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${PS(n)}.`)}function N5(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z7(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function fO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hpe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=vpe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function ppe(t){return new hpe(t)}class gpe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bv.provider,this._offlineComponentProvider={build:n=>new V7(n,e?.cacheSizeBytes,this.forceOwnership)}}}class mpe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bv.provider,this._offlineComponentProvider={build:n=>new Ghe(n,e?.cacheSizeBytes)}}}function vpe(t){return new gpe(t?.forceOwnership)}function ype(){return new mpe}class qm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Id extends X7{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Id._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Id._jsonSchemaVersion="firestore/documentSnapshot/1.0",Id._jsonSchema={type:ar("string",Id._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};class lw extends Id{data(e={}){return super.data(e)}}class Pd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new lw(this._firestore,this._userDataWriter,r.key,r,new qm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new lw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new qm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new lw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new qm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:bpe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=g2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bpe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}Pd._jsonSchemaVersion="firestore/querySnapshot/1.0",Pd._jsonSchema={type:ar("string",Pd._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};class xpe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=D0(e)}set(e,n,r){this._verifyNotCommitted();const i=jA(e,this._firestore),a=fO(i.converter,n,r),s=rO(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=jA(e,this._firestore);let s;return s=typeof(n=zt(n))=="string"||n instanceof WS?G7(this._dataReader,"WriteBatch.update",a._key,n,r,i):q7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jA(e,this._firestore);return this._mutations=this._mutations.concat(new C0(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jA(t,e){if((t=zt(t)).firestore!==e)throw new Me(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function zA(t){t=Gi(t,Ln);const e=Gi(t.firestore,Co),n=O0(e);return Xhe(n,t._key).then((r=>J7(e,t,r)))}function sa(t){t=Gi(t,Vl);const e=Gi(t.firestore,Co),n=O0(e),r=new sO(e);return Q7(t._query),Qhe(n,t._query).then((i=>new Pd(e,r,t,i)))}function la(t,e,n){t=Gi(t,Ln);const r=Gi(t.firestore,Co),i=fO(t.converter,e,n),a=D0(r);return M0(r,[rO(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function fo(t,e,n,...r){t=Gi(t,Ln);const i=Gi(t.firestore,Co),a=D0(i);let s;return s=typeof(e=zt(e))=="string"||e instanceof WS?G7(a,"updateDoc",t._key,e,n,r):q7(a,"updateDoc",t._key,e),M0(i,[s.toMutation(t._key,yr.exists(!0))])}function ca(t){return M0(Gi(t.firestore,Co),[new C0(t._key,yr.none())])}function ZS(t,e){const n=Gi(t.firestore,Co),r=_t(t),i=fO(t.converter,e),a=D0(t.firestore);return M0(n,[rO(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then((()=>r))}function ru(t,...e){t=zt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||C5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(C5(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,s,o;if(t instanceof Ln)s=Gi(t.firestore,Co),o=A0(t._key.path),a={next:u=>{e[r]&&e[r](J7(s,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Gi(t,Vl);s=Gi(u.firestore,Co),o=u._query;const f=new sO(s);a={next:h=>{e[r]&&e[r](new Pd(s,f,u,h))},error:e[r+1],complete:e[r+2]},Q7(t._query)}const c=O0(s);return Yhe(c,o,i,a)}function M0(t,e){const n=O0(t);return Zhe(n,e)}function J7(t,e,n){const r=n.docs.get(e._key),i=new sO(t);return new Id(t,i,e._key,r,new qm(n.hasPendingWrites,n.fromCache),e.converter)}function UI(t){return t=Gi(t,Co),O0(t),new xpe(t,(e=>M0(t,e)))}(function(e,n=!0){jue(Up),wl(new Ao("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Co(new Vue(r.getProvider("auth-internal")),new Uue(s,r.getProvider("app-check-internal")),Ade(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Ss(A5,k5,e),Ss(A5,k5,"esm2020")})();const $I=new Map,eH={activated:!1,tokenObservers:[]},wpe={initialized:!1,enabled:!1};function br(t){return $I.get(t)||{...eH}}function Spe(t,e){return $I.set(t,e),$I.get(t)}function JS(){return wpe}const tH="https://content-firebaseappcheck.googleapis.com/v1",_pe="exchangeRecaptchaEnterpriseToken",Epe="exchangeDebugToken",O5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Tpe=1440*60*1e3;class Ape{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new wv,this.pending.promise.catch(n=>{}),await kpe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new wv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function kpe(t){return new Promise(e=>{setTimeout(e,t)})}const Cpe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fi=new Bp("appCheck","AppCheck",Cpe);function D5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function hO(t){if(!br(t).activated)throw Fi.create("use-before-activation",{appName:t.name})}function nH(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=ex(n)+"d:"),r&&(s+=ex(r)+"h:"),s+=ex(i)+"m:"+ex(a)+"s",s}function ex(t){return t===0?"00":t>=10?t.toString():"0"+t}async function pO({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw Fi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw Fi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw Fi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function Ipe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tH}/projects/${n}/apps/${r}:${_pe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function rH(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tH}/projects/${n}/apps/${r}:${Epe}?key=${i}`,body:{debug_token:e}}}const Ppe="firebase-app-check-database",Npe=1,Fv="firebase-app-check-store",iH="debug-token";let tx=null;function aH(){return tx||(tx=new Promise((t,e)=>{try{const n=indexedDB.open(Ppe,Npe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Fi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;r.oldVersion===0&&i.createObjectStore(Fv,{keyPath:"compositeKey"})}}catch(n){e(Fi.create("storage-open",{originalErrorMessage:n?.message}))}}),tx)}function Ope(t){return oH(lH(t))}function Dpe(t,e){return sH(lH(t),e)}function Rpe(t){return sH(iH,t)}function Mpe(){return oH(iH)}async function sH(t,e){const r=(await aH()).transaction(Fv,"readwrite"),a=r.objectStore(Fv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(Fi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function oH(t){const n=(await aH()).transaction(Fv,"readonly"),i=n.objectStore(Fv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(Fi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function lH(t){return`${t.options.appId}-${t.name}`}const Lc=new ES("@firebase/app-check");async function jpe(t){if(_S()){let e;try{e=await Ope(t)}catch(n){Lc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function LA(t,e){return _S()?Dpe(t,e).catch(n=>{Lc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function zpe(){let t;try{t=await Mpe()}catch{}if(t)return t;{const e=crypto.randomUUID();return Rpe(e).catch(n=>Lc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function gO(){return JS().enabled}async function mO(){const t=JS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Lpe(){const t=HN(),e=JS();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new wv;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(zpe())}const Vpe={error:"UNKNOWN_ERROR"};function Bpe(t){return GN.encodeString(JSON.stringify(t),!1)}async function qI(t,e=!1,n=!1){const r=t.app;hO(r);const i=br(r);let a=i.token,s;if(a&&!Ih(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(Ih(u)?a=u:await LA(r,void 0))}if(!e&&a&&Ih(a))return{token:a.token};let o=!1;if(gO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=pO(rH(r,await mO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await LA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Lc.warn(u.message):n&&Lc.error(u),VA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await br(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Lc.warn(u.message):n&&Lc.error(u),s=u}let c;return a?s?Ih(a)?c={token:a.token,internalError:s}:c=VA(s):(c={token:a.token},i.token=a,await LA(r,a)):c=VA(s),o&&dH(r,c),c}async function Fpe(t){const e=t.app;hO(e);const{provider:n}=br(e);if(gO()){const r=await mO(),{token:i}=await pO(rH(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function cH(t,e,n,r){const{app:i}=t,a=br(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&Ih(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),R5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>R5(t))}function uH(t,e){const n=br(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function R5(t){const{app:e}=t,n=br(e);let r=n.tokenRefresher;r||(r=Upe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Upe(t){const{app:e}=t;return new Ape(async()=>{const n=br(e);let r;if(n.token?r=await qI(t,!0):r=await qI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=br(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},O5.RETRIAL_MIN_WAIT,O5.RETRIAL_MAX_WAIT)}function dH(t,e){const n=br(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ih(t){return t.expireTimeMillis-Date.now()>0}function VA(t){return{token:Bpe(Vpe),error:t}}class $pe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=br(this.app);for(const n of e)uH(this.app,n.next);return Promise.resolve()}}function qpe(t,e){return new $pe(t,e)}function Gpe(t){return{getToken:e=>qI(t,e),getLimitedUseToken:()=>Fpe(t),addTokenListener:e=>cH(t,"INTERNAL",e),removeTokenListener:e=>uH(t.app,e)}}const Hpe="@firebase/app-check",Kpe="0.11.0",Wpe="https://www.google.com/recaptcha/enterprise.js";function Ype(t,e){const n=new wv,r=br(t);r.reCAPTCHAState={initialized:n};const i=Xpe(t),a=D5(!0);return a?M5(t,e,a,i,n):Jpe(()=>{const s=D5(!0);if(!s)throw new Error("no recaptcha");M5(t,e,s,i,n)}),n.promise}function M5(t,e,n,r,i){n.ready(()=>{Zpe(t,e,n,r),i.resolve(n)})}function Xpe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Qpe(t){hO(t);const n=await br(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=br(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Zpe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{br(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{br(t).reCAPTCHAState.succeeded=!1}}),a=br(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function Jpe(t){const e=document.createElement("script");e.src=Wpe,e.onload=t,document.head.appendChild(e)}class vO{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){tge(this._throttleData);const e=await Qpe(this._app).catch(r=>{throw Fi.create("recaptcha-error")});if(!br(this._app).reCAPTCHAState?.succeeded)throw Fi.create("recaptcha-error");let n;try{n=await pO(Ipe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=ege(Number(r.customData?.httpStatus),this._throttleData),Fi.create("initial-throttle",{time:nH(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Fp(e,"heartbeat"),Ype(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof vO?this._siteKey===e._siteKey:!1}}function ege(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Tpe,httpStatus:t};{const n=e?e.backoffCount:0,r=Pre(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function tge(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Fi.create("throttled",{time:nH(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function nge(t=YN(),e){t=zt(t);const n=Fp(t,"app-check");if(JS().initialized||Lpe(),gO()&&mO().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw Fi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return rge(t,e.provider,e.isTokenAutoRefreshEnabled),br(t).isTokenAutoRefreshEnabled&&cH(r,"INTERNAL",()=>{}),r}function rge(t,e,n=!1){const r=Spe(t,{...eH});r.activated=!0,r.provider=e,r.cachedTokenPromise=jpe(t).then(i=>(i&&Ih(i)&&(r.token=i,dH(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Lc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const ige="app-check",j5="app-check-internal";function age(){wl(new Ao(ige,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qpe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(j5).initialize()})),wl(new Ao(j5,t=>{const e=t.getProvider("app-check").getImmediate();return Gpe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ss(Hpe,Kpe)}age();const sge={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},yO=g8(sge);nge(yO,{provider:new vO("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const gi=J8(yO),rt=npe(yO,{localCache:ppe({tabManager:ype()})}),zi={DEBUG:0,INFO:1,WARN:2,ERROR:3};class oge{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===zi.ERROR?"error":e.level===zi.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(zi.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(zi.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(zi.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(zi.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const fn=new oge;function BA(t){if(typeof t=="string"){const e=t.match(/^[^\w]*\s*([A-Za-z]+):\s*(.*)/);return e?{source:e[1],message:e[2]}:{source:"App",message:t}}return{source:"App",message:String(t)}}const $={log:(...t)=>{const{source:e,message:n}=BA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;fn.info(e,n,r)},warn:(...t)=>{const{source:e,message:n}=BA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;fn.warn(e,n,r)},error:(...t)=>{const{source:e,message:n}=BA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;fn.error(e,n,r)}},z5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),nx=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),nn=h2()(Pq(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Gae(gi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await jL(gi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=nx(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await qae(gi,e,n)).user;await Kae(a,{displayName:r}),await ML(a,z5());const s=nx(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await jL(gi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Fae(gi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=gi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await ML(e,z5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";return n.code==="auth/too-many-requests"&&(r="Too many verification emails sent. Please wait before trying again."),t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=nn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=gi.currentUser;if(!e)return!1;try{await e.reload();const n=gi.currentUser;if(n?.emailVerified){const r=nx(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=gi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=of.credential(n.email,e);return await Vae(n,r),await Qae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Uae(gi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>nn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Xae(gi,async r=>{const i=Date.now(),a=nn.getState(),s=r?nx(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){$.log(" Loading budgetStore to check onboarding...");const v=await Jh(()=>Promise.resolve().then(()=>rX),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),fH=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],lge=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=fH.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},e_=t=>{const e=fH.map(i=>({...i,met:i.regex.test(t)})),n=lge(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},hH=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=e_(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},pH=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=e_(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(d2,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(qp,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},cge=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[i,a]=T.useState(""),[s,o]=T.useState(!1),[c,u]=T.useState(!1),[f,h]=T.useState(!1),[g,v]=T.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:A,clearError:I}=nn(),N=e_(n),O=async P=>{if(P.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!N.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},D=async P=>{P.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return T.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(pI,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:P=>e(P.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(pI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(Ps,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[m.jsx(Ps,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:P=>e(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:P=>a(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:P=>r(P.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!N.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?m.jsx(Eq,{className:"h-5 w-5"}):m.jsx(Tq,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(hH,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(pH,{password:n})})]}),A&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[A,A.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!N.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[m.jsx(bue,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},uge=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=T.useState(""),[a,s]=T.useState(""),[o,c]=T.useState(!1),[u,f]=T.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=nn(),x=e_(r);T.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(Rw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(t3,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(Eq,{className:"h-5 w-5"}):m.jsx(Tq,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(hH,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(t3,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(pH,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(Ps,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},gH=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=nn();T.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),T.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(pI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Rw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(np,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(np,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(Ps,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},mH=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(np,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(rp,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),bO=T.createContext({});function t_(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const vH=typeof window<"u",xO=vH?T.useLayoutEffect:T.useEffect,n_=T.createContext(null);function wO(t,e){t.indexOf(e)===-1&&t.push(e)}function n1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Io=(t,e,n)=>n>e?e:n<t?t:n;let SO=()=>{};const Al={},yH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function bH(t){return typeof t=="object"&&t!==null}const xH=t=>/^0[^.\s]+$/u.test(t);function _O(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ua=t=>t,dge=(t,e)=>n=>e(t(n)),j0=(...t)=>t.reduce(dge),Uv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class EO{constructor(){this.subscriptions=[]}add(e){return wO(this.subscriptions,e),()=>n1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ts=t=>t*1e3,Ba=t=>t/1e3;function wH(t,e){return e?t*(1e3/e):0}const SH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fge=1e-7,hge=12;function pge(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=SH(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>fge&&++o<hge);return s}function z0(t,e,n,r){if(t===e&&n===r)return Ua;const i=a=>pge(a,0,1,t,n);return a=>a===0||a===1?a:SH(i(a),e,r)}const _H=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,EH=t=>e=>1-t(1-e),TH=z0(.33,1.53,.69,.99),TO=EH(TH),AH=_H(TO),kH=t=>(t*=2)<1?.5*TO(t):.5*(2-Math.pow(2,-10*(t-1))),AO=t=>1-Math.sin(Math.acos(t)),CH=EH(AO),IH=_H(AO),gge=z0(.42,0,1,1),mge=z0(0,0,.58,1),PH=z0(.42,0,.58,1),vge=t=>Array.isArray(t)&&typeof t[0]!="number",NH=t=>Array.isArray(t)&&typeof t[0]=="number",yge={linear:Ua,easeIn:gge,easeInOut:PH,easeOut:mge,circIn:AO,circInOut:IH,circOut:CH,backIn:TO,backInOut:AH,backOut:TH,anticipate:kH},bge=t=>typeof t=="string",L5=t=>{if(NH(t)){SO(t.length===4);const[e,n,r,i]=t;return z0(e,n,r,i)}else if(bge(t))return yge[t];return t},rx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xge(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const wge=40;function OH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=rx.reduce((I,N)=>(I[N]=xge(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const I=Al.useManualTiming?i.timestamp:performance.now();n=!1,Al.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,wge),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:rx.reduce((I,N)=>{const O=s[N];return I[N]=(D,P=!1,C=!1)=>(n||w(),O.schedule(D,P,C)),I},{}),cancel:I=>{for(let N=0;N<rx.length;N++)s[rx[N]].cancel(I)},state:i,steps:s}}const{schedule:ln,cancel:iu,state:Kr,steps:FA}=OH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ua,!0);let cw;function Sge(){cw=void 0}const bi={now:()=>(cw===void 0&&bi.set(Kr.isProcessing||Al.useManualTiming?Kr.timestamp:performance.now()),cw),set:t=>{cw=t,queueMicrotask(Sge)}},DH=t=>e=>typeof e=="string"&&e.startsWith(t),RH=DH("--"),_ge=DH("var(--"),kO=t=>_ge(t)?Ege.test(t.split("/*")[0].trim()):!1,Ege=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function V5(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Zp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$v={...Zp,transform:t=>Io(0,1,t)},ix={...Zp,default:1},uv=t=>Math.round(t*1e5)/1e5,CO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tge(t){return t==null}const Age=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,IO=(t,e)=>n=>!!(typeof n=="string"&&Age.test(n)&&n.startsWith(t)||e&&!Tge(n)&&Object.prototype.hasOwnProperty.call(n,e)),MH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(CO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},kge=t=>Io(0,255,t),UA={...Zp,transform:t=>Math.round(kge(t))},yd={test:IO("rgb","red"),parse:MH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+UA.transform(t)+", "+UA.transform(e)+", "+UA.transform(n)+", "+uv($v.transform(r))+")"};function Cge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const GI={test:IO("#"),parse:Cge,transform:yd.transform},L0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kc=L0("deg"),_o=L0("%"),Ge=L0("px"),Ige=L0("vh"),Pge=L0("vw"),B5={..._o,parse:t=>_o.parse(t)/100,transform:t=>_o.transform(t*100)},Ph={test:IO("hsl","hue"),parse:MH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_o.transform(uv(e))+", "+_o.transform(uv(n))+", "+uv($v.transform(r))+")"},rr={test:t=>yd.test(t)||GI.test(t)||Ph.test(t),parse:t=>yd.test(t)?yd.parse(t):Ph.test(t)?Ph.parse(t):GI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?yd.transform(t):Ph.transform(t),getAnimatableNone:t=>{const e=rr.parse(t);return e.alpha=0,rr.transform(e)}},Nge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Oge(t){return isNaN(t)&&typeof t=="string"&&(t.match(CO)?.length||0)+(t.match(Nge)?.length||0)>0}const jH="number",zH="color",Dge="var",Rge="var(",F5="${}",Mge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Mge,c=>(rr.test(c)?(r.color.push(a),i.push(zH),n.push(rr.parse(c))):c.startsWith(Rge)?(r.var.push(a),i.push(Dge),n.push(c)):(r.number.push(a),i.push(jH),n.push(parseFloat(c))),++a,F5)).split(F5);return{values:n,split:o,indexes:r,types:i}}function LH(t){return qv(t).values}function VH(t){const{split:e,types:n}=qv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===jH?a+=uv(i[s]):o===zH?a+=rr.transform(i[s]):a+=i[s]}return a}}const jge=t=>typeof t=="number"?0:rr.test(t)?rr.getAnimatableNone(t):t;function zge(t){const e=LH(t);return VH(t)(e.map(jge))}const au={test:Oge,parse:LH,createTransformer:VH,getAnimatableNone:zge};function $A(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Lge({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=$A(c,o,t+1/3),a=$A(c,o,t),s=$A(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function r1(t,e){return n=>n>0?e:t}const kn=(t,e,n)=>t+(e-t)*n,qA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Vge=[GI,yd,Ph],Bge=t=>Vge.find(e=>e.test(t));function U5(t){const e=Bge(t);if(!e)return!1;let n=e.parse(t);return e===Ph&&(n=Lge(n)),n}const $5=(t,e)=>{const n=U5(t),r=U5(e);if(!n||!r)return r1(t,e);const i={...n};return a=>(i.red=qA(n.red,r.red,a),i.green=qA(n.green,r.green,a),i.blue=qA(n.blue,r.blue,a),i.alpha=kn(n.alpha,r.alpha,a),yd.transform(i))},HI=new Set(["none","hidden"]);function Fge(t,e){return HI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Uge(t,e){return n=>kn(t,e,n)}function PO(t){return typeof t=="number"?Uge:typeof t=="string"?kO(t)?r1:rr.test(t)?$5:Gge:Array.isArray(t)?BH:typeof t=="object"?rr.test(t)?$5:$ge:r1}function BH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>PO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function $ge(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=PO(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function qge(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Gge=(t,e)=>{const n=au.createTransformer(e),r=qv(t),i=qv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?HI.has(t)&&!i.values.length||HI.has(e)&&!r.values.length?Fge(t,e):j0(BH(qge(r,i),i.values),n):r1(t,e)};function FH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kn(t,e,n):PO(t)(t,e)}const Hge=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ln.update(e,n),stop:()=>iu(e),now:()=>Kr.isProcessing?Kr.timestamp:bi.now()}},UH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},i1=2e4;function NO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<i1;)e+=n,r=t.next(e);return e>=i1?1/0:e}function Kge(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(NO(r),i1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Ba(i)}}const Wge=5;function $H(t,e,n){const r=Math.max(e-Wge,0);return wH(n-t(r),e-r)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},GA=.001;function Yge({duration:t=Rn.duration,bounce:e=Rn.bounce,velocity:n=Rn.velocity,mass:r=Rn.mass}){let i,a,s=1-e;s=Io(Rn.minDamping,Rn.maxDamping,s),t=Io(Rn.minDuration,Rn.maxDuration,Ba(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=KI(u,s),b=Math.exp(-h);return GA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=KI(Math.pow(u,2),s);return(-i(u)+GA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-GA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Qge(i,a,o);if(t=Ts(t),isNaN(c))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Xge=12;function Qge(t,e,n){let r=n;for(let i=1;i<Xge;i++)r=r-t(r)/e(r);return r}function KI(t,e){return t*Math.sqrt(1-e*e)}const Zge=["duration","bounce"],Jge=["stiffness","damping","mass"];function q5(t,e){return e.some(n=>t[n]!==void 0)}function eme(t){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!q5(t,Jge)&&q5(t,Zge))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Io(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rn.mass,stiffness:i,damping:a}}else{const n=Yge(t);e={...e,...n,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function a1(t=Rn.visualDuration,e=Rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=eme({...n,velocity:-Ba(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=Ba(Math.sqrt(c/f)),A=Math.abs(w)<5;r||(r=A?Rn.restSpeed.granular:Rn.restSpeed.default),i||(i=A?Rn.restDelta.granular:Rn.restDelta.default);let I;if(x<1){const O=KI(S,x);I=D=>{const P=Math.exp(-x*S*D);return s-P*((b+x*S*w)/O*Math.sin(O*D)+w*Math.cos(O*D))}}else if(x===1)I=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);I=D=>{const P=Math.exp(-x*S*D),C=Math.min(O*D,300);return s-P*((b+x*S*w)*Math.sinh(C)+O*w*Math.cosh(C))/O}}const N={calculatedDuration:v&&h||null,next:O=>{const D=I(O);if(v)o.done=O>=h;else{let P=O===0?b:0;x<1&&(P=O===0?Ts(b):$H(I,O,D));const C=Math.abs(P)<=r,R=Math.abs(s-D)<=i;o.done=C&&R}return o.value=o.done?s:D,o},toString:()=>{const O=Math.min(NO(N),i1),D=UH(P=>N.next(O*P).value,O,30);return O+"ms "+D},toTransition:()=>{}};return N}a1.applyToOptions=t=>{const e=Kge(t,100,a1);return t.ease=e.ease,t.duration=Ts(e.duration),t.type="keyframes",t};function WI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=C=>o!==void 0&&C<o||c!==void 0&&C>c,b=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const A=C=>-x*Math.exp(-C/r),I=C=>S+A(C),N=C=>{const R=A(C),M=I(C);g.done=Math.abs(R)<=u,g.value=g.done?S:M};let O,D;const P=C=>{v(g.value)&&(O=C,D=a1({keyframes:[g.value,b(g.value)],velocity:$H(I,C,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:C=>{let R=!1;return!D&&O===void 0&&(R=!0,N(C),P(C)),O!==void 0&&C>=O?D.next(C-O):(!R&&N(C),g)}}}function tme(t,e,n){const r=[],i=n||Al.mix||FH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Ua:e;o=j0(c,o)}r.push(o)}return r}function nme(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(SO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tme(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Uv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(Io(t[0],t[a-1],f)):u}function rme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Uv(0,e,r);t.push(kn(n,1,i))}}function ime(t){const e=[0];return rme(e,t.length-1),e}function ame(t,e){return t.map(n=>n*e)}function sme(t,e){return t.map(()=>e||PH).splice(0,t.length-1)}function dv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=vge(r)?r.map(L5):L5(r),a={done:!1,value:e[0]},s=ame(n&&n.length===e.length?n:ime(e),t),o=nme(s,e,{ease:Array.isArray(i)?i:sme(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const ome=t=>t!==null;function OO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(ome),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const lme={decay:WI,inertia:WI,tween:dv,keyframes:dv,spring:a1};function qH(t){typeof t.type=="string"&&(t.type=lme[t.type])}class DO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const cme=t=>t/100;class RO extends DO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==bi.now()&&this.tick(bi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qH(e);const{type:n=dv,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||dv;c!==dv&&typeof o[0]!="number"&&(this.mixKeyframes=j0(cme,FH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=NO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,N=r;if(h){const C=Math.min(this.currentTime,i)/o;let R=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&R--,R=Math.min(R,h+1),R%2&&(g==="reverse"?(M=1-M,v&&(M-=v/o)):g==="mirror"&&(N=s)),I=Io(0,1,M)*o}const O=A?{done:!1,value:f[0]}:N.next(I);a&&(O.value=a(O.value));let{done:D}=O;!A&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return P&&b!==WI&&(O.value=OO(f,this.options,w,this.speed)),x&&x(O.value),P&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return Ba(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ba(e)}get time(){return Ba(this.currentTime)}set time(e){e=Ts(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ba(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Hge,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ume(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bd=t=>t*180/Math.PI,YI=t=>{const e=bd(Math.atan2(t[1],t[0]));return XI(e)},dme={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:YI,rotateZ:YI,skewX:t=>bd(Math.atan(t[1])),skewY:t=>bd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},XI=t=>(t=t%360,t<0&&(t+=360),t),G5=YI,H5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),K5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:H5,scaleY:K5,scale:t=>(H5(t)+K5(t))/2,rotateX:t=>XI(bd(Math.atan2(t[6],t[5]))),rotateY:t=>XI(bd(Math.atan2(-t[2],t[0]))),rotateZ:G5,rotate:G5,skewX:t=>bd(Math.atan(t[4])),skewY:t=>bd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function QI(t){return t.includes("scale")?1:0}function ZI(t,e){if(!t||t==="none")return QI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=fme,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dme,i=o}if(!i)return QI(e);const a=r[e],s=i[1].split(",").map(pme);return typeof a=="function"?a(s):s[a]}const hme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ZI(n,e)};function pme(t){return parseFloat(t.trim())}const Jp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eg=new Set(Jp),W5=t=>t===Zp||t===Ge,gme=new Set(["x","y","z"]),mme=Jp.filter(t=>!gme.has(t));function vme(t){const e=[];return mme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ZI(e,"x"),y:(t,{transform:e})=>ZI(e,"y")};Vc.translateX=Vc.x;Vc.translateY=Vc.y;const Nd=new Set;let JI=!1,eP=!1,tP=!1;function GH(){if(eP){const t=Array.from(Nd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=vme(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}eP=!1,JI=!1,Nd.forEach(t=>t.complete(tP)),Nd.clear()}function HH(){Nd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eP=!0)})}function yme(){tP=!0,HH(),GH(),tP=!1}class MO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Nd.add(this),JI||(JI=!0,ln.read(HH),ln.resolveKeyframes(GH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}ume(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Nd.delete(this)}cancel(){this.state==="scheduled"&&(Nd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bme=t=>t.startsWith("--");function xme(t,e,n){bme(e)?t.style.setProperty(e,n):t.style[e]=n}const wme=_O(()=>window.ScrollTimeline!==void 0),Sme={};function _me(t,e){const n=_O(t);return()=>Sme[e]??n()}const KH=_me(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gm([0,.65,.55,1]),circOut:Gm([.55,0,1,.45]),backIn:Gm([.31,.01,.66,-.59]),backOut:Gm([.33,1.53,.69,.99])};function WH(t,e){if(t)return typeof t=="function"?KH()?UH(t,e):"ease-out":NH(t)?Gm(t):Array.isArray(t)?t.map(n=>WH(n,e)||Y5.easeOut):Y5[t]}function Eme(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=WH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function YH(t){return typeof t=="function"&&"applyToOptions"in t}function Tme({type:t,...e}){return YH(t)&&KH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class XH extends DO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,SO(typeof e.type!="string");const u=Tme(e);this.animation=Eme(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=OO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):xme(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ba(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ba(e)}get time(){return Ba(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ts(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&wme()?(this.animation.timeline=e,Ua):n(this)}}const QH={anticipate:kH,backInOut:AH,circInOut:IH};function Ame(t){return t in QH}function kme(t){typeof t.ease=="string"&&Ame(t.ease)&&(t.ease=QH[t.ease])}const HA=10;class Cme extends XH{constructor(e){kme(e),qH(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new RO({...s,autoplay:!1}),c=Math.max(HA,bi.now()-this.startTime),u=Io(0,HA,c-HA);n.setWithVelocity(o.sample(Math.max(0,c-u)).value,o.sample(c).value,u),o.stop()}}const X5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(au.test(t)||t==="0")&&!t.startsWith("url("));function Ime(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Pme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=X5(i,e),o=X5(a,e);return!s||!o?!1:Ime(t)||(n==="spring"||YH(n))&&r}function nP(t){t.duration=0,t.type="keyframes"}const Nme=new Set(["opacity","clipPath","filter","transform"]),Ome=_O(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Dme(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Ome()&&n&&Nme.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Rme=40;class Mme extends DO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bi.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||MO;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=bi.now(),Pme(e,a,s,o)||((Al.instantAnimations||!c)&&f?.(OO(e,r,n)),e[0]=e[e.length-1],nP(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Rme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&Dme(g),b=g.motionValue?.owner?.current,x=v?new Cme({...g,element:b}):new RO(g);x.finished.then(()=>{this.notifyFinished()}).catch(Ua),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),yme()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function ZH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const jme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zme(t){const e=jme.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function JH(t,e,n=1){const[r,i]=zme(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return yH(s)?parseFloat(s):s}return kO(i)?JH(i,e,n+1):i}const Lme={type:"spring",stiffness:500,damping:25,restSpeed:10},Vme=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Bme={type:"keyframes",duration:.8},Fme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ume=(t,{keyframes:e})=>e.length>2?Bme:eg.has(t)?t.startsWith("scale")?Vme(e[1]):Lme:Fme,$me=t=>t!==null;function qme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter($me),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function eK(t,e){if(t?.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function jO(t,e){const n=t?.[e]??t?.default??t;return n!==t?eK(n,t):n}function Gme({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const zO=(t,e,n,r={},i,a)=>s=>{const o=jO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ts(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Gme(o)||Object.assign(f,Ume(t,f)),f.duration&&(f.duration=Ts(f.duration)),f.repeatDelay&&(f.repeatDelay=Ts(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(nP(f),f.delay===0&&(h=!0)),(Al.instantAnimations||Al.skipAnimations||i?.shouldSkipAnimations)&&(h=!0,nP(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=qme(f.keyframes,o);if(g!==void 0){ln.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new RO(f):new Mme(f)};function Q5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function LO(t,e,n,r){if(typeof e=="function"){const[i,a]=Q5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Q5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Wh(t,e,n){const r=t.getProps();return LO(r,e,n!==void 0?n:r.custom,t)}const tK=new Set(["width","height","top","left","right","bottom",...Jp]),Z5=30,Hme=t=>!isNaN(parseFloat(t));class Kme{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=bi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Hme(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new EO);const r=this.events[e].add(n);return e==="change"?()=>{r(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Z5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Z5);return wH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wp(t,e){return new Kme(t,e)}const rP=t=>Array.isArray(t);function Wme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,wp(n))}function Yme(t){return rP(t)?t[t.length-1]||0:t}function VO(t,e){const n=Wh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Yme(a[s]);Wme(t,s,o)}}const si=t=>!!(t&&t.getVelocity);function Xme(t){return!!(si(t)&&t.add)}function iP(t,e){const n=t.getValue("willChange");if(Xme(n))return n.add(e);if(!n&&Al.WillChange){const r=new Al.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function BO(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Qme="framerAppearId",nK="data-"+BO(Qme);function rK(t){return t.props[nK]}function Zme({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iK(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const c=t.getDefaultTransition();a=a?eK(a,c):c;const u=a?.reduceMotion;r&&(a=r);const f=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const g in o){const v=t.getValue(g,t.latestValues[g]??null),b=o[g];if(b===void 0||h&&Zme(h,g))continue;const x={delay:n,...jO(a||{},g)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===w&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const N=rK(t);if(N){const O=window.MotionHandoffAnimation(N,g,ln);O!==null&&(x.startTime=O,S=!0)}}iP(t,g);const A=u??t.shouldReduceMotion;v.start(zO(g,v,b,A&&tK.has(g)?{type:!1}:x,t,S));const I=v.animation;I&&f.push(I)}if(s){const g=()=>ln.update(()=>{s&&VO(t,s)});f.length?Promise.all(f).then(g):g()}return f}function aP(t,e,n={}){const r=Wh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(iK(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Jme(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Jme(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(aP(c,e,{...s,delay:n+(typeof r=="function"?0:r)+ZH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function aK(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>aP(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=aP(t,e,n);else{const i=typeof e=="function"?Wh(t,e,n.custom):e;r=Promise.all(iK(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const eve={test:t=>t==="auto",parse:t=>t},sK=t=>e=>e.test(t),oK=[Zp,Ge,_o,kc,Pge,Ige,eve],J5=t=>oK.find(sK(t));function tve(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xH(t):!0}const nve=new Set(["brightness","contrast","saturate","opacity"]);function rve(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(CO)||[];if(!r)return t;const i=n.replace(r,"");let a=nve.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const ive=/\b([a-z-]*)\(.*?\)/gu,sP={...au,getAnimatableNone:t=>{const e=t.match(ive);return e?e.map(rve).join(" "):t}},eV={...Zp,transform:Math.round},ave={rotate:kc,rotateX:kc,rotateY:kc,rotateZ:kc,scale:ix,scaleX:ix,scaleY:ix,scaleZ:ix,skew:kc,skewX:kc,skewY:kc,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:$v,originX:B5,originY:B5,originZ:Ge},FO={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,inset:Ge,insetBlock:Ge,insetBlockStart:Ge,insetBlockEnd:Ge,insetInline:Ge,insetInlineStart:Ge,insetInlineEnd:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,paddingBlock:Ge,paddingBlockStart:Ge,paddingBlockEnd:Ge,paddingInline:Ge,paddingInlineStart:Ge,paddingInlineEnd:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,marginBlock:Ge,marginBlockStart:Ge,marginBlockEnd:Ge,marginInline:Ge,marginInlineStart:Ge,marginInlineEnd:Ge,fontSize:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...ave,zIndex:eV,fillOpacity:$v,strokeOpacity:$v,numOctaves:eV},sve={...FO,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:sP,WebkitFilter:sP},lK=t=>sve[t];function cK(t,e){let n=lK(t);return n!==sP&&(n=au),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ove=new Set(["auto","none","0"]);function lve(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!ove.has(a)&&qv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=cK(n,i)}class cve extends MO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),kO(h))){const g=JH(h,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!tK.has(r)||e.length!==2)return;const[i,a]=e,s=J5(i),o=J5(a),c=V5(i),u=V5(a);if(c!==u&&Vc[r]){this.needsMeasurement=!0;return}if(s!==o)if(W5(s)&&W5(o))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Vc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||tve(e[i]))&&r.push(i);r.length&&lve(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Vc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}const uve=new Set(["opacity","clipPath","filter","transform"]);function uK(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const dK=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function oP(t){return bH(t)&&"offsetHeight"in t}const{schedule:UO}=OH(queueMicrotask,!1),ps={x:!1,y:!1};function fK(){return ps.x||ps.y}function dve(t){return t==="x"||t==="y"?ps[t]?null:(ps[t]=!0,()=>{ps[t]=!1}):ps.x||ps.y?null:(ps.x=ps.y=!0,()=>{ps.x=ps.y=!1})}function hK(t,e){const n=uK(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function fve(t){return!(t.pointerType==="touch"||fK())}function hve(t,e,n={}){const[r,i,a]=hK(t,n);return r.forEach(s=>{let o=!1,c=!1,u;const f=()=>{s.removeEventListener("pointerleave",b)},h=w=>{u&&(u(w),u=void 0),f()},g=w=>{o=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c&&(c=!1,h(w))},v=()=>{o=!0,window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",g,i)},b=w=>{if(w.pointerType!=="touch"){if(o){c=!0;return}h(w)}},x=w=>{if(!fve(w))return;c=!1;const S=e(s,w);typeof S=="function"&&(u=S,s.addEventListener("pointerleave",b,i))};s.addEventListener("pointerenter",x,i),s.addEventListener("pointerdown",v,i)}),a}const pK=(t,e)=>e?t===e?!0:pK(t,e.parentElement):!1,$O=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,pve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gve(t){return pve.has(t.tagName)||t.isContentEditable===!0}const mve=new Set(["INPUT","SELECT","TEXTAREA"]);function vve(t){return mve.has(t.tagName)||t.isContentEditable===!0}const uw=new WeakSet;function tV(t){return e=>{e.key==="Enter"&&t(e)}}function KA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yve=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=tV(()=>{if(uw.has(n))return;KA(n,"down");const i=tV(()=>{KA(n,"up")}),a=()=>KA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function nV(t){return $O(t)&&!fK()}const rV=new WeakSet;function bve(t,e,n={}){const[r,i,a]=hK(t,n),s=o=>{const c=o.currentTarget;if(!nV(o)||rV.has(o))return;uw.add(c),n.stopPropagation&&rV.add(o);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),uw.has(c)&&uw.delete(c),nV(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||pK(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),oP(o)&&(o.addEventListener("focus",u=>yve(u,i)),!gve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function qO(t){return bH(t)&&"ownerSVGElement"in t}const dw=new WeakMap;let fw;const gK=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:qO(r)&&"getBBox"in r?r.getBBox()[e]:r[n],xve=gK("inline","width","offsetWidth"),wve=gK("block","height","offsetHeight");function Sve({target:t,borderBoxSize:e}){dw.get(t)?.forEach(n=>{n(t,{get width(){return xve(t,e)},get height(){return wve(t,e)}})})}function _ve(t){t.forEach(Sve)}function Eve(){typeof ResizeObserver>"u"||(fw=new ResizeObserver(_ve))}function Tve(t,e){fw||Eve();const n=uK(t);return n.forEach(r=>{let i=dw.get(r);i||(i=new Set,dw.set(r,i)),i.add(e),fw?.observe(r)}),()=>{n.forEach(r=>{const i=dw.get(r);i?.delete(e),i?.size||fw?.unobserve(r)})}}const hw=new Set;let Nh;function Ave(){Nh=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};hw.forEach(e=>e(t))},window.addEventListener("resize",Nh)}function kve(t){return hw.add(t),Nh||Ave(),()=>{hw.delete(t),!hw.size&&typeof Nh=="function"&&(window.removeEventListener("resize",Nh),Nh=void 0)}}function iV(t,e){return typeof t=="function"?kve(t):Tve(t,e)}function Cve(t){return qO(t)&&t.tagName==="svg"}const Ive=[...oK,rr,au],Pve=t=>Ive.find(sK(t)),aV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oh=()=>({x:aV(),y:aV()}),sV=()=>({min:0,max:0}),hr=()=>({x:sV(),y:sV()}),Nve=new WeakMap;function r_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Gv(t){return typeof t=="string"||Array.isArray(t)}const GO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],HO=["initial",...GO];function i_(t){return r_(t.animate)||HO.some(e=>Gv(t[e]))}function mK(t){return!!(i_(t)||t.variants)}function Ove(t,e,n){for(const r in e){const i=e[r],a=n[r];if(si(i))t.addValue(r,i);else if(si(a))t.addValue(r,wp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,wp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const lP={current:null},vK={current:!1},Dve=typeof window<"u";function Rve(){if(vK.current=!0,!!Dve)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lP.current=t.matches;t.addEventListener("change",e),e()}else lP.current=!1}const oV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let s1={};function yK(t){s1=t}function Mve(){return s1}class jve{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=MO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=bi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ln.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=i_(n),this.isVariantNode=mK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const b=g[v];u[v]!==void 0&&si(b)&&b.set(u[v])}}mount(e){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=e,Nve.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(vK.current||Rve(),this.shouldReduceMotion=lP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),iu(this.notifyUpdate),iu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&uve.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:c,ease:u,duration:f}=n.accelerate,h=new XH({element:this.current,name:e,keyframes:o,times:c,ease:u,duration:Ts(f)}),g=s(h);this.valueSubscriptions.set(e,()=>{g(),h.cancel()});return}const r=eg.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in s1){const n=s1[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<oV.length;r++){const i=oV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Ove(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=wp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yH(r)||xH(r))?r=parseFloat(r):!Pve(r)&&au.test(n)&&(r=cK(e,n)),this.setBaseTarget(e,si(r)?r.get():r)),si(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=LO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!si(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new EO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){UO.render(this.render)}}class bK extends jve{constructor(){super(...arguments),this.KeyframeResolver=cve}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;si(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class mu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function xK({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zve({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Lve(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function WA(t){return t===void 0||t===1}function cP({scale:t,scaleX:e,scaleY:n}){return!WA(t)||!WA(e)||!WA(n)}function id(t){return cP(t)||wK(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wK(t){return lV(t.x)||lV(t.y)}function lV(t){return t&&t!=="0%"}function o1(t,e,n){const r=t-n,i=e*r;return n+i}function cV(t,e,n,r,i){return i!==void 0&&(t=o1(t,i,r)),o1(t,n,r)+e}function uP(t,e=0,n=1,r,i){t.min=cV(t.min,e,n,r,i),t.max=cV(t.max,e,n,r,i)}function SK(t,{x:e,y:n}){uP(t.x,e.translate,e.scale,e.originPoint),uP(t.y,n.translate,n.scale,n.originPoint)}const uV=.999999999999,dV=1.0000000000001;function Vve(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Rh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,SK(t,s)),r&&id(a.latestValues)&&Rh(t,a.latestValues))}e.x<dV&&e.x>uV&&(e.x=1),e.y<dV&&e.y>uV&&(e.y=1)}function Dh(t,e){t.min=t.min+e,t.max=t.max+e}function fV(t,e,n,r,i=.5){const a=kn(t.min,t.max,i);uP(t,e,n,a,r)}function Rh(t,e){fV(t.x,e.x,e.scaleX,e.scale,e.originX),fV(t.y,e.y,e.scaleY,e.scale,e.originY)}function _K(t,e){return xK(Lve(t.getBoundingClientRect(),e))}function Bve(t,e,n){const r=_K(t,n),{scroll:i}=e;return i&&(Dh(r.x,i.offset.x),Dh(r.y,i.offset.y)),r}const Fve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Uve=Jp.length;function $ve(t,e,n){let r="",i=!0;for(let a=0;a<Uve;a++){const s=Jp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(s.startsWith("scale")?1:0);else{const u=parseFloat(o);c=s.startsWith("scale")?u===1:u===0}if(!c||n){const u=dK(o,FO[s]);if(!c){i=!1;const f=Fve[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function KO(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(eg.has(c)){s=!0;continue}else if(RH(c)){i[c]=u;continue}else{const f=dK(u,FO[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=$ve(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}function EK(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function hV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Tm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ge.test(t))t=parseFloat(t);else return t;const n=hV(t,e.target.x),r=hV(t,e.target.y);return`${n}% ${r}%`}},qve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=au.parse(t);if(i.length>5)return r;const a=au.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=kn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}},dP={borderRadius:{...Tm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tm,borderTopRightRadius:Tm,borderBottomLeftRadius:Tm,borderBottomRightRadius:Tm,boxShadow:qve};function TK(t,{layout:e,layoutId:n}){return eg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dP[t]||t==="opacity")}function WO(t,e,n){const r=t.style,i=e?.style,a={};if(!r)return a;for(const s in r)(si(r[s])||i&&si(i[s])||TK(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(a[s]=r[s]);return a}function Gve(t){return window.getComputedStyle(t)}class Hve extends bK{constructor(){super(...arguments),this.type="html",this.renderInstance=EK}readValueFromInstance(e,n){if(eg.has(n))return this.projection?.isProjecting?QI(n):hme(e,n);{const r=Gve(e),i=(RH(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _K(e,n)}build(e,n,r){KO(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return WO(e,n,r)}}const Kve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wve={offset:"strokeDashoffset",array:"strokeDasharray"};function Yve(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Kve:Wve;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const Xve=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function AK(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(KO(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox);for(const v of Xve)h[v]!==void 0&&(g[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Yve(h,i,a,s,!1)}const kK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),CK=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Qve(t,e,n,r){EK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kK.has(i)?i:BO(i),e.attrs[i])}function IK(t,e,n){const r=WO(t,e,n);for(const i in t)if(si(t[i])||si(e[i])){const a=Jp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class Zve extends bK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(eg.has(n)){const r=lK(n);return r&&r.default||0}return n=kK.has(n)?n:BO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return IK(e,n,r)}build(e,n,r){AK(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Qve(e,n,r,i)}mount(e){this.isSVGTag=CK(e.tagName),super.mount(e)}}const Jve=HO.length;function PK(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?PK(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Jve;n++){const r=HO[n],i=t.props[r];(Gv(i)||i===!1)&&(e[r]=i)}return e}function NK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const e0e=[...GO].reverse(),t0e=GO.length;function n0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>aK(t,n,r)))}function r0e(t){let e=n0e(t),n=pV(),r=!0;const i=c=>(u,f)=>{const h=Wh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=PK(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<t0e;w++){const S=e0e[w],A=n[S],I=u[S]!==void 0?u[S]:f[S],N=Gv(I),O=S===c?A.isActive:null;O===!1&&(b=w);let D=I===f[S]&&I!==u[S]&&N;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),A.protectedKeys={...v},!A.isActive&&O===null||!I&&!A.prevProp||r_(I)||typeof I=="boolean")continue;if(S==="exit"&&A.isActive&&O!==!0){A.prevResolvedValues&&(v={...v,...A.prevResolvedValues});continue}const P=i0e(A.prevProp,I);let C=P||S===c&&A.isActive&&!D&&N||w>b&&N,R=!1;const M=Array.isArray(I)?I:[I];let V=M.reduce(i(S),{});O===!1&&(V={});const{prevResolvedValues:L={}}=A,z={...L,...V},K=X=>{C=!0,g.has(X)&&(R=!0,g.delete(X)),A.needsAnimating[X]=!0;const J=t.getValue(X);J&&(J.liveStyle=!1)};for(const X in z){const J=V[X],ee=L[X];if(v.hasOwnProperty(X))continue;let Q=!1;rP(J)&&rP(ee)?Q=!NK(J,ee):Q=J!==ee,Q?J!=null?K(X):g.add(X):J!==void 0&&g.has(X)?K(X):A.protectedKeys[X]=!0}A.prevProp=I,A.prevResolvedValues=V,A.isActive&&(v={...v,...V}),r&&t.blockInitialAnimation&&(C=!1);const Y=D&&P;C&&(!Y||R)&&h.push(...M.map(X=>{const J={type:S};if(typeof X=="string"&&r&&!Y&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,Q=Wh(ee,X);if(ee.enteringChildren&&Q){const{delayChildren:U}=Q.transition||{};J.delay=ZH(ee.enteringChildren,t,U)}}return{animation:X,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Wh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const A=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=A??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pV()}}}function i0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NK(e,t):!1}function Qu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pV(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}function gV(t,e){t.min=e.min,t.max=e.max}function ds(t,e){gV(t.x,e.x),gV(t.y,e.y)}function mV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const OK=1e-4,a0e=1-OK,s0e=1+OK,DK=.01,o0e=0-DK,l0e=0+DK;function xi(t){return t.max-t.min}function c0e(t,e,n){return Math.abs(t-e)<=n}function vV(t,e,n,r=.5){t.origin=r,t.originPoint=kn(e.min,e.max,t.origin),t.scale=xi(n)/xi(e),t.translate=kn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=a0e&&t.scale<=s0e||isNaN(t.scale))&&(t.scale=1),(t.translate>=o0e&&t.translate<=l0e||isNaN(t.translate))&&(t.translate=0)}function fv(t,e,n,r){vV(t.x,e.x,n.x,r?r.originX:void 0),vV(t.y,e.y,n.y,r?r.originY:void 0)}function yV(t,e,n){t.min=n.min+e.min,t.max=t.min+xi(e)}function u0e(t,e,n){yV(t.x,e.x,n.x),yV(t.y,e.y,n.y)}function bV(t,e,n){t.min=e.min-n.min,t.max=t.min+xi(e)}function l1(t,e,n){bV(t.x,e.x,n.x),bV(t.y,e.y,n.y)}function xV(t,e,n,r,i){return t-=e,t=o1(t,1/n,r),i!==void 0&&(t=o1(t,1/i,r)),t}function d0e(t,e=0,n=1,r=.5,i,a=t,s=t){if(_o.test(e)&&(e=parseFloat(e),e=kn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=kn(a.min,a.max,r);t===a&&(o-=e),t.min=xV(t.min,e,n,o,i),t.max=xV(t.max,e,n,o,i)}function wV(t,e,[n,r,i],a,s){d0e(t,e[n],e[r],e[i],e.scale,a,s)}const f0e=["x","scaleX","originX"],h0e=["y","scaleY","originY"];function SV(t,e,n,r){wV(t.x,e,f0e,n?n.x:void 0,r?r.x:void 0),wV(t.y,e,h0e,n?n.y:void 0,r?r.y:void 0)}function _V(t){return t.translate===0&&t.scale===1}function RK(t){return _V(t.x)&&_V(t.y)}function EV(t,e){return t.min===e.min&&t.max===e.max}function p0e(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function TV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function MK(t,e){return TV(t.x,e.x)&&TV(t.y,e.y)}function AV(t){return xi(t.x)/xi(t.y)}function kV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function lo(t){return[t("x"),t("y")]}function g0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const jK=["TopLeft","TopRight","BottomLeft","BottomRight"],m0e=jK.length,CV=t=>typeof t=="string"?parseFloat(t):t,IV=t=>typeof t=="number"||Ge.test(t);function v0e(t,e,n,r,i,a){i?(t.opacity=kn(0,n.opacity??1,y0e(r)),t.opacityExit=kn(e.opacity??1,0,b0e(r))):a&&(t.opacity=kn(e.opacity??1,n.opacity??1,r));for(let s=0;s<m0e;s++){const o=`border${jK[s]}Radius`;let c=PV(e,o),u=PV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||IV(c)===IV(u)?(t[o]=Math.max(kn(CV(c),CV(u),r),0),(_o.test(u)||_o.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=kn(e.rotate||0,n.rotate||0,r))}function PV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const y0e=zK(0,.5,CH),b0e=zK(.5,.95,Ua);function zK(t,e,n){return r=>r<t?0:r>e?1:n(Uv(t,e,r))}function x0e(t,e,n){const r=si(t)?t:wp(t);return r.start(zO("",r,e,n)),r.animation}function Hv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const w0e=(t,e)=>t.depth-e.depth;class S0e{constructor(){this.children=[],this.isDirty=!1}add(e){wO(this.children,e),this.isDirty=!0}remove(e){n1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(w0e),this.isDirty=!1,this.children.forEach(e)}}function _0e(t,e){const n=bi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(iu(r),t(a-e))};return ln.setup(r,!0),()=>iu(r)}function pw(t){return si(t)?t.get():t}class E0e{constructor(){this.members=[]}add(e){wO(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&n1(this.members,r)}e.scheduleRender()}remove(e){if(n1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const gw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},YA=["","X","Y","Z"],T0e=1e3;let A0e=0;function XA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function LK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=rK(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ln,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&LK(r)}function VK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=A0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(I0e),this.nodes.forEach(D0e),this.nodes.forEach(R0e),this.nodes.forEach(P0e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new S0e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new EO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=qO(s)&&!Cve(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=_0e(g,250),gw.hasAnimatedSinceResize&&(gw.hasAnimatedSinceResize=!1,this.nodes.forEach(DV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||V0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!MK(this.targetLayout,v),A=!h&&g;if(this.options.layoutRoot||this.resumeFrom||A||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...jO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,A)}else h||DV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),iu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(OV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(O0e),this.nodes.forEach(k0e),this.nodes.forEach(C0e)):this.nodes.forEach(OV),this.clearAllSnapshots();const o=bi.now();Kr.delta=Io(0,1e3/60,o-Kr.timestamp),Kr.timestamp=o,Kr.isProcessing=!0,FA.update.process(Kr),FA.preRender.process(Kr),FA.render.process(Kr),Kr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,UO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N0e),this.sharedNodes.forEach(j0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xi(this.snapshot.measuredBox.x)&&!xi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!RK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||id(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),B0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return hr();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(F0e))){const{scroll:u}=this.root;u&&(Dh(o.x,u.offset.x),Dh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=hr();if(ds(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ds(o,s),Dh(o.x,f.offset.x),Dh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=hr();ds(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Rh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),id(f.latestValues)&&Rh(c,f.latestValues)}return id(this.latestValues)&&Rh(c,this.latestValues),c}removeTransform(s){const o=hr();ds(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!id(u.latestValues))continue;cP(u.latestValues)&&u.updateSnapshot();const f=hr(),h=u.measurePageBox();ds(f,h),SV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return id(this.latestValues)&&SV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!this.layout||!(f||h))return;this.resolvedRelativeTargetAt=Kr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ds(this.target,this.layout.layoutBox),SK(this.target,this.targetDelta)):ds(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||cP(this.parent.latestValues)||wK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,c){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),l1(this.relativeTargetOrigin,o,c),ds(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Kr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ds(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Vve(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=hr());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mV(this.prevProjectionDelta.x,this.projectionDelta.x),mV(this.prevProjectionDelta.y,this.projectionDelta.y)),fv(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!kV(this.projectionDelta.x,this.prevProjectionDelta.x)||!kV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oh(),this.projectionDelta=Oh(),this.projectionDeltaWithTransform=Oh()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Oh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=hr(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),S=!w||w.members.length<=1,A=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(L0e));this.animationProgress=0;let I;this.mixTargetDelta=N=>{const O=N/1e3;RV(h.x,s.x,O),RV(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(l1(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),z0e(this.relativeTarget,this.relativeTargetOrigin,g,O),I&&p0e(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=hr()),ds(I,this.relativeTarget)),x&&(this.animationValues=f,v0e(f,u,this.latestValues,O,A,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(iu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{gw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wp(0)),this.currentAnimation=x0e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&BK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||hr();const h=xi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=xi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}ds(o,c),Rh(o,f),fv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new E0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&XA("z",s,u,this.animationValues);for(let f=0;f<YA.length;f++)XA(`rotate${YA[f]}`,s,u,this.animationValues),XA(`skew${YA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=pw(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=pw(o?.pointerEvents)||""),this.hasProjected&&!id(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=g0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in dP){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=dP[b],A=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let N=0;N<I;N++)s[w[N]]=A}else S?this.options.visualElement.renderState.vars[b]=A:s[b]=A}this.options.layoutId&&(s.pointerEvents=u===this?pw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(NV),this.root.sharedNodes.clear()}}}function k0e(t){t.updateLayout()}function C0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?lo(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=xi(h);h.min=n[f].min,h.max=h.min+g}):BK(i,e.layoutBox,n)&&lo(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=xi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Oh();fv(s,n,e.layoutBox);const o=Oh();a?fv(o,t.applyTransform(r,!0),e.measuredBox):fv(o,n,e.layoutBox);const c=!RK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=hr();l1(v,e.layoutBox,h.layoutBox);const b=hr();l1(b,n,g.layoutBox),MK(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function I0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function P0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function N0e(t){t.clearSnapshot()}function NV(t){t.clearMeasurements()}function OV(t){t.isLayoutDirty=!1}function O0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function D0e(t){t.resolveTargetDelta()}function R0e(t){t.calcProjection()}function M0e(t){t.resetSkewAndRotation()}function j0e(t){t.removeLeadSnapshot()}function RV(t,e,n){t.translate=kn(e.translate,0,n),t.scale=kn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function MV(t,e,n,r){t.min=kn(e.min,n.min,r),t.max=kn(e.max,n.max,r)}function z0e(t,e,n,r){MV(t.x,e.x,n.x,r),MV(t.y,e.y,n.y,r)}function L0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const V0e={duration:.45,ease:[.4,0,.1,1]},jV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zV=jV("applewebkit/")&&!jV("chrome/")?Math.round:Ua;function LV(t){t.min=zV(t.min),t.max=zV(t.max)}function B0e(t){LV(t.x),LV(t.y)}function BK(t,e,n){return t==="position"||t==="preserve-aspect"&&!c0e(AV(e),AV(n),.2)}function F0e(t){return t!==t.root&&t.scroll?.wasRoot}const U0e=VK({attachResizeListener:(t,e)=>Hv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),QA={current:void 0},FK=VK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!QA.current){const t=new U0e({});t.mount(window),t.setOptions({layoutScroll:!0}),QA.current=t}return QA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),YO=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $0e(...t){return e=>{let n=!1;const r=t.map(i=>{const a=VV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():VV(t[i],null)}}}}function q0e(...t){return T.useCallback($0e(...t),t)}class G0e extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=oP(r)&&r.offsetWidth||0,a=oP(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function H0e({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){const s=T.useId(),o=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=T.useContext(YO),f=t.props?.ref??t?.ref,h=q0e(o,f);return T.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:x,right:w,bottom:S}=c.current;if(e||a===!1||!o.current||!g||!v)return;const A=n==="left"?`left: ${x}`:`right: ${w}`,I=r==="bottom"?`bottom: ${S}`:`top: ${b}`;o.current.dataset.motionPopId=s;const N=document.createElement("style");u&&(N.nonce=u);const O=i??document.head;return O.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${A}px !important;
            ${I}px !important;
          }
        `),()=>{O.contains(N)&&O.removeChild(N)}},[e]),m.jsx(G0e,{isPresent:e,childRef:o,sizeRef:c,pop:a,children:a===!1?t:T.cloneElement(t,{ref:h})})}const K0e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:c,root:u})=>{const f=t_(W0e),h=T.useId();let g=!0,v=T.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return a&&g&&(v={...v}),T.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[n]),T.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),t=m.jsx(H0e,{pop:s==="popLayout",isPresent:n,anchorX:o,anchorY:c,root:u,children:t}),m.jsx(n_.Provider,{value:v,children:t})};function W0e(){return new Map}function UK(t=!0){const e=T.useContext(n_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=T.useId();T.useEffect(()=>{if(t)return i(a)},[t]);const s=T.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const ax=t=>t.key||"";function BV(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const lr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:c="top",root:u})=>{const[f,h]=UK(s),g=T.useMemo(()=>BV(t),[t]),v=s&&!f?[]:g.map(ax),b=T.useRef(!0),x=T.useRef(g),w=t_(()=>new Map),S=T.useRef(new Set),[A,I]=T.useState(g),[N,O]=T.useState(g);xO(()=>{b.current=!1,x.current=g;for(let C=0;C<N.length;C++){const R=ax(N[C]);v.includes(R)?(w.delete(R),S.current.delete(R)):w.get(R)!==!0&&w.set(R,!1)}},[N,v.length,v.join("-")]);const D=[];if(g!==A){let C=[...g];for(let R=0;R<N.length;R++){const M=N[R],V=ax(M);v.includes(V)||(C.splice(R,0,M),D.push(M))}return a==="wait"&&D.length&&(C=D),O(BV(C)),I(g),null}const{forceRender:P}=T.useContext(bO);return m.jsx(m.Fragment,{children:N.map(C=>{const R=ax(C),M=s&&!f?!1:g===N||v.includes(R),V=()=>{if(S.current.has(R))return;if(S.current.add(R),w.has(R))w.set(R,!0);else return;let L=!0;w.forEach(z=>{z||(L=!1)}),L&&(P?.(),O(x.current),s&&h?.(),r&&r())};return m.jsx(K0e,{isPresent:M,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:M?void 0:V,anchorX:o,anchorY:c,children:C},R)})})},$K=T.createContext({strict:!1}),FV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let UV=!1;function Y0e(){if(UV)return;const t={};for(const e in FV)t[e]={isEnabled:n=>FV[e].some(r=>!!n[r])};yK(t),UV=!0}function qK(){return Y0e(),Mve()}function X0e(t){const e=qK();for(const n in t)e[n]={...e[n],...t[n]};yK(e)}const Q0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function c1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q0e.has(t)}let GK=t=>!c1(t);function Z0e(t){typeof t=="function"&&(GK=e=>e.startsWith("on")?!c1(e):t(e))}try{Z0e(require("@emotion/is-prop-valid").default)}catch{}function J0e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(GK(i)||n===!0&&c1(i)||!e&&!c1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const a_=T.createContext({});function eye(t,e){if(i_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Gv(n)?n:void 0,animate:Gv(r)?r:void 0}}return t.inherit!==!1?e:{}}function tye(t){const{initial:e,animate:n}=eye(t,T.useContext(a_));return T.useMemo(()=>({initial:e,animate:n}),[$V(e),$V(n)])}function $V(t){return Array.isArray(t)?t.join(" "):t}const XO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HK(t,e,n){for(const r in e)!si(e[r])&&!TK(r,n)&&(t[r]=e[r])}function nye({transformTemplate:t},e){return T.useMemo(()=>{const n=XO();return KO(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rye(t,e){const n=t.style||{},r={};return HK(r,n,t),Object.assign(r,nye(t,e)),r}function iye(t,e){const n={},r=rye(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const KK=()=>({...XO(),attrs:{}});function aye(t,e,n,r){const i=T.useMemo(()=>{const a=KK();return AK(a,e,CK(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};HK(a,t.style,t),i.style={...a,...i.style}}return i}const sye=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QO(t){return typeof t!="string"||t.includes("-")?!1:!!(sye.indexOf(t)>-1||/[A-Z]/u.test(t))}function oye(t,e,n,{latestValues:r},i,a=!1,s){const c=(s??QO(t)?aye:iye)(e,r,i,t),u=J0e(e,typeof t=="string",a),f=t!==T.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=T.useMemo(()=>si(h)?h.get():h,[h]);return T.createElement(t,{...f,children:g})}function lye({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:cye(n,r,i,t),renderState:e()}}function cye(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=pw(a[g]);let{initial:s,animate:o}=t;const c=i_(t),u=mK(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!r_(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=LO(t,g[v]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const A in S){let I=S[A];if(Array.isArray(I)){const N=f?I.length-1:0;I=I[N]}I!==null&&(i[A]=I)}for(const A in x)i[A]=x[A]}}}return i}const WK=t=>(e,n)=>{const r=T.useContext(a_),i=T.useContext(n_),a=()=>lye(t,e,r,i);return n?a():t_(a)},uye=WK({scrapeMotionValuesFromProps:WO,createRenderState:XO}),dye=WK({scrapeMotionValuesFromProps:IK,createRenderState:KK}),fye=Symbol.for("motionComponentSymbol");function hye(t,e,n){const r=T.useRef(n);T.useInsertionEffect(()=>{r.current=n});const i=T.useRef(null);return T.useCallback(a=>{a&&t.onMount?.(a),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const o=s(a);typeof o=="function"&&(i.current=o)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const YK=T.createContext({});function Eh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pye(t,e,n,r,i,a){const{visualElement:s}=T.useContext(a_),o=T.useContext($K),c=T.useContext(n_),u=T.useContext(YO),f=u.reducedMotion,h=u.skipAnimations,g=T.useRef(null),v=T.useRef(!1);r=r||o.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f,skipAnimations:h,isSVG:a}),v.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,x=T.useContext(YK);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&gye(g.current,n,i,x);const w=T.useRef(!1);T.useInsertionEffect(()=>{b&&w.current&&b.update(n,c)});const S=n[nK],A=T.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return xO(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),A.current&&b.animationState&&b.animationState.animateChanges())}),T.useEffect(()=>{b&&(!A.current&&b.animationState&&b.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),A.current=!1),b.enteringChildren=void 0)}),b}function gye(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:XK(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Eh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function XK(t){if(t)return t.options.allowProjection!==!1?t.projection:XK(t.parent)}function ZA(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&X0e(r);const a=n?n==="svg":QO(t),s=a?dye:uye;function o(u,f){let h;const g={...T.useContext(YO),...u,layoutId:mye(u)},{isStatic:v}=g,b=tye(u),x=s(u,v);if(!v&&vH){vye();const w=yye(g);h=w.MeasureLayout,b.visualElement=pye(t,x,g,i,w.ProjectionNode,a)}return m.jsxs(a_.Provider,{value:b,children:[h&&b.visualElement?m.jsx(h,{visualElement:b.visualElement,...g}):null,oye(t,u,hye(x,b.visualElement,f),x,v,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=T.forwardRef(o);return c[fye]=t,c}function mye({layoutId:t}){const e=T.useContext(bO).id;return e&&t!==void 0?e+"-"+t:t}function vye(t,e){T.useContext($K).strict}function yye(t){const e=qK(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function bye(t,e){if(typeof Proxy>"u")return ZA;const n=new Map,r=(a,s)=>ZA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,ZA(s,void 0,t,e)),n.get(s))})}const xye=(t,e)=>e.isSVG??QO(t)?new Zve(e):new Hve(e,{allowProjection:t!==T.Fragment});class wye extends mu{constructor(e){super(e),e.animationState||(e.animationState=r0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();r_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Sye=0;class _ye extends mu{constructor(){super(...arguments),this.id=Sye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Eye={animation:{Feature:wye},exit:{Feature:_ye}};function V0(t){return{point:{x:t.pageX,y:t.pageY}}}const Tye=t=>e=>$O(e)&&t(e,V0(e));function hv(t,e,n,r){return Hv(t,e,Tye(n),r)}const QK=({current:t})=>t?t.ownerDocument.defaultView:null,qV=(t,e)=>Math.abs(t-e);function Aye(t,e){const n=qV(t.x,e.x),r=qV(t.y,e.y);return Math.sqrt(n**2+r**2)}const GV=new Set(["auto","scroll"]);class ZK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ek(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=Aye(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=v,{timestamp:S}=Kr;this.history.push({...w,timestamp:S});const{onStart:A,onMove:I}=this.handlers;b||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=JA(b,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=ek(v.type==="pointercancel"?this.lastMoveEventInfo:JA(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,A),w&&w(v,A)},!$O(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=V0(e),u=JA(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Kr;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,ek(u,this.history)),this.removeListeners=j0(hv(this.contextWindow,"pointermove",this.handlePointerMove),hv(this.contextWindow,"pointerup",this.handlePointerUp),hv(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(GV.has(r.overflowX)||GV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),ln.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),iu(this.updatePoint)}}function JA(t,e){return e?{point:e(t.point)}:t}function HV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ek({point:t},e){return{point:t,delta:HV(t,JK(e)),offset:HV(t,kye(e)),velocity:Cye(e,.1)}}function kye(t){return t[0]}function JK(t){return t[t.length-1]}function Cye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=JK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ts(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>Ts(e)*2&&(r=t[1]);const a=Ba(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Iye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kn(n,t,r.max):Math.min(t,n)),t}function KV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Pye(t,{top:e,left:n,bottom:r,right:i}){return{x:KV(t.x,n,i),y:KV(t.y,e,r)}}function WV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Nye(t,e){return{x:WV(t.x,e.x),y:WV(t.y,e.y)}}function Oye(t,e){let n=.5;const r=xi(t),i=xi(e);return i>r?n=Uv(e.min,e.max-r,t.min):r>i&&(n=Uv(t.min,t.max-i,e.min)),Io(0,1,n)}function Dye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const fP=.35;function Rye(t=fP){return t===!1?t=0:t===!0&&(t=fP),{x:YV(t,"left","right"),y:YV(t,"top","bottom")}}function YV(t,e,n){return{min:XV(t,e),max:XV(t,n)}}function XV(t,e){return typeof t=="number"?t:t[e]||0}const Mye=new WeakMap;class jye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(V0(h).point),this.stopAnimation()},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dve(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lo(S=>{let A=this.getAxisMotionValue(S).get()||0;if(_o.test(A)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[S];N&&(A=xi(N)*(parseFloat(A)/100))}}this.originPoint[S]=A}),x&&ln.update(()=>x(h,g),!1,!0),iP(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Lye(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&ln.update(()=>w(h,g),!1,!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:f}=this.getProps();this.panSession=new ZK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:QK(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ln.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!sx(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Iye(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Eh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Pye(r.layoutBox,e):this.constraints=!1,this.elastic=Rye(n),i!==this.constraints&&!Eh(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&lo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Dye(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Eh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Bve(r,i.root,this.visualElement.getTransformPagePoint());let s=Nye(i.layout.layoutBox,a);if(n){const o=n(zve(s));this.hasMutatedConstraints=!!o,o&&(s=xK(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=lo(f=>{if(!sx(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return iP(this.visualElement,e),r.start(zO(e,r,0,n,this.visualElement,!1))}stopAnimation(){lo(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lo(n=>{const{drag:r}=this.getProps();if(!sx(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-kn(s,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Eh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};lo(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=Oye({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),lo(s=>{if(!sx(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(kn(c,u,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Mye.set(this.visualElement,this);const e=this.visualElement.current,n=hv(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps(),g=u.target,v=g!==e&&vve(g);f&&h&&!v&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();Eh(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=zye(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ln.read(i);const o=Hv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(lo(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=fP,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function QV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function zye(t,e,n){const r=iV(t,QV(n)),i=iV(e,QV(n));return()=>{r(),i()}}function sx(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Lye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Vye extends mu{constructor(e){super(e),this.removeGroupControls=Ua,this.removeListeners=Ua,this.controls=new jye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ua}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const tk=t=>(e,n)=>{t&&ln.update(()=>t(e,n),!1,!0)};class Bye extends mu{constructor(){super(...arguments),this.removePointerDownListener=Ua}onPointerDown(e){this.session=new ZK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:tk(e),onStart:tk(n),onMove:tk(r),onEnd:(a,s)=>{delete this.session,i&&ln.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=hv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let nk=!1;class Fye extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),nk&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),gw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),nk=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ln.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),UO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;nk=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eW(t){const[e,n]=UK(),r=T.useContext(bO);return m.jsx(Fye,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(YK),isPresent:e,safeToRemove:n})}const Uye={pan:{Feature:Bye},drag:{Feature:Vye,ProjectionNode:FK,MeasureLayout:eW}};function ZV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ln.postRender(()=>a(e,V0(e)))}class $ye extends mu{mount(){const{current:e}=this.node;e&&(this.unmount=hve(e,(n,r)=>(ZV(this.node,r,"Start"),i=>ZV(this.node,i,"End"))))}unmount(){}}class qye extends mu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=j0(Hv(this.node.current,"focus",()=>this.onFocus()),Hv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ln.postRender(()=>a(e,V0(e)))}class Gye extends mu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=bve(e,(i,a)=>(JV(this.node,a,"Start"),(s,{success:o})=>JV(this.node,s,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:r?.tap===!1})}unmount(){}}const hP=new WeakMap,rk=new WeakMap,Hye=t=>{const e=hP.get(t.target);e&&e(t)},Kye=t=>{t.forEach(Hye)};function Wye({root:t,...e}){const n=t||document;rk.has(n)||rk.set(n,{});const r=rk.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Kye,{root:t,...e})),r[i]}function Yye(t,e,n){const r=Wye(e);return hP.set(t,n),r.observe(t),()=>{hP.delete(t),r.unobserve(t)}}const Xye={some:0,all:1};class Qye extends mu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Xye[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return Yye(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Zye(e,n))&&this.startObserver()}unmount(){}}function Zye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jye={inView:{Feature:Qye},tap:{Feature:Gye},focus:{Feature:qye},hover:{Feature:$ye}},ebe={layout:{ProjectionNode:FK,MeasureLayout:eW}},tbe={...Eye,...Jye,...Uye,...ebe},bt=bye(tbe,xye);function nbe(t){t.values.forEach(e=>e.stop())}function pP(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&VO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{pP(a,e)})})}function rbe(t,e){if(Array.isArray(e))return pP(t,e);if(typeof e=="string")return pP(t,[e]);VO(t,e)}function ibe(){const t=new Set,e={subscribe(n){return t.add(n),()=>{t.delete(n)}},start(n,r){const i=[];return t.forEach(a=>{i.push(aK(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{rbe(r,n)})},stop(){t.forEach(n=>{nbe(n)})},mount(){return()=>{e.stop()}}};return e}function abe(){const t=t_(ibe);return xO(t.mount,[]),t}const sbe=abe,vu=h2((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),ox=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=vu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(lr,{children:n&&m.jsx(bt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(gue,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(qp,{size:14})})]})]})})})};class Mi extends T.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Td,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(np,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(Dce,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const obe=({onAddTransaction:t})=>{const e=xa(),n=js(),[r,i]=T.useState(!1),a=T.useRef(null),s=u=>n.pathname===u;T.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(Dw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(jc,{className:"w-5 h-5"}),label:"Charts"},{path:"/budget-breakdown",icon:m.jsx(_q,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(rp,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(jce,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(uf,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(Sce,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(tue,{className:"w-6 h-6"})})]})})};function lbe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function cbe(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function gl(t,e){return function(n){n&&(t[e]=n)}}function tW(t,e,n){return function(r){r&&(t[e][n]=r)}}function eB(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function ube(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var dbe="function",fbe="object",hbe="string",pbe="number",ZO="undefined",nW=typeof window!==ZO,gbe=typeof document!==ZO&&document,mbe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ir=1e-7,lx={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function vbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function u1(t,e,n,r){return(t*r+e*n)/(n+r)}function s_(t){return typeof t===ZO}function Ns(t){return t&&typeof t===fbe}function cr(t){return Array.isArray(t)}function Hi(t){return typeof t===hbe}function Sp(t){return typeof t===pbe}function JO(t){return typeof t===dbe}function ybe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function rW(t,e,n,r,i){var a=eD(t,e,n);return a?n:bbe(t,e,n+1,r,i)}function eD(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function bbe(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!eD(t,e,u))return{value:u};var h=u,g=Ki(i,function(v){var b=v.open;return b===f});if(g&&(h=rW(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function tD(t,e){var n=Hi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?mbe:u,h=f.map(function(P){var C=P.open,R=P.close;return C===R?C:C+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(P){return P&&P!=="undefined"}),x=b.length,w=[],S=[];function A(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(P){var C=b[P].trim(),R=P,M=Ki(f,function(z){var K=z.open;return K===C}),V=Ki(f,function(z){var K=z.close;return K===C});if(M){if(R=rW(M,b,P,x,f),R!==-1&&c)return A()&&a||(w.push(b.slice(P,R+1).join("")),P=R,a)?(N=P,"break"):(N=P,"continue")}else if(V&&!eD(V,b,P)){var L=vbe(f);return L.splice(f.indexOf(V),1),{value:tD(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:L})}}else if(ybe(C,i)&&!s)return A(),a?(N=P,"break"):(N=P,"continue");R===-1&&(R=x-1),S.push(b.slice(P,R+1).join("")),P=R,N=P},N,O=0;O<x;++O){var D=I(O);if(O=N,typeof D=="object")return D.value;if(D==="break")break}return S.length&&w.push(S.join("")),w}function su(t){return tD(t,"")}function xd(t){return tD(t,",")}function iW(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function B0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function xbe(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function mw(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Kv(){return Date.now?Date.now():new Date().getTime()}function kl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Ki(t,e,n){var r=kl(t,e);return r>-1?t[r]:n}var aW=(function(){var t=Kv(),e=nW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Kv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),wbe=(function(){var t=nW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Cl(t){return Object.keys(t)}function Sbe(t){var e=Cl(t);return e.map(function(n){return t[n]})}function en(t,e){var n=B0(t),r=n.value,i=n.unit;if(Ns(e)){var a=e[i];if(a){if(JO(a))return a(r);if(lx[i])return lx[i](r,a)}}else if(i==="%")return r*e/100;return lx[i]?lx[i](r):r}function gP(t,e,n){return Math.max(e,Math.min(t,n))}function tB(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ot(e[0],ir),ot(e[0]/r,ir)],[ot(e[1]*r,ir),ot(e[1],ir)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ot(o,ir);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function sW(t,e,n,r){if(!r)return t.map(function(v,b){return gP(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=tB(t,e,!1,s),c=o[0],u=o[1],f=tB(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function _be(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function mP(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Kn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Ebe(t){return[0,1].map(function(e){return mP(t.map(function(n){return n[e]}))})}function nB(t){var e=Ebe(t),n=Kn(e,t[0]),r=Kn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ml(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ot(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function rB(t,e){return t.forEach(function(n,r){t[r]=ot(t[r],e)}),t}function Tbe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function oW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function lW(t,e){t.indexOf(e)===-1&&t.push(e)}function mr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function cW(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function uW(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Gr(t,e,n,r){t.addEventListener(e,n,r)}function fr(t,e,n,r){t.removeEventListener(e,n,r)}function tg(t){return t?.ownerDocument||gbe}function nD(t){return tg(t).documentElement}function yu(t){return tg(t).body}function Yc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function dW(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function ng(t){return Ns(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Abe=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),kbe=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),Cbe=typeof Map=="function",Ibe=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function Pbe(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new Ibe;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var Nbe=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Pbe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function F0(t,e,n){var r=Cbe?Map:n?kbe:Abe,i=n||function(A){return A},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,S=0;return c.forEach(function(A,I){f.set(A,I)}),u.forEach(function(A,I){h.set(A,I)}),c.forEach(function(A,I){var N=h.get(A);typeof N>"u"?(++S,s.push(I)):b[N]=S}),u.forEach(function(A,I){var N=f.get(A);typeof N>"u"?(a.push(I),++w):(o.push([N,I]),S=b[I]||0,g.push([N-S,I-w]),v.push(I===N),N!==I&&x.push([N,I]))}),s.reverse(),new Nbe(t,e,a,s,x,o,g,v)}var Obe=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=F0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),vP=function(t,e){return vP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},vP(t,e)};function U0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mo=function(){return mo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mo.apply(this,arguments)};function fW(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iB(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function aB(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function hW(t){var e=[];return t.forEach(function(n){e=e.concat(cr(n)?hW(n):n)}),e}function ik(t,e){if(!e)return t;for(var n in e)s_(t[n])&&(t[n]=e[n]);return t}function d1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function sB(t){var e=t.className,n=fW(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function oB(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function o_(t){if(!t)return null;var e=t.b;return ng(e)?e:o_(t.c)}function pW(t){var e=t.parentNode;e&&e.removeChild(t)}function gW(t){t.forEach(function(e){e()})}function Dbe(){return this.constructor(this.props,this.context)}var rD=0,l_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=Sbe(r).filter(function(b){return b.$_req}),f=hW(u.map(function(b){return b.$_subs})),h=Ki(f,function(b){return b.d===c});if(o.b&&!Hi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){$0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Hi(i)||(o.ps=i.props,o.ref=i.ref),iD(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function mW(){return Object.__CROACT_CURRENT_INSTNACE__}function Rbe(){return rD}function Mbe(t){rD=t}function iD(t){return Object.__CROACT_CURRENT_INSTNACE__=t,rD=0,t}var aD=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=mo(mo({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=$0(a.c,[a],[a.o],i,a._cs,mo(mo({},this.state),this.$_state),r);s&&(n&&i.push(n),gW(i),iD(null))},t})(),vW=(function(t){U0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return d1(this.props,r)||d1(this.state,i)},e})(aD);function yW(t){var e=function(n){e.current=n};return e.current=t,e}function jbe(t){return t._fr=!0,t}function zbe(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new aD(e,n),a.constructor=t,t._fr?(r.fr=yW(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=Dbe),a.$_p=r,a}var Lbe=(function(t){U0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,ik(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(ik(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=ik(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=zbe(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=mo(mo({},i),v.$_cs);$0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(A){A()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(A){return A()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(l_);function Vbe(t,e,n){var r=sD(sB(t),sB(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function Bbe(t,e,n){var r=sD(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function sD(t,e){var n=Cl(t),r=Cl(e),i=F0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function Fbe(t,e,n){var r=n.style,i=sD(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=mw(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=mw(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=mw(c,"-");r.removeProperty(h)}}function Ube(t){return t.replace(/^on/g,"").toLowerCase()}var $be=(function(t){U0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=Ube(r);i?(fr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Gr(o,c,s[r]))},n.s=function(r){return d1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=o_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=tg(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}$0(o,o._ps,u.children,r,i);var x=o.b,w=oB(a),S=w[0],A=w[1],I=oB(u),N=I[0],O=I[1];return Vbe(S,N,x),Bbe(A,O,o),Fbe(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)fr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||pW(a)},e})(l_);function Wv(t){if(!t||ng(t))return t;var e=t.$_p._ps;return e.length?Wv(e[0].b):null}function bW(t){if(t){if(t.b&&ng(t.b))return t;var e=t._ps;return e.length?bW(e[0]):null}}function As(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=fW(i,["key","ref"]);return{type:t,key:a,ref:s,props:mo(mo({},o),{children:oW(n).filter(function(c){return c!=null&&c!==!1})})}}var xW=(function(t){U0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(l_),qbe=(function(t){U0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=o_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||tg(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){pW(this.b)},e})(l_);function Gbe(t,e,n){var r=n.map(function(c){return Hi(c)?null:c.key}),i=aB(e.map(function(c){return c.k})),a=aB(r),s=F0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Wv(h.b),v=Wv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,lB(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Hi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,lB(f,r[u],u,t)),!0):(h.i=u,!1)});return iB(iB([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Hbe(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Wv(n[i].b);if(a)return a}return null}function lB(t,e,n,r){var i=r.d+1;if(Hi(t)||Sp(t))return new qbe("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?$be:Lbe;return new s(a,i,e,n,r,t.ref,t.props)}function $0(t,e,n,r,i,a,s){var o=Gbe(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=bW(h);g&&(g._sel=!0)}),t._hyd=null;var f=o_(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=Wv(g.b);if(v&&f!==v&&!v.parentNode){var b=Hbe(t,g);f.insertBefore(v,b)}}),u.length>0}function Kbe(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new xW(e));var a=[];return $0(n,n._ps,t?[t]:[],a,r,void 0,void 0),gW(a),iD(null),i||(e.__CROACT__=n),n}function cB(t,e,n){return!n&&t&&(n=new xW(e.parentElement),n._hyd=[e],n._sel=!0),Kbe(t,e,n),n}function wW(t){var e=mW(),n=e._hs||(e._hs=[]),r=Rbe(),i=n[r];if(Mbe(r+1),i){if(!d1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Wbe(t,e){var n=wW({func:t,deps:e});return n.value}function Ybe(t){return Wbe(function(){return yW(t)},[])}function SW(t,e,n){var r=mW(),i=wW({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function Xbe(t,e,n){SW(function(){t?.(e())},n,!0)}function oD(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function _W(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function EW(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function lD(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Qbe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Zbe(t,e){var n=lD("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function yP(t){return t.replace(/_/g,".")}function Hm(t,e){var n=null,r="-1";return oD(t,function(i){var a=lD("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Zbe(i.versionTest.toLowerCase(),e)||r),r=yP(r),!0)}),{preset:n,version:r}}function cx(t,e){var n={brand:"",version:"-1"};return oD(t,function(r){var i=TW(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function TW(t,e){return _W(t,function(n){var r=n.brand;return lD(""+e.test,r.toLowerCase())})}var AW=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],kW=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],bP=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],CW=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],IW=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function PW(t){return!!Hm(CW,t).preset}function Jbe(t){var e=EW(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:PW(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Hm(AW,e),s=a.preset,o=a.version,c=Hm(IW,e),u=c.preset,f=c.version,h=Hm(kW,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Hm(bP,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function exe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!cx(CW,n).brand||PW(EW())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&oD(bP,function(g){return TW(n,g)});var c=cx(kW,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=cx(bP,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=_W(IW,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=cx(AW,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=yP(o.version),s.version=yP(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function txe(t){return Qbe()?exe():Jbe(t)}function nxe(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function rxe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function ixe(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function NW(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Po(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=pn(e),i=0;i<e;++i){var a=e*i+i;if(!ot(n[a],ir)){for(var s=i+1;s<e;++s)if(n[e*i+s]){rxe(n,r,i,s,e);break}}if(!ot(n[a],ir))return[];ixe(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ot(u,ir)||i===s||nxe(n,r,o,i,e,-u)}}return r}function axe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function OW(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function sxe(t,e){for(var n=pn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Hd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Os(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=pn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function f1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=pn(t);return e.forEach(function(i){r=tn(r,i,t)}),r}function tn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Pt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function oxe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function DW(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ci(t,e,n){n===void 0&&(n=e.length);var r=tn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function lxe(t,e){return tn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function cxe(t,e){return tn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function uxe(t,e){return tn(t,G0(e,4))}function ux(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return tn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function q0(t,e){return ci(G0(e,3),Hd(t,3))}function ak(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return tn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function uB(t,e){return tn(t,e,4)}function G0(t,e){var n=Math.cos(t),r=Math.sin(t),i=pn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function pn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function cD(t,e){for(var n=pn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Kd(t,e){for(var n=pn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function uD(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],S=i[1],A=a[0],I=a[1],N=s[0],O=s[1],D=o[0],P=o[1],C=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-A*f,-I*f,-N*g,-O*g,-D*b,-P*b,-w*u,-S*u,-A*h,-I*h,-N*v,-O*v,-D*x,-P*x],R=Po(C,8);if(!R.length)return[];var M=tn(R,[w,S,A,I,N,O,D,P],8);return M[8]=1,Os(axe(M),3,4)}var pv=function(){return pv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pv.apply(this,arguments)};function dxe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Yv(t,e){return e===void 0&&(e=0),Th(_p(t,e))}function fxe(t,e){var n=ci(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Th(t){var e=dxe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function _p(t,e){e===void 0&&(e=0);var n=cr(t)?t:su(t);return n.map(function(r){var i=iW(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Ns(e)?pv(pv({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=xd(s).map(function(z,K){return K===0&&"x%"in f?f["%"]=e["x%"]:K===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],en(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=ak,u=[g,b,w]}else if(a==="translateY"){var S=Ns(e)?pv({"%":e["y%"]},e):{"%":e},b=en(s,S);o=ak,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=ak,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var A=xd(s).map(function(z){return parseFloat(z)}),I=A[0],N=A[1],O=N===void 0?I:N,D=A[2],P=D===void 0?1:D;o=ux,u=[I,O,P]}else if(a==="scaleX"){var I=parseFloat(s);o=ux,u=[I,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=ux,u=[1,O,1]}else if(a==="scaleZ"){var P=parseFloat(s);o=ux,u=[1,1,P]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=B0(s),R=C.unit,M=C.value,V=R==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=uxe):a==="rotateX"?o=lxe:a==="rotateY"&&(o=cxe),u=V}else if(a==="matrix3d")o=uB,u=xd(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var L=xd(s).map(function(z){return parseFloat(z)});o=uB,u=[L[0],L[1],0,0,L[2],L[3],0,0,0,0,1,0,L[4],L[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var xP=function(t,e){return xP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},xP(t,e)};function hxe(t,e){xP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RW=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),MW=(function(t){hxe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,RW)||this}return e})(Obe);function pxe(t,e){return F0(t,e,RW)}var wP=function(){return wP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wP.apply(this,arguments)};function gxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var c_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Ns(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Ns(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=kl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,gxe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(wP({listener:r},i))},t})();var SP=function(t,e){return SP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},SP(t,e)};function mxe(t,e){SP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mh=function(){return Mh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mh.apply(this,arguments)};function vxe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function dB(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function dx(t){if(t){if(Hi(t))return document.querySelector(t)}else return null;if(JO(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var yxe=(function(t){mxe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=dx(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Mh(Mh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?vxe:s;return o({container:dx(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Kv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:dx(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Mh(Mh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?dB:i,s=dx(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=dB(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(c_);function bxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function ji(t){return ot(t,ir)}function xxe(t,e){return t.every(function(n,r){return ji(n-e[r])===0})}function wxe(t,e){return!ji(t[0]-e[0])&&!ji(t[1]-e[1])}function jW(t){return t.length<3?0:Math.abs(_be(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function fB(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Wd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Wd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function _P(t,e,n){var r=t[0],i=t[1],a=Wd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=h1(c[0],c[1]),f=EP(e),h=[];if(f.forEach(function(b){var x=h1(b[0],b[1]),w=b[0];if(xxe(u,x))h.push({pos:t,line:b,type:"line"});else{var S=zW(dD(u,x),[c,b]);S.forEach(function(A){b.some(function(I){return wxe(I,A)})?h.push({pos:A,line:b,type:"point"}):ji(w[1]-i)!==0&&h.push({pos:A,line:b,type:"intersection"})})}}),Ki(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var A=Ki(S,function(O){return O[1]!==i}),I=v[x[0]],N=A[1]>i?1:-1;I?I!==N&&++g:v[x[0]]=N}}}),g%2===1}function h1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ir&&(s=0),Math.abs(o)<ir&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function dD(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function zW(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(ji(a-t[1][0])){if(!ji(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(ji(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(ji(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=ji(g-b[0][0])&&0<=ji(b[0][1]-g)&&0<=ji(v-b[1][0])&&0<=ji(b[1][1]-v)})})),r.map(function(h){return[ji(h[0]),ji(h[1])]})}function EP(t){return bxe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Sxe(t,e){var n=t.slice(),r=e.slice();nB(n)===-1&&n.reverse(),nB(r)===-1&&r.reverse();var i=EP(n),a=EP(r),s=i.map(function(f){return h1(f[0],f[1])}),o=a.map(function(f){return h1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=dD(f,b),S=zW(w,[g,a[x]]);v.push.apply(v,S.map(function(A){return{index1:h,index2:x,pos:A,type:"intersection"}}))}),v.sort(function(b,x){return ml(g[0],b.pos)-ml(g[0],x.pos)}),c.push.apply(c,v),_P(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(_P(f[1],n)){var g=!1,v=kl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=kl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function _xe(t,e){var n=Sxe(t,e);return n.map(function(r){var i=r.pos;return i})}function Exe(t,e){var n=_xe(t,e);return jW(n)}var TP=function(t,e){return TP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},TP(t,e)};function Txe(t,e){TP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tr.apply(this,arguments)};function Axe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function sk(t){return Axe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function kxe(t){return t.touches&&t.touches.length>=2}function fx(t){return t?t.touches?Ixe(t.touches):[LW(t)]:[]}function Cxe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function hB(t,e,n){var r=n.length,i=gv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=gv(e,r),f=u.clientX,h=u.clientY,g=gv(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-v,A=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:A}}function ok(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ixe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(LW(t[r]));return n}function LW(t){return{clientX:t.clientX,clientY:t.clientY}}function gv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var lk=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),sk(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),sk(e)-sk(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=hB(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=hB([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=gv(e,this.length),i=gv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ok(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ok(e)/ok(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),pB=["textarea","input"],Pxe=(function(t){Txe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,A=x.preventWheelClick,I=x.preventRightClick,N=x.preventDefault,O=x.checkInput,D=x.dragFocusedInput,P=x.preventClickEventOnDragStart,C=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,M=i._useTouch,V=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,A&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(V){var L=i._window.document.activeElement,z=g.target;if(z){var K=z.tagName.toLowerCase(),Y=pB.indexOf(K)>-1,G=z.isContentEditable;if(Y||G){if(O||!D&&L===z)return!1;if(L&&(L===z||G&&L.isContentEditable&&L.contains(z)))if(D)z.blur();else return!1}else if((N||g.type==="touchstart")&&L){var X=L.tagName.toLowerCase();(L.isContentEditable||pB.indexOf(X)>-1)&&L.blur()}(P||C||R)&&Gr(i._window,"click",i._onClick,!0)}i.clientStores=[new lk(fx(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Kv()-i.prevTime<200,i._isMouseEvent=Cxe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",tr(tr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&g.preventDefault()}if(!i.flag)return!1;var ee=0;if(V?(i._attchDragEvent(),M&&S&&(ee=setTimeout(function(){Gr(w,"touchstart",i.onDragStart,{passive:!1})}))):M&&S&&fr(w,"touchstart",i.onDragStart),i.flag&&kxe(g)){if(clearTimeout(ee),V&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=fx(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",tr(tr({},w),{isScroll:!!v,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,S=v.preventClickEventOnDragStart,A=v.preventClickEventByCondition,I=i.isDrag;(w||S||A)&&requestAnimationFrame(function(){i._allowClickEvent()}),!A&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&fr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var N=g?.touches?fx(g):[],O=N.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new lk(N));var D=i._getPosition(),P=Kv(),C=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||C?0:P,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",tr({data:i.data,datas:i.data,isDouble:C,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},D)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){fr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=dW(s)?s:Yc(s),i.options=tr({checkInput:!1,container:s&&!("document"in s)?Yc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Gr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Gr(g,"mousedown",i.onDragStart),Gr(g,"mousemove",i._passCallback)}),Gr(c,"contextmenu",i._onContextMenu)),f&&Gr(Yc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Gr(g,"touchstart",i.onDragStart,h),Gr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),tr(tr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),fr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){fr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){fr(a,"mousedown",n.onDragStart)}),fr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){fr(a,"touchstart",n.onDragStart)}),fr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new lk(fx(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",tr(tr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",tr(tr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",tr(tr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),tr(tr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return tr(tr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Gr(r,"dragover",this.onDrag,i),Gr(n,"dragend",this.onDragEnd)),this._useMouse&&(Gr(r,"mousemove",this.onDrag),Gr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Gr(r,"touchmove",this.onDrag,i),Gr(n,"touchend",this.onDragEnd,i),Gr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(fr(r,"dragover",this.onDrag),fr(n,"dragend",this.onDragEnd)),this._useMouse&&(fr(r,"mousemove",this.onDrag),fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(fr(r,"touchstart",this.onDragStart),fr(r,"touchmove",this.onDrag),fr(n,"touchend",this.onDragEnd),fr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(c_);function Nxe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Oxe=Nxe;function Dxe(t){return Oxe(t).toString(36)}function Rxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Mxe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?xd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function jxe(t,e,n,r,i){var a=tg(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Mxe(t,e,n),(i||a.head||a.body).appendChild(s),s}function zxe(t){var e="rCS"+Dxe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=Rxe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=jxe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var AP=function(){return AP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},AP.apply(this,arguments)};function Lxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function VW(t,e){var n=zxe(e),r=n.className;return jbe(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Lxe(i,["className","cspNonce"]),u=Ybe();return Xbe(a,function(){return u.current},[]),SW(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),As(t,AP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var kP=function(t,e){return kP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},kP(t,e)};function H0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");kP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)};function Vxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Bxe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Fxe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Re(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function K0(t,e){return ae({events:[],props:[],name:t},e)}var Uxe=["n","w","s","e"],fD=["n","w","s","e","nw","ne","sw","se"];function $xe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function qxe(t){var e=$xe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var rg=txe(),BW=rg.browser.webkit,FW=BW&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),UW=rg.browser.name,$W=parseInt(rg.browser.version,10),Gxe=UW==="chrome",Hxe=rg.browser.chromium,Kxe=parseInt(rg.browser.chromiumVersion,10)||0,Wxe=Gxe&&$W>=109||Hxe&&Kxe>=109,Yxe=UW==="firefox",Xxe=parseInt(rg.browser.webkitVersion,10)>=612||$W>=15,hD="moveable-",Qxe=fD.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),Zxe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Qxe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(qxe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(FW?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Jxe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],CP=1e-4,Ei=1e-7,hx=1e-9,IP=Math.pow(10,10),gB=-IP,ewe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},pD={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},qW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},GW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function W0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ae(ae({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var Ep=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ae(ae({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Yh(t,e,n,r){var i=t.length===16,a=i?4:3,s=hf(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),A=S[0],I=S[1],N=le(Tn(t,e,a),2),O=N[0],D=N[1],P=Math.min(u,g,x,A),C=Math.min(f,v,w,I),R=Math.max(u,g,x,A),M=Math.max(f,v,w,I);u=u-P||0,g=g-P||0,x=x-P||0,A=A-P||0,f=f-C||0,v=v-C||0,w=w-C||0,I=I-C||0,O=O-P||0,D=D-C||0;var V=t[0],L=t[a+1],z=vi(V*L);return{left:P,top:C,right:R,bottom:M,origin:[O,D],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[A,I],direction:z}}function HW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(tt(kp(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(jo({datas:i,distX:b,distY:x}),2),S=w[0],A=w[1];return[S,A]}function ff(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=Po(i,v),n.inverseBeforeMatrix=Po(a,v),n.absoluteOrigin=Hd(Pt([o,c],u),v),n.startDragBeforeDist=ci(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=ci(n.inverseMatrix,n.absoluteOrigin,v)}function twe(t){return Yh(t.datas.beforeTransform,[50,50],100,100).direction}function u_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=kl(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Ki(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=k1e(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Re(Re([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function d_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function nwe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(WW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=KW(e,sxe([a,s],4));return ci(o,Hd([0,0,0],4),4)}function KW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?tn(o,e,4):tn(e,o,4),u=tn(Po(n?a:r,4),c,4),f=tn(u,Po(n?s:i,4),4);return f}function WW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return tt(ci(i,Pt(o,[n,r]),c),s)}function jo(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return tt(ci(e?a:s,Pt(f,[r,i]),h),e?c:u)}function rwe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return tt(ci(a,Pt(o,[r,i]),u),c)}function iwe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=B0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function YW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function awe(t,e){return YW(e).map(function(n){return t[n]})}function ck(t,e){var n=(e+1)/2;return[u1(t[0][0],t[1][0],n,1-n),u1(t[0][1],t[1][1],n,1-n)]}function vr(t,e){var n=ck([t[0],t[1]],e[0]),r=ck([t[2],t[3]],e[0]);return ck([n,r],e[1])}function swe(t,e,n,r,i,a){var s=hf(e,n,r,i),o=vr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function Y0(t,e,n,r){return tn(t,vv(e,r,n),r)}function owe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Hi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Os(Yv(n),4,o):c=Os(tn(tn(u,Yv([n]),4),f,4),4,o)}else c=n;return Y0(a,c,i,o)}function lwe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return Y0(r,tn(s||a,cD(e,o),o),n,o)}function f_(t,e){var n=ig(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=cr(r)?r:su(r),PP(t,e,i)},setTransformIndex:function(r){PP(t,e,r)}}}function h_(t,e,n){var r=ig(e),i=r.startTransforms;PP(t,e,kl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function PP(t,e,n){var r=ig(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=_p([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function gD(t,e){var n=ig(t);n.nextTransforms=su(e)}function ig(t){return t.originalDatas.beforeRenderable}function p1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function px(t){return(p1(t)||[]).join(" ")}function gx(t){return ig(t).nextStyle}function XW(t,e,n,r,i){gD(i,e);var a=mi.drag(t,W0(i,t.state,n,r)),s=a?a.transform:e;return ae(ae({transform:e,drag:a},wi({transform:s},i)),{afterTransform:s})}function mD(t,e,n,r,i,a){var s=owe(t.state,i,e,a),o=dwe(t,n,r,s);return o}function QW(t,e,n,r,i,a,s){var o=mD(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=tt(r,o);return tt(b,[g,v])}function cwe(t,e,n,r,i,a,s){var o=QW(t,e,n,r,i,a,s);return o}function uwe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function dwe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Tn(r,u,c)}function fwe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return QW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function hwe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,A=iwe(i,e,n,h,g,c),I=s?v:0,N=s?b:0,O=Y0(u,w,A,S),D=swe(r,O,e,n,S,x);return tt(D,[I,N])}function pwe(t,e){return vr(Ha(t.state),e)}function gwe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function mwe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function vwe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function ZW(t,e,n){for(var r=t,i=[],a=nD(t)||yu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=Qv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Wi(r),S=w("position"),A=SY(r),I=S==="fixed",N=vwe(w),O=oxe(p1e(A)),D=void 0,P=!1,C=!1,R=0,M=0,V=0,L=0,z={hasTransform:!1,fixedContainer:null};I&&(v=!0,z=b1e(r),b=z.fixedContainer);var K=O.length;!c&&(K===16||N.length)&&(c=!0,u=4,jP(i),g&&(g=Os(g,3,4))),c&&K===9&&(O=Os(O,3,4));var Y=y1e(r,t),G=Y.tagName,X=Y.hasOffset,J=Y.isSVG,ee=Y.origin,Q=Y.targetOrigin,U=Y.offset,Z=le(U,2),te=Z[0],W=Z[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:x1e(r,u)}),i.push({type:"offset",target:r,matrix:pn(u)}));var ue=parseFloat(w("zoom"))||1;if(I)D=z.fixedContainer,P=!0;else{var ie=Qv(r,e,!1,!0,w),oe=ie.offsetZoom;if(D=ie.offsetParent,P=ie.isEnd,C=ie.isStatic,x*=oe,(ie.isCustomElement||oe!==1)&&C)te-=D.offsetLeft,W-=D.offsetTop;else if(Yxe||Wxe){var Se=ie.parentSlotElement;if(Se){for(var se=D,Ae=0,ve=0;se&&mwe(se);)Ae+=se.offsetLeft,ve+=se.offsetTop,se=se.offsetParent;te-=Ae,W-=ve}}}if(BW&&!Xxe&&X&&!J&&C&&(S==="relative"||S==="static")&&(te-=D.offsetLeft,W-=D.offsetTop,s=s||P),I)X&&z.hasTransform&&(V=D.clientLeft,L=D.clientTop);else if(X&&b!==D&&(R=D.clientLeft,M=D.clientTop),X&&D===a){var ne=_Y(r,!1);te+=ne[0],W+=ne[1]}if(i.push({type:"target",target:r,matrix:vv(O,u,ee)}),N.length&&(i.push({type:"offset",target:r,matrix:pn(u)}),i.push({type:"target",target:r,matrix:vv(Yv(N),u,ee)})),X){var Pe=r===t,be=Pe?0:r.scrollLeft,_e=Pe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Kd([te-be+R-V,W-_e+M-L],u)})}else i.push({type:"offset",target:r,origin:ee});if(ue!==1&&i.push({type:"zoom",target:r,matrix:vv(cD([ue,ue],u),u,[0,0])}),g||(g=O),f||(f=ee),h||(h=Q),o||I)break;r=D,s=P,(!n||r===a)&&(o=s)}return g||(g=pn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var hd=null,pd=null,jh=null;function Tp(t){t?(window.Map&&(hd=new Map,pd=new Map),jh=[]):(hd=null,jh=null,pd=null)}function ywe(t){var e=pd?.get(t);if(e)return e;var n=yv(t,!0);return pd&&pd.set(t,n),n}function bwe(t,e){if(jh){var n=Ki(jh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=ZW(t,e,!0);return jh&&jh.push([[t,e],r]),r}function Wi(t){var e=hd?.get(t);if(!e){var n=Yc(t).getComputedStyle(t);if(!hd)return function(a){return n[a]};e={style:n,cached:{}},hd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function ks(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ae(ae({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function uk(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=ks(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var S=g[w],A=S.state,I=A.gestos,N=x;if(o)N=new Ep(s).dragStart(r,x),v.push(N);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;N=W0(x,A,r,u,a,s),v.push(N)}var O=e[n](S,ae(ae({},N),{parentFlag:!0}));return c&&(I[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function vl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=ks(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,ae(ae({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function g1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Ha(e.state),o=vr(s,i),c=le(ci(G0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function JW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Yd(t.props,e).zoom,u=mv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=vi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,A=pD[S];if(!A||!f[S])return null;g[S]=!0;var I=(ot(u,15)+v*qW[S]+720)%180,N={};return Cl(x).forEach(function(O){N["data-".concat(O)]=x[O]}),r.createElement("div",ae({className:Ze.apply(void 0,Re(["control","direction",S,e],le(w),!1)),"data-rotation":I,"data-direction":S},N,{key:"direction-".concat(S),style:b1.apply(void 0,Re([s,c],le(A.map(function(O){return a[O]})),!1))}))})}function eY(t,e,n,r){var i=Yd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?fD:s;return Re(Re([],le(o?iY(t,r,n,c):[]),!1),le(JW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Xv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Kn(n,r),u=e?ot(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ze.apply(void 0,Re(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Wm(n,r,i,c)})}function tY(t,e,n,r,i){var a=n===!0?Uxe:n;return a.map(function(s,o){var c=le(pD[s],2),u=c[0],f=c[1];if(f!=null)return Xv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function nY(t){return function(e,n){var r=Yd(e.props,t).edge;return r&&(r===!0||r.length)?Re(Re([],le(tY(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(xwe(e,t,n)),!1):rY(e,t,n)}}function rY(t,e,n){return eY(t,fD,e,n)}function xwe(t,e,n){return eY(t,["nw","ne","sw","se"],e,n)}function iY(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=vi(c),g=o/Math.PI*180;return(r||Cl(u)).map(function(v){var b=pD[v];if(!b)return null;var x=(ot(g,15)+h*qW[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Ze.apply(void 0,Re([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:b1.apply(void 0,Re([o,f],le(b.map(function(S){return s[S]})),!1))})})}function vD(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:mB(b,e,!0),horizontal:mB(b,n,!1)}}function p_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,S=w===void 0?-1/0:w,A=v.top,I=A===void 0?-1/0:A,N=v.right,O=N===void 0?x?-1/0:1/0:N,D=v.bottom,P=D===void 0?x?-1/0:1/0:D;return x&&(O=a+h-u-O,P=i+g-f-P),{left:S+u-s,right:O+u-s,top:I+f-o,bottom:P+f-o}}function wwe(t,e,n){var r=p_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(tt(n,e),2),g=h[0],v=h[1];Ie(g)<Ei&&(g=0),Ie(v)<Ei&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var A=v/g,I=n[1]-A*u,N=0,O=0,D=!1;x&&s<=u?(N=A*s+I,O=s,D=!0):!x&&u<=i&&(N=A*i+I,O=i,D=!0),D&&(N<a||N>o)&&(D=!1),D||(b&&o<=f?(N=o,O=(N-I)/A,D=!0):!b&&f<=a&&(N=a,O=(N-I)/A,D=!0)),D&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=N,S.offset=f-N)}return{vertical:w,horizontal:S}}function mB(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ie(u.offset)-Ie(c.offset)})}function vB(t,e,n){var r=n?t.map(function(i){return q0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ie(i[0]-e.left)>.1||i[0]>e.right&&Ie(i[0]-e.right)>.1||i[1]<e.top&&Ie(i[1]-e.top)>.1||i[1]>e.bottom&&Ie(i[1]-e.bottom)>.1})}function Swe(t,e,n){var r=Ga(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ie(a-t[n?0:1])-Ie(s-t[n?0:1])}).map(function(a){return Kn([0,0],n?[a,e]:[e,a])})}function _we(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=p_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!vB(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(S){var A=le(S,2),I=A[0],N=A[1];n.forEach(function(O){var D=Kn([0,0],O);w.push.apply(w,Re([],le(Swe(O,I,N).map(function(P){return a+P-D}).filter(function(P){return!vB(e,x,P)}).map(function(P){return ot(P*180/Math.PI,Ei)})),!1))})}),w}var Ewe=["left","right","center"],Twe=["top","bottom","middle"],yB={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},ou={start:"left",end:"right",center:"center"},lu={start:"top",end:"bottom",center:"middle"};function zh(){return{left:!1,top:!1,right:!1,bottom:!1}}function ag(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function yD(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Awe(t,e){var n=yD(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function bD(t,e){var n=Awe(t,e),r=Twe.filter(function(a){return a in n}),i=Ewe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function kwe(t,e,n){var r=Tn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Cwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ir&&(i=0),Math.abs(a)<ir&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ot(u,ir)})}var aY="snapRotationThreshold",sY="snapRotationDegrees",oY="snapHorizontalThreshold",lY="snapVerticalThreshold";function g_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=DB(s,c[oY],5),h=DB(a,c[lY],5);return cY(t.state.guidelines,e,n,r,i,f,h,u)}function cY(t,e,n,r,i,a,s,o){return{vertical:xB(t,"vertical",e,s*o[0],r),horizontal:xB(t,"horizontal",n,a*o[1],i)}}function Iwe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(tt(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=x1(f),h=x1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=g_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,A=w.horizontal;S.posInfos.filter(function(G){var X=G.pos;return v?X>=o:X<=o}),A.posInfos.filter(function(G){var X=G.pos;return g?X>=c:X<=c}),S.isSnap=S.posInfos.length>0,A.isSnap=A.posInfos.length>0;var I=NP(S),N=I.isSnap,O=I.guideline,D=NP(A),P=D.isSnap,C=D.guideline,R=P?C.pos[1]:0,M=N?O.pos[0]:0;if(f===0)P&&(x.isSnap=!0,x.pos=C.pos[1],x.offset=a-x.pos);else if(h===0)N&&(b.isSnap=!0,b.pos=M,b.offset=i-M);else{var V=h/f,L=n[1]-V*i,z=0,K=0,Y=!1;N?(K=M,z=V*K+L,Y=!0):P&&(z=R,K=(z-L)/V,Y=!0),Y&&(b.isSnap=!0,b.pos=K,b.offset=i-K,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function Bc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function bB(t,e,n,r){var i=bD(t.props.snapDirections,e),a=g_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Bc(c)}),i.horizontalNames.map(function(c){return Bc(c)}),n,r),s=Bc(i.horizontalNames[a.horizontal.index]),o=Bc(i.verticalNames[a.vertical.index]);return{vertical:ae(ae({},a.vertical),{direction:o}),horizontal:ae(ae({},a.horizontal),{direction:s})}}function NP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function xB(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ie(S),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,S=x.dist,A=w.type;return!(A!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Pwe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Re([],le(awe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return vr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=g_(t,o,c,a.map(function(g){return Bc(g[0])}),a.map(function(g){return Bc(g[1])}),r,i),f=Bc(a.map(function(g){return g[0]})[u.vertical.index]),h=Bc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ae(ae({},u.vertical),{direction:f}),horizontal:ae(ae({},u.horizontal),{direction:h})}}function uY(t,e){var n=Ie(t.offset),r=Ie(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ei?1:r<Ei?-1:n-r}function m1(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return uY({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function Nwe(t,e,n){var r=[];if(n)Ie(e[0])!==1||Ie(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ie(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ie(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function dY(t,e){var n=mP([e[0][0],e[1][0]]),r=mP([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function xD(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ie(a)<Ei&&(a=0),Ie(s)<Ei&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function fY(t,e,n,r){return r===void 0&&(r=Ei),t.every(function(i){var a=xD(i,e),s=a<=0;return s===n||Ie(a)<=r})}function wB(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Owe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(fY([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Fc(n,s,v,i),S=Fc(n,s,x,i),A=Fc(n,s,g,a),I=Fc(n,s,b,a),N=w.isBound&&S.isBound,O=w.isBound||S.isBound,D=A.isBound&&I.isBound,P=A.isBound||I.isBound,C=Ap(w.offset,S.offset),R=Ap(A.offset,I.offset),M=[0,0],V=!1,L=!1;return Ie(R)<Ie(C)?(M=[C,0],V=O,L=N):(M=[0,R],V=P,L=D),{isAllBound:L,isVerticalBound:O,isHorizontalBound:P,isBound:V,offset:M}}function Fc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=x1(h[1]-f[1]),v=x1(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var N=(f[1]-u[1])/w+u[0];return wB(N,f[0],h[0],r,i)}else{var A=f[1]-u[1],I=Ie(A)<=(i||0);return{isBound:I,offset:I?A:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return wB(S,f[1],h[1],r,i)}else{var A=f[0]-u[0],I=Ie(A)<=(i||0);return{isBound:I,offset:I?A:0}}}return{isBound:!1,offset:0}}function hY(t,e,n){return e.map(function(r){var i=Owe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=jo({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function Dwe(t,e,n){var r,i=wD(t,e,[0,0],!1).map(function(g){return ae(ae({},g),{multiple:g.multiple.map(function(v){return Ie(v)*2})})}),a=hY(t,i,n),s=m1(a,0),o=m1(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(rwe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function Rwe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function wD(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=hf(a,100,100,s?4:3),c=vr(o,[0,0]);return Rwe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[vr(o,g),vr(o,v)],x=Cwe(b),w=dY(c,b),S=w.vertical,A=w.horizontal,I=xD(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:A,lineConstants:x,line:[vr(e,g),vr(e,v)]}})}function SB(t,e,n,r){var i=r?t.map(function(a){return q0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=xD(n,a)<=0;return!fY(e,a,s)})}function Mwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ie(n[0]);if(!a)return Ie(n[1]);var s=a/i;return Ie((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function jwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function zwe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=vr(n,[0,0]);if(!SB(n,x,w,0))return[];var S=[],A=x.map(function(I){return[Ga(I),Kn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var N=Kn([0,0],jwe(I)),O=Mwe(I);S.push.apply(S,Re([],le(A.filter(function(D){var P=le(D,1),C=P[0];return C&&O<=C}).map(function(D){var P=le(D,2),C=P[0],R=P[1],M=Math.acos(C?O/C:0),V=R+M,L=R-M;return[s+V-N,s+L-N]}).reduce(function(D,P){return D.push.apply(D,Re([],le(P),!1)),D},[]).filter(function(D){return!SB(e,x,w,D)}).map(function(D){return ot(D*180/Math.PI,Ei)})),!1))}),S}function Lwe(t){var e=t.props.innerBounds,n=zh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=vr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],S=[[f,h+v],[f+g,h+v]],A=wD(t,c,[0,0],!1),I=[],N=[];return A.forEach(function(O){var D=O.line,P=O.lineConstants,C=dY(u,D),R=C.horizontal,M=C.vertical,V=Fc(D,P,x,M,1,!0),L=Fc(D,P,S,M,1,!0),z=Fc(D,P,b,R,1,!0),K=Fc(D,P,w,R,1,!0);V.isBound&&!n.top&&(I.push(h),n.top=!0),L.isBound&&!n.bottom&&(I.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(N.push(f),n.left=!0),K.isBound&&!n.right&&(N.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:N}}function Vwe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ie(i)<ir&&(i=0),Ie(a)<ir&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function OP(t,e,n,r,i){var a=Vwe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=ml(t,e),o=ml(a,t),c=ml(a,e),u=o>s||c>s,f=le(jo({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function v1(t,e){return t.isBound?t.offset:e.isSnap?NP(e).offset:0}function Bwe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,A=-w;if(t&&s&&o){S=0,A=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&v?I.push([0,w],[x,0]):g?I.push([x,0]):v&&I.push([0,w]),I.length){I.sort(function(P,C){return Ga(tt([s,o],P))-Ga(tt([s,o],C))});var N=I[0];if(N[0]&&Ie(s)>ir)S=-N[0],A=o*Ie(s+S)/Ie(s)-o;else if(N[1]&&Ie(o)>ir){var O=o;A=-N[1],S=s*Ie(o+A)/Ie(O)-s}if(t&&f&&u)if(Ie(S)>ir&&Ie(S)<Ie(x)){var D=Ie(x)/Ie(S);S*=D,A*=D}else if(Ie(A)>ir&&Ie(A)<Ie(w)){var D=Ie(w)/Ie(A);S*=D,A*=D}else S=Ap(-x,S),A=Ap(-w,A)}}else S=s||u?-x:0,A=o||f?-w:0;return[S,A]}function Fwe(t,e,n,r,i,a){if(!ag(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=ED(a.absolutePoses,[e,n]),o=$a(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(K){return K[1]}),vertical:s.map(function(K){return K[0]})},v=yD(t.props.snapDirections),b=bD(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=m_(t,i,b,g),w=x.vertical,S=x.horizontal,A=Dwe(t,s,a),I=A.vertical,N=A.horizontal,O=w.isSnap,D=S.isSnap,P=w.isBound||I.isBound,C=S.isBound||N.isBound,R=Ap(w.offset,I.offset),M=Ap(S.offset,N.offset),V=le(Bwe(r,[e,n],[P,C],[O,D],[R,M]),2),L=V[0],z=V[1];return[{isBound:P,isSnap:O,offset:L},{isBound:C,isSnap:D,offset:z}]}function m_(t,e,n,r){r===void 0&&(r=n);var i=vD(p_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:g_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=v1(a[0],c),h=v1(s[0],u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function _B(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=vD(e,n,r),c=o.horizontal,u=o.vertical,f=cY(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=v1(c[0],h),b=v1(u[0],g),x=Ie(v),w=Ie(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function Uwe(t,e,n,r){var i=Kn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function $we(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=vr(e,c),h=vr(e,u),g=r?qwe(t,f,h,i):m_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,S=g.vertical,A=S.offset,I=S.isBound,N=S.isSnap,O=tt(u,c);if(!A&&!b)return{isBound:I||x,isSnap:N||w,sign:O,offset:[0,0]};var D=Uwe(f,h,g,r);if(!D)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var P=D==="vertical",C=[0,0];return!r&&Ie(u[0])===1&&Ie(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?C=jo({datas:a,distX:-A,distY:-b}):C=OP(f,h,-(P?A:b),P,a).offset,C=C.map(function(R,M){return R*(O[M]?2/O[M]:0)}),{sign:O,isBound:P?I:x,isSnap:P?N:w,offset:C}})}function EB(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function qwe(t,e,n,r){var i=wwe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Iwe(t,e,n),c=o.horizontal,u=o.vertical,f=EB(a,c),h=EB(s,u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function Gwe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,S=u.right,A=S===void 0?1/0:S,I=u.bottom,N=I===void 0?1/0:I;g.forEach(function(O){var D=O[0]!==a[0],P=O[1]!==a[1],C=vr(e,O),R=Kn(r,C)*360/Math.PI;if(P){var M=C.slice();(Ie(R-360)<2||Ie(R-180)<2)&&(M[1]=r[1]);var V=OP(r,M,(r[1]<C[1]?N:w)-C[1],!1,i),L=le(V.offset,2),z=L[1],K=V.isOutside;isNaN(z)||(h=c+(K?1:-1)*Ie(z))}if(D){var M=C.slice();(Ie(R-90)<2||Ie(R-270)<2)&&(M[0]=r[0]);var Y=OP(r,M,(r[0]<C[0]?A:b)-C[0],!0,i),G=le(Y.offset,1),X=G[0],J=Y.isOutside;isNaN(X)||(f=o+(J?1:-1)*Ie(X))}})}return{maxWidth:f,maxHeight:h}}var mi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ga(u),h=Kn(u,[0,0]);return[e.createElement("div",{className:Ze("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],ff(t,e),h_(t,e,"translate"),u1e(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=dt(t,e,ae({set:function(f){n.startValue=f}},f_(t,e))),u=r||Be(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){u_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var S=t.props,A=S.parentMoveable,I=u?0:S.throttleDrag||f||0,N=r?0:S.throttleDragRotate||0,O=0,D=!1,P=!1,C=!1,R=!1;if(!r&&N>0&&(h||g)){var M=S.startDragRotate||0,V=ot(M+Kn([0,0],[h,g])*180/Math.PI,N)-M,L=g*Math.abs(Math.cos((V-90)/180*Math.PI)),z=h*Math.abs(Math.cos(V/180*Math.PI)),K=Ga([z,L]);O=V*Math.PI/180,h=K*Math.cos(O),g=K*Math.sin(O)}if(!a&&!r&&!i){var Y=le(Fwe(t,h,g,N,!o&&c||s,n),2),G=Y[0],X=Y[1];D=G.isSnap,P=G.isBound,C=X.isSnap,R=X.isBound;var J=G.offset,ee=X.offset;h+=J,g+=ee}var Q=Pt(WW({datas:n,distX:h,distY:g}),w),U=Pt(nwe({datas:n,distX:h,distY:g}),w);rB(U,Ei),rB(Q,Ei),N||(!D&&!P&&(U[0]=ot(U[0],I),Q[0]=ot(Q[0],I)),!C&&!R&&(U[1]=ot(U[1],I),Q[1]=ot(Q[1],I)));var Z=tt(Q,w),te=tt(U,w),W=tt(te,b),ue=tt(Z,x);n.prevDist=te,n.prevBeforeDist=Z,n.passDelta=W,n.passDist=te;var ie=n.left+Z[0],oe=n.top+Z[1],Se=n.right-Z[0],se=n.bottom-Z[1],Ae=d_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(gD(e,Ae),t.state.dragInfo.dist=r?[0,0]:te,!(!r&&!A&&W.every(function(_e){return!_e})&&ue.some(function(_e){return!_e}))){var ve=t.state,ne=ve.width,Pe=ve.height,be=dt(t,e,ae({transform:Ae,dist:te,delta:W,translate:U,beforeDist:Z,beforeDelta:ue,beforeTranslate:Q,left:ie,top:oe,right:Se,bottom:se,width:ne,height:Pe,isPinch:a},wi({transform:Ae},e)));return!r&&Be(t,"onDrag",be),be}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ae(ae({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=va(t,e,{});return!n&&Be(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=uk(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ae(ae({},o),{targets:t.props.targets,events:f}),g=Be(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ae(ae({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=uk(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ae({targets:t.props.targets,events:a},r);return Be(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=uk(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Be(t,"onDragGroupEnd",va(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function pY(t,e){var n=vr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Hwe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=Tn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function gY(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=uwe(e,i,a),c=Tn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var TB=kD("resizable"),DP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:nY("resizable"),dragControlCondition:TB,viewClassName:AD("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=CY(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&ff(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Hi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function A(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Ha(t.state);function I(R){var M=pY(c.startPositions,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function N(R){var M=gY(t.state,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function O(R){c.minSize=[en("".concat(R[0]),0)||0,en("".concat(R[1]),0)||0]}function D(R){var M=[R[0]||1/0,R[1]||1/0];(!Sp(M[0])||isFinite(M[0]))&&(M[0]=en("".concat(M[0]),0)||1/0),(!Sp(M[1])||isFinite(M[1]))&&(M[1]=en("".concat(M[1]),0)||1/0),c.maxSize=M}A(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=N,c.setMin=O,c.setMax=D;var P=dt(t,e,{direction:h,startRatio:c.ratio,set:function(R){var M=le(R,2),V=M[0],L=M[1];c.startWidth=V,c.startHeight=L},setMin:O,setMax:D,setRatio:A,setFixedDirection:I,setFixedPosition:N,setOrigin:function(R){c.transformOrigin=R},dragStart:mi.dragStart(t,new Ep().dragStart([0,0],e))}),C=f||Be(t,"onResizeStart",P);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,C!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?P:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,A=r.prevWidth,I=r.prevHeight,N=r.minSize,O=r.maxSize,D=r.ratio,P=r.startOffsetWidth,C=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var M=t.state.is3d,V=r.startOffsetMatrix,L=r.startTransformOrigin,z=M?4:3,K=Yv(p1(e)),Y=Math.sqrt(K.length);z!==Y&&(K=Os(K,Y,z));var G=Y0(V,K,L,z),X=hf(G,P,C,z);r.startPositions=X,r.nextTargetMatrix=K,r.nextAllMatrix=G}var J=Yd(t.props,"resizable"),ee=J.resizeFormat,Q=J.throttleResize,U=Q===void 0?i?0:1:Q,Z=J.parentMoveable,te=J.keepRatioFinally,W=r.direction,ue=W,ie=0,oe=0;!W[0]&&!W[1]&&(ue=[1,1]);var Se=D&&(s??J.keepRatio)||!1;function se(){var yt=r.fixedDirection,Ft=RY(ue,Se,r,e);ie=Ft.distWidth,oe=Ft.distHeight;var Qr=ue[0]-yt[0]||Se?Math.max(P+ie,Ei):P,ze=ue[1]-yt[1]||Se?Math.max(C+oe,Ei):C;return Se&&P&&C&&(R?ze=Qr/D:Qr=ze*D),[Qr,ze]}var Ae=le(se(),2),ve=Ae[0],ne=Ae[1];g||(r.setFixedDirection(r.fixedDirection),Be(t,"onBeforeResize",dt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(yt){var Ft;return r.setFixedDirection(yt),Ft=le(se(),2),ve=Ft[0],ne=Ft[1],[ve,ne]},setFixedPosition:function(yt){var Ft;return r.setFixedPosition(yt),Ft=le(se(),2),ve=Ft[0],ne=Ft[1],[ve,ne]},boundingWidth:ve,boundingHeight:ne,setSize:function(yt){var Ft;Ft=le(yt,2),ve=Ft[0],ne=Ft[1]}},!0)));var Pe=o;o||(!i&&a?Pe=pwe(t,[0,0]):Pe=r.fixedPosition);var be=[0,0];a||(be=l1e(t,ve,ne,W,Pe,!u&&f,r)),c&&(!c[0]&&(be[0]=0),!c[1]&&(be[1]=0));function _e(){var yt;ee&&(yt=le(ee([ve,ne]),2),ve=yt[0],ne=yt[1]),ve=ot(ve,U),ne=ot(ne,U)}if(Se){ue[0]&&ue[1]&&be[0]&&be[1]&&(Ie(be[0])>Ie(be[1])?be[1]=0:be[0]=0);var Oe=!be[0]&&!be[1];Oe&&_e(),ue[0]&&!ue[1]||be[0]&&!be[1]||Oe&&R?(ve+=be[0],ne=ve/D):(!ue[0]&&ue[1]||!be[0]&&be[1]||Oe&&!R)&&(ne+=be[1],ve=ne*D)}else ve+=be[0],ne+=be[1],ve=Math.max(0,ve),ne=Math.max(0,ne);n=le(sW([ve,ne],N,O,Se?D:!1),2),ve=n[0],ne=n[1],_e(),Se&&(h||te)&&(R?ne=ve/D:ve=ne*D),ie=ve-P,oe=ne-C;var De=[ie-A,oe-I];r.prevWidth=ie,r.prevHeight=oe;var Ye=hwe(t,ve,ne,Pe,x,r);if(!(!Z&&De.every(function(yt){return!yt})&&Ye.every(function(yt){return!yt}))){var Ve=mi.drag(t,W0(e,t.state,Ye,!!a,!1,"draggable")),it=Ve.transform,Bt=w+ie,Bn=S+oe,wn=dt(t,e,ae({width:Bt,height:Bn,offsetWidth:Math.round(ve),offsetHeight:Math.round(ne),startRatio:D,boundingWidth:ve,boundingHeight:ne,direction:W,dist:[ie,oe],delta:De,isPinch:!!a,drag:Ve},PY({style:{width:"".concat(Bt,"px"),height:"".concat(Bn,"px")},transform:it},Ve,e)));return!g&&Be(t,"onResize",wn),wn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Ie(h)>3,b=Ie(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=va(t,e,{});return!r&&Be(t,"onResizeEnd",i),i}},dragGroupControlCondition:TB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ae(ae({},e),{isGroup:!0}));if(!r)return!1;var i=ks(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,A=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(A?w[1]/A:0);v[0]=Math.max(v[0],I),v[1]=Math.max(v[1],N)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,A=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(A?w[1]/A:0);v[0]=Math.min(v[0],I),v[1]=Math.min(v[1],N)})}var u=vl(t,this,"dragControlStart",e,function(v,b){return g1(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),g1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ae(ae({},r),{targets:t.props.targets,events:u.map(function(v){return ae(ae({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Be(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Yd(t.props,"resizable");y_(t,"onBeforeResize",function(v){Be(t,"onBeforeResizeGroup",dt(t,e,ae(ae({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,ae(ae({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=vl(t,this,"dragControl",e,function(v,b){var x=le(ci(G0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return ae(ae({},b),{parentDist:null,parentScale:u,dragClient:Pt(f,[w,S]),parentKeepRatio:c})}),g=ae({targets:r.targets,events:h},i);return Be(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=vl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function dk(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=Tn(t.state.rootMatrix,tt([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Pt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Kn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ml(f,[n,r])}function vw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function fk(t,e,n,r){return vw(Kn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function hk(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=o1e(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ot(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function mY(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(cr(t))return t.map(function(w){return mY(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=AY(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function RP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(mr(n,Ze("rotation-control"))||t.props.rotateAroundControls&&mr(n,Ze("around-control"))||mr(n,Ze("control"))&&mr(n,Ze("rotatable")))return!0;var r=t.props.rotationTarget;return r?CD(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Kwe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Wwe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Kwe],viewClassName:function(t){return t.isDragging("rotatable")?Ze("view-rotation-dragging"):""},render:function(t,e){var n=Yd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=mY(i,f,h),v=[];if(g.forEach(function(S,A){var I=le(S,2),N=I[0],O=I[1];v.push(e.createElement("div",{key:"rotation".concat(A),className:Ze("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Ze("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ze("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=Cl(c||{}),x={};b.forEach(function(S){c[S].forEach(function(A){x[A]=S})});var w=[];cr(s)&&(w=s.map(function(S){var A=x[S];return{data:A?{resolve:A}:{},classNames:A?["move"]:[],dir:S}})),v.push.apply(v,Re([],le(JW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,Re([],le(iY(t,e)),!1)),v},dragControlCondition:RP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,A=h.moveableClientRect,I=h.offsetMatrix,N=h.targetMatrix,O=h.allMatrix,D=h.width,P=h.height;if(!f&&!g)return!1;var C=t.getRect();i.rect=C,i.transform=S,i.left=v,i.top=b;var R=function(ue){var ie=gY(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedPosition(ue)},M=function(ue){var ie=Hwe(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedDirection(ue)},V=a,L=s;if(f||u||c){var z=o||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=ae(ae({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=ae(ae({},i.beforeInfo),{origin:C.origin,startValue:z})}else{var K=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(K){var Y=K.getAttribute("data-direction")||"",G=ewe[Y];if(G){i.isControl=!0,i.isAroundControl=mr(K,Ze("around-control")),i.controlDirection=G;var X=K.getAttribute("data-resolve");X&&(i.resolveAble=X);var J=_1e(h.rootMatrix,h.renderPoses,A);n=le(vr(J,G),2),V=n[0],L=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var ee=R;R=function(ue){var ie=h.is3d?4:3,oe=le(Pt(OW(N,ie),ue),2),Se=oe[0],se=oe[1],Ae=ci(I,Hd([Se,se],ie)),ve=ci(O,Hd([ue[0],ue[1]],ie));ee(ue);var ne=h.posDelta;i.beforeInfo.origin=tt(Ae,ne),i.afterInfo.origin=tt(ve,ne),i.absoluteInfo.origin=tt(ve,ne),dk(t,i.beforeInfo,V,L,A),dk(t,i.afterInfo,V,L,A),dk(t,i.absoluteInfo,V,L,A)},M=function(ue){var ie=vr([[0,0],[D,0],[0,P],[D,P]],ue);R(ie)}}i.startClientX=V,i.startClientY=L,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},h_(t,e,"rotate");var Q=!1,U=!1;if(i.isControl&&i.resolveAble){var Z=i.resolveAble;Z==="resizable"&&(U=DP.dragControlStart(t,ae(ae({},new Ep("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(Q=mi.dragStart(t,new Ep().dragStart([0,0],e))),R(E1e(t));var te=dt(t,e,ae(ae({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:M,setFixedPosition:R},f_(t,e)),{dragStart:Q,resizeStart:U})),W=Be(t,"onRotateStart",te);return i.isRotate=W!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,A=a.startValue,I=a.rect,N=a.startClientX,O=a.startClientY;if(S){u_(t,e,"rotate");var D=twe(e),P=v*D,C=t.props.parentMoveable,R=0,M,V,L=0,z,K,Y=0,G,X,J=180/Math.PI*A,ee=w.startValue,Q=!1,U=N+s,Z=O+o;if(!u&&"parentDist"in e){var te=e.parentDist;M=te,z=te,G=te}else f||u?(M=vw(c,v,b),z=vw(c,P,x),G=vw(c,P,w)):(M=fk(U,Z,v,b),z=fk(U,Z,P,x),G=fk(U,Z,P,w),Q=!0);if(V=J+M,K=J+z,X=ee+G,Be(t,"onBeforeRotate",dt(t,e,{beforeRotation:V,rotation:K,absoluteRotation:X,setRotation:function(Pe){z=Pe-J,M=z,G=z}},!0)),n=le(hk(t,I,b,M,J,Q),3),R=n[0],M=n[1],V=n[2],r=le(hk(t,I,x,z,J,Q),3),L=r[0],z=r[1],K=r[2],i=le(hk(t,I,w,G,ee,Q),3),Y=i[0],G=i[1],X=i[2],!(!Y&&!L&&!R&&!C&&!g)){var W=d_(a,"rotate(".concat(K,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=mD(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=fwe(t,z,a),ie=tt(Pt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=XW(t,W,ie,f,e),Se=oe,se=ml([U,Z],w.startAbsoluteOrigin)-w.startDist,Ae=void 0;if(a.resolveAble==="resizable"){var ve=DP.dragControl(t,ae(ae({},W0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:se}));ve&&(Ae=ve,Se=PY(Se,ve,e))}var ne=dt(t,e,ae(ae({delta:L,dist:z,rotate:K,rotation:K,beforeDist:M,beforeDelta:R,beforeRotate:V,beforeRotation:V,absoluteDist:G,absoluteDelta:Y,absoluteRotate:X,absoluteRotation:X,isPinch:!!f,resize:Ae},oe),Se));return Be(t,"onRotate",ne),ne}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=va(t,e,{});return Be(t,"onRotateEnd",r),r}},dragGroupControlCondition:RP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=vl(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,S=Pt(tt([b,x],[i,a]),tt(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,ae(ae({},g),{parentRotate:0})}),u=ae(ae({},o),{targets:t.props.targets,events:c}),f=Be(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){y_(t,"onBeforeRotate",function(u){Be(t,"onBeforeRotateGroup",dt(t,e,ae(ae({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=vl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(q0(h,s*i),2),w=x[0],S=x[1],A=[w-v,S-b];return f.datas.groupClient=[w,S],ae(ae({},f),{parentRotate:a,groupDelta:A})});t.rotation=i*r.beforeRotation;var c=ae({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Be(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=vl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ywe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function SD(t,e){return Ywe(ae(ae({},t),{classNames:Re([Ze("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ot(n,.1),"px")})}),e)}function AB(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,SD({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Ze("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function kB(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?ou:lu,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,S=g.className,A=[-r[0]+b[0],-r[1]+b[1]];return SD({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Ze("bold"),S]:[Ze("normal"),S],direction:e,posValue:A,sizeValue:x,zoom:o},a)})}function Km(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,D){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",A=e==="vertical"?"height":"width",I=Math.abs(i),N=v?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ze("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[A]="".concat(I,"px"),c)},SD({direction:e,classNames:[Ze(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Ze("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},N>0?x(N,e):""))}function Xwe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?ou:lu,o=n[s.start],c=n[s.end];return NY(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,S=v.elementRect.rect;if(S[s.end]<o)f.push(v);else if(c<S[s.start])h.push(v);else if(S[s.start]<=o&&c<=S[s.end]&&r){var A=v.pos,I={element:w,rect:ae(ae({},S),(b={},b[s.end]=S[s.start],b))},N={element:w,rect:ae(ae({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],D=[0,0];O[i]=A[i],O[a]=A[a],D[i]=A[i],D[a]=A[a]+v.size,f.push({type:t,pos:O,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:D,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Qwe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=Xwe(o,c,r,a),g=u?lu:ou,v=u?ou:lu,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,A=w.start,I=w.end,N=w.inner,O=n[f]+S[0].pos[f]-r[v.start],D=r;A.forEach(function(P){var C=P.elementRect.rect,R=D[g.start]-C[g.end];if(R>0){var M=[0,0];M[u]=n[u]+D[g.start]-b-R,M[f]=O,s.push(Km(t,o,"dashed",s.length,R,M,P.className,i))}D=C}),D=r,I.forEach(function(P){var C=P.elementRect.rect,R=C[g.start]-D[g.end];if(R>0){var M=[0,0];M[u]=n[u]+D[g.end]-b,M[f]=O,s.push(Km(t,o,"dashed",s.length,R,M,P.className,i))}D=C}),N.forEach(function(P){var C=P.elementRect.rect,R=b-C[g.start],M=C[g.end]-x,V=[0,0],L=[0,0];V[u]=n[u]-R,V[f]=O,L[u]=n[u]+x-b,L[f]=O,s.push(Km(t,o,"dashed",s.length,R,V,P.className,i)),s.push(Km(t,o,"dashed",s.length,M,L,P.className,i))})})}),s}function Zwe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?lu:ou,h=c?ou:lu,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,A=w.gapRects,I=Math.max.apply(Math,Re([b],le(A.map(function(D){var P=D.rect;return P[h.start]})),!1)),N=Math.min.apply(Math,Re([x],le(A.map(function(D){var P=D.rect;return P[h.end]})),!1)),O=(I+N)/2;I===N||O===(b+x)/2||A.forEach(function(D){var P=D.rect,C=D.className,R=[n[0],n[1]];if(P[f.end]<g)R[c]+=P[f.end]-g;else if(v<P[f.start])R[c]+=P[f.start]-g-S;else return;R[u]+=O-b,a.push(Km(t,c?"vertical":"horizontal","gap",a.length,S,R,C,i))})})}),a}function MP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,S=v.horizontalGuidelines,A=v.snapThreshold,I=A===void 0?5:A,N=v.maxSnapElementGuidelineDistance,O=N===void 0?1/0:N,D=v.isDisplayGridGuidelines,P=$a(Ha(t.state)),C=P.top,R=P.left,M=P.bottom,V=P.right,L={top:C,left:R,bottom:M,right:V,center:(R+V)/2,middle:(C+M)/2},z=n1e(t),K=Re([],le(z),!1),Y=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ee){return ee*I});x&&K.push.apply(K,Re([],le(Jwe(t,L,Y)),!1));var G=ae({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(K.push.apply(K,Re([],le(t1e(t,s?c:f,s?o:u,h,g,G,D)),!1)),a){var X=i.left,J=i.top;G.left+=X,G.top+=J,G.right+=X,G.bottom+=J}return K.push.apply(K,Re([],le(yY(S||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),K=K.filter(function(ee){var Q=ee.element,U=ee.elementRect,Z=ee.type;if(!Q||!U)return!0;var te=U.rect;return vY(L,te,Z,O)}),K}function Jwe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",ou,lu],["horizontal",lu,ou]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],S=e[v.center],A=e[b.start],I=e[b.end],N={left:n[0],top:n[1]};function O(C){var R=C.rect,M=N[v.start];return R[v.end]<x+M?x-R[v.end]:w-M<R[v.start]?R[v.start]-w:-1}var D=c.filter(function(C){var R=C.rect;return R[b.start]>I||R[b.end]<A?!1:O(C)>0}).sort(function(C,R){return O(C)-O(R)}),P=[];D.forEach(function(C){D.forEach(function(R){if(C!==R){var M=C.rect,V=R.rect,L=M[b.start],z=M[b.end],K=V[b.start],Y=V[b.end];L>Y||K>z||P.push([C,R])}})}),P.forEach(function(C){var R=le(C,2),M=R[0],V=R[1],L=M.rect,z=V.rect,K=L[v.start],Y=L[v.end],G=z[v.start],X=z[v.end],J=N[v.start],ee=0,Q=0,U=!1,Z=!1,te=!1;if(Y<=x&&w<=G){if(Z=!0,ee=(G-Y-(w-x))/2,Q=Y+ee+(w-x)/2,Ie(Q-S)>J)return}else if(Y<G&&X<x+J){if(U=!0,ee=G-Y,Q=X+ee,Ie(Q-x)>J)return}else if(Y<G&&w-J<K){if(te=!0,ee=G-Y,Q=K-ee,Ie(Q-w)>J)return}else return;ee&&vY(e,z,g,a)&&(ee>o||u.push({type:g,pos:g==="vertical"?[Q,0]:[0,Q],element:V.element,size:0,className:V.className,isStart:U,isCenter:Z,isEnd:te,gap:ee,hide:!0,gapRects:[M,V],direction:"",elementDirection:""}))})}),u}function e1e(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,A=v.direction;if(S){var I=A.map(function(O,D){var P=D===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},C=P.snapSize,R=P.posName,M=P.sizeName,V=P.clientOffset;if(!C)return{dir:O,multiple:1,snapSize:C,snapOffset:0};var L=w[M],z=w[R],K=oW(S.map(function(U){return[U[R]-z,U[M],L-U[M]-U[R]+z]})).filter(function(U){return U}).sort(function(U,Z){return U-Z}),Y=K[0],G=K.map(function(U){return ot(U/Y,.1)*C}),X=1,J=ot(L/Y,.1);for(X=1;X<=10&&!G.every(function(U){return U*X%1===0});++X);var ee=(-O+1)/2,Q=u1(z-V,z-V+L,ee,1-ee);return{multiple:J*X,dir:O,snapSize:C,snapOffset:Math.round(Q/C)}}),N=I.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=N,o.snapThresholdInfo.offset=I.map(function(O){return O.snapOffset}),I.forEach(function(O,D){O.snapSize})}}else o.snapThresholdInfo=null}function t1e(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];e1e(t,r,i,a);var S=c.snapThresholdInfo,A=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var N=function(D){v.push({type:"horizontal",pos:[b,ot(w[1]*I+D-i+x,.1)],className:Ze("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)N(O);for(var O=-g;O>=-n;O-=g)N(O)}if(f){for(var N=function(P){v.push({type:"vertical",pos:[ot(w[0]*A+P-r+b,.1),x],className:Ze("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)N(O);for(var O=-f;O>=-e;O-=f)N(O)}return v}function vY(t,e,n,r){return n==="horizontal"?Ie(t.right-e.left)<=r||Ie(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ie(t.bottom-e.top)<=r||Ie(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function n1e(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Ns(g)&&"element"in g?ae(ae({},g),{element:Eo(g.element,!0)}):{element:Eo(g,!0)}}).filter(function(g){return g.element}),s=pxe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),r1e(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=yD(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,A=g.right,I=A===void 0?f.right:A,N=g.bottom,O=N===void 0?f.bottom:N,D=g.center,P=D===void 0?f.center:D,C=g.middle,R=C===void 0?f.middle:C,M=g.className,V=g.rect,L=bD({top:x,right:I,left:S,bottom:O,center:P,middle:R},V),z=L.horizontal,K=L.vertical,Y=L.horizontalNames,G=L.verticalNames,X=V.top,J=V.left,ee=V.right-J,Q=V.bottom-X,U=[ee,Q];K.forEach(function(Z,te){h.push({type:"vertical",element:v,pos:[ot(Z,.1),X],size:Q,sizes:U,className:M,elementRect:g,elementDirection:yB[G[te]]||G[te],direction:""})}),z.forEach(function(Z,te){h.push({type:"horizontal",element:v,pos:[J,ot(Z,.1)],size:ee,sizes:U,className:M,elementRect:g,elementDirection:yB[Y[te]]||Y[te],direction:""})})}),h}function CB(t,e){return t?t.map(function(n){var r=Ns(n)?n:{pos:n},i=r.pos;return Sp(i)?r:ae(ae({},r),{pos:en(i,e)})}):[]}function yY(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return CB(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,ot(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),CB(e,g).forEach(function(b){o.push({type:"vertical",pos:[ot(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function r1e(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(kwe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-v,A=S+x.height,I=w+x.width,N=le(kp(a,[w,S],c),2),O=N[0],D=N[1],P=le(kp(a,[I,A],c),2),C=P[0],R=P[1];return ae(ae({},b),{rect:{left:O,right:C,top:D,bottom:R,center:(O+C)/2,middle:(D+R)/2}})})}function mx(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=Eo(r,!0);if(s){var o=yv(s),c=RB(e,[o.left-i.left,o.top-i.top]),u=RB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ot(c[0],1e-5),a.top=ot(c[1],1e-5),a.right=ot(u[0],1e-5),a.bottom=ot(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=MP(t),e.enableSnap=!0,!0}function bY(t,e,n,r,i,a){var s=hf(t,e,n,a?4:3),o=vr(s,r);return ED(s,tt(i,o))}function IB(t){return t?t/Ie(t):0}function i1e(t,e,n,r,i,a){var s=a.fixedDirection,o=Nwe(n,s,r),c=wD(t,e,n,r),u=Re(Re([],le($we(t,e,o,r,i,a)),!1),le(hY(t,c,a)),!1),f=m1(u,0),h=m1(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function a1e(t,e,n,r,i,a,s,o,c){var u=vr(e,s),f=m_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ot(g,CP)||ot(h,CP)){var v=le(jo({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function xY(t,e,n,r,i,a,s,o){for(var c=Ha(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=i1e(t,v,i,u,s,o),x=b.width,w=b.height,S=x.isBound,A=w.isBound,I=x.offset,N=w.offset;if(g===1&&(S||(I=0),A||(N=0)),g===0&&s&&!S&&!A)return[0,0];if(u){var O=Ie(I)*(n?1/n:1),D=Ie(N)*(r?1/r:1),P=S&&A?O<D:A||!S&&O<D;P?I=n*N/r:N=r*I/n}f+=I,h+=N}if(!u&&i[0]&&i[1]){var C=Gwe(t,c,i,a,o),R=C.maxWidth,M=C.maxHeight,V=le(a1e(t,e(f,h).map(function(K){return K.map(function(Y){return ot(Y,CP)})}),n+f,r+h,R,M,i,s,o),2),I=V[0],N=V[1];f+=I,h+=N}return[f,h]}function mv(t){return t<0&&(t=t%360+360),t%=360,t}function s1e(t,e){e=mv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ie(t-r)<Ie(t-i)?r:i}function pk(t,e){t=mv(t),e=mv(e);var n=mv(t-e);return Math.min(n,360-n)}function o1e(t,e,n,r){var i,a=t.props,s=(i=a[aY])!==null&&i!==void 0?i:5,o=a[sY];if(ag(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(N){return tt(N,g)}),x=b.map(function(N){return q0(N,v)}),w=Re(Re([],le(_we(t,b,x,g,n)),!1),le(zwe(t,b,x,g,n)),!1);w.sort(function(N,O){return Ie(N-n)-Ie(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var A=o.slice().sort(function(N,O){return pk(N,r)-pk(O,r)}),I=A[0];if(pk(I,r)<=s)return{isSnap:!0,dist:n+s1e(r,I)-r}}return{isSnap:!1,dist:n}}function l1e(t,e,n,r,i,a,s){if(!ag(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return xY(t,function(g,v){return bY(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function c1e(t,e,n,r,i){if(!ag(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=xY(t,function(h,g){return bY(lwe(i,Pt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function u1e(t,e){e.absolutePoses=Ha(t.state)}function PB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Ki(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ae(ae({},r),{direction:i.direction})})}function NB(t,e,n,r,i,a){var s=vD(p_(t,a),e,n),o=s.vertical,c=s.horizontal,u=zh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Lwe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){kl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){kl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var d1e=kD("",["resizable","scalable"]),f1e={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",aY,sY,oY,lY,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!ag(t,""))return Vh(t,"boundMap",zh(),function(W){return JSON.stringify(W)}),Vh(t,"innerBoundMap",zh(),function(W){return JSON.stringify(W)}),[];n.guidelines=MP(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Ha(t.state),w=[],S=[],A=[],I=[],N=[],O=$a(x),D=O.width,P=O.height,C=O.top,R=O.left,M=O.bottom,V=O.right,L={left:R,right:V,top:C,bottom:M,center:(R+V)/2,middle:(C+M)/2},z=b.length>0,K=z?$a(b):{};if(!u.request){if(u.direction&&N.push(Pwe(t,x,u.direction,h,h)),u.snap){var Y=$a(x);u.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),N.push(bB(t,Y,h,h))}z&&(u.center&&(K.middle=(K.top+K.bottom)/2,K.center=(K.left+K.right)/2),N.push(bB(t,K,h,h))),N.forEach(function(W){var ue=W.vertical.posInfos,ie=W.horizontal.posInfos;w.push.apply(w,Re([],le(ue.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,Re([],le(ie.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),A.push.apply(A,Re([],le(PB(ue)),!1)),I.push.apply(I,Re([],le(PB(ie)),!1))})}var G=NB(t,[R,V],[C,M],w,S),X=G.boundMap,J=G.innerBoundMap;z&&NB(t,[K.left,K.right],[K.top,K.bottom],w,S,u.externalBounds);var ee=Re(Re([],le(A),!1),le(I),!1),Q=ee.filter(function(W){return W.element&&!W.gapRects}),U=ee.filter(function(W){return W.gapRects}).sort(function(W,ue){return W.gap-ue.gap});Be(t,"onSnap",{guidelines:ee.filter(function(W){var ue=W.element;return!ue}),elements:Q,gaps:U},!0);var Z=Vh(t,"boundMap",X,function(W){return JSON.stringify(W)},zh()),te=Vh(t,"innerBoundMap",J,function(W){return JSON.stringify(W)},zh());return(X===Z||J===te)&&Be(t,"onBound",{bounds:X,innerBounds:J},!0),Re(Re(Re(Re(Re(Re([],le(Qwe(t,Q,[g,v],L,e)),!1),le(Zwe(t,U,[g,v],L,e)),!1),le(kB(t,"horizontal",I,[i,r],L,e)),!1),le(kB(t,"vertical",A,[i,r],L,e)),!1),le(AB(t,"horizontal",S,g,r,D,0,e)),!1),le(AB(t,"vertical",w,v,i,P,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},mx(t)},drag:function(t){var e=t.state;mx(t)||(e.guidelines=MP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(d1e(t,e)||RP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return mr(e.inputEvent.target,Ze("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,mx(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,mx(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function h1e(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lbe.apply(void 0,Re([hD],le(t),!1))}function wY(t){t()}function p1e(t){return!t||t==="none"?[1,0,0,1,0,0]:Ns(t)?t:Yv(t)}function vv(t,e,n){return f1(e,Kd(n,e),t,Kd(n.map(function(r){return-r}),e))}function g1e(t,e,n){if(e==="%"){var r=_D(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function m1e(t){var e=v1e(TD(t,":before"));return e.map(function(n,r){var i=B0(n),a=i.value,s=i.unit;return a*g1e(t,s,r===0)})}function y1(t){return t?t.split(" "):["0","0"]}function v1e(t){return y1(t.transformOrigin)}function SY(t){var e=Wi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Qv(t,e,n,r,i){var a,s,o=nD(t)||yu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,A=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=Wi(u),N=u.tagName.toLowerCase(),O=SY(u),D=I("willChange"),P=parseFloat(I("zoom"))||1;if(x=I("position"),r&&P!==1){w=P;break}if(!n&&r&&S!==1&&A&&A!=="absolute"||N==="svg"||N==="foreignobject"||x!=="static"||O&&O!=="none"||D==="transform")break;var C=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;C&&(c=!0,f=R);var M=R;if(M&&M.nodeType===11){u=M.host,v=!0,x=Wi(u)("position");break}u=M,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function y1e(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Wi(t),o=s_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=FW?m1e(t):y1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(w1e(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=y1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function _Y(t,e){var n=Wi(t),r=Wi(yu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function jP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Os(n,3,4))})}function b1e(t){for(var e=t.parentElement,n=!1,r=yu(t);e;){var i=TD(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function v_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(DW(t,!e).join(","),")")}function _D(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function x1e(t,e){var n,r=_D(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*S/2;var A=g===2?Math.max(u,c):Math.min(c,u);b[0]=A,b[1]=A,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=cD(b,e);return n=le(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],vv(I,e,v)}function w1e(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Wi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=_D(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function Tn(t,e,n){return ci(t,Hd(e,n),n)}function hf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Tn(t,i,r)})}function $a(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Re([],le(e),!1)),i=Math.min.apply(Math,Re([],le(n),!1)),a=Math.max.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function OB(t,e,n,r){var i=hf(t,e,n,r);return $a(i)}function S1e(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=TY(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===yu(n)&&(v=_Y(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],S=b.width,A=b.height,I=f1(r,i,c),N=OB(I,f,h,r),O=N.left,D=N.top,P=N.width,C=N.height,R=Tn(I,o,r),M=tt(R,[O,D]),V=[x+M[0]*S/P,w+M[1]*A/C],L=[0,0],z=0;++z<10;){var K=Po(i,r);a=le(tt(Tn(K,V,r),Tn(K,R,r)),2),L[0]=a[0],L[1]=a[1];var Y=f1(r,i,Kd(L,r),c),G=OB(Y,f,h,r),X=G.left,J=G.top,ee=X-x,Q=J-w;if(Ie(ee)<2&&Ie(Q)<2)break;V[0]-=ee,V[1]-=Q}return L.map(function(U){return Math.round(U)})}function _1e(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return Tn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ga(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function EY(t,e){return Ga([e[0]-t[0],e[1]-t[1]])}function Wm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Kn(t,e));var i=EY(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function b1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Yd(t,e){var n=t[e];return Ns(n)?ae(ae({},t),n):t}function TY(t){var e=t&&!s_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,S=1/0,A=0,I=0,N=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();N=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var D=Wi(t),P=t.style,C=D("boxSizing")==="border-box",R=parseFloat(D("borderLeftWidth"))||0,M=parseFloat(D("borderRightWidth"))||0,V=parseFloat(D("borderTopWidth"))||0,L=parseFloat(D("borderBottomWidth"))||0,z=parseFloat(D("paddingLeft"))||0,K=parseFloat(D("paddingRight"))||0,Y=parseFloat(D("paddingTop"))||0,G=parseFloat(D("paddingBottom"))||0,X=z+K,J=Y+G,ee=R+M,Q=V+L,U=X+ee,Z=J+Q,te=D("position"),W=0,ue=0;if("clientLeft"in t){var ie=null;if(te==="absolute"){var oe=Qv(t,yu(t));ie=oe.offsetParent}else ie=t.parentElement;if(ie){var Se=Wi(ie);W=parseFloat(Se("width")),ue=parseFloat(Se("height"))}}f=Math.max(X,en(D("minWidth"),W)||0),h=Math.max(J,en(D("minHeight"),ue)||0),b=en(D("maxWidth"),W),x=en(D("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),A=en(P.width,0)||0,I=en(P.height,0)||0,s=parseFloat(D("width"))||0,o=parseFloat(D("height"))||0,c=Ie(s-A)<1?gP(f,A||s,b):s,u=Ie(o-I)<1?gP(h,I||o,x):o,n=c,r=u,i=c,a=u,C?(w=b,S=x,g=f,v=h,c=n-U,u=r-Z):(w=b+U,S=x+Z,g=f+U,v=h+Z,n=c+U,r=u+Z),i=c+X,a=u+J}return{svg:N,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:A,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:S}}function AY(t,e){return Kn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function vx(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function kY(t,e){var n=t===yu(t)||t===nD(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Wi(t)("overflow")!=="visible",ae(ae({},e),r)}function gk(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?kY(n,f):f}function yv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?kY(t,o):o}function E1e(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?ID(r,a,s):c}function CY(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=IY(a,r)}return i}function IY(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function ED(t,e){return[Pt(e,t[0]),Pt(e,t[1]),Pt(e,t[2]),Pt(e,t[3])]}function Ha(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return ED([r,i,a,s],[e,n])}function zP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Lh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&zP(t,e),r?.unset(),t[n]=null}function wi(t,e){if(e){var n=ig(e);n.nextStyle=ae(ae({},n.nextStyle),t)}return{style:t,cssText:Cl(t).map(function(r){return"".concat(mw(r,"-"),": ").concat(t[r],";")}).join("")}}function PY(t,e,n){var r=e.afterTransform||e.transform;return ae(ae({},wi(ae(ae(ae({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function dt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ae(ae({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function va(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ae(ae({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function y_(t,e,n){t._emitter.on(e,n)}function Be(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function TD(t,e){return Yc(t).getComputedStyle(t,e)}function yx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function LP(t,e){return t===e||t==null&&e==null}function DB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!s_(i))return i}return t[n]}function NY(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function T1e(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function OY(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Ap(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ie(r)-Ie(n)}),t[0]}function kp(t,e,n){return ci(Po(t,n),Hd(e,n),n)}function A1e(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(kp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ra(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Tn(t,[IB(n[0]||1),0],r),a=Tn(t,[0,IB(n[1]||1)],r),s=Tn(t,[n[0]/Ga(i),n[1]/Ga(a)],r);return Pt(e,s)}function ms(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function x1(t){return Ie(t)<=Ei?0:t}function AD(t){return function(e){if(!e.isDragging(t))return"";var n=gwe(e,t),r=n.deg;return r?Ze("view-control-rotation".concat(r)):""}}function kD(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return mr(i,Ze("direction"))&&(!t||mr(i,Ze(t)))}}function k1e(t,e,n){var r,i=_p(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:_p([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=Th(f),S=Th(h),A=Th(v),I=Th(b),N=tn(w,A,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:Th(x),afterFunctionMatrix:A,afterFunctionMatrix2:I,allFunctionMatrix:N,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function C1e(t){return!t||!Ns(t)||ng(t)?!1:cr(t)||"length"in t}function Eo(t,e){return t?ng(t)?t:Hi(t)?e?document.querySelector(t):t:JO(t)?t():dW(t)?t:"current"in t?t.current:t:null}function CD(t,e){if(!t)return[];var n=C1e(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Hi(i)&&e?Re(Re([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(cr(i)?r.push(CD(i,e)):r.push(Eo(i,e)),r)},[])}function I1e(t,e,n){var r=Kn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function RB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Po(n,i);return r||(a=Os(a,3,4)),a[12]=0,a[13]=0,a[14]=0,fxe(a,e)}function DY(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Kn([0,0],e),h=Kn([0,0],r),g=Ga(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var A=0;Ie(w-S)<Math.PI/2||Ie(w-S)>Math.PI/2*3||(S+=Math.PI),A=w-S,A>Math.PI*2?A-=Math.PI*2:A>Math.PI?A=2*Math.PI-A:A<-Math.PI&&(A=-2*Math.PI-A);var I=Ga([b+e[0],x+e[1]])*Math.cos(A);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function RY(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(P){return Ie(t[P]-w[P])}),A=[0,1].map(function(P){var C=S[P];return C!==0&&(C=2/C),C});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(Sp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var I=s*S[0],N=o*S[1],O=Ga([I,N]);c=v/O*I*A[0],u=v/O*N*A[1]}else{var D=jo({datas:n,distX:f,distY:h});D=A.map(function(P,C){return D[C]*P}),i=le(DY([s,o],D,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function VP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=VP(r||""),s=VP(i||""),o=ae(ae({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ID(t,e,n){var r=VP(t,!0),i=r.x,a=r.y;return[en(i,e)||0,en(a,n)||0]}function P1e(t,e,n){var r=t.map(function(a){return tt(a,e)}),i=r.map(function(a){return q0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Pt(a,e)})}}function MY(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=cr(n),s=cr(i);return a&&s?MY(n,i):!a&&!s?n===i:!1})}function Vh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function vi(t){return t>=0?1:-1}function Ie(t){return Math.abs(t)}function mk(t,e){return Tbe(t).map(function(n){return e(n)})}function jY(t){return Sp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var N1e=K0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=dt(t,e,{});r&&(g.targets=r);var v=Be(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ae(ae({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=dt(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Be(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,ae(ae({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=va(t,e,{isDrag:r});a&&(c.targets=a),Be(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ae(ae({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ae(ae({},e),{targets:t.props.targets}))}}),MB=kD("scalable"),O1e={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:nY("scalable"),dragControlCondition:MB,viewClassName:AD("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=CY(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||ff(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];h_(t,e,"scale"),n.isWidth=x;function w(D){n.ratio=D&&isFinite(D)?D:0}n.startPositions=Ha(t.state);function S(D){var P=pY(n.startPositions,D);n.fixedDirection=P.fixedDirection,n.fixedPosition=P.fixedPosition,n.fixedOffset=P.fixedOffset}n.setFixedDirection=S,w(ml(g,v)/ml(v,b)),S([-s[0],-s[1]]);var A=function(D){n.minScaleSize=D},I=function(D){n.maxScaleSize=D};A([-1/0,-1/0]),I([1/0,1/0]);var N=dt(t,e,ae(ae({direction:s,set:function(D){n.startValue=D},setRatio:w,setFixedDirection:S,setMinScaleSize:A,setMaxScaleSize:I},f_(t,e)),{dragStart:mi.dragStart(t,new Ep().dragStart([0,0],e))})),O=Be(t,"onScaleStart",N);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?N:!1},dragControl:function(t,e){u_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var A=t.props,I=A.throttleScale,N=A.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var D=S&&(r??A.keepRatio)||!1,P=t.state,C=[x[0],x[1]];function R(){var ve=RY(O,D,n,e),ne=ve.distWidth,Pe=ve.distHeight,be=g?(g+ne)/g:1,_e=v?(v+Pe)/v:1;x[0]||(C[0]=ne/g),x[1]||(C[1]=Pe/v);var Oe=(O[0]||D?be:1)*C[0],De=(O[1]||D?_e:1)*C[1];return Oe===0&&(Oe=vi(f[0])*hx),De===0&&(De=vi(f[1])*hx),[Oe,De]}var M=R();if(!a&&t.props.groupable){var V=P.snapRenderInfo||{},L=V.direction;cr(L)&&(L[0]||L[1])&&(P.snapRenderInfo={direction:h,request:e.isRequest})}Be(t,"onBeforeScale",dt(t,e,{scale:M,setFixedDirection:function(ve){return n.setFixedDirection(ve),M=R(),M},startFixedDirection:n.startFixedDirection,setScale:function(ve){M=ve}},!0));var z=[M[0]/C[0],M[1]/C[1]],K=s,Y=[0,0],G=vi(z[0]*z[1]),X=!s&&!i&&a;if(X||u?K=mD(t,n.targetAllTransform,[0,0],[0,0],n):s||(K=n.fixedPosition),a||(Y=c1e(t,z,h,!c&&o,n)),D){O[0]&&O[1]&&Y[0]&&Y[1]&&(Math.abs(Y[0]*g)>Math.abs(Y[1]*v)?Y[1]=0:Y[0]=0);var J=!Y[0]&&!Y[1];if(J&&(w?z[0]=ot(z[0]*C[0],I)/C[0]:z[1]=ot(z[1]*C[1],I)/C[1]),O[0]&&!O[1]||Y[0]&&!Y[1]||J&&w){z[0]+=Y[0];var ee=g*z[0]*C[0]/S;z[1]=vi(G*z[0])*Ie(ee/v/C[1])}else if(!O[0]&&O[1]||!Y[0]&&Y[1]||J&&!w){z[1]+=Y[1];var Q=v*z[1]*C[1]*S;z[0]=vi(G*z[1])*Ie(Q/g/C[0])}}else z[0]+=Y[0],z[1]+=Y[1],Y[0]||(z[0]=ot(z[0]*C[0],I)/C[0]),Y[1]||(z[1]=ot(z[1]*C[1],I)/C[1]);z[0]===0&&(z[0]=vi(f[0])*hx),z[1]===0&&(z[1]=vi(f[1])*hx),M=h1e(z,[C[0],C[1]]);var U=[g,v],Z=[g*M[0],v*M[1]];Z=sW(Z,n.minScaleSize,n.maxScaleSize,D?S:!1),M=mk(2,function(ve){return U[ve]?Z[ve]/U[ve]:Z[ve]}),z=mk(2,function(ve){return M[ve]/C[ve]});var te=mk(2,function(ve){return f[ve]?z[ve]/f[ve]:z[ve]}),W="scale(".concat(z.join(", "),")"),ue="scale(".concat(M.join(", "),")"),ie=d_(n,ue,W),oe=!x[0]||!x[1],Se=cwe(t,oe?ue:W,n.fixedDirection,K,n.fixedOffset,n,oe),se=X?Se:tt(Se,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=Se,M[0]===f[0]&&M[1]===f[1]&&se.every(function(ve){return!ve})&&!N&&!X)return!1;var Ae=dt(t,e,ae({offsetWidth:g,offsetHeight:v,direction:h,scale:M,dist:z,delta:te,isPinch:!!a},XW(t,ie,se,a,e)));return Be(t,"onScale",Ae),Ae},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=va(t,e,{});return Be(t,"onScaleEnd",r),r},dragGroupControlCondition:MB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=ks(t,"resizable",e);n.moveableScale=t.scale;var a=vl(t,this,"dragControlStart",e,function(u,f){return g1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),g1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ae(ae({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Be(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){y_(t,"onBeforeScale",function(f){Be(t,"onBeforeScaleGroup",dt(t,e,ae(ae({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=vl(t,this,"dragControl",e,function(f,h){var g=le(ci(G0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return ae(ae({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Pt(o,[v,b])})}),u=ae({targets:t.props.targets,events:c},r);return Be(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=vl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Ac(t,e){return t.map(function(n,r){return u1(n,e[r],1,2)})}function jB(t,e,n){var r=Kn(t,e),i=Kn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function D1e(t,e){var n=jB(t[0],t[1],t[2]),r=jB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var R1e={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:AD("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Ac(c,u),v=Ac(u,c),b=Ac(c,f),x=Ac(f,c),w=Ac(f,h),S=Ac(h,f),A=Ac(u,h),I=Ac(h,u);return Re([e.createElement("div",{className:Ze("line"),key:"middeLine1",style:Wm(g,w,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine2",style:Wm(v,S,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine3",style:Wm(b,A,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine4",style:Wm(x,I,s)})],le(rY(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return mr(n,Ze("direction"))&&mr(n,Ze("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=IY(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Os(h,3,4),n.targetInverseMatrix=NW(Po(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(A){return tt(A,c)}),n.nextPoses=n.poses.map(function(A){var I=le(A,2),N=I[0],O=I[1];return ci(n.warpTargetMatrix,[N,O,0,1],4)}),n.startValue=pn(4),n.prevMatrix=pn(4),n.absolutePoses=Ha(o),n.posIndexes=YW(s),ff(t,e),h_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=dt(t,e,ae({set:function(A){n.startValue=A}},f_(t,e))),S=Be(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(u_(t,e,"matrix3d"),ag(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=m_(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=jo({datas:n,distX:i,distY:a},!0),A=n.nextPoses.slice();if(h.forEach(function(R){A[R]=Pt(A[R],S)}),!Jxe.every(function(R){return D1e(R.map(function(M){return f[M]}),R.map(function(M){return A[M]}))}))return!1;var I=uD(f[0],f[2],f[1],f[3],A[0],A[2],A[1],A[3]);if(!I.length)return!1;var N=tn(s,I,4),O=KW(n,N,!0),D=tn(Po(o,4),O,4);n.prevMatrix=O;var P=tn(u,O,4),C=d_(n,"matrix3d(".concat(P.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return gD(e,C),Be(t,"onWarp",dt(t,e,ae({delta:D,matrix:P,dist:O,multiply:tn,transform:C},wi({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Be(t,"onWarpEnd",va(t,e,{})),r):!1}},M1e=Ze("area-pieces"),bx=Ze("area-piece"),zY=Ze("avoid"),j1e=Ze("view-dragging");function vk(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;uW(e,zY),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function zB(t){return t.createElement("div",{key:"area_pieces",className:M1e},t.createElement("div",{className:bx}),t.createElement("div",{className:bx}),t.createElement("div",{className:bx}),t.createElement("div",{className:bx}))}var LY={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Ze("area","pass"):Ze("area");if(a)return[e.createElement("div",{key:"area",ref:gl(t,"areaElement"),className:h}),zB(e)];if(!r||!i)return[];var g=uD([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?v_(g,!0):"none";return[e.createElement("div",{key:"area",ref:gl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),zB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=$a(u),x=b.left,w=b.top,S=b.width,A=b.height,I=h?4:3,N=le(kp(f,[r-g,i-v],I),2),O=N[0],D=N[1];O-=x,D-=w;var P=[{left:x,top:w,width:S,height:D-10},{left:x,top:w,width:O-10,height:A},{left:x,top:w+D+10,width:S,height:A-D-10},{left:x+O+10,top:w,width:S-O-10,height:A}],C=[].slice.call(s.nextElementSibling.children);P.forEach(function(R,M){C[M].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),cW(s,zY),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,vk(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||vk(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){vk(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&aW(function(){e.disableNativeEvent=!1})}},z1e=K0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(ID(i,b,x),2),A=S[0],I=S[1],N=h?4:3,O=Tn(f,[A,I],N);w=b1(c,r,tt(O,[g,v]))}else w=b1(c,r,o);return[e.createElement("div",{className:Ze("control","origin"),style:w,key:"beforeOrigin"})]}});function L1e(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var V1e={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new yxe,o=Eo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=dt(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Be(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ae({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?L1e:f,g=r.scrollOptions;return n.drag(e,ae({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},VY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},B1e=K0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=jY(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var A=le(w,2),I=A[0],N=A[1],O=b[I],D=b[N],P=u[I],C=u[N],R=uD([0,0],[100,0],[0,100],[100,100],O,D,P,C);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Ze("padding"),style:{transform:v_(R,!0)}})})}}),LB=["nw","ne","se","sw"];function xx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var F1e=[1,2,5,6],U1e=[0,3,4,7],gd=[1,-1,-1,1],md=[1,1,-1,-1];function PD(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(ms(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(ms(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function BY(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function FY(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,S=w>0,A=le(v,4),I=A[0],N=I===void 0?"0px":I,O=A[1],D=O===void 0?N:O,P=A[2],C=P===void 0?N:P,R=A[3],M=R===void 0?D:R,V=le(b,4),L=V[0],z=L===void 0?N:L,K=V[1],Y=K===void 0?S?z:D:K,G=V[2],X=G===void 0?S?z:C:G,J=V[3],ee=J===void 0?S?Y:M:J,Q=[N,D,C,M].map(function(ie){return en(ie,e)}),U=[z,Y,X,ee].map(function(ie){return en(ie,n)}),Z=Q.slice(),te=U.slice();o=le(xx([Z[0],Z[1]],e),2),Z[0]=o[0],Z[1]=o[1],c=le(xx([Z[3],Z[2]],e),2),Z[3]=c[0],Z[2]=c[1],u=le(xx([te[0],te[3]],n),2),te[0]=u[0],te[3]=u[1],f=le(xx([te[1],te[2]],n),2),te[1]=f[0],te[2]=f[1];var W=s?Z:Z.slice(0,Math.max(a[0],x)),ue=s?te:te.slice(0,Math.max(a[1],w));return Re(Re([],le(W.map(function(ie,oe){var Se=LB[oe];return{virtual:oe>=x,horizontal:gd[oe],vertical:0,pos:[r+ie,i+(md[oe]===-1?n:0)],sub:!0,raw:Q[oe],direction:Se}})),!1),le(ue.map(function(ie,oe){var Se=LB[oe];return{virtual:oe>=w,horizontal:0,vertical:md[oe],pos:[r+(gd[oe]===-1?e:0),i+ie],sub:!0,raw:U[oe],direction:Se}})),!1)}function $1e(t,e,n,r,i){i===void 0&&(i=e.length);var a=BY(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function q1e(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=BY(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=gd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=md[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:gd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:gd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var A=md[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var I=[u+A,f];t.push({horizontal:gd[0],vertical:0,pos:I}),e.push(I)}for(var N=v[0],x=v[1];x<=i;++x){var S=gd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+A:md[x]===1?w=e[n+N][1]:md[x]===-1&&(w=c-(e[n+N][1]-f)),t.push({horizontal:0,vertical:md[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function G1e(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var H1e=[[0,-1,"n"],[1,0,"e"]],K1e=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ND(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(D){return"".concat(ms(D[0],a,r)," ").concat(ms(D[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(D){return"".concat(D,"px")});var w=[g,a-v,s-x,b].map(function(D,P){return ms(D,P%2?a:s,r)});if(n.length>8){var S=le(tt(n[4],n[0]),2),A=S[0],I=S[1];w.push.apply(w,Re(["round"],le(PD(u.slice(8).map(function(D,P){return ae(ae({},D),{pos:n[P]})}),r,A,I,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var N=n[0],O=ms(Ie(n[1][1]-N[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[ms(Ie(n[2][0]-N[0]),a,r),O];return w.push("at",ms(N[0],a,r),ms(N[1],s,r)),w}}function w1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return K1e.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ie(u),horizontal:Ie(c),direction:f,pos:[h,g]}})}function UY(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ie(e[1]-e[0]),Ie(n[1]-n[0])]}function VB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=Wi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=iW(b),A=S.prefix,I=A===void 0?b:A,N=S.value,O=N===void 0?"":N,D=I==="circle",P=" ";if(I==="polygon"){var C=xd(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");P=",";var R=C.map(function(Bt){var Bn=le(Bt.split(" "),2),wn=Bn[0],yt=Bn[1];return{vertical:1,horizontal:1,pos:[en(wn,e),en(yt,n)]}}),M=Wd(R.map(function(Bt){return Bt.pos}));return{type:I,clipText:b,poses:R,splitter:P,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(D||I==="ellipse"){var V="",L="",z=0,K=0,C=su(O);if(D){var Y="";a=le(C,4),s=a[0],Y=s===void 0?"50%":s,o=a[2],V=o===void 0?"50%":o,c=a[3],L=c===void 0?"50%":c,z=en(Y,Math.sqrt((e*e+n*n)/2)),K=z}else{var G="",X="";u=le(C,5),f=u[0],G=f===void 0?"50%":f,h=u[1],X=h===void 0?"50%":h,g=u[3],V=g===void 0?"50%":g,v=u[4],L=v===void 0?"50%":v,z=en(G,e),K=en(X,n)}var J=[en(V,e),en(L,n)],R=Re([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],le(H1e.slice(0,D?1:2).map(function(wn){return{vertical:Ie(wn[1]),horizontal:wn[0],direction:wn[2],sub:!0,pos:[J[0]+wn[0]*z,J[1]+wn[1]*K]}})),!1);return{type:I,clipText:b,radiusX:z,radiusY:K,left:J[0]-z,top:J[1]-K,right:J[0]+z,bottom:J[1]+K,poses:R,splitter:P}}else if(I==="inset"){var C=su(O||"0 0 0 0"),ee=C.indexOf("round"),Q=(ee>-1?C.slice(0,ee):C).length,U=C.slice(Q+1),Z=le(C.slice(0,Q),4),te=Z[0],W=Z[1],ue=W===void 0?te:W,ie=Z[2],oe=ie===void 0?te:ie,Se=Z[3],se=Se===void 0?ue:Se,Ae=le([te,oe].map(function(wn){return en(wn,n)}),2),ve=Ae[0],ne=Ae[1],Pe=le([se,ue].map(function(wn){return en(wn,e)}),2),be=Pe[0],_e=Pe[1],Oe=e-_e,De=n-ne,Ye=FY(U,Oe-be,De-ve,be,ve),R=Re(Re([],le(w1(ve,Oe,De,be)),!1),le(Ye),!1);return{type:"inset",clipText:b,poses:R,top:ve,left:be,right:Oe,bottom:De,radius:U,splitter:P}}else if(I==="rect"){var C=xd(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));P=",";var Ve=le(C.map(function(Qr){var ze=B0(Qr).value;return ze}),4),it=Ve[0],_e=Ve[1],ne=Ve[2],be=Ve[3],R=w1(it,_e,ne,be);return{type:"rect",clipText:b,poses:R,top:it,right:_e,bottom:ne,left:be,values:C,splitter:P}}}}}function W1e(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(z){return z==="w"||z==="e"}),h=u.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(UY(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var A=(e+4)%8,I=t[A].pos,N=[0,0];s.indexOf("w")>-1?N[0]=-1:s.indexOf("e")>-1&&(N[0]=1),s.indexOf("n")>-1?N[1]=-1:s.indexOf("s")>-1&&(N[1]=1);var O=DY([x,w],n,S,N,!0),D=x+O[0],P=w+O[1],C=I[1],R=I[1],M=I[0],V=I[0];N[0]===-1?M=V-D:N[0]===1?V=M+D:(M=M-D/2,V=V+D/2),N[1]===-1?C=R-P:(N[1]===1||(C=R-P/2),R=C+P);var L=w1(C,V,R,M);t.forEach(function(z,K){c[K][0]=L[K].pos[0]-z.pos[0],c[K][1]=L[K].pos[1]-z.pos[1]})}else t.forEach(function(z,K){var Y=z.direction;Y&&(Y.indexOf(g)>-1&&(c[K][0]=n[0]),Y.indexOf(v)>-1&&(c[K][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(z){var K=z==="n"||z==="s";t.forEach(function(Y,G){var X=Y.direction,J=Y.horizontal,ee=Y.vertical;!X||X.indexOf(z)===-1||(c[G]=[K||!J?0:n[0],!K||!ee?0:n[1]])})}):c[e]=n;return c}function Y1e(t,e){var n=le(HW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(A){return A.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=F1e.indexOf(o),b=U1e.indexOf(o),x=f.length;if(q1e(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=ND(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Be(t,"onClip",dt(t,e,ae({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},wi({clipPath:S},e))))}function X1e(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||($1e(o,u,i,8,f),f===o.length))return}else return;var h=ND(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Be(t,"onClip",dt(t,e,ae({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},wi({clipPath:g},e))))}var Q1e={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,A=c.pos3,I=c.pos4,N=c.clipPathState,O=c.snapBoundInfos,D=c.rotation;if(!u||o)return[];var P=VB(u,f,h,i||"inset",N||r);if(!P)return[];var C=v?4:3,R=P.type,M=P.poses,V=M.map(function(_e){var Oe=Tn(g,_e.pos,C);return[Oe[0]-b,Oe[1]-x]}),L=[],z=[],K=R==="rect",Y=R==="inset",G=R==="polygon";if(K||Y||G){var X=Y?V.slice(0,8):V;z=X.map(function(_e,Oe){var De=Oe===0?X[X.length-1]:X[Oe-1],Ye=Kn(De,_e),Ve=EY(De,_e);return e.createElement("div",{key:"clipLine".concat(Oe),className:Ze("line","clip-line","snap-control"),"data-clip-index":Oe,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(De[0],"px, ").concat(De[1],"px) rotate(").concat(Ye,"rad) scaleY(").concat(s,")")}})})}if(L=V.map(function(_e,Oe){return e.createElement("div",{key:"clipControl".concat(Oe),className:Ze("control","clip-control","snap-control"),"data-clip-index":Oe,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})}),Y&&L.push.apply(L,Re([],le(V.slice(8).map(function(_e,Oe){return e.createElement("div",{key:"clipRadiusControl".concat(Oe),className:Ze("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Oe,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=P.left,ee=P.top,Q=P.radiusX,U=P.radiusY,Z=le(tt(Tn(g,[J,ee],C),Tn(g,[0,0],C)),2),te=Z[0],W=Z[1],ue="none";if(!a){for(var ie=Math.max(10,Q/5,U/5),oe=[],Se=0;Se<=ie;++Se){var se=Math.PI*2/ie*Se;oe.push([Q+(Q-s)*Math.cos(se),U+(U-s)*Math.sin(se)])}oe.push([Q,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([Q*2+2,U*2+2]),oe.push([Q*2+2,-2]),oe.push([Q,-2]),ue="polygon(".concat(oe.map(function(_e){return"".concat(_e[0],"px ").concat(_e[1],"px")}).join(", "),")")}L.push(e.createElement("div",{key:"clipEllipse",className:Ze("clip-ellipse","snap-control"),style:{width:"".concat(Q*2,"px"),height:"".concat(U*2,"px"),clipPath:ue,transform:"translate(".concat(-b+te,"px, ").concat(-x+W,"px) ").concat(v_(g))}}))}if(a){var Ae=$a(Re([w,S,A,I],le(V),!1)),ve=Ae.width,ne=Ae.height,Pe=Ae.left,be=Ae.top;if(G||K||Y){var oe=Y?V.slice(0,8):V;L.push(e.createElement("div",{key:"clipArea",className:Ze("clip-area","snap-control"),style:{width:"".concat(ve,"px"),height:"".concat(ne,"px"),transform:"translate(".concat(Pe,"px, ").concat(be,"px)"),clipPath:"polygon(".concat(oe.map(function(Oe){return"".concat(Oe[0]-Pe,"px ").concat(Oe[1]-be,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(_e){var Oe=O[_e],De=_e==="horizontal";Oe.isSnap&&z.push.apply(z,Re([],le(Oe.snap.posInfos.map(function(Ye,Ve){var it=Ye.pos,Bt=tt(Tn(g,De?[0,it]:[it,0],C),[b,x]),Bn=tt(Tn(g,De?[f,it]:[it,h],C),[b,x]);return Xv(e,"",Bt,Bn,s,"clip".concat(_e,"snap").concat(Ve),"guideline")})),!1)),Oe.isBound&&z.push.apply(z,Re([],le(Oe.bounds.map(function(Ye,Ve){var it=Ye.pos,Bt=tt(Tn(g,De?[0,it]:[it,0],C),[b,x]),Bn=tt(Tn(g,De?[f,it]:[it,h],C),[b,x]);return Xv(e,"",Bt,Bn,s,"clip".concat(_e,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Re(Re([],le(L),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ae(ae({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=VB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Be(t,"onClipStart",dt(t,e,{clipType:b,clipStyle:v,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,ff(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Yd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,A=s.draggable,I=jo(e);o&&A?(n=le(A.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(I,2),w=r[0],S=r[1]);var N=[w,S],O=t.state,D=O.width,P=O.height,C=!h&&!u&&!f,R=v.type,M=v.poses,V=v.splitter,L=M.map(function(xt){return xt.pos});C&&(w=-w,S=-S);var z=!u||M[g].direction==="nesw",K=R==="inset"||R==="rect",Y=M.map(function(){return[0,0]});if(u&&!z){var G=M[g],X=G.horizontal,J=G.vertical,ee=[w*Ie(X),S*Ie(J)];Y=W1e(M,g,ee,K,x)}else z&&(Y=L.map(function(){return[w,S]}));var Q=L.map(function(xt,_n){return Pt(xt,Y[_n])}),U=Re([],le(Q),!1);O.snapBoundInfos=null;var Z=v.type==="circle",te=v.type==="ellipse";if(Z||te){var W=$a(Q),ue=Ie(W.bottom-W.top),ie=Ie(te?W.right-W.left:ue),oe=Q[0][1]+ue,Se=Q[0][0]-ie,se=Q[0][0]+ie;Z&&(U.push([se,W.bottom]),Y.push([1,0])),U.push([W.left,oe]),Y.push([0,1]),U.push([Se,W.bottom]),Y.push([1,0])}var Ae=yY((b.clipHorizontalGuidelines||[]).map(function(xt){return en("".concat(xt),P)}),(b.clipVerticalGuidelines||[]).map(function(xt){return en("".concat(xt),D)}),D,P),ve=[],ne=[];if(Z||te)ve=[U[4][0],U[2][0]],ne=[U[1][1],U[3][1]];else if(K){var Pe=[U[0],U[2],U[4],U[6]],be=[Y[0],Y[2],Y[4],Y[6]];ve=Pe.filter(function(xt,_n){return be[_n][0]}).map(function(xt){return xt[0]}),ne=Pe.filter(function(xt,_n){return be[_n][1]}).map(function(xt){return xt[1]})}else ve=U.filter(function(xt,_n){return Y[_n][0]}).map(function(xt){return xt[0]}),ne=U.filter(function(xt,_n){return Y[_n][1]}).map(function(xt){return xt[1]});var _e=[0,0],Oe=_B(Ae,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:P},ve,ne,5,5),De=Oe.horizontal,Ye=Oe.vertical,Ve=De.offset,it=Ye.offset;if(De.isBound&&(_e[1]+=Ve),Ye.isBound&&(_e[0]+=it),(te||Z)&&Y[0][0]===0&&Y[0][1]===0){var W=$a(Q),Bt=W.bottom-W.top,Bn=te?W.right-W.left:Bt,wn=Ye.isBound?Ie(it):Ye.snapIndex===0?-it:it,yt=De.isBound?Ie(Ve):De.snapIndex===0?-Ve:Ve;Bn-=wn,Bt-=yt,Z&&(Bt=uY(Ye,De)>0?Bt:Bn,Bn=Bt);var Ft=U[0];U[1][1]=Ft[1]-Bt,U[2][0]=Ft[0]+Bn,U[3][1]=Ft[1]+Bt,U[4][0]=Ft[0]-Bn}else if(K&&x&&u){var Qr=le(UY(M),2),ze=Qr[0],mt=Qr[1],ki=ze&&mt?ze/mt:0,Zr=M[g],Pn=Zr.direction||"",Ar=U[1][1],oe=U[5][1],Se=U[7][0],se=U[3][0];Ie(Ve)<=Ie(it)?Ve=vi(Ve)*Ie(it)/ki:it=vi(it)*Ie(Ve)*ki,Pn.indexOf("w")>-1?Se-=it:Pn.indexOf("e")>-1?se-=it:(Se+=it/2,se-=it/2),Pn.indexOf("n")>-1?Ar-=Ve:Pn.indexOf("s")>-1?oe-=Ve:(Ar+=Ve/2,oe-=Ve/2);var Fn=w1(Ar,se,oe,Se);U.forEach(function(Xi,wa){var fi;fi=le(Fn[wa].pos,2),Xi[0]=fi[0],Xi[1]=fi[1]})}else U.forEach(function(xt,_n){var En=Y[_n];En[0]&&(xt[0]-=it),En[1]&&(xt[1]-=Ve)});var Sn=ND(t,v,Q),kr="".concat(R,"(").concat(Sn.join(V),")");if(O.clipPathState=kr,Z||te)ve=[U[4][0],U[2][0]],ne=[U[1][1],U[3][1]];else if(K){var Pe=[U[0],U[2],U[4],U[6]];ve=Pe.map(function(_n){return _n[0]}),ne=Pe.map(function(_n){return _n[1]})}else ve=U.map(function(xt){return xt[0]}),ne=U.map(function(xt){return xt[1]});if(O.snapBoundInfos=_B(Ae,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:P},ve,ne,1,1),A){var Ut=O.is3d,ur=O.allMatrix,di=Ut?4:3,es=_e;o&&(es=[N[0]+_e[0]-I[0],N[1]+_e[1]-I[1]]),A.deltaOffset=tn(ur,[es[0],es[1],0,0],di)}return Be(t,"onClip",dt(t,e,ae({clipEventType:"changed",clipType:R,poses:Q,clipStyle:kr,clipStyles:Sn,distX:w,distY:S},wi((i={},i[R==="rect"?"clip":"clipPath"]=kr,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Be(t,"onClipEnd",va(t,e,{})),i&&(o?X1e(t,e):a&&Y1e(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Z1e={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":mr(e.inputEvent.target,Ze("origin"))},dragControlStart:function(t,e){var n=e.datas;ff(t,e);var r=dt(t,e,{dragStart:mi.dragStart(t,new Ep().dragStart([0,0],e))}),i=Be(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(jo(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,S=[s,o];if(i){var A=e.distOrigin;(A[0]||A[1])&&(S=A)}var I=Pt(n.startOrigin,S),N=Pt(n.startTargetOrigin,S),O=tt(S,n.prevOrigin),D=Y0(h,g,I,w),P=t.getRect(),C=$a(hf(D,u,f,w)),R=[P.left-C.left,P.top-C.top];n.prevOrigin=S;var M=[ms(N[0],u,x),ms(N[1],f,x)].join(" "),V=mi.drag(t,W0(e,t.state,R,!!r)),L=dt(t,e,ae(ae({width:u,height:f,origin:I,dist:S,delta:O,transformOrigin:M,drag:V},wi({transformOrigin:M,transform:V.transform},e)),{afterTransform:V.transform}));return Be(t,"onDragOrigin",L),L},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Be(t,"onDragOriginEnd",va(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function J1e(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];eSe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function eSe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function tSe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function BB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=su(t),FY(a,e,n,0,0,r,i)}function FB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=PD(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=G1e(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=dt(t,e,ae({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},wi({borderRadius:x},e)));return Be(t,"onRound",w),w}function UB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=TD(s).borderRadius,r.borderRadius=i))}return i}var nSe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ze("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,A=S===void 0?0:S,I=h.isDisplayShadowRoundControls,N=h.groupable;if(!r)return null;var O=f||UB(t),D=o?4:3,P=BB(O,i,a,v,!0);if(!P)return null;var C=0,R=0,M=N?[0,0]:[c,u];return P.map(function(V,L){var z=V.horizontal,K=V.vertical,Y=V.direction||"",G=Re([],le(V.pos),!1);R+=Math.abs(z),C+=Math.abs(K),z&&Y.indexOf("n")>-1&&(G[1]-=A),K&&Y.indexOf("w")>-1&&(G[0]-=A),z&&Y.indexOf("s")>-1&&(G[1]+=A),K&&Y.indexOf("e")>-1&&(G[0]+=A);var X=tt(Tn(s,G,D),M),J=I&&I!=="horizontal",ee=V.vertical?C<=x[1]&&(J||!V.virtual):R<=x[0]&&(I||!V.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(L),className:Ze("control","border-radius",V.vertical?"vertical":"",V.virtual?"virtual":""),"data-radius-index":L,style:{display:ee?"block":"none",transform:"translate(".concat(X[0],"px, ").concat(X[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=dt(t,e,{}),g=Be(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,ff(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,A=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var N=UB(t),O=BB(N||"",A,I,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=PD(O,b,A,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(jo(e),2),s=a[0],o=a[1],c=[s,o],u=tt(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,A=r.map(function(N){var O=N.horizontal,D=N.vertical,P=[O*S*c[0],D*w*c[1]];if(O){if(h[0]===1)return P;if(h[0]<4&&O!==S)return P}else{if(h[1]===0)return P[1]=D*S*c[0]/v*b,P;if(w){if(h[1]===1)return P;if(h[1]<4&&D!==w)return P}}return[0,0]});A[i]=c;var I=r.map(function(N,O){return ae(ae({},N),{pos:Pt(N.pos,A[O])})});return i<4?I.slice(0,i+1).forEach(function(N){N.virtual=!1}):I.slice(4,i+1).forEach(function(N){N.virtual=!1}),n.prevDist=[s,o],FB(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var A=S.virtual;return A}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))tSe(u,s);else if(o&&(g===!0||g==="line")){var v=le(HW(t,e),2),b=v[0],x=v[1];J1e(u,c,b,x)}f!==u.filter(function(S){var A=S.virtual;return A}).length&&FB(t,e,[0,0],[0,0],u)}var w=va(t,e,{});return Be(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ks(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Be(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ks(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),wi({borderRadius:n.borderRadius},o))})},n);return Be(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=ks(t,"roundable",e);y_(t,"onRound",function(o){var c=ae({targets:t.props.targets,events:i.map(function(u,f){return ae(ae(ae({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),wi({borderRadius:o.borderRadius},u))})},o);Be(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ae({targets:t.props.targets,events:i.map(function(o,c){var u;return ae(ae({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Be(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function rSe(t,e){var n=e?4:3,r=pn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var $Y={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(DW(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=rSe(o,r)?[]:su(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return dt(t,e,{setTransform:function(n){e.datas.startTransforms=cr(n)?n:su(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return dt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRender",dt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Be(t,"onBeforeRenderEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ks(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Be(t,"onBeforeRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ks(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Be(t,"onBeforeRenderGroup",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Be(t,"onBeforeRenderGroupEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},qY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Be(t,"onRenderStart",dt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Be(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Be(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Be(t,"onRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ks(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Be(t,"onRenderGroup",dt(t,e,ae(ae({isPinch:!!e.isPinch,targets:t.props.targets,transform:px(e),transformObject:{}},wi(gx(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=ks(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Be(t,"onRenderGroupEnd",dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:px(e)},wi(gx(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return _p(p1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,transformObject:n,transform:px(e)},wi(gx(e))))},fillDragEndParams:function(t,e){var n={};return _p(p1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:px(e)},wi(gx(e))))}};function bv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=Re([],le(e),!1);if(h){var b=a.requestAble;v.some(function(L){return L.name===b})||v.push.apply(v,Re([],le(t.props.ables.filter(function(L){return L.name===b})),!1))}if(!v.length||v.every(function(L){return L.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,A=function(){var L;S=!0,(L=a.stop)===null||L===void 0||L.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var N=a.datas,O=g?"controlGesto":"targetGesto",D=t[O],P=function(L,z,K){if(!(z in L)||D!==t[O])return!1;var Y=L.name,G=N[Y]||(N[Y]={});if(o&&(G.isEventStart=!K||!L[K]||L[K](t,a)),!G.isEventStart)return!1;var X=L[z](t,ae(ae({},a),{stop:A,datas:G,originalDatas:N,inputTarget:w}));return t._emitter.off(),o&&X===!1&&(G.isEventStart=!1),X};I&&v.forEach(function(L){L.unset&&L.unset(t)}),P($Y,"drag".concat(r).concat(i));var C=0,R=0;n.forEach(function(L){if(S)return!1;var z="".concat(L).concat(r).concat(i),K="".concat(L).concat(r,"Condition");i===""&&!h&&A1e(t.state,a);var Y=v.filter(function(J){return J[z]});Y=Y.filter(function(J,ee){return J.name&&Y.indexOf(J)===ee});var G=Y.filter(function(J){return P(J,z,K)}),X=G.length;S&&++C,X&&++R,!S&&o&&Y.length&&!X&&(C+=Y.filter(function(J){var ee=J.name,Q=N[ee];return Q.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&P(qY,"drag".concat(r).concat(i));var M=D!==t[O]||C===n.length;if((c||S||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(L){L.state.gestos={}}),v.forEach(function(L){L.unset&&L.unset(t)})),o&&!M&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||M)return!1;if(!o&&R&&!s||c){var V=t.props.flushSync||wY;V(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&bv(t,e,n,r,i+"After",a),!0}function OD(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||mr(a,"moveable-area")||mr(a,"moveable-padding")||mr(a,"moveable-edgeDraggable")}}function GY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=OD(t);return KY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function HY(t,e){var n=t.controlBox,r=[];r.push(n);var i=OD(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return KY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function KY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,A=S===void 0?!0:S,I=s.dragContainer,N=Eo(I,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:A,container:N||Yc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?h:!1,dragFocusedInput:g},D=new Pxe(e,O),P=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(R){D.on("".concat(C).concat(R),function(M){var V,L=M.eventType,z=C==="drag"&&M.isPinch;if(i[L]&&!i[L](M)){M.stop();return}if(!z){var K=C==="drag"?[C]:["drag",C],Y=Re([],le(t[n]),!1),G=bv(t,Y,K,r,R,M);G?(t.props.stopPropagation||R==="Start"&&P)&&((V=M?.inputEvent)===null||V===void 0||V.stopPropagation()):M.stop()}})})}),D}var iSe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function aSe(t,e,n,r){var i;n===void 0&&(n=e);var a=ZW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=bwe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,A=b.zoom,I=r,N=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,D=c,P=pn(N),C=pn(N),R=pn(N),M=pn(N),V=s.length,L=x.map(function(ee){return ae(ae({},ee),{matrix:ee.matrix?Re([],le(ee.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(D=Os(D,3,4),jP(s)),!w&&I&&jP(L),L.forEach(function(ee){C=tn(C,ee.matrix,N)});var z=n||yu(t),K=((i=L[0])===null||i===void 0?void 0:i.target)||Qv(z,z,!0).offsetParent,Y=L.slice(1).reduce(function(ee,Q){return tn(ee,Q.matrix,N)},pn(N));s.forEach(function(ee,Q){if(V-2===Q&&(R=P.slice()),V-1===Q&&(M=P.slice()),!ee.matrix){var U=s[Q+1],Z=S1e(ee,U,K,N,tn(Y,P,N));ee.matrix=Kd(Z,N)}P=tn(P,ee.matrix,N)});var G=!O&&o;D||(D=pn(G?4:3));var X=v_(O&&D.length===16?Os(D,4,3):D,G),J=C;return C=NW(C,N,N),{hasZoom:v!==1||A!==1,hasFixed:g,matrixes:s,rootMatrix:C,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:M,allMatrix:P,targetMatrix:D,targetTransform:X,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function sSe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=TY(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=aSe(t,e,n,r),f=Yh(u.allMatrix,u.transformOrigin,i,a);o=ae(ae({},u),f);var h=Yh(u.allMatrix,[50,50],100,100);s=AY([h.pos1,h.pos2],h.direction)}var g=4;return ae(ae(ae({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:pn(g),rootMatrix:pn(g),beforeMatrix:pn(g),offsetMatrix:pn(g),allMatrix:pn(g),targetMatrix:pn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function BP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=vx(),u=vx(),f=vx(),h=vx(),g=[0,0],v={},b=sSe(e,n,i,!0);if(e){var x=Wi(e);a.forEach(function(L){v[L]=x(L)});var w=b.is3d?4:3,S=Yh(b.offsetMatrix,Pt(b.transformOrigin,OW(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Pt(S.origin,[S.left-b.left,S.top-b.top]),h=yv(b.offsetRootContainer);var A=Qv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Yh(tn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),N=Yh(b.originalRootMatrix,y1(Wi(A)("transformOrigin")).map(function(L){return parseFloat(L)}),A.offsetWidth,A.offsetHeight);if(c=gk(I,h),f=gk(N,h,A,!0),t){var O=I.left,D=I.top;u=gk({left:O,top:D,bottom:D,right:D},h)}}else{c=yv(e),f=ywe(A),t&&(u=yv(t));var P=f.left,C=f.top,R=f.clientLeft,M=f.clientTop,V=[c.left-P,c.top-C];g=tt(kp(b.rootMatrix,V,4),[R+b.left,M+b.top])}}return ae({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function $B(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Wd([e,n,r,i]),s=[a.minX,a.minY],o=tt(t.origin,s);return e=tt(e,s),n=tt(n,s),r=tt(r,s),i=tt(i,s),ae(ae({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var Cp=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ae({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},BP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new c_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}wbe(n._observerId),n._observerId=aW(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,A=r.top,I=r.target,N=r.direction,O=r.hasFixed,D=r.offsetDelta,P=n.targets,C=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Y){R["data-able-".concat(Y.name.toLowerCase())]=!0});var M=this._getAbleClassName(),V=P&&P.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,L=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[S-x,A-w];!h&&n.useAccuratePosition&&(z[0]+=D[0],z[1]+=D[1]);var K={position:O?"fixed":"absolute",display:V?"block":"none",visibility:L?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(K["--moveable-line-padding"]=g),v&&(K["--moveable-control-padding"]=v),As(f,ae({cspNonce:c,ref:gl(this,"controlBox"),className:"".concat(Ze("control-box",N===-1?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(a)},R,{onClick:this._onPreventClick,style:K}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Lh(this,!1),Lh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Ki(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(hD)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&OD(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(ng(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ae({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=fB([a,s,c,o],u),S=Exe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),A=jW(w);return!S||!A?0:Math.min(100,S/A*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?_P([n,r],fB([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Tp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=BP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=$B(a.persistData);for(var b in v)g[b]=v[b]}s&&Tp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ha(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=$a(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Pt(w,n.origin),A=Pt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:A,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&zP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&zP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return I1e(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Ki(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Re([],le(o[v]),!1),w={request:function(S){return bv(a,x,["drag"],b,"",ae(ae({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return bv(a,x,["drag"],b,"End",ae(ae({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return bv(a,x,["drag"],b,"Start",ae(ae({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=jY(i||{}),A=S.left,I=S.top,N=S.bottom,O=S.right,D=c?4:3,P=[];x?P=s:this.controlBox&&r.groupable?P=a:P=Pt(a,[v,b]);var C=f1(D,Kd(P.map(function(K){return-K}),D),o,Kd(s,D)),R=Ra(C,u,[-A,-I],D),M=Ra(C,f,[O,-I],D),V=Ra(C,h,[-A,N],D),L=Ra(C,g,[O,N],D);n.renderPoses=[R,M,V,L],n.renderLines=[[R,M],[M,L],[L,V],[V,R]];{var z=w/2;n.renderLines=[[Ra(C,u,[-A-z,-I],D),Ra(C,f,[O+z,-I],D)],[Ra(C,f,[O,-I-z],D),Ra(C,g,[O,N+z],D)],[Ra(C,g,[O+z,N],D),Ra(C,h,[-A-z,N],D)],[Ra(C,h,[-A,N+z],D),Ra(C,u,[-A,-I-z],D)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!LP(o,r),f=u||!LP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=VW(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=$B(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=yx(s,[o,c],a),h=yx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:As};return this.renderState={},T1e(OY(yx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},Re([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Lh(this,!1),this.updateState({gestos:{}})),r||Lh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=GY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=HY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Eo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:As};return c.renderLines.map(function(f,h){return Xv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=Cl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=yx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new iSe(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Eo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Eo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Re(Re([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?j1e:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=NY(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=F0(a,i),o=s.removed,c=s.added;o.forEach(function(u){uW(r,a[u])}),c.forEach(function(u){cW(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Ze("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Yc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Yc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=Fxe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:wY,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(vW),DD={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Vh(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=Vh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Re(Re([],le(i.map(function(b,x){return e.createElement(Cp,{key:"moveable"+x,ref:tW(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(OY(f.map(function(b,x){var w=b.pos1,S=b.pos2,A=b.pos3,I=b.pos4,N=[w,S,A,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,D){var P=le(O,2),C=P[0],R=P[1];return Xv(e,"",tt(N[C],g),tt(N[R],g),u,"group-rect-".concat(x,"-").concat(D))})}))),!1)}},oSe=K0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Be(t,"onClick",dt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=kl(i,function(c){return c.contains(r)}),o=a>-1),Be(t,"onClickGroup",dt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function uh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ae(ae({},t),{datas:e})}var lSe=K0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?tY(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("edge"))&&mr(i,Ze("edgeDraggable"))},dragStart:function(t,e){return mi.dragStart(t,uh(e))},drag:function(t,e){return mi.drag(t,uh(e))},dragEnd:function(t,e){return mi.dragEnd(t,uh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("line"))},dragGroupStart:function(t,e){return mi.dragGroupStart(t,uh(e))},dragGroup:function(t,e){return mi.dragGroup(t,uh(e))},dragGroupEnd:function(t,e){return mi.dragGroupEnd(t,uh(e))},unset:function(t){return mi.unset(t)}}),WY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},RD=[$Y,VY,f1e,N1e,mi,lSe,DP,O1e,R1e,Wwe,V1e,B1e,z1e,Z1e,Q1e,nSe,DD,WY,oSe,LY,qY],cSe=RD.reduce(function(t,e){return(e.events||[]).forEach(function(n){lW(t,n)}),t},[]),uSe=RD.reduce(function(t,e){return(e.props||[]).forEach(function(n){lW(t,n)}),t},[]);function qB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function wx(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function GB(t,e){return Math.max.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function HB(t,e){return Math.min.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function dSe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ot(e,Ei);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[IP,gB],w=[[0,0],[0,0]],S=[IP,gB],A=[[0,0],[0,0]];t.forEach(function(te){te.forEach(function(W){var ue=qB([-v,1,0],W),ie=qB([-b,1,0],W);x[0]>ue&&(w[0]=W,x[0]=ue),x[1]<ue&&(w[1]=W,x[1]=ue),S[0]>ie&&(A[0]=W,S[0]=ie),S[1]<ie&&(A[1]=W,S[1]=ie)})});var I=le(w,2),N=I[0],O=I[1],D=le(A,2),P=D[0],C=D[1],R=[-v,1,wx([-v,1],N)],M=[-v,1,wx([-v,1],O)],V=[-b,1,wx([-b,1],P)],L=[-b,1,wx([-b,1],C)];n=le([[R,V],[R,L],[M,V],[M,L]].map(function(te){var W=le(te,2),ue=W[0],ie=W[1];return dD(ue,ie)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var z=HB(t,0),K=HB(t,1),Y=GB(t,0),G=GB(t,1);if(a=[z,K],s=[Y,K],o=[z,G],c=[Y,G],u=Y-z,f=G-K,h%180){var X=[o,a,c,s];r=le(X,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-K,f=Y-z}}if(h%360>180){var X=[c,o,s,a];i=le(X,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Wd([a,s,o,c]),ee=J.minX,Q=J.minY,U=J.maxX,Z=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ee,minY:Q,maxX:U,maxY:Z,rotation:e}}function YY(t,e){var n=e.map(function(r){if(cr(r)){var i=YY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Ki(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&cr(n[0])?n[0]:n}var fSe=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new MW,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Tp(!0),this.moveables.forEach(function(Se){Se.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(Se){return{finded:!1,manager:Se}}),h=this.props.targetGroups||[],g=YY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,Re([],le(f.filter(function(Se){var se=Se.finded;return!se}).map(function(Se){var se=Se.manager;return se})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function A(Se,se,Ae){var ve=Se.map(function(Ye){if(cr(Ye)){var Ve=A(Ye,se),it=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return b.push(Ve),{poses:it,rotation:Ve.rotation}}else return{poses:Ha(Ye.state),rotation:Ye.getRotation()}}),ne=ve.map(function(Ye){var Ve=Ye.rotation;return Ve}),Pe=0,be=ne[0],_e=ne.every(function(Ye){return Math.abs(be-Ye)<.1});x?Pe=!v&&_e?be:w:Pe=!v&&!Ae&&_e?be:se;var Oe=ve.map(function(Ye){var Ve=Ye.poses;return Ve}),De=dSe(Oe,Pe);return De}var I=A(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var N=this.transformOrigin,O=this.rotation,D=this.scale,P=I.width,C=I.height,R=I.minX,M=I.minY,V=P1e([[0,0],[P,0],[0,C],[P,C]],ID(N,P,C),this.rotation/180*Math.PI),L=Wd(V.result),z=L.minX,K=L.minY,Y=" rotate(".concat(O,"deg)")+" scale(".concat(vi(D[0]),", ").concat(vi(D[1]),")"),G="translate(".concat(-z,"px, ").concat(-K,"px)").concat(Y);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(P,"px;height:").concat(C,"px;")+"transform: ".concat(G),s.width=P,s.height=C;var X=this.getContainer(),J=BP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||X,[]),ee=[J.left,J.top],Q=le(Ha(J),4),U=Q[0],Z=Q[1],te=Q[2],W=Q[3],ue=Wd([U,Z,te,W]),ie=[ue.minX,ue.minY],oe=vi(D[0]*D[1]);J.pos1=tt(U,ie),J.pos2=tt(Z,ie),J.pos3=tt(te,ie),J.pos4=tt(W,ie),J.left=R-J.left+ie[0],J.top=M-J.top+ie[1],J.origin=tt(Pt(ee,J.origin),ie),J.beforeOrigin=tt(Pt(ee,J.beforeOrigin),ie),J.originalBeforeOrigin=Pt(ee,J.originalBeforeOrigin),J.transformOrigin=tt(Pt(ee,J.transformOrigin),ie),u.style.transform="translate(".concat(-z-ie[0],"px, ").concat(-K-ie[1],"px)")+Y,Tp(),this.updateState(ae(ae({},J),{posDelta:ie,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Re(Re([],le(this.props.ables),!1),[DD],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Eo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Lh(this,!1),Lh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=GY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=HY(this,"GroupControl")));var g=!LP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!MY(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ae(ae({},Cp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Cp),hSe=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),As(s,{cspNonce:a,ref:gl(this,"controlBox"),className:Ze("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return As(Cp,ae({key:"moveable"+v,ref:tW(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Tp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Tp()},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ae(ae({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Ki(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Cp);function XY(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push.apply(n,Re([],le(XY(r,e)),!1)):n.push(r)}}),n}function QY(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push(QY(r,e)):n.push(r)}}),n}function ZY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?cr(n)&&cr(i)?ZY(n,i):!0:!1})}var pSe=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new MW,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=Cl(n).join(`
`);this.defaultStyled=VW("div",cbe(hD,Zxe+i))},e.getTotalAbles=function(){return Re([VY,DD,WY,LY],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Vxe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=XY(u,f),g=h.length>1,v=r.getTotalAbles(),b=Re(Re([],le(v),!1),le(a||[]),!1),x=ae(ae(ae({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,A=o.persistData;if(A?.children&&(g=!0),o.individualGroupable)return As(hSe,ae({key:"individual-group",ref:gl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=QY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var N=S.props.target;N&&h.indexOf(N)>-1&&(w=ae({},S.state))}return As(fSe,ae({key:"group",ref:gl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var D=S.moveables||[],P=Ki(D,function(C){return C.props.target===O});P&&(w=ae({},P.state))}return As(Cp,ae({key:"single",ref:gl(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=CD(this.props.target||this.props.targets),a=typeof document<"u",s=ZY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Hi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else cr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Bxe([ube(GW)],e.prototype,"moveable",void 0),e})(vW),gSe=(function(t){H0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=RD,e})(pSe),FP=function(t,e){return FP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},FP(t,e)};function MD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");FP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zv=function(){return Zv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zv.apply(this,arguments)};function mSe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var vSe=(function(t){MD(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return As(gSe,Zv({ref:gl(this,"moveable")},this.state))},e})(aD),ySe=uSe,bSe=GW,xSe=cSe,wSe=(function(t){MD(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Zv({},i),o={};xSe.forEach(function(f){o[xbe("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=tg(r).createElement("div"),r.appendChild(c)),a.containerProvider=cB(As(vSe,Zv({ref:gl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return cr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;cB(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=mSe([eB(bSe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),eB(ySe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(c_),JY=(function(t){MD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(wSe),Uc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Uc||{}),Ym=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Ym||{});const SSe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],_Se=["touchstart","touchmove","touchend","touchcancel"],ESe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function TSe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function ASe(t){var e;return SSe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function eX(t){var e;return _Se.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function kSe(t){const{nativeEvent:e}=t;return e?ESe.includes(e?.type)||"pointerId"in e:!1}function yk(t){return ASe(t)||eX(t)||kSe(t)}function KB(t){var e;const n=eX(t)?(e=t?.touches)==null?void 0:e[0]:t;return TSe(n)?{x:n.pageX,y:n.pageY}:null}function CSe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function jD(t,{threshold:e=400,captureEvent:n=!1,detect:r=Uc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=T.useRef(!1),g=T.useRef(!1),v=T.useRef(),b=T.useRef(),x=T.useRef(t),w=T.useRef(null),S=T.useCallback(O=>D=>{g.current||yk(D)&&(s!==void 0&&!s(D)||(n&&D.persist(),o?.(D,{context:O}),w.current=KB(D),g.current=!0,v.current=D.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(D,{context:O}),h.current=!0)},e)))},[n,s,o,e]),A=T.useCallback(O=>(D,P)=>{yk(D)&&g.current&&(w.current=null,n&&D.persist(),h.current?u?.(D,{context:O}):g.current&&f?.(D,{context:O,reason:P??Ym.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=T.useCallback(O=>D=>{if(yk(D)&&(c?.(D,{context:O}),i!==!1&&w.current)){const P=KB(D);if(P){const C=i===!0?25:i,R={x:Math.abs(P.x-w.current.x),y:Math.abs(P.y-w.current.y)};(R.x>C||R.y>C)&&A(O)(D,Ym.CancelledByMovement)}}},[A,i,c]),N=T.useCallback(O=>{if(t===null)return{};switch(r){case Uc.Mouse:{const D={onMouseDown:S(O),onMouseMove:I(O),onMouseUp:A(O)};return a&&(D.onMouseLeave=P=>{A(O)(P,Ym.CancelledOutsideElement)}),D}case Uc.Touch:return{onTouchStart:S(O),onTouchMove:I(O),onTouchEnd:A(O)};case Uc.Pointer:{const D={onPointerDown:S(O),onPointerMove:I(O),onPointerUp:A(O)};return a&&(D.onPointerLeave=P=>A(O)(P,Ym.CancelledOutsideElement)),D}}},[t,A,a,r,I,S]);return T.useEffect(()=>{function O(D){const P=CSe(D);A()(P)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[A]),T.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),T.useEffect(()=>{x.current=t},[t]),N}const tX=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},S1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,ad=t=>S1(t).toISOString(),ISe=t=>{const e=S1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},PSe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Xh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=ad(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||ISe(r),description:e.description||"",merchant:e.merchant||void 0,type:PSe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},Sx=t=>Wr(rt,"users",t,"transactions"),NSe={subscribeToTransactions:(t,e)=>{const n=Bi(Sx(t),Es("date","desc"));return ru(n,i=>{const a=i.docs.map(s=>Xh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Bi(Sx(t),ow("month","==",e),Es("date","desc"));return ru(r,i=>{const a=i.docs.map(s=>Xh({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Bi(Sx(t),Es("date","desc")),r=(await sa(e)).docs.map(i=>Xh({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await ZS(Sx(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=_t(rt,"users",t,"transactions",e);return await fo(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=_t(rt,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await ca(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},bk=t=>Wr(rt,"users",t,"envelopes"),OSe={subscribeToEnvelopes:(t,e)=>{const n=Bi(bk(t),Es("orderIndex","asc"));return ru(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=bk(t),i=(await sa(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await ZS(bk(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=_t(rt,"users",t,"envelopes",e.id);return await la(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=_t(rt,"users",t,"envelopes",e);return await fo(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=_t(rt,"users",t,"envelopes",e);await ca(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},xk=t=>Wr(rt,"users",t,"distributionTemplates"),DSe={subscribeToDistributionTemplates:(t,e)=>{const n=Bi(xk(t),Es("lastUsed","desc"));return ru(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Bi(xk(t),Es("lastUsed","desc"));return(await sa(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await ZS(xk(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=_t(rt,"users",t,"distributionTemplates",e.id);return await la(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=_t(rt,"users",t,"distributionTemplates",e);return await fo(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=_t(rt,"users",t,"distributionTemplates",e);await ca(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},wk=t=>Wr(rt,"users",t,"appSettings"),nX={subscribeToAppSettings:(t,e)=>{const n=Bi(wk(t),I5(1));return ru(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Bi(wk(t),I5(1)),n=await sa(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await ZS(wk(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=_t(rt,"users",t,"appSettings",e.id);return await la(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=_t(rt,"users",t,"appSettings",e);return await la(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=_t(rt,"users",t,"appSettings",e);await ca(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},WB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:nX},Symbol.toStringTag,{value:"Module"}));class ul{static instance;constructor(){}static getInstance(){return ul.instance||(ul.instance=new ul),ul.instance}createId(){return _t(Wr(rt,"temp")).id}async createCategory(e){const n=_t(rt,`users/${e.userId}/categories`,e.id);return await la(n,e),e}async getCategories(e){const n=Bi(Wr(rt,`users/${e}/categories`),Es("orderIndex","asc"));return(await sa(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=_t(rt,`users/${e}/categories`,n.id);await la(r,n,{merge:!0})}async deleteCategory(e,n){const r=_t(rt,`users/${e}/categories`,n);await ca(r)}async reorderCategories(e,n){const r=UI(rt);n.forEach((i,a)=>{const s=_t(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=UI(rt);i.slice(s,s+a).forEach(u=>{const f=_t(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Bi(Wr(rt,`users/${e}/categories`),Es("orderIndex","asc"));return ru(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}ul.getInstance();class ws{static instance;static getInstance(){return ws.instance||(ws.instance=new ws),ws.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=_t(rt,"users",e,s,f);i.push({ref:h,data:u})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=UI(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=Wr(rt,"users",e,"envelopes"),a=(await sa(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=Wr(rt,"users",e,"transactions"),r=Bi(n,Es("date","desc")),a=(await sa(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Xh(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Wr(rt,"users",e,"transactions"),i=Bi(r,ow("month","==",n),Es("date","desc")),s=(await sa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Xh(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Wr(rt,"users",e,"transactions"),i=Bi(r,ow("envelopeId","==",n),Es("date","desc")),s=(await sa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Xh(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Wr(rt,"users",e.userId,"envelopes"),r=_t(n),i=ht.now(),a={...e,createdAt:i,lastUpdated:i};la(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:ad(i),lastUpdated:ad(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=_t(rt,"users",e,"envelopes",n.id);la(r,{...n,lastUpdated:ht.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=_t(rt,"users",e,"envelopes",n),i=Bi(Wr(rt,"users",e,"transactions"),ow("envelopeId","==",n)),s=(await sa(i)).docs.map(o=>ca(o.ref));await Promise.all([ca(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=_t(rt,"users",e,"envelopes",i.id);return la(a,{orderIndex:i.orderIndex,lastUpdated:ht.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=Wr(rt,"users",e.userId,"transactions"),r=_t(n),i=ht.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};la(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=_t(rt,"users",e,"transactions",n.id);la(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=_t(rt,"users",e,"transactions",n);ca(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=_t(rt,"users",e.userId,"monthlyBudgets",e.month),r=ht.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};fo(n,{incomeSources:dpe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?la(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:ad(r),updatedAt:ad(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=_t(rt,"users",e,"monthlyBudgets",r);zA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:ht.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});fo(a,{incomeSources:u,updatedAt:ht.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=_t(rt,"users",e,"monthlyBudgets",r);zA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);fo(i,{incomeSources:c,updatedAt:ht.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=_t(rt,"users",e.userId,"monthlyBudgets",e.month),r=ht.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};fo(n,i).catch(s=>{s.code==="not-found"?la(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:ad(r),updatedAt:ad(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=_t(rt,"users",e,"monthlyBudgets",r),s={updatedAt:ht.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),fo(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=_t(rt,"users",e,"monthlyBudgets",r);fo(i,{[`allocations.${n}`]:T5(),updatedAt:ht.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=_t(rt,"users",e,"monthlyBudgets",n),i=await zA(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=Wr(rt,"users",e,"envelopeAllocations"),s=await sa(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>ca(_t(rt,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=Wr(rt,"users",e,"monthlyBudgets"),f=await sa(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(A=>{i.has(A)||(w[`allocations.${A}`]=T5(),S=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${A}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${A}`))}),S&&(w.updatedAt=ht.now(),await fo(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>ca(_t(rt,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=_t(rt,"users",e,"monthlyBudgets",n);return ru(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=Wr(rt,"users",e,r),a=await sa(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>ca(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const zD=ws.getInstance(),RSe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),MSe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),YB=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=OSe.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(RSe),b=t.getState(),x=new Set(b.envelopes.map(A=>A.id)),w=new Set(v.map(A=>A.id)),S=[...v.filter(A=>x.has(A.id)),...b.envelopes.filter(A=>!w.has(A.id))];t.setState({envelopes:S})}),i={},a=g=>{i[g]||(i[g]=NSe.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(S=>S.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=ul.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(MSe),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=DSe.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=nX.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=zD.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},jSe=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),YB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),YB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=zD.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Zu=ws.getInstance(),_x=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},zSe=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=_x(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Zu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=_x(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Zu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=_x();await Zu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=_x(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Zu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=nn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await Zu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=nn.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await Zu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=nn.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await Zu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),dh=ws.getInstance(),fh=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},LSe=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh(),i={...n,userId:r.id},a=await dh.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh();await dh.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh();await dh.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=fh();await dh.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=fh(),o={...a,name:r};await dh.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=fh(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await dh.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),hh=ws.getInstance(),ph=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},VSe=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ph();$.log(" Adding income source:",{month:n,source:r});const a=await hh.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await hh.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await hh.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=ph();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if($.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ph(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=ph(),i=e().currentMonth,a=await hh.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=ph(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await hh.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=ph();await hh.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),no=ul.getInstance(),Am=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},BSe=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=nn.getState();if(!n)return;const r=await no.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=Am(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=no.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await no.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=Am(),i={...n,updatedAt:new Date().toISOString()};await no.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=Am(),i=e().envelopes.filter(a=>a.categoryId===n);if(i.length>0){let a=e().categories.find(s=>s.name.toLowerCase().trim()==="uncategorized"&&s.id!==n);if(!a){const s=no.createId(),o=new Date().toISOString();a={id:s,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:o,updatedAt:o},await no.createCategory(a),t(c=>c.categories.some(f=>f.id===s)?{}:{categories:[...c.categories,a]}),$.log(' Created new "Uncategorized" category for orphaned envelopes:',s)}for(const s of i){const o={...s,categoryId:a.id};await e().updateEnvelope(o)}$.log(` Reassigned ${i.length} envelopes to "Uncategorized"`)}await no.deleteCategory(r.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},ensureDefaultCategory:async()=>{const n=e().categories.find(o=>o.isDefault);if(n)return n.id;const r=Am(),i=no.createId(),a=new Date().toISOString(),s={id:i,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:a,updatedAt:a};return await no.createCategory(s),t(o=>o.categories.some(u=>u.id===i)?{}:{categories:[...o.categories,s]}),$.log(' Created default "Uncategorized" category:',i),i},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=Am(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await no.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),FSe=ws.getInstance(),Ju=()=>nn.getState().currentUser?.id||"",USe=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Ju();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await FSe.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Ju();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Ju();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Ju();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Ju();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Ju();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Ju();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),$Se=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=nn.getState();if(a){const{AppSettingsService:s}=await Jh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>WB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=nn.getState();if(r){const{AppSettingsService:a}=await Jh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>WB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),km=ws.getInstance(),Sk=ul.getInstance(),XB=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},qSe=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([km.getEnvelopes(r.id),Sk.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),km.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await Sk.deduplicateCategories(r.id)>0&&(c=await Sk.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await km.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=XB(),{monthlyBudgetService:i}=await Jh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-sGH-p8-j.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=nn.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await km.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=XB();return $.log(" Starting Time Machine Restore for user:",r.id),await km.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),GSe=()=>nn.getState().currentUser?.id||"",gt=h2()(Nue(Pq((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...zSe({set:t,get:e}),...LSe({set:t,get:e}),...VSe({set:t,get:e}),...BSe({set:t,get:e}),...USe({set:t,get:e}),...$Se({set:t,get:e}),...qSe({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));jSe({useBudgetStore:gt,useAuthStore:nn,getCurrentUserId:GSe});const rX=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:gt},Symbol.toStringTag,{value:"Module"})),QB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},HSe=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=gt(),{currentUser:s}=nn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=gt(),{showToast:b}=vu(),[x,w]=T.useState(!1),S=T.useRef(null),[A,I]=T.useState(!1),N=!A||r||v,[O,D]=T.useState([]),P=T.useRef([]),[C,R]=T.useState([]),M=T.useRef([]),V=T.useCallback(te=>t.find(ie=>ie.id===te)?.isPiggybank?gt.getState().getEnvelopeBalance(te):gt.getState().getEnvelopeBalance(te,o),[t,o]);T.useEffect(()=>{const te=t.filter(W=>{if(!W.isPiggybank||!W.isActive)return!1;if(W.createdAt)try{const ue=QB(W.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${W.name}:`,W.createdAt),!1;const ie=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ie}catch(ue){return $.error(` Error processing piggybank ${W.name}:`,ue,{createdAt:W.createdAt,typeofCreatedAt:typeof W.createdAt}),!1}return!0}).sort((W,ue)=>{const ie=W.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});R(te),M.current=te},[t,o]);const L=C,z=O;T.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),T.useEffect(()=>{A&&!r&&!v&&(w(!1),S.current&&clearTimeout(S.current))},[A,r,v]),T.useEffect(()=>{const te=t.filter(W=>{if(W.isPiggybank||W.isActive===!1)return!1;const ie=(u[o]||[]).some(Se=>Se.envelopeId===W.id),oe=e.some(Se=>Se.envelopeId===W.id&&(Se.month===o||Se.date.startsWith(o)));return ie||oe}).sort((W,ue)=>{const ie=W.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});D(te),P.current=te},[t,u,o,e]);const K=(c[o]||[]).reduce((te,W)=>te+W.amount,0),Y=(u[o]||[]).filter(te=>z.some(W=>W.id===te.envelopeId)||L.some(W=>W.id===te.envelopeId)).reduce((te,W)=>te+W.budgetedAmount,0),G=K-Y,X=T.useCallback(async te=>{if(!te.length)return;const W=te.map(ue=>ue.id);try{await a(W)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),J=T.useCallback(async te=>{await X(te)},[X]),ee=T.useCallback(te=>{f(o,te.id).catch($.error),b(`Deleted "${te.name}"`,"neutral")},[f,o,b]),Q=T.useCallback(async te=>{try{const W=te||o;$.log(" Copying to month:",W),await g(W),b("Previous month budget copied","success")}catch(W){$.error("Error copying previous month:",W),b("Failed to copy previous month","error")}},[g,b,o]),U=T.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await gt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(te){$.error("Error clearing month data:",te),b("Failed to clear month data","error")}},[s,o,b]),Z=T.useCallback(async(te,W)=>{try{await h(te,W),setTimeout(()=>{const ue=gt.getState(),ie=ue.currentMonth,oe=ue.incomeSources[ie]||[],Se=ue.allocations[ie]||[],se=new Set(ue.envelopes.filter(Pe=>{if(Pe.isPiggybank){if(!Pe.isActive)return!1;if(Pe.createdAt){const be=QB(Pe.createdAt);if(!be)return!1;const _e=`${be.getFullYear()}-${String(be.getMonth()+1).padStart(2,"0")}`;return ie>=_e}return!0}return Pe.isActive!==!1}).map(Pe=>Pe.id)),Ae=Se.filter(Pe=>se.has(Pe.envelopeId)),ve=oe.reduce((Pe,be)=>Pe+be.amount,0),ne=Ae.reduce((Pe,be)=>Pe+be.budgetedAmount,0);ve-ne<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ve-ne)<.005&&ve>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:L,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:N,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:V,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ee,clearMonthData:U,copyFromPreviousMonth:Q,setEnvelopeAllocation:Z,localOrderRef:P,setLocalEnvelopes:D,localPiggybankOrderRef:M,setLocalPiggybanks:R}},KSe=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,S=Math.abs(b)<.005,A=b<-.005,I=x>0?w/x*100:0;let N="text-gray-900 dark:text-white",O="bg-green-500",D="Left to Budget",P=x>0?Math.min(I,100):0,C=!0;return x===0?(D="Add income to start budgeting",P=0,C=!1,N="text-gray-500 dark:text-zinc-500"):S?(N="text-green-600 dark:text-emerald-400",O="bg-green-500",D="Perfect! Every dollar has a job ",P=100,C=!1):A&&(N="text-red-600 dark:text-red-400",O="bg-red-500",D="You're not in Congress! Try again.",P=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${N}`,children:D}),C&&m.jsxs("span",{className:`text-sm font-bold truncate ${N}`,children:[A?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${P}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(sce,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(hs,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},b_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=sbe(),[a,s]=T.useState(!1),o=T.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(Tv,{className:"text-white w-6 h-6"})}),m.jsx(bt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},WSe=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=gt(),{showToast:o}=vu(),[c,u]=T.useState(""),[f,h]=T.useState(""),[g,v]=T.useState(!1);T.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const A=(parseInt(w,10)/100).toFixed(2);h(A)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},YSe=({isVisible:t,onClose:e,categories:n,currentCategoryId:r,envelopeName:i,onSelect:a})=>(T.useEffect(()=>{if(t){const s=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,s)}}},[t]),m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm max-h-[70vh] overflow-hidden relative z-10 pb-[calc(env(safe-area-inset-bottom)+5rem)]",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(f2,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Move Envelope"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors text-lg",children:""})]}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800/50",children:m.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Moving ",m.jsx("span",{className:"font-medium text-gray-700 dark:text-zinc-300",children:i})," to:"]})}),m.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:n.map(s=>{const o=s.id===r;return m.jsxs("button",{onClick:()=>{o||a(s.id)},disabled:o,className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${o?"bg-blue-50 dark:bg-blue-900/20 cursor-default":"hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700"}`,children:[m.jsx("span",{className:`text-sm ${o?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:s.name}),o&&m.jsx(d2,{size:16,className:"text-blue-600 dark:text-blue-400"})]},s.id)})})]})]})})),XSe=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(Sq,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(Gh,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},QSe="/personal-budget-pwa/icon-512.png",_k="/personal-budget-pwa/images/budget-balanced.png",Ex=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],ZSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),JSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),e_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),t_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(cf,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),n_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),r_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),ro=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],i_e=()=>{const[t,e]=T.useState(ro),n=sl.useRef(0);return T.useEffect(()=>{const r=[()=>e([ro[1],ro[0],ro[2],ro[3]]),()=>e([ro[3],ro[1],ro[0],ro[2]]),()=>e(ro)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(lr,{mode:"popLayout",children:t.map(r=>m.jsxs(bt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(tp,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},a_e=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=T.useState(0),[a,s]=T.useState(0),[o,c]=T.useState(2500),[u,f]=T.useState(Ex),[h,g]=T.useState(!1),{addCategory:v}=gt(),b=M=>{f(V=>V.includes(M)?V.filter(L=>L!==M):[...V,M])},x=async()=>{for(let M=0;M<u.length;M++)await v({name:u[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let M=0;M<Ex.length;M++)await v({name:Ex[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};T.useEffect(()=>{if(r===5){c(2500);const M=2e3,V=20,L=M/V,z=2500/V;let K=0;const Y=setInterval(()=>{K++;const G=Math.max(0,2500-z*K);c(G),K>=V&&(clearInterval(Y),setTimeout(()=>{let X=0;const J=10,ee=200,Q=500/J,U=setInterval(()=>{X++;const Z=-(Q*X);c(Z),X>=J&&clearInterval(U)},ee)},1e3))},L);return()=>clearInterval(Y)}},[a,r]);const A=(M=>{const[V,L]=M.split("-");return new Date(parseInt(V),parseInt(L)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),I=[{icon:Gh,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${A}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Ch,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(rp,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:aue,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:Ex.map(M=>m.jsxs("button",{onClick:()=>b(M),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(M)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(M)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(M)&&m.jsx(co,{size:12,className:"text-white"})}),M]},M))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:Ch,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(ZSe,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(uf,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:rp,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(JSe,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(co,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:tp,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(tp,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(i_e,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:jc,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(e_e,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(M=>M+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Zce,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(bt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:cf,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(t_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(oue,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ch,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jc,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:Dw,title:"Charts: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Charts"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx(n_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(_q,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Dw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Charts"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:jc,title:"Charts: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(r_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ch,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jc,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:_k,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Charts"].map((M,V)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:V+1})}),m.jsx("span",{className:"text-sm",children:M})]},V))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],N=I[r],O=N.useCustomIcon?_k:N.icon,D=r===I.length-1,P=r===0,C={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=C[N.color]||C.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(lr,{mode:"wait",children:m.jsxs(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(Cq,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:N.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:N.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:QSe,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):N.useCustomIcon?m.jsx("img",{src:_k,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof O=="string"?null:m.jsx(O,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:N.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:I.map((M,V)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${V===r?`w-8 ${R.button}`:V<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},V))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",I.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!P&&m.jsxs("button",{onClick:()=>i(M=>M-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(Ps,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(D)x();else{if(N.title.includes("Choose Categories")&&u.length===0)return;i(M=>M+1)}},disabled:N.title.includes("Choose Categories")&&u.length===0,className:`${P?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:D?m.jsxs(m.Fragment,{children:[m.jsx(Gh,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(Xle,{className:"w-5 h-5"})]})})]})]},r)})]})})},s_e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o,onMoveCategory:c})=>{const u=T.useRef(null),[f,h]=T.useState(!1),g=jD(M=>{tX(),o(M,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),v=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,x=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,S=e,A=(M,V=1)=>{const L=M.replace("#",""),z=parseInt(L,16),K=z>>16&255,Y=z>>8&255,G=z&255;return`rgba(${K}, ${Y}, ${G}, ${V})`},I=`linear-gradient(135deg, ${A(x,.14)} 0%, ${A(x,.05)} 100%)`,N=A(x,.4),O=v&&v>0?Math.min(S/v*100,100):0,D=v&&S>=v;T.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),T.useEffect(()=>{a===t.id&&(h(!0),s&&s(t.id))},[a,t.id,s]),T.useEffect(()=>{if(!a&&f){const M=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(M)}},[a,f]);const P=M=>{if(f||i){M.preventDefault(),M.stopPropagation();return}n(t.id)},C=a===t.id,R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:M=>o(M,t.id),children:m.jsx(tp,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${x}20`},children:m.jsx(cf,{size:12,style:{color:x}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(jc,{size:10,style:{color:x}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Gce,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c&&m.jsx("button",{onClick:M=>{M.stopPropagation(),c(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(f2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",S.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",v?.toFixed(0)||"0"]})]})]})]}),v&&v>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:x}})}),D&&!v&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(bt.div,{...g(),layout:!C,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:M=>{r&&r(M),u.current=M},onClick:P,style:{background:I,borderColor:N,boxShadow:C?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:C?50:1,scale:C?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},Cm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},o_e=12,l_e=(t,e,n)=>Math.min(Math.max(t,e),n),c_e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f,onMoveCategory:h})=>{const g=!!t.isPiggybank,v=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${Cm(v,.18)} 0%, ${Cm(v,.08)} 100%)`:void 0,x=g?Cm(v,.5):void 0,[w,S]=T.useState(!1),A=jD(L=>{tX(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),I=i.filter(L=>L.envelopeId===t.id&&L.month===a),N=I.filter(L=>L.type==="Expense"),O=I.filter(L=>L.type==="Income"),D=N.reduce((L,z)=>L+(z.amount||0),0),P=O.reduce((L,z)=>L+(z.amount||0),0),C=P>0?Math.max(0,D/P*100):0,R=L=>{if(w||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};T.useEffect(()=>{c&&c!==t.id&&S(!1)},[c,t.id]),T.useEffect(()=>{c===t.id&&(S(!0),u(t.id))},[c,t.id,u]),T.useEffect(()=>{if(!c&&w){const L=setTimeout(()=>{S(!1)},300);return()=>clearTimeout(L)}},[c,w]);const M=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:m.jsx(tp,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[g&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:Cm(v,.4),backgroundColor:Cm(v,.15),color:v},children:m.jsx(cf,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:L=>{L.stopPropagation(),h(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(f2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"text-red-500":C>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"bg-red-500":C>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-C,2)}%`}})})})]})]}),V=c===t.id;return m.jsx(bt.div,{...A(),layout:!V,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:R,style:{boxShadow:V?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:x,cursor:V?"grabbing":"pointer",zIndex:V?50:1,scale:V?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:M})},u_e=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1,onMoveCategory:u})=>{const[f,h]=T.useState(e),g=T.useRef(e),[v,b]=T.useState(!1),[x,w]=T.useState(null),S=T.useRef(!1),A=T.useRef(null),I=T.useRef({}),N=T.useRef({}),O=T.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});T.useEffect(()=>{v||(h(e),g.current=e)},[e,v]);const D=T.useCallback((C,R)=>{const M=N.current[R];if(M){S.current=!0;const V=C.nativeEvent||C;M.dragStart(V)}},[]),P=T.useCallback(C=>R=>{R?I.current[C]=R:delete I.current[C]},[]);return T.useEffect(()=>{const C=()=>{Object.values(N.current).forEach(V=>V?.destroy()),N.current={}};if(!f.length)return;const R=()=>{f.forEach(V=>{const L=I.current[V.id];if(!L||!A.current)return;const z=new JY(A.current,{target:L,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});z.on("dragStart",Y=>{if(!S.current){Y.stop();return}const G=Y.inputEvent.target;if(G.closest(".js-budget-target")||G.tagName==="INPUT"){Y.stop();return}const X=g.current.findIndex(Q=>Q.id===V.id),J=Y.target,ee=J.getBoundingClientRect();w(V.id),O.current={activeId:V.id,startIndex:X,currentIndex:X,itemHeight:ee.height+o_e},J.style.transition="none",J.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",J.style.zIndex="20",b(!0)});let K=null;z.on("drag",Y=>{const G=Y.target;K!==null&&cancelAnimationFrame(K),K=requestAnimationFrame(()=>{const X=O.current;if(X.activeId!==V.id)return;const J=Y.beforeTranslate[1];G.style.transform=`translateY(${J}px)`,G.style.transition="none";const{itemHeight:ee,startIndex:Q}=X,U=Math.round(J/ee),Z=l_e(Q+U,0,g.current.length-1);Z!==X.currentIndex&&(X.currentIndex=Z,g.current.forEach((te,W)=>{if(te.id===V.id)return;const ue=I.current[te.id];if(!ue)return;let ie=0;Q<Z&&W>Q&&W<=Z?ie=-ee:Q>Z&&W>=Z&&W<Q&&(ie=ee),ue.style.transform=ie?`translateY(${ie}px)`:"",ue.style.transition="transform 0.2s ease"})),K=null})}),z.on("dragEnd",Y=>{K!==null&&(cancelAnimationFrame(K),K=null);const G=Y.target,{startIndex:X,currentIndex:J}=O.current;if(G.style.transform="",G.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",G.style.boxShadow="",g.current.forEach(ee=>{const Q=I.current[ee.id];Q&&(Q.style.transform="",Q.style.transition="")}),X!==J){const ee=[...g.current],[Q]=ee.splice(X,1);ee.splice(J,0,Q),g.current=ee,h(ee),o(ee.map(U=>U.id))}setTimeout(()=>{G.style.zIndex="",w(null),b(!1),S.current=!1},300)}),z.on("click",()=>{const Y=window.event?.target;Y&&(Y.closest(".js-budget-target")||Y.tagName==="INPUT")||a(`/envelope/${V.id}`)}),N.current[V.id]=z})},M=window.setTimeout(R,80);return()=>{clearTimeout(M),C()}},[f,a,o]),e.length===0&&t.id==="uncategorized"?null:m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(uf,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:A,className:"space-y-2 relative",children:f.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(lr,{initial:!1,children:f.map(C=>{const M=(n[r]||[]).find(L=>L.envelopeId===C.id)?.budgetedAmount||0,V=s(C.id);return C.isPiggybank?m.jsx(s_e,{piggybank:C,balance:V,onNavigate:L=>a(`/envelope/${L}`),setMoveableRef:P(C.id),isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:D,onMoveCategory:u},C.id):m.jsx(c_e,{env:C,budgetedAmount:M,remainingBalance:V,navigate:a,transactions:i,currentMonth:r,setMoveableRef:P,isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:D,onMoveCategory:u},C.id)})})})]})},d_e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=HSe(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:A,ensureDefaultCategory:I,envelopes:N,reorderEnvelopes:O,startGuidedTutorial:D,updateEnvelope:P}=gt(),C=xa(),[R,M]=T.useState(!1),[V,L]=T.useState("add"),[z,K]=T.useState(null),[Y,G]=T.useState(!1),[X,J]=T.useState(!1),[ee,Q]=T.useState(null),U=T.useRef(null),Z=T.useRef(null),[te,W]=T.useState(0);T.useEffect(()=>{S.length===0&&A()},[S.length,A]),T.useEffect(()=>{const be=[...t,...e],_e=new Set(S.map(De=>De.id)),Oe=be.filter(De=>!De.categoryId||!_e.has(De.categoryId));Oe.length>0&&S.length>0&&I().then(De=>{Oe.forEach(Ye=>{P({...Ye,categoryId:De})})})},[t,e,S,I,P]);const ue=T.useMemo(()=>{const be={};return S.forEach(Oe=>be[Oe.id]=[]),[...t,...e].sort((Oe,De)=>(Oe.orderIndex??0)-(De.orderIndex??0)).forEach(Oe=>{if(Oe.categoryId&&be[Oe.categoryId])be[Oe.categoryId].push(Oe);else{const De=S.find(Ye=>Ye.isDefault);De&&be[De.id]?.push(Oe)}}),{groups:be}},[S,t,e]),ie=T.useCallback(async be=>{const _e=[...N.map(Ve=>Ve.id)],Oe=new Set(be),De=[];let Ye=0;_e.forEach(Ve=>{Oe.has(Ve)?De.push(be[Ye++]):De.push(Ve)}),await O(De)},[N,O]);T.useLayoutEffect(()=>{if(b)return;const be=Z.current;if(!be)return;const _e=()=>W(be.getBoundingClientRect().height);_e();const Oe=new ResizeObserver(()=>_e());return Oe.observe(be),window.addEventListener("resize",_e),()=>{window.removeEventListener("resize",_e),Oe.disconnect()}},[b,i,n,a,t,e,r]),T.useEffect(()=>{if(!c&&!o){const be=setTimeout(()=>{if(b)return;if(x){v(!1);const De=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ye=Object.keys(n).some(Ve=>(n[Ve]||[]).length>0)||Object.keys(a).some(Ve=>(a[Ve]||[]).length>0);J(!!(De&&Ye));return}const _e=(n[i]||[]).length===0&&(a[i]||[]).length===0,Oe=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);_e?Oe?(J(!0),v(!1)):(v(!0),J(!1)):(J(!1),v(!1))},500);return()=>clearTimeout(be)}},[c,o,i,n,a,x]);const oe=()=>{L("add"),K(null),M(!0)},Se=be=>{U.current&&clearTimeout(U.current),!Y&&(L("edit"),K(be),M(!0))},se=be=>{U.current&&clearTimeout(U.current),G(!0),h(be),setTimeout(()=>G(!1),500)},Ae=()=>{M(!1),K(null)},ve=async()=>{J(!1);const{copyPreviousMonthAllocations:be}=gt.getState();await be(i)},ne=()=>{w(),v(!1),D()},Pe=()=>{w(),v(!1),D()};return c?m.jsx(mH,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Z,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(KSe,{currentMonth:i,onMonthChange:be=>{J(!1),g(be)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((be,_e)=>be+_e.amount,0),totalAllocated:(a[i]||[]).filter(be=>t.some(_e=>_e.id===be.envelopeId)||e.some(_e=>_e.id===be.envelopeId)).reduce((be,_e)=>be+_e.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,te+16)},children:[b?m.jsx(a_e,{currentMonth:i,onComplete:ne,onSkip:Pe}):X?m.jsx(XSe,{currentMonth:i,onCopy:ve}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:oe,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(uf,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(be=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(b_,{onDelete:()=>se(be),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Se(be),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:be.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",be.amount.toFixed(2)]})]})})},be.id))})})]}),S.map((be,_e)=>m.jsx(u_e,{category:be,envelopes:ue.groups[be.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:C,getEnvelopeBalance:f,onReorderGlobal:ie,isFirstCategory:_e===0,onMoveCategory:Q},be.id)),S.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(rp,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(WSe,{isVisible:R,onClose:Ae,mode:V,initialIncomeSource:z}),m.jsx(YSe,{isVisible:!!ee,onClose:()=>Q(null),categories:S,currentCategoryId:ee?.categoryId||"",envelopeName:ee?.name||"",onSelect:async be=>{if(ee)try{const _e=N.find(De=>De.id===ee.id);if(!_e)return;const Oe={id:_e.id,name:_e.name,currentBalance:_e.currentBalance,lastUpdated:_e.lastUpdated,isActive:_e.isActive,orderIndex:_e.orderIndex,categoryId:be};_e.userId&&(Oe.userId=_e.userId),_e.createdAt&&(Oe.createdAt=_e.createdAt),_e.isPiggybank!==void 0&&(Oe.isPiggybank=_e.isPiggybank),_e.piggybankConfig&&(Oe.piggybankConfig=_e.piggybankConfig),await P(Oe),Q(null)}catch(_e){console.error("Move category failed:",_e)}}})]})]})]})},f_e=[],iX=({selectedCard:t,onCardSelect:e,initialCards:n=f_e,disabled:r=!1,isUserSelected:i=!1})=>{const a=gt(Q=>Q.appSettings),s=gt(Q=>Q.updateAppSettings),[o,c]=T.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=T.useState(!1),[h,g]=T.useState(!1),[v,b]=T.useState(n),[x,w]=T.useState(null),[S,A]=T.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,N]=T.useState(null),[O,D]=T.useState(null);T.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const P=t||o;T.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const C=Q=>{r||(Q.id==="add-new"?g(!0):(c(Q),e?.(Q),f(!1)))},R=()=>{r||f(!u)},M=Q=>{r||w(Q)},V=async()=>{if(x&&!r){const Q=v.filter(U=>U.id!==x.id);if(b(Q),P?.id===x.id){const U=Q.length>0?Q[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:Q})}catch(U){$.error("Failed to delete card from app settings:",U),b(v),alert("Failed to delete card. Please try again.");return}}},L=()=>{w(null)},z=async()=>{if(r)return;const Q=!["Cash","Venmo"].includes(S.network);if(Q&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:Q?S.last4:void 0,color:S.color},Z=[...v,U];b(Z),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:Z})}catch(te){$.error("Failed to save card to app settings:",te),b(v),c(P),alert("Failed to save card. Please try again.");return}A({name:"",network:"Visa",last4:"",color:"#3b82f6"})},K=(Q,U)=>{r||(N(U),Q.dataTransfer.effectAllowed="move")},Y=(Q,U)=>{r||!I||(Q.preventDefault(),Q.dataTransfer.dropEffect="move",D(U))},G=()=>{D(null)},X=async(Q,U)=>{if(r||!I)return;Q.preventDefault(),D(null);const Z=v.findIndex(W=>W.id===I.id);if(Z===-1||Z===U)return;const te=[...v];te.splice(Z,1),te.splice(U,0,I),b(te),N(null);try{await s({paymentSources:te})}catch(W){$.error("Failed to reorder cards:",W),b(v),alert("Failed to reorder cards. Please try again.")}},J=()=>{N(null),D(null)},ee=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:P.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:P.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(P.network)?P.network==="Cash"?"$$$":"@":` ${P.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:P.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(P.network)?P.network:`(...${P.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((Q,U)=>{const Z=P.id===Q.id,te=Q.id==="add-new",W=["Cash","Venmo"].includes(Q.network);return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(b_,{onDelete:()=>!te&&!r&&M(Q),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${Z?"selected":""} ${te?"add-new-card":""} ${I?.id===Q.id?"dragging":""} ${O===U?"drag-over":""}`,onClick:()=>C(Q),draggable:!te&&!r,onDragStart:te?void 0:ue=>K(ue,Q),onDragOver:te?void 0:ue=>Y(ue,U),onDragLeave:te?void 0:G,onDrop:te?void 0:ue=>X(ue,U),onDragEnd:te?void 0:J,style:{backgroundColor:te?"#f3f4f6":Q.color,color:te?"#374151":Q.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-U,opacity:I?.id===Q.id?.5:1,transform:O===U?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:te?"":Q.network}),Z&&!te&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:Q.name}),m.jsx("div",{className:"card-number",children:te?"":W?Q.network==="Cash"?"$$$":"@":` ${Q.last4}`})]}),te&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},Q.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:S.name,onChange:Q=>A({...S,name:Q.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:S.network,onChange:Q=>A({...S,network:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:S.last4,onChange:Q=>A({...S,last4:Q.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ee.map(Q=>m.jsx("button",{type:"button",onClick:()=>A({...S,color:Q}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===Q?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:Q}},Q))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},aX=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=gt(),[a,s]=T.useState([]),[o,c]=T.useState(!1),u=T.useRef(null);T.useEffect(()=>{r&&!o&&t.some(D=>D.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=T.useState({}),[g,v]=T.useState(e),b=T.useMemo(()=>{const O=[],D=[],P={};return i.forEach(C=>{P[C.id]=[]}),t.forEach(C=>{C.categoryId&&P[C.categoryId]?P[C.categoryId].push(C):D.push(C)}),i.sort((C,R)=>(C.orderIndex??0)-(R.orderIndex??0)).forEach(C=>{P[C.id].length>0&&O.push({name:C.name,id:C.id,envelopes:P[C.id]})}),D.length>0&&O.push({name:"Other",id:"uncategorized",envelopes:D}),O},[t,i]),x=O=>{s(D=>D.includes(O)?D.filter(P=>P!==O):[...D,O])},w=(O,D)=>{h(P=>({...P,[O]:D}))},S=sl.useRef(a.length);T.useEffect(()=>{if(a.length===1){const O=a[0];h({[O]:e})}else if(a.length>1&&S.current<=1){const O={};a.forEach(D=>{O[D]=0}),h(O)}S.current=a.length},[a.length,a,e]),T.useEffect(()=>{const O=Object.values(f).reduce((D,P)=>D+(P||0),0);v(e-O),n(f)},[f,e,n]),T.useEffect(()=>{const O={...f};Object.keys(O).forEach(D=>{a.includes(D)||delete O[D]}),Object.keys(O).length!==Object.keys(f).length&&h(O)},[a,f]),T.useEffect(()=>{const O=u.current;if(!O)return;const D=()=>{const{scrollTop:P,scrollHeight:C,clientHeight:R}=O;P===0?O.scrollTop=1:P+R>=C&&(O.scrollTop=C-R-1)};return O.addEventListener("touchstart",D,{passive:!0}),()=>O.removeEventListener("touchstart",D)},[]);const A=()=>{s([]),h({})},I=Math.abs(g)<.01&&a.length>0,N=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${N?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":I?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${N?"text-red-600 dark:text-red-400":I?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),N&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:A,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(O=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:O.name})}),O.envelopes.map(D=>{const P=a.includes(D.id);return m.jsxs("div",{onClick:()=>x(D.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${P?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${P?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:P&&m.jsx(d2,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${P?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:D.name}),P&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:C=>C.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[D.id]||"",onChange:C=>w(D.id,parseFloat(C.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},D.id)})]},O.id))})]})},sX=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=gt(),[f,h]=T.useState(""),[g,v]=T.useState(""),[b,x]=T.useState(""),[w,S]=T.useState(new Date().toISOString().split("T")[0]),[A,I]=T.useState(null),[N,O]=T.useState(null),[D,P]=T.useState({}),C=a?[...a].filter(z=>z.isActive!==!1).sort((z,K)=>{const Y=z.orderIndex??0,G=K.orderIndex??0;return Y!==G?Y-G:z.name.localeCompare(K.name)}):[];T.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const z=a.find(K=>K.id===i.envelopeId);O(z||r),P({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?($.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(z.toISOString().split("T")[0])}catch(z){$.error("Error parsing transaction date:",z),S(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),S(new Date().toISOString().split("T")[0]),O(r),P({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const K=parseFloat(f);if(isNaN(K)||K<=0){$.log(" Invalid amount:",f);return}const Y=n==="edit"&&Object.keys(D).length>0;$.log(" Saving transaction:",{mode:n,amount:K,note:b,date:w,splitAmounts:D,paymentMethod:A});try{const G=new Date(w),X=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(X!==u){const J=`This transaction date (${X}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(J))return}n==="add"?($.log(" Adding income transaction"),await s({amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Income",reconciled:!1,paymentMethod:A||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Expense",reconciled:!1,paymentMethod:A||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Y?await o({...i,amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(D)[0]||i.envelopeId,paymentMethod:A||void 0}):await o({...i,amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,paymentMethod:A||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},M=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},V=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",L=n==="add"?"text-green-500":"text-red-500";return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:V}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const K=z.target.value.replace(/\D/g,"");if(!K){h("");return}const G=(parseInt(K,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(iX,{selectedCard:A,onCardSelect:I}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Td,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{$.log("Date changed to:",z.target.value),S(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(aX,{envelopes:C,transactionAmount:parseFloat(f)||0,onSplitChange:P,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:M,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(Iq,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},h_e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=gt(),[a,s]=T.useState(""),[o,c]=T.useState(""),[u,f]=T.useState(""),[h,g]=T.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);T.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},p_e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=T.useState(""),[s,o]=T.useState(""),[c,u]=T.useState(""),[f,h]=T.useState("#3B82F6"),[g,v]=T.useState("piggy-bank"),[b,x]=T.useState(!1),[w,S]=T.useState(!1);T.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const A=async N=>{if(N.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){$.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(cf,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(qp,{size:24})})]}),m.jsxs("form",{onSubmit:A,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:N=>a(N.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){u("");return}const P=(parseInt(O,10)/100).toFixed(2);u(P)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){o("");return}const P=(parseInt(O,10)/100).toFixed(2);o(P)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:N=>x(N.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(N=>m.jsx("button",{type:"button",onClick:()=>h(N.value),className:`w-full aspect-square rounded-lg transition-all ${f===N.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},g_e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},m_e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},oX=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:g_e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",m_e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(co,{className:"text-green-500",size:20}):m.jsx(JL,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(co,{className:"text-green-500",size:20}):m.jsx(JL,{className:"text-gray-400",size:20})})]})]})},Ek=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),v_e=()=>{const{id:t}=Goe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=gt(),{showToast:A}=vu(),I=xa(),N=js(),[O,D]=T.useState(!1),[P,C]=T.useState(!1),[R,M]=T.useState(!1),[V,L]=T.useState(null),[z,K]=T.useState(!1),[Y,G]=T.useState(!1),[X,J]=T.useState(""),ee=T.useRef(null),Q=T.useRef(!1);T.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(ne=>ne.id===t);T.useEffect(()=>{U?.isPiggybank&&U.id&&S(U.id)},[U?.isPiggybank,U?.id,S]);const Z=async ne=>{if(U)try{const Pe={...U,...ne,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Pe),A("Piggybank updated successfully","success"),K(!1)}catch(Pe){$.error("Failed to update piggybank:",Pe),A("Failed to update piggybank","error")}},te=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(ne=>ne.envelopeId===t)?.budgetedAmount||0;T.useEffect(()=>{Y&&(J(te.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[Y,te]);const W=ne=>{const Pe=(v[h]||[]).reduce((De,Ye)=>De+Ye.amount,0),be=g[h]||[];let Oe=be.map(De=>U&&De.envelopeId===U.id&&ne!==void 0?{...De,budgetedAmount:ne}:De).filter(De=>{const Ye=e.find(Ve=>Ve.id===De.envelopeId);return Ye?Ye.isActive!==!1:!1}).reduce((De,Ye)=>De+Ye.budgetedAmount,0);return ne!==void 0&&U&&(be.some(Ye=>Ye.envelopeId===U.id)||(Oe+=ne)),Pe-Oe},ie=Y?W(parseFloat(X)||0):W(),oe=async()=>{if(!U||Q.current)return;const ne=parseFloat(X);if(isNaN(ne)||ne<0){A("Please enter a valid positive number","error");return}Q.current=!0;try{U.isPiggybank?await x(U.id,ne):await b(U.id,ne),G(!1)}catch(Pe){$.error("Failed to save budget:",Pe),A("Failed to update budget","error")}finally{Q.current=!1}};if(!U)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});const Se=n.filter(ne=>ne.envelopeId===U.id).filter(ne=>{if(ne.description==="Budgeted"||ne.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Pe=S1(U.createdAt).toISOString().split("T")[0];return S1(ne.date).toISOString().split("T")[0]>=Pe}return ne.month===h||!ne.month}).sort((ne,Pe)=>new Date(Pe.date).getTime()-new Date(ne.date).getTime()),se=()=>{N.state?.fromGlobalFAB?I("/"):I(-1)},Ae=()=>{t&&(a(t),I(-1))},ve=ne=>{const Pe={...ne,reconciled:!ne.reconciled};o(Pe)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(U.isPiggybank)K(!0);else{const ne=prompt("Rename envelope:",U.name);ne&&ne.trim()&&t&&s(t,ne)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),m.jsx("button",{onClick:se,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ne=U.isPiggybank?f(U.id):f(U.id,h);return m.jsx("span",{className:`text-xl font-bold ${ne<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Ek(ne)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Y?m.jsx("form",{onSubmit:ne=>{ne.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ee,type:"number",step:"0.01",value:X,onChange:ne=>J(ne.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Ek(te)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ie<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ie===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:Ek(ie)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[m.jsx(hce,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>C(!0),children:[m.jsx(dce,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>M(!0),children:[m.jsx(Wle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:Se.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:Se.map(ne=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(b_,{disabled:ne.isAutomatic,onDelete:()=>{if(!ne.id)return;const Pe={...ne};c(ne.id),A("Transaction deleted","neutral",()=>u(Pe))},children:m.jsx(oX,{transaction:ne,onReconcile:()=>ve(ne),onEdit:()=>{ne.isAutomatic||L(ne)}})})},ne.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ne=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(ne)&&Ae()},children:[m.jsx(Iq,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(sX,{isVisible:O||P||!!V,onClose:()=>{D(!1),C(!1),L(null)},mode:O?"add":P?"spend":"edit",currentEnvelope:U,initialTransaction:V}),m.jsx(h_e,{isVisible:R,onClose:()=>M(!1),sourceEnvelope:U}),m.jsx(p_e,{isOpen:z,onClose:()=>K(!1),onSave:Z,existingPiggybank:U})]})},y_e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=T.useState("confirm"),v=w=>{const[S,A]=w.split("-");return new Date(parseInt(S),parseInt(A)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},ZB=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],JB=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function LD(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const b_e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tx(t){const e=parseInt(t.split("-")[1],10);return b_e[e-1]||t}function x_e(t){const e={};return t.forEach((n,r)=>{e[n.id]=ZB[r%ZB.length]}),e}function w_e(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=JB[i%JB.length]}),e}function S_e(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=gt(),s=T.useMemo(()=>LD(t,a),[t,a]),o=T.useMemo(()=>{const S={};return n.forEach(A=>{S[A.id]=A.categoryId||"uncategorized"}),S},[n]),c=T.useMemo(()=>x_e(r),[r]),u=T.useMemo(()=>{const S={};return r.forEach(A=>{S[A.id]=A.name}),S},[r]),f=T.useMemo(()=>new Set(n.filter(S=>!!S.isPiggybank).map(S=>S.id)),[n]),h=T.useMemo(()=>{const S=new Set;return r.forEach(A=>{A.name.toLowerCase()==="savings"&&S.add(A.id)}),S},[r]),g=T.useMemo(()=>{const S=new Set(s);return e.filter(A=>A.type==="Expense"&&A.month&&S.has(A.month))},[e,s]),v=T.useMemo(()=>{const S={};r.forEach(N=>{S[N.id]=0}),g.forEach(N=>{const O=o[N.envelopeId]||"uncategorized";S[O]=(S[O]||0)+Math.abs(N.amount)});const A=Object.entries(S).map(([N,O])=>({categoryId:N,categoryName:u[N]||"Uncategorized",color:c[N]||"#9CA3AF",amount:Math.round(O*100)/100})).sort((N,O)=>O.amount-N.amount),I=A.reduce((N,O)=>N+O.amount,0);return{items:A,total:Math.round(I*100)/100}},[g,o,u,c,r]),b=T.useMemo(()=>{const S=new Set(r.map(C=>C.id)),A={};s.forEach(C=>{A[C]={}}),g.forEach(C=>{const R=o[C.envelopeId]||"uncategorized",M=C.month;A[M]&&(A[M][R]=(A[M][R]||0)+Math.abs(C.amount),S.add(R))});const I=[...S],N={};I.forEach(C=>{N[C]=c[C]||"#9CA3AF"});const O=s.map(C=>{const R={month:C,monthLabel:Tx(C)};return I.forEach(M=>{R[M]=Math.round((A[C][M]||0)*100)/100}),R}),D=O.map(C=>I.reduce((R,M)=>R+(C[M]||0),0)),P=D.length>0?Math.round(D.reduce((C,R)=>C+R,0)/D.length):0;return{data:O,categoryKeys:I,colorMap:N,average:P}},[s,g,o,c,r]),x=T.useMemo(()=>{const S=[],A={};s.forEach(C=>{A[C]={}}),s.forEach(C=>{(i[C]||[]).forEach(M=>{S.push(M.name),A[C][M.name]=(A[C][M.name]||0)+M.amount})});const I=[...new Set(S)],N=w_e(I),O=s.map(C=>{const R={month:C,monthLabel:Tx(C)};return I.forEach(M=>{R[M]=Math.round((A[C][M]||0)*100)/100}),R}),D=O.map(C=>I.reduce((R,M)=>R+(C[M]||0),0)),P=D.length>0?Math.round(D.reduce((C,R)=>C+R,0)/D.length):0;return{data:O,sourceKeys:I,colorMap:N,average:P}},[s,i]),w=T.useMemo(()=>({data:s.map(A=>{const N=(i[A]||[]).reduce((Y,G)=>Y+G.amount,0),O=e.filter(Y=>Y.month===A),D=O.filter(Y=>{if(Y.type!=="Expense")return!1;const G=o[Y.envelopeId]||"uncategorized";return h.has(G)}),P=D.reduce((Y,G)=>Y+Math.abs(G.amount),0),C={};D.forEach(Y=>{const G=Y.envelopeId;C[G]=(C[G]||0)+Math.abs(Y.amount)});const R=O.filter(Y=>Y.type!=="Income"||!f.has(Y.envelopeId)?!1:Y.description==="Piggybank Contribution"||Y.description==="Monthly Allocation"||!!Y.isAutomatic),M=R.reduce((Y,G)=>Y+Math.abs(G.amount),0),V={};R.forEach(Y=>{const G=Y.envelopeId;V[G]=(V[G]||0)+Math.abs(Y.amount)});const L=P+M;if(fn.info("Analytics",`Savings calculation for ${A}`,{totalIncome:N,savingsCategorySpending:P,piggybankContributions:M,savingsAmount:L,savingsCategoryIds:Array.from(h),piggybankEnvelopeIds:Array.from(f),savingsByEnvelope:C,piggybankByEnvelope:V}),N<=0)return fn.info("Analytics",`No income for ${A}, setting savings to 0%`),{month:A,monthLabel:Tx(A),savingsPercent:0,spendingPercent:100};const z=Math.min(100,Math.round(L/N*1e3)/10),K=Math.round((100-z)*10)/10;return fn.info("Analytics",`Savings rate for ${A}`,{savingsPercent:z,spendingPercent:K,calculation:`(${P} + ${M})  ${N}  100 = ${z}%`}),{month:A,monthLabel:Tx(A),savingsPercent:z,spendingPercent:K}})}),[s,i,e,o,h,f]);return{months:s,spendingTotals:v,spendingBreakdown:b,monthlyIncome:x,savingsData:w,categoryNameMap:u,categoryColorMap:c}}const __e=({isOpen:t,onClose:e,transactions:n,envelopes:r})=>{const{currentMonth:i}=gt(),[a,s]=T.useState("3m"),[o,c]=T.useState(!1),u=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"12m",label:"12 Months"}];function f(){const x=new Date().getFullYear(),w=[];for(let S=x;S>=2024;S--)w.push({value:`year-${S}`,label:`${S}`});return w}const h=f(),g=()=>LD(a,i),v=()=>{const x=g();if(x.length===0)return"";const w=x[0],S=x[x.length-1],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],I=`${A[parseInt(w.split("-")[1])-1]}${w.split("-")[0]}`,N=`${A[parseInt(S.split("-")[1])-1]}${S.split("-")[0]}`;return I===N?I:`${I}-${N}`},b=async()=>{c(!0);try{const x=g(),w=n.filter(R=>R.description!=="Budgeted"&&R.description!=="Piggybank Contribution"&&x.includes(R.month||"")),S=new Set,A=[],I=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"];for(const R of w){let M,V,L;if(R.splitGroupId&&!S.has(R.splitGroupId)){S.add(R.splitGroupId);const J=w.filter(ee=>ee.splitGroupId===R.splitGroupId);M=J.reduce((ee,Q)=>ee+Q.amount,0),V=J.map(ee=>r.find(Q=>Q.id===ee.envelopeId)?.name||"Unknown").join(", "),L=J.every(ee=>ee.reconciled)}else{if(R.splitGroupId&&S.has(R.splitGroupId))continue;M=R.amount,V=r.find(J=>J.id===R.envelopeId)?.name||"Unknown",L=R.reconciled}const z=(R.merchant||"").replace(/"/g,'""'),K=(R.description||"").replace(/"/g,'""');let Y="";R.paymentMethod&&(Y=`${R.paymentMethod.name} (...${R.paymentMethod.last4})`);const G=Y.replace(/"/g,'""');let X="Invalid Date";if(R.date){if(typeof R.date=="string")X=R.date.split("T")[0];else if(typeof R.date=="number"){const ee=R.date<2e9?(R.date+9783072e5)*1e3:R.date;X=new Date(ee).toISOString().split("T")[0]}}A.push([X,`"${z}"`,`"${G}"`,`"${K}"`,M.toFixed(2),R.type,`"${V}"`,L?"Yes":"No"].join(","))}const N=[I.join(","),...A].join(`
`),O=new Blob([N],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(O),P=document.createElement("a");P.href=D;const C=v();P.download=`budgetTransactions_${C}.csv`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(D),e()}catch(x){console.error("Export failed:",x)}finally{c(!1)}};return t?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-xl max-w-md w-full",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Sq,{className:"w-5 h-5 text-blue-500"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Export Transactions"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:m.jsx(qp,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-3",children:"Select Time Range"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"Presets"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(({value:x,label:w})=>m.jsx("button",{onClick:()=>s(x),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:w},x))})]}),m.jsxs("div",{className:"space-y-2 mt-4",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"By Year"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(({value:x,label:w})=>m.jsx("button",{onClick:()=>s(x),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:w},x))})]})]}),m.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-lg p-4",children:m.jsxs("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:[m.jsx("div",{className:"font-medium mb-1",children:"Export Range:"}),m.jsxs("div",{className:"text-gray-900 dark:text-white",children:[g().length," months selected"]}),m.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mt-1",children:v()})]})})]}),m.jsxs("div",{className:"flex gap-3 p-6 border-t dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg font-medium transition-colors",children:"Cancel"}),m.jsx("button",{onClick:b,disabled:o,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Mw,{className:"w-4 h-4"}),"Export CSV"]})})]})]})}):null},E_e=({isOpen:t,onClose:e})=>{const[n,r]=T.useState([]),[i,a]=T.useState({level:void 0,source:"",search:""}),[s,o]=T.useState(!1),[c,u]=T.useState(!0);T.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),T.useEffect(()=>fn.subscribe(A=>{r(A),c&&setTimeout(()=>{const I=document.getElementById("log-container");I&&(I.scrollTop=I.scrollHeight)},100)}),[c]);const f=T.useMemo(()=>fn.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=T.useMemo(()=>{const S=new Set;return n.forEach(A=>S.add(A.source)),Array.from(S).sort()},[n]),g=T.useMemo(()=>fn.getStats(),[n]),v=S=>new Date(S).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=S=>{switch(S){case zi.DEBUG:return{icon:Zle,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case zi.INFO:return{icon:e3,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case zi.WARN:return{icon:Td,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case zi.ERROR:return{icon:cce,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:e3,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{fn.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{fn.clearLogs()};return t?m.jsx(lr,{children:m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800 overscroll-contain",onClick:S=>S.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(yce,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>u(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(Mw,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(Tv,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx(qp,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Aq,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(ice,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(lr,{children:s&&m.jsxs(bt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:S=>a(A=>({...A,level:S.target.value?Number(S.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:zi.DEBUG,children:"Debug"}),m.jsx("option",{value:zi.INFO,children:"Info"}),m.jsx("option",{value:zi.WARN,children:"Warning"}),m.jsx("option",{value:zi.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:S=>a(A=>({...A,source:S.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(S=>m.jsx("option",{value:S,children:S},S))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(kq,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:S=>a(A=>({...A,search:S.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm overscroll-contain touch-pan-y",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(S=>{const A=b(S.level),I=A.icon;return m.jsxs(bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${A.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(I,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${A.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(S.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:S.source}),S.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${S.userId}`,children:m.jsx(wue,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:S.message}),S.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(S.data,null,2)})})]})]},S.id)})})]})})}):null},T_e=()=>{const t=xa(),e=T.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:S}=gt(),{deleteAccount:A,currentUser:I,logout:N}=nn(),[O,D]=T.useState(null),[P,C]=T.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,M]=T.useState(!1),[V,L]=T.useState(""),[z,K]=T.useState(!1),[Y,G]=T.useState(null),[X,J]=T.useState(!1),[ee,Q]=T.useState(!1),[U,Z]=T.useState(!1),[te,W]=T.useState(null),[ue,ie]=T.useState(!1),oe=()=>{const ze=window.setTimeout(()=>{Z(!0),fn.info("Settings","Log viewer opened via long press")},500);W(ze)},Se=()=>{te&&(clearTimeout(te),W(null))},se=ze=>{ze.preventDefault();const mt=window.setTimeout(()=>{Z(!0),fn.info("Settings","Log viewer opened via long press (mobile)")},500);W(mt)},Ae=ze=>{ze.preventDefault(),te&&(clearTimeout(te),W(null))},ve=()=>{Z(!0),fn.info("Settings","Log viewer opened via double click")},ne=978307200,Pe=c?.theme??"system",be=c?.fontSize??"medium";T.useEffect(()=>{c||f().catch(ze=>{fn.error("Settings","Failed to initialize app settings",{error:ze})})},[f,c]);const _e=(ze,mt)=>{D({type:ze,text:mt}),setTimeout(()=>D(null),3500)},Oe=T.useMemo(()=>{const ze=n.length,mt=r.length,ki=v?g[v]||[]:[],Zr=Object.values(h).reduce((Ut,ur)=>Ut+ur.length,0),Pn=ki.length,Ar=n.reduce((Ut,ur)=>{const di=ur.isPiggybank?o(ur.id):o(ur.id,v);return Ut+(typeof di=="number"?di:0)},0),Fn=0,Sn=r.reduce((Ut,ur)=>{let di=0;if(typeof ur.date=="string"){const es=Date.parse(ur.date);di=Number.isNaN(es)?0:es}else typeof ur.date=="number"&&(di=ur.date<2e9?(ur.date+ne)*1e3:ur.date);return Math.max(Ut,di)},0),kr=Fn||Sn?new Date(Math.max(Fn,Sn)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:ze,transactionCount:mt,incomeSourceCount:Zr,allocationCount:Pn,totalBalance:Ar,lastUpdated:kr}},[n,r,h,g,v]),De=()=>{try{fn.info("Settings","Creating backup...");const ze={appVersion:"1.11.2",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Ar=>({...Ar,currentBalance:(()=>{const Fn=Ar.isPiggybank?o(Ar.id):o(Ar.id,v);return typeof Fn=="number"?Fn:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},mt=new Blob([JSON.stringify(ze,null,2)],{type:"application/json"}),ki=URL.createObjectURL(mt),Zr=document.createElement("a");Zr.href=ki,Zr.download=`budgetBackup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Zr),Zr.click(),document.body.removeChild(Zr),URL.revokeObjectURL(ki);const Pn=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Pn),C(Pn),G({success:!0,message:"Backup downloaded successfully."})}catch(ze){fn.error("Settings","Backup creation failed",{error:ze}),G({success:!1,message:"Failed to create backup file.",onRetry:De})}},Ye=()=>{e.current?.click()},Ve=ze=>{const mt=ze.target.files?.[0];if(!mt)return;const ki=new FileReader;ki.onload=async Zr=>{try{const Pn=JSON.parse(Zr.target?.result),Ar=await s(Pn);if(!Ar.success){_e("error",Ar.message);return}if(Pn.appSettings?.theme)try{await u({theme:Pn.appSettings.theme})}catch(Fn){fn.error("Settings","Failed to update imported settings",{error:Fn})}_e("success",`Loaded ${Pn.envelopes?.length??0} envelopes, ${Pn.transactions?.length??0} transactions.`)}catch(Pn){fn.error("Settings","Import failed",{error:Pn}),_e("error","Invalid backup file. Please verify the JSON.")}},ki.readAsText(mt),ze.target.value=""},it=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),_e("success","All data has been permanently deleted."),t("/")}catch(ze){fn.error("Settings","Reset failed",{error:ze}),_e("error","Failed to delete all data. Some data may remain.")}},Bt=async()=>{if(!V.trim()){_e("error","Please enter your password to confirm account deletion.");return}M(!0);try{await a(),await A(V)?_e("success","Your account has been permanently deleted."):_e("error","Failed to delete account. Please try again.")}catch(ze){fn.error("Settings","Account deletion failed",{error:ze}),_e("error","Failed to delete account. Please try again.")}finally{M(!1),K(!1),L("")}},Bn=async()=>{if(!I){_e("error","You must be logged in to clean up data.");return}J(!0);try{const ze=await zD.cleanupOrphanedData(I.id),mt=ze.orphanedAllocationsDeleted+ze.orphanedTransactionsDeleted;mt>0?_e("success",`Cleaned ${mt} orphaned items: ${ze.orphanedAllocationsDeleted} allocations and ${ze.orphanedTransactionsDeleted} transactions.`):_e("success","No orphaned data found. Your database is already clean!")}catch(ze){fn.error("Settings","Cleanup failed",{error:ze}),_e("error","Failed to clean up orphaned data. Please try again.")}finally{J(!1)}},wn=()=>{Q(!0)},yt=async()=>{Q(!1),await b(v),_e("success","Month data has been reset.")},Ft=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),N(),t("/")}catch(ze){fn.error("Settings","Logout failed",{error:ze})}},Qr=I?.displayName?.charAt(0)?.toUpperCase()||I?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[O&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${O.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[O.type==="success"?m.jsx(Rw,{size:18}):m.jsx(Tv,{size:18}),O.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Qr}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:I?.displayName||I?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:I?.email}),m.jsxs("button",{onClick:Ft,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Fce,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Mw,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Pe==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),Pe==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),Pe==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Pe})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({theme:ze.value})}catch(mt){fn.error("Settings","Failed to update theme setting",{error:mt})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Pe===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:ze.label},ze.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:be})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:ze.value})}catch(mt){fn.error("Settings","Failed to update font size setting",{error:mt})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${be===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:ze.sizeClass,children:ze.label})},ze.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Gh,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{S(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Gh,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:De,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Mw,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",P]})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ye,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(vue,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>ie(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Ace,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:Ve,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:wn,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(np,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Bn,disabled:X,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[X?m.jsx(Lce,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(Gh,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:X?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:it,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Tv,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>K(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Td,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),_e("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(np,{size:20})})]}):m.jsx("button",{onClick:async()=>{const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:oe,onMouseUp:Se,onMouseLeave:Se,onTouchStart:se,onTouchEnd:Ae,onTouchCancel:Ae,onDoubleClick:ve,title:"Long press or double-click to view logs",children:["Version ","1.11.2"," (PWA)"]})}),Y&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Y.success?m.jsx(Rw,{className:"text-green-500",size:24}):m.jsx(Td,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Y.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Y.message}),m.jsxs("div",{className:"flex gap-2",children:[Y.onRetry&&m.jsx("button",{onClick:()=>{G(null),Y.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>G(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(y_e,{isVisible:ee,onClose:()=>Q(!1),onConfirm:yt,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((ze,mt)=>ze+mt.amount,0),allocationCount:(g[v]||[]).filter(ze=>n.some(mt=>mt.id===ze.envelopeId)).length,totalAllocated:(g[v]||[]).filter(ze=>n.some(mt=>mt.id===ze.envelopeId)).reduce((ze,mt)=>ze+mt.budgetedAmount,0),transactionCount:r.filter(ze=>ze.month===v).length,totalTransactionAmount:r.filter(ze=>ze.month===v).reduce((ze,mt)=>ze+mt.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Td,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:V,onChange:ze=>L(ze.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{K(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:Bt,disabled:R||!V.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(E_e,{isOpen:U,onClose:()=>Z(!1)}),m.jsx(__e,{isOpen:ue,onClose:()=>ie(!1),transactions:r,envelopes:n})]})]})},A_e=({category:t,isBeingDragged:e,isEditing:n,editName:r,setEditName:i,handleUpdate:a,setEditingId:s,handleDelete:o,handleLongPressTrigger:c,setMoveableRef:u})=>{const f=jD(h=>{c(h,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch});return m.jsx("div",{...f(),ref:u(t.id),style:{cursor:e?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:n?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>a(t.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:h=>c(h,t.id),children:m.jsx(tp,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{s(t.id),i(t.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(Kce,{size:18})}),m.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(Tv,{size:18})})]})]})})},k_e=()=>{const t=xa(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=gt(),{showToast:s}=vu(),[o,c]=T.useState(!1),[u,f]=T.useState(""),[h,g]=T.useState(null),[v,b]=T.useState(""),[x,w]=T.useState(e),S=T.useRef(e),[A,I]=T.useState(!1),[N,O]=T.useState(null),D=T.useRef(!1),P=T.useRef(null),C=T.useRef({}),R=T.useRef({}),M=T.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});T.useEffect(()=>{A||(w(e),S.current=e)},[e,A]),T.useEffect(()=>(A?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[A]);const V=T.useCallback((ee,Q)=>{$.log(" Long press triggered for category:",Q);const U=R.current[Q];if(U){$.log(" Moveable instance found, starting drag"),D.current=!0;const Z=ee.nativeEvent||ee;U.dragStart(Z)}else $.log(" No moveable instance found for:",Q)},[]),L=T.useCallback(ee=>Q=>{Q?C.current[ee]=Q:delete C.current[ee]},[]),z=async ee=>{if(ee.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(Q){$.error(Q),s("Failed to add category","error")}},K=async ee=>{if(!v.trim())return;const Q=e.find(U=>U.id===ee);if(Q)try{await r({...Q,name:v.trim()}),g(null),s("Category updated","success")}catch(U){$.error(U),s("Failed to update category","error")}},Y=async ee=>{if(e.length<=1){s("Cannot delete the last category","error");return}if(confirm('Are you sure? Envelopes in this category will be moved to "Uncategorized".'))try{await i(ee),s("Category deleted","success")}catch(Q){$.error(Q),s("Failed to delete category","error")}},G=8,X=(ee,Q,U)=>Math.max(Q,Math.min(U,ee)),J=T.useCallback(async ee=>{if(!ee.length)return;const Q=ee.map(U=>U.id);try{await a(Q)}catch(U){$.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return T.useEffect(()=>{const ee=()=>{Object.values(R.current).forEach(Z=>Z?.destroy()),R.current={}};if(!x.length)return;const Q=()=>{x.forEach(Z=>{const te=C.current[Z.id];if(!te||!P.current)return;const W=new JY(P.current,{target:te,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});W.on("dragStart",ie=>{if($.log(" Moveable dragStart event",{isManualDrag:D.current,categoryId:Z.id}),!D.current){$.log(" Stopping drag - not manual"),ie.stop();return}const oe=ie.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),ie.stop();return}$.log(" Drag starting for category:",Z.id);const Se=S.current.findIndex(ve=>ve.id===Z.id),se=ie.target,Ae=se.getBoundingClientRect();O(Z.id),M.current={activeId:Z.id,startIndex:Se,currentIndex:Se,itemHeight:Ae.height+G},se.style.transition="none",se.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",se.style.zIndex="20",I(!0)});let ue=null;W.on("drag",ie=>{const oe=ie.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const Se=M.current;if(Se.activeId!==Z.id)return;const se=ie.beforeTranslate[1];oe.style.transform=`translateY(${se}px)`,oe.style.transition="none";const{itemHeight:Ae,startIndex:ve}=Se,ne=Math.round(se/Ae),Pe=X(ve+ne,0,S.current.length-1);Pe!==Se.currentIndex&&(Se.currentIndex=Pe,S.current.forEach((be,_e)=>{if(be.id===Z.id)return;const Oe=C.current[be.id];if(!Oe)return;let De=0;ve<Pe&&_e>ve&&_e<=Pe?De=-Ae:ve>Pe&&_e>=Pe&&_e<ve&&(De=Ae),Oe.style.transform=De?`translateY(${De}px)`:"",Oe.style.transition="transform 0.2s ease"})),ue=null})}),W.on("dragEnd",ie=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ie.target,{startIndex:Se,currentIndex:se}=M.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(Ae=>{const ve=C.current[Ae.id];ve&&(ve.style.transform="",ve.style.transition="")}),Se!==se){const Ae=[...S.current],[ve]=Ae.splice(Se,1);Ae.splice(se,0,ve),S.current=Ae,w(Ae),J(Ae)}setTimeout(()=>{oe.style.zIndex="",O(null),I(!1),D.current=!1},300)}),R.current[Z.id]=W})},U=window.setTimeout(Q,80);return()=>{clearTimeout(U),ee()}},[x,J]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(Ps,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:ee=>f(ee.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(uf,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:P,className:"space-y-2",style:{touchAction:A?"none":"auto"},children:[x.map(ee=>m.jsx(A_e,{category:ee,isBeingDragged:N===ee.id,isEditing:h===ee.id,editName:v,setEditName:b,handleUpdate:K,setEditingId:g,handleDelete:Y,handleLongPressTrigger:V,setMoveableRef:L},ee.id)),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},C_e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=gt(),{showToast:a}=vu(),s=xa(),[o]=xq();sl.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=T.useState(""),[f,h]=T.useState(o.get("type")==="piggybank"),[g,v]=T.useState(o.get("categoryId")||"");sl.useEffect(()=>{if(!o.get("categoryId")&&r.length>0&&!g){const P=r.find(C=>C.isDefault);P&&v(P.id)}},[r,o,g]);const[b,x]=T.useState(""),[w,S]=T.useState(""),[A,I]=T.useState("#3B82F6"),[N,O]=T.useState(!1),D=async P=>{if(P.preventDefault(),!c.trim()||N)return;O(!0);const C=gt.getState().envelopes,M=(C.length>0?Math.max(...C.map(K=>K.orderIndex??0)):-1)+1,V=f?new Date(`${n}-01T00:00:00`):new Date,L={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:V.toISOString(),isActive:!0,orderIndex:M,categoryId:g||void 0};if(f){L.isPiggybank=!0;const K={monthlyContribution:parseFloat(w||"0"),color:A,icon:"piggy-bank"};b&&parseFloat(b)>0&&(K.targetAmount=parseFloat(b)),L.piggybankConfig=K}t(L).then(K=>{if(K){const Y=f?parseFloat(w||"0"):0;e(K,Y).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(K=>{$.error("Failed to create envelope:",K),a(K.message||"Failed to create envelope","error"),O(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(Ps,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(cf,{size:40}):m.jsx(Ice,{size:40})})}),m.jsxs("form",{onSubmit:D,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsx("select",{id:"category",value:g,onChange:P=>v(P.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:r.map(P=>m.jsx("option",{value:P.id,children:P.name},P.id))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:P=>u(P.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:P=>S(P.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:P=>x(P.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(P=>m.jsx("button",{type:"button",onClick:()=>I(P.value),className:`w-full aspect-square rounded-lg transition-all ${A===P.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:P.value},title:P.label},P.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||N,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!N?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:N?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const I_e="type.googleapis.com/google.protobuf.Int64Value",P_e="type.googleapis.com/google.protobuf.UInt64Value";function lX(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function _1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>_1(e));if(typeof t=="function"||typeof t=="object")return lX(t,e=>_1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ip(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case I_e:case P_e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ip(e)):typeof t=="function"||typeof t=="object"?lX(t,e=>Ip(e)):t}const VD="functions";const e6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ui extends Ro{constructor(e,n,r){super(`${VD}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Ui.prototype)}}function N_e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function E1(t,e){let n=N_e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!e6[s])return new Ui("internal","internal");n=e6[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=Ip(i))}}catch{}return n==="ok"?null:new Ui(n,r,i)}class O_e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ua(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const UP="us-central1",D_e=/^data: (.*?)(?:\n|$)/;function R_e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ui("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class M_e{constructor(e,n,r,i,a=UP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new O_e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=UP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function j_e(t,e,n){const r=uu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(KN(t.emulatorOrigin+"/backends"),c8("Functions",!0))}function z_e(t,e,n){const r=i=>V_e(t,e,i,{});return r.stream=(i,a)=>F_e(t,e,i,a),r}function cX(t){return t.emulatorOrigin&&uu(t.emulatorOrigin)?"include":void 0}async function L_e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:cX(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function uX(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function V_e(t,e,n,r){const i=t._url(e);return B_e(t,i,n,r)}async function B_e(t,e,n,r){n=_1(n);const i={data:n},a=await uX(t,r),s=r.timeout||7e4,o=R_e(s),c=await Promise.race([L_e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Ui("cancelled","Firebase Functions instance was deleted.");const u=E1(c.status,c.json);if(u)throw u;if(!c.json)throw new Ui("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Ui("internal","Response is missing data field.");return{data:Ip(f)}}function F_e(t,e,n,r){const i=t._url(e);return U_e(t,i,n,r||{})}async function U_e(t,e,n,r){n=_1(n);const i={data:n},a=await uX(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:cX(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Ui("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=E1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new Ui("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=$_e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function $_e(t,e,n,r){const i=(s,o)=>{const c=s.match(D_e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Ip(f.result));return}if("message"in f){o.enqueue(Ip(f.message));return}if("error"in f){const h=E1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Ui){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Ui("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Ui("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Ui?u:E1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const t6="@firebase/functions",n6="0.13.1";const q_e="auth-internal",G_e="app-check-internal",H_e="messaging-internal";function K_e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(q_e),s=n.getProvider(H_e),o=n.getProvider(G_e);return new M_e(i,a,s,o,r)};wl(new Ao(VD,e,"PUBLIC").setMultipleInstances(!0)),Ss(t6,n6,t),Ss(t6,n6,"esm2020")}function W_e(t=YN(),e=UP){const r=Fp(zt(t),VD).getImmediate({identifier:e}),i=ure("functions");return i&&Y_e(r,...i),r}function Y_e(t,e,n){j_e(zt(t),e,n)}function X_e(t,e,n){return z_e(zt(t),e)}K_e();function dX(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const A=b.length/x.length;(!f||A>f.score)&&(f={envelope:v,score:Math.max(A,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const A of S)if(!(A.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(A.slice(0,-1))||A.startsWith(I.slice(0,-1)))){const N=Math.min(I.length,A.length)/Math.max(I.length,A.length);N>=.6&&(!f||N>f.score)&&(f={envelope:v,score:N})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function Q_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=J8().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=W_e(),u=(await X_e(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),dX(t,e)}}function Z_e(t,e){return $.log(" Siri: Parsing locally with regex:",t),dX(t,e)}function J_e(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function $P(t,e){const n=J_e(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),Z_e(n,e)):($.log(" Siri: Online  attempting AI parsing"),Q_e(n,e))}function eEe(){const[t,e]=xq(),{envelopes:n}=gt(),[r,i]=T.useState(null),[a,s]=T.useState(!1),[o,c]=T.useState(null);T.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),$P(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,$P]);const u=T.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const fX=({onClose:t,onSaved:e})=>{const n=xa(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=gt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=eEe(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),Se=sessionStorage.getItem("siriQuery");if(oe&&Se)try{const se=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",se),se.amount!==null&&v(se.amount.toFixed(2)),se.merchant&&x(se.merchant),se.description&&S(se.description),se.type&&R(se.type==="Income"?"income":"expense"),se.envelopeId&&X(se.envelopeId),se.paymentMethodName&&s?.paymentSources?.length){const Ae=se.paymentMethodName.toLowerCase(),ve=s.paymentSources.find(ne=>{const Pe=ne.name.toLowerCase();return Pe===Ae||Pe.includes(Ae)||Ae.includes(Pe)});ve&&(z(ve),Y(!1))}I(!0),O(Se),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(se){$.error(" Siri: Failed to parse stored data:",se)}};T.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),T.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=T.useState(""),[b,x]=T.useState(""),[w,S]=T.useState(""),[A,I]=T.useState(!1),[N,O]=T.useState(null),[D,P]=T.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[C,R]=T.useState("expense"),[M,V]=T.useState({}),[L,z]=T.useState(null),[K,Y]=T.useState(!1),[G,X]=T.useState(null);T.useEffect(()=>{if(!(!o||A)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&X(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),Se=s.paymentSources.find(se=>{const Ae=se.name.toLowerCase();return Ae===oe||Ae.includes(oe)||oe.includes(Ae)});Se&&(z(Se),Y(!1))}I(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,A,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ee=oe=>{z(oe),L&&Y(!0)},Q=Object.keys(M).length>0,U=Object.values(M).reduce((oe,Se)=>oe+(Se||0),0),Z=Math.abs(U-parseFloat(g||"0"))<.01,te=g&&parseFloat(g)>0&&Q&&Z,W=async oe=>{if(oe.preventDefault(),!te)return;const[Se,se,Ae]=D.split("-").map(Number),ve=new Date(Se,se-1,Ae,12,0,0);$.log(" Selected date:",D),$.log(" Parsed date:",ve.toISOString());try{const[ne,Pe]=D.split("-").map(Number),be=`${ne}-${Pe.toString().padStart(2,"0")}`;if(be!==a){const De=`This transaction date (${be}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(De))return}const _e=Object.entries(M).filter(([De,Ye])=>Ye>0),Oe=_e.length>1?crypto.randomUUID():void 0;Promise.all(_e.map(([De,Ye])=>i({amount:Ye,description:w,merchant:b||void 0,date:ve.toISOString(),envelopeId:De,type:C==="income"?"Income":"Expense",reconciled:!1,paymentMethod:L||void 0,splitGroupId:Oe}).catch(Ve=>$.error("Failed to create transaction:",Ve)))).catch(De=>$.error("Failed to create transactions:",De)),e&&e(),t?t():n("/")}catch(ne){$.error("Error saving transaction:",ne),alert("Failed to save transaction: "+(ne instanceof Error?ne.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,Se)=>{const se=oe.orderIndex??0,Ae=Se.orderIndex??0;return se!==Ae?se-Ae:oe.name.localeCompare(Se.name)}),ie=C==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:W,disabled:!te,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(n3,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),A&&!c&&(u||N)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(n3,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||N,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),I(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:W,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ie}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const Se=oe.target.value.replace(/\D/g,"");if(!Se){v("");return}const Ae=(parseInt(Se,10)/100).toFixed(2);v(Ae)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ie} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(iX,{selectedCard:L,onCardSelect:ee,isUserSelected:K}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,Se]=D.split("-").map(Number);return`${oe}-${Se.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Td,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:D,onChange:oe=>P(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(aX,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:V,initialSelectedEnvelopeId:G})})]})})]})},tEe=()=>{const t=xa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=gt(),{showToast:h}=vu(),[g,v]=T.useState(!1),[b,x]=T.useState(""),[w,S]=T.useState("all"),[A,I]=T.useState("All"),[N,O]=T.useState(!1),[D,P]=T.useState("all"),[C,R]=T.useState(!1),[M,V]=T.useState("all"),[L,z]=T.useState(!1),[K,Y]=T.useState(()=>{const W=new Date;return W.setMonth(W.getMonth()-1),W.toISOString().split("T")[0]}),[G,X]=T.useState(()=>new Date().toISOString().split("T")[0]),[J,ee]=T.useState(null),Q=T.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:C,currentMonth:s,transactionMonths:e.map(ie=>({id:ie.id,month:ie.month,date:ie.date,description:ie.description}))});let W=e;return C||(W=e.filter(ie=>ie.month===s||!ie.month),$.log(" After month filter:",{remaining:W.length,currentMonth:s,filteredTransactions:W.map(ie=>({id:ie.id,description:ie.description,month:ie.month,matchesCurrentMonth:ie.month===s}))})),W.map(ie=>{if(!ie)return null;let oe=ie.date;if(typeof ie.date=="number"){const se=(ie.date+978307200)*1e3;oe=new Date(se).toISOString()}else if(!ie.date||typeof ie.date!="string")return null;return{...ie,date:oe}}).filter(Boolean).filter(ie=>{if(ie.description==="Budgeted"||ie.description==="Piggybank Contribution")return!1;if(b){const Se=b.toLowerCase(),se=n.find(ne=>ne.id===ie.envelopeId)?.name.toLowerCase()||"",Ae=ie.amount.toFixed(2);if(!(ie.description.toLowerCase().includes(Se)||se.includes(Se)||Ae.includes(Se)))return!1}if(w!=="all"&&ie.envelopeId!==w||A!=="All"&&ie.type!==A||M!=="all"&&(!ie.paymentMethod||ie.paymentMethod.id!==M)||!ie.date||typeof ie.date!="string")return!1;const oe=ie.date.split("T")[0];return!(L&&(oe<K||oe>G)||D!=="all"&&new Date(oe).getMonth()!==parseInt(D)||N&&!ie.reconciled)}).sort((ie,oe)=>new Date(oe.date).getTime()-new Date(ie.date).getTime())},[e,n,b,w,A,M,K,G,N,C,s,L]);$.log(" Final filtered transactions:",{count:Q.length,transactions:Q.map(W=>({id:W.id,description:W.description,amount:W.amount,date:W.date,month:W.month,type:W.type}))});const U=T.useMemo(()=>{const W=[],ue=new Set;for(const ie of Q)if(ie.splitGroupId&&!ue.has(ie.splitGroupId)){ue.add(ie.splitGroupId);const oe=Q.filter(Ae=>Ae.splitGroupId===ie.splitGroupId),Se=oe.reduce((Ae,ve)=>Ae+ve.amount,0),se=oe.map(Ae=>n.find(ve=>ve.id===Ae.envelopeId)?.name||"Unknown").join(", ");W.push({key:`split-${ie.splitGroupId}`,transaction:ie,totalAmount:Se,envelopeNames:se,splitTransactions:oe,isSplitGroup:!0})}else{if(ie.splitGroupId&&ue.has(ie.splitGroupId))continue;{const oe=n.find(Se=>Se.id===ie.envelopeId)?.name||"Unknown Envelope";W.push({key:ie.id,transaction:ie,totalAmount:ie.amount,envelopeNames:oe,splitTransactions:[ie],isSplitGroup:!1})}}return W},[Q,n]),Z=J?n.find(W=>W.id===J.envelopeId):null,te=W=>{const ue={...W,reconciled:!W.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(Ps,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(Aq,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const W=!C;R(W),W&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${C?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":C?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(kq,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:W=>x(W.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(qp,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:M,onChange:W=>V(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:W=>S(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((W,ue)=>W.name.localeCompare(ue.name)).map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(W=>m.jsx("button",{onClick:()=>I(W),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${A===W?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:W},W))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:D,onChange:W=>P(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(W,ue)=>ue).map(W=>m.jsx("option",{value:W,children:new Date(2022,W).toLocaleString("default",{month:"long"})},W))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!L),className:`w-9 h-5 rounded-full transition-colors relative ${L?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${L?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${L?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:K,onChange:W=>Y(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:W=>X(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>O(!N),className:`w-11 h-6 rounded-full transition-colors relative ${N?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${N?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!C),className:`w-11 h-6 rounded-full transition-colors relative ${C?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${C?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:U.map(W=>{const ue=W.transaction;return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(b_,{disabled:ue.isAutomatic,onDelete:()=>{const ie=W.splitTransactions.map(oe=>({...oe}));for(const oe of W.splitTransactions)oe.id&&i(oe.id);h(W.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ie)a(oe)})},children:m.jsx(oX,{transaction:{...ue,amount:W.totalAmount},envelopeName:W.envelopeNames,onReconcile:()=>{for(const ie of W.splitTransactions)te(ie)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ee(ue):alert("Cannot edit: Envelope deleted.")}})})},W.key)})})})}),m.jsx(sX,{isVisible:!!J&&!!Z,onClose:()=>ee(null),mode:"edit",currentEnvelope:Z||{},initialTransaction:J,envelopes:n})]})};function hX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=hX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Lt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=hX(t))&&(r&&(r+=" "),r+=e);return r}var nEe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BD(t){if(typeof t!="string")return!1;var e=nEe;return e.includes(t)}var rEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iEe=new Set(rEe);function pX(t){return typeof t!="string"?!1:iEe.has(t)}function gX(t){return typeof t=="string"&&t.startsWith("data-")}function Ds(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(pX(n)||gX(n))&&(e[n]=t[n]);return e}function Jv(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ds(e)}return typeof t=="object"&&!Array.isArray(t)?Ds(t):null}function ya(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(pX(n)||gX(n)||BD(n))&&(e[n]=t[n]);return e}var aEe=["children","width","height","viewBox","className","style","title","desc"];function qP(){return qP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qP.apply(null,arguments)}function sEe(t,e){if(t==null)return{};var n,r,i=oEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FD=T.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=sEe(t,aEe),h=a||{width:r,height:i,x:0,y:0},g=Lt("recharts-surface",s);return T.createElement("svg",qP({},ya(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),T.createElement("title",null,c),T.createElement("desc",null,u),n)}),lEe=["children","className"];function GP(){return GP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GP.apply(null,arguments)}function cEe(t,e){if(t==null)return{};var n,r,i=uEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ui=T.forwardRef((t,e)=>{var{children:n,className:r}=t,i=cEe(t,lEe),a=Lt("recharts-layer",r);return T.createElement("g",GP({className:a},ya(i),{ref:e}),n)}),mX=T.createContext(null),dEe=()=>T.useContext(mX);function on(t){return function(){return t}}const vX=Math.cos,T1=Math.sin,zs=Math.sqrt,A1=Math.PI,x_=2*A1,HP=Math.PI,KP=2*HP,sd=1e-6,fEe=KP-sd;function yX(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hEe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yX;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class pEe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yX:hEe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>sd)if(!(Math.abs(h*c-u*f)>sd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,S=Math.sqrt(x),A=Math.sqrt(g),I=a*Math.tan((HP-Math.acos((x+g-w)/(2*S*A)))/2),N=I/A,O=I/S;Math.abs(N-1)>sd&&this._append`L${e+N*f},${n+N*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>sd||Math.abs(this._y1-f)>sd)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%KP+KP),g>fEe?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>sd&&this._append`A${r},${r},0,${+(g>=HP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function UD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new pEe(e)}function $D(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bX(t){this._context=t}bX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function w_(t){return new bX(t)}function xX(t){return t[0]}function wX(t){return t[1]}function SX(t,e){var n=on(!0),r=null,i=w_,a=null,s=UD(o);t=typeof t=="function"?t:t===void 0?xX:on(t),e=typeof e=="function"?e:e===void 0?wX:on(e);function o(c){var u,f=(c=$D(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:on(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:on(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function Ax(t,e,n){var r=null,i=on(!0),a=null,s=w_,o=null,c=UD(u);t=typeof t=="function"?t:t===void 0?xX:on(+t),e=typeof e=="function"?e:on(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?wX:on(+n);function u(h){var g,v,b,x=(h=$D(h)).length,w,S=!1,A,I=new Array(x),N=new Array(x);for(a==null&&(o=s(A=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(I[b],N[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),N[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):N[g]))}if(A)return o=null,A+""||null}function f(){return SX().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:on(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:on(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:on(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class _X{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function gEe(t){return new _X(t,!0)}function mEe(t){return new _X(t,!1)}const qD={draw(t,e){const n=zs(e/A1);t.moveTo(n,0),t.arc(0,0,n,0,x_)}},vEe={draw(t,e){const n=zs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},EX=zs(1/3),yEe=EX*2,bEe={draw(t,e){const n=zs(e/yEe),r=n*EX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},xEe={draw(t,e){const n=zs(e),r=-n/2;t.rect(r,r,n,n)}},wEe=.8908130915292852,TX=T1(A1/10)/T1(7*A1/10),SEe=T1(x_/10)*TX,_Ee=-vX(x_/10)*TX,EEe={draw(t,e){const n=zs(e*wEe),r=SEe*n,i=_Ee*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=x_*a/5,o=vX(s),c=T1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Tk=zs(3),TEe={draw(t,e){const n=-zs(e/(Tk*3));t.moveTo(0,n*2),t.lineTo(-Tk*n,-n),t.lineTo(Tk*n,-n),t.closePath()}},Ma=-.5,ja=zs(3)/2,WP=1/zs(12),AEe=(WP/2+1)*3,kEe={draw(t,e){const n=zs(e/AEe),r=n/2,i=n*WP,a=r,s=n*WP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Ma*r-ja*i,ja*r+Ma*i),t.lineTo(Ma*a-ja*s,ja*a+Ma*s),t.lineTo(Ma*o-ja*c,ja*o+Ma*c),t.lineTo(Ma*r+ja*i,Ma*i-ja*r),t.lineTo(Ma*a+ja*s,Ma*s-ja*a),t.lineTo(Ma*o+ja*c,Ma*c-ja*o),t.closePath()}};function CEe(t,e){let n=null,r=UD(i);t=typeof t=="function"?t:on(t||qD),e=typeof e=="function"?e:on(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:on(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:on(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function k1(){}function C1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function AX(t){this._context=t}AX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function IEe(t){return new AX(t)}function kX(t){this._context=t}kX.prototype={areaStart:k1,areaEnd:k1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:C1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PEe(t){return new kX(t)}function CX(t){this._context=t}CX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NEe(t){return new CX(t)}function IX(t){this._context=t}IX.prototype={areaStart:k1,areaEnd:k1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function OEe(t){return new IX(t)}function r6(t){return t<0?-1:1}function i6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(r6(a)+r6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function a6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ak(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function I1(t){this._context=t}I1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ak(this,this._t0,a6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ak(this,a6(this,n=i6(this,t,e)),n);break;default:Ak(this,this._t0,n=i6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function PX(t){this._context=new NX(t)}(PX.prototype=Object.create(I1.prototype)).point=function(t,e){I1.prototype.point.call(this,e,t)};function NX(t){this._context=t}NX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function DEe(t){return new I1(t)}function REe(t){return new PX(t)}function OX(t){this._context=t}OX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=s6(t),i=s6(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function s6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function MEe(t){return new OX(t)}function S_(t,e){this._context=t,this._t=e}S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function jEe(t){return new S_(t,.5)}function zEe(t){return new S_(t,0)}function LEe(t){return new S_(t,1)}function Xd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function YP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function VEe(t,e){return t[e]}function BEe(t){const e=[];return e.key=t,e}function FEe(){var t=on([]),e=YP,n=Xd,r=VEe;function i(a){var s=Array.from(t.apply(this,arguments),BEe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=$D(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:on(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:on(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?YP:typeof a=="function"?a:on(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Xd,i):n},i}function UEe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Xd(t,e)}}function $Ee(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Xd(t,e)}}function qEe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;v+=w-S}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Xd(t,e)}}var kk={},Ck={},o6;function GEe(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Ck)),Ck}var Ik={},l6;function DX(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Ik)),Ik}var Pk={},c6;function GD(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Pk)),Pk}var Nk={},Ok={},u6;function HEe(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Ok)),Ok}var d6;function HD(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HEe(),n=GD();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(Nk)),Nk}var f6;function KD(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GEe(),n=DX(),r=GD(),i=HD();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(kk)),kk}var Dk,h6;function KEe(){return h6||(h6=1,Dk=KD().get),Dk}var WEe=KEe();const Qd=jl(WEe);var YEe=4;function $c(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YEe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+$c(o)+a:i+a},"")}var Mr=t=>t===0?0:t>0?1:-1,No=t=>typeof t=="number"&&t!=+t,Zd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,He=t=>(typeof t=="number"||t instanceof Number)&&!No(t),Ka=t=>He(t)||typeof t=="string",XEe=0,e0=t=>{var e=++XEe;return"".concat(t||"").concat(e)},li=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(e)&&typeof e!="string")return r;var a;if(Zd(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return No(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},RX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function pr(t,e,n){return He(t)&&He(e)?$c(t+n*(e-t)):e}function QEe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Qd(r,e))===n)}var zr=t=>t===null||typeof t>"u",X0=t=>zr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function $i(t){return t!=null}function sg(){}var ZEe=["type","size","sizeType"];function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XP.apply(null,arguments)}function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){JEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JEe(t,e,n){return(e=eTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eTe(t){var e=tTe(t,"string");return typeof e=="symbol"?e:e+""}function tTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nTe(t,e){if(t==null)return{};var n,r,i=rTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var MX={symbolCircle:qD,symbolCross:vEe,symbolDiamond:bEe,symbolSquare:xEe,symbolStar:EEe,symbolTriangle:TEe,symbolWye:kEe},iTe=Math.PI/180,aTe=t=>{var e="symbol".concat(X0(t));return MX[e]||qD},sTe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*iTe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},oTe=(t,e)=>{MX["symbol".concat(X0(t))]=e},WD=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=nTe(t,ZEe),a=g6(g6({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=aTe(s),v=CEe().type(g).size(sTe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ya(a);return He(u)&&He(f)&&He(n)?T.createElement("path",XP({},h,{className:Lt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};WD.registerSymbol=oTe;var jX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,lTe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{BD(i)&&(r[i]=(a=>n[i](n,a)))}),r},cTe=(t,e,n)=>r=>(t(e,n,r),null),Q0=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];BD(i)&&typeof a=="function"&&(r||(r={}),r[i]=cTe(a,e,n))}),r};function m6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(n),!0).forEach(function(r){dTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dTe(t,e,n){return(e=fTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fTe(t){var e=hTe(t,"string");return typeof e=="symbol"?e:e+""}function hTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sr(t,e){var n=uTe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P1.apply(null,arguments)}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){gTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gTe(t,e,n){return(e=mTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mTe(t){var e=vTe(t,"string");return typeof e=="symbol"?e:e+""}function vTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var La=32,yTe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function bTe(t){var{data:e,iconType:n,inactiveColor:r}=t,i=La/2,a=La/6,s=La/3,o=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var u;return T.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:La,y2:i,className:"recharts-legend-icon"})}if(c==="line")return T.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(La,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return T.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(La/8,"h").concat(La,"v").concat(La*3/4,"h").concat(-La,"z"),className:"recharts-legend-icon"});if(T.isValidElement(e.legendIcon)){var f=pTe({},e);return delete f.legendIcon,T.cloneElement(e.legendIcon,f)}return T.createElement(WD,{fill:o,cx:i,cy:i,size:La,sizeType:"diameter",type:c})}function xTe(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:s}=t,o={x:0,y:0,width:La,height:La},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,h)=>{var g=f.formatter||i,v=Lt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:f.inactive});if(f.type==="none")return null;var b=f.inactive?a:f.color,x=g?g(f.value,f,h):f.value;return T.createElement("li",P1({className:v,style:c,key:"legend-item-".concat(h)},Q0(t,f,h)),T.createElement(FD,{width:n,height:n,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},T.createElement(bTe,{data:f,iconType:s,inactiveColor:a})),T.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},x))})}var wTe=t=>{var e=Sr(t,yTe),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return T.createElement("ul",{className:"recharts-default-legend",style:a},T.createElement(xTe,P1({},e,{payload:n})))},Rk={},Mk={},y6;function STe(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s,a,n);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(Mk)),Mk}var jk={},b6;function _Te(){return b6||(b6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(jk)),jk}var zk={},x6;function zX(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(zk)),zk}var Lk={},Vk={},Bk={},w6;function ETe(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Bk)),Bk}var S6;function YD(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ETe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Vk)),Vk}var Fk={},_6;function TTe(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Fk)),Fk}var E6;function ATe(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD(),n=TTe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Lk)),Lk}var Uk={},$k={},T6;function kTe(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KD();function n(r){return function(i){return e.get(i,r)}}t.property=n})($k)),$k}var qk={},Gk={},Hk={},Kk={},A6;function LX(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Kk)),Kk}var Wk={},k6;function VX(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Wk)),Wk}var Yk={},C6;function BX(){return C6||(C6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(Yk)),Yk}var I6;function CTe(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LX(),n=VX(),r=BX();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,S,A,I){const N=g(b,x,w,S,A,I);return N!==void 0?!!N:a(b,x,v,I)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.isEqualsSameValueZero(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.isEqualsSameValueZero(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let A=0;A<f.length;A++){if(b.has(A))continue;const I=f[A];let N=!1;if(g(I,w,x,f,h,v)&&(N=!0),N){b.add(A),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Hk)),Hk}var P6;function FX(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CTe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Gk)),Gk}var Xk={},Qk={},Zk={},N6;function ITe(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Zk)),Zk}var Jk={},O6;function XD(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Jk)),Jk}var eC={},D6;function UX(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",I="[object Uint32Array]",N="[object BigUint64Array]",O="[object Int8Array]",D="[object Int16Array]",P="[object Int32Array]",C="[object BigInt64Array]",R="[object Float32Array]",M="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=M,t.functionTag=h,t.int16ArrayTag=D,t.int32ArrayTag=P,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=A,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(eC)),eC}var tC={},R6;function PTe(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(tC)),tC}var M6;function $X(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ITe(),n=XD(),r=UX(),i=VX(),a=PTe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[S,A]of f)w.set(S,o(A,S,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const S of f)w.add(o(S,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],A=Object.getOwnPropertyDescriptor(f,S);(A==null||A.writable)&&(f[S]=o(h[S],S,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Qk)),Qk}var j6;function NTe(){return j6||(j6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$X();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Xk)),Xk}var z6;function OTe(){return z6||(z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FX(),n=NTe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(qk)),qk}var nC={},rC={},iC={},L6;function DTe(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$X(),n=XD(),r=UX();function i(a,s){return e.cloneDeepWith(a,(o,c,u,f)=>{const h=s?.(o,c,u,f);if(h!==void 0)return h;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const g={};return f.set(a,g),e.copyProperties(g,a,u,f),g}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a?.valueOf());return e.copyProperties(g,a),g}case r.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(iC)),iC}var V6;function RTe(){return V6||(V6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DTe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(rC)),rC}var aC={},sC={},B6;function qX(){return B6||(B6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(sC)),sC}var oC={},F6;function MTe(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XD();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(oC)),oC}var U6;function jTe(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DX(),n=qX(),r=MTe(),i=HD();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(aC)),aC}var $6;function zTe(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FX(),n=GD(),r=RTe(),i=KD(),a=jTe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(nC)),nC}var q6;function LTe(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zX(),n=kTe(),r=OTe(),i=zTe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(Uk)),Uk}var G6;function VTe(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=STe(),n=_Te(),r=zX(),i=ATe(),a=LTe();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(c),1)):[]}t.uniqBy=s})(Rk)),Rk}var lC,H6;function BTe(){return H6||(H6=1,lC=VTe().uniqBy),lC}var FTe=BTe();const K6=jl(FTe);function GX(t,e,n){return e===!0?K6(t,n):typeof e=="function"?K6(t,e):t}var cC={exports:{}},uC={},dC={exports:{}},fC={};var W6;function UTe(){if(W6)return fC;W6=1;var t=Vp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return fC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,fC}var Y6;function $Te(){return Y6||(Y6=1,dC.exports=UTe()),dC.exports}var X6;function qTe(){if(X6)return uC;X6=1;var t=Vp(),e=$Te();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return uC.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(D){if(!A){if(A=!0,I=D,D=g(D),v!==void 0&&x.hasValue){var P=x.value;if(v(P,D))return N=P}return N=D}if(P=N,r(I,D))return P;var C=g(D);return v!==void 0&&v(P,C)?(I=D,P):(I=D,N=C)}var A=!1,I,N,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},uC}var Q6;function GTe(){return Q6||(Q6=1,cC.exports=qTe()),cC.exports}var HTe=GTe(),QD=T.createContext(null),KTe=t=>t,sn=()=>{var t=T.useContext(QD);return t?t.store.dispatch:KTe},yw=()=>{},WTe=()=>yw,YTe=(t,e)=>t===e;function qe(t){var e=T.useContext(QD),n=T.useMemo(()=>e?r=>{if(r!=null)return t(r)}:yw,[e,t]);return HTe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:WTe,e?e.store.getState:yw,e?e.store.getState:yw,n,YTe)}function XTe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function QTe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ZTe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Z6=t=>Array.isArray(t)?t:[t];function JTe(t){const e=Array.isArray(t[0])?t[0]:t;return ZTe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function eAe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var tAe=class{constructor(t){this.value=t}deref(){return this.value}},nAe=typeof WeakRef<"u"?WeakRef:tAe,rAe=0,J6=1;function kx(){return{s:rAe,v:void 0,o:null,p:null}}function HX(t,e={}){let n=kx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=kx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=kx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===J6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new nAe(f):f}return u.s=J6,u.v=f,f}return s.clearCache=()=>{n=kx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function iAe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),XTe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=HX,argsMemoizeOptions:b=[]}=f,x=Z6(g),w=Z6(b),S=JTe(i),A=h(function(){return a++,u.apply(null,arguments)},...x),I=v(function(){s++;const O=eAe(S,arguments);return o=A.apply(null,O),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:A,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var me=iAe(HX),aAe=Object.assign((t,e=me)=>{QTe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>aAe}),hC={},pC={},gC={},eF;function sAe(){return eF||(eF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(gC)),gC}var mC={},vC={},tF;function KX(){return tF||(tF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(vC)),vC}var nF;function oAe(){return nF||(nF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(mC)),mC}var rF;function lAe(){return rF||(rF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sAe(),n=oAe(),r=HD();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(pC)),pC}var yC={},iF;function cAe(){return iF||(iF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(yC)),yC}var bC={},aF;function WX(){return aF||(aF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qX(),n=YD(),r=LX(),i=BX();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}t.isIterateeCall=a})(bC)),bC}var sF;function uAe(){return sF||(sF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lAe(),n=cAe(),r=WX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(hC)),hC}var xC,oF;function dAe(){return oF||(oF=1,xC=uAe().sortBy),xC}var fAe=dAe();const __=jl(fAe);var YX=t=>t.legend.settings,hAe=t=>t.legend.size,pAe=t=>t.legend.payload,gAe=me([pAe,YX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?__(r,n):r});function mAe(){return qe(gAe)}var Cx=1;function XX(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Cx||Math.abs(s.left-e.left)>Cx||Math.abs(s.top-e.top)>Cx||Math.abs(s.width-e.width)>Cx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Hr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var vAe=typeof Symbol=="function"&&Symbol.observable||"@@observable",lF=vAe,wC=()=>Math.random().toString(36).substring(7).split("").join("."),yAe={INIT:`@@redux/INIT${wC()}`,REPLACE:`@@redux/REPLACE${wC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wC()}`},N1=yAe;function ZD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function QX(t,e,n){if(typeof t!="function")throw new Error(Hr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Hr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Hr(1));return n(QX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Hr(3));return i}function h(w){if(typeof w!="function")throw new Error(Hr(4));if(c)throw new Error(Hr(5));let S=!0;u();const A=o++;return s.set(A,w),function(){if(S){if(c)throw new Error(Hr(6));S=!1,u(),s.delete(A),a=null}}}function g(w){if(!ZD(w))throw new Error(Hr(7));if(typeof w.type>"u")throw new Error(Hr(8));if(typeof w.type!="string")throw new Error(Hr(17));if(c)throw new Error(Hr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(A=>{A()}),w}function v(w){if(typeof w!="function")throw new Error(Hr(10));r=w,g({type:N1.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Hr(11));function A(){const N=S;N.next&&N.next(f())}return A(),{unsubscribe:w(A)}},[lF](){return this}}}return g({type:N1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[lF]:b}}function bAe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:N1.INIT})>"u")throw new Error(Hr(12));if(typeof n(void 0,{type:N1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Hr(13))})}function ZX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{bAe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(Hr(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function O1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function xAe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Hr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=O1(...o)(i.dispatch),{...i,dispatch:a}}}function JX(t){return ZD(t)&&"type"in t&&typeof t.type=="string"}var eQ=Symbol.for("immer-nothing"),cF=Symbol.for("immer-draftable"),Ti=Symbol.for("immer-state");function vs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ha=Object,Pp=ha.getPrototypeOf,D1="constructor",E_="prototype",QP="configurable",R1="enumerable",bw="writable",t0="value",Il=t=>!!t&&!!t[Ti];function Rs(t){return t?tQ(t)||A_(t)||!!t[cF]||!!t[D1]?.[cF]||k_(t)||C_(t):!1}var wAe=ha[E_][D1].toString(),uF=new WeakMap;function tQ(t){if(!t||!JD(t))return!1;const e=Pp(t);if(e===null||e===ha[E_])return!0;const n=ha.hasOwnProperty.call(e,D1)&&e[D1];if(n===Object)return!0;if(!Ah(n))return!1;let r=uF.get(n);return r===void 0&&(r=Function.toString.call(n),uF.set(n,r)),r===wAe}function T_(t,e,n=!0){Z0(t)===0?(n?Reflect.ownKeys(t):ha.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Z0(t){const e=t[Ti];return e?e.type_:A_(t)?1:k_(t)?2:C_(t)?3:0}var dF=(t,e,n=Z0(t))=>n===2?t.has(e):ha[E_].hasOwnProperty.call(t,e),ZP=(t,e,n=Z0(t))=>n===2?t.get(e):t[e],M1=(t,e,n,r=Z0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function SAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var A_=Array.isArray,k_=t=>t instanceof Map,C_=t=>t instanceof Set,JD=t=>typeof t=="object",Ah=t=>typeof t=="function",SC=t=>typeof t=="boolean";function _Ae(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var il=t=>t.copy_||t.base_,eR=t=>t.modified_?t.copy_:t.base_;function JP(t,e){if(k_(t))return new Map(t);if(C_(t))return new Set(t);if(A_(t))return Array[E_].slice.call(t);const n=tQ(t);if(e===!0||e==="class_only"&&!n){const r=ha.getOwnPropertyDescriptors(t);delete r[Ti];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[bw]===!1&&(o[bw]=!0,o[QP]=!0),(o.get||o.set)&&(r[s]={[QP]:!0,[bw]:!0,[R1]:o[R1],[t0]:t[s]})}return ha.create(Pp(t),r)}else{const r=Pp(t);if(r!==null&&n)return{...t};const i=ha.create(r);return ha.assign(i,t)}}function tR(t,e=!1){return I_(t)||Il(t)||!Rs(t)||(Z0(t)>1&&ha.defineProperties(t,{set:Ix,add:Ix,clear:Ix,delete:Ix}),ha.freeze(t),e&&T_(t,(n,r)=>{tR(r,!0)},!1)),t}function EAe(){vs(2)}var Ix={[t0]:EAe};function I_(t){return t===null||!JD(t)?!0:ha.isFrozen(t)}var j1="MapSet",eN="Patches",fF="ArrayMethods",nQ={};function Jd(t){const e=nQ[t];return e||vs(0,t),e}var hF=t=>!!nQ[t],n0,rQ=()=>n0,TAe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hF(j1)?Jd(j1):void 0,arrayMethodsPlugin_:hF(fF)?Jd(fF):void 0});function pF(t,e){e&&(t.patchPlugin_=Jd(eN),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function tN(t){nN(t),t.drafts_.forEach(AAe),t.drafts_=null}function nN(t){t===n0&&(n0=t.parent_)}var gF=t=>n0=TAe(n0,t);function AAe(t){const e=t[Ti];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function mF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ti].modified_&&(tN(e),vs(4)),Rs(t)&&(t=vF(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ti].base_,t,e)}else t=vF(e,n);return kAe(e,t,!0),tN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==eQ?t:void 0}function vF(t,e){if(I_(e))return e;const n=e[Ti];if(!n)return z1(e,t.handledSet_,t);if(!P_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);sQ(n,t)}return n.copy_}function kAe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&tR(e,n)}function iQ(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var P_=(t,e)=>t.scope_===e,CAe=[];function aQ(t,e,n,r){const i=il(t),a=t.type_;if(r!==void 0&&ZP(i,r,a)===e){M1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;T_(i,(c,u)=>{if(Il(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??CAe;for(const o of s)M1(i,o,n,a)}function IAe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!P_(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=eR(a);aQ(t,a.draft_??a,s,n),sQ(a,i)})}function sQ(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}iQ(t)}}function PAe(t,e,n){const{scope_:r}=t;if(Il(n)){const i=n[Ti];P_(i,r)&&i.callbacks_.push(function(){xw(t);const s=eR(i);aQ(t,n,s,e)})}else Rs(n)&&t.callbacks_.push(function(){const a=il(t);t.type_===3?a.has(n)&&z1(n,r.handledSet_,r):ZP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&z1(ZP(t.copy_,e,t.type_),r.handledSet_,r)})}function z1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Il(t)||e.has(t)||!Rs(t)||I_(t)||(e.add(t),T_(t,(r,i)=>{if(Il(i)){const a=i[Ti];if(P_(a,n)){const s=eR(a);M1(t,r,s,t.type_),iQ(a)}}else Rs(i)&&z1(i,e,n)})),t}function NAe(t,e){const n=A_(t),r={type_:n?1:0,scope_:e?e.scope_:rQ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=L1;n&&(i=[r],a=r0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var L1={get(t,e){if(e===Ti)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=il(t);if(!dF(i,e,t.type_))return OAe(t,i,e);const a=i[e];if(t.finalized_||!Rs(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&_Ae(e))return a;if(a===_C(t.base_,e)){xw(t);const s=t.type_===1?+e:e,o=iN(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in il(t)},ownKeys(t){return Reflect.ownKeys(il(t))},set(t,e,n){const r=oQ(il(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=_C(il(t),e),a=i?.[Ti];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(SAe(n,i)&&(n!==void 0||dF(t.base_,e,t.type_)))return!0;xw(t),rN(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),PAe(t,e,n)),!0},deleteProperty(t,e){return xw(t),_C(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),rN(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=il(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[bw]:!0,[QP]:t.type_!==1||e!=="length",[R1]:r[R1],[t0]:n[e]}},defineProperty(){vs(11)},getPrototypeOf(t){return Pp(t.base_)},setPrototypeOf(){vs(12)}},r0={};for(let t in L1){let e=L1[t];r0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}r0.deleteProperty=function(t,e){return r0.set.call(this,t,e,void 0)};r0.set=function(t,e,n){return L1.set.call(this,t[0],e,n,t[0])};function _C(t,e){const n=t[Ti];return(n?il(n):t)[e]}function OAe(t,e,n){const r=oQ(e,n);return r?t0 in r?r[t0]:r.get?.call(t.draft_):void 0}function oQ(t,e){if(!(e in t))return;let n=Pp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Pp(n)}}function rN(t){t.modified_||(t.modified_=!0,t.parent_&&rN(t.parent_))}function xw(t){t.copy_||(t.assigned_=new Map,t.copy_=JP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var DAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Ah(n)&&!Ah(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}Ah(r)||vs(6),i!==void 0&&!Ah(i)&&vs(7);let a;if(Rs(n)){const s=gF(this),o=iN(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?tN(s):nN(s)}return pF(s,i),mF(a,s)}else if(!n||!JD(n)){if(a=r(n),a===void 0&&(a=n),a===eQ&&(a=void 0),this.autoFreeze_&&tR(a,!0),i){const s=[],o=[];Jd(eN).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else vs(1,n)},this.produceWithPatches=(n,r)=>{if(Ah(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},SC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),SC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),SC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Rs(e)||vs(8),Il(e)&&(e=Cs(e));const n=gF(this),r=iN(n,e,void 0);return r[Ti].isManual_=!0,nN(n),r}finishDraft(e,n){const r=e&&e[Ti];(!r||!r.isManual_)&&vs(9);const{scope_:i}=r;return pF(i,n),mF(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Jd(eN).applyPatches_;return Il(e)?i(e,n):this.produce(e,a=>i(a,n))}};function iN(t,e,n,r){const[i,a]=k_(e)?Jd(j1).proxyMap_(e,n):C_(e)?Jd(j1).proxySet_(e,n):NAe(e,n);return(n?.scope_??rQ()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?IAe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Cs(t){return Il(t)||vs(10,t),lQ(t)}function lQ(t){if(!Rs(t)||I_(t))return t;const e=t[Ti];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=JP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=JP(t,!0);return T_(n,(i,a)=>{M1(n,i,lQ(a))},r),e&&(e.finalized_=!1),n}var RAe=new DAe,cQ=RAe.produce;function uQ(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var MAe=uQ(),jAe=uQ,zAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?O1:O1.apply(null,arguments)};function Wa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ga(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>JX(r)&&r.type===t,n}var dQ=class Xm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Xm.prototype)}static get[Symbol.species](){return Xm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Xm(...e[0].concat(this)):new Xm(...e.concat(this))}};function yF(t){return Rs(t)?cQ(t,()=>{}):t}function Px(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function LAe(t){return typeof t=="boolean"}var VAe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new dQ;return n&&(LAe(n)?s.push(MAe):s.push(jAe(n.extraArgument))),s},fQ="RTK_autoBatch",yn=()=>t=>({payload:t,meta:{[fQ]:!0}}),bF=t=>e=>{setTimeout(e,t)},hQ=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bF(10):t.type==="callback"?t.queueNotification:bF(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[fQ],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},BAe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new dQ(t);return r&&i.push(hQ(typeof r=="object"?r:void 0)),i};function FAe(t){const e=VAe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(ZD(n))o=ZX(n);else throw new Error(ga(1));let c;typeof r=="function"?c=r(e):c=e();let u=O1;i&&(u=zAe({trace:!1,...typeof i=="object"&&i}));const f=xAe(...c),h=BAe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return QX(o,a,v)}function pQ(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ga(28));if(o in e)throw new Error(ga(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function UAe(t){return typeof t=="function"}function $Ae(t,e){let[n,r,i]=pQ(e),a;if(UAe(t))a=()=>yF(t());else{const o=yF(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Il(f)){const v=h(f,c);return v===void 0?f:v}else{if(Rs(f))return cQ(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var qAe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",GAe=(t=21)=>{let e="",n=t;for(;n--;)e+=qAe[Math.random()*64|0];return e},HAe=Symbol.for("rtk-slice-createasyncthunk");function KAe(t,e){return`${t}/${e}`}function WAe({creators:t}={}){const e=t?.asyncThunk?.[HAe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ga(11));const s=(typeof r.reducers=="function"?r.reducers(XAe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,N){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(ga(12));if(O in c.sliceCaseReducersByType)throw new Error(ga(13));return c.sliceCaseReducersByType[O]=N,u},addMatcher(I,N){return c.sliceMatchers.push({matcher:I,reducer:N}),u},exposeAction(I,N){return c.actionCreators[I]=N,u},exposeCaseReducer(I,N){return c.sliceCaseReducersByName[I]=N,u}};o.forEach(I=>{const N=s[I],O={reducerName:I,type:KAe(i,I),createNotation:typeof r.reducers=="function"};ZAe(N)?eke(O,N,u,e):QAe(O,N,u)});function f(){const[I={},N=[],O=void 0]=typeof r.extraReducers=="function"?pQ(r.extraReducers):[r.extraReducers],D={...I,...c.sliceCaseReducersByType};return $Ae(r.initialState,P=>{for(let C in D)P.addCase(C,D[C]);for(let C of c.sliceMatchers)P.addMatcher(C.matcher,C.reducer);for(let C of N)P.addMatcher(C.matcher,C.reducer);O&&P.addDefaultCase(O)})}const h=I=>I,g=new Map,v=new WeakMap;let b;function x(I,N){return b||(b=f()),b(I,N)}function w(){return b||(b=f()),b.getInitialState()}function S(I,N=!1){function O(P){let C=P[I];return typeof C>"u"&&N&&(C=Px(v,O,w)),C}function D(P=h){const C=Px(g,N,()=>new WeakMap);return Px(C,P,()=>{const R={};for(const[M,V]of Object.entries(r.selectors??{}))R[M]=YAe(V,P,()=>Px(v,P,w),N);return R})}return{reducerPath:I,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const A={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:N,...O}={}){const D=N??a;return I.inject({reducerPath:D,reducer:x},O),{...A,...S(D,!0)}}};return A}}function YAe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Yi=WAe();function XAe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function QAe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!JAe(r))throw new Error(ga(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Wa(t,s):Wa(t))}function ZAe(t){return t._reducerDefinitionType==="asyncThunk"}function JAe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function eke({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ga(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||Nx,pending:o||Nx,rejected:c||Nx,settled:u||Nx})}function Nx(){}var tke="task",gQ="listener",mQ="completed",nR="cancelled",nke=`task-${nR}`,rke=`task-${mQ}`,aN=`${gQ}-${nR}`,ike=`${gQ}-${mQ}`,N_=class{constructor(t){this.code=t,this.message=`${tke} ${nR} (reason: ${t})`}name="TaskAbortError";message},rR=(t,e)=>{if(typeof t!="function")throw new TypeError(ga(32))},V1=()=>{},vQ=(t,e=V1)=>(t.catch(e),t),yQ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Od=t=>{if(t.aborted)throw new N_(t.reason)};function bQ(t,e){let n=V1;return new Promise((r,i)=>{const a=()=>i(new N_(t.reason));if(t.aborted){a();return}n=yQ(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=V1})}var ake=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof N_?"cancelled":"rejected",error:n}}finally{e?.()}},B1=t=>e=>vQ(bQ(t,e).then(n=>(Od(t),n))),xQ=t=>{const e=B1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Qh}=Object,xF={},O_="listenerMiddleware",ske=(t,e)=>{const n=r=>yQ(t,()=>r.abort(t.reason));return(r,i)=>{rR(r);const a=new AbortController;n(a);const s=ake(async()=>{Od(t),Od(a.signal);const o=await r({pause:B1(a.signal),delay:xQ(a.signal),signal:a.signal});return Od(a.signal),o},()=>a.abort(rke));return i?.autoJoin&&e.push(s.catch(V1)),{result:B1(t)(s),cancel(){a.abort(nke)}}}},oke=(t,e)=>{const n=async(r,i)=>{Od(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await bQ(e,Promise.race(o));return Od(e),c}finally{a()}};return(r,i)=>vQ(n(r,i))},wQ=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Wa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ga(21));return rR(a),{predicate:i,type:e,effect:a}},SQ=Qh(t=>{const{type:e,predicate:n,effect:r}=wQ(t);return{id:GAe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ga(22))}}},{withTypes:()=>SQ}),wF=(t,e)=>{const{type:n,effect:r,predicate:i}=wQ(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},sN=t=>{t.pending.forEach(e=>{e.abort(aN)})},lke=(t,e)=>()=>{for(const n of e.keys())sN(n);t.clear()},SF=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},_Q=Qh(Wa(`${O_}/add`),{withTypes:()=>_Q}),cke=Wa(`${O_}/removeAll`),EQ=Qh(Wa(`${O_}/remove`),{withTypes:()=>EQ}),uke=(...t)=>{console.error(`${O_}/error`,...t)},J0=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=uke}=t;rR(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&sN(v)}),c=v=>{const b=wF(e,v)??SQ(v);return o(b)};Qh(c,{withTypes:()=>c});const u=v=>{const b=wF(e,v);return b&&(b.unsubscribe(),v.cancelActive&&sN(b)),!!b};Qh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const S=new AbortController,A=oke(c,S.signal),I=[];try{v.pending.add(S),r(v),await Promise.resolve(v.effect(b,Qh({},x,{getOriginalState:w,condition:(N,O)=>A(N,O).then(Boolean),take:A,delay:xQ(S.signal),pause:B1(S.signal),extra:a,signal:S.signal,fork:ske(S.signal,I),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((N,O,D)=>{N!==S&&(N.abort(aN),D.delete(N))})},cancel:()=>{S.abort(aN),v.pending.delete(S)},throwIfCancelled:()=>{Od(S.signal)}})))}catch(N){N instanceof N_||SF(s,N,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(ike),i(v),v.pending.delete(S)}},h=lke(e,n);return{middleware:v=>b=>x=>{if(!JX(x))return b(x);if(_Q.match(x))return c(x.payload);if(cke.match(x)){h();return}if(EQ.match(x))return u(x.payload);let w=v.getState();const S=()=>{if(w===xF)throw new Error(ga(23));return w};let A;try{if(A=b(x),e.size>0){const I=v.getState(),N=Array.from(e.values());for(const O of N){let D=!1;try{D=O.predicate(x,I,w)}catch(P){D=!1,SF(s,P,{raisedBy:"predicate"})}D&&f(O,x,v,S)}}}finally{w=xF}return A},startListening:c,stopListening:u,clearListeners:h}};function ga(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var dke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},TQ=Yi({name:"chartLayout",initialState:dke,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:fke,setLayout:hke,setChartSize:pke,setScale:gke}=TQ.actions,mke=TQ.reducer;function AQ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function pt(t){return Number.isFinite(t)}function Oo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function _F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(n),!0).forEach(function(r){vke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vke(t,e,n){return(e=yke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yke(t){var e=bke(t,"string");return typeof e=="symbol"?e:e+""}function bke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gn(t,e,n){return zr(t)||zr(e)?n:Ka(e)?Qd(t,e,n):typeof e=="function"?e(t):n}var xke=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&He(t[a]))return Bh(Bh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&He(t[s]))return Bh(Bh({},t),{},{[s]:t[s]+(i||0)})}return t},bu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",kQ=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},CQ=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Mr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,A)=>{var I=r?r.indexOf(S):S,N=s.map(I);return pt(N)?{coordinate:N+x,value:S,offset:x,index:A}:null}).filter($i);return w}return c&&u?u.map((S,A)=>{var I=s.map(S);return pt(I)?{coordinate:I+x,value:S,index:A,offset:x}:null}).filter($i):s.ticks&&f!=null?s.ticks(f).map((S,A)=>{var I=s.map(S);return pt(I)?{coordinate:I+x,value:S,index:A,offset:x}:null}).filter($i):s.domain().map((S,A)=>{var I=s.map(S);return pt(I)?{coordinate:I+x,value:r?r[S]:S,index:A,offset:x}:null}).filter($i)},wke=(t,e)=>{if(!e||e.length!==2||!He(e[0])||!He(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!He(t[0])||t[0]<n)&&(i[0]=n),(!He(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Ske=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=No(f)?h:f;g>=0?(u[0]=a,a+=g,u[1]=a):(u[0]=s,s+=g,u[1]=s)}}}},_ke=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=No(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},Eke={sign:Ske,expand:UEe,none:Xd,silhouette:$Ee,wiggle:qEe,positive:_ke},Tke=(t,e,n)=>{var r,i=(r=Eke[n])!==null&&r!==void 0?r:Xd,a=FEe().keys(e).value((o,c)=>Number(gn(o,c,0))).order(YP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=gn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&He(h[0])&&He(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function Ake(t){return t==null?void 0:String(t)}var EF=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=gn(a,e.dataKey,e.scale.domain()[s]);if(zr(o))return null;var c=e.scale.map(o);return He(c)?c-i/2+r:null},kke=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Cke=t=>{var e=t.flat(2).filter(He);return[Math.min(...e),Math.max(...e)]},Ike=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Pke=(t,e,n)=>{if(t!=null)return Ike(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=AQ(u,e,n),h=Cke(f);return!pt(h[0])||!pt(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},TF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=__(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function kF(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Bh(Bh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function D_(t,e){if(t)return String(t);if(typeof e=="string")return e}var Nke=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Oke=(t,e)=>e==="centric"?t.angle:t.radius,Bl=t=>t.layout.width,Fl=t=>t.layout.height,Dke=t=>t.layout.scale,IQ=t=>t.layout.margin,R_=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),M_=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),PQ="data-recharts-item-index",NQ="data-recharts-item-id",ey=60;function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ox(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(r){Rke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rke(t,e,n){return(e=Mke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mke(t){var e=jke(t,"string");return typeof e=="symbol"?e:e+""}function jke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zke=t=>t.brush.height;function Lke(t){var e=M_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ey;return n+i}return n},0)}function Vke(t){var e=M_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ey;return n+i}return n},0)}function Bke(t){var e=R_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Fke(t){var e=R_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var _r=me([Bl,Fl,IQ,zke,Lke,Vke,Bke,Fke,YX,hAe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=Ox(Ox({},h),f),v=g.bottom;g.bottom+=r,g=xke(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return Ox(Ox({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),Uke=me(_r,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),iR=me(Bl,Fl,(t,e)=>({x:0,y:0,width:t,height:e})),$ke=T.createContext(null),Ai=()=>T.useContext($ke)!=null,j_=t=>t.brush,z_=me([j_,_r,IQ],(t,e,n)=>({height:t.height,x:He(t.x)?t.x:e.left,y:He(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:He(t.width)?t.width:e.width})),EC={},TC={},AC={},IF;function qke(){return IF||(IF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...A){if(i?.aborted)return;s=this,o=A;const I=g==null;v(),c&&I&&f()};return S.schedule=v,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(AC)),AC}var PF;function Gke(){return PF||(PF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qke();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(TC)),TC}var NF;function Hke(){return NF||(NF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gke();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(EC)),EC}var kC,OF;function Kke(){return OF||(OF=1,kC=Hke().throttle),kC}var Wke=Kke();const Yke=jl(Wke);var U1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},vo={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},OQ=(t,e,n)=>{var{width:r=vo.width,height:i=vo.height,aspect:a,maxHeight:s}=n,o=Zd(r)?t:Number(r),c=Zd(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Xke={width:0,height:0,overflow:"visible"},Qke={width:0,overflowX:"visible"},Zke={height:0,overflowY:"visible"},Jke={},eCe=t=>{var{width:e,height:n}=t,r=Zd(e),i=Zd(n);return r&&i?Xke:r?Qke:i?Zke:Jke};function tCe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=vo.width,a=vo.height):i===void 0?i=r&&r>0?void 0:vo.width:a===void 0&&(a=r&&r>0?void 0:vo.height),{width:i,height:a}}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oN.apply(null,arguments)}function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){nCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nCe(t,e,n){return(e=rCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rCe(t){var e=iCe(t,"string");return typeof e=="symbol"?e:e+""}function iCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DQ=T.createContext(vo.initialDimension);function aCe(t){return Oo(t.width)&&Oo(t.height)}function RQ(t){var{children:e,width:n,height:r}=t,i=T.useMemo(()=>({width:n,height:r}),[n,r]);return aCe(i)?T.createElement(DQ.Provider,{value:i},e):null}var aR=()=>T.useContext(DQ),sCe=T.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=vo.initialDimension,width:i,height:a,minWidth:s=vo.minWidth,minHeight:o,maxHeight:c,children:u,debounce:f=vo.debounce,id:h,className:g,onResize:v,style:b={}}=t,x=T.useRef(null),w=T.useRef();w.current=v,T.useImperativeHandle(e,()=>x.current);var[S,A]=T.useState({containerWidth:r.width,containerHeight:r.height}),I=T.useCallback((C,R)=>{A(M=>{var V=Math.round(C),L=Math.round(R);return M.containerWidth===V&&M.containerHeight===L?M:{containerWidth:V,containerHeight:L}})},[]);T.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return sg;var C=L=>{var z,K=L[0];if(K!=null){var{width:Y,height:G}=K.contentRect;I(Y,G),(z=w.current)===null||z===void 0||z.call(w,Y,G)}};f>0&&(C=Yke(C,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(C),{width:M,height:V}=x.current.getBoundingClientRect();return I(M,V),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:N,containerHeight:O}=S;U1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:P}=OQ(N,O,{width:i,height:a,aspect:n,maxHeight:c});return U1(D!=null&&D>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,P,i,a,s,o,n),T.createElement("div",{id:h?"".concat(h):void 0,className:Lt("recharts-responsive-container",g),style:RF(RF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},T.createElement("div",{style:eCe({width:i,height:a})},T.createElement(RQ,{width:D,height:P},u)))}),ty=T.forwardRef((t,e)=>{var n=aR();if(Oo(n.width)&&Oo(n.height))return t.children;var{width:r,height:i}=tCe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=OQ(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return He(a)&&He(s)?T.createElement(RQ,{width:a,height:s},t.children):T.createElement(sCe,oN({},t,{width:r,height:i,ref:e}))});function sR(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var ny=()=>{var t,e=Ai(),n=qe(Uke),r=qe(z_),i=(t=qe(j_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},oCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},MQ=()=>{var t;return(t=qe(_r))!==null&&t!==void 0?t:oCe},oR=()=>qe(Bl),lR=()=>qe(Fl),lCe=()=>qe(t=>t.layout.margin),Vt=t=>t.layout.layoutType,og=()=>qe(Vt),jQ=()=>{var t=og();if(t==="horizontal"||t==="vertical")return t},zQ=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},cCe=()=>{var t=og();return t!==void 0},ry=t=>{var e=sn(),n=Ai(),{width:r,height:i}=t,a=aR(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),T.useEffect(()=>{!n&&Oo(s)&&Oo(o)&&e(pke({width:s,height:o}))},[e,n,s,o]),null},LQ=Symbol.for("immer-nothing"),MF=Symbol.for("immer-draftable"),ba=Symbol.for("immer-state");function ys(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var i0=Object.getPrototypeOf;function Np(t){return!!t&&!!t[ba]}function ef(t){return t?VQ(t)||Array.isArray(t)||!!t[MF]||!!t.constructor?.[MF]||iy(t)||V_(t):!1}var uCe=Object.prototype.constructor.toString(),jF=new WeakMap;function VQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=jF.get(n);return r===void 0&&(r=Function.toString.call(n),jF.set(n,r)),r===uCe}function $1(t,e,n=!0){L_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function L_(t){const e=t[ba];return e?e.type_:Array.isArray(t)?1:iy(t)?2:V_(t)?3:0}function lN(t,e){return L_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function BQ(t,e,n){const r=L_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function dCe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function iy(t){return t instanceof Map}function V_(t){return t instanceof Set}function od(t){return t.copy_||t.base_}function cN(t,e){if(iy(t))return new Map(t);if(V_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ba];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(i0(t),r)}else{const r=i0(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function cR(t,e=!1){return B_(t)||Np(t)||!ef(t)||(L_(t)>1&&Object.defineProperties(t,{set:Dx,add:Dx,clear:Dx,delete:Dx}),Object.freeze(t),e&&Object.values(t).forEach(n=>cR(n,!0))),t}function fCe(){ys(2)}var Dx={value:fCe};function B_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var hCe={};function tf(t){const e=hCe[t];return e||ys(0,t),e}var a0;function FQ(){return a0}function pCe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function zF(t,e){e&&(tf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function uN(t){dN(t),t.drafts_.forEach(gCe),t.drafts_=null}function dN(t){t===a0&&(a0=t.parent_)}function LF(t){return a0=pCe(a0,t)}function gCe(t){const e=t[ba];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function VF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ba].modified_&&(uN(e),ys(4)),ef(t)&&(t=q1(e,t),e.parent_||G1(e,t)),e.patches_&&tf("Patches").generateReplacementPatches_(n[ba].base_,t,e.patches_,e.inversePatches_)):t=q1(e,n,[]),uN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==LQ?t:void 0}function q1(t,e,n){if(B_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ba];if(!i)return $1(e,(a,s)=>BF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return G1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),$1(s,(c,u)=>BF(t,i,a,c,u,n,o),r),G1(t,a,!1),n&&t.patches_&&tf("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function BF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=B_(i);if(!(o&&!s)){if(Np(i)){const c=a&&e&&e.type_!==3&&!lN(e.assigned_,r)?a.concat(r):void 0,u=q1(t,i,c);if(BQ(n,r,u),Np(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(ef(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;q1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(iy(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&G1(t,i)}}}function G1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&cR(e,n)}function mCe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:FQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=uR;n&&(i=[r],a=s0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var uR={get(t,e){if(e===ba)return t;const n=od(t);if(!lN(n,e))return vCe(t,n,e);const r=n[e];return t.finalized_||!ef(r)?r:r===CC(t.base_,e)?(IC(t),t.copy_[e]=hN(r,t)):r},has(t,e){return e in od(t)},ownKeys(t){return Reflect.ownKeys(od(t))},set(t,e,n){const r=UQ(od(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=CC(od(t),e),a=i?.[ba];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(dCe(n,i)&&(n!==void 0||lN(t.base_,e)))return!0;IC(t),fN(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return CC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,IC(t),fN(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=od(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ys(11)},getPrototypeOf(t){return i0(t.base_)},setPrototypeOf(){ys(12)}},s0={};$1(uR,(t,e)=>{s0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});s0.deleteProperty=function(t,e){return s0.set.call(this,t,e,void 0)};s0.set=function(t,e,n){return uR.set.call(this,t[0],e,n,t[0])};function CC(t,e){const n=t[ba];return(n?od(n):t)[e]}function vCe(t,e,n){const r=UQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function UQ(t,e){if(!(e in t))return;let n=i0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=i0(n)}}function fN(t){t.modified_||(t.modified_=!0,t.parent_&&fN(t.parent_))}function IC(t){t.copy_||(t.copy_=cN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var yCe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&ys(6),r!==void 0&&typeof r!="function"&&ys(7);let i;if(ef(e)){const a=LF(this),s=hN(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?uN(a):dN(a)}return zF(a,r),VF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===LQ&&(i=void 0),this.autoFreeze_&&cR(i,!0),r){const a=[],s=[];tf("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else ys(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ef(t)||ys(8),Np(t)&&(t=bCe(t));const e=LF(this),n=hN(t,void 0);return n[ba].isManual_=!0,dN(e),n}finishDraft(t,e){const n=t&&t[ba];(!n||!n.isManual_)&&ys(9);const{scope_:r}=n;return zF(r,e),VF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=tf("Patches").applyPatches_;return Np(t)?r(t,e):this.produce(t,i=>r(i,e))}};function hN(t,e){const n=iy(t)?tf("MapSet").proxyMap_(t,e):V_(t)?tf("MapSet").proxySet_(t,e):mCe(t,e);return(e?e.scope_:FQ()).drafts_.push(n),n}function bCe(t){return Np(t)||ys(10,t),$Q(t)}function $Q(t){if(!ef(t)||B_(t))return t;const e=t[ba];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=cN(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=cN(t,!0);return $1(n,(i,a)=>{BQ(n,i,$Q(a))},r),e&&(e.finalized_=!1),n}var xCe=new yCe;xCe.produce;var wCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},qQ=Yi({name:"legend",initialState:wCe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:yn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:yn()},removeLegendPayload:{reducer(t,e){var n=Cs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:yn()}}}),{setLegendSize:FF,setLegendSettings:SCe,addLegendPayload:GQ,replaceLegendPayload:HQ,removeLegendPayload:KQ}=qQ.actions,_Ce=qQ.reducer,ECe=["contextPayload"];function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(null,arguments)}function UF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(n),!0).forEach(function(r){TCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TCe(t,e,n){return(e=ACe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ACe(t){var e=kCe(t,"string");return typeof e=="symbol"?e:e+""}function kCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CCe(t,e){if(t==null)return{};var n,r,i=ICe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ICe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PCe(t){return t.value}function NCe(t){var{contextPayload:e}=t,n=CCe(t,ECe),r=GX(e,t.payloadUniqBy,PCe),i=Op(Op({},n),{},{payload:r});return T.isValidElement(t.content)?T.cloneElement(t.content,i):typeof t.content=="function"?T.createElement(t.content,i):T.createElement(wTe,i)}function OCe(t,e,n,r,i,a){var{layout:s,align:o,verticalAlign:c}=e,u,f;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&s==="vertical"?u={left:((r||0)-a.width)/2}:u=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?f={top:((i||0)-a.height)/2}:f=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Op(Op({},u),f)}function DCe(t){var e=sn();return T.useEffect(()=>{e(SCe(t))},[e,t]),null}function RCe(t){var e=sn();return T.useEffect(()=>(e(FF(t)),()=>{e(FF({width:0,height:0}))}),[e,t]),null}function MCe(t,e,n,r){return t==="vertical"&&e!=null?{height:e}:t==="horizontal"?{width:n||r}:null}var jCe={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function WQ(t){var e=Sr(t,jCe),n=mAe(),r=dEe(),i=lCe(),{width:a,height:s,wrapperStyle:o,portal:c}=e,[u,f]=XX([n]),h=oR(),g=lR();if(h==null||g==null)return null;var v=h-(i?.left||0)-(i?.right||0),b=MCe(e.layout,s,a,v),x=c?o:Op(Op({position:"absolute",width:b?.width||a||"auto",height:b?.height||s||"auto"},OCe(o,e,i,h,g,u)),o),w=c??r;if(w==null||n==null)return null;var S=T.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:f},T.createElement(DCe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&T.createElement(RCe,{width:u.width,height:u.height}),T.createElement(NCe,pN({},e,b,{margin:i,chartWidth:h,chartHeight:g,contextPayload:n})));return u2.createPortal(S,w)}WQ.displayName="Legend";function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(null,arguments)}function $F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Im(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$F(Object(n),!0).forEach(function(r){zCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zCe(t,e,n){return(e=LCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LCe(t){var e=VCe(t,"string");return typeof e=="symbol"?e:e+""}function VCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BCe(t){return Array.isArray(t)&&Ka(t[0])&&Ka(t[1])?t.join(" ~ "):t}var gh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},FCe=t=>{var{separator:e=gh.separator,contentStyle:n,itemStyle:r,labelStyle:i=gh.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=gh.accessibilityLayer}=t,v=()=>{if(a&&a.length){var O={padding:0,margin:0},D=(o?__(a,o):a).map((P,C)=>{if(P.type==="none")return null;var R=P.formatter||s||BCe,{value:M,name:V}=P,L=M,z=V;if(R){var K=R(M,V,P,C,a);if(Array.isArray(K))[L,z]=K;else if(K!=null)L=K;else return null}var Y=Im(Im({},gh.itemStyle),{},{color:P.color||gh.itemStyle.color},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Y},Ka(z)?T.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Ka(z)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},L),T.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},b=Im(Im({},gh.contentStyle),n),x=Im({margin:0},i),w=!zr(f),S=w?f:"",A=Lt("recharts-default-tooltip",c),I=Lt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var N=g?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",gN({className:A,style:b},N),T.createElement("p",{className:I,style:x},T.isValidElement(S)?S:"".concat(S)),v())},Pm="recharts-tooltip-wrapper",UCe={visibility:"hidden"};function $Ce(t){var{coordinate:e,translateX:n,translateY:r}=t;return Lt(Pm,{["".concat(Pm,"-right")]:He(n)&&e&&He(e.x)&&n>=e.x,["".concat(Pm,"-left")]:He(n)&&e&&He(e.x)&&n<e.x,["".concat(Pm,"-bottom")]:He(r)&&e&&He(e.y)&&r>=e.y,["".concat(Pm,"-top")]:He(r)&&e&&He(e.y)&&r<e.y})}function qF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&He(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function qCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function GCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,f,h,g;return o.height>0&&o.width>0&&n?(h=qF({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),g=qF({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),f=qCe({translateX:h,translateY:g,useTranslate3d:c})):f=UCe,{cssProperties:f,cssClasses:$Ce({translateX:h,translateY:g,coordinate:n})}}function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){mN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mN(t,e,n){return(e=HCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HCe(t){var e=KCe(t,"string");return typeof e=="symbol"?e:e+""}function KCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class WCe extends T.PureComponent{constructor(){super(...arguments),mN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),mN(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,A=typeof u=="number"?u:u.x,I=typeof u=="number"?u:u.y,{cssClasses:N,cssProperties:O}=GCe({allowEscapeViewBox:n,coordinate:s,offsetLeft:A,offsetTop:I,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),D=S?{}:Rx(Rx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=Rx(Rx({},D),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:P,ref:w},a)}}var YQ=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(null,arguments)}function HF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(n),!0).forEach(function(r){YCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YCe(t,e,n){return(e=XCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XCe(t){var e=QCe(t,"string");return typeof e=="symbol"?e:e+""}function QCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WF={curveBasisClosed:PEe,curveBasisOpen:NEe,curveBasis:IEe,curveBumpX:gEe,curveBumpY:mEe,curveLinearClosed:OEe,curveLinear:w_,curveMonotoneX:DEe,curveMonotoneY:REe,curveNatural:MEe,curveStep:jEe,curveStepAfter:LEe,curveStepBefore:zEe},H1=t=>pt(t.x)&&pt(t.y),YF=t=>t.base!=null&&H1(t.base)&&H1(t),Nm=t=>t.x,Om=t=>t.y,ZCe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(X0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=WF["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return WF[n]||w_},XF={connectNulls:!1,type:"linear"},JCe=t=>{var{type:e=XF.type,points:n=[],baseLine:r,layout:i,connectNulls:a=XF.connectNulls}=t,s=ZCe(e,i),o=a?n.filter(H1):n;if(Array.isArray(r)){var c,u=n.map((b,x)=>KF(KF({},b),{},{base:r[x]}));i==="vertical"?c=Ax().y(Om).x1(Nm).x0(b=>b.base.x):c=Ax().x(Nm).y1(Om).y0(b=>b.base.y);var f=c.defined(YF).curve(s),h=a?u.filter(YF):u;return f(h)}var g;i==="vertical"&&He(r)?g=Ax().y(Om).x1(Nm).x0(r):He(r)?g=Ax().x(Nm).y1(Om).y0(r):g=SX().x(Nm).y(Om);var v=g.defined(H1).curve(s);return v(o)},dR=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=og();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?JCe(s):r;return T.createElement("path",vN({},Ds(t),lTe(t),{className:Lt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},eIe=["x","y","top","left","width","height","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(null,arguments)}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tIe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(r){nIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nIe(t,e,n){return(e=rIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rIe(t){var e=iIe(t,"string");return typeof e=="symbol"?e:e+""}function iIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aIe(t,e){if(t==null)return{};var n,r,i=sIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oIe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),lIe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=aIe(t,eIe),u=tIe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!He(e)||!He(n)||!He(a)||!He(s)||!He(r)||!He(i)?null:T.createElement("path",yN({},ya(u),{className:Lt("recharts-cross",o),d:oIe(e,n,a,s,r,i)}))};function cIe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ZF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(n),!0).forEach(function(r){uIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uIe(t,e,n){return(e=dIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dIe(t){var e=fIe(t,"string");return typeof e=="symbol"?e:e+""}function fIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hIe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),XQ=(t,e,n)=>t.map(r=>"".concat(hIe(r)," ").concat(e,"ms ").concat(n)).join(","),pIe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),o0=(t,e)=>Object.keys(e).reduce((n,r)=>JF(JF({},n),{},{[r]:t(r,e[r])}),{});function eU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(n),!0).forEach(function(r){gIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gIe(t,e,n){return(e=mIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mIe(t){var e=vIe(t,"string");return typeof e=="symbol"?e:e+""}function vIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K1=(t,e,n)=>t+(e-t)*n,bN=t=>{var{from:e,to:n}=t;return e!==n},QQ=(t,e,n)=>{var r=o0((i,a)=>{if(bN(a)){var[s,o]=t(a.from,a.to,a.velocity);return gr(gr({},a),{},{from:s,velocity:o})}return a},e);return n<1?o0((i,a)=>bN(a)&&r[i]!=null?gr(gr({},a),{},{velocity:K1(a.velocity,r[i].velocity,n),from:K1(a.from,r[i].from,n)}):a,e):QQ(t,r,n-1)};function yIe(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>gr(gr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>o0((g,v)=>v.from,o),u=()=>!Object.values(o).filter(bN).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=QQ(n,o,b),i(gr(gr(gr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function bIe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:gr(gr({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=o0((x,w)=>K1(...w,n(g)),c);if(a(gr(gr(gr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=o0((x,w)=>K1(...w,n(1)),c);a(gr(gr(gr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const xIe=(t,e,n,r,i,a)=>{var s=pIe(t,e);return n==null?()=>(i(gr(gr({},t),e)),()=>{}):n.isStepper===!0?yIe(t,e,n,s,i,a):bIe(t,e,n,r,s,i,a)};var W1=1e-4,ZQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],JQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),tU=(t,e)=>n=>{var r=ZQ(t,e);return JQ(r,n)},wIe=(t,e)=>n=>{var r=ZQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return JQ(i,n)},SIe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},_Ie=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=SIe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},EIe=(t,e,n,r)=>{var i=tU(t,n),a=tU(e,r),s=wIe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<W1||b<W1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},nU=function(){return EIe(..._Ie(...arguments))},TIe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<W1&&Math.abs(h)<W1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},AIe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return nU(t);case"spring":return TIe();default:if(t.split("(")[0]==="cubic-bezier")return nU(t)}return typeof t=="function"?t:null};function kIe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class CIe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function IIe(){return kIe(new CIe)}var PIe=T.createContext(IIe);function NIe(t,e){var n=T.useContext(PIe);return T.useMemo(()=>e??n(t),[t,e,n])}var OIe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),F_={isSsr:OIe()},DIe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rU={t:0},PC={t:1};function U_(t){var e=Sr(t,DIe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!F_.isSsr:n,h=NIe(e.animationId,e.animationManager),[g,v]=T.useState(f?rU:PC),b=T.useRef(null);return T.useEffect(()=>{f||v(PC)},[f]),T.useEffect(()=>{if(!f||!r)return sg;var x=xIe(rU,PC,AIe(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function $_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef(e0(e)),r=T.useRef(t);return r.current!==t&&(n.current=e0(e),r.current=t),n.current}var RIe=["radius"],MIe=["radius"],iU,aU,sU,oU,lU,cU,uU,dU,fU,hU;function pU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(n),!0).forEach(function(r){jIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jIe(t,e,n){return(e=zIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zIe(t){var e=LIe(t,"string");return typeof e=="symbol"?e:e+""}function LIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y1.apply(null,arguments)}function mU(t,e){if(t==null)return{};var n,r,i=VIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function io(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var vU=(t,e,n,r,i)=>{var a=$c(n),s=$c(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&Array.isArray(i)){for(var g=[0,0,0,0],v=0,b=4;v<b;v++){var x,w=(x=i[v])!==null&&x!==void 0?x:0;g[v]=w>o?o:w}h=Mn(iU||(iU=io(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(aU||(aU=io(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Mn(sU||(sU=io(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Mn(oU||(oU=io(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(lU||(lU=io(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(cU||(cU=io(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Mn(uU||(uU=io(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Mn(dU||(dU=io(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);h=Mn(fU||(fU=io(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else h=Mn(hU||(hU=io(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},yU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eZ=t=>{var e=Sr(t,yU),n=T.useRef(null),[r,i]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&i(X)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=T.useRef(o),S=T.useRef(c),A=T.useRef(a),I=T.useRef(s),N=T.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=$_(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var D=Lt("recharts-rectangle",f);if(!x){var P=ya(e),{radius:C}=P,R=mU(P,RIe);return T.createElement("path",Y1({},R,{x:$c(a),y:$c(s),width:$c(o),height:$c(c),radius:typeof u=="number"?u:void 0,className:D,d:vU(a,s,o,c,u)}))}var M=w.current,V=S.current,L=A.current,z=I.current,K="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),G=XQ(["strokeDasharray"],g,typeof h=="string"?h:yU.animationEasing);return T.createElement(U_,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},X=>{var J=pr(M,o,X),ee=pr(V,c,X),Q=pr(L,a,X),U=pr(z,s,X);n.current&&(w.current=J,S.current=ee,A.current=Q,I.current=U);var Z;b?X>0?Z={transition:G,strokeDasharray:Y}:Z={strokeDasharray:K}:Z={strokeDasharray:Y};var te=ya(e),{radius:W}=te,ue=mU(te,MIe);return T.createElement("path",Y1({},ue,{radius:typeof u=="number"?u:void 0,className:D,d:vU(Q,U,J,ee,u),ref:n,style:gU(gU({},Z),e.style)}))})};function bU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(n),!0).forEach(function(r){BIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BIe(t,e,n){return(e=FIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FIe(t){var e=UIe(t,"string");return typeof e=="symbol"?e:e+""}function UIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X1=Math.PI/180,$Ie=t=>t*180/Math.PI,sr=(t,e,n,r)=>({x:t+Math.cos(-X1*r)*n,y:e+Math.sin(-X1*r)*n}),tZ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},qIe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},GIe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=qIe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:$Ie(c),angleInRadian:c}},HIe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},KIe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},WIe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=GIe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=HIe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?xU(xU({},e),{},{radius:i,angle:KIe(f,e)}):null};function nZ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=sr(e,n,r,i),o=sr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var wU,SU,_U,EU,TU,AU,kU;function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(null,arguments)}function wd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var YIe=(t,e)=>{var n=Mr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Mx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/X1,h=c?i:i+a*f,g=sr(e,n,u,h),v=sr(e,n,r,h),b=c?i-a*f:i,x=sr(e,n,u*Math.cos(f*X1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},rZ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=YIe(a,s),c=a+o,u=sr(e,n,i,a),f=sr(e,n,i,c),h=Mn(wU||(wU=wd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=sr(e,n,r,a),v=sr(e,n,r,c);h+=Mn(SU||(SU=wd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(_U||(_U=wd(["L ",","," Z"])),e,n);return h},XIe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Mr(u-c),{circleTangency:h,lineTangency:g,theta:v}=Mx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=Mx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(S<0)return s?Mn(EU||(EU=wd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):rZ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var A=Mn(TU||(TU=wd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:N,theta:O}=Mx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:D,lineTangency:P,theta:C}=Mx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-O-C;if(R<0&&a===0)return"".concat(A,"L").concat(e,",").concat(n,"Z");A+=Mn(AU||(AU=wd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),P.x,P.y,a,a,+(f<0),D.x,D.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),N.x,N.y)}else A+=Mn(kU||(kU=wd(["L",",","Z"])),e,n);return A},QIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iZ=t=>{var e=Sr(t,QIe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Lt("recharts-sector",h),v=a-i,b=li(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=XIe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=rZ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),T.createElement("path",xN({},ya(e),{className:g,d:x}))};function ZIe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(jX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=sr(r,i,a,o),u=sr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return nZ(e)}}var NC={},OC={},DC={},CU;function JIe(){return CU||(CU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(DC)),DC}var IU;function ePe(){return IU||(IU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JIe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(OC)),OC}var PU;function tPe(){return PU||(PU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX(),n=ePe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(NC)),NC}var RC,NU;function nPe(){return NU||(NU=1,RC=tPe().range),RC}var rPe=nPe();const aZ=jl(rPe);function Xc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iPe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fR(t){let e,n,r;t.length!==2?(e=Xc,n=(o,c)=>Xc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Xc||t===iPe?t:aPe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function aPe(){return 0}function sZ(t){return t===null?NaN:+t}function*sPe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const oPe=fR(Xc),ay=oPe.right;fR(sZ).center;class OU extends Map{constructor(e,n=uPe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(DU(this,e))}has(e){return super.has(DU(this,e))}set(e,n){return super.set(lPe(this,e),n)}delete(e){return super.delete(cPe(this,e))}}function DU({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lPe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function cPe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function uPe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function dPe(t=Xc){if(t===Xc)return oZ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function oZ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const fPe=Math.sqrt(50),hPe=Math.sqrt(10),pPe=Math.sqrt(2);function Q1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=fPe?10:a>=hPe?5:a>=pPe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Q1(t,e,n*2):[o,c,u]}function wN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Q1(e,t,n):Q1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function SN(t,e,n){return e=+e,t=+t,n=+n,Q1(t,e,n)[2]}function _N(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?SN(e,t,n):SN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function RU(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function MU(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function lZ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?oZ:dPe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));lZ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(Dm(t,n,e),i(t[r],a)>0&&Dm(t,n,r);s<o;){for(Dm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Dm(t,n,o):(++o,Dm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Dm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function gPe(t,e,n){if(t=Float64Array.from(sPe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return MU(t);if(e>=1)return RU(t);var r,i=(r-1)*e,a=Math.floor(i),s=RU(lZ(t,a).subarray(0,a+1)),o=MU(t.subarray(a+1));return s+(o-s)*(i-a)}}function mPe(t,e,n=sZ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function vPe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Za(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ul(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const EN=Symbol("implicit");function hR(){var t=new OU,e=[],n=[],r=EN;function i(a){let s=t.get(a);if(s===void 0){if(r!==EN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new OU;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hR(e,n).unknown(r)},Za.apply(i,arguments),i}function pR(){var t=hR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=vPe(g).map(function(S){return b+a*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return pR(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Za.apply(h(),arguments)}function cZ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cZ(e())},t}function yPe(){return cZ(pR.apply(null,arguments).paddingInner(1))}function gR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uZ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sy(){}var l0=.7,Z1=1/l0,Zh="\\s*([+-]?\\d+)\\s*",c0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",To="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bPe=/^#([0-9a-f]{3,8})$/,xPe=new RegExp(`^rgb\\(${Zh},${Zh},${Zh}\\)$`),wPe=new RegExp(`^rgb\\(${To},${To},${To}\\)$`),SPe=new RegExp(`^rgba\\(${Zh},${Zh},${Zh},${c0}\\)$`),_Pe=new RegExp(`^rgba\\(${To},${To},${To},${c0}\\)$`),EPe=new RegExp(`^hsl\\(${c0},${To},${To}\\)$`),TPe=new RegExp(`^hsla\\(${c0},${To},${To},${c0}\\)$`),jU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gR(sy,u0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zU,formatHex:zU,formatHex8:APe,formatHsl:kPe,formatRgb:LU,toString:LU});function zU(){return this.rgb().formatHex()}function APe(){return this.rgb().formatHex8()}function kPe(){return dZ(this).formatHsl()}function LU(){return this.rgb().formatRgb()}function u0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bPe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?VU(e):n===3?new qi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?jx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?jx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xPe.exec(t))?new qi(e[1],e[2],e[3],1):(e=wPe.exec(t))?new qi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=SPe.exec(t))?jx(e[1],e[2],e[3],e[4]):(e=_Pe.exec(t))?jx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=EPe.exec(t))?UU(e[1],e[2]/100,e[3]/100,1):(e=TPe.exec(t))?UU(e[1],e[2]/100,e[3]/100,e[4]):jU.hasOwnProperty(t)?VU(jU[t]):t==="transparent"?new qi(NaN,NaN,NaN,0):null}function VU(t){return new qi(t>>16&255,t>>8&255,t&255,1)}function jx(t,e,n,r){return r<=0&&(t=e=n=NaN),new qi(t,e,n,r)}function CPe(t){return t instanceof sy||(t=u0(t)),t?(t=t.rgb(),new qi(t.r,t.g,t.b,t.opacity)):new qi}function TN(t,e,n,r){return arguments.length===1?CPe(t):new qi(t,e,n,r??1)}function qi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}gR(qi,TN,uZ(sy,{brighter(t){return t=t==null?Z1:Math.pow(Z1,t),new qi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?l0:Math.pow(l0,t),new qi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qi(Dd(this.r),Dd(this.g),Dd(this.b),J1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BU,formatHex:BU,formatHex8:IPe,formatRgb:FU,toString:FU}));function BU(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function IPe(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function FU(){const t=J1(this.opacity);return`${t===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${t===1?")":`, ${t})`}`}function J1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sd(t){return t=Dd(t),(t<16?"0":"")+t.toString(16)}function UU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bs(t,e,n,r)}function dZ(t){if(t instanceof bs)return new bs(t.h,t.s,t.l,t.opacity);if(t instanceof sy||(t=u0(t)),!t)return new bs;if(t instanceof bs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new bs(s,o,c,t.opacity)}function PPe(t,e,n,r){return arguments.length===1?dZ(t):new bs(t,e,n,r??1)}function bs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}gR(bs,PPe,uZ(sy,{brighter(t){return t=t==null?Z1:Math.pow(Z1,t),new bs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?l0:Math.pow(l0,t),new bs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qi(MC(t>=240?t-240:t+120,i,r),MC(t,i,r),MC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new bs($U(this.h),zx(this.s),zx(this.l),J1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=J1(this.opacity);return`${t===1?"hsl(":"hsla("}${$U(this.h)}, ${zx(this.s)*100}%, ${zx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $U(t){return t=(t||0)%360,t<0?t+360:t}function zx(t){return Math.max(0,Math.min(1,t||0))}function MC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const mR=t=>()=>t;function NPe(t,e){return function(n){return t+n*e}}function OPe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function DPe(t){return(t=+t)==1?fZ:function(e,n){return n-e?OPe(e,n,t):mR(isNaN(e)?n:e)}}function fZ(t,e){var n=e-t;return n?NPe(t,n):mR(isNaN(t)?e:t)}const qU=(function t(e){var n=DPe(e);function r(i,a){var s=n((i=TN(i)).r,(a=TN(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=fZ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function RPe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function MPe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jPe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=lg(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function zPe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function eS(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function LPe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=lg(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var AN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jC=new RegExp(AN.source,"g");function VPe(t){return function(){return t}}function BPe(t){return function(e){return t(e)+""}}function FPe(t,e){var n=AN.lastIndex=jC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=AN.exec(t))&&(i=jC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:eS(r,i)})),n=jC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?BPe(c[0].x):VPe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function lg(t,e){var n=typeof e,r;return e==null||n==="boolean"?mR(e):(n==="number"?eS:n==="string"?(r=u0(e))?(e=r,qU):FPe:e instanceof u0?qU:e instanceof Date?zPe:MPe(e)?RPe:Array.isArray(e)?jPe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?LPe:eS)(t,e)}function vR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function UPe(t,e){e===void 0&&(e=t,t=lg);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function $Pe(t){return function(){return t}}function tS(t){return+t}var GU=[0,1];function Si(t){return t}function kN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$Pe(isNaN(e)?NaN:.5)}function qPe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function GPe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=kN(i,r),a=n(s,a)):(r=kN(r,i),a=n(a,s)),function(o){return a(r(o))}}function HPe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=kN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=ay(t,o,1,r)-1;return a[c](i[c](o))}}function oy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function q_(){var t=GU,e=GU,n=lg,r,i,a,s=Si,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Si&&(s=qPe(t[0],t[g-1])),o=g>2?HPe:GPe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),eS)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,tS),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=vR,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Si,f()):s!==Si},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function yR(){return q_()(Si,Si)}function KPe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nS(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Dp(t){return t=nS(Math.abs(t)),t?t[1]:NaN}function WPe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function YPe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var XPe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d0(t){if(!(e=XPe.exec(t)))throw new Error("invalid format: "+t);var e;return new bR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}d0.prototype=bR.prototype;function bR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QPe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var rS;function ZPe(t,e){var n=nS(t,e);if(!n)return rS=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(rS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+nS(t,Math.max(0,e+a-1))[0]}function HU(t,e){var n=nS(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const KU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:KPe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>HU(t*100,e),r:HU,s:ZPe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function WU(t){return t}var YU=Array.prototype.map,XU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function JPe(t){var e=t.grouping===void 0||t.thousands===void 0?WU:WPe(YU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?WU:YPe(YU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,g){h=d0(h);var v=h.fill,b=h.align,x=h.sign,w=h.symbol,S=h.zero,A=h.width,I=h.comma,N=h.precision,O=h.trim,D=h.type;D==="n"?(I=!0,D="g"):KU[D]||(N===void 0&&(N=12),O=!0,D="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var P=(g&&g.prefix!==void 0?g.prefix:"")+(w==="$"?n:w==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():""),C=(w==="$"?r:/[%p]/.test(D)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),R=KU[D],M=/[defgprs%]/.test(D);N=N===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function V(L){var z=P,K=C,Y,G,X;if(D==="c")K=R(L)+K,L="";else{L=+L;var J=L<0||1/L<0;if(L=isNaN(L)?c:R(Math.abs(L),N),O&&(L=QPe(L)),J&&+L==0&&x!=="+"&&(J=!1),z=(J?x==="("?x:o:x==="-"||x==="("?"":x)+z,K=(D==="s"&&!isNaN(L)&&rS!==void 0?XU[8+rS/3]:"")+K+(J&&x==="("?")":""),M){for(Y=-1,G=L.length;++Y<G;)if(X=L.charCodeAt(Y),48>X||X>57){K=(X===46?i+L.slice(Y+1):L.slice(Y))+K,L=L.slice(0,Y);break}}}I&&!S&&(L=e(L,1/0));var ee=z.length+L.length+K.length,Q=ee<A?new Array(A-ee+1).join(v):"";switch(I&&S&&(L=e(Q+L,Q.length?A-K.length:1/0),Q=""),b){case"<":L=z+L+K+Q;break;case"=":L=z+Q+L+K;break;case"^":L=Q.slice(0,ee=Q.length>>1)+z+L+K+Q.slice(ee);break;default:L=Q+z+L+K;break}return a(L)}return V.toString=function(){return h+""},V}function f(h,g){var v=Math.max(-8,Math.min(8,Math.floor(Dp(g)/3)))*3,b=Math.pow(10,-v),x=u((h=d0(h),h.type="f",h),{suffix:XU[8+v/3]});return function(w){return x(b*w)}}return{format:u,formatPrefix:f}}var Lx,xR,hZ;eNe({thousands:",",grouping:[3],currency:["$",""]});function eNe(t){return Lx=JPe(t),xR=Lx.format,hZ=Lx.formatPrefix,Lx}function tNe(t){return Math.max(0,-Dp(Math.abs(t)))}function nNe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dp(e)/3)))*3-Dp(Math.abs(t)))}function rNe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Dp(e)-Dp(t))+1}function pZ(t,e,n,r){var i=_N(t,e,n),a;switch(r=d0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=nNe(i,s))&&(r.precision=a),hZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=rNe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=tNe(i))&&(r.precision=a-(r.type==="%")*2);break}}return xR(r)}function xu(t){var e=t.domain;return t.ticks=function(n){var r=e();return wN(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return pZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=SN(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function gZ(){var t=yR();return t.copy=function(){return oy(t,gZ())},Za.apply(t,arguments),xu(t)}function mZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,tS),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return mZ(t).unknown(e)},t=arguments.length?Array.from(t,tS):[0,1],xu(n)}function vZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function QU(t){return Math.log(t)}function ZU(t){return Math.exp(t)}function iNe(t){return-Math.log(-t)}function aNe(t){return-Math.exp(-t)}function sNe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function oNe(t){return t===10?sNe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function JU(t){return(e,n)=>-t(-e,n)}function wR(t){const e=t(QU,ZU),n=e.domain;let r=10,i,a;function s(){return i=lNe(r),a=oNe(r),n()[0]<0?(i=JU(i),a=JU(a),t(iNe,aNe)):t(QU,ZU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=wN(u,f,w))}else S=wN(g,v,Math.min(v-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=d0(c)).precision==null&&(c.trim=!0),c=xR(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(vZ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function yZ(){const t=wR(q_()).domain([1,10]);return t.copy=()=>oy(t,yZ()).base(t.base()),Za.apply(t,arguments),t}function e$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function t$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SR(t){var e=1,n=t(e$(e),t$(e));return n.constant=function(r){return arguments.length?t(e$(e=+r),t$(e)):e},xu(n)}function bZ(){var t=SR(q_());return t.copy=function(){return oy(t,bZ()).constant(t.constant())},Za.apply(t,arguments)}function n$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function cNe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uNe(t){return t<0?-t*t:t*t}function _R(t){var e=t(Si,Si),n=1;function r(){return n===1?t(Si,Si):n===.5?t(cNe,uNe):t(n$(n),n$(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},xu(e)}function ER(){var t=_R(q_());return t.copy=function(){return oy(t,ER()).exponent(t.exponent())},Za.apply(t,arguments),t}function dNe(){return ER.apply(null,arguments).exponent(.5)}function r$(t){return Math.sign(t)*t*t}function fNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xZ(){var t=yR(),e=[0,1],n=!1,r;function i(a){var s=fNe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(r$(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,tS)).map(r$)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return xZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Za.apply(i,arguments),xu(i)}function wZ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=mPe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[ay(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Xc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return wZ().domain(t).range(e).unknown(r)},Za.apply(a,arguments)}function SZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[ay(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return SZ().domain([t,e]).range(i).unknown(a)},Za.apply(xu(s),arguments)}function _Z(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[ay(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return _Z().domain(t).range(e).unknown(n)},Za.apply(i,arguments)}const zC=new Date,LC=new Date;function Er(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Er(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(zC.setTime(+a),LC.setTime(+s),t(zC),t(LC),Math.floor(n(zC,LC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const iS=Er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);iS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):iS);iS.range;const dl=1e3,Fa=dl*60,fl=Fa*60,Pl=fl*24,TR=Pl*7,i$=Pl*30,VC=Pl*365,_d=Er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getUTCSeconds());_d.range;const AR=Er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dl)},(t,e)=>{t.setTime(+t+e*Fa)},(t,e)=>(e-t)/Fa,t=>t.getMinutes());AR.range;const kR=Er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fa)},(t,e)=>(e-t)/Fa,t=>t.getUTCMinutes());kR.range;const CR=Er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dl-t.getMinutes()*Fa)},(t,e)=>{t.setTime(+t+e*fl)},(t,e)=>(e-t)/fl,t=>t.getHours());CR.range;const IR=Er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*fl)},(t,e)=>(e-t)/fl,t=>t.getUTCHours());IR.range;const ly=Er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fa)/Pl,t=>t.getDate()-1);ly.range;const G_=Er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>t.getUTCDate()-1);G_.range;const EZ=Er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>Math.floor(t/Pl));EZ.range;function pf(t){return Er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fa)/TR)}const H_=pf(0),aS=pf(1),hNe=pf(2),pNe=pf(3),Rp=pf(4),gNe=pf(5),mNe=pf(6);H_.range;aS.range;hNe.range;pNe.range;Rp.range;gNe.range;mNe.range;function gf(t){return Er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/TR)}const K_=gf(0),sS=gf(1),vNe=gf(2),yNe=gf(3),Mp=gf(4),bNe=gf(5),xNe=gf(6);K_.range;sS.range;vNe.range;yNe.range;Mp.range;bNe.range;xNe.range;const PR=Er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());PR.range;const NR=Er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NR.range;const Nl=Er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Nl.range;const Ol=Er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ol.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ol.range;function TZ(t,e,n,r,i,a){const s=[[_d,1,dl],[_d,5,5*dl],[_d,15,15*dl],[_d,30,30*dl],[a,1,Fa],[a,5,5*Fa],[a,15,15*Fa],[a,30,30*Fa],[i,1,fl],[i,3,3*fl],[i,6,6*fl],[i,12,12*fl],[r,1,Pl],[r,2,2*Pl],[n,1,TR],[e,1,i$],[e,3,3*i$],[t,1,VC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=fR(([,,w])=>w).right(s,g);if(v===s.length)return t.every(_N(u/VC,f/VC,h));if(v===0)return iS.every(Math.max(_N(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[wNe,SNe]=TZ(Ol,NR,K_,EZ,IR,kR),[_Ne,ENe]=TZ(Nl,PR,H_,ly,CR,AR);function BC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function FC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function TNe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=Mm(i),f=jm(i),h=Mm(a),g=jm(a),v=Mm(s),b=jm(s),x=Mm(o),w=jm(o),S=Mm(c),A=jm(c),I={a:X,A:J,b:ee,B:Q,c:null,d:u$,e:u$,f:WNe,g:i2e,G:s2e,H:GNe,I:HNe,j:KNe,L:AZ,m:YNe,M:XNe,p:U,q:Z,Q:h$,s:p$,S:QNe,u:ZNe,U:JNe,V:e2e,w:t2e,W:n2e,x:null,X:null,y:r2e,Y:a2e,Z:o2e,"%":f$},N={a:te,A:W,b:ue,B:ie,c:null,d:d$,e:d$,f:d2e,g:w2e,G:_2e,H:l2e,I:c2e,j:u2e,L:CZ,m:f2e,M:h2e,p:oe,q:Se,Q:h$,s:p$,S:p2e,u:g2e,U:m2e,V:v2e,w:y2e,W:b2e,x:null,X:null,y:x2e,Y:S2e,Z:E2e,"%":f$},O={a:M,A:V,b:L,B:z,c:K,d:l$,e:l$,f:FNe,g:o$,G:s$,H:c$,I:c$,j:zNe,L:BNe,m:jNe,M:LNe,p:R,q:MNe,Q:$Ne,s:qNe,S:VNe,u:PNe,U:NNe,V:ONe,w:INe,W:DNe,x:Y,X:G,y:o$,Y:s$,Z:RNe,"%":UNe};I.x=D(n,I),I.X=D(r,I),I.c=D(e,I),N.x=D(n,N),N.X=D(r,N),N.c=D(e,N);function D(se,Ae){return function(ve){var ne=[],Pe=-1,be=0,_e=se.length,Oe,De,Ye;for(ve instanceof Date||(ve=new Date(+ve));++Pe<_e;)se.charCodeAt(Pe)===37&&(ne.push(se.slice(be,Pe)),(De=a$[Oe=se.charAt(++Pe)])!=null?Oe=se.charAt(++Pe):De=Oe==="e"?" ":"0",(Ye=Ae[Oe])&&(Oe=Ye(ve,De)),ne.push(Oe),be=Pe+1);return ne.push(se.slice(be,Pe)),ne.join("")}}function P(se,Ae){return function(ve){var ne=Rm(1900,void 0,1),Pe=C(ne,se,ve+="",0),be,_e;if(Pe!=ve.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Ae&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(be=FC(Rm(ne.y,0,1)),_e=be.getUTCDay(),be=_e>4||_e===0?sS.ceil(be):sS(be),be=G_.offset(be,(ne.V-1)*7),ne.y=be.getUTCFullYear(),ne.m=be.getUTCMonth(),ne.d=be.getUTCDate()+(ne.w+6)%7):(be=BC(Rm(ne.y,0,1)),_e=be.getDay(),be=_e>4||_e===0?aS.ceil(be):aS(be),be=ly.offset(be,(ne.V-1)*7),ne.y=be.getFullYear(),ne.m=be.getMonth(),ne.d=be.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),_e="Z"in ne?FC(Rm(ne.y,0,1)).getUTCDay():BC(Rm(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(_e+5)%7:ne.w+ne.U*7-(_e+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,FC(ne)):BC(ne)}}function C(se,Ae,ve,ne){for(var Pe=0,be=Ae.length,_e=ve.length,Oe,De;Pe<be;){if(ne>=_e)return-1;if(Oe=Ae.charCodeAt(Pe++),Oe===37){if(Oe=Ae.charAt(Pe++),De=O[Oe in a$?Ae.charAt(Pe++):Oe],!De||(ne=De(se,ve,ne))<0)return-1}else if(Oe!=ve.charCodeAt(ne++))return-1}return ne}function R(se,Ae,ve){var ne=u.exec(Ae.slice(ve));return ne?(se.p=f.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function M(se,Ae,ve){var ne=v.exec(Ae.slice(ve));return ne?(se.w=b.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function V(se,Ae,ve){var ne=h.exec(Ae.slice(ve));return ne?(se.w=g.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function L(se,Ae,ve){var ne=S.exec(Ae.slice(ve));return ne?(se.m=A.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function z(se,Ae,ve){var ne=x.exec(Ae.slice(ve));return ne?(se.m=w.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function K(se,Ae,ve){return C(se,e,Ae,ve)}function Y(se,Ae,ve){return C(se,n,Ae,ve)}function G(se,Ae,ve){return C(se,r,Ae,ve)}function X(se){return s[se.getDay()]}function J(se){return a[se.getDay()]}function ee(se){return c[se.getMonth()]}function Q(se){return o[se.getMonth()]}function U(se){return i[+(se.getHours()>=12)]}function Z(se){return 1+~~(se.getMonth()/3)}function te(se){return s[se.getUTCDay()]}function W(se){return a[se.getUTCDay()]}function ue(se){return c[se.getUTCMonth()]}function ie(se){return o[se.getUTCMonth()]}function oe(se){return i[+(se.getUTCHours()>=12)]}function Se(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ae=D(se+="",I);return Ae.toString=function(){return se},Ae},parse:function(se){var Ae=P(se+="",!1);return Ae.toString=function(){return se},Ae},utcFormat:function(se){var Ae=D(se+="",N);return Ae.toString=function(){return se},Ae},utcParse:function(se){var Ae=P(se+="",!0);return Ae.toString=function(){return se},Ae}}}var a$={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,ANe=/^%/,kNe=/[\\^$*+?|[\]().{}]/g;function Dt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function CNe(t){return t.replace(kNe,"\\$&")}function Mm(t){return new RegExp("^(?:"+t.map(CNe).join("|")+")","i")}function jm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function INe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function PNe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function NNe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ONe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function DNe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function s$(t,e,n){var r=Lr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function o$(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function RNe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function MNe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function jNe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function l$(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function zNe(t,e,n){var r=Lr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function c$(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function LNe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function VNe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function BNe(t,e,n){var r=Lr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function FNe(t,e,n){var r=Lr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function UNe(t,e,n){var r=ANe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function $Ne(t,e,n){var r=Lr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qNe(t,e,n){var r=Lr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function u$(t,e){return Dt(t.getDate(),e,2)}function GNe(t,e){return Dt(t.getHours(),e,2)}function HNe(t,e){return Dt(t.getHours()%12||12,e,2)}function KNe(t,e){return Dt(1+ly.count(Nl(t),t),e,3)}function AZ(t,e){return Dt(t.getMilliseconds(),e,3)}function WNe(t,e){return AZ(t,e)+"000"}function YNe(t,e){return Dt(t.getMonth()+1,e,2)}function XNe(t,e){return Dt(t.getMinutes(),e,2)}function QNe(t,e){return Dt(t.getSeconds(),e,2)}function ZNe(t){var e=t.getDay();return e===0?7:e}function JNe(t,e){return Dt(H_.count(Nl(t)-1,t),e,2)}function kZ(t){var e=t.getDay();return e>=4||e===0?Rp(t):Rp.ceil(t)}function e2e(t,e){return t=kZ(t),Dt(Rp.count(Nl(t),t)+(Nl(t).getDay()===4),e,2)}function t2e(t){return t.getDay()}function n2e(t,e){return Dt(aS.count(Nl(t)-1,t),e,2)}function r2e(t,e){return Dt(t.getFullYear()%100,e,2)}function i2e(t,e){return t=kZ(t),Dt(t.getFullYear()%100,e,2)}function a2e(t,e){return Dt(t.getFullYear()%1e4,e,4)}function s2e(t,e){var n=t.getDay();return t=n>=4||n===0?Rp(t):Rp.ceil(t),Dt(t.getFullYear()%1e4,e,4)}function o2e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Dt(e/60|0,"0",2)+Dt(e%60,"0",2)}function d$(t,e){return Dt(t.getUTCDate(),e,2)}function l2e(t,e){return Dt(t.getUTCHours(),e,2)}function c2e(t,e){return Dt(t.getUTCHours()%12||12,e,2)}function u2e(t,e){return Dt(1+G_.count(Ol(t),t),e,3)}function CZ(t,e){return Dt(t.getUTCMilliseconds(),e,3)}function d2e(t,e){return CZ(t,e)+"000"}function f2e(t,e){return Dt(t.getUTCMonth()+1,e,2)}function h2e(t,e){return Dt(t.getUTCMinutes(),e,2)}function p2e(t,e){return Dt(t.getUTCSeconds(),e,2)}function g2e(t){var e=t.getUTCDay();return e===0?7:e}function m2e(t,e){return Dt(K_.count(Ol(t)-1,t),e,2)}function IZ(t){var e=t.getUTCDay();return e>=4||e===0?Mp(t):Mp.ceil(t)}function v2e(t,e){return t=IZ(t),Dt(Mp.count(Ol(t),t)+(Ol(t).getUTCDay()===4),e,2)}function y2e(t){return t.getUTCDay()}function b2e(t,e){return Dt(sS.count(Ol(t)-1,t),e,2)}function x2e(t,e){return Dt(t.getUTCFullYear()%100,e,2)}function w2e(t,e){return t=IZ(t),Dt(t.getUTCFullYear()%100,e,2)}function S2e(t,e){return Dt(t.getUTCFullYear()%1e4,e,4)}function _2e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Mp(t):Mp.ceil(t),Dt(t.getUTCFullYear()%1e4,e,4)}function E2e(){return"+0000"}function f$(){return"%"}function h$(t){return+t}function p$(t){return Math.floor(+t/1e3)}var mh,PZ,NZ;T2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T2e(t){return mh=TNe(t),PZ=mh.format,mh.parse,NZ=mh.utcFormat,mh.utcParse,mh}function A2e(t){return new Date(t)}function k2e(t){return t instanceof Date?+t:+new Date(+t)}function OR(t,e,n,r,i,a,s,o,c,u){var f=yR(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),A=u("%b %d"),I=u("%B"),N=u("%Y");function O(D){return(c(D)<D?v:o(D)<D?b:s(D)<D?x:a(D)<D?w:r(D)<D?i(D)<D?S:A:n(D)<D?I:N)(D)}return f.invert=function(D){return new Date(h(D))},f.domain=function(D){return arguments.length?g(Array.from(D,k2e)):g().map(A2e)},f.ticks=function(D){var P=g();return t(P[0],P[P.length-1],D??10)},f.tickFormat=function(D,P){return P==null?O:u(P)},f.nice=function(D){var P=g();return(!D||typeof D.range!="function")&&(D=e(P[0],P[P.length-1],D??10)),D?g(vZ(P,D)):f},f.copy=function(){return oy(f,OR(t,e,n,r,i,a,s,o,c,u))},f}function C2e(){return Za.apply(OR(_Ne,ENe,Nl,PR,H_,ly,CR,AR,_d,PZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I2e(){return Za.apply(OR(wNe,SNe,Ol,NR,K_,G_,IR,kR,_d,NZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function W_(){var t=0,e=1,n,r,i,a,s=Si,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(lg),u.rangeRound=f(vR),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function wu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function OZ(){var t=xu(W_()(Si));return t.copy=function(){return wu(t,OZ())},Ul.apply(t,arguments)}function DZ(){var t=wR(W_()).domain([1,10]);return t.copy=function(){return wu(t,DZ()).base(t.base())},Ul.apply(t,arguments)}function RZ(){var t=SR(W_());return t.copy=function(){return wu(t,RZ()).constant(t.constant())},Ul.apply(t,arguments)}function DR(){var t=_R(W_());return t.copy=function(){return wu(t,DR()).exponent(t.exponent())},Ul.apply(t,arguments)}function P2e(){return DR.apply(null,arguments).exponent(.5)}function MZ(){var t=[],e=Si;function n(r){if(r!=null&&!isNaN(r=+r))return e((ay(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Xc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>gPe(t,a/r))},n.copy=function(){return MZ(e).domain(t)},Ul.apply(n,arguments)}function Y_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Si,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var S,A,I;return arguments.length?([S,A,I]=w,u=UPe(x,[S,A,I]),v):[u(0),u(.5),u(1)]}}return v.range=b(lg),v.rangeRound=b(vR),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function jZ(){var t=xu(Y_()(Si));return t.copy=function(){return wu(t,jZ())},Ul.apply(t,arguments)}function zZ(){var t=wR(Y_()).domain([.1,1,10]);return t.copy=function(){return wu(t,zZ()).base(t.base())},Ul.apply(t,arguments)}function LZ(){var t=SR(Y_());return t.copy=function(){return wu(t,LZ()).constant(t.constant())},Ul.apply(t,arguments)}function RR(){var t=_R(Y_());return t.copy=function(){return wu(t,RR()).exponent(t.exponent())},Ul.apply(t,arguments)}function N2e(){return RR.apply(null,arguments).exponent(.5)}const Qm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pR,scaleDiverging:jZ,scaleDivergingLog:zZ,scaleDivergingPow:RR,scaleDivergingSqrt:N2e,scaleDivergingSymlog:LZ,scaleIdentity:mZ,scaleImplicit:EN,scaleLinear:gZ,scaleLog:yZ,scaleOrdinal:hR,scalePoint:yPe,scalePow:ER,scaleQuantile:wZ,scaleQuantize:SZ,scaleRadial:xZ,scaleSequential:OZ,scaleSequentialLog:DZ,scaleSequentialPow:DR,scaleSequentialQuantile:MZ,scaleSequentialSqrt:P2e,scaleSequentialSymlog:RZ,scaleSqrt:dNe,scaleSymlog:bZ,scaleThreshold:_Z,scaleTime:C2e,scaleUtc:I2e,tickFormat:pZ},Symbol.toStringTag,{value:"Module"}));var $l=t=>t.chartData,X_=me([$l],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),VZ=(t,e,n,r)=>r?X_(t):$l(t),O2e=(t,e,n)=>n?X_(t):$l(t);function Dl(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pt(e)&&pt(n))return!0}return!1}function g$(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function BZ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(pt(n))i=n;else if(typeof n=="function")return;if(pt(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Dl(s))return s}}function D2e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Dl(r))return g$(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(He(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&TF.test(i)){var c=TF.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(He(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&AF.test(a)){var f=AF.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Dl(g))return e==null?g:g$(g,e,n)}}}var cg=1e9,R2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jR,xn=!0,Ya="[DecimalError] ",Rd=Ya+"Invalid argument: ",MR=Ya+"Exponent out of range: ",ug=Math.floor,ld=Math.pow,M2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,da,Rr=1e7,hn=7,FZ=9007199254740991,oS=ug(FZ/hn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*hn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return yl(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return an(yl(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return or(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(da))throw Error(Ya+"NaN");if(n.s<1)throw Error(Ya+(n.s?"NaN":"-Infinity"));return n.eq(da)?new r(0):(xn=!1,e=yl(f0(n,a),f0(t,a),a),xn=!0,an(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?qZ(e,t):UZ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ya+"NaN");return n.s?(xn=!1,e=yl(n,t,0,1).times(t),xn=!0,n.minus(e)):an(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return $Z(this)};Ue.naturalLogarithm=Ue.ln=function(){return f0(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?UZ(e,t):qZ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rd+t);if(e=or(i)+1,r=i.d.length-1,n=r*hn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ya+"NaN")}for(t=or(o),xn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=yo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ug((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(yl(o,a,s+2)).times(.5),yo(a.d).slice(0,s)===(e=yo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(an(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return xn=!0,an(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Rr|0,e=o/Rr|0;a[i]=(a[i]+e)%Rr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,xn?an(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Do(t,0,cg),e===void 0?e=r.rounding:Do(e,0,8),an(n,t+or(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=nf(r,!0):(Do(t,0,cg),e===void 0?e=i.rounding:Do(e,0,8),r=an(new i(r),t+1,e),n=nf(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?nf(i):(Do(t,0,cg),e===void 0?e=a.rounding:Do(e,0,8),r=an(new a(i),t+or(i)+1,e),n=nf(r.abs(),!1,t+or(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return an(new e(t),or(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(da);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ya+"Infinity");return o}if(o.eq(da))return o;if(r=c.precision,t.eq(da))return an(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=FZ){for(i=new c(da),e=Math.ceil(r/hn+4),xn=!1;n%2&&(i=i.times(o),v$(i.d,e)),n=ug(n/2),n!==0;)o=o.times(o),v$(o.d,e);return xn=!0,t.s<0?new c(da).div(i):an(i,r)}}else if(a<0)throw Error(Ya+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,xn=!1,i=t.times(f0(o,r+u)),xn=!0,i=$Z(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=or(i),r=nf(i,n<=a.toExpNeg||n>=a.toExpPos)):(Do(t,1,cg),e===void 0?e=a.rounding:Do(e,0,8),i=an(new a(i),t,e),n=or(i),r=nf(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Do(t,1,cg),e===void 0?e=r.rounding:Do(e,0,8)),an(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=or(t),n=t.constructor;return nf(t,e<=n.toExpNeg||e>=n.toExpPos)};function UZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),xn?an(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/hn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Rr|0,c[a]%=Rr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,xn?an(e,h):e}function Do(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Rd+t)}function yo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=hn-r.length,n&&(a+=Cc(n)),a+=r;s=t[e],r=s+"",n=hn-r.length,n&&(a+=Cc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var yl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Rr|0,s=a/Rr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Rr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,S,A,I,N,O,D,P,C,R=r.constructor,M=r.s==i.s?1:-1,V=r.d,L=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ya+"Division by zero");for(c=r.e-i.e,P=L.length,O=V.length,v=new R(M),b=v.d=[],u=0;L[u]==(V[u]||0);)++u;if(L[u]>(V[u]||0)&&--c,a==null?A=a=R.precision:s?A=a+(or(r)-or(i))+1:A=a,A<0)return new R(0);if(A=A/hn+2|0,u=0,P==1)for(f=0,L=L[0],A++;(u<O||f)&&A--;u++)I=f*Rr+(V[u]||0),b[u]=I/L|0,f=I%L|0;else{for(f=Rr/(L[0]+1)|0,f>1&&(L=t(L,f),V=t(V,f),P=L.length,O=V.length),N=P,x=V.slice(0,P),w=x.length;w<P;)x[w++]=0;C=L.slice(),C.unshift(0),D=L[0],L[1]>=Rr/2&&++D;do f=0,o=e(L,x,P,w),o<0?(S=x[0],P!=w&&(S=S*Rr+(x[1]||0)),f=S/D|0,f>1?(f>=Rr&&(f=Rr-1),h=t(L,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,P<g?C:L,g))):(f==0&&(o=f=1),h=L.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(L,x,P,w),o<1&&(f++,n(x,P<w?C:L,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=V[N]||0:(x=[V[N]],w=1);while((N++<O||x[0]!==void 0)&&A--)}return b[0]||b.shift(),v.e=c,an(v,s?a+or(v)+1:a)}})();function $Z(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(or(t)>16)throw Error(MR+or(t));if(!t.s)return new f(da);for(xn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(ld(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(da),f.precision=o;;){if(i=an(i.times(t),o),n=n.times(++c),s=a.plus(yl(i,n,o)),yo(s.d).slice(0,o)===yo(a.d).slice(0,o)){for(;u--;)a=an(a.times(a),o);return f.precision=h,e==null?(xn=!0,an(a,h)):a}a=s}}function or(t){for(var e=t.e*hn,n=t.d[0];n>=10;n/=10)e++;return e}function UC(t,e,n){if(e>t.LN10.sd())throw xn=!0,n&&(t.precision=n),Error(Ya+"LN10 precision limit exceeded");return an(new t(t.LN10),e)}function Cc(t){for(var e="";t--;)e+="0";return e}function f0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Ya+(v.s?"NaN":"-Infinity"));if(v.eq(da))return new x(0);if(e==null?(xn=!1,u=w):u=e,v.eq(10))return e==null&&(xn=!0),UC(x,u);if(u+=g,x.precision=u,n=yo(b),r=n.charAt(0),a=or(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=yo(v.d),r=n.charAt(0),h++;a=or(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=UC(x,u+2,w).times(a+""),v=f0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(xn=!0,an(v,w)):v;for(o=s=v=yl(v.minus(da),v.plus(da),u),f=an(v.times(v),u),i=3;;){if(s=an(s.times(f),u),c=o.plus(yl(s,new x(i),u)),yo(c.d).slice(0,u)===yo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(UC(x,u+2,w).times(a+""))),o=yl(o,new x(h),u),x.precision=w,e==null?(xn=!0,an(o,w)):o;o=c,i+=2}}function m$(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ug(n/hn),t.d=[],r=(n+1)%hn,n<0&&(r+=hn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=hn;r<i;)t.d.push(+e.slice(r,r+=hn));e=e.slice(r),r=hn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),xn&&(t.e>oS||t.e<-oS))throw Error(MR+n)}else t.s=0,t.e=0,t.d=[0];return t}function an(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=hn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/hn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=hn,i=r-hn+s}if(n!==void 0&&(a=ld(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/ld(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=or(t),h.length=1,e=e-a-1,h[0]=ld(10,(hn-e%hn)%hn),t.e=ug(-e/hn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=ld(10,hn-r),h[f]=i>0?(u/ld(10,s-i)%ld(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Rr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Rr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(xn&&(t.e>oS||t.e<-oS))throw Error(MR+or(t));return t}function qZ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),xn?an(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/hn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Rr-1;--c[a],c[i]+=Rr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,xn?an(e,v):e):new g(0)}function nf(t,e,n){var r,i=or(t),a=yo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Cc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Cc(-i-1)+a,n&&(r=n-s)>0&&(a+=Cc(r))):i>=s?(a+=Cc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Cc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Cc(r))),t.s<0?"-"+a:a}function v$(t,e){if(t.length>e)return t.length=e,!0}function GZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Rd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return m$(s,a.toString())}else if(typeof a!="string")throw Error(Rd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,M2e.test(a))m$(s,a);else throw Error(Rd+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=GZ,i.config=i.set=j2e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function j2e(t){if(!t||typeof t!="object")throw Error(Ya+"Object expected");var e,n,r,i=["precision",1,cg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ug(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Rd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Rd+n+": "+r);return this}var jR=GZ(R2e);da=new jR(1);const Ht=jR;function HZ(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function KZ(t,e,n){for(var r=new Ht(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var WZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},YZ=(t,e,n)=>{if(t.lte(0))return new Ht(0);var r=HZ(t.toNumber()),i=new Ht(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Ht(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Ht(c.toNumber()):new Ht(Math.ceil(c.toNumber()))},z2e=(t,e,n)=>{var r=new Ht(1),i=new Ht(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ht(10).pow(HZ(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(i.add(new Ht(c-s).mul(r)).toNumber());return o},XZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var s=YZ(new Ht(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Ht(0):(o=new Ht(e).add(n).div(2),o=o.sub(new Ht(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Ht(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?XZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Ht(c).mul(s)),tickMax:o.add(new Ht(u).mul(s))})},L2e=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=WZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return n>r?u.reverse():u}if(o===c)return z2e(o,i,a);var{step:f,tickMin:h,tickMax:g}=XZ(o,c,s,a,0),v=KZ(h,g.add(new Ht(.1).mul(f)),f);return n>r?v.reverse():v},V2e=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=WZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=YZ(new Ht(o).sub(s).div(c-1),a,0),f=[...KZ(new Ht(s),new Ht(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},QZ=t=>t.rootProps.maxBarSize,B2e=t=>t.rootProps.barGap,ZZ=t=>t.rootProps.barCategoryGap,F2e=t=>t.rootProps.barSize,cy=t=>t.rootProps.stackOffset,JZ=t=>t.rootProps.reverseStackOrder,zR=t=>t.options.chartName,LR=t=>t.rootProps.syncId,eJ=t=>t.rootProps.syncMethod,VR=t=>t.options.eventEmitter,jr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ed={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ao={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Q_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function Z_(t,e,n){if(n!=="auto")return n;if(t!=null)return bu(t,e)?"category":"number"}function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(r){U2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U2e(t,e,n){return(e=$2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2e(t){var e=q2e(t,"string");return typeof e=="symbol"?e:e+""}function q2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b$={allowDataOverflow:ed.allowDataOverflow,allowDecimals:ed.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ed.angleAxisId,includeHidden:!1,name:void 0,reversed:ed.reversed,scale:ed.scale,tick:ed.tick,tickCount:void 0,ticks:void 0,type:ed.type,unit:void 0},x$={allowDataOverflow:ao.allowDataOverflow,allowDecimals:ao.allowDecimals,allowDuplicatedCategory:ao.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ao.radiusAxisId,includeHidden:ao.includeHidden,name:void 0,reversed:ao.reversed,scale:ao.scale,tick:ao.tick,tickCount:ao.tickCount,ticks:void 0,type:ao.type,unit:void 0},G2e=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},BR=me([G2e,zQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=Z_(e,"angleAxis",b$.type))!==null&&n!==void 0?n:"category";return lS(lS({},b$),{},{type:r})}),H2e=(t,e)=>t.polarAxis.radiusAxis[e],FR=me([H2e,zQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=Z_(e,"radiusAxis",x$.type))!==null&&n!==void 0?n:"category";return lS(lS({},x$),{},{type:r})}),J_=t=>t.polarOptions,UR=me([Bl,Fl,_r],tZ),tJ=me([J_,UR],(t,e)=>{if(t!=null)return li(t.innerRadius,e,0)}),nJ=me([J_,UR],(t,e)=>{if(t!=null)return li(t.outerRadius,e,e*.8)}),K2e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},rJ=me([J_],K2e);me([BR,rJ],Q_);var iJ=me([UR,tJ,nJ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});me([FR,iJ],Q_);var aJ=me([Vt,J_,tJ,nJ,Bl,Fl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:li(s,i,i/2),cy:li(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),In=(t,e)=>e,uy=(t,e,n)=>n;function $R(t){return t?.id}function sJ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=$R(o);u.forEach((h,g)=>{var v=a==null||i?g:String(gn(h,a,null)),b=gn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function eE(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var tE=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function nE(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function W2e(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Vr=t=>{var e=Vt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},dg=t=>t.tooltip.settings.axisId;function Y2e(t){if(t in Qm)return Qm[t]();var e="scale".concat(X0(t));if(e in Qm)return Qm[e]()}function w$(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,s)=>{var o=t(a);if(o!=null){if(t.bandwidth&&s!==null&&s!==void 0&&s.position){var c=t.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function S$(t,e,n){if(typeof t=="function")return w$(t.copy().domain(e).range(n));if(t!=null){var r=Y2e(t);if(r!=null)return r.domain(e).range(n),w$(r)}}var oJ=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Dl(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];pt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(r){X2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X2e(t,e,n){return(e=Q2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q2e(t){var e=Z2e(t,"string");return typeof e=="symbol"?e:e+""}function Z2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CN=[0,"auto"],Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},lJ=(t,e)=>t.cartesianAxis.xAxis[e],zo=(t,e)=>{var n=lJ(t,e);return n??Nr},Or={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:CN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ey},cJ=(t,e)=>t.cartesianAxis.yAxis[e],Lo=(t,e)=>{var n=cJ(t,e);return n??Or},J2e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??J2e},Vn=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return Lo(t,n);case"zAxis":return qR(t,n);case"angleAxis":return BR(t,n);case"radiusAxis":return FR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},eOe=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return Lo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},fg=(t,e,n)=>{switch(e){case"xAxis":return zo(t,n);case"yAxis":return Lo(t,n);case"angleAxis":return BR(t,n);case"radiusAxis":return FR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},uJ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function GR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var HR=t=>t.graphicalItems.cartesianItems,tOe=me([In,uy],GR),KR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),dy=me([HR,Vn,tOe],KR,{memoizeOptions:{resultEqualityCheck:nE}}),dJ=me([dy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(eE)),fJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),nOe=me([dy],fJ),WR=t=>t.map(e=>e.data).filter(Boolean).flat(1),rOe=me([dy],WR,{memoizeOptions:{resultEqualityCheck:nE}}),YR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},XR=me([rOe,VZ],YR),QR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:gn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:gn(i,r)}))):t.map(r=>({value:r})),rE=me([XR,Vn,dy],QR);function hJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ww(t){if(Ka(t)||t instanceof Date){var e=Number(t);if(pt(e))return e}}function E$(t){if(Array.isArray(t)){var e=[ww(t[0]),ww(t[1])];return Dl(e)?e:void 0}var n=ww(t);if(n!=null)return[n,n]}function Rl(t){return t.map(ww).filter($i)}function iOe(t,e,n){return!n||typeof e!="number"||No(e)?[]:n.length?Rl(n.flatMap(r=>{var i=gn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!pt(a)||!pt(s)))return[e-a,e+s]})):[]}var Tr=t=>{var e=Vr(t),n=dg(t);return fg(t,e,n)},fy=me([Tr],t=>t?.dataKey),aOe=me([dJ,VZ,Tr],sJ),pJ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map($R);return[o,{stackedData:Tke(t,f,n),graphicalItems:u}]}))},IN=me([aOe,dJ,cy,JZ],pJ),gJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=Pke(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},sOe=me([Vn],t=>t.allowDataOverflow),ZR=t=>{var e;if(t==null||!("domain"in t))return CN;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Rl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:CN},JR=me([Vn],ZR),eM=me([JR,sOe],BZ),oOe=me([IN,$l,In,eM],gJ,{memoizeOptions:{resultEqualityCheck:tE}}),iE=t=>t.errorBars,lOe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>hJ(n,r)),uS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},tM=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>hJ(i,S)),g=gn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=iOe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=E$(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=E$(gn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),pt(a)&&pt(s))return[a,s]},cOe=me([XR,Vn,nOe,iE,In],tM,{memoizeOptions:{resultEqualityCheck:tE}});function uOe(t){var{value:e}=t;if(Ka(e)||e instanceof Date)return e}var dOe=(t,e,n)=>{var r=t.map(uOe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&RX(r))?aZ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},mJ=t=>t.referenceElements.dots,hg=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),fOe=me([mJ,In,uy],hg),vJ=t=>t.referenceElements.areas,hOe=me([vJ,In,uy],hg),yJ=t=>t.referenceElements.lines,pOe=me([yJ,In,uy],hg),bJ=(t,e)=>{if(t!=null){var n=Rl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gOe=me(fOe,In,bJ),xJ=(t,e)=>{if(t!=null){var n=Rl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},mOe=me([hOe,In],xJ);function vOe(t){var e;if(t.x!=null)return Rl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Rl(n)}function yOe(t){var e;if(t.y!=null)return Rl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Rl(n)}var wJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?vOe(r):yOe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},bOe=me([pOe,In],wJ),xOe=me(gOe,bOe,mOe,(t,e,n)=>uS(t,n,e)),nM=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?uS(r,a,i):uS(a,i);return D2e(e,u,t.allowDataOverflow)},wOe=me([Vn,JR,eM,oOe,cOe,xOe,Vt,In],nM,{memoizeOptions:{resultEqualityCheck:tE}}),SOe=[0,1],rM=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=bu(e,a);if(u&&o==null){var f;return aZ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?dOe(r,t,u):i==="expand"?SOe:s}},iM=me([Vn,Vt,XR,rE,cy,In,wOe],rM);function _Oe(t){return t in Qm}var SJ=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(X0(r));return _Oe(a)?a:"point"}}},Su=me([Vn,uJ,zR],SJ);function aM(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?S$(t.scale,n,r):S$(e,n,r)}var sM=(t,e,n)=>{var r=ZR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Dl(t))return L2e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Dl(t))return V2e(t,e.tickCount,e.allowDecimals)}},oM=me([iM,fg,Su],sM),lM=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Dl(e)&&Array.isArray(n)&&n.length>0){var i,a,s=e[0],o=(i=n[0])!==null&&i!==void 0?i:0,c=e[1],u=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return e},EOe=me([Vn,iM,oM,In],lM),TOe=me(rE,Vn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Rl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),_J=me(TOe,Vt,ZZ,_r,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!pt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=li(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),AOe=(t,e,n)=>{var r=zo(t,e);return r==null||typeof r.padding!="string"?0:_J(t,"xAxis",e,n,r.padding)},kOe=(t,e,n)=>{var r=Lo(t,e);return r==null||typeof r.padding!="string"?0:_J(t,"yAxis",e,n,r.padding)},COe=me(zo,AOe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),IOe=me(Lo,kOe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),POe=me([_r,COe,z_,j_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),NOe=me([_r,Vt,IOe,z_,j_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),hy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return POe(t,n,r);case"yAxis":return NOe(t,n,r);case"zAxis":return(i=qR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return rJ(t);case"radiusAxis":return iJ(t,n);default:return}},EJ=me([Vn,hy],Q_),OOe=me([Su,EOe],oJ),jp=me([Vn,Su,OOe,EJ],aM);me([dy,iE,In],lOe);function TJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var aE=(t,e)=>e,sE=(t,e,n)=>n,DOe=me(R_,aE,sE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(TJ)),ROe=me(M_,aE,sE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(TJ)),AJ=(t,e)=>({width:t.width,height:e.height}),MOe=(t,e)=>{var n=typeof e.width=="number"?e.width:ey;return{width:n,height:t.height}},kJ=me(_r,zo,AJ),jOe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},zOe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},LOe=me(Fl,_r,DOe,aE,sE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=AJ(e,o);s==null&&(s=jOe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),VOe=me(Bl,_r,ROe,aE,sE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=MOe(e,o);s==null&&(s=zOe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),BOe=(t,e)=>{var n=zo(t,e);if(n!=null)return LOe(t,n.orientation,n.mirror)},FOe=me([_r,zo,BOe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),UOe=(t,e)=>{var n=Lo(t,e);if(n!=null)return VOe(t,n.orientation,n.mirror)},$Oe=me([_r,Lo,UOe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),CJ=me(_r,Lo,(t,e)=>{var n=typeof e.width=="number"?e.width:ey;return{width:n,height:t.height}}),T$=(t,e,n)=>{switch(e){case"xAxis":return kJ(t,n).width;case"yAxis":return CJ(t,n).height;default:return}},IJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=bu(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&RX(c))return c}},cM=me([Vt,rE,Vn,In],IJ),PJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=bu(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},uM=me([Vt,rE,fg,In],PJ),A$=me([Vt,eOe,Su,jp,cM,uM,hy,oM,In],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=bu(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),qOe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=bu(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Mr(a[0]-a[1])*2*b:b;var x=h||i;return x?x.map((w,S)=>{var A=s?s.indexOf(w):w,I=r.map(A);return pt(I)?{index:S,coordinate:I+b,value:w,offset:b}:null}).filter($i):u&&o?o.map((w,S)=>{var A=r.map(w);return pt(A)?{coordinate:A+b,value:w,index:S,offset:b}:null}).filter($i):r.ticks?r.ticks(g).map((w,S)=>{var A=r.map(w);return pt(A)?{coordinate:A+b,value:w,index:S,offset:b}:null}).filter($i):r.domain().map((w,S)=>{var A=r.map(w);return pt(A)?{coordinate:A+b,value:s?s[w]:w,index:S,offset:b}:null}).filter($i)}},NJ=me([Vt,fg,Su,jp,oM,hy,cM,uM,In],qOe),GOe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=bu(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Mr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter($i):n.ticks?n.ticks(c).map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter($i):n.domain().map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:i?i[f]:f,index:h,offset:u}:null}).filter($i)}},zp=me([Vt,fg,jp,hy,cM,uM,In],GOe),Lp=me(Vn,jp,(t,e)=>{if(!(t==null||e==null))return cS(cS({},t),{},{scale:e})}),HOe=me([Vn,Su,iM,EJ],aM);me((t,e,n)=>qR(t,n),HOe,(t,e)=>{if(!(t==null||e==null))return cS(cS({},t),{},{scale:e})});var KOe=me([Vt,R_,M_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),OJ=t=>t.options.defaultTooltipEventType,DJ=t=>t.options.validateTooltipEventTypes;function RJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function dM(t,e){var n=OJ(t),r=DJ(t);return RJ(e,n,r)}function WOe(t){return qe(e=>dM(e,t))}var MJ=(t,e)=>{var n,r=Number(e);if(!(No(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},YOe=t=>t.tooltip.settings,Mc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},XOe={itemInteraction:{click:Mc,hover:Mc},axisInteraction:{click:Mc,hover:Mc},keyboardInteraction:Mc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},jJ=Yi({name:"tooltip",initialState:XOe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:yn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:yn()},removeTooltipEntrySettings:{reducer(t,e){var n=Cs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:yn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:QOe,replaceTooltipEntrySettings:ZOe,removeTooltipEntrySettings:JOe,setTooltipSettingsState:eDe,setActiveMouseOverItemIndex:zJ,mouseLeaveItem:tDe,mouseLeaveChart:LJ,setActiveClickItemIndex:nDe,setMouseOverAxisIndex:VJ,setMouseClickAxisIndex:rDe,setSyncInteraction:PN,setKeyboardInteraction:NN}=jJ.actions,iDe=jJ.reducer;function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(r){aDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aDe(t,e,n){return(e=sDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sDe(t){var e=oDe(t,"string");return typeof e=="symbol"?e:e+""}function oDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lDe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function cDe(t){return t.index!=null}var BJ=(t,e,n,r)=>{if(e==null)return Mc;var i=lDe(t,e,n);if(i==null)return Mc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(cDe(i)){if(a)return Vx(Vx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Vx(Vx({},Mc),{},{coordinate:i.coordinate})};function uDe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function dDe(t,e){var n=uDe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function fDe(t,e,n){if(n==null||e==null)return!0;var r=gn(t,e);return r==null||!Dl(n)?!0:dDe(r,n)}var fM=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!pt(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||fDe(u,n,r)?String(c):null},FJ=(t,e,n,r,i,a,s)=>{if(a!=null){var o=s[0],c=o?.getPosition(a);if(c!=null)return c;var u=i?.[Number(a)];if(u)return n==="horizontal"?{x:u.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:u.coordinate}}},UJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},$J=t=>t.options.tooltipPayloadSearcher,pg=t=>t.tooltip;function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){hDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hDe(t,e,n){return(e=pDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pDe(t){var e=gDe(t,"string");return typeof e=="symbol"?e:e+""}function gDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mDe(t,e){return t??e}var qJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,S=mDe(x,o),A=Array.isArray(S)?AQ(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,N=w?.nameKey,O;if(r&&Array.isArray(A)&&!Array.isArray(A[0])&&s==="axis"?O=QEe(A,r,i):O=a(A,e,c,N),Array.isArray(O))O.forEach(P=>{var C=I$(I$({},w),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});g.push(kF({tooltipEntrySettings:C,dataKey:P.dataKey,payload:P.payload,value:gn(P.payload,P.dataKey),name:P.name}))});else{var D;g.push(kF({tooltipEntrySettings:w,dataKey:I,payload:O,value:gn(O,I),name:(D=gn(O,N))!==null&&D!==void 0?D:w?.name}))}return g},h)}},hM=me([Tr,uJ,zR],SJ),vDe=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),yDe=me([Vr,dg],GR),gg=me([vDe,Tr,yDe],KR,{memoizeOptions:{resultEqualityCheck:nE}}),bDe=me([gg],t=>t.filter(eE)),xDe=me([gg],WR,{memoizeOptions:{resultEqualityCheck:nE}}),mg=me([xDe,$l],YR),wDe=me([bDe,$l,Tr],sJ),pM=me([mg,Tr,gg],QR),GJ=me([Tr],ZR),SDe=me([Tr],t=>t.allowDataOverflow),HJ=me([GJ,SDe],BZ),_De=me([gg],t=>t.filter(eE)),EDe=me([wDe,_De,cy,JZ],pJ),TDe=me([EDe,$l,Vr,HJ],gJ),ADe=me([gg],fJ),kDe=me([mg,Tr,ADe,iE,Vr],tM,{memoizeOptions:{resultEqualityCheck:tE}}),CDe=me([mJ,Vr,dg],hg),IDe=me([CDe,Vr],bJ),PDe=me([vJ,Vr,dg],hg),NDe=me([PDe,Vr],xJ),ODe=me([yJ,Vr,dg],hg),DDe=me([ODe,Vr],wJ),RDe=me([IDe,DDe,NDe],uS),MDe=me([Tr,GJ,HJ,TDe,kDe,RDe,Vt,Vr],nM),py=me([Tr,Vt,mg,pM,cy,Vr,MDe],rM),jDe=me([py,Tr,hM],sM),zDe=me([Tr,py,jDe,Vr],lM),KJ=t=>{var e=Vr(t),n=dg(t),r=!1;return hy(t,e,n,r)},WJ=me([Tr,KJ],Q_),YJ=me([Tr,hM,zDe,WJ],aM),LDe=me([Vt,pM,Tr,Vr],IJ),VDe=me([Vt,pM,Tr,Vr],PJ),BDe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=bu(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Mr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>{var b=r.map(g);return pt(b)?{coordinate:b+h,value:g,index:v,offset:h}:null}).filter($i):r.domain().map((g,v)=>{var b=r.map(g);return pt(b)?{coordinate:b+h,value:a?a[g]:g,index:v,offset:h}:null}).filter($i)}}},ql=me([Vt,Tr,hM,YJ,KJ,LDe,VDe,Vr],BDe),gM=me([OJ,DJ,YOe],(t,e,n)=>RJ(n.shared,t,e)),XJ=t=>t.tooltip.settings.trigger,mM=t=>t.tooltip.settings.defaultIndex,gy=me([pg,gM,XJ,mM],BJ),rf=me([gy,mg,fy,py],fM),QJ=me([ql,rf],MJ),vM=me([gy],t=>{if(t)return t.dataKey}),FDe=me([gy],t=>{if(t)return t.graphicalItemId}),ZJ=me([pg,gM,XJ,mM],UJ),UDe=me([Bl,Fl,Vt,_r,ql,mM,ZJ],FJ),$De=me([gy,UDe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),qDe=me([gy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),GDe=me([ZJ,rf,$l,fy,QJ,$J,gM],qJ);me([GDe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function P$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(n),!0).forEach(function(r){HDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HDe(t,e,n){return(e=KDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KDe(t){var e=WDe(t,"string");return typeof e=="symbol"?e:e+""}function WDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YDe=()=>qe(Tr),XDe=()=>{var t=YDe(),e=qe(ql),n=qe(YJ);return F1(!t||!n?void 0:N$(N$({},t),{},{scale:n}),e)};function O$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(n),!0).forEach(function(r){QDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QDe(t,e,n){return(e=ZDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZDe(t){var e=JDe(t,"string");return typeof e=="symbol"?e:e+""}function JDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eRe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},tRe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return vh(vh(vh({},r),sr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return vh(vh(vh({},r),sr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function nRe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var JJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Mr(b-v)!==Mr(x-b)){var S=[];if(Mr(x-b)===Mr(i[1]-i[0])){w=x;var A=b+i[1]-i[0];S[0]=Math.min(A,(A+v)/2),S[1]=Math.max(A,(A+v)/2)}else{w=v;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var N=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>N[0]&&t<=N[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var D=Math.min(v,x),P=Math.max(v,x);if(t>(D+b)/2&&t<=(P+b)/2){var C;return(C=n[o])===null||C===void 0?void 0:C.index}}}else if(e)for(var R=0;R<s;R++){var M=e[R];if(M!=null){var V=e[R+1],L=e[R-1];if(R===0&&V!=null&&t<=(M.coordinate+V.coordinate)/2||R===s-1&&L!=null&&t>(M.coordinate+L.coordinate)/2||R>0&&R<s-1&&L!=null&&V!=null&&t>(M.coordinate+L.coordinate)/2&&t<=(M.coordinate+V.coordinate)/2)return M.index}}return-1},rRe=()=>qe(zR),yM=(t,e)=>e,eee=(t,e,n)=>n,bM=(t,e,n,r)=>r,iRe=me(ql,t=>__(t,e=>e.coordinate)),xM=me([pg,yM,eee,bM],BJ),wM=me([xM,mg,fy,py],fM),aRe=(t,e,n)=>{if(e!=null){var r=pg(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},tee=me([pg,yM,eee,bM],UJ),dS=me([Bl,Fl,Vt,_r,ql,bM,tee],FJ),sRe=me([xM,dS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),nee=me([ql,wM],MJ),oRe=me([tee,wM,$l,fy,nee,$J,yM],qJ),lRe=me([xM,wM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),cRe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&nRe(t,s)){var o=Nke(t,e),c=JJ(o,a,i,n,r),u=eRe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},uRe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=WIe(t,n);if(o){var c=Oke(o,e),u=JJ(c,s,a,r,i),f=tRe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},dRe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?cRe(t,e,r,i,a,s,o):uRe(t,e,n,r,i,a,s)},fRe=me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),hRe=me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(jr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:W2e}});function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(r){pRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pRe(t,e,n){return(e=gRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gRe(t){var e=mRe(t,"string");return typeof e=="symbol"?e:e+""}function mRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vRe={},yRe={zIndexMap:Object.values(jr).reduce((t,e)=>R$(R$({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),vRe)},bRe=new Set(Object.values(jr));function xRe(t){return bRe.has(t)}var ree=Yi({name:"zIndex",initialState:yRe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:yn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!xRe(n)&&delete t.zIndexMap[n])},prepare:yn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:yn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:yn()}}}),{registerZIndexPortal:wRe,unregisterZIndexPortal:SRe,registerZIndexPortalElement:_Re,unregisterZIndexPortalElement:ERe}=ree.actions,TRe=ree.reducer;function Ja(t){var{zIndex:e,children:n}=t,r=cCe(),i=r&&e!==void 0&&e!==0,a=Ai(),s=sn();T.useLayoutEffect(()=>i?(s(wRe({zIndex:e})),()=>{s(SRe({zIndex:e}))}):sg,[s,e,i]);var o=qe(c=>fRe(c,e,a));return i?o?u2.createPortal(n,o):null:n}function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ON.apply(null,arguments)}function M$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(n),!0).forEach(function(r){ARe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ARe(t,e,n){return(e=kRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kRe(t){var e=CRe(t,"string");return typeof e=="symbol"?e:e+""}function CRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IRe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return T.isValidElement(e)?T.cloneElement(e,r):T.createElement(n,r)}function PRe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=lIe,w=jr.cursorLine;else if(f==="BarChart")b=cIe(o,h,a,s),x=eZ,w=jr.cursorRectangle;else if(o==="radial"&&jX(h)){var{cx:S,cy:A,radius:I,startAngle:N,endAngle:O}=nZ(h);b={cx:S,cy:A,startAngle:N,endAngle:O,innerRadius:I,outerRadius:I},x=iZ,w=jr.cursorLine}else b={points:ZIe(o,h,a)},x=dR,w=jr.cursorLine;var D=typeof c=="object"&&"className"in c?c.className:void 0,P=Bx(Bx(Bx(Bx({stroke:"#ccc",pointerEvents:"none"},a),b),Jv(c)),{},{payload:g,payloadIndex:v,className:Lt("recharts-tooltip-cursor",D)});return T.createElement(Ja,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},T.createElement(IRe,{cursor:c,cursorComp:x,cursorProps:P}))}function NRe(t){var e=XDe(),n=MQ(),r=og(),i=rRe();return e==null||n==null||r==null||i==null?null:T.createElement(PRe,ON({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var iee=T.createContext(null),ORe=()=>T.useContext(iee),$C={exports:{}},j$;function DRe(){return j$||(j$=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,A,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(I=1,A=new Array(S-1);I<S;I++)A[I-1]=arguments[I];w.fn.apply(w.context,A)}else{var N=w.length,O;for(I=0;I<N;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!A)for(O=1,A=new Array(S-1);O<S;O++)A[O-1]=arguments[O];w[I].fn.apply(w[I].context,A)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})($C)),$C.exports}var RRe=DRe();const MRe=jl(RRe);var h0=new MRe,DN="recharts.syncEvent.tooltip",z$="recharts.syncEvent.brush",aee=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!No(n))return t[n]}},jRe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},see=Yi({name:"options",initialState:jRe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),zRe=see.reducer,{createEventEmitter:LRe}=see.actions;function VRe(t){return t.tooltip.syncInteraction}var BRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},oee=Yi({name:"chartData",initialState:BRe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:L$,setDataStartEndIndexes:FRe,setComputedData:IVe}=oee.actions,URe=oee.reducer,$Re=["x","y"];function V$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(n),!0).forEach(function(r){qRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qRe(t,e,n){return(e=GRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GRe(t){var e=HRe(t,"string");return typeof e=="symbol"?e:e+""}function HRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KRe(t,e){if(t==null)return{};var n,r,i=WRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function WRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function YRe(){var t=qe(LR),e=qe(VR),n=sn(),r=qe(eJ),i=qe(ql),a=og(),s=ny(),o=qe(c=>c.rootProps.className);T.useEffect(()=>{if(t==null)return sg;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=KRe(v,$Re),{x:S,y:A,width:I,height:N}=f.payload.sourceViewBox,O=yh(yh({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(N?(x-A)/N:0)*s.height});n(yh(yh({},f),{},{payload:yh(yh({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var D;if(typeof r=="function"){var P={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},C=r(i,P);D=i[C]}else r==="value"&&(D=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(D==null||f.payload.active===!1||R==null||s==null){n(PN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:V}=R,L=Math.min(M,s.x+s.width),z=Math.min(V,s.y+s.height),K={x:a==="horizontal"?D.coordinate:L,y:a==="horizontal"?z:D.coordinate},Y=PN({active:f.payload.active,coordinate:K,dataKey:f.payload.dataKey,index:String(D.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Y)}}};return h0.on(DN,c),()=>{h0.off(DN,c)}},[o,n,e,t,r,i,a,s])}function XRe(){var t=qe(LR),e=qe(VR),n=sn();T.useEffect(()=>{if(t==null)return sg;var r=(i,a,s)=>{e!==s&&t===i&&n(FRe(a))};return h0.on(z$,r),()=>{h0.off(z$,r)}},[n,e,t])}function QRe(){var t=sn();T.useEffect(()=>{t(LRe())},[t]),YRe(),XRe()}function ZRe(t,e,n,r,i,a){var s=qe(v=>aRe(v,t,e)),o=qe(VR),c=qe(LR),u=qe(eJ),f=qe(VRe),h=f?.active,g=ny();T.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=PN({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});h0.emit(DN,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function B$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(n),!0).forEach(function(r){JRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JRe(t,e,n){return(e=eMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eMe(t){var e=tMe(t,"string");return typeof e=="symbol"?e:e+""}function tMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nMe(t){return t.dataKey}function rMe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(FCe,e)}var U$=[],iMe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oE(t){var e,n,r=Sr(t,iMe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:A,trigger:I,defaultIndex:N,portal:O,axisId:D}=r,P=sn(),C=typeof N=="number"?String(N):N;T.useEffect(()=>{P(eDe({shared:A,trigger:I,axisId:D,active:i,defaultIndex:C}))},[P,A,I,D,i,C]);var R=ny(),M=YQ(),V=WOe(A),{activeIndex:L,isActive:z}=(e=qe(oe=>lRe(oe,V,I,C)))!==null&&e!==void 0?e:{},K=qe(oe=>oRe(oe,V,I,C)),Y=qe(oe=>nee(oe,V,I,C)),G=qe(oe=>sRe(oe,V,I,C)),X=K,J=ORe(),ee=(n=i??z)!==null&&n!==void 0?n:!1,[Q,U]=XX([X,ee]),Z=V==="axis"?Y:void 0;ZRe(V,I,G,Z,L,ee);var te=O??J;if(te==null||R==null||V==null)return null;var W=X??U$;ee||(W=U$),u&&W.length&&(W=GX(W.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,nMe));var ue=W.length>0,ie=T.createElement(WCe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ee,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:Q,innerRef:U,hasPortalFromProps:!!O},rMe(c,F$(F$({},r),{},{payload:W,label:Z,active:ee,activeIndex:L,coordinate:G,accessibilityLayer:M})));return T.createElement(T.Fragment,null,u2.createPortal(ie,te),ee&&T.createElement(NRe,{cursor:S,tooltipEventType:V,coordinate:G,payload:W,index:L}))}var my=t=>null;my.displayName="Cell";function aMe(t,e,n){return(e=sMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sMe(t){var e=oMe(t,"string");return typeof e=="symbol"?e:e+""}function oMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class lMe{constructor(e){aMe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function $$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(n),!0).forEach(function(r){uMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uMe(t,e,n){return(e=dMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dMe(t){var e=fMe(t,"string");return typeof e=="symbol"?e:e+""}function fMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hMe={cacheSize:2e3,enableCache:!0},lee=cMe({},hMe),q$=new lMe(lee.cacheSize),pMe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},G$="recharts_measurement_span";function gMe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var H$=(t,e)=>{try{var n=document.getElementById(G$);n||(n=document.createElement("span"),n.setAttribute("id",G$),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,pMe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},xv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||F_.isSsr)return{width:0,height:0};if(!lee.enableCache)return H$(e,n);var r=gMe(e,n),i=q$.get(r);if(i)return i;var a=H$(e,n);return q$.set(r,a),a},cee;function mMe(t,e,n){return(e=vMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vMe(t){var e=yMe(t,"string");return typeof e=="symbol"?e:e+""}function yMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bMe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xMe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wMe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},SMe=["cm","mm","pt","pc","in","Q","px"];function _Me(t){return SMe.includes(t)}var Fh="NaN";function EMe(t,e){return t*wMe[e]}class Yr{static parse(e){var n,[,r,i]=(n=xMe.exec(e))!==null&&n!==void 0?n:[];return r==null?Yr.NaN:new Yr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,No(e)&&(this.unit=""),n!==""&&!bMe.test(n)&&(this.num=NaN,this.unit=""),_Me(n)&&(this.num=EMe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return No(this.num)}}cee=Yr;mMe(Yr,"NaN",new cee(NaN,""));function uee(t){if(t==null||t.includes(Fh))return Fh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=K$.exec(e))!==null&&n!==void 0?n:[],s=Yr.parse(r??""),o=Yr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Fh;e=e.replace(K$,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=W$.exec(e))!==null&&u!==void 0?u:[],v=Yr.parse(f??""),b=Yr.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return Fh;e=e.replace(W$,x.toString())}return e}var Y$=/\(([^()]*)\)/;function TMe(t){for(var e=t,n;(n=Y$.exec(e))!=null;){var[,r]=n;e=e.replace(Y$,uee(r))}return e}function AMe(t){var e=t.replace(/\s+/g,"");return e=TMe(e),e=uee(e),e}function kMe(t){try{return AMe(t)}catch{return Fh}}function qC(t){var e=kMe(t.slice(5,-1));return e===Fh?"":e}var CMe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],IMe=["dx","dy","angle","className","breakAll"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(null,arguments)}function X$(t,e){if(t==null)return{};var n,r,i=PMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dee=/[ \f\n\r\t\v\u2028\u2029]+/,fee=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];zr(e)||(n?i=e.toString().split(""):i=e.toString().split(dee));var a=i.map(o=>({word:o,width:xv(o,r).width})),s=n?0:xv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function NMe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var hee=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),pee=t=>t.reduce((e,n)=>e.width>n.width?e:n),OMe="",Q$=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=fee({breakAll:n,style:r,children:c+OMe});if(!u)return[!1,[]];var f=hee(u.wordsWithComputedWidth,a,s,o),h=f.length>i||pee(f).width>Number(a);return[h,f]},DMe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=He(a),f=String(s),h=hee(e,r,n,i);if(!u||i)return h;var g=h.length>a||pee(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var S=Math.floor((v+b)/2),A=S-1,[I,N]=Q$(f,A,c,o,a,r,n,i),[O]=Q$(f,S,c,o,a,r,n,i);if(!I&&!O&&(v=S+1),I&&O&&(b=S-1),!I&&O){w=N;break}x++}return w||h},Z$=t=>{var e=zr(t)?[]:t.toString().split(dee);return[{words:e,width:void 0}]},RMe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!F_.isSsr){var o,c,u=fee({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return Z$(r);return DMe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return Z$(r)},gee="#808080",MMe={angle:0,breakAll:!1,capHeight:"0.71em",fill:gee,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},lE=T.forwardRef((t,e)=>{var n=Sr(t,MMe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=X$(n,CMe),g=T.useMemo(()=>RMe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:S}=h,A=X$(h,IMe);if(!Ka(r)||!Ka(i)||g.length===0)return null;var I=Number(r)+(He(v)?v:0),N=Number(i)+(He(b)?b:0);if(!pt(I)||!pt(N))return null;var O;switch(f){case"start":O=qC("calc(".concat(s,")"));break;case"middle":O=qC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=qC("calc(".concat(g.length-1," * -").concat(a,")"));break}var D=[],P=g[0];if(c&&P!=null){var C=P.width,{width:R}=h;D.push("scale(".concat(He(R)&&He(C)?R/C:1,")"))}return x&&D.push("rotate(".concat(x,", ").concat(I,", ").concat(N,")")),D.length&&(A.transform=D.join(" ")),T.createElement("text",RN({},ya(A),{ref:e,x:I,y:N,className:Lt("recharts-text",w),textAnchor:u,fill:o.includes("url")?gee:o}),g.map((M,V)=>{var L=M.words.join(S?"":" ");return T.createElement("tspan",{x:I,dy:V===0?O:a,key:"".concat(L,"-").concat(V)},L)}))});lE.displayName="Text";function J$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function so(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(n),!0).forEach(function(r){jMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jMe(t,e,n){return(e=zMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zMe(t){var e=LMe(t,"string");return typeof e=="symbol"?e:e+""}function LMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VMe=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=sR(e),f=a,h=a+(c-u)/2,g=(f+h)/2,v=(c+u)/2,b=f+c/2,x=o>=0?1:-1,w=x*r,S=x>0?"end":"start",A=x>0?"start":"end",I=c>=0?1:-1,N=I*r,O=I>0?"end":"start",D=I>0?"start":"end",P=i;if(n==="top"){var C={x:f+c/2,y:s-w,horizontalAnchor:"middle",verticalAnchor:S};return P&&(C.height=Math.max(s-P.y,0),C.width=c),C}if(n==="bottom"){var R={x:h+u/2,y:s+o+w,horizontalAnchor:"middle",verticalAnchor:A};return P&&(R.height=Math.max(P.y+P.height-(s+o),0),R.width=u),R}if(n==="left"){var M={x:g-N,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"};return P&&(M.width=Math.max(M.x-P.x,0),M.height=o),M}if(n==="right"){var V={x:g+v+N,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"};return P&&(V.width=Math.max(P.x+P.width-V.x,0),V.height=o),V}var L=P?{width:v,height:o}:{};return n==="insideLeft"?so({x:g+N,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"},L):n==="insideRight"?so({x:g+v-N,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"},L):n==="insideTop"?so({x:f+c/2,y:s+w,horizontalAnchor:"middle",verticalAnchor:A},L):n==="insideBottom"?so({x:h+u/2,y:s+o-w,horizontalAnchor:"middle",verticalAnchor:S},L):n==="insideTopLeft"?so({x:f+N,y:s+w,horizontalAnchor:D,verticalAnchor:A},L):n==="insideTopRight"?so({x:f+c-N,y:s+w,horizontalAnchor:O,verticalAnchor:A},L):n==="insideBottomLeft"?so({x:h+N,y:s+o-w,horizontalAnchor:D,verticalAnchor:S},L):n==="insideBottomRight"?so({x:h+u-N,y:s+o-w,horizontalAnchor:O,verticalAnchor:S},L):n&&typeof n=="object"&&(He(n.x)||Zd(n.x))&&(He(n.y)||Zd(n.y))?so({x:a+li(n.x,v),y:s+li(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},L):so({x:b,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},L)},BMe=["labelRef"],FMe=["content"];function e9(t,e){if(t==null)return{};var n,r,i=UMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function t9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(n),!0).forEach(function(r){$Me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e,n){return(e=qMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qMe(t){var e=GMe(t,"string");return typeof e=="symbol"?e:e+""}function GMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function al(){return al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},al.apply(null,arguments)}var mee=T.createContext(null),vee=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=T.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return T.createElement(mee.Provider,{value:c},o)},yee=()=>{var t=T.useContext(mee),e=ny();return t||(e?sR(e):void 0)},HMe=T.createContext(null),KMe=()=>{var t=T.useContext(HMe),e=qe(aJ);return t||e},WMe=t=>{var{value:e,formatter:n}=t,r=zr(t.children)?e:t.children;return typeof n=="function"?n(r):r},SM=t=>t!=null&&typeof t=="function",YMe=(t,e)=>{var n=Mr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},XMe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=YMe(h,g),w=x>=0?1:-1,S,A;switch(e){case"insideStart":S=h+w*a,A=v;break;case"insideEnd":S=g-w*a,A=!v;break;case"end":S=g+w*a,A=v;break;default:throw new Error("Unsupported position ".concat(e))}A=x<=0?A:!A;var I=sr(o,c,b,S),N=sr(o,c,b,S+(A?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(A?0:1,`,
    `).concat(N.x,",").concat(N.y),D=zr(t.id)?e0("recharts-radial-line-"):t.id;return T.createElement("text",al({},r,{dominantBaseline:"central",className:Lt("recharts-radial-bar-label",s)}),T.createElement("defs",null,T.createElement("path",{id:D,d:O})),T.createElement("textPath",{xlinkHref:"#".concat(D)},n))},QMe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=sr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=sr(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Sw=t=>t!=null&&"cx"in t&&He(t.cx),ZMe={angle:0,offset:5,zIndex:jr.label,position:"middle",textBreakAll:!1};function JMe(t){if(!Sw(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Ic(t){var e=Sr(t,ZMe),{viewBox:n,parentViewBox:r,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:f}=e,h=KMe(),g=yee(),v=i==="center"?g:h??g,b,x,w;n==null?b=v:Sw(n)?b=n:b=sR(n);var S=JMe(b);if(!b||zr(a)&&zr(s)&&!T.isValidElement(o)&&typeof o!="function")return null;var A=Zm(Zm({},e),{},{viewBox:b});if(T.isValidElement(o)){var{labelRef:I}=A,N=e9(A,BMe);return T.cloneElement(o,N)}if(typeof o=="function"){var{content:O}=A,D=e9(A,FMe);if(x=T.createElement(o,D),T.isValidElement(x))return x}else x=WMe(e);var P=ya(e);if(Sw(b)){if(i==="insideStart"||i==="insideEnd"||i==="end")return XMe(e,i,x,P,b);w=QMe(b,e.offset,e.position)}else{if(!S)return null;var C=VMe({viewBox:S,position:i,offset:e.offset,parentViewBox:Sw(r)?void 0:r});w=Zm(Zm({x:C.x,y:C.y,textAnchor:C.horizontalAnchor,verticalAnchor:C.verticalAnchor},C.width!==void 0?{width:C.width}:{}),C.height!==void 0?{height:C.height}:{})}return T.createElement(Ja,{zIndex:e.zIndex},T.createElement(lE,al({ref:f,className:Lt("recharts-label",c)},P,w,{textAnchor:NMe(P.textAnchor)?P.textAnchor:w.textAnchor,breakAll:u}),x))}Ic.displayName="Label";var eje=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?T.createElement(Ic,al({key:"label-implicit"},r)):Ka(t)?T.createElement(Ic,al({key:"label-implicit",value:t},r)):T.isValidElement(t)?t.type===Ic?T.cloneElement(t,Zm({key:"label-implicit"},r)):T.createElement(Ic,al({key:"label-implicit",content:t},r)):SM(t)?T.createElement(Ic,al({key:"label-implicit",content:t},r)):t&&typeof t=="object"?T.createElement(Ic,al({},t,{key:"label-implicit"},r)):null};function bee(t){var{label:e,labelRef:n}=t,r=yee();return eje(e,r,n)||null}var GC={},HC={},n9;function tje(){return n9||(n9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(HC)),HC}var KC={},r9;function nje(){return r9||(r9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(KC)),KC}var i9;function rje(){return i9||(i9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tje(),n=nje(),r=YD();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(GC)),GC}var WC,a9;function ije(){return a9||(a9=1,WC=rje().last),WC}var aje=ije();const sje=jl(aje);var oje=["valueAccessor"],lje=["dataKey","clockWise","id","textBreakAll","zIndex"];function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fS.apply(null,arguments)}function s9(t,e){if(t==null)return{};var n,r,i=cje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uje=t=>Array.isArray(t.value)?sje(t.value):t.value,xee=T.createContext(void 0),dje=xee.Provider,wee=T.createContext(void 0),fje=wee.Provider;function hje(){return T.useContext(xee)}function pje(){return T.useContext(wee)}function _w(t){var{valueAccessor:e=uje}=t,n=s9(t,oje),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=s9(n,lje),u=hje(),f=pje(),h=u||f;return!h||!h.length?null:T.createElement(Ja,{zIndex:o??jr.label},T.createElement(ui,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=zr(r)?e(g,v):gn(g.payload,r),w=zr(a)?{}:{id:"".concat(a,"-").concat(v)};return T.createElement(Ic,fS({key:"label-".concat(v)},ya(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}_w.displayName="LabelList";function See(t){var{label:e}=t;return e?e===!0?T.createElement(_w,{key:"labelList-implicit"}):T.isValidElement(e)||SM(e)?T.createElement(_w,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(_w,fS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var _ee=t=>t.graphicalItems.polarItems,gje=me([In,uy],GR),cE=me([_ee,Vn,gje],KR),mje=me([cE],WR),uE=me([mje,X_],YR),vje=me([uE,Vn,cE],QR);me([uE,Vn,cE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=gn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:gn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var o9=()=>{},yje=me([uE,Vn,cE,iE,In],tM),bje=me([Vn,JR,eM,o9,yje,o9,Vt,In],nM),Eee=me([Vn,Vt,uE,vje,cy,In,bje],rM),xje=me([Eee,fg,Su],sM),wje=me([Vn,Eee,xje,In],lM);me([Su,wje],oJ);var Sje={radiusAxis:{},angleAxis:{}},Tee=Yi({name:"polarAxis",initialState:Sje,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:PVe,removeRadiusAxis:NVe,addAngleAxis:OVe,removeAngleAxis:DVe}=Tee.actions,_je=Tee.reducer;function Aee(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function l9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(n),!0).forEach(function(r){Eje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eje(t,e,n){return(e=Tje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tje(t){var e=Aje(t,"string");return typeof e=="symbol"?e:e+""}function Aje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kje=(t,e)=>e,_M=me([_ee,kje],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Cje=[],EM=(t,e,n)=>n?.length===0?Cje:n,kee=me([X_,_M,EM],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>c9(c9({},e.presentationProps),a.props))),i!=null)return i}}),Ije=me([kee,_M,EM],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=gn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:D_(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),Pje=me([kee,_M,EM,_r],(t,e,n,r)=>{if(!(e==null||t==null))return Dze({offset:r,pieSettings:e,displayedData:t,cells:n})}),YC={exports:{}},Jt={};var u9;function Nje(){if(u9)return Jt;u9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Jt.ContextConsumer=a,Jt.ContextProvider=s,Jt.Element=t,Jt.ForwardRef=o,Jt.Fragment=n,Jt.Lazy=h,Jt.Memo=f,Jt.Portal=e,Jt.Profiler=i,Jt.StrictMode=r,Jt.Suspense=c,Jt.SuspenseList=u,Jt.isContextConsumer=function(x){return b(x)===a},Jt.isContextProvider=function(x){return b(x)===s},Jt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Jt.isForwardRef=function(x){return b(x)===o},Jt.isFragment=function(x){return b(x)===n},Jt.isLazy=function(x){return b(x)===h},Jt.isMemo=function(x){return b(x)===f},Jt.isPortal=function(x){return b(x)===e},Jt.isProfiler=function(x){return b(x)===i},Jt.isStrictMode=function(x){return b(x)===r},Jt.isSuspense=function(x){return b(x)===c},Jt.isSuspenseList=function(x){return b(x)===u},Jt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Jt.typeOf=b,Jt}var d9;function Oje(){return d9||(d9=1,YC.exports=Nje()),YC.exports}var Dje=Oje(),f9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",h9=null,XC=null,Cee=t=>{if(t===h9&&Array.isArray(XC))return XC;var e=[];return T.Children.forEach(t,n=>{zr(n)||(Dje.isFragment(n)?e=e.concat(Cee(n.props.children)):e.push(n))}),XC=e,h9=t,e};function TM(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>f9(i)):r=[f9(e)],Cee(t).forEach(i=>{var a=Qd(i,"type.displayName")||Qd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var QC={},p9;function Rje(){return p9||(p9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(QC)),QC}var ZC,g9;function Mje(){return g9||(g9=1,ZC=Rje().isPlainObject),ZC}var jje=Mje();const zje=jl(jje);var m9,v9,y9,b9,x9;function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){Lje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lje(t,e,n){return(e=Vje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vje(t){var e=Bje(t,"string");return typeof e=="symbol"?e:e+""}function Bje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(null,arguments)}function zm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var _9=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(m9||(m9=zm(["M ",",",""])),t,e),s+=Mn(v9||(v9=zm(["L ",",",""])),t+n,e),s+=Mn(y9||(y9=zm(["L ",",",""])),t+n-a/2,e+i),s+=Mn(b9||(b9=zm(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(x9||(x9=zm(["L ",","," Z"])),t,e),s},Fje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uje=t=>{var e=Sr(t,Fje),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=T.useRef(null),[v,b]=T.useState(-1),x=T.useRef(i),w=T.useRef(a),S=T.useRef(s),A=T.useRef(n),I=T.useRef(r),N=$_(t,"trapezoid-");if(T.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var K=g.current.getTotalLength();K&&b(K)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Lt("recharts-trapezoid",o);if(!h)return T.createElement("g",null,T.createElement("path",hS({},ya(e),{className:O,d:_9(n,r,i,a,s)})));var D=x.current,P=w.current,C=S.current,R=A.current,M=I.current,V="0px ".concat(v===-1?1:v,"px"),L="".concat(v,"px 0px"),z=XQ(["strokeDasharray"],u,c);return T.createElement(U_,{animationId:N,key:N,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},K=>{var Y=pr(D,i,K),G=pr(P,a,K),X=pr(C,s,K),J=pr(R,n,K),ee=pr(M,r,K);g.current&&(x.current=Y,w.current=G,S.current=X,A.current=J,I.current=ee);var Q=K>0?{transition:z,strokeDasharray:L}:{strokeDasharray:V};return T.createElement("path",hS({},ya(e),{className:O,d:_9(J,ee,Y,G,X),ref:g,style:S9(S9({},Q),e.style)}))})},$je=["option","shapeType","activeClassName"];function qje(t,e){if(t==null)return{};var n,r,i=Gje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){Hje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hje(t,e,n){return(e=Kje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kje(t){var e=Wje(t,"string");return typeof e=="symbol"?e:e+""}function Wje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yje(t,e){return pS(pS({},e),t)}function Xje(t,e){return t==="symbols"}function T9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return T.createElement(eZ,n);case"trapezoid":return T.createElement(Uje,n);case"sector":return T.createElement(iZ,n);case"symbols":if(Xje(e))return T.createElement(WD,n);break;case"curve":return T.createElement(dR,n);default:return null}}function Qje(t){return T.isValidElement(t)?t.props:t}function Iee(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=qje(t,$je),a;if(T.isValidElement(e))a=T.cloneElement(e,pS(pS({},i),Qje(e)));else if(typeof e=="function")a=e(i,i.index);else if(zje(e)&&typeof e!="boolean"){var s=Yje(e,i);a=T.createElement(T9,{shapeType:n,elementProps:s})}else{var o=i;a=T.createElement(T9,{shapeType:n,elementProps:o})}return i.isActive?T.createElement(ui,{className:r},a):a}var AM=(t,e,n)=>{var r=sn();return(i,a)=>s=>{t?.(i,a,s),r(zJ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},kM=t=>{var e=sn();return(n,r)=>i=>{t?.(n,r,i),e(tDe())}},CM=(t,e,n)=>{var r=sn();return(i,a)=>s=>{t?.(i,a,s),r(nDe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Pee(t){var{tooltipEntrySettings:e}=t,n=sn(),r=Ai(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(QOe(e)):i.current!==e&&n(ZOe({prev:i.current,next:e})),i.current=e)},[e,n,r]),T.useLayoutEffect(()=>()=>{i.current&&(n(JOe(i.current)),i.current=null)},[n]),null}function Zje(t){var{legendPayload:e}=t,n=sn(),r=Ai(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(GQ(e)):i.current!==e&&n(HQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n(KQ(i.current)),i.current=null)},[n]),null}function Jje(t){var{legendPayload:e}=t,n=sn(),r=qe(Vt),i=T.useRef(null);return T.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(GQ(e)):i.current!==e&&n(HQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n(KQ(i.current)),i.current=null)},[n]),null}var JC,eze=()=>{var[t]=T.useState(()=>e0("uid-"));return t},tze=(JC=Kne.useId)!==null&&JC!==void 0?JC:eze;function nze(t,e){var n=tze();return e||(t?"".concat(t,"-").concat(n):n)}var rze=T.createContext(void 0),Nee=t=>{var{id:e,type:n,children:r}=t,i=nze("recharts-".concat(n),e);return T.createElement(rze.Provider,{value:i},r(i))},ize={cartesianItems:[],polarItems:[]},Oee=Yi({name:"graphicalItems",initialState:ize,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:yn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:yn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Cs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:yn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:yn()},removePolarGraphicalItem:{reducer(t,e){var n=Cs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:yn()}}}),{addCartesianGraphicalItem:aze,replaceCartesianGraphicalItem:sze,removeCartesianGraphicalItem:oze,addPolarGraphicalItem:lze,removePolarGraphicalItem:cze}=Oee.actions,uze=Oee.reducer,dze=t=>{var e=sn(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(aze(t)):n.current!==t&&e(sze({prev:n.current,next:t})),n.current=t},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(e(oze(n.current)),n.current=null)},[e]),null},fze=T.memo(dze);function hze(t){var e=sn();return T.useLayoutEffect(()=>(e(lze(t)),()=>{e(cze(t))}),[e,t]),null}var pze=["key"],gze=["onMouseEnter","onClick","onMouseLeave"],mze=["id"],vze=["id"];function A9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(n),!0).forEach(function(r){yze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yze(t,e,n){return(e=bze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bze(t){var e=xze(t,"string");return typeof e=="symbol"?e:e+""}function xze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(null,arguments)}function dE(t,e){if(t==null)return{};var n,r,i=wze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sze(t){var e=T.useMemo(()=>TM(t.children,my),[t.children]),n=qe(r=>Ije(r,t.id,e));return n==null?null:T.createElement(Jje,{legendPayload:n})}var _ze=T.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),getPosition:g=>{var v;return(v=r[Number(g)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:D_(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return T.createElement(Pee,{tooltipEntrySettings:h})}),Eze=(t,e)=>t>e?"start":t<e?"end":"middle",Tze=(t,e,n)=>li(typeof e=="function"?e(t):e,n,n*.8),Aze=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=tZ(a,s),c=i+li(t.cx,a,a/2),u=r+li(t.cy,s,s/2),f=li(t.innerRadius,o,0),h=Tze(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},kze=(t,e)=>{var n=Mr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Cze=(t,e)=>{if(T.isValidElement(t))return T.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Lt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=dE(e,pze);return T.createElement(dR,cu({},i,{type:"linear",className:n}))},Ize=(t,e,n)=>{if(T.isValidElement(t))return T.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),T.isValidElement(r)))return r;var i=Lt("recharts-pie-label-text",Aee(t));return T.createElement(lE,cu({},e,{alignmentBaseline:"middle",className:i}),r)};function Pze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Ds(n),c=Jv(i),u=Jv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=sr(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:Eze(x.x,g.cx)},x),S=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[sr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return T.createElement(Ja,{zIndex:jr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},T.createElement(ui,null,a&&Cze(a,S),Ize(i,w,gn(g,s))))});return T.createElement(ui,{className:"recharts-pie-labels"},h)}function Nze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?T.createElement(See,{label:i}):T.createElement(Pze,{sectors:e,props:n,showLabels:r})}function Oze(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(rf),c=qe(vM),u=qe(FDe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=dE(i,gze),b=AM(f,i.dataKey,s),x=kM(g),w=CM(h,i.dataKey,s);return e==null||e.length===0?null:T.createElement(T.Fragment,null,e.map((S,A)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,N=String(A)===o&&(c==null||i.dataKey===c)&&I,O=o?r:null,D=n&&N?n:O,P=jn(jn({},S),{},{stroke:S.stroke,tabIndex:-1,[PQ]:A,[NQ]:s});return T.createElement(ui,cu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(A),tabIndex:-1,className:"recharts-pie-sector"},Q0(v,S,A),{onMouseEnter:b(S,A),onMouseLeave:x(S,A),onClick:w(S,A)}),T.createElement(Iee,cu({option:a??D,index:A,shapeType:"sector",isActive:N},P)))}))}function Dze(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=kze(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(D=>gn(D,u,0)!==0).length,S=(b>=360?w:w-1)*x,A=b-w*g-S,I=r.reduce((D,P)=>{var C=gn(P,u,0);return D+(He(C)?C:0)},0),N;if(I>0){var O;N=r.map((D,P)=>{var C=gn(D,u,0),R=gn(D,f,P),M=Aze(n,a,D),V=(He(C)?C:0)/I,L,z=jn(jn({},D),i&&i[P]&&i[P].props);P?L=O.endAngle+Mr(v)*x*(C!==0?1:0):L=o;var K=L+Mr(v)*((C!==0?g:0)+V*A),Y=(L+K)/2,G=(M.innerRadius+M.outerRadius)/2,X=[{name:R,value:C,payload:z,dataKey:u,type:h,graphicalItemId:n.id}],J=sr(M.cx,M.cy,G,Y);return O=jn(jn(jn(jn({},n.presentationProps),{},{percent:V,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:X,midAngle:Y,middleRadius:G,tooltipPosition:J},z),M),{},{value:C,dataKey:u,startAngle:L,endAngle:K,payload:z,paddingAngle:Mr(v)*x}),O})}return N}function Rze(t){var{showLabels:e,sectors:n,children:r}=t,i=T.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return T.createElement(fje,{value:e?i:void 0},r)}function Mze(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=$_(e,"recharts-pie-"),b=n.current,[x,w]=T.useState(!1),S=T.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),A=T.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return T.createElement(Rze,{showLabels:!x,sectors:i},T.createElement(U_,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:A,onAnimationEnd:S,key:v},I=>{var N,O=[],D=i&&i[0],P=(N=D?.startAngle)!==null&&N!==void 0?N:0;return i?.forEach((C,R)=>{var M=b&&b[R],V=R>0?Qd(C,"paddingAngle",0):0;if(M){var L=pr(M.endAngle-M.startAngle,C.endAngle-C.startAngle,I),z=jn(jn({},C),{},{startAngle:P+V,endAngle:P+L+V});O.push(z),P=z.endAngle}else{var{endAngle:K,startAngle:Y}=C,G=pr(0,K-Y,I),X=jn(jn({},C),{},{startAngle:P+V,endAngle:P+G+V});O.push(X),P=X.endAngle}}),n.current=O,T.createElement(ui,null,T.createElement(Oze,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),T.createElement(Nze,{showLabels:!x,sectors:i,props:e}),e.children)}var jze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:jr.area};function zze(t){var{id:e}=t,n=dE(t,mze),{hide:r,className:i,rootTabIndex:a}=t,s=T.useMemo(()=>TM(t.children,my),[t.children]),o=qe(f=>Pje(f,e,s)),c=T.useRef(null),u=Lt("recharts-pie",i);return r||o==null?(c.current=null,T.createElement(ui,{tabIndex:a,className:u})):T.createElement(Ja,{zIndex:t.zIndex},T.createElement(_ze,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),T.createElement(ui,{tabIndex:a,className:u},T.createElement(Mze,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function Dee(t){var e=Sr(t,jze),{id:n}=e,r=dE(e,vze),i=Ds(r);return T.createElement(Nee,{id:n,type:"pie"},a=>T.createElement(T.Fragment,null,T.createElement(hze,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),T.createElement(Sze,cu({},r,{id:a})),T.createElement(zze,cu({},r,{id:a}))))}Dee.displayName="Pie";function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){Lze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lze(t,e,n){return(e=Vze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vze(t){var e=Bze(t,"string");return typeof e=="symbol"?e:e+""}function Bze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ree=0,Fze={xAxis:{},yAxis:{},zAxis:{}},Mee=Yi({name:"cartesianAxis",initialState:Fze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:yn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:yn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:yn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:yn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:yn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:yn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:yn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:yn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:yn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=C9(C9({},i),{},{width:r,widthHistory:o})}}}}),{addXAxis:Uze,replaceXAxis:$ze,removeXAxis:qze,addYAxis:Gze,replaceYAxis:Hze,removeYAxis:Kze,addZAxis:RVe,replaceZAxis:MVe,removeZAxis:jVe,updateYAxisWidth:Wze}=Mee.actions,Yze=Mee.reducer,Xze=me([_r],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Qze=me([Xze,Bl,Fl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),jee=()=>qe(Qze),I9=(t,e,n)=>{var r=n??t;if(!zr(r))return li(r,e,0)},Zze=(t,e,n)=>{var r={},i=t.filter(eE),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>{var h=u[f.stackId];return h==null&&(h=[]),h.push(f),u[f.stackId]=h,u},r),o=Object.entries(s).map(u=>{var f,[h,g]=u,v=g.map(x=>x.dataKey),b=I9(e,n,(f=g[0])===null||f===void 0?void 0:f.barSize);return{stackId:h,dataKeys:v,barSize:b}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=I9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function P9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(n),!0).forEach(function(r){Jze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jze(t,e,n){return(e=e4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4e(t){var e=t4e(t,"string");return typeof e=="symbol"?e:e+""}function t4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n4e(t,e,n,r,i){var a,s=r.length;if(!(s<1)){var o=li(t,n,0,!0),c,u=[];if(pt((a=r[0])===null||a===void 0?void 0:a.barSize)){var f=!1,h=n/s,g=r.reduce((A,I)=>A+(I.barSize||0),0);g+=(s-1)*o,g>=n&&(g-=(s-1)*o,o=0),g>=n&&h>0&&(f=!0,h*=.9,g=s*h);var v=(n-g)/2>>0,b={offset:v-o,size:0};c=r.reduce((A,I)=>{var N,O={stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:b.offset+b.size+o,size:f?h:(N=I.barSize)!==null&&N!==void 0?N:0}},D=[...A,O];return b=O.position,D},u)}else{var x=li(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var w=(n-2*x-(s-1)*o)/s;w>1&&(w>>=0);var S=pt(i)?Math.min(w,i):w;c=r.reduce((A,I,N)=>[...A,{stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:x+(w+o)*N+(w-S)/2,size:S}}],u)}return c}}var r4e=(t,e,n,r,i,a,s)=>{var o=zr(s)?e:s,c=n4e(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>Fx(Fx({},u),{},{position:Fx(Fx({},u.position),{},{offset:u.position.offset-i/2})}))),c},i4e=(t,e)=>{var n=$R(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}},a4e=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function s4e(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&pt(t.zIndex)?t.zIndex:e}var zee=t=>{var{chartData:e}=t,n=sn(),r=Ai();return T.useEffect(()=>r?()=>{}:(n(L$(e)),()=>{n(L$(void 0))}),[e,n,r]),null},N9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Lee=Yi({name:"brush",initialState:N9,reducers:{setBrushSettings(t,e){return e.payload==null?N9:e.payload}}}),{setBrushSettings:zVe}=Lee.actions,o4e=Lee.reducer,l4e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},c4e=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return l4e({x:e,y:n},{x:r,y:i})};function u4e(t){return(t%180+180)%180}var d4e=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=u4e(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},f4e={dots:[],areas:[],lines:[]},Vee=Yi({name:"referenceElements",initialState:f4e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Cs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Cs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Cs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:LVe,removeDot:VVe,addArea:BVe,removeArea:FVe,addLine:h4e,removeLine:p4e}=Vee.actions,g4e=Vee.reducer,Bee=T.createContext(void 0),m4e=t=>{var{children:e}=t,[n]=T.useState("".concat(e0("recharts"),"-clip")),r=jee();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return T.createElement(Bee.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},v4e=()=>T.useContext(Bee);class y4e{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:s}=n,o,c;return s==="rangeMin"?o=this.yAxisScale.rangeMin():s==="rangeMax"?o=this.yAxisScale.rangeMax():o=0,s==="rangeMin"?c=this.xAxisScale.rangeMin():s==="rangeMax"?c=this.xAxisScale.rangeMax():c=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:c,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:o}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function O9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(n),!0).forEach(function(r){b4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b4e(t,e,n){return(e=x4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x4e(t){var e=w4e(t,"string");return typeof e=="symbol"?e:e+""}function w4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gS.apply(null,arguments)}var S4e=(t,e)=>{var n;if(T.isValidElement(t))n=T.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!pt(e.x1)||!pt(e.y1)||!pt(e.x2)||!pt(e.y2))return null;n=T.createElement("line",gS({},e,{className:"recharts-reference-line-line"}))}return n},_4e=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.map(t,{position:n});if(!pt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},E4e=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.map(t,{position:n});if(!pt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},T4e=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},A4e=(t,e,n,r,i,a,s)=>{var{x:o,y:c,segment:u,ifOverflow:f}=s,h=Ka(o),g=Ka(c);return g?_4e(c,f,r,a,e,n):h?E4e(o,f,r,i,t,n):u!=null&&u.length===2?T4e(u,f,r,new y4e({x:t,y:e})):null};function k4e(t){var e=sn();return T.useEffect(()=>(e(h4e(t)),()=>{e(p4e(t))})),null}function C4e(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ai(),o=v4e(),c=qe(P=>zo(P,e)),u=qe(P=>Lo(P,n)),f=qe(P=>jp(P,"xAxis",e,s)),h=qe(P=>jp(P,"yAxis",n,s)),g=ny();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=A4e(f,h,g,t.position,c.orientation,u.orientation,t);if(!v)return null;var b=v[0],x=v[1];if(b==null||x==null)return null;var{x:w,y:S}=b,{x:A,y:I}=x,N=a==="hidden"?"url(#".concat(o,")"):void 0,O=D9(D9({clipPath:N},ya(t)),{},{x1:w,y1:S,x2:A,y2:I}),D=c4e({x1:w,y1:S,x2:A,y2:I});return T.createElement(Ja,{zIndex:t.zIndex},T.createElement(ui,{className:Lt("recharts-reference-line",i)},S4e(r,O),T.createElement(vee,gS({},D,{lowerWidth:D.width,upperWidth:D.width}),T.createElement(bee,{label:t.label}),t.children)))}var I4e={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:jr.line};function IM(t){var e=Sr(t,I4e);return T.createElement(T.Fragment,null,T.createElement(k4e,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),T.createElement(C4e,e))}IM.displayName="ReferenceLine";function Fee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function P4e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return d4e(r,n)}function N4e(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function p0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function O4e(t,e){return Fee(t,e+1)}function D4e(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:Fee(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),A=b.coordinate,I=c===0||p0(t,A,S,f,o);I||(c=0,f=s,u+=1),I&&(f=A+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function R4e(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var N=r[x];if(N==null)return 0;var O=x,D,P=()=>(D===void 0&&(D=n(N,O)),D),C=N.coordinate,R=x===f||p0(t,C,P,h,c);if(!R)return g=!1,1;R&&(h=C+t*(P()/2+i))},b,x=f;x<s&&(b=v(),!(b!==0&&b===1));x+=u);if(g){for(var w=[],S=f;S<s;S+=u){var A=r[S];A!=null&&w.push(A)}return w}}return[]}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){M4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M4e(t,e,n){return(e=j4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j4e(t){var e=z4e(t,"string");return typeof e=="symbol"?e:e+""}function z4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L4e(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g];if(v==null)return 1;var b=v,x,w=()=>(x===void 0&&(x=n(v,g)),x);if(g===s-1){var S=t*(b.coordinate+t*w()/2-c);a[g]=b=ti(ti({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[g]=b=ti(ti({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var A=p0(t,b.tickCoord,w,o,c);A&&(c=b.tickCoord-t*(w()/2+i),a[g]=ti(ti({},b),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function V4e(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1];if(f!=null){var h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=ti(ti({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=p0(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=ti(ti({},f),{},{isShow:!0}))}}}for(var b=a?o-1:o,x=function(A){var I=s[A];if(I==null)return 1;var N=I,O,D=()=>(O===void 0&&(O=n(I,A)),O);if(A===0){var P=t*(N.coordinate-t*D()/2-c);s[A]=N=ti(ti({},N),{},{tickCoord:P<0?N.coordinate-P*t:N.coordinate})}else s[A]=N=ti(ti({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var C=p0(t,N.tickCoord,D,c,u);C&&(c=N.tickCoord+t*(D()/2+i),s[A]=ti(ti({},N),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function PM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(He(c)||F_.isSsr){var g;return(g=O4e(i,He(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?xv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(O,D)=>{var P=typeof u=="function"?u(O.value,D):O.value;return b==="width"?P4e(xv(P,{fontSize:e,letterSpacing:n}),x,h):xv(P,{fontSize:e,letterSpacing:n})[b]},S=i[0],A=i[1],I=i.length>=2&&S!=null&&A!=null?Mr(A.coordinate-S.coordinate):1,N=N4e(a,I,b);return c==="equidistantPreserveStart"?D4e(I,N,w,i,s):c==="equidistantPreserveEnd"?R4e(I,N,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=V4e(I,N,w,i,s,c==="preserveStartEnd"):v=L4e(I,N,w,i,s),v.filter(O=>O.isShow))}var B4e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},F4e=["axisLine","width","height","className","hide","ticks","axisType"];function U4e(t,e){if(t==null)return{};var n,r,i=$4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(null,arguments)}function M9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(n),!0).forEach(function(r){q4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q4e(t,e,n){return(e=G4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G4e(t){var e=H4e(t,"string");return typeof e=="symbol"?e:e+""}function H4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:jr.axis};function K4e(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=Dn(Dn(Dn({},c),Ds(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=Dn(Dn({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=Dn(Dn({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return T.createElement("line",af({},u,{className:Lt("recharts-cartesian-axis-line",Qd(o,"className"))}))}function W4e(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,S=He(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function Y4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function X4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Q4e(t){var{option:e,tickProps:n,value:r}=t,i,a=Lt(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))i=T.cloneElement(e,Dn(Dn({},n),{},{className:a}));else if(typeof e=="function")i=e(Dn(Dn({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Lt(s,Aee(e))),i=T.createElement(lE,af({},n,{className:s}),r)}return i}var Z4e=T.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:S,fontSize:A,letterSpacing:I,getTicksConfig:N,events:O,axisType:D}=t,P=PM(Dn(Dn({},N),{},{ticks:n}),A,I),C=Y4e(f,h),R=X4e(f,h),M=Ds(N),V=Jv(r),L={};typeof i=="object"&&(L=i);var z=Dn(Dn({},M),{},{fill:"none"},L),K=P.map(X=>Dn({entry:X},W4e(X,g,v,b,x,f,w,h,S))),Y=K.map(X=>{var{entry:J,line:ee}=X;return T.createElement(ui,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&T.createElement("line",af({},z,ee,{className:Lt("recharts-cartesian-axis-tick-line",Qd(i,"className"))})))}),G=K.map((X,J)=>{var ee,Q,{entry:U,tick:Z}=X,te=Dn(Dn(Dn(Dn({verticalAnchor:R},M),{},{textAnchor:C,stroke:"none",fill:a},Z),{},{index:J,payload:U,visibleTicksCount:P.length,tickFormatter:s,padding:c},u),{},{angle:(ee=(Q=u?.angle)!==null&&Q!==void 0?Q:M.angle)!==null&&ee!==void 0?ee:0}),W=Dn(Dn({},te),V);return T.createElement(ui,af({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},Q0(O,U,J)),r&&T.createElement(Q4e,{option:r,tickProps:W,value:"".concat(typeof s=="function"?s(U.value,J):U.value).concat(o||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},G.length>0&&T.createElement(Ja,{zIndex:jr.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:e},G)),Y.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},Y))}),J4e=T.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=U4e(t,F4e),[f,h]=T.useState(""),[g,v]=T.useState(""),b=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return B4e({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=T.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var A=S[0];if(A){var I=window.getComputedStyle(A),N=I.fontSize,O=I.letterSpacing;(N!==f||O!==g)&&(h(N),v(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:T.createElement(Ja,{zIndex:t.zIndex},T.createElement(ui,{className:Lt("recharts-cartesian-axis",a)},T.createElement(K4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ds(t)}),T.createElement(Z4e,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(vee,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(bee,{label:t.label,labelRef:t.labelRef}),t.children)))}),NM=T.forwardRef((t,e)=>{var n=Sr(t,bl);return T.createElement(J4e,af({},n,{ref:e}))});NM.displayName="CartesianAxis";var eLe=["x1","y1","x2","y2","key"],tLe=["offset"],nLe=["xAxisId","yAxisId"],rLe=["xAxisId","yAxisId"];function j9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j9(Object(n),!0).forEach(function(r){iLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iLe(t,e,n){return(e=aLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aLe(t){var e=sLe(t,"string");return typeof e=="symbol"?e:e+""}function sLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(null,arguments)}function mS(t,e){if(t==null)return{};var n,r,i=oLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lLe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return T.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Uee(t){var{option:e,lineItemProps:n}=t,r;if(T.isValidElement(e))r=T.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=mS(n,eLe),h=(i=Ds(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=mS(h,tLe);r=T.createElement("line",Ed({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function cLe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=mS(t,nLe),c=i.map((u,f)=>{var h=ii(ii({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return T.createElement(Uee,{key:"line-".concat(f),option:r,lineItemProps:h})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function uLe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=mS(t,rLe),c=i.map((u,f)=>{var h=ii(ii({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return T.createElement(Uee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function dLe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%e.length;return T.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:x,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function fLe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%n.length;return T.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:x,height:o,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var hLe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return kQ(PM(ii(ii(ii({},bl),n),{},{ticks:CQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},pLe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return kQ(PM(ii(ii(ii({},bl),n),{},{ticks:CQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},gLe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:jr.grid};function vy(t){var e=oR(),n=lR(),r=MQ(),i=ii(ii({},Sr(t,gLe)),{},{x:He(t.x)?t.x:r.left,y:He(t.y)?t.y:r.top,width:He(t.width)?t.width:r.width,height:He(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=Ai(),x=qe(R=>A$(R,"xAxis",a,b)),w=qe(R=>A$(R,"yAxis",s,b));if(!Oo(u)||!Oo(f)||!He(o)||!He(c))return null;var S=i.verticalCoordinatesGenerator||hLe,A=i.horizontalCoordinatesGenerator||pLe,{horizontalPoints:I,verticalPoints:N}=i;if((!I||!I.length)&&typeof A=="function"){var O=g&&g.length,D=A({yAxis:w?ii(ii({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);U1(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(I=D)}if((!N||!N.length)&&typeof S=="function"){var P=v&&v.length,C=S({xAxis:x?ii(ii({},x),{},{ticks:P?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},P?!0:h);U1(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(N=C)}return T.createElement(Ja,{zIndex:i.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(lLe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),T.createElement(dLe,Ed({},i,{horizontalPoints:I})),T.createElement(fLe,Ed({},i,{verticalPoints:N})),T.createElement(cLe,Ed({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),T.createElement(uLe,Ed({},i,{offset:r,verticalPoints:N,xAxis:x,yAxis:w}))))}vy.displayName="CartesianGrid";var mLe={},$ee=Yi({name:"errorBars",initialState:mLe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:UVe,replaceErrorBar:$Ve,removeErrorBar:qVe}=$ee.actions,vLe=$ee.reducer,yLe=["children"];function bLe(t,e){if(t==null)return{};var n,r,i=xLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wLe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},SLe=T.createContext(wLe);function _Le(t){var{children:e}=t,n=bLe(t,yLe);return T.createElement(SLe.Provider,{value:n},e)}function qee(t,e){var n,r,i=qe(u=>zo(u,t)),a=qe(u=>Lo(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Nr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Or.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function ELe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=jee(),{needClipX:a,needClipY:s,needClip:o}=qee(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var eI={exports:{}},tI={};var z9;function TLe(){if(z9)return tI;z9=1;var t=Vp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return tI.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(O){if(!S){if(S=!0,A=O,O=h(O),g!==void 0&&b.hasValue){var D=b.value;if(g(D,O))return I=D}return I=O}if(D=I,n(A,O))return D;var P=h(O);return g!==void 0&&g(D,P)?(A=O,D):(A=O,I=P)}var S=!1,A,I,N=f===void 0?null:f;return[function(){return w(u())},N===null?void 0:function(){return w(N())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},tI}var L9;function ALe(){return L9||(L9=1,eI.exports=TLe()),eI.exports}ALe();function kLe(t){t()}function CLe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){kLe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var V9={notify(){},get:()=>[]};function ILe(t,e){let n,r=V9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=CLe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=V9)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var PLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NLe=PLe(),OLe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",DLe=OLe(),RLe=()=>NLe||DLe?T.useLayoutEffect:T.useEffect,MLe=RLe();function B9(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function jLe(t,e){if(B9(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!B9(t[n[i]],e[n[i]]))return!1;return!0}var zLe=Symbol.for("react-redux-context"),LLe=typeof globalThis<"u"?globalThis:{};function VLe(){if(!T.createContext)return{};const t=LLe[zLe]??=new Map;let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var BLe=VLe();function FLe(t){const{children:e,context:n,serverState:r,store:i}=t,a=T.useMemo(()=>{const c=ILe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=T.useMemo(()=>i.getState(),[i]);MLe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||BLe;return T.createElement(o.Provider,{value:a},e)}var ULe=FLe,$Le=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function qLe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function OM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if($Le.has(r)){if(t[r]==null&&e[r]==null)continue;if(!jLe(t[r],e[r]))return!1}else if(!qLe(t[r],e[r]))return!1;return!0}function mf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Ree}function vf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Ree}var GLe="Invariant failed";function HLe(t,e){throw new Error(GLe)}function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MN.apply(null,arguments)}function vS(t){return T.createElement(Iee,MN({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var KLe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(He(e))return e;var a=He(r)||zr(r);return a?e(r,i):(a||HLe(),n)}},WLe=(t,e,n)=>n,YLe=(t,e)=>e,yy=me([HR,YLe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),XLe=me([yy],t=>t?.maxBarSize),QLe=(t,e,n,r)=>r,ZLe=me([Vt,HR,mf,vf,WLe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),JLe=(t,e,n)=>{var r=Vt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null))return r==="horizontal"?IN(t,"yAxis",a,n):IN(t,"xAxis",i,n)},e3e=(t,e)=>{var n=Vt(t),r=mf(t,e),i=vf(t,e);if(!(r==null||i==null))return n==="horizontal"?T$(t,"xAxis",r):T$(t,"yAxis",i)},t3e=me([ZLe,F2e,e3e],Zze),n3e=(t,e,n)=>{var r,i,a=yy(t,e);if(a==null)return 0;var s=mf(t,e),o=vf(t,e);if(s==null||o==null)return 0;var c=Vt(t),u=QZ(t),{maxBarSize:f}=a,h=zr(f)?u:f,g,v;return c==="horizontal"?(g=Lp(t,"xAxis",s,n),v=zp(t,"xAxis",s,n)):(g=Lp(t,"yAxis",o,n),v=zp(t,"yAxis",o,n)),(r=(i=F1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0},Gee=(t,e,n)=>{var r=Vt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Lp(t,"xAxis",i,n),o=zp(t,"xAxis",i,n)):(s=Lp(t,"yAxis",a,n),o=zp(t,"yAxis",a,n)),F1(s,o)}},r3e=me([t3e,QZ,B2e,ZZ,n3e,Gee,XLe],r4e),i3e=(t,e,n)=>{var r=mf(t,e);if(r!=null)return Lp(t,"xAxis",r,n)},a3e=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Lp(t,"yAxis",r,n)},s3e=(t,e,n)=>{var r=mf(t,e);if(r!=null)return zp(t,"xAxis",r,n)},o3e=(t,e,n)=>{var r=vf(t,e);if(r!=null)return zp(t,"yAxis",r,n)},l3e=me([r3e,yy],a4e),c3e=me([JLe,yy],i4e),u3e=me([_r,iR,i3e,a3e,s3e,o3e,l3e,Vt,O2e,Gee,c3e,yy,QLe],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=v?.slice(b,x+1),S!=null)return L3e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),d3e=["index"];function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jN.apply(null,arguments)}function f3e(t,e){if(t==null)return{};var n,r,i=h3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function h3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hee=T.createContext(void 0),p3e=t=>{var e=T.useContext(Hee);if(e!=null)return e.stackId;if(t!=null)return Ake(t)},g3e=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),m3e=t=>{var e=T.useContext(Hee);if(e!=null){var{stackId:n}=e;return"url(#".concat(g3e(n,t),")")}},Kee=t=>{var{index:e}=t,n=f3e(t,d3e),r=m3e(e);return T.createElement(ui,jN({className:"recharts-bar-stack-layer",clipPath:r},n))},v3e=["onMouseEnter","onMouseLeave","onClick"],y3e=["value","background","tooltipPosition"],b3e=["id"],x3e=["onMouseEnter","onClick","onMouseLeave"];function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ml.apply(null,arguments)}function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(r){w3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w3e(t,e,n){return(e=S3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S3e(t){var e=_3e(t,"string");return typeof e=="symbol"?e:e+""}function _3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yS(t,e){if(t==null)return{};var n,r,i=E3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var T3e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:D_(n,e),payload:t}]},A3e=T.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,getPosition:sg,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:D_(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return T.createElement(Pee,{tooltipEntrySettings:f})});function k3e(t){var e=qe(rf),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=yS(a,v3e),f=AM(s,r,a.id),h=kM(o),g=CM(c,r,a.id);if(!i||n==null)return null;var v=Jv(i);return T.createElement(Ja,{zIndex:s4e(i,jr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:A}=b,I=yS(b,y3e);if(!S)return null;var N=f(b,x),O=h(b,x),D=g(b,x),P=yi(yi(yi(yi(yi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),v),Q0(u,b,x)),{},{onMouseEnter:N,onMouseLeave:O,onClick:D,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return T.createElement(vS,Ml({key:"background-bar-".concat(x)},P))}))}function C3e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return yi(yi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return T.createElement(dje,{value:e?i:void 0},n)}function I3e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(rf),c=qe(vM),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?T.createElement(Ja,{zIndex:jr.activeBar},T.createElement(Kee,{index:a},T.createElement(vS,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s})))):T.createElement(vS,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function P3e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return T.createElement(vS,Ml({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function N3e(t){var e,{data:n,props:r}=t,i=(e=Ds(r))!==null&&e!==void 0?e:{},{id:a}=i,s=yS(i,b3e),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=yS(r,x3e),b=AM(f,c,a),x=kM(g),w=CM(h,c,a);return n?T.createElement(T.Fragment,null,n.map((S,A)=>T.createElement(Kee,Ml({index:A,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(A),className:"recharts-bar-rectangle"},Q0(v,S,A),{onMouseEnter:b(S,A),onMouseLeave:x(S,A),onClick:w(S,A)}),u?T.createElement(I3e,{shape:o,activeBar:u,baseProps:s,entry:S,index:A,dataKey:c}):T.createElement(P3e,{shape:o,baseProps:s,entry:S,index:A,dataKey:c})))):null}function O3e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=$_(e,"recharts-bar-"),[v,b]=T.useState(!1),x=!v,w=T.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=T.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return T.createElement(C3e,{showLabels:x,rects:r},T.createElement(U_,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},A=>{var I=A===1?r:r?.map((N,O)=>{var D=h&&h[O];if(D)return yi(yi({},N),{},{x:pr(D.x,N.x,A),y:pr(D.y,N.y,A),width:pr(D.width,N.width,A),height:pr(D.height,N.height,A)});if(i==="horizontal"){var P=pr(0,N.height,A),C=pr(N.stackedBarStart,N.y,A);return yi(yi({},N),{},{y:C,height:P})}var R=pr(0,N.width,A),M=pr(N.stackedBarStart,N.x,A);return yi(yi({},N),{},{width:R,x:M})});return A>0&&(n.current=I??null),I==null?null:T.createElement(ui,null,T.createElement(N3e,{props:e,data:I}))}),T.createElement(See,{label:e.label}),e.children)}function D3e(t){var e=T.useRef(null);return T.createElement(O3e,{previousRectanglesRef:e,props:t})}var Wee=0,R3e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:gn(t,e)}};class M3e extends T.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Lt("recharts-bar",i),h=u;return T.createElement(ui,{className:f,id:u},o&&T.createElement("defs",null,T.createElement(ELe,{clipPathId:h,xAxisId:a,yAxisId:s})),T.createElement(ui,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},T.createElement(k3e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),T.createElement(D3e,this.props)))}}var j3e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Wee,xAxisId:0,yAxisId:0,zIndex:jr.bar};function z3e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=qee(e,n),g=og(),v=Ai(),b=TM(t.children,my),x=qe(A=>u3e(A,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,T.createElement(_Le,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:R3e,errorBarOffset:w},T.createElement(M3e,Ml({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function L3e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,A=kke({numericAxis:w}),I=w.scale.map(A);return h.map((N,O)=>{var D,P,C,R,M,V;if(f){var L=f[O+x];if(L==null)return null;D=wke(L,S)}else D=gn(N,n),Array.isArray(D)||(D=[A,D]);var z=KLe(r,Wee)(D[1],O);if(e==="horizontal"){var K,Y=o.scale.map(D[0]),G=o.scale.map(D[1]);if(Y==null||G==null)return null;P=EF({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:N,index:O}),C=(K=G??Y)!==null&&K!==void 0?K:void 0,R=i.size;var X=Y-G;if(M=No(X)?0:X,V={x:P,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(M)<Math.abs(z)){var J=Mr(M||z)*(Math.abs(z)-Math.abs(M));C-=J,M+=J}}else{var ee=s.scale.map(D[0]),Q=s.scale.map(D[1]);if(ee==null||Q==null)return null;if(P=ee,C=EF({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:N,index:O}),R=Q-ee,M=i.size,V={x:g.left,y:C,width:g.width,height:M},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var U=Mr(R||z)*(Math.abs(z)-Math.abs(R));R+=U}}if(P==null||C==null||R==null||M==null)return null;var Z=yi(yi({},N),{},{stackedBarStart:I,x:P,y:C,width:R,height:M,value:f?D:D[1],payload:N,background:V,tooltipPosition:{x:P+R/2,y:C+M/2},parentViewBox:b},v&&v[O]&&v[O].props);return Z}).filter(Boolean)}function V3e(t){var e=Sr(t,j3e),n=p3e(e.stackId),r=Ai();return T.createElement(Nee,{id:e.id,type:"bar"},i=>T.createElement(T.Fragment,null,T.createElement(Zje,{legendPayload:T3e(e)}),T.createElement(A3e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),T.createElement(fze,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),T.createElement(Ja,{zIndex:e.zIndex},T.createElement(z3e,Ml({},e,{id:i})))))}var sf=T.memo(V3e,OM);sf.displayName="Bar";var B3e=["domain","range"],F3e=["domain","range"];function U9(t,e){if(t==null)return{};var n,r,i=U3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function U3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $9(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Yee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=U9(t,B3e),{domain:a,range:s}=e,o=U9(e,F3e);return!$9(n,a)||!$9(r,s)?!1:OM(i,o)}var $3e=["type"],q3e=["dangerouslySetInnerHTML","ticks","scale"],G3e=["id","scale"];function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zN.apply(null,arguments)}function q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(n),!0).forEach(function(r){H3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H3e(t,e,n){return(e=K3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K3e(t){var e=W3e(t,"string");return typeof e=="symbol"?e:e+""}function W3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LN(t,e){if(t==null)return{};var n,r,i=Y3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function X3e(t){var e=sn(),n=T.useRef(null),r=jQ(),{type:i}=t,a=LN(t,$3e),s=Z_(r,"xAxis",i),o=T.useMemo(()=>{if(s!=null)return G9(G9({},a),{},{type:s})},[a,s]);return T.useLayoutEffect(()=>{o!=null&&(n.current===null?e(Uze(o)):n.current!==o&&e($ze({prev:n.current,next:o})),n.current=o)},[o,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(qze(n.current)),n.current=null)},[e]),null}var Q3e=t=>{var{xAxisId:e,className:n}=t,r=qe(iR),i=Ai(),a="xAxis",s=qe(S=>NJ(S,a,e,i)),o=qe(S=>kJ(S,e)),c=qe(S=>FOe(S,e)),u=qe(S=>lJ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=LN(t,q3e),{id:b,scale:x}=u,w=LN(u,G3e);return T.createElement(NM,zN({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Lt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},Z3e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,angle:Nr.angle,axisLine:bl.axisLine,height:Nr.height,hide:!1,includeHidden:Nr.includeHidden,interval:Nr.interval,label:!1,minTickGap:Nr.minTickGap,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,tickLine:bl.tickLine,tickSize:bl.tickSize,type:Nr.type,xAxisId:0},J3e=t=>{var e=Sr(t,Z3e);return T.createElement(T.Fragment,null,T.createElement(X3e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(Q3e,e))},by=T.memo(J3e,Yee);by.displayName="XAxis";var e5e=["type"],t5e=["dangerouslySetInnerHTML","ticks","scale"],n5e=["id","scale"];function VN(){return VN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VN.apply(null,arguments)}function H9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H9(Object(n),!0).forEach(function(r){r5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r5e(t,e,n){return(e=i5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i5e(t){var e=a5e(t,"string");return typeof e=="symbol"?e:e+""}function a5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BN(t,e){if(t==null)return{};var n,r,i=s5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function o5e(t){var e=sn(),n=T.useRef(null),r=jQ(),{type:i}=t,a=BN(t,e5e),s=Z_(r,"yAxis",i),o=T.useMemo(()=>{if(s!=null)return K9(K9({},a),{},{type:s})},[s,a]);return T.useLayoutEffect(()=>{o!=null&&(n.current===null?e(Gze(o)):n.current!==o&&e(Hze({prev:n.current,next:o})),n.current=o)},[o,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(Kze(n.current)),n.current=null)},[e]),null}function l5e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=T.useRef(null),s=T.useRef(null),o=qe(iR),c=Ai(),u=sn(),f="yAxis",h=qe(D=>CJ(D,e)),g=qe(D=>$Oe(D,e)),v=qe(D=>NJ(D,f,e,c)),b=qe(D=>cJ(D,e));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!h||SM(i)||T.isValidElement(i)||b==null)){var D=a.current;if(D){var P=D.getCalculatedWidth();Math.round(h.width)!==Math.round(P)&&u(Wze({id:e,width:P}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,A=BN(t,t5e),{id:I,scale:N}=b,O=BN(b,n5e);return T.createElement(NM,VN({},A,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Lt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))}var c5e={allowDataOverflow:Or.allowDataOverflow,allowDecimals:Or.allowDecimals,allowDuplicatedCategory:Or.allowDuplicatedCategory,angle:Or.angle,axisLine:bl.axisLine,hide:!1,includeHidden:Or.includeHidden,interval:Or.interval,label:!1,minTickGap:Or.minTickGap,mirror:Or.mirror,orientation:Or.orientation,padding:Or.padding,reversed:Or.reversed,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,tickLine:bl.tickLine,tickSize:bl.tickSize,type:Or.type,width:Or.width,yAxisId:0},u5e=t=>{var e=Sr(t,c5e);return T.createElement(T.Fragment,null,T.createElement(o5e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(l5e,e))},xy=T.memo(u5e,Yee);xy.displayName="YAxis";var d5e=(t,e)=>e,DM=me([d5e,Vt,aJ,Vr,WJ,ql,iRe,_r],dRe),RM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Xee=Wa("mouseClick"),Qee=J0();Qee.startListening({actionCreator:Xee,effect:(t,e)=>{var n=t.payload,r=DM(e.getState(),RM(n));r?.activeIndex!=null&&e.dispatch(rDe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var FN=Wa("mouseMove"),Zee=J0(),Ux=null;Zee.startListening({actionCreator:FN,effect:(t,e)=>{var n=t.payload;Ux!==null&&cancelAnimationFrame(Ux);var r=RM(n);Ux=requestAnimationFrame(()=>{var i=e.getState(),a=dM(i,i.tooltip.settings.shared);if(a==="axis"){var s=DM(i,r);s?.activeIndex!=null?e.dispatch(VJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(LJ())}Ux=null})}});function f5e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var W9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Jee=Yi({name:"rootProps",initialState:W9,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:W9.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),h5e=Jee.reducer,{updateOptions:p5e}=Jee.actions,g5e=null,m5e={updatePolarOptions:(t,e)=>e.payload},ete=Yi({name:"polarOptions",initialState:g5e,reducers:m5e}),{updatePolarOptions:v5e}=ete.actions,y5e=ete.reducer,tte=Wa("keyDown"),nte=Wa("focus"),MM=J0();MM.startListening({actionCreator:tte,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=fM(i,mg(n),fy(n),py(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=ql(n);if(a==="Enter"){var u=dS(n,"axis","hover",String(i.index));e.dispatch(NN({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=KOe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=dS(n,"axis","hover",String(v));e.dispatch(NN({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});MM.startListening({actionCreator:nte,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=dS(n,"axis","hover",String(a));e.dispatch(NN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var za=Wa("externalEvent"),rte=J0(),nI=new Map;rte.startListening({actionCreator:za,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=nI.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:$De(o),activeDataKey:vM(o),activeIndex:rf(o),activeLabel:QJ(o),activeTooltipIndex:rf(o),isTooltipActive:qDe(o)};n(c,r)}finally{nI.delete(i)}});nI.set(i,s)}}});var b5e=me([pg],t=>t.tooltipItemPayloads),x5e=me([b5e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),ite=Wa("touchMove"),ate=J0();ate.startListening({actionCreator:ite,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=dM(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=DM(r,RM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(VJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(PQ),h=(o=u.getAttribute(NQ))!==null&&o!==void 0?o:void 0,g=gg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=x5e(r,f,h);e.dispatch(zJ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var w5e=ZX({brush:o4e,cartesianAxis:Yze,chartData:URe,errorBars:vLe,graphicalItems:uze,layout:mke,legend:_Ce,options:zRe,polarAxis:_je,polarOptions:y5e,referenceElements:g4e,rootProps:h5e,tooltip:iDe,zIndex:TRe}),S5e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return FAe({reducer:w5e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Qee.middleware,Zee.middleware,MM.middleware,rte.middleware,ate.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(hQ({type:"raf"}))},devTools:{serialize:{replacer:f5e},name:"recharts-".concat(n)}})};function ste(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ai(),a=T.useRef(null);if(i)return n;a.current==null&&(a.current=S5e(e,r));var s=QD;return T.createElement(ULe,{context:s,store:a.current},n)}function _5e(t){var{layout:e,margin:n}=t,r=sn(),i=Ai();return T.useEffect(()=>{i||(r(hke(e)),r(fke(n)))},[r,i,e,n]),null}var ote=T.memo(_5e,OM);function lte(t){var e=sn();return T.useEffect(()=>{e(p5e(t))},[e,t]),null}function Y9(t){var{zIndex:e,isPanorama:n}=t,r=T.useRef(null),i=sn();return T.useLayoutEffect(()=>(r.current&&i(_Re({zIndex:e,element:r.current,isPanorama:n})),()=>{i(ERe({zIndex:e,isPanorama:n}))}),[i,e,n]),T.createElement("g",{tabIndex:-1,ref:r})}function X9(t){var{children:e,isPanorama:n}=t,r=qe(hRe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return T.createElement(T.Fragment,null,i.map(s=>T.createElement(Y9,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>T.createElement(Y9,{key:s,zIndex:s,isPanorama:n})))}var E5e=["children"];function T5e(t,e){if(t==null)return{};var n,r,i=A5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function A5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}var k5e={width:"100%",height:"100%",display:"block"},C5e=T.forwardRef((t,e)=>{var n=oR(),r=lR(),i=YQ();if(!Oo(n)||!Oo(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),T.createElement(FD,bS({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:k5e,ref:e}),a)}),I5e=t=>{var{children:e}=t,n=qe(z_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return T.createElement(FD,{width:r,height:i,x:s,y:a},e)},Q9=T.forwardRef((t,e)=>{var{children:n}=t,r=T5e(t,E5e),i=Ai();return i?T.createElement(I5e,null,T.createElement(X9,{isPanorama:!0},n)):T.createElement(C5e,bS({ref:e},r),T.createElement(X9,{isPanorama:!1},n))});function P5e(){var t=sn(),[e,n]=T.useState(null),r=qe(Dke);return T.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;pt(a)&&a!==r&&t(gke(a))}},[e,t,r]),n}function Z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N5e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z9(Object(n),!0).forEach(function(r){O5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O5e(t,e,n){return(e=D5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D5e(t){var e=R5e(t,"string");return typeof e=="symbol"?e:e+""}function R5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(null,arguments)}var M5e=()=>(QRe(),null);function xS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var j5e=T.forwardRef((t,e)=>{var n,r,i=T.useRef(null),[a,s]=T.useState({containerWidth:xS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:xS((r=t.style)===null||r===void 0?void 0:r.height)}),o=T.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=T.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var x=b[0];if(x!=null){var{width:w,height:S}=x.contentRect;o(w,S)}},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return T.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),T.createElement(T.Fragment,null,T.createElement(ry,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Qc({ref:c},t)))}),z5e=T.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=T.useState({containerWidth:xS(n),containerHeight:xS(r)}),s=T.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=T.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return T.createElement(T.Fragment,null,T.createElement(ry,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",Qc({ref:o},t)))}),L5e=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return T.createElement(T.Fragment,null,T.createElement(ry,{width:n,height:r}),T.createElement("div",Qc({ref:e},t)))}),V5e=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?T.createElement(z5e,Qc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?T.createElement(L5e,Qc({},t,{width:n,height:r,ref:e})):T.createElement(T.Fragment,null,T.createElement(ry,{width:n,height:r}),T.createElement("div",Qc({ref:e},t)))});function B5e(t){return t?j5e:V5e}var F5e=T.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:A,dispatchTouchEvents:I=!0}=t,N=T.useRef(null),O=sn(),[D,P]=T.useState(null),[C,R]=T.useState(null),M=P5e(),V=aR(),L=V?.width>0?V.width:S,z=V?.height>0?V.height:i,K=T.useCallback(se=>{M(se),typeof e=="function"&&e(se),P(se),R(se),se!=null&&(N.current=se)},[M,e,P,R]),Y=T.useCallback(se=>{O(Xee(se)),O(za({handler:a,reactEvent:se}))},[O,a]),G=T.useCallback(se=>{O(FN(se)),O(za({handler:u,reactEvent:se}))},[O,u]),X=T.useCallback(se=>{O(LJ()),O(za({handler:f,reactEvent:se}))},[O,f]),J=T.useCallback(se=>{O(FN(se)),O(za({handler:h,reactEvent:se}))},[O,h]),ee=T.useCallback(()=>{O(nte())},[O]),Q=T.useCallback(se=>{O(tte(se.key))},[O]),U=T.useCallback(se=>{O(za({handler:s,reactEvent:se}))},[O,s]),Z=T.useCallback(se=>{O(za({handler:o,reactEvent:se}))},[O,o]),te=T.useCallback(se=>{O(za({handler:c,reactEvent:se}))},[O,c]),W=T.useCallback(se=>{O(za({handler:g,reactEvent:se}))},[O,g]),ue=T.useCallback(se=>{O(za({handler:x,reactEvent:se}))},[O,x]),ie=T.useCallback(se=>{I&&O(ite(se)),O(za({handler:b,reactEvent:se}))},[O,I,b]),oe=T.useCallback(se=>{O(za({handler:v,reactEvent:se}))},[O,v]),Se=B5e(A);return T.createElement(iee.Provider,{value:D},T.createElement(mX.Provider,{value:C},T.createElement(Se,{width:L??w?.width,height:z??w?.height,className:Lt("recharts-wrapper",r),style:N5e({position:"relative",cursor:"default",width:L,height:z},w),onClick:Y,onContextMenu:U,onDoubleClick:Z,onFocus:ee,onKeyDown:Q,onMouseDown:te,onMouseEnter:G,onMouseLeave:X,onMouseMove:J,onMouseUp:W,onTouchEnd:oe,onTouchMove:ie,onTouchStart:ue,ref:K},T.createElement(M5e,null),n)))}),U5e=["width","height","responsive","children","className","style","compact","title","desc"];function $5e(t,e){if(t==null)return{};var n,r,i=q5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cte=T.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=$5e(t,U5e),g=Ds(h);return c?T.createElement(T.Fragment,null,T.createElement(ry,{width:n,height:r}),T.createElement(Q9,{otherAttributes:g,title:u,desc:f},a)):T.createElement(F5e,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(Q9,{otherAttributes:g,title:u,desc:f,ref:e},T.createElement(m4e,null,a)))});function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UN.apply(null,arguments)}var G5e={top:5,right:5,bottom:5,left:5},H5e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:G5e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},K5e=T.forwardRef(function(e,n){var r,i=Sr(e.categoricalChartProps,H5e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return T.createElement(ste,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},T.createElement(zee,{chartData:u.data}),T.createElement(ote,{layout:i.layout,margin:i.margin}),T.createElement(lte,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(cte,UN({},i,{ref:n})))}),W5e=["axis","item"],fE=T.forwardRef((t,e)=>T.createElement(K5e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:W5e,tooltipPayloadSearcher:aee,categoricalChartProps:t,ref:e}));function Y5e(t){var e=sn();return T.useEffect(()=>{e(v5e(t))},[e,t]),null}var X5e=["layout"];function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$N.apply(null,arguments)}function Q5e(t,e){if(t==null)return{};var n,r,i=Z5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Z5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var J5e={top:5,right:5,bottom:5,left:5},ute={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:J5e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},eVe=T.forwardRef(function(e,n){var r,i=Sr(e.categoricalChartProps,ute),{layout:a}=i,s=Q5e(i,X5e),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(ste,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},T.createElement(zee,{chartData:i.data}),T.createElement(ote,{layout:a,margin:i.margin}),T.createElement(lte,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(Y5e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),T.createElement(cte,$N({},s,{ref:n})))});function J9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(n),!0).forEach(function(r){tVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tVe(t,e,n){return(e=nVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nVe(t){var e=rVe(t,"string");return typeof e=="symbol"?e:e+""}function rVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iVe=["item"],aVe=e8(e8({},ute),{},{layout:"centric",startAngle:0,endAngle:360}),sVe=T.forwardRef((t,e)=>{var n=Sr(t,aVe);return T.createElement(eVe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:iVe,tooltipPayloadSearcher:aee,categoricalChartProps:n,ref:e})});const oVe=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],lVe=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function cVe(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const jM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),wS=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),dte=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:wS(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:wS(i)})]})]})},uVe=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},dVe=()=>{const t=xa(),[e,n]=T.useState("totals"),[r,i]=T.useState("12m"),{currentMonth:a}=gt(),s=gt(b=>b.fetchMonthData),o=T.useMemo(()=>cVe(),[]),c=T.useRef(new Set);T.useEffect(()=>{const b=LD(r,a),x=gt.getState(),w=b.filter(A=>{if(c.current.has(A)||x.areAllTransactionsLoaded)return!1;const I=x.incomeSources[A]!==void 0,N=x.loadedTransactionMonths.includes(A);return!I||!N});if(w.length===0)return;w.forEach(A=>c.current.add(A)),(async()=>{for(const A of w)try{await s(A)}catch(I){console.error(`Failed to fetch data for month ${A}:`,I),c.current.delete(A)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=S_e(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(Ps,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Charts"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:oVe.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[lVe.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(fVe,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(hVe,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(pVe,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(gVe,{data:g.data})]})]})},fVe=({items:t,total:e})=>{const[n,r]=T.useState(null);if(t.length===0)return m.jsx(hE,{message:"No spending data for this time period."});const i=n!==null?t[n]:null,a=i&&e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(ty,{width:"100%",height:280,children:m.jsx(sVe,{children:m.jsx(Dee,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,onMouseEnter:(s,o)=>r(o),onMouseLeave:()=>r(null),onClick:(s,o)=>r(n===o?null:o),children:t.map((s,o)=>m.jsx(my,{fill:s.color,opacity:n===null||n===o?1:.5,style:{cursor:"pointer"}},o))})})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-0",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:jM(e)})]})]}),m.jsx("div",{className:"min-h-[48px] flex items-center justify-center mt-1",children:i?m.jsxs("div",{className:"flex items-center gap-2.5 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-2 shadow-sm text-sm",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName}),m.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:""}),m.jsx("span",{className:"text-zinc-700 dark:text-zinc-300",children:wS(i.amount)}),m.jsxs("span",{className:"text-zinc-500 dark:text-zinc-400",children:["(",a,"%)"]})]}):m.jsx("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"Tap a slice to see details"})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(s=>{const o=e>0?(s.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:s.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[o,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:wS(s.amount)})]})]},s.categoryId)})})]})]})},hVe=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(hE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(ty,{width:"100%",height:300,children:m.jsxs(fE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(vy,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(by,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(xy,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(oE,{cursor:!1,content:a=>m.jsx(dte,{...a,colorMap:n,nameMap:r})}),m.jsx(IM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${jM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(sf,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(fte,{keys:e,colorMap:n,nameMap:r})]}),pVe=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=T.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(hE,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(ty,{width:"100%",height:300,children:m.jsxs(fE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(vy,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(by,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(xy,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(oE,{cursor:!1,content:a=>m.jsx(dte,{...a,colorMap:n,nameMap:i})}),m.jsx(IM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${jM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(sf,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(fte,{keys:e,colorMap:n,nameMap:i})]})},gVe=({data:t})=>{if(t.length===0)return m.jsx(hE,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(ty,{width:"100%",height:300,children:m.jsxs(fE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(vy,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(by,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(xy,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(oE,{content:uVe,cursor:!1}),m.jsx(sf,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(sf,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},fte=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),hE=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(Dw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),mVe=()=>{const t=xa(),{envelopes:e,categories:n,currentMonth:r,incomeSources:i,allocations:a,transactions:s}=gt(),o=T.useMemo(()=>{const w={};return e.forEach(S=>{S.categoryId&&(w[S.id]=S.categoryId)}),w},[e]),[c,u]=T.useState("overview"),f=i[r]||[],h=a[r]||[],g={incomeSources:f,envelopeAllocations:h.reduce((w,S)=>(w[S.envelopeId]=S,w),{})},v=T.useMemo(()=>{if(!g)return[];const w=s.filter(S=>S.month===r&&S.type==="Expense");return n.map(S=>{const A=e.filter(P=>P.categoryId===S.id),I=A.reduce((P,C)=>{const R=g.envelopeAllocations[C.id];return P+(R?.budgetedAmount||0)},0),N=w.filter(P=>{const C=e.find(R=>R.id===P.envelopeId);return C?.categoryId===S.id&&!C.isPiggybank}).reduce((P,C)=>P+Math.abs(C.amount),0),O=I-N,D=I>0?N/I*100:0;return{categoryId:S.id,categoryName:S.name,budgeted:I,spent:N,remaining:O,percentUsed:D,status:O>=0?"under":"over",envelopeCount:A.length}}).filter(S=>S.budgeted>0||S.spent>0)},[n,e,g,r,s,o]),b=T.useMemo(()=>{const w=v.reduce((I,N)=>({totalBudgeted:I.totalBudgeted+N.budgeted,totalSpent:I.totalSpent+N.spent,totalRemaining:I.totalRemaining+N.remaining}),{totalBudgeted:0,totalSpent:0,totalRemaining:0}),S=f.reduce((I,N)=>I+N.amount,0),A=s.filter(I=>I.month===r&&I.type==="Expense").reduce((I,N)=>I+Math.abs(N.amount),0);return{...w,totalIncome:S,totalBudgeted:w.totalBudgeted,totalSpent:w.totalSpent,totalAllSpending:A,totalRemaining:S-A}},[v,f,s,r]),x=({active:w,payload:S,label:A})=>{if(w&&S&&S.length){const I=S[0].payload;return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded-lg border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white",children:A}),m.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Budgeted: $",I.budgeted.toFixed(2)]}),m.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Spent: $",I.spent.toFixed(2)]}),m.jsxs("p",{className:`text-sm font-medium ${I.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[I.remaining>=0?"Under":"Over"," by $",Math.abs(I.remaining).toFixed(2)]})]})}return null};return g?m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(Ps,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Budget Breakdown"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:[m.jsx("button",{onClick:()=>u("overview"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${c==="overview"?"bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400"}`,children:"Overview"}),m.jsx("button",{onClick:()=>u("details"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${c==="details"?"bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400"}`,children:"Details"})]})})]}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(Ch,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Income"}),m.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:["$",(b.totalIncome||0).toFixed(0)]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(jc,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Spent"}),m.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:["$",b.totalAllSpending.toFixed(0)]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(due,{className:`w-5 h-5 mx-auto mb-1 ${b.totalRemaining>=0?"text-green-500":"text-red-500"}`}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Remaining"}),m.jsxs("p",{className:`text-lg font-bold ${b.totalRemaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",b.totalRemaining.toFixed(0)]})]})]}),c==="overview"?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Budget vs Actual"}),m.jsx(ty,{width:"100%",height:250,children:m.jsxs(fE,{data:v,children:[m.jsx(vy,{strokeDasharray:"3 3",className:"opacity-30"}),m.jsx(by,{dataKey:"categoryName",tick:{fontSize:10},angle:-45,textAnchor:"end",height:60}),m.jsx(xy,{tick:{fontSize:10}}),m.jsx(oE,{content:m.jsx(x,{}),cursor:!1}),m.jsx(WQ,{}),m.jsx(sf,{dataKey:"budgeted",fill:"#3b82f6",name:"Budgeted"}),m.jsx(sf,{dataKey:"spent",fill:"#f59e0b",name:"Spent"})]})})]})}):m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 p-4 pb-2",children:"Category Details"}),m.jsx("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-700",children:v.map(w=>m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:w.categoryName}),m.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="under"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:w.status==="under"?"Under Budget":"Over Budget"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white",children:["$",w.budgeted.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Spent:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white",children:["$",w.spent.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Remaining:"}),m.jsxs("span",{className:`font-medium ${w.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[w.remaining>=0?"+":"","$",w.remaining.toFixed(2)]})]})]}),m.jsxs("div",{className:"mt-3",children:[m.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full transition-all ${w.percentUsed>100?"bg-red-500":w.percentUsed>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(w.percentUsed,100)}%`}})}),m.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[w.percentUsed.toFixed(1),"% of budget used"]})]})]},w.categoryId))})]})]})]}):m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsx("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(Ps,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Budget Breakdown"})]})}),m.jsx("div",{className:"p-4",children:m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4",children:m.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200",children:["No budget data found for ",r,". Create a budget to see your breakdown."]})})})]})},oo=({children:t})=>m.jsx(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),vVe=()=>{const t=js();return m.jsx(lr,{mode:"wait",children:m.jsxs(sle,{location:t,children:[m.jsx(fs,{path:"/",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(d_e,{})})})}),m.jsx(fs,{path:"/envelope/:id",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(v_e,{})})})}),m.jsx(fs,{path:"/add-envelope",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(C_e,{})})})}),m.jsx(fs,{path:"/add-transaction",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(fX,{})})})}),m.jsx(fs,{path:"/transactions",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(tEe,{})})})}),m.jsx(fs,{path:"/settings",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(T_e,{})})})}),m.jsx(fs,{path:"/settings/categories",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(k_e,{})})})}),m.jsx(fs,{path:"/verify-email",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(gH,{})})})}),m.jsx(fs,{path:"/analytics",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(dVe,{})})})}),m.jsx(fs,{path:"/budget-breakdown",element:m.jsx(oo,{children:m.jsx(Mi,{children:m.jsx(mVe,{})})})})]},t.pathname)})},yVe=()=>{const t=xa(),{envelopes:e,appSettings:n}=gt(),r=T.useRef(!1);return T.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=_t(rt,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=ru(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await ca(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await ca(a);const f=await $P(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null},qN=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:Ch,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:rp,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:jc,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:cf,color:"pink",encouragement:"You did it! Your budget is set up!"}],$x=qN.length,t8={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function bVe(){const[t,e]=T.useState(!1);return T.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const xVe=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(bt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},wVe=()=>{const t=gt(C=>C.guidedTutorialStep),e=gt(C=>C.skipGuidedTutorial),n=gt(C=>C.advanceGuidedTutorial),r=gt(C=>C.incomeSources),i=gt(C=>C.currentMonth),a=gt(C=>C.envelopes),s=gt(C=>C.allocations),o=T.useMemo(()=>a.filter(C=>C.isPiggybank),[a]),c=bVe(),[u,f]=T.useState(null),[h,g]=T.useState(!1),[v,b]=T.useState(!1),x=T.useRef(null),w=t,S=w!==null&&w>=0&&w<$x,A=S?qN[w]:null,I=!c&&!h&&!v,N=T.useCallback(()=>{if(!A){f(null);return}const C=document.getElementById(A.targetId);f(C?C.getBoundingClientRect():null)},[A]);if(T.useEffect(()=>{N();const C=setInterval(N,500);return window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{clearInterval(C),window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[N]),T.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!S||!A)return null;const O=t8[A.color]||t8.blue,D=A.icon,P=(w+1)/$x*100;return m.jsxs(m.Fragment,{children:[I&&m.jsx(xVe,{targetRect:u,visible:!0}),m.jsxs(lr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${O.bg} border ${O.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(P),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${O.progressBg}`,initial:{width:`${w/$x*100}%`},animate:{width:`${P}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:qN.map((C,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?O.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},C.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${O.bg} p-2 rounded-xl border ${O.border} flex-shrink-0`,children:m.jsx(D,{className:`w-6 h-6 ${O.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",A.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:A.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(Cq,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(bt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(bt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(co,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<$x-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:A.encouragement})]})},"celebration")]}),m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(P),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function SVe(){const[t,e]=T.useState(!0),[n,r]=T.useState(!1),[i,a]=T.useState(null),{appSettings:s,isOnboardingActive:o}=gt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=nn(),{showToast:b}=vu();if(T.useEffect(()=>{const S=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(S)},[]),T.useEffect(()=>f(),[f]),T.useEffect(()=>{(async()=>{const A=new URLSearchParams(window.location.search),I=A.get("mode"),N=A.get("oobCode");if(I==="resetPassword"&&N){$.log(" Processing password reset from URL"),a(N);return}if(I==="verifyEmail"&&N){$.log(" Processing email verification from URL");try{await $ae(gi,N),$.log(" Email verification successful");const O=window.location.pathname;if(window.history.replaceState({},document.title,O),gi.currentUser){await gi.currentUser.reload(),$.log(" User reloaded after verification");const D=await Jh(()=>Promise.resolve().then(()=>rX),void 0).then(P=>P.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await D.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await gi.signOut()},2e3)}catch(O){$.error(" Email verification failed:",O),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),T.useEffect(()=>{const S=document.documentElement,A=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{const N=s?.theme??"system",O=A.matches;N==="dark"||N==="system"&&O?S.classList.add("dark"):S.classList.remove("dark")};if(I(),s?.theme==="system")return A.addEventListener("change",I),()=>A.removeEventListener("change",I)},[s]),T.useEffect(()=>{const S=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":S.style.fontSize="75%";break;case"small":S.style.fontSize="87.5%";break;case"large":S.style.fontSize="112.5%";break;case"extra-large":S.style.fontSize="125%";break;default:S.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(mH,{message:"Initializing Personal Budget..."}),m.jsx(ox,{})]});if(i)return m.jsxs(Mi,{children:[m.jsx(uge,{oobCode:i,onSuccess:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)},onCancel:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)}}),m.jsx(ox,{})]});if(!c)return v?m.jsxs(Mi,{children:[m.jsx(gH,{}),m.jsx(ox,{})]}):m.jsxs(Mi,{children:[m.jsx(cge,{}),m.jsx(ox,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(Mi,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(Nle,{children:[m.jsx(yVe,{}),m.jsx(vVe,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(fX,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(wVe,{}),!o&&m.jsx(obe,{onAddTransaction:()=>r(!0)})]})]})]})}nre({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});Jne.createRoot(document.getElementById("root")).render(m.jsx(T.StrictMode,{children:m.jsx(SVe,{})}));export{ht as T,rt as a,dpe as b,T5 as c,_t as d,Wr as e,sa as f,zA as g,ca as h,$ as l,ru as o,Bi as q,la as s,ad as t,fo as u,ow as w};
