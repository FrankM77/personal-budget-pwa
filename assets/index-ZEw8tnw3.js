function Dne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ml(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sA={exports:{}},fm={};var W4;function One(){if(W4)return fm;W4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return fm.Fragment=e,fm.jsx=n,fm.jsxs=n,fm}var Y4;function Rne(){return Y4||(Y4=1,sA.exports=One()),sA.exports}var m=Rne(),oA={exports:{}},lt={};var X4;function Mne(){if(X4)return lt;X4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,Z,te){this.props=U,this.context=Z,this.refs=w,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function P(U,Z,te){this.props=U,this.context=Z,this.refs=w,this.updater=te||b}var N=P.prototype=new T;N.constructor=P,x(N,S.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function O(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(U,Z,te){var K=te.ref;return{$$typeof:t,type:U,key:Z,ref:K!==void 0?K:null,props:te}}function M(U,Z){return R(U.type,Z,U.props)}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return Z[te]})}var L=/\/+/g;function W(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):Z.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(O,O):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,Z,te,K,ue){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,G(oe(U._payload),Z,te,K,ue)}}if(oe)return ue=ue(U),oe=K===""?"."+W(U,0):K,D(ue)?(te="",oe!=null&&(te=oe.replace(L,"$&/")+"/"),G(ue,Z,te,"",function(Ae){return Ae})):ue!=null&&(V(ue)&&(ue=M(ue,te+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(L,"$&/")+"/")+oe)),Z.push(ue)),1;oe=0;var Se=K===""?".":K+":";if(D(U))for(var se=0;se<U.length;se++)K=U[se],ie=Se+W(K,se),oe+=G(K,Z,te,ie,ue);else if(se=v(U),typeof se=="function")for(U=se.call(U),se=0;!(K=U.next()).done;)K=K.value,ie=Se+W(K,se++),oe+=G(K,Z,te,ie,ue);else if(ie==="object"){if(typeof U.then=="function")return G(Q(U),Z,te,K,ue);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Y(U,Z,te){if(U==null)return U;var K=[],ue=0;return G(U,K,"","",function(ie){return Z.call(te,ie,ue++)}),K}function J(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var ee=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},X={map:Y,forEach:function(U,Z,te){Y(U,function(){Z.apply(this,arguments)},te)},count:function(U){var Z=0;return Y(U,function(){Z++}),Z},toArray:function(U){return Y(U,function(Z){return Z})||[]},only:function(U){if(!V(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=h,lt.Children=X,lt.Component=S,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=P,lt.StrictMode=r,lt.Suspense=c,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return I.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,Z,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var K=x({},U.props),ue=U.key;if(Z!=null)for(ie in Z.key!==void 0&&(ue=""+Z.key),Z)!C.call(Z,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Z.ref===void 0||(K[ie]=Z[ie]);var ie=arguments.length-2;if(ie===1)K.children=te;else if(1<ie){for(var oe=Array(ie),Se=0;Se<ie;Se++)oe[Se]=arguments[Se+2];K.children=oe}return R(U.type,ue,K)},lt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},lt.createElement=function(U,Z,te){var K,ue={},ie=null;if(Z!=null)for(K in Z.key!==void 0&&(ie=""+Z.key),Z)C.call(Z,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ue[K]=Z[K]);var oe=arguments.length-2;if(oe===1)ue.children=te;else if(1<oe){for(var Se=Array(oe),se=0;se<oe;se++)Se[se]=arguments[se+2];ue.children=Se}if(U&&U.defaultProps)for(K in oe=U.defaultProps,oe)ue[K]===void 0&&(ue[K]=oe[K]);return R(U,ie,ue)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:o,render:U}},lt.isValidElement=V,lt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:J}},lt.memo=function(U,Z){return{$$typeof:u,type:U,compare:Z===void 0?null:Z}},lt.startTransition=function(U){var Z=I.T,te={};I.T=te;try{var K=U(),ue=I.S;ue!==null&&ue(te,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(O,ee)}catch(ie){ee(ie)}finally{Z!==null&&te.types!==null&&(Z.types=te.types),I.T=Z}},lt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},lt.use=function(U){return I.H.use(U)},lt.useActionState=function(U,Z,te){return I.H.useActionState(U,Z,te)},lt.useCallback=function(U,Z){return I.H.useCallback(U,Z)},lt.useContext=function(U){return I.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,Z){return I.H.useDeferredValue(U,Z)},lt.useEffect=function(U,Z){return I.H.useEffect(U,Z)},lt.useEffectEvent=function(U){return I.H.useEffectEvent(U)},lt.useId=function(){return I.H.useId()},lt.useImperativeHandle=function(U,Z,te){return I.H.useImperativeHandle(U,Z,te)},lt.useInsertionEffect=function(U,Z){return I.H.useInsertionEffect(U,Z)},lt.useLayoutEffect=function(U,Z){return I.H.useLayoutEffect(U,Z)},lt.useMemo=function(U,Z){return I.H.useMemo(U,Z)},lt.useOptimistic=function(U,Z){return I.H.useOptimistic(U,Z)},lt.useReducer=function(U,Z,te){return I.H.useReducer(U,Z,te)},lt.useRef=function(U){return I.H.useRef(U)},lt.useState=function(U){return I.H.useState(U)},lt.useSyncExternalStore=function(U,Z,te){return I.H.useSyncExternalStore(U,Z,te)},lt.useTransition=function(){return I.H.useTransition()},lt.version="19.2.4",lt}var Q4;function Mp(){return Q4||(Q4=1,oA.exports=Mne()),oA.exports}var A=Mp();const il=Ml(A),jne=Dne({__proto__:null,default:il},[A]);var lA={exports:{}},hm={},cA={exports:{}},uA={};var Z4;function zne(){return Z4||(Z4=1,(function(t){function e(G,Y){var J=G.length;G.push(Y);e:for(;0<J;){var ee=J-1>>>1,X=G[ee];if(0<i(X,Y))G[ee]=Y,G[J]=X,J=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],J=G.pop();if(J!==Y){G[0]=J;e:for(var ee=0,X=G.length,U=X>>>1;ee<U;){var Z=2*(ee+1)-1,te=G[Z],K=Z+1,ue=G[K];if(0>i(te,J))K<X&&0>i(ue,te)?(G[ee]=ue,G[K]=J,ee=K):(G[ee]=te,G[Z]=J,ee=Z);else if(K<X&&0>i(ue,J))G[ee]=ue,G[K]=J,ee=K;else break e}}return Y}function i(G,Y){var J=G.sortIndex-Y.sortIndex;return J!==0?J:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function N(G){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function D(G){if(x=!1,N(G),!b)if(n(c)!==null)b=!0,O||(O=!0,z());else{var Y=n(u);Y!==null&&Q(D,Y.startTime-G)}}var O=!1,I=-1,C=5,R=-1;function M(){return w?!0:!(t.unstable_now()-R<C)}function V(){if(w=!1,O){var G=t.unstable_now();R=G;var Y=!0;try{e:{b=!1,x&&(x=!1,T(I),I=-1),v=!0;var J=g;try{t:{for(N(G),h=n(c);h!==null&&!(h.expirationTime>G&&M());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,g=h.priorityLevel;var X=ee(h.expirationTime<=G);if(G=t.unstable_now(),typeof X=="function"){h.callback=X,N(G),Y=!0;break t}h===n(c)&&r(c),N(G)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Q(D,U.startTime-G),Y=!1}}break e}finally{h=null,g=J,v=!1}Y=void 0}}finally{Y?z():O=!1}}}var z;if(typeof P=="function")z=function(){P(V)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,W=L.port2;L.port1.onmessage=V,z=function(){W.postMessage(null)}}else z=function(){S(V,0)};function Q(G,Y){I=S(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var J=g;g=Y;try{return G()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=g;g=G;try{return Y()}finally{g=J}},t.unstable_scheduleCallback=function(G,Y,J){var ee=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,G){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=J+X,G={id:f++,callback:Y,priorityLevel:G,startTime:J,expirationTime:X,sortIndex:-1},J>ee?(G.sortIndex=J,e(u,G),n(c)===null&&G===n(u)&&(x?(T(I),I=-1):x=!0,Q(D,J-ee))):(G.sortIndex=X,e(c,G),b||v||(b=!0,O||(O=!0,z()))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var Y=g;return function(){var J=g;g=Y;try{return G.apply(this,arguments)}finally{g=J}}}})(uA)),uA}var J4;function Lne(){return J4||(J4=1,cA.exports=zne()),cA.exports}var dA={exports:{}},Jr={};var eL;function Vne(){if(eL)return Jr;eL=1;var t=Mp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},Jr.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},Jr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Jr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Jr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Jr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Jr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Jr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Jr.requestFormReset=function(c){r.d.r(c)},Jr.unstable_batchedUpdates=function(c,u){return c(u)},Jr.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},Jr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Jr.version="19.2.4",Jr}var tL;function q9(){if(tL)return dA.exports;tL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dA.exports=Vne(),dA.exports}var nL;function Bne(){if(nL)return hm;nL=1;var t=Lne(),e=Mp(),n=q9();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var B=!1,q=E.child;q;){if(q===p){B=!0,p=E,y=k;break}if(q===y){B=!0,y=E,p=k;break}q=q.sibling}if(!B){for(q=k.child;q;){if(q===p){B=!0,p=k,y=E;break}if(q===y){B=!0,y=k,p=E;break}q=q.sibling}if(!B)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),P=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var L=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===L?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case P:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case N:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case C:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var Q=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ee=[],X=-1;function U(l){return{current:l}}function Z(l){0>X||(l.current=ee[X],ee[X]=null,X--)}function te(l,d){X++,ee[X]=l.current,l.current=d}var K=U(null),ue=U(null),ie=U(null),oe=U(null);function Se(l,d){switch(te(ie,d),te(ue,l),te(K,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?v4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=v4(d),l=y4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(K),te(K,l)}function se(){Z(K),Z(ue),Z(ie)}function Ae(l){l.memoizedState!==null&&te(oe,l);var d=K.current,p=y4(d,l.type);d!==p&&(te(ue,l),te(K,p))}function ve(l){ue.current===l&&(Z(K),Z(ue)),oe.current===l&&(Z(oe),lm._currentValue=J)}var ne,Pe;function be(l){if(ne===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);ne=d&&d[1]||"",Pe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+Pe}var _e=!1;function De(l,d){if(!l||_e)return"";_e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var ye=we}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(we){ye=we}l.call(Ce.prototype)}}else{try{throw Error()}catch(we){ye=we}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&ye&&typeof we.stack=="string")return[we.stack,ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),B=k[0],q=k[1];if(B&&q){var re=B.split(`
`),ge=q.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ge.length&&!ge[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===ge.length)for(y=re.length-1,E=ge.length-1;1<=y&&0<=E&&re[y]!==ge[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==ge[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==ge[E]){var Te=`
`+re[y].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=y&&0<=E);break}}}finally{_e=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?be(p):""}function Oe(l,d){switch(l.tag){case 26:case 27:case 5:return be(l.type);case 16:return be("Lazy");case 13:return l.child!==d&&d!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return De(l.type,!1);case 11:return De(l.type.render,!1);case 1:return De(l.type,!0);case 31:return be("Activity");default:return""}}function Ye(l){try{var d="",p=null;do d+=Oe(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ve=Object.prototype.hasOwnProperty,it=t.unstable_scheduleCallback,Vt=t.unstable_cancelCallback,Bn=t.unstable_shouldYield,xn=t.unstable_requestPaint,yt=t.unstable_now,Bt=t.unstable_getCurrentPriorityLevel,Qr=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,gt=t.unstable_NormalPriority,ki=t.unstable_LowPriority,Zr=t.unstable_IdlePriority,In=t.log,Tr=t.unstable_setDisableYieldValue,Fn=null,wn=null;function Ar(l){if(typeof In=="function"&&Tr(l),wn&&typeof wn.setStrictMode=="function")try{wn.setStrictMode(Fn,l)}catch{}}var Ft=Math.clz32?Math.clz32:Ja,ur=Math.log,di=Math.LN2;function Ja(l){return l>>>=0,l===0?32:31-(ur(l)/di|0)|0}var xt=256,Sn=262144,_n=4194304;function Yi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function xa(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=Yi(y):(B&=q,B!==0?E=Yi(B):p||(p=q&~l,p!==0&&(E=Yi(p))))):(q=y&~k,q!==0?E=Yi(q):B!==0?E=Yi(B):p||(p=y&~l,p!==0&&(E=Yi(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function fi(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function uE(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function py(){var l=_n;return _n<<=1,(_n&62914560)===0&&(_n=4194304),l}function Ms(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function wu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function dE(l,d,p,y,E,k){var B=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,re=l.expirationTimes,ge=l.hiddenUpdates;for(p=B&~p;0<p;){var Te=31-Ft(p),Ce=1<<Te;q[Te]=0,re[Te]=-1;var ye=ge[Te];if(ye!==null)for(ge[Te]=null,Te=0;Te<ye.length;Te++){var we=ye[Te];we!==null&&(we.lane&=-536870913)}p&=~Ce}y!==0&&Su(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(B&~d))}function Su(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-Ft(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function hg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-Ft(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function pg(l,d){var p=d&-d;return p=(p&42)!==0?1:_u(p),(p&(l.suspendedLanes|d))!==0?0:p}function _u(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function gy(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:F4(l.type))}function es(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var ts=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ts,kr="__reactProps$"+ts,js="__reactContainer$"+ts,mf="__reactEvents$"+ts,fE="__reactListeners$"+ts,my="__reactHandles$"+ts,vy="__reactResources$"+ts,zs="__reactMarker$"+ts;function vf(l){delete l[Wn],delete l[kr],delete l[mf],delete l[fE],delete l[my]}function Ls(l){var d=l[Wn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[js]||p[Wn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=T4(l);l!==null;){if(p=l[Wn])return p;l=T4(l)}return d}l=p,p=l.parentNode}return null}function wa(l){if(l=l[Wn]||l[js]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Xi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Vs(l){var d=l[vy];return d||(d=l[vy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Yn(l){l[zs]=!0}var gg=new Set,mg={};function Bs(l,d){Fs(l,d),Fs(l+"Capture",d)}function Fs(l,d){for(mg[l]=d,l=0;l<d.length;l++)gg.add(d[l])}var vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yg={},bg={};function yy(l){return Ve.call(bg,l)?!0:Ve.call(yg,l)?!1:vg.test(l)?bg[l]=!0:(yg[l]=!0,!1)}function yf(l,d,p){if(yy(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Qi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Xn(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function Cr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ql(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function xg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(B){p=""+B,k.call(this,B)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Ut(l){if(!l._valueTracker){var d=ql(l)?"checked":"value";l._valueTracker=xg(l,d,""+l[d])}}function Eu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=ql(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Us(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Tu=/[\n"\\]/g;function Ci(l){return l.replace(Tu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function bf(l,d,p,y,E,k,B,q){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),d!=null?B==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Cr(d)):l.value!==""+Cr(d)&&(l.value=""+Cr(d)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),d!=null?wg(l,B,Cr(d)):p!=null?wg(l,B,Cr(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Cr(q):l.removeAttribute("name")}function by(l,d,p,y,E,k,B,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){Ut(l);return}p=p!=null?""+Cr(p):"",d=d!=null?""+Cr(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),Ut(l)}function wg(l,d,p){d==="number"&&Us(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Gl(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Cr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function xy(l,d,p){if(d!=null&&(d=""+Cr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Cr(p):""}function Hl(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Q(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Cr(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),Ut(l)}function Ii(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var wy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sg(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||wy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function _g(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&Sg(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&Sg(l,k,d[k])}function xf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wf(l){return Kl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ns(){}var Eg=null;function Sa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Wl=null,$s=null;function Au(l){var d=wa(l);if(d&&(l=d.stateNode)){var p=l[kr]||null;e:switch(l=d.stateNode,d.type){case"input":if(bf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ci(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[kr]||null;if(!E)throw Error(r(90));bf(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&Eu(y)}break e;case"textarea":xy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Gl(l,!!p.multiple,d,!1)}}}var Sf=!1;function Yl(l,d,p){if(Sf)return l(d,p);Sf=!0;try{var y=l(d);return y}finally{if(Sf=!1,(Wl!==null||$s!==null)&&(gb(),Wl&&(d=Wl,l=$s,$s=Wl=null,Au(d),l)))for(d=0;d<l.length;d++)Au(l[d])}}function rs(l,d){var p=l.stateNode;if(p===null)return null;var y=p[kr]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=!1;if(_a)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){ku=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{ku=!1}var qs=null,Tg=null,Cu=null;function Ag(){if(Cu)return Cu;var l,d=Tg,p=d.length,y,E="value"in qs?qs.value:qs.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var B=p-l;for(y=1;y<=B&&d[p-y]===E[k-y];y++);return Cu=E.slice(l,1<y?1-y:void 0)}function Iu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function zo(){return!0}function is(){return!1}function Vr(l){function d(p,y,E,k,B){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=B,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?zo:is,this.isPropagationStopped=is,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),d}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=Vr(Lo),Xl=h({},Lo,{view:0,detail:0}),kg=Vr(Xl),Ql,_f,Hs,Ef=h({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Hs&&(Hs&&l.type==="mousemove"?(Ql=l.screenX-Hs.screenX,_f=l.screenY-Hs.screenY):_f=Ql=0,Hs=l),Ql)},movementY:function(l){return"movementY"in l?l.movementY:_f}}),Cg=Vr(Ef),Pu=h({},Ef,{dataTransfer:0}),_y=Vr(Pu),Ey=h({},Xl,{relatedTarget:0}),Nu=Vr(Ey),Ig=h({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ty=Vr(Ig),Tf=h({},Lo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ay=Vr(Tf),ky=h({},Lo,{data:0}),Ks=Vr(ky),Cy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ny(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Py[l])?!!d[l]:!1}function Zl(){return Ny}var hi=h({},Xl,{key:function(l){if(l.key){var d=Cy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Iu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Iy[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(l){return l.type==="keypress"?Iu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Iu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Dy=Vr(hi),Oy=h({},Ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=Vr(Oy),_=h({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),j=Vr(_),F=h({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Vr(F),he=h({},Ef,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Vr(he),je=h({},Lo,{newState:0,oldState:0}),ct=Vr(je),Un=[9,13,27,32],Rt=_a&&"CompositionEvent"in window,gn=null;_a&&"documentMode"in document&&(gn=document.documentMode);var Ea=_a&&"TextEvent"in window&&!gn,Ws=_a&&(!Rt||gn&&8<gn&&11>=gn),as=" ",ss=!1;function Du(l,d){switch(l){case"keyup":return Un.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Af(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var kf=!1;function nte(l,d){switch(l){case"compositionend":return Af(d);case"keypress":return d.which!==32?null:(ss=!0,as);case"textInput":return l=d.data,l===as&&ss?null:l;default:return null}}function rte(l,d){if(kf)return l==="compositionend"||!Rt&&Du(l,d)?(l=Ag(),Cu=Tg=qs=null,kf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ws&&d.locale!=="ko"?null:d.data;default:return null}}var ite={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ite[l.type]:d==="textarea"}function IM(l,d,p,y){Wl?$s?$s.push(y):$s=[y]:Wl=y,d=Sb(d,"onChange"),0<d.length&&(p=new Gs("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Pg=null,Ng=null;function ate(l){d4(l,0)}function Ry(l){var d=Xi(l);if(Eu(d))return l}function PM(l,d){if(l==="change")return d}var NM=!1;if(_a){var hE;if(_a){var pE="oninput"in document;if(!pE){var DM=document.createElement("div");DM.setAttribute("oninput","return;"),pE=typeof DM.oninput=="function"}hE=pE}else hE=!1;NM=hE&&(!document.documentMode||9<document.documentMode)}function OM(){Pg&&(Pg.detachEvent("onpropertychange",RM),Ng=Pg=null)}function RM(l){if(l.propertyName==="value"&&Ry(Ng)){var d=[];IM(d,Ng,l,Sa(l)),Yl(ate,d)}}function ste(l,d,p){l==="focusin"?(OM(),Pg=d,Ng=p,Pg.attachEvent("onpropertychange",RM)):l==="focusout"&&OM()}function ote(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ry(Ng)}function lte(l,d){if(l==="click")return Ry(d)}function cte(l,d){if(l==="input"||l==="change")return Ry(d)}function ute(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Zi=typeof Object.is=="function"?Object.is:ute;function Dg(l,d){if(Zi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Ve.call(d,E)||!Zi(l[E],d[E]))return!1}return!0}function MM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function jM(l,d){var p=MM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=MM(p)}}function zM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?zM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function LM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Us(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Us(l.document)}return d}function gE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var dte=_a&&"documentMode"in document&&11>=document.documentMode,Cf=null,mE=null,Og=null,vE=!1;function VM(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;vE||Cf==null||Cf!==Us(y)||(y=Cf,"selectionStart"in y&&gE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Og&&Dg(Og,y)||(Og=y,y=Sb(mE,"onSelect"),0<y.length&&(d=new Gs("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Cf)))}function Ou(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var If={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionrun:Ou("Transition","TransitionRun"),transitionstart:Ou("Transition","TransitionStart"),transitioncancel:Ou("Transition","TransitionCancel"),transitionend:Ou("Transition","TransitionEnd")},yE={},BM={};_a&&(BM=document.createElement("div").style,"AnimationEvent"in window||(delete If.animationend.animation,delete If.animationiteration.animation,delete If.animationstart.animation),"TransitionEvent"in window||delete If.transitionend.transition);function Ru(l){if(yE[l])return yE[l];if(!If[l])return l;var d=If[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in BM)return yE[l]=d[p];return l}var FM=Ru("animationend"),UM=Ru("animationiteration"),$M=Ru("animationstart"),fte=Ru("transitionrun"),hte=Ru("transitionstart"),pte=Ru("transitioncancel"),qM=Ru("transitionend"),GM=new Map,bE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bE.push("scrollEnd");function os(l,d){GM.set(l,d),Bs(d,[l])}var My=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ta=[],Pf=0,xE=0;function jy(){for(var l=Pf,d=xE=Pf=0;d<l;){var p=Ta[d];Ta[d++]=null;var y=Ta[d];Ta[d++]=null;var E=Ta[d];Ta[d++]=null;var k=Ta[d];if(Ta[d++]=null,y!==null&&E!==null){var B=y.pending;B===null?E.next=E:(E.next=B.next,B.next=E),y.pending=E}k!==0&&HM(p,E,k)}}function zy(l,d,p,y){Ta[Pf++]=l,Ta[Pf++]=d,Ta[Pf++]=p,Ta[Pf++]=y,xE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function wE(l,d,p,y){return zy(l,d,p,y),Ly(l)}function Mu(l,d){return zy(l,null,null,d),Ly(l)}function HM(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-Ft(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Ly(l){if(50<tm)throw tm=0,PT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Nf={};function gte(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(l,d,p,y){return new gte(l,d,p,y)}function SE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Bo(l,d){var p=l.alternate;return p===null?(p=Ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function KM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Vy(l,d,p,y,E,k){var B=0;if(y=l,typeof l=="function")SE(l)&&(B=1);else if(typeof l=="string")B=xne(l,p,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Ji(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return ju(p.children,E,k,d);case w:B=8,E|=24;break;case S:return l=Ji(12,p,d,E|2),l.elementType=S,l.lanes=k,l;case D:return l=Ji(13,p,d,E),l.elementType=D,l.lanes=k,l;case O:return l=Ji(19,p,d,E),l.elementType=O,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:B=10;break e;case T:B=9;break e;case N:B=11;break e;case I:B=14;break e;case C:B=16,y=null;break e}B=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=Ji(B,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function ju(l,d,p,y){return l=Ji(7,l,y,d),l.lanes=p,l}function _E(l,d,p){return l=Ji(6,l,null,d),l.lanes=p,l}function WM(l){var d=Ji(18,null,null,0);return d.stateNode=l,d}function EE(l,d,p){return d=Ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var YM=new WeakMap;function Aa(l,d){if(typeof l=="object"&&l!==null){var p=YM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ye(d)},YM.set(l,d),d)}return{value:l,source:d,stack:Ye(d)}}var Df=[],Of=0,By=null,Rg=0,ka=[],Ca=0,Jl=null,Ys=1,Xs="";function Fo(l,d){Df[Of++]=Rg,Df[Of++]=By,By=l,Rg=d}function XM(l,d,p){ka[Ca++]=Ys,ka[Ca++]=Xs,ka[Ca++]=Jl,Jl=l;var y=Ys;l=Xs;var E=32-Ft(y)-1;y&=~(1<<E),p+=1;var k=32-Ft(d)+E;if(30<k){var B=E-E%5;k=(y&(1<<B)-1).toString(32),y>>=B,E-=B,Ys=1<<32-Ft(d)+E|p<<E|y,Xs=k+l}else Ys=1<<k|p<<E|y,Xs=l}function TE(l){l.return!==null&&(Fo(l,1),XM(l,1,0))}function AE(l){for(;l===By;)By=Df[--Of],Df[Of]=null,Rg=Df[--Of],Df[Of]=null;for(;l===Jl;)Jl=ka[--Ca],ka[Ca]=null,Xs=ka[--Ca],ka[Ca]=null,Ys=ka[--Ca],ka[Ca]=null}function QM(l,d){ka[Ca++]=Ys,ka[Ca++]=Xs,ka[Ca++]=Jl,Ys=d.id,Xs=d.overflow,Jl=l}var Br=null,cn=null,Ct=!1,ec=null,Ia=!1,kE=Error(r(519));function tc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mg(Aa(d,l)),kE}function ZM(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Wn]=l,d[kr]=y,p){case"dialog":St("cancel",d),St("close",d);break;case"iframe":case"object":case"embed":St("load",d);break;case"video":case"audio":for(p=0;p<rm.length;p++)St(rm[p],d);break;case"source":St("error",d);break;case"img":case"image":case"link":St("error",d),St("load",d);break;case"details":St("toggle",d);break;case"input":St("invalid",d),by(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":St("invalid",d);break;case"textarea":St("invalid",d),Hl(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||g4(d.textContent,p)?(y.popover!=null&&(St("beforetoggle",d),St("toggle",d)),y.onScroll!=null&&St("scroll",d),y.onScrollEnd!=null&&St("scrollend",d),y.onClick!=null&&(d.onclick=ns),d=!0):d=!1,d||tc(l,!0)}function JM(l){for(Br=l.return;Br;)switch(Br.tag){case 5:case 31:case 13:Ia=!1;return;case 27:case 3:Ia=!0;return;default:Br=Br.return}}function Rf(l){if(l!==Br)return!1;if(!Ct)return JM(l),Ct=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||GT(l.type,l.memoizedProps)),p=!p),p&&cn&&tc(l),JM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=E4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=E4(l)}else d===27?(d=cn,gc(l.type)?(l=XT,XT=null,cn=l):cn=d):cn=Br?Na(l.stateNode.nextSibling):null;return!0}function zu(){cn=Br=null,Ct=!1}function CE(){var l=ec;return l!==null&&(Oi===null?Oi=l:Oi.push.apply(Oi,l),ec=null),l}function Mg(l){ec===null?ec=[l]:ec.push(l)}var IE=U(null),Lu=null,Uo=null;function nc(l,d,p){te(IE,d._currentValue),d._currentValue=p}function $o(l){l._currentValue=IE.current,Z(IE)}function PE(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function NE(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var B=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var re=0;re<d.length;re++)if(q.context===d[re]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),PE(k.return,p,l),y||(B=null);break e}k=q.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(r(341));B.lanes|=p,k=B.alternate,k!==null&&(k.lanes|=p),PE(B,p,l),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===l){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function Mf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var q=E.type;Zi(E.pendingProps.value,B.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(B=E.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(lm):l=[lm])}E=E.return}l!==null&&NE(d,l,p,y),d.flags|=262144}function Fy(l){for(l=l.firstContext;l!==null;){if(!Zi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Vu(l){Lu=l,Uo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Fr(l){return ej(Lu,l)}function Uy(l,d){return Lu===null&&Vu(l),ej(l,d)}function ej(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Uo===null){if(l===null)throw Error(r(308));Uo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Uo=Uo.next=d;return p}var mte=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},vte=t.unstable_scheduleCallback,yte=t.unstable_NormalPriority,Qn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function DE(){return{controller:new mte,data:new Map,refCount:0}}function jg(l){l.refCount--,l.refCount===0&&vte(yte,function(){l.controller.abort()})}var zg=null,OE=0,jf=0,zf=null;function bte(l,d){if(zg===null){var p=zg=[];OE=0,jf=jT(),zf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return OE++,d.then(tj,tj),d}function tj(){if(--OE===0&&zg!==null){zf!==null&&(zf.status="fulfilled");var l=zg;zg=null,jf=0,zf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function xte(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var nj=G.S;G.S=function(l,d){Vz=yt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&bte(l,d),nj!==null&&nj(l,d)};var Bu=U(null);function RE(){var l=Bu.current;return l!==null?l:rn.pooledCache}function $y(l,d){d===null?te(Bu,Bu.current):te(Bu,d.pool)}function rj(){var l=RE();return l===null?null:{parent:Qn._currentValue,pool:l}}var Lf=Error(r(460)),ME=Error(r(474)),qy=Error(r(542)),Gy={then:function(){}};function ij(l){return l=l.status,l==="fulfilled"||l==="rejected"}function aj(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(ns,ns),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,oj(l),l;default:if(typeof d.status=="string")d.then(ns,ns);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,oj(l),l}throw Uu=d,Lf}}function Fu(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Uu=p,Lf):p}}var Uu=null;function sj(){if(Uu===null)throw Error(r(459));var l=Uu;return Uu=null,l}function oj(l){if(l===Lf||l===qy)throw Error(r(483))}var Vf=null,Lg=0;function Hy(l){var d=Lg;return Lg+=1,Vf===null&&(Vf=[]),aj(Vf,l,d)}function Vg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Ky(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function lj(l){function d(de,ce){if(l){var pe=de.deletions;pe===null?(de.deletions=[ce],de.flags|=16):pe.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)d(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=Bo(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,pe){return de.index=pe,l?(pe=de.alternate,pe!==null?(pe=pe.index,pe<ce?(de.flags|=67108866,ce):pe):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function B(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,pe,ke){return ce===null||ce.tag!==6?(ce=_E(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function re(de,ce,pe,ke){var Je=pe.type;return Je===x?Te(de,ce,pe.props.children,ke,pe.key):ce!==null&&(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&Fu(Je)===ce.type)?(ce=E(ce,pe.props),Vg(ce,pe),ce.return=de,ce):(ce=Vy(pe.type,pe.key,pe.props,null,de.mode,ke),Vg(ce,pe),ce.return=de,ce)}function ge(de,ce,pe,ke){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==pe.containerInfo||ce.stateNode.implementation!==pe.implementation?(ce=EE(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe.children||[]),ce.return=de,ce)}function Te(de,ce,pe,ke,Je){return ce===null||ce.tag!==7?(ce=ju(pe,de.mode,ke,Je),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function Ce(de,ce,pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=_E(""+ce,de.mode,pe),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return pe=Vy(ce.type,ce.key,ce.props,null,de.mode,pe),Vg(pe,ce),pe.return=de,pe;case b:return ce=EE(ce,de.mode,pe),ce.return=de,ce;case C:return ce=Fu(ce),Ce(de,ce,pe)}if(Q(ce)||z(ce))return ce=ju(ce,de.mode,pe,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,Hy(ce),pe);if(ce.$$typeof===P)return Ce(de,Uy(de,ce),pe);Ky(de,ce)}return null}function ye(de,ce,pe,ke){var Je=ce!==null?ce.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Je!==null?null:q(de,ce,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:return pe.key===Je?re(de,ce,pe,ke):null;case b:return pe.key===Je?ge(de,ce,pe,ke):null;case C:return pe=Fu(pe),ye(de,ce,pe,ke)}if(Q(pe)||z(pe))return Je!==null?null:Te(de,ce,pe,ke,null);if(typeof pe.then=="function")return ye(de,ce,Hy(pe),ke);if(pe.$$typeof===P)return ye(de,ce,Uy(de,pe),ke);Ky(de,pe)}return null}function we(de,ce,pe,ke,Je){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return de=de.get(pe)||null,q(ce,de,""+ke,Je);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return de=de.get(ke.key===null?pe:ke.key)||null,re(ce,de,ke,Je);case b:return de=de.get(ke.key===null?pe:ke.key)||null,ge(ce,de,ke,Je);case C:return ke=Fu(ke),we(de,ce,pe,ke,Je)}if(Q(ke)||z(ke))return de=de.get(pe)||null,Te(ce,de,ke,Je,null);if(typeof ke.then=="function")return we(de,ce,pe,Hy(ke),Je);if(ke.$$typeof===P)return we(de,ce,pe,Uy(ce,ke),Je);Ky(ce,ke)}return null}function $e(de,ce,pe,ke){for(var Je=null,Nt=null,We=ce,ft=ce=0,Tt=null;We!==null&&ft<pe.length;ft++){We.index>ft?(Tt=We,We=null):Tt=We.sibling;var Dt=ye(de,We,pe[ft],ke);if(Dt===null){We===null&&(We=Tt);break}l&&We&&Dt.alternate===null&&d(de,We),ce=k(Dt,ce,ft),Nt===null?Je=Dt:Nt.sibling=Dt,Nt=Dt,We=Tt}if(ft===pe.length)return p(de,We),Ct&&Fo(de,ft),Je;if(We===null){for(;ft<pe.length;ft++)We=Ce(de,pe[ft],ke),We!==null&&(ce=k(We,ce,ft),Nt===null?Je=We:Nt.sibling=We,Nt=We);return Ct&&Fo(de,ft),Je}for(We=y(We);ft<pe.length;ft++)Tt=we(We,de,ft,pe[ft],ke),Tt!==null&&(l&&Tt.alternate!==null&&We.delete(Tt.key===null?ft:Tt.key),ce=k(Tt,ce,ft),Nt===null?Je=Tt:Nt.sibling=Tt,Nt=Tt);return l&&We.forEach(function(xc){return d(de,xc)}),Ct&&Fo(de,ft),Je}function at(de,ce,pe,ke){if(pe==null)throw Error(r(151));for(var Je=null,Nt=null,We=ce,ft=ce=0,Tt=null,Dt=pe.next();We!==null&&!Dt.done;ft++,Dt=pe.next()){We.index>ft?(Tt=We,We=null):Tt=We.sibling;var xc=ye(de,We,Dt.value,ke);if(xc===null){We===null&&(We=Tt);break}l&&We&&xc.alternate===null&&d(de,We),ce=k(xc,ce,ft),Nt===null?Je=xc:Nt.sibling=xc,Nt=xc,We=Tt}if(Dt.done)return p(de,We),Ct&&Fo(de,ft),Je;if(We===null){for(;!Dt.done;ft++,Dt=pe.next())Dt=Ce(de,Dt.value,ke),Dt!==null&&(ce=k(Dt,ce,ft),Nt===null?Je=Dt:Nt.sibling=Dt,Nt=Dt);return Ct&&Fo(de,ft),Je}for(We=y(We);!Dt.done;ft++,Dt=pe.next())Dt=we(We,de,ft,Dt.value,ke),Dt!==null&&(l&&Dt.alternate!==null&&We.delete(Dt.key===null?ft:Dt.key),ce=k(Dt,ce,ft),Nt===null?Je=Dt:Nt.sibling=Dt,Nt=Dt);return l&&We.forEach(function(Nne){return d(de,Nne)}),Ct&&Fo(de,ft),Je}function Zt(de,ce,pe,ke){if(typeof pe=="object"&&pe!==null&&pe.type===x&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:e:{for(var Je=pe.key;ce!==null;){if(ce.key===Je){if(Je=pe.type,Je===x){if(ce.tag===7){p(de,ce.sibling),ke=E(ce,pe.props.children),ke.return=de,de=ke;break e}}else if(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&Fu(Je)===ce.type){p(de,ce.sibling),ke=E(ce,pe.props),Vg(ke,pe),ke.return=de,de=ke;break e}p(de,ce);break}else d(de,ce);ce=ce.sibling}pe.type===x?(ke=ju(pe.props.children,de.mode,ke,pe.key),ke.return=de,de=ke):(ke=Vy(pe.type,pe.key,pe.props,null,de.mode,ke),Vg(ke,pe),ke.return=de,de=ke)}return B(de);case b:e:{for(Je=pe.key;ce!==null;){if(ce.key===Je)if(ce.tag===4&&ce.stateNode.containerInfo===pe.containerInfo&&ce.stateNode.implementation===pe.implementation){p(de,ce.sibling),ke=E(ce,pe.children||[]),ke.return=de,de=ke;break e}else{p(de,ce);break}else d(de,ce);ce=ce.sibling}ke=EE(pe,de.mode,ke),ke.return=de,de=ke}return B(de);case C:return pe=Fu(pe),Zt(de,ce,pe,ke)}if(Q(pe))return $e(de,ce,pe,ke);if(z(pe)){if(Je=z(pe),typeof Je!="function")throw Error(r(150));return pe=Je.call(pe),at(de,ce,pe,ke)}if(typeof pe.then=="function")return Zt(de,ce,Hy(pe),ke);if(pe.$$typeof===P)return Zt(de,ce,Uy(de,pe),ke);Ky(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ce!==null&&ce.tag===6?(p(de,ce.sibling),ke=E(ce,pe),ke.return=de,de=ke):(p(de,ce),ke=_E(pe,de.mode,ke),ke.return=de,de=ke),B(de)):p(de,ce)}return function(de,ce,pe,ke){try{Lg=0;var Je=Zt(de,ce,pe,ke);return Vf=null,Je}catch(We){if(We===Lf||We===qy)throw We;var Nt=Ji(29,We,null,de.mode);return Nt.lanes=ke,Nt.return=de,Nt}}}var $u=lj(!0),cj=lj(!1),rc=!1;function jE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ic(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ac(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Mt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Ly(l),HM(l,null,p),d}return zy(l,y,d,p),Ly(l)}function Bg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,hg(l,p)}}function LE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var B={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=B:k=k.next=B,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var VE=!1;function Fg(){if(VE){var l=zf;if(l!==null)throw l}}function Ug(l,d,p,y){VE=!1;var E=l.updateQueue;rc=!1;var k=E.firstBaseUpdate,B=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var re=q,ge=re.next;re.next=null,B===null?k=ge:B.next=ge,B=re;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==B&&(q===null?Te.firstBaseUpdate=ge:q.next=ge,Te.lastBaseUpdate=re))}if(k!==null){var Ce=E.baseState;B=0,Te=ge=re=null,q=k;do{var ye=q.lane&-536870913,we=ye!==q.lane;if(we?(Et&ye)===ye:(y&ye)===ye){ye!==0&&ye===jf&&(VE=!0),Te!==null&&(Te=Te.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var $e=l,at=q;ye=d;var Zt=p;switch(at.tag){case 1:if($e=at.payload,typeof $e=="function"){Ce=$e.call(Zt,Ce,ye);break e}Ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=at.payload,ye=typeof $e=="function"?$e.call(Zt,Ce,ye):$e,ye==null)break e;Ce=h({},Ce,ye);break e;case 2:rc=!0}}ye=q.callback,ye!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[ye]:we.push(ye))}else we={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ge=Te=we,re=Ce):Te=Te.next=we,B|=ye;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(re=Ce),E.baseState=re,E.firstBaseUpdate=ge,E.lastBaseUpdate=Te,k===null&&(E.shared.lanes=0),uc|=B,l.lanes=B,l.memoizedState=Ce}}function uj(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function dj(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)uj(p[l],d)}var Bf=U(null),Wy=U(0);function fj(l,d){l=Zo,te(Wy,l),te(Bf,d),Zo=l|d.baseLanes}function BE(){te(Wy,Zo),te(Bf,Bf.current)}function FE(){Zo=Wy.current,Z(Bf),Z(Wy)}var ea=U(null),Pa=null;function sc(l){var d=l.alternate;te($n,$n.current&1),te(ea,l),Pa===null&&(d===null||Bf.current!==null||d.memoizedState!==null)&&(Pa=l)}function UE(l){te($n,$n.current),te(ea,l),Pa===null&&(Pa=l)}function hj(l){l.tag===22?(te($n,$n.current),te(ea,l),Pa===null&&(Pa=l)):oc()}function oc(){te($n,$n.current),te(ea,ea.current)}function ta(l){Z(ea),Pa===l&&(Pa=null),Z($n)}var $n=U(0);function Yy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||WT(p)||YT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var qo=0,ut=null,Xt=null,Zn=null,Xy=!1,Ff=!1,qu=!1,Qy=0,$g=0,Uf=null,wte=0;function Pn(){throw Error(r(321))}function $E(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Zi(l[p],d[p]))return!1;return!0}function qE(l,d,p,y,E,k){return qo=k,ut=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?Xj:aT,qu=!1,k=p(y,E),qu=!1,Ff&&(k=gj(d,p,y,E)),pj(l),k}function pj(l){G.H=Hg;var d=Xt!==null&&Xt.next!==null;if(qo=0,Zn=Xt=ut=null,Xy=!1,$g=0,Uf=null,d)throw Error(r(300));l===null||Jn||(l=l.dependencies,l!==null&&Fy(l)&&(Jn=!0))}function gj(l,d,p,y){ut=l;var E=0;do{if(Ff&&(Uf=null),$g=0,Ff=!1,25<=E)throw Error(r(301));if(E+=1,Zn=Xt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=Qj,k=d(p,y)}while(Ff);return k}function Ste(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?qg(d):d,l=l.useState()[0],(Xt!==null?Xt.memoizedState:null)!==l&&(ut.flags|=1024),d}function GE(){var l=Qy!==0;return Qy=0,l}function HE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function KE(l){if(Xy){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Xy=!1}qo=0,Zn=Xt=ut=null,Ff=!1,$g=Qy=0,Uf=null}function pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?ut.memoizedState=Zn=l:Zn=Zn.next=l,Zn}function qn(){if(Xt===null){var l=ut.alternate;l=l!==null?l.memoizedState:null}else l=Xt.next;var d=Zn===null?ut.memoizedState:Zn.next;if(d!==null)Zn=d,Xt=l;else{if(l===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Xt=l,l={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Zn===null?ut.memoizedState=Zn=l:Zn=Zn.next=l}return Zn}function Zy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qg(l){var d=$g;return $g+=1,Uf===null&&(Uf=[]),l=aj(Uf,l,d),d=ut,(Zn===null?d.memoizedState:Zn.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?Xj:aT),l}function Jy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return qg(l);if(l.$$typeof===P)return Fr(l)}throw Error(r(438,String(l)))}function WE(l){var d=null,p=ut.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=ut.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Zy(),ut.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=M;return d.index++,p}function Go(l,d){return typeof d=="function"?d(l):d}function eb(l){var d=qn();return YE(d,Xt,l)}function YE(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var B=E.next;E.next=k.next,k.next=B}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=B=null,re=null,ge=d,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(Et&Ce)===Ce:(qo&Ce)===Ce){var ye=ge.revertLane;if(ye===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===jf&&(Te=!0);else if((qo&ye)===ye){ge=ge.next,ye===jf&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=Ce,B=k):re=re.next=Ce,ut.lanes|=ye,uc|=ye;Ce=ge.action,qu&&p(k,Ce),k=ge.hasEagerState?ge.eagerState:p(k,Ce)}else ye={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=ye,B=k):re=re.next=ye,ut.lanes|=Ce,uc|=Ce;ge=ge.next}while(ge!==null&&ge!==d);if(re===null?B=k:re.next=q,!Zi(k,l.memoizedState)&&(Jn=!0,Te&&(p=zf,p!==null)))throw p;l.memoizedState=k,l.baseState=B,l.baseQueue=re,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function XE(l){var d=qn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var B=E=E.next;do k=l(k,B.action),B=B.next;while(B!==E);Zi(k,d.memoizedState)||(Jn=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function mj(l,d,p){var y=ut,E=qn(),k=Ct;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var B=!Zi((Xt||E).memoizedState,p);if(B&&(E.memoizedState=p,Jn=!0),E=E.queue,JE(bj.bind(null,y,E,l),[l]),E.getSnapshot!==d||B||Zn!==null&&Zn.memoizedState.tag&1){if(y.flags|=2048,$f(9,{destroy:void 0},yj.bind(null,y,E,p,d),null),rn===null)throw Error(r(349));k||(qo&127)!==0||vj(y,d,p)}return p}function vj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ut.updateQueue,d===null?(d=Zy(),ut.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function yj(l,d,p,y){d.value=p,d.getSnapshot=y,xj(d)&&wj(l)}function bj(l,d,p){return p(function(){xj(d)&&wj(l)})}function xj(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Zi(l,p)}catch{return!0}}function wj(l){var d=Mu(l,2);d!==null&&Ri(d,l,2)}function QE(l){var d=pi();if(typeof l=="function"){var p=l;if(l=p(),qu){Ar(!0);try{p()}finally{Ar(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:l},d}function Sj(l,d,p,y){return l.baseState=p,YE(l,Xt,typeof y=="function"?y:Go)}function _te(l,d,p,y,E){if(rb(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){k.listeners.push(B)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,_j(d,k)):(k.next=p.next,d.pending=p.next=k)}}function _j(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,B={};G.T=B;try{var q=p(E,y),re=G.S;re!==null&&re(B,q),Ej(l,d,q)}catch(ge){ZE(l,d,ge)}finally{k!==null&&B.types!==null&&(k.types=B.types),G.T=k}}else try{k=p(E,y),Ej(l,d,k)}catch(ge){ZE(l,d,ge)}}function Ej(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Tj(l,d,y)},function(y){return ZE(l,d,y)}):Tj(l,d,p)}function Tj(l,d,p){d.status="fulfilled",d.value=p,Aj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,_j(l,p)))}function ZE(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,Aj(d),d=d.next;while(d!==y)}l.action=null}function Aj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function kj(l,d){return d}function Cj(l,d){if(Ct){var p=rn.formState;if(p!==null){e:{var y=ut;if(Ct){if(cn){t:{for(var E=cn,k=Ia;E.nodeType!==8;){if(!k){E=null;break t}if(E=Na(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){cn=Na(E.nextSibling),y=E.data==="F!";break e}}tc(y)}y=!1}y&&(d=p[0])}}return p=pi(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kj,lastRenderedState:d},p.queue=y,p=Kj.bind(null,ut,y),y.dispatch=p,y=QE(!1),k=iT.bind(null,ut,!1,y.queue),y=pi(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=_te.bind(null,ut,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function Ij(l){var d=qn();return Pj(d,Xt,l)}function Pj(l,d,p){if(d=YE(l,d,kj)[0],l=eb(Go)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=qg(d)}catch(B){throw B===Lf?qy:B}else y=d;d=qn();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(ut.flags|=2048,$f(9,{destroy:void 0},Ete.bind(null,E,p),null)),[y,k,l]}function Ete(l,d){l.action=d}function Nj(l){var d=qn(),p=Xt;if(p!==null)return Pj(d,p,l);qn(),d=d.memoizedState,p=qn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function $f(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=ut.updateQueue,d===null&&(d=Zy(),ut.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function Dj(){return qn().memoizedState}function tb(l,d,p,y){var E=pi();ut.flags|=l,E.memoizedState=$f(1|d,{destroy:void 0},p,y===void 0?null:y)}function nb(l,d,p,y){var E=qn();y=y===void 0?null:y;var k=E.memoizedState.inst;Xt!==null&&y!==null&&$E(y,Xt.memoizedState.deps)?E.memoizedState=$f(d,k,p,y):(ut.flags|=l,E.memoizedState=$f(1|d,k,p,y))}function Oj(l,d){tb(8390656,8,l,d)}function JE(l,d){nb(2048,8,l,d)}function Tte(l){ut.flags|=4;var d=ut.updateQueue;if(d===null)d=Zy(),ut.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function Rj(l){var d=qn().memoizedState;return Tte({ref:d,nextImpl:l}),function(){if((Mt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function Mj(l,d){return nb(4,2,l,d)}function jj(l,d){return nb(4,4,l,d)}function zj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Lj(l,d,p){p=p!=null?p.concat([l]):null,nb(4,4,zj.bind(null,d,l),p)}function eT(){}function Vj(l,d){var p=qn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&$E(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function Bj(l,d){var p=qn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&$E(d,y[1]))return y[0];if(y=l(),qu){Ar(!0);try{l()}finally{Ar(!1)}}return p.memoizedState=[y,d],y}function tT(l,d,p){return p===void 0||(qo&1073741824)!==0&&(Et&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=Fz(),ut.lanes|=l,uc|=l,p)}function Fj(l,d,p,y){return Zi(p,d)?p:Bf.current!==null?(l=tT(l,p,y),Zi(l,d)||(Jn=!0),l):(qo&42)===0||(qo&1073741824)!==0&&(Et&261930)===0?(Jn=!0,l.memoizedState=p):(l=Fz(),ut.lanes|=l,uc|=l,d)}function Uj(l,d,p,y,E){var k=Y.p;Y.p=k!==0&&8>k?k:8;var B=G.T,q={};G.T=q,iT(l,!1,d,p);try{var re=E(),ge=G.S;if(ge!==null&&ge(q,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Te=xte(re,y);Gg(l,d,Te,ia(l))}else Gg(l,d,y,ia(l))}catch(Ce){Gg(l,d,{then:function(){},status:"rejected",reason:Ce},ia())}finally{Y.p=k,B!==null&&q.types!==null&&(B.types=q.types),G.T=B}}function Ate(){}function nT(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=$j(l).queue;Uj(l,E,d,J,p===null?Ate:function(){return qj(l),p(y)})}function $j(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function qj(l){var d=$j(l);d.next===null&&(d=l.alternate.memoizedState),Gg(l,d.next.queue,{},ia())}function rT(){return Fr(lm)}function Gj(){return qn().memoizedState}function Hj(){return qn().memoizedState}function kte(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=ia();l=ic(p);var y=ac(d,l,p);y!==null&&(Ri(y,d,p),Bg(y,d,p)),d={cache:DE()},l.payload=d;return}d=d.return}}function Cte(l,d,p){var y=ia();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},rb(l)?Wj(d,p):(p=wE(l,d,p,y),p!==null&&(Ri(p,l,y),Yj(p,d,y)))}function Kj(l,d,p){var y=ia();Gg(l,d,p,y)}function Gg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(rb(l))Wj(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var B=d.lastRenderedState,q=k(B,p);if(E.hasEagerState=!0,E.eagerState=q,Zi(q,B))return zy(l,d,E,0),rn===null&&jy(),!1}catch{}if(p=wE(l,d,E,y),p!==null)return Ri(p,l,y),Yj(p,d,y),!0}return!1}function iT(l,d,p,y){if(y={lane:2,revertLane:jT(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},rb(l)){if(d)throw Error(r(479))}else d=wE(l,p,y,2),d!==null&&Ri(d,l,2)}function rb(l){var d=l.alternate;return l===ut||d!==null&&d===ut}function Wj(l,d){Ff=Xy=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function Yj(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,hg(l,p)}}var Hg={readContext:Fr,use:Jy,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Hg.useEffectEvent=Pn;var Xj={readContext:Fr,use:Jy,useCallback:function(l,d){return pi().memoizedState=[l,d===void 0?null:d],l},useContext:Fr,useEffect:Oj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,tb(4194308,4,zj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return tb(4194308,4,l,d)},useInsertionEffect:function(l,d){tb(4,2,l,d)},useMemo:function(l,d){var p=pi();d=d===void 0?null:d;var y=l();if(qu){Ar(!0);try{l()}finally{Ar(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=pi();if(p!==void 0){var E=p(d);if(qu){Ar(!0);try{p(d)}finally{Ar(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Cte.bind(null,ut,l),[y.memoizedState,l]},useRef:function(l){var d=pi();return l={current:l},d.memoizedState=l},useState:function(l){l=QE(l);var d=l.queue,p=Kj.bind(null,ut,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:eT,useDeferredValue:function(l,d){var p=pi();return tT(p,l,d)},useTransition:function(){var l=QE(!1);return l=Uj.bind(null,ut,l.queue,!0,!1),pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=ut,E=pi();if(Ct){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),rn===null)throw Error(r(349));(Et&127)!==0||vj(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,Oj(bj.bind(null,y,k,l),[l]),y.flags|=2048,$f(9,{destroy:void 0},yj.bind(null,y,k,p,d),null),p},useId:function(){var l=pi(),d=rn.identifierPrefix;if(Ct){var p=Xs,y=Ys;p=(y&~(1<<32-Ft(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Qy++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=wte++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:rT,useFormState:Cj,useActionState:Cj,useOptimistic:function(l){var d=pi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=iT.bind(null,ut,!0,p),p.dispatch=d,[l,d]},useMemoCache:WE,useCacheRefresh:function(){return pi().memoizedState=kte.bind(null,ut)},useEffectEvent:function(l){var d=pi(),p={impl:l};return d.memoizedState=p,function(){if((Mt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},aT={readContext:Fr,use:Jy,useCallback:Vj,useContext:Fr,useEffect:JE,useImperativeHandle:Lj,useInsertionEffect:Mj,useLayoutEffect:jj,useMemo:Bj,useReducer:eb,useRef:Dj,useState:function(){return eb(Go)},useDebugValue:eT,useDeferredValue:function(l,d){var p=qn();return Fj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=eb(Go)[0],d=qn().memoizedState;return[typeof l=="boolean"?l:qg(l),d]},useSyncExternalStore:mj,useId:Gj,useHostTransitionStatus:rT,useFormState:Ij,useActionState:Ij,useOptimistic:function(l,d){var p=qn();return Sj(p,Xt,l,d)},useMemoCache:WE,useCacheRefresh:Hj};aT.useEffectEvent=Rj;var Qj={readContext:Fr,use:Jy,useCallback:Vj,useContext:Fr,useEffect:JE,useImperativeHandle:Lj,useInsertionEffect:Mj,useLayoutEffect:jj,useMemo:Bj,useReducer:XE,useRef:Dj,useState:function(){return XE(Go)},useDebugValue:eT,useDeferredValue:function(l,d){var p=qn();return Xt===null?tT(p,l,d):Fj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=XE(Go)[0],d=qn().memoizedState;return[typeof l=="boolean"?l:qg(l),d]},useSyncExternalStore:mj,useId:Gj,useHostTransitionStatus:rT,useFormState:Nj,useActionState:Nj,useOptimistic:function(l,d){var p=qn();return Xt!==null?Sj(p,Xt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:WE,useCacheRefresh:Hj};Qj.useEffectEvent=Rj;function sT(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var oT={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=ia(),E=ic(y);E.payload=d,p!=null&&(E.callback=p),d=ac(l,E,y),d!==null&&(Ri(d,l,y),Bg(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=ia(),E=ic(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=ac(l,E,y),d!==null&&(Ri(d,l,y),Bg(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=ia(),y=ic(p);y.tag=2,d!=null&&(y.callback=d),d=ac(l,y,p),d!==null&&(Ri(d,l,p),Bg(d,l,p))}};function Zj(l,d,p,y,E,k,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,B):d.prototype&&d.prototype.isPureReactComponent?!Dg(p,y)||!Dg(E,k):!0}function Jj(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&oT.enqueueReplaceState(d,d.state,null)}function Gu(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function ez(l){My(l)}function tz(l){console.error(l)}function nz(l){My(l)}function ib(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function rz(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function lT(l,d,p){return p=ic(p),p.tag=3,p.payload={element:null},p.callback=function(){ib(l,d)},p}function iz(l){return l=ic(l),l.tag=3,l}function az(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){rz(d,p,y)}}var B=p.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){rz(d,p,y),typeof E!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function Ite(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&Mf(d,p,E,!0),p=ea.current,p!==null){switch(p.tag){case 31:case 13:return Pa===null?mb():p.alternate===null&&Nn===0&&(Nn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Gy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),OT(l,y,E)),!1;case 22:return p.flags|=65536,y===Gy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),OT(l,y,E)),!1}throw Error(r(435,p.tag))}return OT(l,y,E),mb(),!1}if(Ct)return d=ea.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==kE&&(l=Error(r(422),{cause:y}),Mg(Aa(l,p)))):(y!==kE&&(d=Error(r(423),{cause:y}),Mg(Aa(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=Aa(y,p),E=lT(l.stateNode,y,E),LE(l,E),Nn!==4&&(Nn=2)),!1;var k=Error(r(520),{cause:y});if(k=Aa(k,p),em===null?em=[k]:em.push(k),Nn!==4&&(Nn=2),d===null)return!0;y=Aa(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=lT(p.stateNode,y,l),LE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(dc===null||!dc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=iz(E),az(E,l,p,y),LE(p,E),!1}p=p.return}while(p!==null);return!1}var cT=Error(r(461)),Jn=!1;function Ur(l,d,p,y){d.child=l===null?cj(d,null,p,y):$u(d,l.child,p,y)}function sz(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var B={};for(var q in y)q!=="ref"&&(B[q]=y[q])}else B=y;return Vu(d),y=qE(l,d,p,B,k,E),q=GE(),l!==null&&!Jn?(HE(l,d,E),Ho(l,d,E)):(Ct&&q&&TE(d),d.flags|=1,Ur(l,d,y,E),d.child)}function oz(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!SE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,lz(l,d,k,y,E)):(l=Vy(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!vT(l,E)){var B=k.memoizedProps;if(p=p.compare,p=p!==null?p:Dg,p(B,y)&&l.ref===d.ref)return Ho(l,d,E)}return d.flags|=1,l=Bo(k,y),l.ref=d.ref,l.return=d,d.child=l}function lz(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(Dg(k,y)&&l.ref===d.ref)if(Jn=!1,d.pendingProps=y=k,vT(l,E))(l.flags&131072)!==0&&(Jn=!0);else return d.lanes=l.lanes,Ho(l,d,E)}return uT(l,d,p,y,E)}function cz(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return uz(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&$y(d,k!==null?k.cachePool:null),k!==null?fj(d,k):BE(),hj(d);else return y=d.lanes=536870912,uz(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?($y(d,k.cachePool),fj(d,k),oc(),d.memoizedState=null):(l!==null&&$y(d,null),BE(),oc());return Ur(l,d,E,p),d.child}function Kg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function uz(l,d,p,y,E){var k=RE();return k=k===null?null:{parent:Qn._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&$y(d,null),BE(),hj(d),l!==null&&Mf(l,d,y,!0),d.childLanes=E,null}function ab(l,d){return d=ob({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function dz(l,d,p){return $u(d,l.child,null,p),l=ab(d,d.pendingProps),l.flags|=2,ta(d),d.memoizedState=null,l}function Pte(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Ct){if(y.mode==="hidden")return l=ab(d,y),d.lanes=536870912,Kg(null,l);if(UE(d),(l=cn)?(l=_4(l,Ia),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Jl!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},p=WM(l),p.return=d,d.child=p,Br=d,cn=null)):l=null,l===null)throw tc(d);return d.lanes=536870912,null}return ab(d,y)}var k=l.memoizedState;if(k!==null){var B=k.dehydrated;if(UE(d),E)if(d.flags&256)d.flags&=-257,d=dz(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Jn||Mf(l,d,p,!1),E=(p&l.childLanes)!==0,Jn||E){if(y=rn,y!==null&&(B=pg(y,p),B!==0&&B!==k.retryLane))throw k.retryLane=B,Mu(l,B),Ri(y,l,B),cT;mb(),d=dz(l,d,p)}else l=k.treeContext,cn=Na(B.nextSibling),Br=d,Ct=!0,ec=null,Ia=!1,l!==null&&QM(d,l),d=ab(d,y),d.flags|=4096;return d}return l=Bo(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function sb(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function uT(l,d,p,y,E){return Vu(d),p=qE(l,d,p,y,void 0,E),y=GE(),l!==null&&!Jn?(HE(l,d,E),Ho(l,d,E)):(Ct&&y&&TE(d),d.flags|=1,Ur(l,d,p,E),d.child)}function fz(l,d,p,y,E,k){return Vu(d),d.updateQueue=null,p=gj(d,y,p,E),pj(l),y=GE(),l!==null&&!Jn?(HE(l,d,k),Ho(l,d,k)):(Ct&&y&&TE(d),d.flags|=1,Ur(l,d,p,k),d.child)}function hz(l,d,p,y,E){if(Vu(d),d.stateNode===null){var k=Nf,B=p.contextType;typeof B=="object"&&B!==null&&(k=Fr(B)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=oT,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},jE(d),B=p.contextType,k.context=typeof B=="object"&&B!==null?Fr(B):Nf,k.state=d.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(sT(d,p,B,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(B=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),B!==k.state&&oT.enqueueReplaceState(k,k.state,null),Ug(d,y,k,E),Fg(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,re=Gu(p,q);k.props=re;var ge=k.context,Te=p.contextType;B=Nf,typeof Te=="object"&&Te!==null&&(B=Fr(Te));var Ce=p.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||ge!==B)&&Jj(d,k,y,B),rc=!1;var ye=d.memoizedState;k.state=ye,Ug(d,y,k,E),Fg(),ge=d.memoizedState,q||ye!==ge||rc?(typeof Ce=="function"&&(sT(d,p,Ce,y),ge=d.memoizedState),(re=rc||Zj(d,p,re,y,ye,ge,B))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ge),k.props=y,k.state=ge,k.context=B,y=re):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,zE(l,d),B=d.memoizedProps,Te=Gu(p,B),k.props=Te,Ce=d.pendingProps,ye=k.context,ge=p.contextType,re=Nf,typeof ge=="object"&&ge!==null&&(re=Fr(ge)),q=p.getDerivedStateFromProps,(ge=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(B!==Ce||ye!==re)&&Jj(d,k,y,re),rc=!1,ye=d.memoizedState,k.state=ye,Ug(d,y,k,E),Fg();var we=d.memoizedState;B!==Ce||ye!==we||rc||l!==null&&l.dependencies!==null&&Fy(l.dependencies)?(typeof q=="function"&&(sT(d,p,q,y),we=d.memoizedState),(Te=rc||Zj(d,p,Te,y,ye,we,re)||l!==null&&l.dependencies!==null&&Fy(l.dependencies))?(ge||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,re)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=re,y=Te):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,sb(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=$u(d,l.child,null,E),d.child=$u(d,null,p,E)):Ur(l,d,p,E),d.memoizedState=k.state,l=d.child):l=Ho(l,d,E),l}function pz(l,d,p,y){return zu(),d.flags|=256,Ur(l,d,p,y),d.child}var dT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fT(l){return{baseLanes:l,cachePool:rj()}}function hT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ra),l}function gz(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,B;if((B=k)||(B=l!==null&&l.memoizedState===null?!1:($n.current&2)!==0),B&&(E=!0,d.flags&=-129),B=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ct){if(E?sc(d):oc(),(l=cn)?(l=_4(l,Ia),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Jl!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},p=WM(l),p.return=d,d.child=p,Br=d,cn=null)):l=null,l===null)throw tc(d);return YT(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(oc(),E=d.mode,q=ob({mode:"hidden",children:q},E),y=ju(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=fT(p),y.childLanes=hT(l,B,p),d.memoizedState=dT,Kg(null,y)):(sc(d),pT(d,q))}var re=l.memoizedState;if(re!==null&&(q=re.dehydrated,q!==null)){if(k)d.flags&256?(sc(d),d.flags&=-257,d=gT(l,d,p)):d.memoizedState!==null?(oc(),d.child=l.child,d.flags|=128,d=null):(oc(),q=y.fallback,E=d.mode,y=ob({mode:"visible",children:y.children},E),q=ju(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,$u(d,l.child,null,p),y=d.child,y.memoizedState=fT(p),y.childLanes=hT(l,B,p),d.memoizedState=dT,d=Kg(null,y));else if(sc(d),YT(q)){if(B=q.nextSibling&&q.nextSibling.dataset,B)var ge=B.dgst;B=ge,y=Error(r(419)),y.stack="",y.digest=B,Mg({value:y,source:null,stack:null}),d=gT(l,d,p)}else if(Jn||Mf(l,d,p,!1),B=(p&l.childLanes)!==0,Jn||B){if(B=rn,B!==null&&(y=pg(B,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,Mu(l,y),Ri(B,l,y),cT;WT(q)||mb(),d=gT(l,d,p)}else WT(q)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,cn=Na(q.nextSibling),Br=d,Ct=!0,ec=null,Ia=!1,l!==null&&QM(d,l),d=pT(d,y.children),d.flags|=4096);return d}return E?(oc(),q=y.fallback,E=d.mode,re=l.child,ge=re.sibling,y=Bo(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,ge!==null?q=Bo(ge,q):(q=ju(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,Kg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=fT(p):(E=q.cachePool,E!==null?(re=Qn._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=rj(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=hT(l,B,p),d.memoizedState=dT,Kg(l.child,y)):(sc(d),p=l.child,l=p.sibling,p=Bo(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(B=d.deletions,B===null?(d.deletions=[l],d.flags|=16):B.push(l)),d.child=p,d.memoizedState=null,p)}function pT(l,d){return d=ob({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ob(l,d){return l=Ji(22,l,null,d),l.lanes=0,l}function gT(l,d,p){return $u(d,l.child,null,p),l=pT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function mz(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),PE(l.return,d,p)}function mT(l,d,p,y,E,k){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=y,B.tail=p,B.tailMode=E,B.treeForkCount=k)}function vz(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var B=$n.current,q=(B&2)!==0;if(q?(B=B&1|2,d.flags|=128):B&=1,te($n,B),Ur(l,d,y,p),y=Ct?Rg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&mz(l,p,d);else if(l.tag===19)mz(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Yy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),mT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Yy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}mT(d,!0,p,null,k,y);break;case"together":mT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Ho(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),uc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Mf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Bo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Bo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function vT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Fy(l)))}function Nte(l,d,p){switch(d.tag){case 3:Se(d,d.stateNode.containerInfo),nc(d,Qn,l.memoizedState.cache),zu();break;case 27:case 5:Ae(d);break;case 4:Se(d,d.stateNode.containerInfo);break;case 10:nc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,UE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(sc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?gz(l,d,p):(sc(d),l=Ho(l,d,p),l!==null?l.sibling:null);sc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(Mf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return vz(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te($n,$n.current),y)break;return null;case 22:return d.lanes=0,cz(l,d,p,d.pendingProps);case 24:nc(d,Qn,l.memoizedState.cache)}return Ho(l,d,p)}function yz(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Jn=!0;else{if(!vT(l,p)&&(d.flags&128)===0)return Jn=!1,Nte(l,d,p);Jn=(l.flags&131072)!==0}else Jn=!1,Ct&&(d.flags&1048576)!==0&&XM(d,Rg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=Fu(d.elementType),d.type=l,typeof l=="function")SE(l)?(y=Gu(l,y),d.tag=1,d=hz(null,d,l,y,p)):(d.tag=0,d=uT(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===N){d.tag=11,d=sz(null,d,l,y,p);break e}else if(E===I){d.tag=14,d=oz(null,d,l,y,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return uT(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Gu(y,d.pendingProps),hz(l,d,y,E,p);case 3:e:{if(Se(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,zE(l,d),Ug(d,y,null,p);var B=d.memoizedState;if(y=B.cache,nc(d,Qn,y),y!==k.cache&&NE(d,[Qn],p,!0),Fg(),y=B.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:B.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=pz(l,d,y,p);break e}else if(y!==E){E=Aa(Error(r(424)),d),Mg(E),d=pz(l,d,y,p);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,cn=Na(l.firstChild),Br=d,Ct=!0,ec=null,Ia=!0,p=cj(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(zu(),y===E){d=Ho(l,d,p);break e}Ur(l,d,y,p)}d=d.child}return d;case 26:return sb(l,d),l===null?(p=I4(d.type,null,d.pendingProps,null))?d.memoizedState=p:Ct||(p=d.type,l=d.pendingProps,y=_b(ie.current).createElement(p),y[Wn]=d,y[kr]=l,$r(y,p,l),Yn(y),d.stateNode=y):d.memoizedState=I4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ae(d),l===null&&Ct&&(y=d.stateNode=A4(d.type,d.pendingProps,ie.current),Br=d,Ia=!0,E=cn,gc(d.type)?(XT=E,cn=Na(y.firstChild)):cn=E),Ur(l,d,d.pendingProps.children,p),sb(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ct&&((E=y=cn)&&(y=one(y,d.type,d.pendingProps,Ia),y!==null?(d.stateNode=y,Br=d,cn=Na(y.firstChild),Ia=!1,E=!0):E=!1),E||tc(d)),Ae(d),E=d.type,k=d.pendingProps,B=l!==null?l.memoizedProps:null,y=k.children,GT(E,k)?y=null:B!==null&&GT(E,B)&&(d.flags|=32),d.memoizedState!==null&&(E=qE(l,d,Ste,null,null,p),lm._currentValue=E),sb(l,d),Ur(l,d,y,p),d.child;case 6:return l===null&&Ct&&((l=p=cn)&&(p=lne(p,d.pendingProps,Ia),p!==null?(d.stateNode=p,Br=d,cn=null,l=!0):l=!1),l||tc(d)),null;case 13:return gz(l,d,p);case 4:return Se(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=$u(d,null,y,p):Ur(l,d,y,p),d.child;case 11:return sz(l,d,d.type,d.pendingProps,p);case 7:return Ur(l,d,d.pendingProps,p),d.child;case 8:return Ur(l,d,d.pendingProps.children,p),d.child;case 12:return Ur(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,nc(d,d.type,y.value),Ur(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Vu(d),E=Fr(E),y=y(E),d.flags|=1,Ur(l,d,y,p),d.child;case 14:return oz(l,d,d.type,d.pendingProps,p);case 15:return lz(l,d,d.type,d.pendingProps,p);case 19:return vz(l,d,p);case 31:return Pte(l,d,p);case 22:return cz(l,d,p,d.pendingProps);case 24:return Vu(d),y=Fr(Qn),l===null?(E=RE(),E===null&&(E=rn,k=DE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},jE(d),nc(d,Qn,E)):((l.lanes&p)!==0&&(zE(l,d),Ug(d,null,null,p),Fg()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),nc(d,Qn,y)):(y=k.cache,nc(d,Qn,y),y!==E.cache&&NE(d,[Qn],p,!0))),Ur(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Ko(l){l.flags|=4}function yT(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(Gz())l.flags|=8192;else throw Uu=Gy,ME}else l.flags&=-16777217}function bz(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!R4(d))if(Gz())l.flags|=8192;else throw Uu=Gy,ME}function lb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?py():536870912,l.lanes|=d,Kf|=d)}function Wg(l,d){if(!Ct)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function un(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function Dte(l,d,p){var y=d.pendingProps;switch(AE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(d),null;case 1:return un(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),$o(Qn),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Rf(d)?Ko(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,CE())),un(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?(Ko(d),k!==null?(un(d),bz(d,k)):(un(d),yT(d,E,null,y,p))):k?k!==l.memoizedState?(Ko(d),un(d),bz(d,k)):(un(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&Ko(d),un(d),yT(d,E,l,y,p)),null;case 27:if(ve(d),p=ie.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Ko(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return un(d),null}l=K.current,Rf(d)?ZM(d):(l=A4(E,y,p),d.stateNode=l,Ko(d))}return un(d),null;case 5:if(ve(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Ko(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return un(d),null}if(k=K.current,Rf(d))ZM(d);else{var B=_b(ie.current);switch(k){case 1:k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=B.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?B.createElement("select",{is:y.is}):B.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?B.createElement(E,{is:y.is}):B.createElement(E)}}k[Wn]=d,k[kr]=y;e:for(B=d.child;B!==null;){if(B.tag===5||B.tag===6)k.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===d)break e;for(;B.sibling===null;){if(B.return===null||B.return===d)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}d.stateNode=k;e:switch($r(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Ko(d)}}return un(d),yT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&Ko(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ie.current,Rf(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=Br,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Wn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||g4(l.nodeValue,p)),l||tc(d,!0)}else l=_b(l).createTextNode(y),l[Wn]=d,d.stateNode=l}return un(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=Rf(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Wn]=d}else zu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),l=!1}else p=CE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(ta(d),d):(ta(d),null);if((d.flags&128)!==0)throw Error(r(558))}return un(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Rf(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Wn]=d}else zu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),E=!1}else E=CE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(ta(d),d):(ta(d),null)}return ta(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),lb(d,d.updateQueue),un(d),null);case 4:return se(),l===null&&BT(d.stateNode.containerInfo),un(d),null;case 10:return $o(d.type),un(d),null;case 19:if(Z($n),y=d.memoizedState,y===null)return un(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)Wg(y,!1);else{if(Nn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=Yy(l),k!==null){for(d.flags|=128,Wg(y,!1),l=k.updateQueue,d.updateQueue=l,lb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)KM(p,l),p=p.sibling;return te($n,$n.current&1|2),Ct&&Fo(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&yt()>hb&&(d.flags|=128,E=!0,Wg(y,!1),d.lanes=4194304)}else{if(!E)if(l=Yy(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,lb(d,l),Wg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ct)return un(d),null}else 2*yt()-y.renderingStartTime>hb&&p!==536870912&&(d.flags|=128,E=!0,Wg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=yt(),l.sibling=null,p=$n.current,te($n,E?p&1|2:p&1),Ct&&Fo(d,y.treeForkCount),l):(un(d),null);case 22:case 23:return ta(d),FE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(un(d),d.subtreeFlags&6&&(d.flags|=8192)):un(d),p=d.updateQueue,p!==null&&lb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&Z(Bu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),$o(Qn),un(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Ote(l,d){switch(AE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return $o(Qn),se(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return ve(d),null;case 31:if(d.memoizedState!==null){if(ta(d),d.alternate===null)throw Error(r(340));zu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(ta(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));zu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Z($n),null;case 4:return se(),null;case 10:return $o(d.type),null;case 22:case 23:return ta(d),FE(),l!==null&&Z(Bu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return $o(Qn),null;case 25:return null;default:return null}}function xz(l,d){switch(AE(d),d.tag){case 3:$o(Qn),se();break;case 26:case 27:case 5:ve(d);break;case 4:se();break;case 31:d.memoizedState!==null&&ta(d);break;case 13:ta(d);break;case 19:Z($n);break;case 10:$o(d.type);break;case 22:case 23:ta(d),FE(),l!==null&&Z(Bu);break;case 24:$o(Qn)}}function Yg(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,B=p.inst;y=k(),B.destroy=y}p=p.next}while(p!==E)}}catch(q){qt(d,d.return,q)}}function lc(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var B=y.inst,q=B.destroy;if(q!==void 0){B.destroy=void 0,E=d;var re=p,ge=q;try{ge()}catch(Te){qt(E,re,Te)}}}y=y.next}while(y!==k)}}catch(Te){qt(d,d.return,Te)}}function wz(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{dj(d,p)}catch(y){qt(l,l.return,y)}}}function Sz(l,d,p){p.props=Gu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){qt(l,d,y)}}function Xg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){qt(l,d,E)}}function Qs(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){qt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){qt(l,d,E)}else p.current=null}function _z(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){qt(l,l.return,E)}}function bT(l,d,p){try{var y=l.stateNode;tne(y,l.type,p,d),y[kr]=d}catch(E){qt(l,l.return,E)}}function Ez(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&gc(l.type)||l.tag===4}function xT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Ez(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&gc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function wT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=ns));else if(y!==4&&(y===27&&gc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(wT(l,d,p),l=l.sibling;l!==null;)wT(l,d,p),l=l.sibling}function cb(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&gc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(cb(l,d,p),l=l.sibling;l!==null;)cb(l,d,p),l=l.sibling}function Tz(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);$r(d,y,p),d[Wn]=l,d[kr]=p}catch(k){qt(l,l.return,k)}}var Wo=!1,er=!1,ST=!1,Az=typeof WeakSet=="function"?WeakSet:Set,Ir=null;function Rte(l,d){if(l=l.containerInfo,$T=Pb,l=LM(l),gE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var B=0,q=-1,re=-1,ge=0,Te=0,Ce=l,ye=null;t:for(;;){for(var we;Ce!==p||E!==0&&Ce.nodeType!==3||(q=B+E),Ce!==k||y!==0&&Ce.nodeType!==3||(re=B+y),Ce.nodeType===3&&(B+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)ye=Ce,Ce=we;for(;;){if(Ce===l)break t;if(ye===p&&++ge===E&&(q=B),ye===k&&++Te===y&&(re=B),(we=Ce.nextSibling)!==null)break;Ce=ye,ye=Ce.parentNode}Ce=we}p=q===-1||re===-1?null:{start:q,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(qT={focusedElem:l,selectionRange:p},Pb=!1,Ir=d;Ir!==null;)if(d=Ir,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Ir=l;else for(;Ir!==null;){switch(d=Ir,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var $e=Gu(p.type,E);l=y.getSnapshotBeforeUpdate($e,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(at){qt(p,p.return,at)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)KT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":KT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Ir=l;break}Ir=d.return}}function kz(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Xo(l,p),y&4&&Yg(5,p);break;case 1:if(Xo(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(B){qt(p,p.return,B)}else{var E=Gu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(B){qt(p,p.return,B)}}y&64&&wz(p),y&512&&Xg(p,p.return);break;case 3:if(Xo(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{dj(l,d)}catch(B){qt(p,p.return,B)}}break;case 27:d===null&&y&4&&Tz(p);case 26:case 5:Xo(l,p),d===null&&y&4&&_z(p),y&512&&Xg(p,p.return);break;case 12:Xo(l,p);break;case 31:Xo(l,p),y&4&&Pz(l,p);break;case 13:Xo(l,p),y&4&&Nz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=$te.bind(null,p),cne(l,p))));break;case 22:if(y=p.memoizedState!==null||Wo,!y){d=d!==null&&d.memoizedState!==null||er,E=Wo;var k=er;Wo=y,(er=d)&&!k?Qo(l,p,(p.subtreeFlags&8772)!==0):Xo(l,p),Wo=E,er=k}break;case 30:break;default:Xo(l,p)}}function Cz(l){var d=l.alternate;d!==null&&(l.alternate=null,Cz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&vf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var mn=null,Pi=!1;function Yo(l,d,p){for(p=p.child;p!==null;)Iz(l,d,p),p=p.sibling}function Iz(l,d,p){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Fn,p)}catch{}switch(p.tag){case 26:er||Qs(p,d),Yo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:er||Qs(p,d);var y=mn,E=Pi;gc(p.type)&&(mn=p.stateNode,Pi=!1),Yo(l,d,p),am(p.stateNode),mn=y,Pi=E;break;case 5:er||Qs(p,d);case 6:if(y=mn,E=Pi,mn=null,Yo(l,d,p),mn=y,Pi=E,mn!==null)if(Pi)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(p.stateNode)}catch(k){qt(p,d,k)}else try{mn.removeChild(p.stateNode)}catch(k){qt(p,d,k)}break;case 18:mn!==null&&(Pi?(l=mn,w4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),th(l)):w4(mn,p.stateNode));break;case 4:y=mn,E=Pi,mn=p.stateNode.containerInfo,Pi=!0,Yo(l,d,p),mn=y,Pi=E;break;case 0:case 11:case 14:case 15:lc(2,p,d),er||lc(4,p,d),Yo(l,d,p);break;case 1:er||(Qs(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Sz(p,d,y)),Yo(l,d,p);break;case 21:Yo(l,d,p);break;case 22:er=(y=er)||p.memoizedState!==null,Yo(l,d,p),er=y;break;default:Yo(l,d,p)}}function Pz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{th(l)}catch(p){qt(d,d.return,p)}}}function Nz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{th(l)}catch(p){qt(d,d.return,p)}}function Mte(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Az),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Az),d;default:throw Error(r(435,l.tag))}}function ub(l,d){var p=Mte(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=qte.bind(null,l,y);y.then(E,E)}})}function Ni(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,B=d,q=B;e:for(;q!==null;){switch(q.tag){case 27:if(gc(q.type)){mn=q.stateNode,Pi=!1;break e}break;case 5:mn=q.stateNode,Pi=!1;break e;case 3:case 4:mn=q.stateNode.containerInfo,Pi=!0;break e}q=q.return}if(mn===null)throw Error(r(160));Iz(k,B,E),mn=null,Pi=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Dz(d,l),d=d.sibling}var ls=null;function Dz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ni(d,l),Di(l),y&4&&(lc(3,l,l.return),Yg(3,l),lc(5,l,l.return));break;case 1:Ni(d,l),Di(l),y&512&&(er||p===null||Qs(p,p.return)),y&64&&Wo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=ls;if(Ni(d,l),Di(l),y&512&&(er||p===null||Qs(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[zs]||k[Wn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),$r(k,y,p),k[Wn]=l,Yn(k),y=k;break e;case"link":var B=D4("link","href",E).get(y+(p.href||""));if(B){for(var q=0;q<B.length;q++)if(k=B[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){B.splice(q,1);break t}}k=E.createElement(y),$r(k,y,p),E.head.appendChild(k);break;case"meta":if(B=D4("meta","content",E).get(y+(p.content||""))){for(q=0;q<B.length;q++)if(k=B[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){B.splice(q,1);break t}}k=E.createElement(y),$r(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Wn]=l,Yn(k),y=k}l.stateNode=y}else O4(E,l.type,l.stateNode);else l.stateNode=N4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?O4(E,l.type,l.stateNode):N4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&bT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ni(d,l),Di(l),y&512&&(er||p===null||Qs(p,p.return)),p!==null&&y&4&&bT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ni(d,l),Di(l),y&512&&(er||p===null||Qs(p,p.return)),l.flags&32){E=l.stateNode;try{Ii(E,"")}catch($e){qt(l,l.return,$e)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,bT(l,E,p!==null?p.memoizedProps:E)),y&1024&&(ST=!0);break;case 6:if(Ni(d,l),Di(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch($e){qt(l,l.return,$e)}}break;case 3:if(Ab=null,E=ls,ls=Eb(d.containerInfo),Ni(d,l),ls=E,Di(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{th(d.containerInfo)}catch($e){qt(l,l.return,$e)}ST&&(ST=!1,Oz(l));break;case 4:y=ls,ls=Eb(l.stateNode.containerInfo),Ni(d,l),Di(l),ls=y;break;case 12:Ni(d,l),Di(l);break;case 31:Ni(d,l),Di(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,ub(l,y)));break;case 13:Ni(d,l),Di(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(fb=yt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,ub(l,y)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,ge=Wo,Te=er;if(Wo=ge||E,er=Te||re,Ni(d,l),er=Te,Wo=ge,Di(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||Wo||er||Hu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(k=re.stateNode,E)B=k.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{q=re.stateNode;var Ce=re.memoizedProps.style,ye=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){qt(re,re.return,$e)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){qt(re,re.return,$e)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?S4(we,!0):S4(re.stateNode,!1)}catch($e){qt(re,re.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,ub(l,p))));break;case 19:Ni(d,l),Di(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,ub(l,y)));break;case 30:break;case 21:break;default:Ni(d,l),Di(l)}}function Di(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(Ez(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=xT(l);cb(l,k,E);break;case 5:var B=p.stateNode;p.flags&32&&(Ii(B,""),p.flags&=-33);var q=xT(l);cb(l,q,B);break;case 3:case 4:var re=p.stateNode.containerInfo,ge=xT(l);wT(l,ge,re);break;default:throw Error(r(161))}}catch(Te){qt(l,l.return,Te)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Oz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Oz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Xo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)kz(l,d.alternate,d),d=d.sibling}function Hu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:lc(4,d,d.return),Hu(d);break;case 1:Qs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Sz(d,d.return,p),Hu(d);break;case 27:am(d.stateNode);case 26:case 5:Qs(d,d.return),Hu(d);break;case 22:d.memoizedState===null&&Hu(d);break;case 30:Hu(d);break;default:Hu(d)}l=l.sibling}}function Qo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,B=k.flags;switch(k.tag){case 0:case 11:case 15:Qo(E,k,p),Yg(4,k);break;case 1:if(Qo(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ge){qt(y,y.return,ge)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)uj(re[E],q)}catch(ge){qt(y,y.return,ge)}}p&&B&64&&wz(k),Xg(k,k.return);break;case 27:Tz(k);case 26:case 5:Qo(E,k,p),p&&y===null&&B&4&&_z(k),Xg(k,k.return);break;case 12:Qo(E,k,p);break;case 31:Qo(E,k,p),p&&B&4&&Pz(E,k);break;case 13:Qo(E,k,p),p&&B&4&&Nz(E,k);break;case 22:k.memoizedState===null&&Qo(E,k,p),Xg(k,k.return);break;case 30:break;default:Qo(E,k,p)}d=d.sibling}}function _T(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&jg(p))}function ET(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&jg(l))}function cs(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Rz(l,d,p,y),d=d.sibling}function Rz(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:cs(l,d,p,y),E&2048&&Yg(9,d);break;case 1:cs(l,d,p,y);break;case 3:cs(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&jg(l)));break;case 12:if(E&2048){cs(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,B=k.id,q=k.onPostCommit;typeof q=="function"&&q(B,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){qt(d,d.return,re)}}else cs(l,d,p,y);break;case 31:cs(l,d,p,y);break;case 13:cs(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,B=d.alternate,d.memoizedState!==null?k._visibility&2?cs(l,d,p,y):Qg(l,d):k._visibility&2?cs(l,d,p,y):(k._visibility|=2,qf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&_T(B,d);break;case 24:cs(l,d,p,y),E&2048&&ET(d.alternate,d);break;default:cs(l,d,p,y)}}function qf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,B=d,q=p,re=y,ge=B.flags;switch(B.tag){case 0:case 11:case 15:qf(k,B,q,re,E),Yg(8,B);break;case 23:break;case 22:var Te=B.stateNode;B.memoizedState!==null?Te._visibility&2?qf(k,B,q,re,E):Qg(k,B):(Te._visibility|=2,qf(k,B,q,re,E)),E&&ge&2048&&_T(B.alternate,B);break;case 24:qf(k,B,q,re,E),E&&ge&2048&&ET(B.alternate,B);break;default:qf(k,B,q,re,E)}d=d.sibling}}function Qg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:Qg(p,y),E&2048&&_T(y.alternate,y);break;case 24:Qg(p,y),E&2048&&ET(y.alternate,y);break;default:Qg(p,y)}d=d.sibling}}var Zg=8192;function Gf(l,d,p){if(l.subtreeFlags&Zg)for(l=l.child;l!==null;)Mz(l,d,p),l=l.sibling}function Mz(l,d,p){switch(l.tag){case 26:Gf(l,d,p),l.flags&Zg&&l.memoizedState!==null&&wne(p,ls,l.memoizedState,l.memoizedProps);break;case 5:Gf(l,d,p);break;case 3:case 4:var y=ls;ls=Eb(l.stateNode.containerInfo),Gf(l,d,p),ls=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=Zg,Zg=16777216,Gf(l,d,p),Zg=y):Gf(l,d,p));break;default:Gf(l,d,p)}}function jz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Jg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Ir=y,Lz(y,l)}jz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zz(l),l=l.sibling}function zz(l){switch(l.tag){case 0:case 11:case 15:Jg(l),l.flags&2048&&lc(9,l,l.return);break;case 3:Jg(l);break;case 12:Jg(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,db(l)):Jg(l);break;default:Jg(l)}}function db(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Ir=y,Lz(y,l)}jz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:lc(8,d,d.return),db(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,db(d));break;default:db(d)}l=l.sibling}}function Lz(l,d){for(;Ir!==null;){var p=Ir;switch(p.tag){case 0:case 11:case 15:lc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:jg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Ir=y;else e:for(p=l;Ir!==null;){y=Ir;var E=y.sibling,k=y.return;if(Cz(y),y===p){Ir=null;break e}if(E!==null){E.return=k,Ir=E;break e}Ir=k}}}var jte={getCacheForType:function(l){var d=Fr(Qn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Fr(Qn).controller.signal}},zte=typeof WeakMap=="function"?WeakMap:Map,Mt=0,rn=null,wt=null,Et=0,$t=0,na=null,cc=!1,Hf=!1,TT=!1,Zo=0,Nn=0,uc=0,Ku=0,AT=0,ra=0,Kf=0,em=null,Oi=null,kT=!1,fb=0,Vz=0,hb=1/0,pb=null,dc=null,dr=0,fc=null,Wf=null,Jo=0,CT=0,IT=null,Bz=null,tm=0,PT=null;function ia(){return(Mt&2)!==0&&Et!==0?Et&-Et:G.T!==null?jT():gy()}function Fz(){if(ra===0)if((Et&536870912)===0||Ct){var l=Sn;Sn<<=1,(Sn&3932160)===0&&(Sn=262144),ra=l}else ra=536870912;return l=ea.current,l!==null&&(l.flags|=32),ra}function Ri(l,d,p){(l===rn&&($t===2||$t===9)||l.cancelPendingCommit!==null)&&(Yf(l,0),hc(l,Et,ra,!1)),wu(l,p),((Mt&2)===0||l!==rn)&&(l===rn&&((Mt&2)===0&&(Ku|=p),Nn===4&&hc(l,Et,ra,!1)),Zs(l))}function Uz(l,d,p){if((Mt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||fi(l,d),E=y?Bte(l,d):DT(l,d,!0),k=y;do{if(E===0){Hf&&!y&&hc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!Lte(p)){E=DT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){d=B;e:{var q=l;E=em;var re=q.current.memoizedState.isDehydrated;if(re&&(Yf(q,B).flags|=256),B=DT(q,B,!1),B!==2){if(TT&&!re){q.errorRecoveryDisabledLanes|=k,Ku|=k,E=4;break e}k=Oi,Oi=E,k!==null&&(Oi===null?Oi=k:Oi.push.apply(Oi,k))}E=B}if(k=!1,E!==2)continue}}if(E===1){Yf(l,0),hc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:hc(y,d,ra,!cc);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=fb+300-yt(),10<E)){if(hc(y,d,ra,!cc),xa(y,0,!0)!==0)break e;Jo=d,y.timeoutHandle=b4($z.bind(null,y,p,Oi,pb,kT,d,ra,Ku,Kf,cc,k,"Throttled",-0,0),E);break e}$z(y,p,Oi,pb,kT,d,ra,Ku,Kf,cc,k,null,-0,0)}}break}while(!0);Zs(l)}function $z(l,d,p,y,E,k,B,q,re,ge,Te,Ce,ye,we){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},Mz(d,k,Ce);var $e=(k&62914560)===k?fb-yt():(k&4194048)===k?Vz-yt():0;if($e=Sne(Ce,$e),$e!==null){Jo=k,l.cancelPendingCommit=$e(Qz.bind(null,l,d,k,p,y,E,B,q,re,Te,Ce,null,ye,we)),hc(l,k,B,!ge);return}}Qz(l,d,k,p,y,E,B,q,re)}function Lte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Zi(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function hc(l,d,p,y){d&=~AT,d&=~Ku,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-Ft(E),B=1<<k;y[k]=-1,E&=~B}p!==0&&Su(l,p,d)}function gb(){return(Mt&6)===0?(nm(0),!1):!0}function NT(){if(wt!==null){if($t===0)var l=wt.return;else l=wt,Uo=Lu=null,KE(l),Vf=null,Lg=0,l=wt;for(;l!==null;)xz(l.alternate,l),l=l.return;wt=null}}function Yf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,ine(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Jo=0,NT(),rn=l,wt=p=Bo(l.current,null),Et=d,$t=0,na=null,cc=!1,Hf=fi(l,d),TT=!1,Kf=ra=AT=Ku=uc=Nn=0,Oi=em=null,kT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-Ft(y),k=1<<E;d|=l[E],y&=~k}return Zo=d,jy(),p}function qz(l,d){ut=null,G.H=Hg,d===Lf||d===qy?(d=sj(),$t=3):d===ME?(d=sj(),$t=4):$t=d===cT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,na=d,wt===null&&(Nn=1,ib(l,Aa(d,l.current)))}function Gz(){var l=ea.current;return l===null?!0:(Et&4194048)===Et?Pa===null:(Et&62914560)===Et||(Et&536870912)!==0?l===Pa:!1}function Hz(){var l=G.H;return G.H=Hg,l===null?Hg:l}function Kz(){var l=G.A;return G.A=jte,l}function mb(){Nn=4,cc||(Et&4194048)!==Et&&ea.current!==null||(Hf=!0),(uc&134217727)===0&&(Ku&134217727)===0||rn===null||hc(rn,Et,ra,!1)}function DT(l,d,p){var y=Mt;Mt|=2;var E=Hz(),k=Kz();(rn!==l||Et!==d)&&(pb=null,Yf(l,d)),d=!1;var B=Nn;e:do try{if($t!==0&&wt!==null){var q=wt,re=na;switch($t){case 8:NT(),B=6;break e;case 3:case 2:case 9:case 6:ea.current===null&&(d=!0);var ge=$t;if($t=0,na=null,Xf(l,q,re,ge),p&&Hf){B=0;break e}break;default:ge=$t,$t=0,na=null,Xf(l,q,re,ge)}}Vte(),B=Nn;break}catch(Te){qz(l,Te)}while(!0);return d&&l.shellSuspendCounter++,Uo=Lu=null,Mt=y,G.H=E,G.A=k,wt===null&&(rn=null,Et=0,jy()),B}function Vte(){for(;wt!==null;)Wz(wt)}function Bte(l,d){var p=Mt;Mt|=2;var y=Hz(),E=Kz();rn!==l||Et!==d?(pb=null,hb=yt()+500,Yf(l,d)):Hf=fi(l,d);e:do try{if($t!==0&&wt!==null){d=wt;var k=na;t:switch($t){case 1:$t=0,na=null,Xf(l,d,k,1);break;case 2:case 9:if(ij(k)){$t=0,na=null,Yz(d);break}d=function(){$t!==2&&$t!==9||rn!==l||($t=7),Zs(l)},k.then(d,d);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:ij(k)?($t=0,na=null,Yz(d)):($t=0,na=null,Xf(l,d,k,7));break;case 5:var B=null;switch(wt.tag){case 26:B=wt.memoizedState;case 5:case 27:var q=wt;if(B?R4(B):q.stateNode.complete){$t=0,na=null;var re=q.sibling;if(re!==null)wt=re;else{var ge=q.return;ge!==null?(wt=ge,vb(ge)):wt=null}break t}}$t=0,na=null,Xf(l,d,k,5);break;case 6:$t=0,na=null,Xf(l,d,k,6);break;case 8:NT(),Nn=6;break e;default:throw Error(r(462))}}Fte();break}catch(Te){qz(l,Te)}while(!0);return Uo=Lu=null,G.H=y,G.A=E,Mt=p,wt!==null?0:(rn=null,Et=0,jy(),Nn)}function Fte(){for(;wt!==null&&!Bn();)Wz(wt)}function Wz(l){var d=yz(l.alternate,l,Zo);l.memoizedProps=l.pendingProps,d===null?vb(l):wt=d}function Yz(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=fz(p,d,d.pendingProps,d.type,void 0,Et);break;case 11:d=fz(p,d,d.pendingProps,d.type.render,d.ref,Et);break;case 5:KE(d);default:xz(p,d),d=wt=KM(d,Zo),d=yz(p,d,Zo)}l.memoizedProps=l.pendingProps,d===null?vb(l):wt=d}function Xf(l,d,p,y){Uo=Lu=null,KE(d),Vf=null,Lg=0;var E=d.return;try{if(Ite(l,E,d,p,Et)){Nn=1,ib(l,Aa(p,l.current)),wt=null;return}}catch(k){if(E!==null)throw wt=E,k;Nn=1,ib(l,Aa(p,l.current)),wt=null;return}d.flags&32768?(Ct||y===1?l=!0:Hf||(Et&536870912)!==0?l=!1:(cc=l=!0,(y===2||y===9||y===3||y===6)&&(y=ea.current,y!==null&&y.tag===13&&(y.flags|=16384))),Xz(d,l)):vb(d)}function vb(l){var d=l;do{if((d.flags&32768)!==0){Xz(d,cc);return}l=d.return;var p=Dte(d.alternate,d,Zo);if(p!==null){wt=p;return}if(d=d.sibling,d!==null){wt=d;return}wt=d=l}while(d!==null);Nn===0&&(Nn=5)}function Xz(l,d){do{var p=Ote(l.alternate,l);if(p!==null){p.flags&=32767,wt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){wt=l;return}wt=l=p}while(l!==null);Nn=6,wt=null}function Qz(l,d,p,y,E,k,B,q,re){l.cancelPendingCommit=null;do yb();while(dr!==0);if((Mt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=xE,dE(l,p,k,B,q,re),l===rn&&(wt=rn=null,Et=0),Wf=d,fc=l,Jo=p,CT=k,IT=E,Bz=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Gte(gt,function(){return n4(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=Y.p,Y.p=2,B=Mt,Mt|=4;try{Rte(l,d,p)}finally{Mt=B,Y.p=E,G.T=y}}dr=1,Zz(),Jz(),e4()}}function Zz(){if(dr===1){dr=0;var l=fc,d=Wf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=Mt;Mt|=4;try{Dz(d,l);var k=qT,B=LM(l.containerInfo),q=k.focusedElem,re=k.selectionRange;if(B!==q&&q&&q.ownerDocument&&zM(q.ownerDocument.documentElement,q)){if(re!==null&&gE(q)){var ge=re.start,Te=re.end;if(Te===void 0&&(Te=ge),"selectionStart"in q)q.selectionStart=ge,q.selectionEnd=Math.min(Te,q.value.length);else{var Ce=q.ownerDocument||document,ye=Ce&&Ce.defaultView||window;if(ye.getSelection){var we=ye.getSelection(),$e=q.textContent.length,at=Math.min(re.start,$e),Zt=re.end===void 0?at:Math.min(re.end,$e);!we.extend&&at>Zt&&(B=Zt,Zt=at,at=B);var de=jM(q,at),ce=jM(q,Zt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var pe=Ce.createRange();pe.setStart(de.node,de.offset),we.removeAllRanges(),at>Zt?(we.addRange(pe),we.extend(ce.node,ce.offset)):(pe.setEnd(ce.node,ce.offset),we.addRange(pe))}}}}for(Ce=[],we=q;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ce.length;q++){var ke=Ce[q];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Pb=!!$T,qT=$T=null}finally{Mt=E,Y.p=y,G.T=p}}l.current=d,dr=2}}function Jz(){if(dr===2){dr=0;var l=fc,d=Wf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=Mt;Mt|=4;try{kz(l,d.alternate,d)}finally{Mt=E,Y.p=y,G.T=p}}dr=3}}function e4(){if(dr===4||dr===3){dr=0,xn();var l=fc,d=Wf,p=Jo,y=Bz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?dr=5:(dr=0,Wf=fc=null,t4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(dc=null),jo(p),d=d.stateNode,wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Fn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=Y.p,Y.p=2,G.T=null;try{for(var k=l.onRecoverableError,B=0;B<y.length;B++){var q=y[B];k(q.value,{componentStack:q.stack})}}finally{G.T=d,Y.p=E}}(Jo&3)!==0&&yb(),Zs(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===PT?tm++:(tm=0,PT=l):tm=0,nm(0)}}function t4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,jg(d)))}function yb(){return Zz(),Jz(),e4(),n4()}function n4(){if(dr!==5)return!1;var l=fc,d=CT;CT=0;var p=jo(Jo),y=G.T,E=Y.p;try{Y.p=32>p?32:p,G.T=null,p=IT,IT=null;var k=fc,B=Jo;if(dr=0,Wf=fc=null,Jo=0,(Mt&6)!==0)throw Error(r(331));var q=Mt;if(Mt|=4,zz(k.current),Rz(k,k.current,B,p),Mt=q,nm(0,!1),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Fn,k)}catch{}return!0}finally{Y.p=E,G.T=y,t4(l,d)}}function r4(l,d,p){d=Aa(p,d),d=lT(l.stateNode,d,2),l=ac(l,d,2),l!==null&&(wu(l,2),Zs(l))}function qt(l,d,p){if(l.tag===3)r4(l,l,p);else for(;d!==null;){if(d.tag===3){r4(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(dc===null||!dc.has(y))){l=Aa(p,l),p=iz(2),y=ac(d,p,2),y!==null&&(az(p,y,d,l),wu(y,2),Zs(y));break}}d=d.return}}function OT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new zte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(TT=!0,E.add(p),l=Ute.bind(null,l,d,p),d.then(l,l))}function Ute(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,rn===l&&(Et&p)===p&&(Nn===4||Nn===3&&(Et&62914560)===Et&&300>yt()-fb?(Mt&2)===0&&Yf(l,0):AT|=p,Kf===Et&&(Kf=0)),Zs(l)}function i4(l,d){d===0&&(d=py()),l=Mu(l,d),l!==null&&(wu(l,d),Zs(l))}function $te(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),i4(l,p)}function qte(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),i4(l,p)}function Gte(l,d){return it(l,d)}var bb=null,Qf=null,RT=!1,xb=!1,MT=!1,pc=0;function Zs(l){l!==Qf&&l.next===null&&(Qf===null?bb=Qf=l:Qf=Qf.next=l),xb=!0,RT||(RT=!0,Kte())}function nm(l,d){if(!MT&&xb){MT=!0;do for(var p=!1,y=bb;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var B=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-Ft(42|l)+1)-1,k&=E&~(B&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,l4(y,k))}else k=Et,k=xa(y,y===rn?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||fi(y,k)||(p=!0,l4(y,k));y=y.next}while(p);MT=!1}}function Hte(){a4()}function a4(){xb=RT=!1;var l=0;pc!==0&&rne()&&(l=pc);for(var d=yt(),p=null,y=bb;y!==null;){var E=y.next,k=s4(y,d);k===0?(y.next=null,p===null?bb=E:p.next=E,E===null&&(Qf=p)):(p=y,(l!==0||(k&3)!==0)&&(xb=!0)),y=E}dr!==0&&dr!==5||nm(l),pc!==0&&(pc=0)}function s4(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var B=31-Ft(k),q=1<<B,re=E[B];re===-1?((q&p)===0||(q&y)!==0)&&(E[B]=uE(q,d)):re<=d&&(l.expiredLanes|=q),k&=~q}if(d=rn,p=Et,p=xa(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&($t===2||$t===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Vt(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||fi(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Vt(y),jo(p)){case 2:case 8:p=ze;break;case 32:p=gt;break;case 268435456:p=Zr;break;default:p=gt}return y=o4.bind(null,l),p=it(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Vt(y),l.callbackPriority=2,l.callbackNode=null,2}function o4(l,d){if(dr!==0&&dr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(yb()&&l.callbackNode!==p)return null;var y=Et;return y=xa(l,l===rn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Uz(l,y,d),s4(l,yt()),l.callbackNode!=null&&l.callbackNode===p?o4.bind(null,l):null)}function l4(l,d){if(yb())return null;Uz(l,d,!0)}function Kte(){ane(function(){(Mt&6)!==0?it(Qr,Hte):a4()})}function jT(){if(pc===0){var l=jf;l===0&&(l=xt,xt<<=1,(xt&261888)===0&&(xt=256)),pc=l}return pc}function c4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:wf(""+l)}function u4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function Wte(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=c4((E[kr]||null).action),B=y.submitter;B&&(d=(d=B[kr]||null)?c4(d.formAction):B.getAttribute("formAction"),d!==null&&(k=d,B=null));var q=new Gs("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(pc!==0){var re=B?u4(E,B):new FormData(E);nT(p,{pending:!0,data:re,method:E.method,action:k},null,re)}}else typeof k=="function"&&(q.preventDefault(),re=B?u4(E,B):new FormData(E),nT(p,{pending:!0,data:re,method:E.method,action:k},k,re))},currentTarget:E}]})}}for(var zT=0;zT<bE.length;zT++){var LT=bE[zT],Yte=LT.toLowerCase(),Xte=LT[0].toUpperCase()+LT.slice(1);os(Yte,"on"+Xte)}os(FM,"onAnimationEnd"),os(UM,"onAnimationIteration"),os($M,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(fte,"onTransitionRun"),os(hte,"onTransitionStart"),os(pte,"onTransitionCancel"),os(qM,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rm));function d4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var B=y.length-1;0<=B;B--){var q=y[B],re=q.instance,ge=q.currentTarget;if(q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){My(Te)}E.currentTarget=null,k=re}else for(B=0;B<y.length;B++){if(q=y[B],re=q.instance,ge=q.currentTarget,q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){My(Te)}E.currentTarget=null,k=re}}}}function St(l,d){var p=d[mf];p===void 0&&(p=d[mf]=new Set);var y=l+"__bubble";p.has(y)||(f4(d,l,2,!1),p.add(y))}function VT(l,d,p){var y=0;d&&(y|=4),f4(p,l,y,d)}var wb="_reactListening"+Math.random().toString(36).slice(2);function BT(l){if(!l[wb]){l[wb]=!0,gg.forEach(function(p){p!=="selectionchange"&&(Qte.has(p)||VT(p,!1,l),VT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[wb]||(d[wb]=!0,VT("selectionchange",!1,d))}}function f4(l,d,p,y){switch(F4(d)){case 2:var E=Tne;break;case 8:E=Ane;break;default:E=tA}p=E.bind(null,d,p,l),E=void 0,!ku||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function FT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var q=y.stateNode.containerInfo;if(q===E)break;if(B===4)for(B=y.return;B!==null;){var re=B.tag;if((re===3||re===4)&&B.stateNode.containerInfo===E)return;B=B.return}for(;q!==null;){if(B=Ls(q),B===null)return;if(re=B.tag,re===5||re===6||re===26||re===27){y=k=B;continue e}q=q.parentNode}}y=y.return}Yl(function(){var ge=k,Te=Sa(p),Ce=[];e:{var ye=GM.get(l);if(ye!==void 0){var we=Gs,$e=l;switch(l){case"keypress":if(Iu(p)===0)break e;case"keydown":case"keyup":we=Dy;break;case"focusin":$e="focus",we=Nu;break;case"focusout":$e="blur",we=Nu;break;case"beforeblur":case"afterblur":we=Nu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=_y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=j;break;case FM:case UM:case $M:we=Ty;break;case qM:we=H;break;case"scroll":case"scrollend":we=kg;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Vo;break;case"toggle":case"beforetoggle":we=ct}var at=(d&4)!==0,Zt=!at&&(l==="scroll"||l==="scrollend"),de=at?ye!==null?ye+"Capture":null:ye;at=[];for(var ce=ge,pe;ce!==null;){var ke=ce;if(pe=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||pe===null||de===null||(ke=rs(ce,de),ke!=null&&at.push(im(ce,ke,pe))),Zt)break;ce=ce.return}0<at.length&&(ye=new we(ye,$e,null,p,Te),Ce.push({event:ye,listeners:at}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",ye&&p!==Eg&&($e=p.relatedTarget||p.fromElement)&&(Ls($e)||$e[js]))break e;if((we||ye)&&(ye=Te.window===Te?Te:(ye=Te.ownerDocument)?ye.defaultView||ye.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ge,$e=$e?Ls($e):null,$e!==null&&(Zt=a($e),at=$e.tag,$e!==Zt||at!==5&&at!==27&&at!==6)&&($e=null)):(we=null,$e=ge),we!==$e)){if(at=Cg,ke="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(at=Vo,ke="onPointerLeave",de="onPointerEnter",ce="pointer"),Zt=we==null?ye:Xi(we),pe=$e==null?ye:Xi($e),ye=new at(ke,ce+"leave",we,p,Te),ye.target=Zt,ye.relatedTarget=pe,ke=null,Ls(Te)===ge&&(at=new at(de,ce+"enter",$e,p,Te),at.target=pe,at.relatedTarget=Zt,ke=at),Zt=ke,we&&$e)t:{for(at=Zte,de=we,ce=$e,pe=0,ke=de;ke;ke=at(ke))pe++;ke=0;for(var Je=ce;Je;Je=at(Je))ke++;for(;0<pe-ke;)de=at(de),pe--;for(;0<ke-pe;)ce=at(ce),ke--;for(;pe--;){if(de===ce||ce!==null&&de===ce.alternate){at=de;break t}de=at(de),ce=at(ce)}at=null}else at=null;we!==null&&h4(Ce,ye,we,at,!1),$e!==null&&Zt!==null&&h4(Ce,Zt,$e,at,!0)}}e:{if(ye=ge?Xi(ge):window,we=ye.nodeName&&ye.nodeName.toLowerCase(),we==="select"||we==="input"&&ye.type==="file")var Nt=PM;else if(CM(ye))if(NM)Nt=cte;else{Nt=ote;var We=ste}else we=ye.nodeName,!we||we.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&xf(ge.elementType)&&(Nt=PM):Nt=lte;if(Nt&&(Nt=Nt(l,ge))){IM(Ce,Nt,p,Te);break e}We&&We(l,ye,ge),l==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&wg(ye,"number",ye.value)}switch(We=ge?Xi(ge):window,l){case"focusin":(CM(We)||We.contentEditable==="true")&&(Cf=We,mE=ge,Og=null);break;case"focusout":Og=mE=Cf=null;break;case"mousedown":vE=!0;break;case"contextmenu":case"mouseup":case"dragend":vE=!1,VM(Ce,p,Te);break;case"selectionchange":if(dte)break;case"keydown":case"keyup":VM(Ce,p,Te)}var ft;if(Rt)e:{switch(l){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else kf?Du(l,p)&&(Tt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Tt="onCompositionStart");Tt&&(Ws&&p.locale!=="ko"&&(kf||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&kf&&(ft=Ag()):(qs=Te,Tg="value"in qs?qs.value:qs.textContent,kf=!0)),We=Sb(ge,Tt),0<We.length&&(Tt=new Ks(Tt,l,null,p,Te),Ce.push({event:Tt,listeners:We}),ft?Tt.data=ft:(ft=Af(p),ft!==null&&(Tt.data=ft)))),(ft=Ea?nte(l,p):rte(l,p))&&(Tt=Sb(ge,"onBeforeInput"),0<Tt.length&&(We=new Ks("onBeforeInput","beforeinput",null,p,Te),Ce.push({event:We,listeners:Tt}),We.data=ft)),Wte(Ce,l,ge,p,Te)}d4(Ce,d)})}function im(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Sb(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=rs(l,p),E!=null&&y.unshift(im(l,E,k)),E=rs(l,d),E!=null&&y.push(im(l,E,k))),l.tag===3)return y;l=l.return}return[]}function Zte(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function h4(l,d,p,y,E){for(var k=d._reactName,B=[];p!==null&&p!==y;){var q=p,re=q.alternate,ge=q.stateNode;if(q=q.tag,re!==null&&re===y)break;q!==5&&q!==26&&q!==27||ge===null||(re=ge,E?(ge=rs(p,k),ge!=null&&B.unshift(im(p,ge,re))):E||(ge=rs(p,k),ge!=null&&B.push(im(p,ge,re)))),p=p.return}B.length!==0&&l.push({event:d,listeners:B})}var Jte=/\r\n?/g,ene=/\u0000|\uFFFD/g;function p4(l){return(typeof l=="string"?l:""+l).replace(Jte,`
`).replace(ene,"")}function g4(l,d){return d=p4(d),p4(l)===d}function Qt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Ii(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Ii(l,""+y);break;case"className":Qi(l,"class",y);break;case"tabIndex":Qi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(l,p,y);break;case"style":_g(l,y,k);break;case"data":if(d!=="object"){Qi(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=wf(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Qt(l,d,"name",E.name,E,null),Qt(l,d,"formEncType",E.formEncType,E,null),Qt(l,d,"formMethod",E.formMethod,E,null),Qt(l,d,"formTarget",E.formTarget,E,null)):(Qt(l,d,"encType",E.encType,E,null),Qt(l,d,"method",E.method,E,null),Qt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=wf(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=ns);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=wf(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":St("beforetoggle",l),St("toggle",l),yf(l,"popover",y);break;case"xlinkActuate":Xn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Xn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Xn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Xn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Xn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Xn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":yf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Sy.get(p)||p,yf(l,p,y))}}function UT(l,d,p,y,E,k){switch(p){case"style":_g(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Ii(l,y):(typeof y=="number"||typeof y=="bigint")&&Ii(l,""+y);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"onClick":y!=null&&(l.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[kr]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):yf(l,p,y)}}}function $r(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",l),St("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var B=p[k];if(B!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,k,B,p,null)}}E&&Qt(l,d,"srcSet",p.srcSet,p,null),y&&Qt(l,d,"src",p.src,p,null);return;case"input":St("invalid",l);var q=k=B=E=null,re=null,ge=null;for(y in p)if(p.hasOwnProperty(y)){var Te=p[y];if(Te!=null)switch(y){case"name":E=Te;break;case"type":B=Te;break;case"checked":re=Te;break;case"defaultChecked":ge=Te;break;case"value":k=Te;break;case"defaultValue":q=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,d));break;default:Qt(l,d,y,Te,p,null)}}by(l,k,q,re,ge,B,E,!1);return;case"select":St("invalid",l),y=B=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":B=q;break;case"multiple":y=q;default:Qt(l,d,E,q,p,null)}d=k,p=B,l.multiple=!!y,d!=null?Gl(l,!!y,d,!1):p!=null&&Gl(l,!!y,p,!0);return;case"textarea":St("invalid",l),k=E=y=null;for(B in p)if(p.hasOwnProperty(B)&&(q=p[B],q!=null))switch(B){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Qt(l,d,B,q,p,null)}Hl(l,y,E,k);return;case"option":for(re in p)p.hasOwnProperty(re)&&(y=p[re],y!=null)&&(re==="selected"?l.selected=y&&typeof y!="function"&&typeof y!="symbol":Qt(l,d,re,y,p,null));return;case"dialog":St("beforetoggle",l),St("toggle",l),St("cancel",l),St("close",l);break;case"iframe":case"object":St("load",l);break;case"video":case"audio":for(y=0;y<rm.length;y++)St(rm[y],l);break;case"image":St("error",l),St("load",l);break;case"details":St("toggle",l);break;case"embed":case"source":case"link":St("error",l),St("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in p)if(p.hasOwnProperty(ge)&&(y=p[ge],y!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,ge,y,p,null)}return;default:if(xf(d)){for(Te in p)p.hasOwnProperty(Te)&&(y=p[Te],y!==void 0&&UT(l,d,Te,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Qt(l,d,q,y,p,null))}function tne(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,B=null,q=null,re=null,ge=null,Te=null;for(we in p){var Ce=p[we];if(p.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=Ce;default:y.hasOwnProperty(we)||Qt(l,d,we,null,y,Ce)}}for(var ye in y){var we=y[ye];if(Ce=p[ye],y.hasOwnProperty(ye)&&(we!=null||Ce!=null))switch(ye){case"type":k=we;break;case"name":E=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":B=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ce&&Qt(l,d,ye,we,y,Ce)}}bf(l,B,q,re,ge,Te,k,E);return;case"select":we=B=q=ye=null;for(k in p)if(re=p[k],p.hasOwnProperty(k)&&re!=null)switch(k){case"value":break;case"multiple":we=re;default:y.hasOwnProperty(k)||Qt(l,d,k,null,y,re)}for(E in y)if(k=y[E],re=p[E],y.hasOwnProperty(E)&&(k!=null||re!=null))switch(E){case"value":ye=k;break;case"defaultValue":q=k;break;case"multiple":B=k;default:k!==re&&Qt(l,d,E,k,y,re)}d=q,p=B,y=we,ye!=null?Gl(l,!!p,ye,!1):!!y!=!!p&&(d!=null?Gl(l,!!p,d,!0):Gl(l,!!p,p?[]:"",!1));return;case"textarea":we=ye=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Qt(l,d,q,null,y,E)}for(B in y)if(E=y[B],k=p[B],y.hasOwnProperty(B)&&(E!=null||k!=null))switch(B){case"value":ye=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Qt(l,d,B,E,y,k)}xy(l,ye,we);return;case"option":for(var $e in p)ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!y.hasOwnProperty($e)&&($e==="selected"?l.selected=!1:Qt(l,d,$e,null,y,ye));for(re in y)ye=y[re],we=p[re],y.hasOwnProperty(re)&&ye!==we&&(ye!=null||we!=null)&&(re==="selected"?l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Qt(l,d,re,ye,y,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in p)ye=p[at],p.hasOwnProperty(at)&&ye!=null&&!y.hasOwnProperty(at)&&Qt(l,d,at,null,y,ye);for(ge in y)if(ye=y[ge],we=p[ge],y.hasOwnProperty(ge)&&ye!==we&&(ye!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Qt(l,d,ge,ye,y,we)}return;default:if(xf(d)){for(var Zt in p)ye=p[Zt],p.hasOwnProperty(Zt)&&ye!==void 0&&!y.hasOwnProperty(Zt)&&UT(l,d,Zt,void 0,y,ye);for(Te in y)ye=y[Te],we=p[Te],!y.hasOwnProperty(Te)||ye===we||ye===void 0&&we===void 0||UT(l,d,Te,ye,y,we);return}}for(var de in p)ye=p[de],p.hasOwnProperty(de)&&ye!=null&&!y.hasOwnProperty(de)&&Qt(l,d,de,null,y,ye);for(Ce in y)ye=y[Ce],we=p[Ce],!y.hasOwnProperty(Ce)||ye===we||ye==null&&we==null||Qt(l,d,Ce,ye,y,we)}function m4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nne(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,B=E.initiatorType,q=E.duration;if(k&&q&&m4(B)){for(B=0,q=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],ge=re.startTime;if(ge>q)break;var Te=re.transferSize,Ce=re.initiatorType;Te&&m4(Ce)&&(re=re.responseEnd,B+=Te*(re<q?1:(q-ge)/(re-ge)))}if(--y,d+=8*(k+B)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var $T=null,qT=null;function _b(l){return l.nodeType===9?l:l.ownerDocument}function v4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function GT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var HT=null;function rne(){var l=window.event;return l&&l.type==="popstate"?l===HT?!1:(HT=l,!0):(HT=null,!1)}var b4=typeof setTimeout=="function"?setTimeout:void 0,ine=typeof clearTimeout=="function"?clearTimeout:void 0,x4=typeof Promise=="function"?Promise:void 0,ane=typeof queueMicrotask=="function"?queueMicrotask:typeof x4<"u"?function(l){return x4.resolve(null).then(l).catch(sne)}:b4;function sne(l){setTimeout(function(){throw l})}function gc(l){return l==="head"}function w4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),th(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")am(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,am(p);for(var k=p.firstChild;k;){var B=k.nextSibling,q=k.nodeName;k[zs]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=B}}else p==="body"&&am(l.ownerDocument.body);p=E}while(p);th(d)}function S4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function KT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":KT(p),vf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function one(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[zs])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Na(l.nextSibling),l===null)break}return null}function lne(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Na(l.nextSibling),l===null))return null;return l}function _4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Na(l.nextSibling),l===null))return null;return l}function WT(l){return l.data==="$?"||l.data==="$~"}function YT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function cne(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Na(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var XT=null;function E4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Na(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function T4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function A4(l,d,p){switch(d=_b(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function am(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);vf(l)}var Da=new Map,k4=new Set;function Eb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var el=Y.d;Y.d={f:une,r:dne,D:fne,C:hne,L:pne,m:gne,X:vne,S:mne,M:yne};function une(){var l=el.f(),d=gb();return l||d}function dne(l){var d=wa(l);d!==null&&d.tag===5&&d.type==="form"?qj(d):el.r(l)}var Zf=typeof document>"u"?null:document;function C4(l,d,p){var y=Zf;if(y&&typeof d=="string"&&d){var E=Ci(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),k4.has(E)||(k4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),$r(d,"link",l),Yn(d),y.head.appendChild(d)))}}function fne(l){el.D(l),C4("dns-prefetch",l,null)}function hne(l,d){el.C(l,d),C4("preconnect",l,d)}function pne(l,d,p){el.L(l,d,p);var y=Zf;if(y&&l&&d){var E='link[rel="preload"][as="'+Ci(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ci(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ci(p.imageSizes)+'"]')):E+='[href="'+Ci(l)+'"]';var k=E;switch(d){case"style":k=Jf(l);break;case"script":k=eh(l)}Da.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Da.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(sm(k))||d==="script"&&y.querySelector(om(k))||(d=y.createElement("link"),$r(d,"link",l),Yn(d),y.head.appendChild(d)))}}function gne(l,d){el.m(l,d);var p=Zf;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ci(y)+'"][href="'+Ci(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=eh(l)}if(!Da.has(k)&&(l=h({rel:"modulepreload",href:l},d),Da.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(om(k)))return}y=p.createElement("link"),$r(y,"link",l),Yn(y),p.head.appendChild(y)}}}function mne(l,d,p){el.S(l,d,p);var y=Zf;if(y&&l){var E=Vs(y).hoistableStyles,k=Jf(l);d=d||"default";var B=E.get(k);if(!B){var q={loading:0,preload:null};if(B=y.querySelector(sm(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Da.get(k))&&QT(l,p);var re=B=y.createElement("link");Yn(re),$r(re,"link",l),re._p=new Promise(function(ge,Te){re.onload=ge,re.onerror=Te}),re.addEventListener("load",function(){q.loading|=1}),re.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Tb(B,d,y)}B={type:"stylesheet",instance:B,count:1,state:q},E.set(k,B)}}}function vne(l,d){el.X(l,d);var p=Zf;if(p&&l){var y=Vs(p).hoistableScripts,E=eh(l),k=y.get(E);k||(k=p.querySelector(om(E)),k||(l=h({src:l,async:!0},d),(d=Da.get(E))&&ZT(l,d),k=p.createElement("script"),Yn(k),$r(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function yne(l,d){el.M(l,d);var p=Zf;if(p&&l){var y=Vs(p).hoistableScripts,E=eh(l),k=y.get(E);k||(k=p.querySelector(om(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Da.get(E))&&ZT(l,d),k=p.createElement("script"),Yn(k),$r(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function I4(l,d,p,y){var E=(E=ie.current)?Eb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Jf(p.href),p=Vs(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Jf(p.href);var k=Vs(E).hoistableStyles,B=k.get(l);if(B||(E=E.ownerDocument||E,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,B),(k=E.querySelector(sm(l)))&&!k._p&&(B.instance=k,B.state.loading=5),Da.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Da.set(l,p),k||bne(E,l,p,B.state))),d&&y===null)throw Error(r(528,""));return B}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=eh(p),p=Vs(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Jf(l){return'href="'+Ci(l)+'"'}function sm(l){return'link[rel="stylesheet"]['+l+"]"}function P4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function bne(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),$r(d,"link",p),Yn(d),l.head.appendChild(d))}function eh(l){return'[src="'+Ci(l)+'"]'}function om(l){return"script[async]"+l}function N4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ci(p.href)+'"]');if(y)return d.instance=y,Yn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Yn(y),$r(y,"style",E),Tb(y,p.precedence,l),d.instance=y;case"stylesheet":E=Jf(p.href);var k=l.querySelector(sm(E));if(k)return d.state.loading|=4,d.instance=k,Yn(k),k;y=P4(p),(E=Da.get(E))&&QT(y,E),k=(l.ownerDocument||l).createElement("link"),Yn(k);var B=k;return B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),$r(k,"link",y),d.state.loading|=4,Tb(k,p.precedence,l),d.instance=k;case"script":return k=eh(p.src),(E=l.querySelector(om(k)))?(d.instance=E,Yn(E),E):(y=p,(E=Da.get(k))&&(y=h({},p),ZT(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Yn(E),$r(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,Tb(y,p.precedence,l));return d.instance}function Tb(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,B=0;B<y.length;B++){var q=y[B];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function QT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function ZT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Ab=null;function D4(l,d,p){if(Ab===null){var y=new Map,E=Ab=new Map;E.set(p,y)}else E=Ab,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[zs]||k[Wn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var B=k.getAttribute(d)||"";B=l+B;var q=y.get(B);q?q.push(k):y.set(B,[k])}}return y}function O4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function xne(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function R4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function wne(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Jf(y.href),k=d.querySelector(sm(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=kb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,Yn(k);return}k=d.ownerDocument||d,y=P4(y),(E=Da.get(E))&&QT(y,E),k=k.createElement("link"),Yn(k);var B=k;B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),$r(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=kb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var JT=0;function Sne(l,d){return l.stylesheets&&l.count===0&&Ib(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&Ib(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&JT===0&&(JT=62500*nne());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Ib(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>JT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function kb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ib(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Cb=null;function Ib(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Cb=new Map,d.forEach(_ne,l),Cb=null,kb.call(l))}function _ne(l,d){if(!(d.state.loading&4)){var p=Cb.get(l);if(p)var y=p.get(null);else{p=new Map,Cb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var B=E[k];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(p.set(B.dataset.precedence,B),y=B)}y&&p.set(null,y)}E=d.instance,B=E.getAttribute("data-precedence"),k=p.get(B)||y,k===y&&p.set(null,E),p.set(B,E),this.count++,y=kb.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var lm={$$typeof:P,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Ene(l,d,p,y,E,k,B,q,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.hiddenUpdates=Ms(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function M4(l,d,p,y,E,k,B,q,re,ge,Te,Ce){return l=new Ene(l,d,p,B,re,ge,Te,Ce,q),d=1,k===!0&&(d|=24),k=Ji(3,null,null,d),l.current=k,k.stateNode=l,d=DE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},jE(k),l}function j4(l){return l?(l=Nf,l):Nf}function z4(l,d,p,y,E,k){E=j4(E),y.context===null?y.context=E:y.pendingContext=E,y=ic(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=ac(l,y,d),p!==null&&(Ri(p,l,d),Bg(p,l,d))}function L4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function eA(l,d){L4(l,d),(l=l.alternate)&&L4(l,d)}function V4(l){if(l.tag===13||l.tag===31){var d=Mu(l,67108864);d!==null&&Ri(d,l,67108864),eA(l,67108864)}}function B4(l){if(l.tag===13||l.tag===31){var d=ia();d=_u(d);var p=Mu(l,d);p!==null&&Ri(p,l,d),eA(l,d)}}var Pb=!0;function Tne(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=2,tA(l,d,p,y)}finally{Y.p=k,G.T=E}}function Ane(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=8,tA(l,d,p,y)}finally{Y.p=k,G.T=E}}function tA(l,d,p,y){if(Pb){var E=nA(y);if(E===null)FT(l,d,y,Nb,p),U4(l,y);else if(Cne(E,l,d,p,y))y.stopPropagation();else if(U4(l,y),d&4&&-1<kne.indexOf(l)){for(;E!==null;){var k=wa(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var B=Yi(k.pendingLanes);if(B!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;B;){var re=1<<31-Ft(B);q.entanglements[1]|=re,B&=~re}Zs(k),(Mt&6)===0&&(hb=yt()+500,nm(0))}}break;case 31:case 13:q=Mu(k,2),q!==null&&Ri(q,k,2),gb(),eA(k,2)}if(k=nA(y),k===null&&FT(l,d,y,Nb,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else FT(l,d,y,null,p)}}function nA(l){return l=Sa(l),rA(l)}var Nb=null;function rA(l){if(Nb=null,l=Ls(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Nb=l,null}function F4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bt()){case Qr:return 2;case ze:return 8;case gt:case ki:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var iA=!1,mc=null,vc=null,yc=null,cm=new Map,um=new Map,bc=[],kne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U4(l,d){switch(l){case"focusin":case"focusout":mc=null;break;case"dragenter":case"dragleave":vc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":cm.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":um.delete(d.pointerId)}}function dm(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=wa(d),d!==null&&V4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Cne(l,d,p,y,E){switch(d){case"focusin":return mc=dm(mc,l,d,p,y,E),!0;case"dragenter":return vc=dm(vc,l,d,p,y,E),!0;case"mouseover":return yc=dm(yc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return cm.set(k,dm(cm.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,um.set(k,dm(um.get(k)||null,l,d,p,y,E)),!0}return!1}function $4(l){var d=Ls(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,es(l.priority,function(){B4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,es(l.priority,function(){B4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Db(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=nA(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);Eg=y,p.target.dispatchEvent(y),Eg=null}else return d=wa(p),d!==null&&V4(d),l.blockedOn=p,!1;d.shift()}return!0}function q4(l,d,p){Db(l)&&p.delete(d)}function Ine(){iA=!1,mc!==null&&Db(mc)&&(mc=null),vc!==null&&Db(vc)&&(vc=null),yc!==null&&Db(yc)&&(yc=null),cm.forEach(q4),um.forEach(q4)}function Ob(l,d){l.blockedOn===d&&(l.blockedOn=null,iA||(iA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ine)))}var Rb=null;function G4(l){Rb!==l&&(Rb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rb===l&&(Rb=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if(rA(y||p)===null)continue;break}var k=wa(p);k!==null&&(l.splice(d,3),d-=3,nT(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function th(l){function d(re){return Ob(re,l)}mc!==null&&Ob(mc,l),vc!==null&&Ob(vc,l),yc!==null&&Ob(yc,l),cm.forEach(d),um.forEach(d);for(var p=0;p<bc.length;p++){var y=bc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<bc.length&&(p=bc[0],p.blockedOn===null);)$4(p),p.blockedOn===null&&bc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],B=E[kr]||null;if(typeof k=="function")B||G4(p);else if(B){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,B=k[kr]||null)q=B.formAction;else if(rA(E)!==null)continue}else q=B.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),G4(p)}}}function H4(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(B){return E=B})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function aA(l){this._internalRoot=l}Mb.prototype.render=aA.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=ia();z4(p,y,l,d,null,null)},Mb.prototype.unmount=aA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;z4(l.current,2,null,l,null,null),gb(),d[js]=null}};function Mb(l){this._internalRoot=l}Mb.prototype.unstable_scheduleHydration=function(l){if(l){var d=gy();l={blockedOn:null,target:l,priority:d};for(var p=0;p<bc.length&&d!==0&&d<bc[p].priority;p++);bc.splice(p,0,l),p===0&&$4(l)}};var K4=e.version;if(K4!=="19.2.4")throw Error(r(527,K4,"19.2.4"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var Pne={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jb.isDisabled&&jb.supportsFiber)try{Fn=jb.inject(Pne),wn=jb}catch{}}return hm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=ez,k=tz,B=nz;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=M4(l,1,!1,null,null,p,y,null,E,k,B,H4),l[js]=d.current,BT(l),new aA(d)},hm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=ez,B=tz,q=nz,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=M4(l,1,!0,d,p??null,y,E,re,k,B,q,H4),d.context=j4(null),p=d.current,y=ia(),y=_u(y),E=ic(y),E.callback=null,ac(p,E,y),p=y,d.current.lanes=p,wu(d,p),Zs(d),l[js]=d.current,BT(l),new Mb(d)},hm.version="19.2.4",hm}var rL;function Fne(){if(rL)return lA.exports;rL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lA.exports=Bne(),lA.exports}var Une=Fne();const $ne="modulepreload",qne=function(t){return"/personal-budget-pwa/"+t},iL={},Xh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=qne(u),u in iL)return;iL[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":$ne,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Gne(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Xh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const Hne=()=>{};var aL={};const G9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Kne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},BN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G9(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new Wne;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yne=function(t){const e=G9(t);return BN.encodeByteArray(e,!0)},H9=function(t){return Yne(t).replace(/\./g,"")},K9=function(t){try{return BN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Xne=()=>FN().__FIREBASE_DEFAULTS__,Qne=()=>{if(typeof process>"u"||typeof aL>"u")return;const t=aL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&K9(t[1]);return e&&JSON.parse(e)},pS=()=>{try{return Hne()||Xne()||Qne()||Zne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W9=t=>pS()?.emulatorHosts?.[t],Jne=t=>{const e=W9(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y9=()=>pS()?.config,X9=t=>pS()?.[`_${t}`];class yv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function lu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UN(t){return(await fetch(t,{credentials:"include"})).ok}const Xm={};function ere(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xm))Xm[e]?t.emulator.push(e):t.prod.push(e);return t}function tre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sL=!1;function Q9(t,e){if(typeof window>"u"||typeof document>"u"||!lu(window.location.host)||Xm[t]===e||Xm[t]||sL)return;Xm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=ere().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{sL=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=tre(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;o(P),f(w,x);const N=u();c(T,S),P.append(T,b,w,N),document.body.appendChild(P)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function Z9(){const t=pS()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ire(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function are(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sre(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function J9(){return!Z9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e8(){return!Z9()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function ore(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const lre="FirebaseError";class No extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lre,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jp.prototype.create)}}class jp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?cre(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new No(i,o,r)}}function cre(t,e){return t.replace(ure,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ure=/\{\$([^}]+)}/g;function dre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(oL(a)&&oL(s)){if(!Xc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function oL(t){return t!==null&&typeof t=="object"}function h0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Mm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fre(t,e){const n=new hre(t,e);return n.subscribe.bind(n)}class hre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pre(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=fA),i.error===void 0&&(i.error=fA),i.complete===void 0&&(i.complete=fA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pre(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fA(){}const gre=1e3,mre=2,vre=14400*1e3,yre=.5;function bre(t,e=gre,n=mre){const r=e*Math.pow(n,t),i=Math.round(yre*r*(Math.random()-.5)*2);return Math.min(vre,r+i)}function zt(t){return t&&t._delegate?t._delegate:t}let _o=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Ju="[DEFAULT]";let xre=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sre(e))try{this.getOrInitializeService({instanceIdentifier:Ju})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ju){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ju){return this.instances.has(e)}getOptions(e=Ju){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ju){return this.component?this.component.multipleInstances?e:Ju:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wre(t){return t===Ju?void 0:t}function Sre(t){return t.instantiationMode==="EAGER"}class _re{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const Ere={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},Tre=At.INFO,Are={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},kre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Are[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let mS=class{constructor(e){this.name=e,this._logLevel=Tre,this._logHandler=kre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ere[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}};const Cre=(t,e)=>e.some(n=>t instanceof n);let lL,cL;function Ire(){return lL||(lL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pre(){return cL||(cL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t8=new WeakMap,JC=new WeakMap,n8=new WeakMap,hA=new WeakMap,$N=new WeakMap;function Nre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Uc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&t8.set(n,t)}).catch(()=>{}),$N.set(e,t),e}function Dre(t){if(JC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});JC.set(t,e)}let eI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return JC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ore(t){eI=t(eI)}function Rre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pA(this),e,...n);return n8.set(r,e.sort?e.sort():[e]),Uc(r)}:Pre().includes(t)?function(...e){return t.apply(pA(this),e),Uc(t8.get(this))}:function(...e){return Uc(t.apply(pA(this),e))}}function Mre(t){return typeof t=="function"?Rre(t):(t instanceof IDBTransaction&&Dre(t),Cre(t,Ire())?new Proxy(t,eI):t)}function Uc(t){if(t instanceof IDBRequest)return Nre(t);if(hA.has(t))return hA.get(t);const e=Mre(t);return e!==t&&(hA.set(t,e),$N.set(e,t)),e}const pA=t=>$N.get(t);function jre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Uc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Uc(s.result),c.oldVersion,c.newVersion,Uc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const zre=["get","getKey","getAll","getAllKeys","count"],Lre=["put","add","delete","clear"],gA=new Map;function uL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gA.get(e))return gA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Lre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return gA.set(e,a),a}Ore(t=>({...t,get:(e,n,r)=>uL(e,n)||t.get(e,n,r),has:(e,n)=>!!uL(e,n)||t.has(e,n)}));class Vre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bre(t){return t.getComponent()?.type==="VERSION"}const tI="@firebase/app",dL="0.14.8";const yl=new mS("@firebase/app"),Fre="@firebase/app-compat",Ure="@firebase/analytics-compat",$re="@firebase/analytics",qre="@firebase/app-check-compat",Gre="@firebase/app-check",Hre="@firebase/auth",Kre="@firebase/auth-compat",Wre="@firebase/database",Yre="@firebase/data-connect",Xre="@firebase/database-compat",Qre="@firebase/functions",Zre="@firebase/functions-compat",Jre="@firebase/installations",eie="@firebase/installations-compat",tie="@firebase/messaging",nie="@firebase/messaging-compat",rie="@firebase/performance",iie="@firebase/performance-compat",aie="@firebase/remote-config",sie="@firebase/remote-config-compat",oie="@firebase/storage",lie="@firebase/storage-compat",cie="@firebase/firestore",uie="@firebase/ai",die="@firebase/firestore-compat",fie="firebase",hie="12.9.0";const nI="[DEFAULT]",pie={[tI]:"fire-core",[Fre]:"fire-core-compat",[$re]:"fire-analytics",[Ure]:"fire-analytics-compat",[Gre]:"fire-app-check",[qre]:"fire-app-check-compat",[Hre]:"fire-auth",[Kre]:"fire-auth-compat",[Wre]:"fire-rtdb",[Yre]:"fire-data-connect",[Xre]:"fire-rtdb-compat",[Qre]:"fire-fn",[Zre]:"fire-fn-compat",[Jre]:"fire-iid",[eie]:"fire-iid-compat",[tie]:"fire-fcm",[nie]:"fire-fcm-compat",[rie]:"fire-perf",[iie]:"fire-perf-compat",[aie]:"fire-rc",[sie]:"fire-rc-compat",[oie]:"fire-gcs",[lie]:"fire-gcs-compat",[cie]:"fire-fst",[die]:"fire-fst-compat",[uie]:"fire-vertex","fire-js":"fire-js",[fie]:"fire-js-all"};const vw=new Map,gie=new Map,rI=new Map;function fL(t,e){try{t.container.addComponent(e)}catch(n){yl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bl(t){const e=t.name;if(rI.has(e))return yl.debug(`There were multiple attempts to register component ${e}.`),!1;rI.set(e,t);for(const n of vw.values())fL(n,t);for(const n of gie.values())fL(n,t);return!0}function zp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ua(t){return t==null?!1:t.settings!==void 0}const mie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$c=new jp("app","Firebase",mie);class vie{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $c.create("app-deleted",{appName:this._name})}}const Lp=hie;function r8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw $c.create("bad-app-name",{appName:String(i)});if(n||(n=Y9()),!n)throw $c.create("no-options");const a=vw.get(i);if(a){if(Xc(n,a.options)&&Xc(r,a.config))return a;throw $c.create("duplicate-app",{appName:i})}const s=new _re(i);for(const c of rI.values())s.addComponent(c);const o=new vie(n,r,s);return vw.set(i,o),o}function qN(t=nI){const e=vw.get(t);if(!e&&t===nI&&Y9())return r8();if(!e)throw $c.create("no-app",{appName:t});return e}function xs(t,e,n){let r=pie[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yl.warn(s.join(" "));return}bl(new _o(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const yie="firebase-heartbeat-database",bie=1,bv="firebase-heartbeat-store";let mA=null;function i8(){return mA||(mA=jre(yie,bie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bv)}catch(n){console.warn(n)}}}}).catch(t=>{throw $c.create("idb-open",{originalErrorMessage:t.message})})),mA}async function xie(t){try{const n=(await i8()).transaction(bv),r=await n.objectStore(bv).get(a8(t));return await n.done,r}catch(e){if(e instanceof No)yl.warn(e.message);else{const n=$c.create("idb-get",{originalErrorMessage:e?.message});yl.warn(n.message)}}}async function hL(t,e){try{const r=(await i8()).transaction(bv,"readwrite");await r.objectStore(bv).put(e,a8(t)),await r.done}catch(n){if(n instanceof No)yl.warn(n.message);else{const r=$c.create("idb-set",{originalErrorMessage:n?.message});yl.warn(r.message)}}}function a8(t){return`${t.name}!${t.options.appId}`}const wie=1024,Sie=30;class _ie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pL();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Sie){const i=Aie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pL(),{heartbeatsToSend:n,unsentEntries:r}=Eie(this._heartbeatsCache.heartbeats),i=H9(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return yl.warn(e),""}}}function pL(){return new Date().toISOString().substring(0,10)}function Eie(t,e=wie){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),gL(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Tie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?ore().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gL(t){return H9(JSON.stringify({version:2,heartbeats:t})).length}function Aie(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function kie(t){bl(new _o("platform-logger",e=>new Vre(e),"PRIVATE")),bl(new _o("heartbeat",e=>new _ie(e),"PRIVATE")),xs(tI,dL,t),xs(tI,dL,"esm2020"),xs("fire-js","")}kie("");function s8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cie=s8,o8=new jp("auth","Firebase",s8());const yw=new mS("@firebase/auth");function Iie(t,...e){yw.logLevel<=At.WARN&&yw.warn(`Auth (${Lp}): ${t}`,...e)}function zx(t,...e){yw.logLevel<=At.ERROR&&yw.error(`Auth (${Lp}): ${t}`,...e)}function ks(t,...e){throw GN(t,...e)}function mo(t,...e){return GN(t,...e)}function l8(t,e,n){const r={...Cie(),[e]:n};return new jp("auth","Firebase",r).create(e,{appName:t.name})}function dl(t){return l8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return o8.create(t,...e)}function nt(t,e,...n){if(!t)throw GN(e,...n)}function al(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zx(e),new Error(e)}function xl(t,e){t||al(e)}function iI(){return typeof self<"u"&&self.location?.href||""}function Pie(){return mL()==="http:"||mL()==="https:"}function mL(){return typeof self<"u"&&self.location?.protocol||null}function Nie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pie()||ire()||"connection"in navigator)?navigator.onLine:!0}function Die(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class p0{constructor(e,n){this.shortDelay=e,this.longDelay=n,xl(n>e,"Short delay should be less than long delay!"),this.isMobile=nre()||are()}get(){return Nie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function HN(t,e){xl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class c8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Rie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mie=new p0(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wa(t,e,n,r,i={}){return u8(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=h0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return rre()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&lu(t.emulatorConfig.host)&&(u.credentials="include"),c8.fetch()(await d8(t,t.config.apiHost,n,o),u)})}async function u8(t,e,n){t._canInitEmulator=!1;const r={...Oie,...e};try{const i=new zie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw zb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw zb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw zb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l8(t,f,u);ks(t,f)}}catch(i){if(i instanceof No)throw i;ks(t,"network-request-failed",{message:String(i)})}}async function g0(t,e,n,r,i={}){const a=await Wa(t,e,n,r,i);return"mfaPendingCredential"in a&&ks(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function d8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?HN(t.config,i):`${t.config.apiScheme}://${i}`;return Rie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function jie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mo(this.auth,"network-request-failed")),Mie.get())})}}function zb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mo(t,e,r);return i.customData._tokenResponse=n,i}function vL(t){return t!==void 0&&t.enterprise!==void 0}class Lie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Vie(t,e){return Wa(t,"GET","/v2/recaptchaConfig",Ds(t,e))}async function Bie(t,e){return Wa(t,"POST","/v1/accounts:delete",e)}async function bw(t,e){return Wa(t,"POST","/v1/accounts:lookup",e)}function Qm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fie(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=KN(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Qm(vA(i.auth_time)),issuedAtTime:Qm(vA(i.iat)),expirationTime:Qm(vA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function vA(t){return Number(t)*1e3}function KN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zx("JWT malformed, contained fewer than 3 sections"),null;try{const i=K9(n);return i?JSON.parse(i):(zx("Failed to decode base64 JWT payload"),null)}catch(i){return zx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yL(t){const e=KN(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Qh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof No&&Uie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Uie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class $ie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class aI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qm(this.lastLoginAt),this.creationTime=Qm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xw(t){const e=t.auth,n=await t.getIdToken(),r=await Qh(t,bw(e,{idToken:n}));nt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?f8(i.providerUserInfo):[],s=Gie(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new aI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function qie(t){const e=zt(t);await xw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function f8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Hie(t,e){const n=await u8(t,{},async()=>{const r=h0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await d8(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&lu(t.emulatorConfig.host)&&(c.credentials="include"),c8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kie(t,e){return Wa(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}class Vh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=yL(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Hie(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Vh;return r&&(nt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(nt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vh,this.toJSON())}_performRefresh(){return al("not implemented")}}function wc(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new $ie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new aI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Qh(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Fie(this,e)}reload(){return qie(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(dl(this.auth));const e=await this.getIdToken();return await Qh(this,Bie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;nt(h&&x,e,"internal-error");const w=Vh.fromJSON(this.name,x);nt(typeof h=="string",e,"internal-error"),wc(r,e.name),wc(i,e.name),nt(typeof g=="boolean",e,"internal-error"),nt(typeof v=="boolean",e,"internal-error"),wc(a,e.name),wc(s,e.name),wc(o,e.name),wc(c,e.name),wc(u,e.name),wc(f,e.name);const S=new ys({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vh;i.updateFromServerResponse(n);const a=new ys({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?f8(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Vh;o.updateFromIdToken(r);const c=new ys({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new aI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const bL=new Map;function sl(t){xl(t instanceof Function,"Expected a class definition");let e=bL.get(t);return e?(xl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bL.set(t,e),e)}class h8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}h8.type="NONE";const xL=h8;function Lx(t,e,n){return`firebase:${t}:${e}:${n}`}class Bh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Lx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Lx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bw(this.auth,{idToken:e}).catch(()=>{});return n?ys._fromGetAccountInfoResponse(this.auth,n,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bh(sl(xL),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||sl(xL);const s=Lx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await bw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await ys._fromGetAccountInfoResponse(e,g,f)}else h=ys._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Bh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Bh(a,e,r))}}function wL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b8(e))return"Blackberry";if(x8(e))return"Webos";if(g8(e))return"Safari";if((e.includes("chrome/")||m8(e))&&!e.includes("edge/"))return"Chrome";if(y8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function p8(t=xr()){return/firefox\//i.test(t)}function g8(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m8(t=xr()){return/crios\//i.test(t)}function v8(t=xr()){return/iemobile/i.test(t)}function y8(t=xr()){return/android/i.test(t)}function b8(t=xr()){return/blackberry/i.test(t)}function x8(t=xr()){return/webos/i.test(t)}function WN(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wie(t=xr()){return WN(t)&&!!window.navigator?.standalone}function Yie(){return sre()&&document.documentMode===10}function w8(t=xr()){return WN(t)||y8(t)||x8(t)||b8(t)||/windows phone/i.test(t)||v8(t)}function S8(t,e=[]){let n;switch(t){case"Browser":n=wL(xr());break;case"Worker":n=`${wL(xr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lp}/${r}`}class Xie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Qie(t,e={}){return Wa(t,"GET","/v2/passwordPolicy",Ds(t,e))}const Zie=6;class Jie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Zie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class eae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SL(this),this.idTokenSubscription=new SL(this),this.beforeStateQueue=new Xie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sl(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bw(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ua(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Die()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(dl(this));const n=e?zt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qie(this),n=new Jie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sl(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Bh.create(this,[sl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Iie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cu(t){return zt(t)}class SL{constructor(e){this.auth=e,this.observer=null,this.addObserver=fre(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tae(t){vS=t}function _8(t){return vS.loadJS(t)}function nae(){return vS.recaptchaEnterpriseScript}function rae(){return vS.gapiScript}function iae(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class aae{constructor(){this.enterprise=new sae}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sae{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oae="recaptcha-enterprise",E8="NO_RECAPTCHA";class lae{constructor(e){this.type=oae,this.auth=cu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Vie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Lie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;vL(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(E8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aae().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&vL(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nae();c.length!==0&&(c+=o),_8(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function _L(t,e,n,r=!1,i=!1){const a=new lae(t);let s;if(i)s=E8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ww(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _L(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await _L(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function cae(t,e){const n=zp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Xc(a,e??{}))return i;ks(i,"already-initialized")}return n.initialize({options:e})}function uae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(sl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dae(t,e,n){const r=cu(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=T8(e),{host:s,port:o}=fae(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(Xc(u,r.config.emulator)&&Xc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,lu(s)?(UN(`${a}//${s}${c}`),Q9("Auth",!0)):hae()}function T8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fae(t){const e=T8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:EL(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:EL(s)}}}function EL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hae(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class YN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return al("not implemented")}_getIdTokenResponse(e){return al("not implemented")}_linkToIdToken(e,n){return al("not implemented")}_getReauthenticationResolver(e){return al("not implemented")}}async function pae(t,e){return Wa(t,"POST","/v1/accounts:resetPassword",Ds(t,e))}async function gae(t,e){return Wa(t,"POST","/v1/accounts:signUp",e)}async function mae(t,e){return Wa(t,"POST","/v1/accounts:update",Ds(t,e))}async function vae(t,e){return g0(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}async function A8(t,e){return Wa(t,"POST","/v1/accounts:sendOobCode",Ds(t,e))}async function yae(t,e){return A8(t,e)}async function bae(t,e){return A8(t,e)}async function xae(t,e){return g0(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function wae(t,e){return g0(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}class xv extends YN{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new xv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ww(e,n,"signInWithPassword",vae);case"emailLink":return xae(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ww(e,r,"signUpPassword",gae);case"emailLink":return wae(e,{idToken:n,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fh(t,e){return g0(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}const Sae="http://localhost";class Rd extends YN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Rd(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Fh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fh(e,n)}buildRequest(){const e={requestUri:Sae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=h0(n)}return e}}function _ae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Eae(t){const e=Rm(Mm(t)).link,n=e?Rm(Mm(e)).deep_link_id:null,r=Rm(Mm(t)).deep_link_id;return(r?Rm(Mm(r)).link:null)||r||n||e||t}class XN{constructor(e){const n=Rm(Mm(e)),r=n.apiKey??null,i=n.oobCode??null,a=_ae(n.mode??null);nt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Eae(e);try{return new XN(n)}catch{return null}}}class af{constructor(){this.providerId=af.PROVIDER_ID}static credential(e,n){return xv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=XN.parseLink(n);return nt(r,"argument-error"),xv._fromEmailAndCode(e,r.code,r.tenantId)}}af.PROVIDER_ID="password";af.EMAIL_PASSWORD_SIGN_IN_METHOD="password";af.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class k8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class m0 extends k8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ic extends m0{constructor(){super("facebook.com")}static credential(e){return Rd._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ic.credential(e.oauthAccessToken)}catch{return null}}}Ic.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ic.PROVIDER_ID="facebook.com";class Pc extends m0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rd._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pc.credential(n,r)}catch{return null}}}Pc.GOOGLE_SIGN_IN_METHOD="google.com";Pc.PROVIDER_ID="google.com";class Nc extends m0{constructor(){super("github.com")}static credential(e){return Rd._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nc.credential(e.oauthAccessToken)}catch{return null}}}Nc.GITHUB_SIGN_IN_METHOD="github.com";Nc.PROVIDER_ID="github.com";class Dc extends m0{constructor(){super("twitter.com")}static credential(e,n){return Rd._fromParams({providerId:Dc.PROVIDER_ID,signInMethod:Dc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Dc.credentialFromTaggedObject(e)}static credentialFromError(e){return Dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Dc.credential(n,r)}catch{return null}}}Dc.TWITTER_SIGN_IN_METHOD="twitter.com";Dc.PROVIDER_ID="twitter.com";async function Tae(t,e){return g0(t,"POST","/v1/accounts:signUp",Ds(t,e))}class Md{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ys._fromIdTokenResponse(e,r,i),s=TL(r);return new Md({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=TL(r);return new Md({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function TL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Sw extends No{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Sw(e,n,r,i)}}function C8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sw._fromErrorAndOperation(t,a,e,r):a})}async function Aae(t,e,n=!1){const r=await Qh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Md._forOperation(t,"link",r)}async function I8(t,e,n=!1){const{auth:r}=t;if(ua(r.app))return Promise.reject(dl(r));const i="reauthenticate";try{const a=await Qh(t,C8(r,i,e,t),n);nt(a.idToken,r,"internal-error");const s=KN(a.idToken);nt(s,r,"internal-error");const{sub:o}=s;return nt(t.uid===o,r,"user-mismatch"),Md._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ks(r,"user-mismatch"),a}}async function P8(t,e,n=!1){if(ua(t.app))return Promise.reject(dl(t));const r="signIn",i=await C8(t,r,e),a=await Md._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function kae(t,e){return P8(cu(t),e)}async function Cae(t,e){return I8(zt(t),e)}function Iae(t,e,n){nt(n.url?.length>0,t,"invalid-continue-uri"),nt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),nt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(nt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function QN(t){const e=cu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pae(t,e,n){const r=cu(t);await ww(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bae)}async function Nae(t,e,n){await pae(zt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QN(t),r})}async function Dae(t,e){await mae(zt(t),{oobCode:e})}async function Oae(t,e,n){if(ua(t.app))return Promise.reject(dl(t));const r=cu(t),s=await ww(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tae).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&QN(t),c}),o=await Md._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Rae(t,e,n){return ua(t.app)?Promise.reject(dl(t)):kae(zt(t),af.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QN(t),r})}async function AL(t,e){const n=zt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Iae(n.auth,i,e);const{email:a}=await yae(n.auth,i);a!==t.email&&await t.reload()}async function Mae(t,e){return Wa(t,"POST","/v1/accounts:update",e)}async function jae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=zt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Qh(r,Mae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function zae(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function Lae(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function Vae(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function kL(t){return zt(t).signOut()}async function Bae(t){return zt(t).delete()}const _w="__sak";class N8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_w,"1"),this.storage.removeItem(_w),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fae=1e3,Uae=10;class D8 extends N8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);Yie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Uae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Fae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D8.type="LOCAL";const $ae=D8;class O8 extends N8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O8.type="SESSION";const R8=O8;function qae(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class yS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new yS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await qae(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yS.receivers=[];function ZN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Gae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=ZN("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function vo(){return window}function Hae(t){vo().location.href=t}function M8(){return typeof vo().WorkerGlobalScope<"u"&&typeof vo().importScripts=="function"}async function Kae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wae(){return navigator?.serviceWorker?.controller||null}function Yae(){return M8()?self:null}const j8="firebaseLocalStorageDb",Xae=1,Ew="firebaseLocalStorage",z8="fbase_key";class v0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bS(t,e){return t.transaction([Ew],e?"readwrite":"readonly").objectStore(Ew)}function Qae(){const t=indexedDB.deleteDatabase(j8);return new v0(t).toPromise()}function sI(){const t=indexedDB.open(j8,Xae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ew,{keyPath:z8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ew)?e(r):(r.close(),await Qae(),e(await sI()))})})}async function CL(t,e,n){const r=bS(t,!0).put({[z8]:e,value:n});return new v0(r).toPromise()}async function Zae(t,e){const n=bS(t,!1).get(e),r=await new v0(n).toPromise();return r===void 0?null:r.value}function IL(t,e){const n=bS(t,!0).delete(e);return new v0(n).toPromise()}const Jae=800,ese=3;class L8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ese)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yS._getInstance(Yae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Kae(),!this.activeServiceWorker)return;this.sender=new Gae(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sI();return await CL(e,_w,"1"),await IL(e,_w),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>CL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Zae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>IL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=bS(i,!1).getAll();return new v0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L8.type="LOCAL";const tse=L8;new p0(3e4,6e4);function nse(t,e){return e?sl(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class JN extends YN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rse(t){return P8(t.auth,new JN(t),t.bypassAuthState)}function ise(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),I8(n,new JN(t),t.bypassAuthState)}async function ase(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),Aae(n,new JN(t),t.bypassAuthState)}class V8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rse;case"linkViaPopup":case"linkViaRedirect":return ase;case"reauthViaPopup":case"reauthViaRedirect":return ise;default:ks(this.auth,"internal-error")}}resolve(e){xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sse=new p0(2e3,1e4);class Th extends V8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Th.currentPopupAction&&Th.currentPopupAction.cancel(),Th.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){xl(this.filter.length===1,"Popup operations only handle one event");const e=ZN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Th.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sse.get())};e()}}Th.currentPopupAction=null;const ose="pendingRedirect",Vx=new Map;class lse extends V8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vx.get(this.auth._key());if(!e){try{const r=await cse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vx.set(this.auth._key(),e)}return this.bypassAuthState||Vx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cse(t,e){const n=fse(e),r=dse(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function use(t,e){Vx.set(t._key(),e)}function dse(t){return sl(t._redirectPersistence)}function fse(t){return Lx(ose,t.config.apiKey,t.name)}async function hse(t,e,n=!1){if(ua(t.app))return Promise.reject(dl(t));const r=cu(t),i=nse(r,e),s=await new lse(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const pse=600*1e3;class gse{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!B8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pse&&this.cachedEventUids.clear(),this.cachedEventUids.has(PL(e))}saveEventToCache(e){this.cachedEventUids.add(PL(e)),this.lastProcessedEventTime=Date.now()}}function PL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function B8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B8(t);default:return!1}}async function vse(t,e={}){return Wa(t,"GET","/v1/projects",e)}const yse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bse=/^https?/;async function xse(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vse(t);for(const n of e)try{if(wse(n))return}catch{}ks(t,"unauthorized-domain")}function wse(t){const e=iI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!bse.test(n))return!1;if(yse.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Sse=new p0(3e4,6e4);function NL(){const t=vo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _se(t){return new Promise((e,n)=>{function r(){NL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NL(),n(mo(t,"network-request-failed"))},timeout:Sse.get()})}if(vo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vo().gapi?.load)r();else{const i=iae("iframefcb");return vo()[i]=()=>{gapi.load?r():n(mo(t,"network-request-failed"))},_8(`${rae()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Bx=null,e})}let Bx=null;function Ese(t){return Bx=Bx||_se(t),Bx}const Tse=new p0(5e3,15e3),Ase="__/auth/iframe",kse="emulator/auth/iframe",Cse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ise=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pse(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?HN(e,kse):`https://${t.config.authDomain}/${Ase}`,r={apiKey:e.apiKey,appName:t.name,v:Lp},i=Ise.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${h0(r).slice(1)}`}async function Nse(t){const e=await Ese(t),n=vo().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:Pse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cse,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=mo(t,"network-request-failed"),o=vo().setTimeout(()=>{a(s)},Tse.get());function c(){vo().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const Dse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ose=500,Rse=600,Mse="_blank",jse="http://localhost";class DL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zse(t,e,n,r=Ose,i=Rse){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Dse,width:r.toString(),height:i.toString(),top:a,left:s},u=xr().toLowerCase();n&&(o=m8(u)?Mse:n),p8(u)&&(e=e||jse,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(Wie(u)&&o!=="_self")return Lse(e||"",o),new DL(null);const h=window.open(e||"",o,f);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new DL(h)}function Lse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Vse="__/auth/handler",Bse="emulator/auth/handler",Fse=encodeURIComponent("fac");async function OL(t,e,n,r,i,a){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lp,eventId:i};if(e instanceof k8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",dre(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof m0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Fse}=${encodeURIComponent(c)}`:"";return`${Use(t)}?${h0(o).slice(1)}${u}`}function Use({config:t}){return t.emulator?HN(t,Bse):`https://${t.authDomain}/${Vse}`}const yA="webStorageSupport";class $se{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R8,this._completeRedirectFn=hse,this._overrideRedirectResult=use}async _openPopup(e,n,r,i){xl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await OL(e,n,r,iI(),i);return zse(e,a,ZN())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await OL(e,n,r,iI(),i);return Hae(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(xl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nse(e),r=new gse(e);return n.register("authEvent",i=>(nt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yA,{type:yA},i=>{const a=i?.[0]?.[yA];a!==void 0&&n(!!a),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xse(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w8()||g8()||WN()}}const qse=$se;var RL="@firebase/auth",ML="1.12.0";class Gse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Hse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kse(t){bl(new _o("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;nt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S8(t)},u=new eae(r,i,a,c);return uae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bl(new _o("auth-internal",e=>{const n=cu(e.getProvider("auth").getImmediate());return(r=>new Gse(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(RL,ML,Hse(t)),xs(RL,ML,"esm2020")}const Wse=300,Yse=X9("authIdTokenMaxAge")||Wse;let jL=null;const Xse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yse)return;const i=n?.token;jL!==i&&(jL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F8(t=qN()){const e=zp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cae(t,{popupRedirectResolver:qse,persistence:[tse,$ae,R8]}),r=X9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Xse(a.toString());Lae(n,s,()=>s(n.currentUser)),zae(n,o=>s(o))}}const i=W9("auth");return i&&dae(n,`http://${i}`),n}function Qse(){return document.getElementsByTagName("head")?.[0]??document}tae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=mo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Qse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kse("Browser");var zL="popstate";function Zse(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=sf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),oI("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:wv(a))}function r(i,a){Ua(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return eoe(e,n,r,t)}function kn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ua(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jse(){return Math.random().toString(36).substring(2,10)}function LL(t,e){return{usr:t.state,key:t.key,idx:e}}function oI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sf(e):e,state:n,key:e&&e.key||r||Jse()}}function wv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function eoe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=oI(x.location,w,S);n&&n(T,w),u=f()+1;let P=LL(T,u),N=x.createHref(T);try{s.pushState(P,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(N)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,S){o="REPLACE";let T=oI(x.location,w,S);n&&n(T,w),u=f();let P=LL(T,u),N=x.createHref(T);s.replaceState(P,"",N),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return toe(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(zL,h),c=w,()=>{i.removeEventListener(zL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function toe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),kn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:wv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function U8(t,e,n="/"){return noe(t,e,n,!1)}function noe(t,e,n,r){let i=typeof e=="string"?sf(e):e,a=wl(i.pathname||"/",n);if(a==null)return null;let s=$8(t);roe(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=poe(a);o=foe(s[c],u,r)}return o}function $8(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;kn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=fl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(kn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),$8(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:uoe(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of q8(s.path))a(s,o,!0,c)}),e}function q8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=q8(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function roe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:doe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ioe=/^:[\w-]+$/,aoe=3,soe=2,ooe=1,loe=10,coe=-2,VL=t=>t==="*";function uoe(t,e){let n=t.split("/"),r=n.length;return n.some(VL)&&(r+=coe),e&&(r+=soe),n.filter(i=>!VL(i)).reduce((i,a)=>i+(ioe.test(a)?aoe:a===""?ooe:loe),r)}function doe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function foe(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:fl([a,h.pathname]),pathnameBase:yoe(fl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=fl([a,h.pathnameBase]))}return s}function Tw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hoe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function hoe(t,e=!1,n=!0){Ua(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function poe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ua(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function wl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var goe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function moe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sf(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=BL(n.substring(1),"/"):a=BL(n,e)):a=e,{pathname:a,search:boe(r),hash:xoe(i)}}function BL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function voe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function G8(t){let e=voe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function H8(t,e,n,r=!1){let i;typeof t=="string"?i=sf(t):(i={...t},kn(!i.pathname||!i.pathname.includes("?"),bA("?","pathname","search",i)),kn(!i.pathname||!i.pathname.includes("#"),bA("#","pathname","hash",i)),kn(!i.search||!i.search.includes("#"),bA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=moe(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var fl=t=>t.join("/").replace(/\/\/+/g,"/"),yoe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),boe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xoe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,woe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Soe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function _oe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var K8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function W8(t,e){let n=t;if(typeof n!="string"||!goe.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(K8)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=wl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Ua(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Y8=["POST","PUT","PATCH","DELETE"];new Set(Y8);var Eoe=["GET",...Y8];new Set(Eoe);var Vp=A.createContext(null);Vp.displayName="DataRouter";var xS=A.createContext(null);xS.displayName="DataRouterState";var Toe=A.createContext(!1),X8=A.createContext({isTransitioning:!1});X8.displayName="ViewTransition";var Aoe=A.createContext(new Map);Aoe.displayName="Fetchers";var koe=A.createContext(null);koe.displayName="Await";var Ya=A.createContext(null);Ya.displayName="Navigation";var y0=A.createContext(null);y0.displayName="Location";var Do=A.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var eD=A.createContext(null);eD.displayName="RouteError";var Q8="REACT_ROUTER_ERROR",Coe="REDIRECT",Ioe="ROUTE_ERROR_RESPONSE";function Poe(t){if(t.startsWith(`${Q8}:${Coe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Noe(t){if(t.startsWith(`${Q8}:${Ioe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new woe(e.status,e.statusText,e.data)}catch{}}function Doe(t,{relative:e}={}){kn(b0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ya),{hash:i,pathname:a,search:s}=x0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:fl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function b0(){return A.useContext(y0)!=null}function Os(){return kn(b0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(y0).location}var Z8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J8(t){A.useContext(Ya).static||A.useLayoutEffect(t)}function Xa(){let{isDataRoute:t}=A.useContext(Do);return t?Hoe():Ooe()}function Ooe(){kn(b0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Vp),{basename:e,navigator:n}=A.useContext(Ya),{matches:r}=A.useContext(Do),{pathname:i}=Os(),a=JSON.stringify(G8(r)),s=A.useRef(!1);return J8(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Ua(s.current,Z8),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=H8(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:fl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Roe(){let{matches:t}=A.useContext(Do),e=t[t.length-1];return e?e.params:{}}function x0(t,{relative:e}={}){let{matches:n}=A.useContext(Do),{pathname:r}=Os(),i=JSON.stringify(G8(n));return A.useMemo(()=>H8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Moe(t,e){return eq(t,e)}function eq(t,e,n,r,i){kn(b0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ya),{matches:s}=A.useContext(Do),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";nq(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Os(),v;if(e){let T=typeof e=="string"?sf(e):e;kn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=U8(t,{pathname:x});Ua(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ua(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Boe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:fl([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:fl([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(y0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function joe(){let t=Goe(),e=Soe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var zoe=A.createElement(joe,null),tq=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Noe(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Do.Provider,{value:this.props.routeContext},A.createElement(eD.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(Loe,{error:t},e):e}};tq.contextType=Toe;var xA=new WeakMap;function Loe({children:t,error:e}){let{basename:n}=A.useContext(Ya);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Poe(e.digest);if(r){let i=xA.get(e);if(i)throw i;let a=W8(r.location,n);if(K8&&!xA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw xA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Voe({routeContext:t,match:e,children:n}){let r=A.useContext(Vp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Do.Provider,{value:t},n)}function Boe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);kn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:_oe(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||zoe,o&&(c<0&&g===0?(nq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let P;return v?P=x:b?P=w:h.route.Component?P=A.createElement(h.route.Component,null):h.route.element?P=h.route.element:P=f,A.createElement(Voe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:P})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(tq,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function tD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Foe(t){let e=A.useContext(Vp);return kn(e,tD(t)),e}function Uoe(t){let e=A.useContext(xS);return kn(e,tD(t)),e}function $oe(t){let e=A.useContext(Do);return kn(e,tD(t)),e}function nD(t){let e=$oe(t),n=e.matches[e.matches.length-1];return kn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qoe(){return nD("useRouteId")}function Goe(){let t=A.useContext(eD),e=Uoe("useRouteError"),n=nD("useRouteError");return t!==void 0?t:e.errors?.[n]}function Hoe(){let{router:t}=Foe("useNavigate"),e=nD("useNavigate"),n=A.useRef(!1);return J8(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ua(n.current,Z8),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var FL={};function nq(t,e,n){!e&&!FL[t]&&(FL[t]=!0,Ua(!1,n))}A.memo(Koe);function Koe({routes:t,future:e,state:n,onError:r}){return eq(t,void 0,n,r,e)}function io(t){kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Woe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){kn(!b0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=sf(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=wl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return Ua(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Ya.Provider,{value:c},A.createElement(y0.Provider,{children:e,value:b}))}function Yoe({children:t,location:e}){return Moe(lI(t),e)}function lI(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,lI(r.props.children,a));return}kn(r.type===io,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=lI(r.props.children,a)),n.push(s)}),n}var Fx="get",Ux="application/x-www-form-urlencoded";function wS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Xoe(t){return wS(t)&&t.tagName.toLowerCase()==="button"}function Qoe(t){return wS(t)&&t.tagName.toLowerCase()==="form"}function Zoe(t){return wS(t)&&t.tagName.toLowerCase()==="input"}function Joe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ele(t,e){return t.button===0&&(!e||e==="_self")&&!Joe(t)}function cI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function tle(t,e){let n=cI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Lb=null;function nle(){if(Lb===null)try{new FormData(document.createElement("form"),0),Lb=!1}catch{Lb=!0}return Lb}var rle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wA(t){return t!=null&&!rle.has(t)?(Ua(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ux}"`),null):t}function ile(t,e){let n,r,i,a,s;if(Qoe(t)){let o=t.getAttribute("action");r=o?wl(o,e):null,n=t.getAttribute("method")||Fx,i=wA(t.getAttribute("enctype"))||Ux,a=new FormData(t)}else if(Xoe(t)||Zoe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?wl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Fx,i=wA(t.getAttribute("formenctype"))||wA(o.getAttribute("enctype"))||Ux,a=new FormData(o,t),!nle()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(wS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fx,r=null,i=Ux,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ale(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&wl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function sle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ole(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lle(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await sle(a,n);return s.links?s.links():[]}return[]}));return fle(r.flat(1).filter(ole).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function UL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function cle(t,e,{includeHydrateFallback:n}={}){return ule(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function ule(t){return[...new Set(t)]}function dle(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function fle(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(dle(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function rq(){let t=A.useContext(Vp);return rD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hle(){let t=A.useContext(xS);return rD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var iD=A.createContext(void 0);iD.displayName="FrameworkContext";function iq(){let t=A.useContext(iD);return rD(t,"You must render this element inside a <HydratedRouter> element"),t}function ple(t,e){let n=A.useContext(iD),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:pm(o,v),onBlur:pm(c,b),onMouseEnter:pm(u,v),onMouseLeave:pm(f,b),onTouchStart:pm(h,v)}]:[!1,g,{}]}function pm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function gle({page:t,...e}){let{router:n}=rq(),r=A.useMemo(()=>U8(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(vle,{page:t,matches:r,...e}):null}function mle(t){let{manifest:e,routeModules:n}=iq(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return lle(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function vle({page:t,matches:e,...n}){let r=Os(),{future:i,manifest:a,routeModules:s}=iq(),{basename:o}=rq(),{loaderData:c,matches:u}=hle(),f=A.useMemo(()=>UL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>UL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let P=a.routes[T.route.id];!P||!P.hasLoader||(!f.some(N=>N.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||P.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=ale(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>cle(h,a),[h,a]),b=mle(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function yle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ble=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ble&&(window.__reactRouterVersion="7.13.0")}catch{}function xle({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=Zse({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(Woe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var aq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sq=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Ya),S=typeof u=="string"&&aq.test(u),T=W8(u,x);u=T.to;let P=Doe(u,{relative:i}),[N,D,O]=ple(r,v),I=Ele(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function C(M){e&&e(M),M.defaultPrevented||I(M)}let R=A.createElement("a",{...v,...O,href:T.absoluteURL||P,onClick:T.isExternal||a?e:C,ref:yle(b,D),target:c,"data-discover":!S&&n==="render"?"true":void 0});return N&&!S?A.createElement(A.Fragment,null,R,A.createElement(gle,{page:P})):R});sq.displayName="Link";var wle=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=x0(s,{relative:u.relative}),g=Os(),v=A.useContext(xS),{navigator:b,basename:x}=A.useContext(Ya),w=v!=null&&Ile(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&x&&(P=wl(P,x)||P);const N=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=T===S||!i&&T.startsWith(S)&&T.charAt(N)==="/",O=P!=null&&(P===S||!i&&P.startsWith(S)&&P.charAt(S.length)==="/"),I={isActive:D,isPending:O,isTransitioning:w},C=D?e:void 0,R;typeof r=="function"?R=r(I):R=[r,D?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(I):a;return A.createElement(sq,{...u,"aria-current":C,className:R,ref:f,style:M,to:s,viewTransition:o},typeof c=="function"?c(I):c)});wle.displayName="NavLink";var Sle=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Fx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Ya),w=kle(),S=Cle(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",P=typeof o=="string"&&aq.test(o),N=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let O=D.nativeEvent.submitter,I=O?.getAttribute("formmethod")||s,C=()=>w(O||D.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>C()):C()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:N,...v,"data-discover":!P&&t==="render"?"true":void 0})});Sle.displayName="Form";function _le(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oq(t){let e=A.useContext(Vp);return kn(e,_le(t)),e}function Ele(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Xa(),f=Os(),h=x0(t,{relative:a});return A.useCallback(g=>{if(ele(g,e)){g.preventDefault();let v=n!==void 0?n:wv(f)===wv(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function lq(t){Ua(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(cI(t)),n=A.useRef(!1),r=Os(),i=A.useMemo(()=>tle(r.search,n.current?null:e.current),[r.search]),a=Xa(),s=A.useCallback((o,c)=>{const u=cI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Tle=0,Ale=()=>`__${String(++Tle)}__`;function kle(){let{router:t}=oq("useSubmit"),{basename:e}=A.useContext(Ya),n=qoe(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=ile(a,e);if(s.navigate===!1){let g=s.fetcherKey||Ale();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Cle(t,{relative:e}={}){let{basename:n}=A.useContext(Ya),r=A.useContext(Do);kn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...x0(t||".",{relative:e})},s=Os();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:fl([n,a.pathname])),wv(a)}function Ile(t,{relative:e}={}){let n=A.useContext(X8);kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oq("useViewTransitionState"),i=x0(t,{relative:e});if(!n.isTransitioning)return!1;let a=wl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=wl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tw(i.pathname,s)!=null||Tw(i.pathname,a)!=null}var cq=q9();const Ple=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nle=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),$L=t=>{const e=Nle(t);return e.charAt(0).toUpperCase()+e.slice(1)},uq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Dle=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Ole={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rle=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Ole,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uq("lucide",i),...!a&&!Dle(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Rle,{ref:a,iconNode:e,className:uq(`lucide-${Ple($L(t))}`,`lucide-${t}`,r),...i}));return n.displayName=$L(t),n};const Mle=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Sl=Qe("arrow-left",Mle);const jle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],zle=Qe("arrow-right-left",jle);const Lle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vle=Qe("arrow-right",Lle);const Ble=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Fle=Qe("bug",Ble);const Ule=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dq=Qe("calendar",Ule);const $le=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Aw=Qe("chart-column",$le);const qle=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],fq=Qe("chart-pie",qle);const Gle=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aD=Qe("check",Gle);const Hle=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kle=Qe("chevron-down",Hle);const Wle=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Yle=Qe("chevron-left",Wle);const Xle=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ds=Qe("chevron-right",Xle);const Qle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zle=Qe("circle-alert",Qle);const Jle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],ece=Qe("circle-arrow-down",Jle);const tce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],nce=Qe("circle-arrow-up",tce);const rce=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kw=Qe("circle-check-big",rce);const ice=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],so=Qe("circle-check",ice);const ace=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qL=Qe("circle",ace);const sce=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oce=Qe("clock",sce);const lce=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jm=Qe("dollar-sign",lce);const cce=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cw=Qe("download",cce);const uce=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],dce=Qe("ellipsis",uce);const fce=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hq=Qe("eye-off",fce);const hce=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pq=Qe("eye",hce);const pce=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gce=Qe("file-text",pce);const mce=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],sD=Qe("folder-open",mce);const vce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],yce=Qe("folder",vce);const bce=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],gq=Qe("funnel",bce);const xce=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Zh=Qe("grip-vertical",xce);const wce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Sce=Qe("house",wce);const _ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GL=Qe("info",_ce);const Ece=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Tce=Qe("list",Ece);const Ace=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],kce=Qe("loader",Ace);const Cce=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],HL=Qe("lock",Cce);const Ice=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pce=Qe("log-out",Ice);const Nce=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uI=Qe("mail",Nce);const Dce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],KL=Qe("mic",Dce);const Oce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Rce=Qe("pause",Oce);const Mce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jce=Qe("pen",Mce);const zce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],of=Qe("piggy-bank",zce);const Lce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lf=Qe("plus",Lce);const Vce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jh=Qe("refresh-cw",Vce);const Bce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fce=Qe("rotate-ccw",Bce);const Uce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mq=Qe("search",Uce);const $ce=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qce=Qe("settings",$ce);const Gce=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],vq=Qe("skip-forward",Gce);const Hce=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Uh=Qe("sparkles",Hce);const Kce=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Wce=Qe("tags",Kce);const Yce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xce=Qe("target",Yce);const Qce=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sv=Qe("trash-2",Qce);const Zce=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yq=Qe("trash",Zce);const Jce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gd=Qe("trending-up",Jce);const eue=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ed=Qe("triangle-alert",eue);const tue=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],nue=Qe("undo-2",tue);const rue=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],iue=Qe("upload",rue);const aue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sue=Qe("user-plus",aue);const oue=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lue=Qe("user",oue);const cue=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ep=Qe("wallet",cue);const uue=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bp=Qe("x",uue),WL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},due=(t=>t?WL(t):WL),fue=t=>t;function hue(t,e=fue){const n=il.useSyncExternalStore(t.subscribe,il.useCallback(()=>e(t.getState()),[t,e]),il.useCallback(()=>e(t.getInitialState()),[t,e]));return il.useDebugValue(n),n}const YL=t=>{const e=due(t),n=r=>hue(e,r);return Object.assign(n,e),n},oD=(t=>t?YL(t):YL),XL={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},QL=t=>!!t.dispatchFromDevtools&&typeof t.dispatch=="function",_v=new Map,Vb=t=>{const e=_v.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},pue=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=_v.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return _v.set(n.name,i),{type:"tracked",store:t,...i}},gue=(t,e)=>{if(e===void 0)return;const n=_v.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&_v.delete(t))},mue=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},vue=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(XL?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=pue(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const P=S===void 0?{type:s||mue(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(P,r()),T):(f?.send({...P,type:`${o}/${P.type}`},{...Vb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),gue(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),QL(i)){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(XL?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return SA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){v(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}QL(i)&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Vb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Vb(c.name));case"ROLLBACK":return SA(x.state,S=>{if(o===void 0){v(S),f?.init(i.getState());return}v(S[o]),f?.init(Vb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return SA(x.state,S=>{if(o===void 0){v(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&v(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},yue=vue,SA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function bue(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const dI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return dI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return dI(r)(n)}}}},xue=(t,e)=>(n,r,i)=>{let a={storage:bue(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},s=!1,o=0;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return f.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,S)=>(g(w,S),h());const v=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>v;let b;const x=()=>{var w,S;if(!f)return;const T=++o;s=!1,c.forEach(N=>{var D;return N((D=r())!=null?D:v)});const P=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(w=r())!=null?w:v))||void 0;return dI(f.getItem.bind(f))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate){const D=a.migrate(N.state,N.version);return D instanceof Promise?D.then(O=>[!0,O]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var D;if(T!==o)return;const[O,I]=N;if(b=a.merge(I,(D=r())!=null?D:v),n(b,!0),O)return h()}).then(()=>{T===o&&(P?.(b,void 0),b=r(),s=!0,u.forEach(N=>N(b)))}).catch(N=>{T===o&&P?.(void 0,N)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||x(),b||v},bq=xue;var wue="firebase",Sue="12.9.0";xs(wue,Sue,"app");var ZL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qc,xq;(function(){var t;function e(I,C){function R(){}R.prototype=C.prototype,I.F=C.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(M,V,z){for(var L=Array(arguments.length-2),W=2;W<arguments.length;W++)L[W-2]=arguments[W];return C.prototype[V].apply(M,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,C,R){R||(R=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(V=0;V<16;++V)M[V]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=I.g[0],R=I.g[1],V=I.g[2];let z=I.g[3],L;L=C+(z^R&(V^z))+M[0]+3614090360&4294967295,C=R+(L<<7&4294967295|L>>>25),L=z+(V^C&(R^V))+M[1]+3905402710&4294967295,z=C+(L<<12&4294967295|L>>>20),L=V+(R^z&(C^R))+M[2]+606105819&4294967295,V=z+(L<<17&4294967295|L>>>15),L=R+(C^V&(z^C))+M[3]+3250441966&4294967295,R=V+(L<<22&4294967295|L>>>10),L=C+(z^R&(V^z))+M[4]+4118548399&4294967295,C=R+(L<<7&4294967295|L>>>25),L=z+(V^C&(R^V))+M[5]+1200080426&4294967295,z=C+(L<<12&4294967295|L>>>20),L=V+(R^z&(C^R))+M[6]+2821735955&4294967295,V=z+(L<<17&4294967295|L>>>15),L=R+(C^V&(z^C))+M[7]+4249261313&4294967295,R=V+(L<<22&4294967295|L>>>10),L=C+(z^R&(V^z))+M[8]+1770035416&4294967295,C=R+(L<<7&4294967295|L>>>25),L=z+(V^C&(R^V))+M[9]+2336552879&4294967295,z=C+(L<<12&4294967295|L>>>20),L=V+(R^z&(C^R))+M[10]+4294925233&4294967295,V=z+(L<<17&4294967295|L>>>15),L=R+(C^V&(z^C))+M[11]+2304563134&4294967295,R=V+(L<<22&4294967295|L>>>10),L=C+(z^R&(V^z))+M[12]+1804603682&4294967295,C=R+(L<<7&4294967295|L>>>25),L=z+(V^C&(R^V))+M[13]+4254626195&4294967295,z=C+(L<<12&4294967295|L>>>20),L=V+(R^z&(C^R))+M[14]+2792965006&4294967295,V=z+(L<<17&4294967295|L>>>15),L=R+(C^V&(z^C))+M[15]+1236535329&4294967295,R=V+(L<<22&4294967295|L>>>10),L=C+(V^z&(R^V))+M[1]+4129170786&4294967295,C=R+(L<<5&4294967295|L>>>27),L=z+(R^V&(C^R))+M[6]+3225465664&4294967295,z=C+(L<<9&4294967295|L>>>23),L=V+(C^R&(z^C))+M[11]+643717713&4294967295,V=z+(L<<14&4294967295|L>>>18),L=R+(z^C&(V^z))+M[0]+3921069994&4294967295,R=V+(L<<20&4294967295|L>>>12),L=C+(V^z&(R^V))+M[5]+3593408605&4294967295,C=R+(L<<5&4294967295|L>>>27),L=z+(R^V&(C^R))+M[10]+38016083&4294967295,z=C+(L<<9&4294967295|L>>>23),L=V+(C^R&(z^C))+M[15]+3634488961&4294967295,V=z+(L<<14&4294967295|L>>>18),L=R+(z^C&(V^z))+M[4]+3889429448&4294967295,R=V+(L<<20&4294967295|L>>>12),L=C+(V^z&(R^V))+M[9]+568446438&4294967295,C=R+(L<<5&4294967295|L>>>27),L=z+(R^V&(C^R))+M[14]+3275163606&4294967295,z=C+(L<<9&4294967295|L>>>23),L=V+(C^R&(z^C))+M[3]+4107603335&4294967295,V=z+(L<<14&4294967295|L>>>18),L=R+(z^C&(V^z))+M[8]+1163531501&4294967295,R=V+(L<<20&4294967295|L>>>12),L=C+(V^z&(R^V))+M[13]+2850285829&4294967295,C=R+(L<<5&4294967295|L>>>27),L=z+(R^V&(C^R))+M[2]+4243563512&4294967295,z=C+(L<<9&4294967295|L>>>23),L=V+(C^R&(z^C))+M[7]+1735328473&4294967295,V=z+(L<<14&4294967295|L>>>18),L=R+(z^C&(V^z))+M[12]+2368359562&4294967295,R=V+(L<<20&4294967295|L>>>12),L=C+(R^V^z)+M[5]+4294588738&4294967295,C=R+(L<<4&4294967295|L>>>28),L=z+(C^R^V)+M[8]+2272392833&4294967295,z=C+(L<<11&4294967295|L>>>21),L=V+(z^C^R)+M[11]+1839030562&4294967295,V=z+(L<<16&4294967295|L>>>16),L=R+(V^z^C)+M[14]+4259657740&4294967295,R=V+(L<<23&4294967295|L>>>9),L=C+(R^V^z)+M[1]+2763975236&4294967295,C=R+(L<<4&4294967295|L>>>28),L=z+(C^R^V)+M[4]+1272893353&4294967295,z=C+(L<<11&4294967295|L>>>21),L=V+(z^C^R)+M[7]+4139469664&4294967295,V=z+(L<<16&4294967295|L>>>16),L=R+(V^z^C)+M[10]+3200236656&4294967295,R=V+(L<<23&4294967295|L>>>9),L=C+(R^V^z)+M[13]+681279174&4294967295,C=R+(L<<4&4294967295|L>>>28),L=z+(C^R^V)+M[0]+3936430074&4294967295,z=C+(L<<11&4294967295|L>>>21),L=V+(z^C^R)+M[3]+3572445317&4294967295,V=z+(L<<16&4294967295|L>>>16),L=R+(V^z^C)+M[6]+76029189&4294967295,R=V+(L<<23&4294967295|L>>>9),L=C+(R^V^z)+M[9]+3654602809&4294967295,C=R+(L<<4&4294967295|L>>>28),L=z+(C^R^V)+M[12]+3873151461&4294967295,z=C+(L<<11&4294967295|L>>>21),L=V+(z^C^R)+M[15]+530742520&4294967295,V=z+(L<<16&4294967295|L>>>16),L=R+(V^z^C)+M[2]+3299628645&4294967295,R=V+(L<<23&4294967295|L>>>9),L=C+(V^(R|~z))+M[0]+4096336452&4294967295,C=R+(L<<6&4294967295|L>>>26),L=z+(R^(C|~V))+M[7]+1126891415&4294967295,z=C+(L<<10&4294967295|L>>>22),L=V+(C^(z|~R))+M[14]+2878612391&4294967295,V=z+(L<<15&4294967295|L>>>17),L=R+(z^(V|~C))+M[5]+4237533241&4294967295,R=V+(L<<21&4294967295|L>>>11),L=C+(V^(R|~z))+M[12]+1700485571&4294967295,C=R+(L<<6&4294967295|L>>>26),L=z+(R^(C|~V))+M[3]+2399980690&4294967295,z=C+(L<<10&4294967295|L>>>22),L=V+(C^(z|~R))+M[10]+4293915773&4294967295,V=z+(L<<15&4294967295|L>>>17),L=R+(z^(V|~C))+M[1]+2240044497&4294967295,R=V+(L<<21&4294967295|L>>>11),L=C+(V^(R|~z))+M[8]+1873313359&4294967295,C=R+(L<<6&4294967295|L>>>26),L=z+(R^(C|~V))+M[15]+4264355552&4294967295,z=C+(L<<10&4294967295|L>>>22),L=V+(C^(z|~R))+M[6]+2734768916&4294967295,V=z+(L<<15&4294967295|L>>>17),L=R+(z^(V|~C))+M[13]+1309151649&4294967295,R=V+(L<<21&4294967295|L>>>11),L=C+(V^(R|~z))+M[4]+4149444226&4294967295,C=R+(L<<6&4294967295|L>>>26),L=z+(R^(C|~V))+M[11]+3174756917&4294967295,z=C+(L<<10&4294967295|L>>>22),L=V+(C^(z|~R))+M[2]+718787259&4294967295,V=z+(L<<15&4294967295|L>>>17),L=R+(z^(V|~C))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(V+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+z&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const R=C-this.blockSize,M=this.C;let V=this.h,z=0;for(;z<C;){if(V==0)for(;z<=R;)i(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<C;)if(M[V++]=I.charCodeAt(z++),V==this.blockSize){i(this,M),V=0;break}}else for(;z<C;)if(M[V++]=I[z++],V==this.blockSize){i(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)I[C++]=this.g[R]>>>M&255;return I};function a(I,C){var R=o;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=C(I)}function s(I,C){this.h=C;const R=[];let M=!0;for(let V=I.length-1;V>=0;V--){const z=I[V]|0;M&&z==C||(R[V]=z,M=!1)}this.g=R}var o={};function c(I){return-128<=I&&I<128?a(I,function(C){return new s([C|0],C<0?-1:0)}):new s([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return w(u(-I));const C=[];let R=1;for(let M=0;I>=R;M++)C[M]=I/R|0,R*=4294967296;return new s(C,0)}function f(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return w(f(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(C,8));let M=h;for(let z=0;z<I.length;z+=8){var V=Math.min(8,I.length-z);const L=parseInt(I.substring(z,z+V),C);V<8?(V=u(Math.pow(C,V)),M=M.j(V).add(u(L))):(M=M.j(R),M=M.add(u(L)))}return M}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let I=0,C=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);I+=(M>=0?M:4294967296+M)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(x(this))return"-"+w(this).toString(I);const C=u(Math.pow(I,6));var R=this;let M="";for(;;){const V=N(R,C).g;R=S(R,V.j(C));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=V,b(R))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=S(this,I),x(I)?-1:b(I)?0:1};function w(I){const C=I.g.length,R=[];for(let M=0;M<C;M++)R[M]=~I.g[M];return new s(R,~I.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(I){const C=Math.max(this.g.length,I.g.length),R=[];let M=0;for(let V=0;V<=C;V++){let z=M+(this.i(V)&65535)+(I.i(V)&65535),L=(z>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);M=L>>>16,z&=65535,L&=65535,R[V]=L<<16|z}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(I,C){return I.add(w(C))}t.j=function(I){if(b(this)||b(I))return h;if(x(this))return x(I)?w(this).j(w(I)):w(w(this).j(I));if(x(I))return w(this.j(w(I)));if(this.l(v)<0&&I.l(v)<0)return u(this.m()*I.m());const C=this.g.length+I.g.length,R=[];for(var M=0;M<2*C;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<I.g.length;V++){const z=this.i(M)>>>16,L=this.i(M)&65535,W=I.i(V)>>>16,Q=I.i(V)&65535;R[2*M+2*V]+=L*Q,T(R,2*M+2*V),R[2*M+2*V+1]+=z*Q,T(R,2*M+2*V+1),R[2*M+2*V+1]+=L*W,T(R,2*M+2*V+1),R[2*M+2*V+2]+=z*W,T(R,2*M+2*V+2)}for(I=0;I<C;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=C;I<2*C;I++)R[I]=0;return new s(R,0)};function T(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function P(I,C){this.g=I,this.h=C}function N(I,C){if(b(C))throw Error("division by zero");if(b(I))return new P(h,h);if(x(I))return C=N(w(I),C),new P(w(C.g),w(C.h));if(x(C))return C=N(I,w(C)),new P(w(C.g),C.h);if(I.g.length>30){if(x(I)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var R=g,M=C;M.l(I)<=0;)R=D(R),M=D(M);var V=O(R,1),z=O(M,1);for(M=O(M,2),R=O(R,2);!b(M);){var L=z.add(M);L.l(I)<=0&&(V=V.add(R),z=L),M=O(M,1),R=O(R,1)}return C=S(I,V.j(C)),new P(V,C)}for(V=h;I.l(C)>=0;){for(R=Math.max(1,Math.floor(I.m()/C.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=u(R),L=z.j(C);x(L)||L.l(I)>0;)R-=M,z=u(R),L=z.j(C);b(z)&&(z=g),V=V.add(z),I=S(I,L)}return new P(V,I)}t.B=function(I){return N(this,I).h},t.and=function(I){const C=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)&I.i(M);return new s(R,this.h&I.h)},t.or=function(I){const C=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)|I.i(M);return new s(R,this.h|I.h)},t.xor=function(I){const C=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)^I.i(M);return new s(R,this.h^I.h)};function D(I){const C=I.g.length+1,R=[];for(let M=0;M<C;M++)R[M]=I.i(M)<<1|I.i(M-1)>>>31;return new s(R,I.h)}function O(I,C){const R=C>>5;C%=32;const M=I.g.length-R,V=[];for(let z=0;z<M;z++)V[z]=C>0?I.i(z+R)>>>C|I.i(z+R+1)<<32-C:I.i(z+R);return new s(V,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xq=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,qc=s}).apply(typeof ZL<"u"?ZL:typeof self<"u"?self:typeof window<"u"?window:{});var Bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wq,zm,Sq,$x,fI,_q,Eq,Tq;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bb=="object"&&Bb];for(var j=0;j<_.length;++j){var F=_[j];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,j){if(j)e:{var F=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var he=_[H];if(!(he in F))break e;F=F[he]}_=_[_.length-1],H=F[_],j=j(H),j!=H&&j!=null&&e(F,_,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(j){var F=[],H;for(H in j)Object.prototype.hasOwnProperty.call(j,H)&&F.push([H,j[H]]);return F}});var a=a||{},s=this||self;function o(_){var j=typeof _;return j=="object"&&_!=null||j=="function"}function c(_,j,F){return _.call.apply(_.bind,arguments)}function u(_,j,F){return u=c,u.apply(null,arguments)}function f(_,j){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function h(_,j){function F(){}F.prototype=j.prototype,_.Z=j.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(H,he,xe){for(var je=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)je[ct-2]=arguments[ct];return j.prototype[he].apply(H,je)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function v(_){const j=_.length;if(j>0){const F=Array(j);for(let H=0;H<j;H++)F[H]=_[H];return F}return[]}function b(_,j){for(let H=1;H<arguments.length;H++){const he=arguments[H];var F=typeof he;if(F=F!="object"?F:he?Array.isArray(he)?"array":F:"null",F=="array"||F=="object"&&typeof he.length=="number"){F=_.length||0;const xe=he.length||0;_.length=F+xe;for(let je=0;je<xe;je++)_[F+je]=he[je]}else _.push(he)}}class x{constructor(j,F){this.i=j,this.j=F,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=I;let j=null;return _.g&&(j=_.g,_.g=_.g.next,_.g||(_.h=null),j.next=null),j}class T{constructor(){this.h=this.g=null}add(j,F){const H=P.get();H.set(j,F),this.h?this.h.next=H:this.g=H,this.h=H}}var P=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(j,F){this.h=j,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let D,O=!1,I=new T,C=()=>{const _=Promise.resolve(void 0);D=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var j=P;j.j(_),j.h<100&&(j.h++,_.next=j.g,j.g=_)}O=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(_,j){this.type=_,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,j=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,j),s.removeEventListener("test",F,j)}catch{}return _})();function L(_){return/^[\s\xa0]*$/.test(_)}function W(_,j){V.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,j)}h(W,V),W.prototype.init=function(_,j){const F=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=j,j=_.relatedTarget,j||(F=="mouseover"?j=_.fromElement:F=="mouseout"&&(j=_.toElement)),this.relatedTarget=j,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),G=0;function Y(_,j,F,H,he){this.listener=_,this.proxy=null,this.src=j,this.type=F,this.capture=!!H,this.ha=he,this.key=++G,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ee(_,j,F){for(const H in _)j.call(F,_[H],H,_)}function X(_,j){for(const F in _)j.call(void 0,_[F],F,_)}function U(_){const j={};for(const F in _)j[F]=_[F];return j}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(_,j){let F,H;for(let he=1;he<arguments.length;he++){H=arguments[he];for(F in H)_[F]=H[F];for(let xe=0;xe<Z.length;xe++)F=Z[xe],Object.prototype.hasOwnProperty.call(H,F)&&(_[F]=H[F])}}function K(_){this.src=_,this.g={},this.h=0}K.prototype.add=function(_,j,F,H,he){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const je=ie(_,j,H,he);return je>-1?(j=_[je],F||(j.fa=!1)):(j=new Y(j,this.src,xe,!!H,he),j.fa=F,_.push(j)),j};function ue(_,j){const F=j.type;if(F in _.g){var H=_.g[F],he=Array.prototype.indexOf.call(H,j,void 0),xe;(xe=he>=0)&&Array.prototype.splice.call(H,he,1),xe&&(J(j),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ie(_,j,F,H){for(let he=0;he<_.length;++he){const xe=_[he];if(!xe.da&&xe.listener==j&&xe.capture==!!F&&xe.ha==H)return he}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Se={};function se(_,j,F,H,he){if(Array.isArray(j)){for(let xe=0;xe<j.length;xe++)se(_,j[xe],F,H,he);return null}return F=Ye(F),_&&_[Q]?_.J(j,F,o(H)?!!H.capture:!1,he):Ae(_,j,F,!1,H,he)}function Ae(_,j,F,H,he,xe){if(!j)throw Error("Invalid event type");const je=o(he)?!!he.capture:!!he;let ct=De(_);if(ct||(_[oe]=ct=new K(_)),F=ct.add(j,F,H,je,xe),F.proxy)return F;if(H=ve(),F.proxy=H,H.src=_,H.listener=F,_.addEventListener)z||(he=je),he===void 0&&(he=!1),_.addEventListener(j.toString(),H,he);else if(_.attachEvent)_.attachEvent(be(j.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function ve(){function _(F){return j.call(_.src,_.listener,F)}const j=_e;return _}function ne(_,j,F,H,he){if(Array.isArray(j))for(var xe=0;xe<j.length;xe++)ne(_,j[xe],F,H,he);else H=o(H)?!!H.capture:!!H,F=Ye(F),_&&_[Q]?(_=_.i,xe=String(j).toString(),xe in _.g&&(j=_.g[xe],F=ie(j,F,H,he),F>-1&&(J(j[F]),Array.prototype.splice.call(j,F,1),j.length==0&&(delete _.g[xe],_.h--)))):_&&(_=De(_))&&(j=_.g[j.toString()],_=-1,j&&(_=ie(j,F,H,he)),(F=_>-1?j[_]:null)&&Pe(F))}function Pe(_){if(typeof _!="number"&&_&&!_.da){var j=_.src;if(j&&j[Q])ue(j.i,_);else{var F=_.type,H=_.proxy;j.removeEventListener?j.removeEventListener(F,H,_.capture):j.detachEvent?j.detachEvent(be(F),H):j.addListener&&j.removeListener&&j.removeListener(H),(F=De(j))?(ue(F,_),F.h==0&&(F.src=null,j[oe]=null)):J(_)}}}function be(_){return _ in Se?Se[_]:Se[_]="on"+_}function _e(_,j){if(_.da)_=!0;else{j=new W(j,this);const F=_.listener,H=_.ha||_.src;_.fa&&Pe(_),_=F.call(H,j)}return _}function De(_){return _=_[oe],_ instanceof K?_:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(_){return typeof _=="function"?_:(_[Oe]||(_[Oe]=function(j){return _.handleEvent(j)}),_[Oe])}function Ve(){M.call(this),this.i=new K(this),this.M=this,this.G=null}h(Ve,M),Ve.prototype[Q]=!0,Ve.prototype.removeEventListener=function(_,j,F,H){ne(this,_,j,F,H)};function it(_,j){var F,H=_.G;if(H)for(F=[];H;H=H.G)F.push(H);if(_=_.M,H=j.type||j,typeof j=="string")j=new V(j,_);else if(j instanceof V)j.target=j.target||_;else{var he=j;j=new V(H,_),te(j,he)}he=!0;let xe,je;if(F)for(je=F.length-1;je>=0;je--)xe=j.g=F[je],he=Vt(xe,H,!0,j)&&he;if(xe=j.g=_,he=Vt(xe,H,!0,j)&&he,he=Vt(xe,H,!1,j)&&he,F)for(je=0;je<F.length;je++)xe=j.g=F[je],he=Vt(xe,H,!1,j)&&he}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var _=this.i;for(const j in _.g){const F=_.g[j];for(let H=0;H<F.length;H++)J(F[H]);delete _.g[j],_.h--}}this.G=null},Ve.prototype.J=function(_,j,F,H){return this.i.add(String(_),j,!1,F,H)},Ve.prototype.K=function(_,j,F,H){return this.i.add(String(_),j,!0,F,H)};function Vt(_,j,F,H){if(j=_.i.g[String(j)],!j)return!0;j=j.concat();let he=!0;for(let xe=0;xe<j.length;++xe){const je=j[xe];if(je&&!je.da&&je.capture==F){const ct=je.listener,Un=je.ha||je.src;je.fa&&ue(_.i,je),he=ct.call(Un,H)!==!1&&he}}return he&&!H.defaultPrevented}function Bn(_,j){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:s.setTimeout(_,j||0)}function xn(_){_.g=Bn(()=>{_.g=null,_.i&&(_.i=!1,xn(_))},_.l);const j=_.h;_.h=null,_.m.apply(null,j)}class yt extends M{constructor(j,F){super(),this.m=j,this.l=F,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:xn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(_){M.call(this),this.h=_,this.g={}}h(Bt,M);var Qr=[];function ze(_){ee(_.g,function(j,F){this.g.hasOwnProperty(F)&&Pe(j)},_),_.g={}}Bt.prototype.N=function(){Bt.Z.N.call(this),ze(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=s.JSON.stringify,ki=s.JSON.parse,Zr=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function In(){}function Tr(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wn(){V.call(this,"d")}h(wn,V);function Ar(){V.call(this,"c")}h(Ar,V);var Ft={},ur=null;function di(){return ur=ur||new Ve}Ft.Ia="serverreachability";function Ja(_){V.call(this,Ft.Ia,_)}h(Ja,V);function xt(_){const j=di();it(j,new Ja(j))}Ft.STAT_EVENT="statevent";function Sn(_,j){V.call(this,Ft.STAT_EVENT,_),this.stat=j}h(Sn,V);function _n(_){const j=di();it(j,new Sn(j,_))}Ft.Ja="timingevent";function Yi(_,j){V.call(this,Ft.Ja,_),this.size=j}h(Yi,V);function xa(_,j){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},j)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function uE(_,j,F,H,he,xe){_.info(function(){if(_.g)if(xe){var je="",ct=xe.split("&");for(let Rt=0;Rt<ct.length;Rt++){var Un=ct[Rt].split("=");if(Un.length>1){const gn=Un[0];Un=Un[1];const Ea=gn.split("_");je=Ea.length>=2&&Ea[1]=="type"?je+(gn+"="+Un+"&"):je+(gn+"=redacted&")}}}else je=null;else je=xe;return"XMLHTTP REQ ("+H+") [attempt "+he+"]: "+j+`
`+F+`
`+je})}function py(_,j,F,H,he,xe,je){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+he+"]: "+j+`
`+F+`
`+xe+" "+je})}function Ms(_,j,F,H){_.info(function(){return"XMLHTTP TEXT ("+j+"): "+dE(_,F)+(H?" "+H:"")})}function wu(_,j){_.info(function(){return"TIMEOUT: "+j})}fi.prototype.info=function(){};function dE(_,j){if(!_.g)return j;if(!j)return null;try{const xe=JSON.parse(j);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var he=H[0];if(he!="noop"&&he!="stop"&&he!="close")for(let je=1;je<H.length;je++)H[je]=""}}}}return gt(xe)}catch{return j}}var Su={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pg;function _u(){}h(_u,In),_u.prototype.g=function(){return new XMLHttpRequest},pg=new _u;function jo(_){return encodeURIComponent(String(_))}function gy(_){var j=1;_=_.split(":");const F=[];for(;j>0&&_.length;)F.push(_.shift()),j--;return _.length&&F.push(_.join(":")),F}function es(_,j,F,H){this.j=_,this.i=j,this.l=F,this.S=H||1,this.V=new Bt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ts}function ts(){this.i=null,this.g="",this.h=!1}var Wn={},kr={};function js(_,j,F){_.M=1,_.A=Eu(Xn(j)),_.u=F,_.R=!0,mf(_,null)}function mf(_,j){_.F=Date.now(),zs(_),_.B=Xn(_.A);var F=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),xf(F.i,"t",H),_.C=0,F=_.j.L,_.h=new ts,_.g=Py(_.j,F?j:null,!_.u),_.P>0&&(_.O=new yt(u(_.Y,_,_.g),_.P)),j=_.V,F=_.g,H=_.ba;var he="readystatechange";Array.isArray(he)||(he&&(Qr[0]=he.toString()),he=Qr);for(let xe=0;xe<he.length;xe++){const je=se(F,he[xe],H||j.handleEvent,!1,j.h||j);if(!je)break;j.g[je.key]=je}j=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,j)):(_.v="GET",_.g.ea(_.B,_.v,null,j)),xt(),uE(_.i,_.v,_.B,_.l,_.S,_.u)}es.prototype.ba=function(_){_=_.target;const j=this.O;j&&is(_)==3?j.j():this.Y(_)},es.prototype.Y=function(_){try{if(_==this.g)e:{const ct=is(this.g),Un=this.g.ya(),Rt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Vr(this.g)))){this.K||ct!=4||Un==7||(Un==8||Rt<=0?xt(3):xt(2)),Ls(this);var j=this.g.ca();this.X=j;var F=fE(this);if(this.o=j==200,py(this.i,this.v,this.B,this.l,this.S,ct,j),this.o){if(this.U&&!this.L){t:{if(this.g){var H,he=this.g;if((H=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(H)){var xe=H;break t}}xe=null}if(_=xe)Ms(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vs(this,_);else{this.o=!1,this.m=3,_n(12),Xi(this),wa(this);break e}}if(this.R){_=!0;let gn;for(;!this.K&&this.C<F.length;)if(gn=vy(this,F),gn==kr){ct==4&&(this.m=4,_n(14),_=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Wn){this.m=4,_n(15),Ms(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Ms(this.i,this.l,gn,null),Vs(this,gn);if(my(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||F.length!=0||this.h.h||(this.m=1,_n(16),_=!1),this.o=this.o&&_,!_)Ms(this.i,this.l,F,"[Invalid Chunked Response]"),Xi(this),wa(this);else if(F.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Ig(je),je.P=!0,_n(11))}}else Ms(this.i,this.l,F,null),Vs(this,F);ct==4&&Xi(this),this.o&&!this.K&&(ct==4?Ay(this.j,this):(this.o=!1,zs(this)))}else Lo(this.g),j==400&&F.indexOf("Unknown SID")>0?(this.m=3,_n(12)):(this.m=0,_n(13)),Xi(this),wa(this)}}}catch{}};function fE(_){if(!my(_))return _.g.la();const j=Vr(_.g);if(j==="")return"";let F="";const H=j.length,he=is(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Xi(_),wa(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)_.h.h=!0,F+=_.h.i.decode(j[xe],{stream:!(he&&xe==H-1)});return j.length=0,_.h.g+=F,_.C=0,_.h.g}function my(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function vy(_,j){var F=_.C,H=j.indexOf(`
`,F);return H==-1?kr:(F=Number(j.substring(F,H)),isNaN(F)?Wn:(H+=1,H+F>j.length?kr:(j=j.slice(H,H+F),_.C=H+F,j)))}es.prototype.cancel=function(){this.K=!0,Xi(this)};function zs(_){_.T=Date.now()+_.H,vf(_,_.H)}function vf(_,j){if(_.D!=null)throw Error("WatchDog timer not null");_.D=xa(u(_.aa,_),j)}function Ls(_){_.D&&(s.clearTimeout(_.D),_.D=null)}es.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(wu(this.i,this.B),this.M!=2&&(xt(),_n(17)),Xi(this),this.m=2,wa(this)):vf(this,this.T-_)};function wa(_){_.j.I==0||_.K||Ay(_.j,_)}function Xi(_){Ls(_);var j=_.O;j&&typeof j.dispose=="function"&&j.dispose(),_.O=null,ze(_.V),_.g&&(j=_.g,_.g=null,j.abort(),j.dispose())}function Vs(_,j){try{var F=_.j;if(F.I!=0&&(F.g==_||Fs(F.h,_))){if(!_.L&&Fs(F.h,_)&&F.I==3){try{var H=F.Ba.g.parse(j)}catch{H=null}if(Array.isArray(H)&&H.length==3){var he=H;if(he[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)Tf(F),Ql(F);else break e;Nu(F),_n(18)}}else F.xa=he[1],0<F.xa-F.K&&he[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=xa(u(F.Va,F),6e3));Bs(F.h)<=1&&F.ta&&(F.ta=void 0)}else Ks(F,11)}else if((_.L||F.g==_)&&Tf(F),!L(j))for(he=F.Ba.g.parse(j),j=0;j<he.length;j++){let Rt=he[j];const gn=Rt[0];if(!(gn<=F.K))if(F.K=gn,Rt=Rt[1],F.I==2)if(Rt[0]=="c"){F.M=Rt[1],F.ba=Rt[2];const Ea=Rt[3];Ea!=null&&(F.ka=Ea,F.j.info("VER="+F.ka));const Ws=Rt[4];Ws!=null&&(F.za=Ws,F.j.info("SVER="+F.za));const as=Rt[5];as!=null&&typeof as=="number"&&as>0&&(H=1.5*as,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const ss=_.g;if(ss){const Du=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var xe=H.h;xe.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(vg(xe,xe.h),xe.h=null))}if(H.G){const Af=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;Af&&(H.wa=Af,Ut(H.J,H.G,Af))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var je=_;if(H.na=Iy(H,H.L?H.ba:null,H.W),je.L){yg(H.h,je);var ct=je,Un=H.O;Un&&(ct.H=Un),ct.D&&(Ls(ct),zs(ct)),H.g=je}else Ey(H);F.i.length>0&&Hs(F)}else Rt[0]!="stop"&&Rt[0]!="close"||Ks(F,7);else F.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ks(F,7):kg(F):Rt[0]!="noop"&&F.l&&F.l.qa(Rt),F.A=0)}}xt(4)}catch{}}var Yn=class{constructor(_,j){this.g=_,this.map=j}};function gg(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mg(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Bs(_){return _.h?1:_.g?_.g.size:0}function Fs(_,j){return _.h?_.h==j:_.g?_.g.has(j):!1}function vg(_,j){_.g?_.g.add(j):_.h=j}function yg(_,j){_.h&&_.h==j?_.h=null:_.g&&_.g.has(j)&&_.g.delete(j)}gg.prototype.cancel=function(){if(this.i=bg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function bg(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let j=_.i;for(const F of _.g.values())j=j.concat(F.G);return j}return v(_.i)}var yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yf(_,j){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const H=_[F].indexOf("=");let he,xe=null;H>=0?(he=_[F].substring(0,H),xe=_[F].substring(H+1)):he=_[F],j(he,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Qi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;_ instanceof Qi?(this.l=_.l,Cr(this,_.j),this.o=_.o,this.g=_.g,ql(this,_.u),this.h=_.h,xg(this,Sy(_.i)),this.m=_.m):_&&(j=String(_).match(yy))?(this.l=!1,Cr(this,j[1]||"",!0),this.o=Us(j[2]||""),this.g=Us(j[3]||"",!0),ql(this,j[4]),this.h=Us(j[5]||"",!0),xg(this,j[6]||"",!0),this.m=Us(j[7]||"")):(this.l=!1,this.i=new Hl(null,this.l))}Qi.prototype.toString=function(){const _=[];var j=this.j;j&&_.push(Tu(j,bf,!0),":");var F=this.g;return(F||j=="file")&&(_.push("//"),(j=this.o)&&_.push(Tu(j,bf,!0),"@"),_.push(jo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(Tu(F,F.charAt(0)=="/"?wg:by,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",Tu(F,xy)),_.join("")},Qi.prototype.resolve=function(_){const j=Xn(this);let F=!!_.j;F?Cr(j,_.j):F=!!_.o,F?j.o=_.o:F=!!_.g,F?j.g=_.g:F=_.u!=null;var H=_.h;if(F)ql(j,_.u);else if(F=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var he=j.h.lastIndexOf("/");he!=-1&&(H=j.h.slice(0,he+1)+H)}if(he=H,he==".."||he==".")H="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){H=he.lastIndexOf("/",0)==0,he=he.split("/");const xe=[];for(let je=0;je<he.length;){const ct=he[je++];ct=="."?H&&je==he.length&&xe.push(""):ct==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&je==he.length&&xe.push("")):(xe.push(ct),H=!0)}H=xe.join("/")}else H=he}return F?j.h=H:F=_.i.toString()!=="",F?xg(j,Sy(_.i)):F=!!_.m,F&&(j.m=_.m),j};function Xn(_){return new Qi(_)}function Cr(_,j,F){_.j=F?Us(j,!0):j,_.j&&(_.j=_.j.replace(/:$/,""))}function ql(_,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);_.u=j}else _.u=null}function xg(_,j,F){j instanceof Hl?(_.i=j,wf(_.i,_.l)):(F||(j=Tu(j,Gl)),_.i=new Hl(j,_.l))}function Ut(_,j,F){_.i.set(j,F)}function Eu(_){return Ut(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Us(_,j){return _?j?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Tu(_,j,F){return typeof _=="string"?(_=encodeURI(_).replace(j,Ci),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ci(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var bf=/[#\/\?@]/g,by=/[#\?:]/g,wg=/[#\?]/g,Gl=/[#\?@]/g,xy=/#/g;function Hl(_,j){this.h=this.g=null,this.i=_||null,this.j=!!j}function Ii(_){_.g||(_.g=new Map,_.h=0,_.i&&yf(_.i,function(j,F){_.add(decodeURIComponent(j.replace(/\+/g," ")),F)}))}t=Hl.prototype,t.add=function(_,j){Ii(this),this.i=null,_=Kl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(j),this.h+=1,this};function wy(_,j){Ii(_),j=Kl(_,j),_.g.has(j)&&(_.i=null,_.h-=_.g.get(j).length,_.g.delete(j))}function Sg(_,j){return Ii(_),j=Kl(_,j),_.g.has(j)}t.forEach=function(_,j){Ii(this),this.g.forEach(function(F,H){F.forEach(function(he){_.call(j,he,H,this)},this)},this)};function _g(_,j){Ii(_);let F=[];if(typeof j=="string")Sg(_,j)&&(F=F.concat(_.g.get(Kl(_,j))));else for(_=Array.from(_.g.values()),j=0;j<_.length;j++)F=F.concat(_[j]);return F}t.set=function(_,j){return Ii(this),this.i=null,_=Kl(this,_),Sg(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[j]),this.h+=1,this},t.get=function(_,j){return _?(_=_g(this,_),_.length>0?String(_[0]):j):j};function xf(_,j,F){wy(_,j),F.length>0&&(_.i=null,_.g.set(Kl(_,j),v(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],j=Array.from(this.g.keys());for(let H=0;H<j.length;H++){var F=j[H];const he=jo(F);F=_g(this,F);for(let xe=0;xe<F.length;xe++){let je=he;F[xe]!==""&&(je+="="+jo(F[xe])),_.push(je)}}return this.i=_.join("&")};function Sy(_){const j=new Hl;return j.i=_.i,_.g&&(j.g=new Map(_.g),j.h=_.h),j}function Kl(_,j){return j=String(j),_.j&&(j=j.toLowerCase()),j}function wf(_,j){j&&!_.j&&(Ii(_),_.i=null,_.g.forEach(function(F,H){const he=H.toLowerCase();H!=he&&(wy(this,H),xf(this,he,F))},_)),_.j=j}function ns(_,j){const F=new fi;if(s.Image){const H=new Image;H.onload=f(Sa,F,"TestLoadImage: loaded",!0,j,H),H.onerror=f(Sa,F,"TestLoadImage: error",!1,j,H),H.onabort=f(Sa,F,"TestLoadImage: abort",!1,j,H),H.ontimeout=f(Sa,F,"TestLoadImage: timeout",!1,j,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else j(!1)}function Eg(_,j){const F=new fi,H=new AbortController,he=setTimeout(()=>{H.abort(),Sa(F,"TestPingServer: timeout",!1,j)},1e4);fetch(_,{signal:H.signal}).then(xe=>{clearTimeout(he),xe.ok?Sa(F,"TestPingServer: ok",!0,j):Sa(F,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(he),Sa(F,"TestPingServer: error",!1,j)})}function Sa(_,j,F,H,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),H(F)}catch{}}function Wl(){this.g=new Zr}function $s(_){this.i=_.Sb||null,this.h=_.ab||!1}h($s,In),$s.prototype.g=function(){return new Au(this.i,this.h)};function Au(_,j){Ve.call(this),this.H=_,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Au,Ve),t=Au.prototype,t.open=function(_,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=j,this.readyState=1,rs(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(j.body=_),(this.H||s).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sf(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sf(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var j=_.value?_.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!_.done}))&&(this.response=this.responseText+=j)}_.done?Yl(this):rs(this),this.readyState==3&&Sf(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Yl(this))},t.Na=function(_){this.g&&(this.response=_,Yl(this))},t.ga=function(){this.g&&Yl(this)};function Yl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,rs(_)}t.setRequestHeader=function(_,j){this.A.append(_,j)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],j=this.h.entries();for(var F=j.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=j.next();return _.join(`\r
`)};function rs(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function _a(_){let j="";return ee(_,function(F,H){j+=H,j+=":",j+=F,j+=`\r
`}),j}function ku(_,j,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=_a(F),typeof _=="string"?F!=null&&jo(F):Ut(_,j,F))}function Yt(_){Ve.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Yt,Ve);var qs=/^https?$/i,Tg=["POST","PUT"];t=Yt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,j,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);j=j?j.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(j,String(_),!0),this.B=!1}catch(xe){Cu(this,xe);return}if(_=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var he in H)F.set(he,H[he]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),he=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(Tg,j,void 0)>=0)||H||he||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,je]of F)this.g.setRequestHeader(xe,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){Cu(this,xe)}};function Cu(_,j){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=j,_.o=5,Ag(_),zo(_)}function Ag(_){_.A||(_.A=!0,it(_,"complete"),it(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,it(this,"complete"),it(this,"abort"),zo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zo(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Iu(this):this.Xa())},t.Xa=function(){Iu(this)};function Iu(_){if(_.h&&typeof a<"u"){if(_.v&&is(_)==4)setTimeout(_.Ca.bind(_),0);else if(it(_,"readystatechange"),is(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var F;if(!(F=j)){var H;if(H=xe===0){let je=String(_.D).match(yy)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),H=!qs.test(je?je.toLowerCase():"")}F=H}if(F)it(_,"complete"),it(_,"success");else{_.o=6;try{var he=is(_)>2?_.g.statusText:""}catch{he=""}_.l=he+" ["+_.ca()+"]",Ag(_)}}finally{zo(_)}}}}function zo(_,j){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,j||it(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function is(_){return _.g?_.g.readyState:0}t.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var j=this.g.responseText;return _&&j.indexOf(_)==0&&(j=j.substring(_.length)),ki(j)}};function Vr(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(_){const j={};_=(_.g&&is(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(L(_[H]))continue;var F=gy(_[H]);const he=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=j[he]||[];j[he]=xe,xe.push(F)}X(j,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(_,j,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||j}function Xl(_){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gs("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gs("baseRetryDelayMs",5e3,_),this.Za=Gs("retryDelaySeedMs",1e4,_),this.Ta=Gs("forwardChannelMaxRetries",2,_),this.va=Gs("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new gg(_&&_.concurrentRequestLimit),this.Ba=new Wl,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xl.prototype,t.ka=8,t.I=1,t.connect=function(_,j,F,H){_n(0),this.W=_,this.H=j||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=Iy(this,null,this.W),Hs(this)};function kg(_){if(_f(_),_.I==3){var j=_.V++,F=Xn(_.J);if(Ut(F,"SID",_.M),Ut(F,"RID",j),Ut(F,"TYPE","terminate"),Pu(_,F),j=new es(_,_.j,j),j.M=2,j.A=Eu(Xn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(j.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=j.A,F=!0),F||(j.g=Py(j.j,null),j.g.ea(j.A)),j.F=Date.now(),zs(j)}Cy(_)}function Ql(_){_.g&&(Ig(_),_.g.cancel(),_.g=null)}function _f(_){Ql(_),_.v&&(s.clearTimeout(_.v),_.v=null),Tf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Hs(_){if(!mg(_.h)&&!_.m){_.m=!0;var j=_.Ea;D||C(),O||(D(),O=!0),I.add(j,_),_.D=0}}function Ef(_,j){return Bs(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=j.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=xa(u(_.Ea,_,j),ky(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const he=new es(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=U(xe),te(xe,this.U)):xe=this.U),this.u!==null||this.R||(he.J=xe,xe=null),this.S)e:{for(var j=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(j+=H,j>4096){j=F;break e}if(j===4096||F===this.i.length-1){j=F+1;break e}}j=1e3}else j=1e3;j=_y(this,he,j),F=Xn(this.J),Ut(F,"RID",_),Ut(F,"CVER",22),this.G&&Ut(F,"X-HTTP-Session-Id",this.G),Pu(this,F),xe&&(this.R?j="headers="+jo(_a(xe))+"&"+j:this.u&&ku(F,this.u,xe)),vg(this.h,he),this.Ra&&Ut(F,"TYPE","init"),this.S?(Ut(F,"$req",j),Ut(F,"SID","null"),he.U=!0,js(he,F,null)):js(he,F,j),this.I=2}}else this.I==3&&(_?Cg(this,_):this.i.length==0||mg(this.h)||Cg(this))};function Cg(_,j){var F;j?F=j.l:F=_.V++;const H=Xn(_.J);Ut(H,"SID",_.M),Ut(H,"RID",F),Ut(H,"AID",_.K),Pu(_,H),_.u&&_.o&&ku(H,_.u,_.o),F=new es(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),j&&(_.i=j.G.concat(_.i)),j=_y(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),vg(_.h,F),js(F,H,j)}function Pu(_,j){_.H&&ee(_.H,function(F,H){Ut(j,H,F)}),_.l&&ee({},function(F,H){Ut(j,H,F)})}function _y(_,j,F){F=Math.min(_.i.length,F);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var he=_.i;let ct=-1;for(;;){const Un=["count="+F];ct==-1?F>0?(ct=he[0].g,Un.push("ofs="+ct)):ct=0:Un.push("ofs="+ct);let Rt=!0;for(let gn=0;gn<F;gn++){var xe=he[gn].g;const Ea=he[gn].map;if(xe-=ct,xe<0)ct=Math.max(0,he[gn].g-100),Rt=!1;else try{xe="req"+xe+"_"||"";try{var je=Ea instanceof Map?Ea:Object.entries(Ea);for(const[Ws,as]of je){let ss=as;o(as)&&(ss=gt(as)),Un.push(xe+Ws+"="+encodeURIComponent(ss))}}catch(Ws){throw Un.push(xe+"type="+encodeURIComponent("_badmap")),Ws}}catch{H&&H(Ea)}}if(Rt){je=Un.join("&");break e}}je=void 0}return _=_.i.splice(0,F),j.G=_,je}function Ey(_){if(!_.g&&!_.v){_.Y=1;var j=_.Da;D||C(),O||(D(),O=!0),I.add(j,_),_.A=0}}function Nu(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=xa(u(_.Da,_),ky(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Ty(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=xa(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_n(10),Ql(this),Ty(this))};function Ig(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function Ty(_){_.g=new es(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var j=Xn(_.na);Ut(j,"RID","rpc"),Ut(j,"SID",_.M),Ut(j,"AID",_.K),Ut(j,"CI",_.F?"0":"1"),!_.F&&_.ia&&Ut(j,"TO",_.ia),Ut(j,"TYPE","xmlhttp"),Pu(_,j),_.u&&_.o&&ku(j,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Eu(Xn(j)),F.u=null,F.R=!0,mf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Ql(this),Nu(this),_n(19))};function Tf(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function Ay(_,j){var F=null;if(_.g==j){Tf(_),Ig(_),_.g=null;var H=2}else if(Fs(_.h,j))F=j.G,yg(_.h,j),H=1;else return;if(_.I!=0){if(j.o)if(H==1){F=j.u?j.u.length:0,j=Date.now()-j.F;var he=_.D;H=di(),it(H,new Yi(H,F)),Hs(_)}else Ey(_);else if(he=j.m,he==3||he==0&&j.X>0||!(H==1&&Ef(_,j)||H==2&&Nu(_)))switch(F&&F.length>0&&(j=_.h,j.i=j.i.concat(F)),he){case 1:Ks(_,5);break;case 4:Ks(_,10);break;case 3:Ks(_,6);break;default:Ks(_,2)}}}function ky(_,j){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*j}function Ks(_,j){if(_.j.info("Error code "+j),j==2){var F=u(_.bb,_),H=_.Ua;const he=!H;H=new Qi(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Cr(H,"https"),Eu(H),he?ns(H.toString(),F):Eg(H.toString(),F)}else _n(2);_.I=0,_.l&&_.l.pa(j),Cy(_),_f(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function Cy(_){if(_.I=0,_.ja=[],_.l){const j=bg(_.h);(j.length!=0||_.i.length!=0)&&(b(_.ja,j),b(_.ja,_.i),_.h.i.length=0,v(_.i),_.i.length=0),_.l.oa()}}function Iy(_,j,F){var H=F instanceof Qi?Xn(F):new Qi(F);if(H.g!="")j&&(H.g=j+"."+H.g),ql(H,H.u);else{var he=s.location;H=he.protocol,j=j?j+"."+he.hostname:he.hostname,he=+he.port;const xe=new Qi(null);H&&Cr(xe,H),j&&(xe.g=j),he&&ql(xe,he),F&&(xe.h=F),H=xe}return F=_.G,j=_.wa,F&&j&&Ut(H,F,j),Ut(H,"VER",_.ka),Pu(_,H),H}function Py(_,j,F){if(j&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=_.Aa&&!_.ma?new Yt(new $s({ab:F})):new Yt(_.ma),j.Fa(_.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ny(){}t=Ny.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zl(){}Zl.prototype.g=function(_,j){return new hi(_,j)};function hi(_,j){Ve.call(this),this.g=new Xl(j),this.l=_,this.h=j&&j.messageUrlParams||null,_=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(_?_["X-WebChannel-Content-Type"]=j.messageContentType:_={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(_?_["X-WebChannel-Client-Profile"]=j.sa:_={"X-WebChannel-Client-Profile":j.sa}),this.g.U=_,(_=j&&j.Qb)&&!L(_)&&(this.g.u=_),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!L(j)&&(this.g.G=j,_=this.h,_!==null&&j in _&&(_=this.h,j in _&&delete _[j])),this.j=new Vo(this)}h(hi,Ve),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){kg(this.g)},hi.prototype.o=function(_){var j=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=gt(_),_=F);j.i.push(new Yn(j.Ya++,_)),j.I==3&&Hs(j)},hi.prototype.N=function(){this.g.l=null,delete this.j,kg(this.g),delete this.g,hi.Z.N.call(this)};function Dy(_){wn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var j=_.__sm__;if(j){e:{for(const F in j){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,j=j!==null&&_ in j?j[_]:void 0),this.data=j}else this.data=_}h(Dy,wn);function Oy(){Ar.call(this),this.status=1}h(Oy,Ar);function Vo(_){this.g=_}h(Vo,Ny),Vo.prototype.ra=function(){it(this.g,"a")},Vo.prototype.qa=function(_){it(this.g,new Dy(_))},Vo.prototype.pa=function(_){it(this.g,new Oy)},Vo.prototype.oa=function(){it(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,Tq=function(){return new Zl},Eq=function(){return di()},_q=Ft,fI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,$x=Su,hg.COMPLETE="complete",Sq=hg,Tr.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,zm=Tr,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,wq=Yt}).apply(typeof Bb<"u"?Bb:typeof self<"u"?self:typeof window<"u"?window:{});class ni{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");let Fp="12.9.0";function _ue(t){Fp=t}const jd=new mS("@firebase/firestore");function vh(){return jd.logLevel}function Ne(t,...e){if(jd.logLevel<=At.DEBUG){const n=e.map(lD);jd.debug(`Firestore (${Fp}): ${t}`,...n)}}function Gn(t,...e){if(jd.logLevel<=At.ERROR){const n=e.map(lD);jd.error(`Firestore (${Fp}): ${t}`,...n)}}function tp(t,...e){if(jd.logLevel<=At.WARN){const n=e.map(lD);jd.warn(`Firestore (${Fp}): ${t}`,...n)}}function lD(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Aq(t,r,n)}function Aq(t,e,n){let r=`FIRESTORE (${Fp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Aq(e,i,r)}function Ke(t,e){return t}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends No{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Eue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ni.UNAUTHENTICATED)))}shutdown(){}}class Aue{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new Eue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new ni(e)}}class kue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Cue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ni.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ua(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class cD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Pue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function hI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return _A(i)===_A(a)?st(i,a):_A(i)?1:-1}return st(t.length,e.length)}const Nue=55296,Due=57343;function _A(t){const e=t.charCodeAt(0);return e>=Nue&&e<=Due}function np(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function kq(t){return t+"\0"}const e3="__name__";class oo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=oo.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return st(e.length,n.length)}static compareSegments(e,n){const r=oo.isNumericId(e),i=oo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?oo.extractNumericId(e).compare(oo.extractNumericId(n)):hI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qc.fromString(e.substring(4,e.length-2))}}class jt extends oo{construct(e,n,r){return new jt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new jt(n)}static emptyPath(){return new jt([])}}const Oue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends oo{construct(e,n,r){return new Tn(e,n,r)}static isValidIdentifier(e){return Oue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e3}static keyField(){return new Tn([e3])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Me(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Me(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Me(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(jt.fromString(e))}static fromName(e){return new Le(jt.fromString(e).popFirst(5))}static empty(){return new Le(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return jt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new jt(e.slice()))}}function Cq(t,e,n){if(!n)throw new Me(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rue(t,e,n,r){if(e===!0&&r===!0)throw new Me(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t3(t){if(!Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n3(t){if(Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function SS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=SS(t);throw new Me(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function w0(t,e){if(!Iq(t))throw new Me(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(Ee.INVALID_ARGUMENT,n);return!0}const r3=-62135596800,i3=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i3);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r3)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i3}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(w0(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:ar("string",ht._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new ht(0,0))}static max(){return new et(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rp=-1;class Iw{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function pI(t){return t.fields.find((e=>e.kind===2))}function ed(t){return t.fields.filter((e=>e.kind!==2))}Iw.UNKNOWN_ID=-1;class qx{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ev{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ev(0,ma.min())}}function Pq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new ma(i,Le.empty(),e)}function Nq(t){return new ma(t.readTime,t.key,rp)}class ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ma(et.min(),Le.empty(),rp)}static max(){return new ma(et.max(),Le.empty(),rp)}}function uD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}const Dq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function uu(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==Dq)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const oa="SimpleDb";class _S{static open(e,n,r,i){try{return new _S(n,e.transaction(i,r))}catch(a){throw new Zm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new yo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Zm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=dD(r.target.error);this.S.reject(new Zm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ne(oa,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new jue(n)}}class Gc{static delete(e){return Ne(oa,"Removing database:",e),od(FN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gS())return!1;if(Gc.F())return!0;const e=xr(),n=Gc.M(e),r=0<n&&n<10,i=Rq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Gc.M(xr())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ne(oa,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Zm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Me(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Me(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Zm(e,s))},i.onupgradeneeded=a=>{Ne(oa,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Ne(oa,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=_S.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Ne(oa,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Rq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Mue{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return od(this.U.delete())}}class Zm extends Me{constructor(e,n){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function du(t){return t.name==="IndexedDbTransactionError"}class jue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ne(oa,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ne(oa,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),od(r)}add(e){return Ne(oa,"ADD",this.store.name,e,e),od(this.store.add(e))}get(e){return od(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ne(oa,"GET",this.store.name,e,n),n)))}delete(e){return Ne(oa,"DELETE",this.store.name,e),od(this.store.delete(e))}count(){return Ne(oa,"COUNT",this.store.name),od(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.J(a,((o,c)=>{s.push(c)})).next((()=>s))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}X(e,n){Ne(oa,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=dD(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}J(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Mue(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function od(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=dD(r.target.error);n(i)}}))}let a3=!1;function dD(t){const e=Gc.M(xr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a3||(a3=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Jm="IndexBackfiller";class zue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ne(Jm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ne(Jm,`Documents written: ${n}`)}catch(n){du(n)?Ne(Jm,"Ignoring IndexedDB error during index backfill: ",n):await uu(n)}await this.re(6e4)}))}}class Lue{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ne(Jm,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Ne(Jm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=Nq(a);uD(s,r)>0&&(r=s)})),new ma(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class zi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zi.ce=-1;const Td=-1;function ES(t){return t==null}function Tv(t){return t===0&&1/t==-1/0}function Mq(t){return typeof t=="number"&&Number.isInteger(t)&&!Tv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Pw="";function oi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=s3(e)),e=Vue(t.get(n),e);return s3(e)}function Vue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Pw:n+="";break;default:n+=a}}return n}function s3(t){return t+Pw+""}function uo(t){const e=t.length;if(Xe(e>=2,64408,{path:t}),e===2)return Xe(t.charAt(0)===Pw&&t.charAt(1)==="",56145,{path:t}),jt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(Pw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new jt(r)}const td="remoteDocuments",S0="owner",nh="owner",Av="mutationQueues",Bue="userId",hs="mutations",o3="batchId",md="userMutationsIndex",l3=["userId","batchId"];function Gx(t,e){return[t,oi(e)]}function jq(t,e,n){return[t,oi(e),n]}const Fue={},ip="documentMutations",Nw="remoteDocumentsV14",Uue=["prefixPath","collectionGroup","readTime","documentId"],Hx="documentKeyIndex",$ue=["prefixPath","collectionGroup","documentId"],zq="collectionGroupIndex",que=["collectionGroup","readTime","prefixPath","documentId"],kv="remoteDocumentGlobal",gI="remoteDocumentGlobalKey",ap="targets",Lq="queryTargetsIndex",Gue=["canonicalId","targetId"],sp="targetDocuments",Hue=["targetId","path"],fD="documentTargetsIndex",Kue=["path","targetId"],Dw="targetGlobalKey",Ad="targetGlobal",Cv="collectionParents",Wue=["collectionId","parent"],op="clientMetadata",Yue="clientId",TS="bundles",Xue="bundleId",AS="namedQueries",Que="name",hD="indexConfiguration",Zue="indexId",mI="collectionGroupIndex",Jue="collectionGroup",ev="indexState",ede=["indexId","uid"],Vq="sequenceNumberIndex",tde=["uid","sequenceNumber"],tv="indexEntries",nde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bq="documentKeyIndex",rde=["indexId","uid","orderedDocumentKey"],kS="documentOverlays",ide=["userId","collectionPath","documentId"],vI="collectionPathOverlayIndex",ade=["userId","collectionPath","largestBatchId"],Fq="collectionGroupOverlayIndex",sde=["userId","collectionGroup","largestBatchId"],pD="globals",ode="name",Uq=[Av,hs,ip,td,ap,S0,Ad,sp,op,kv,Cv,TS,AS],lde=[...Uq,kS],$q=[Av,hs,ip,Nw,ap,S0,Ad,sp,op,kv,Cv,TS,AS,kS],qq=$q,gD=[...qq,hD,ev,tv],cde=gD,Gq=[...gD,pD],ude=Gq;class yI extends Oq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function wr(t,e){const n=Ke(t);return Gc.O(n.le,e)}function c3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fb(this.root,e,this.comparator,!0)}}class Fb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=a??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Yr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u3(this.data.getIterator())}getIteratorFrom(e){return new u3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class u3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rh(t){return t.hasNext()?t.getNext():void 0}class Li{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new Li([])}unionWith(e){let n=new Kt(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Li(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return np(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Kq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Kq("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const dde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=dde.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function El(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}const Wq="server_timestamp",Yq="__type__",Xq="__previous_value__",Qq="__local_write_time__";function mD(t){return(t?.mapValue?.fields||{})[Yq]?.stringValue===Wq}function CS(t){const e=t.mapValue.fields[Xq];return mD(e)?CS(e):e}function Iv(t){const e=_l(t.mapValue.fields[Qq].timestampValue);return new ht(e.seconds,e.nanos)}class fde{constructor(e,n,r,i,a,s,o,c,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=h}}const Ow="(default)";class zd{constructor(e,n){this.projectId=e,this.database=n||Ow}static empty(){return new zd("","")}get isDefaultDatabase(){return this.database===Ow}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}function hde(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Me(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(t.options.projectId,e)}const vD="__type__",Zq="__max__",Mc={mapValue:{fields:{__type__:{stringValue:Zq}}}},yD="__vector__",lp="value",Kx={nullValue:"NULL_VALUE"};function Qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mD(t)?4:Jq(t)?9007199254740991:IS(t)?10:11:Fe(28295,{value:t})}function Eo(t,e){if(t===e)return!0;const n=Qc(t);if(n!==Qc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iv(t).isEqual(Iv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=_l(i.timestampValue),o=_l(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return El(i.bytesValue).isEqual(El(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return yn(i.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(i.geoPointValue.longitude)===yn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return yn(i.integerValue)===yn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=yn(i.doubleValue),o=yn(a.doubleValue);return s===o?Tv(s)===Tv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return np(t.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(c3(s)!==c3(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Eo(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Pv(t,e){return(t.values||[]).find((n=>Eo(n,e)))!==void 0}function Zc(t,e){if(t===e)return 0;const n=Qc(t),r=Qc(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=yn(a.integerValue||a.doubleValue),c=yn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return d3(t.timestampValue,e.timestampValue);case 4:return d3(Iv(t),Iv(e));case 5:return hI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=El(a),c=El(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=st(o[u],c[u]);if(f!==0)return f}return st(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=st(yn(a.latitude),yn(s.latitude));return o!==0?o:st(yn(a.longitude),yn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f3(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[lp]?.arrayValue,f=c[lp]?.arrayValue,h=st(u?.values?.length||0,f?.values?.length||0);return h!==0?h:f3(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Mc.mapValue&&s===Mc.mapValue)return 0;if(a===Mc.mapValue)return 1;if(s===Mc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=hI(c[h],f[h]);if(g!==0)return g;const v=Zc(o[c[h]],u[f[h]]);if(v!==0)return v}return st(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function d3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=_l(t),r=_l(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function f3(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Zc(n[i],r[i]);if(a)return a}return st(n.length,r.length)}function cp(t){return bI(t)}function bI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=_l(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return El(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=bI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${bI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function Wx(t){switch(Qc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=CS(t);return e?16+Wx(e):16;case 5:return 2*t.stringValue.length;case 6:return El(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Wx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return fu(r.fields,((a,s)=>{i+=a.length+Wx(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function Nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xI(t){return!!t&&"integerValue"in t}function Dv(t){return!!t&&"arrayValue"in t}function h3(t){return!!t&&"nullValue"in t}function p3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yx(t){return!!t&&"mapValue"in t}function IS(t){return(t?.mapValue?.fields||{})[vD]?.stringValue===yD}function nv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return fu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=nv(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nv(t.arrayValue.values[n]);return e}return{...t}}function Jq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Zq}const eG={mapValue:{fields:{[vD]:{stringValue:yD},[lp]:{arrayValue:{}}}}};function pde(t){return"nullValue"in t?Kx:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Nv(zd.empty(),Le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?IS(t)?eG:{mapValue:{}}:Fe(35942,{value:t})}function gde(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Nv(zd.empty(),Le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?eG:"mapValue"in t?IS(t)?{mapValue:{}}:Mc:Fe(61959,{value:t})}function g3(t,e){const n=Zc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function m3(t,e){const n=Zc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nv(n)}setAll(e){let n=Tn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=nv(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Yx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ai(nv(this.value))}}function tG(t){const e=[];return fu(t.fields,((n,r)=>{const i=new Tn([n]);if(Yx(r)){const a=tG(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Li(e)}class zn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,et.min(),et.min(),et.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new zn(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new zn(e,2,n,et.min(),et.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,et.min(),et.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class up{constructor(e,n){this.position=e,this.inclusive=n}}function v3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(s.referenceValue),n.key):r=Zc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function y3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Eo(t.position[n],e.position[n]))return!1;return!0}class Ov{constructor(e,n="asc"){this.field=e,this.dir=n}}function mde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class nG{}class kt extends nG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vde(e,n,r):n==="array-contains"?new xde(e,r):n==="in"?new lG(e,r):n==="not-in"?new wde(e,r):n==="array-contains-any"?new Sde(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yde(e,r):new bde(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zc(n,this.value)):n!==null&&Qc(this.value)===Qc(n)&&this.matchesComparison(Zc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends nG{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return dp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dp(t){return t.op==="and"}function wI(t){return t.op==="or"}function bD(t){return rG(t)&&dp(t)}function rG(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function SI(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+cp(t.value);if(bD(t))return t.filters.map((e=>SI(e))).join(",");{const e=t.filters.map((n=>SI(n))).join(",");return`${t.op}(${e})`}}function iG(t,e){return t instanceof kt?(function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&Eo(r.value,i.value)})(t,e):t instanceof Ht?(function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&iG(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function aG(t,e){const n=t.filters.concat(e);return Ht.create(n,t.op)}function sG(t){return t instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${cp(n.value)}`})(t):t instanceof Ht?(function(n){return n.op.toString()+" {"+n.getFilters().map(sG).join(" ,")+"}"})(t):"Filter"}class vde extends kt{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class yde extends kt{constructor(e,n){super(e,"in",n),this.keys=oG("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bde extends kt{constructor(e,n){super(e,"not-in",n),this.keys=oG("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function oG(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class xde extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dv(n)&&Pv(n.arrayValue,this.value)}}class lG extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pv(this.value.arrayValue,n)}}class wde extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pv(this.value.arrayValue,n)}}class Sde extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Pv(this.value.arrayValue,r)))}}class _de{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function _I(t,e=null,n=[],r=[],i=null,a=null,s=null){return new _de(t,e,n,r,i,a,s)}function Ld(t){const e=Ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>SI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ES(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>cp(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>cp(r))).join(",")),e.Te=n}return e.Te}function _0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y3(t.startAt,e.startAt)&&y3(t.endAt,e.endAt)}function Rw(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mw(t,e){return t.filters.filter((n=>n instanceof kt&&n.field.isEqual(e)))}function b3(t,e,n){let r=Kx,i=!0;for(const a of Mw(t,e)){let s=Kx,o=!0;switch(a.op){case"<":case"<=":s=pde(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=Kx}g3({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];g3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function x3(t,e,n){let r=Mc,i=!0;for(const a of Mw(t,e)){let s=Mc,o=!0;switch(a.op){case">=":case">":s=gde(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=Mc}m3({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];m3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Up{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cG(t,e,n,r,i,a,s,o){return new Up(t,e,n,r,i,a,s,o)}function E0(t){return new Up(t)}function w3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ede(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function uG(t){return t.collectionGroup!==null}function rv(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Kt(Tn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ov(a,r))})),n.has(Tn.keyField().canonicalString())||e.Ie.push(new Ov(Tn.keyField(),r))}return e.Ie}function pa(t){const e=Ke(t);return e.Ee||(e.Ee=Tde(e,rv(t))),e.Ee}function Tde(t,e){if(t.limitType==="F")return _I(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Ov(i.field,a)}));const n=t.endAt?new up(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new up(t.startAt.position,t.startAt.inclusive):null;return _I(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function EI(t,e){const n=t.filters.concat([e]);return new Up(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ade(t,e){const n=t.explicitOrderBy.concat([e]);return new Up(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function jw(t,e,n){return new Up(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function PS(t,e){return _0(pa(t),pa(e))&&t.limitType===e.limitType}function dG(t){return`${Ld(pa(t))}|lt:${t.limitType}`}function yh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>sG(i))).join(", ")}]`),ES(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>cp(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>cp(i))).join(",")),`Target(${r})`})(pa(t))}; limitType=${t.limitType})`}function T0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of rv(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=v3(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,rv(r),i)||r.endAt&&!(function(s,o,c){const u=v3(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,rv(r),i))})(t,e)}function fG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hG(t){return(e,n)=>{let r=!1;for(const i of rv(t)){const a=kde(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function kde(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?Zc(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class jl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Hq(this.inner)}size(){return this.innerSize}}const Cde=new ln(Le.comparator);function fa(){return Cde}const pG=new ln(Le.comparator);function Lm(...t){let e=pG;for(const n of t)e=e.insert(n.key,n);return e}function gG(t){let e=pG;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fo(){return iv()}function mG(){return iv()}function iv(){return new jl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ide=new ln(Le.comparator),Pde=new Kt(Le.comparator);function vt(...t){let e=Pde;for(const n of t)e=e.add(n);return e}const Nde=new Kt(st);function xD(){return Nde}function wD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tv(e)?"-0":e}}function vG(t){return{integerValue:""+t}}function Dde(t,e){return Mq(e)?vG(e):wD(t,e)}class NS{constructor(){this._=void 0}}function Ode(t,e,n){return t instanceof Rv?(function(i,a){const s={fields:{[Yq]:{stringValue:Wq},[Qq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&mD(a)&&(a=CS(a)),a&&(s.fields[Xq]=a),{mapValue:s}})(n,e):t instanceof Vd?bG(t,e):t instanceof fp?xG(t,e):(function(i,a){const s=yG(i,a),o=S3(s)+S3(i.Ae);return xI(s)&&xI(i.Ae)?vG(o):wD(i.serializer,o)})(t,e)}function Rde(t,e,n){return t instanceof Vd?bG(t,e):t instanceof fp?xG(t,e):n}function yG(t,e){return t instanceof Mv?(function(r){return xI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Rv extends NS{}class Vd extends NS{constructor(e){super(),this.elements=e}}function bG(t,e){const n=wG(e);for(const r of t.elements)n.some((i=>Eo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class fp extends NS{constructor(e){super(),this.elements=e}}function xG(t,e){let n=wG(e);for(const r of t.elements)n=n.filter((i=>!Eo(i,r)));return{arrayValue:{values:n}}}class Mv extends NS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function S3(t){return yn(t.integerValue||t.doubleValue)}function wG(t){return Dv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class SG{constructor(e,n){this.field=e,this.transform=n}}function Mde(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Vd&&i instanceof Vd||r instanceof fp&&i instanceof fp?np(r.elements,i.elements,Eo):r instanceof Mv&&i instanceof Mv?Eo(r.Ae,i.Ae):r instanceof Rv&&i instanceof Rv})(t.transform,e.transform)}class jde{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class DS{}function _G(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A0(t.key,yr.none()):new $p(t.key,t.data,yr.none());{const n=t.data,r=ai.empty();let i=new Kt(Tn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new zl(t.key,r,new Li(i.toArray()),yr.none())}}function zde(t,e,n){t instanceof $p?(function(i,a,s){const o=i.value.clone(),c=E3(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof zl?(function(i,a,s){if(!Xx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=E3(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(EG(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function av(t,e,n,r){return t instanceof $p?(function(a,s,o,c){if(!Xx(a.precondition,s))return o;const u=a.value.clone(),f=T3(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof zl?(function(a,s,o,c){if(!Xx(a.precondition,s))return o;const u=T3(a.fieldTransforms,c,s),f=s.data;return f.setAll(EG(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return Xx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Lde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=yG(r.transform,i||null);a!=null&&(n===null&&(n=ai.empty()),n.set(r.field,a))}return n||null}function _3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&np(r,i,((a,s)=>Mde(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $p extends DS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zl extends DS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function EG(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function E3(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Rde(s,o,n[i]))}return r}function T3(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Ode(a,s,e))}return r}class A0 extends DS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TG extends DS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=av(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=av(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mG();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=_G(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),vt())}isEqual(e){return this.batchId===e.batchId&&np(this.mutations,e.mutations,((n,r)=>_3(n,r)))&&np(this.baseMutations,e.baseMutations,((n,r)=>_3(n,r)))}}class _D{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Ide})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new _D(e,n,r,i)}}class ED{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Vde{constructor(e,n){this.count=e,this.unchangedNames=n}}var nr,It;function Bde(t){switch(t){case Ee.OK:return Fe(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function AG(t){if(t===void 0)return Gn("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case nr.OK:return Ee.OK;case nr.CANCELLED:return Ee.CANCELLED;case nr.UNKNOWN:return Ee.UNKNOWN;case nr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case nr.INTERNAL:return Ee.INTERNAL;case nr.UNAVAILABLE:return Ee.UNAVAILABLE;case nr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case nr.NOT_FOUND:return Ee.NOT_FOUND;case nr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case nr.ABORTED:return Ee.ABORTED;case nr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case nr.DATA_LOSS:return Ee.DATA_LOSS;default:return Fe(39323,{code:t})}}(It=nr||(nr={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function Fde(){return new TextEncoder}const Ude=new qc([4294967295,4294967295],0);function A3(t){const e=Fde().encode(t),n=new xq;return n.update(e),new Uint8Array(n.digest())}function k3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qc([n,r],0),new qc([i,a],0)]}class TD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vm(`Invalid padding: ${n}`);if(r<0)throw new Vm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(qc.fromNumber(r)));return i.compare(Ude)===1&&(i=new qc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A3(e),[r,i]=k3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new TD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=A3(e),[r,i]=k3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.be(s)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class k0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,C0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new k0(et.min(),i,new ln(st),fa(),vt())}}class C0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new C0(r,n,vt(),vt(),vt())}}class Qx{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class kG{constructor(e,n){this.targetId=e,this.Ce=n}}class CG{constructor(e,n,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class C3{constructor(){this.ve=0,this.Fe=I3(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vt(),n=vt(),r=vt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new C0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=I3()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $de{constructor(e){this.Ge=e,this.ze=new Map,this.je=fa(),this.He=Ub(),this.Je=Ub(),this.Ze=new ln(st)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Rw(a))if(r===0){const s=new Le(a.path);this.et(n,s,zn.newNoDocument(s,et.min()))}else Xe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=El(r).toUint8Array()}catch(c){if(c instanceof Kq)return tp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new TD(s,i,a)}catch(c){return tp(c instanceof Vm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&Rw(o.target)){const c=new Le(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zn.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.Ke())}}));let r=vt();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new k0(e,n,this.Ze,this.je,r);return this.je=fa(),this.He=Ub(),this.Je=Ub(),this.Ze=new ln(st),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new C3,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Kt(st),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Kt(st),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ub(){return new ln(Le.comparator)}function I3(){return new ln(Le.comparator)}const qde={asc:"ASCENDING",desc:"DESCENDING"},Gde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hde={and:"AND",or:"OR"};class Kde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function TI(t,e){return t.useProto3Json||ES(e)?e:{value:e}}function hp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wde(t,e){return hp(t,e.toTimestamp())}function _i(t){return Xe(!!t,49232),et.fromTimestamp((function(n){const r=_l(n);return new ht(r.seconds,r.nanos)})(t))}function AD(t,e){return AI(t,e).canonicalString()}function AI(t,e){const n=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function PG(t){const e=jt.fromString(t);return Xe(VG(e),10190,{key:e.toString()}),e}function zw(t,e){return AD(t.databaseId,e.path)}function kd(t,e){const n=PG(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(OG(n))}function NG(t,e){return AD(t.databaseId,e)}function DG(t){const e=PG(t);return e.length===4?jt.emptyPath():OG(e)}function kI(t){return new jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OG(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P3(t,e,n){return{name:zw(t,e),fields:n.value.mapValue.fields}}function Yde(t,e,n){const r=kd(t,e.name),i=_i(e.updateTime),a=e.createTime?_i(e.createTime):et.min(),s=new ai({mapValue:{fields:e.fields}}),o=zn.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xde(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Xe(f===void 0||typeof f=="string",58123),Hn.fromBase64String(f||"")):(Xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Hn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Ee.UNKNOWN:AG(u.code);return new Me(f,u.message||"")})(s);n=new CG(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kd(t,r.document.name),a=_i(r.document.updateTime),s=r.document.createTime?_i(r.document.createTime):et.min(),o=new ai({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Qx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kd(t,r.document),a=r.readTime?_i(r.readTime):et.min(),s=zn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Qx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kd(t,r.document),a=r.removedTargetIds||[];n=new Qx([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Vde(i,a),o=r.targetId;n=new kG(o,s)}}return n}function Lw(t,e){let n;if(e instanceof $p)n={update:P3(t,e.key,e.value)};else if(e instanceof A0)n={delete:zw(t,e.key)};else if(e instanceof zl)n={update:P3(t,e.key,e.data),updateMask:nfe(e.fieldMask)};else{if(!(e instanceof TG))return Fe(16599,{dt:e.type});n={verify:zw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof Rv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Vd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Mv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Wde(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function CI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?yr.updateTime(_i(a.updateTime)):a.exists!==void 0?yr.exists(a.exists):yr.none()})(e.currentDocument):yr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Xe(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new Rv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Vd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new fp(f)}else"increment"in o?c=new Mv(s,o.increment):Fe(16584,{proto:o});const u=Tn.fromServerFormat(o.fieldPath);return new SG(u,c)})(t,i))):[];if(e.update){e.update.name;const i=kd(t,e.update.name),a=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Li(u.map((f=>Tn.fromServerFormat(f))))})(e.updateMask);return new zl(i,a,s,n,r)}return new $p(i,a,n,r)}if(e.delete){const i=kd(t,e.delete);return new A0(i,n)}if(e.verify){const i=kd(t,e.verify);return new TG(i,n)}return Fe(1463,{proto:e})}function Qde(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?_i(i.updateTime):_i(a);return s.isEqual(et.min())&&(s=_i(a)),new jde(s,i.transformResults||[])})(n,e)))):[]}function RG(t,e){return{documents:[NG(t,e.path)]}}function MG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NG(t,i);const a=(function(u){if(u.length!==0)return LG(Ht.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:bh(g.field),direction:Jde(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=TI(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function jG(t){let e=DG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=zG(h);return g instanceof Ht&&bD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new Ov(xh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,ES(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new up(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new up(v,g)})(n.endAt)),cG(e,i,s,a,o,"F",c,u)}function Zde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xh(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xh(n.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xh(n.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xh(n.unaryFilter.field);return kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kt.create(xh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ht.create(n.compositeFilter.filters.map((r=>zG(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function Jde(t){return qde[t]}function efe(t){return Gde[t]}function tfe(t){return Hde[t]}function bh(t){return{fieldPath:t.canonicalString()}}function xh(t){return Tn.fromServerFormat(t.fieldPath)}function LG(t){return t instanceof kt?(function(n){if(n.op==="=="){if(p3(n.value))return{unaryFilter:{field:bh(n.field),op:"IS_NAN"}};if(h3(n.value))return{unaryFilter:{field:bh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p3(n.value))return{unaryFilter:{field:bh(n.field),op:"IS_NOT_NAN"}};if(h3(n.value))return{unaryFilter:{field:bh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(n.field),op:efe(n.op),value:n.value}}})(t):t instanceof Ht?(function(n){const r=n.getFilters().map((i=>LG(i)));return r.length===1?r[0]:{compositeFilter:{op:tfe(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function nfe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function VG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function BG(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class ol{constructor(e,n,r,i,a=et.min(),s=et.min(),o=Hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FG{constructor(e){this.yt=e}}function rfe(t,e){let n;if(e.document)n=Yde(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=Fd(e.noDocument.readTime);n=zn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=Fd(e.unknownDocument.version);n=zn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new ht(i[0],i[1]);return et.fromTimestamp(a)})(e.readTime)),n}function N3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:zw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:hp(a,s.version.toTimestamp()),createTime:hp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bd(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Bd(e.version)}}return r}function Vw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fd(t){const e=new ht(t.seconds,t.nanoseconds);return et.fromTimestamp(e)}function ld(t,e){const n=(e.baseMutations||[]).map((a=>CI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>CI(t.yt,a))),i=ht.fromMillis(e.localWriteTimeMs);return new SD(e.batchId,i,n,r)}function Bm(t){const e=Fd(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Fd(t.lastLimboFreeSnapshotVersion):et.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Xe(s===1,1966,{count:s}),pa(E0(DG(a.documents[0])))})(t.query):(function(a){return pa(jG(a))})(t.query),new ol(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Hn.fromBase64String(t.resumeToken))}function UG(t,e){const n=Bd(e.snapshotVersion),r=Bd(e.lastLimboFreeSnapshotVersion);let i;i=Rw(e.target)?RG(t.yt,e.target):MG(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ld(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $G(t){const e=jG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jw(e,e.limit,"L"):e}function EA(t,e){return new ED(e.largestBatchId,CI(t.yt,e.overlayMutation))}function D3(t,e){const n=e.path.lastSegment();return[t,oi(e.path.popLast()),n]}function O3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Bd(r.readTime),documentKey:oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ife{getBundleMetadata(e,n){return R3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Fd(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return R3(e).put((function(i){return{bundleId:i.id,createTime:Bd(_i(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return M3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:$G(a.bundledQuery),readTime:Fd(a.readTime)}})(r)}))}saveNamedQuery(e,n){return M3(e).put((function(i){return{name:i.name,readTime:Bd(_i(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function R3(t){return wr(t,TS)}function M3(t){return wr(t,AS)}class OS{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new OS(e,r)}getOverlay(e,n){return gm(e).get(D3(this.userId,n)).next((r=>r?EA(this.serializer,r):null))}getOverlays(e,n){const r=fo();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new ED(n,s);i.push(this.bt(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(oi(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(gm(e).X(vI,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=fo(),a=oi(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return gm(e).H(vI,s).next((o=>{for(const c of o){const u=EA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=fo();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gm(e).ee({index:Fq,range:o},((c,u,f)=>{const h=EA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}bt(e,n){return gm(e).put((function(i,a,s){const[o,c,u]=D3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Lw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function gm(t){return wr(t,kS)}class afe{St(e){return wr(e,pD)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Hn.fromUint8Array(r):Hn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class cd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Tv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=_l(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(El(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Jq(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):IS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=lp,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(yn(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Le.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}cd.Wt=new cd;const ih=255;function sfe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function j3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=sfe(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class ofe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=j3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=j3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(ih),this.sn(255)}_n(){this.an(ih),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ih?(this.sn(ih),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ih?(this.an(ih),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lfe{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class cfe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class mm{constructor(){this.cn=new ofe,this.ascending=new lfe(this.cn),this.descending=new cfe(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class ud{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new ud(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Zx(this.Tn),directionalValue:Zx(this.In),orderedDocumentKey:Zx(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Sc(t,e){let n=t.hn-e.hn;return n!==0?n:(n=z3(t.Tn,e.Tn),n!==0?n:(n=z3(t.In,e.In),n!==0?n:Le.comparator(t.Pn,e.Pn)))}function z3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Zx(t){return e8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function L3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class V3{constructor(e){this.Vn=new Kt(((n,r)=>Tn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=pI(e);if(n!==void 0&&!this.pn(n))return!1;const r=ed(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const o=this.Vn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.yn(o,c)||!this.wn(this.dn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.dn.length||!this.wn(this.dn[s++],o))return!1}return!0}bn(){if(this.fn)return null;let e=new Kt(Tn.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new qx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new qx(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new qx(r.field,r.dir==="asc"?0:1)));return new Iw(Iw.UNKNOWN_ID,this.collectionId,n,Ev.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function qG(t){if(Xe(t instanceof kt||t instanceof Ht,20012),t instanceof kt){if(t instanceof lG){const n=t.value.arrayValue?.values?.map((r=>kt.create(t.field,"==",r)))||[];return Ht.create(n,"or")}return t}const e=t.filters.map((n=>qG(n)));return Ht.create(e,t.op)}function ufe(t){if(t.getFilters().length===0)return[];const e=NI(qG(t));return Xe(GG(e),7391),II(e)||PI(e)?[e]:e.getFilters()}function II(t){return t instanceof kt}function PI(t){return t instanceof Ht&&bD(t)}function GG(t){return II(t)||PI(t)||(function(n){if(n instanceof Ht&&wI(n)){for(const r of n.getFilters())if(!II(r)&&!PI(r))return!1;return!0}return!1})(t)}function NI(t){if(Xe(t instanceof kt||t instanceof Ht,34018),t instanceof kt)return t;if(t.filters.length===1)return NI(t.filters[0]);const e=t.filters.map((r=>NI(r)));let n=Ht.create(e,t.op);return n=Bw(n),GG(n)?n:(Xe(n instanceof Ht,64498),Xe(dp(n),40251),Xe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>kD(r,i))))}function kD(t,e){let n;return Xe(t instanceof kt||t instanceof Ht,38388),Xe(e instanceof kt||e instanceof Ht,25473),n=t instanceof kt?e instanceof kt?(function(i,a){return Ht.create([i,a],"and")})(t,e):B3(t,e):e instanceof kt?B3(e,t):(function(i,a){if(Xe(i.filters.length>0&&a.filters.length>0,48005),dp(i)&&dp(a))return aG(i,a.getFilters());const s=wI(i)?i:a,o=wI(i)?a:i,c=s.filters.map((u=>kD(u,o)));return Ht.create(c,"or")})(t,e),Bw(n)}function B3(t,e){if(dp(e))return aG(e,t.getFilters());{const n=e.filters.map((r=>kD(t,r)));return Ht.create(n,"or")}}function Bw(t){if(Xe(t instanceof kt||t instanceof Ht,11850),t instanceof kt)return t;const e=t.getFilters();if(e.length===1)return Bw(e[0]);if(rG(t))return t;const n=e.map((i=>Bw(i))),r=[];return n.forEach((i=>{i instanceof kt?r.push(i):i instanceof Ht&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ht.create(r,t.op)}class dfe{constructor(){this.Sn=new CD}addToCollectionParentIndex(e,n){return this.Sn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ma.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class CD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(jt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(jt.comparator)).toArray()}}const F3="IndexedDbIndexManager",$b=new Uint8Array(0);class ffe{constructor(e,n){this.databaseId=n,this.Dn=new CD,this.Cn=new jl((r=>Ld(r)),((r,i)=>_0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:oi(i)};return U3(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[kq(n),""],!1,!0);return U3(e).H(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(uo(s.parent))}return r}))}addFieldIndex(e,n){const r=vm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=sh(e);return a.next((o=>{s.put(O3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=vm(e),i=sh(e),a=ah(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=vm(e),r=ah(e),i=sh(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return fe.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new V3(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=ah(e);let i=!0;const a=new Map;return fe.forEach(this.vn(n),(s=>this.Fn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=vt();const o=[];return fe.forEach(a,((c,u)=>{Ne(F3,`Using index ${(function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(c)} to execute ${Ld(n)}`);const f=(function(P,N){const D=pI(N);if(D===void 0)return null;for(const O of Mw(P,D.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null})(u,c),h=(function(P,N){const D=new Map;for(const O of ed(N))for(const I of Mw(P,O.fieldPath))switch(I.op){case"==":case"in":D.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return D.set(O.fieldPath.canonicalString(),I.value),Array.from(D.values())}return null})(u,c),g=(function(P,N){const D=[];let O=!0;for(const I of ed(N)){const C=I.kind===0?b3(P,I.fieldPath,P.startAt):x3(P,I.fieldPath,P.startAt);D.push(C.value),O&&(O=C.inclusive)}return new up(D,O)})(u,c),v=(function(P,N){const D=[];let O=!0;for(const I of ed(N)){const C=I.kind===0?x3(P,I.fieldPath,P.endAt):b3(P,I.fieldPath,P.endAt);D.push(C.value),O&&(O=C.inclusive)}return new up(D,O)})(u,c),b=this.Mn(c,u,g),x=this.Mn(c,u,v),w=this.xn(c,u,h),S=this.On(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return fe.forEach(S,(T=>r.Z(T,n.limit).next((P=>{P.forEach((N=>{const D=Le.fromSegments(N.documentKey);s.has(D)||(s=s.add(D),o.push(D))}))}))))})).next((()=>o))}return fe.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=ufe(Ht.create(e.filters,"and")).map((r=>_I(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Nn(n[h/u]):$b,v=this.Bn(e,g,r[h%u],i),b=this.Ln(e,g,a[h%u],s),x=o.map((w=>this.Bn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}Bn(e,n,r,i){const a=new ud(e,Le.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new ud(e,Le.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new V3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.gn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.vn(n);return fe.forEach(i,(a=>this.Fn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Kt(Tn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new mm;for(const i of ed(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.ln(i.kind);cd.Wt.Dt(a,s)}return r.un()}Nn(e){const n=new mm;return cd.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new mm;return cd.Wt.Dt(Nv(this.databaseId,n),r.ln((function(a){const s=ed(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new mm);let a=0;for(const s of ed(e)){const o=r[a++];for(const c of i)if(this.qn(n,s.fieldPath)&&Dv(o))i=this.Un(i,s,o);else{const u=c.ln(s.kind);cd.Wt.Dt(o,u)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new mm;c.seed(o.un()),cd.Wt.Dt(s,c.ln(n.kind)),a.push(c)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof kt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=vm(e),i=sh(e);return(n?r.H(mI,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new Ev(h.sequenceNumber,new ma(Fd(h.readTime),new Le(uo(h.documentKey)),h.largestBatchId)):Ev.empty(),v=f.fields.map((([b,x])=>new qx(Tn.fromServerFormat(b),x)));return new Iw(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:st(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=vm(e),a=sh(e);return this.Wn(e).next((s=>i.H(mI,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put(O3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.Qn(e,i,c).next((u=>{const f=this.Gn(a,c);return u.isEqual(f)?fe.resolve():this.zn(e,a,c,u,f)})))))))}))}jn(e,n,r,i){return ah(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return ah(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=ah(e);let a=new Kt(Sc);return i.ee({index:Bq,range:IDBKeyRange.only([r.indexId,this.uid,Zx(this.Kn(r,n))])},((s,o)=>{a=a.add(new ud(r.indexId,n,L3(o.arrayValue),L3(o.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new Kt(Sc);const i=this.kn(n,e);if(i==null)return r;const a=pI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Dv(s))for(const o of s.arrayValue.values||[])r=r.add(new ud(n.indexId,e.key,this.Nn(o),i))}else r=r.add(new ud(n.indexId,e.key,$b,i));return r}zn(e,n,r,i,a){Ne(F3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=rh(v),w=rh(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const P=f(x,w);P<0?T=!0:P>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=rh(b)):T?(g(x),x=rh(v)):(x=rh(v),w=rh(b))}})(i,a,Sc,(o=>{s.push(this.jn(e,n,r,o))}),(o=>{s.push(this.Hn(e,n,r,o))})),fe.waitFor(s)}Wn(e){let n=1;return sh(e).ee({index:Vq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>Sc(s,o))).filter(((s,o,c)=>!o||Sc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=Sc(s,e),c=Sc(s,n);if(o===0)i[0]=e.En();else if(o>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Jn(i[s],i[s+1]))return[];const o=i[s].An(this.uid,$b,Le.empty()),c=i[s+1].An(this.uid,$b,Le.empty());a.push(IDBKeyRange.bound(o,c))}return a}Jn(e,n){return Sc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($3)}getMinOffset(e,n){return fe.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||Fe(44426))))).next($3)}}function U3(t){return wr(t,Cv)}function ah(t){return wr(t,tv)}function vm(t){return wr(t,hD)}function sh(t){return wr(t,ev)}function $3(t){Xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;uD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ma(e.readTime,e.documentKey,n)}const q3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HG=41943040;class ri{static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function KG(t,e,n){const r=t.store(hs),i=t.store(ip),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Xe(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=jq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function Fw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(HG,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class RS{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new RS(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).ee({index:md,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=wh(e),s=_c(e);return s.add({}).next((o=>{Xe(typeof o=="number",49019);const c=new SD(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((T=>Lw(v.yt,T))),S=x.mutations.map((T=>Lw(v.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Kt(((g,v)=>st(g.canonicalString(),v.canonicalString())));for(const g of i){const v=jq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,Fue))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Zn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return _c(e).get(n).next((r=>r?(Xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ld(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?fe.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return _c(e).ee({index:md,range:i},((s,o,c)=>{o.userId===this.userId&&(Xe(o.batchId>=r,47524,{Yn:r}),a=ld(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Td;return _c(e).ee({index:md,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Td],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).H(md,n).next((r=>r.map((i=>ld(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gx(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return wh(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=uo(f);if(u===this.userId&&n.path.isEqual(g))return _c(e).get(h).next((v=>{if(!v)throw Fe(61480,{er:s,batchId:h});Xe(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(ld(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(st);const i=[];return n.forEach((a=>{const s=Gx(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=wh(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=uo(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Gx(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Kt(st);return wh(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=uo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.tr(e,o)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(_c(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});Xe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ld(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return KG(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return wh(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=uo(a[1]);i.push(c)}else o.done()})).next((()=>{Xe(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return WG(e,this.userId,n)}ir(e){return YG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Td,lastStreamToken:""}))}}function WG(t,e,n){const r=Gx(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return wh(t).ee({range:a,Y:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function _c(t){return wr(t,hs)}function wh(t){return wr(t,ip)}function YG(t){return wr(t,Av)}class Ud{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ud(0)}static ar(){return new Ud(-1)}}class hfe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new Ud(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>et.fromTimestamp(new ht(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>oh(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return oh(e).ee(((s,o)=>{const c=Bm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return oh(e).ee(((r,i)=>{const a=Bm(i);n(a)}))}ur(e){return G3(e).get(Dw).next((n=>(Xe(n!==null,2888),n)))}cr(e,n){return G3(e).put(Dw,n)}lr(e,n){return oh(e).put(UG(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ld(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return oh(e).ee({range:i,index:Lq},((s,o,c)=>{const u=Bm(o);_0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Oc(e);return n.forEach((s=>{const o=oi(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Oc(e);return fe.forEach(n,(a=>{const s=oi(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Oc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Oc(e);let a=vt();return i.ee({range:r,Y:!0},((s,o,c)=>{const u=uo(s[1]),f=new Le(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=oi(n.path),i=IDBKeyRange.bound([r],[kq(r)],!1,!0);let a=0;return Oc(e).ee({index:fD,Y:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return oh(e).get(n).next((r=>r?Bm(r):null))}}function oh(t){return wr(t,ap)}function G3(t){return wr(t,Ad)}function Oc(t){return wr(t,sp)}const H3="LruGarbageCollector",XG=1048576;function K3([t,e],[n,r]){const i=st(t,n);return i===0?st(e,r):i}class pfe{constructor(e){this.Pr=e,this.buffer=new Kt(K3),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ne(H3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){du(n)?Ne(H3,"Ignoring IndexedDB error during garbage collection: ",n):await uu(n)}await this.Ar(3e5)}))}}class gfe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(zi.ce);const r=new pfe(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(q3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q3):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),vh()<=At.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function ZG(t,e){return new gfe(t,e)}class mfe{constructor(e,n){this.db=e,this.garbageCollector=ZG(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return qb(e,r)}removeReference(e,n,r){return qb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qb(e,n)}wr(e,n){return(function(i,a){let s=!1;return YG(i).te((o=>WG(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((s,o)=>{if(o<=n){const c=this.wr(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,et.min()),Oc(e).delete((function(h){return[0,oi(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qb(e,n)}yr(e,n){const r=Oc(e);let i,a=zi.ce;return r.ee({index:fD},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==zi.ce&&n(new Le(uo(i)),a),a=u,i=c):a=zi.ce})).next((()=>{a!==zi.ce&&n(new Le(uo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qb(t,e){return Oc(t).put((function(r,i){return{targetId:0,path:oi(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class JG{constructor(){this.changes=new jl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vfe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Wu(e).put(r)}removeEntry(e,n,r){return Wu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Vw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=zn.newInvalidDocument(n);return Wu(e).ee({index:Hx,range:IDBKeyRange.only(ym(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:zn.newInvalidDocument(n)};return Wu(e).ee({index:Hx,range:IDBKeyRange.only(ym(n))},((i,a)=>{r={document:this.Sr(n,a),size:Fw(a)}})).next((()=>r))}getEntries(e,n){let r=fa();return this.Cr(e,n,((i,a)=>{const s=this.Sr(i,a);r=r.insert(i,s)})).next((()=>r))}vr(e,n){let r=fa(),i=new ln(Le.comparator);return this.Cr(e,n,((a,s)=>{const o=this.Sr(a,s);r=r.insert(a,o),i=i.insert(a,Fw(s))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Kt(X3);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(ym(i.first()),ym(i.last())),s=i.getIterator();let o=s.getNext();return Wu(e).ee({index:Hx,range:a},((c,u,f)=>{const h=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&X3(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(ym(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Vw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wu(e).H(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=fa();for(const h of u){const g=this.Sr(Le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(T0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=fa();const s=Y3(n,r),o=Y3(n,ma.max());return Wu(e).ee({index:zq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Sr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new yfe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return W3(e).get(gI).next((n=>(Xe(!!n,20021),n)))}br(e,n){return W3(e).put(gI,n)}Sr(e,n){if(n){const r=rfe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(et.min())))return r}return zn.newInvalidDocument(e)}}function e7(t){return new vfe(t)}class yfe extends JG{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new jl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Kt(((a,s)=>st(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=N3(this.Mr.serializer,s);i=i.add(a.path.popLast());const u=Fw(c);r+=u-o.size,n.push(this.Mr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=N3(this.Mr.serializer,s.convertToNoDocument(et.min()));n.push(this.Mr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,s)=>{this.Or.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function W3(t){return wr(t,kv)}function Wu(t){return wr(t,Nw)}function ym(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y3(t,e){const n=e.documentKey.path.toArray();return[t,Vw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function X3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=st(n[a],r[a]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class bfe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class t7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&av(r.mutation,i,Li.empty(),ht.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,vt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=vt()){const i=fo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=Lm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=fo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,vt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=fa();const s=iv(),o=(function(){return iv()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof zl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),av(f.mutation,u,f.mutation.getFieldMask(),ht.now())):s.set(u.key,Li.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new bfe(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=iv();let i=new ln(((s,o)=>s-o)),a=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Li.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||vt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=mG();f.forEach((g=>{if(!a.has(g)){const v=_G(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return Ede(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(fo());let o=rp,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,vt()))).next((f=>({batchId:o,changes:gG(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let i=Lm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Lm();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new Up(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,zn.newInvalidDocument(f)))}));let o=Lm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&av(f.mutation,u,Li.empty(),ht.now()),T0(n,u)&&(o=o.insert(c,u))})),o}))}}class xfe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return fe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:_i(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:$G(i.bundledQuery),readTime:_i(i.readTime)}})(n)),fe.resolve()}}class wfe{constructor(){this.overlays=new ln(Le.comparator),this.Lr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fo();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=fo(),a=n.length+1,s=new Le(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=fo(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=fo(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ED(n,r));let a=this.Lr.get(n);a===void 0&&(a=vt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class Sfe{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class ID{constructor(){this.kr=new Kt(Dr.Kr),this.qr=new Kt(Dr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Dr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Dr(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Le(new jt([])),r=new Dr(n,e),i=new Dr(n,e+1),a=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Le(new jt([])),r=new Dr(n,e),i=new Dr(n,e+1);let a=vt();return this.qr.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Dr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Le.comparator(e.key,n.key)||st(e.Hr,n.Hr)}static Ur(e,n){return st(e.Hr,n.Hr)||Le.comparator(e.key,n.key)}}class _fe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Kt(Dr.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new SD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new Dr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Td:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dr(n,0),i=new Dr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(s=>{const o=this.Zr(s.Hr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(st);return n.forEach((i=>{const a=new Dr(i,0),s=new Dr(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{r=r.add(o.Hr)}))})),fe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const s=new Dr(new Le(a),0);let o=new Kt(st);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Hr)),!0)}),s),fe.resolve(this.Yr(o))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Xe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return fe.forEach(n.mutations,(i=>{const a=new Dr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Dr(n,0),i=this.Jr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Efe{constructor(e){this.ti=e,this.docs=(function(){return new ln(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=fa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=fa();const s=n.path,o=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||uD(Nq(f),r)<=0||(i.has(f.key)||T0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ni(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Tfe(this)}getSize(e){return fe.resolve(this.size)}}class Tfe extends JG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Afe{constructor(e){this.persistence=e,this.ri=new jl((n=>Ld(n)),_0),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new ID,this.targetCount=0,this.oi=Ud._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),fe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ud(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.lr(n),fe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.si.containsKey(n))}}class PD{constructor(e,n){this._i={},this.overlays={},this.ai=new zi(0),this.ui=!1,this.ui=!0,this.ci=new Sfe,this.referenceDelegate=e(this),this.li=new Afe(this),this.indexManager=new dfe,this.remoteDocumentCache=(function(i){return new Efe(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new FG(n),this.Pi=new xfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new _fe(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new kfe(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return fe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class kfe extends Oq{constructor(e){super(),this.currentSequenceNumber=e}}class MS{constructor(e){this.persistence=e,this.Ri=new ID,this.Ai=null}static Vi(e){return new MS(e)}get di(){if(this.Ai)return this.Ai;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(r=>{const i=Le.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Uw{constructor(e,n){this.persistence=e,this.fi=new jl((r=>oi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=ZG(this,n)}static Vi(e,n){return new Uw(e,n)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return fe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,n).next((o=>{o||(r++,a.removeEntry(s,et.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wx(e.data.value)),n}wr(e,n,r){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cfe{constructor(e){this.serializer=e}k(e,n,r,i){const a=new _S("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(S0)})(e),(function(c){c.createObjectStore(Av,{keyPath:Bue}),c.createObjectStore(hs,{keyPath:o3,autoIncrement:!0}).createIndex(md,l3,{unique:!0}),c.createObjectStore(ip)})(e),Q3(e),(function(c){c.createObjectStore(td)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(sp),c.deleteObjectStore(ap),c.deleteObjectStore(Ad)})(e),Q3(e)),s=s.next((()=>(function(c){const u=c.store(Ad),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(Dw,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(hs).H().next((h=>{c.deleteObjectStore(hs),c.createObjectStore(hs,{keyPath:o3,autoIncrement:!0}).createIndex(md,l3,{unique:!0});const g=u.store(hs),v=h.map((b=>g.put(b)));return fe.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(op,{keyPath:Yue})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.gi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(kv)})(e),this.pi(a))))),r<7&&i>=7&&(s=s.next((()=>this.yi(a)))),r<8&&i>=8&&(s=s.next((()=>this.wi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.bi(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(TS,{keyPath:Xue})})(e),(function(c){c.createObjectStore(AS,{keyPath:Que})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(kS,{keyPath:ide});u.createIndex(vI,ade,{unique:!1}),u.createIndex(Fq,sde,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(Nw,{keyPath:Uue});u.createIndex(Hx,$ue),u.createIndex(zq,que)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(td)))),r<14&&i>=14&&(s=s.next((()=>this.Di(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(hD,{keyPath:Zue,autoIncrement:!0}).createIndex(mI,Jue,{unique:!1}),c.createObjectStore(ev,{keyPath:ede}).createIndex(Vq,tde,{unique:!1}),c.createObjectStore(tv,{keyPath:nde}).createIndex(Bq,rde,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(ev).clear()})).next((()=>{n.objectStore(tv).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(pD,{keyPath:ode})})(e)}))),r<18&&i>=18&&e8()&&(s=s.next((()=>{n.objectStore(ev).clear()})).next((()=>{n.objectStore(tv).clear()}))),s}pi(e){let n=0;return e.store(td).ee(((r,i)=>{n+=Fw(i)})).next((()=>{const r={byteSize:n};return e.store(kv).put(gI,r)}))}gi(e){const n=e.store(Av),r=e.store(hs);return n.H().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Td],[a.userId,a.lastAcknowledgedBatchId]);return r.H(md,s).next((o=>fe.forEach(o,(c=>{Xe(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=ld(this.serializer,c);return KG(e,a.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(sp),r=e.store(td);return e.store(Ad).get(Dw).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new jt(s),u=(function(h){return[0,oi(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:oi(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}wi(e,n){e.createObjectStore(Cv,{keyPath:Wue});const r=n.store(Cv),i=new CD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:oi(c)})}};return n.store(td).ee({Y:!0},((s,o)=>{const c=new jt(s);return a(c.popLast())})).next((()=>n.store(ip).ee({Y:!0},(([s,o,c],u)=>{const f=uo(o);return a(f.popLast())}))))}bi(e){const n=e.store(ap);return n.ee(((r,i)=>{const a=Bm(i),s=UG(this.serializer,a);return n.put(s)}))}Si(e,n){const r=n.store(td),i=[];return r.ee(((a,s)=>{const o=n.store(Nw),c=(function(h){return h.document?new Le(jt.fromString(h.document.name).popFirst(5)):h.noDocument?Le.fromSegments(h.noDocument.path):h.unknownDocument?Le.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Di(e,n){const r=n.store(hs),i=e7(this.serializer),a=new PD(MS.Vi,this.serializer.yt);return r.H().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??vt();ld(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new ni(u),h=OS.wt(this.serializer,f),g=a.getIndexManager(f),v=RS.wt(f,this.serializer,g,a.referenceDelegate);return new t7(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new yI(n,zi.ce),c).next()}))}))}}function Q3(t){t.createObjectStore(sp,{keyPath:Hue}).createIndex(fD,Kue,{unique:!0}),t.createObjectStore(ap,{keyPath:"targetId"}).createIndex(Lq,Gue,{unique:!0}),t.createObjectStore(Ad)}const Ec="IndexedDbPersistence",TA=18e5,AA=5e3,kA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ife="main";class ND{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=s,this.document=o,this.Fi=u,this.Mi=f,this.xi=h,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=g=>Promise.resolve(),!ND.v())throw new Me(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mfe(this,i),this.Ki=n+Ife,this.serializer=new FG(c),this.qi=new Gc(this.Ki,this.xi,new Cfe(this.serializer)),this.ci=new afe,this.li=new hfe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=e7(this.serializer),this.Pi=new ife,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,f===!1&&Gn(Ec,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,kA);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new zi(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(du(e))return Ne(Ec,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne(Ec,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return bm(e).get(nh).next((n=>fe.resolve(this.Xi(n))))}Yi(e){return Gb(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,TA)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=wr(n,op);return r.H().next((i=>{const a=this.ns(i,TA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?fe.resolve(!0):bm(e).get(nh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,AA)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,kA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gb(e).H().next((r=>this.ns(r,AA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ne(Ec,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[S0,op],(e=>{const n=new yI(e,zi.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Gb(e).H().next((n=>this.ns(n,TA).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return RS.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ffe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return OS.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne(Ec,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?ude:c===17?Gq:c===16?cde:c===15?gD:c===14?qq:c===13?$q:c===12?lde:c===11?Uq:void Fe(60245)})(this.xi);let s;return this.qi.runTransaction(e,i,a,(o=>(s=new yI(o,this.ai?this.ai.next():zi.ce),n==="readwrite-primary"?this.ji(s).next((c=>!!c||this.Hi(s))).next((c=>{if(!c)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Me(Ee.FAILED_PRECONDITION,Dq);return r(s)})).next((c=>this.Zi(s).next((()=>c)))):this.Ps(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Ps(e){return bm(e).get(nh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,AA)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(Ee.FAILED_PRECONDITION,kA)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bm(e).put(nh,n)}static v(){return Gc.v()}Ji(e){const n=bm(e);return n.get(nh).next((r=>this.Xi(r)?(Ne(Ec,"Releasing primary lease."),n.delete(nh)):fe.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;J9()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return Ne(Ec,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Gn(Ec,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bm(t){return wr(t,S0)}function Gb(t){return wr(t,op)}function n7(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class DD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=vt(),i=vt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new DD(e,n.fromCache,r,i)}}class Pfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class r7{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return J9()?8:Rq(xr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Pfe;return this.ys(e,n,s).next((o=>{if(a.result=o,this.As)return this.ws(e,n,s,o.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(vh()<=At.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",yh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(vh()<=At.DEBUG&&Ne("QueryEngine","Query:",yh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(vh()<=At.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",yh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pa(n))):fe.resolve())}gs(e,n){if(w3(n))return fe.resolve(null);let r=pa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=jw(n,null,"F"),r=pa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=vt(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,o);return this.Ss(n,u,s,c.readTime)?this.gs(e,jw(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,i){return w3(n)||i.isEqual(et.min())?fe.resolve(null):this.fs.getDocuments(e,r).next((a=>{const s=this.bs(n,a);return this.Ss(n,s,r,i)?fe.resolve(null):(vh()<=At.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yh(n)),this.Ds(e,s,n,Pq(i,rp)).next((o=>o)))}))}bs(e,n){let r=new Kt(hG(e));return n.forEach(((i,a)=>{T0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return vh()<=At.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",yh(n)),this.fs.getDocumentsMatchingQuery(e,n,ma.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const OD="LocalStore",Nfe=3e8;class Dfe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new ln(st),this.Fs=new jl((a=>Ld(a)),_0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t7(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function i7(t,e,n,r){return new Dfe(t,e,n,r)}async function a7(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=vt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Ofe(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=fe.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Xe(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=vt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function s7(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Rfe(t,e){const n=Ke(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.li.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.li.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Hn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Nfe?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,v,f)&&o.push(n.li.updateTargetData(a,v))}));let c=fa(),u=vt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Mfe(a,s,e.documentUpdates).next((f=>{c=f.Bs,u=f.Ls}))),!r.isEqual(et.min())){const f=n.li.getLastRemoteSnapshotVersion(a).next((h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.vs=i,a)))}function Mfe(t,e,n){let r=vt(),i=vt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=fa();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ne(OD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function jfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Td),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $w(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.li.allocateTargetId(r).next((s=>(i=new ol(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function pp(t,e,n){const r=Ke(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!du(s))throw s;Ne(OD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function DI(t,e,n){const r=Ke(t);let i=et.min(),a=vt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ke(c),g=h.Fs.get(f);return g!==void 0?fe.resolve(h.vs.get(g)):h.li.getTargetData(u,f)})(r,s,pa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:et.min(),n?a:vt()))).next((o=>(c7(r,fG(e),o),{documents:o,ks:a})))))}function o7(t,e){const n=Ke(t),r=Ke(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function l7(t,e){const n=Ke(t),r=n.Ms.get(e)||et.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,Pq(r,rp),Number.MAX_SAFE_INTEGER))).then((i=>(c7(n,e,i),i)))}function c7(t,e,n){let r=t.Ms.get(e)||et.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}const u7="firestore_clients";function Z3(t,e){return`${u7}_${t}_${e}`}const d7="firestore_mutations";function J3(t,e,n){let r=`${d7}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const f7="firestore_targets";function CA(t,e){return`${f7}_${t}_${e}`}const co="SharedClientState";class qw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Me(i.error.code,i.error.message))),s?new qw(e,n,i.state,a):(Gn(co,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Me(r.error.code,r.error.message))),a?new sv(e,r.state,i):(Gn(co,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=xD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Mq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Gw(e,a):(Gn(co,`Failed to parse client data for instance '${e}': ${n}`),null)}}class RD{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new RD(n.clientId,n.onlineState):(Gn(co,`Failed to parse online state: ${e}`),null)}}class OI{constructor(){this.activeTargetIds=xD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IA{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ln(st),this.started=!1,this.Zs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=Z3(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new OI),this.eo=new RegExp(`^${u7}_${s}_([^_]*)$`),this.no=new RegExp(`^${d7}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${f7}_${s}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(Z3(this.persistenceKey,r));if(i){const a=Gw.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(CA(this.persistenceKey,e));if(i){const a=sv.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne(co,"READ",e,n),n}setItem(e,n){Ne(co,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne(co,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Ne(co,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let s=zi.ce;if(a!=null)try{const o=JSON.parse(a);Xe(typeof o=="number",30636,{yo:a}),s=o}catch(o){Gn(co,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==zi.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new qw(this.currentUser,e,n,r),a=J3(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=J3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=CA(this.persistenceKey,e),a=new sv(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Gw.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return qw.$s(new ni(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return sv.$s(i,n)}_o(e){return RD.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);Ne(co,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Co(s,o).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=xD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class h7{constructor(){this.vo=new OI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new OI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zfe{Mo(e){}shutdown(){}}const e5="ConnectivityMonitor";class t5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ne(e5,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ne(e5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hb=null;function RI(){return Hb===null?Hb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hb++,"0x"+Hb.toString(16)}const PA="RestConnection",Lfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Vfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Ow?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=RI(),o=this.Qo(e,n.toUriEncodedString());Ne(PA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:u}=new URL(o),f=lu(u);return this.zo(e,o,c,r,f).then((h=>(Ne(PA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw tp(PA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=Lfe[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class Bfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ei="WebChannelConnection",xm=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class $h extends Vfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!$h.c_){const e=Eq();xm(e,_q.STAT_EVENT,(n=>{n.stat===fI.PROXY?Ne(ei,"STAT_EVENT: detected buffering proxy"):n.stat===fI.NOPROXY&&Ne(ei,"STAT_EVENT: detected no buffering proxy")})),$h.c_=!0}}zo(e,n,r,i,a){const s=RI();return new Promise(((o,c)=>{const u=new wq;u.setWithCredentials(!0),u.listenOnce(Sq.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case $x.NO_ERROR:const h=u.getResponseJson();Ne(ei,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case $x.TIMEOUT:Ne(ei,`RPC '${e}' ${s} timed out`),c(new Me(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case $x.HTTP_ERROR:const g=u.getStatus();if(Ne(ei,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(T)>=0?T:Ee.UNKNOWN})(b.status);c(new Me(x,b.message))}else c(new Me(Ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Me(Ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ne(ei,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ne(ei,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=RI(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,n,r),o.encodeInitMessageHeaders=!0;const u=a.join("");Ne(ei,`Creating RPC '${e}' stream ${i}: ${u}`,o);const f=s.createWebChannel(u,o);this.I_(f);let h=!1,g=!1;const v=new Bfe({Ho:b=>{g?Ne(ei,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ne(ei,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Ne(ei,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Jo:()=>f.close()});return xm(f,zm.EventType.OPEN,(()=>{g||(Ne(ei,`RPC '${e}' stream ${i} transport opened.`),v.i_())})),xm(f,zm.EventType.CLOSE,(()=>{g||(g=!0,Ne(ei,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(f))})),xm(f,zm.EventType.ERROR,(b=>{g||(g=!0,tp(ei,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.o_(new Me(Ee.UNAVAILABLE,"The operation could not be completed")))})),xm(f,zm.EventType.MESSAGE,(b=>{if(!g){const x=b.data[0];Xe(!!x,16349);const w=x,S=w?.error||w[0]?.error;if(S){Ne(ei,`RPC '${e}' stream ${i} received error:`,S);const T=S.status;let P=(function(O){const I=nr[O];if(I!==void 0)return AG(I)})(T),N=S.message;T==="NOT_FOUND"&&N.includes("database")&&N.includes("does not exist")&&N.includes(this.databaseId.database)&&tp(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),P===void 0&&(P=Ee.INTERNAL,N="Unknown error status: "+T+" with message "+S.message),g=!0,v.o_(new Me(P,N)),f.close()}else Ne(ei,`RPC '${e}' stream ${i} received:`,x),v.__(x)}})),$h.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Tq()}}function Ffe(t){return new $h(t)}function p7(){return typeof window<"u"?window:null}function Jx(){return typeof document<"u"?document:null}function jS(t){return new Kde(t,!0)}$h.c_=!1;class g7{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const n5="PersistentStream";class m7{constructor(e,n,r,i,a,s,o,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g7(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Me(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(n5,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ne(n5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ufe extends m7{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Xde(this.serializer,e),r=(function(a){if(!("targetChange"in a))return et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?_i(s.readTime):et.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=kI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=Rw(c)?{documents:RG(a,c)}:{query:MG(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=IG(a,s.resumeToken);const u=TI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){o.readTime=hp(a,s.snapshotVersion.toTimestamp());const u=TI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=Zde(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=kI(this.serializer),n.removeTarget=e,this.K_(n)}}class $fe extends m7{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Qde(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=kI(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Lw(this.serializer,r)))};this.K_(n)}}class qfe{}class Gfe extends qfe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,AI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(Ee.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,AI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(Ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Hfe(t,e,n,r){return new Gfe(t,e,n,r)}class Kfe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $d="RemoteStore";class Wfe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{cf(this)&&(Ne($d,"Restarting streams for network reachability change."),await(async function(c){const u=Ke(c);u.Ea.add(4),await I0(u),u.Va.set("Unknown"),u.Ea.delete(4),await zS(u)})(this))}))})),this.Va=new Kfe(r,i)}}async function zS(t){if(cf(t))for(const e of t.Ra)await e(!0)}async function I0(t){for(const e of t.Ra)await e(!1)}function LS(t,e){const n=Ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zD(n)?jD(n):Gp(n).O_()&&MD(n,e))}function gp(t,e){const n=Ke(t),r=Gp(n);n.Ia.delete(e),r.O_()&&v7(n,e),n.Ia.size===0&&(r.O_()?r.L_():cf(n)&&n.Va.set("Unknown"))}function MD(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gp(t).Z_(e)}function v7(t,e){t.da.$e(e),Gp(t).X_(e)}function jD(t){t.da=new $de({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Gp(t).start(),t.Va.ua()}function zD(t){return cf(t)&&!Gp(t).x_()&&t.Ia.size>0}function cf(t){return Ke(t).Ea.size===0}function y7(t){t.da=void 0}async function Yfe(t){t.Va.set("Online")}async function Xfe(t){t.Ia.forEach(((e,n)=>{MD(t,e)}))}async function Qfe(t,e){y7(t),zD(t)?(t.Va.ha(e),jD(t)):t.Va.set("Unknown")}async function Zfe(t,e,n){if(t.Va.set("Online"),e instanceof CG&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))})(t,e)}catch(r){Ne($d,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hw(t,r)}else if(e instanceof Qx?t.da.Xe(e):e instanceof kG?t.da.st(e):t.da.tt(e),!n.isEqual(et.min()))try{const r=await s7(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Hn.EMPTY_BYTE_STRING,f.snapshotVersion)),v7(a,c);const h=new ol(f.target,c,u,f.sequenceNumber);MD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Ne($d,"Failed to raise snapshot:",r),await Hw(t,r)}}async function Hw(t,e,n){if(!du(e))throw e;t.Ea.add(1),await I0(t),t.Va.set("Offline"),n||(n=()=>s7(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ne($d,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zS(t)}))}function b7(t,e){return e().catch((n=>Hw(t,n,e)))}async function qp(t){const e=Ke(t),n=Jc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Td;for(;Jfe(e);)try{const i=await jfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ehe(e,i)}catch(i){await Hw(e,i)}x7(e)&&w7(e)}function Jfe(t){return cf(t)&&t.Ta.length<10}function ehe(t,e){t.Ta.push(e);const n=Jc(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function x7(t){return cf(t)&&!Jc(t).x_()&&t.Ta.length>0}function w7(t){Jc(t).start()}async function the(t){Jc(t).ra()}async function nhe(t){const e=Jc(t);for(const n of t.Ta)e.ea(n.mutations)}async function rhe(t,e,n){const r=t.Ta.shift(),i=_D.from(r,e,n);await b7(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await qp(t)}async function ihe(t,e){e&&Jc(t).Y_&&await(async function(r,i){if((function(s){return Bde(s)&&s!==Ee.ABORTED})(i.code)){const a=r.Ta.shift();Jc(r).B_(),await b7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await qp(r)}})(t,e),x7(t)&&w7(t)}async function r5(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),Ne($d,"RemoteStore received new credentials");const r=cf(n);n.Ea.add(3),await I0(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zS(n)}async function MI(t,e){const n=Ke(t);e?(n.Ea.delete(2),await zS(n)):e||(n.Ea.add(2),await I0(n),n.Va.set("Unknown"))}function Gp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ke(n);return a.sa(),new Ufe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Yfe.bind(null,t),Yo:Xfe.bind(null,t),t_:Qfe.bind(null,t),J_:Zfe.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),zD(t)?jD(t):t.Va.set("Unknown")):(await t.ma.stop(),y7(t))}))),t.ma}function Jc(t){return t.fa||(t.fa=(function(n,r,i){const a=Ke(n);return a.sa(),new $fe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:the.bind(null,t),t_:ihe.bind(null,t),ta:nhe.bind(null,t),na:rhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await qp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne($d,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class LD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new LD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VD(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),du(t))return new Me(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}class qh{static emptySet(e){return new qh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=Lm(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class i5{constructor(){this.ga=new ln(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class mp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new mp(e,n,qh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&PS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ahe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class she{constructor(){this.queries=a5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ke(n),a=i.queries;i.queries=a5(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(r)}))})(this,new Me(Ee.ABORTED,"Firestore shutting down"))}}function a5(){return new jl((t=>dG(t)),PS)}async function BD(t,e){const n=Ke(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new ahe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=VD(s,`Initialization of query '${yh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&UD(n)}async function FD(t,e){const n=Ke(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ohe(t,e){const n=Ke(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.ba)o.Fa(i)&&(r=!0);s.wa=i}}r&&UD(n)}function lhe(t,e,n){const r=Ke(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function UD(t){t.Ca.forEach((e=>{e.next()}))}var jI,s5;(s5=jI||(jI={})).Ma="default",s5.Cache="cache";class $D{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jI.Cache}}class S7{constructor(e){this.key=e}}class _7{constructor(e){this.key=e}}class che{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=vt(),this.mutatedKeys=vt(),this.eu=hG(e),this.tu=new qh(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new i5,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=T0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new mp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new _7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new S7(r))})),n}cu(e){this.Za=e.ks,this.Ya=vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Hp="SyncEngine";class uhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dhe{constructor(e){this.key=e,this.hu=!1}}class fhe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new jl((o=>dG(o)),PS),this.Iu=new Map,this.Eu=new Set,this.Ru=new ln(Le.comparator),this.Au=new Map,this.Vu=new ID,this.du={},this.mu=new Map,this.fu=Ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hhe(t,e,n=!0){const r=VS(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await E7(r,e,n,!0),i}async function phe(t,e){const n=VS(t);await E7(n,e,!0,!1)}async function E7(t,e,n,r){const i=await $w(t.localStore,pa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await qD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LS(t.remoteStore,i),o}async function qD(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,S,T){let P=w.view.ru(S);P.Ss&&(P=await DI(x.localStore,w.query,!1).then((({documents:I})=>w.view.ru(I,P))));const N=T&&T.targetChanges.get(w.targetId),D=T&&T.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(P,x.isPrimaryClient,N,D);return zI(x,w.targetId,O.au),O.snapshot})(t,h,g,v);const a=await DI(t.localStore,e,!0),s=new che(e,a.ks),o=s.ru(a.documents),c=C0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);zI(t,n,u.au);const f=new uhe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function ghe(t,e,n){const r=Ke(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!PS(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gp(r.remoteStore,i.targetId),vp(r,i.targetId)})).catch(uu)):(vp(r,i.targetId),await pp(r.localStore,i.targetId,!0))}async function mhe(t,e){const n=Ke(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gp(n.remoteStore,r.targetId))}async function vhe(t,e,n){const r=WD(t);try{const i=await(function(s,o){const c=Ke(s),u=ht.now(),f=o.reduce(((v,b)=>v.add(b.key)),vt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=fa(),x=vt();return c.xs.getEntries(v,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const S=[];for(const T of o){const P=Lde(T,h.get(T.key).overlayedDocument);P!=null&&S.push(new zl(T.key,P,tG(P.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:gG(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.du[s.currentUser.toKey()];u||(u=new ln(st)),u=u.insert(o,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,n),await hu(r,i.changes),await qp(r.remoteStore)}catch(i){const a=VD(i,"Failed to persist write");n.reject(a)}}async function T7(t,e){const n=Ke(t);try{const r=await Rfe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Xe(s.hu,14607):i.removedDocuments.size>0&&(Xe(s.hu,42227),s.hu=!1))})),await hu(n,r,e)}catch(r){await uu(r)}}function o5(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ke(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.ba)g.va(o)&&(u=!0)})),u&&UD(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yhe(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new ln(Le.comparator);s=s.insert(a,zn.newNoDocument(a,et.min()));const o=vt().add(a),c=new k0(et.min(),new Map,new ln(st),s,o);await T7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),KD(r)}else await pp(r.localStore,e,!1).then((()=>vp(r,e,n))).catch(uu)}async function bhe(t,e){const n=Ke(t),r=e.batch.batchId;try{const i=await Ofe(n.localStore,e);HD(n,r,null),GD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hu(n,i)}catch(i){await uu(i)}}async function xhe(t,e,n){const r=Ke(t);try{const i=await(function(s,o){const c=Ke(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Xe(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);HD(r,e,n),GD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hu(r,i)}catch(i){await uu(i)}}function GD(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function HD(t,e,n){const r=Ke(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||A7(t,r)}))}function A7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(gp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),KD(t))}function zI(t,e,n){for(const r of n)r instanceof S7?(t.Vu.addReference(r.key,e),whe(t,r)):r instanceof _7?(Ne(Hp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||A7(t,r.key)):Fe(19791,{wu:r})}function whe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ne(Hp,"New document in limbo: "+n),t.Eu.add(r),KD(t))}function KD(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(jt.fromString(e)),r=t.fu.next();t.Au.set(r,new dhe(n)),t.Ru=t.Ru.insert(n,r),LS(t.remoteStore,new ol(pa(E0(n.path)),r,"TargetPurposeLimboResolution",zi.ce))}}async function hu(t,e,n){const r=Ke(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=DD.Es(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){const f=Ke(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Ts,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>fe.forEach(g.Is,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!du(h))throw h;Ne(OD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.vs.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.vs=f.vs.insert(g,x)}}})(r.localStore,a))}async function She(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){Ne(Hp,"User change. New user:",e.toKey());const r=await a7(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Me(Ee.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hu(n,r.Ns)}}function _he(t,e){const n=Ke(t),r=n.Au.get(e);if(r&&r.hu)return vt().add(r.key);{let i=vt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function Ehe(t,e){const n=Ke(t),r=await DI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&zI(n,e.targetId,i.au),i}async function The(t,e){const n=Ke(t);return l7(n.localStore,e).then((r=>hu(n,r)))}async function Ahe(t,e,n,r){const i=Ke(t),a=await(function(o,c){const u=Ke(o),f=Ke(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.Xn(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await qp(i.remoteStore):n==="acknowledged"||n==="rejected"?(HD(i,e,r||null),GD(i,e),(function(o,c){Ke(Ke(o).mutationQueue).nr(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{bu:n}),await hu(i,a)):Ne(Hp,"Cannot apply mutation batch with id: "+e)}async function khe(t,e){const n=Ke(t);if(VS(n),WD(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await l5(n,r.toArray());n.gu=!0,await MI(n.remoteStore,!0);for(const a of i)LS(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(vp(n,s),pp(n.localStore,s,!0)))),gp(n.remoteStore,s)})),await i,await l5(n,r),(function(s){const o=Ke(s);o.Au.forEach(((c,u)=>{gp(o.remoteStore,u)})),o.Vu.zr(),o.Au=new Map,o.Ru=new ln(Le.comparator)})(n),n.gu=!1,await MI(n.remoteStore,!1)}}async function l5(t,e,n){const r=Ke(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await $w(r.localStore,pa(c[0]));for(const u of c){const f=r.Tu.get(u),h=await Ehe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await o7(r.localStore,s);o=await $w(r.localStore,u),await qD(r,k7(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.J_(a),i}function k7(t){return cG(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Che(t){return(function(n){return Ke(Ke(n).persistence).hs()})(Ke(t).localStore)}async function Ihe(t,e,n,r){const i=Ke(t);if(i.gu)return void Ne(Hp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await l7(i.localStore,fG(a[0])),o=k0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Hn.EMPTY_BYTE_STRING);await hu(i,s,o);break}case"rejected":await pp(i.localStore,e,!0),vp(i,e,r);break;default:Fe(64155,n)}}async function Phe(t,e,n){const r=VS(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ne(Hp,"Adding an already active target "+i);continue}const a=await o7(r.localStore,i),s=await $w(r.localStore,a);await qD(r,k7(a),s.targetId,!1,s.resumeToken),LS(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await pp(r.localStore,i,!1).then((()=>{gp(r.remoteStore,i),vp(r,i)})).catch(uu)}}function VS(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_he.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yhe.bind(null,e),e.Pu.J_=ohe.bind(null,e.eventManager),e.Pu.yu=lhe.bind(null,e.eventManager),e}function WD(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xhe.bind(null,e),e}class jv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return i7(this.persistence,new r7,e.initialUser,this.serializer)}Cu(e){return new PD(MS.Vi,this.serializer)}Du(e){return new h7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jv.provider={build:()=>new jv};class Nhe extends jv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof Uw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new PD((r=>Uw.Vi(r,n)),this.serializer)}}class C7 extends jv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await WD(this.xu.syncEngine),await qp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return i7(this.persistence,new r7,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new QG(r,e.asyncQueue,n)}Mu(e,n){const r=new Lue(n,this.persistence);return new zue(e.asyncQueue,r)}Cu(e){const n=n7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new ND(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,p7(),Jx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new h7}}class Dhe extends C7{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof IA&&(this.sharedClientState.syncEngine={So:Ahe.bind(null,n),Do:Ihe.bind(null,n),Co:Phe.bind(null,n),hs:Che.bind(null,n),bo:The.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await khe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=p7();if(!IA.v(n))throw new Me(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=n7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class zv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=She.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new she})()}createDatastore(e){const n=jS(e.databaseInfo.databaseId),r=Ffe(e.databaseInfo);return Hfe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Wfe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>o5(this.syncEngine,n,0)),(function(){return t5.v()?new t5:new zfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new fhe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ke(n);Ne($d,"RemoteStore shutting down."),r.Ea.add(5),await I0(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zv.provider={build:()=>new zv};class YD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const eu="FirestoreClient";class Ohe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ni.UNAUTHENTICATED,this.clientId=cD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Ne(eu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ne(eu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=VD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function NA(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(eu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await a7(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function c5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Rhe(t);Ne(eu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>r5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>r5(e.remoteStore,i))),t._onlineComponents=e}async function Rhe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(eu,"Using user provided OfflineComponentProvider");try{await NA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;tp("Error using user provided cache. Falling back to memory cache: "+n),await NA(t,new jv)}}else Ne(eu,"Using default OfflineComponentProvider"),await NA(t,new Nhe(void 0));return t._offlineComponents}async function I7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(eu,"Using user provided OnlineComponentProvider"),await c5(t,t._uninitializedComponentsProvider._online)):(Ne(eu,"Using default OnlineComponentProvider"),await c5(t,new zv))),t._onlineComponents}function Mhe(t){return I7(t).then((e=>e.syncEngine))}async function Kw(t){const e=await I7(t),n=e.eventManager;return n.onListen=hhe.bind(null,e.syncEngine),n.onUnlisten=ghe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=phe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mhe.bind(null,e.syncEngine),n}function jhe(t,e,n,r){const i=new YD(r),a=new $D(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>BD(await Kw(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>FD(await Kw(t),a)))}}function zhe(t,e,n={}){const r=new yo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new YD({next:g=>{f.Nu(),s.enqueueAndForget((()=>FD(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new Me(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new $D(E0(o.path),f,{includeMetadataChanges:!0,Ka:!0});return BD(a,h)})(await Kw(t),t.asyncQueue,e,n,r))),r.promise}function Lhe(t,e,n={}){const r=new yo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new YD({next:g=>{f.Nu(),s.enqueueAndForget((()=>FD(a,h))),g.fromCache&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new $D(o,f,{includeMetadataChanges:!0,Ka:!0});return BD(a,h)})(await Kw(t),t.asyncQueue,e,n,r))),r.promise}function Vhe(t,e){const n=new yo;return t.asyncQueue.enqueueAndForget((async()=>vhe(await Mhe(t),e,n))),n.promise}function P7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Bhe="ComponentProvider",u5=new Map;function Fhe(t,e,n,r,i){return new fde(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,P7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const Uhe="firestore.googleapis.com",d5=!0;class f5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uhe,this.ssl=d5}else this.host=e.host,this.ssl=e.ssl??d5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XG)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XD{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Tue;switch(r.type){case"firstParty":return new Cue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=u5.get(n);r&&(Ne(Bhe,"Removing Datastore"),u5.delete(n),r.terminate())})(this),Promise.resolve()}}class Ll{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ll(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(w0(n,Ln._jsonSchema))return new Ln(e,r||null,new Le(jt.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:ar("string",Ln._jsonSchemaVersion),referencePath:ar("string")};class Hc extends Ll{constructor(e,n,r){super(e,n,E0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Le(e))}withConverter(e){return new Hc(this.firestore,e,this._path)}}function Kr(t,e,...n){if(t=zt(t),Cq("collection","path",e),t instanceof XD){const r=jt.fromString(e,...n);return n3(r),new Hc(t,null,r)}{if(!(t instanceof Ln||t instanceof Hc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return n3(r),new Hc(t.firestore,null,r)}}function _t(t,e,...n){if(t=zt(t),arguments.length===1&&(e=cD.newId()),Cq("doc","path",e),t instanceof XD){const r=jt.fromString(e,...n);return t3(r),new Ln(t,null,new Le(r))}{if(!(t instanceof Ln||t instanceof Hc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return t3(r),new Ln(t.firestore,t instanceof Hc?t.converter:null,new Le(r))}}const h5="AsyncQueue";class p5{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g7(this,"async_queue_retry"),this._c=()=>{const r=Jx();r&&Ne(h5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Jx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new yo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!du(e))throw e;Ne(h5,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",g5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=LD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:g5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class To extends XD{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new p5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p5(e),this._firestoreClient=void 0,await e}}}function $he(t,e,n){n||(n=Ow);const r=zp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Xc(a,e))return i;throw new Me(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XG)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&lu(e.host)&&UN(e.host),r.initialize({options:e,instanceIdentifier:n})}function P0(t){if(t._terminated)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qhe(t),t._firestoreClient}function qhe(t){const e=t._freezeSettings(),n=Fhe(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ohe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(Hn.fromBase64String(e))}catch(n){throw new Me(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new za(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:za._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(w0(e,za._jsonSchema))return za.fromBase64String(e.bytes)}}za._jsonSchemaVersion="firestore/bytes/1.0",za._jsonSchema={type:ar("string",za._jsonSchemaVersion),bytes:ar("string")};class BS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FS{constructor(e){this._methodName=e}}class bo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bo._jsonSchemaVersion}}static fromJSON(e){if(w0(e,bo._jsonSchema))return new bo(e.latitude,e.longitude)}}bo._jsonSchemaVersion="firestore/geoPoint/1.0",bo._jsonSchema={type:ar("string",bo._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};class ws{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(w0(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ws(e.vectorValues);throw new Me(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:ar("string",ws._jsonSchemaVersion),vectorValues:ar("object")};const Ghe=/^__.*__$/;class Hhe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zl(e,this.data,this.fieldMask,n,this.fieldTransforms):new $p(e,this.data,n,this.fieldTransforms)}}class N7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function D7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{dataSource:t})}}class US{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new US({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ww(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(D7(this.dataSource)&&Ghe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Khe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jS(e)}createContext(e,n,r,i=!1){return new US({dataSource:e,methodName:n,targetDoc:r,path:Tn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function N0(t){const e=t._freezeSettings(),n=jS(t._databaseId);return new Khe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QD(t,e,n,r,i,a={}){const s=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);JD("Data must be an object, but it was:",s,r);const o=M7(r,s);let c,u;if(a.merge)c=new Li(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=qd(e,h,n);if(!s.contains(g))throw new Me(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);L7(f,g)||f.push(g)}c=new Li(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Hhe(new ai(o),c,u)}class D0 extends FS{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof D0}}function Whe(t,e,n){return new US({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ZD extends FS{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Whe(this,e,!0),r=this.Ac.map((a=>Kp(a,n))),i=new Vd(r);return new SG(e.path,i)}isEqual(e){return e instanceof ZD&&Xc(this.Ac,e.Ac)}}function O7(t,e,n,r){const i=t.createContext(1,e,n);JD("Data must be an object, but it was:",i,r);const a=[],s=ai.empty();fu(r,((c,u)=>{const f=z7(e,c,n);u=zt(u);const h=i.childContextForFieldPath(f);if(u instanceof D0)a.push(f);else{const g=Kp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Li(a);return new N7(s,o,i.fieldTransforms)}function R7(t,e,n,r,i,a){const s=t.createContext(1,e,n),o=[qd(e,r,n)],c=[i];if(a.length%2!=0)throw new Me(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(qd(e,a[g])),c.push(a[g+1]);const u=[],f=ai.empty();for(let g=o.length-1;g>=0;--g)if(!L7(u,o[g])){const v=o[g];let b=c[g];b=zt(b);const x=s.childContextForFieldPath(v);if(b instanceof D0)u.push(v);else{const w=Kp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Li(u);return new N7(f,h,s.fieldTransforms)}function Yhe(t,e,n,r=!1){return Kp(n,t.createContext(r?4:3,e))}function Kp(t,e){if(j7(t=zt(t)))return JD("Unsupported field value:",e,t),M7(t,e);if(t instanceof FS)return(function(r,i){if(!D7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Kp(o,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dde(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ht.fromDate(r);return{timestampValue:hp(i.serializer,a)}}if(r instanceof ht){const a=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hp(i.serializer,a)}}if(r instanceof bo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:IG(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:AD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ws)return(function(s,o){const c=s instanceof ws?s.toArray():s;return{mapValue:{fields:{[vD]:{stringValue:yD},[lp]:{arrayValue:{values:c.map((f=>{if(typeof f!="number")throw o.createError("VectorValues must only contain numeric values.");return wD(o.serializer,f)}))}}}}}})(r,i);if(BG(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${SS(r)}`)})(t,e)}function M7(t,e){const n={};return Hq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fu(t,((r,i)=>{const a=Kp(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function j7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof bo||t instanceof za||t instanceof Ln||t instanceof FS||t instanceof ws||BG(t))}function JD(t,e,n){if(!j7(n)||!Iq(n)){const r=SS(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function qd(t,e,n){if((e=zt(e))instanceof BS)return e._internalPath;if(typeof e=="string")return z7(t,e);throw Ww("Field path arguments must be of type string or ",t,!1,void 0,n)}const Xhe=new RegExp("[~\\*/\\[\\]]");function z7(t,e,n){if(e.search(Xhe)>=0)throw Ww(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new BS(...e.split("."))._internalPath}catch{throw Ww(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ww(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Me(Ee.INVALID_ARGUMENT,o+t+c)}function L7(t,e){return t.some((n=>n.isEqual(e)))}class Qhe{convertValue(e,n="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[lp].arrayValue?.values?.map((r=>yn(r.doubleValue)));return new ws(n)}convertGeoPoint(e){return new bo(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=CS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Iv(e));default:return null}}convertTimestamp(e){const n=_l(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=jt.fromString(e);Xe(VG(r),9688,{name:e});const i=new zd(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class e2 extends Qhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function m5(){return new D0("deleteField")}function Zhe(...t){return new ZD("arrayUnion",t)}const v5="@firebase/firestore",y5="4.11.0";function b5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class V7{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(qd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jhe extends V7{data(){return super.data()}}function B7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class t2{}class n2 extends t2{}function Vi(t,e,...n){let r=[];e instanceof t2&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof r2)).length,o=a.filter((c=>c instanceof $S)).length;if(s>1||s>0&&o>0)throw new Me(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class $S extends n2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $S(e,n,r)}_apply(e){const n=this._parse(e);return F7(e._query,n),new Ll(e.firestore,e.converter,EI(e._query,n))}_parse(e){const n=N0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){S5(h,f);const b=[];for(const x of h)b.push(w5(c,a,x));g={arrayValue:{values:b}}}else g=w5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||S5(h,f),g=Yhe(o,s,h,f==="in"||f==="not-in");return kt.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ew(t,e,n){const r=e,i=qd("where",t);return $S._create(i,r,n)}class r2 extends t2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new r2(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)F7(s,c),s=EI(s,c)})(e._query,n),new Ll(e.firestore,e.converter,EI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i2 extends n2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new i2(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ov(a,s)})(e._query,this._field,this._direction);return new Ll(e.firestore,e.converter,Ade(e._query,n))}}function Ss(t,e="asc"){const n=e,r=qd("orderBy",t);return i2._create(r,n)}class a2 extends n2{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new a2(e,n,r)}_apply(e){return new Ll(e.firestore,e.converter,jw(e._query,this._limit,this._limitType))}}function x5(t){return a2._create("limit",t,"F")}function w5(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uG(e)&&n.indexOf("/")!==-1)throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(jt.fromString(n));if(!Le.isDocumentKey(r))throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nv(t,new Le(r))}if(n instanceof Ln)return Nv(t,n._key);throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SS(n)}.`)}function S5(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F7(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function s2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class epe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=ipe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function tpe(t){return new epe(t)}class npe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zv.provider,this._offlineComponentProvider={build:n=>new C7(n,e?.cacheSizeBytes,this.forceOwnership)}}}class rpe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zv.provider,this._offlineComponentProvider={build:n=>new Dhe(n,e?.cacheSizeBytes)}}}function ipe(t){return new npe(t?.forceOwnership)}function ape(){return new rpe}class Fm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends V7{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cd._jsonSchema={type:ar("string",Cd._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};class tw extends Cd{data(e={}){return super.data(e)}}class Id{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new tw(this._firestore,this._userDataWriter,r.key,r,new Fm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new tw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Fm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new tw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Fm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:spe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Id._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function spe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}Id._jsonSchemaVersion="firestore/querySnapshot/1.0",Id._jsonSchema={type:ar("string",Id._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};class ope{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=N0(e)}set(e,n,r){this._verifyNotCommitted();const i=DA(e,this._firestore),a=s2(i.converter,n,r),s=QD(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=DA(e,this._firestore);let s;return s=typeof(n=zt(n))=="string"||n instanceof BS?R7(this._dataReader,"WriteBatch.update",a._key,n,r,i):O7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=DA(e,this._firestore);return this._mutations=this._mutations.concat(new A0(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DA(t,e){if((t=zt(t)).firestore!==e)throw new Me(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function OA(t){t=qi(t,Ln);const e=qi(t.firestore,To),n=P0(e);return zhe(n,t._key).then((r=>U7(e,t,r)))}function sa(t){t=qi(t,Ll);const e=qi(t.firestore,To),n=P0(e),r=new e2(e);return B7(t._query),Lhe(n,t._query).then((i=>new Id(e,r,t,i)))}function la(t,e,n){t=qi(t,Ln);const r=qi(t.firestore,To),i=s2(t.converter,e,n),a=N0(r);return O0(r,[QD(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function lo(t,e,n,...r){t=qi(t,Ln);const i=qi(t.firestore,To),a=N0(i);let s;return s=typeof(e=zt(e))=="string"||e instanceof BS?R7(a,"updateDoc",t._key,e,n,r):O7(a,"updateDoc",t._key,e),O0(i,[s.toMutation(t._key,yr.exists(!0))])}function ca(t){return O0(qi(t.firestore,To),[new A0(t._key,yr.none())])}function qS(t,e){const n=qi(t.firestore,To),r=_t(t),i=s2(t.converter,e),a=N0(t.firestore);return O0(n,[QD(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then((()=>r))}function tu(t,...e){t=zt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||b5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b5(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,s,o;if(t instanceof Ln)s=qi(t.firestore,To),o=E0(t._key.path),a={next:u=>{e[r]&&e[r](U7(s,t,u))},error:e[r+1],complete:e[r+2]};else{const u=qi(t,Ll);s=qi(u.firestore,To),o=u._query;const f=new e2(s);a={next:h=>{e[r]&&e[r](new Id(s,f,u,h))},error:e[r+1],complete:e[r+2]},B7(t._query)}const c=P0(s);return jhe(c,o,i,a)}function O0(t,e){const n=P0(t);return Vhe(n,e)}function U7(t,e,n){const r=n.docs.get(e._key),i=new e2(t);return new Cd(t,i,e._key,r,new Fm(n.hasPendingWrites,n.fromCache),e.converter)}function LI(t){return t=qi(t,To),P0(t),new ope(t,(e=>O0(t,e)))}(function(e,n=!0){_ue(Lp),bl(new _o("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new To(new Aue(r.getProvider("auth-internal")),new Iue(s,r.getProvider("app-check-internal")),hde(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),xs(v5,y5,e),xs(v5,y5,"esm2020")})();const VI=new Map,$7={activated:!1,tokenObservers:[]},lpe={initialized:!1,enabled:!1};function br(t){return VI.get(t)||{...$7}}function cpe(t,e){return VI.set(t,e),VI.get(t)}function GS(){return lpe}const q7="https://content-firebaseappcheck.googleapis.com/v1",upe="exchangeRecaptchaEnterpriseToken",dpe="exchangeDebugToken",_5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},fpe=1440*60*1e3;class hpe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new yv,this.pending.promise.catch(n=>{}),await ppe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new yv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ppe(t){return new Promise(e=>{setTimeout(e,t)})}const gpe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Bi=new jp("appCheck","AppCheck",gpe);function E5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function o2(t){if(!br(t).activated)throw Bi.create("use-before-activation",{appName:t.name})}function G7(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=Kb(n)+"d:"),r&&(s+=Kb(r)+"h:"),s+=Kb(i)+"m:"+Kb(a)+"s",s}function Kb(t){return t===0?"00":t>=10?t.toString():"0"+t}async function l2({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw Bi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw Bi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw Bi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function mpe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${q7}/projects/${n}/apps/${r}:${upe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function H7(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${q7}/projects/${n}/apps/${r}:${dpe}?key=${i}`,body:{debug_token:e}}}const vpe="firebase-app-check-database",ype=1,Lv="firebase-app-check-store",K7="debug-token";let Wb=null;function W7(){return Wb||(Wb=new Promise((t,e)=>{try{const n=indexedDB.open(vpe,ype);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Bi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;r.oldVersion===0&&i.createObjectStore(Lv,{keyPath:"compositeKey"})}}catch(n){e(Bi.create("storage-open",{originalErrorMessage:n?.message}))}}),Wb)}function bpe(t){return X7(Q7(t))}function xpe(t,e){return Y7(Q7(t),e)}function wpe(t){return Y7(K7,t)}function Spe(){return X7(K7)}async function Y7(t,e){const r=(await W7()).transaction(Lv,"readwrite"),a=r.objectStore(Lv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(Bi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function X7(t){const n=(await W7()).transaction(Lv,"readonly"),i=n.objectStore(Lv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(Bi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function Q7(t){return`${t.options.appId}-${t.name}`}const jc=new mS("@firebase/app-check");async function _pe(t){if(gS()){let e;try{e=await bpe(t)}catch(n){jc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function RA(t,e){return gS()?xpe(t,e).catch(n=>{jc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Epe(){let t;try{t=await Spe()}catch{}if(t)return t;{const e=crypto.randomUUID();return wpe(e).catch(n=>jc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function c2(){return GS().enabled}async function u2(){const t=GS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Tpe(){const t=FN(),e=GS();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new yv;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Epe())}const Ape={error:"UNKNOWN_ERROR"};function kpe(t){return BN.encodeString(JSON.stringify(t),!1)}async function BI(t,e=!1,n=!1){const r=t.app;o2(r);const i=br(r);let a=i.token,s;if(a&&!Ah(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(Ah(u)?a=u:await RA(r,void 0))}if(!e&&a&&Ah(a))return{token:a.token};let o=!1;if(c2())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=l2(H7(r,await u2()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await RA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?jc.warn(u.message):n&&jc.error(u),MA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await br(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?jc.warn(u.message):n&&jc.error(u),s=u}let c;return a?s?Ah(a)?c={token:a.token,internalError:s}:c=MA(s):(c={token:a.token},i.token=a,await RA(r,a)):c=MA(s),o&&eH(r,c),c}async function Cpe(t){const e=t.app;o2(e);const{provider:n}=br(e);if(c2()){const r=await u2(),{token:i}=await l2(H7(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Z7(t,e,n,r){const{app:i}=t,a=br(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&Ah(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),T5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>T5(t))}function J7(t,e){const n=br(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function T5(t){const{app:e}=t,n=br(e);let r=n.tokenRefresher;r||(r=Ipe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ipe(t){const{app:e}=t;return new hpe(async()=>{const n=br(e);let r;if(n.token?r=await BI(t,!0):r=await BI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=br(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},_5.RETRIAL_MIN_WAIT,_5.RETRIAL_MAX_WAIT)}function eH(t,e){const n=br(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ah(t){return t.expireTimeMillis-Date.now()>0}function MA(t){return{token:kpe(Ape),error:t}}class Ppe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=br(this.app);for(const n of e)J7(this.app,n.next);return Promise.resolve()}}function Npe(t,e){return new Ppe(t,e)}function Dpe(t){return{getToken:e=>BI(t,e),getLimitedUseToken:()=>Cpe(t),addTokenListener:e=>Z7(t,"INTERNAL",e),removeTokenListener:e=>J7(t.app,e)}}const Ope="@firebase/app-check",Rpe="0.11.0",Mpe="https://www.google.com/recaptcha/enterprise.js";function jpe(t,e){const n=new yv,r=br(t);r.reCAPTCHAState={initialized:n};const i=zpe(t),a=E5(!0);return a?A5(t,e,a,i,n):Bpe(()=>{const s=E5(!0);if(!s)throw new Error("no recaptcha");A5(t,e,s,i,n)}),n.promise}function A5(t,e,n,r,i){n.ready(()=>{Vpe(t,e,n,r),i.resolve(n)})}function zpe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Lpe(t){o2(t);const n=await br(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=br(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Vpe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{br(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{br(t).reCAPTCHAState.succeeded=!1}}),a=br(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function Bpe(t){const e=document.createElement("script");e.src=Mpe,e.onload=t,document.head.appendChild(e)}class d2{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){Upe(this._throttleData);const e=await Lpe(this._app).catch(r=>{throw Bi.create("recaptcha-error")});if(!br(this._app).reCAPTCHAState?.succeeded)throw Bi.create("recaptcha-error");let n;try{n=await l2(mpe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=Fpe(Number(r.customData?.httpStatus),this._throttleData),Bi.create("initial-throttle",{time:G7(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=zp(e,"heartbeat"),jpe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof d2?this._siteKey===e._siteKey:!1}}function Fpe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+fpe,httpStatus:t};{const n=e?e.backoffCount:0,r=bre(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function Upe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Bi.create("throttled",{time:G7(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function $pe(t=qN(),e){t=zt(t);const n=zp(t,"app-check");if(GS().initialized||Tpe(),c2()&&u2().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw Bi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return qpe(t,e.provider,e.isTokenAutoRefreshEnabled),br(t).isTokenAutoRefreshEnabled&&Z7(r,"INTERNAL",()=>{}),r}function qpe(t,e,n=!1){const r=cpe(t,{...$7});r.activated=!0,r.provider=e,r.cachedTokenPromise=_pe(t).then(i=>(i&&Ah(i)&&(r.token=i,eH(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&jc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const Gpe="app-check",k5="app-check-internal";function Hpe(){bl(new _o(Gpe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Npe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(k5).initialize()})),bl(new _o(k5,t=>{const e=t.getProvider("app-check").getImmediate();return Dpe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xs(Ope,Rpe)}Hpe();const Kpe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},f2=r8(Kpe);$pe(f2,{provider:new d2("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const gi=F8(f2),rt=$he(f2,{localCache:tpe({tabManager:ape()})}),ji={DEBUG:0,INFO:1,WARN:2,ERROR:3};class Wpe{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===ji.ERROR?"error":e.level===ji.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(ji.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(ji.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(ji.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(ji.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const Dn=new Wpe;function jA(t){if(typeof t=="string"){const e=t.match(/^[^\w]*\s*([A-Za-z]+):\s*(.*)/);return e?{source:e[1],message:e[2]}:{source:"App",message:t}}return{source:"App",message:String(t)}}const $={log:(...t)=>{const{source:e,message:n}=jA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Dn.info(e,n,r)},warn:(...t)=>{const{source:e,message:n}=jA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Dn.warn(e,n,r)},error:(...t)=>{const{source:e,message:n}=jA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Dn.error(e,n,r)}},C5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Yb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),nn=oD()(bq(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Rae(gi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await kL(gi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Yb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Oae(gi,e,n)).user;await jae(a,{displayName:r}),await AL(a,C5());const s=Yb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await kL(gi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Pae(gi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=gi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await AL(e,C5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";return n.code==="auth/too-many-requests"&&(r="Too many verification emails sent. Please wait before trying again."),t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=nn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=gi.currentUser;if(!e)return!1;try{await e.reload();const n=gi.currentUser;if(n?.emailVerified){const r=Yb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=gi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=af.credential(n.email,e);return await Cae(n,r),await Bae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Nae(gi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>nn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Vae(gi,async r=>{const i=Date.now(),a=nn.getState(),s=r?Yb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){$.log(" Loading budgetStore to check onboarding...");const v=await Xh(()=>Promise.resolve().then(()=>HY),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),tH=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Ype=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=tH.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},HS=t=>{const e=tH.map(i=>({...i,met:i.regex.test(t)})),n=Ype(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},nH=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=HS(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},rH=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=HS(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(aD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(Bp,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Xpe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:P}=nn(),N=HS(n),D=async I=>{if(I.preventDefault(),P(),t.trim()&&n.trim())if(c){if(!i.trim()||!N.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},O=async I=>{I.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(uI,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:I=>e(I.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(uI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(Sl,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[m.jsx(Sl,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:I=>e(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:I=>a(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:I=>r(I.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!N.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?m.jsx(hq,{className:"h-5 w-5"}):m.jsx(pq,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(nH,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(rH,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!N.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[m.jsx(sue,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Qpe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=nn(),x=HS(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(kw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(HL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(hq,{className:"h-5 w-5"}):m.jsx(pq,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(nH,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(HL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(rH,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(Sl,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},iH=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=nn();A.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(uI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(kw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(Jh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Jh,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(Sl,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},aH=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(Jh,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(ep,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),h2=A.createContext({});function KS(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const sH=typeof window<"u",p2=sH?A.useLayoutEffect:A.useEffect,WS=A.createContext(null);function g2(t,e){t.indexOf(e)===-1&&t.push(e)}function Yw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ao=(t,e,n)=>n>e?e:n<t?t:n;let m2=()=>{};const Tl={},oH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lH(t){return typeof t=="object"&&t!==null}const cH=t=>/^0[^.\s]+$/u.test(t);function v2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ba=t=>t,Zpe=(t,e)=>n=>e(t(n)),R0=(...t)=>t.reduce(Zpe),Vv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class y2{constructor(){this.subscriptions=[]}add(e){return g2(this.subscriptions,e),()=>Yw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _s=t=>t*1e3,La=t=>t/1e3;function uH(t,e){return e?t*(1e3/e):0}const dH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Jpe=1e-7,ege=12;function tge(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=dH(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Jpe&&++o<ege);return s}function M0(t,e,n,r){if(t===e&&n===r)return Ba;const i=a=>tge(a,0,1,t,n);return a=>a===0||a===1?a:dH(i(a),e,r)}const fH=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hH=t=>e=>1-t(1-e),pH=M0(.33,1.53,.69,.99),b2=hH(pH),gH=fH(b2),mH=t=>(t*=2)<1?.5*b2(t):.5*(2-Math.pow(2,-10*(t-1))),x2=t=>1-Math.sin(Math.acos(t)),vH=hH(x2),yH=fH(x2),nge=M0(.42,0,1,1),rge=M0(0,0,.58,1),bH=M0(.42,0,.58,1),ige=t=>Array.isArray(t)&&typeof t[0]!="number",xH=t=>Array.isArray(t)&&typeof t[0]=="number",age={linear:Ba,easeIn:nge,easeInOut:bH,easeOut:rge,circIn:x2,circInOut:yH,circOut:vH,backIn:b2,backInOut:gH,backOut:pH,anticipate:mH},sge=t=>typeof t=="string",I5=t=>{if(xH(t)){m2(t.length===4);const[e,n,r,i]=t;return M0(e,n,r,i)}else if(sge(t))return age[t];return t},Xb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oge(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const lge=40;function wH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Xb.reduce((P,N)=>(P[N]=oge(a),P),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const P=Tl.useManualTiming?i.timestamp:performance.now();n=!1,Tl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(P-i.timestamp,lge),1)),i.timestamp=P,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Xb.reduce((P,N)=>{const D=s[N];return P[N]=(O,I=!1,C=!1)=>(n||w(),D.schedule(O,I,C)),P},{}),cancel:P=>{for(let N=0;N<Xb.length;N++)s[Xb[N]].cancel(P)},state:i,steps:s}}const{schedule:on,cancel:nu,state:Hr,steps:zA}=wH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ba,!0);let nw;function cge(){nw=void 0}const bi={now:()=>(nw===void 0&&bi.set(Hr.isProcessing||Tl.useManualTiming?Hr.timestamp:performance.now()),nw),set:t=>{nw=t,queueMicrotask(cge)}},SH=t=>e=>typeof e=="string"&&e.startsWith(t),_H=SH("--"),uge=SH("var(--"),w2=t=>uge(t)?dge.test(t.split("/*")[0].trim()):!1,dge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function P5(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Wp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bv={...Wp,transform:t=>Ao(0,1,t)},Qb={...Wp,default:1},ov=t=>Math.round(t*1e5)/1e5,S2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fge(t){return t==null}const hge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_2=(t,e)=>n=>!!(typeof n=="string"&&hge.test(n)&&n.startsWith(t)||e&&!fge(n)&&Object.prototype.hasOwnProperty.call(n,e)),EH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(S2);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},pge=t=>Ao(0,255,t),LA={...Wp,transform:t=>Math.round(pge(t))},vd={test:_2("rgb","red"),parse:EH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+LA.transform(t)+", "+LA.transform(e)+", "+LA.transform(n)+", "+ov(Bv.transform(r))+")"};function gge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const FI={test:_2("#"),parse:gge,transform:vd.transform},j0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ac=j0("deg"),xo=j0("%"),qe=j0("px"),mge=j0("vh"),vge=j0("vw"),N5={...xo,parse:t=>xo.parse(t)/100,transform:t=>xo.transform(t*100)},kh={test:_2("hsl","hue"),parse:EH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+xo.transform(ov(e))+", "+xo.transform(ov(n))+", "+ov(Bv.transform(r))+")"},rr={test:t=>vd.test(t)||FI.test(t)||kh.test(t),parse:t=>vd.test(t)?vd.parse(t):kh.test(t)?kh.parse(t):FI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?vd.transform(t):kh.transform(t),getAnimatableNone:t=>{const e=rr.parse(t);return e.alpha=0,rr.transform(e)}},yge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bge(t){return isNaN(t)&&typeof t=="string"&&(t.match(S2)?.length||0)+(t.match(yge)?.length||0)>0}const TH="number",AH="color",xge="var",wge="var(",D5="${}",Sge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Sge,c=>(rr.test(c)?(r.color.push(a),i.push(AH),n.push(rr.parse(c))):c.startsWith(wge)?(r.var.push(a),i.push(xge),n.push(c)):(r.number.push(a),i.push(TH),n.push(parseFloat(c))),++a,D5)).split(D5);return{values:n,split:o,indexes:r,types:i}}function kH(t){return Fv(t).values}function CH(t){const{split:e,types:n}=Fv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===TH?a+=ov(i[s]):o===AH?a+=rr.transform(i[s]):a+=i[s]}return a}}const _ge=t=>typeof t=="number"?0:rr.test(t)?rr.getAnimatableNone(t):t;function Ege(t){const e=kH(t);return CH(t)(e.map(_ge))}const ru={test:bge,parse:kH,createTransformer:CH,getAnimatableNone:Ege};function VA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Tge({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=VA(c,o,t+1/3),a=VA(c,o,t),s=VA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Xw(t,e){return n=>n>0?e:t}const An=(t,e,n)=>t+(e-t)*n,BA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Age=[FI,vd,kh],kge=t=>Age.find(e=>e.test(t));function O5(t){const e=kge(t);if(!e)return!1;let n=e.parse(t);return e===kh&&(n=Tge(n)),n}const R5=(t,e)=>{const n=O5(t),r=O5(e);if(!n||!r)return Xw(t,e);const i={...n};return a=>(i.red=BA(n.red,r.red,a),i.green=BA(n.green,r.green,a),i.blue=BA(n.blue,r.blue,a),i.alpha=An(n.alpha,r.alpha,a),vd.transform(i))},UI=new Set(["none","hidden"]);function Cge(t,e){return UI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ige(t,e){return n=>An(t,e,n)}function E2(t){return typeof t=="number"?Ige:typeof t=="string"?w2(t)?Xw:rr.test(t)?R5:Dge:Array.isArray(t)?IH:typeof t=="object"?rr.test(t)?R5:Pge:Xw}function IH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>E2(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Pge(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=E2(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Nge(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Dge=(t,e)=>{const n=ru.createTransformer(e),r=Fv(t),i=Fv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?UI.has(t)&&!i.values.length||UI.has(e)&&!r.values.length?Cge(t,e):R0(IH(Nge(r,i),i.values),n):Xw(t,e)};function PH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?An(t,e,n):E2(t)(t,e)}const Oge=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>on.update(e,n),stop:()=>nu(e),now:()=>Hr.isProcessing?Hr.timestamp:bi.now()}},NH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qw=2e4;function T2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qw;)e+=n,r=t.next(e);return e>=Qw?1/0:e}function Rge(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(T2(r),Qw);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:La(i)}}const Mge=5;function DH(t,e,n){const r=Math.max(e-Mge,0);return uH(n-t(r),e-r)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},FA=.001;function jge({duration:t=Rn.duration,bounce:e=Rn.bounce,velocity:n=Rn.velocity,mass:r=Rn.mass}){let i,a,s=1-e;s=Ao(Rn.minDamping,Rn.maxDamping,s),t=Ao(Rn.minDuration,Rn.maxDuration,La(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=$I(u,s),b=Math.exp(-h);return FA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=$I(Math.pow(u,2),s);return(-i(u)+FA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-FA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Lge(i,a,o);if(t=_s(t),isNaN(c))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const zge=12;function Lge(t,e,n){let r=n;for(let i=1;i<zge;i++)r=r-t(r)/e(r);return r}function $I(t,e){return t*Math.sqrt(1-e*e)}const Vge=["duration","bounce"],Bge=["stiffness","damping","mass"];function M5(t,e){return e.some(n=>t[n]!==void 0)}function Fge(t){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!M5(t,Bge)&&M5(t,Vge))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ao(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rn.mass,stiffness:i,damping:a}}else{const n=jge(t);e={...e,...n,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function Zw(t=Rn.visualDuration,e=Rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=Fge({...n,velocity:-La(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=La(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Rn.restSpeed.granular:Rn.restSpeed.default),i||(i=T?Rn.restDelta.granular:Rn.restDelta.default);let P;if(x<1){const D=$I(S,x);P=O=>{const I=Math.exp(-x*S*O);return s-I*((b+x*S*w)/D*Math.sin(D*O)+w*Math.cos(D*O))}}else if(x===1)P=D=>s-Math.exp(-S*D)*(w+(b+S*w)*D);else{const D=S*Math.sqrt(x*x-1);P=O=>{const I=Math.exp(-x*S*O),C=Math.min(D*O,300);return s-I*((b+x*S*w)*Math.sinh(C)+D*w*Math.cosh(C))/D}}const N={calculatedDuration:v&&h||null,next:D=>{const O=P(D);if(v)o.done=D>=h;else{let I=D===0?b:0;x<1&&(I=D===0?_s(b):DH(P,D,O));const C=Math.abs(I)<=r,R=Math.abs(s-O)<=i;o.done=C&&R}return o.value=o.done?s:O,o},toString:()=>{const D=Math.min(T2(N),Qw),O=NH(I=>N.next(D*I).value,D,30);return D+"ms "+O},toTransition:()=>{}};return N}Zw.applyToOptions=t=>{const e=Rge(t,100,Zw);return t.ease=e.ease,t.duration=_s(e.duration),t.type="keyframes",t};function qI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=C=>o!==void 0&&C<o||c!==void 0&&C>c,b=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=C=>-x*Math.exp(-C/r),P=C=>S+T(C),N=C=>{const R=T(C),M=P(C);g.done=Math.abs(R)<=u,g.value=g.done?S:M};let D,O;const I=C=>{v(g.value)&&(D=C,O=Zw({keyframes:[g.value,b(g.value)],velocity:DH(P,C,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return I(0),{calculatedDuration:null,next:C=>{let R=!1;return!O&&D===void 0&&(R=!0,N(C),I(C)),D!==void 0&&C>=D?O.next(C-D):(!R&&N(C),g)}}}function Uge(t,e,n){const r=[],i=n||Tl.mix||PH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Ba:e;o=R0(c,o)}r.push(o)}return r}function $ge(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(m2(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Uge(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Vv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(Ao(t[0],t[a-1],f)):u}function qge(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vv(0,e,r);t.push(An(n,1,i))}}function Gge(t){const e=[0];return qge(e,t.length-1),e}function Hge(t,e){return t.map(n=>n*e)}function Kge(t,e){return t.map(()=>e||bH).splice(0,t.length-1)}function lv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ige(r)?r.map(I5):I5(r),a={done:!1,value:e[0]},s=Hge(n&&n.length===e.length?n:Gge(e),t),o=$ge(s,e,{ease:Array.isArray(i)?i:Kge(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Wge=t=>t!==null;function A2(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Wge),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Yge={decay:qI,inertia:qI,tween:lv,keyframes:lv,spring:Zw};function OH(t){typeof t.type=="string"&&(t.type=Yge[t.type])}class k2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Xge=t=>t/100;class C2 extends k2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==bi.now()&&this.tick(bi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;OH(e);const{type:n=lv,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||lv;c!==lv&&typeof o[0]!="number"&&(this.mixKeyframes=R0(Xge,PH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=T2(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let P=this.currentTime,N=r;if(h){const C=Math.min(this.currentTime,i)/o;let R=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&R--,R=Math.min(R,h+1),R%2&&(g==="reverse"?(M=1-M,v&&(M-=v/o)):g==="mirror"&&(N=s)),P=Ao(0,1,M)*o}const D=T?{done:!1,value:f[0]}:N.next(P);a&&(D.value=a(D.value));let{done:O}=D;!T&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&b!==qI&&(D.value=A2(f,this.options,w,this.speed)),x&&x(D.value),I&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return La(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+La(e)}get time(){return La(this.currentTime)}set time(e){e=_s(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=La(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Oge,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Qge(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const yd=t=>t*180/Math.PI,GI=t=>{const e=yd(Math.atan2(t[1],t[0]));return HI(e)},Zge={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:GI,rotateZ:GI,skewX:t=>yd(Math.atan(t[1])),skewY:t=>yd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},HI=t=>(t=t%360,t<0&&(t+=360),t),j5=GI,z5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),L5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Jge={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:z5,scaleY:L5,scale:t=>(z5(t)+L5(t))/2,rotateX:t=>HI(yd(Math.atan2(t[6],t[5]))),rotateY:t=>HI(yd(Math.atan2(-t[2],t[0]))),rotateZ:j5,rotate:j5,skewX:t=>yd(Math.atan(t[4])),skewY:t=>yd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function KI(t){return t.includes("scale")?1:0}function WI(t,e){if(!t||t==="none")return KI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Jge,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Zge,i=o}if(!i)return KI(e);const a=r[e],s=i[1].split(",").map(tme);return typeof a=="function"?a(s):s[a]}const eme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return WI(n,e)};function tme(t){return parseFloat(t.trim())}const Yp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xp=new Set(Yp),V5=t=>t===Wp||t===qe,nme=new Set(["x","y","z"]),rme=Yp.filter(t=>!nme.has(t));function ime(t){const e=[];return rme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const zc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>WI(e,"x"),y:(t,{transform:e})=>WI(e,"y")};zc.translateX=zc.x;zc.translateY=zc.y;const Pd=new Set;let YI=!1,XI=!1,QI=!1;function RH(){if(XI){const t=Array.from(Pd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=ime(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}XI=!1,YI=!1,Pd.forEach(t=>t.complete(QI)),Pd.clear()}function MH(){Pd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(XI=!0)})}function ame(){QI=!0,MH(),RH(),QI=!1}class I2{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Pd.add(this),YI||(YI=!0,on.read(MH),on.resolveKeyframes(RH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Qge(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Pd.delete(this)}cancel(){this.state==="scheduled"&&(Pd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sme=t=>t.startsWith("--");function ome(t,e,n){sme(e)?t.style.setProperty(e,n):t.style[e]=n}const lme=v2(()=>window.ScrollTimeline!==void 0),cme={};function ume(t,e){const n=v2(t);return()=>cme[e]??n()}const jH=ume(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Um=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,B5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Um([0,.65,.55,1]),circOut:Um([.55,0,1,.45]),backIn:Um([.31,.01,.66,-.59]),backOut:Um([.33,1.53,.69,.99])};function zH(t,e){if(t)return typeof t=="function"?jH()?NH(t,e):"ease-out":xH(t)?Um(t):Array.isArray(t)?t.map(n=>zH(n,e)||B5.easeOut):B5[t]}function dme(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=zH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function LH(t){return typeof t=="function"&&"applyToOptions"in t}function fme({type:t,...e}){return LH(t)&&jH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VH extends k2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,m2(typeof e.type!="string");const u=fme(e);this.animation=dme(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=A2(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):ome(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return La(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+La(e)}get time(){return La(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=_s(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&lme()?(this.animation.timeline=e,Ba):n(this)}}const BH={anticipate:mH,backInOut:gH,circInOut:yH};function hme(t){return t in BH}function pme(t){typeof t.ease=="string"&&hme(t.ease)&&(t.ease=BH[t.ease])}const UA=10;class gme extends VH{constructor(e){pme(e),OH(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new C2({...s,autoplay:!1}),c=Math.max(UA,bi.now()-this.startTime),u=Ao(0,UA,c-UA);n.setWithVelocity(o.sample(Math.max(0,c-u)).value,o.sample(c).value,u),o.stop()}}const F5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ru.test(t)||t==="0")&&!t.startsWith("url("));function mme(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function vme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=F5(i,e),o=F5(a,e);return!s||!o?!1:mme(t)||(n==="spring"||LH(n))&&r}function ZI(t){t.duration=0,t.type="keyframes"}const yme=new Set(["opacity","clipPath","filter","transform"]),bme=v2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xme(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return bme()&&n&&yme.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const wme=40;class Sme extends k2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bi.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||I2;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=bi.now(),vme(e,a,s,o)||((Tl.instantAnimations||!c)&&f?.(A2(e,r,n)),e[0]=e[e.length-1],ZI(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&xme(g),b=g.motionValue?.owner?.current,x=v?new gme({...g,element:b}):new C2(g);x.finished.then(()=>{this.notifyFinished()}).catch(Ba),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ame()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function FH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const _me=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Eme(t){const e=_me.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function UH(t,e,n=1){const[r,i]=Eme(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return oH(s)?parseFloat(s):s}return w2(i)?UH(i,e,n+1):i}const Tme={type:"spring",stiffness:500,damping:25,restSpeed:10},Ame=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kme={type:"keyframes",duration:.8},Cme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ime=(t,{keyframes:e})=>e.length>2?kme:Xp.has(t)?t.startsWith("scale")?Ame(e[1]):Tme:Cme,Pme=t=>t!==null;function Nme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Pme),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function $H(t,e){if(t?.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function P2(t,e){const n=t?.[e]??t?.default??t;return n!==t?$H(n,t):n}function Dme({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const N2=(t,e,n,r={},i,a)=>s=>{const o=P2(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-_s(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Dme(o)||Object.assign(f,Ime(t,f)),f.duration&&(f.duration=_s(f.duration)),f.repeatDelay&&(f.repeatDelay=_s(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(ZI(f),f.delay===0&&(h=!0)),(Tl.instantAnimations||Tl.skipAnimations||i?.shouldSkipAnimations)&&(h=!0,ZI(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=Nme(f.keyframes,o);if(g!==void 0){on.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new C2(f):new Sme(f)};function U5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function D2(t,e,n,r){if(typeof e=="function"){const[i,a]=U5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=U5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Gh(t,e,n){const r=t.getProps();return D2(r,e,n!==void 0?n:r.custom,t)}const qH=new Set(["width","height","top","left","right","bottom",...Yp]),$5=30,Ome=t=>!isNaN(parseFloat(t));class Rme{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=bi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ome(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new y2);const r=this.events[e].add(n);return e==="change"?()=>{r(),on.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$5);return uH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yp(t,e){return new Rme(t,e)}const JI=t=>Array.isArray(t);function Mme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yp(n))}function jme(t){return JI(t)?t[t.length-1]||0:t}function O2(t,e){const n=Gh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=jme(a[s]);Mme(t,s,o)}}const si=t=>!!(t&&t.getVelocity);function zme(t){return!!(si(t)&&t.add)}function eP(t,e){const n=t.getValue("willChange");if(zme(n))return n.add(e);if(!n&&Tl.WillChange){const r=new Tl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function R2(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Lme="framerAppearId",GH="data-"+R2(Lme);function HH(t){return t.props[GH]}function Vme({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function KH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const c=t.getDefaultTransition();a=a?$H(a,c):c;const u=a?.reduceMotion;r&&(a=r);const f=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const g in o){const v=t.getValue(g,t.latestValues[g]??null),b=o[g];if(b===void 0||h&&Vme(h,g))continue;const x={delay:n,...P2(a||{},g)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===w&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const N=HH(t);if(N){const D=window.MotionHandoffAnimation(N,g,on);D!==null&&(x.startTime=D,S=!0)}}eP(t,g);const T=u??t.shouldReduceMotion;v.start(N2(g,v,b,T&&qH.has(g)?{type:!1}:x,t,S));const P=v.animation;P&&f.push(P)}if(s){const g=()=>on.update(()=>{s&&O2(t,s)});f.length?Promise.all(f).then(g):g()}return f}function tP(t,e,n={}){const r=Gh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(KH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Bme(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Bme(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(tP(c,e,{...s,delay:n+(typeof r=="function"?0:r)+FH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function WH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>tP(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=tP(t,e,n);else{const i=typeof e=="function"?Gh(t,e,n.custom):e;r=Promise.all(KH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Fme={test:t=>t==="auto",parse:t=>t},YH=t=>e=>e.test(t),XH=[Wp,qe,xo,Ac,vge,mge,Fme],q5=t=>XH.find(YH(t));function Ume(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||cH(t):!0}const $me=new Set(["brightness","contrast","saturate","opacity"]);function qme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(S2)||[];if(!r)return t;const i=n.replace(r,"");let a=$me.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Gme=/\b([a-z-]*)\(.*?\)/gu,nP={...ru,getAnimatableNone:t=>{const e=t.match(Gme);return e?e.map(qme).join(" "):t}},G5={...Wp,transform:Math.round},Hme={rotate:Ac,rotateX:Ac,rotateY:Ac,rotateZ:Ac,scale:Qb,scaleX:Qb,scaleY:Qb,scaleZ:Qb,skew:Ac,skewX:Ac,skewY:Ac,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:Bv,originX:N5,originY:N5,originZ:qe},M2={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,inset:qe,insetBlock:qe,insetBlockStart:qe,insetBlockEnd:qe,insetInline:qe,insetInlineStart:qe,insetInlineEnd:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,paddingBlock:qe,paddingBlockStart:qe,paddingBlockEnd:qe,paddingInline:qe,paddingInlineStart:qe,paddingInlineEnd:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,marginBlock:qe,marginBlockStart:qe,marginBlockEnd:qe,marginInline:qe,marginInlineStart:qe,marginInlineEnd:qe,fontSize:qe,backgroundPositionX:qe,backgroundPositionY:qe,...Hme,zIndex:G5,fillOpacity:Bv,strokeOpacity:Bv,numOctaves:G5},Kme={...M2,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:nP,WebkitFilter:nP},QH=t=>Kme[t];function ZH(t,e){let n=QH(t);return n!==nP&&(n=ru),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Wme=new Set(["auto","none","0"]);function Yme(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Wme.has(a)&&Fv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=ZH(n,i)}class Xme extends I2{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),w2(h))){const g=UH(h,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!qH.has(r)||e.length!==2)return;const[i,a]=e,s=q5(i),o=q5(a),c=P5(i),u=P5(a);if(c!==u&&zc[r]){this.needsMeasurement=!0;return}if(s!==o)if(V5(s)&&V5(o))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else zc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Ume(e[i]))&&r.push(i);r.length&&Yme(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=zc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}const Qme=new Set(["opacity","clipPath","filter","transform"]);function JH(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const eK=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function rP(t){return lH(t)&&"offsetHeight"in t}const{schedule:j2}=wH(queueMicrotask,!1),fs={x:!1,y:!1};function tK(){return fs.x||fs.y}function Zme(t){return t==="x"||t==="y"?fs[t]?null:(fs[t]=!0,()=>{fs[t]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function nK(t,e){const n=JH(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Jme(t){return!(t.pointerType==="touch"||tK())}function eve(t,e,n={}){const[r,i,a]=nK(t,n);return r.forEach(s=>{let o=!1,c=!1,u;const f=()=>{s.removeEventListener("pointerleave",b)},h=w=>{u&&(u(w),u=void 0),f()},g=w=>{o=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c&&(c=!1,h(w))},v=()=>{o=!0,window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",g,i)},b=w=>{if(w.pointerType!=="touch"){if(o){c=!0;return}h(w)}},x=w=>{if(!Jme(w))return;c=!1;const S=e(s,w);typeof S=="function"&&(u=S,s.addEventListener("pointerleave",b,i))};s.addEventListener("pointerenter",x,i),s.addEventListener("pointerdown",v,i)}),a}const rK=(t,e)=>e?t===e?!0:rK(t,e.parentElement):!1,z2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,tve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nve(t){return tve.has(t.tagName)||t.isContentEditable===!0}const rve=new Set(["INPUT","SELECT","TEXTAREA"]);function ive(t){return rve.has(t.tagName)||t.isContentEditable===!0}const rw=new WeakSet;function H5(t){return e=>{e.key==="Enter"&&t(e)}}function $A(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ave=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=H5(()=>{if(rw.has(n))return;$A(n,"down");const i=H5(()=>{$A(n,"up")}),a=()=>$A(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function K5(t){return z2(t)&&!tK()}const W5=new WeakSet;function sve(t,e,n={}){const[r,i,a]=nK(t,n),s=o=>{const c=o.currentTarget;if(!K5(o)||W5.has(o))return;rw.add(c),n.stopPropagation&&W5.add(o);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),rw.has(c)&&rw.delete(c),K5(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||rK(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),rP(o)&&(o.addEventListener("focus",u=>ave(u,i)),!nve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function L2(t){return lH(t)&&"ownerSVGElement"in t}const iw=new WeakMap;let aw;const iK=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:L2(r)&&"getBBox"in r?r.getBBox()[e]:r[n],ove=iK("inline","width","offsetWidth"),lve=iK("block","height","offsetHeight");function cve({target:t,borderBoxSize:e}){iw.get(t)?.forEach(n=>{n(t,{get width(){return ove(t,e)},get height(){return lve(t,e)}})})}function uve(t){t.forEach(cve)}function dve(){typeof ResizeObserver>"u"||(aw=new ResizeObserver(uve))}function fve(t,e){aw||dve();const n=JH(t);return n.forEach(r=>{let i=iw.get(r);i||(i=new Set,iw.set(r,i)),i.add(e),aw?.observe(r)}),()=>{n.forEach(r=>{const i=iw.get(r);i?.delete(e),i?.size||aw?.unobserve(r)})}}const sw=new Set;let Ch;function hve(){Ch=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};sw.forEach(e=>e(t))},window.addEventListener("resize",Ch)}function pve(t){return sw.add(t),Ch||hve(),()=>{sw.delete(t),!sw.size&&typeof Ch=="function"&&(window.removeEventListener("resize",Ch),Ch=void 0)}}function Y5(t,e){return typeof t=="function"?pve(t):fve(t,e)}function gve(t){return L2(t)&&t.tagName==="svg"}const mve=[...XH,rr,ru],vve=t=>mve.find(YH(t)),X5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ih=()=>({x:X5(),y:X5()}),Q5=()=>({min:0,max:0}),hr=()=>({x:Q5(),y:Q5()}),yve=new WeakMap;function YS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Uv(t){return typeof t=="string"||Array.isArray(t)}const V2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],B2=["initial",...V2];function XS(t){return YS(t.animate)||B2.some(e=>Uv(t[e]))}function aK(t){return!!(XS(t)||t.variants)}function bve(t,e,n){for(const r in e){const i=e[r],a=n[r];if(si(i))t.addValue(r,i);else if(si(a))t.addValue(r,yp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,yp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const iP={current:null},sK={current:!1},xve=typeof window<"u";function wve(){if(sK.current=!0,!!xve)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>iP.current=t.matches;t.addEventListener("change",e),e()}else iP.current=!1}const Z5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Jw={};function oK(t){Jw=t}function Sve(){return Jw}class _ve{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=I2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=bi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,on.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=XS(n),this.isVariantNode=aK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const b=g[v];u[v]!==void 0&&si(b)&&b.set(u[v])}}mount(e){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=e,yve.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(sK.current||wve(),this.shouldReduceMotion=iP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),nu(this.notifyUpdate),nu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&Qme.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:c,ease:u,duration:f}=n.accelerate,h=new VH({element:this.current,name:e,keyframes:o,times:c,ease:u,duration:_s(f)}),g=s(h);this.valueSubscriptions.set(e,()=>{g(),h.cancel()});return}const r=Xp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&on.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jw){const n=Jw[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Z5.length;r++){const i=Z5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=bve(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(oH(r)||cH(r))?r=parseFloat(r):!vve(r)&&ru.test(n)&&(r=ZH(e,n)),this.setBaseTarget(e,si(r)?r.get():r)),si(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=D2(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!si(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new y2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){j2.render(this.render)}}class lK extends _ve{constructor(){super(...arguments),this.KeyframeResolver=Xme}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;si(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class pu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function cK({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Eve({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tve(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function qA(t){return t===void 0||t===1}function aP({scale:t,scaleX:e,scaleY:n}){return!qA(t)||!qA(e)||!qA(n)}function nd(t){return aP(t)||uK(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uK(t){return J5(t.x)||J5(t.y)}function J5(t){return t&&t!=="0%"}function e1(t,e,n){const r=t-n,i=e*r;return n+i}function eV(t,e,n,r,i){return i!==void 0&&(t=e1(t,i,r)),e1(t,n,r)+e}function sP(t,e=0,n=1,r,i){t.min=eV(t.min,e,n,r,i),t.max=eV(t.max,e,n,r,i)}function dK(t,{x:e,y:n}){sP(t.x,e.translate,e.scale,e.originPoint),sP(t.y,n.translate,n.scale,n.originPoint)}const tV=.999999999999,nV=1.0000000000001;function Ave(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Nh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,dK(t,s)),r&&nd(a.latestValues)&&Nh(t,a.latestValues))}e.x<nV&&e.x>tV&&(e.x=1),e.y<nV&&e.y>tV&&(e.y=1)}function Ph(t,e){t.min=t.min+e,t.max=t.max+e}function rV(t,e,n,r,i=.5){const a=An(t.min,t.max,i);sP(t,e,n,a,r)}function Nh(t,e){rV(t.x,e.x,e.scaleX,e.scale,e.originX),rV(t.y,e.y,e.scaleY,e.scale,e.originY)}function fK(t,e){return cK(Tve(t.getBoundingClientRect(),e))}function kve(t,e,n){const r=fK(t,n),{scroll:i}=e;return i&&(Ph(r.x,i.offset.x),Ph(r.y,i.offset.y)),r}const Cve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ive=Yp.length;function Pve(t,e,n){let r="",i=!0;for(let a=0;a<Ive;a++){const s=Yp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(s.startsWith("scale")?1:0);else{const u=parseFloat(o);c=s.startsWith("scale")?u===1:u===0}if(!c||n){const u=eK(o,M2[s]);if(!c){i=!1;const f=Cve[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function F2(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Xp.has(c)){s=!0;continue}else if(_H(c)){i[c]=u;continue}else{const f=eK(u,M2[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=Pve(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}function hK(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function iV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const n=iV(t,e.target.x),r=iV(t,e.target.y);return`${n}% ${r}%`}},Nve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ru.parse(t);if(i.length>5)return r;const a=ru.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=An(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}},oP={borderRadius:{...wm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wm,borderTopRightRadius:wm,borderBottomLeftRadius:wm,borderBottomRightRadius:wm,boxShadow:Nve};function pK(t,{layout:e,layoutId:n}){return Xp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!oP[t]||t==="opacity")}function U2(t,e,n){const r=t.style,i=e?.style,a={};if(!r)return a;for(const s in r)(si(r[s])||i&&si(i[s])||pK(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(a[s]=r[s]);return a}function Dve(t){return window.getComputedStyle(t)}class Ove extends lK{constructor(){super(...arguments),this.type="html",this.renderInstance=hK}readValueFromInstance(e,n){if(Xp.has(n))return this.projection?.isProjecting?KI(n):eme(e,n);{const r=Dve(e),i=(_H(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fK(e,n)}build(e,n,r){F2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return U2(e,n,r)}}const Rve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mve={offset:"strokeDashoffset",array:"strokeDasharray"};function jve(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Rve:Mve;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const zve=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function gK(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(F2(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox);for(const v of zve)h[v]!==void 0&&(g[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&jve(h,i,a,s,!1)}const mK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),vK=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Lve(t,e,n,r){hK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(mK.has(i)?i:R2(i),e.attrs[i])}function yK(t,e,n){const r=U2(t,e,n);for(const i in t)if(si(t[i])||si(e[i])){const a=Yp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class Vve extends lK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xp.has(n)){const r=QH(n);return r&&r.default||0}return n=mK.has(n)?n:R2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yK(e,n,r)}build(e,n,r){gK(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Lve(e,n,r,i)}mount(e){this.isSVGTag=vK(e.tagName),super.mount(e)}}const Bve=B2.length;function bK(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?bK(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Bve;n++){const r=B2[n],i=t.props[r];(Uv(i)||i===!1)&&(e[r]=i)}return e}function xK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Fve=[...V2].reverse(),Uve=V2.length;function $ve(t){return e=>Promise.all(e.map(({animation:n,options:r})=>WH(t,n,r)))}function qve(t){let e=$ve(t),n=aV(),r=!0;const i=c=>(u,f)=>{const h=Gh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=bK(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<Uve;w++){const S=Fve[w],T=n[S],P=u[S]!==void 0?u[S]:f[S],N=Uv(P),D=S===c?T.isActive:null;D===!1&&(b=w);let O=P===f[S]&&P!==u[S]&&N;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...v},!T.isActive&&D===null||!P&&!T.prevProp||YS(P)||typeof P=="boolean")continue;if(S==="exit"&&T.isActive&&D!==!0){T.prevResolvedValues&&(v={...v,...T.prevResolvedValues});continue}const I=Gve(T.prevProp,P);let C=I||S===c&&T.isActive&&!O&&N||w>b&&N,R=!1;const M=Array.isArray(P)?P:[P];let V=M.reduce(i(S),{});D===!1&&(V={});const{prevResolvedValues:z={}}=T,L={...z,...V},W=Y=>{C=!0,g.has(Y)&&(R=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in L){const J=V[Y],ee=z[Y];if(v.hasOwnProperty(Y))continue;let X=!1;JI(J)&&JI(ee)?X=!xK(J,ee):X=J!==ee,X?J!=null?W(Y):g.add(Y):J!==void 0&&g.has(Y)?W(Y):T.protectedKeys[Y]=!0}T.prevProp=P,T.prevResolvedValues=V,T.isActive&&(v={...v,...V}),r&&t.blockInitialAnimation&&(C=!1);const Q=O&&I;C&&(!Q||R)&&h.push(...M.map(Y=>{const J={type:S};if(typeof Y=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,X=Gh(ee,Y);if(ee.enteringChildren&&X){const{delayChildren:U}=X.transition||{};J.delay=FH(ee.enteringChildren,t,U)}}return{animation:Y,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Gh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),P=t.getValue(S);P&&(P.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=aV()}}}function Gve(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xK(e,t):!1}function Yu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aV(){return{animate:Yu(!0),whileInView:Yu(),whileHover:Yu(),whileTap:Yu(),whileDrag:Yu(),whileFocus:Yu(),exit:Yu()}}function sV(t,e){t.min=e.min,t.max=e.max}function us(t,e){sV(t.x,e.x),sV(t.y,e.y)}function oV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const wK=1e-4,Hve=1-wK,Kve=1+wK,SK=.01,Wve=0-SK,Yve=0+SK;function xi(t){return t.max-t.min}function Xve(t,e,n){return Math.abs(t-e)<=n}function lV(t,e,n,r=.5){t.origin=r,t.originPoint=An(e.min,e.max,t.origin),t.scale=xi(n)/xi(e),t.translate=An(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Hve&&t.scale<=Kve||isNaN(t.scale))&&(t.scale=1),(t.translate>=Wve&&t.translate<=Yve||isNaN(t.translate))&&(t.translate=0)}function cv(t,e,n,r){lV(t.x,e.x,n.x,r?r.originX:void 0),lV(t.y,e.y,n.y,r?r.originY:void 0)}function cV(t,e,n){t.min=n.min+e.min,t.max=t.min+xi(e)}function Qve(t,e,n){cV(t.x,e.x,n.x),cV(t.y,e.y,n.y)}function uV(t,e,n){t.min=e.min-n.min,t.max=t.min+xi(e)}function t1(t,e,n){uV(t.x,e.x,n.x),uV(t.y,e.y,n.y)}function dV(t,e,n,r,i){return t-=e,t=e1(t,1/n,r),i!==void 0&&(t=e1(t,1/i,r)),t}function Zve(t,e=0,n=1,r=.5,i,a=t,s=t){if(xo.test(e)&&(e=parseFloat(e),e=An(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=An(a.min,a.max,r);t===a&&(o-=e),t.min=dV(t.min,e,n,o,i),t.max=dV(t.max,e,n,o,i)}function fV(t,e,[n,r,i],a,s){Zve(t,e[n],e[r],e[i],e.scale,a,s)}const Jve=["x","scaleX","originX"],e0e=["y","scaleY","originY"];function hV(t,e,n,r){fV(t.x,e,Jve,n?n.x:void 0,r?r.x:void 0),fV(t.y,e,e0e,n?n.y:void 0,r?r.y:void 0)}function pV(t){return t.translate===0&&t.scale===1}function _K(t){return pV(t.x)&&pV(t.y)}function gV(t,e){return t.min===e.min&&t.max===e.max}function t0e(t,e){return gV(t.x,e.x)&&gV(t.y,e.y)}function mV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function EK(t,e){return mV(t.x,e.x)&&mV(t.y,e.y)}function vV(t){return xi(t.x)/xi(t.y)}function yV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function ao(t){return[t("x"),t("y")]}function n0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const TK=["TopLeft","TopRight","BottomLeft","BottomRight"],r0e=TK.length,bV=t=>typeof t=="string"?parseFloat(t):t,xV=t=>typeof t=="number"||qe.test(t);function i0e(t,e,n,r,i,a){i?(t.opacity=An(0,n.opacity??1,a0e(r)),t.opacityExit=An(e.opacity??1,0,s0e(r))):a&&(t.opacity=An(e.opacity??1,n.opacity??1,r));for(let s=0;s<r0e;s++){const o=`border${TK[s]}Radius`;let c=wV(e,o),u=wV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||xV(c)===xV(u)?(t[o]=Math.max(An(bV(c),bV(u),r),0),(xo.test(u)||xo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=An(e.rotate||0,n.rotate||0,r))}function wV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const a0e=AK(0,.5,vH),s0e=AK(.5,.95,Ba);function AK(t,e,n){return r=>r<t?0:r>e?1:n(Vv(t,e,r))}function o0e(t,e,n){const r=si(t)?t:yp(t);return r.start(N2("",r,e,n)),r.animation}function $v(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const l0e=(t,e)=>t.depth-e.depth;class c0e{constructor(){this.children=[],this.isDirty=!1}add(e){g2(this.children,e),this.isDirty=!0}remove(e){Yw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l0e),this.isDirty=!1,this.children.forEach(e)}}function u0e(t,e){const n=bi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(nu(r),t(a-e))};return on.setup(r,!0),()=>nu(r)}function ow(t){return si(t)?t.get():t}class d0e{constructor(){this.members=[]}add(e){g2(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Yw(this.members,r)}e.scheduleRender()}remove(e){if(Yw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const lw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},GA=["","X","Y","Z"],f0e=1e3;let h0e=0;function HA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=HH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kK(r)}function CK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=h0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(m0e),this.nodes.forEach(x0e),this.nodes.forEach(w0e),this.nodes.forEach(v0e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new c0e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new y2),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=L2(s)&&!gve(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;on.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=u0e(g,250),lw.hasAnimatedSinceResize&&(lw.hasAnimatedSinceResize=!1,this.nodes.forEach(EV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||A0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!EK(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...P2(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(f,T)}else h||EV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_V);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(b0e),this.nodes.forEach(p0e),this.nodes.forEach(g0e)):this.nodes.forEach(_V),this.clearAllSnapshots();const o=bi.now();Hr.delta=Ao(0,1e3/60,o-Hr.timestamp),Hr.timestamp=o,Hr.isProcessing=!0,zA.update.process(Hr),zA.preRender.process(Hr),zA.render.process(Hr),Hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,j2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y0e),this.sharedNodes.forEach(_0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xi(this.snapshot.measuredBox.x)&&!xi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!_K(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||nd(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),k0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return hr();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(C0e))){const{scroll:u}=this.root;u&&(Ph(o.x,u.offset.x),Ph(o.y,u.offset.y))}return o}removeElementScroll(s){const o=hr();if(us(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&us(o,s),Ph(o.x,f.offset.x),Ph(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=hr();us(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Nh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),nd(f.latestValues)&&Nh(c,f.latestValues)}return nd(this.latestValues)&&Nh(c,this.latestValues),c}removeTransform(s){const o=hr();us(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!nd(u.latestValues))continue;aP(u.latestValues)&&u.updateSnapshot();const f=hr(),h=u.measurePageBox();us(f,h),hV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return nd(this.latestValues)&&hV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!this.layout||!(f||h))return;this.resolvedRelativeTargetAt=Hr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),dK(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aP(this.parent.latestValues)||uK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,c){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),t1(this.relativeTargetOrigin,o,c),us(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Hr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;us(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Ave(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=hr());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oV(this.prevProjectionDelta.x,this.projectionDelta.x),oV(this.prevProjectionDelta.y,this.projectionDelta.y)),cv(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!yV(this.projectionDelta.x,this.prevProjectionDelta.x)||!yV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ih(),this.projectionDelta=Ih(),this.projectionDeltaWithTransform=Ih()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Ih();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=hr(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(T0e));this.animationProgress=0;let P;this.mixTargetDelta=N=>{const D=N/1e3;TV(h.x,s.x,D),TV(h.y,s.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(t1(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E0e(this.relativeTarget,this.relativeTargetOrigin,g,D),P&&t0e(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=hr()),us(P,this.relativeTarget)),x&&(this.animationValues=f,i0e(f,u,this.latestValues,D,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(nu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{lw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yp(0)),this.currentAnimation=o0e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(f0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&IK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||hr();const h=xi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=xi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}us(o,c),Nh(o,f),cv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new d0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&HA("z",s,u,this.animationValues);for(let f=0;f<GA.length;f++)HA(`rotate${GA[f]}`,s,u,this.animationValues),HA(`skew${GA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=ow(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=ow(o?.pointerEvents)||""),this.hasProjected&&!nd(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=n0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in oP){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=oP[b],T=h==="none"?f[b]:x(f[b],u);if(w){const P=w.length;for(let N=0;N<P;N++)s[w[N]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?ow(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(SV),this.root.sharedNodes.clear()}}}function p0e(t){t.updateLayout()}function g0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?ao(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=xi(h);h.min=n[f].min,h.max=h.min+g}):IK(i,e.layoutBox,n)&&ao(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=xi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Ih();cv(s,n,e.layoutBox);const o=Ih();a?cv(o,t.applyTransform(r,!0),e.measuredBox):cv(o,n,e.layoutBox);const c=!_K(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=hr();t1(v,e.layoutBox,h.layoutBox);const b=hr();t1(b,n,g.layoutBox),EK(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function m0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y0e(t){t.clearSnapshot()}function SV(t){t.clearMeasurements()}function _V(t){t.isLayoutDirty=!1}function b0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function EV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function x0e(t){t.resolveTargetDelta()}function w0e(t){t.calcProjection()}function S0e(t){t.resetSkewAndRotation()}function _0e(t){t.removeLeadSnapshot()}function TV(t,e,n){t.translate=An(e.translate,0,n),t.scale=An(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AV(t,e,n,r){t.min=An(e.min,n.min,r),t.max=An(e.max,n.max,r)}function E0e(t,e,n,r){AV(t.x,e.x,n.x,r),AV(t.y,e.y,n.y,r)}function T0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const A0e={duration:.45,ease:[.4,0,.1,1]},kV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CV=kV("applewebkit/")&&!kV("chrome/")?Math.round:Ba;function IV(t){t.min=CV(t.min),t.max=CV(t.max)}function k0e(t){IV(t.x),IV(t.y)}function IK(t,e,n){return t==="position"||t==="preserve-aspect"&&!Xve(vV(e),vV(n),.2)}function C0e(t){return t!==t.root&&t.scroll?.wasRoot}const I0e=CK({attachResizeListener:(t,e)=>$v(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),KA={current:void 0},PK=CK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!KA.current){const t=new I0e({});t.mount(window),t.setOptions({layoutScroll:!0}),KA.current=t}return KA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$2=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function PV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function P0e(...t){return e=>{let n=!1;const r=t.map(i=>{const a=PV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():PV(t[i],null)}}}}function N0e(...t){return A.useCallback(P0e(...t),t)}class D0e extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=rP(r)&&r.offsetWidth||0,a=rP(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function O0e({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){const s=A.useId(),o=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=A.useContext($2),f=t.props?.ref??t?.ref,h=N0e(o,f);return A.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:x,right:w,bottom:S}=c.current;if(e||a===!1||!o.current||!g||!v)return;const T=n==="left"?`left: ${x}`:`right: ${w}`,P=r==="bottom"?`bottom: ${S}`:`top: ${b}`;o.current.dataset.motionPopId=s;const N=document.createElement("style");u&&(N.nonce=u);const D=i??document.head;return D.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${T}px !important;
            ${P}px !important;
          }
        `),()=>{D.contains(N)&&D.removeChild(N)}},[e]),m.jsx(D0e,{isPresent:e,childRef:o,sizeRef:c,pop:a,children:a===!1?t:A.cloneElement(t,{ref:h})})}const R0e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:c,root:u})=>{const f=KS(M0e),h=A.useId();let g=!0,v=A.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return a&&g&&(v={...v}),A.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[n]),A.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),t=m.jsx(O0e,{pop:s==="popLayout",isPresent:n,anchorX:o,anchorY:c,root:u,children:t}),m.jsx(WS.Provider,{value:v,children:t})};function M0e(){return new Map}function NK(t=!0){const e=A.useContext(WS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const Zb=t=>t.key||"";function NV(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const lr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:c="top",root:u})=>{const[f,h]=NK(s),g=A.useMemo(()=>NV(t),[t]),v=s&&!f?[]:g.map(Zb),b=A.useRef(!0),x=A.useRef(g),w=KS(()=>new Map),S=A.useRef(new Set),[T,P]=A.useState(g),[N,D]=A.useState(g);p2(()=>{b.current=!1,x.current=g;for(let C=0;C<N.length;C++){const R=Zb(N[C]);v.includes(R)?(w.delete(R),S.current.delete(R)):w.get(R)!==!0&&w.set(R,!1)}},[N,v.length,v.join("-")]);const O=[];if(g!==T){let C=[...g];for(let R=0;R<N.length;R++){const M=N[R],V=Zb(M);v.includes(V)||(C.splice(R,0,M),O.push(M))}return a==="wait"&&O.length&&(C=O),D(NV(C)),P(g),null}const{forceRender:I}=A.useContext(h2);return m.jsx(m.Fragment,{children:N.map(C=>{const R=Zb(C),M=s&&!f?!1:g===N||v.includes(R),V=()=>{if(S.current.has(R))return;if(S.current.add(R),w.has(R))w.set(R,!0);else return;let z=!0;w.forEach(L=>{L||(z=!1)}),z&&(I?.(),D(x.current),s&&h?.(),r&&r())};return m.jsx(R0e,{isPresent:M,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:M?void 0:V,anchorX:o,anchorY:c,children:C},R)})})},DK=A.createContext({strict:!1}),DV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let OV=!1;function j0e(){if(OV)return;const t={};for(const e in DV)t[e]={isEnabled:n=>DV[e].some(r=>!!n[r])};oK(t),OV=!0}function OK(){return j0e(),Sve()}function z0e(t){const e=OK();for(const n in t)e[n]={...e[n],...t[n]};oK(e)}const L0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function n1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L0e.has(t)}let RK=t=>!n1(t);function V0e(t){typeof t=="function"&&(RK=e=>e.startsWith("on")?!n1(e):t(e))}try{V0e(require("@emotion/is-prop-valid").default)}catch{}function B0e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(RK(i)||n===!0&&n1(i)||!e&&!n1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const QS=A.createContext({});function F0e(t,e){if(XS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Uv(n)?n:void 0,animate:Uv(r)?r:void 0}}return t.inherit!==!1?e:{}}function U0e(t){const{initial:e,animate:n}=F0e(t,A.useContext(QS));return A.useMemo(()=>({initial:e,animate:n}),[RV(e),RV(n)])}function RV(t){return Array.isArray(t)?t.join(" "):t}const q2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MK(t,e,n){for(const r in e)!si(e[r])&&!pK(r,n)&&(t[r]=e[r])}function $0e({transformTemplate:t},e){return A.useMemo(()=>{const n=q2();return F2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function q0e(t,e){const n=t.style||{},r={};return MK(r,n,t),Object.assign(r,$0e(t,e)),r}function G0e(t,e){const n={},r=q0e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const jK=()=>({...q2(),attrs:{}});function H0e(t,e,n,r){const i=A.useMemo(()=>{const a=jK();return gK(a,e,vK(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};MK(a,t.style,t),i.style={...a,...i.style}}return i}const K0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function G2(t){return typeof t!="string"||t.includes("-")?!1:!!(K0e.indexOf(t)>-1||/[A-Z]/u.test(t))}function W0e(t,e,n,{latestValues:r},i,a=!1,s){const c=(s??G2(t)?H0e:G0e)(e,r,i,t),u=B0e(e,typeof t=="string",a),f=t!==A.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=A.useMemo(()=>si(h)?h.get():h,[h]);return A.createElement(t,{...f,children:g})}function Y0e({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:X0e(n,r,i,t),renderState:e()}}function X0e(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=ow(a[g]);let{initial:s,animate:o}=t;const c=XS(t),u=aK(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!YS(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=D2(t,g[v]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let P=S[T];if(Array.isArray(P)){const N=f?P.length-1:0;P=P[N]}P!==null&&(i[T]=P)}for(const T in x)i[T]=x[T]}}}return i}const zK=t=>(e,n)=>{const r=A.useContext(QS),i=A.useContext(WS),a=()=>Y0e(t,e,r,i);return n?a():KS(a)},Q0e=zK({scrapeMotionValuesFromProps:U2,createRenderState:q2}),Z0e=zK({scrapeMotionValuesFromProps:yK,createRenderState:jK}),J0e=Symbol.for("motionComponentSymbol");function eye(t,e,n){const r=A.useRef(n);A.useInsertionEffect(()=>{r.current=n});const i=A.useRef(null);return A.useCallback(a=>{a&&t.onMount?.(a),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const o=s(a);typeof o=="function"&&(i.current=o)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const LK=A.createContext({});function Sh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tye(t,e,n,r,i,a){const{visualElement:s}=A.useContext(QS),o=A.useContext(DK),c=A.useContext(WS),u=A.useContext($2),f=u.reducedMotion,h=u.skipAnimations,g=A.useRef(null),v=A.useRef(!1);r=r||o.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f,skipAnimations:h,isSVG:a}),v.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,x=A.useContext(LK);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&nye(g.current,n,i,x);const w=A.useRef(!1);A.useInsertionEffect(()=>{b&&w.current&&b.update(n,c)});const S=n[GH],T=A.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return p2(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),T.current&&b.animationState&&b.animationState.animateChanges())}),A.useEffect(()=>{b&&(!T.current&&b.animationState&&b.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),b.enteringChildren=void 0)}),b}function nye(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:VK(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Sh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function VK(t){if(t)return t.options.allowProjection!==!1?t.projection:VK(t.parent)}function WA(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&z0e(r);const a=n?n==="svg":G2(t),s=a?Z0e:Q0e;function o(u,f){let h;const g={...A.useContext($2),...u,layoutId:rye(u)},{isStatic:v}=g,b=U0e(u),x=s(u,v);if(!v&&sH){iye();const w=aye(g);h=w.MeasureLayout,b.visualElement=tye(t,x,g,i,w.ProjectionNode,a)}return m.jsxs(QS.Provider,{value:b,children:[h&&b.visualElement?m.jsx(h,{visualElement:b.visualElement,...g}):null,W0e(t,u,eye(x,b.visualElement,f),x,v,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=A.forwardRef(o);return c[J0e]=t,c}function rye({layoutId:t}){const e=A.useContext(h2).id;return e&&t!==void 0?e+"-"+t:t}function iye(t,e){A.useContext(DK).strict}function aye(t){const e=OK(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function sye(t,e){if(typeof Proxy>"u")return WA;const n=new Map,r=(a,s)=>WA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,WA(s,void 0,t,e)),n.get(s))})}const oye=(t,e)=>e.isSVG??G2(t)?new Vve(e):new Ove(e,{allowProjection:t!==A.Fragment});class lye extends pu{constructor(e){super(e),e.animationState||(e.animationState=qve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let cye=0;class uye extends pu{constructor(){super(...arguments),this.id=cye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dye={animation:{Feature:lye},exit:{Feature:uye}};function z0(t){return{point:{x:t.pageX,y:t.pageY}}}const fye=t=>e=>z2(e)&&t(e,z0(e));function uv(t,e,n,r){return $v(t,e,fye(n),r)}const BK=({current:t})=>t?t.ownerDocument.defaultView:null,MV=(t,e)=>Math.abs(t-e);function hye(t,e){const n=MV(t.x,e.x),r=MV(t.y,e.y);return Math.sqrt(n**2+r**2)}const jV=new Set(["auto","scroll"]);class FK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=XA(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=hye(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=v,{timestamp:S}=Hr;this.history.push({...w,timestamp:S});const{onStart:T,onMove:P}=this.handlers;b||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=YA(b,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=XA(v.type==="pointercancel"?this.lastMoveEventInfo:YA(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,T),w&&w(v,T)},!z2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=z0(e),u=YA(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Hr;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,XA(u,this.history)),this.removeListeners=R0(uv(this.contextWindow,"pointermove",this.handlePointerMove),uv(this.contextWindow,"pointerup",this.handlePointerUp),uv(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(jV.has(r.overflowX)||jV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),on.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),nu(this.updatePoint)}}function YA(t,e){return e?{point:e(t.point)}:t}function zV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function XA({point:t},e){return{point:t,delta:zV(t,UK(e)),offset:zV(t,pye(e)),velocity:gye(e,.1)}}function pye(t){return t[0]}function UK(t){return t[t.length-1]}function gye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=UK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_s(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>_s(e)*2&&(r=t[1]);const a=La(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function mye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?An(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?An(n,t,r.max):Math.min(t,n)),t}function LV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vye(t,{top:e,left:n,bottom:r,right:i}){return{x:LV(t.x,n,i),y:LV(t.y,e,r)}}function VV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yye(t,e){return{x:VV(t.x,e.x),y:VV(t.y,e.y)}}function bye(t,e){let n=.5;const r=xi(t),i=xi(e);return i>r?n=Vv(e.min,e.max-r,t.min):r>i&&(n=Vv(t.min,t.max-i,e.min)),Ao(0,1,n)}function xye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const lP=.35;function wye(t=lP){return t===!1?t=0:t===!0&&(t=lP),{x:BV(t,"left","right"),y:BV(t,"top","bottom")}}function BV(t,e,n){return{min:FV(t,e),max:FV(t,n)}}function FV(t,e){return typeof t=="number"?t:t[e]||0}const Sye=new WeakMap;class _ye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(z0(h).point),this.stopAnimation()},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zme(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ao(S=>{let T=this.getAxisMotionValue(S).get()||0;if(xo.test(T)){const{projection:P}=this.visualElement;if(P&&P.layout){const N=P.layout.layoutBox[S];N&&(T=xi(N)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&on.update(()=>x(h,g),!1,!0),eP(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Tye(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&on.update(()=>w(h,g),!1,!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:f}=this.getProps();this.panSession=new FK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:BK(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&on.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Jb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=mye(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Sh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vye(r.layoutBox,e):this.constraints=!1,this.elastic=wye(n),i!==this.constraints&&!Sh(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&ao(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xye(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=kve(r,i.root,this.visualElement.getTransformPagePoint());let s=yye(i.layout.layoutBox,a);if(n){const o=n(Eve(s));this.hasMutatedConstraints=!!o,o&&(s=cK(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=ao(f=>{if(!Jb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return eP(this.visualElement,e),r.start(N2(e,r,0,n,this.visualElement,!1))}stopAnimation(){ao(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ao(n=>{const{drag:r}=this.getProps();if(!Jb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-An(s,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Sh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ao(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=bye({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),ao(s=>{if(!Jb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(An(c,u,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Sye.set(this.visualElement,this);const e=this.visualElement.current,n=uv(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps(),g=u.target,v=g!==e&&ive(g);f&&h&&!v&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();Sh(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=Eye(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),on.read(i);const o=$v(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(ao(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=lP,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function UV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function Eye(t,e,n){const r=Y5(t,UV(n)),i=Y5(e,UV(n));return()=>{r(),i()}}function Jb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Tye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Aye extends pu{constructor(e){super(e),this.removeGroupControls=Ba,this.removeListeners=Ba,this.controls=new _ye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ba}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const QA=t=>(e,n)=>{t&&on.update(()=>t(e,n),!1,!0)};class kye extends pu{constructor(){super(...arguments),this.removePointerDownListener=Ba}onPointerDown(e){this.session=new FK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:QA(e),onStart:QA(n),onMove:QA(r),onEnd:(a,s)=>{delete this.session,i&&on.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=uv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ZA=!1;class Cye extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),ZA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),lw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),ZA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||on.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),j2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;ZA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $K(t){const[e,n]=NK(),r=A.useContext(h2);return m.jsx(Cye,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(LK),isPresent:e,safeToRemove:n})}const Iye={pan:{Feature:kye},drag:{Feature:Aye,ProjectionNode:PK,MeasureLayout:$K}};function $V(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&on.postRender(()=>a(e,z0(e)))}class Pye extends pu{mount(){const{current:e}=this.node;e&&(this.unmount=eve(e,(n,r)=>($V(this.node,r,"Start"),i=>$V(this.node,i,"End"))))}unmount(){}}class Nye extends pu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=R0($v(this.node.current,"focus",()=>this.onFocus()),$v(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&on.postRender(()=>a(e,z0(e)))}class Dye extends pu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=sve(e,(i,a)=>(qV(this.node,a,"Start"),(s,{success:o})=>qV(this.node,s,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:r?.tap===!1})}unmount(){}}const cP=new WeakMap,JA=new WeakMap,Oye=t=>{const e=cP.get(t.target);e&&e(t)},Rye=t=>{t.forEach(Oye)};function Mye({root:t,...e}){const n=t||document;JA.has(n)||JA.set(n,{});const r=JA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Rye,{root:t,...e})),r[i]}function jye(t,e,n){const r=Mye(e);return cP.set(t,n),r.observe(t),()=>{cP.delete(t),r.unobserve(t)}}const zye={some:0,all:1};class Lye extends pu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:zye[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return jye(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Vye(e,n))&&this.startObserver()}unmount(){}}function Vye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Bye={inView:{Feature:Lye},tap:{Feature:Dye},focus:{Feature:Nye},hover:{Feature:Pye}},Fye={layout:{ProjectionNode:PK,MeasureLayout:$K}},Uye={...dye,...Bye,...Iye,...Fye},bt=sye(Uye,oye);function $ye(t){t.values.forEach(e=>e.stop())}function uP(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&O2(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{uP(a,e)})})}function qye(t,e){if(Array.isArray(e))return uP(t,e);if(typeof e=="string")return uP(t,[e]);O2(t,e)}function Gye(){const t=new Set,e={subscribe(n){return t.add(n),()=>{t.delete(n)}},start(n,r){const i=[];return t.forEach(a=>{i.push(WH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{qye(r,n)})},stop(){t.forEach(n=>{$ye(n)})},mount(){return()=>{e.stop()}}};return e}function Hye(){const t=KS(Gye);return p2(t.mount,[]),t}const Kye=Hye,gu=oD((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),ex=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=gu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(lr,{children:n&&m.jsx(bt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(nue,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(Bp,{size:14})})]})]})})})};class aa extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Ed,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(Jh,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(Sce,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Wye=({onAddTransaction:t})=>{const e=Xa(),n=Os(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(Aw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(gd,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:m.jsx(fq,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(ep,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Tce,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(lf,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(dce,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(qce,{className:"w-6 h-6"})})]})})};function Yye(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Xye(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function hl(t,e){return function(n){n&&(t[e]=n)}}function qK(t,e,n){return function(r){r&&(t[e][n]=r)}}function GV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Qye(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var Zye="function",Jye="object",ebe="string",tbe="number",H2="undefined",GK=typeof window!==H2,nbe=typeof document!==H2&&document,rbe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ir=1e-7,tx={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function ibe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function r1(t,e,n,r){return(t*r+e*n)/(n+r)}function ZS(t){return typeof t===H2}function Cs(t){return t&&typeof t===Jye}function cr(t){return Array.isArray(t)}function Gi(t){return typeof t===ebe}function bp(t){return typeof t===tbe}function K2(t){return typeof t===Zye}function abe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function HK(t,e,n,r,i){var a=W2(t,e,n);return a?n:sbe(t,e,n+1,r,i)}function W2(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function sbe(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!W2(t,e,u))return{value:u};var h=u,g=Hi(i,function(v){var b=v.open;return b===f});if(g&&(h=HK(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function Y2(t,e){var n=Gi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?rbe:u,h=f.map(function(I){var C=I.open,R=I.close;return C===R?C:C+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(I){return I&&I!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var P=function(I){var C=b[I].trim(),R=I,M=Hi(f,function(L){var W=L.open;return W===C}),V=Hi(f,function(L){var W=L.close;return W===C});if(M){if(R=HK(M,b,I,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(I,R+1).join("")),I=R,a)?(N=I,"break"):(N=I,"continue")}else if(V&&!W2(V,b,I)){var z=ibe(f);return z.splice(f.indexOf(V),1),{value:Y2(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:z})}}else if(abe(C,i)&&!s)return T(),a?(N=I,"break"):(N=I,"continue");R===-1&&(R=x-1),S.push(b.slice(I,R+1).join("")),I=R,N=I},N,D=0;D<x;++D){var O=P(D);if(D=N,typeof O=="object")return O.value;if(O==="break")break}return S.length&&w.push(S.join("")),w}function iu(t){return Y2(t,"")}function bd(t){return Y2(t,",")}function KK(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function L0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function obe(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function cw(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function qv(){return Date.now?Date.now():new Date().getTime()}function Al(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Hi(t,e,n){var r=Al(t,e);return r>-1?t[r]:n}var WK=(function(){var t=qv(),e=GK&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=qv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),lbe=(function(){var t=GK&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function kl(t){return Object.keys(t)}function cbe(t){var e=kl(t);return e.map(function(n){return t[n]})}function en(t,e){var n=L0(t),r=n.value,i=n.unit;if(Cs(e)){var a=e[i];if(a){if(K2(a))return a(r);if(tx[i])return tx[i](r,a)}}else if(i==="%")return r*e/100;return tx[i]?tx[i](r):r}function dP(t,e,n){return Math.max(e,Math.min(t,n))}function HV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ot(e[0],ir),ot(e[0]/r,ir)],[ot(e[1]*r,ir),ot(e[1],ir)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ot(o,ir);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function YK(t,e,n,r){if(!r)return t.map(function(v,b){return dP(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=HV(t,e,!1,s),c=o[0],u=o[1],f=HV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function ube(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function fP(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Kn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function dbe(t){return[0,1].map(function(e){return fP(t.map(function(n){return n[e]}))})}function KV(t){var e=dbe(t),n=Kn(e,t[0]),r=Kn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function pl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ot(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function WV(t,e){return t.forEach(function(n,r){t[r]=ot(t[r],e)}),t}function fbe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function XK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function QK(t,e){t.indexOf(e)===-1&&t.push(e)}function mr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function ZK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function JK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function qr(t,e,n,r){t.addEventListener(e,n,r)}function fr(t,e,n,r){t.removeEventListener(e,n,r)}function Qp(t){return t?.ownerDocument||nbe}function X2(t){return Qp(t).documentElement}function mu(t){return Qp(t).body}function Kc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function eW(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Zp(t){return Cs(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var hbe=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),pbe=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),gbe=typeof Map=="function",mbe=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function vbe(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new mbe;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var ybe=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=vbe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function V0(t,e,n){var r=gbe?Map:n?pbe:hbe,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,S=0;return c.forEach(function(T,P){f.set(T,P)}),u.forEach(function(T,P){h.set(T,P)}),c.forEach(function(T,P){var N=h.get(T);typeof N>"u"?(++S,s.push(P)):b[N]=S}),u.forEach(function(T,P){var N=f.get(T);typeof N>"u"?(a.push(P),++w):(o.push([N,P]),S=b[P]||0,g.push([N-S,P-w]),v.push(P===N),N!==P&&x.push([N,P]))}),s.reverse(),new ybe(t,e,a,s,x,o,g,v)}var bbe=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=V0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),hP=function(t,e){return hP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},hP(t,e)};function B0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ho=function(){return ho=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ho.apply(this,arguments)};function tW(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function XV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function nW(t){var e=[];return t.forEach(function(n){e=e.concat(cr(n)?nW(n):n)}),e}function ek(t,e){if(!e)return t;for(var n in e)ZS(t[n])&&(t[n]=e[n]);return t}function i1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function QV(t){var e=t.className,n=tW(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function ZV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function JS(t){if(!t)return null;var e=t.b;return Zp(e)?e:JS(t.c)}function rW(t){var e=t.parentNode;e&&e.removeChild(t)}function iW(t){t.forEach(function(e){e()})}function xbe(){return this.constructor(this.props,this.context)}var Q2=0,e_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=cbe(r).filter(function(b){return b.$_req}),f=nW(u.map(function(b){return b.$_subs})),h=Hi(f,function(b){return b.d===c});if(o.b&&!Gi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){F0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Gi(i)||(o.ps=i.props,o.ref=i.ref),Z2(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function aW(){return Object.__CROACT_CURRENT_INSTNACE__}function wbe(){return Q2}function Sbe(t){Q2=t}function Z2(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Q2=0,t}var J2=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=ho(ho({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=F0(a.c,[a],[a.o],i,a._cs,ho(ho({},this.state),this.$_state),r);s&&(n&&i.push(n),iW(i),Z2(null))},t})(),sW=(function(t){B0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return i1(this.props,r)||i1(this.state,i)},e})(J2);function oW(t){var e=function(n){e.current=n};return e.current=t,e}function _be(t){return t._fr=!0,t}function Ebe(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new J2(e,n),a.constructor=t,t._fr?(r.fr=oW(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=xbe),a.$_p=r,a}var Tbe=(function(t){B0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,ek(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(ek(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=ek(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=Ebe(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=ho(ho({},i),v.$_cs);F0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(e_);function Abe(t,e,n){var r=eO(QV(t),QV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function kbe(t,e,n){var r=eO(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function eO(t,e){var n=kl(t),r=kl(e),i=V0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function Cbe(t,e,n){var r=n.style,i=eO(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=cw(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=cw(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=cw(c,"-");r.removeProperty(h)}}function Ibe(t){return t.replace(/^on/g,"").toLowerCase()}var Pbe=(function(t){B0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=Ibe(r);i?(fr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},qr(o,c,s[r]))},n.s=function(r){return i1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=JS(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Qp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}F0(o,o._ps,u.children,r,i);var x=o.b,w=ZV(a),S=w[0],T=w[1],P=ZV(u),N=P[0],D=P[1];return Abe(S,N,x),kbe(T,D,o),Cbe(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)fr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||rW(a)},e})(e_);function Gv(t){if(!t||Zp(t))return t;var e=t.$_p._ps;return e.length?Gv(e[0].b):null}function lW(t){if(t){if(t.b&&Zp(t.b))return t;var e=t._ps;return e.length?lW(e[0]):null}}function Es(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=tW(i,["key","ref"]);return{type:t,key:a,ref:s,props:ho(ho({},o),{children:XK(n).filter(function(c){return c!=null&&c!==!1})})}}var cW=(function(t){B0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(e_),Nbe=(function(t){B0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=JS(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Qp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){rW(this.b)},e})(e_);function Dbe(t,e,n){var r=n.map(function(c){return Gi(c)?null:c.key}),i=XV(e.map(function(c){return c.k})),a=XV(r),s=V0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Gv(h.b),v=Gv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,JV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Gi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,JV(f,r[u],u,t)),!0):(h.i=u,!1)});return YV(YV([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Obe(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Gv(n[i].b);if(a)return a}return null}function JV(t,e,n,r){var i=r.d+1;if(Gi(t)||bp(t))return new Nbe("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?Pbe:Tbe;return new s(a,i,e,n,r,t.ref,t.props)}function F0(t,e,n,r,i,a,s){var o=Dbe(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=lW(h);g&&(g._sel=!0)}),t._hyd=null;var f=JS(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=Gv(g.b);if(v&&f!==v&&!v.parentNode){var b=Obe(t,g);f.insertBefore(v,b)}}),u.length>0}function Rbe(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new cW(e));var a=[];return F0(n,n._ps,t?[t]:[],a,r,void 0,void 0),iW(a),Z2(null),i||(e.__CROACT__=n),n}function eB(t,e,n){return!n&&t&&(n=new cW(e.parentElement),n._hyd=[e],n._sel=!0),Rbe(t,e,n),n}function uW(t){var e=aW(),n=e._hs||(e._hs=[]),r=wbe(),i=n[r];if(Sbe(r+1),i){if(!i1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Mbe(t,e){var n=uW({func:t,deps:e});return n.value}function jbe(t){return Mbe(function(){return oW(t)},[])}function dW(t,e,n){var r=aW(),i=uW({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function zbe(t,e,n){dW(function(){t?.(e())},n,!0)}function tO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function fW(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function hW(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function nO(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Lbe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Vbe(t,e){var n=nO("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function pP(t){return t.replace(/_/g,".")}function $m(t,e){var n=null,r="-1";return tO(t,function(i){var a=nO("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Vbe(i.versionTest.toLowerCase(),e)||r),r=pP(r),!0)}),{preset:n,version:r}}function nx(t,e){var n={brand:"",version:"-1"};return tO(t,function(r){var i=pW(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function pW(t,e){return fW(t,function(n){var r=n.brand;return nO(""+e.test,r.toLowerCase())})}var gW=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],mW=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],gP=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],vW=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],yW=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function bW(t){return!!$m(vW,t).preset}function Bbe(t){var e=hW(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:bW(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=$m(gW,e),s=a.preset,o=a.version,c=$m(yW,e),u=c.preset,f=c.version,h=$m(mW,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=$m(gP,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Fbe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!nx(vW,n).brand||bW(hW())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&tO(gP,function(g){return pW(n,g)});var c=nx(mW,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=nx(gP,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=fW(yW,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=nx(gW,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=pP(o.version),s.version=pP(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function Ube(t){return Lbe()?Fbe():Bbe(t)}function $be(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function qbe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function Gbe(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function xW(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ko(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=fn(e),i=0;i<e;++i){var a=e*i+i;if(!ot(n[a],ir)){for(var s=i+1;s<e;++s)if(n[e*i+s]){qbe(n,r,i,s,e);break}}if(!ot(n[a],ir))return[];Gbe(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ot(u,ir)||i===s||$be(n,r,o,i,e,-u)}}return r}function Hbe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function wW(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Kbe(t,e){for(var n=fn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Gd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Is(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=fn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function a1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=fn(t);return e.forEach(function(i){r=tn(r,i,t)}),r}function tn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Pt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Wbe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function SW(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ci(t,e,n){n===void 0&&(n=e.length);var r=tn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function Ybe(t,e){return tn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Xbe(t,e){return tn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Qbe(t,e){return tn(t,$0(e,4))}function rx(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return tn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function U0(t,e){return ci($0(e,3),Gd(t,3))}function tk(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return tn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function tB(t,e){return tn(t,e,4)}function $0(t,e){var n=Math.cos(t),r=Math.sin(t),i=fn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function fn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function rO(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Hd(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function iO(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],P=a[1],N=s[0],D=s[1],O=o[0],I=o[1],C=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-P*f,-N*g,-D*g,-O*b,-I*b,-w*u,-S*u,-T*h,-P*h,-N*v,-D*v,-O*x,-I*x],R=ko(C,8);if(!R.length)return[];var M=tn(R,[w,S,T,P,N,D,O,I],8);return M[8]=1,Is(Hbe(M),3,4)}var dv=function(){return dv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dv.apply(this,arguments)};function Zbe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Hv(t,e){return e===void 0&&(e=0),_h(xp(t,e))}function Jbe(t,e){var n=ci(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function _h(t){var e=Zbe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function xp(t,e){e===void 0&&(e=0);var n=cr(t)?t:iu(t);return n.map(function(r){var i=KK(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Cs(e)?dv(dv({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=bd(s).map(function(L,W){return W===0&&"x%"in f?f["%"]=e["x%"]:W===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],en(L,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=tk,u=[g,b,w]}else if(a==="translateY"){var S=Cs(e)?dv({"%":e["y%"]},e):{"%":e},b=en(s,S);o=tk,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=tk,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=bd(s).map(function(L){return parseFloat(L)}),P=T[0],N=T[1],D=N===void 0?P:N,O=T[2],I=O===void 0?1:O;o=rx,u=[P,D,I]}else if(a==="scaleX"){var P=parseFloat(s);o=rx,u=[P,1,1]}else if(a==="scaleY"){var D=parseFloat(s);o=rx,u=[1,D,1]}else if(a==="scaleZ"){var I=parseFloat(s);o=rx,u=[1,1,I]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=L0(s),R=C.unit,M=C.value,V=R==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Qbe):a==="rotateX"?o=Ybe:a==="rotateY"&&(o=Xbe),u=V}else if(a==="matrix3d")o=tB,u=bd(s).map(function(L){return parseFloat(L)});else if(a==="matrix"){var z=bd(s).map(function(L){return parseFloat(L)});o=tB,u=[z[0],z[1],0,0,z[2],z[3],0,0,0,0,1,0,z[4],z[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var mP=function(t,e){return mP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},mP(t,e)};function exe(t,e){mP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _W=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),EW=(function(t){exe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,_W)||this}return e})(bbe);function txe(t,e){return V0(t,e,_W)}var vP=function(){return vP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vP.apply(this,arguments)};function nxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var t_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Cs(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Cs(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=Al(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,nxe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(vP({listener:r},i))},t})();var yP=function(t,e){return yP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},yP(t,e)};function rxe(t,e){yP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Dh=function(){return Dh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dh.apply(this,arguments)};function ixe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function nB(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function ix(t){if(t){if(Gi(t))return document.querySelector(t)}else return null;if(K2(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var axe=(function(t){rxe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=ix(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Dh(Dh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?ixe:s;return o({container:ix(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=qv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:ix(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Dh(Dh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?nB:i,s=ix(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=nB(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(t_);function sxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Mi(t){return ot(t,ir)}function oxe(t,e){return t.every(function(n,r){return Mi(n-e[r])===0})}function lxe(t,e){return!Mi(t[0]-e[0])&&!Mi(t[1]-e[1])}function TW(t){return t.length<3?0:Math.abs(ube(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function rB(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Kd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Kd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function bP(t,e,n){var r=t[0],i=t[1],a=Kd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=s1(c[0],c[1]),f=xP(e),h=[];if(f.forEach(function(b){var x=s1(b[0],b[1]),w=b[0];if(oxe(u,x))h.push({pos:t,line:b,type:"line"});else{var S=AW(aO(u,x),[c,b]);S.forEach(function(T){b.some(function(P){return lxe(P,T)})?h.push({pos:T,line:b,type:"point"}):Mi(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Hi(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Hi(S,function(D){return D[1]!==i}),P=v[x[0]],N=T[1]>i?1:-1;P?P!==N&&++g:v[x[0]]=N}}}),g%2===1}function s1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ir&&(s=0),Math.abs(o)<ir&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function aO(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function AW(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Mi(a-t[1][0])){if(!Mi(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Mi(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Mi(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=Mi(g-b[0][0])&&0<=Mi(b[0][1]-g)&&0<=Mi(v-b[1][0])&&0<=Mi(b[1][1]-v)})})),r.map(function(h){return[Mi(h[0]),Mi(h[1])]})}function xP(t){return sxe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function cxe(t,e){var n=t.slice(),r=e.slice();KV(n)===-1&&n.reverse(),KV(r)===-1&&r.reverse();var i=xP(n),a=xP(r),s=i.map(function(f){return s1(f[0],f[1])}),o=a.map(function(f){return s1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=aO(f,b),S=AW(w,[g,a[x]]);v.push.apply(v,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return pl(g[0],b.pos)-pl(g[0],x.pos)}),c.push.apply(c,v),bP(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(bP(f[1],n)){var g=!1,v=Al(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=Al(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function uxe(t,e){var n=cxe(t,e);return n.map(function(r){var i=r.pos;return i})}function dxe(t,e){var n=uxe(t,e);return TW(n)}var wP=function(t,e){return wP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wP(t,e)};function fxe(t,e){wP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tr.apply(this,arguments)};function hxe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function nk(t){return hxe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function pxe(t){return t.touches&&t.touches.length>=2}function ax(t){return t?t.touches?mxe(t.touches):[kW(t)]:[]}function gxe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function iB(t,e,n){var r=n.length,i=fv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=fv(e,r),f=u.clientX,h=u.clientY,g=fv(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function rk(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mxe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(kW(t[r]));return n}function kW(t){return{clientX:t.clientX,clientY:t.clientY}}function fv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ik=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),nk(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),nk(e)-nk(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=iB(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=iB([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=fv(e,this.length),i=fv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),rk(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),rk(e)/rk(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),aB=["textarea","input"],vxe=(function(t){fxe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,P=x.preventRightClick,N=x.preventDefault,D=x.checkInput,O=x.dragFocusedInput,I=x.preventClickEventOnDragStart,C=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,M=i._useTouch,V=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||P&&(g.which===3||g.button===2))return i.stop(),!1;if(V){var z=i._window.document.activeElement,L=g.target;if(L){var W=L.tagName.toLowerCase(),Q=aB.indexOf(W)>-1,G=L.isContentEditable;if(Q||G){if(D||!O&&z===L)return!1;if(z&&(z===L||G&&z.isContentEditable&&z.contains(L)))if(O)L.blur();else return!1}else if((N||g.type==="touchstart")&&z){var Y=z.tagName.toLowerCase();(z.isContentEditable||aB.indexOf(Y)>-1)&&z.blur()}(I||C||R)&&qr(i._window,"click",i._onClick,!0)}i.clientStores=[new ik(ax(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=qv()-i.prevTime<200,i._isMouseEvent=gxe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",tr(tr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&g.preventDefault()}if(!i.flag)return!1;var ee=0;if(V?(i._attchDragEvent(),M&&S&&(ee=setTimeout(function(){qr(w,"touchstart",i.onDragStart,{passive:!1})}))):M&&S&&fr(w,"touchstart",i.onDragStart),i.flag&&pxe(g)){if(clearTimeout(ee),V&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=ax(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",tr(tr({},w),{isScroll:!!v,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,S=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,P=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!P&&i._allowClickEvent(),i._useTouch&&b&&fr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var N=g?.touches?ax(g):[],D=N.length;D===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ik(N));var O=i._getPosition(),I=qv(),C=!P&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=P||C?0:I,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",tr({data:i.data,datas:i.data,isDouble:C,isDrag:P,isClick:!P,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},O)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){fr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=eW(s)?s:Kc(s),i.options=tr({checkInput:!1,container:s&&!("document"in s)?Kc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){qr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){qr(g,"mousedown",i.onDragStart),qr(g,"mousemove",i._passCallback)}),qr(c,"contextmenu",i._onContextMenu)),f&&qr(Kc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){qr(g,"touchstart",i.onDragStart,h),qr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),tr(tr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),fr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){fr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){fr(a,"mousedown",n.onDragStart)}),fr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){fr(a,"touchstart",n.onDragStart)}),fr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ik(ax(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",tr(tr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",tr(tr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",tr(tr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),tr(tr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return tr(tr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(qr(r,"dragover",this.onDrag,i),qr(n,"dragend",this.onDragEnd)),this._useMouse&&(qr(r,"mousemove",this.onDrag),qr(n,"mouseup",this.onDragEnd)),this._useTouch&&(qr(r,"touchmove",this.onDrag,i),qr(n,"touchend",this.onDragEnd,i),qr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(fr(r,"dragover",this.onDrag),fr(n,"dragend",this.onDragEnd)),this._useMouse&&(fr(r,"mousemove",this.onDrag),fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(fr(r,"touchstart",this.onDragStart),fr(r,"touchmove",this.onDrag),fr(n,"touchend",this.onDragEnd),fr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(t_);function yxe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var bxe=yxe;function xxe(t){return bxe(t).toString(36)}function wxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Sxe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?bd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function _xe(t,e,n,r,i){var a=Qp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Sxe(t,e,n),(i||a.head||a.body).appendChild(s),s}function Exe(t){var e="rCS"+xxe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=wxe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=_xe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var SP=function(){return SP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},SP.apply(this,arguments)};function Txe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CW(t,e){var n=Exe(e),r=n.className;return _be(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Txe(i,["className","cspNonce"]),u=jbe();return zbe(a,function(){return u.current},[]),dW(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Es(t,SP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var _P=function(t,e){return _P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_P(t,e)};function q0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_P(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)};function Axe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kxe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Cxe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Re(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function G0(t,e){return ae({events:[],props:[],name:t},e)}var Ixe=["n","w","s","e"],sO=["n","w","s","e","nw","ne","sw","se"];function Pxe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Nxe(t){var e=Pxe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Jp=Ube(),IW=Jp.browser.webkit,PW=IW&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),NW=Jp.browser.name,DW=parseInt(Jp.browser.version,10),Dxe=NW==="chrome",Oxe=Jp.browser.chromium,Rxe=parseInt(Jp.browser.chromiumVersion,10)||0,Mxe=Dxe&&DW>=109||Oxe&&Rxe>=109,jxe=NW==="firefox",zxe=parseInt(Jp.browser.webkitVersion,10)>=612||DW>=15,oO="moveable-",Lxe=sO.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),Vxe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Lxe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Nxe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(PW?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Bxe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],EP=1e-4,Ei=1e-7,sx=1e-9,TP=Math.pow(10,10),sB=-TP,Fxe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},lO={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},OW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},RW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function H0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ae(ae({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var wp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ae(ae({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Hh(t,e,n,r){var i=t.length===16,a=i?4:3,s=df(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),T=S[0],P=S[1],N=le(En(t,e,a),2),D=N[0],O=N[1],I=Math.min(u,g,x,T),C=Math.min(f,v,w,P),R=Math.max(u,g,x,T),M=Math.max(f,v,w,P);u=u-I||0,g=g-I||0,x=x-I||0,T=T-I||0,f=f-C||0,v=v-C||0,w=w-C||0,P=P-C||0,D=D-I||0,O=O-C||0;var V=t[0],z=t[a+1],L=vi(V*z);return{left:I,top:C,right:R,bottom:M,origin:[D,O],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[T,P],direction:L}}function MW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(tt(Ep(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(Oo({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function uf(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=ko(i,v),n.inverseBeforeMatrix=ko(a,v),n.absoluteOrigin=Gd(Pt([o,c],u),v),n.startDragBeforeDist=ci(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=ci(n.inverseMatrix,n.absoluteOrigin,v)}function Uxe(t){return Hh(t.datas.beforeTransform,[50,50],100,100).direction}function n_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=Al(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Hi(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=p1e(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Re(Re([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function r_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function $xe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(zW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=jW(e,Kbe([a,s],4));return ci(o,Gd([0,0,0],4),4)}function jW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?tn(o,e,4):tn(e,o,4),u=tn(ko(n?a:r,4),c,4),f=tn(u,ko(n?s:i,4),4);return f}function zW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return tt(ci(i,Pt(o,[n,r]),c),s)}function Oo(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return tt(ci(e?a:s,Pt(f,[r,i]),h),e?c:u)}function qxe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return tt(ci(a,Pt(o,[r,i]),u),c)}function Gxe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=L0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function LW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Hxe(t,e){return LW(e).map(function(n){return t[n]})}function ak(t,e){var n=(e+1)/2;return[r1(t[0][0],t[1][0],n,1-n),r1(t[0][1],t[1][1],n,1-n)]}function vr(t,e){var n=ak([t[0],t[1]],e[0]),r=ak([t[2],t[3]],e[0]);return ak([n,r],e[1])}function Kxe(t,e,n,r,i,a){var s=df(e,n,r,i),o=vr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function K0(t,e,n,r){return tn(t,pv(e,r,n),r)}function Wxe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Gi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Is(Hv(n),4,o):c=Is(tn(tn(u,Hv([n]),4),f,4),4,o)}else c=n;return K0(a,c,i,o)}function Yxe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return K0(r,tn(s||a,rO(e,o),o),n,o)}function i_(t,e){var n=eg(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=cr(r)?r:iu(r),AP(t,e,i)},setTransformIndex:function(r){AP(t,e,r)}}}function a_(t,e,n){var r=eg(e),i=r.startTransforms;AP(t,e,Al(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function AP(t,e,n){var r=eg(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=xp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function cO(t,e){var n=eg(t);n.nextTransforms=iu(e)}function eg(t){return t.originalDatas.beforeRenderable}function o1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function ox(t){return(o1(t)||[]).join(" ")}function lx(t){return eg(t).nextStyle}function VW(t,e,n,r,i){cO(i,e);var a=mi.drag(t,H0(i,t.state,n,r)),s=a?a.transform:e;return ae(ae({transform:e,drag:a},wi({transform:s},i)),{afterTransform:s})}function uO(t,e,n,r,i,a){var s=Wxe(t.state,i,e,a),o=Zxe(t,n,r,s);return o}function BW(t,e,n,r,i,a,s){var o=uO(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=tt(r,o);return tt(b,[g,v])}function Xxe(t,e,n,r,i,a,s){var o=BW(t,e,n,r,i,a,s);return o}function Qxe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Zxe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return En(r,u,c)}function Jxe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return BW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function ewe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=Gxe(i,e,n,h,g,c),P=s?v:0,N=s?b:0,D=K0(u,w,T,S),O=Kxe(r,D,e,n,S,x);return tt(O,[P,N])}function twe(t,e){return vr(qa(t.state),e)}function nwe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function rwe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function iwe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function FW(t,e,n){for(var r=t,i=[],a=X2(t)||mu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=Wv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Ki(r),S=w("position"),T=dY(r),P=S==="fixed",N=iwe(w),D=Wbe(t1e(T)),O=void 0,I=!1,C=!1,R=0,M=0,V=0,z=0,L={hasTransform:!1,fixedContainer:null};P&&(v=!0,L=s1e(r),b=L.fixedContainer);var W=D.length;!c&&(W===16||N.length)&&(c=!0,u=4,DP(i),g&&(g=Is(g,3,4))),c&&W===9&&(D=Is(D,3,4));var Q=a1e(r,t),G=Q.tagName,Y=Q.hasOffset,J=Q.isSVG,ee=Q.origin,X=Q.targetOrigin,U=Q.offset,Z=le(U,2),te=Z[0],K=Z[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:o1e(r,u)}),i.push({type:"offset",target:r,matrix:fn(u)}));var ue=parseFloat(w("zoom"))||1;if(P)O=L.fixedContainer,I=!0;else{var ie=Wv(r,e,!1,!0,w),oe=ie.offsetZoom;if(O=ie.offsetParent,I=ie.isEnd,C=ie.isStatic,x*=oe,(ie.isCustomElement||oe!==1)&&C)te-=O.offsetLeft,K-=O.offsetTop;else if(jxe||Mxe){var Se=ie.parentSlotElement;if(Se){for(var se=O,Ae=0,ve=0;se&&rwe(se);)Ae+=se.offsetLeft,ve+=se.offsetTop,se=se.offsetParent;te-=Ae,K-=ve}}}if(IW&&!zxe&&Y&&!J&&C&&(S==="relative"||S==="static")&&(te-=O.offsetLeft,K-=O.offsetTop,s=s||I),P)Y&&L.hasTransform&&(V=O.clientLeft,z=O.clientTop);else if(Y&&b!==O&&(R=O.clientLeft,M=O.clientTop),Y&&O===a){var ne=fY(r,!1);te+=ne[0],K+=ne[1]}if(i.push({type:"target",target:r,matrix:pv(D,u,ee)}),N.length&&(i.push({type:"offset",target:r,matrix:fn(u)}),i.push({type:"target",target:r,matrix:pv(Hv(N),u,ee)})),Y){var Pe=r===t,be=Pe?0:r.scrollLeft,_e=Pe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Hd([te-be+R-V,K-_e+M-z],u)})}else i.push({type:"offset",target:r,origin:ee});if(ue!==1&&i.push({type:"zoom",target:r,matrix:pv(rO([ue,ue],u),u,[0,0])}),g||(g=D),f||(f=ee),h||(h=X),o||P)break;r=O,s=I,(!n||r===a)&&(o=s)}return g||(g=fn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var dd=null,fd=null,Oh=null;function Sp(t){t?(window.Map&&(dd=new Map,fd=new Map),Oh=[]):(dd=null,Oh=null,fd=null)}function awe(t){var e=fd?.get(t);if(e)return e;var n=gv(t,!0);return fd&&fd.set(t,n),n}function swe(t,e){if(Oh){var n=Hi(Oh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=FW(t,e,!0);return Oh&&Oh.push([[t,e],r]),r}function Ki(t){var e=dd?.get(t);if(!e){var n=Kc(t).getComputedStyle(t);if(!dd)return function(a){return n[a]};e={style:n,cached:{}},dd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Ts(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ae(ae({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function sk(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=Ts(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var S=g[w],T=S.state,P=T.gestos,N=x;if(o)N=new wp(s).dragStart(r,x),v.push(N);else{if(P[s]||(P[s]=f.childGestos[w]),!P[s])return;N=H0(x,T,r,u,a,s),v.push(N)}var D=e[n](S,ae(ae({},N),{parentFlag:!0}));return c&&(P[s]=null),D});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function gl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=Ts(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,ae(ae({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function l1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||qa(e.state),o=vr(s,i),c=le(ci($0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function UW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Wd(t.props,e).zoom,u=hv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=vi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=lO[S];if(!T||!f[S])return null;g[S]=!0;var P=(ot(u,15)+v*OW[S]+720)%180,N={};return kl(x).forEach(function(D){N["data-".concat(D)]=x[D]}),r.createElement("div",ae({className:Ze.apply(void 0,Re(["control","direction",S,e],le(w),!1)),"data-rotation":P,"data-direction":S},N,{key:"direction-".concat(S),style:f1.apply(void 0,Re([s,c],le(T.map(function(D){return a[D]})),!1))}))})}function $W(t,e,n,r){var i=Wd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?sO:s;return Re(Re([],le(o?KW(t,r,n,c):[]),!1),le(UW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Kv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Kn(n,r),u=e?ot(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ze.apply(void 0,Re(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Gm(n,r,i,c)})}function qW(t,e,n,r,i){var a=n===!0?Ixe:n;return a.map(function(s,o){var c=le(lO[s],2),u=c[0],f=c[1];if(f!=null)return Kv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function GW(t){return function(e,n){var r=Wd(e.props,t).edge;return r&&(r===!0||r.length)?Re(Re([],le(qW(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(owe(e,t,n)),!1):HW(e,t,n)}}function HW(t,e,n){return $W(t,sO,e,n)}function owe(t,e,n){return $W(t,["nw","ne","sw","se"],e,n)}function KW(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=vi(c),g=o/Math.PI*180;return(r||kl(u)).map(function(v){var b=lO[v];if(!b)return null;var x=(ot(g,15)+h*OW[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Ze.apply(void 0,Re([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:f1.apply(void 0,Re([o,f],le(b.map(function(S){return s[S]})),!1))})})}function dO(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:oB(b,e,!0),horizontal:oB(b,n,!1)}}function s_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,S=w===void 0?-1/0:w,T=v.top,P=T===void 0?-1/0:T,N=v.right,D=N===void 0?x?-1/0:1/0:N,O=v.bottom,I=O===void 0?x?-1/0:1/0:O;return x&&(D=a+h-u-D,I=i+g-f-I),{left:S+u-s,right:D+u-s,top:P+f-o,bottom:I+f-o}}function lwe(t,e,n){var r=s_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(tt(n,e),2),g=h[0],v=h[1];Ie(g)<Ei&&(g=0),Ie(v)<Ei&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=v/g,P=n[1]-T*u,N=0,D=0,O=!1;x&&s<=u?(N=T*s+P,D=s,O=!0):!x&&u<=i&&(N=T*i+P,D=i,O=!0),O&&(N<a||N>o)&&(O=!1),O||(b&&o<=f?(N=o,D=(N-P)/T,O=!0):!b&&f<=a&&(N=a,D=(N-P)/T,O=!0)),O&&(w.isBound=!0,w.pos=D,w.offset=u-D,S.isBound=!0,S.pos=N,S.offset=f-N)}return{vertical:w,horizontal:S}}function oB(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ie(u.offset)-Ie(c.offset)})}function lB(t,e,n){var r=n?t.map(function(i){return U0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ie(i[0]-e.left)>.1||i[0]>e.right&&Ie(i[0]-e.right)>.1||i[1]<e.top&&Ie(i[1]-e.top)>.1||i[1]>e.bottom&&Ie(i[1]-e.bottom)>.1})}function cwe(t,e,n){var r=$a(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ie(a-t[n?0:1])-Ie(s-t[n?0:1])}).map(function(a){return Kn([0,0],n?[a,e]:[e,a])})}function uwe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=s_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!lB(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(S){var T=le(S,2),P=T[0],N=T[1];n.forEach(function(D){var O=Kn([0,0],D);w.push.apply(w,Re([],le(cwe(D,P,N).map(function(I){return a+I-O}).filter(function(I){return!lB(e,x,I)}).map(function(I){return ot(I*180/Math.PI,Ei)})),!1))})}),w}var dwe=["left","right","center"],fwe=["top","bottom","middle"],cB={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},au={start:"left",end:"right",center:"center"},su={start:"top",end:"bottom",center:"middle"};function Rh(){return{left:!1,top:!1,right:!1,bottom:!1}}function tg(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function fO(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function hwe(t,e){var n=fO(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function hO(t,e){var n=hwe(t,e),r=fwe.filter(function(a){return a in n}),i=dwe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function pwe(t,e,n){var r=En(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function gwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ir&&(i=0),Math.abs(a)<ir&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ot(u,ir)})}var WW="snapRotationThreshold",YW="snapRotationDegrees",XW="snapHorizontalThreshold",QW="snapVerticalThreshold";function o_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=EB(s,c[XW],5),h=EB(a,c[QW],5);return ZW(t.state.guidelines,e,n,r,i,f,h,u)}function ZW(t,e,n,r,i,a,s,o){return{vertical:dB(t,"vertical",e,s*o[0],r),horizontal:dB(t,"horizontal",n,a*o[1],i)}}function mwe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(tt(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=h1(f),h=h1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=o_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(G){var Y=G.pos;return v?Y>=o:Y<=o}),T.posInfos.filter(function(G){var Y=G.pos;return g?Y>=c:Y<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var P=kP(S),N=P.isSnap,D=P.guideline,O=kP(T),I=O.isSnap,C=O.guideline,R=I?C.pos[1]:0,M=N?D.pos[0]:0;if(f===0)I&&(x.isSnap=!0,x.pos=C.pos[1],x.offset=a-x.pos);else if(h===0)N&&(b.isSnap=!0,b.pos=M,b.offset=i-M);else{var V=h/f,z=n[1]-V*i,L=0,W=0,Q=!1;N?(W=M,L=V*W+z,Q=!0):I&&(L=R,W=(L-z)/V,Q=!0),Q&&(b.isSnap=!0,b.pos=W,b.offset=i-W,x.isSnap=!0,x.pos=L,x.offset=a-L)}return{vertical:b,horizontal:x}}function Lc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function uB(t,e,n,r){var i=hO(t.props.snapDirections,e),a=o_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Lc(c)}),i.horizontalNames.map(function(c){return Lc(c)}),n,r),s=Lc(i.horizontalNames[a.horizontal.index]),o=Lc(i.verticalNames[a.vertical.index]);return{vertical:ae(ae({},a.vertical),{direction:o}),horizontal:ae(ae({},a.horizontal),{direction:s})}}function kP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function dB(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ie(S),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function vwe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Re([],le(Hxe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return vr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=o_(t,o,c,a.map(function(g){return Lc(g[0])}),a.map(function(g){return Lc(g[1])}),r,i),f=Lc(a.map(function(g){return g[0]})[u.vertical.index]),h=Lc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ae(ae({},u.vertical),{direction:f}),horizontal:ae(ae({},u.horizontal),{direction:h})}}function JW(t,e){var n=Ie(t.offset),r=Ie(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ei?1:r<Ei?-1:n-r}function c1(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return JW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function ywe(t,e,n){var r=[];if(n)Ie(e[0])!==1||Ie(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ie(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ie(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function eY(t,e){var n=fP([e[0][0],e[1][0]]),r=fP([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function pO(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ie(a)<Ei&&(a=0),Ie(s)<Ei&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function tY(t,e,n,r){return r===void 0&&(r=Ei),t.every(function(i){var a=pO(i,e),s=a<=0;return s===n||Ie(a)<=r})}function fB(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function bwe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(tY([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Vc(n,s,v,i),S=Vc(n,s,x,i),T=Vc(n,s,g,a),P=Vc(n,s,b,a),N=w.isBound&&S.isBound,D=w.isBound||S.isBound,O=T.isBound&&P.isBound,I=T.isBound||P.isBound,C=_p(w.offset,S.offset),R=_p(T.offset,P.offset),M=[0,0],V=!1,z=!1;return Ie(R)<Ie(C)?(M=[C,0],V=D,z=N):(M=[0,R],V=I,z=O),{isAllBound:z,isVerticalBound:D,isHorizontalBound:I,isBound:V,offset:M}}function Vc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=h1(h[1]-f[1]),v=h1(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var N=(f[1]-u[1])/w+u[0];return fB(N,f[0],h[0],r,i)}else{var T=f[1]-u[1],P=Ie(T)<=(i||0);return{isBound:P,offset:P?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return fB(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],P=Ie(T)<=(i||0);return{isBound:P,offset:P?T:0}}}return{isBound:!1,offset:0}}function nY(t,e,n){return e.map(function(r){var i=bwe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Oo({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function xwe(t,e,n){var r,i=gO(t,e,[0,0],!1).map(function(g){return ae(ae({},g),{multiple:g.multiple.map(function(v){return Ie(v)*2})})}),a=nY(t,i,n),s=c1(a,0),o=c1(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(qxe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function wwe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function gO(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=df(a,100,100,s?4:3),c=vr(o,[0,0]);return wwe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[vr(o,g),vr(o,v)],x=gwe(b),w=eY(c,b),S=w.vertical,T=w.horizontal,P=pO(c,b)<=0;return{multiple:h,centerSign:P,verticalSign:S,horizontalSign:T,lineConstants:x,line:[vr(e,g),vr(e,v)]}})}function hB(t,e,n,r){var i=r?t.map(function(a){return U0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=pO(n,a)<=0;return!tY(e,a,s)})}function Swe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ie(n[0]);if(!a)return Ie(n[1]);var s=a/i;return Ie((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function _we(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function Ewe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=vr(n,[0,0]);if(!hB(n,x,w,0))return[];var S=[],T=x.map(function(P){return[$a(P),Kn([0,0],P)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(P){var N=Kn([0,0],_we(P)),D=Swe(P);S.push.apply(S,Re([],le(T.filter(function(O){var I=le(O,1),C=I[0];return C&&D<=C}).map(function(O){var I=le(O,2),C=I[0],R=I[1],M=Math.acos(C?D/C:0),V=R+M,z=R-M;return[s+V-N,s+z-N]}).reduce(function(O,I){return O.push.apply(O,Re([],le(I),!1)),O},[]).filter(function(O){return!hB(e,x,w,O)}).map(function(O){return ot(O*180/Math.PI,Ei)})),!1))}),S}function Twe(t){var e=t.props.innerBounds,n=Rh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=vr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],S=[[f,h+v],[f+g,h+v]],T=gO(t,c,[0,0],!1),P=[],N=[];return T.forEach(function(D){var O=D.line,I=D.lineConstants,C=eY(u,O),R=C.horizontal,M=C.vertical,V=Vc(O,I,x,M,1,!0),z=Vc(O,I,S,M,1,!0),L=Vc(O,I,b,R,1,!0),W=Vc(O,I,w,R,1,!0);V.isBound&&!n.top&&(P.push(h),n.top=!0),z.isBound&&!n.bottom&&(P.push(h+v),n.bottom=!0),L.isBound&&!n.left&&(N.push(f),n.left=!0),W.isBound&&!n.right&&(N.push(f+g),n.right=!0)}),{boundMap:n,horizontal:P,vertical:N}}function Awe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ie(i)<ir&&(i=0),Ie(a)<ir&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function CP(t,e,n,r,i){var a=Awe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=pl(t,e),o=pl(a,t),c=pl(a,e),u=o>s||c>s,f=le(Oo({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function u1(t,e){return t.isBound?t.offset:e.isSnap?kP(e).offset:0}function kwe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var P=[];if(u&&f?P.push([0,w],[x,0]):u?P.push([x,0]):f?P.push([0,w]):g&&v?P.push([0,w],[x,0]):g?P.push([x,0]):v&&P.push([0,w]),P.length){P.sort(function(I,C){return $a(tt([s,o],I))-$a(tt([s,o],C))});var N=P[0];if(N[0]&&Ie(s)>ir)S=-N[0],T=o*Ie(s+S)/Ie(s)-o;else if(N[1]&&Ie(o)>ir){var D=o;T=-N[1],S=s*Ie(o+T)/Ie(D)-s}if(t&&f&&u)if(Ie(S)>ir&&Ie(S)<Ie(x)){var O=Ie(x)/Ie(S);S*=O,T*=O}else if(Ie(T)>ir&&Ie(T)<Ie(w)){var O=Ie(w)/Ie(T);S*=O,T*=O}else S=_p(-x,S),T=_p(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function Cwe(t,e,n,r,i,a){if(!tg(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=yO(a.absolutePoses,[e,n]),o=Fa(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(W){return W[1]}),vertical:s.map(function(W){return W[0]})},v=fO(t.props.snapDirections),b=hO(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=l_(t,i,b,g),w=x.vertical,S=x.horizontal,T=xwe(t,s,a),P=T.vertical,N=T.horizontal,D=w.isSnap,O=S.isSnap,I=w.isBound||P.isBound,C=S.isBound||N.isBound,R=_p(w.offset,P.offset),M=_p(S.offset,N.offset),V=le(kwe(r,[e,n],[I,C],[D,O],[R,M]),2),z=V[0],L=V[1];return[{isBound:I,isSnap:D,offset:z},{isBound:C,isSnap:O,offset:L}]}function l_(t,e,n,r){r===void 0&&(r=n);var i=dO(s_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:o_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=u1(a[0],c),h=u1(s[0],u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function pB(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=dO(e,n,r),c=o.horizontal,u=o.vertical,f=ZW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=u1(c[0],h),b=u1(u[0],g),x=Ie(v),w=Ie(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function Iwe(t,e,n,r){var i=Kn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function Pwe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=vr(e,c),h=vr(e,u),g=r?Nwe(t,f,h,i):l_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,S=g.vertical,T=S.offset,P=S.isBound,N=S.isSnap,D=tt(u,c);if(!T&&!b)return{isBound:P||x,isSnap:N||w,sign:D,offset:[0,0]};var O=Iwe(f,h,g,r);if(!O)return{sign:D,isBound:!1,isSnap:!1,offset:[0,0]};var I=O==="vertical",C=[0,0];return!r&&Ie(u[0])===1&&Ie(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?C=Oo({datas:a,distX:-T,distY:-b}):C=CP(f,h,-(I?T:b),I,a).offset,C=C.map(function(R,M){return R*(D[M]?2/D[M]:0)}),{sign:D,isBound:I?P:x,isSnap:I?N:w,offset:C}})}function gB(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Nwe(t,e,n,r){var i=lwe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:mwe(t,e,n),c=o.horizontal,u=o.vertical,f=gB(a,c),h=gB(s,u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function Dwe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,P=u.bottom,N=P===void 0?1/0:P;g.forEach(function(D){var O=D[0]!==a[0],I=D[1]!==a[1],C=vr(e,D),R=Kn(r,C)*360/Math.PI;if(I){var M=C.slice();(Ie(R-360)<2||Ie(R-180)<2)&&(M[1]=r[1]);var V=CP(r,M,(r[1]<C[1]?N:w)-C[1],!1,i),z=le(V.offset,2),L=z[1],W=V.isOutside;isNaN(L)||(h=c+(W?1:-1)*Ie(L))}if(O){var M=C.slice();(Ie(R-90)<2||Ie(R-270)<2)&&(M[0]=r[0]);var Q=CP(r,M,(r[0]<C[0]?T:b)-C[0],!0,i),G=le(Q.offset,1),Y=G[0],J=Q.isOutside;isNaN(Y)||(f=o+(J?1:-1)*Ie(Y))}})}return{maxWidth:f,maxHeight:h}}var mi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=$a(u),h=Kn(u,[0,0]);return[e.createElement("div",{className:Ze("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],uf(t,e),a_(t,e,"translate"),Qwe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=dt(t,e,ae({set:function(f){n.startValue=f}},i_(t,e))),u=r||Be(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){n_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,P=u?0:S.throttleDrag||f||0,N=r?0:S.throttleDragRotate||0,D=0,O=!1,I=!1,C=!1,R=!1;if(!r&&N>0&&(h||g)){var M=S.startDragRotate||0,V=ot(M+Kn([0,0],[h,g])*180/Math.PI,N)-M,z=g*Math.abs(Math.cos((V-90)/180*Math.PI)),L=h*Math.abs(Math.cos(V/180*Math.PI)),W=$a([L,z]);D=V*Math.PI/180,h=W*Math.cos(D),g=W*Math.sin(D)}if(!a&&!r&&!i){var Q=le(Cwe(t,h,g,N,!o&&c||s,n),2),G=Q[0],Y=Q[1];O=G.isSnap,I=G.isBound,C=Y.isSnap,R=Y.isBound;var J=G.offset,ee=Y.offset;h+=J,g+=ee}var X=Pt(zW({datas:n,distX:h,distY:g}),w),U=Pt($xe({datas:n,distX:h,distY:g}),w);WV(U,Ei),WV(X,Ei),N||(!O&&!I&&(U[0]=ot(U[0],P),X[0]=ot(X[0],P)),!C&&!R&&(U[1]=ot(U[1],P),X[1]=ot(X[1],P)));var Z=tt(X,w),te=tt(U,w),K=tt(te,b),ue=tt(Z,x);n.prevDist=te,n.prevBeforeDist=Z,n.passDelta=K,n.passDist=te;var ie=n.left+Z[0],oe=n.top+Z[1],Se=n.right-Z[0],se=n.bottom-Z[1],Ae=r_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(cO(e,Ae),t.state.dragInfo.dist=r?[0,0]:te,!(!r&&!T&&K.every(function(_e){return!_e})&&ue.some(function(_e){return!_e}))){var ve=t.state,ne=ve.width,Pe=ve.height,be=dt(t,e,ae({transform:Ae,dist:te,delta:K,translate:U,beforeDist:Z,beforeDelta:ue,beforeTranslate:X,left:ie,top:oe,right:Se,bottom:se,width:ne,height:Pe,isPinch:a},wi({transform:Ae},e)));return!r&&Be(t,"onDrag",be),be}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ae(ae({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=va(t,e,{});return!n&&Be(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=sk(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ae(ae({},o),{targets:t.props.targets,events:f}),g=Be(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ae(ae({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=sk(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ae({targets:t.props.targets,events:a},r);return Be(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=sk(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Be(t,"onDragGroupEnd",va(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function rY(t,e){var n=vr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Owe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=En(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function iY(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Qxe(e,i,a),c=En(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var mB=wO("resizable"),IP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:GW("resizable"),dragControlCondition:mB,viewClassName:xO("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=vY(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&uf(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Gi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=qa(t.state);function P(R){var M=rY(c.startPositions,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function N(R){var M=iY(t.state,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function D(R){c.minSize=[en("".concat(R[0]),0)||0,en("".concat(R[1]),0)||0]}function O(R){var M=[R[0]||1/0,R[1]||1/0];(!bp(M[0])||isFinite(M[0]))&&(M[0]=en("".concat(M[0]),0)||1/0),(!bp(M[1])||isFinite(M[1]))&&(M[1]=en("".concat(M[1]),0)||1/0),c.maxSize=M}T(b/x),P(u||[-h[0],-h[1]]),c.setFixedDirection=P,c.setFixedPosition=N,c.setMin=D,c.setMax=O;var I=dt(t,e,{direction:h,startRatio:c.ratio,set:function(R){var M=le(R,2),V=M[0],z=M[1];c.startWidth=V,c.startHeight=z},setMin:D,setMax:O,setRatio:T,setFixedDirection:P,setFixedPosition:N,setOrigin:function(R){c.transformOrigin=R},dragStart:mi.dragStart(t,new wp().dragStart([0,0],e))}),C=f||Be(t,"onResizeStart",I);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,C!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?I:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,P=r.prevHeight,N=r.minSize,D=r.maxSize,O=r.ratio,I=r.startOffsetWidth,C=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var M=t.state.is3d,V=r.startOffsetMatrix,z=r.startTransformOrigin,L=M?4:3,W=Hv(o1(e)),Q=Math.sqrt(W.length);L!==Q&&(W=Is(W,Q,L));var G=K0(V,W,z,L),Y=df(G,I,C,L);r.startPositions=Y,r.nextTargetMatrix=W,r.nextAllMatrix=G}var J=Wd(t.props,"resizable"),ee=J.resizeFormat,X=J.throttleResize,U=X===void 0?i?0:1:X,Z=J.parentMoveable,te=J.keepRatioFinally,K=r.direction,ue=K,ie=0,oe=0;!K[0]&&!K[1]&&(ue=[1,1]);var Se=O&&(s??J.keepRatio)||!1;function se(){var yt=r.fixedDirection,Bt=_Y(ue,Se,r,e);ie=Bt.distWidth,oe=Bt.distHeight;var Qr=ue[0]-yt[0]||Se?Math.max(I+ie,Ei):I,ze=ue[1]-yt[1]||Se?Math.max(C+oe,Ei):C;return Se&&I&&C&&(R?ze=Qr/O:Qr=ze*O),[Qr,ze]}var Ae=le(se(),2),ve=Ae[0],ne=Ae[1];g||(r.setFixedDirection(r.fixedDirection),Be(t,"onBeforeResize",dt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(yt){var Bt;return r.setFixedDirection(yt),Bt=le(se(),2),ve=Bt[0],ne=Bt[1],[ve,ne]},setFixedPosition:function(yt){var Bt;return r.setFixedPosition(yt),Bt=le(se(),2),ve=Bt[0],ne=Bt[1],[ve,ne]},boundingWidth:ve,boundingHeight:ne,setSize:function(yt){var Bt;Bt=le(yt,2),ve=Bt[0],ne=Bt[1]}},!0)));var Pe=o;o||(!i&&a?Pe=twe(t,[0,0]):Pe=r.fixedPosition);var be=[0,0];a||(be=Ywe(t,ve,ne,K,Pe,!u&&f,r)),c&&(!c[0]&&(be[0]=0),!c[1]&&(be[1]=0));function _e(){var yt;ee&&(yt=le(ee([ve,ne]),2),ve=yt[0],ne=yt[1]),ve=ot(ve,U),ne=ot(ne,U)}if(Se){ue[0]&&ue[1]&&be[0]&&be[1]&&(Ie(be[0])>Ie(be[1])?be[1]=0:be[0]=0);var De=!be[0]&&!be[1];De&&_e(),ue[0]&&!ue[1]||be[0]&&!be[1]||De&&R?(ve+=be[0],ne=ve/O):(!ue[0]&&ue[1]||!be[0]&&be[1]||De&&!R)&&(ne+=be[1],ve=ne*O)}else ve+=be[0],ne+=be[1],ve=Math.max(0,ve),ne=Math.max(0,ne);n=le(YK([ve,ne],N,D,Se?O:!1),2),ve=n[0],ne=n[1],_e(),Se&&(h||te)&&(R?ne=ve/O:ve=ne*O),ie=ve-I,oe=ne-C;var Oe=[ie-T,oe-P];r.prevWidth=ie,r.prevHeight=oe;var Ye=ewe(t,ve,ne,Pe,x,r);if(!(!Z&&Oe.every(function(yt){return!yt})&&Ye.every(function(yt){return!yt}))){var Ve=mi.drag(t,H0(e,t.state,Ye,!!a,!1,"draggable")),it=Ve.transform,Vt=w+ie,Bn=S+oe,xn=dt(t,e,ae({width:Vt,height:Bn,offsetWidth:Math.round(ve),offsetHeight:Math.round(ne),startRatio:O,boundingWidth:ve,boundingHeight:ne,direction:K,dist:[ie,oe],delta:Oe,isPinch:!!a,drag:Ve},bY({style:{width:"".concat(Vt,"px"),height:"".concat(Bn,"px")},transform:it},Ve,e)));return!g&&Be(t,"onResize",xn),xn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Ie(h)>3,b=Ie(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=va(t,e,{});return!r&&Be(t,"onResizeEnd",i),i}},dragGroupControlCondition:mB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ae(ae({},e),{isGroup:!0}));if(!r)return!1;var i=Ts(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,P=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);v[0]=Math.max(v[0],P),v[1]=Math.max(v[1],N)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,P=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);v[0]=Math.min(v[0],P),v[1]=Math.min(v[1],N)})}var u=gl(t,this,"dragControlStart",e,function(v,b){return l1(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),l1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ae(ae({},r),{targets:t.props.targets,events:u.map(function(v){return ae(ae({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Be(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Wd(t.props,"resizable");u_(t,"onBeforeResize",function(v){Be(t,"onBeforeResizeGroup",dt(t,e,ae(ae({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,ae(ae({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=gl(t,this,"dragControl",e,function(v,b){var x=le(ci($0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return ae(ae({},b),{parentDist:null,parentScale:u,dragClient:Pt(f,[w,S]),parentKeepRatio:c})}),g=ae({targets:r.targets,events:h},i);return Be(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=gl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function ok(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=En(t.state.rootMatrix,tt([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Pt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Kn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=pl(f,[n,r])}function uw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function lk(t,e,n,r){return uw(Kn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function ck(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=Wwe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ot(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function aY(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(cr(t))return t.map(function(w){return aY(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=gY(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function PP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(mr(n,Ze("rotation-control"))||t.props.rotateAroundControls&&mr(n,Ze("around-control"))||mr(n,Ze("control"))&&mr(n,Ze("rotatable")))return!0;var r=t.props.rotationTarget;return r?SO(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Rwe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Mwe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Rwe],viewClassName:function(t){return t.isDragging("rotatable")?Ze("view-rotation-dragging"):""},render:function(t,e){var n=Wd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=aY(i,f,h),v=[];if(g.forEach(function(S,T){var P=le(S,2),N=P[0],D=P[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:Ze("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat(D,"rad)")}},e.createElement("div",{className:Ze("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ze("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=kl(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];cr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),v.push.apply(v,Re([],le(UW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,Re([],le(KW(t,e)),!1)),v},dragControlCondition:PP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,P=h.offsetMatrix,N=h.targetMatrix,D=h.allMatrix,O=h.width,I=h.height;if(!f&&!g)return!1;var C=t.getRect();i.rect=C,i.transform=S,i.left=v,i.top=b;var R=function(ue){var ie=iY(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedPosition(ue)},M=function(ue){var ie=Owe(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedDirection(ue)},V=a,z=s;if(f||u||c){var L=o||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:L,defaultDeg:L,prevSnapDeg:0,startDist:0},i.afterInfo=ae(ae({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=ae(ae({},i.beforeInfo),{origin:C.origin,startValue:L})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Q=W.getAttribute("data-direction")||"",G=Fxe[Q];if(G){i.isControl=!0,i.isAroundControl=mr(W,Ze("around-control")),i.controlDirection=G;var Y=W.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var J=u1e(h.rootMatrix,h.renderPoses,T);n=le(vr(J,G),2),V=n[0],z=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var ee=R;R=function(ue){var ie=h.is3d?4:3,oe=le(Pt(wW(N,ie),ue),2),Se=oe[0],se=oe[1],Ae=ci(P,Gd([Se,se],ie)),ve=ci(D,Gd([ue[0],ue[1]],ie));ee(ue);var ne=h.posDelta;i.beforeInfo.origin=tt(Ae,ne),i.afterInfo.origin=tt(ve,ne),i.absoluteInfo.origin=tt(ve,ne),ok(t,i.beforeInfo,V,z,T),ok(t,i.afterInfo,V,z,T),ok(t,i.absoluteInfo,V,z,T)},M=function(ue){var ie=vr([[0,0],[O,0],[0,I],[O,I]],ue);R(ie)}}i.startClientX=V,i.startClientY=z,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},a_(t,e,"rotate");var X=!1,U=!1;if(i.isControl&&i.resolveAble){var Z=i.resolveAble;Z==="resizable"&&(U=IP.dragControlStart(t,ae(ae({},new wp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(X=mi.dragStart(t,new wp().dragStart([0,0],e))),R(d1e(t));var te=dt(t,e,ae(ae({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:M,setFixedPosition:R},i_(t,e)),{dragStart:X,resizeStart:U})),K=Be(t,"onRotateStart",te);return i.isRotate=K!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,P=a.rect,N=a.startClientX,D=a.startClientY;if(S){n_(t,e,"rotate");var O=Uxe(e),I=v*O,C=t.props.parentMoveable,R=0,M,V,z=0,L,W,Q=0,G,Y,J=180/Math.PI*T,ee=w.startValue,X=!1,U=N+s,Z=D+o;if(!u&&"parentDist"in e){var te=e.parentDist;M=te,L=te,G=te}else f||u?(M=uw(c,v,b),L=uw(c,I,x),G=uw(c,I,w)):(M=lk(U,Z,v,b),L=lk(U,Z,I,x),G=lk(U,Z,I,w),X=!0);if(V=J+M,W=J+L,Y=ee+G,Be(t,"onBeforeRotate",dt(t,e,{beforeRotation:V,rotation:W,absoluteRotation:Y,setRotation:function(Pe){L=Pe-J,M=L,G=L}},!0)),n=le(ck(t,P,b,M,J,X),3),R=n[0],M=n[1],V=n[2],r=le(ck(t,P,x,L,J,X),3),z=r[0],L=r[1],W=r[2],i=le(ck(t,P,w,G,ee,X),3),Q=i[0],G=i[1],Y=i[2],!(!Q&&!z&&!R&&!C&&!g)){var K=r_(a,"rotate(".concat(W,"deg)"),"rotate(".concat(L,"deg)"));g&&(a.fixedPosition=uO(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=Jxe(t,L,a),ie=tt(Pt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=VW(t,K,ie,f,e),Se=oe,se=pl([U,Z],w.startAbsoluteOrigin)-w.startDist,Ae=void 0;if(a.resolveAble==="resizable"){var ve=IP.dragControl(t,ae(ae({},H0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:se}));ve&&(Ae=ve,Se=bY(Se,ve,e))}var ne=dt(t,e,ae(ae({delta:z,dist:L,rotate:W,rotation:W,beforeDist:M,beforeDelta:R,beforeRotate:V,beforeRotation:V,absoluteDist:G,absoluteDelta:Q,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:Ae},oe),Se));return Be(t,"onRotate",ne),ne}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=va(t,e,{});return Be(t,"onRotateEnd",r),r}},dragGroupControlCondition:PP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=gl(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,S=Pt(tt([b,x],[i,a]),tt(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,ae(ae({},g),{parentRotate:0})}),u=ae(ae({},o),{targets:t.props.targets,events:c}),f=Be(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){u_(t,"onBeforeRotate",function(u){Be(t,"onBeforeRotateGroup",dt(t,e,ae(ae({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=gl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(U0(h,s*i),2),w=x[0],S=x[1],T=[w-v,S-b];return f.datas.groupClient=[w,S],ae(ae({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ae({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Be(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=gl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function jwe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function mO(t,e){return jwe(ae(ae({},t),{classNames:Re([Ze("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ot(n,.1),"px")})}),e)}function vB(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,mO({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Ze("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function yB(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?au:su,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return mO({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Ze("bold"),S]:[Ze("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function qm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(D,O){return D}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",P=Math.abs(i),N=v?parseFloat(P.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ze("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(P,"px"),c)},mO({direction:e,classNames:[Ze(n),s],size:"100%",posValue:[0,0],sizeValue:P,zoom:w},o),o.createElement("div",{className:Ze("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},N>0?x(N,e):""))}function zwe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?au:su,o=n[s.start],c=n[s.end];return xY(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,S=v.elementRect.rect;if(S[s.end]<o)f.push(v);else if(c<S[s.start])h.push(v);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=v.pos,P={element:w,rect:ae(ae({},S),(b={},b[s.end]=S[s.start],b))},N={element:w,rect:ae(ae({},S),(x={},x[s.start]=S[s.end],x))},D=[0,0],O=[0,0];D[i]=T[i],D[a]=T[a],O[i]=T[i],O[a]=T[a]+v.size,f.push({type:t,pos:D,size:0,elementRect:P,direction:"",elementDirection:"end"}),h.push({type:t,pos:O,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Lwe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=zwe(o,c,r,a),g=u?su:au,v=u?au:su,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,P=w.end,N=w.inner,D=n[f]+S[0].pos[f]-r[v.start],O=r;T.forEach(function(I){var C=I.elementRect.rect,R=O[g.start]-C[g.end];if(R>0){var M=[0,0];M[u]=n[u]+O[g.start]-b-R,M[f]=D,s.push(qm(t,o,"dashed",s.length,R,M,I.className,i))}O=C}),O=r,P.forEach(function(I){var C=I.elementRect.rect,R=C[g.start]-O[g.end];if(R>0){var M=[0,0];M[u]=n[u]+O[g.end]-b,M[f]=D,s.push(qm(t,o,"dashed",s.length,R,M,I.className,i))}O=C}),N.forEach(function(I){var C=I.elementRect.rect,R=b-C[g.start],M=C[g.end]-x,V=[0,0],z=[0,0];V[u]=n[u]-R,V[f]=D,z[u]=n[u]+x-b,z[f]=D,s.push(qm(t,o,"dashed",s.length,R,V,I.className,i)),s.push(qm(t,o,"dashed",s.length,M,z,I.className,i))})})}),s}function Vwe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?su:au,h=c?au:su,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,P=Math.max.apply(Math,Re([b],le(T.map(function(O){var I=O.rect;return I[h.start]})),!1)),N=Math.min.apply(Math,Re([x],le(T.map(function(O){var I=O.rect;return I[h.end]})),!1)),D=(P+N)/2;P===N||D===(b+x)/2||T.forEach(function(O){var I=O.rect,C=O.className,R=[n[0],n[1]];if(I[f.end]<g)R[c]+=I[f.end]-g;else if(v<I[f.start])R[c]+=I[f.start]-g-S;else return;R[u]+=D-b,a.push(qm(t,c?"vertical":"horizontal","gap",a.length,S,R,C,i))})})}),a}function NP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,S=v.horizontalGuidelines,T=v.snapThreshold,P=T===void 0?5:T,N=v.maxSnapElementGuidelineDistance,D=N===void 0?1/0:N,O=v.isDisplayGridGuidelines,I=Fa(qa(t.state)),C=I.top,R=I.left,M=I.bottom,V=I.right,z={top:C,left:R,bottom:M,right:V,center:(R+V)/2,middle:(C+M)/2},L=$we(t),W=Re([],le(L),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ee){return ee*P});x&&W.push.apply(W,Re([],le(Bwe(t,z,Q)),!1));var G=ae({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Re([],le(Uwe(t,s?c:f,s?o:u,h,g,G,O)),!1)),a){var Y=i.left,J=i.top;G.left+=Y,G.top+=J,G.right+=Y,G.bottom+=J}return W.push.apply(W,Re([],le(oY(S||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),W=W.filter(function(ee){var X=ee.element,U=ee.elementRect,Z=ee.type;if(!X||!U)return!0;var te=U.rect;return sY(z,te,Z,D)}),W}function Bwe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",au,su],["horizontal",su,au]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],S=e[v.center],T=e[b.start],P=e[b.end],N={left:n[0],top:n[1]};function D(C){var R=C.rect,M=N[v.start];return R[v.end]<x+M?x-R[v.end]:w-M<R[v.start]?R[v.start]-w:-1}var O=c.filter(function(C){var R=C.rect;return R[b.start]>P||R[b.end]<T?!1:D(C)>0}).sort(function(C,R){return D(C)-D(R)}),I=[];O.forEach(function(C){O.forEach(function(R){if(C!==R){var M=C.rect,V=R.rect,z=M[b.start],L=M[b.end],W=V[b.start],Q=V[b.end];z>Q||W>L||I.push([C,R])}})}),I.forEach(function(C){var R=le(C,2),M=R[0],V=R[1],z=M.rect,L=V.rect,W=z[v.start],Q=z[v.end],G=L[v.start],Y=L[v.end],J=N[v.start],ee=0,X=0,U=!1,Z=!1,te=!1;if(Q<=x&&w<=G){if(Z=!0,ee=(G-Q-(w-x))/2,X=Q+ee+(w-x)/2,Ie(X-S)>J)return}else if(Q<G&&Y<x+J){if(U=!0,ee=G-Q,X=Y+ee,Ie(X-x)>J)return}else if(Q<G&&w-J<W){if(te=!0,ee=G-Q,X=W-ee,Ie(X-w)>J)return}else return;ee&&sY(e,L,g,a)&&(ee>o||u.push({type:g,pos:g==="vertical"?[X,0]:[0,X],element:V.element,size:0,className:V.className,isStart:U,isCenter:Z,isEnd:te,gap:ee,hide:!0,gapRects:[M,V],direction:"",elementDirection:""}))})}),u}function Fwe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=v.direction;if(S){var P=T.map(function(D,O){var I=O===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},C=I.snapSize,R=I.posName,M=I.sizeName,V=I.clientOffset;if(!C)return{dir:D,multiple:1,snapSize:C,snapOffset:0};var z=w[M],L=w[R],W=XK(S.map(function(U){return[U[R]-L,U[M],z-U[M]-U[R]+L]})).filter(function(U){return U}).sort(function(U,Z){return U-Z}),Q=W[0],G=W.map(function(U){return ot(U/Q,.1)*C}),Y=1,J=ot(z/Q,.1);for(Y=1;Y<=10&&!G.every(function(U){return U*Y%1===0});++Y);var ee=(-D+1)/2,X=r1(L-V,L-V+z,ee,1-ee);return{multiple:J*Y,dir:D,snapSize:C,snapOffset:Math.round(X/C)}}),N=P.map(function(D){return D.multiple||1});o.snapThresholdInfo.multiples=N,o.snapThresholdInfo.offset=P.map(function(D){return D.snapOffset}),P.forEach(function(D,O){D.snapSize})}}else o.snapThresholdInfo=null}function Uwe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];Fwe(t,r,i,a);var S=c.snapThresholdInfo,T=f,P=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var N=function(O){v.push({type:"horizontal",pos:[b,ot(w[1]*P+O-i+x,.1)],className:Ze("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},D=0;D<=n*2;D+=g)N(D);for(var D=-g;D>=-n;D-=g)N(D)}if(f){for(var N=function(I){v.push({type:"vertical",pos:[ot(w[0]*T+I-r+b,.1),x],className:Ze("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},D=0;D<=e*2;D+=f)N(D);for(var D=-f;D>=-e;D-=f)N(D)}return v}function sY(t,e,n,r){return n==="horizontal"?Ie(t.right-e.left)<=r||Ie(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ie(t.bottom-e.top)<=r||Ie(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function $we(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Cs(g)&&"element"in g?ae(ae({},g),{element:wo(g.element,!0)}):{element:wo(g,!0)}}).filter(function(g){return g.element}),s=txe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),qwe(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=fO(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,P=T===void 0?f.right:T,N=g.bottom,D=N===void 0?f.bottom:N,O=g.center,I=O===void 0?f.center:O,C=g.middle,R=C===void 0?f.middle:C,M=g.className,V=g.rect,z=hO({top:x,right:P,left:S,bottom:D,center:I,middle:R},V),L=z.horizontal,W=z.vertical,Q=z.horizontalNames,G=z.verticalNames,Y=V.top,J=V.left,ee=V.right-J,X=V.bottom-Y,U=[ee,X];W.forEach(function(Z,te){h.push({type:"vertical",element:v,pos:[ot(Z,.1),Y],size:X,sizes:U,className:M,elementRect:g,elementDirection:cB[G[te]]||G[te],direction:""})}),L.forEach(function(Z,te){h.push({type:"horizontal",element:v,pos:[J,ot(Z,.1)],size:ee,sizes:U,className:M,elementRect:g,elementDirection:cB[Q[te]]||Q[te],direction:""})})}),h}function bB(t,e){return t?t.map(function(n){var r=Cs(n)?n:{pos:n},i=r.pos;return bp(i)?r:ae(ae({},r),{pos:en(i,e)})}):[]}function oY(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return bB(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,ot(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),bB(e,g).forEach(function(b){o.push({type:"vertical",pos:[ot(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function qwe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(pwe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-v,T=S+x.height,P=w+x.width,N=le(Ep(a,[w,S],c),2),D=N[0],O=N[1],I=le(Ep(a,[P,T],c),2),C=I[0],R=I[1];return ae(ae({},b),{rect:{left:D,right:C,top:O,bottom:R,center:(D+C)/2,middle:(O+R)/2}})})}function cx(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=wo(r,!0);if(s){var o=gv(s),c=TB(e,[o.left-i.left,o.top-i.top]),u=TB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ot(c[0],1e-5),a.top=ot(c[1],1e-5),a.right=ot(u[0],1e-5),a.bottom=ot(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=NP(t),e.enableSnap=!0,!0}function lY(t,e,n,r,i,a){var s=df(t,e,n,a?4:3),o=vr(s,r);return yO(s,tt(i,o))}function xB(t){return t?t/Ie(t):0}function Gwe(t,e,n,r,i,a){var s=a.fixedDirection,o=ywe(n,s,r),c=gO(t,e,n,r),u=Re(Re([],le(Pwe(t,e,o,r,i,a)),!1),le(nY(t,c,a)),!1),f=c1(u,0),h=c1(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Hwe(t,e,n,r,i,a,s,o,c){var u=vr(e,s),f=l_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ot(g,EP)||ot(h,EP)){var v=le(Oo({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function cY(t,e,n,r,i,a,s,o){for(var c=qa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=Gwe(t,v,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,P=x.offset,N=w.offset;if(g===1&&(S||(P=0),T||(N=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var D=Ie(P)*(n?1/n:1),O=Ie(N)*(r?1/r:1),I=S&&T?D<O:T||!S&&D<O;I?P=n*N/r:N=r*P/n}f+=P,h+=N}if(!u&&i[0]&&i[1]){var C=Dwe(t,c,i,a,o),R=C.maxWidth,M=C.maxHeight,V=le(Hwe(t,e(f,h).map(function(W){return W.map(function(Q){return ot(Q,EP)})}),n+f,r+h,R,M,i,s,o),2),P=V[0],N=V[1];f+=P,h+=N}return[f,h]}function hv(t){return t<0&&(t=t%360+360),t%=360,t}function Kwe(t,e){e=hv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ie(t-r)<Ie(t-i)?r:i}function uk(t,e){t=hv(t),e=hv(e);var n=hv(t-e);return Math.min(n,360-n)}function Wwe(t,e,n,r){var i,a=t.props,s=(i=a[WW])!==null&&i!==void 0?i:5,o=a[YW];if(tg(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(N){return tt(N,g)}),x=b.map(function(N){return U0(N,v)}),w=Re(Re([],le(uwe(t,b,x,g,n)),!1),le(Ewe(t,b,x,g,n)),!1);w.sort(function(N,D){return Ie(N-n)-Ie(D-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(N,D){return uk(N,r)-uk(D,r)}),P=T[0];if(uk(P,r)<=s)return{isSnap:!0,dist:n+Kwe(r,P)-r}}return{isSnap:!1,dist:n}}function Ywe(t,e,n,r,i,a,s){if(!tg(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return cY(t,function(g,v){return lY(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function Xwe(t,e,n,r,i){if(!tg(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=cY(t,function(h,g){return lY(Yxe(i,Pt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Qwe(t,e){e.absolutePoses=qa(t.state)}function wB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Hi(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ae(ae({},r),{direction:i.direction})})}function SB(t,e,n,r,i,a){var s=dO(s_(t,a),e,n),o=s.vertical,c=s.horizontal,u=Rh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Twe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){Al(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){Al(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Zwe=wO("",["resizable","scalable"]),Jwe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",WW,YW,XW,QW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!tg(t,""))return jh(t,"boundMap",Rh(),function(K){return JSON.stringify(K)}),jh(t,"innerBoundMap",Rh(),function(K){return JSON.stringify(K)}),[];n.guidelines=NP(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=qa(t.state),w=[],S=[],T=[],P=[],N=[],D=Fa(x),O=D.width,I=D.height,C=D.top,R=D.left,M=D.bottom,V=D.right,z={left:R,right:V,top:C,bottom:M,center:(R+V)/2,middle:(C+M)/2},L=b.length>0,W=L?Fa(b):{};if(!u.request){if(u.direction&&N.push(vwe(t,x,u.direction,h,h)),u.snap){var Q=Fa(x);u.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),N.push(uB(t,Q,h,h))}L&&(u.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),N.push(uB(t,W,h,h))),N.forEach(function(K){var ue=K.vertical.posInfos,ie=K.horizontal.posInfos;w.push.apply(w,Re([],le(ue.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,Re([],le(ie.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,Re([],le(wB(ue)),!1)),P.push.apply(P,Re([],le(wB(ie)),!1))})}var G=SB(t,[R,V],[C,M],w,S),Y=G.boundMap,J=G.innerBoundMap;L&&SB(t,[W.left,W.right],[W.top,W.bottom],w,S,u.externalBounds);var ee=Re(Re([],le(T),!1),le(P),!1),X=ee.filter(function(K){return K.element&&!K.gapRects}),U=ee.filter(function(K){return K.gapRects}).sort(function(K,ue){return K.gap-ue.gap});Be(t,"onSnap",{guidelines:ee.filter(function(K){var ue=K.element;return!ue}),elements:X,gaps:U},!0);var Z=jh(t,"boundMap",Y,function(K){return JSON.stringify(K)},Rh()),te=jh(t,"innerBoundMap",J,function(K){return JSON.stringify(K)},Rh());return(Y===Z||J===te)&&Be(t,"onBound",{bounds:Y,innerBounds:J},!0),Re(Re(Re(Re(Re(Re([],le(Lwe(t,X,[g,v],z,e)),!1),le(Vwe(t,U,[g,v],z,e)),!1),le(yB(t,"horizontal",P,[i,r],z,e)),!1),le(yB(t,"vertical",T,[i,r],z,e)),!1),le(vB(t,"horizontal",S,g,r,O,0,e)),!1),le(vB(t,"vertical",w,v,i,I,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},cx(t)},drag:function(t){var e=t.state;cx(t)||(e.guidelines=NP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Zwe(t,e)||PP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return mr(e.inputEvent.target,Ze("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,cx(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,cx(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function e1e(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yye.apply(void 0,Re([oO],le(t),!1))}function uY(t){t()}function t1e(t){return!t||t==="none"?[1,0,0,1,0,0]:Cs(t)?t:Hv(t)}function pv(t,e,n){return a1(e,Hd(n,e),t,Hd(n.map(function(r){return-r}),e))}function n1e(t,e,n){if(e==="%"){var r=vO(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function r1e(t){var e=i1e(bO(t,":before"));return e.map(function(n,r){var i=L0(n),a=i.value,s=i.unit;return a*n1e(t,s,r===0)})}function d1(t){return t?t.split(" "):["0","0"]}function i1e(t){return d1(t.transformOrigin)}function dY(t){var e=Ki(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Wv(t,e,n,r,i){var a,s,o=X2(t)||mu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var P=Ki(u),N=u.tagName.toLowerCase(),D=dY(u),O=P("willChange"),I=parseFloat(P("zoom"))||1;if(x=P("position"),r&&I!==1){w=I;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||N==="svg"||N==="foreignobject"||x!=="static"||D&&D!=="none"||O==="transform")break;var C=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;C&&(c=!0,f=R);var M=R;if(M&&M.nodeType===11){u=M.host,v=!0,x=Ki(u)("position");break}u=M,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function a1e(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Ki(t),o=ZS(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=PW?r1e(t):d1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(l1e(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=d1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function fY(t,e){var n=Ki(t),r=Ki(mu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function DP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Is(n,3,4))})}function s1e(t){for(var e=t.parentElement,n=!1,r=mu(t);e;){var i=bO(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function c_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(SW(t,!e).join(","),")")}function vO(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function o1e(t,e){var n,r=vO(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var P=rO(b,e);return n=le(x,2),P[e*(e-1)]=n[0],P[e*(e-1)+1]=n[1],pv(P,e,v)}function l1e(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Ki(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=vO(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function En(t,e,n){return ci(t,Gd(e,n),n)}function df(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return En(t,i,r)})}function Fa(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Re([],le(e),!1)),i=Math.min.apply(Math,Re([],le(n),!1)),a=Math.max.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function _B(t,e,n,r){var i=df(t,e,n,r);return Fa(i)}function c1e(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=pY(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===mu(n)&&(v=fY(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],S=b.width,T=b.height,P=a1(r,i,c),N=_B(P,f,h,r),D=N.left,O=N.top,I=N.width,C=N.height,R=En(P,o,r),M=tt(R,[D,O]),V=[x+M[0]*S/I,w+M[1]*T/C],z=[0,0],L=0;++L<10;){var W=ko(i,r);a=le(tt(En(W,V,r),En(W,R,r)),2),z[0]=a[0],z[1]=a[1];var Q=a1(r,i,Hd(z,r),c),G=_B(Q,f,h,r),Y=G.left,J=G.top,ee=Y-x,X=J-w;if(Ie(ee)<2&&Ie(X)<2)break;V[0]-=ee,V[1]-=X}return z.map(function(U){return Math.round(U)})}function u1e(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return En(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function $a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function hY(t,e){return $a([e[0]-t[0],e[1]-t[1]])}function Gm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Kn(t,e));var i=hY(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function f1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Wd(t,e){var n=t[e];return Cs(n)?ae(ae({},t),n):t}function pY(t){var e=t&&!ZS(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,P=0,N=!1;if(t)if(!e&&t.ownerSVGElement){var D=t.getBBox();N=!0,n=D.width,r=D.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var O=Ki(t),I=t.style,C=O("boxSizing")==="border-box",R=parseFloat(O("borderLeftWidth"))||0,M=parseFloat(O("borderRightWidth"))||0,V=parseFloat(O("borderTopWidth"))||0,z=parseFloat(O("borderBottomWidth"))||0,L=parseFloat(O("paddingLeft"))||0,W=parseFloat(O("paddingRight"))||0,Q=parseFloat(O("paddingTop"))||0,G=parseFloat(O("paddingBottom"))||0,Y=L+W,J=Q+G,ee=R+M,X=V+z,U=Y+ee,Z=J+X,te=O("position"),K=0,ue=0;if("clientLeft"in t){var ie=null;if(te==="absolute"){var oe=Wv(t,mu(t));ie=oe.offsetParent}else ie=t.parentElement;if(ie){var Se=Ki(ie);K=parseFloat(Se("width")),ue=parseFloat(Se("height"))}}f=Math.max(Y,en(O("minWidth"),K)||0),h=Math.max(J,en(O("minHeight"),ue)||0),b=en(O("maxWidth"),K),x=en(O("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=en(I.width,0)||0,P=en(I.height,0)||0,s=parseFloat(O("width"))||0,o=parseFloat(O("height"))||0,c=Ie(s-T)<1?dP(f,T||s,b):s,u=Ie(o-P)<1?dP(h,P||o,x):o,n=c,r=u,i=c,a=u,C?(w=b,S=x,g=f,v=h,c=n-U,u=r-Z):(w=b+U,S=x+Z,g=f+U,v=h+Z,n=c+U,r=u+Z),i=c+Y,a=u+J}return{svg:N,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:P,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:S}}function gY(t,e){return Kn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function ux(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function mY(t,e){var n=t===mu(t)||t===X2(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Ki(t)("overflow")!=="visible",ae(ae({},e),r)}function dk(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?mY(n,f):f}function gv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?mY(t,o):o}function d1e(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?_O(r,a,s):c}function vY(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=yY(a,r)}return i}function yY(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function yO(t,e){return[Pt(e,t[0]),Pt(e,t[1]),Pt(e,t[2]),Pt(e,t[3])]}function qa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return yO([r,i,a,s],[e,n])}function OP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Mh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&OP(t,e),r?.unset(),t[n]=null}function wi(t,e){if(e){var n=eg(e);n.nextStyle=ae(ae({},n.nextStyle),t)}return{style:t,cssText:kl(t).map(function(r){return"".concat(cw(r,"-"),": ").concat(t[r],";")}).join("")}}function bY(t,e,n){var r=e.afterTransform||e.transform;return ae(ae({},wi(ae(ae(ae({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function dt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ae(ae({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function va(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ae(ae({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function u_(t,e,n){t._emitter.on(e,n)}function Be(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function bO(t,e){return Kc(t).getComputedStyle(t,e)}function dx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function RP(t,e){return t===e||t==null&&e==null}function EB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!ZS(i))return i}return t[n]}function xY(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function f1e(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function wY(t){return t.reduce(function(e,n){return e.concat(n)},[])}function _p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ie(r)-Ie(n)}),t[0]}function Ep(t,e,n){return ci(ko(t,n),Gd(e,n),n)}function h1e(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(Ep(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Oa(t,e,n,r){if(!n[0]&&!n[1])return e;var i=En(t,[xB(n[0]||1),0],r),a=En(t,[0,xB(n[1]||1)],r),s=En(t,[n[0]/$a(i),n[1]/$a(a)],r);return Pt(e,s)}function ps(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function h1(t){return Ie(t)<=Ei?0:t}function xO(t){return function(e){if(!e.isDragging(t))return"";var n=nwe(e,t),r=n.deg;return r?Ze("view-control-rotation".concat(r)):""}}function wO(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return mr(i,Ze("direction"))&&(!t||mr(i,Ze(t)))}}function p1e(t,e,n){var r,i=xp(t,{"x%":function(D){return D/100*e.offsetWidth},"y%":function(D){return D/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:xp([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=_h(f),S=_h(h),T=_h(v),P=_h(b),N=tn(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:_h(x),afterFunctionMatrix:T,afterFunctionMatrix2:P,allFunctionMatrix:N,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function g1e(t){return!t||!Cs(t)||Zp(t)?!1:cr(t)||"length"in t}function wo(t,e){return t?Zp(t)?t:Gi(t)?e?document.querySelector(t):t:K2(t)?t():eW(t)?t:"current"in t?t.current:t:null}function SO(t,e){if(!t)return[];var n=g1e(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Gi(i)&&e?Re(Re([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(cr(i)?r.push(SO(i,e)):r.push(wo(i,e)),r)},[])}function m1e(t,e,n){var r=Kn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function TB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=ko(n,i);return r||(a=Is(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Jbe(a,e)}function SY(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Kn([0,0],e),h=Kn([0,0],r),g=$a(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Ie(w-S)<Math.PI/2||Ie(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var P=$a([b+e[0],x+e[1]])*Math.cos(T);c=P*Math.sin(S)-b,u=P*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function _Y(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(I){return Ie(t[I]-w[I])}),T=[0,1].map(function(I){var C=S[I];return C!==0&&(C=2/C),C});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(bp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var P=s*S[0],N=o*S[1],D=$a([P,N]);c=v/D*P*T[0],u=v/D*N*T[1]}else{var O=Oo({datas:n,distX:f,distY:h});O=T.map(function(I,C){return O[C]*I}),i=le(SY([s,o],O,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function MP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=MP(r||""),s=MP(i||""),o=ae(ae({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function _O(t,e,n){var r=MP(t,!0),i=r.x,a=r.y;return[en(i,e)||0,en(a,n)||0]}function v1e(t,e,n){var r=t.map(function(a){return tt(a,e)}),i=r.map(function(a){return U0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Pt(a,e)})}}function EY(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=cr(n),s=cr(i);return a&&s?EY(n,i):!a&&!s?n===i:!1})}function jh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function vi(t){return t>=0?1:-1}function Ie(t){return Math.abs(t)}function fk(t,e){return fbe(t).map(function(n){return e(n)})}function TY(t){return bp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var y1e=G0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=dt(t,e,{});r&&(g.targets=r);var v=Be(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ae(ae({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=dt(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Be(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,ae(ae({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=va(t,e,{isDrag:r});a&&(c.targets=a),Be(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ae(ae({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ae(ae({},e),{targets:t.props.targets}))}}),AB=wO("scalable"),b1e={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:GW("scalable"),dragControlCondition:AB,viewClassName:xO("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=vY(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||uf(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];a_(t,e,"scale"),n.isWidth=x;function w(O){n.ratio=O&&isFinite(O)?O:0}n.startPositions=qa(t.state);function S(O){var I=rY(n.startPositions,O);n.fixedDirection=I.fixedDirection,n.fixedPosition=I.fixedPosition,n.fixedOffset=I.fixedOffset}n.setFixedDirection=S,w(pl(g,v)/pl(v,b)),S([-s[0],-s[1]]);var T=function(O){n.minScaleSize=O},P=function(O){n.maxScaleSize=O};T([-1/0,-1/0]),P([1/0,1/0]);var N=dt(t,e,ae(ae({direction:s,set:function(O){n.startValue=O},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:P},i_(t,e)),{dragStart:mi.dragStart(t,new wp().dragStart([0,0],e))})),D=Be(t,"onScaleStart",N);return n.startFixedDirection=n.fixedDirection,D!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?N:!1},dragControl:function(t,e){n_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,P=T.throttleScale,N=T.parentMoveable,D=h;!h[0]&&!h[1]&&(D=[1,1]);var O=S&&(r??T.keepRatio)||!1,I=t.state,C=[x[0],x[1]];function R(){var ve=_Y(D,O,n,e),ne=ve.distWidth,Pe=ve.distHeight,be=g?(g+ne)/g:1,_e=v?(v+Pe)/v:1;x[0]||(C[0]=ne/g),x[1]||(C[1]=Pe/v);var De=(D[0]||O?be:1)*C[0],Oe=(D[1]||O?_e:1)*C[1];return De===0&&(De=vi(f[0])*sx),Oe===0&&(Oe=vi(f[1])*sx),[De,Oe]}var M=R();if(!a&&t.props.groupable){var V=I.snapRenderInfo||{},z=V.direction;cr(z)&&(z[0]||z[1])&&(I.snapRenderInfo={direction:h,request:e.isRequest})}Be(t,"onBeforeScale",dt(t,e,{scale:M,setFixedDirection:function(ve){return n.setFixedDirection(ve),M=R(),M},startFixedDirection:n.startFixedDirection,setScale:function(ve){M=ve}},!0));var L=[M[0]/C[0],M[1]/C[1]],W=s,Q=[0,0],G=vi(L[0]*L[1]),Y=!s&&!i&&a;if(Y||u?W=uO(t,n.targetAllTransform,[0,0],[0,0],n):s||(W=n.fixedPosition),a||(Q=Xwe(t,L,h,!c&&o,n)),O){D[0]&&D[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*g)>Math.abs(Q[1]*v)?Q[1]=0:Q[0]=0);var J=!Q[0]&&!Q[1];if(J&&(w?L[0]=ot(L[0]*C[0],P)/C[0]:L[1]=ot(L[1]*C[1],P)/C[1]),D[0]&&!D[1]||Q[0]&&!Q[1]||J&&w){L[0]+=Q[0];var ee=g*L[0]*C[0]/S;L[1]=vi(G*L[0])*Ie(ee/v/C[1])}else if(!D[0]&&D[1]||!Q[0]&&Q[1]||J&&!w){L[1]+=Q[1];var X=v*L[1]*C[1]*S;L[0]=vi(G*L[1])*Ie(X/g/C[0])}}else L[0]+=Q[0],L[1]+=Q[1],Q[0]||(L[0]=ot(L[0]*C[0],P)/C[0]),Q[1]||(L[1]=ot(L[1]*C[1],P)/C[1]);L[0]===0&&(L[0]=vi(f[0])*sx),L[1]===0&&(L[1]=vi(f[1])*sx),M=e1e(L,[C[0],C[1]]);var U=[g,v],Z=[g*M[0],v*M[1]];Z=YK(Z,n.minScaleSize,n.maxScaleSize,O?S:!1),M=fk(2,function(ve){return U[ve]?Z[ve]/U[ve]:Z[ve]}),L=fk(2,function(ve){return M[ve]/C[ve]});var te=fk(2,function(ve){return f[ve]?L[ve]/f[ve]:L[ve]}),K="scale(".concat(L.join(", "),")"),ue="scale(".concat(M.join(", "),")"),ie=r_(n,ue,K),oe=!x[0]||!x[1],Se=Xxe(t,oe?ue:K,n.fixedDirection,W,n.fixedOffset,n,oe),se=Y?Se:tt(Se,n.prevInverseDist||[0,0]);if(n.prevDist=L,n.prevInverseDist=Se,M[0]===f[0]&&M[1]===f[1]&&se.every(function(ve){return!ve})&&!N&&!Y)return!1;var Ae=dt(t,e,ae({offsetWidth:g,offsetHeight:v,direction:h,scale:M,dist:L,delta:te,isPinch:!!a},VW(t,ie,se,a,e)));return Be(t,"onScale",Ae),Ae},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=va(t,e,{});return Be(t,"onScaleEnd",r),r},dragGroupControlCondition:AB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Ts(t,"resizable",e);n.moveableScale=t.scale;var a=gl(t,this,"dragControlStart",e,function(u,f){return l1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),l1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ae(ae({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Be(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){u_(t,"onBeforeScale",function(f){Be(t,"onBeforeScaleGroup",dt(t,e,ae(ae({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=gl(t,this,"dragControl",e,function(f,h){var g=le(ci($0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return ae(ae({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Pt(o,[v,b])})}),u=ae({targets:t.props.targets,events:c},r);return Be(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=gl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Be(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Tc(t,e){return t.map(function(n,r){return r1(n,e[r],1,2)})}function kB(t,e,n){var r=Kn(t,e),i=Kn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function x1e(t,e){var n=kB(t[0],t[1],t[2]),r=kB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var w1e={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:xO("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Tc(c,u),v=Tc(u,c),b=Tc(c,f),x=Tc(f,c),w=Tc(f,h),S=Tc(h,f),T=Tc(u,h),P=Tc(h,u);return Re([e.createElement("div",{className:Ze("line"),key:"middeLine1",style:Gm(g,w,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine2",style:Gm(v,S,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine3",style:Gm(b,T,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine4",style:Gm(x,P,s)})],le(HW(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return mr(n,Ze("direction"))&&mr(n,Ze("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=yY(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Is(h,3,4),n.targetInverseMatrix=xW(ko(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return tt(T,c)}),n.nextPoses=n.poses.map(function(T){var P=le(T,2),N=P[0],D=P[1];return ci(n.warpTargetMatrix,[N,D,0,1],4)}),n.startValue=fn(4),n.prevMatrix=fn(4),n.absolutePoses=qa(o),n.posIndexes=LW(s),uf(t,e),a_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=dt(t,e,ae({set:function(T){n.startValue=T}},i_(t,e))),S=Be(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(n_(t,e,"matrix3d"),tg(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=l_(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=Oo({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Pt(T[R],S)}),!Bxe.every(function(R){return x1e(R.map(function(M){return f[M]}),R.map(function(M){return T[M]}))}))return!1;var P=iO(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!P.length)return!1;var N=tn(s,P,4),D=jW(n,N,!0),O=tn(ko(o,4),D,4);n.prevMatrix=D;var I=tn(u,D,4),C=r_(n,"matrix3d(".concat(I.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return cO(e,C),Be(t,"onWarp",dt(t,e,ae({delta:O,matrix:I,dist:D,multiply:tn,transform:C},wi({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Be(t,"onWarpEnd",va(t,e,{})),r):!1}},S1e=Ze("area-pieces"),fx=Ze("area-piece"),AY=Ze("avoid"),_1e=Ze("view-dragging");function hk(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;JK(e,AY),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function CB(t){return t.createElement("div",{key:"area_pieces",className:S1e},t.createElement("div",{className:fx}),t.createElement("div",{className:fx}),t.createElement("div",{className:fx}),t.createElement("div",{className:fx}))}var kY={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Ze("area","pass"):Ze("area");if(a)return[e.createElement("div",{key:"area",ref:hl(t,"areaElement"),className:h}),CB(e)];if(!r||!i)return[];var g=iO([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?c_(g,!0):"none";return[e.createElement("div",{key:"area",ref:hl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),CB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Fa(u),x=b.left,w=b.top,S=b.width,T=b.height,P=h?4:3,N=le(Ep(f,[r-g,i-v],P),2),D=N[0],O=N[1];D-=x,O-=w;var I=[{left:x,top:w,width:S,height:O-10},{left:x,top:w,width:D-10,height:T},{left:x,top:w+O+10,width:S,height:T-O-10},{left:x+D+10,top:w,width:S-D-10,height:T}],C=[].slice.call(s.nextElementSibling.children);I.forEach(function(R,M){C[M].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),ZK(s,AY),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,hk(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||hk(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){hk(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&WK(function(){e.disableNativeEvent=!1})}},E1e=G0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(_O(i,b,x),2),T=S[0],P=S[1],N=h?4:3,D=En(f,[T,P],N);w=f1(c,r,tt(D,[g,v]))}else w=f1(c,r,o);return[e.createElement("div",{className:Ze("control","origin"),style:w,key:"beforeOrigin"})]}});function T1e(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var A1e={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new axe,o=wo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=dt(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Be(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ae({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?T1e:f,g=r.scrollOptions;return n.drag(e,ae({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},CY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},k1e=G0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=TY(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=le(w,2),P=T[0],N=T[1],D=b[P],O=b[N],I=u[P],C=u[N],R=iO([0,0],[100,0],[0,100],[100,100],D,O,I,C);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Ze("padding"),style:{transform:c_(R,!0)}})})}}),IB=["nw","ne","se","sw"];function hx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var C1e=[1,2,5,6],I1e=[0,3,4,7],hd=[1,-1,-1,1],pd=[1,1,-1,-1];function EO(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(ps(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(ps(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function IY(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function PY(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,S=w>0,T=le(v,4),P=T[0],N=P===void 0?"0px":P,D=T[1],O=D===void 0?N:D,I=T[2],C=I===void 0?N:I,R=T[3],M=R===void 0?O:R,V=le(b,4),z=V[0],L=z===void 0?N:z,W=V[1],Q=W===void 0?S?L:O:W,G=V[2],Y=G===void 0?S?L:C:G,J=V[3],ee=J===void 0?S?Q:M:J,X=[N,O,C,M].map(function(ie){return en(ie,e)}),U=[L,Q,Y,ee].map(function(ie){return en(ie,n)}),Z=X.slice(),te=U.slice();o=le(hx([Z[0],Z[1]],e),2),Z[0]=o[0],Z[1]=o[1],c=le(hx([Z[3],Z[2]],e),2),Z[3]=c[0],Z[2]=c[1],u=le(hx([te[0],te[3]],n),2),te[0]=u[0],te[3]=u[1],f=le(hx([te[1],te[2]],n),2),te[1]=f[0],te[2]=f[1];var K=s?Z:Z.slice(0,Math.max(a[0],x)),ue=s?te:te.slice(0,Math.max(a[1],w));return Re(Re([],le(K.map(function(ie,oe){var Se=IB[oe];return{virtual:oe>=x,horizontal:hd[oe],vertical:0,pos:[r+ie,i+(pd[oe]===-1?n:0)],sub:!0,raw:X[oe],direction:Se}})),!1),le(ue.map(function(ie,oe){var Se=IB[oe];return{virtual:oe>=w,horizontal:0,vertical:pd[oe],pos:[r+(hd[oe]===-1?e:0),i+ie],sub:!0,raw:U[oe],direction:Se}})),!1)}function P1e(t,e,n,r,i){i===void 0&&(i=e.length);var a=IY(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function N1e(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=IY(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=hd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=pd[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:hd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:hd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=pd[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var P=[u+T,f];t.push({horizontal:hd[0],vertical:0,pos:P}),e.push(P)}for(var N=v[0],x=v[1];x<=i;++x){var S=hd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:pd[x]===1?w=e[n+N][1]:pd[x]===-1&&(w=c-(e[n+N][1]-f)),t.push({horizontal:0,vertical:pd[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function D1e(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var O1e=[[0,-1,"n"],[1,0,"e"]],R1e=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function TO(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(O){return"".concat(ps(O[0],a,r)," ").concat(ps(O[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(O){return"".concat(O,"px")});var w=[g,a-v,s-x,b].map(function(O,I){return ps(O,I%2?a:s,r)});if(n.length>8){var S=le(tt(n[4],n[0]),2),T=S[0],P=S[1];w.push.apply(w,Re(["round"],le(EO(u.slice(8).map(function(O,I){return ae(ae({},O),{pos:n[I]})}),r,T,P,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var N=n[0],D=ps(Ie(n[1][1]-N[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[D]:[ps(Ie(n[2][0]-N[0]),a,r),D];return w.push("at",ps(N[0],a,r),ps(N[1],s,r)),w}}function p1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return R1e.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ie(u),horizontal:Ie(c),direction:f,pos:[h,g]}})}function NY(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ie(e[1]-e[0]),Ie(n[1]-n[0])]}function PB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=Ki(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=KK(b),T=S.prefix,P=T===void 0?b:T,N=S.value,D=N===void 0?"":N,O=P==="circle",I=" ";if(P==="polygon"){var C=bd(D||"0% 0%, 100% 0%, 100% 100%, 0% 100%");I=",";var R=C.map(function(Vt){var Bn=le(Vt.split(" "),2),xn=Bn[0],yt=Bn[1];return{vertical:1,horizontal:1,pos:[en(xn,e),en(yt,n)]}}),M=Kd(R.map(function(Vt){return Vt.pos}));return{type:P,clipText:b,poses:R,splitter:I,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(O||P==="ellipse"){var V="",z="",L=0,W=0,C=iu(D);if(O){var Q="";a=le(C,4),s=a[0],Q=s===void 0?"50%":s,o=a[2],V=o===void 0?"50%":o,c=a[3],z=c===void 0?"50%":c,L=en(Q,Math.sqrt((e*e+n*n)/2)),W=L}else{var G="",Y="";u=le(C,5),f=u[0],G=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],V=g===void 0?"50%":g,v=u[4],z=v===void 0?"50%":v,L=en(G,e),W=en(Y,n)}var J=[en(V,e),en(z,n)],R=Re([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],le(O1e.slice(0,O?1:2).map(function(xn){return{vertical:Ie(xn[1]),horizontal:xn[0],direction:xn[2],sub:!0,pos:[J[0]+xn[0]*L,J[1]+xn[1]*W]}})),!1);return{type:P,clipText:b,radiusX:L,radiusY:W,left:J[0]-L,top:J[1]-W,right:J[0]+L,bottom:J[1]+W,poses:R,splitter:I}}else if(P==="inset"){var C=iu(D||"0 0 0 0"),ee=C.indexOf("round"),X=(ee>-1?C.slice(0,ee):C).length,U=C.slice(X+1),Z=le(C.slice(0,X),4),te=Z[0],K=Z[1],ue=K===void 0?te:K,ie=Z[2],oe=ie===void 0?te:ie,Se=Z[3],se=Se===void 0?ue:Se,Ae=le([te,oe].map(function(xn){return en(xn,n)}),2),ve=Ae[0],ne=Ae[1],Pe=le([se,ue].map(function(xn){return en(xn,e)}),2),be=Pe[0],_e=Pe[1],De=e-_e,Oe=n-ne,Ye=PY(U,De-be,Oe-ve,be,ve),R=Re(Re([],le(p1(ve,De,Oe,be)),!1),le(Ye),!1);return{type:"inset",clipText:b,poses:R,top:ve,left:be,right:De,bottom:Oe,radius:U,splitter:I}}else if(P==="rect"){var C=bd(D||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));I=",";var Ve=le(C.map(function(Qr){var ze=L0(Qr).value;return ze}),4),it=Ve[0],_e=Ve[1],ne=Ve[2],be=Ve[3],R=p1(it,_e,ne,be);return{type:"rect",clipText:b,poses:R,top:it,right:_e,bottom:ne,left:be,values:C,splitter:I}}}}}function M1e(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(L){return L==="w"||L==="e"}),h=u.filter(function(L){return L==="n"||L==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(NY(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,P=t[T].pos,N=[0,0];s.indexOf("w")>-1?N[0]=-1:s.indexOf("e")>-1&&(N[0]=1),s.indexOf("n")>-1?N[1]=-1:s.indexOf("s")>-1&&(N[1]=1);var D=SY([x,w],n,S,N,!0),O=x+D[0],I=w+D[1],C=P[1],R=P[1],M=P[0],V=P[0];N[0]===-1?M=V-O:N[0]===1?V=M+O:(M=M-O/2,V=V+O/2),N[1]===-1?C=R-I:(N[1]===1||(C=R-I/2),R=C+I);var z=p1(C,V,R,M);t.forEach(function(L,W){c[W][0]=z[W].pos[0]-L.pos[0],c[W][1]=z[W].pos[1]-L.pos[1]})}else t.forEach(function(L,W){var Q=L.direction;Q&&(Q.indexOf(g)>-1&&(c[W][0]=n[0]),Q.indexOf(v)>-1&&(c[W][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(L){var W=L==="n"||L==="s";t.forEach(function(Q,G){var Y=Q.direction,J=Q.horizontal,ee=Q.vertical;!Y||Y.indexOf(L)===-1||(c[G]=[W||!J?0:n[0],!W||!ee?0:n[1]])})}):c[e]=n;return c}function j1e(t,e){var n=le(MW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=C1e.indexOf(o),b=I1e.indexOf(o),x=f.length;if(N1e(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=TO(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Be(t,"onClip",dt(t,e,ae({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},wi({clipPath:S},e))))}function z1e(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(P1e(o,u,i,8,f),f===o.length))return}else return;var h=TO(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Be(t,"onClip",dt(t,e,ae({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},wi({clipPath:g},e))))}var L1e={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,P=c.pos4,N=c.clipPathState,D=c.snapBoundInfos,O=c.rotation;if(!u||o)return[];var I=PB(u,f,h,i||"inset",N||r);if(!I)return[];var C=v?4:3,R=I.type,M=I.poses,V=M.map(function(_e){var De=En(g,_e.pos,C);return[De[0]-b,De[1]-x]}),z=[],L=[],W=R==="rect",Q=R==="inset",G=R==="polygon";if(W||Q||G){var Y=Q?V.slice(0,8):V;L=Y.map(function(_e,De){var Oe=De===0?Y[Y.length-1]:Y[De-1],Ye=Kn(Oe,_e),Ve=hY(Oe,_e);return e.createElement("div",{key:"clipLine".concat(De),className:Ze("line","clip-line","snap-control"),"data-clip-index":De,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(Ye,"rad) scaleY(").concat(s,")")}})})}if(z=V.map(function(_e,De){return e.createElement("div",{key:"clipControl".concat(De),className:Ze("control","clip-control","snap-control"),"data-clip-index":De,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(O,"rad) scale(").concat(s,")")}})}),Q&&z.push.apply(z,Re([],le(V.slice(8).map(function(_e,De){return e.createElement("div",{key:"clipRadiusControl".concat(De),className:Ze("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+De,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(O,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=I.left,ee=I.top,X=I.radiusX,U=I.radiusY,Z=le(tt(En(g,[J,ee],C),En(g,[0,0],C)),2),te=Z[0],K=Z[1],ue="none";if(!a){for(var ie=Math.max(10,X/5,U/5),oe=[],Se=0;Se<=ie;++Se){var se=Math.PI*2/ie*Se;oe.push([X+(X-s)*Math.cos(se),U+(U-s)*Math.sin(se)])}oe.push([X,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([X*2+2,U*2+2]),oe.push([X*2+2,-2]),oe.push([X,-2]),ue="polygon(".concat(oe.map(function(_e){return"".concat(_e[0],"px ").concat(_e[1],"px")}).join(", "),")")}z.push(e.createElement("div",{key:"clipEllipse",className:Ze("clip-ellipse","snap-control"),style:{width:"".concat(X*2,"px"),height:"".concat(U*2,"px"),clipPath:ue,transform:"translate(".concat(-b+te,"px, ").concat(-x+K,"px) ").concat(c_(g))}}))}if(a){var Ae=Fa(Re([w,S,T,P],le(V),!1)),ve=Ae.width,ne=Ae.height,Pe=Ae.left,be=Ae.top;if(G||W||Q){var oe=Q?V.slice(0,8):V;z.push(e.createElement("div",{key:"clipArea",className:Ze("clip-area","snap-control"),style:{width:"".concat(ve,"px"),height:"".concat(ne,"px"),transform:"translate(".concat(Pe,"px, ").concat(be,"px)"),clipPath:"polygon(".concat(oe.map(function(De){return"".concat(De[0]-Pe,"px ").concat(De[1]-be,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(_e){var De=D[_e],Oe=_e==="horizontal";De.isSnap&&L.push.apply(L,Re([],le(De.snap.posInfos.map(function(Ye,Ve){var it=Ye.pos,Vt=tt(En(g,Oe?[0,it]:[it,0],C),[b,x]),Bn=tt(En(g,Oe?[f,it]:[it,h],C),[b,x]);return Kv(e,"",Vt,Bn,s,"clip".concat(_e,"snap").concat(Ve),"guideline")})),!1)),De.isBound&&L.push.apply(L,Re([],le(De.bounds.map(function(Ye,Ve){var it=Ye.pos,Vt=tt(En(g,Oe?[0,it]:[it,0],C),[b,x]),Bn=tt(En(g,Oe?[f,it]:[it,h],C),[b,x]);return Kv(e,"",Vt,Bn,s,"clip".concat(_e,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Re(Re([],le(z),!1),le(L),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ae(ae({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=PB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Be(t,"onClipStart",dt(t,e,{clipType:b,clipStyle:v,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,uf(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Wd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,P=Oo(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(P,2),w=r[0],S=r[1]);var N=[w,S],D=t.state,O=D.width,I=D.height,C=!h&&!u&&!f,R=v.type,M=v.poses,V=v.splitter,z=M.map(function(xt){return xt.pos});C&&(w=-w,S=-S);var L=!u||M[g].direction==="nesw",W=R==="inset"||R==="rect",Q=M.map(function(){return[0,0]});if(u&&!L){var G=M[g],Y=G.horizontal,J=G.vertical,ee=[w*Ie(Y),S*Ie(J)];Q=M1e(M,g,ee,W,x)}else L&&(Q=z.map(function(){return[w,S]}));var X=z.map(function(xt,Sn){return Pt(xt,Q[Sn])}),U=Re([],le(X),!1);D.snapBoundInfos=null;var Z=v.type==="circle",te=v.type==="ellipse";if(Z||te){var K=Fa(X),ue=Ie(K.bottom-K.top),ie=Ie(te?K.right-K.left:ue),oe=X[0][1]+ue,Se=X[0][0]-ie,se=X[0][0]+ie;Z&&(U.push([se,K.bottom]),Q.push([1,0])),U.push([K.left,oe]),Q.push([0,1]),U.push([Se,K.bottom]),Q.push([1,0])}var Ae=oY((b.clipHorizontalGuidelines||[]).map(function(xt){return en("".concat(xt),I)}),(b.clipVerticalGuidelines||[]).map(function(xt){return en("".concat(xt),O)}),O,I),ve=[],ne=[];if(Z||te)ve=[U[4][0],U[2][0]],ne=[U[1][1],U[3][1]];else if(W){var Pe=[U[0],U[2],U[4],U[6]],be=[Q[0],Q[2],Q[4],Q[6]];ve=Pe.filter(function(xt,Sn){return be[Sn][0]}).map(function(xt){return xt[0]}),ne=Pe.filter(function(xt,Sn){return be[Sn][1]}).map(function(xt){return xt[1]})}else ve=U.filter(function(xt,Sn){return Q[Sn][0]}).map(function(xt){return xt[0]}),ne=U.filter(function(xt,Sn){return Q[Sn][1]}).map(function(xt){return xt[1]});var _e=[0,0],De=pB(Ae,b.clipTargetBounds&&{left:0,top:0,right:O,bottom:I},ve,ne,5,5),Oe=De.horizontal,Ye=De.vertical,Ve=Oe.offset,it=Ye.offset;if(Oe.isBound&&(_e[1]+=Ve),Ye.isBound&&(_e[0]+=it),(te||Z)&&Q[0][0]===0&&Q[0][1]===0){var K=Fa(X),Vt=K.bottom-K.top,Bn=te?K.right-K.left:Vt,xn=Ye.isBound?Ie(it):Ye.snapIndex===0?-it:it,yt=Oe.isBound?Ie(Ve):Oe.snapIndex===0?-Ve:Ve;Bn-=xn,Vt-=yt,Z&&(Vt=JW(Ye,Oe)>0?Vt:Bn,Bn=Vt);var Bt=U[0];U[1][1]=Bt[1]-Vt,U[2][0]=Bt[0]+Bn,U[3][1]=Bt[1]+Vt,U[4][0]=Bt[0]-Bn}else if(W&&x&&u){var Qr=le(NY(M),2),ze=Qr[0],gt=Qr[1],ki=ze&&gt?ze/gt:0,Zr=M[g],In=Zr.direction||"",Tr=U[1][1],oe=U[5][1],Se=U[7][0],se=U[3][0];Ie(Ve)<=Ie(it)?Ve=vi(Ve)*Ie(it)/ki:it=vi(it)*Ie(Ve)*ki,In.indexOf("w")>-1?Se-=it:In.indexOf("e")>-1?se-=it:(Se+=it/2,se-=it/2),In.indexOf("n")>-1?Tr-=Ve:In.indexOf("s")>-1?oe-=Ve:(Tr+=Ve/2,oe-=Ve/2);var Fn=p1(Tr,se,oe,Se);U.forEach(function(Yi,xa){var fi;fi=le(Fn[xa].pos,2),Yi[0]=fi[0],Yi[1]=fi[1]})}else U.forEach(function(xt,Sn){var _n=Q[Sn];_n[0]&&(xt[0]-=it),_n[1]&&(xt[1]-=Ve)});var wn=TO(t,v,X),Ar="".concat(R,"(").concat(wn.join(V),")");if(D.clipPathState=Ar,Z||te)ve=[U[4][0],U[2][0]],ne=[U[1][1],U[3][1]];else if(W){var Pe=[U[0],U[2],U[4],U[6]];ve=Pe.map(function(Sn){return Sn[0]}),ne=Pe.map(function(Sn){return Sn[1]})}else ve=U.map(function(xt){return xt[0]}),ne=U.map(function(xt){return xt[1]});if(D.snapBoundInfos=pB(Ae,b.clipTargetBounds&&{left:0,top:0,right:O,bottom:I},ve,ne,1,1),T){var Ft=D.is3d,ur=D.allMatrix,di=Ft?4:3,Ja=_e;o&&(Ja=[N[0]+_e[0]-P[0],N[1]+_e[1]-P[1]]),T.deltaOffset=tn(ur,[Ja[0],Ja[1],0,0],di)}return Be(t,"onClip",dt(t,e,ae({clipEventType:"changed",clipType:R,poses:X,clipStyle:Ar,clipStyles:wn,distX:w,distY:S},wi((i={},i[R==="rect"?"clip":"clipPath"]=Ar,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Be(t,"onClipEnd",va(t,e,{})),i&&(o?z1e(t,e):a&&j1e(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},V1e={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":mr(e.inputEvent.target,Ze("origin"))},dragControlStart:function(t,e){var n=e.datas;uf(t,e);var r=dt(t,e,{dragStart:mi.dragStart(t,new wp().dragStart([0,0],e))}),i=Be(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(Oo(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var P=Pt(n.startOrigin,S),N=Pt(n.startTargetOrigin,S),D=tt(S,n.prevOrigin),O=K0(h,g,P,w),I=t.getRect(),C=Fa(df(O,u,f,w)),R=[I.left-C.left,I.top-C.top];n.prevOrigin=S;var M=[ps(N[0],u,x),ps(N[1],f,x)].join(" "),V=mi.drag(t,H0(e,t.state,R,!!r)),z=dt(t,e,ae(ae({width:u,height:f,origin:P,dist:S,delta:D,transformOrigin:M,drag:V},wi({transformOrigin:M,transform:V.transform},e)),{afterTransform:V.transform}));return Be(t,"onDragOrigin",z),z},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Be(t,"onDragOriginEnd",va(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function B1e(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];F1e(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function F1e(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function U1e(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function NB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=iu(t),PY(a,e,n,0,0,r,i)}function DB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=EO(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=D1e(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=dt(t,e,ae({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},wi({borderRadius:x},e)));return Be(t,"onRound",w),w}function OB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=bO(s).borderRadius,r.borderRadius=i))}return i}var $1e={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ze("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,P=h.isDisplayShadowRoundControls,N=h.groupable;if(!r)return null;var D=f||OB(t),O=o?4:3,I=NB(D,i,a,v,!0);if(!I)return null;var C=0,R=0,M=N?[0,0]:[c,u];return I.map(function(V,z){var L=V.horizontal,W=V.vertical,Q=V.direction||"",G=Re([],le(V.pos),!1);R+=Math.abs(L),C+=Math.abs(W),L&&Q.indexOf("n")>-1&&(G[1]-=T),W&&Q.indexOf("w")>-1&&(G[0]-=T),L&&Q.indexOf("s")>-1&&(G[1]+=T),W&&Q.indexOf("e")>-1&&(G[0]+=T);var Y=tt(En(s,G,O),M),J=P&&P!=="horizontal",ee=V.vertical?C<=x[1]&&(J||!V.virtual):R<=x[0]&&(P||!V.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(z),className:Ze("control","border-radius",V.vertical?"vertical":"",V.virtual?"virtual":""),"data-radius-index":z,style:{display:ee?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=dt(t,e,{}),g=Be(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,uf(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,P=S.height;r.isRound=!0,r.prevDist=[0,0];var N=OB(t),D=NB(N||"",T,P,w,!0)||[];return r.controlPoses=D,S.borderRadiusState=EO(D,b,T,P).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(Oo(e),2),s=a[0],o=a[1],c=[s,o],u=tt(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(N){var D=N.horizontal,O=N.vertical,I=[D*S*c[0],O*w*c[1]];if(D){if(h[0]===1)return I;if(h[0]<4&&D!==S)return I}else{if(h[1]===0)return I[1]=O*S*c[0]/v*b,I;if(w){if(h[1]===1)return I;if(h[1]<4&&O!==w)return I}}return[0,0]});T[i]=c;var P=r.map(function(N,D){return ae(ae({},N),{pos:Pt(N.pos,T[D])})});return i<4?P.slice(0,i+1).forEach(function(N){N.virtual=!1}):P.slice(4,i+1).forEach(function(N){N.virtual=!1}),n.prevDist=[s,o],DB(t,e,c,u,P)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))U1e(u,s);else if(o&&(g===!0||g==="line")){var v=le(MW(t,e),2),b=v[0],x=v[1];B1e(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&DB(t,e,[0,0],[0,0],u)}var w=va(t,e,{});return Be(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Be(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),wi({borderRadius:n.borderRadius},o))})},n);return Be(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Ts(t,"roundable",e);u_(t,"onRound",function(o){var c=ae({targets:t.props.targets,events:i.map(function(u,f){return ae(ae(ae({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),wi({borderRadius:o.borderRadius},u))})},o);Be(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ae({targets:t.props.targets,events:i.map(function(o,c){var u;return ae(ae({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Be(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function q1e(t,e){var n=e?4:3,r=fn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var DY={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(SW(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=q1e(o,r)?[]:iu(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return dt(t,e,{setTransform:function(n){e.datas.startTransforms=cr(n)?n:iu(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return dt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRender",dt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Be(t,"onBeforeRenderEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Be(t,"onBeforeRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Be(t,"onBeforeRenderGroup",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Be(t,"onBeforeRenderGroupEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},OY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Be(t,"onRenderStart",dt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Be(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Be(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Be(t,"onRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Be(t,"onRenderGroup",dt(t,e,ae(ae({isPinch:!!e.isPinch,targets:t.props.targets,transform:ox(e),transformObject:{}},wi(lx(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Be(t,"onRenderGroupEnd",dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:ox(e)},wi(lx(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return xp(o1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,transformObject:n,transform:ox(e)},wi(lx(e))))},fillDragEndParams:function(t,e){var n={};return xp(o1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:ox(e)},wi(lx(e))))}};function mv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=Re([],le(e),!1);if(h){var b=a.requestAble;v.some(function(z){return z.name===b})||v.push.apply(v,Re([],le(t.props.ables.filter(function(z){return z.name===b})),!1))}if(!v.length||v.every(function(z){return z.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var z;S=!0,(z=a.stop)===null||z===void 0||z.call(a)},P=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());P&&t.updateRect(i,!0,!1);var N=a.datas,D=g?"controlGesto":"targetGesto",O=t[D],I=function(z,L,W){if(!(L in z)||O!==t[D])return!1;var Q=z.name,G=N[Q]||(N[Q]={});if(o&&(G.isEventStart=!W||!z[W]||z[W](t,a)),!G.isEventStart)return!1;var Y=z[L](t,ae(ae({},a),{stop:T,datas:G,originalDatas:N,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(G.isEventStart=!1),Y};P&&v.forEach(function(z){z.unset&&z.unset(t)}),I(DY,"drag".concat(r).concat(i));var C=0,R=0;n.forEach(function(z){if(S)return!1;var L="".concat(z).concat(r).concat(i),W="".concat(z).concat(r,"Condition");i===""&&!h&&h1e(t.state,a);var Q=v.filter(function(J){return J[L]});Q=Q.filter(function(J,ee){return J.name&&Q.indexOf(J)===ee});var G=Q.filter(function(J){return I(J,L,W)}),Y=G.length;S&&++C,Y&&++R,!S&&o&&Q.length&&!Y&&(C+=Q.filter(function(J){var ee=J.name,X=N[ee];return X.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&I(OY,"drag".concat(r).concat(i));var M=O!==t[D]||C===n.length;if((c||S||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(z){z.state.gestos={}}),v.forEach(function(z){z.unset&&z.unset(t)})),o&&!M&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||M)return!1;if(!o&&R&&!s||c){var V=t.props.flushSync||uY;V(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&mv(t,e,n,r,i+"After",a),!0}function AO(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||mr(a,"moveable-area")||mr(a,"moveable-padding")||mr(a,"moveable-edgeDraggable")}}function RY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=AO(t);return jY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function MY(t,e){var n=t.controlBox,r=[];r.push(n);var i=AO(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return jY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function jY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,P=s.dragContainer,N=wo(P,!0),D={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:N||Kc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?h:!1,dragFocusedInput:g},O=new vxe(e,D),I=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(R){O.on("".concat(C).concat(R),function(M){var V,z=M.eventType,L=C==="drag"&&M.isPinch;if(i[z]&&!i[z](M)){M.stop();return}if(!L){var W=C==="drag"?[C]:["drag",C],Q=Re([],le(t[n]),!1),G=mv(t,Q,W,r,R,M);G?(t.props.stopPropagation||R==="Start"&&I)&&((V=M?.inputEvent)===null||V===void 0||V.stopPropagation()):M.stop()}})})}),O}var G1e=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function H1e(t,e,n,r){var i;n===void 0&&(n=e);var a=FW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=swe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,P=r,N=4,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,O=c,I=fn(N),C=fn(N),R=fn(N),M=fn(N),V=s.length,z=x.map(function(ee){return ae(ae({},ee),{matrix:ee.matrix?Re([],le(ee.matrix),!1):void 0})}).reverse();s.reverse(),!o&&P&&(O=Is(O,3,4),DP(s)),!w&&P&&DP(z),z.forEach(function(ee){C=tn(C,ee.matrix,N)});var L=n||mu(t),W=((i=z[0])===null||i===void 0?void 0:i.target)||Wv(L,L,!0).offsetParent,Q=z.slice(1).reduce(function(ee,X){return tn(ee,X.matrix,N)},fn(N));s.forEach(function(ee,X){if(V-2===X&&(R=I.slice()),V-1===X&&(M=I.slice()),!ee.matrix){var U=s[X+1],Z=c1e(ee,U,W,N,tn(Q,I,N));ee.matrix=Hd(Z,N)}I=tn(I,ee.matrix,N)});var G=!D&&o;O||(O=fn(G?4:3));var Y=c_(D&&O.length===16?Is(O,4,3):O,G),J=C;return C=xW(C,N,N),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:C,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:M,allMatrix:I,targetMatrix:O,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:P,offsetContainer:h,offsetRootContainer:S}}function K1e(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=pY(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=H1e(t,e,n,r),f=Hh(u.allMatrix,u.transformOrigin,i,a);o=ae(ae({},u),f);var h=Hh(u.allMatrix,[50,50],100,100);s=gY([h.pos1,h.pos2],h.direction)}var g=4;return ae(ae(ae({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:fn(g),rootMatrix:fn(g),beforeMatrix:fn(g),offsetMatrix:fn(g),allMatrix:fn(g),targetMatrix:fn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function jP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=ux(),u=ux(),f=ux(),h=ux(),g=[0,0],v={},b=K1e(e,n,i,!0);if(e){var x=Ki(e);a.forEach(function(z){v[z]=x(z)});var w=b.is3d?4:3,S=Hh(b.offsetMatrix,Pt(b.transformOrigin,wW(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Pt(S.origin,[S.left-b.left,S.top-b.top]),h=gv(b.offsetRootContainer);var T=Wv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var P=Hh(tn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),N=Hh(b.originalRootMatrix,d1(Ki(T)("transformOrigin")).map(function(z){return parseFloat(z)}),T.offsetWidth,T.offsetHeight);if(c=dk(P,h),f=dk(N,h,T,!0),t){var D=P.left,O=P.top;u=dk({left:D,top:O,bottom:O,right:O},h)}}else{c=gv(e),f=awe(T),t&&(u=gv(t));var I=f.left,C=f.top,R=f.clientLeft,M=f.clientTop,V=[c.left-I,c.top-C];g=tt(Ep(b.rootMatrix,V,4),[R+b.left,M+b.top])}}return ae({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function RB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Kd([e,n,r,i]),s=[a.minX,a.minY],o=tt(t.origin,s);return e=tt(e,s),n=tt(n,s),r=tt(r,s),i=tt(i,s),ae(ae({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var Tp=(function(t){q0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ae({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},jP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new t_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}lbe(n._observerId),n._observerId=WK(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,P=r.target,N=r.direction,D=r.hasFixed,O=r.offsetDelta,I=n.targets,C=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Q){R["data-able-".concat(Q.name.toLowerCase())]=!0});var M=this._getAbleClassName(),V=I&&I.length&&(P||h)||s||!this._hasFirstTarget&&this.state.isPersisted,z=this.controlBox||this.props.firstRenderState||this.props.persistData,L=[S-x,T-w];!h&&n.useAccuratePosition&&(L[0]+=O[0],L[1]+=O[1]);var W={position:D?"fixed":"absolute",display:V?"block":"none",visibility:z?"visible":"hidden",transform:"translate3d(".concat(L[0],"px, ").concat(L[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(W["--moveable-line-padding"]=g),v&&(W["--moveable-control-padding"]=v),Es(f,ae({cspNonce:c,ref:hl(this,"controlBox"),className:"".concat(Ze("control-box",N===-1?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(a)},R,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Mh(this,!1),Mh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Hi(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(oO)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&AO(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Zp(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ae({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=rB([a,s,c,o],u),S=dxe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=TW(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?bP([n,r],rB([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Sp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=jP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=RB(a.persistData);for(var b in v)g[b]=v[b]}s&&Sp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=qa(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Fa(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Pt(w,n.origin),T=Pt(w,n.beforeOrigin),P=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:P,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&OP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&OP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return m1e(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Hi(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Re([],le(o[v]),!1),w={request:function(S){return mv(a,x,["drag"],b,"",ae(ae({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return mv(a,x,["drag"],b,"End",ae(ae({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return mv(a,x,["drag"],b,"Start",ae(ae({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=TY(i||{}),T=S.left,P=S.top,N=S.bottom,D=S.right,O=c?4:3,I=[];x?I=s:this.controlBox&&r.groupable?I=a:I=Pt(a,[v,b]);var C=a1(O,Hd(I.map(function(W){return-W}),O),o,Hd(s,O)),R=Oa(C,u,[-T,-P],O),M=Oa(C,f,[D,-P],O),V=Oa(C,h,[-T,N],O),z=Oa(C,g,[D,N],O);n.renderPoses=[R,M,V,z],n.renderLines=[[R,M],[M,z],[z,V],[V,R]];{var L=w/2;n.renderLines=[[Oa(C,u,[-T-L,-P],O),Oa(C,f,[D+L,-P],O)],[Oa(C,f,[D,-P-L],O),Oa(C,g,[D,N+L],O)],[Oa(C,g,[D+L,N],O),Oa(C,h,[-T-L,N],O)],[Oa(C,h,[-T,N+L],O),Oa(C,u,[-T,-P-L],O)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!RP(o,r),f=u||!RP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=CW(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=RB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=dx(s,[o,c],a),h=dx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Es};return this.renderState={},f1e(wY(dx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},Re([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Mh(this,!1),this.updateState({gestos:{}})),r||Mh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=RY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=MY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=wo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Es};return c.renderLines.map(function(f,h){return Kv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=kl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=dx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new G1e(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=wo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=wo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Re(Re([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?_1e:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=xY(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=V0(a,i),o=s.removed,c=s.added;o.forEach(function(u){JK(r,a[u])}),c.forEach(function(u){ZK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Ze("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Kc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Kc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=Cxe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:uY,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(sW),kO={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=jh(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=jh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Re(Re([],le(i.map(function(b,x){return e.createElement(Tp,{key:"moveable"+x,ref:qK(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(wY(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,P=b.pos4,N=[w,S,T,P];return[[0,1],[1,3],[3,2],[2,0]].map(function(D,O){var I=le(D,2),C=I[0],R=I[1];return Kv(e,"",tt(N[C],g),tt(N[R],g),u,"group-rect-".concat(x,"-").concat(O))})}))),!1)}},W1e=G0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Be(t,"onClick",dt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=Al(i,function(c){return c.contains(r)}),o=a>-1),Be(t,"onClickGroup",dt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function lh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ae(ae({},t),{datas:e})}var Y1e=G0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?qW(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("edge"))&&mr(i,Ze("edgeDraggable"))},dragStart:function(t,e){return mi.dragStart(t,lh(e))},drag:function(t,e){return mi.drag(t,lh(e))},dragEnd:function(t,e){return mi.dragEnd(t,lh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("line"))},dragGroupStart:function(t,e){return mi.dragGroupStart(t,lh(e))},dragGroup:function(t,e){return mi.dragGroup(t,lh(e))},dragGroupEnd:function(t,e){return mi.dragGroupEnd(t,lh(e))},unset:function(t){return mi.unset(t)}}),zY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},CO=[DY,CY,Jwe,y1e,mi,Y1e,IP,b1e,w1e,Mwe,A1e,k1e,E1e,V1e,L1e,$1e,kO,zY,W1e,kY,OY],X1e=CO.reduce(function(t,e){return(e.events||[]).forEach(function(n){QK(t,n)}),t},[]),Q1e=CO.reduce(function(t,e){return(e.props||[]).forEach(function(n){QK(t,n)}),t},[]);function MB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function px(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function jB(t,e){return Math.max.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function zB(t,e){return Math.min.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Z1e(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ot(e,Ei);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[TP,sB],w=[[0,0],[0,0]],S=[TP,sB],T=[[0,0],[0,0]];t.forEach(function(te){te.forEach(function(K){var ue=MB([-v,1,0],K),ie=MB([-b,1,0],K);x[0]>ue&&(w[0]=K,x[0]=ue),x[1]<ue&&(w[1]=K,x[1]=ue),S[0]>ie&&(T[0]=K,S[0]=ie),S[1]<ie&&(T[1]=K,S[1]=ie)})});var P=le(w,2),N=P[0],D=P[1],O=le(T,2),I=O[0],C=O[1],R=[-v,1,px([-v,1],N)],M=[-v,1,px([-v,1],D)],V=[-b,1,px([-b,1],I)],z=[-b,1,px([-b,1],C)];n=le([[R,V],[R,z],[M,V],[M,z]].map(function(te){var K=le(te,2),ue=K[0],ie=K[1];return aO(ue,ie)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var L=zB(t,0),W=zB(t,1),Q=jB(t,0),G=jB(t,1);if(a=[L,W],s=[Q,W],o=[L,G],c=[Q,G],u=Q-L,f=G-W,h%180){var Y=[o,a,c,s];r=le(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-W,f=Q-L}}if(h%360>180){var Y=[c,o,s,a];i=le(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Kd([a,s,o,c]),ee=J.minX,X=J.minY,U=J.maxX,Z=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ee,minY:X,maxX:U,maxY:Z,rotation:e}}function LY(t,e){var n=e.map(function(r){if(cr(r)){var i=LY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Hi(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&cr(n[0])?n[0]:n}var J1e=(function(t){q0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new EW,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Sp(!0),this.moveables.forEach(function(Se){Se.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(Se){return{finded:!1,manager:Se}}),h=this.props.targetGroups||[],g=LY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,Re([],le(f.filter(function(Se){var se=Se.finded;return!se}).map(function(Se){var se=Se.manager;return se})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(Se,se,Ae){var ve=Se.map(function(Ye){if(cr(Ye)){var Ve=T(Ye,se),it=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return b.push(Ve),{poses:it,rotation:Ve.rotation}}else return{poses:qa(Ye.state),rotation:Ye.getRotation()}}),ne=ve.map(function(Ye){var Ve=Ye.rotation;return Ve}),Pe=0,be=ne[0],_e=ne.every(function(Ye){return Math.abs(be-Ye)<.1});x?Pe=!v&&_e?be:w:Pe=!v&&!Ae&&_e?be:se;var De=ve.map(function(Ye){var Ve=Ye.poses;return Ve}),Oe=Z1e(De,Pe);return Oe}var P=T(g,this.rotation,!0);x&&(this.rotation=P.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var N=this.transformOrigin,D=this.rotation,O=this.scale,I=P.width,C=P.height,R=P.minX,M=P.minY,V=v1e([[0,0],[I,0],[0,C],[I,C]],_O(N,I,C),this.rotation/180*Math.PI),z=Kd(V.result),L=z.minX,W=z.minY,Q=" rotate(".concat(D,"deg)")+" scale(".concat(vi(O[0]),", ").concat(vi(O[1]),")"),G="translate(".concat(-L,"px, ").concat(-W,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(I,"px;height:").concat(C,"px;")+"transform: ".concat(G),s.width=I,s.height=C;var Y=this.getContainer(),J=jP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ee=[J.left,J.top],X=le(qa(J),4),U=X[0],Z=X[1],te=X[2],K=X[3],ue=Kd([U,Z,te,K]),ie=[ue.minX,ue.minY],oe=vi(O[0]*O[1]);J.pos1=tt(U,ie),J.pos2=tt(Z,ie),J.pos3=tt(te,ie),J.pos4=tt(K,ie),J.left=R-J.left+ie[0],J.top=M-J.top+ie[1],J.origin=tt(Pt(ee,J.origin),ie),J.beforeOrigin=tt(Pt(ee,J.beforeOrigin),ie),J.originalBeforeOrigin=Pt(ee,J.originalBeforeOrigin),J.transformOrigin=tt(Pt(ee,J.transformOrigin),ie),u.style.transform="translate(".concat(-L-ie[0],"px, ").concat(-W-ie[1],"px)")+Q,Sp(),this.updateState(ae(ae({},J),{posDelta:ie,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Re(Re([],le(this.props.ables),!1),[kO],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=wo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Mh(this,!1),Mh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=RY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=MY(this,"GroupControl")));var g=!RP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!EY(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ae(ae({},Tp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Tp),eSe=(function(t){q0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Es(s,{cspNonce:a,ref:hl(this,"controlBox"),className:Ze("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return Es(Tp,ae({key:"moveable"+v,ref:qK(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Sp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Sp()},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ae(ae({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Hi(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Tp);function VY(t,e){var n=[];return t.forEach(function(r){if(r){if(Gi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push.apply(n,Re([],le(VY(r,e)),!1)):n.push(r)}}),n}function BY(t,e){var n=[];return t.forEach(function(r){if(r){if(Gi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push(BY(r,e)):n.push(r)}}),n}function FY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?cr(n)&&cr(i)?FY(n,i):!0:!1})}var tSe=(function(t){q0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new EW,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=kl(n).join(`
`);this.defaultStyled=CW("div",Xye(oO,Vxe+i))},e.getTotalAbles=function(){return Re([CY,kO,zY,kY],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Axe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=VY(u,f),g=h.length>1,v=r.getTotalAbles(),b=Re(Re([],le(v),!1),le(a||[]),!1),x=ae(ae(ae({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Es(eSe,ae({key:"individual-group",ref:hl(this,"moveable")},x,{target:null,targets:h}));if(g){var P=BY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var N=S.props.target;N&&h.indexOf(N)>-1&&(w=ae({},S.state))}return Es(J1e,ae({key:"group",ref:hl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:P,firstRenderState:w}))}else{var D=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var O=S.moveables||[],I=Hi(O,function(C){return C.props.target===D});I&&(w=ae({},I.state))}return Es(Tp,ae({key:"single",ref:hl(this,"moveable")},x,{target:D,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=SO(this.props.target||this.props.targets),a=typeof document<"u",s=FY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Gi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else cr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,kxe([Qye(RW)],e.prototype,"moveable",void 0),e})(sW),nSe=(function(t){q0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=CO,e})(tSe),zP=function(t,e){return zP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},zP(t,e)};function IO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yv=function(){return Yv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yv.apply(this,arguments)};function rSe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var iSe=(function(t){IO(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Es(nSe,Yv({ref:hl(this,"moveable")},this.state))},e})(J2),aSe=Q1e,sSe=RW,oSe=X1e,lSe=(function(t){IO(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Yv({},i),o={};oSe.forEach(function(f){o[obe("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Qp(r).createElement("div"),r.appendChild(c)),a.containerProvider=eB(Es(iSe,Yv({ref:hl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return cr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;eB(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=rSe([GV(sSe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),GV(aSe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(t_),UY=(function(t){IO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(lSe),Bc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Bc||{}),Hm=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Hm||{});const cSe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],uSe=["touchstart","touchmove","touchend","touchcancel"],dSe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function fSe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function hSe(t){var e;return cSe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function $Y(t){var e;return uSe.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function pSe(t){const{nativeEvent:e}=t;return e?dSe.includes(e?.type)||"pointerId"in e:!1}function pk(t){return hSe(t)||$Y(t)||pSe(t)}function LB(t){var e;const n=$Y(t)?(e=t?.touches)==null?void 0:e[0]:t;return fSe(n)?{x:n.pageX,y:n.pageY}:null}function gSe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function PO(t,{threshold:e=400,captureEvent:n=!1,detect:r=Bc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(D=>O=>{g.current||pk(O)&&(s!==void 0&&!s(O)||(n&&O.persist(),o?.(O,{context:D}),w.current=LB(O),g.current=!0,v.current=O.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(O,{context:D}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(D=>(O,I)=>{pk(O)&&g.current&&(w.current=null,n&&O.persist(),h.current?u?.(O,{context:D}):g.current&&f?.(O,{context:D,reason:I??Hm.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),P=A.useCallback(D=>O=>{if(pk(O)&&(c?.(O,{context:D}),i!==!1&&w.current)){const I=LB(O);if(I){const C=i===!0?25:i,R={x:Math.abs(I.x-w.current.x),y:Math.abs(I.y-w.current.y)};(R.x>C||R.y>C)&&T(D)(O,Hm.CancelledByMovement)}}},[T,i,c]),N=A.useCallback(D=>{if(t===null)return{};switch(r){case Bc.Mouse:{const O={onMouseDown:S(D),onMouseMove:P(D),onMouseUp:T(D)};return a&&(O.onMouseLeave=I=>{T(D)(I,Hm.CancelledOutsideElement)}),O}case Bc.Touch:return{onTouchStart:S(D),onTouchMove:P(D),onTouchEnd:T(D)};case Bc.Pointer:{const O={onPointerDown:S(D),onPointerMove:P(D),onPointerUp:T(D)};return a&&(O.onPointerLeave=I=>T(D)(I,Hm.CancelledOutsideElement)),O}}},[t,T,a,r,P,S]);return A.useEffect(()=>{function D(O){const I=gSe(O);T()(I)}return window.addEventListener("mouseup",D),window.addEventListener("touchend",D),window.addEventListener("pointerup",D),()=>{window.removeEventListener("mouseup",D),window.removeEventListener("touchend",D),window.removeEventListener("pointerup",D)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),N}const qY=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},g1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,rd=t=>g1(t).toISOString(),mSe=t=>{const e=g1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},vSe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Kh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=rd(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||mSe(r),description:e.description||"",merchant:e.merchant||void 0,type:vSe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},gx=t=>Kr(rt,"users",t,"transactions"),ySe={subscribeToTransactions:(t,e)=>{const n=Vi(gx(t),Ss("date","desc"));return tu(n,i=>{const a=i.docs.map(s=>Kh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Vi(gx(t),ew("month","==",e),Ss("date","desc"));return tu(r,i=>{const a=i.docs.map(s=>Kh({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Vi(gx(t),Ss("date","desc")),r=(await sa(e)).docs.map(i=>Kh({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await qS(gx(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=_t(rt,"users",t,"transactions",e);return await lo(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=_t(rt,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await ca(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},gk=t=>Kr(rt,"users",t,"envelopes"),bSe={subscribeToEnvelopes:(t,e)=>{const n=Vi(gk(t),Ss("orderIndex","asc"));return tu(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=gk(t),i=(await sa(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await qS(gk(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=_t(rt,"users",t,"envelopes",e.id);return await la(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=_t(rt,"users",t,"envelopes",e);return await lo(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=_t(rt,"users",t,"envelopes",e);await ca(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},mk=t=>Kr(rt,"users",t,"distributionTemplates"),xSe={subscribeToDistributionTemplates:(t,e)=>{const n=Vi(mk(t),Ss("lastUsed","desc"));return tu(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Vi(mk(t),Ss("lastUsed","desc"));return(await sa(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await qS(mk(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=_t(rt,"users",t,"distributionTemplates",e.id);return await la(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=_t(rt,"users",t,"distributionTemplates",e);return await lo(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=_t(rt,"users",t,"distributionTemplates",e);await ca(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},vk=t=>Kr(rt,"users",t,"appSettings"),GY={subscribeToAppSettings:(t,e)=>{const n=Vi(vk(t),x5(1));return tu(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Vi(vk(t),x5(1)),n=await sa(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await qS(vk(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=_t(rt,"users",t,"appSettings",e.id);return await la(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=_t(rt,"users",t,"appSettings",e);return await la(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=_t(rt,"users",t,"appSettings",e);await ca(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},VB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:GY},Symbol.toStringTag,{value:"Module"}));class ll{static instance;constructor(){}static getInstance(){return ll.instance||(ll.instance=new ll),ll.instance}createId(){return _t(Kr(rt,"temp")).id}async createCategory(e){const n=_t(rt,`users/${e.userId}/categories`,e.id);return await la(n,e),e}async getCategories(e){const n=Vi(Kr(rt,`users/${e}/categories`),Ss("orderIndex","asc"));return(await sa(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=_t(rt,`users/${e}/categories`,n.id);await la(r,n,{merge:!0})}async deleteCategory(e,n){const r=_t(rt,`users/${e}/categories`,n);await ca(r)}async reorderCategories(e,n){const r=LI(rt);n.forEach((i,a)=>{const s=_t(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=LI(rt);i.slice(s,s+a).forEach(u=>{const f=_t(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Vi(Kr(rt,`users/${e}/categories`),Ss("orderIndex","asc"));return tu(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}ll.getInstance();class bs{static instance;static getInstance(){return bs.instance||(bs.instance=new bs),bs.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=_t(rt,"users",e,s,f);i.push({ref:h,data:u})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=LI(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=Kr(rt,"users",e,"envelopes"),a=(await sa(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=Kr(rt,"users",e,"transactions"),r=Vi(n,Ss("date","desc")),a=(await sa(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Kh(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Kr(rt,"users",e,"transactions"),i=Vi(r,ew("month","==",n),Ss("date","desc")),s=(await sa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Kh(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Kr(rt,"users",e,"transactions"),i=Vi(r,ew("envelopeId","==",n),Ss("date","desc")),s=(await sa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Kh(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Kr(rt,"users",e.userId,"envelopes"),r=_t(n),i=ht.now(),a={...e,createdAt:i,lastUpdated:i};la(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:rd(i),lastUpdated:rd(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=_t(rt,"users",e,"envelopes",n.id);la(r,{...n,lastUpdated:ht.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=_t(rt,"users",e,"envelopes",n),i=Vi(Kr(rt,"users",e,"transactions"),ew("envelopeId","==",n)),s=(await sa(i)).docs.map(o=>ca(o.ref));await Promise.all([ca(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=_t(rt,"users",e,"envelopes",i.id);return la(a,{orderIndex:i.orderIndex,lastUpdated:ht.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=Kr(rt,"users",e.userId,"transactions"),r=_t(n),i=ht.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};la(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=_t(rt,"users",e,"transactions",n.id);la(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=_t(rt,"users",e,"transactions",n);ca(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=_t(rt,"users",e.userId,"monthlyBudgets",e.month),r=ht.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};lo(n,{incomeSources:Zhe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?la(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:rd(r),updatedAt:rd(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=_t(rt,"users",e,"monthlyBudgets",r);OA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:ht.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});lo(a,{incomeSources:u,updatedAt:ht.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=_t(rt,"users",e,"monthlyBudgets",r);OA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);lo(i,{incomeSources:c,updatedAt:ht.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=_t(rt,"users",e.userId,"monthlyBudgets",e.month),r=ht.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};lo(n,i).catch(s=>{s.code==="not-found"?la(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:rd(r),updatedAt:rd(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=_t(rt,"users",e,"monthlyBudgets",r),s={updatedAt:ht.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),lo(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=_t(rt,"users",e,"monthlyBudgets",r);lo(i,{[`allocations.${n}`]:m5(),updatedAt:ht.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=_t(rt,"users",e,"monthlyBudgets",n),i=await OA(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=Kr(rt,"users",e,"envelopeAllocations"),s=await sa(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>ca(_t(rt,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=Kr(rt,"users",e,"monthlyBudgets"),f=await sa(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=m5(),S=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),S&&(w.updatedAt=ht.now(),await lo(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>ca(_t(rt,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=_t(rt,"users",e,"monthlyBudgets",n);return tu(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=Kr(rt,"users",e,r),a=await sa(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>ca(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const NO=bs.getInstance(),wSe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),SSe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),BB=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=bSe.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(wSe),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),S=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:S})}),i={},a=g=>{i[g]||(i[g]=ySe.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(S=>S.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=ll.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(SSe),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=xSe.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=GY.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=NO.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},_Se=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),BB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),BB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=NO.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Xu=bs.getInstance(),mx=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},ESe=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=mx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Xu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=mx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Xu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=mx();await Xu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=mx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Xu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=nn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await Xu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=nn.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await Xu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=nn.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await Xu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),ch=bs.getInstance(),uh=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},TSe=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=uh(),i={...n,userId:r.id},a=await ch.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=uh();await ch.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=uh();await ch.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=uh();await ch.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=uh(),o={...a,name:r};await ch.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=uh(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await ch.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),dh=bs.getInstance(),fh=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},ASe=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=fh();$.log(" Adding income source:",{month:n,source:r});const a=await dh.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await dh.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await dh.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=fh();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if($.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=fh(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=fh(),i=e().currentMonth,a=await dh.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=fh(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await dh.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=fh();await dh.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),Js=ll.getInstance(),Sm=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},kSe=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=nn.getState();if(!n)return;const r=await Js.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=Sm(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=Js.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await Js.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=Sm(),i={...n,updatedAt:new Date().toISOString()};await Js.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=Sm(),i=e().envelopes.filter(a=>a.categoryId===n);if(i.length>0){let a=e().categories.find(s=>s.name.toLowerCase().trim()==="uncategorized"&&s.id!==n);if(!a){const s=Js.createId(),o=new Date().toISOString();a={id:s,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:o,updatedAt:o},await Js.createCategory(a),t(c=>c.categories.some(f=>f.id===s)?{}:{categories:[...c.categories,a]}),$.log(' Created new "Uncategorized" category for orphaned envelopes:',s)}for(const s of i){const o={...s,categoryId:a.id};await e().updateEnvelope(o)}$.log(` Reassigned ${i.length} envelopes to "Uncategorized"`)}await Js.deleteCategory(r.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},ensureDefaultCategory:async()=>{const n=e().categories.find(o=>o.isDefault);if(n)return n.id;const r=Sm(),i=Js.createId(),a=new Date().toISOString(),s={id:i,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:a,updatedAt:a};return await Js.createCategory(s),t(o=>o.categories.some(u=>u.id===i)?{}:{categories:[...o.categories,s]}),$.log(' Created default "Uncategorized" category:',i),i},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=Sm(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await Js.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),CSe=bs.getInstance(),Qu=()=>nn.getState().currentUser?.id||"",ISe=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Qu();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await CSe.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Qu();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Qu();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Qu();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Qu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Qu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Qu();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),PSe=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=nn.getState();if(a){const{AppSettingsService:s}=await Xh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>VB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=nn.getState();if(r){const{AppSettingsService:a}=await Xh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>VB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),_m=bs.getInstance(),yk=ll.getInstance(),FB=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},NSe=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([_m.getEnvelopes(r.id),yk.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),_m.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await yk.deduplicateCategories(r.id)>0&&(c=await yk.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await _m.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=FB(),{monthlyBudgetService:i}=await Xh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-DWRrT2mX.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=nn.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await _m.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=FB();return $.log(" Starting Time Machine Restore for user:",r.id),await _m.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),DSe=()=>nn.getState().currentUser?.id||"",mt=oD()(yue(bq((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...ESe({set:t,get:e}),...TSe({set:t,get:e}),...ASe({set:t,get:e}),...kSe({set:t,get:e}),...ISe({set:t,get:e}),...PSe({set:t,get:e}),...NSe({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));_Se({useBudgetStore:mt,useAuthStore:nn,getCurrentUserId:DSe});const HY=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:mt},Symbol.toStringTag,{value:"Module"})),UB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},OSe=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=mt(),{currentUser:s}=nn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=mt(),{showToast:b}=gu(),[x,w]=A.useState(!1),S=A.useRef(null),[T,P]=A.useState(!1),N=!T||r||v,[D,O]=A.useState([]),I=A.useRef([]),[C,R]=A.useState([]),M=A.useRef([]),V=A.useCallback(te=>t.find(ie=>ie.id===te)?.isPiggybank?mt.getState().getEnvelopeBalance(te):mt.getState().getEnvelopeBalance(te,o),[t,o]);A.useEffect(()=>{const te=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const ue=UB(K.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ie=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ie}catch(ue){return $.error(` Error processing piggybank ${K.name}:`,ue,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,ue)=>{const ie=K.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});R(te),M.current=te},[t,o]);const z=C,L=D;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),P(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,v]),A.useEffect(()=>{const te=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ie=(u[o]||[]).some(Se=>Se.envelopeId===K.id),oe=e.some(Se=>Se.envelopeId===K.id&&(Se.month===o||Se.date.startsWith(o)));return ie||oe}).sort((K,ue)=>{const ie=K.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});O(te),I.current=te},[t,u,o,e]);const W=(c[o]||[]).reduce((te,K)=>te+K.amount,0),Q=(u[o]||[]).filter(te=>L.some(K=>K.id===te.envelopeId)||z.some(K=>K.id===te.envelopeId)).reduce((te,K)=>te+K.budgetedAmount,0),G=W-Q,Y=A.useCallback(async te=>{if(!te.length)return;const K=te.map(ue=>ue.id);try{await a(K)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),J=A.useCallback(async te=>{await Y(te)},[Y]),ee=A.useCallback(te=>{f(o,te.id).catch($.error),b(`Deleted "${te.name}"`,"neutral")},[f,o,b]),X=A.useCallback(async te=>{try{const K=te||o;$.log(" Copying to month:",K),await g(K),b("Previous month budget copied","success")}catch(K){$.error("Error copying previous month:",K),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await mt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(te){$.error("Error clearing month data:",te),b("Failed to clear month data","error")}},[s,o,b]),Z=A.useCallback(async(te,K)=>{try{await h(te,K),setTimeout(()=>{const ue=mt.getState(),ie=ue.currentMonth,oe=ue.incomeSources[ie]||[],Se=ue.allocations[ie]||[],se=new Set(ue.envelopes.filter(Pe=>{if(Pe.isPiggybank){if(!Pe.isActive)return!1;if(Pe.createdAt){const be=UB(Pe.createdAt);if(!be)return!1;const _e=`${be.getFullYear()}-${String(be.getMonth()+1).padStart(2,"0")}`;return ie>=_e}return!0}return Pe.isActive!==!1}).map(Pe=>Pe.id)),Ae=Se.filter(Pe=>se.has(Pe.envelopeId)),ve=oe.reduce((Pe,be)=>Pe+be.amount,0),ne=Ae.reduce((Pe,be)=>Pe+be.budgetedAmount,0);ve-ne<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ve-ne)<.005&&ve>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:L,piggybanks:z,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:N,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:V,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ee,clearMonthData:U,copyFromPreviousMonth:X,setEnvelopeAllocation:Z,localOrderRef:I,setLocalEnvelopes:O,localPiggybankOrderRef:M,setLocalPiggybanks:R}},RSe=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,S=Math.abs(b)<.005,T=b<-.005,P=x>0?w/x*100:0;let N="text-gray-900 dark:text-white",D="bg-green-500",O="Left to Budget",I=x>0?Math.min(P,100):0,C=!0;return x===0?(O="Add income to start budgeting",I=0,C=!1,N="text-gray-500 dark:text-zinc-500"):S?(N="text-green-600 dark:text-emerald-400",D="bg-green-500",O="Perfect! Every dollar has a job ",I=100,C=!1):T&&(N="text-red-600 dark:text-red-400",D="bg-red-500",O="You're not in Congress! Try again.",I=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${N}`,children:O}),C&&m.jsxs("span",{className:`text-sm font-bold truncate ${N}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${D}`,style:{width:`${I}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(Yle,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(ds,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},d_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=Kye(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(Sv,{className:"text-white w-6 h-6"})}),m.jsx(bt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},MSe=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=mt(),{showToast:o}=gu(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},jSe=({isVisible:t,onClose:e,categories:n,currentCategoryId:r,envelopeName:i,onSelect:a})=>(A.useEffect(()=>{if(t){const s=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,s)}}},[t]),m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm max-h-[70vh] overflow-hidden relative z-10 pb-[calc(env(safe-area-inset-bottom)+5rem)]",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(sD,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Move Envelope"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors text-lg",children:""})]}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800/50",children:m.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Moving ",m.jsx("span",{className:"font-medium text-gray-700 dark:text-zinc-300",children:i})," to:"]})}),m.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:n.map(s=>{const o=s.id===r;return m.jsxs("button",{onClick:()=>{o||a(s.id)},disabled:o,className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${o?"bg-blue-50 dark:bg-blue-900/20 cursor-default":"hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700"}`,children:[m.jsx("span",{className:`text-sm ${o?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:s.name}),o&&m.jsx(aD,{size:16,className:"text-blue-600 dark:text-blue-400"})]},s.id)})})]})]})})),zSe=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(dq,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(Uh,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},LSe="/personal-budget-pwa/icon-512.png",bk="/personal-budget-pwa/images/budget-balanced.png",vx=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],VSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(lf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),BSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(lf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),FSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),USe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(of,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),$Se=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),qSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),eo=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],GSe=()=>{const[t,e]=A.useState(eo),n=il.useRef(0);return A.useEffect(()=>{const r=[()=>e([eo[1],eo[0],eo[2],eo[3]]),()=>e([eo[3],eo[1],eo[0],eo[2]]),()=>e(eo)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(lr,{mode:"popLayout",children:t.map(r=>m.jsxs(bt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(Zh,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},HSe=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[u,f]=A.useState(vx),[h,g]=A.useState(!1),{addCategory:v}=mt(),b=M=>{f(V=>V.includes(M)?V.filter(z=>z!==M):[...V,M])},x=async()=>{for(let M=0;M<u.length;M++)await v({name:u[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let M=0;M<vx.length;M++)await v({name:vx[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const M=2e3,V=20,z=M/V,L=2500/V;let W=0;const Q=setInterval(()=>{W++;const G=Math.max(0,2500-L*W);c(G),W>=V&&(clearInterval(Q),setTimeout(()=>{let Y=0;const J=10,ee=200,X=500/J,U=setInterval(()=>{Y++;const Z=-(X*Y);c(Z),Y>=J&&clearInterval(U)},ee)},1e3))},z);return()=>clearInterval(Q)}},[a,r]);const T=(M=>{const[V,z]=M.split("-");return new Date(parseInt(V),parseInt(z)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),P=[{icon:Uh,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(jm,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(ep,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:Wce,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:vx.map(M=>m.jsxs("button",{onClick:()=>b(M),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(M)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(M)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(M)&&m.jsx(so,{size:12,className:"text-white"})}),M]},M))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:jm,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(VSe,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(lf,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:ep,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(BSe,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:Zh,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(Zh,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(GSe,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:gd,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(FSe,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(M=>M+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Fce,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(bt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:of,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(USe,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Xce,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jm,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(gd,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:Aw,title:"Analytics: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Analytics"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx($Se,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(fq,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Aw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Analytics"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:gd,title:"Analytics: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(qSe,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jm,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(gd,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:bk,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Analytics"].map((M,V)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:V+1})}),m.jsx("span",{className:"text-sm",children:M})]},V))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],N=P[r],D=N.useCustomIcon?bk:N.icon,O=r===P.length-1,I=r===0,C={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=C[N.color]||C.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(lr,{mode:"wait",children:m.jsxs(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(vq,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:N.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:N.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:LSe,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):N.useCustomIcon?m.jsx("img",{src:bk,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof D=="string"?null:m.jsx(D,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:N.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:P.map((M,V)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${V===r?`w-8 ${R.button}`:V<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},V))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",P.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!I&&m.jsxs("button",{onClick:()=>i(M=>M-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(Sl,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(O)x();else{if(N.title.includes("Choose Categories")&&u.length===0)return;i(M=>M+1)}},disabled:N.title.includes("Choose Categories")&&u.length===0,className:`${I?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:O?m.jsxs(m.Fragment,{children:[m.jsx(Uh,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(Vle,{className:"w-5 h-5"})]})})]})]},r)})]})})},KSe=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o,onMoveCategory:c})=>{const u=A.useRef(null),[f,h]=A.useState(!1),g=PO(M=>{qY(),o(M,t.id)},{threshold:500,cancelOnMovement:25,detect:Bc.Touch}),v=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,x=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,S=e,T=(M,V=1)=>{const z=M.replace("#",""),L=parseInt(z,16),W=L>>16&255,Q=L>>8&255,G=L&255;return`rgba(${W}, ${Q}, ${G}, ${V})`},P=`linear-gradient(135deg, ${T(x,.14)} 0%, ${T(x,.05)} 100%)`,N=T(x,.4),D=v&&v>0?Math.min(S/v*100,100):0,O=v&&S>=v;A.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(h(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&f){const M=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(M)}},[a,f]);const I=M=>{if(f||i){M.preventDefault(),M.stopPropagation();return}n(t.id)},C=a===t.id,R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:M=>o(M,t.id),children:m.jsx(Zh,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${x}20`},children:m.jsx(of,{size:12,style:{color:x}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(gd,{size:10,style:{color:x}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Rce,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c&&m.jsx("button",{onClick:M=>{M.stopPropagation(),c(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(sD,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",S.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",v?.toFixed(0)||"0"]})]})]})]}),v&&v>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${D}%`,backgroundColor:x}})}),O&&!v&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(bt.div,{...g(),layout:!C,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:M=>{r&&r(M),u.current=M},onClick:I,style:{background:P,borderColor:N,boxShadow:C?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:C?50:1,scale:C?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},Em=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},WSe=12,YSe=(t,e,n)=>Math.min(Math.max(t,e),n),XSe=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f,onMoveCategory:h})=>{const g=!!t.isPiggybank,v=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${Em(v,.18)} 0%, ${Em(v,.08)} 100%)`:void 0,x=g?Em(v,.5):void 0,[w,S]=A.useState(!1),T=PO(z=>{qY(),f(z,t.id)},{threshold:500,cancelOnMovement:25,detect:Bc.Touch}),P=i.filter(z=>z.envelopeId===t.id&&z.month===a),N=P.filter(z=>z.type==="Expense"),D=P.filter(z=>z.type==="Income"),O=N.reduce((z,L)=>z+(L.amount||0),0),I=D.reduce((z,L)=>z+(L.amount||0),0),C=I>0?Math.max(0,O/I*100):0,R=z=>{if(w||o){z.preventDefault(),z.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&S(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(S(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&w){const z=setTimeout(()=>{S(!1)},300);return()=>clearTimeout(z)}},[c,w]);const M=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:z=>f(z,t.id),children:m.jsx(Zh,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[g&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:Em(v,.4),backgroundColor:Em(v,.15),color:v},children:m.jsx(of,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:z=>{z.stopPropagation(),h(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(sD,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"text-red-500":C>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"bg-red-500":C>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-C,2)}%`}})})})]})]}),V=c===t.id;return m.jsx(bt.div,{...T(),layout:!V,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:R,style:{boxShadow:V?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:x,cursor:V?"grabbing":"pointer",zIndex:V?50:1,scale:V?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:M})},QSe=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1,onMoveCategory:u})=>{const[f,h]=A.useState(e),g=A.useRef(e),[v,b]=A.useState(!1),[x,w]=A.useState(null),S=A.useRef(!1),T=A.useRef(null),P=A.useRef({}),N=A.useRef({}),D=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{v||(h(e),g.current=e)},[e,v]);const O=A.useCallback((C,R)=>{const M=N.current[R];if(M){S.current=!0;const V=C.nativeEvent||C;M.dragStart(V)}},[]),I=A.useCallback(C=>R=>{R?P.current[C]=R:delete P.current[C]},[]);return A.useEffect(()=>{const C=()=>{Object.values(N.current).forEach(V=>V?.destroy()),N.current={}};if(!f.length)return;const R=()=>{f.forEach(V=>{const z=P.current[V.id];if(!z||!T.current)return;const L=new UY(T.current,{target:z,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});L.on("dragStart",Q=>{if(!S.current){Q.stop();return}const G=Q.inputEvent.target;if(G.closest(".js-budget-target")||G.tagName==="INPUT"){Q.stop();return}const Y=g.current.findIndex(X=>X.id===V.id),J=Q.target,ee=J.getBoundingClientRect();w(V.id),D.current={activeId:V.id,startIndex:Y,currentIndex:Y,itemHeight:ee.height+WSe},J.style.transition="none",J.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",J.style.zIndex="20",b(!0)});let W=null;L.on("drag",Q=>{const G=Q.target;W!==null&&cancelAnimationFrame(W),W=requestAnimationFrame(()=>{const Y=D.current;if(Y.activeId!==V.id)return;const J=Q.beforeTranslate[1];G.style.transform=`translateY(${J}px)`,G.style.transition="none";const{itemHeight:ee,startIndex:X}=Y,U=Math.round(J/ee),Z=YSe(X+U,0,g.current.length-1);Z!==Y.currentIndex&&(Y.currentIndex=Z,g.current.forEach((te,K)=>{if(te.id===V.id)return;const ue=P.current[te.id];if(!ue)return;let ie=0;X<Z&&K>X&&K<=Z?ie=-ee:X>Z&&K>=Z&&K<X&&(ie=ee),ue.style.transform=ie?`translateY(${ie}px)`:"",ue.style.transition="transform 0.2s ease"})),W=null})}),L.on("dragEnd",Q=>{W!==null&&(cancelAnimationFrame(W),W=null);const G=Q.target,{startIndex:Y,currentIndex:J}=D.current;if(G.style.transform="",G.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",G.style.boxShadow="",g.current.forEach(ee=>{const X=P.current[ee.id];X&&(X.style.transform="",X.style.transition="")}),Y!==J){const ee=[...g.current],[X]=ee.splice(Y,1);ee.splice(J,0,X),g.current=ee,h(ee),o(ee.map(U=>U.id))}setTimeout(()=>{G.style.zIndex="",w(null),b(!1),S.current=!1},300)}),L.on("click",()=>{const Q=window.event?.target;Q&&(Q.closest(".js-budget-target")||Q.tagName==="INPUT")||a(`/envelope/${V.id}`)}),N.current[V.id]=L})},M=window.setTimeout(R,80);return()=>{clearTimeout(M),C()}},[f,a,o]),e.length===0&&t.id==="uncategorized"?null:m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(lf,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:T,className:"space-y-2 relative",children:f.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(lr,{initial:!1,children:f.map(C=>{const M=(n[r]||[]).find(z=>z.envelopeId===C.id)?.budgetedAmount||0,V=s(C.id);return C.isPiggybank?m.jsx(KSe,{piggybank:C,balance:V,onNavigate:z=>a(`/envelope/${z}`),setMoveableRef:I(C.id),isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:O,onMoveCategory:u},C.id):m.jsx(XSe,{env:C,budgetedAmount:M,remainingBalance:V,navigate:a,transactions:i,currentMonth:r,setMoveableRef:I,isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:O,onMoveCategory:u},C.id)})})})]})},ZSe=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=OSe(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,ensureDefaultCategory:P,envelopes:N,reorderEnvelopes:D,startGuidedTutorial:O,updateEnvelope:I}=mt(),C=Xa(),[R,M]=A.useState(!1),[V,z]=A.useState("add"),[L,W]=A.useState(null),[Q,G]=A.useState(!1),[Y,J]=A.useState(!1),[ee,X]=A.useState(null),U=A.useRef(null),Z=A.useRef(null),[te,K]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]),A.useEffect(()=>{const be=[...t,...e],_e=new Set(S.map(Oe=>Oe.id)),De=be.filter(Oe=>!Oe.categoryId||!_e.has(Oe.categoryId));De.length>0&&S.length>0&&P().then(Oe=>{De.forEach(Ye=>{I({...Ye,categoryId:Oe})})})},[t,e,S,P,I]);const ue=A.useMemo(()=>{const be={};return S.forEach(De=>be[De.id]=[]),[...t,...e].sort((De,Oe)=>(De.orderIndex??0)-(Oe.orderIndex??0)).forEach(De=>{if(De.categoryId&&be[De.categoryId])be[De.categoryId].push(De);else{const Oe=S.find(Ye=>Ye.isDefault);Oe&&be[Oe.id]?.push(De)}}),{groups:be}},[S,t,e]),ie=A.useCallback(async be=>{const _e=[...N.map(Ve=>Ve.id)],De=new Set(be),Oe=[];let Ye=0;_e.forEach(Ve=>{De.has(Ve)?Oe.push(be[Ye++]):Oe.push(Ve)}),await D(Oe)},[N,D]);A.useLayoutEffect(()=>{if(b)return;const be=Z.current;if(!be)return;const _e=()=>K(be.getBoundingClientRect().height);_e();const De=new ResizeObserver(()=>_e());return De.observe(be),window.addEventListener("resize",_e),()=>{window.removeEventListener("resize",_e),De.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const be=setTimeout(()=>{if(b)return;if(x){v(!1);const Oe=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ye=Object.keys(n).some(Ve=>(n[Ve]||[]).length>0)||Object.keys(a).some(Ve=>(a[Ve]||[]).length>0);J(!!(Oe&&Ye));return}const _e=(n[i]||[]).length===0&&(a[i]||[]).length===0,De=Object.keys(n).some(Oe=>(n[Oe]||[]).length>0)||Object.keys(a).some(Oe=>(a[Oe]||[]).length>0);_e?De?(J(!0),v(!1)):(v(!0),J(!1)):(J(!1),v(!1))},500);return()=>clearTimeout(be)}},[c,o,i,n,a,x]);const oe=()=>{z("add"),W(null),M(!0)},Se=be=>{U.current&&clearTimeout(U.current),!Q&&(z("edit"),W(be),M(!0))},se=be=>{U.current&&clearTimeout(U.current),G(!0),h(be),setTimeout(()=>G(!1),500)},Ae=()=>{M(!1),W(null)},ve=async()=>{J(!1);const{copyPreviousMonthAllocations:be}=mt.getState();await be(i)},ne=()=>{w(),v(!1),O()},Pe=()=>{w(),v(!1),O()};return c?m.jsx(aH,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Z,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(RSe,{currentMonth:i,onMonthChange:be=>{J(!1),g(be)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((be,_e)=>be+_e.amount,0),totalAllocated:(a[i]||[]).filter(be=>t.some(_e=>_e.id===be.envelopeId)||e.some(_e=>_e.id===be.envelopeId)).reduce((be,_e)=>be+_e.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,te+16)},children:[b?m.jsx(HSe,{currentMonth:i,onComplete:ne,onSkip:Pe}):Y?m.jsx(zSe,{currentMonth:i,onCopy:ve}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:oe,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(lf,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(be=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{onDelete:()=>se(be),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Se(be),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:be.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",be.amount.toFixed(2)]})]})})},be.id))})})]}),S.map((be,_e)=>m.jsx(QSe,{category:be,envelopes:ue.groups[be.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:C,getEnvelopeBalance:f,onReorderGlobal:ie,isFirstCategory:_e===0,onMoveCategory:X},be.id)),S.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(ep,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(MSe,{isVisible:R,onClose:Ae,mode:V,initialIncomeSource:L}),m.jsx(jSe,{isVisible:!!ee,onClose:()=>X(null),categories:S,currentCategoryId:ee?.categoryId||"",envelopeName:ee?.name||"",onSelect:async be=>{if(ee)try{const _e=N.find(Oe=>Oe.id===ee.id);if(!_e)return;const De={id:_e.id,name:_e.name,currentBalance:_e.currentBalance,lastUpdated:_e.lastUpdated,isActive:_e.isActive,orderIndex:_e.orderIndex,categoryId:be};_e.userId&&(De.userId=_e.userId),_e.createdAt&&(De.createdAt=_e.createdAt),_e.isPiggybank!==void 0&&(De.isPiggybank=_e.isPiggybank),_e.piggybankConfig&&(De.piggybankConfig=_e.piggybankConfig),await I(De),X(null)}catch(_e){console.error("Move category failed:",_e)}}})]})]})]})},JSe=[],KY=({selectedCard:t,onCardSelect:e,initialCards:n=JSe,disabled:r=!1,isUserSelected:i=!1})=>{const a=mt(X=>X.appSettings),s=mt(X=>X.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[P,N]=A.useState(null),[D,O]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const I=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const C=X=>{r||(X.id==="add-new"?g(!0):(c(X),e?.(X),f(!1)))},R=()=>{r||f(!u)},M=X=>{r||w(X)},V=async()=>{if(x&&!r){const X=v.filter(U=>U.id!==x.id);if(b(X),I?.id===x.id){const U=X.length>0?X[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:X})}catch(U){$.error("Failed to delete card from app settings:",U),b(v),alert("Failed to delete card. Please try again.");return}}},z=()=>{w(null)},L=async()=>{if(r)return;const X=!["Cash","Venmo"].includes(S.network);if(X&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:X?S.last4:void 0,color:S.color},Z=[...v,U];b(Z),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:Z})}catch(te){$.error("Failed to save card to app settings:",te),b(v),c(I),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},W=(X,U)=>{r||(N(U),X.dataTransfer.effectAllowed="move")},Q=(X,U)=>{r||!P||(X.preventDefault(),X.dataTransfer.dropEffect="move",O(U))},G=()=>{O(null)},Y=async(X,U)=>{if(r||!P)return;X.preventDefault(),O(null);const Z=v.findIndex(K=>K.id===P.id);if(Z===-1||Z===U)return;const te=[...v];te.splice(Z,1),te.splice(U,0,P),b(te),N(null);try{await s({paymentSources:te})}catch(K){$.error("Failed to reorder cards:",K),b(v),alert("Failed to reorder cards. Please try again.")}},J=()=>{N(null),O(null)},ee=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:I.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:I.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(I.network)?I.network==="Cash"?"$$$":"@":` ${I.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:I.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(I.network)?I.network:`(...${I.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((X,U)=>{const Z=I.id===X.id,te=X.id==="add-new",K=["Cash","Venmo"].includes(X.network);return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{onDelete:()=>!te&&!r&&M(X),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${Z?"selected":""} ${te?"add-new-card":""} ${P?.id===X.id?"dragging":""} ${D===U?"drag-over":""}`,onClick:()=>C(X),draggable:!te&&!r,onDragStart:te?void 0:ue=>W(ue,X),onDragOver:te?void 0:ue=>Q(ue,U),onDragLeave:te?void 0:G,onDrop:te?void 0:ue=>Y(ue,U),onDragEnd:te?void 0:J,style:{backgroundColor:te?"#f3f4f6":X.color,color:te?"#374151":X.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-U,opacity:P?.id===X.id?.5:1,transform:D===U?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:te?"":X.network}),Z&&!te&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:X.name}),m.jsx("div",{className:"card-number",children:te?"":K?X.network==="Cash"?"$$$":"@":` ${X.last4}`})]}),te&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},X.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:S.name,onChange:X=>T({...S,name:X.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:S.network,onChange:X=>T({...S,network:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:S.last4,onChange:X=>T({...S,last4:X.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ee.map(X=>m.jsx("button",{type:"button",onClick:()=>T({...S,color:X}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===X?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:X}},X))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},WY=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=mt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(O=>O.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const D=[],O=[],I={};return i.forEach(C=>{I[C.id]=[]}),t.forEach(C=>{C.categoryId&&I[C.categoryId]?I[C.categoryId].push(C):O.push(C)}),i.sort((C,R)=>(C.orderIndex??0)-(R.orderIndex??0)).forEach(C=>{I[C.id].length>0&&D.push({name:C.name,id:C.id,envelopes:I[C.id]})}),O.length>0&&D.push({name:"Other",id:"uncategorized",envelopes:O}),D},[t,i]),x=D=>{s(O=>O.includes(D)?O.filter(I=>I!==D):[...O,D])},w=(D,O)=>{h(I=>({...I,[D]:O}))},S=il.useRef(a.length);A.useEffect(()=>{if(a.length===1){const D=a[0];h({[D]:e})}else if(a.length>1&&S.current<=1){const D={};a.forEach(O=>{D[O]=0}),h(D)}S.current=a.length},[a.length,a,e]),A.useEffect(()=>{const D=Object.values(f).reduce((O,I)=>O+(I||0),0);v(e-D),n(f)},[f,e,n]),A.useEffect(()=>{const D={...f};Object.keys(D).forEach(O=>{a.includes(O)||delete D[O]}),Object.keys(D).length!==Object.keys(f).length&&h(D)},[a,f]),A.useEffect(()=>{const D=u.current;if(!D)return;const O=()=>{const{scrollTop:I,scrollHeight:C,clientHeight:R}=D;I===0?D.scrollTop=1:I+R>=C&&(D.scrollTop=C-R-1)};return D.addEventListener("touchstart",O,{passive:!0}),()=>D.removeEventListener("touchstart",O)},[]);const T=()=>{s([]),h({})},P=Math.abs(g)<.01&&a.length>0,N=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${N?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":P?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${N?"text-red-600 dark:text-red-400":P?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),N&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(D=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:D.name})}),D.envelopes.map(O=>{const I=a.includes(O.id);return m.jsxs("div",{onClick:()=>x(O.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${I?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${I?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:I&&m.jsx(aD,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${I?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:O.name}),I&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:C=>C.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[O.id]||"",onChange:C=>w(O.id,parseFloat(C.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},O.id)})]},D.id))})]})},YY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=mt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,P]=A.useState(null),[N,D]=A.useState(null),[O,I]=A.useState({}),C=a?[...a].filter(L=>L.isActive!==!1).sort((L,W)=>{const Q=L.orderIndex??0,G=W.orderIndex??0;return Q!==G?Q-G:L.name.localeCompare(W.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),P(i.paymentMethod||null),a){const L=a.find(W=>W.id===i.envelopeId);D(L||r),I({[i.envelopeId]:i.amount})}try{const L=new Date(i.date);isNaN(L.getTime())?($.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(L.toISOString().split("T")[0])}catch(L){$.error("Error parsing transaction date:",L),S(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),S(new Date().toISOString().split("T")[0]),D(r),I({})},[t,n,i,r,a]);const R=async L=>{L.preventDefault();const W=parseFloat(f);if(isNaN(W)||W<=0){$.log(" Invalid amount:",f);return}const Q=n==="edit"&&Object.keys(O).length>0;$.log(" Saving transaction:",{mode:n,amount:W,note:b,date:w,splitAmounts:O,paymentMethod:T});try{const G=new Date(w),Y=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(Y!==u){const J=`This transaction date (${Y}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(J))return}n==="add"?($.log(" Adding income transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Q?await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(O)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,paymentMethod:T||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},M=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},V=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",z=n==="add"?"text-green-500":"text-red-500";return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:V}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:L=>{const W=L.target.value.replace(/\D/g,"");if(!W){h("");return}const G=(parseInt(W,10)/100).toFixed(2);h(G)},onKeyDown:L=>{(L.key==="e"||L.key==="E"||L.key==="+"||L.key==="-")&&L.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:L=>v(L.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(KY,{selectedCard:T,onCardSelect:P}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:L=>x(L.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const L=new Date(w);return`${L.getFullYear()}-${(L.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Ed,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:L=>{$.log("Date changed to:",L.target.value),S(L.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(WY,{envelopes:C,transactionAmount:parseFloat(f)||0,onSplitChange:I,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:M,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(yq,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},e_e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=mt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const P=(parseInt(S,10)/100).toFixed(2);c(P)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},t_e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async N=>{if(N.preventDefault(),!(!i.trim()||!c)){S(!0);try{const D={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(D.piggybankConfig.targetAmount=parseFloat(s)),r&&(D.id=r.id,D.currentBalance=r.currentBalance,D.lastUpdated=new Date().toISOString(),D.isActive=r.isActive,D.orderIndex=r.orderIndex,D.userId=r.userId),await n(D),e()}catch(D){$.error("Error saving piggybank:",D),alert("Failed to save piggybank")}finally{S(!1)}}},P=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(of,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(Bp,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:N=>a(N.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:N=>{const D=N.target.value.replace(/\D/g,"");if(!D){u("");return}const I=(parseInt(D,10)/100).toFixed(2);u(I)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:N=>{const D=N.target.value.replace(/\D/g,"");if(!D){o("");return}const I=(parseInt(D,10)/100).toFixed(2);o(I)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:N=>x(N.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:P.map(N=>m.jsx("button",{type:"button",onClick:()=>h(N.value),className:`w-full aspect-square rounded-lg transition-all ${f===N.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},n_e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},r_e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},XY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:n_e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",r_e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(so,{className:"text-green-500",size:20}):m.jsx(qL,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(so,{className:"text-green-500",size:20}):m.jsx(qL,{className:"text-gray-400",size:20})})]})]})},xk=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),i_e=()=>{const{id:t}=Roe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=mt(),{showToast:T}=gu(),P=Xa(),N=Os(),[D,O]=A.useState(!1),[I,C]=A.useState(!1),[R,M]=A.useState(!1),[V,z]=A.useState(null),[L,W]=A.useState(!1),[Q,G]=A.useState(!1),[Y,J]=A.useState(""),ee=A.useRef(null),X=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(ne=>ne.id===t);A.useEffect(()=>{U?.isPiggybank&&U.id&&S(U.id)},[U?.isPiggybank,U?.id,S]);const Z=async ne=>{if(U)try{const Pe={...U,...ne,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Pe),T("Piggybank updated successfully","success"),W(!1)}catch(Pe){$.error("Failed to update piggybank:",Pe),T("Failed to update piggybank","error")}},te=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(ne=>ne.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Q&&(J(te.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[Q,te]);const K=ne=>{const Pe=(v[h]||[]).reduce((Oe,Ye)=>Oe+Ye.amount,0),be=g[h]||[];let De=be.map(Oe=>U&&Oe.envelopeId===U.id&&ne!==void 0?{...Oe,budgetedAmount:ne}:Oe).filter(Oe=>{const Ye=e.find(Ve=>Ve.id===Oe.envelopeId);return Ye?Ye.isActive!==!1:!1}).reduce((Oe,Ye)=>Oe+Ye.budgetedAmount,0);return ne!==void 0&&U&&(be.some(Ye=>Ye.envelopeId===U.id)||(De+=ne)),Pe-De},ie=Q?K(parseFloat(Y)||0):K(),oe=async()=>{if(!U||X.current)return;const ne=parseFloat(Y);if(isNaN(ne)||ne<0){T("Please enter a valid positive number","error");return}X.current=!0;try{U.isPiggybank?await x(U.id,ne):await b(U.id,ne),G(!1)}catch(Pe){$.error("Failed to save budget:",Pe),T("Failed to update budget","error")}finally{X.current=!1}};if(!U)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});const Se=n.filter(ne=>ne.envelopeId===U.id).filter(ne=>{if(ne.description==="Budgeted"||ne.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Pe=g1(U.createdAt).toISOString().split("T")[0];return g1(ne.date).toISOString().split("T")[0]>=Pe}return ne.month===h||!ne.month}).sort((ne,Pe)=>new Date(Pe.date).getTime()-new Date(ne.date).getTime()),se=()=>{N.state?.fromGlobalFAB?P("/"):P(-1)},Ae=()=>{t&&(a(t),P(-1))},ve=ne=>{const Pe={...ne,reconciled:!ne.reconciled};o(Pe)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(U.isPiggybank)W(!0);else{const ne=prompt("Rename envelope:",U.name);ne&&ne.trim()&&t&&s(t,ne)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),m.jsx("button",{onClick:se,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ne=U.isPiggybank?f(U.id):f(U.id,h);return m.jsx("span",{className:`text-xl font-bold ${ne<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:xk(ne)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Q?m.jsx("form",{onSubmit:ne=>{ne.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ee,type:"number",step:"0.01",value:Y,onChange:ne=>J(ne.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:xk(te)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ie<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ie===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:xk(ie)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[m.jsx(nce,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>C(!0),children:[m.jsx(ece,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>M(!0),children:[m.jsx(zle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:Se.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:Se.map(ne=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{disabled:ne.isAutomatic,onDelete:()=>{if(!ne.id)return;const Pe={...ne};c(ne.id),T("Transaction deleted","neutral",()=>u(Pe))},children:m.jsx(XY,{transaction:ne,onReconcile:()=>ve(ne),onEdit:()=>{ne.isAutomatic||z(ne)}})})},ne.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ne=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(ne)&&Ae()},children:[m.jsx(yq,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(YY,{isVisible:D||I||!!V,onClose:()=>{O(!1),C(!1),z(null)},mode:D?"add":I?"spend":"edit",currentEnvelope:U,initialTransaction:V}),m.jsx(e_e,{isVisible:R,onClose:()=>M(!1),sourceEnvelope:U}),m.jsx(t_e,{isOpen:L,onClose:()=>W(!1),onSave:Z,existingPiggybank:U})]})},a_e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},$B=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],qB=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function DO(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const s_e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function yx(t){const e=parseInt(t.split("-")[1],10);return s_e[e-1]||t}function o_e(t){const e={};return t.forEach((n,r)=>{e[n.id]=$B[r%$B.length]}),e}function l_e(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=qB[i%qB.length]}),e}function c_e(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=mt(),s=A.useMemo(()=>DO(t,a),[t,a]),o=A.useMemo(()=>{const S={};return n.forEach(T=>{S[T.id]=T.categoryId||"uncategorized"}),S},[n]),c=A.useMemo(()=>o_e(r),[r]),u=A.useMemo(()=>{const S={};return r.forEach(T=>{S[T.id]=T.name}),S},[r]),f=A.useMemo(()=>new Set(n.filter(S=>!!S.isPiggybank).map(S=>S.id)),[n]),h=A.useMemo(()=>{const S=new Set;return n.forEach(T=>{T.isPiggybank&&T.categoryId&&S.add(T.categoryId)}),S},[n]),g=A.useMemo(()=>{const S=new Set(s);return e.filter(T=>T.type==="Expense"&&T.month&&S.has(T.month))},[e,s]),v=A.useMemo(()=>{const S={};r.forEach(N=>{S[N.id]=0}),g.forEach(N=>{const D=o[N.envelopeId]||"uncategorized";S[D]=(S[D]||0)+Math.abs(N.amount)});const T=Object.entries(S).map(([N,D])=>({categoryId:N,categoryName:u[N]||"Uncategorized",color:c[N]||"#9CA3AF",amount:Math.round(D*100)/100})).sort((N,D)=>D.amount-N.amount),P=T.reduce((N,D)=>N+D.amount,0);return{items:T,total:Math.round(P*100)/100}},[g,o,u,c,r]),b=A.useMemo(()=>{const S=new Set(r.map(C=>C.id)),T={};s.forEach(C=>{T[C]={}}),g.forEach(C=>{const R=o[C.envelopeId]||"uncategorized",M=C.month;T[M]&&(T[M][R]=(T[M][R]||0)+Math.abs(C.amount),S.add(R))});const P=[...S],N={};P.forEach(C=>{N[C]=c[C]||"#9CA3AF"});const D=s.map(C=>{const R={month:C,monthLabel:yx(C)};return P.forEach(M=>{R[M]=Math.round((T[C][M]||0)*100)/100}),R}),O=D.map(C=>P.reduce((R,M)=>R+(C[M]||0),0)),I=O.length>0?Math.round(O.reduce((C,R)=>C+R,0)/O.length):0;return{data:D,categoryKeys:P,colorMap:N,average:I}},[s,g,o,c,r]),x=A.useMemo(()=>{const S=[],T={};s.forEach(C=>{T[C]={}}),s.forEach(C=>{(i[C]||[]).forEach(M=>{S.push(M.name),T[C][M.name]=(T[C][M.name]||0)+M.amount})});const P=[...new Set(S)],N=l_e(P),D=s.map(C=>{const R={month:C,monthLabel:yx(C)};return P.forEach(M=>{R[M]=Math.round((T[C][M]||0)*100)/100}),R}),O=D.map(C=>P.reduce((R,M)=>R+(C[M]||0),0)),I=O.length>0?Math.round(O.reduce((C,R)=>C+R,0)/O.length):0;return{data:D,sourceKeys:P,colorMap:N,average:I}},[s,i]),w=A.useMemo(()=>({data:s.map(T=>{const N=(i[T]||[]).reduce((V,z)=>V+z.amount,0),D=e.filter(V=>V.month===T),O=D.filter(V=>{if(V.type!=="Expense")return!1;const z=o[V.envelopeId]||"uncategorized";return h.has(z)}).reduce((V,z)=>V+Math.abs(z.amount),0),I=D.filter(V=>V.type!=="Income"||!f.has(V.envelopeId)?!1:V.description==="Piggybank Contribution"||V.description==="Monthly Allocation"||!!V.isAutomatic).reduce((V,z)=>V+Math.abs(z.amount),0),C=O+I;if(N<=0)return{month:T,monthLabel:yx(T),savingsPercent:0,spendingPercent:100};const R=Math.min(100,Math.round(C/N*1e3)/10),M=Math.round((100-R)*10)/10;return{month:T,monthLabel:yx(T),savingsPercent:R,spendingPercent:M}})}),[s,i,e,o,h,f]);return{months:s,spendingTotals:v,spendingBreakdown:b,monthlyIncome:x,savingsData:w,categoryNameMap:u,categoryColorMap:c}}const u_e=({isOpen:t,onClose:e,transactions:n,envelopes:r})=>{const{currentMonth:i}=mt(),[a,s]=A.useState("3m"),[o,c]=A.useState(!1),u=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"12m",label:"12 Months"}];function f(){const x=new Date().getFullYear(),w=[];for(let S=x;S>=2024;S--)w.push({value:`year-${S}`,label:`${S}`});return w}const h=f(),g=()=>DO(a,i),v=()=>{const x=g();if(x.length===0)return"";const w=x[0],S=x[x.length-1],T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=`${T[parseInt(w.split("-")[1])-1]}${w.split("-")[0]}`,N=`${T[parseInt(S.split("-")[1])-1]}${S.split("-")[0]}`;return P===N?P:`${P}-${N}`},b=async()=>{c(!0);try{const x=g(),w=n.filter(R=>R.description!=="Budgeted"&&R.description!=="Piggybank Contribution"&&x.includes(R.month||"")),S=new Set,T=[],P=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"];for(const R of w){let M,V,z;if(R.splitGroupId&&!S.has(R.splitGroupId)){S.add(R.splitGroupId);const J=w.filter(ee=>ee.splitGroupId===R.splitGroupId);M=J.reduce((ee,X)=>ee+X.amount,0),V=J.map(ee=>r.find(X=>X.id===ee.envelopeId)?.name||"Unknown").join(", "),z=J.every(ee=>ee.reconciled)}else{if(R.splitGroupId&&S.has(R.splitGroupId))continue;M=R.amount,V=r.find(J=>J.id===R.envelopeId)?.name||"Unknown",z=R.reconciled}const L=(R.merchant||"").replace(/"/g,'""'),W=(R.description||"").replace(/"/g,'""');let Q="";R.paymentMethod&&(Q=`${R.paymentMethod.name} (...${R.paymentMethod.last4})`);const G=Q.replace(/"/g,'""');let Y="Invalid Date";if(R.date){if(typeof R.date=="string")Y=R.date.split("T")[0];else if(typeof R.date=="number"){const ee=R.date<2e9?(R.date+9783072e5)*1e3:R.date;Y=new Date(ee).toISOString().split("T")[0]}}T.push([Y,`"${L}"`,`"${G}"`,`"${W}"`,M.toFixed(2),R.type,`"${V}"`,z?"Yes":"No"].join(","))}const N=[P.join(","),...T].join(`
`),D=new Blob([N],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(D),I=document.createElement("a");I.href=O;const C=v();I.download=`budgetTransactions_${C}.csv`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(O),e()}catch(x){console.error("Export failed:",x)}finally{c(!1)}};return t?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-xl max-w-md w-full",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(dq,{className:"w-5 h-5 text-blue-500"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Export Transactions"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:m.jsx(Bp,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-3",children:"Select Time Range"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"Presets"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(({value:x,label:w})=>m.jsx("button",{onClick:()=>s(x),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:w},x))})]}),m.jsxs("div",{className:"space-y-2 mt-4",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"By Year"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(({value:x,label:w})=>m.jsx("button",{onClick:()=>s(x),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:w},x))})]})]}),m.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-lg p-4",children:m.jsxs("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:[m.jsx("div",{className:"font-medium mb-1",children:"Export Range:"}),m.jsxs("div",{className:"text-gray-900 dark:text-white",children:[g().length," months selected"]}),m.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mt-1",children:v()})]})})]}),m.jsxs("div",{className:"flex gap-3 p-6 border-t dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg font-medium transition-colors",children:"Cancel"}),m.jsx("button",{onClick:b,disabled:o,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Cw,{className:"w-4 h-4"}),"Export CSV"]})})]})]})}):null},d_e=({isOpen:t,onClose:e})=>{const[n,r]=A.useState([]),[i,a]=A.useState({level:void 0,source:"",search:""}),[s,o]=A.useState(!1),[c,u]=A.useState(!0);A.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),A.useEffect(()=>Dn.subscribe(T=>{r(T),c&&setTimeout(()=>{const P=document.getElementById("log-container");P&&(P.scrollTop=P.scrollHeight)},100)}),[c]);const f=A.useMemo(()=>Dn.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=A.useMemo(()=>{const S=new Set;return n.forEach(T=>S.add(T.source)),Array.from(S).sort()},[n]),g=A.useMemo(()=>Dn.getStats(),[n]),v=S=>new Date(S).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=S=>{switch(S){case ji.DEBUG:return{icon:Fle,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case ji.INFO:return{icon:GL,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case ji.WARN:return{icon:Ed,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case ji.ERROR:return{icon:Zle,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:GL,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{Dn.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{Dn.clearLogs()};return t?m.jsx(lr,{children:m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800 overscroll-contain",onClick:S=>S.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(oce,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>u(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(Cw,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(Sv,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx(Bp,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(gq,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(Kle,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(lr,{children:s&&m.jsxs(bt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:S=>a(T=>({...T,level:S.target.value?Number(S.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:ji.DEBUG,children:"Debug"}),m.jsx("option",{value:ji.INFO,children:"Info"}),m.jsx("option",{value:ji.WARN,children:"Warning"}),m.jsx("option",{value:ji.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:S=>a(T=>({...T,source:S.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(S=>m.jsx("option",{value:S,children:S},S))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(mq,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:S=>a(T=>({...T,search:S.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm overscroll-contain touch-pan-y",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(S=>{const T=b(S.level),P=T.icon;return m.jsxs(bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${T.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(P,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${T.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(S.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:S.source}),S.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${S.userId}`,children:m.jsx(lue,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:S.message}),S.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(S.data,null,2)})})]})]},S.id)})})]})})}):null},f_e=()=>{const t=Xa(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:S}=mt(),{deleteAccount:T,currentUser:P,logout:N}=nn(),[D,O]=A.useState(null),[I,C]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,M]=A.useState(!1),[V,z]=A.useState(""),[L,W]=A.useState(!1),[Q,G]=A.useState(null),[Y,J]=A.useState(!1),[ee,X]=A.useState(!1),[U,Z]=A.useState(!1),[te,K]=A.useState(null),[ue,ie]=A.useState(!1),oe=()=>{const ze=window.setTimeout(()=>{Z(!0),Dn.info("Settings","Log viewer opened via long press")},500);K(ze)},Se=()=>{te&&(clearTimeout(te),K(null))},se=ze=>{ze.preventDefault();const gt=window.setTimeout(()=>{Z(!0),Dn.info("Settings","Log viewer opened via long press (mobile)")},500);K(gt)},Ae=ze=>{ze.preventDefault(),te&&(clearTimeout(te),K(null))},ve=()=>{Z(!0),Dn.info("Settings","Log viewer opened via double click")},ne=978307200,Pe=c?.theme??"system",be=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(ze=>{Dn.error("Settings","Failed to initialize app settings",{error:ze})})},[f,c]);const _e=(ze,gt)=>{O({type:ze,text:gt}),setTimeout(()=>O(null),3500)},De=A.useMemo(()=>{const ze=n.length,gt=r.length,ki=v?g[v]||[]:[],Zr=Object.values(h).reduce((Ft,ur)=>Ft+ur.length,0),In=ki.length,Tr=n.reduce((Ft,ur)=>{const di=ur.isPiggybank?o(ur.id):o(ur.id,v);return Ft+(typeof di=="number"?di:0)},0),Fn=0,wn=r.reduce((Ft,ur)=>{let di=0;if(typeof ur.date=="string"){const Ja=Date.parse(ur.date);di=Number.isNaN(Ja)?0:Ja}else typeof ur.date=="number"&&(di=ur.date<2e9?(ur.date+ne)*1e3:ur.date);return Math.max(Ft,di)},0),Ar=Fn||wn?new Date(Math.max(Fn,wn)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:ze,transactionCount:gt,incomeSourceCount:Zr,allocationCount:In,totalBalance:Tr,lastUpdated:Ar}},[n,r,h,g,v]),Oe=()=>{try{Dn.info("Settings","Creating backup...");const ze={appVersion:"1.11.0",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Tr=>({...Tr,currentBalance:(()=>{const Fn=Tr.isPiggybank?o(Tr.id):o(Tr.id,v);return typeof Fn=="number"?Fn:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},gt=new Blob([JSON.stringify(ze,null,2)],{type:"application/json"}),ki=URL.createObjectURL(gt),Zr=document.createElement("a");Zr.href=ki,Zr.download=`budgetBackup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Zr),Zr.click(),document.body.removeChild(Zr),URL.revokeObjectURL(ki);const In=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",In),C(In),G({success:!0,message:"Backup downloaded successfully."})}catch(ze){Dn.error("Settings","Backup creation failed",{error:ze}),G({success:!1,message:"Failed to create backup file.",onRetry:Oe})}},Ye=()=>{e.current?.click()},Ve=ze=>{const gt=ze.target.files?.[0];if(!gt)return;const ki=new FileReader;ki.onload=async Zr=>{try{const In=JSON.parse(Zr.target?.result),Tr=await s(In);if(!Tr.success){_e("error",Tr.message);return}if(In.appSettings?.theme)try{await u({theme:In.appSettings.theme})}catch(Fn){Dn.error("Settings","Failed to update imported settings",{error:Fn})}_e("success",`Loaded ${In.envelopes?.length??0} envelopes, ${In.transactions?.length??0} transactions.`)}catch(In){Dn.error("Settings","Import failed",{error:In}),_e("error","Invalid backup file. Please verify the JSON.")}},ki.readAsText(gt),ze.target.value=""},it=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),_e("success","All data has been permanently deleted."),t("/")}catch(ze){Dn.error("Settings","Reset failed",{error:ze}),_e("error","Failed to delete all data. Some data may remain.")}},Vt=async()=>{if(!V.trim()){_e("error","Please enter your password to confirm account deletion.");return}M(!0);try{await a(),await T(V)?_e("success","Your account has been permanently deleted."):_e("error","Failed to delete account. Please try again.")}catch(ze){Dn.error("Settings","Account deletion failed",{error:ze}),_e("error","Failed to delete account. Please try again.")}finally{M(!1),W(!1),z("")}},Bn=async()=>{if(!P){_e("error","You must be logged in to clean up data.");return}J(!0);try{const ze=await NO.cleanupOrphanedData(P.id),gt=ze.orphanedAllocationsDeleted+ze.orphanedTransactionsDeleted;gt>0?_e("success",`Cleaned ${gt} orphaned items: ${ze.orphanedAllocationsDeleted} allocations and ${ze.orphanedTransactionsDeleted} transactions.`):_e("success","No orphaned data found. Your database is already clean!")}catch(ze){Dn.error("Settings","Cleanup failed",{error:ze}),_e("error","Failed to clean up orphaned data. Please try again.")}finally{J(!1)}},xn=()=>{X(!0)},yt=async()=>{X(!1),await b(v),_e("success","Month data has been reset.")},Bt=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),N(),t("/")}catch(ze){Dn.error("Settings","Logout failed",{error:ze})}},Qr=P?.displayName?.charAt(0)?.toUpperCase()||P?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[D&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${D.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[D.type==="success"?m.jsx(kw,{size:18}):m.jsx(Sv,{size:18}),D.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Qr}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:P?.displayName||P?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:P?.email}),m.jsxs("button",{onClick:Bt,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Pce,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Cw,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(ds,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Pe==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),Pe==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),Pe==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Pe})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({theme:ze.value})}catch(gt){Dn.error("Settings","Failed to update theme setting",{error:gt})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Pe===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:ze.label},ze.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:be})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:ze.value})}catch(gt){Dn.error("Settings","Failed to update font size setting",{error:gt})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${be===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:ze.sizeClass,children:ze.label})},ze.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Uh,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{S(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Uh,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:Oe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Cw,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",I]})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ye,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(iue,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>ie(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(gce,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:Ve,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:xn,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Jh,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Bn,disabled:Y,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Y?m.jsx(kce,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(Uh,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Y?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:it,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Sv,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>W(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Ed,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(ds,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),_e("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(Jh,{size:20})})]}):m.jsx("button",{onClick:async()=>{const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:oe,onMouseUp:Se,onMouseLeave:Se,onTouchStart:se,onTouchEnd:Ae,onTouchCancel:Ae,onDoubleClick:ve,title:"Long press or double-click to view logs",children:["Version ","1.11.0"," (PWA)"]})}),Q&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Q.success?m.jsx(kw,{className:"text-green-500",size:24}):m.jsx(Ed,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Q.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Q.message}),m.jsxs("div",{className:"flex gap-2",children:[Q.onRetry&&m.jsx("button",{onClick:()=>{G(null),Q.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>G(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(a_e,{isVisible:ee,onClose:()=>X(!1),onConfirm:yt,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((ze,gt)=>ze+gt.amount,0),allocationCount:(g[v]||[]).filter(ze=>n.some(gt=>gt.id===ze.envelopeId)).length,totalAllocated:(g[v]||[]).filter(ze=>n.some(gt=>gt.id===ze.envelopeId)).reduce((ze,gt)=>ze+gt.budgetedAmount,0),transactionCount:r.filter(ze=>ze.month===v).length,totalTransactionAmount:r.filter(ze=>ze.month===v).reduce((ze,gt)=>ze+gt.amount,0)}),L&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Ed,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:V,onChange:ze=>z(ze.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{W(!1),z("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:Vt,disabled:R||!V.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(d_e,{isOpen:U,onClose:()=>Z(!1)}),m.jsx(u_e,{isOpen:ue,onClose:()=>ie(!1),transactions:r,envelopes:n})]})]})},h_e=({category:t,isBeingDragged:e,isEditing:n,editName:r,setEditName:i,handleUpdate:a,setEditingId:s,handleDelete:o,handleLongPressTrigger:c,setMoveableRef:u})=>{const f=PO(h=>{c(h,t.id)},{threshold:500,cancelOnMovement:25,detect:Bc.Touch});return m.jsx("div",{...f(),ref:u(t.id),style:{cursor:e?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:n?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>a(t.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:h=>c(h,t.id),children:m.jsx(Zh,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{s(t.id),i(t.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(jce,{size:18})}),m.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(Sv,{size:18})})]})]})})},p_e=()=>{const t=Xa(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=mt(),{showToast:s}=gu(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,P]=A.useState(!1),[N,D]=A.useState(null),O=A.useRef(!1),I=A.useRef(null),C=A.useRef({}),R=A.useRef({}),M=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const V=A.useCallback((ee,X)=>{$.log(" Long press triggered for category:",X);const U=R.current[X];if(U){$.log(" Moveable instance found, starting drag"),O.current=!0;const Z=ee.nativeEvent||ee;U.dragStart(Z)}else $.log(" No moveable instance found for:",X)},[]),z=A.useCallback(ee=>X=>{X?C.current[ee]=X:delete C.current[ee]},[]),L=async ee=>{if(ee.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(X){$.error(X),s("Failed to add category","error")}},W=async ee=>{if(!v.trim())return;const X=e.find(U=>U.id===ee);if(X)try{await r({...X,name:v.trim()}),g(null),s("Category updated","success")}catch(U){$.error(U),s("Failed to update category","error")}},Q=async ee=>{if(e.length<=1){s("Cannot delete the last category","error");return}if(confirm('Are you sure? Envelopes in this category will be moved to "Uncategorized".'))try{await i(ee),s("Category deleted","success")}catch(X){$.error(X),s("Failed to delete category","error")}},G=8,Y=(ee,X,U)=>Math.max(X,Math.min(U,ee)),J=A.useCallback(async ee=>{if(!ee.length)return;const X=ee.map(U=>U.id);try{await a(X)}catch(U){$.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ee=()=>{Object.values(R.current).forEach(Z=>Z?.destroy()),R.current={}};if(!x.length)return;const X=()=>{x.forEach(Z=>{const te=C.current[Z.id];if(!te||!I.current)return;const K=new UY(I.current,{target:te,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ie=>{if($.log(" Moveable dragStart event",{isManualDrag:O.current,categoryId:Z.id}),!O.current){$.log(" Stopping drag - not manual"),ie.stop();return}const oe=ie.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),ie.stop();return}$.log(" Drag starting for category:",Z.id);const Se=S.current.findIndex(ve=>ve.id===Z.id),se=ie.target,Ae=se.getBoundingClientRect();D(Z.id),M.current={activeId:Z.id,startIndex:Se,currentIndex:Se,itemHeight:Ae.height+G},se.style.transition="none",se.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",se.style.zIndex="20",P(!0)});let ue=null;K.on("drag",ie=>{const oe=ie.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const Se=M.current;if(Se.activeId!==Z.id)return;const se=ie.beforeTranslate[1];oe.style.transform=`translateY(${se}px)`,oe.style.transition="none";const{itemHeight:Ae,startIndex:ve}=Se,ne=Math.round(se/Ae),Pe=Y(ve+ne,0,S.current.length-1);Pe!==Se.currentIndex&&(Se.currentIndex=Pe,S.current.forEach((be,_e)=>{if(be.id===Z.id)return;const De=C.current[be.id];if(!De)return;let Oe=0;ve<Pe&&_e>ve&&_e<=Pe?Oe=-Ae:ve>Pe&&_e>=Pe&&_e<ve&&(Oe=Ae),De.style.transform=Oe?`translateY(${Oe}px)`:"",De.style.transition="transform 0.2s ease"})),ue=null})}),K.on("dragEnd",ie=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ie.target,{startIndex:Se,currentIndex:se}=M.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(Ae=>{const ve=C.current[Ae.id];ve&&(ve.style.transform="",ve.style.transition="")}),Se!==se){const Ae=[...S.current],[ve]=Ae.splice(Se,1);Ae.splice(se,0,ve),S.current=Ae,w(Ae),J(Ae)}setTimeout(()=>{oe.style.zIndex="",D(null),P(!1),O.current=!1},300)}),R.current[Z.id]=K})},U=window.setTimeout(X,80);return()=>{clearTimeout(U),ee()}},[x,J]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(Sl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:L,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:ee=>f(ee.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(lf,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:I,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ee=>m.jsx(h_e,{category:ee,isBeingDragged:N===ee.id,isEditing:h===ee.id,editName:v,setEditName:b,handleUpdate:W,setEditingId:g,handleDelete:Q,handleLongPressTrigger:V,setMoveableRef:z},ee.id)),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},g_e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=mt(),{showToast:a}=gu(),s=Xa(),[o]=lq();il.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||"");il.useEffect(()=>{if(!o.get("categoryId")&&r.length>0&&!g){const I=r.find(C=>C.isDefault);I&&v(I.id)}},[r,o,g]);const[b,x]=A.useState(""),[w,S]=A.useState(""),[T,P]=A.useState("#3B82F6"),[N,D]=A.useState(!1),O=async I=>{if(I.preventDefault(),!c.trim()||N)return;D(!0);const C=mt.getState().envelopes,M=(C.length>0?Math.max(...C.map(W=>W.orderIndex??0)):-1)+1,V=f?new Date(`${n}-01T00:00:00`):new Date,z={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:V.toISOString(),isActive:!0,orderIndex:M,categoryId:g||void 0};if(f){z.isPiggybank=!0;const W={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(W.targetAmount=parseFloat(b)),z.piggybankConfig=W}t(z).then(W=>{if(W){const Q=f?parseFloat(w||"0"):0;e(W,Q).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(W=>{$.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),D(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(Sl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(of,{size:40}):m.jsx(yce,{size:40})})}),m.jsxs("form",{onSubmit:O,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsx("select",{id:"category",value:g,onChange:I=>v(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:r.map(I=>m.jsx("option",{value:I.id,children:I.name},I.id))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:I=>u(I.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:I=>S(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:I=>x(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(I=>m.jsx("button",{type:"button",onClick:()=>P(I.value),className:`w-full aspect-square rounded-lg transition-all ${T===I.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:I.value},title:I.label},I.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||N,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!N?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:N?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const m_e="type.googleapis.com/google.protobuf.Int64Value",v_e="type.googleapis.com/google.protobuf.UInt64Value";function QY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function m1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>m1(e));if(typeof t=="function"||typeof t=="object")return QY(t,e=>m1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ap(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case m_e:case v_e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ap(e)):typeof t=="function"||typeof t=="object"?QY(t,e=>Ap(e)):t}const OO="functions";const GB={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fi extends No{constructor(e,n,r){super(`${OO}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Fi.prototype)}}function y_e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function v1(t,e){let n=y_e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!GB[s])return new Fi("internal","internal");n=GB[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=Ap(i))}}catch{}return n==="ok"?null:new Fi(n,r,i)}class b_e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ua(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const LP="us-central1",x_e=/^data: (.*?)(?:\n|$)/;function w_e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Fi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class S_e{constructor(e,n,r,i,a=LP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new b_e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=LP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function __e(t,e,n){const r=lu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(UN(t.emulatorOrigin+"/backends"),Q9("Functions",!0))}function E_e(t,e,n){const r=i=>A_e(t,e,i,{});return r.stream=(i,a)=>C_e(t,e,i,a),r}function ZY(t){return t.emulatorOrigin&&lu(t.emulatorOrigin)?"include":void 0}async function T_e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:ZY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function JY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function A_e(t,e,n,r){const i=t._url(e);return k_e(t,i,n,r)}async function k_e(t,e,n,r){n=m1(n);const i={data:n},a=await JY(t,r),s=r.timeout||7e4,o=w_e(s),c=await Promise.race([T_e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Fi("cancelled","Firebase Functions instance was deleted.");const u=v1(c.status,c.json);if(u)throw u;if(!c.json)throw new Fi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Fi("internal","Response is missing data field.");return{data:Ap(f)}}function C_e(t,e,n,r){const i=t._url(e);return I_e(t,i,n,r||{})}async function I_e(t,e,n,r){n=m1(n);const i={data:n},a=await JY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:ZY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Fi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=v1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new Fi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=P_e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function P_e(t,e,n,r){const i=(s,o)=>{const c=s.match(x_e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Ap(f.result));return}if("message"in f){o.enqueue(Ap(f.message));return}if("error"in f){const h=v1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Fi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Fi("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Fi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Fi?u:v1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const HB="@firebase/functions",KB="0.13.1";const N_e="auth-internal",D_e="app-check-internal",O_e="messaging-internal";function R_e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(N_e),s=n.getProvider(O_e),o=n.getProvider(D_e);return new S_e(i,a,s,o,r)};bl(new _o(OO,e,"PUBLIC").setMultipleInstances(!0)),xs(HB,KB,t),xs(HB,KB,"esm2020")}function M_e(t=qN(),e=LP){const r=zp(zt(t),OO).getImmediate({identifier:e}),i=Jne("functions");return i&&j_e(r,...i),r}function j_e(t,e,n){__e(zt(t),e,n)}function z_e(t,e,n){return E_e(zt(t),e)}R_e();function eX(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const P of w)if(!(P.length<3)&&(P.startsWith(T.slice(0,-1))||T.startsWith(P.slice(0,-1)))){const N=Math.min(P.length,T.length)/Math.max(P.length,T.length);N>=.6&&(!f||N>f.score)&&(f={envelope:v,score:N})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function L_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=F8().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=M_e(),u=(await z_e(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),eX(t,e)}}function V_e(t,e){return $.log(" Siri: Parsing locally with regex:",t),eX(t,e)}function B_e(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function VP(t,e){const n=B_e(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),V_e(n,e)):($.log(" Siri: Online  attempting AI parsing"),L_e(n,e))}function F_e(){const[t,e]=lq(),{envelopes:n}=mt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),VP(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,VP]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const tX=({onClose:t,onSaved:e})=>{const n=Xa(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=mt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=F_e(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),Se=sessionStorage.getItem("siriQuery");if(oe&&Se)try{const se=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",se),se.amount!==null&&v(se.amount.toFixed(2)),se.merchant&&x(se.merchant),se.description&&S(se.description),se.type&&R(se.type==="Income"?"income":"expense"),se.envelopeId&&Y(se.envelopeId),se.paymentMethodName&&s?.paymentSources?.length){const Ae=se.paymentMethodName.toLowerCase(),ve=s.paymentSources.find(ne=>{const Pe=ne.name.toLowerCase();return Pe===Ae||Pe.includes(Ae)||Ae.includes(Pe)});ve&&(L(ve),Q(!1))}P(!0),D(Se),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(se){$.error(" Siri: Failed to parse stored data:",se)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,P]=A.useState(!1),[N,D]=A.useState(null),[O,I]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[C,R]=A.useState("expense"),[M,V]=A.useState({}),[z,L]=A.useState(null),[W,Q]=A.useState(!1),[G,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),Se=s.paymentSources.find(se=>{const Ae=se.name.toLowerCase();return Ae===oe||Ae.includes(oe)||oe.includes(Ae)});Se&&(L(Se),Q(!1))}P(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ee=oe=>{L(oe),z&&Q(!0)},X=Object.keys(M).length>0,U=Object.values(M).reduce((oe,Se)=>oe+(Se||0),0),Z=Math.abs(U-parseFloat(g||"0"))<.01,te=g&&parseFloat(g)>0&&X&&Z,K=async oe=>{if(oe.preventDefault(),!te)return;const[Se,se,Ae]=O.split("-").map(Number),ve=new Date(Se,se-1,Ae,12,0,0);$.log(" Selected date:",O),$.log(" Parsed date:",ve.toISOString());try{const[ne,Pe]=O.split("-").map(Number),be=`${ne}-${Pe.toString().padStart(2,"0")}`;if(be!==a){const Oe=`This transaction date (${be}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Oe))return}const _e=Object.entries(M).filter(([Oe,Ye])=>Ye>0),De=_e.length>1?crypto.randomUUID():void 0;Promise.all(_e.map(([Oe,Ye])=>i({amount:Ye,description:w,merchant:b||void 0,date:ve.toISOString(),envelopeId:Oe,type:C==="income"?"Income":"Expense",reconciled:!1,paymentMethod:z||void 0,splitGroupId:De}).catch(Ve=>$.error("Failed to create transaction:",Ve)))).catch(Oe=>$.error("Failed to create transactions:",Oe)),e&&e(),t?t():n("/")}catch(ne){$.error("Error saving transaction:",ne),alert("Failed to save transaction: "+(ne instanceof Error?ne.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,Se)=>{const se=oe.orderIndex??0,Ae=Se.orderIndex??0;return se!==Ae?se-Ae:oe.name.localeCompare(Se.name)}),ie=C==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:K,disabled:!te,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(KL,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||N)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(KL,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||N,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),P(!1),D(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:K,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ie}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const Se=oe.target.value.replace(/\D/g,"");if(!Se){v("");return}const Ae=(parseInt(Se,10)/100).toFixed(2);v(Ae)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ie} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(KY,{selectedCard:z,onCardSelect:ee,isUserSelected:W}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,Se]=O.split("-").map(Number);return`${oe}-${Se.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Ed,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:O,onChange:oe=>I(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(WY,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:V,initialSelectedEnvelopeId:G})})]})})]})},U_e=()=>{const t=Xa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=mt(),{showToast:h}=gu(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,S]=A.useState("all"),[T,P]=A.useState("All"),[N,D]=A.useState(!1),[O,I]=A.useState("all"),[C,R]=A.useState(!1),[M,V]=A.useState("all"),[z,L]=A.useState(!1),[W,Q]=A.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-1),K.toISOString().split("T")[0]}),[G,Y]=A.useState(()=>new Date().toISOString().split("T")[0]),[J,ee]=A.useState(null),X=A.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:C,currentMonth:s,transactionMonths:e.map(ie=>({id:ie.id,month:ie.month,date:ie.date,description:ie.description}))});let K=e;return C||(K=e.filter(ie=>ie.month===s||!ie.month),$.log(" After month filter:",{remaining:K.length,currentMonth:s,filteredTransactions:K.map(ie=>({id:ie.id,description:ie.description,month:ie.month,matchesCurrentMonth:ie.month===s}))})),K.map(ie=>{if(!ie)return null;let oe=ie.date;if(typeof ie.date=="number"){const se=(ie.date+978307200)*1e3;oe=new Date(se).toISOString()}else if(!ie.date||typeof ie.date!="string")return null;return{...ie,date:oe}}).filter(Boolean).filter(ie=>{if(ie.description==="Budgeted"||ie.description==="Piggybank Contribution")return!1;if(b){const Se=b.toLowerCase(),se=n.find(ne=>ne.id===ie.envelopeId)?.name.toLowerCase()||"",Ae=ie.amount.toFixed(2);if(!(ie.description.toLowerCase().includes(Se)||se.includes(Se)||Ae.includes(Se)))return!1}if(w!=="all"&&ie.envelopeId!==w||T!=="All"&&ie.type!==T||M!=="all"&&(!ie.paymentMethod||ie.paymentMethod.id!==M)||!ie.date||typeof ie.date!="string")return!1;const oe=ie.date.split("T")[0];return!(z&&(oe<W||oe>G)||O!=="all"&&new Date(oe).getMonth()!==parseInt(O)||N&&!ie.reconciled)}).sort((ie,oe)=>new Date(oe.date).getTime()-new Date(ie.date).getTime())},[e,n,b,w,T,M,W,G,N,C,s,z]);$.log(" Final filtered transactions:",{count:X.length,transactions:X.map(K=>({id:K.id,description:K.description,amount:K.amount,date:K.date,month:K.month,type:K.type}))});const U=A.useMemo(()=>{const K=[],ue=new Set;for(const ie of X)if(ie.splitGroupId&&!ue.has(ie.splitGroupId)){ue.add(ie.splitGroupId);const oe=X.filter(Ae=>Ae.splitGroupId===ie.splitGroupId),Se=oe.reduce((Ae,ve)=>Ae+ve.amount,0),se=oe.map(Ae=>n.find(ve=>ve.id===Ae.envelopeId)?.name||"Unknown").join(", ");K.push({key:`split-${ie.splitGroupId}`,transaction:ie,totalAmount:Se,envelopeNames:se,splitTransactions:oe,isSplitGroup:!0})}else{if(ie.splitGroupId&&ue.has(ie.splitGroupId))continue;{const oe=n.find(Se=>Se.id===ie.envelopeId)?.name||"Unknown Envelope";K.push({key:ie.id,transaction:ie,totalAmount:ie.amount,envelopeNames:oe,splitTransactions:[ie],isSplitGroup:!1})}}return K},[X,n]),Z=J?n.find(K=>K.id===J.envelopeId):null,te=K=>{const ue={...K,reconciled:!K.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(Sl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(gq,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const K=!C;R(K),K&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${C?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":C?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(mq,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:K=>x(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(Bp,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:M,onChange:K=>V(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:K=>S(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((K,ue)=>K.name.localeCompare(ue.name)).map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(K=>m.jsx("button",{onClick:()=>P(K),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===K?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:K},K))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:O,onChange:K=>I(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(K,ue)=>ue).map(K=>m.jsx("option",{value:K,children:new Date(2022,K).toLocaleString("default",{month:"long"})},K))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>L(!z),className:`w-9 h-5 rounded-full transition-colors relative ${z?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${z?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${z?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:W,onChange:K=>Q(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:K=>Y(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>D(!N),className:`w-11 h-6 rounded-full transition-colors relative ${N?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${N?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!C),className:`w-11 h-6 rounded-full transition-colors relative ${C?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${C?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:U.map(K=>{const ue=K.transaction;return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{disabled:ue.isAutomatic,onDelete:()=>{const ie=K.splitTransactions.map(oe=>({...oe}));for(const oe of K.splitTransactions)oe.id&&i(oe.id);h(K.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ie)a(oe)})},children:m.jsx(XY,{transaction:{...ue,amount:K.totalAmount},envelopeName:K.envelopeNames,onReconcile:()=>{for(const ie of K.splitTransactions)te(ie)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ee(ue):alert("Cannot edit: Envelope deleted.")}})})},K.key)})})})}),m.jsx(YY,{isVisible:!!J&&!!Z,onClose:()=>ee(null),mode:"edit",currentEnvelope:Z||{},initialTransaction:J,envelopes:n})]})};function nX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nX(t))&&(r&&(r+=" "),r+=e);return r}var $_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function RO(t){if(typeof t!="string")return!1;var e=$_e;return e.includes(t)}var q_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G_e=new Set(q_e);function rX(t){return typeof t!="string"?!1:G_e.has(t)}function iX(t){return typeof t=="string"&&t.startsWith("data-")}function Ps(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(rX(n)||iX(n))&&(e[n]=t[n]);return e}function Xv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ps(e)}return typeof t=="object"&&!Array.isArray(t)?Ps(t):null}function ya(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(rX(n)||iX(n)||RO(n))&&(e[n]=t[n]);return e}var H_e=["children","width","height","viewBox","className","style","title","desc"];function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(null,arguments)}function K_e(t,e){if(t==null)return{};var n,r,i=W_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function W_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aX=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=K_e(t,H_e),h=a||{width:r,height:i,x:0,y:0},g=Wt("recharts-surface",s);return A.createElement("svg",BP({},ya(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),Y_e=["children","className"];function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FP.apply(null,arguments)}function X_e(t,e){if(t==null)return{};var n,r,i=Q_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ui=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=X_e(t,Y_e),a=Wt("recharts-layer",r);return A.createElement("g",FP({className:a},ya(i),{ref:e}),n)}),Z_e=A.createContext(null);function sn(t){return function(){return t}}const sX=Math.cos,y1=Math.sin,Rs=Math.sqrt,b1=Math.PI,f_=2*b1,UP=Math.PI,$P=2*UP,id=1e-6,J_e=$P-id;function oX(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function eEe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return oX;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class tEe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?oX:eEe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>id)if(!(Math.abs(h*c-u*f)>id)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,S=Math.sqrt(x),T=Math.sqrt(g),P=a*Math.tan((UP-Math.acos((x+g-w)/(2*S*T)))/2),N=P/T,D=P/S;Math.abs(N-1)>id&&this._append`L${e+N*f},${n+N*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+D*c},${this._y1=n+D*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>id||Math.abs(this._y1-f)>id)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%$P+$P),g>J_e?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>id&&this._append`A${r},${r},0,${+(g>=UP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function MO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new tEe(e)}function jO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lX(t){this._context=t}lX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function h_(t){return new lX(t)}function cX(t){return t[0]}function uX(t){return t[1]}function dX(t,e){var n=sn(!0),r=null,i=h_,a=null,s=MO(o);t=typeof t=="function"?t:t===void 0?cX:sn(t),e=typeof e=="function"?e:e===void 0?uX:sn(e);function o(c){var u,f=(c=jO(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:sn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:sn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:sn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function bx(t,e,n){var r=null,i=sn(!0),a=null,s=h_,o=null,c=MO(u);t=typeof t=="function"?t:t===void 0?cX:sn(+t),e=typeof e=="function"?e:sn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?uX:sn(+n);function u(h){var g,v,b,x=(h=jO(h)).length,w,S=!1,T,P=new Array(x),N=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(P[b],N[b]);o.lineEnd(),o.areaEnd()}S&&(P[g]=+t(w,g,h),N[g]=+e(w,g,h),o.point(r?+r(w,g,h):P[g],n?+n(w,g,h):N[g]))}if(T)return o=null,T+""||null}function f(){return dX().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:sn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:sn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:sn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:sn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:sn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:sn(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:sn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class fX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function nEe(t){return new fX(t,!0)}function rEe(t){return new fX(t,!1)}const zO={draw(t,e){const n=Rs(e/b1);t.moveTo(n,0),t.arc(0,0,n,0,f_)}},iEe={draw(t,e){const n=Rs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hX=Rs(1/3),aEe=hX*2,sEe={draw(t,e){const n=Rs(e/aEe),r=n*hX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},oEe={draw(t,e){const n=Rs(e),r=-n/2;t.rect(r,r,n,n)}},lEe=.8908130915292852,pX=y1(b1/10)/y1(7*b1/10),cEe=y1(f_/10)*pX,uEe=-sX(f_/10)*pX,dEe={draw(t,e){const n=Rs(e*lEe),r=cEe*n,i=uEe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=f_*a/5,o=sX(s),c=y1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},wk=Rs(3),fEe={draw(t,e){const n=-Rs(e/(wk*3));t.moveTo(0,n*2),t.lineTo(-wk*n,-n),t.lineTo(wk*n,-n),t.closePath()}},Ra=-.5,Ma=Rs(3)/2,qP=1/Rs(12),hEe=(qP/2+1)*3,pEe={draw(t,e){const n=Rs(e/hEe),r=n/2,i=n*qP,a=r,s=n*qP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Ra*r-Ma*i,Ma*r+Ra*i),t.lineTo(Ra*a-Ma*s,Ma*a+Ra*s),t.lineTo(Ra*o-Ma*c,Ma*o+Ra*c),t.lineTo(Ra*r+Ma*i,Ra*i-Ma*r),t.lineTo(Ra*a+Ma*s,Ra*s-Ma*a),t.lineTo(Ra*o+Ma*c,Ra*c-Ma*o),t.closePath()}};function gEe(t,e){let n=null,r=MO(i);t=typeof t=="function"?t:sn(t||zO),e=typeof e=="function"?e:sn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:sn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:sn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function x1(){}function w1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gX(t){this._context=t}gX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:w1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mEe(t){return new gX(t)}function mX(t){this._context=t}mX.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vEe(t){return new mX(t)}function vX(t){this._context=t}vX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yEe(t){return new vX(t)}function yX(t){this._context=t}yX.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bEe(t){return new yX(t)}function WB(t){return t<0?-1:1}function YB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(WB(a)+WB(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function XB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Sk(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function S1(t){this._context=t}S1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sk(this,this._t0,XB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Sk(this,XB(this,n=YB(this,t,e)),n);break;default:Sk(this,this._t0,n=YB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function bX(t){this._context=new xX(t)}(bX.prototype=Object.create(S1.prototype)).point=function(t,e){S1.prototype.point.call(this,e,t)};function xX(t){this._context=t}xX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function xEe(t){return new S1(t)}function wEe(t){return new bX(t)}function wX(t){this._context=t}wX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=QB(t),i=QB(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function QB(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function SEe(t){return new wX(t)}function p_(t,e){this._context=t,this._t=e}p_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _Ee(t){return new p_(t,.5)}function EEe(t){return new p_(t,0)}function TEe(t){return new p_(t,1)}function Yd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function GP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function AEe(t,e){return t[e]}function kEe(t){const e=[];return e.key=t,e}function CEe(){var t=sn([]),e=GP,n=Yd,r=AEe;function i(a){var s=Array.from(t.apply(this,arguments),kEe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=jO(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:sn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:sn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?GP:typeof a=="function"?a:sn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Yd,i):n},i}function IEe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Yd(t,e)}}function PEe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Yd(t,e)}}function NEe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;v+=w-S}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Yd(t,e)}}var _k={},Ek={},ZB;function DEe(){return ZB||(ZB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Ek)),Ek}var Tk={},JB;function SX(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Tk)),Tk}var Ak={},e6;function LO(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Ak)),Ak}var kk={},Ck={},t6;function OEe(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Ck)),Ck}var n6;function VO(){return n6||(n6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OEe(),n=LO();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(kk)),kk}var r6;function BO(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DEe(),n=SX(),r=LO(),i=VO();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(_k)),_k}var Ik,i6;function REe(){return i6||(i6=1,Ik=BO().get),Ik}var MEe=REe();const Xd=Ml(MEe);var jEe=4;function Fc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jEe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Fc(o)+a:i+a},"")}var Rr=t=>t===0?0:t>0?1:-1,Co=t=>typeof t=="number"&&t!=+t,Qd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,He=t=>(typeof t=="number"||t instanceof Number)&&!Co(t),Ga=t=>He(t)||typeof t=="string",zEe=0,Qv=t=>{var e=++zEe;return"".concat(t||"").concat(e)},li=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(e)&&typeof e!="string")return r;var a;if(Qd(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Co(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},_X=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function pr(t,e,n){return He(t)&&He(e)?Fc(t+n*(e-t)):e}function LEe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Xd(r,e))===n)}var jr=t=>t===null||typeof t>"u",W0=t=>jr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ui(t){return t!=null}function ng(){}var VEe=["type","size","sizeType"];function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HP.apply(null,arguments)}function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){BEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BEe(t,e,n){return(e=FEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FEe(t){var e=UEe(t,"string");return typeof e=="symbol"?e:e+""}function UEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ee(t,e){if(t==null)return{};var n,r,i=qEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var EX={symbolCircle:zO,symbolCross:iEe,symbolDiamond:sEe,symbolSquare:oEe,symbolStar:dEe,symbolTriangle:fEe,symbolWye:pEe},GEe=Math.PI/180,HEe=t=>{var e="symbol".concat(W0(t));return EX[e]||zO},KEe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*GEe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},WEe=(t,e)=>{EX["symbol".concat(W0(t))]=e},TX=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=$Ee(t,VEe),a=s6(s6({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=HEe(s),v=gEe().type(g).size(KEe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ya(a);return He(u)&&He(f)&&He(n)?A.createElement("path",HP({},h,{className:Wt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};TX.registerSymbol=WEe;var AX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,YEe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{RO(i)&&(r[i]=(a=>n[i](n,a)))}),r},XEe=(t,e,n)=>r=>(t(e,n,r),null),g_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];RO(i)&&typeof a=="function"&&(r||(r={}),r[i]=XEe(a,e,n))}),r};function o6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o6(Object(n),!0).forEach(function(r){ZEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZEe(t,e,n){return(e=JEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JEe(t){var e=eTe(t,"string");return typeof e=="symbol"?e:e+""}function eTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xr(t,e){var n=QEe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var Pk={},Nk={},l6;function tTe(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s,a,n);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(Nk)),Nk}var Dk={},c6;function nTe(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(Dk)),Dk}var Ok={},u6;function kX(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Ok)),Ok}var Rk={},Mk={},jk={},d6;function rTe(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(jk)),jk}var f6;function FO(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rTe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Mk)),Mk}var zk={},h6;function iTe(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(zk)),zk}var p6;function aTe(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FO(),n=iTe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Rk)),Rk}var Lk={},Vk={},g6;function sTe(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BO();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Vk)),Vk}var Bk={},Fk={},Uk={},$k={},m6;function CX(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})($k)),$k}var qk={},v6;function IX(){return v6||(v6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(qk)),qk}var Gk={},y6;function PX(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(Gk)),Gk}var b6;function oTe(){return b6||(b6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CX(),n=IX(),r=PX();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,S,T,P){const N=g(b,x,w,S,T,P);return N!==void 0?!!N:a(b,x,v,P)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.isEqualsSameValueZero(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.isEqualsSameValueZero(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const P=f[T];let N=!1;if(g(P,w,x,f,h,v)&&(N=!0),N){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Uk)),Uk}var x6;function NX(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oTe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Fk)),Fk}var Hk={},Kk={},Wk={},w6;function lTe(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Wk)),Wk}var Yk={},S6;function UO(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Yk)),Yk}var Xk={},_6;function DX(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",P="[object Uint32Array]",N="[object BigUint64Array]",D="[object Int8Array]",O="[object Int16Array]",I="[object Int32Array]",C="[object BigInt64Array]",R="[object Float32Array]",M="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=M,t.functionTag=h,t.int16ArrayTag=O,t.int32ArrayTag=I,t.int8ArrayTag=D,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=P,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(Xk)),Xk}var Qk={},E6;function cTe(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Qk)),Qk}var T6;function OX(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lTe(),n=UO(),r=DX(),i=IX(),a=cTe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const S of f)w.add(o(S,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Kk)),Kk}var A6;function uTe(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OX();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Hk)),Hk}var k6;function dTe(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NX(),n=uTe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Bk)),Bk}var Zk={},Jk={},eC={},C6;function fTe(){return C6||(C6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OX(),n=UO(),r=DX();function i(a,s){return e.cloneDeepWith(a,(o,c,u,f)=>{const h=s?.(o,c,u,f);if(h!==void 0)return h;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const g={};return f.set(a,g),e.copyProperties(g,a,u,f),g}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a?.valueOf());return e.copyProperties(g,a),g}case r.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(eC)),eC}var I6;function hTe(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fTe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Jk)),Jk}var tC={},nC={},P6;function RX(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(nC)),nC}var rC={},N6;function pTe(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UO();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(rC)),rC}var D6;function gTe(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SX(),n=RX(),r=pTe(),i=VO();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(tC)),tC}var O6;function mTe(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NX(),n=LO(),r=hTe(),i=BO(),a=gTe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(Zk)),Zk}var R6;function vTe(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kX(),n=sTe(),r=dTe(),i=mTe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(Lk)),Lk}var M6;function yTe(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tTe(),n=nTe(),r=kX(),i=aTe(),a=vTe();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(c),1)):[]}t.uniqBy=s})(Pk)),Pk}var iC,j6;function bTe(){return j6||(j6=1,iC=yTe().uniqBy),iC}var xTe=bTe();const z6=Ml(xTe);function wTe(t,e,n){return e===!0?z6(t,n):typeof e=="function"?z6(t,e):t}var aC={exports:{}},sC={},oC={exports:{}},lC={};var L6;function STe(){if(L6)return lC;L6=1;var t=Mp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return lC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,lC}var V6;function _Te(){return V6||(V6=1,oC.exports=STe()),oC.exports}var B6;function ETe(){if(B6)return sC;B6=1;var t=Mp(),e=_Te();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return sC.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(O){if(!T){if(T=!0,P=O,O=g(O),v!==void 0&&x.hasValue){var I=x.value;if(v(I,O))return N=I}return N=O}if(I=N,r(P,O))return I;var C=g(O);return v!==void 0&&v(I,C)?(P=O,I):(P=O,N=C)}var T=!1,P,N,D=h===void 0?null:h;return[function(){return S(f())},D===null?void 0:function(){return S(D())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},sC}var F6;function TTe(){return F6||(F6=1,aC.exports=ETe()),aC.exports}var ATe=TTe(),$O=A.createContext(null),kTe=t=>t,pn=()=>{var t=A.useContext($O);return t?t.store.dispatch:kTe},dw=()=>{},CTe=()=>dw,ITe=(t,e)=>t===e;function Ge(t){var e=A.useContext($O),n=A.useMemo(()=>e?r=>{if(r!=null)return t(r)}:dw,[e,t]);return ATe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:CTe,e?e.store.getState:dw,e?e.store.getState:dw,n,ITe)}function PTe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function NTe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function DTe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var U6=t=>Array.isArray(t)?t:[t];function OTe(t){const e=Array.isArray(t[0])?t[0]:t;return DTe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function RTe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var MTe=class{constructor(t){this.value=t}deref(){return this.value}},jTe=typeof WeakRef<"u"?WeakRef:MTe,zTe=0,$6=1;function xx(){return{s:zTe,v:void 0,o:null,p:null}}function MX(t,e={}){let n=xx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=xx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=xx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===$6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new jTe(f):f}return u.s=$6,u.v=f,f}return s.clearCache=()=>{n=xx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function LTe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),PTe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=MX,argsMemoizeOptions:b=[]}=f,x=U6(g),w=U6(b),S=OTe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),P=v(function(){s++;const D=RTe(S,arguments);return o=T.apply(null,D),o},...w);return Object.assign(P,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var me=LTe(MX),VTe=Object.assign((t,e=me)=>{NTe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>VTe}),cC={},uC={},dC={},q6;function BTe(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(dC)),dC}var fC={},hC={},G6;function jX(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(hC)),hC}var H6;function FTe(){return H6||(H6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(fC)),fC}var K6;function UTe(){return K6||(K6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BTe(),n=FTe(),r=VO();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(uC)),uC}var pC={},W6;function $Te(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(pC)),pC}var gC={},Y6;function zX(){return Y6||(Y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RX(),n=FO(),r=CX(),i=PX();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}t.isIterateeCall=a})(gC)),gC}var X6;function qTe(){return X6||(X6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UTe(),n=$Te(),r=zX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(cC)),cC}var mC,Q6;function GTe(){return Q6||(Q6=1,mC=qTe().sortBy),mC}var HTe=GTe();const m_=Ml(HTe);var LX=t=>t.legend.settings,KTe=t=>t.legend.size,WTe=t=>t.legend.payload;me([WTe,LX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?m_(r,n):r});var wx=1;function YTe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>wx||Math.abs(s.left-e.left)>wx||Math.abs(s.top-e.top)>wx||Math.abs(s.width-e.width)>wx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Gr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var XTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Z6=XTe,vC=()=>Math.random().toString(36).substring(7).split("").join("."),QTe={INIT:`@@redux/INIT${vC()}`,REPLACE:`@@redux/REPLACE${vC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vC()}`},_1=QTe;function qO(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function VX(t,e,n){if(typeof t!="function")throw new Error(Gr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Gr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Gr(1));return n(VX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Gr(3));return i}function h(w){if(typeof w!="function")throw new Error(Gr(4));if(c)throw new Error(Gr(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(Gr(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!qO(w))throw new Error(Gr(7));if(typeof w.type>"u")throw new Error(Gr(8));if(typeof w.type!="string")throw new Error(Gr(17));if(c)throw new Error(Gr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error(Gr(10));r=w,g({type:_1.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Gr(11));function T(){const N=S;N.next&&N.next(f())}return T(),{unsubscribe:w(T)}},[Z6](){return this}}}return g({type:_1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[Z6]:b}}function ZTe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:_1.INIT})>"u")throw new Error(Gr(12));if(typeof n(void 0,{type:_1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gr(13))})}function BX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{ZTe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(Gr(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function E1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function JTe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Gr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=E1(...o)(i.dispatch),{...i,dispatch:a}}}function FX(t){return qO(t)&&"type"in t&&typeof t.type=="string"}var UX=Symbol.for("immer-nothing"),J6=Symbol.for("immer-draftable"),Ti=Symbol.for("immer-state");function gs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ha=Object,kp=ha.getPrototypeOf,T1="constructor",v_="prototype",KP="configurable",A1="enumerable",fw="writable",Zv="value",Cl=t=>!!t&&!!t[Ti];function Ns(t){return t?$X(t)||b_(t)||!!t[J6]||!!t[T1]?.[J6]||x_(t)||w_(t):!1}var eAe=ha[v_][T1].toString(),eF=new WeakMap;function $X(t){if(!t||!GO(t))return!1;const e=kp(t);if(e===null||e===ha[v_])return!0;const n=ha.hasOwnProperty.call(e,T1)&&e[T1];if(n===Object)return!0;if(!Eh(n))return!1;let r=eF.get(n);return r===void 0&&(r=Function.toString.call(n),eF.set(n,r)),r===eAe}function y_(t,e,n=!0){Y0(t)===0?(n?Reflect.ownKeys(t):ha.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Y0(t){const e=t[Ti];return e?e.type_:b_(t)?1:x_(t)?2:w_(t)?3:0}var tF=(t,e,n=Y0(t))=>n===2?t.has(e):ha[v_].hasOwnProperty.call(t,e),WP=(t,e,n=Y0(t))=>n===2?t.get(e):t[e],k1=(t,e,n,r=Y0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function tAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var b_=Array.isArray,x_=t=>t instanceof Map,w_=t=>t instanceof Set,GO=t=>typeof t=="object",Eh=t=>typeof t=="function",yC=t=>typeof t=="boolean";function nAe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var nl=t=>t.copy_||t.base_,HO=t=>t.modified_?t.copy_:t.base_;function YP(t,e){if(x_(t))return new Map(t);if(w_(t))return new Set(t);if(b_(t))return Array[v_].slice.call(t);const n=$X(t);if(e===!0||e==="class_only"&&!n){const r=ha.getOwnPropertyDescriptors(t);delete r[Ti];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[fw]===!1&&(o[fw]=!0,o[KP]=!0),(o.get||o.set)&&(r[s]={[KP]:!0,[fw]:!0,[A1]:o[A1],[Zv]:t[s]})}return ha.create(kp(t),r)}else{const r=kp(t);if(r!==null&&n)return{...t};const i=ha.create(r);return ha.assign(i,t)}}function KO(t,e=!1){return S_(t)||Cl(t)||!Ns(t)||(Y0(t)>1&&ha.defineProperties(t,{set:Sx,add:Sx,clear:Sx,delete:Sx}),ha.freeze(t),e&&y_(t,(n,r)=>{KO(r,!0)},!1)),t}function rAe(){gs(2)}var Sx={[Zv]:rAe};function S_(t){return t===null||!GO(t)?!0:ha.isFrozen(t)}var C1="MapSet",XP="Patches",nF="ArrayMethods",qX={};function Zd(t){const e=qX[t];return e||gs(0,t),e}var rF=t=>!!qX[t],Jv,GX=()=>Jv,iAe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:rF(C1)?Zd(C1):void 0,arrayMethodsPlugin_:rF(nF)?Zd(nF):void 0});function iF(t,e){e&&(t.patchPlugin_=Zd(XP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function QP(t){ZP(t),t.drafts_.forEach(aAe),t.drafts_=null}function ZP(t){t===Jv&&(Jv=t.parent_)}var aF=t=>Jv=iAe(Jv,t);function aAe(t){const e=t[Ti];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ti].modified_&&(QP(e),gs(4)),Ns(t)&&(t=oF(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ti].base_,t,e)}else t=oF(e,n);return sAe(e,t,!0),QP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==UX?t:void 0}function oF(t,e){if(S_(e))return e;const n=e[Ti];if(!n)return I1(e,t.handledSet_,t);if(!__(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);WX(n,t)}return n.copy_}function sAe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&KO(e,n)}function HX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var __=(t,e)=>t.scope_===e,oAe=[];function KX(t,e,n,r){const i=nl(t),a=t.type_;if(r!==void 0&&WP(i,r,a)===e){k1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;y_(i,(c,u)=>{if(Cl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??oAe;for(const o of s)k1(i,o,n,a)}function lAe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!__(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=HO(a);KX(t,a.draft_??a,s,n),WX(a,i)})}function WX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}HX(t)}}function cAe(t,e,n){const{scope_:r}=t;if(Cl(n)){const i=n[Ti];__(i,r)&&i.callbacks_.push(function(){hw(t);const s=HO(i);KX(t,n,s,e)})}else Ns(n)&&t.callbacks_.push(function(){const a=nl(t);t.type_===3?a.has(n)&&I1(n,r.handledSet_,r):WP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&I1(WP(t.copy_,e,t.type_),r.handledSet_,r)})}function I1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Cl(t)||e.has(t)||!Ns(t)||S_(t)||(e.add(t),y_(t,(r,i)=>{if(Cl(i)){const a=i[Ti];if(__(a,n)){const s=HO(a);k1(t,r,s,t.type_),HX(a)}}else Ns(i)&&I1(i,e,n)})),t}function uAe(t,e){const n=b_(t),r={type_:n?1:0,scope_:e?e.scope_:GX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=P1;n&&(i=[r],a=e0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var P1={get(t,e){if(e===Ti)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=nl(t);if(!tF(i,e,t.type_))return dAe(t,i,e);const a=i[e];if(t.finalized_||!Ns(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&nAe(e))return a;if(a===bC(t.base_,e)){hw(t);const s=t.type_===1?+e:e,o=eN(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in nl(t)},ownKeys(t){return Reflect.ownKeys(nl(t))},set(t,e,n){const r=YX(nl(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=bC(nl(t),e),a=i?.[Ti];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(tAe(n,i)&&(n!==void 0||tF(t.base_,e,t.type_)))return!0;hw(t),JP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),cAe(t,e,n)),!0},deleteProperty(t,e){return hw(t),bC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),JP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=nl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[fw]:!0,[KP]:t.type_!==1||e!=="length",[A1]:r[A1],[Zv]:n[e]}},defineProperty(){gs(11)},getPrototypeOf(t){return kp(t.base_)},setPrototypeOf(){gs(12)}},e0={};for(let t in P1){let e=P1[t];e0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}e0.deleteProperty=function(t,e){return e0.set.call(this,t,e,void 0)};e0.set=function(t,e,n){return P1.set.call(this,t[0],e,n,t[0])};function bC(t,e){const n=t[Ti];return(n?nl(n):t)[e]}function dAe(t,e,n){const r=YX(e,n);return r?Zv in r?r[Zv]:r.get?.call(t.draft_):void 0}function YX(t,e){if(!(e in t))return;let n=kp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=kp(n)}}function JP(t){t.modified_||(t.modified_=!0,t.parent_&&JP(t.parent_))}function hw(t){t.copy_||(t.assigned_=new Map,t.copy_=YP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eh(n)&&!Eh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}Eh(r)||gs(6),i!==void 0&&!Eh(i)&&gs(7);let a;if(Ns(n)){const s=aF(this),o=eN(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?QP(s):ZP(s)}return iF(s,i),sF(a,s)}else if(!n||!GO(n)){if(a=r(n),a===void 0&&(a=n),a===UX&&(a=void 0),this.autoFreeze_&&KO(a,!0),i){const s=[],o=[];Zd(XP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else gs(1,n)},this.produceWithPatches=(n,r)=>{if(Eh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},yC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),yC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),yC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ns(e)||gs(8),Cl(e)&&(e=As(e));const n=aF(this),r=eN(n,e,void 0);return r[Ti].isManual_=!0,ZP(n),r}finishDraft(e,n){const r=e&&e[Ti];(!r||!r.isManual_)&&gs(9);const{scope_:i}=r;return iF(i,n),sF(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Zd(XP).applyPatches_;return Cl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function eN(t,e,n,r){const[i,a]=x_(e)?Zd(C1).proxyMap_(e,n):w_(e)?Zd(C1).proxySet_(e,n):uAe(e,n);return(n?.scope_??GX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?lAe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function As(t){return Cl(t)||gs(10,t),XX(t)}function XX(t){if(!Ns(t)||S_(t))return t;const e=t[Ti];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=YP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=YP(t,!0);return y_(n,(i,a)=>{k1(n,i,XX(a))},r),e&&(e.finalized_=!1),n}var hAe=new fAe,QX=hAe.produce;function ZX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var pAe=ZX(),gAe=ZX,mAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?E1:E1.apply(null,arguments)};function Ha(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ga(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>FX(r)&&r.type===t,n}var JX=class Km extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Km.prototype)}static get[Symbol.species](){return Km}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Km(...e[0].concat(this)):new Km(...e.concat(this))}};function lF(t){return Ns(t)?QX(t,()=>{}):t}function _x(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function vAe(t){return typeof t=="boolean"}var yAe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new JX;return n&&(vAe(n)?s.push(pAe):s.push(gAe(n.extraArgument))),s},eQ="RTK_autoBatch",vn=()=>t=>({payload:t,meta:{[eQ]:!0}}),cF=t=>e=>{setTimeout(e,t)},tQ=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cF(10):t.type==="callback"?t.queueNotification:cF(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[eQ],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},bAe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new JX(t);return r&&i.push(tQ(typeof r=="object"?r:void 0)),i};function xAe(t){const e=yAe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(qO(n))o=BX(n);else throw new Error(ga(1));let c;typeof r=="function"?c=r(e):c=e();let u=E1;i&&(u=mAe({trace:!1,...typeof i=="object"&&i}));const f=JTe(...c),h=bAe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return VX(o,a,v)}function nQ(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ga(28));if(o in e)throw new Error(ga(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function wAe(t){return typeof t=="function"}function SAe(t,e){let[n,r,i]=nQ(e),a;if(wAe(t))a=()=>lF(t());else{const o=lF(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Cl(f)){const v=h(f,c);return v===void 0?f:v}else{if(Ns(f))return QX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var _Ae="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EAe=(t=21)=>{let e="",n=t;for(;n--;)e+=_Ae[Math.random()*64|0];return e},TAe=Symbol.for("rtk-slice-createasyncthunk");function AAe(t,e){return`${t}/${e}`}function kAe({creators:t}={}){const e=t?.asyncThunk?.[TAe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ga(11));const s=(typeof r.reducers=="function"?r.reducers(IAe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(P,N){const D=typeof P=="string"?P:P.type;if(!D)throw new Error(ga(12));if(D in c.sliceCaseReducersByType)throw new Error(ga(13));return c.sliceCaseReducersByType[D]=N,u},addMatcher(P,N){return c.sliceMatchers.push({matcher:P,reducer:N}),u},exposeAction(P,N){return c.actionCreators[P]=N,u},exposeCaseReducer(P,N){return c.sliceCaseReducersByName[P]=N,u}};o.forEach(P=>{const N=s[P],D={reducerName:P,type:AAe(i,P),createNotation:typeof r.reducers=="function"};NAe(N)?OAe(D,N,u,e):PAe(D,N,u)});function f(){const[P={},N=[],D=void 0]=typeof r.extraReducers=="function"?nQ(r.extraReducers):[r.extraReducers],O={...P,...c.sliceCaseReducersByType};return SAe(r.initialState,I=>{for(let C in O)I.addCase(C,O[C]);for(let C of c.sliceMatchers)I.addMatcher(C.matcher,C.reducer);for(let C of N)I.addMatcher(C.matcher,C.reducer);D&&I.addDefaultCase(D)})}const h=P=>P,g=new Map,v=new WeakMap;let b;function x(P,N){return b||(b=f()),b(P,N)}function w(){return b||(b=f()),b.getInitialState()}function S(P,N=!1){function D(I){let C=I[P];return typeof C>"u"&&N&&(C=_x(v,D,w)),C}function O(I=h){const C=_x(g,N,()=>new WeakMap);return _x(C,I,()=>{const R={};for(const[M,V]of Object.entries(r.selectors??{}))R[M]=CAe(V,I,()=>_x(v,I,w),N);return R})}return{reducerPath:P,getSelectors:O,get selectors(){return O(D)},selectSlice:D}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(P,{reducerPath:N,...D}={}){const O=N??a;return P.inject({reducerPath:O,reducer:x},D),{...T,...S(O,!0)}}};return T}}function CAe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Wi=kAe();function IAe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function PAe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!DAe(r))throw new Error(ga(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Ha(t,s):Ha(t))}function NAe(t){return t._reducerDefinitionType==="asyncThunk"}function DAe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function OAe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ga(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||Ex,pending:o||Ex,rejected:c||Ex,settled:u||Ex})}function Ex(){}var RAe="task",rQ="listener",iQ="completed",WO="cancelled",MAe=`task-${WO}`,jAe=`task-${iQ}`,tN=`${rQ}-${WO}`,zAe=`${rQ}-${iQ}`,E_=class{constructor(t){this.code=t,this.message=`${RAe} ${WO} (reason: ${t})`}name="TaskAbortError";message},YO=(t,e)=>{if(typeof t!="function")throw new TypeError(ga(32))},N1=()=>{},aQ=(t,e=N1)=>(t.catch(e),t),sQ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Nd=t=>{if(t.aborted)throw new E_(t.reason)};function oQ(t,e){let n=N1;return new Promise((r,i)=>{const a=()=>i(new E_(t.reason));if(t.aborted){a();return}n=sQ(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=N1})}var LAe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof E_?"cancelled":"rejected",error:n}}finally{e?.()}},D1=t=>e=>aQ(oQ(t,e).then(n=>(Nd(t),n))),lQ=t=>{const e=D1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Wh}=Object,uF={},T_="listenerMiddleware",VAe=(t,e)=>{const n=r=>sQ(t,()=>r.abort(t.reason));return(r,i)=>{YO(r);const a=new AbortController;n(a);const s=LAe(async()=>{Nd(t),Nd(a.signal);const o=await r({pause:D1(a.signal),delay:lQ(a.signal),signal:a.signal});return Nd(a.signal),o},()=>a.abort(jAe));return i?.autoJoin&&e.push(s.catch(N1)),{result:D1(t)(s),cancel(){a.abort(MAe)}}}},BAe=(t,e)=>{const n=async(r,i)=>{Nd(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await oQ(e,Promise.race(o));return Nd(e),c}finally{a()}};return(r,i)=>aQ(n(r,i))},cQ=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ha(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ga(21));return YO(a),{predicate:i,type:e,effect:a}},uQ=Wh(t=>{const{type:e,predicate:n,effect:r}=cQ(t);return{id:EAe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ga(22))}}},{withTypes:()=>uQ}),dF=(t,e)=>{const{type:n,effect:r,predicate:i}=cQ(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},nN=t=>{t.pending.forEach(e=>{e.abort(tN)})},FAe=(t,e)=>()=>{for(const n of e.keys())nN(n);t.clear()},fF=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},dQ=Wh(Ha(`${T_}/add`),{withTypes:()=>dQ}),UAe=Ha(`${T_}/removeAll`),fQ=Wh(Ha(`${T_}/remove`),{withTypes:()=>fQ}),$Ae=(...t)=>{console.error(`${T_}/error`,...t)},X0=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=$Ae}=t;YO(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&nN(v)}),c=v=>{const b=dF(e,v)??uQ(v);return o(b)};Wh(c,{withTypes:()=>c});const u=v=>{const b=dF(e,v);return b&&(b.unsubscribe(),v.cancelActive&&nN(b)),!!b};Wh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const S=new AbortController,T=BAe(c,S.signal),P=[];try{v.pending.add(S),r(v),await Promise.resolve(v.effect(b,Wh({},x,{getOriginalState:w,condition:(N,D)=>T(N,D).then(Boolean),take:T,delay:lQ(S.signal),pause:D1(S.signal),extra:a,signal:S.signal,fork:VAe(S.signal,P),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((N,D,O)=>{N!==S&&(N.abort(tN),O.delete(N))})},cancel:()=>{S.abort(tN),v.pending.delete(S)},throwIfCancelled:()=>{Nd(S.signal)}})))}catch(N){N instanceof E_||fF(s,N,{raisedBy:"effect"})}finally{await Promise.all(P),S.abort(zAe),i(v),v.pending.delete(S)}},h=FAe(e,n);return{middleware:v=>b=>x=>{if(!FX(x))return b(x);if(dQ.match(x))return c(x.payload);if(UAe.match(x)){h();return}if(fQ.match(x))return u(x.payload);let w=v.getState();const S=()=>{if(w===uF)throw new Error(ga(23));return w};let T;try{if(T=b(x),e.size>0){const P=v.getState(),N=Array.from(e.values());for(const D of N){let O=!1;try{O=D.predicate(x,P,w)}catch(I){O=!1,fF(s,I,{raisedBy:"predicate"})}O&&f(D,x,v,S)}}}finally{w=uF}return T},startListening:c,stopListening:u,clearListeners:h}};function ga(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var qAe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},hQ=Wi({name:"chartLayout",initialState:qAe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:GAe,setLayout:HAe,setChartSize:KAe,setScale:WAe}=hQ.actions,YAe=hQ.reducer;function pQ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function pt(t){return Number.isFinite(t)}function Io(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function hF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(n),!0).forEach(function(r){XAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XAe(t,e,n){return(e=QAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QAe(t){var e=ZAe(t,"string");return typeof e=="symbol"?e:e+""}function ZAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hn(t,e,n){return jr(t)||jr(e)?n:Ga(e)?Xd(t,e,n):typeof e=="function"?e(t):n}var JAe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&He(t[a]))return zh(zh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&He(t[s]))return zh(zh({},t),{},{[s]:t[s]+(i||0)})}return t},vu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",gQ=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},mQ=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Rr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var P=r?r.indexOf(S):S,N=s.map(P);return pt(N)?{coordinate:N+x,value:S,offset:x,index:T}:null}).filter(Ui);return w}return c&&u?u.map((S,T)=>{var P=s.map(S);return pt(P)?{coordinate:P+x,value:S,index:T,offset:x}:null}).filter(Ui):s.ticks&&f!=null?s.ticks(f).map((S,T)=>{var P=s.map(S);return pt(P)?{coordinate:P+x,value:S,index:T,offset:x}:null}).filter(Ui):s.domain().map((S,T)=>{var P=s.map(S);return pt(P)?{coordinate:P+x,value:r?r[S]:S,index:T,offset:x}:null}).filter(Ui)},eke=(t,e)=>{if(!e||e.length!==2||!He(e[0])||!He(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!He(t[0])||t[0]<n)&&(i[0]=n),(!He(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},tke=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=Co(f)?h:f;g>=0?(u[0]=a,a+=g,u[1]=a):(u[0]=s,s+=g,u[1]=s)}}}},nke=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=Co(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},rke={sign:tke,expand:IEe,none:Yd,silhouette:PEe,wiggle:NEe,positive:nke},ike=(t,e,n)=>{var r,i=(r=rke[n])!==null&&r!==void 0?r:Yd,a=CEe().keys(e).value((o,c)=>Number(hn(o,c,0))).order(GP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=hn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&He(h[0])&&He(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function ake(t){return t==null?void 0:String(t)}var pF=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=hn(a,e.dataKey,e.scale.domain()[s]);if(jr(o))return null;var c=e.scale.map(o);return He(c)?c-i/2+r:null},ske=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},oke=t=>{var e=t.flat(2).filter(He);return[Math.min(...e),Math.max(...e)]},lke=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],cke=(t,e,n)=>{if(t!=null)return lke(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=pQ(u,e,n),h=oke(f);return!pt(h[0])||!pt(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},gF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=m_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function vF(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return zh(zh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function A_(t,e){if(t)return String(t);if(typeof e=="string")return e}var uke=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},dke=(t,e)=>e==="centric"?t.angle:t.radius,Vl=t=>t.layout.width,Bl=t=>t.layout.height,fke=t=>t.layout.scale,vQ=t=>t.layout.margin,k_=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),C_=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),yQ="data-recharts-item-index",bQ="data-recharts-item-id",Q0=60;function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){hke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hke(t,e,n){return(e=pke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pke(t){var e=gke(t,"string");return typeof e=="symbol"?e:e+""}function gke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mke=t=>t.brush.height;function vke(t){var e=C_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Q0;return n+i}return n},0)}function yke(t){var e=C_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Q0;return n+i}return n},0)}function bke(t){var e=k_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function xke(t){var e=k_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Sr=me([Vl,Bl,vQ,mke,vke,yke,bke,xke,LX,KTe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=Tx(Tx({},h),f),v=g.bottom;g.bottom+=r,g=JAe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return Tx(Tx({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),wke=me(Sr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),XO=me(Vl,Bl,(t,e)=>({x:0,y:0,width:t,height:e})),Ske=A.createContext(null),Ai=()=>A.useContext(Ske)!=null,I_=t=>t.brush,P_=me([I_,Sr,vQ],(t,e,n)=>({height:t.height,x:He(t.x)?t.x:e.left,y:He(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:He(t.width)?t.width:e.width})),xC={},wC={},SC={},bF;function _ke(){return bF||(bF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const P=g==null;v(),c&&P&&f()};return S.schedule=v,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(SC)),SC}var xF;function Eke(){return xF||(xF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ke();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(wC)),wC}var wF;function Tke(){return wF||(wF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eke();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(xC)),xC}var _C,SF;function Ake(){return SF||(SF=1,_C=Tke().throttle),_C}var kke=Ake();const Cke=Ml(kke);var R1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},po={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},xQ=(t,e,n)=>{var{width:r=po.width,height:i=po.height,aspect:a,maxHeight:s}=n,o=Qd(r)?t:Number(r),c=Qd(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Ike={width:0,height:0,overflow:"visible"},Pke={width:0,overflowX:"visible"},Nke={height:0,overflowY:"visible"},Dke={},Oke=t=>{var{width:e,height:n}=t,r=Qd(e),i=Qd(n);return r&&i?Ike:r?Pke:i?Nke:Dke};function Rke(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=po.width,a=po.height):i===void 0?i=r&&r>0?void 0:po.width:a===void 0&&(a=r&&r>0?void 0:po.height),{width:i,height:a}}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rN.apply(null,arguments)}function _F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(n),!0).forEach(function(r){Mke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mke(t,e,n){return(e=jke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jke(t){var e=zke(t,"string");return typeof e=="symbol"?e:e+""}function zke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wQ=A.createContext(po.initialDimension);function Lke(t){return Io(t.width)&&Io(t.height)}function SQ(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return Lke(i)?A.createElement(wQ.Provider,{value:i},e):null}var QO=()=>A.useContext(wQ),Vke=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=po.initialDimension,width:i,height:a,minWidth:s=po.minWidth,minHeight:o,maxHeight:c,children:u,debounce:f=po.debounce,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),P=A.useCallback((C,R)=>{T(M=>{var V=Math.round(C),z=Math.round(R);return M.containerWidth===V&&M.containerHeight===z?M:{containerWidth:V,containerHeight:z}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return ng;var C=z=>{var L,W=z[0];if(W!=null){var{width:Q,height:G}=W.contentRect;P(Q,G),(L=w.current)===null||L===void 0||L.call(w,Q,G)}};f>0&&(C=Cke(C,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(C),{width:M,height:V}=x.current.getBoundingClientRect();return P(M,V),R.observe(x.current),()=>{R.disconnect()}},[P,f]);var{containerWidth:N,containerHeight:D}=S;R1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:I}=xQ(N,D,{width:i,height:a,aspect:n,maxHeight:c});return R1(O!=null&&O>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,I,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Wt("recharts-responsive-container",g),style:EF(EF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:Oke({width:i,height:a})},A.createElement(SQ,{width:O,height:I},u)))}),N_=A.forwardRef((t,e)=>{var n=QO();if(Io(n.width)&&Io(n.height))return t.children;var{width:r,height:i}=Rke({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=xQ(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return He(a)&&He(s)?A.createElement(SQ,{width:a,height:s},t.children):A.createElement(Vke,rN({},t,{width:r,height:i,ref:e}))});function ZO(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Z0=()=>{var t,e=Ai(),n=Ge(wke),r=Ge(P_),i=(t=Ge(I_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Bke={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_Q=()=>{var t;return(t=Ge(Sr))!==null&&t!==void 0?t:Bke},EQ=()=>Ge(Vl),TQ=()=>Ge(Bl),Lt=t=>t.layout.layoutType,rg=()=>Ge(Lt),AQ=()=>{var t=rg();if(t==="horizontal"||t==="vertical")return t},kQ=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Fke=()=>{var t=rg();return t!==void 0},J0=t=>{var e=pn(),n=Ai(),{width:r,height:i}=t,a=QO(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&Io(s)&&Io(o)&&e(KAe({width:s,height:o}))},[e,n,s,o]),null},CQ=Symbol.for("immer-nothing"),TF=Symbol.for("immer-draftable"),ba=Symbol.for("immer-state");function ms(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var t0=Object.getPrototypeOf;function Cp(t){return!!t&&!!t[ba]}function Jd(t){return t?IQ(t)||Array.isArray(t)||!!t[TF]||!!t.constructor?.[TF]||ey(t)||O_(t):!1}var Uke=Object.prototype.constructor.toString(),AF=new WeakMap;function IQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=AF.get(n);return r===void 0&&(r=Function.toString.call(n),AF.set(n,r)),r===Uke}function M1(t,e,n=!0){D_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function D_(t){const e=t[ba];return e?e.type_:Array.isArray(t)?1:ey(t)?2:O_(t)?3:0}function iN(t,e){return D_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function PQ(t,e,n){const r=D_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function $ke(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ey(t){return t instanceof Map}function O_(t){return t instanceof Set}function ad(t){return t.copy_||t.base_}function aN(t,e){if(ey(t))return new Map(t);if(O_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=IQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ba];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(t0(t),r)}else{const r=t0(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function JO(t,e=!1){return R_(t)||Cp(t)||!Jd(t)||(D_(t)>1&&Object.defineProperties(t,{set:Ax,add:Ax,clear:Ax,delete:Ax}),Object.freeze(t),e&&Object.values(t).forEach(n=>JO(n,!0))),t}function qke(){ms(2)}var Ax={value:qke};function R_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Gke={};function ef(t){const e=Gke[t];return e||ms(0,t),e}var n0;function NQ(){return n0}function Hke(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kF(t,e){e&&(ef("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function sN(t){oN(t),t.drafts_.forEach(Kke),t.drafts_=null}function oN(t){t===n0&&(n0=t.parent_)}function CF(t){return n0=Hke(n0,t)}function Kke(t){const e=t[ba];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function IF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ba].modified_&&(sN(e),ms(4)),Jd(t)&&(t=j1(e,t),e.parent_||z1(e,t)),e.patches_&&ef("Patches").generateReplacementPatches_(n[ba].base_,t,e.patches_,e.inversePatches_)):t=j1(e,n,[]),sN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==CQ?t:void 0}function j1(t,e,n){if(R_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ba];if(!i)return M1(e,(a,s)=>PF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return z1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),M1(s,(c,u)=>PF(t,i,a,c,u,n,o),r),z1(t,a,!1),n&&t.patches_&&ef("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function PF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=R_(i);if(!(o&&!s)){if(Cp(i)){const c=a&&e&&e.type_!==3&&!iN(e.assigned_,r)?a.concat(r):void 0,u=j1(t,i,c);if(PQ(n,r,u),Cp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Jd(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;j1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ey(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&z1(t,i)}}}function z1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&JO(e,n)}function Wke(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:NQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=eR;n&&(i=[r],a=r0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var eR={get(t,e){if(e===ba)return t;const n=ad(t);if(!iN(n,e))return Yke(t,n,e);const r=n[e];return t.finalized_||!Jd(r)?r:r===EC(t.base_,e)?(TC(t),t.copy_[e]=cN(r,t)):r},has(t,e){return e in ad(t)},ownKeys(t){return Reflect.ownKeys(ad(t))},set(t,e,n){const r=DQ(ad(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=EC(ad(t),e),a=i?.[ba];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if($ke(n,i)&&(n!==void 0||iN(t.base_,e)))return!0;TC(t),lN(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return EC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,TC(t),lN(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ad(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ms(11)},getPrototypeOf(t){return t0(t.base_)},setPrototypeOf(){ms(12)}},r0={};M1(eR,(t,e)=>{r0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});r0.deleteProperty=function(t,e){return r0.set.call(this,t,e,void 0)};r0.set=function(t,e,n){return eR.set.call(this,t[0],e,n,t[0])};function EC(t,e){const n=t[ba];return(n?ad(n):t)[e]}function Yke(t,e,n){const r=DQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function DQ(t,e){if(!(e in t))return;let n=t0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=t0(n)}}function lN(t){t.modified_||(t.modified_=!0,t.parent_&&lN(t.parent_))}function TC(t){t.copy_||(t.copy_=aN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Xke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&ms(6),r!==void 0&&typeof r!="function"&&ms(7);let i;if(Jd(e)){const a=CF(this),s=cN(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?sN(a):oN(a)}return kF(a,r),IF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===CQ&&(i=void 0),this.autoFreeze_&&JO(i,!0),r){const a=[],s=[];ef("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else ms(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Jd(t)||ms(8),Cp(t)&&(t=Qke(t));const e=CF(this),n=cN(t,void 0);return n[ba].isManual_=!0,oN(e),n}finishDraft(t,e){const n=t&&t[ba];(!n||!n.isManual_)&&ms(9);const{scope_:r}=n;return kF(r,e),IF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ef("Patches").applyPatches_;return Cp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function cN(t,e){const n=ey(t)?ef("MapSet").proxyMap_(t,e):O_(t)?ef("MapSet").proxySet_(t,e):Wke(t,e);return(e?e.scope_:NQ()).drafts_.push(n),n}function Qke(t){return Cp(t)||ms(10,t),OQ(t)}function OQ(t){if(!Jd(t)||R_(t))return t;const e=t[ba];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=aN(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=aN(t,!0);return M1(n,(i,a)=>{PQ(n,i,OQ(a))},r),e&&(e.finalized_=!1),n}var Zke=new Xke;Zke.produce;var Jke={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},RQ=Wi({name:"legend",initialState:Jke,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:vn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:vn()},removeLegendPayload:{reducer(t,e){var n=As(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:vn()}}}),{setLegendSize:H5e,setLegendSettings:K5e,addLegendPayload:MQ,replaceLegendPayload:jQ,removeLegendPayload:zQ}=RQ.actions,eCe=RQ.reducer;function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uN.apply(null,arguments)}function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){tCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tCe(t,e,n){return(e=nCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nCe(t){var e=rCe(t,"string");return typeof e=="symbol"?e:e+""}function rCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iCe(t){return Array.isArray(t)&&Ga(t[0])&&Ga(t[1])?t.join(" ~ "):t}var hh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},aCe=t=>{var{separator:e=hh.separator,contentStyle:n,itemStyle:r,labelStyle:i=hh.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=hh.accessibilityLayer}=t,v=()=>{if(a&&a.length){var D={padding:0,margin:0},O=(o?m_(a,o):a).map((I,C)=>{if(I.type==="none")return null;var R=I.formatter||s||iCe,{value:M,name:V}=I,z=M,L=V;if(R){var W=R(M,V,I,C,a);if(Array.isArray(W))[z,L]=W;else if(W!=null)z=W;else return null}var Q=Tm(Tm({},hh.itemStyle),{},{color:I.color||hh.itemStyle.color},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Q},Ga(L)?A.createElement("span",{className:"recharts-tooltip-item-name"},L):null,Ga(L)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},z),A.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},O)}return null},b=Tm(Tm({},hh.contentStyle),n),x=Tm({margin:0},i),w=!jr(f),S=w?f:"",T=Wt("recharts-default-tooltip",c),P=Wt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var N=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",uN({className:T,style:b},N),A.createElement("p",{className:P,style:x},A.isValidElement(S)?S:"".concat(S)),v())},Am="recharts-tooltip-wrapper",sCe={visibility:"hidden"};function oCe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Wt(Am,{["".concat(Am,"-right")]:He(n)&&e&&He(e.x)&&n>=e.x,["".concat(Am,"-left")]:He(n)&&e&&He(e.x)&&n<e.x,["".concat(Am,"-bottom")]:He(r)&&e&&He(e.y)&&r>=e.y,["".concat(Am,"-top")]:He(r)&&e&&He(e.y)&&r<e.y})}function DF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&He(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function lCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function cCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,f,h,g;return o.height>0&&o.width>0&&n?(h=DF({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),g=DF({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),f=lCe({translateX:h,translateY:g,useTranslate3d:c})):f=sCe,{cssProperties:f,cssClasses:oCe({translateX:h,translateY:g,coordinate:n})}}function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(r){dN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dN(t,e,n){return(e=uCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uCe(t){var e=dCe(t,"string");return typeof e=="symbol"?e:e+""}function dCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fCe extends A.PureComponent{constructor(){super(...arguments),dN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dN(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,T=typeof u=="number"?u:u.x,P=typeof u=="number"?u:u.y,{cssClasses:N,cssProperties:D}=cCe({allowEscapeViewBox:n,coordinate:s,offsetLeft:T,offsetTop:P,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),O=S?{}:kx(kx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=kx(kx({},O),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:I,ref:w},a)}}var LQ=()=>{var t;return(t=Ge(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fN.apply(null,arguments)}function RF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RF(Object(n),!0).forEach(function(r){hCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hCe(t,e,n){return(e=pCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pCe(t){var e=gCe(t,"string");return typeof e=="symbol"?e:e+""}function gCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jF={curveBasisClosed:vEe,curveBasisOpen:yEe,curveBasis:mEe,curveBumpX:nEe,curveBumpY:rEe,curveLinearClosed:bEe,curveLinear:h_,curveMonotoneX:xEe,curveMonotoneY:wEe,curveNatural:SEe,curveStep:_Ee,curveStepAfter:TEe,curveStepBefore:EEe},L1=t=>pt(t.x)&&pt(t.y),zF=t=>t.base!=null&&L1(t.base)&&L1(t),km=t=>t.x,Cm=t=>t.y,mCe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(W0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=jF["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return jF[n]||h_},LF={connectNulls:!1,type:"linear"},vCe=t=>{var{type:e=LF.type,points:n=[],baseLine:r,layout:i,connectNulls:a=LF.connectNulls}=t,s=mCe(e,i),o=a?n.filter(L1):n;if(Array.isArray(r)){var c,u=n.map((b,x)=>MF(MF({},b),{},{base:r[x]}));i==="vertical"?c=bx().y(Cm).x1(km).x0(b=>b.base.x):c=bx().x(km).y1(Cm).y0(b=>b.base.y);var f=c.defined(zF).curve(s),h=a?u.filter(zF):u;return f(h)}var g;i==="vertical"&&He(r)?g=bx().y(Cm).x1(km).x0(r):He(r)?g=bx().x(km).y1(Cm).y0(r):g=dX().x(km).y(Cm);var v=g.defined(L1).curve(s);return v(o)},tR=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=rg();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?vCe(s):r;return A.createElement("path",fN({},Ps(t),YEe(t),{className:Wt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},yCe=["x","y","top","left","width","height","className"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(null,arguments)}function VF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(n),!0).forEach(function(r){xCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xCe(t,e,n){return(e=wCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wCe(t){var e=SCe(t,"string");return typeof e=="symbol"?e:e+""}function SCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ce(t,e){if(t==null)return{};var n,r,i=ECe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ECe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TCe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),ACe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=_Ce(t,yCe),u=bCe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!He(e)||!He(n)||!He(a)||!He(s)||!He(r)||!He(i)?null:A.createElement("path",hN({},ya(u),{className:Wt("recharts-cross",o),d:TCe(e,n,a,s,r,i)}))};function kCe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){CCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CCe(t,e,n){return(e=ICe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ICe(t){var e=PCe(t,"string");return typeof e=="symbol"?e:e+""}function PCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NCe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),VQ=(t,e,n)=>t.map(r=>"".concat(NCe(r)," ").concat(e,"ms ").concat(n)).join(","),DCe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),i0=(t,e)=>Object.keys(e).reduce((n,r)=>FF(FF({},n),{},{[r]:t(r,e[r])}),{});function UF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(n),!0).forEach(function(r){OCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OCe(t,e,n){return(e=RCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RCe(t){var e=MCe(t,"string");return typeof e=="symbol"?e:e+""}function MCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V1=(t,e,n)=>t+(e-t)*n,pN=t=>{var{from:e,to:n}=t;return e!==n},BQ=(t,e,n)=>{var r=i0((i,a)=>{if(pN(a)){var[s,o]=t(a.from,a.to,a.velocity);return gr(gr({},a),{},{from:s,velocity:o})}return a},e);return n<1?i0((i,a)=>pN(a)&&r[i]!=null?gr(gr({},a),{},{velocity:V1(a.velocity,r[i].velocity,n),from:V1(a.from,r[i].from,n)}):a,e):BQ(t,r,n-1)};function jCe(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>gr(gr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>i0((g,v)=>v.from,o),u=()=>!Object.values(o).filter(pN).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=BQ(n,o,b),i(gr(gr(gr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function zCe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:gr(gr({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=i0((x,w)=>V1(...w,n(g)),c);if(a(gr(gr(gr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=i0((x,w)=>V1(...w,n(1)),c);a(gr(gr(gr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const LCe=(t,e,n,r,i,a)=>{var s=DCe(t,e);return n==null?()=>(i(gr(gr({},t),e)),()=>{}):n.isStepper===!0?jCe(t,e,n,s,i,a):zCe(t,e,n,r,s,i,a)};var B1=1e-4,FQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],UQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),$F=(t,e)=>n=>{var r=FQ(t,e);return UQ(r,n)},VCe=(t,e)=>n=>{var r=FQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return UQ(i,n)},BCe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},FCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=BCe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},UCe=(t,e,n,r)=>{var i=$F(t,n),a=$F(e,r),s=VCe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<B1||b<B1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},qF=function(){return UCe(...FCe(...arguments))},$Ce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<B1&&Math.abs(h)<B1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},qCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qF(t);case"spring":return $Ce();default:if(t.split("(")[0]==="cubic-bezier")return qF(t)}return typeof t=="function"?t:null};function GCe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class HCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function KCe(){return GCe(new HCe)}var WCe=A.createContext(KCe);function YCe(t,e){var n=A.useContext(WCe);return A.useMemo(()=>e??n(t),[t,e,n])}var XCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),M_={isSsr:XCe()},QCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GF={t:0},AC={t:1};function j_(t){var e=Xr(t,QCe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!M_.isSsr:n,h=YCe(e.animationId,e.animationManager),[g,v]=A.useState(f?GF:AC),b=A.useRef(null);return A.useEffect(()=>{f||v(AC)},[f]),A.useEffect(()=>{if(!f||!r)return ng;var x=LCe(GF,AC,qCe(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function z_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Qv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Qv(e),r.current=t),n.current}var ZCe=["radius"],JCe=["radius"],HF,KF,WF,YF,XF,QF,ZF,JF,eU,tU;function nU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(n),!0).forEach(function(r){eIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eIe(t,e,n){return(e=tIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tIe(t){var e=nIe(t,"string");return typeof e=="symbol"?e:e+""}function nIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(null,arguments)}function iU(t,e){if(t==null)return{};var n,r,i=rIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function to(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var aU=(t,e,n,r,i)=>{var a=Fc(n),s=Fc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&Array.isArray(i)){for(var g=[0,0,0,0],v=0,b=4;v<b;v++){var x,w=(x=i[v])!==null&&x!==void 0?x:0;g[v]=w>o?o:w}h=Mn(HF||(HF=to(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(KF||(KF=to(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Mn(WF||(WF=to(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Mn(YF||(YF=to(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(XF||(XF=to(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(QF||(QF=to(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Mn(ZF||(ZF=to(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Mn(JF||(JF=to(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);h=Mn(eU||(eU=to(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else h=Mn(tU||(tU=to(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},sU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$Q=t=>{var e=Xr(t,sU),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),P=A.useRef(s),N=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),D=z_(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var O=Wt("recharts-rectangle",f);if(!x){var I=ya(e),{radius:C}=I,R=iU(I,ZCe);return A.createElement("path",F1({},R,{x:Fc(a),y:Fc(s),width:Fc(o),height:Fc(c),radius:typeof u=="number"?u:void 0,className:O,d:aU(a,s,o,c,u)}))}var M=w.current,V=S.current,z=T.current,L=P.current,W="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),G=VQ(["strokeDasharray"],g,typeof h=="string"?h:sU.animationEasing);return A.createElement(j_,{animationId:D,key:D,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},Y=>{var J=pr(M,o,Y),ee=pr(V,c,Y),X=pr(z,a,Y),U=pr(L,s,Y);n.current&&(w.current=J,S.current=ee,T.current=X,P.current=U);var Z;b?Y>0?Z={transition:G,strokeDasharray:Q}:Z={strokeDasharray:W}:Z={strokeDasharray:Q};var te=ya(e),{radius:K}=te,ue=iU(te,JCe);return A.createElement("path",F1({},ue,{radius:typeof u=="number"?u:void 0,className:O,d:aU(X,U,J,ee,u),ref:n,style:rU(rU({},Z),e.style)}))})};function oU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(n),!0).forEach(function(r){iIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iIe(t,e,n){return(e=aIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aIe(t){var e=sIe(t,"string");return typeof e=="symbol"?e:e+""}function sIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U1=Math.PI/180,oIe=t=>t*180/Math.PI,sr=(t,e,n,r)=>({x:t+Math.cos(-U1*r)*n,y:e+Math.sin(-U1*r)*n}),qQ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},lIe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},cIe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=lIe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:oIe(c),angleInRadian:c}},uIe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},dIe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},fIe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=cIe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=uIe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?lU(lU({},e),{},{radius:i,angle:dIe(f,e)}):null};function GQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=sr(e,n,r,i),o=sr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var cU,uU,dU,fU,hU,pU,gU;function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(null,arguments)}function xd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var hIe=(t,e)=>{var n=Rr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Cx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/U1,h=c?i:i+a*f,g=sr(e,n,u,h),v=sr(e,n,r,h),b=c?i-a*f:i,x=sr(e,n,u*Math.cos(f*U1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},HQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=hIe(a,s),c=a+o,u=sr(e,n,i,a),f=sr(e,n,i,c),h=Mn(cU||(cU=xd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=sr(e,n,r,a),v=sr(e,n,r,c);h+=Mn(uU||(uU=xd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(dU||(dU=xd(["L ",","," Z"])),e,n);return h},pIe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Rr(u-c),{circleTangency:h,lineTangency:g,theta:v}=Cx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=Cx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(S<0)return s?Mn(fU||(fU=xd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):HQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Mn(hU||(hU=xd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:P,lineTangency:N,theta:D}=Cx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:O,lineTangency:I,theta:C}=Cx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-D-C;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Mn(pU||(pU=xd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),I.x,I.y,a,a,+(f<0),O.x,O.y,r,r,+(R>180),+(f>0),P.x,P.y,a,a,+(f<0),N.x,N.y)}else T+=Mn(gU||(gU=xd(["L",",","Z"])),e,n);return T},gIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KQ=t=>{var e=Xr(t,gIe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Wt("recharts-sector",h),v=a-i,b=li(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=pIe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=HQ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",gN({},ya(e),{className:g,d:x}))};function mIe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(AX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=sr(r,i,a,o),u=sr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return GQ(e)}}var kC={},CC={},IC={},mU;function vIe(){return mU||(mU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(IC)),IC}var vU;function yIe(){return vU||(vU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vIe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(CC)),CC}var yU;function bIe(){return yU||(yU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zX(),n=yIe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(kC)),kC}var PC,bU;function xIe(){return bU||(bU=1,PC=bIe().range),PC}var wIe=xIe();const WQ=Ml(wIe);function Wc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SIe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nR(t){let e,n,r;t.length!==2?(e=Wc,n=(o,c)=>Wc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Wc||t===SIe?t:_Ie,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function _Ie(){return 0}function YQ(t){return t===null?NaN:+t}function*EIe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const TIe=nR(Wc),ty=TIe.right;nR(YQ).center;class xU extends Map{constructor(e,n=CIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(wU(this,e))}has(e){return super.has(wU(this,e))}set(e,n){return super.set(AIe(this,e),n)}delete(e){return super.delete(kIe(this,e))}}function wU({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function AIe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function kIe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function CIe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function IIe(t=Wc){if(t===Wc)return XQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function XQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const PIe=Math.sqrt(50),NIe=Math.sqrt(10),DIe=Math.sqrt(2);function $1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=PIe?10:a>=NIe?5:a>=DIe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?$1(t,e,n*2):[o,c,u]}function mN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?$1(e,t,n):$1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function vN(t,e,n){return e=+e,t=+t,n=+n,$1(t,e,n)[2]}function yN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?vN(e,t,n):vN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function SU(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _U(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function QQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?XQ:IIe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));QQ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(Im(t,n,e),i(t[r],a)>0&&Im(t,n,r);s<o;){for(Im(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Im(t,n,o):(++o,Im(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Im(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function OIe(t,e,n){if(t=Float64Array.from(EIe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _U(t);if(e>=1)return SU(t);var r,i=(r-1)*e,a=Math.floor(i),s=SU(QQ(t,a).subarray(0,a+1)),o=_U(t.subarray(a+1));return s+(o-s)*(i-a)}}function RIe(t,e,n=YQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function MIe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Qa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Fl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const bN=Symbol("implicit");function rR(){var t=new xU,e=[],n=[],r=bN;function i(a){let s=t.get(a);if(s===void 0){if(r!==bN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new xU;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return rR(e,n).unknown(r)},Qa.apply(i,arguments),i}function iR(){var t=rR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=MIe(g).map(function(S){return b+a*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return iR(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Qa.apply(h(),arguments)}function ZQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ZQ(e())},t}function jIe(){return ZQ(iR.apply(null,arguments).paddingInner(1))}function aR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function JQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ny(){}var a0=.7,q1=1/a0,Yh="\\s*([+-]?\\d+)\\s*",s0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zIe=/^#([0-9a-f]{3,8})$/,LIe=new RegExp(`^rgb\\(${Yh},${Yh},${Yh}\\)$`),VIe=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),BIe=new RegExp(`^rgba\\(${Yh},${Yh},${Yh},${s0}\\)$`),FIe=new RegExp(`^rgba\\(${So},${So},${So},${s0}\\)$`),UIe=new RegExp(`^hsl\\(${s0},${So},${So}\\)$`),$Ie=new RegExp(`^hsla\\(${s0},${So},${So},${s0}\\)$`),EU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aR(ny,o0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:TU,formatHex:TU,formatHex8:qIe,formatHsl:GIe,formatRgb:AU,toString:AU});function TU(){return this.rgb().formatHex()}function qIe(){return this.rgb().formatHex8()}function GIe(){return eZ(this).formatHsl()}function AU(){return this.rgb().formatRgb()}function o0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zIe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?kU(e):n===3?new $i(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ix(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ix(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=LIe.exec(t))?new $i(e[1],e[2],e[3],1):(e=VIe.exec(t))?new $i(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=BIe.exec(t))?Ix(e[1],e[2],e[3],e[4]):(e=FIe.exec(t))?Ix(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=UIe.exec(t))?PU(e[1],e[2]/100,e[3]/100,1):(e=$Ie.exec(t))?PU(e[1],e[2]/100,e[3]/100,e[4]):EU.hasOwnProperty(t)?kU(EU[t]):t==="transparent"?new $i(NaN,NaN,NaN,0):null}function kU(t){return new $i(t>>16&255,t>>8&255,t&255,1)}function Ix(t,e,n,r){return r<=0&&(t=e=n=NaN),new $i(t,e,n,r)}function HIe(t){return t instanceof ny||(t=o0(t)),t?(t=t.rgb(),new $i(t.r,t.g,t.b,t.opacity)):new $i}function xN(t,e,n,r){return arguments.length===1?HIe(t):new $i(t,e,n,r??1)}function $i(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}aR($i,xN,JQ(ny,{brighter(t){return t=t==null?q1:Math.pow(q1,t),new $i(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?a0:Math.pow(a0,t),new $i(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $i(Dd(this.r),Dd(this.g),Dd(this.b),G1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CU,formatHex:CU,formatHex8:KIe,formatRgb:IU,toString:IU}));function CU(){return`#${wd(this.r)}${wd(this.g)}${wd(this.b)}`}function KIe(){return`#${wd(this.r)}${wd(this.g)}${wd(this.b)}${wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function IU(){const t=G1(this.opacity);return`${t===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${t===1?")":`, ${t})`}`}function G1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wd(t){return t=Dd(t),(t<16?"0":"")+t.toString(16)}function PU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new vs(t,e,n,r)}function eZ(t){if(t instanceof vs)return new vs(t.h,t.s,t.l,t.opacity);if(t instanceof ny||(t=o0(t)),!t)return new vs;if(t instanceof vs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new vs(s,o,c,t.opacity)}function WIe(t,e,n,r){return arguments.length===1?eZ(t):new vs(t,e,n,r??1)}function vs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}aR(vs,WIe,JQ(ny,{brighter(t){return t=t==null?q1:Math.pow(q1,t),new vs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?a0:Math.pow(a0,t),new vs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $i(NC(t>=240?t-240:t+120,i,r),NC(t,i,r),NC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new vs(NU(this.h),Px(this.s),Px(this.l),G1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=G1(this.opacity);return`${t===1?"hsl(":"hsla("}${NU(this.h)}, ${Px(this.s)*100}%, ${Px(this.l)*100}%${t===1?")":`, ${t})`}`}}));function NU(t){return t=(t||0)%360,t<0?t+360:t}function Px(t){return Math.max(0,Math.min(1,t||0))}function NC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const sR=t=>()=>t;function YIe(t,e){return function(n){return t+n*e}}function XIe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function QIe(t){return(t=+t)==1?tZ:function(e,n){return n-e?XIe(e,n,t):sR(isNaN(e)?n:e)}}function tZ(t,e){var n=e-t;return n?YIe(t,n):sR(isNaN(t)?e:t)}const DU=(function t(e){var n=QIe(e);function r(i,a){var s=n((i=xN(i)).r,(a=xN(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=tZ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function ZIe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function JIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ePe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ig(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function tPe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function H1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nPe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ig(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var wN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DC=new RegExp(wN.source,"g");function rPe(t){return function(){return t}}function iPe(t){return function(e){return t(e)+""}}function aPe(t,e){var n=wN.lastIndex=DC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=wN.exec(t))&&(i=DC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:H1(r,i)})),n=DC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?iPe(c[0].x):rPe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function ig(t,e){var n=typeof e,r;return e==null||n==="boolean"?sR(e):(n==="number"?H1:n==="string"?(r=o0(e))?(e=r,DU):aPe:e instanceof o0?DU:e instanceof Date?tPe:JIe(e)?ZIe:Array.isArray(e)?ePe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nPe:H1)(t,e)}function oR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function sPe(t,e){e===void 0&&(e=t,t=ig);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function oPe(t){return function(){return t}}function K1(t){return+t}var OU=[0,1];function Si(t){return t}function SN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:oPe(isNaN(e)?NaN:.5)}function lPe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function cPe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=SN(i,r),a=n(s,a)):(r=SN(r,i),a=n(a,s)),function(o){return a(r(o))}}function uPe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=SN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=ty(t,o,1,r)-1;return a[c](i[c](o))}}function ry(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function L_(){var t=OU,e=OU,n=ig,r,i,a,s=Si,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Si&&(s=lPe(t[0],t[g-1])),o=g>2?uPe:cPe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),H1)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,K1),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=oR,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Si,f()):s!==Si},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function lR(){return L_()(Si,Si)}function dPe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function W1(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ip(t){return t=W1(Math.abs(t)),t?t[1]:NaN}function fPe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function hPe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pPe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l0(t){if(!(e=pPe.exec(t)))throw new Error("invalid format: "+t);var e;return new cR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}l0.prototype=cR.prototype;function cR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}cR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gPe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Y1;function mPe(t,e){var n=W1(t,e);if(!n)return Y1=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(Y1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+W1(t,Math.max(0,e+a-1))[0]}function RU(t,e){var n=W1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const MU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dPe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>RU(t*100,e),r:RU,s:mPe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jU(t){return t}var zU=Array.prototype.map,LU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vPe(t){var e=t.grouping===void 0||t.thousands===void 0?jU:fPe(zU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?jU:hPe(zU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,g){h=l0(h);var v=h.fill,b=h.align,x=h.sign,w=h.symbol,S=h.zero,T=h.width,P=h.comma,N=h.precision,D=h.trim,O=h.type;O==="n"?(P=!0,O="g"):MU[O]||(N===void 0&&(N=12),D=!0,O="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var I=(g&&g.prefix!==void 0?g.prefix:"")+(w==="$"?n:w==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():""),C=(w==="$"?r:/[%p]/.test(O)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),R=MU[O],M=/[defgprs%]/.test(O);N=N===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function V(z){var L=I,W=C,Q,G,Y;if(O==="c")W=R(z)+W,z="";else{z=+z;var J=z<0||1/z<0;if(z=isNaN(z)?c:R(Math.abs(z),N),D&&(z=gPe(z)),J&&+z==0&&x!=="+"&&(J=!1),L=(J?x==="("?x:o:x==="-"||x==="("?"":x)+L,W=(O==="s"&&!isNaN(z)&&Y1!==void 0?LU[8+Y1/3]:"")+W+(J&&x==="("?")":""),M){for(Q=-1,G=z.length;++Q<G;)if(Y=z.charCodeAt(Q),48>Y||Y>57){W=(Y===46?i+z.slice(Q+1):z.slice(Q))+W,z=z.slice(0,Q);break}}}P&&!S&&(z=e(z,1/0));var ee=L.length+z.length+W.length,X=ee<T?new Array(T-ee+1).join(v):"";switch(P&&S&&(z=e(X+z,X.length?T-W.length:1/0),X=""),b){case"<":z=L+z+W+X;break;case"=":z=L+X+z+W;break;case"^":z=X.slice(0,ee=X.length>>1)+L+z+W+X.slice(ee);break;default:z=X+L+z+W;break}return a(z)}return V.toString=function(){return h+""},V}function f(h,g){var v=Math.max(-8,Math.min(8,Math.floor(Ip(g)/3)))*3,b=Math.pow(10,-v),x=u((h=l0(h),h.type="f",h),{suffix:LU[8+v/3]});return function(w){return x(b*w)}}return{format:u,formatPrefix:f}}var Nx,uR,nZ;yPe({thousands:",",grouping:[3],currency:["$",""]});function yPe(t){return Nx=vPe(t),uR=Nx.format,nZ=Nx.formatPrefix,Nx}function bPe(t){return Math.max(0,-Ip(Math.abs(t)))}function xPe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ip(e)/3)))*3-Ip(Math.abs(t)))}function wPe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ip(e)-Ip(t))+1}function rZ(t,e,n,r){var i=yN(t,e,n),a;switch(r=l0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=xPe(i,s))&&(r.precision=a),nZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=wPe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=bPe(i))&&(r.precision=a-(r.type==="%")*2);break}}return uR(r)}function yu(t){var e=t.domain;return t.ticks=function(n){var r=e();return mN(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return rZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=vN(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function iZ(){var t=lR();return t.copy=function(){return ry(t,iZ())},Qa.apply(t,arguments),yu(t)}function aZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,K1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return aZ(t).unknown(e)},t=arguments.length?Array.from(t,K1):[0,1],yu(n)}function sZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function VU(t){return Math.log(t)}function BU(t){return Math.exp(t)}function SPe(t){return-Math.log(-t)}function _Pe(t){return-Math.exp(-t)}function EPe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function TPe(t){return t===10?EPe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function APe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FU(t){return(e,n)=>-t(-e,n)}function dR(t){const e=t(VU,BU),n=e.domain;let r=10,i,a;function s(){return i=APe(r),a=TPe(r),n()[0]<0?(i=FU(i),a=FU(a),t(SPe,_Pe)):t(VU,BU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=mN(u,f,w))}else S=mN(g,v,Math.min(v-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=l0(c)).precision==null&&(c.trim=!0),c=uR(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(sZ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function oZ(){const t=dR(L_()).domain([1,10]);return t.copy=()=>ry(t,oZ()).base(t.base()),Qa.apply(t,arguments),t}function UU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $U(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function fR(t){var e=1,n=t(UU(e),$U(e));return n.constant=function(r){return arguments.length?t(UU(e=+r),$U(e)):e},yu(n)}function lZ(){var t=fR(L_());return t.copy=function(){return ry(t,lZ()).constant(t.constant())},Qa.apply(t,arguments)}function qU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function kPe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function CPe(t){return t<0?-t*t:t*t}function hR(t){var e=t(Si,Si),n=1;function r(){return n===1?t(Si,Si):n===.5?t(kPe,CPe):t(qU(n),qU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},yu(e)}function pR(){var t=hR(L_());return t.copy=function(){return ry(t,pR()).exponent(t.exponent())},Qa.apply(t,arguments),t}function IPe(){return pR.apply(null,arguments).exponent(.5)}function GU(t){return Math.sign(t)*t*t}function PPe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function cZ(){var t=lR(),e=[0,1],n=!1,r;function i(a){var s=PPe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(GU(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,K1)).map(GU)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return cZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Qa.apply(i,arguments),yu(i)}function uZ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=RIe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[ty(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Wc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return uZ().domain(t).range(e).unknown(r)},Qa.apply(a,arguments)}function dZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[ty(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return dZ().domain([t,e]).range(i).unknown(a)},Qa.apply(yu(s),arguments)}function fZ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[ty(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return fZ().domain(t).range(e).unknown(n)},Qa.apply(i,arguments)}const OC=new Date,RC=new Date;function _r(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>_r(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(OC.setTime(+a),RC.setTime(+s),t(OC),t(RC),Math.floor(n(OC,RC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const X1=_r(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);X1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_r(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):X1);X1.range;const cl=1e3,Va=cl*60,ul=Va*60,Il=ul*24,gR=Il*7,HU=Il*30,MC=Il*365,Sd=_r(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*cl)},(t,e)=>(e-t)/cl,t=>t.getUTCSeconds());Sd.range;const mR=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*cl)},(t,e)=>{t.setTime(+t+e*Va)},(t,e)=>(e-t)/Va,t=>t.getMinutes());mR.range;const vR=_r(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Va)},(t,e)=>(e-t)/Va,t=>t.getUTCMinutes());vR.range;const yR=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*cl-t.getMinutes()*Va)},(t,e)=>{t.setTime(+t+e*ul)},(t,e)=>(e-t)/ul,t=>t.getHours());yR.range;const bR=_r(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ul)},(t,e)=>(e-t)/ul,t=>t.getUTCHours());bR.range;const iy=_r(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Va)/Il,t=>t.getDate()-1);iy.range;const V_=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Il,t=>t.getUTCDate()-1);V_.range;const hZ=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Il,t=>Math.floor(t/Il));hZ.range;function ff(t){return _r(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Va)/gR)}const B_=ff(0),Q1=ff(1),NPe=ff(2),DPe=ff(3),Pp=ff(4),OPe=ff(5),RPe=ff(6);B_.range;Q1.range;NPe.range;DPe.range;Pp.range;OPe.range;RPe.range;function hf(t){return _r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/gR)}const F_=hf(0),Z1=hf(1),MPe=hf(2),jPe=hf(3),Np=hf(4),zPe=hf(5),LPe=hf(6);F_.range;Z1.range;MPe.range;jPe.range;Np.range;zPe.range;LPe.range;const xR=_r(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xR.range;const wR=_r(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());wR.range;const Pl=_r(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Pl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Pl.range;const Nl=_r(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Nl.range;function pZ(t,e,n,r,i,a){const s=[[Sd,1,cl],[Sd,5,5*cl],[Sd,15,15*cl],[Sd,30,30*cl],[a,1,Va],[a,5,5*Va],[a,15,15*Va],[a,30,30*Va],[i,1,ul],[i,3,3*ul],[i,6,6*ul],[i,12,12*ul],[r,1,Il],[r,2,2*Il],[n,1,gR],[e,1,HU],[e,3,3*HU],[t,1,MC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=nR(([,,w])=>w).right(s,g);if(v===s.length)return t.every(yN(u/MC,f/MC,h));if(v===0)return X1.every(Math.max(yN(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[VPe,BPe]=pZ(Nl,wR,F_,hZ,bR,vR),[FPe,UPe]=pZ(Pl,xR,B_,iy,yR,mR);function jC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function $Pe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=Nm(i),f=Dm(i),h=Nm(a),g=Dm(a),v=Nm(s),b=Dm(s),x=Nm(o),w=Dm(o),S=Nm(c),T=Dm(c),P={a:Y,A:J,b:ee,B:X,c:null,d:ZU,e:ZU,f:fNe,g:SNe,G:ENe,H:cNe,I:uNe,j:dNe,L:gZ,m:hNe,M:pNe,p:U,q:Z,Q:t$,s:n$,S:gNe,u:mNe,U:vNe,V:yNe,w:bNe,W:xNe,x:null,X:null,y:wNe,Y:_Ne,Z:TNe,"%":e$},N={a:te,A:K,b:ue,B:ie,c:null,d:JU,e:JU,f:INe,g:VNe,G:FNe,H:ANe,I:kNe,j:CNe,L:vZ,m:PNe,M:NNe,p:oe,q:Se,Q:t$,s:n$,S:DNe,u:ONe,U:RNe,V:MNe,w:jNe,W:zNe,x:null,X:null,y:LNe,Y:BNe,Z:UNe,"%":e$},D={a:M,A:V,b:z,B:L,c:W,d:XU,e:XU,f:aNe,g:YU,G:WU,H:QU,I:QU,j:tNe,L:iNe,m:eNe,M:nNe,p:R,q:JPe,Q:oNe,s:lNe,S:rNe,u:WPe,U:YPe,V:XPe,w:KPe,W:QPe,x:Q,X:G,y:YU,Y:WU,Z:ZPe,"%":sNe};P.x=O(n,P),P.X=O(r,P),P.c=O(e,P),N.x=O(n,N),N.X=O(r,N),N.c=O(e,N);function O(se,Ae){return function(ve){var ne=[],Pe=-1,be=0,_e=se.length,De,Oe,Ye;for(ve instanceof Date||(ve=new Date(+ve));++Pe<_e;)se.charCodeAt(Pe)===37&&(ne.push(se.slice(be,Pe)),(Oe=KU[De=se.charAt(++Pe)])!=null?De=se.charAt(++Pe):Oe=De==="e"?" ":"0",(Ye=Ae[De])&&(De=Ye(ve,Oe)),ne.push(De),be=Pe+1);return ne.push(se.slice(be,Pe)),ne.join("")}}function I(se,Ae){return function(ve){var ne=Pm(1900,void 0,1),Pe=C(ne,se,ve+="",0),be,_e;if(Pe!=ve.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Ae&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(be=zC(Pm(ne.y,0,1)),_e=be.getUTCDay(),be=_e>4||_e===0?Z1.ceil(be):Z1(be),be=V_.offset(be,(ne.V-1)*7),ne.y=be.getUTCFullYear(),ne.m=be.getUTCMonth(),ne.d=be.getUTCDate()+(ne.w+6)%7):(be=jC(Pm(ne.y,0,1)),_e=be.getDay(),be=_e>4||_e===0?Q1.ceil(be):Q1(be),be=iy.offset(be,(ne.V-1)*7),ne.y=be.getFullYear(),ne.m=be.getMonth(),ne.d=be.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),_e="Z"in ne?zC(Pm(ne.y,0,1)).getUTCDay():jC(Pm(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(_e+5)%7:ne.w+ne.U*7-(_e+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,zC(ne)):jC(ne)}}function C(se,Ae,ve,ne){for(var Pe=0,be=Ae.length,_e=ve.length,De,Oe;Pe<be;){if(ne>=_e)return-1;if(De=Ae.charCodeAt(Pe++),De===37){if(De=Ae.charAt(Pe++),Oe=D[De in KU?Ae.charAt(Pe++):De],!Oe||(ne=Oe(se,ve,ne))<0)return-1}else if(De!=ve.charCodeAt(ne++))return-1}return ne}function R(se,Ae,ve){var ne=u.exec(Ae.slice(ve));return ne?(se.p=f.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function M(se,Ae,ve){var ne=v.exec(Ae.slice(ve));return ne?(se.w=b.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function V(se,Ae,ve){var ne=h.exec(Ae.slice(ve));return ne?(se.w=g.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function z(se,Ae,ve){var ne=S.exec(Ae.slice(ve));return ne?(se.m=T.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function L(se,Ae,ve){var ne=x.exec(Ae.slice(ve));return ne?(se.m=w.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function W(se,Ae,ve){return C(se,e,Ae,ve)}function Q(se,Ae,ve){return C(se,n,Ae,ve)}function G(se,Ae,ve){return C(se,r,Ae,ve)}function Y(se){return s[se.getDay()]}function J(se){return a[se.getDay()]}function ee(se){return c[se.getMonth()]}function X(se){return o[se.getMonth()]}function U(se){return i[+(se.getHours()>=12)]}function Z(se){return 1+~~(se.getMonth()/3)}function te(se){return s[se.getUTCDay()]}function K(se){return a[se.getUTCDay()]}function ue(se){return c[se.getUTCMonth()]}function ie(se){return o[se.getUTCMonth()]}function oe(se){return i[+(se.getUTCHours()>=12)]}function Se(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ae=O(se+="",P);return Ae.toString=function(){return se},Ae},parse:function(se){var Ae=I(se+="",!1);return Ae.toString=function(){return se},Ae},utcFormat:function(se){var Ae=O(se+="",N);return Ae.toString=function(){return se},Ae},utcParse:function(se){var Ae=I(se+="",!0);return Ae.toString=function(){return se},Ae}}}var KU={"-":"",_:" ",0:"0"},zr=/^\s*\d+/,qPe=/^%/,GPe=/[\\^$*+?|[\]().{}]/g;function Ot(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function HPe(t){return t.replace(GPe,"\\$&")}function Nm(t){return new RegExp("^(?:"+t.map(HPe).join("|")+")","i")}function Dm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function KPe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function WPe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function YPe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function XPe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function QPe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function WU(t,e,n){var r=zr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function YU(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ZPe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function JPe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function eNe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function XU(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tNe(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function QU(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nNe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rNe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iNe(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function aNe(t,e,n){var r=zr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function sNe(t,e,n){var r=qPe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function oNe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lNe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZU(t,e){return Ot(t.getDate(),e,2)}function cNe(t,e){return Ot(t.getHours(),e,2)}function uNe(t,e){return Ot(t.getHours()%12||12,e,2)}function dNe(t,e){return Ot(1+iy.count(Pl(t),t),e,3)}function gZ(t,e){return Ot(t.getMilliseconds(),e,3)}function fNe(t,e){return gZ(t,e)+"000"}function hNe(t,e){return Ot(t.getMonth()+1,e,2)}function pNe(t,e){return Ot(t.getMinutes(),e,2)}function gNe(t,e){return Ot(t.getSeconds(),e,2)}function mNe(t){var e=t.getDay();return e===0?7:e}function vNe(t,e){return Ot(B_.count(Pl(t)-1,t),e,2)}function mZ(t){var e=t.getDay();return e>=4||e===0?Pp(t):Pp.ceil(t)}function yNe(t,e){return t=mZ(t),Ot(Pp.count(Pl(t),t)+(Pl(t).getDay()===4),e,2)}function bNe(t){return t.getDay()}function xNe(t,e){return Ot(Q1.count(Pl(t)-1,t),e,2)}function wNe(t,e){return Ot(t.getFullYear()%100,e,2)}function SNe(t,e){return t=mZ(t),Ot(t.getFullYear()%100,e,2)}function _Ne(t,e){return Ot(t.getFullYear()%1e4,e,4)}function ENe(t,e){var n=t.getDay();return t=n>=4||n===0?Pp(t):Pp.ceil(t),Ot(t.getFullYear()%1e4,e,4)}function TNe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ot(e/60|0,"0",2)+Ot(e%60,"0",2)}function JU(t,e){return Ot(t.getUTCDate(),e,2)}function ANe(t,e){return Ot(t.getUTCHours(),e,2)}function kNe(t,e){return Ot(t.getUTCHours()%12||12,e,2)}function CNe(t,e){return Ot(1+V_.count(Nl(t),t),e,3)}function vZ(t,e){return Ot(t.getUTCMilliseconds(),e,3)}function INe(t,e){return vZ(t,e)+"000"}function PNe(t,e){return Ot(t.getUTCMonth()+1,e,2)}function NNe(t,e){return Ot(t.getUTCMinutes(),e,2)}function DNe(t,e){return Ot(t.getUTCSeconds(),e,2)}function ONe(t){var e=t.getUTCDay();return e===0?7:e}function RNe(t,e){return Ot(F_.count(Nl(t)-1,t),e,2)}function yZ(t){var e=t.getUTCDay();return e>=4||e===0?Np(t):Np.ceil(t)}function MNe(t,e){return t=yZ(t),Ot(Np.count(Nl(t),t)+(Nl(t).getUTCDay()===4),e,2)}function jNe(t){return t.getUTCDay()}function zNe(t,e){return Ot(Z1.count(Nl(t)-1,t),e,2)}function LNe(t,e){return Ot(t.getUTCFullYear()%100,e,2)}function VNe(t,e){return t=yZ(t),Ot(t.getUTCFullYear()%100,e,2)}function BNe(t,e){return Ot(t.getUTCFullYear()%1e4,e,4)}function FNe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Np(t):Np.ceil(t),Ot(t.getUTCFullYear()%1e4,e,4)}function UNe(){return"+0000"}function e$(){return"%"}function t$(t){return+t}function n$(t){return Math.floor(+t/1e3)}var ph,bZ,xZ;$Ne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $Ne(t){return ph=$Pe(t),bZ=ph.format,ph.parse,xZ=ph.utcFormat,ph.utcParse,ph}function qNe(t){return new Date(t)}function GNe(t){return t instanceof Date?+t:+new Date(+t)}function SR(t,e,n,r,i,a,s,o,c,u){var f=lR(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),P=u("%B"),N=u("%Y");function D(O){return(c(O)<O?v:o(O)<O?b:s(O)<O?x:a(O)<O?w:r(O)<O?i(O)<O?S:T:n(O)<O?P:N)(O)}return f.invert=function(O){return new Date(h(O))},f.domain=function(O){return arguments.length?g(Array.from(O,GNe)):g().map(qNe)},f.ticks=function(O){var I=g();return t(I[0],I[I.length-1],O??10)},f.tickFormat=function(O,I){return I==null?D:u(I)},f.nice=function(O){var I=g();return(!O||typeof O.range!="function")&&(O=e(I[0],I[I.length-1],O??10)),O?g(sZ(I,O)):f},f.copy=function(){return ry(f,SR(t,e,n,r,i,a,s,o,c,u))},f}function HNe(){return Qa.apply(SR(FPe,UPe,Pl,xR,B_,iy,yR,mR,Sd,bZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KNe(){return Qa.apply(SR(VPe,BPe,Nl,wR,F_,V_,bR,vR,Sd,xZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U_(){var t=0,e=1,n,r,i,a,s=Si,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(ig),u.rangeRound=f(oR),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function bu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wZ(){var t=yu(U_()(Si));return t.copy=function(){return bu(t,wZ())},Fl.apply(t,arguments)}function SZ(){var t=dR(U_()).domain([1,10]);return t.copy=function(){return bu(t,SZ()).base(t.base())},Fl.apply(t,arguments)}function _Z(){var t=fR(U_());return t.copy=function(){return bu(t,_Z()).constant(t.constant())},Fl.apply(t,arguments)}function _R(){var t=hR(U_());return t.copy=function(){return bu(t,_R()).exponent(t.exponent())},Fl.apply(t,arguments)}function WNe(){return _R.apply(null,arguments).exponent(.5)}function EZ(){var t=[],e=Si;function n(r){if(r!=null&&!isNaN(r=+r))return e((ty(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Wc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>OIe(t,a/r))},n.copy=function(){return EZ(e).domain(t)},Fl.apply(n,arguments)}function $_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Si,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var S,T,P;return arguments.length?([S,T,P]=w,u=sPe(x,[S,T,P]),v):[u(0),u(.5),u(1)]}}return v.range=b(ig),v.rangeRound=b(oR),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function TZ(){var t=yu($_()(Si));return t.copy=function(){return bu(t,TZ())},Fl.apply(t,arguments)}function AZ(){var t=dR($_()).domain([.1,1,10]);return t.copy=function(){return bu(t,AZ()).base(t.base())},Fl.apply(t,arguments)}function kZ(){var t=fR($_());return t.copy=function(){return bu(t,kZ()).constant(t.constant())},Fl.apply(t,arguments)}function ER(){var t=hR($_());return t.copy=function(){return bu(t,ER()).exponent(t.exponent())},Fl.apply(t,arguments)}function YNe(){return ER.apply(null,arguments).exponent(.5)}const Wm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iR,scaleDiverging:TZ,scaleDivergingLog:AZ,scaleDivergingPow:ER,scaleDivergingSqrt:YNe,scaleDivergingSymlog:kZ,scaleIdentity:aZ,scaleImplicit:bN,scaleLinear:iZ,scaleLog:oZ,scaleOrdinal:rR,scalePoint:jIe,scalePow:pR,scaleQuantile:uZ,scaleQuantize:dZ,scaleRadial:cZ,scaleSequential:wZ,scaleSequentialLog:SZ,scaleSequentialPow:_R,scaleSequentialQuantile:EZ,scaleSequentialSqrt:WNe,scaleSequentialSymlog:_Z,scaleSqrt:IPe,scaleSymlog:lZ,scaleThreshold:fZ,scaleTime:HNe,scaleUtc:KNe,tickFormat:rZ},Symbol.toStringTag,{value:"Module"}));var Ul=t=>t.chartData,q_=me([Ul],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),CZ=(t,e,n,r)=>r?q_(t):Ul(t),XNe=(t,e,n)=>n?q_(t):Ul(t);function Dl(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pt(e)&&pt(n))return!0}return!1}function r$(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function IZ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(pt(n))i=n;else if(typeof n=="function")return;if(pt(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Dl(s))return s}}function QNe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Dl(r))return r$(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(He(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&gF.test(i)){var c=gF.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(He(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&mF.test(a)){var f=mF.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Dl(g))return e==null?g:r$(g,e,n)}}}var ag=1e9,ZNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AR,bn=!0,Ka="[DecimalError] ",Od=Ka+"Invalid argument: ",TR=Ka+"Exponent out of range: ",sg=Math.floor,sd=Math.pow,JNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,da,Or=1e7,dn=7,PZ=9007199254740991,J1=sg(PZ/dn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*dn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return ml(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return an(ml(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return or(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(da))throw Error(Ka+"NaN");if(n.s<1)throw Error(Ka+(n.s?"NaN":"-Infinity"));return n.eq(da)?new r(0):(bn=!1,e=ml(c0(n,a),c0(t,a),a),bn=!0,an(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?OZ(e,t):NZ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ka+"NaN");return n.s?(bn=!1,e=ml(n,t,0,1).times(t),bn=!0,n.minus(e)):an(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return DZ(this)};Ue.naturalLogarithm=Ue.ln=function(){return c0(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?NZ(e,t):OZ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Od+t);if(e=or(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ka+"NaN")}for(t=or(o),bn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=go(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=sg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(ml(o,a,s+2)).times(.5),go(a.d).slice(0,s)===(e=go(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(an(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return bn=!0,an(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Or|0,e=o/Or|0;a[i]=(a[i]+e)%Or|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,bn?an(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Po(t,0,ag),e===void 0?e=r.rounding:Po(e,0,8),an(n,t+or(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=tf(r,!0):(Po(t,0,ag),e===void 0?e=i.rounding:Po(e,0,8),r=an(new i(r),t+1,e),n=tf(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?tf(i):(Po(t,0,ag),e===void 0?e=a.rounding:Po(e,0,8),r=an(new a(i),t+or(i)+1,e),n=tf(r.abs(),!1,t+or(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return an(new e(t),or(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(da);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ka+"Infinity");return o}if(o.eq(da))return o;if(r=c.precision,t.eq(da))return an(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=PZ){for(i=new c(da),e=Math.ceil(r/dn+4),bn=!1;n%2&&(i=i.times(o),a$(i.d,e)),n=sg(n/2),n!==0;)o=o.times(o),a$(o.d,e);return bn=!0,t.s<0?new c(da).div(i):an(i,r)}}else if(a<0)throw Error(Ka+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,bn=!1,i=t.times(c0(o,r+u)),bn=!0,i=DZ(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=or(i),r=tf(i,n<=a.toExpNeg||n>=a.toExpPos)):(Po(t,1,ag),e===void 0?e=a.rounding:Po(e,0,8),i=an(new a(i),t,e),n=or(i),r=tf(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Po(t,1,ag),e===void 0?e=r.rounding:Po(e,0,8)),an(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=or(t),n=t.constructor;return tf(t,e<=n.toExpNeg||e>=n.toExpPos)};function NZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),bn?an(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/dn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Or|0,c[a]%=Or;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,bn?an(e,h):e}function Po(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Od+t)}function go(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=dn-r.length,n&&(a+=kc(n)),a+=r;s=t[e],r=s+"",n=dn-r.length,n&&(a+=kc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ml=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Or|0,s=a/Or|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Or+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,S,T,P,N,D,O,I,C,R=r.constructor,M=r.s==i.s?1:-1,V=r.d,z=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ka+"Division by zero");for(c=r.e-i.e,I=z.length,D=V.length,v=new R(M),b=v.d=[],u=0;z[u]==(V[u]||0);)++u;if(z[u]>(V[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(or(r)-or(i))+1:T=a,T<0)return new R(0);if(T=T/dn+2|0,u=0,I==1)for(f=0,z=z[0],T++;(u<D||f)&&T--;u++)P=f*Or+(V[u]||0),b[u]=P/z|0,f=P%z|0;else{for(f=Or/(z[0]+1)|0,f>1&&(z=t(z,f),V=t(V,f),I=z.length,D=V.length),N=I,x=V.slice(0,I),w=x.length;w<I;)x[w++]=0;C=z.slice(),C.unshift(0),O=z[0],z[1]>=Or/2&&++O;do f=0,o=e(z,x,I,w),o<0?(S=x[0],I!=w&&(S=S*Or+(x[1]||0)),f=S/O|0,f>1?(f>=Or&&(f=Or-1),h=t(z,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,I<g?C:z,g))):(f==0&&(o=f=1),h=z.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(z,x,I,w),o<1&&(f++,n(x,I<w?C:z,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=V[N]||0:(x=[V[N]],w=1);while((N++<D||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,an(v,s?a+or(v)+1:a)}})();function DZ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(or(t)>16)throw Error(TR+or(t));if(!t.s)return new f(da);for(bn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(sd(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(da),f.precision=o;;){if(i=an(i.times(t),o),n=n.times(++c),s=a.plus(ml(i,n,o)),go(s.d).slice(0,o)===go(a.d).slice(0,o)){for(;u--;)a=an(a.times(a),o);return f.precision=h,e==null?(bn=!0,an(a,h)):a}a=s}}function or(t){for(var e=t.e*dn,n=t.d[0];n>=10;n/=10)e++;return e}function LC(t,e,n){if(e>t.LN10.sd())throw bn=!0,n&&(t.precision=n),Error(Ka+"LN10 precision limit exceeded");return an(new t(t.LN10),e)}function kc(t){for(var e="";t--;)e+="0";return e}function c0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Ka+(v.s?"NaN":"-Infinity"));if(v.eq(da))return new x(0);if(e==null?(bn=!1,u=w):u=e,v.eq(10))return e==null&&(bn=!0),LC(x,u);if(u+=g,x.precision=u,n=go(b),r=n.charAt(0),a=or(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=go(v.d),r=n.charAt(0),h++;a=or(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=LC(x,u+2,w).times(a+""),v=c0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(bn=!0,an(v,w)):v;for(o=s=v=ml(v.minus(da),v.plus(da),u),f=an(v.times(v),u),i=3;;){if(s=an(s.times(f),u),c=o.plus(ml(s,new x(i),u)),go(c.d).slice(0,u)===go(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(LC(x,u+2,w).times(a+""))),o=ml(o,new x(h),u),x.precision=w,e==null?(bn=!0,an(o,w)):o;o=c,i+=2}}function i$(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=sg(n/dn),t.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=dn;r<i;)t.d.push(+e.slice(r,r+=dn));e=e.slice(r),r=dn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),bn&&(t.e>J1||t.e<-J1))throw Error(TR+n)}else t.s=0,t.e=0,t.d=[0];return t}function an(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=dn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/dn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=dn,i=r-dn+s}if(n!==void 0&&(a=sd(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/sd(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=or(t),h.length=1,e=e-a-1,h[0]=sd(10,(dn-e%dn)%dn),t.e=sg(-e/dn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=sd(10,dn-r),h[f]=i>0?(u/sd(10,s-i)%sd(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Or&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Or)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(bn&&(t.e>J1||t.e<-J1))throw Error(TR+or(t));return t}function OZ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),bn?an(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/dn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Or-1;--c[a],c[i]+=Or}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,bn?an(e,v):e):new g(0)}function tf(t,e,n){var r,i=or(t),a=go(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+kc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+kc(-i-1)+a,n&&(r=n-s)>0&&(a+=kc(r))):i>=s?(a+=kc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+kc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=kc(r))),t.s<0?"-"+a:a}function a$(t,e){if(t.length>e)return t.length=e,!0}function RZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Od+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return i$(s,a.toString())}else if(typeof a!="string")throw Error(Od+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,JNe.test(a))i$(s,a);else throw Error(Od+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=RZ,i.config=i.set=eDe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function eDe(t){if(!t||typeof t!="object")throw Error(Ka+"Object expected");var e,n,r,i=["precision",1,ag,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(sg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Od+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Od+n+": "+r);return this}var AR=RZ(ZNe);da=new AR(1);const Gt=AR;function MZ(t){var e;return t===0?e=1:e=Math.floor(new Gt(t).abs().log(10).toNumber())+1,e}function jZ(t,e,n){for(var r=new Gt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var zZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},LZ=(t,e,n)=>{if(t.lte(0))return new Gt(0);var r=MZ(t.toNumber()),i=new Gt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Gt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Gt(c.toNumber()):new Gt(Math.ceil(c.toNumber()))},tDe=(t,e,n)=>{var r=new Gt(1),i=new Gt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Gt(10).pow(MZ(t)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Gt(Math.floor(t)))}else t===0?i=new Gt(Math.floor((e-1)/2)):n||(i=new Gt(Math.floor(t)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(i.add(new Gt(c-s).mul(r)).toNumber());return o},VZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var s=LZ(new Gt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Gt(0):(o=new Gt(e).add(n).div(2),o=o.sub(new Gt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Gt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?VZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Gt(c).mul(s)),tickMax:o.add(new Gt(u).mul(s))})},nDe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=zZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return n>r?u.reverse():u}if(o===c)return tDe(o,i,a);var{step:f,tickMin:h,tickMax:g}=VZ(o,c,s,a,0),v=jZ(h,g.add(new Gt(.1).mul(f)),f);return n>r?v.reverse():v},rDe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=zZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=LZ(new Gt(o).sub(s).div(c-1),a,0),f=[...jZ(new Gt(s),new Gt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},BZ=t=>t.rootProps.maxBarSize,iDe=t=>t.rootProps.barGap,FZ=t=>t.rootProps.barCategoryGap,aDe=t=>t.rootProps.barSize,ay=t=>t.rootProps.stackOffset,UZ=t=>t.rootProps.reverseStackOrder,kR=t=>t.options.chartName,CR=t=>t.rootProps.syncId,$Z=t=>t.rootProps.syncMethod,IR=t=>t.options.eventEmitter,Mr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zu={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},no={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},G_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function H_(t,e,n){if(n!=="auto")return n;if(t!=null)return vu(t,e)?"category":"number"}function s$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(n),!0).forEach(function(r){sDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sDe(t,e,n){return(e=oDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oDe(t){var e=lDe(t,"string");return typeof e=="symbol"?e:e+""}function lDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o$={allowDataOverflow:Zu.allowDataOverflow,allowDecimals:Zu.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zu.angleAxisId,includeHidden:!1,name:void 0,reversed:Zu.reversed,scale:Zu.scale,tick:Zu.tick,tickCount:void 0,ticks:void 0,type:Zu.type,unit:void 0},l$={allowDataOverflow:no.allowDataOverflow,allowDecimals:no.allowDecimals,allowDuplicatedCategory:no.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:no.radiusAxisId,includeHidden:no.includeHidden,name:void 0,reversed:no.reversed,scale:no.scale,tick:no.tick,tickCount:no.tickCount,ticks:void 0,type:no.type,unit:void 0},cDe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},PR=me([cDe,kQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=H_(e,"angleAxis",o$.type))!==null&&n!==void 0?n:"category";return eS(eS({},o$),{},{type:r})}),uDe=(t,e)=>t.polarAxis.radiusAxis[e],NR=me([uDe,kQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=H_(e,"radiusAxis",l$.type))!==null&&n!==void 0?n:"category";return eS(eS({},l$),{},{type:r})}),K_=t=>t.polarOptions,DR=me([Vl,Bl,Sr],qQ),qZ=me([K_,DR],(t,e)=>{if(t!=null)return li(t.innerRadius,e,0)}),GZ=me([K_,DR],(t,e)=>{if(t!=null)return li(t.outerRadius,e,e*.8)}),dDe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},HZ=me([K_],dDe);me([PR,HZ],G_);var KZ=me([DR,qZ,GZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});me([NR,KZ],G_);var WZ=me([Lt,K_,qZ,GZ,Vl,Bl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:li(s,i,i/2),cy:li(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),Cn=(t,e)=>e,sy=(t,e,n)=>n;function OR(t){return t?.id}function YZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=OR(o);u.forEach((h,g)=>{var v=a==null||i?g:String(hn(h,a,null)),b=hn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function W_(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Y_=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function X_(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function fDe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Lr=t=>{var e=Lt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},og=t=>t.tooltip.settings.axisId;function hDe(t){if(t in Wm)return Wm[t]();var e="scale".concat(W0(t));if(e in Wm)return Wm[e]()}function c$(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,s)=>{var o=t(a);if(o!=null){if(t.bandwidth&&s!==null&&s!==void 0&&s.position){var c=t.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function u$(t,e,n){if(typeof t=="function")return c$(t.copy().domain(e).range(n));if(t!=null){var r=hDe(t);if(r!=null)return r.domain(e).range(n),c$(r)}}var XZ=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Dl(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];pt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function d$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(n),!0).forEach(function(r){pDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pDe(t,e,n){return(e=gDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gDe(t){var e=mDe(t,"string");return typeof e=="symbol"?e:e+""}function mDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _N=[0,"auto"],Pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},QZ=(t,e)=>t.cartesianAxis.xAxis[e],Ro=(t,e)=>{var n=QZ(t,e);return n??Pr},Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:_N,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Q0},ZZ=(t,e)=>t.cartesianAxis.yAxis[e],Mo=(t,e)=>{var n=ZZ(t,e);return n??Nr},vDe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},RR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??vDe},Vn=(t,e,n)=>{switch(e){case"xAxis":return Ro(t,n);case"yAxis":return Mo(t,n);case"zAxis":return RR(t,n);case"angleAxis":return PR(t,n);case"radiusAxis":return NR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},yDe=(t,e,n)=>{switch(e){case"xAxis":return Ro(t,n);case"yAxis":return Mo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lg=(t,e,n)=>{switch(e){case"xAxis":return Ro(t,n);case"yAxis":return Mo(t,n);case"angleAxis":return PR(t,n);case"radiusAxis":return NR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},JZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function MR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var jR=t=>t.graphicalItems.cartesianItems,bDe=me([Cn,sy],MR),zR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),oy=me([jR,Vn,bDe],zR,{memoizeOptions:{resultEqualityCheck:X_}}),eJ=me([oy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(W_)),tJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),xDe=me([oy],tJ),LR=t=>t.map(e=>e.data).filter(Boolean).flat(1),wDe=me([oy],LR,{memoizeOptions:{resultEqualityCheck:X_}}),VR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},BR=me([wDe,CZ],VR),FR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:hn(i,r)}))):t.map(r=>({value:r})),Q_=me([BR,Vn,oy],FR);function nJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function pw(t){if(Ga(t)||t instanceof Date){var e=Number(t);if(pt(e))return e}}function f$(t){if(Array.isArray(t)){var e=[pw(t[0]),pw(t[1])];return Dl(e)?e:void 0}var n=pw(t);if(n!=null)return[n,n]}function Ol(t){return t.map(pw).filter(Ui)}function SDe(t,e,n){return!n||typeof e!="number"||Co(e)?[]:n.length?Ol(n.flatMap(r=>{var i=hn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!pt(a)||!pt(s)))return[e-a,e+s]})):[]}var Er=t=>{var e=Lr(t),n=og(t);return lg(t,e,n)},ly=me([Er],t=>t?.dataKey),_De=me([eJ,CZ,Er],YZ),rJ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(OR);return[o,{stackedData:ike(t,f,n),graphicalItems:u}]}))},EN=me([_De,eJ,ay,UZ],rJ),iJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=cke(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},EDe=me([Vn],t=>t.allowDataOverflow),UR=t=>{var e;if(t==null||!("domain"in t))return _N;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ol(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:_N},$R=me([Vn],UR),qR=me([$R,EDe],IZ),TDe=me([EN,Ul,Cn,qR],iJ,{memoizeOptions:{resultEqualityCheck:Y_}}),Z_=t=>t.errorBars,ADe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>nJ(n,r)),nS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},GR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>nJ(i,S)),g=hn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=SDe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=f$(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=f$(hn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),pt(a)&&pt(s))return[a,s]},kDe=me([BR,Vn,xDe,Z_,Cn],GR,{memoizeOptions:{resultEqualityCheck:Y_}});function CDe(t){var{value:e}=t;if(Ga(e)||e instanceof Date)return e}var IDe=(t,e,n)=>{var r=t.map(CDe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&_X(r))?WQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},aJ=t=>t.referenceElements.dots,cg=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),PDe=me([aJ,Cn,sy],cg),sJ=t=>t.referenceElements.areas,NDe=me([sJ,Cn,sy],cg),oJ=t=>t.referenceElements.lines,DDe=me([oJ,Cn,sy],cg),lJ=(t,e)=>{if(t!=null){var n=Ol(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ODe=me(PDe,Cn,lJ),cJ=(t,e)=>{if(t!=null){var n=Ol(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},RDe=me([NDe,Cn],cJ);function MDe(t){var e;if(t.x!=null)return Ol([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ol(n)}function jDe(t){var e;if(t.y!=null)return Ol([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ol(n)}var uJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?MDe(r):jDe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},zDe=me([DDe,Cn],uJ),LDe=me(ODe,zDe,RDe,(t,e,n)=>nS(t,n,e)),HR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?nS(r,a,i):nS(a,i);return QNe(e,u,t.allowDataOverflow)},VDe=me([Vn,$R,qR,TDe,kDe,LDe,Lt,Cn],HR,{memoizeOptions:{resultEqualityCheck:Y_}}),BDe=[0,1],KR=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=vu(e,a);if(u&&o==null){var f;return WQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?IDe(r,t,u):i==="expand"?BDe:s}},WR=me([Vn,Lt,BR,Q_,ay,Cn,VDe],KR);function FDe(t){return t in Wm}var dJ=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(W0(r));return FDe(a)?a:"point"}}},xu=me([Vn,JZ,kR],dJ);function YR(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?u$(t.scale,n,r):u$(e,n,r)}var XR=(t,e,n)=>{var r=UR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Dl(t))return nDe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Dl(t))return rDe(t,e.tickCount,e.allowDecimals)}},QR=me([WR,lg,xu],XR),ZR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Dl(e)&&Array.isArray(n)&&n.length>0){var i,a,s=e[0],o=(i=n[0])!==null&&i!==void 0?i:0,c=e[1],u=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return e},UDe=me([Vn,WR,QR,Cn],ZR),$De=me(Q_,Vn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ol(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),fJ=me($De,Lt,FZ,Sr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!pt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=li(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),qDe=(t,e,n)=>{var r=Ro(t,e);return r==null||typeof r.padding!="string"?0:fJ(t,"xAxis",e,n,r.padding)},GDe=(t,e,n)=>{var r=Mo(t,e);return r==null||typeof r.padding!="string"?0:fJ(t,"yAxis",e,n,r.padding)},HDe=me(Ro,qDe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),KDe=me(Mo,GDe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),WDe=me([Sr,HDe,P_,I_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),YDe=me([Sr,Lt,KDe,P_,I_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),cy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return WDe(t,n,r);case"yAxis":return YDe(t,n,r);case"zAxis":return(i=RR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return HZ(t);case"radiusAxis":return KZ(t,n);default:return}},hJ=me([Vn,cy],G_),XDe=me([xu,UDe],XZ),Dp=me([Vn,xu,XDe,hJ],YR);me([oy,Z_,Cn],ADe);function pJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var J_=(t,e)=>e,eE=(t,e,n)=>n,QDe=me(k_,J_,eE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(pJ)),ZDe=me(C_,J_,eE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(pJ)),gJ=(t,e)=>({width:t.width,height:e.height}),JDe=(t,e)=>{var n=typeof e.width=="number"?e.width:Q0;return{width:n,height:t.height}},mJ=me(Sr,Ro,gJ),e2e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},t2e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},n2e=me(Bl,Sr,QDe,J_,eE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=gJ(e,o);s==null&&(s=e2e(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),r2e=me(Vl,Sr,ZDe,J_,eE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=JDe(e,o);s==null&&(s=t2e(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),i2e=(t,e)=>{var n=Ro(t,e);if(n!=null)return n2e(t,n.orientation,n.mirror)},a2e=me([Sr,Ro,i2e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),s2e=(t,e)=>{var n=Mo(t,e);if(n!=null)return r2e(t,n.orientation,n.mirror)},o2e=me([Sr,Mo,s2e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),vJ=me(Sr,Mo,(t,e)=>{var n=typeof e.width=="number"?e.width:Q0;return{width:n,height:t.height}}),h$=(t,e,n)=>{switch(e){case"xAxis":return mJ(t,n).width;case"yAxis":return vJ(t,n).height;default:return}},yJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=vu(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&_X(c))return c}},JR=me([Lt,Q_,Vn,Cn],yJ),bJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=vu(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},eM=me([Lt,Q_,lg,Cn],bJ),p$=me([Lt,yDe,xu,Dp,JR,eM,cy,QR,Cn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=vu(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),l2e=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=vu(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Rr(a[0]-a[1])*2*b:b;var x=h||i;return x?x.map((w,S)=>{var T=s?s.indexOf(w):w,P=r.map(T);return pt(P)?{index:S,coordinate:P+b,value:w,offset:b}:null}).filter(Ui):u&&o?o.map((w,S)=>{var T=r.map(w);return pt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Ui):r.ticks?r.ticks(g).map((w,S)=>{var T=r.map(w);return pt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Ui):r.domain().map((w,S)=>{var T=r.map(w);return pt(T)?{coordinate:T+b,value:s?s[w]:w,index:S,offset:b}:null}).filter(Ui)}},xJ=me([Lt,lg,xu,Dp,QR,cy,JR,eM,Cn],l2e),c2e=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=vu(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Rr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Ui):n.ticks?n.ticks(c).map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Ui):n.domain().map((f,h)=>{var g=n.map(f);return pt(g)?{coordinate:g+u,value:i?i[f]:f,index:h,offset:u}:null}).filter(Ui)}},Op=me([Lt,lg,Dp,cy,JR,eM,Cn],c2e),Rp=me(Vn,Dp,(t,e)=>{if(!(t==null||e==null))return tS(tS({},t),{},{scale:e})}),u2e=me([Vn,xu,WR,hJ],YR);me((t,e,n)=>RR(t,n),u2e,(t,e)=>{if(!(t==null||e==null))return tS(tS({},t),{},{scale:e})});var d2e=me([Lt,k_,C_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wJ=t=>t.options.defaultTooltipEventType,SJ=t=>t.options.validateTooltipEventTypes;function _J(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function tM(t,e){var n=wJ(t),r=SJ(t);return _J(e,n,r)}function f2e(t){return Ge(e=>tM(e,t))}var EJ=(t,e)=>{var n,r=Number(e);if(!(Co(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},h2e=t=>t.tooltip.settings,Rc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},p2e={itemInteraction:{click:Rc,hover:Rc},axisInteraction:{click:Rc,hover:Rc},keyboardInteraction:Rc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},TJ=Wi({name:"tooltip",initialState:p2e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:vn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:vn()},removeTooltipEntrySettings:{reducer(t,e){var n=As(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:vn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:g2e,replaceTooltipEntrySettings:m2e,removeTooltipEntrySettings:v2e,setTooltipSettingsState:y2e,setActiveMouseOverItemIndex:AJ,mouseLeaveItem:b2e,mouseLeaveChart:kJ,setActiveClickItemIndex:x2e,setMouseOverAxisIndex:CJ,setMouseClickAxisIndex:w2e,setSyncInteraction:TN,setKeyboardInteraction:AN}=TJ.actions,S2e=TJ.reducer;function g$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(n),!0).forEach(function(r){_2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _2e(t,e,n){return(e=E2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E2e(t){var e=T2e(t,"string");return typeof e=="symbol"?e:e+""}function T2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A2e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function k2e(t){return t.index!=null}var IJ=(t,e,n,r)=>{if(e==null)return Rc;var i=A2e(t,e,n);if(i==null)return Rc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(k2e(i)){if(a)return Dx(Dx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Dx(Dx({},Rc),{},{coordinate:i.coordinate})};function C2e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function I2e(t,e){var n=C2e(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function P2e(t,e,n){if(n==null||e==null)return!0;var r=hn(t,e);return r==null||!Dl(n)?!0:I2e(r,n)}var nM=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!pt(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||P2e(u,n,r)?String(c):null},PJ=(t,e,n,r,i,a,s)=>{if(a!=null){var o=s[0],c=o?.getPosition(a);if(c!=null)return c;var u=i?.[Number(a)];if(u)return n==="horizontal"?{x:u.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:u.coordinate}}},NJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},DJ=t=>t.options.tooltipPayloadSearcher,ug=t=>t.tooltip;function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(r){N2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N2e(t,e,n){return(e=D2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D2e(t){var e=O2e(t,"string");return typeof e=="symbol"?e:e+""}function O2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R2e(t,e){return t??e}var OJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,S=R2e(x,o),T=Array.isArray(S)?pQ(S,u,f):S,P=(b=w?.dataKey)!==null&&b!==void 0?b:r,N=w?.nameKey,D;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?D=LEe(T,r,i):D=a(T,e,c,N),Array.isArray(D))D.forEach(I=>{var C=v$(v$({},w),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});g.push(vF({tooltipEntrySettings:C,dataKey:I.dataKey,payload:I.payload,value:hn(I.payload,I.dataKey),name:I.name}))});else{var O;g.push(vF({tooltipEntrySettings:w,dataKey:P,payload:D,value:hn(D,P),name:(O=hn(D,N))!==null&&O!==void 0?O:w?.name}))}return g},h)}},rM=me([Er,JZ,kR],dJ),M2e=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),j2e=me([Lr,og],MR),dg=me([M2e,Er,j2e],zR,{memoizeOptions:{resultEqualityCheck:X_}}),z2e=me([dg],t=>t.filter(W_)),L2e=me([dg],LR,{memoizeOptions:{resultEqualityCheck:X_}}),fg=me([L2e,Ul],VR),V2e=me([z2e,Ul,Er],YZ),iM=me([fg,Er,dg],FR),RJ=me([Er],UR),B2e=me([Er],t=>t.allowDataOverflow),MJ=me([RJ,B2e],IZ),F2e=me([dg],t=>t.filter(W_)),U2e=me([V2e,F2e,ay,UZ],rJ),$2e=me([U2e,Ul,Lr,MJ],iJ),q2e=me([dg],tJ),G2e=me([fg,Er,q2e,Z_,Lr],GR,{memoizeOptions:{resultEqualityCheck:Y_}}),H2e=me([aJ,Lr,og],cg),K2e=me([H2e,Lr],lJ),W2e=me([sJ,Lr,og],cg),Y2e=me([W2e,Lr],cJ),X2e=me([oJ,Lr,og],cg),Q2e=me([X2e,Lr],uJ),Z2e=me([K2e,Q2e,Y2e],nS),J2e=me([Er,RJ,MJ,$2e,G2e,Z2e,Lt,Lr],HR),uy=me([Er,Lt,fg,iM,ay,Lr,J2e],KR),eOe=me([uy,Er,rM],XR),tOe=me([Er,uy,eOe,Lr],ZR),jJ=t=>{var e=Lr(t),n=og(t),r=!1;return cy(t,e,n,r)},zJ=me([Er,jJ],G_),LJ=me([Er,rM,tOe,zJ],YR),nOe=me([Lt,iM,Er,Lr],yJ),rOe=me([Lt,iM,Er,Lr],bJ),iOe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=vu(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Rr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>{var b=r.map(g);return pt(b)?{coordinate:b+h,value:g,index:v,offset:h}:null}).filter(Ui):r.domain().map((g,v)=>{var b=r.map(g);return pt(b)?{coordinate:b+h,value:a?a[g]:g,index:v,offset:h}:null}).filter(Ui)}}},$l=me([Lt,Er,rM,LJ,jJ,nOe,rOe,Lr],iOe),aM=me([wJ,SJ,h2e],(t,e,n)=>_J(n.shared,t,e)),VJ=t=>t.tooltip.settings.trigger,sM=t=>t.tooltip.settings.defaultIndex,dy=me([ug,aM,VJ,sM],IJ),nf=me([dy,fg,ly,uy],nM),BJ=me([$l,nf],EJ),oM=me([dy],t=>{if(t)return t.dataKey}),aOe=me([dy],t=>{if(t)return t.graphicalItemId}),FJ=me([ug,aM,VJ,sM],NJ),sOe=me([Vl,Bl,Lt,Sr,$l,sM,FJ],PJ),oOe=me([dy,sOe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),lOe=me([dy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),cOe=me([FJ,nf,Ul,ly,BJ,DJ,aM],OJ);me([cOe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(r){uOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uOe(t,e,n){return(e=dOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dOe(t){var e=fOe(t,"string");return typeof e=="symbol"?e:e+""}function fOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hOe=()=>Ge(Er),pOe=()=>{var t=hOe(),e=Ge($l),n=Ge(LJ);return O1(!t||!n?void 0:b$(b$({},t),{},{scale:n}),e)};function x$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(n),!0).forEach(function(r){gOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gOe(t,e,n){return(e=mOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mOe(t){var e=vOe(t,"string");return typeof e=="symbol"?e:e+""}function vOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yOe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},bOe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return gh(gh(gh({},r),sr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return gh(gh(gh({},r),sr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function xOe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var UJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Rr(b-v)!==Rr(x-b)){var S=[];if(Rr(x-b)===Rr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+v)/2),S[1]=Math.max(T,(T+v)/2)}else{w=v;var P=x+i[1]-i[0];S[0]=Math.min(b,(P+b)/2),S[1]=Math.max(b,(P+b)/2)}var N=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>N[0]&&t<=N[1]||t>=S[0]&&t<=S[1]){var D;return(D=n[o])===null||D===void 0?void 0:D.index}}else{var O=Math.min(v,x),I=Math.max(v,x);if(t>(O+b)/2&&t<=(I+b)/2){var C;return(C=n[o])===null||C===void 0?void 0:C.index}}}else if(e)for(var R=0;R<s;R++){var M=e[R];if(M!=null){var V=e[R+1],z=e[R-1];if(R===0&&V!=null&&t<=(M.coordinate+V.coordinate)/2||R===s-1&&z!=null&&t>(M.coordinate+z.coordinate)/2||R>0&&R<s-1&&z!=null&&V!=null&&t>(M.coordinate+z.coordinate)/2&&t<=(M.coordinate+V.coordinate)/2)return M.index}}return-1},wOe=()=>Ge(kR),lM=(t,e)=>e,$J=(t,e,n)=>n,cM=(t,e,n,r)=>r,SOe=me($l,t=>m_(t,e=>e.coordinate)),uM=me([ug,lM,$J,cM],IJ),dM=me([uM,fg,ly,uy],nM),_Oe=(t,e,n)=>{if(e!=null){var r=ug(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},qJ=me([ug,lM,$J,cM],NJ),rS=me([Vl,Bl,Lt,Sr,$l,cM,qJ],PJ),EOe=me([uM,rS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),GJ=me([$l,dM],EJ),TOe=me([qJ,dM,Ul,ly,GJ,DJ,lM],OJ),AOe=me([uM,dM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),kOe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&xOe(t,s)){var o=uke(t,e),c=UJ(o,a,i,n,r),u=yOe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},COe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=fIe(t,n);if(o){var c=dke(o,e),u=UJ(c,s,a,r,i),f=bOe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},IOe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?kOe(t,e,r,i,a,s,o):COe(t,e,n,r,i,a,s)},POe=me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),NOe=me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Mr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:fDe}});function w$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(n),!0).forEach(function(r){DOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DOe(t,e,n){return(e=OOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OOe(t){var e=ROe(t,"string");return typeof e=="symbol"?e:e+""}function ROe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MOe={},jOe={zIndexMap:Object.values(Mr).reduce((t,e)=>S$(S$({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),MOe)},zOe=new Set(Object.values(Mr));function LOe(t){return zOe.has(t)}var HJ=Wi({name:"zIndex",initialState:jOe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:vn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!LOe(n)&&delete t.zIndexMap[n])},prepare:vn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:vn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:vn()}}}),{registerZIndexPortal:VOe,unregisterZIndexPortal:BOe,registerZIndexPortalElement:FOe,unregisterZIndexPortalElement:UOe}=HJ.actions,$Oe=HJ.reducer;function Za(t){var{zIndex:e,children:n}=t,r=Fke(),i=r&&e!==void 0&&e!==0,a=Ai(),s=pn();A.useLayoutEffect(()=>i?(s(VOe({zIndex:e})),()=>{s(BOe({zIndex:e}))}):ng,[s,e,i]);var o=Ge(c=>POe(c,e,a));return i?o?cq.createPortal(n,o):null:n}function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(null,arguments)}function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ox(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(r){qOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qOe(t,e,n){return(e=GOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GOe(t){var e=HOe(t,"string");return typeof e=="symbol"?e:e+""}function HOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KOe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function WOe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=ACe,w=Mr.cursorLine;else if(f==="BarChart")b=kCe(o,h,a,s),x=$Q,w=Mr.cursorRectangle;else if(o==="radial"&&AX(h)){var{cx:S,cy:T,radius:P,startAngle:N,endAngle:D}=GQ(h);b={cx:S,cy:T,startAngle:N,endAngle:D,innerRadius:P,outerRadius:P},x=KQ,w=Mr.cursorLine}else b={points:mIe(o,h,a)},x=tR,w=Mr.cursorLine;var O=typeof c=="object"&&"className"in c?c.className:void 0,I=Ox(Ox(Ox(Ox({stroke:"#ccc",pointerEvents:"none"},a),b),Xv(c)),{},{payload:g,payloadIndex:v,className:Wt("recharts-tooltip-cursor",O)});return A.createElement(Za,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(KOe,{cursor:c,cursorComp:x,cursorProps:I}))}function YOe(t){var e=pOe(),n=_Q(),r=rg(),i=wOe();return e==null||n==null||r==null||i==null?null:A.createElement(WOe,kN({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var KJ=A.createContext(null),XOe=()=>A.useContext(KJ),VC={exports:{}},E$;function QOe(){return E$||(E$=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,P;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(P=1,T=new Array(S-1);P<S;P++)T[P-1]=arguments[P];w.fn.apply(w.context,T)}else{var N=w.length,D;for(P=0;P<N;P++)switch(w[P].once&&this.removeListener(u,w[P].fn,void 0,!0),S){case 1:w[P].fn.call(w[P].context);break;case 2:w[P].fn.call(w[P].context,f);break;case 3:w[P].fn.call(w[P].context,f,h);break;case 4:w[P].fn.call(w[P].context,f,h,g);break;default:if(!T)for(D=1,T=new Array(S-1);D<S;D++)T[D-1]=arguments[D];w[P].fn.apply(w[P].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(VC)),VC.exports}var ZOe=QOe();const JOe=Ml(ZOe);var u0=new JOe,CN="recharts.syncEvent.tooltip",T$="recharts.syncEvent.brush",WJ=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Co(n))return t[n]}},eRe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},YJ=Wi({name:"options",initialState:eRe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),tRe=YJ.reducer,{createEventEmitter:nRe}=YJ.actions;function rRe(t){return t.tooltip.syncInteraction}var iRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},XJ=Wi({name:"chartData",initialState:iRe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:A$,setDataStartEndIndexes:aRe,setComputedData:W5e}=XJ.actions,sRe=XJ.reducer,oRe=["x","y"];function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(r){lRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lRe(t,e,n){return(e=cRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cRe(t){var e=uRe(t,"string");return typeof e=="symbol"?e:e+""}function uRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dRe(t,e){if(t==null)return{};var n,r,i=fRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hRe(){var t=Ge(CR),e=Ge(IR),n=pn(),r=Ge($Z),i=Ge($l),a=rg(),s=Z0(),o=Ge(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return ng;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=dRe(v,oRe),{x:S,y:T,width:P,height:N}=f.payload.sourceViewBox,D=mh(mh({},w),{},{x:s.x+(P?(b-S)/P:0)*s.width,y:s.y+(N?(x-T)/N:0)*s.height});n(mh(mh({},f),{},{payload:mh(mh({},f.payload),{},{coordinate:D})}))}else n(f);return}if(i!=null){var O;if(typeof r=="function"){var I={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},C=r(i,I);O=i[C]}else r==="value"&&(O=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(O==null||f.payload.active===!1||R==null||s==null){n(TN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:V}=R,z=Math.min(M,s.x+s.width),L=Math.min(V,s.y+s.height),W={x:a==="horizontal"?O.coordinate:z,y:a==="horizontal"?L:O.coordinate},Q=TN({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(O.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Q)}}};return u0.on(CN,c),()=>{u0.off(CN,c)}},[o,n,e,t,r,i,a,s])}function pRe(){var t=Ge(CR),e=Ge(IR),n=pn();A.useEffect(()=>{if(t==null)return ng;var r=(i,a,s)=>{e!==s&&t===i&&n(aRe(a))};return u0.on(T$,r),()=>{u0.off(T$,r)}},[n,e,t])}function gRe(){var t=pn();A.useEffect(()=>{t(nRe())},[t]),hRe(),pRe()}function mRe(t,e,n,r,i,a){var s=Ge(v=>_Oe(v,t,e)),o=Ge(IR),c=Ge(CR),u=Ge($Z),f=Ge(rRe),h=f?.active,g=Z0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=TN({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});u0.emit(CN,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){vRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vRe(t,e,n){return(e=yRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yRe(t){var e=bRe(t,"string");return typeof e=="symbol"?e:e+""}function bRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xRe(t){return t.dataKey}function wRe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(aCe,e)}var P$=[],SRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function tE(t){var e,n,r=Xr(t,SRe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:P,defaultIndex:N,portal:D,axisId:O}=r,I=pn(),C=typeof N=="number"?String(N):N;A.useEffect(()=>{I(y2e({shared:T,trigger:P,axisId:O,active:i,defaultIndex:C}))},[I,T,P,O,i,C]);var R=Z0(),M=LQ(),V=f2e(T),{activeIndex:z,isActive:L}=(e=Ge(oe=>AOe(oe,V,P,C)))!==null&&e!==void 0?e:{},W=Ge(oe=>TOe(oe,V,P,C)),Q=Ge(oe=>GJ(oe,V,P,C)),G=Ge(oe=>EOe(oe,V,P,C)),Y=W,J=XOe(),ee=(n=i??L)!==null&&n!==void 0?n:!1,[X,U]=YTe([Y,ee]),Z=V==="axis"?Q:void 0;mRe(V,P,G,Z,z,ee);var te=D??J;if(te==null||R==null||V==null)return null;var K=Y??P$;ee||(K=P$),u&&K.length&&(K=wTe(K.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,xRe));var ue=K.length>0,ie=A.createElement(fCe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ee,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:X,innerRef:U,hasPortalFromProps:!!D},wRe(c,I$(I$({},r),{},{payload:K,label:Z,active:ee,activeIndex:z,coordinate:G,accessibilityLayer:M})));return A.createElement(A.Fragment,null,cq.createPortal(ie,te),ee&&A.createElement(YOe,{cursor:S,tooltipEventType:V,coordinate:G,payload:K,index:z}))}var fy=t=>null;fy.displayName="Cell";function _Re(t,e,n){return(e=ERe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ERe(t){var e=TRe(t,"string");return typeof e=="symbol"?e:e+""}function TRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ARe{constructor(e){_Re(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function N$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(n),!0).forEach(function(r){CRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CRe(t,e,n){return(e=IRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IRe(t){var e=PRe(t,"string");return typeof e=="symbol"?e:e+""}function PRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NRe={cacheSize:2e3,enableCache:!0},QJ=kRe({},NRe),D$=new ARe(QJ.cacheSize),DRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},O$="recharts_measurement_span";function ORe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var R$=(t,e)=>{try{var n=document.getElementById(O$);n||(n=document.createElement("span"),n.setAttribute("id",O$),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,DRe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},vv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||M_.isSsr)return{width:0,height:0};if(!QJ.enableCache)return R$(e,n);var r=ORe(e,n),i=D$.get(r);if(i)return i;var a=R$(e,n);return D$.set(r,a),a},ZJ;function RRe(t,e,n){return(e=MRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MRe(t){var e=jRe(t,"string");return typeof e=="symbol"?e:e+""}function jRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,j$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LRe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VRe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BRe=["cm","mm","pt","pc","in","Q","px"];function FRe(t){return BRe.includes(t)}var Lh="NaN";function URe(t,e){return t*VRe[e]}class Wr{static parse(e){var n,[,r,i]=(n=LRe.exec(e))!==null&&n!==void 0?n:[];return r==null?Wr.NaN:new Wr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Co(e)&&(this.unit=""),n!==""&&!zRe.test(n)&&(this.num=NaN,this.unit=""),FRe(n)&&(this.num=URe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Wr(NaN,""):new Wr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Wr(NaN,""):new Wr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Wr(NaN,""):new Wr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Wr(NaN,""):new Wr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Co(this.num)}}ZJ=Wr;RRe(Wr,"NaN",new ZJ(NaN,""));function JJ(t){if(t==null||t.includes(Lh))return Lh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=M$.exec(e))!==null&&n!==void 0?n:[],s=Wr.parse(r??""),o=Wr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Lh;e=e.replace(M$,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=j$.exec(e))!==null&&u!==void 0?u:[],v=Wr.parse(f??""),b=Wr.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return Lh;e=e.replace(j$,x.toString())}return e}var z$=/\(([^()]*)\)/;function $Re(t){for(var e=t,n;(n=z$.exec(e))!=null;){var[,r]=n;e=e.replace(z$,JJ(r))}return e}function qRe(t){var e=t.replace(/\s+/g,"");return e=$Re(e),e=JJ(e),e}function GRe(t){try{return qRe(t)}catch{return Lh}}function BC(t){var e=GRe(t.slice(5,-1));return e===Lh?"":e}var HRe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],KRe=["dx","dy","angle","className","breakAll"];function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(null,arguments)}function L$(t,e){if(t==null)return{};var n,r,i=WRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function WRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eee=/[ \f\n\r\t\v\u2028\u2029]+/,tee=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];jr(e)||(n?i=e.toString().split(""):i=e.toString().split(eee));var a=i.map(o=>({word:o,width:vv(o,r).width})),s=n?0:vv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function YRe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var nee=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),ree=t=>t.reduce((e,n)=>e.width>n.width?e:n),XRe="",V$=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=tee({breakAll:n,style:r,children:c+XRe});if(!u)return[!1,[]];var f=nee(u.wordsWithComputedWidth,a,s,o),h=f.length>i||ree(f).width>Number(a);return[h,f]},QRe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=He(a),f=String(s),h=nee(e,r,n,i);if(!u||i)return h;var g=h.length>a||ree(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var S=Math.floor((v+b)/2),T=S-1,[P,N]=V$(f,T,c,o,a,r,n,i),[D]=V$(f,S,c,o,a,r,n,i);if(!P&&!D&&(v=S+1),P&&D&&(b=S-1),!P&&D){w=N;break}x++}return w||h},B$=t=>{var e=jr(t)?[]:t.toString().split(eee);return[{words:e,width:void 0}]},ZRe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!M_.isSsr){var o,c,u=tee({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return B$(r);return QRe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return B$(r)},iee="#808080",JRe={angle:0,breakAll:!1,capHeight:"0.71em",fill:iee,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nE=A.forwardRef((t,e)=>{var n=Xr(t,JRe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=L$(n,HRe),g=A.useMemo(()=>ZRe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:S}=h,T=L$(h,KRe);if(!Ga(r)||!Ga(i)||g.length===0)return null;var P=Number(r)+(He(v)?v:0),N=Number(i)+(He(b)?b:0);if(!pt(P)||!pt(N))return null;var D;switch(f){case"start":D=BC("calc(".concat(s,")"));break;case"middle":D=BC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:D=BC("calc(".concat(g.length-1," * -").concat(a,")"));break}var O=[],I=g[0];if(c&&I!=null){var C=I.width,{width:R}=h;O.push("scale(".concat(He(R)&&He(C)?R/C:1,")"))}return x&&O.push("rotate(".concat(x,", ").concat(P,", ").concat(N,")")),O.length&&(T.transform=O.join(" ")),A.createElement("text",IN({},ya(T),{ref:e,x:P,y:N,className:Wt("recharts-text",w),textAnchor:u,fill:o.includes("url")?iee:o}),g.map((M,V)=>{var z=M.words.join(S?"":" ");return A.createElement("tspan",{x:P,dy:V===0?D:a,key:"".concat(z,"-").concat(V)},z)}))});nE.displayName="Text";function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){eMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eMe(t,e,n){return(e=tMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tMe(t){var e=nMe(t,"string");return typeof e=="symbol"?e:e+""}function nMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rMe=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=ZO(e),f=a,h=a+(c-u)/2,g=(f+h)/2,v=(c+u)/2,b=f+c/2,x=o>=0?1:-1,w=x*r,S=x>0?"end":"start",T=x>0?"start":"end",P=c>=0?1:-1,N=P*r,D=P>0?"end":"start",O=P>0?"start":"end",I=i;if(n==="top"){var C={x:f+c/2,y:s-w,horizontalAnchor:"middle",verticalAnchor:S};return I&&(C.height=Math.max(s-I.y,0),C.width=c),C}if(n==="bottom"){var R={x:h+u/2,y:s+o+w,horizontalAnchor:"middle",verticalAnchor:T};return I&&(R.height=Math.max(I.y+I.height-(s+o),0),R.width=u),R}if(n==="left"){var M={x:g-N,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"};return I&&(M.width=Math.max(M.x-I.x,0),M.height=o),M}if(n==="right"){var V={x:g+v+N,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"};return I&&(V.width=Math.max(I.x+I.width-V.x,0),V.height=o),V}var z=I?{width:v,height:o}:{};return n==="insideLeft"?ro({x:g+N,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"},z):n==="insideRight"?ro({x:g+v-N,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"},z):n==="insideTop"?ro({x:f+c/2,y:s+w,horizontalAnchor:"middle",verticalAnchor:T},z):n==="insideBottom"?ro({x:h+u/2,y:s+o-w,horizontalAnchor:"middle",verticalAnchor:S},z):n==="insideTopLeft"?ro({x:f+N,y:s+w,horizontalAnchor:O,verticalAnchor:T},z):n==="insideTopRight"?ro({x:f+c-N,y:s+w,horizontalAnchor:D,verticalAnchor:T},z):n==="insideBottomLeft"?ro({x:h+N,y:s+o-w,horizontalAnchor:O,verticalAnchor:S},z):n==="insideBottomRight"?ro({x:h+u-N,y:s+o-w,horizontalAnchor:D,verticalAnchor:S},z):n&&typeof n=="object"&&(He(n.x)||Qd(n.x))&&(He(n.y)||Qd(n.y))?ro({x:a+li(n.x,v),y:s+li(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},z):ro({x:b,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},iMe=["labelRef"],aMe=["content"];function U$(t,e){if(t==null)return{};var n,r,i=sMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ym(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(n),!0).forEach(function(r){oMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oMe(t,e,n){return(e=lMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lMe(t){var e=cMe(t,"string");return typeof e=="symbol"?e:e+""}function cMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rl.apply(null,arguments)}var aee=A.createContext(null),see=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(aee.Provider,{value:c},o)},oee=()=>{var t=A.useContext(aee),e=Z0();return t||(e?ZO(e):void 0)},uMe=A.createContext(null),dMe=()=>{var t=A.useContext(uMe),e=Ge(WZ);return t||e},fMe=t=>{var{value:e,formatter:n}=t,r=jr(t.children)?e:t.children;return typeof n=="function"?n(r):r},fM=t=>t!=null&&typeof t=="function",hMe=(t,e)=>{var n=Rr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},pMe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=hMe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=v;break;case"insideEnd":S=g-w*a,T=!v;break;case"end":S=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var P=sr(o,c,b,S),N=sr(o,c,b,S+(T?1:-1)*359),D="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(N.x,",").concat(N.y),O=jr(t.id)?Qv("recharts-radial-line-"):t.id;return A.createElement("text",rl({},r,{dominantBaseline:"central",className:Wt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:O,d:D})),A.createElement("textPath",{xlinkHref:"#".concat(O)},n))},gMe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=sr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=sr(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},gw=t=>t!=null&&"cx"in t&&He(t.cx),mMe={angle:0,offset:5,zIndex:Mr.label,position:"middle",textBreakAll:!1};function vMe(t){if(!gw(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Cc(t){var e=Xr(t,mMe),{viewBox:n,parentViewBox:r,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:f}=e,h=dMe(),g=oee(),v=i==="center"?g:h??g,b,x,w;n==null?b=v:gw(n)?b=n:b=ZO(n);var S=vMe(b);if(!b||jr(a)&&jr(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var T=Ym(Ym({},e),{},{viewBox:b});if(A.isValidElement(o)){var{labelRef:P}=T,N=U$(T,iMe);return A.cloneElement(o,N)}if(typeof o=="function"){var{content:D}=T,O=U$(T,aMe);if(x=A.createElement(o,O),A.isValidElement(x))return x}else x=fMe(e);var I=ya(e);if(gw(b)){if(i==="insideStart"||i==="insideEnd"||i==="end")return pMe(e,i,x,I,b);w=gMe(b,e.offset,e.position)}else{if(!S)return null;var C=rMe({viewBox:S,position:i,offset:e.offset,parentViewBox:gw(r)?void 0:r});w=Ym(Ym({x:C.x,y:C.y,textAnchor:C.horizontalAnchor,verticalAnchor:C.verticalAnchor},C.width!==void 0?{width:C.width}:{}),C.height!==void 0?{height:C.height}:{})}return A.createElement(Za,{zIndex:e.zIndex},A.createElement(nE,rl({ref:f,className:Wt("recharts-label",c)},I,w,{textAnchor:YRe(I.textAnchor)?I.textAnchor:w.textAnchor,breakAll:u}),x))}Cc.displayName="Label";var yMe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Cc,rl({key:"label-implicit"},r)):Ga(t)?A.createElement(Cc,rl({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Cc?A.cloneElement(t,Ym({key:"label-implicit"},r)):A.createElement(Cc,rl({key:"label-implicit",content:t},r)):fM(t)?A.createElement(Cc,rl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Cc,rl({},t,{key:"label-implicit"},r)):null};function lee(t){var{label:e,labelRef:n}=t,r=oee();return yMe(e,r,n)||null}var FC={},UC={},q$;function bMe(){return q$||(q$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(UC)),UC}var $C={},G$;function xMe(){return G$||(G$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})($C)),$C}var H$;function wMe(){return H$||(H$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bMe(),n=xMe(),r=FO();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(FC)),FC}var qC,K$;function SMe(){return K$||(K$=1,qC=wMe().last),qC}var _Me=SMe();const EMe=Ml(_Me);var TMe=["valueAccessor"],AMe=["dataKey","clockWise","id","textBreakAll","zIndex"];function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(null,arguments)}function W$(t,e){if(t==null)return{};var n,r,i=kMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CMe=t=>Array.isArray(t.value)?EMe(t.value):t.value,cee=A.createContext(void 0),IMe=cee.Provider,uee=A.createContext(void 0),PMe=uee.Provider;function NMe(){return A.useContext(cee)}function DMe(){return A.useContext(uee)}function mw(t){var{valueAccessor:e=CMe}=t,n=W$(t,TMe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=W$(n,AMe),u=NMe(),f=DMe(),h=u||f;return!h||!h.length?null:A.createElement(Za,{zIndex:o??Mr.label},A.createElement(ui,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=jr(r)?e(g,v):hn(g.payload,r),w=jr(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(Cc,iS({key:"label-".concat(v)},ya(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}mw.displayName="LabelList";function dee(t){var{label:e}=t;return e?e===!0?A.createElement(mw,{key:"labelList-implicit"}):A.isValidElement(e)||fM(e)?A.createElement(mw,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(mw,iS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var fee=t=>t.graphicalItems.polarItems,OMe=me([Cn,sy],MR),rE=me([fee,Vn,OMe],zR),RMe=me([rE],LR),iE=me([RMe,q_],VR),MMe=me([iE,Vn,rE],FR);me([iE,Vn,rE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=hn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var Y$=()=>{},jMe=me([iE,Vn,rE,Z_,Cn],GR),zMe=me([Vn,$R,qR,Y$,jMe,Y$,Lt,Cn],HR),hee=me([Vn,Lt,iE,MMe,ay,Cn,zMe],KR),LMe=me([hee,lg,xu],XR),VMe=me([Vn,hee,LMe,Cn],ZR);me([xu,VMe],XZ);var BMe={radiusAxis:{},angleAxis:{}},pee=Wi({name:"polarAxis",initialState:BMe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Y5e,removeRadiusAxis:X5e,addAngleAxis:Q5e,removeAngleAxis:Z5e}=pee.actions,FMe=pee.reducer;function gee(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function X$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(n),!0).forEach(function(r){UMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UMe(t,e,n){return(e=$Me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Me(t){var e=qMe(t,"string");return typeof e=="symbol"?e:e+""}function qMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GMe=(t,e)=>e,hM=me([fee,GMe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),HMe=[],pM=(t,e,n)=>n?.length===0?HMe:n,mee=me([q_,hM,pM],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>Q$(Q$({},e.presentationProps),a.props))),i!=null)return i}}),KMe=me([mee,hM,pM],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=hn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:A_(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),WMe=me([mee,hM,pM,Sr],(t,e,n,r)=>{if(!(e==null||t==null))return Qje({offset:r,pieSettings:e,displayedData:t,cells:n})}),GC={exports:{}},Jt={};var Z$;function YMe(){if(Z$)return Jt;Z$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Jt.ContextConsumer=a,Jt.ContextProvider=s,Jt.Element=t,Jt.ForwardRef=o,Jt.Fragment=n,Jt.Lazy=h,Jt.Memo=f,Jt.Portal=e,Jt.Profiler=i,Jt.StrictMode=r,Jt.Suspense=c,Jt.SuspenseList=u,Jt.isContextConsumer=function(x){return b(x)===a},Jt.isContextProvider=function(x){return b(x)===s},Jt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Jt.isForwardRef=function(x){return b(x)===o},Jt.isFragment=function(x){return b(x)===n},Jt.isLazy=function(x){return b(x)===h},Jt.isMemo=function(x){return b(x)===f},Jt.isPortal=function(x){return b(x)===e},Jt.isProfiler=function(x){return b(x)===i},Jt.isStrictMode=function(x){return b(x)===r},Jt.isSuspense=function(x){return b(x)===c},Jt.isSuspenseList=function(x){return b(x)===u},Jt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Jt.typeOf=b,Jt}var J$;function XMe(){return J$||(J$=1,GC.exports=YMe()),GC.exports}var QMe=XMe(),e9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",t9=null,HC=null,vee=t=>{if(t===t9&&Array.isArray(HC))return HC;var e=[];return A.Children.forEach(t,n=>{jr(n)||(QMe.isFragment(n)?e=e.concat(vee(n.props.children)):e.push(n))}),HC=e,t9=t,e};function gM(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>e9(i)):r=[e9(e)],vee(t).forEach(i=>{var a=Xd(i,"type.displayName")||Xd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var KC={},n9;function ZMe(){return n9||(n9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(KC)),KC}var WC,r9;function JMe(){return r9||(r9=1,WC=ZMe().isPlainObject),WC}var eje=JMe();const tje=Ml(eje);var i9,a9,s9,o9,l9;function c9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(n),!0).forEach(function(r){nje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nje(t,e,n){return(e=rje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rje(t){var e=ije(t,"string");return typeof e=="symbol"?e:e+""}function ije(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aS(){return aS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aS.apply(null,arguments)}function Om(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var d9=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(i9||(i9=Om(["M ",",",""])),t,e),s+=Mn(a9||(a9=Om(["L ",",",""])),t+n,e),s+=Mn(s9||(s9=Om(["L ",",",""])),t+n-a/2,e+i),s+=Mn(o9||(o9=Om(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(l9||(l9=Om(["L ",","," Z"])),t,e),s},aje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sje=t=>{var e=Xr(t,aje),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),P=A.useRef(r),N=z_(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var W=g.current.getTotalLength();W&&b(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var D=Wt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",aS({},ya(e),{className:D,d:d9(n,r,i,a,s)})));var O=x.current,I=w.current,C=S.current,R=T.current,M=P.current,V="0px ".concat(v===-1?1:v,"px"),z="".concat(v,"px 0px"),L=VQ(["strokeDasharray"],u,c);return A.createElement(j_,{animationId:N,key:N,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},W=>{var Q=pr(O,i,W),G=pr(I,a,W),Y=pr(C,s,W),J=pr(R,n,W),ee=pr(M,r,W);g.current&&(x.current=Q,w.current=G,S.current=Y,T.current=J,P.current=ee);var X=W>0?{transition:L,strokeDasharray:z}:{strokeDasharray:V};return A.createElement("path",aS({},ya(e),{className:D,d:d9(J,ee,Q,G,Y),ref:g,style:u9(u9({},X),e.style)}))})},oje=["option","shapeType","activeClassName"];function lje(t,e){if(t==null)return{};var n,r,i=cje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function f9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(n),!0).forEach(function(r){uje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uje(t,e,n){return(e=dje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dje(t){var e=fje(t,"string");return typeof e=="symbol"?e:e+""}function fje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hje(t,e){return sS(sS({},e),t)}function pje(t,e){return t==="symbols"}function h9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement($Q,n);case"trapezoid":return A.createElement(sje,n);case"sector":return A.createElement(KQ,n);case"symbols":if(pje(e))return A.createElement(TX,n);break;case"curve":return A.createElement(tR,n);default:return null}}function gje(t){return A.isValidElement(t)?t.props:t}function yee(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=lje(t,oje),a;if(A.isValidElement(e))a=A.cloneElement(e,sS(sS({},i),gje(e)));else if(typeof e=="function")a=e(i,i.index);else if(tje(e)&&typeof e!="boolean"){var s=hje(e,i);a=A.createElement(h9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(h9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(ui,{className:r},a):a}var mM=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(AJ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},vM=t=>{var e=pn();return(n,r)=>i=>{t?.(n,r,i),e(b2e())}},yM=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(x2e({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function bee(t){var{tooltipEntrySettings:e}=t,n=pn(),r=Ai(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(g2e(e)):i.current!==e&&n(m2e({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(v2e(i.current)),i.current=null)},[n]),null}function mje(t){var{legendPayload:e}=t,n=pn(),r=Ai(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(MQ(e)):i.current!==e&&n(jQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(zQ(i.current)),i.current=null)},[n]),null}function vje(t){var{legendPayload:e}=t,n=pn(),r=Ge(Lt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(MQ(e)):i.current!==e&&n(jQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(zQ(i.current)),i.current=null)},[n]),null}var YC,yje=()=>{var[t]=A.useState(()=>Qv("uid-"));return t},bje=(YC=jne.useId)!==null&&YC!==void 0?YC:yje;function xje(t,e){var n=bje();return e||(t?"".concat(t,"-").concat(n):n)}var wje=A.createContext(void 0),xee=t=>{var{id:e,type:n,children:r}=t,i=xje("recharts-".concat(n),e);return A.createElement(wje.Provider,{value:i},r(i))},Sje={cartesianItems:[],polarItems:[]},wee=Wi({name:"graphicalItems",initialState:Sje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:vn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:vn()},removeCartesianGraphicalItem:{reducer(t,e){var n=As(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:vn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:vn()},removePolarGraphicalItem:{reducer(t,e){var n=As(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:vn()}}}),{addCartesianGraphicalItem:_je,replaceCartesianGraphicalItem:Eje,removeCartesianGraphicalItem:Tje,addPolarGraphicalItem:Aje,removePolarGraphicalItem:kje}=wee.actions,Cje=wee.reducer,Ije=t=>{var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(_je(t)):n.current!==t&&e(Eje({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(Tje(n.current)),n.current=null)},[e]),null},Pje=A.memo(Ije);function Nje(t){var e=pn();return A.useLayoutEffect(()=>(e(Aje(t)),()=>{e(kje(t))}),[e,t]),null}var Dje=["key"],Oje=["onMouseEnter","onClick","onMouseLeave"],Rje=["id"],Mje=["id"];function p9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p9(Object(n),!0).forEach(function(r){jje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jje(t,e,n){return(e=zje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zje(t){var e=Lje(t,"string");return typeof e=="symbol"?e:e+""}function Lje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ou.apply(null,arguments)}function aE(t,e){if(t==null)return{};var n,r,i=Vje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Bje(t){var e=A.useMemo(()=>gM(t.children,fy),[t.children]),n=Ge(r=>KMe(r,t.id,e));return n==null?null:A.createElement(vje,{legendPayload:n})}var Fje=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),getPosition:g=>{var v;return(v=r[Number(g)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:A_(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(bee,{tooltipEntrySettings:h})}),Uje=(t,e)=>t>e?"start":t<e?"end":"middle",$je=(t,e,n)=>li(typeof e=="function"?e(t):e,n,n*.8),qje=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=qQ(a,s),c=i+li(t.cx,a,a/2),u=r+li(t.cy,s,s/2),f=li(t.innerRadius,o,0),h=$je(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},Gje=(t,e)=>{var n=Rr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Hje=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Wt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=aE(e,Dje);return A.createElement(tR,ou({},i,{type:"linear",className:n}))},Kje=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Wt("recharts-pie-label-text",gee(t));return A.createElement(nE,ou({},e,{alignmentBaseline:"middle",className:i}),r)};function Wje(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Ps(n),c=Xv(i),u=Xv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=sr(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:Uje(x.x,g.cx)},x),S=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[sr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Za,{zIndex:Mr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(ui,null,a&&Hje(a,S),Kje(i,w,hn(g,s))))});return A.createElement(ui,{className:"recharts-pie-labels"},h)}function Yje(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(dee,{label:i}):A.createElement(Wje,{sectors:e,props:n,showLabels:r})}function Xje(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=Ge(nf),c=Ge(oM),u=Ge(aOe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=aE(i,Oje),b=mM(f,i.dataKey,s),x=vM(g),w=yM(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var P=u==null||u===s,N=String(T)===o&&(c==null||i.dataKey===c)&&P,D=o?r:null,O=n&&N?n:D,I=jn(jn({},S),{},{stroke:S.stroke,tabIndex:-1,[yQ]:T,[bQ]:s});return A.createElement(ui,ou({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},g_(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(yee,ou({option:a??O,index:T,shapeType:"sector",isActive:N},I)))}))}function Qje(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=Gje(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(O=>hn(O,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,P=r.reduce((O,I)=>{var C=hn(I,u,0);return O+(He(C)?C:0)},0),N;if(P>0){var D;N=r.map((O,I)=>{var C=hn(O,u,0),R=hn(O,f,I),M=qje(n,a,O),V=(He(C)?C:0)/P,z,L=jn(jn({},O),i&&i[I]&&i[I].props);I?z=D.endAngle+Rr(v)*x*(C!==0?1:0):z=o;var W=z+Rr(v)*((C!==0?g:0)+V*T),Q=(z+W)/2,G=(M.innerRadius+M.outerRadius)/2,Y=[{name:R,value:C,payload:L,dataKey:u,type:h,graphicalItemId:n.id}],J=sr(M.cx,M.cy,G,Q);return D=jn(jn(jn(jn({},n.presentationProps),{},{percent:V,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:Y,midAngle:Q,middleRadius:G,tooltipPosition:J},L),M),{},{value:C,dataKey:u,startAngle:z,endAngle:W,payload:L,paddingAngle:Rr(v)*x}),D})}return N}function Zje(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(PMe,{value:e?i:void 0},r)}function Jje(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=z_(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(Zje,{showLabels:!x,sectors:i},A.createElement(j_,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:v},P=>{var N,D=[],O=i&&i[0],I=(N=O?.startAngle)!==null&&N!==void 0?N:0;return i?.forEach((C,R)=>{var M=b&&b[R],V=R>0?Xd(C,"paddingAngle",0):0;if(M){var z=pr(M.endAngle-M.startAngle,C.endAngle-C.startAngle,P),L=jn(jn({},C),{},{startAngle:I+V,endAngle:I+z+V});D.push(L),I=L.endAngle}else{var{endAngle:W,startAngle:Q}=C,G=pr(0,W-Q,P),Y=jn(jn({},C),{},{startAngle:I+V,endAngle:I+G+V});D.push(Y),I=Y.endAngle}}),n.current=D,A.createElement(ui,null,A.createElement(Xje,{sectors:D,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(Yje,{showLabels:!x,sectors:i,props:e}),e.children)}var eze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Mr.area};function tze(t){var{id:e}=t,n=aE(t,Rje),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>gM(t.children,fy),[t.children]),o=Ge(f=>WMe(f,e,s)),c=A.useRef(null),u=Wt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(ui,{tabIndex:a,className:u})):A.createElement(Za,{zIndex:t.zIndex},A.createElement(Fje,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(ui,{tabIndex:a,className:u},A.createElement(Jje,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function See(t){var e=Xr(t,eze),{id:n}=e,r=aE(e,Mje),i=Ps(r);return A.createElement(xee,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(Nje,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(Bje,ou({},r,{id:a})),A.createElement(tze,ou({},r,{id:a}))))}See.displayName="Pie";function g9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g9(Object(n),!0).forEach(function(r){nze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nze(t,e,n){return(e=rze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rze(t){var e=ize(t,"string");return typeof e=="symbol"?e:e+""}function ize(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _ee=0,aze={xAxis:{},yAxis:{},zAxis:{}},Eee=Wi({name:"cartesianAxis",initialState:aze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:vn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:vn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:vn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:vn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:vn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:vn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:vn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:vn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:vn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=m9(m9({},i),{},{width:r,widthHistory:o})}}}}),{addXAxis:sze,replaceXAxis:oze,removeXAxis:lze,addYAxis:cze,replaceYAxis:uze,removeYAxis:dze,addZAxis:J5e,replaceZAxis:eVe,removeZAxis:tVe,updateYAxisWidth:fze}=Eee.actions,hze=Eee.reducer,pze=me([Sr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),gze=me([pze,Vl,Bl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Tee=()=>Ge(gze),v9=(t,e,n)=>{var r=n??t;if(!jr(r))return li(r,e,0)},mze=(t,e,n)=>{var r={},i=t.filter(W_),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>{var h=u[f.stackId];return h==null&&(h=[]),h.push(f),u[f.stackId]=h,u},r),o=Object.entries(s).map(u=>{var f,[h,g]=u,v=g.map(x=>x.dataKey),b=v9(e,n,(f=g[0])===null||f===void 0?void 0:f.barSize);return{stackId:h,dataKeys:v,barSize:b}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=v9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y9(Object(n),!0).forEach(function(r){vze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vze(t,e,n){return(e=yze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yze(t){var e=bze(t,"string");return typeof e=="symbol"?e:e+""}function bze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xze(t,e,n,r,i){var a,s=r.length;if(!(s<1)){var o=li(t,n,0,!0),c,u=[];if(pt((a=r[0])===null||a===void 0?void 0:a.barSize)){var f=!1,h=n/s,g=r.reduce((T,P)=>T+(P.barSize||0),0);g+=(s-1)*o,g>=n&&(g-=(s-1)*o,o=0),g>=n&&h>0&&(f=!0,h*=.9,g=s*h);var v=(n-g)/2>>0,b={offset:v-o,size:0};c=r.reduce((T,P)=>{var N,D={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:b.offset+b.size+o,size:f?h:(N=P.barSize)!==null&&N!==void 0?N:0}},O=[...T,D];return b=D.position,O},u)}else{var x=li(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var w=(n-2*x-(s-1)*o)/s;w>1&&(w>>=0);var S=pt(i)?Math.min(w,i):w;c=r.reduce((T,P,N)=>[...T,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:x+(w+o)*N+(w-S)/2,size:S}}],u)}return c}}var wze=(t,e,n,r,i,a,s)=>{var o=jr(s)?e:s,c=xze(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>Rx(Rx({},u),{},{position:Rx(Rx({},u.position),{},{offset:u.position.offset-i/2})}))),c},Sze=(t,e)=>{var n=OR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}},_ze=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function Eze(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&pt(t.zIndex)?t.zIndex:e}var Aee=t=>{var{chartData:e}=t,n=pn(),r=Ai();return A.useEffect(()=>r?()=>{}:(n(A$(e)),()=>{n(A$(void 0))}),[e,n,r]),null},b9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},kee=Wi({name:"brush",initialState:b9,reducers:{setBrushSettings(t,e){return e.payload==null?b9:e.payload}}}),{setBrushSettings:nVe}=kee.actions,Tze=kee.reducer,Aze=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},kze=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return Aze({x:e,y:n},{x:r,y:i})};function Cze(t){return(t%180+180)%180}var Ize=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Cze(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Pze={dots:[],areas:[],lines:[]},Cee=Wi({name:"referenceElements",initialState:Pze,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=As(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=As(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=As(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:rVe,removeDot:iVe,addArea:aVe,removeArea:sVe,addLine:Nze,removeLine:Dze}=Cee.actions,Oze=Cee.reducer,Iee=A.createContext(void 0),Rze=t=>{var{children:e}=t,[n]=A.useState("".concat(Qv("recharts"),"-clip")),r=Tee();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(Iee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},Mze=()=>A.useContext(Iee);class jze{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:s}=n,o,c;return s==="rangeMin"?o=this.yAxisScale.rangeMin():s==="rangeMax"?o=this.yAxisScale.rangeMax():o=0,s==="rangeMin"?c=this.xAxisScale.rangeMin():s==="rangeMax"?c=this.xAxisScale.rangeMax():c=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:c,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:o}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function x9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x9(Object(n),!0).forEach(function(r){zze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zze(t,e,n){return(e=Lze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lze(t){var e=Vze(t,"string");return typeof e=="symbol"?e:e+""}function Vze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oS(){return oS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oS.apply(null,arguments)}var Bze=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!pt(e.x1)||!pt(e.y1)||!pt(e.x2)||!pt(e.y2))return null;n=A.createElement("line",oS({},e,{className:"recharts-reference-line-line"}))}return n},Fze=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.map(t,{position:n});if(!pt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},Uze=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.map(t,{position:n});if(!pt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},$ze=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},qze=(t,e,n,r,i,a,s)=>{var{x:o,y:c,segment:u,ifOverflow:f}=s,h=Ga(o),g=Ga(c);return g?Fze(c,f,r,a,e,n):h?Uze(o,f,r,i,t,n):u!=null&&u.length===2?$ze(u,f,r,new jze({x:t,y:e})):null};function Gze(t){var e=pn();return A.useEffect(()=>(e(Nze(t)),()=>{e(Dze(t))})),null}function Hze(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ai(),o=Mze(),c=Ge(I=>Ro(I,e)),u=Ge(I=>Mo(I,n)),f=Ge(I=>Dp(I,"xAxis",e,s)),h=Ge(I=>Dp(I,"yAxis",n,s)),g=Z0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=qze(f,h,g,t.position,c.orientation,u.orientation,t);if(!v)return null;var b=v[0],x=v[1];if(b==null||x==null)return null;var{x:w,y:S}=b,{x:T,y:P}=x,N=a==="hidden"?"url(#".concat(o,")"):void 0,D=w9(w9({clipPath:N},ya(t)),{},{x1:w,y1:S,x2:T,y2:P}),O=kze({x1:w,y1:S,x2:T,y2:P});return A.createElement(Za,{zIndex:t.zIndex},A.createElement(ui,{className:Wt("recharts-reference-line",i)},Bze(r,D),A.createElement(see,oS({},O,{lowerWidth:O.width,upperWidth:O.width}),A.createElement(lee,{label:t.label}),t.children)))}var Kze={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Mr.line};function bM(t){var e=Xr(t,Kze);return A.createElement(A.Fragment,null,A.createElement(Gze,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(Hze,e))}bM.displayName="ReferenceLine";function Pee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Wze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Ize(r,n)}function Yze(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function d0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Xze(t,e){return Pee(t,e+1)}function Qze(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:Pee(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,P=c===0||d0(t,T,S,f,o);P||(c=0,f=s,u+=1),P&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function Zze(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var N=r[x];if(N==null)return 0;var D=x,O,I=()=>(O===void 0&&(O=n(N,D)),O),C=N.coordinate,R=x===f||d0(t,C,I,h,c);if(!R)return g=!1,1;R&&(h=C+t*(I()/2+i))},b,x=f;x<s&&(b=v(),!(b!==0&&b===1));x+=u);if(g){for(var w=[],S=f;S<s;S+=u){var T=r[S];T!=null&&w.push(T)}return w}}return[]}function S9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(n),!0).forEach(function(r){Jze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jze(t,e,n){return(e=e4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4e(t){var e=t4e(t,"string");return typeof e=="symbol"?e:e+""}function t4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n4e(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g];if(v==null)return 1;var b=v,x,w=()=>(x===void 0&&(x=n(v,g)),x);if(g===s-1){var S=t*(b.coordinate+t*w()/2-c);a[g]=b=ti(ti({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[g]=b=ti(ti({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var T=d0(t,b.tickCoord,w,o,c);T&&(c=b.tickCoord-t*(w()/2+i),a[g]=ti(ti({},b),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function r4e(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1];if(f!=null){var h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=ti(ti({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=d0(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=ti(ti({},f),{},{isShow:!0}))}}}for(var b=a?o-1:o,x=function(T){var P=s[T];if(P==null)return 1;var N=P,D,O=()=>(D===void 0&&(D=n(P,T)),D);if(T===0){var I=t*(N.coordinate-t*O()/2-c);s[T]=N=ti(ti({},N),{},{tickCoord:I<0?N.coordinate-I*t:N.coordinate})}else s[T]=N=ti(ti({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var C=d0(t,N.tickCoord,O,c,u);C&&(c=N.tickCoord+t*(O()/2+i),s[T]=ti(ti({},N),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function xM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(He(c)||M_.isSsr){var g;return(g=Xze(i,He(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?vv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(D,O)=>{var I=typeof u=="function"?u(D.value,O):D.value;return b==="width"?Wze(vv(I,{fontSize:e,letterSpacing:n}),x,h):vv(I,{fontSize:e,letterSpacing:n})[b]},S=i[0],T=i[1],P=i.length>=2&&S!=null&&T!=null?Rr(T.coordinate-S.coordinate):1,N=Yze(a,P,b);return c==="equidistantPreserveStart"?Qze(P,N,w,i,s):c==="equidistantPreserveEnd"?Zze(P,N,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=r4e(P,N,w,i,s,c==="preserveStartEnd"):v=n4e(P,N,w,i,s),v.filter(D=>D.isShow))}var i4e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},a4e=["axisLine","width","height","className","hide","ticks","axisType"];function s4e(t,e){if(t==null)return{};var n,r,i=o4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function o4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(null,arguments)}function _9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_9(Object(n),!0).forEach(function(r){l4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l4e(t,e,n){return(e=c4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c4e(t){var e=u4e(t,"string");return typeof e=="symbol"?e:e+""}function u4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Mr.axis};function d4e(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=On(On(On({},c),Ps(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=On(On({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=On(On({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",rf({},u,{className:Wt("recharts-cartesian-axis-line",Xd(o,"className"))}))}function f4e(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,S=He(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function h4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function p4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function g4e(t){var{option:e,tickProps:n,value:r}=t,i,a=Wt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,On(On({},n),{},{className:a}));else if(typeof e=="function")i=e(On(On({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Wt(s,gee(e))),i=A.createElement(nE,rf({},n,{className:s}),r)}return i}var m4e=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:P,getTicksConfig:N,events:D,axisType:O}=t,I=xM(On(On({},N),{},{ticks:n}),T,P),C=h4e(f,h),R=p4e(f,h),M=Ps(N),V=Xv(r),z={};typeof i=="object"&&(z=i);var L=On(On({},M),{},{fill:"none"},z),W=I.map(Y=>On({entry:Y},f4e(Y,g,v,b,x,f,w,h,S))),Q=W.map(Y=>{var{entry:J,line:ee}=Y;return A.createElement(ui,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&A.createElement("line",rf({},L,ee,{className:Wt("recharts-cartesian-axis-tick-line",Xd(i,"className"))})))}),G=W.map((Y,J)=>{var ee,X,{entry:U,tick:Z}=Y,te=On(On(On(On({verticalAnchor:R},M),{},{textAnchor:C,stroke:"none",fill:a},Z),{},{index:J,payload:U,visibleTicksCount:I.length,tickFormatter:s,padding:c},u),{},{angle:(ee=(X=u?.angle)!==null&&X!==void 0?X:M.angle)!==null&&ee!==void 0?ee:0}),K=On(On({},te),V);return A.createElement(ui,rf({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},g_(D,U,J)),r&&A.createElement(g4e,{option:r,tickProps:K,value:"".concat(typeof s=="function"?s(U.value,J):U.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},G.length>0&&A.createElement(Za,{zIndex:Mr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:e},G)),Q.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},Q))}),v4e=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=s4e(t,a4e),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return i4e({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var P=window.getComputedStyle(T),N=P.fontSize,D=P.letterSpacing;(N!==f||D!==g)&&(h(N),v(D))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Za,{zIndex:t.zIndex},A.createElement(ui,{className:Wt("recharts-cartesian-axis",a)},A.createElement(d4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ps(t)}),A.createElement(m4e,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(see,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(lee,{label:t.label,labelRef:t.labelRef}),t.children)))}),wM=A.forwardRef((t,e)=>{var n=Xr(t,vl);return A.createElement(v4e,rf({},n,{ref:e}))});wM.displayName="CartesianAxis";var y4e=["x1","y1","x2","y2","key"],b4e=["offset"],x4e=["xAxisId","yAxisId"],w4e=["xAxisId","yAxisId"];function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){S4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S4e(t,e,n){return(e=_4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _4e(t){var e=E4e(t,"string");return typeof e=="symbol"?e:e+""}function E4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(null,arguments)}function lS(t,e){if(t==null)return{};var n,r,i=T4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function T4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var A4e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Nee(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=lS(n,y4e),h=(i=Ps(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=lS(h,b4e);r=A.createElement("line",_d({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function k4e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=lS(t,x4e),c=i.map((u,f)=>{var h=ii(ii({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(Nee,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function C4e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=lS(t,w4e),c=i.map((u,f)=>{var h=ii(ii({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(Nee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function I4e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:x,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function P4e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:x,height:o,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var N4e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return gQ(xM(ii(ii(ii({},vl),n),{},{ticks:mQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},D4e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return gQ(xM(ii(ii(ii({},vl),n),{},{ticks:mQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},O4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Mr.grid};function sE(t){var e=EQ(),n=TQ(),r=_Q(),i=ii(ii({},Xr(t,O4e)),{},{x:He(t.x)?t.x:r.left,y:He(t.y)?t.y:r.top,width:He(t.width)?t.width:r.width,height:He(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=Ai(),x=Ge(R=>p$(R,"xAxis",a,b)),w=Ge(R=>p$(R,"yAxis",s,b));if(!Io(u)||!Io(f)||!He(o)||!He(c))return null;var S=i.verticalCoordinatesGenerator||N4e,T=i.horizontalCoordinatesGenerator||D4e,{horizontalPoints:P,verticalPoints:N}=i;if((!P||!P.length)&&typeof T=="function"){var D=g&&g.length,O=T({yAxis:w?ii(ii({},w),{},{ticks:D?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},D?!0:h);R1(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(P=O)}if((!N||!N.length)&&typeof S=="function"){var I=v&&v.length,C=S({xAxis:x?ii(ii({},x),{},{ticks:I?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},I?!0:h);R1(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(N=C)}return A.createElement(Za,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(A4e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(I4e,_d({},i,{horizontalPoints:P})),A.createElement(P4e,_d({},i,{verticalPoints:N})),A.createElement(k4e,_d({},i,{offset:r,horizontalPoints:P,xAxis:x,yAxis:w})),A.createElement(C4e,_d({},i,{offset:r,verticalPoints:N,xAxis:x,yAxis:w}))))}sE.displayName="CartesianGrid";var R4e={},Dee=Wi({name:"errorBars",initialState:R4e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:oVe,replaceErrorBar:lVe,removeErrorBar:cVe}=Dee.actions,M4e=Dee.reducer,j4e=["children"];function z4e(t,e){if(t==null)return{};var n,r,i=L4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var V4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},B4e=A.createContext(V4e);function F4e(t){var{children:e}=t,n=z4e(t,j4e);return A.createElement(B4e.Provider,{value:n},e)}function Oee(t,e){var n,r,i=Ge(u=>Ro(u,t)),a=Ge(u=>Mo(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Pr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Nr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function U4e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=Tee(),{needClipX:a,needClipY:s,needClip:o}=Oee(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var XC={exports:{}},QC={};var T9;function $4e(){if(T9)return QC;T9=1;var t=Mp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return QC.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(D){if(!S){if(S=!0,T=D,D=h(D),g!==void 0&&b.hasValue){var O=b.value;if(g(O,D))return P=O}return P=D}if(O=P,n(T,D))return O;var I=h(D);return g!==void 0&&g(O,I)?(T=D,O):(T=D,P=I)}var S=!1,T,P,N=f===void 0?null:f;return[function(){return w(u())},N===null?void 0:function(){return w(N())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},QC}var A9;function q4e(){return A9||(A9=1,XC.exports=$4e()),XC.exports}q4e();function G4e(t){t()}function H4e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){G4e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var k9={notify(){},get:()=>[]};function K4e(t,e){let n,r=k9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=H4e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=k9)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var W4e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y4e=W4e(),X4e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Q4e=X4e(),Z4e=()=>Y4e||Q4e?A.useLayoutEffect:A.useEffect,J4e=Z4e();function C9(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function eLe(t,e){if(C9(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!C9(t[n[i]],e[n[i]]))return!1;return!0}var tLe=Symbol.for("react-redux-context"),nLe=typeof globalThis<"u"?globalThis:{};function rLe(){if(!A.createContext)return{};const t=nLe[tLe]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var iLe=rLe();function aLe(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=K4e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);J4e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||iLe;return A.createElement(o.Provider,{value:a},e)}var sLe=aLe,oLe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function lLe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function SM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(oLe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!eLe(t[r],e[r]))return!1}else if(!lLe(t[r],e[r]))return!1;return!0}function pf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:_ee}function gf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:_ee}var cLe="Invariant failed";function uLe(t,e){throw new Error(cLe)}function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PN.apply(null,arguments)}function cS(t){return A.createElement(yee,PN({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var dLe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(He(e))return e;var a=He(r)||jr(r);return a?e(r,i):(a||uLe(),n)}},fLe=(t,e,n)=>n,hLe=(t,e)=>e,hy=me([jR,hLe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),pLe=me([hy],t=>t?.maxBarSize),gLe=(t,e,n,r)=>r,mLe=me([Lt,jR,pf,gf,fLe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),vLe=(t,e,n)=>{var r=Lt(t),i=pf(t,e),a=gf(t,e);if(!(i==null||a==null))return r==="horizontal"?EN(t,"yAxis",a,n):EN(t,"xAxis",i,n)},yLe=(t,e)=>{var n=Lt(t),r=pf(t,e),i=gf(t,e);if(!(r==null||i==null))return n==="horizontal"?h$(t,"xAxis",r):h$(t,"yAxis",i)},bLe=me([mLe,aDe,yLe],mze),xLe=(t,e,n)=>{var r,i,a=hy(t,e);if(a==null)return 0;var s=pf(t,e),o=gf(t,e);if(s==null||o==null)return 0;var c=Lt(t),u=BZ(t),{maxBarSize:f}=a,h=jr(f)?u:f,g,v;return c==="horizontal"?(g=Rp(t,"xAxis",s,n),v=Op(t,"xAxis",s,n)):(g=Rp(t,"yAxis",o,n),v=Op(t,"yAxis",o,n)),(r=(i=O1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0},Ree=(t,e,n)=>{var r=Lt(t),i=pf(t,e),a=gf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Rp(t,"xAxis",i,n),o=Op(t,"xAxis",i,n)):(s=Rp(t,"yAxis",a,n),o=Op(t,"yAxis",a,n)),O1(s,o)}},wLe=me([bLe,BZ,iDe,FZ,xLe,Ree,pLe],wze),SLe=(t,e,n)=>{var r=pf(t,e);if(r!=null)return Rp(t,"xAxis",r,n)},_Le=(t,e,n)=>{var r=gf(t,e);if(r!=null)return Rp(t,"yAxis",r,n)},ELe=(t,e,n)=>{var r=pf(t,e);if(r!=null)return Op(t,"xAxis",r,n)},TLe=(t,e,n)=>{var r=gf(t,e);if(r!=null)return Op(t,"yAxis",r,n)},ALe=me([wLe,hy],_ze),kLe=me([vLe,hy],Sze),CLe=me([Sr,XO,SLe,_Le,ELe,TLe,ALe,Lt,XNe,Ree,kLe,hy,gLe],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=v?.slice(b,x+1),S!=null)return n3e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),ILe=["index"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(null,arguments)}function PLe(t,e){if(t==null)return{};var n,r,i=NLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mee=A.createContext(void 0),DLe=t=>{var e=A.useContext(Mee);if(e!=null)return e.stackId;if(t!=null)return ake(t)},OLe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),RLe=t=>{var e=A.useContext(Mee);if(e!=null){var{stackId:n}=e;return"url(#".concat(OLe(n,t),")")}},jee=t=>{var{index:e}=t,n=PLe(t,ILe),r=RLe(e);return A.createElement(ui,NN({className:"recharts-bar-stack-layer",clipPath:r},n))},MLe=["onMouseEnter","onMouseLeave","onClick"],jLe=["value","background","tooltipPosition"],zLe=["id"],LLe=["onMouseEnter","onClick","onMouseLeave"];function Rl(){return Rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rl.apply(null,arguments)}function I9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I9(Object(n),!0).forEach(function(r){VLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VLe(t,e,n){return(e=BLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BLe(t){var e=FLe(t,"string");return typeof e=="symbol"?e:e+""}function FLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uS(t,e){if(t==null)return{};var n,r,i=ULe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ULe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $Le=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:A_(n,e),payload:t}]},qLe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,getPosition:ng,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:A_(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(bee,{tooltipEntrySettings:f})});function GLe(t){var e=Ge(nf),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=uS(a,MLe),f=mM(s,r,a.id),h=vM(o),g=yM(c,r,a.id);if(!i||n==null)return null;var v=Xv(i);return A.createElement(Za,{zIndex:Eze(i,Mr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,P=uS(b,jLe);if(!S)return null;var N=f(b,x),D=h(b,x),O=g(b,x),I=yi(yi(yi(yi(yi({option:i,isActive:String(x)===e},P),{},{fill:"#eee"},S),v),g_(u,b,x)),{},{onMouseEnter:N,onMouseLeave:D,onClick:O,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(cS,Rl({key:"background-bar-".concat(x)},I))}))}function HLe(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return yi(yi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(IMe,{value:e?i:void 0},n)}function KLe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=Ge(nf),c=Ge(oM),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(Za,{zIndex:Mr.activeBar},A.createElement(jee,{index:a},A.createElement(cS,Rl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s})))):A.createElement(cS,Rl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function WLe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(cS,Rl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function YLe(t){var e,{data:n,props:r}=t,i=(e=Ps(r))!==null&&e!==void 0?e:{},{id:a}=i,s=uS(i,zLe),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=uS(r,LLe),b=mM(f,c,a),x=vM(g),w=yM(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(jee,Rl({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},g_(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(KLe,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(WLe,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function XLe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=z_(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(HLe,{showLabels:x,rects:r},A.createElement(j_,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var P=T===1?r:r?.map((N,D)=>{var O=h&&h[D];if(O)return yi(yi({},N),{},{x:pr(O.x,N.x,T),y:pr(O.y,N.y,T),width:pr(O.width,N.width,T),height:pr(O.height,N.height,T)});if(i==="horizontal"){var I=pr(0,N.height,T),C=pr(N.stackedBarStart,N.y,T);return yi(yi({},N),{},{y:C,height:I})}var R=pr(0,N.width,T),M=pr(N.stackedBarStart,N.x,T);return yi(yi({},N),{},{width:R,x:M})});return T>0&&(n.current=P??null),P==null?null:A.createElement(ui,null,A.createElement(YLe,{props:e,data:P}))}),A.createElement(dee,{label:e.label}),e.children)}function QLe(t){var e=A.useRef(null);return A.createElement(XLe,{previousRectanglesRef:e,props:t})}var zee=0,ZLe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:hn(t,e)}};class JLe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Wt("recharts-bar",i),h=u;return A.createElement(ui,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(U4e,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(ui,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(GLe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(QLe,this.props)))}}var e3e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:zee,xAxisId:0,yAxisId:0,zIndex:Mr.bar};function t3e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=Oee(e,n),g=rg(),v=Ai(),b=gM(t.children,fy),x=Ge(T=>CLe(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(F4e,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:ZLe,errorBarOffset:w},A.createElement(JLe,Rl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function n3e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=ske({numericAxis:w}),P=w.scale.map(T);return h.map((N,D)=>{var O,I,C,R,M,V;if(f){var z=f[D+x];if(z==null)return null;O=eke(z,S)}else O=hn(N,n),Array.isArray(O)||(O=[T,O]);var L=dLe(r,zee)(O[1],D);if(e==="horizontal"){var W,Q=o.scale.map(O[0]),G=o.scale.map(O[1]);if(Q==null||G==null)return null;I=pF({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:N,index:D}),C=(W=G??Q)!==null&&W!==void 0?W:void 0,R=i.size;var Y=Q-G;if(M=Co(Y)?0:Y,V={x:I,y:g.top,width:R,height:g.height},Math.abs(L)>0&&Math.abs(M)<Math.abs(L)){var J=Rr(M||L)*(Math.abs(L)-Math.abs(M));C-=J,M+=J}}else{var ee=s.scale.map(O[0]),X=s.scale.map(O[1]);if(ee==null||X==null)return null;if(I=ee,C=pF({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:N,index:D}),R=X-ee,M=i.size,V={x:g.left,y:C,width:g.width,height:M},Math.abs(L)>0&&Math.abs(R)<Math.abs(L)){var U=Rr(R||L)*(Math.abs(L)-Math.abs(R));R+=U}}if(I==null||C==null||R==null||M==null)return null;var Z=yi(yi({},N),{},{stackedBarStart:P,x:I,y:C,width:R,height:M,value:f?O:O[1],payload:N,background:V,tooltipPosition:{x:I+R/2,y:C+M/2},parentViewBox:b},v&&v[D]&&v[D].props);return Z}).filter(Boolean)}function r3e(t){var e=Xr(t,e3e),n=DLe(e.stackId),r=Ai();return A.createElement(xee,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(mje,{legendPayload:$Le(e)}),A.createElement(qLe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(Pje,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Za,{zIndex:e.zIndex},A.createElement(t3e,Rl({},e,{id:i})))))}var f0=A.memo(r3e,SM);f0.displayName="Bar";var i3e=["domain","range"],a3e=["domain","range"];function P9(t,e){if(t==null)return{};var n,r,i=s3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function N9(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Lee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=P9(t,i3e),{domain:a,range:s}=e,o=P9(e,a3e);return!N9(n,a)||!N9(r,s)?!1:SM(i,o)}var o3e=["type"],l3e=["dangerouslySetInnerHTML","ticks","scale"],c3e=["id","scale"];function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DN.apply(null,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){u3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u3e(t,e,n){return(e=d3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d3e(t){var e=f3e(t,"string");return typeof e=="symbol"?e:e+""}function f3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ON(t,e){if(t==null)return{};var n,r,i=h3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function h3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function p3e(t){var e=pn(),n=A.useRef(null),r=AQ(),{type:i}=t,a=ON(t,o3e),s=H_(r,"xAxis",i),o=A.useMemo(()=>{if(s!=null)return O9(O9({},a),{},{type:s})},[a,s]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(sze(o)):n.current!==o&&e(oze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(lze(n.current)),n.current=null)},[e]),null}var g3e=t=>{var{xAxisId:e,className:n}=t,r=Ge(XO),i=Ai(),a="xAxis",s=Ge(S=>xJ(S,a,e,i)),o=Ge(S=>mJ(S,e)),c=Ge(S=>a2e(S,e)),u=Ge(S=>QZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=ON(t,l3e),{id:b,scale:x}=u,w=ON(u,c3e);return A.createElement(wM,DN({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Wt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},m3e={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:Pr.allowDecimals,allowDuplicatedCategory:Pr.allowDuplicatedCategory,angle:Pr.angle,axisLine:vl.axisLine,height:Pr.height,hide:!1,includeHidden:Pr.includeHidden,interval:Pr.interval,label:!1,minTickGap:Pr.minTickGap,mirror:Pr.mirror,orientation:Pr.orientation,padding:Pr.padding,reversed:Pr.reversed,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,tickLine:vl.tickLine,tickSize:vl.tickSize,type:Pr.type,xAxisId:0},v3e=t=>{var e=Xr(t,m3e);return A.createElement(A.Fragment,null,A.createElement(p3e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(g3e,e))},oE=A.memo(v3e,Lee);oE.displayName="XAxis";var y3e=["type"],b3e=["dangerouslySetInnerHTML","ticks","scale"],x3e=["id","scale"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(null,arguments)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){w3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w3e(t,e,n){return(e=S3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S3e(t){var e=_3e(t,"string");return typeof e=="symbol"?e:e+""}function _3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MN(t,e){if(t==null)return{};var n,r,i=E3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function T3e(t){var e=pn(),n=A.useRef(null),r=AQ(),{type:i}=t,a=MN(t,y3e),s=H_(r,"yAxis",i),o=A.useMemo(()=>{if(s!=null)return M9(M9({},a),{},{type:s})},[s,a]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(cze(o)):n.current!==o&&e(uze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(dze(n.current)),n.current=null)},[e]),null}function A3e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=Ge(XO),c=Ai(),u=pn(),f="yAxis",h=Ge(O=>vJ(O,e)),g=Ge(O=>o2e(O,e)),v=Ge(O=>xJ(O,f,e,c)),b=Ge(O=>ZZ(O,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||fM(i)||A.isValidElement(i)||b==null)){var O=a.current;if(O){var I=O.getCalculatedWidth();Math.round(h.width)!==Math.round(I)&&u(fze({id:e,width:I}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=MN(t,b3e),{id:P,scale:N}=b,D=MN(b,x3e);return A.createElement(wM,RN({},T,D,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Wt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))}var k3e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,angle:Nr.angle,axisLine:vl.axisLine,hide:!1,includeHidden:Nr.includeHidden,interval:Nr.interval,label:!1,minTickGap:Nr.minTickGap,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,tickLine:vl.tickLine,tickSize:vl.tickSize,type:Nr.type,width:Nr.width,yAxisId:0},C3e=t=>{var e=Xr(t,k3e);return A.createElement(A.Fragment,null,A.createElement(T3e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(A3e,e))},lE=A.memo(C3e,Lee);lE.displayName="YAxis";var I3e=(t,e)=>e,_M=me([I3e,Lt,WZ,Lr,zJ,$l,SOe,Sr],IOe),EM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Vee=Ha("mouseClick"),Bee=X0();Bee.startListening({actionCreator:Vee,effect:(t,e)=>{var n=t.payload,r=_M(e.getState(),EM(n));r?.activeIndex!=null&&e.dispatch(w2e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var jN=Ha("mouseMove"),Fee=X0(),Mx=null;Fee.startListening({actionCreator:jN,effect:(t,e)=>{var n=t.payload;Mx!==null&&cancelAnimationFrame(Mx);var r=EM(n);Mx=requestAnimationFrame(()=>{var i=e.getState(),a=tM(i,i.tooltip.settings.shared);if(a==="axis"){var s=_M(i,r);s?.activeIndex!=null?e.dispatch(CJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(kJ())}Mx=null})}});function P3e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var j9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Uee=Wi({name:"rootProps",initialState:j9,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:j9.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),N3e=Uee.reducer,{updateOptions:D3e}=Uee.actions,O3e=null,R3e={updatePolarOptions:(t,e)=>e.payload},$ee=Wi({name:"polarOptions",initialState:O3e,reducers:R3e}),{updatePolarOptions:M3e}=$ee.actions,j3e=$ee.reducer,qee=Ha("keyDown"),Gee=Ha("focus"),TM=X0();TM.startListening({actionCreator:qee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=nM(i,fg(n),ly(n),uy(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=$l(n);if(a==="Enter"){var u=rS(n,"axis","hover",String(i.index));e.dispatch(AN({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=d2e(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=rS(n,"axis","hover",String(v));e.dispatch(AN({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});TM.startListening({actionCreator:Gee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=rS(n,"axis","hover",String(a));e.dispatch(AN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ja=Ha("externalEvent"),Hee=X0(),ZC=new Map;Hee.startListening({actionCreator:ja,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=ZC.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:oOe(o),activeDataKey:oM(o),activeIndex:nf(o),activeLabel:BJ(o),activeTooltipIndex:nf(o),isTooltipActive:lOe(o)};n(c,r)}finally{ZC.delete(i)}});ZC.set(i,s)}}});var z3e=me([ug],t=>t.tooltipItemPayloads),L3e=me([z3e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),Kee=Ha("touchMove"),Wee=X0();Wee.startListening({actionCreator:Kee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=tM(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=_M(r,EM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(CJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(yQ),h=(o=u.getAttribute(bQ))!==null&&o!==void 0?o:void 0,g=dg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=L3e(r,f,h);e.dispatch(AJ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var V3e=BX({brush:Tze,cartesianAxis:hze,chartData:sRe,errorBars:M4e,graphicalItems:Cje,layout:YAe,legend:eCe,options:tRe,polarAxis:FMe,polarOptions:j3e,referenceElements:Oze,rootProps:N3e,tooltip:S2e,zIndex:$Oe}),B3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return xAe({reducer:V3e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Bee.middleware,Fee.middleware,TM.middleware,Hee.middleware,Wee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(tQ({type:"raf"}))},devTools:{serialize:{replacer:P3e},name:"recharts-".concat(n)}})};function Yee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ai(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=B3e(e,r));var s=$O;return A.createElement(sLe,{context:s,store:a.current},n)}function F3e(t){var{layout:e,margin:n}=t,r=pn(),i=Ai();return A.useEffect(()=>{i||(r(HAe(e)),r(GAe(n)))},[r,i,e,n]),null}var Xee=A.memo(F3e,SM);function Qee(t){var e=pn();return A.useEffect(()=>{e(D3e(t))},[e,t]),null}function z9(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=pn();return A.useLayoutEffect(()=>(r.current&&i(FOe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(UOe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function L9(t){var{children:e,isPanorama:n}=t,r=Ge(NOe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(z9,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(z9,{key:s,zIndex:s,isPanorama:n})))}var U3e=["children"];function $3e(t,e){if(t==null)return{};var n,r,i=q3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(null,arguments)}var G3e={width:"100%",height:"100%",display:"block"},H3e=A.forwardRef((t,e)=>{var n=EQ(),r=TQ(),i=LQ();if(!Io(n)||!Io(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(aX,dS({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:G3e,ref:e}),a)}),K3e=t=>{var{children:e}=t,n=Ge(P_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(aX,{width:r,height:i,x:s,y:a},e)},V9=A.forwardRef((t,e)=>{var{children:n}=t,r=$3e(t,U3e),i=Ai();return i?A.createElement(K3e,null,A.createElement(L9,{isPanorama:!0},n)):A.createElement(H3e,dS({ref:e},r),A.createElement(L9,{isPanorama:!1},n))});function W3e(){var t=pn(),[e,n]=A.useState(null),r=Ge(fke);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;pt(a)&&a!==r&&t(WAe(a))}},[e,t,r]),n}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){X3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X3e(t,e,n){return(e=Q3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q3e(t){var e=Z3e(t,"string");return typeof e=="symbol"?e:e+""}function Z3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yc(){return Yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yc.apply(null,arguments)}var J3e=()=>(gRe(),null);function fS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var e5e=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:fS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:fS((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var x=b[0];if(x!=null){var{width:w,height:S}=x.contentRect;o(w,S)}},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(J0,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Yc({ref:c},t)))}),t5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:fS(n),containerHeight:fS(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(J0,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Yc({ref:o},t)))}),n5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(J0,{width:n,height:r}),A.createElement("div",Yc({ref:e},t)))}),r5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?A.createElement(t5e,Yc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?A.createElement(n5e,Yc({},t,{width:n,height:r,ref:e})):A.createElement(A.Fragment,null,A.createElement(J0,{width:n,height:r}),A.createElement("div",Yc({ref:e},t)))});function i5e(t){return t?e5e:r5e}var a5e=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:P=!0}=t,N=A.useRef(null),D=pn(),[O,I]=A.useState(null),[C,R]=A.useState(null),M=W3e(),V=QO(),z=V?.width>0?V.width:S,L=V?.height>0?V.height:i,W=A.useCallback(se=>{M(se),typeof e=="function"&&e(se),I(se),R(se),se!=null&&(N.current=se)},[M,e,I,R]),Q=A.useCallback(se=>{D(Vee(se)),D(ja({handler:a,reactEvent:se}))},[D,a]),G=A.useCallback(se=>{D(jN(se)),D(ja({handler:u,reactEvent:se}))},[D,u]),Y=A.useCallback(se=>{D(kJ()),D(ja({handler:f,reactEvent:se}))},[D,f]),J=A.useCallback(se=>{D(jN(se)),D(ja({handler:h,reactEvent:se}))},[D,h]),ee=A.useCallback(()=>{D(Gee())},[D]),X=A.useCallback(se=>{D(qee(se.key))},[D]),U=A.useCallback(se=>{D(ja({handler:s,reactEvent:se}))},[D,s]),Z=A.useCallback(se=>{D(ja({handler:o,reactEvent:se}))},[D,o]),te=A.useCallback(se=>{D(ja({handler:c,reactEvent:se}))},[D,c]),K=A.useCallback(se=>{D(ja({handler:g,reactEvent:se}))},[D,g]),ue=A.useCallback(se=>{D(ja({handler:x,reactEvent:se}))},[D,x]),ie=A.useCallback(se=>{P&&D(Kee(se)),D(ja({handler:b,reactEvent:se}))},[D,P,b]),oe=A.useCallback(se=>{D(ja({handler:v,reactEvent:se}))},[D,v]),Se=i5e(T);return A.createElement(KJ.Provider,{value:O},A.createElement(Z_e.Provider,{value:C},A.createElement(Se,{width:z??w?.width,height:L??w?.height,className:Wt("recharts-wrapper",r),style:Y3e({position:"relative",cursor:"default",width:z,height:L},w),onClick:Q,onContextMenu:U,onDoubleClick:Z,onFocus:ee,onKeyDown:X,onMouseDown:te,onMouseEnter:G,onMouseLeave:Y,onMouseMove:J,onMouseUp:K,onTouchEnd:oe,onTouchMove:ie,onTouchStart:ue,ref:W},A.createElement(J3e,null),n)))}),s5e=["width","height","responsive","children","className","style","compact","title","desc"];function o5e(t,e){if(t==null)return{};var n,r,i=l5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zee=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=o5e(t,s5e),g=Ps(h);return c?A.createElement(A.Fragment,null,A.createElement(J0,{width:n,height:r}),A.createElement(V9,{otherAttributes:g,title:u,desc:f},a)):A.createElement(a5e,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(V9,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(Rze,null,a)))});function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zN.apply(null,arguments)}var c5e={top:5,right:5,bottom:5,left:5},u5e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:c5e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},d5e=A.forwardRef(function(e,n){var r,i=Xr(e.categoricalChartProps,u5e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(Yee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(Aee,{chartData:u.data}),A.createElement(Xee,{layout:i.layout,margin:i.margin}),A.createElement(Qee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(Zee,zN({},i,{ref:n})))}),f5e=["axis","item"],AM=A.forwardRef((t,e)=>A.createElement(d5e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:f5e,tooltipPayloadSearcher:WJ,categoricalChartProps:t,ref:e}));function h5e(t){var e=pn();return A.useEffect(()=>{e(M3e(t))},[e,t]),null}var p5e=["layout"];function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LN.apply(null,arguments)}function g5e(t,e){if(t==null)return{};var n,r,i=m5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function m5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var v5e={top:5,right:5,bottom:5,left:5},Jee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:v5e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},y5e=A.forwardRef(function(e,n){var r,i=Xr(e.categoricalChartProps,Jee),{layout:a}=i,s=g5e(i,p5e),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(Yee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(Aee,{chartData:i.data}),A.createElement(Xee,{layout:a,margin:i.margin}),A.createElement(Qee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(h5e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Zee,LN({},s,{ref:n})))});function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(r){b5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b5e(t,e,n){return(e=x5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x5e(t){var e=w5e(t,"string");return typeof e=="symbol"?e:e+""}function w5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S5e=["item"],_5e=U9(U9({},Jee),{},{layout:"centric",startAngle:0,endAngle:360}),E5e=A.forwardRef((t,e)=>{var n=Xr(t,_5e);return A.createElement(y5e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:S5e,tooltipPayloadSearcher:WJ,categoricalChartProps:n,ref:e})});const T5e=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],A5e=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function k5e(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const kM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),hS=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),ete=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:hS(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:hS(i)})]})]})},C5e=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},I5e=()=>{const t=Xa(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=mt(),s=mt(b=>b.fetchMonthData),o=A.useMemo(()=>k5e(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=DO(r,a),x=mt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const P=x.incomeSources[T]!==void 0,N=x.loadedTransactionMonths.includes(T);return!P||!N});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(P){console.error(`Failed to fetch data for month ${T}:`,P),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=c_e(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(Sl,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:T5e.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[A5e.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(P5e,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(N5e,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(D5e,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(O5e,{data:g.data})]})]})},P5e=({items:t,total:e})=>t.length===0?m.jsx(cE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(N_,{width:"100%",height:280,children:m.jsxs(E5e,{children:[m.jsx(See,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>m.jsx(fy,{fill:n.color},r))}),m.jsx(tE,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),m.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[hS(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-0",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:kM(e)})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:hS(n.amount)})]})]},n.categoryId)})})]})]}),N5e=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(cE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(AM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{cursor:!1,content:a=>m.jsx(ete,{...a,colorMap:n,nameMap:r})}),m.jsx(bM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${kM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(f0,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(tte,{keys:e,colorMap:n,nameMap:r})]}),D5e=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(cE,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(AM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{cursor:!1,content:a=>m.jsx(ete,{...a,colorMap:n,nameMap:i})}),m.jsx(bM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${kM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(f0,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(tte,{keys:e,colorMap:n,nameMap:i})]})},O5e=({data:t})=>{if(t.length===0)return m.jsx(cE,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(AM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{content:C5e,cursor:!1}),m.jsx(f0,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(f0,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},tte=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),cE=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(Aw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),tl=({children:t})=>m.jsx(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),R5e=()=>{const t=Os();return m.jsx(lr,{mode:"wait",children:m.jsxs(Yoe,{location:t,children:[m.jsx(io,{path:"/",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(ZSe,{})})})}),m.jsx(io,{path:"/envelope/:id",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(i_e,{})})})}),m.jsx(io,{path:"/add-envelope",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(g_e,{})})})}),m.jsx(io,{path:"/add-transaction",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(tX,{})})})}),m.jsx(io,{path:"/transactions",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(U_e,{})})})}),m.jsx(io,{path:"/settings",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(f_e,{})})})}),m.jsx(io,{path:"/settings/categories",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(p_e,{})})})}),m.jsx(io,{path:"/verify-email",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(iH,{})})})}),m.jsx(io,{path:"/analytics",element:m.jsx(tl,{children:m.jsx(aa,{children:m.jsx(I5e,{})})})})]},t.pathname)})},M5e=()=>{const t=Xa(),{envelopes:e,appSettings:n}=mt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=_t(rt,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=tu(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await ca(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await ca(a);const f=await VP(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null},VN=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:jm,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:ep,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:gd,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:of,color:"pink",encouragement:"You did it! Your budget is set up!"}],jx=VN.length,$9={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function j5e(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const z5e=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(bt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},L5e=()=>{const t=mt(C=>C.guidedTutorialStep),e=mt(C=>C.skipGuidedTutorial),n=mt(C=>C.advanceGuidedTutorial),r=mt(C=>C.incomeSources),i=mt(C=>C.currentMonth),a=mt(C=>C.envelopes),s=mt(C=>C.allocations),o=A.useMemo(()=>a.filter(C=>C.isPiggybank),[a]),c=j5e(),[u,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,S=w!==null&&w>=0&&w<jx,T=S?VN[w]:null,P=!c&&!h&&!v,N=A.useCallback(()=>{if(!T){f(null);return}const C=document.getElementById(T.targetId);f(C?C.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{N();const C=setInterval(N,500);return window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{clearInterval(C),window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[N]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!S||!T)return null;const D=$9[T.color]||$9.blue,O=T.icon,I=(w+1)/jx*100;return m.jsxs(m.Fragment,{children:[P&&m.jsx(z5e,{targetRect:u,visible:!0}),m.jsxs(lr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${D.bg} border ${D.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(I),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${D.progressBg}`,initial:{width:`${w/jx*100}%`},animate:{width:`${I}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:VN.map((C,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?D.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},C.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${D.bg} p-2 rounded-xl border ${D.border} flex-shrink-0`,children:m.jsx(O,{className:`w-6 h-6 ${D.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(vq,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(bt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(bt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(so,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<jx-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(I),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function V5e(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=mt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=nn(),{showToast:b}=gu();if(A.useEffect(()=>{const S=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(S)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),P=T.get("mode"),N=T.get("oobCode");if(P==="resetPassword"&&N){$.log(" Processing password reset from URL"),a(N);return}if(P==="verifyEmail"&&N){$.log(" Processing email verification from URL");try{await Dae(gi,N),$.log(" Email verification successful");const D=window.location.pathname;if(window.history.replaceState({},document.title,D),gi.currentUser){await gi.currentUser.reload(),$.log(" User reloaded after verification");const O=await Xh(()=>Promise.resolve().then(()=>HY),void 0).then(I=>I.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await O.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await gi.signOut()},2e3)}catch(D){$.error(" Email verification failed:",D),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const S=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),P=()=>{const N=s?.theme??"system",D=T.matches;N==="dark"||N==="system"&&D?S.classList.add("dark"):S.classList.remove("dark")};if(P(),s?.theme==="system")return T.addEventListener("change",P),()=>T.removeEventListener("change",P)},[s]),A.useEffect(()=>{const S=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":S.style.fontSize="75%";break;case"small":S.style.fontSize="87.5%";break;case"large":S.style.fontSize="112.5%";break;case"extra-large":S.style.fontSize="125%";break;default:S.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(aH,{message:"Initializing Personal Budget..."}),m.jsx(ex,{})]});if(i)return m.jsxs(aa,{children:[m.jsx(Qpe,{oobCode:i,onSuccess:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)},onCancel:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)}}),m.jsx(ex,{})]});if(!c)return v?m.jsxs(aa,{children:[m.jsx(iH,{}),m.jsx(ex,{})]}):m.jsxs(aa,{children:[m.jsx(Xpe,{}),m.jsx(ex,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(aa,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(xle,{children:[m.jsx(M5e,{}),m.jsx(R5e,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(tX,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(L5e,{}),!o&&m.jsx(Wye,{onAddTransaction:()=>r(!0)})]})]})]})}Gne({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});Une.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(V5e,{})}));export{ht as T,rt as a,Zhe as b,m5 as c,_t as d,Kr as e,sa as f,OA as g,ca as h,$ as l,tu as o,Vi as q,la as s,rd as t,lo as u,ew as w};
