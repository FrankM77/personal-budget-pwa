(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function P3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ny={exports:{}},Jf={};var tA;function V3(){if(tA)return Jf;tA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Jf.Fragment=e,Jf.jsx=n,Jf.jsxs=n,Jf}var nA;function j3(){return nA||(nA=1,Ny.exports=V3()),Ny.exports}var x=j3(),My={exports:{}},nt={};var rA;function z3(){if(rA)return nt;rA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function A(B,K,ie){this.props=B,this.context=K,this.refs=E,this.updater=ie||S}A.prototype.isReactComponent={},A.prototype.setState=function(B,K){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,K,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=A.prototype;function I(B,K,ie){this.props=B,this.context=K,this.refs=E,this.updater=ie||S}var V=I.prototype=new D;V.constructor=I,w(V,A.prototype),V.isPureReactComponent=!0;var z=Array.isArray;function O(){}var T={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(B,K,ie){var re=ie.ref;return{$$typeof:t,type:B,key:K,ref:re!==void 0?re:null,props:ie}}function j(B,K){return k(B.type,K,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function U(B){var K={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return K[ie]})}var P=/\/+/g;function X(B,K){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):K.toString(36)}function $(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(O,O):(B.status="pending",B.then(function(K){B.status==="pending"&&(B.status="fulfilled",B.value=K)},function(K){B.status==="pending"&&(B.status="rejected",B.reason=K)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function H(B,K,ie,re,fe){var ue=typeof B;(ue==="undefined"||ue==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(ue){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case t:case e:ge=!0;break;case h:return ge=B._init,H(ge(B._payload),K,ie,re,fe)}}if(ge)return fe=fe(B),ge=re===""?"."+X(B,0):re,z(fe)?(ie="",ge!=null&&(ie=ge.replace(P,"$&/")+"/"),H(fe,K,ie,"",function(Fe){return Fe})):fe!=null&&(L(fe)&&(fe=j(fe,ie+(fe.key==null||B&&B.key===fe.key?"":(""+fe.key).replace(P,"$&/")+"/")+ge)),K.push(fe)),1;ge=0;var Te=re===""?".":re+":";if(z(B))for(var Ce=0;Ce<B.length;Ce++)re=B[Ce],ue=Te+X(re,Ce),ge+=H(re,K,ie,ue,fe);else if(Ce=b(B),typeof Ce=="function")for(B=Ce.call(B),Ce=0;!(re=B.next()).done;)re=re.value,ue=Te+X(re,Ce++),ge+=H(re,K,ie,ue,fe);else if(ue==="object"){if(typeof B.then=="function")return H($(B),K,ie,re,fe);throw K=String(B),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Y(B,K,ie){if(B==null)return B;var re=[],fe=0;return H(B,re,"","",function(ue){return K.call(ie,ue,fe++)}),re}function te(B){if(B._status===-1){var K=B._result;K=K(),K.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=K)}if(B._status===1)return B._result.default;throw B._result}var le=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Z={map:Y,forEach:function(B,K,ie){Y(B,function(){K.apply(this,arguments)},ie)},count:function(B){var K=0;return Y(B,function(){K++}),K},toArray:function(B){return Y(B,function(K){return K})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return nt.Activity=g,nt.Children=Z,nt.Component=A,nt.Fragment=n,nt.Profiler=i,nt.PureComponent=I,nt.StrictMode=r,nt.Suspense=u,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,nt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return T.H.useMemoCache(B)}},nt.cache=function(B){return function(){return B.apply(null,arguments)}},nt.cacheSignal=function(){return null},nt.cloneElement=function(B,K,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var re=w({},B.props),fe=B.key;if(K!=null)for(ue in K.key!==void 0&&(fe=""+K.key),K)!C.call(K,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&K.ref===void 0||(re[ue]=K[ue]);var ue=arguments.length-2;if(ue===1)re.children=ie;else if(1<ue){for(var ge=Array(ue),Te=0;Te<ue;Te++)ge[Te]=arguments[Te+2];re.children=ge}return k(B.type,fe,re)},nt.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},nt.createElement=function(B,K,ie){var re,fe={},ue=null;if(K!=null)for(re in K.key!==void 0&&(ue=""+K.key),K)C.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=K[re]);var ge=arguments.length-2;if(ge===1)fe.children=ie;else if(1<ge){for(var Te=Array(ge),Ce=0;Ce<ge;Ce++)Te[Ce]=arguments[Ce+2];fe.children=Te}if(B&&B.defaultProps)for(re in ge=B.defaultProps,ge)fe[re]===void 0&&(fe[re]=ge[re]);return k(B,ue,fe)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(B){return{$$typeof:c,render:B}},nt.isValidElement=L,nt.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:te}},nt.memo=function(B,K){return{$$typeof:d,type:B,compare:K===void 0?null:K}},nt.startTransition=function(B){var K=T.T,ie={};T.T=ie;try{var re=B(),fe=T.S;fe!==null&&fe(ie,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(O,le)}catch(ue){le(ue)}finally{K!==null&&ie.types!==null&&(K.types=ie.types),T.T=K}},nt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},nt.use=function(B){return T.H.use(B)},nt.useActionState=function(B,K,ie){return T.H.useActionState(B,K,ie)},nt.useCallback=function(B,K){return T.H.useCallback(B,K)},nt.useContext=function(B){return T.H.useContext(B)},nt.useDebugValue=function(){},nt.useDeferredValue=function(B,K){return T.H.useDeferredValue(B,K)},nt.useEffect=function(B,K){return T.H.useEffect(B,K)},nt.useEffectEvent=function(B){return T.H.useEffectEvent(B)},nt.useId=function(){return T.H.useId()},nt.useImperativeHandle=function(B,K,ie){return T.H.useImperativeHandle(B,K,ie)},nt.useInsertionEffect=function(B,K){return T.H.useInsertionEffect(B,K)},nt.useLayoutEffect=function(B,K){return T.H.useLayoutEffect(B,K)},nt.useMemo=function(B,K){return T.H.useMemo(B,K)},nt.useOptimistic=function(B,K){return T.H.useOptimistic(B,K)},nt.useReducer=function(B,K,ie){return T.H.useReducer(B,K,ie)},nt.useRef=function(B){return T.H.useRef(B)},nt.useState=function(B){return T.H.useState(B)},nt.useSyncExternalStore=function(B,K,ie){return T.H.useSyncExternalStore(B,K,ie)},nt.useTransition=function(){return T.H.useTransition()},nt.version="19.2.0",nt}var iA;function lx(){return iA||(iA=1,My.exports=z3()),My.exports}var q=lx();const rg=P3(q);var Oy={exports:{}},ed={},Py={exports:{}},Vy={};var aA;function L3(){return aA||(aA=1,(function(t){function e(H,Y){var te=H.length;H.push(Y);e:for(;0<te;){var le=te-1>>>1,Z=H[le];if(0<i(Z,Y))H[le]=Y,H[te]=Z,te=le;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],te=H.pop();if(te!==Y){H[0]=te;e:for(var le=0,Z=H.length,B=Z>>>1;le<B;){var K=2*(le+1)-1,ie=H[K],re=K+1,fe=H[re];if(0>i(ie,te))re<Z&&0>i(fe,ie)?(H[le]=fe,H[re]=te,le=re):(H[le]=ie,H[K]=te,le=K);else if(re<Z&&0>i(fe,te))H[le]=fe,H[re]=te,le=re;else break e}}return Y}function i(H,Y){var te=H.sortIndex-Y.sortIndex;return te!==0?te:H.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,m=3,b=!1,S=!1,w=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function V(H){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=H)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function z(H){if(w=!1,V(H),!S)if(n(u)!==null)S=!0,O||(O=!0,U());else{var Y=n(d);Y!==null&&$(z,Y.startTime-H)}}var O=!1,T=-1,C=5,k=-1;function j(){return E?!0:!(t.unstable_now()-k<C)}function L(){if(E=!1,O){var H=t.unstable_now();k=H;var Y=!0;try{e:{S=!1,w&&(w=!1,D(T),T=-1),b=!0;var te=m;try{t:{for(V(H),g=n(u);g!==null&&!(g.expirationTime>H&&j());){var le=g.callback;if(typeof le=="function"){g.callback=null,m=g.priorityLevel;var Z=le(g.expirationTime<=H);if(H=t.unstable_now(),typeof Z=="function"){g.callback=Z,V(H),Y=!0;break t}g===n(u)&&r(u),V(H)}else r(u);g=n(u)}if(g!==null)Y=!0;else{var B=n(d);B!==null&&$(z,B.startTime-H),Y=!1}}break e}finally{g=null,m=te,b=!1}Y=void 0}}finally{Y?U():O=!1}}}var U;if(typeof I=="function")U=function(){I(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,X=P.port2;P.port1.onmessage=L,U=function(){X.postMessage(null)}}else U=function(){A(L,0)};function $(H,Y){T=A(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var te=m;m=Y;try{return H()}finally{m=te}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=m;m=H;try{return Y()}finally{m=te}},t.unstable_scheduleCallback=function(H,Y,te){var le=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?le+te:le):te=le,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=te+Z,H={id:h++,callback:Y,priorityLevel:H,startTime:te,expirationTime:Z,sortIndex:-1},te>le?(H.sortIndex=te,e(d,H),n(u)===null&&H===n(d)&&(w?(D(T),T=-1):w=!0,$(z,te-le))):(H.sortIndex=Z,e(u,H),S||b||(S=!0,O||(O=!0,U()))),H},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(H){var Y=m;return function(){var te=m;m=Y;try{return H.apply(this,arguments)}finally{m=te}}}})(Vy)),Vy}var sA;function B3(){return sA||(sA=1,Py.exports=L3()),Py.exports}var jy={exports:{}},hr={};var oA;function U3(){if(oA)return hr;oA=1;var t=lx();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},hr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},hr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},hr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},hr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},hr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},hr.requestFormReset=function(u){r.d.r(u)},hr.unstable_batchedUpdates=function(u,d){return u(d)},hr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},hr.useFormStatus=function(){return o.H.useHostTransitionStatus()},hr.version="19.2.0",hr}var lA;function F3(){if(lA)return jy.exports;lA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jy.exports=U3(),jy.exports}var cA;function G3(){if(cA)return ed;cA=1;var t=B3(),e=lx(),n=F3();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,p=l;;){var y=f.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===f)return u(y),s;if(_===p)return u(y),l;_=_.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=_;else{for(var N=!1,F=y.child;F;){if(F===f){N=!0,f=y,p=_;break}if(F===p){N=!0,p=y,f=_;break}F=F.sibling}if(!N){for(F=_.child;F;){if(F===f){N=!0,f=_,p=y;break}if(F===p){N=!0,p=_,f=y;break}F=F.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case I:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case V:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return l=s.displayName||null,l!==null?l:X(s.type)||"Memo";case C:l=s._payload,s=s._init;try{return X(s(l))}catch{}}return null}var $=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},le=[],Z=-1;function B(s){return{current:s}}function K(s){0>Z||(s.current=le[Z],le[Z]=null,Z--)}function ie(s,l){Z++,le[Z]=s.current,s.current=l}var re=B(null),fe=B(null),ue=B(null),ge=B(null);function Te(s,l){switch(ie(ue,l),ie(fe,s),ie(re,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?ET(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=ET(l),s=TT(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(re),ie(re,s)}function Ce(){K(re),K(fe),K(ue)}function Fe(s){s.memoizedState!==null&&ie(ge,s);var l=re.current,f=TT(l,s.type);l!==f&&(ie(fe,s),ie(re,f))}function Se(s){fe.current===s&&(K(re),K(fe)),ge.current===s&&(K(ge),Wf._currentValue=te)}var De,ot;function Pe(s){if(De===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);De=l&&l[1]||"",ot=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+De+s+ot}var Ge=!1;function Ye(s,l){if(!s||Ge)return"";Ge=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(he){var ce=he}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(he){ce=he}s.call(ye.prototype)}}else{try{throw Error()}catch(he){ce=he}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=p.DetermineComponentFrameRoot(),N=_[0],F=_[1];if(N&&F){var W=N.split(`
`),oe=F.split(`
`);for(y=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;y<oe.length&&!oe[y].includes("DetermineComponentFrameRoot");)y++;if(p===W.length||y===oe.length)for(p=W.length-1,y=oe.length-1;1<=p&&0<=y&&W[p]!==oe[y];)y--;for(;1<=p&&0<=y;p--,y--)if(W[p]!==oe[y]){if(p!==1||y!==1)do if(p--,y--,0>y||W[p]!==oe[y]){var pe=`
`+W[p].replace(" at new "," at ");return s.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",s.displayName)),pe}while(1<=p&&0<=y);break}}}finally{Ge=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Pe(f):""}function gt(s,l){switch(s.tag){case 26:case 27:case 5:return Pe(s.type);case 16:return Pe("Lazy");case 13:return s.child!==l&&l!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return Ye(s.type,!1);case 11:return Ye(s.type.render,!1);case 1:return Ye(s.type,!0);case 31:return Pe("Activity");default:return""}}function ft(s){try{var l="",f=null;do l+=gt(s,f),f=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ne=Object.prototype.hasOwnProperty,qe=t.unstable_scheduleCallback,It=t.unstable_cancelCallback,Jt=t.unstable_shouldYield,rn=t.unstable_requestPaint,lt=t.unstable_now,ct=t.unstable_getCurrentPriorityLevel,Qn=t.unstable_ImmediatePriority,Zn=t.unstable_UserBlockingPriority,kr=t.unstable_NormalPriority,Vs=t.unstable_LowPriority,Ya=t.unstable_IdlePriority,Jn=t.log,na=t.unstable_setDisableYieldValue,Sr=null,un=null;function Hn(s){if(typeof Jn=="function"&&na(s),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Sr,s)}catch{}}var $t=Math.clz32?Math.clz32:ia,js=Math.log,ra=Math.LN2;function ia(s){return s>>>=0,s===0?32:31-(js(s)/ra|0)|0}var dt=256,Yt=262144,Ee=4194304;function Ve(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ft(s,l,f){var p=s.pendingLanes;if(p===0)return 0;var y=0,_=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var F=p&134217727;return F!==0?(p=F&~_,p!==0?y=Ve(p):(N&=F,N!==0?y=Ve(N):f||(f=F&~s,f!==0&&(y=Ve(f))))):(F=p&~_,F!==0?y=Ve(F):N!==0?y=Ve(N):f||(f=p&~s,f!==0&&(y=Ve(f)))),y===0?0:l!==0&&l!==y&&(l&_)===0&&(_=y&-y,f=l&-l,_>=f||_===32&&(f&4194048)!==0)?l:y}function mt(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Kr(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aa(){var s=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),s}function jn(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function tt(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function dr(s,l,f,p,y,_){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,W=s.expirationTimes,oe=s.hiddenUpdates;for(f=N&~f;0<f;){var pe=31-$t(f),ye=1<<pe;F[pe]=0,W[pe]=-1;var ce=oe[pe];if(ce!==null)for(oe[pe]=null,pe=0;pe<ce.length;pe++){var he=ce[pe];he!==null&&(he.lane&=-536870913)}f&=~ye}p!==0&&fn(s,p,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(N&~l))}function fn(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-$t(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function $n(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var p=31-$t(f),y=1<<p;y&l|s[p]&l&&(s[p]|=l),f&=~y}}function ui(s,l){var f=l&-l;return f=(f&42)!==0?1:er(f),(f&(s.suspendedLanes|l))!==0?0:f}function er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fi(){var s=Y.p;return s!==0?s:(s=window.event,s===void 0?32:XT(s.type))}function Yn(s,l){var f=Y.p;try{return Y.p=s,l()}finally{Y.p=f}}var Nr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Nr,dn="__reactProps$"+Nr,wr="__reactContainer$"+Nr,ac="__reactEvents$"+Nr,zv="__reactListeners$"+Nr,Vh="__reactHandles$"+Nr,jh="__reactResources$"+Nr,sa="__reactMarker$"+Nr;function sc(s){delete s[Wt],delete s[dn],delete s[ac],delete s[zv],delete s[Vh]}function oa(s){var l=s[Wt];if(l)return l;for(var f=s.parentNode;f;){if(l=f[wr]||f[Wt]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=NT(s);s!==null;){if(f=s[Wt])return f;s=NT(s)}return l}s=f,f=s.parentNode}return null}function di(s){if(s=s[Wt]||s[wr]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Qr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function la(s){var l=s[jh];return l||(l=s[jh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function En(s){s[sa]=!0}var tf=new Set,nf={};function ca(s,l){ua(s,l),ua(s+"Capture",l)}function ua(s,l){for(nf[s]=l,s=0;s<l.length;s++)tf.add(l[s])}var rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),af={},sf={};function zh(s){return Ne.call(sf,s)?!0:Ne.call(af,s)?!1:rf.test(s)?sf[s]=!0:(af[s]=!0,!1)}function oc(s,l,f){if(zh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Zr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Tn(s,l,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+p)}}function Xn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function zs(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function of(s,l,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,_=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(N){f=""+N,_.call(this,N)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Nt(s){if(!s._valueTracker){var l=zs(s)?"checked":"value";s._valueTracker=of(s,l,""+s[l])}}function nl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return s&&(p=zs(s)?s.checked?"true":"false":s.value),s=p,s!==f?(l.setValue(s),!0):!1}function fa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rl=/[\n"\\]/g;function Mr(s){return s.replace(rl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function lc(s,l,f,p,y,_,N,F){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Xn(l)):s.value!==""+Xn(l)&&(s.value=""+Xn(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?lf(s,N,Xn(l)):f!=null?lf(s,N,Xn(f)):p!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+Xn(F):s.removeAttribute("name")}function Lh(s,l,f,p,y,_,N,F){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),l!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){Nt(s);return}f=f!=null?""+Xn(f):"",l=l!=null?""+Xn(l):f,F||l===s.value||(s.value=l),s.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=F?s.checked:!!p,s.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),Nt(s)}function lf(s,l,f){l==="number"&&fa(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Ls(s,l,f,p){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&p&&(s[f].defaultSelected=!0)}else{for(f=""+Xn(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Bh(s,l,f){if(l!=null&&(l=""+Xn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Xn(f):""}function Bs(s,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if($(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=Xn(l),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),Nt(s)}function Or(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Uh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cf(s,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,f):typeof f!="number"||f===0||Uh.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function uf(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&f[y]!==p&&cf(s,y,p)}else for(var _ in l)l.hasOwnProperty(_)&&cf(s,_,l[_])}function cc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uc(s){return Us.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vi(){}var ff=null;function hi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fs=null,da=null;function il(s){var l=di(s);if(l&&(s=l.stateNode)){var f=s[dn]||null;e:switch(s=l.stateNode,l.type){case"input":if(lc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Mr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==s&&p.form===s.form){var y=p[dn]||null;if(!y)throw Error(r(90));lc(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===s.form&&nl(p)}break e;case"textarea":Bh(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Ls(s,!!f.multiple,l,!1)}}}var fc=!1;function Gs(s,l,f){if(fc)return s(l,f);fc=!0;try{var p=s(l);return p}finally{if(fc=!1,(Fs!==null||da!==null)&&(Pp(),Fs&&(l=Fs,s=da,da=Fs=null,il(l),s)))for(l=0;l<s.length;l++)il(s[l])}}function ji(s,l){var f=s.stateNode;if(f===null)return null;var p=f[dn]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),al=!1;if(pi)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){al=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{al=!1}var ha=null,df=null,sl=null;function hf(){if(sl)return sl;var s,l=df,f=l.length,p,y="value"in ha?ha.value:ha.textContent,_=y.length;for(s=0;s<f&&l[s]===y[s];s++);var N=f-s;for(p=1;p<=N&&l[f-p]===y[_-p];p++);return sl=y.slice(s,1<p?1-p:void 0)}function ol(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Xa(){return!0}function zi(){return!1}function tr(s){function l(f,p,y,_,N){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=N,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Xa:zi,this.isPropagationStopped=zi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),l}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=tr(Wa),qs=g({},Wa,{view:0,detail:0}),pf=tr(qs),Hs,dc,ga,hc=g({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ga&&(ga&&s.type==="mousemove"?(Hs=s.screenX-ga.screenX,dc=s.screenY-ga.screenY):dc=Hs=0,ga=s),Hs)},movementY:function(s){return"movementY"in s?s.movementY:dc}}),gf=tr(hc),ll=g({},hc,{dataTransfer:0}),Gh=tr(ll),qh=g({},qs,{relatedTarget:0}),cl=tr(qh),mf=g({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Hh=tr(mf),pc=g({},Wa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$h=tr(pc),Yh=g({},Wa,{data:0}),ma=tr(Yh),Xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Kh[s])?!!l[s]:!1}function $s(){return Qh}var Er=g({},qs,{key:function(s){if(s.key){var l=Xh[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ol(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Wh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(s){return s.type==="keypress"?ol(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ol(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Zh=tr(Er),Jh=g({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ka=tr(Jh),v=g({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),R=tr(v),M=g({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=tr(M),ae=g({},hc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),de=tr(ae),Ae=g({},Wa,{newState:0,oldState:0}),it=tr(Ae),yn=[9,13,27,32],Rt=pi&&"CompositionEvent"in window,en=null;pi&&"documentMode"in document&&(en=document.documentMode);var gi=pi&&"TextEvent"in window&&!en,va=pi&&(!Rt||en&&8<en&&11>=en),Li=" ",Bi=!1;function ul(s,l){switch(s){case"keyup":return yn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mc=!1;function aP(s,l){switch(s){case"compositionend":return gc(l);case"keypress":return l.which!==32?null:(Bi=!0,Li);case"textInput":return s=l.data,s===Li&&Bi?null:s;default:return null}}function sP(s,l){if(mc)return s==="compositionend"||!Rt&&ul(s,l)?(s=hf(),sl=df=ha=null,mc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return va&&l.locale!=="ko"?null:l.data;default:return null}}var oP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!oP[s.type]:l==="textarea"}function VS(s,l,f,p){Fs?da?da.push(p):da=[p]:Fs=p,l=Fp(l,"onChange"),0<l.length&&(f=new pa("onChange","change",null,f,p),s.push({event:f,listeners:l}))}var vf=null,yf=null;function lP(s){yT(s,0)}function ep(s){var l=Qr(s);if(nl(l))return s}function jS(s,l){if(s==="change")return l}var zS=!1;if(pi){var Lv;if(pi){var Bv="oninput"in document;if(!Bv){var LS=document.createElement("div");LS.setAttribute("oninput","return;"),Bv=typeof LS.oninput=="function"}Lv=Bv}else Lv=!1;zS=Lv&&(!document.documentMode||9<document.documentMode)}function BS(){vf&&(vf.detachEvent("onpropertychange",US),yf=vf=null)}function US(s){if(s.propertyName==="value"&&ep(yf)){var l=[];VS(l,yf,s,hi(s)),Gs(lP,l)}}function cP(s,l,f){s==="focusin"?(BS(),vf=l,yf=f,vf.attachEvent("onpropertychange",US)):s==="focusout"&&BS()}function uP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ep(yf)}function fP(s,l){if(s==="click")return ep(l)}function dP(s,l){if(s==="input"||s==="change")return ep(l)}function hP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Jr=typeof Object.is=="function"?Object.is:hP;function bf(s,l){if(Jr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!Ne.call(l,y)||!Jr(s[y],l[y]))return!1}return!0}function FS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function GS(s,l){var f=FS(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=l&&p>=l)return{node:f,offset:l-s};s=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=FS(f)}}function qS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?qS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function HS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=fa(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=fa(s.document)}return l}function Uv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var pP=pi&&"documentMode"in document&&11>=document.documentMode,vc=null,Fv=null,xf=null,Gv=!1;function $S(s,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Gv||vc==null||vc!==fa(p)||(p=vc,"selectionStart"in p&&Uv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),xf&&bf(xf,p)||(xf=p,p=Fp(Fv,"onSelect"),0<p.length&&(l=new pa("onSelect","select",null,l,f),s.push({event:l,listeners:p}),l.target=vc)))}function fl(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var yc={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},qv={},YS={};pi&&(YS=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function dl(s){if(qv[s])return qv[s];if(!yc[s])return s;var l=yc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in YS)return qv[s]=l[f];return s}var XS=dl("animationend"),WS=dl("animationiteration"),KS=dl("animationstart"),gP=dl("transitionrun"),mP=dl("transitionstart"),vP=dl("transitioncancel"),QS=dl("transitionend"),ZS=new Map,Hv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hv.push("scrollEnd");function Ui(s,l){ZS.set(s,l),ca(l,[s])}var tp=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},mi=[],bc=0,$v=0;function np(){for(var s=bc,l=$v=bc=0;l<s;){var f=mi[l];mi[l++]=null;var p=mi[l];mi[l++]=null;var y=mi[l];mi[l++]=null;var _=mi[l];if(mi[l++]=null,p!==null&&y!==null){var N=p.pending;N===null?y.next=y:(y.next=N.next,N.next=y),p.pending=y}_!==0&&JS(f,y,_)}}function rp(s,l,f,p){mi[bc++]=s,mi[bc++]=l,mi[bc++]=f,mi[bc++]=p,$v|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function Yv(s,l,f,p){return rp(s,l,f,p),ip(s)}function hl(s,l){return rp(s,null,null,l),ip(s)}function JS(s,l,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var y=!1,_=s.return;_!==null;)_.childLanes|=f,p=_.alternate,p!==null&&(p.childLanes|=f),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&l!==null&&(y=31-$t(f),s=_.hiddenUpdates,p=s[y],p===null?s[y]=[l]:p.push(l),l.lane=f|536870912),_):null}function ip(s){if(50<Ff)throw Ff=0,ny=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var xc={};function yP(s,l,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(s,l,f,p){return new yP(s,l,f,p)}function Xv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qa(s,l){var f=s.alternate;return f===null?(f=ei(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function ew(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ap(s,l,f,p,y,_){var N=0;if(p=s,typeof s=="function")Xv(s)&&(N=1);else if(typeof s=="string")N=w3(s,f,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ei(31,f,l,y),s.elementType=k,s.lanes=_,s;case w:return pl(f.children,y,_,l);case E:N=8,y|=24;break;case A:return s=ei(12,f,l,y|2),s.elementType=A,s.lanes=_,s;case z:return s=ei(13,f,l,y),s.elementType=z,s.lanes=_,s;case O:return s=ei(19,f,l,y),s.elementType=O,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:N=10;break e;case D:N=9;break e;case V:N=11;break e;case T:N=14;break e;case C:N=16,p=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=ei(N,f,l,y),l.elementType=s,l.type=p,l.lanes=_,l}function pl(s,l,f,p){return s=ei(7,s,p,l),s.lanes=f,s}function Wv(s,l,f){return s=ei(6,s,null,l),s.lanes=f,s}function tw(s){var l=ei(18,null,null,0);return l.stateNode=s,l}function Kv(s,l,f){return l=ei(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var nw=new WeakMap;function vi(s,l){if(typeof s=="object"&&s!==null){var f=nw.get(s);return f!==void 0?f:(l={value:s,source:l,stack:ft(l)},nw.set(s,l),l)}return{value:s,source:l,stack:ft(l)}}var _c=[],Sc=0,sp=null,_f=0,yi=[],bi=0,Ys=null,ya=1,ba="";function Za(s,l){_c[Sc++]=_f,_c[Sc++]=sp,sp=s,_f=l}function rw(s,l,f){yi[bi++]=ya,yi[bi++]=ba,yi[bi++]=Ys,Ys=s;var p=ya;s=ba;var y=32-$t(p)-1;p&=~(1<<y),f+=1;var _=32-$t(l)+y;if(30<_){var N=y-y%5;_=(p&(1<<N)-1).toString(32),p>>=N,y-=N,ya=1<<32-$t(l)+y|f<<y|p,ba=_+s}else ya=1<<_|f<<y|p,ba=s}function Qv(s){s.return!==null&&(Za(s,1),rw(s,1,0))}function Zv(s){for(;s===sp;)sp=_c[--Sc],_c[Sc]=null,_f=_c[--Sc],_c[Sc]=null;for(;s===Ys;)Ys=yi[--bi],yi[bi]=null,ba=yi[--bi],yi[bi]=null,ya=yi[--bi],yi[bi]=null}function iw(s,l){yi[bi++]=ya,yi[bi++]=ba,yi[bi++]=Ys,ya=l.id,ba=l.overflow,Ys=s}var nr=null,Kt=null,St=!1,Xs=null,xi=!1,Jv=Error(r(519));function Ws(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sf(vi(l,s)),Jv}function aw(s){var l=s.stateNode,f=s.type,p=s.memoizedProps;switch(l[Wt]=s,l[dn]=p,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<qf.length;f++)pt(qf[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Lh(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Bs(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||ST(l.textContent,f)?(p.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),p.onScroll!=null&&pt("scroll",l),p.onScrollEnd!=null&&pt("scrollend",l),p.onClick!=null&&(l.onclick=Vi),l=!0):l=!1,l||Ws(s,!0)}function sw(s){for(nr=s.return;nr;)switch(nr.tag){case 5:case 31:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:nr=nr.return}}function wc(s){if(s!==nr)return!1;if(!St)return sw(s),St=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||vy(s.type,s.memoizedProps)),f=!f),f&&Kt&&Ws(s),sw(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Kt=kT(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Kt=kT(s)}else l===27?(l=Kt,co(s.type)?(s=Sy,Sy=null,Kt=s):Kt=l):Kt=nr?Si(s.stateNode.nextSibling):null;return!0}function gl(){Kt=nr=null,St=!1}function e0(){var s=Xs;return s!==null&&(zr===null?zr=s:zr.push.apply(zr,s),Xs=null),s}function Sf(s){Xs===null?Xs=[s]:Xs.push(s)}var t0=B(null),ml=null,Ja=null;function Ks(s,l,f){ie(t0,l._currentValue),l._currentValue=f}function es(s){s._currentValue=t0.current,K(t0)}function n0(s,l,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===f)break;s=s.return}}function r0(s,l,f,p){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var N=y.child;_=_.firstContext;e:for(;_!==null;){var F=_;_=y;for(var W=0;W<l.length;W++)if(F.context===l[W]){_.lanes|=f,F=_.alternate,F!==null&&(F.lanes|=f),n0(_.return,f,s),p||(N=null);break e}_=F.next}}else if(y.tag===18){if(N=y.return,N===null)throw Error(r(341));N.lanes|=f,_=N.alternate,_!==null&&(_.lanes|=f),n0(N,f,s),N=null}else N=y.child;if(N!==null)N.return=y;else for(N=y;N!==null;){if(N===s){N=null;break}if(y=N.sibling,y!==null){y.return=N.return,N=y;break}N=N.return}y=N}}function Ec(s,l,f,p){s=null;for(var y=l,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var N=y.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var F=y.type;Jr(y.pendingProps.value,N.value)||(s!==null?s.push(F):s=[F])}}else if(y===ge.current){if(N=y.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Wf):s=[Wf])}y=y.return}s!==null&&r0(l,s,f,p),l.flags|=262144}function op(s){for(s=s.firstContext;s!==null;){if(!Jr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vl(s){ml=s,Ja=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function rr(s){return ow(ml,s)}function lp(s,l){return ml===null&&vl(s),ow(s,l)}function ow(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Ja===null){if(s===null)throw Error(r(308));Ja=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Ja=Ja.next=l;return f}var bP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},xP=t.unstable_scheduleCallback,_P=t.unstable_NormalPriority,An={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i0(){return{controller:new bP,data:new Map,refCount:0}}function wf(s){s.refCount--,s.refCount===0&&xP(_P,function(){s.controller.abort()})}var Ef=null,a0=0,Tc=0,Ac=null;function SP(s,l){if(Ef===null){var f=Ef=[];a0=0,Tc=ly(),Ac={status:"pending",value:void 0,then:function(p){f.push(p)}}}return a0++,l.then(lw,lw),l}function lw(){if(--a0===0&&Ef!==null){Ac!==null&&(Ac.status="fulfilled");var s=Ef;Ef=null,Tc=0,Ac=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function wP(s,l){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var cw=H.S;H.S=function(s,l){$E=lt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&SP(s,l),cw!==null&&cw(s,l)};var yl=B(null);function s0(){var s=yl.current;return s!==null?s:Gt.pooledCache}function cp(s,l){l===null?ie(yl,yl.current):ie(yl,l.pool)}function uw(){var s=s0();return s===null?null:{parent:An._currentValue,pool:s}}var Cc=Error(r(460)),o0=Error(r(474)),up=Error(r(542)),fp={then:function(){}};function fw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dw(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Vi,Vi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pw(s),s;default:if(typeof l.status=="string")l.then(Vi,Vi);else{if(s=Gt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pw(s),s}throw xl=l,Cc}}function bl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(xl=f,Cc):f}}var xl=null;function hw(){if(xl===null)throw Error(r(459));var s=xl;return xl=null,s}function pw(s){if(s===Cc||s===up)throw Error(r(483))}var Rc=null,Tf=0;function dp(s){var l=Tf;return Tf+=1,Rc===null&&(Rc=[]),dw(Rc,s,l)}function Af(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function hp(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function gw(s){function l(ne,ee){if(s){var se=ne.deletions;se===null?(ne.deletions=[ee],ne.flags|=16):se.push(ee)}}function f(ne,ee){if(!s)return null;for(;ee!==null;)l(ne,ee),ee=ee.sibling;return null}function p(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function y(ne,ee){return ne=Qa(ne,ee),ne.index=0,ne.sibling=null,ne}function _(ne,ee,se){return ne.index=se,s?(se=ne.alternate,se!==null?(se=se.index,se<ee?(ne.flags|=67108866,ee):se):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function N(ne){return s&&ne.alternate===null&&(ne.flags|=67108866),ne}function F(ne,ee,se,me){return ee===null||ee.tag!==6?(ee=Wv(se,ne.mode,me),ee.return=ne,ee):(ee=y(ee,se),ee.return=ne,ee)}function W(ne,ee,se,me){var Le=se.type;return Le===w?pe(ne,ee,se.props.children,me,se.key):ee!==null&&(ee.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&bl(Le)===ee.type)?(ee=y(ee,se.props),Af(ee,se),ee.return=ne,ee):(ee=ap(se.type,se.key,se.props,null,ne.mode,me),Af(ee,se),ee.return=ne,ee)}function oe(ne,ee,se,me){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Kv(se,ne.mode,me),ee.return=ne,ee):(ee=y(ee,se.children||[]),ee.return=ne,ee)}function pe(ne,ee,se,me,Le){return ee===null||ee.tag!==7?(ee=pl(se,ne.mode,me,Le),ee.return=ne,ee):(ee=y(ee,se),ee.return=ne,ee)}function ye(ne,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Wv(""+ee,ne.mode,se),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return se=ap(ee.type,ee.key,ee.props,null,ne.mode,se),Af(se,ee),se.return=ne,se;case S:return ee=Kv(ee,ne.mode,se),ee.return=ne,ee;case C:return ee=bl(ee),ye(ne,ee,se)}if($(ee)||U(ee))return ee=pl(ee,ne.mode,se,null),ee.return=ne,ee;if(typeof ee.then=="function")return ye(ne,dp(ee),se);if(ee.$$typeof===I)return ye(ne,lp(ne,ee),se);hp(ne,ee)}return null}function ce(ne,ee,se,me){var Le=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Le!==null?null:F(ne,ee,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Le?W(ne,ee,se,me):null;case S:return se.key===Le?oe(ne,ee,se,me):null;case C:return se=bl(se),ce(ne,ee,se,me)}if($(se)||U(se))return Le!==null?null:pe(ne,ee,se,me,null);if(typeof se.then=="function")return ce(ne,ee,dp(se),me);if(se.$$typeof===I)return ce(ne,ee,lp(ne,se),me);hp(ne,se)}return null}function he(ne,ee,se,me,Le){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ne=ne.get(se)||null,F(ee,ne,""+me,Le);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return ne=ne.get(me.key===null?se:me.key)||null,W(ee,ne,me,Le);case S:return ne=ne.get(me.key===null?se:me.key)||null,oe(ee,ne,me,Le);case C:return me=bl(me),he(ne,ee,se,me,Le)}if($(me)||U(me))return ne=ne.get(se)||null,pe(ee,ne,me,Le,null);if(typeof me.then=="function")return he(ne,ee,se,dp(me),Le);if(me.$$typeof===I)return he(ne,ee,se,lp(ee,me),Le);hp(ee,me)}return null}function Me(ne,ee,se,me){for(var Le=null,At=null,Oe=ee,ut=ee=0,yt=null;Oe!==null&&ut<se.length;ut++){Oe.index>ut?(yt=Oe,Oe=null):yt=Oe.sibling;var Ct=ce(ne,Oe,se[ut],me);if(Ct===null){Oe===null&&(Oe=yt);break}s&&Oe&&Ct.alternate===null&&l(ne,Oe),ee=_(Ct,ee,ut),At===null?Le=Ct:At.sibling=Ct,At=Ct,Oe=yt}if(ut===se.length)return f(ne,Oe),St&&Za(ne,ut),Le;if(Oe===null){for(;ut<se.length;ut++)Oe=ye(ne,se[ut],me),Oe!==null&&(ee=_(Oe,ee,ut),At===null?Le=Oe:At.sibling=Oe,At=Oe);return St&&Za(ne,ut),Le}for(Oe=p(Oe);ut<se.length;ut++)yt=he(Oe,ne,ut,se[ut],me),yt!==null&&(s&&yt.alternate!==null&&Oe.delete(yt.key===null?ut:yt.key),ee=_(yt,ee,ut),At===null?Le=yt:At.sibling=yt,At=yt);return s&&Oe.forEach(function(go){return l(ne,go)}),St&&Za(ne,ut),Le}function He(ne,ee,se,me){if(se==null)throw Error(r(151));for(var Le=null,At=null,Oe=ee,ut=ee=0,yt=null,Ct=se.next();Oe!==null&&!Ct.done;ut++,Ct=se.next()){Oe.index>ut?(yt=Oe,Oe=null):yt=Oe.sibling;var go=ce(ne,Oe,Ct.value,me);if(go===null){Oe===null&&(Oe=yt);break}s&&Oe&&go.alternate===null&&l(ne,Oe),ee=_(go,ee,ut),At===null?Le=go:At.sibling=go,At=go,Oe=yt}if(Ct.done)return f(ne,Oe),St&&Za(ne,ut),Le;if(Oe===null){for(;!Ct.done;ut++,Ct=se.next())Ct=ye(ne,Ct.value,me),Ct!==null&&(ee=_(Ct,ee,ut),At===null?Le=Ct:At.sibling=Ct,At=Ct);return St&&Za(ne,ut),Le}for(Oe=p(Oe);!Ct.done;ut++,Ct=se.next())Ct=he(Oe,ne,ut,Ct.value,me),Ct!==null&&(s&&Ct.alternate!==null&&Oe.delete(Ct.key===null?ut:Ct.key),ee=_(Ct,ee,ut),At===null?Le=Ct:At.sibling=Ct,At=Ct);return s&&Oe.forEach(function(O3){return l(ne,O3)}),St&&Za(ne,ut),Le}function Lt(ne,ee,se,me){if(typeof se=="object"&&se!==null&&se.type===w&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Le=se.key;ee!==null;){if(ee.key===Le){if(Le=se.type,Le===w){if(ee.tag===7){f(ne,ee.sibling),me=y(ee,se.props.children),me.return=ne,ne=me;break e}}else if(ee.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&bl(Le)===ee.type){f(ne,ee.sibling),me=y(ee,se.props),Af(me,se),me.return=ne,ne=me;break e}f(ne,ee);break}else l(ne,ee);ee=ee.sibling}se.type===w?(me=pl(se.props.children,ne.mode,me,se.key),me.return=ne,ne=me):(me=ap(se.type,se.key,se.props,null,ne.mode,me),Af(me,se),me.return=ne,ne=me)}return N(ne);case S:e:{for(Le=se.key;ee!==null;){if(ee.key===Le)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){f(ne,ee.sibling),me=y(ee,se.children||[]),me.return=ne,ne=me;break e}else{f(ne,ee);break}else l(ne,ee);ee=ee.sibling}me=Kv(se,ne.mode,me),me.return=ne,ne=me}return N(ne);case C:return se=bl(se),Lt(ne,ee,se,me)}if($(se))return Me(ne,ee,se,me);if(U(se)){if(Le=U(se),typeof Le!="function")throw Error(r(150));return se=Le.call(se),He(ne,ee,se,me)}if(typeof se.then=="function")return Lt(ne,ee,dp(se),me);if(se.$$typeof===I)return Lt(ne,ee,lp(ne,se),me);hp(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(f(ne,ee.sibling),me=y(ee,se),me.return=ne,ne=me):(f(ne,ee),me=Wv(se,ne.mode,me),me.return=ne,ne=me),N(ne)):f(ne,ee)}return function(ne,ee,se,me){try{Tf=0;var Le=Lt(ne,ee,se,me);return Rc=null,Le}catch(Oe){if(Oe===Cc||Oe===up)throw Oe;var At=ei(29,Oe,null,ne.mode);return At.lanes=me,At.return=ne,At}finally{}}}var _l=gw(!0),mw=gw(!1),Qs=!1;function l0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function c0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Js(s,l,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=ip(s),JS(s,null,f),l}return rp(s,p,l,f),ip(s)}function Cf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,$n(s,f)}}function u0(s,l){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?y=_=N:_=_.next=N,f=f.next}while(f!==null);_===null?y=_=l:_=_.next=l}else y=_=l;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var f0=!1;function Rf(){if(f0){var s=Ac;if(s!==null)throw s}}function Df(s,l,f,p){f0=!1;var y=s.updateQueue;Qs=!1;var _=y.firstBaseUpdate,N=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var W=F,oe=W.next;W.next=null,N===null?_=oe:N.next=oe,N=W;var pe=s.alternate;pe!==null&&(pe=pe.updateQueue,F=pe.lastBaseUpdate,F!==N&&(F===null?pe.firstBaseUpdate=oe:F.next=oe,pe.lastBaseUpdate=W))}if(_!==null){var ye=y.baseState;N=0,pe=oe=W=null,F=_;do{var ce=F.lane&-536870913,he=ce!==F.lane;if(he?(vt&ce)===ce:(p&ce)===ce){ce!==0&&ce===Tc&&(f0=!0),pe!==null&&(pe=pe.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Me=s,He=F;ce=l;var Lt=f;switch(He.tag){case 1:if(Me=He.payload,typeof Me=="function"){ye=Me.call(Lt,ye,ce);break e}ye=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=He.payload,ce=typeof Me=="function"?Me.call(Lt,ye,ce):Me,ce==null)break e;ye=g({},ye,ce);break e;case 2:Qs=!0}}ce=F.callback,ce!==null&&(s.flags|=64,he&&(s.flags|=8192),he=y.callbacks,he===null?y.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:F.tag,payload:F.payload,callback:F.callback,next:null},pe===null?(oe=pe=he,W=ye):pe=pe.next=he,N|=ce;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;he=F,F=he.next,he.next=null,y.lastBaseUpdate=he,y.shared.pending=null}}while(!0);pe===null&&(W=ye),y.baseState=W,y.firstBaseUpdate=oe,y.lastBaseUpdate=pe,_===null&&(y.shared.lanes=0),io|=N,s.lanes=N,s.memoizedState=ye}}function vw(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function yw(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)vw(f[s],l)}var Dc=B(null),pp=B(0);function bw(s,l){s=cs,ie(pp,s),ie(Dc,l),cs=s|l.baseLanes}function d0(){ie(pp,cs),ie(Dc,Dc.current)}function h0(){cs=pp.current,K(Dc),K(pp)}var ti=B(null),_i=null;function eo(s){var l=s.alternate;ie(bn,bn.current&1),ie(ti,s),_i===null&&(l===null||Dc.current!==null||l.memoizedState!==null)&&(_i=s)}function p0(s){ie(bn,bn.current),ie(ti,s),_i===null&&(_i=s)}function xw(s){s.tag===22?(ie(bn,bn.current),ie(ti,s),_i===null&&(_i=s)):to()}function to(){ie(bn,bn.current),ie(ti,ti.current)}function ni(s){K(ti),_i===s&&(_i=null),K(bn)}var bn=B(0);function gp(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||xy(f)||_y(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ts=0,at=null,jt=null,Cn=null,mp=!1,Ic=!1,Sl=!1,vp=0,If=0,kc=null,EP=0;function hn(){throw Error(r(321))}function g0(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Jr(s[f],l[f]))return!1;return!0}function m0(s,l,f,p,y,_){return ts=_,at=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?rE:k0,Sl=!1,_=f(p,y),Sl=!1,Ic&&(_=Sw(l,f,p,y)),_w(s),_}function _w(s){H.H=Mf;var l=jt!==null&&jt.next!==null;if(ts=0,Cn=jt=at=null,mp=!1,If=0,kc=null,l)throw Error(r(300));s===null||Rn||(s=s.dependencies,s!==null&&op(s)&&(Rn=!0))}function Sw(s,l,f,p){at=s;var y=0;do{if(Ic&&(kc=null),If=0,Ic=!1,25<=y)throw Error(r(301));if(y+=1,Cn=jt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=iE,_=l(f,p)}while(Ic);return _}function TP(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?kf(l):l,s=s.useState()[0],(jt!==null?jt.memoizedState:null)!==s&&(at.flags|=1024),l}function v0(){var s=vp!==0;return vp=0,s}function y0(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function b0(s){if(mp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}mp=!1}ts=0,Cn=jt=at=null,Ic=!1,If=vp=0,kc=null}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?at.memoizedState=Cn=s:Cn=Cn.next=s,Cn}function xn(){if(jt===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var l=Cn===null?at.memoizedState:Cn.next;if(l!==null)Cn=l,jt=s;else{if(s===null)throw at.alternate===null?Error(r(467)):Error(r(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Cn===null?at.memoizedState=Cn=s:Cn=Cn.next=s}return Cn}function yp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kf(s){var l=If;return If+=1,kc===null&&(kc=[]),s=dw(kc,s,l),l=at,(Cn===null?l.memoizedState:Cn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?rE:k0),s}function bp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kf(s);if(s.$$typeof===I)return rr(s)}throw Error(r(438,String(s)))}function x0(s){var l=null,f=at.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=at.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=yp(),at.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),p=0;p<s;p++)f[p]=j;return l.index++,f}function ns(s,l){return typeof l=="function"?l(s):l}function xp(s){var l=xn();return _0(l,jt,s)}function _0(s,l,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=s.baseQueue,_=p.pending;if(_!==null){if(y!==null){var N=y.next;y.next=_.next,_.next=N}l.baseQueue=y=_,p.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{l=y.next;var F=N=null,W=null,oe=l,pe=!1;do{var ye=oe.lane&-536870913;if(ye!==oe.lane?(vt&ye)===ye:(ts&ye)===ye){var ce=oe.revertLane;if(ce===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ye===Tc&&(pe=!0);else if((ts&ce)===ce){oe=oe.next,ce===Tc&&(pe=!0);continue}else ye={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(F=W=ye,N=_):W=W.next=ye,at.lanes|=ce,io|=ce;ye=oe.action,Sl&&f(_,ye),_=oe.hasEagerState?oe.eagerState:f(_,ye)}else ce={lane:ye,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(F=W=ce,N=_):W=W.next=ce,at.lanes|=ye,io|=ye;oe=oe.next}while(oe!==null&&oe!==l);if(W===null?N=_:W.next=F,!Jr(_,s.memoizedState)&&(Rn=!0,pe&&(f=Ac,f!==null)))throw f;s.memoizedState=_,s.baseState=N,s.baseQueue=W,p.lastRenderedState=_}return y===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function S0(s){var l=xn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,y=f.pending,_=l.memoizedState;if(y!==null){f.pending=null;var N=y=y.next;do _=s(_,N.action),N=N.next;while(N!==y);Jr(_,l.memoizedState)||(Rn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),f.lastRenderedState=_}return[_,p]}function ww(s,l,f){var p=at,y=xn(),_=St;if(_){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!Jr((jt||y).memoizedState,f);if(N&&(y.memoizedState=f,Rn=!0),y=y.queue,T0(Aw.bind(null,p,y,s),[s]),y.getSnapshot!==l||N||Cn!==null&&Cn.memoizedState.tag&1){if(p.flags|=2048,Nc(9,{destroy:void 0},Tw.bind(null,p,y,f,l),null),Gt===null)throw Error(r(349));_||(ts&127)!==0||Ew(p,l,f)}return f}function Ew(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=at.updateQueue,l===null?(l=yp(),at.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Tw(s,l,f,p){l.value=f,l.getSnapshot=p,Cw(l)&&Rw(s)}function Aw(s,l,f){return f(function(){Cw(l)&&Rw(s)})}function Cw(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Jr(s,f)}catch{return!0}}function Rw(s){var l=hl(s,2);l!==null&&Lr(l,s,2)}function w0(s){var l=Tr();if(typeof s=="function"){var f=s;if(s=f(),Sl){Hn(!0);try{f()}finally{Hn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:s},l}function Dw(s,l,f,p){return s.baseState=f,_0(s,jt,typeof p=="function"?p:ns)}function AP(s,l,f,p,y){if(wp(s))throw Error(r(485));if(s=l.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){_.listeners.push(N)}};H.T!==null?f(!0):_.isTransition=!1,p(_),f=l.pending,f===null?(_.next=l.pending=_,Iw(l,_)):(_.next=f.next,l.pending=f.next=_)}}function Iw(s,l){var f=l.action,p=l.payload,y=s.state;if(l.isTransition){var _=H.T,N={};H.T=N;try{var F=f(y,p),W=H.S;W!==null&&W(N,F),kw(s,l,F)}catch(oe){E0(s,l,oe)}finally{_!==null&&N.types!==null&&(_.types=N.types),H.T=_}}else try{_=f(y,p),kw(s,l,_)}catch(oe){E0(s,l,oe)}}function kw(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){Nw(s,l,p)},function(p){return E0(s,l,p)}):Nw(s,l,f)}function Nw(s,l,f){l.status="fulfilled",l.value=f,Mw(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Iw(s,f)))}function E0(s,l,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,Mw(l),l=l.next;while(l!==p)}s.action=null}function Mw(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Ow(s,l){return l}function Pw(s,l){if(St){var f=Gt.formState;if(f!==null){e:{var p=at;if(St){if(Kt){t:{for(var y=Kt,_=xi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Si(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Kt=Si(y.nextSibling),p=y.data==="F!";break e}}Ws(p)}p=!1}p&&(l=f[0])}}return f=Tr(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ow,lastRenderedState:l},f.queue=p,f=eE.bind(null,at,p),p.dispatch=f,p=w0(!1),_=I0.bind(null,at,!1,p.queue),p=Tr(),y={state:l,dispatch:null,action:s,pending:null},p.queue=y,f=AP.bind(null,at,y,_,f),y.dispatch=f,p.memoizedState=s,[l,f,!1]}function Vw(s){var l=xn();return jw(l,jt,s)}function jw(s,l,f){if(l=_0(s,l,Ow)[0],s=xp(ns)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=kf(l)}catch(N){throw N===Cc?up:N}else p=l;l=xn();var y=l.queue,_=y.dispatch;return f!==l.memoizedState&&(at.flags|=2048,Nc(9,{destroy:void 0},CP.bind(null,y,f),null)),[p,_,s]}function CP(s,l){s.action=l}function zw(s){var l=xn(),f=jt;if(f!==null)return jw(l,f,s);xn(),l=l.memoizedState,f=xn();var p=f.queue.dispatch;return f.memoizedState=s,[l,p,!1]}function Nc(s,l,f,p){return s={tag:s,create:f,deps:p,inst:l,next:null},l=at.updateQueue,l===null&&(l=yp(),at.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,l.lastEffect=s),s}function Lw(){return xn().memoizedState}function _p(s,l,f,p){var y=Tr();at.flags|=s,y.memoizedState=Nc(1|l,{destroy:void 0},f,p===void 0?null:p)}function Sp(s,l,f,p){var y=xn();p=p===void 0?null:p;var _=y.memoizedState.inst;jt!==null&&p!==null&&g0(p,jt.memoizedState.deps)?y.memoizedState=Nc(l,_,f,p):(at.flags|=s,y.memoizedState=Nc(1|l,_,f,p))}function Bw(s,l){_p(8390656,8,s,l)}function T0(s,l){Sp(2048,8,s,l)}function RP(s){at.flags|=4;var l=at.updateQueue;if(l===null)l=yp(),at.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function Uw(s){var l=xn().memoizedState;return RP({ref:l,nextImpl:s}),function(){if((Dt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Fw(s,l){return Sp(4,2,s,l)}function Gw(s,l){return Sp(4,4,s,l)}function qw(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Hw(s,l,f){f=f!=null?f.concat([s]):null,Sp(4,4,qw.bind(null,l,s),f)}function A0(){}function $w(s,l){var f=xn();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&g0(l,p[1])?p[0]:(f.memoizedState=[s,l],s)}function Yw(s,l){var f=xn();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&g0(l,p[1]))return p[0];if(p=s(),Sl){Hn(!0);try{s()}finally{Hn(!1)}}return f.memoizedState=[p,l],p}function C0(s,l,f){return f===void 0||(ts&1073741824)!==0&&(vt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=XE(),at.lanes|=s,io|=s,f)}function Xw(s,l,f,p){return Jr(f,l)?f:Dc.current!==null?(s=C0(s,f,p),Jr(s,l)||(Rn=!0),s):(ts&42)===0||(ts&1073741824)!==0&&(vt&261930)===0?(Rn=!0,s.memoizedState=f):(s=XE(),at.lanes|=s,io|=s,l)}function Ww(s,l,f,p,y){var _=Y.p;Y.p=_!==0&&8>_?_:8;var N=H.T,F={};H.T=F,I0(s,!1,l,f);try{var W=y(),oe=H.S;if(oe!==null&&oe(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var pe=wP(W,p);Nf(s,l,pe,ai(s))}else Nf(s,l,p,ai(s))}catch(ye){Nf(s,l,{then:function(){},status:"rejected",reason:ye},ai())}finally{Y.p=_,N!==null&&F.types!==null&&(N.types=F.types),H.T=N}}function DP(){}function R0(s,l,f,p){if(s.tag!==5)throw Error(r(476));var y=Kw(s).queue;Ww(s,y,l,te,f===null?DP:function(){return Qw(s),f(p)})}function Kw(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:te},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Qw(s){var l=Kw(s);l.next===null&&(l=s.alternate.memoizedState),Nf(s,l.next.queue,{},ai())}function D0(){return rr(Wf)}function Zw(){return xn().memoizedState}function Jw(){return xn().memoizedState}function IP(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ai();s=Zs(f);var p=Js(l,s,f);p!==null&&(Lr(p,l,f),Cf(p,l,f)),l={cache:i0()},s.payload=l;return}l=l.return}}function kP(s,l,f){var p=ai();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},wp(s)?tE(l,f):(f=Yv(s,l,f,p),f!==null&&(Lr(f,s,p),nE(f,l,p)))}function eE(s,l,f){var p=ai();Nf(s,l,f,p)}function Nf(s,l,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(wp(s))tE(l,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var N=l.lastRenderedState,F=_(N,f);if(y.hasEagerState=!0,y.eagerState=F,Jr(F,N))return rp(s,l,y,0),Gt===null&&np(),!1}catch{}finally{}if(f=Yv(s,l,y,p),f!==null)return Lr(f,s,p),nE(f,l,p),!0}return!1}function I0(s,l,f,p){if(p={lane:2,revertLane:ly(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},wp(s)){if(l)throw Error(r(479))}else l=Yv(s,f,p,2),l!==null&&Lr(l,s,2)}function wp(s){var l=s.alternate;return s===at||l!==null&&l===at}function tE(s,l){Ic=mp=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function nE(s,l,f){if((f&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,$n(s,f)}}var Mf={readContext:rr,use:bp,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Mf.useEffectEvent=hn;var rE={readContext:rr,use:bp,useCallback:function(s,l){return Tr().memoizedState=[s,l===void 0?null:l],s},useContext:rr,useEffect:Bw,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,_p(4194308,4,qw.bind(null,l,s),f)},useLayoutEffect:function(s,l){return _p(4194308,4,s,l)},useInsertionEffect:function(s,l){_p(4,2,s,l)},useMemo:function(s,l){var f=Tr();l=l===void 0?null:l;var p=s();if(Sl){Hn(!0);try{s()}finally{Hn(!1)}}return f.memoizedState=[p,l],p},useReducer:function(s,l,f){var p=Tr();if(f!==void 0){var y=f(l);if(Sl){Hn(!0);try{f(l)}finally{Hn(!1)}}}else y=l;return p.memoizedState=p.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},p.queue=s,s=s.dispatch=kP.bind(null,at,s),[p.memoizedState,s]},useRef:function(s){var l=Tr();return s={current:s},l.memoizedState=s},useState:function(s){s=w0(s);var l=s.queue,f=eE.bind(null,at,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:A0,useDeferredValue:function(s,l){var f=Tr();return C0(f,s,l)},useTransition:function(){var s=w0(!1);return s=Ww.bind(null,at,s.queue,!0,!1),Tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var p=at,y=Tr();if(St){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Gt===null)throw Error(r(349));(vt&127)!==0||Ew(p,l,f)}y.memoizedState=f;var _={value:f,getSnapshot:l};return y.queue=_,Bw(Aw.bind(null,p,_,s),[s]),p.flags|=2048,Nc(9,{destroy:void 0},Tw.bind(null,p,_,f,l),null),f},useId:function(){var s=Tr(),l=Gt.identifierPrefix;if(St){var f=ba,p=ya;f=(p&~(1<<32-$t(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=vp++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=EP++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:D0,useFormState:Pw,useActionState:Pw,useOptimistic:function(s){var l=Tr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=I0.bind(null,at,!0,f),f.dispatch=l,[s,l]},useMemoCache:x0,useCacheRefresh:function(){return Tr().memoizedState=IP.bind(null,at)},useEffectEvent:function(s){var l=Tr(),f={impl:s};return l.memoizedState=f,function(){if((Dt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},k0={readContext:rr,use:bp,useCallback:$w,useContext:rr,useEffect:T0,useImperativeHandle:Hw,useInsertionEffect:Fw,useLayoutEffect:Gw,useMemo:Yw,useReducer:xp,useRef:Lw,useState:function(){return xp(ns)},useDebugValue:A0,useDeferredValue:function(s,l){var f=xn();return Xw(f,jt.memoizedState,s,l)},useTransition:function(){var s=xp(ns)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:kf(s),l]},useSyncExternalStore:ww,useId:Zw,useHostTransitionStatus:D0,useFormState:Vw,useActionState:Vw,useOptimistic:function(s,l){var f=xn();return Dw(f,jt,s,l)},useMemoCache:x0,useCacheRefresh:Jw};k0.useEffectEvent=Uw;var iE={readContext:rr,use:bp,useCallback:$w,useContext:rr,useEffect:T0,useImperativeHandle:Hw,useInsertionEffect:Fw,useLayoutEffect:Gw,useMemo:Yw,useReducer:S0,useRef:Lw,useState:function(){return S0(ns)},useDebugValue:A0,useDeferredValue:function(s,l){var f=xn();return jt===null?C0(f,s,l):Xw(f,jt.memoizedState,s,l)},useTransition:function(){var s=S0(ns)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:kf(s),l]},useSyncExternalStore:ww,useId:Zw,useHostTransitionStatus:D0,useFormState:zw,useActionState:zw,useOptimistic:function(s,l){var f=xn();return jt!==null?Dw(f,jt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:x0,useCacheRefresh:Jw};iE.useEffectEvent=Uw;function N0(s,l,f,p){l=s.memoizedState,f=f(p,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var M0={enqueueSetState:function(s,l,f){s=s._reactInternals;var p=ai(),y=Zs(p);y.payload=l,f!=null&&(y.callback=f),l=Js(s,y,p),l!==null&&(Lr(l,s,p),Cf(l,s,p))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var p=ai(),y=Zs(p);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=Js(s,y,p),l!==null&&(Lr(l,s,p),Cf(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ai(),p=Zs(f);p.tag=2,l!=null&&(p.callback=l),l=Js(s,p,f),l!==null&&(Lr(l,s,f),Cf(l,s,f))}};function aE(s,l,f,p,y,_,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,_,N):l.prototype&&l.prototype.isPureReactComponent?!bf(f,p)||!bf(y,_):!0}function sE(s,l,f,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==s&&M0.enqueueReplaceState(l,l.state,null)}function wl(s,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function oE(s){tp(s)}function lE(s){console.error(s)}function cE(s){tp(s)}function Ep(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function uE(s,l,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function O0(s,l,f){return f=Zs(f),f.tag=3,f.payload={element:null},f.callback=function(){Ep(s,l)},f}function fE(s){return s=Zs(s),s.tag=3,s}function dE(s,l,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var _=p.value;s.payload=function(){return y(_)},s.callback=function(){uE(l,f,p)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){uE(l,f,p),typeof y!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function NP(s,l,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&Ec(l,f,y,!0),f=ti.current,f!==null){switch(f.tag){case 31:case 13:return _i===null?Vp():f.alternate===null&&pn===0&&(pn=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===fp?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),ay(s,p,y)),!1;case 22:return f.flags|=65536,p===fp?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),ay(s,p,y)),!1}throw Error(r(435,f.tag))}return ay(s,p,y),Vp(),!1}if(St)return l=ti.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==Jv&&(s=Error(r(422),{cause:p}),Sf(vi(s,f)))):(p!==Jv&&(l=Error(r(423),{cause:p}),Sf(vi(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,p=vi(p,f),y=O0(s.stateNode,p,y),u0(s,y),pn!==4&&(pn=2)),!1;var _=Error(r(520),{cause:p});if(_=vi(_,f),Uf===null?Uf=[_]:Uf.push(_),pn!==4&&(pn=2),l===null)return!0;p=vi(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=O0(f.stateNode,p,s),u0(f,s),!1;case 1:if(l=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ao===null||!ao.has(_))))return f.flags|=65536,y&=-y,f.lanes|=y,y=fE(y),dE(y,s,f,p),u0(f,y),!1}f=f.return}while(f!==null);return!1}var P0=Error(r(461)),Rn=!1;function ir(s,l,f,p){l.child=s===null?mw(l,null,f,p):_l(l,s.child,f,p)}function hE(s,l,f,p,y){f=f.render;var _=l.ref;if("ref"in p){var N={};for(var F in p)F!=="ref"&&(N[F]=p[F])}else N=p;return vl(l),p=m0(s,l,f,N,_,y),F=v0(),s!==null&&!Rn?(y0(s,l,y),rs(s,l,y)):(St&&F&&Qv(l),l.flags|=1,ir(s,l,p,y),l.child)}function pE(s,l,f,p,y){if(s===null){var _=f.type;return typeof _=="function"&&!Xv(_)&&_.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=_,gE(s,l,_,p,y)):(s=ap(f.type,null,p,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(_=s.child,!G0(s,y)){var N=_.memoizedProps;if(f=f.compare,f=f!==null?f:bf,f(N,p)&&s.ref===l.ref)return rs(s,l,y)}return l.flags|=1,s=Qa(_,p),s.ref=l.ref,s.return=l,l.child=s}function gE(s,l,f,p,y){if(s!==null){var _=s.memoizedProps;if(bf(_,p)&&s.ref===l.ref)if(Rn=!1,l.pendingProps=p=_,G0(s,y))(s.flags&131072)!==0&&(Rn=!0);else return l.lanes=s.lanes,rs(s,l,y)}return V0(s,l,f,p,y)}function mE(s,l,f,p){var y=p.children,_=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,s!==null){for(p=l.child=s.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~_}else p=0,l.child=null;return vE(s,l,_,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&cp(l,_!==null?_.cachePool:null),_!==null?bw(l,_):d0(),xw(l);else return p=l.lanes=536870912,vE(s,l,_!==null?_.baseLanes|f:f,f,p)}else _!==null?(cp(l,_.cachePool),bw(l,_),to(),l.memoizedState=null):(s!==null&&cp(l,null),d0(),to());return ir(s,l,y,f),l.child}function Of(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function vE(s,l,f,p,y){var _=s0();return _=_===null?null:{parent:An._currentValue,pool:_},l.memoizedState={baseLanes:f,cachePool:_},s!==null&&cp(l,null),d0(),xw(l),s!==null&&Ec(s,l,p,!0),l.childLanes=y,null}function Tp(s,l){return l=Cp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function yE(s,l,f){return _l(l,s.child,null,f),s=Tp(l,l.pendingProps),s.flags|=2,ni(l),l.memoizedState=null,s}function MP(s,l,f){var p=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(St){if(p.mode==="hidden")return s=Tp(l,p),l.lanes=536870912,Of(null,s);if(p0(l),(s=Kt)?(s=IT(s,xi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ys!==null?{id:ya,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},f=tw(s),f.return=l,l.child=f,nr=l,Kt=null)):s=null,s===null)throw Ws(l);return l.lanes=536870912,null}return Tp(l,p)}var _=s.memoizedState;if(_!==null){var N=_.dehydrated;if(p0(l),y)if(l.flags&256)l.flags&=-257,l=yE(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Rn||Ec(s,l,f,!1),y=(f&s.childLanes)!==0,Rn||y){if(p=Gt,p!==null&&(N=ui(p,f),N!==0&&N!==_.retryLane))throw _.retryLane=N,hl(s,N),Lr(p,s,N),P0;Vp(),l=yE(s,l,f)}else s=_.treeContext,Kt=Si(N.nextSibling),nr=l,St=!0,Xs=null,xi=!1,s!==null&&iw(l,s),l=Tp(l,p),l.flags|=4096;return l}return s=Qa(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Ap(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function V0(s,l,f,p,y){return vl(l),f=m0(s,l,f,p,void 0,y),p=v0(),s!==null&&!Rn?(y0(s,l,y),rs(s,l,y)):(St&&p&&Qv(l),l.flags|=1,ir(s,l,f,y),l.child)}function bE(s,l,f,p,y,_){return vl(l),l.updateQueue=null,f=Sw(l,p,f,y),_w(s),p=v0(),s!==null&&!Rn?(y0(s,l,_),rs(s,l,_)):(St&&p&&Qv(l),l.flags|=1,ir(s,l,f,_),l.child)}function xE(s,l,f,p,y){if(vl(l),l.stateNode===null){var _=xc,N=f.contextType;typeof N=="object"&&N!==null&&(_=rr(N)),_=new f(p,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=M0,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=p,_.state=l.memoizedState,_.refs={},l0(l),N=f.contextType,_.context=typeof N=="object"&&N!==null?rr(N):xc,_.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(N0(l,f,N,p),_.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(N=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),N!==_.state&&M0.enqueueReplaceState(_,_.state,null),Df(l,p,_,y),Rf(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){_=l.stateNode;var F=l.memoizedProps,W=wl(f,F);_.props=W;var oe=_.context,pe=f.contextType;N=xc,typeof pe=="object"&&pe!==null&&(N=rr(pe));var ye=f.getDerivedStateFromProps;pe=typeof ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,pe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F||oe!==N)&&sE(l,_,p,N),Qs=!1;var ce=l.memoizedState;_.state=ce,Df(l,p,_,y),Rf(),oe=l.memoizedState,F||ce!==oe||Qs?(typeof ye=="function"&&(N0(l,f,ye,p),oe=l.memoizedState),(W=Qs||aE(l,f,W,p,ce,oe,N))?(pe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=oe),_.props=p,_.state=oe,_.context=N,p=W):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{_=l.stateNode,c0(s,l),N=l.memoizedProps,pe=wl(f,N),_.props=pe,ye=l.pendingProps,ce=_.context,oe=f.contextType,W=xc,typeof oe=="object"&&oe!==null&&(W=rr(oe)),F=f.getDerivedStateFromProps,(oe=typeof F=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(N!==ye||ce!==W)&&sE(l,_,p,W),Qs=!1,ce=l.memoizedState,_.state=ce,Df(l,p,_,y),Rf();var he=l.memoizedState;N!==ye||ce!==he||Qs||s!==null&&s.dependencies!==null&&op(s.dependencies)?(typeof F=="function"&&(N0(l,f,F,p),he=l.memoizedState),(pe=Qs||aE(l,f,pe,p,ce,he,W)||s!==null&&s.dependencies!==null&&op(s.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,he,W),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,he,W)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||N===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=he),_.props=p,_.state=he,_.context=W,p=pe):(typeof _.componentDidUpdate!="function"||N===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),p=!1)}return _=p,Ap(s,l),p=(l.flags&128)!==0,_||p?(_=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,s!==null&&p?(l.child=_l(l,s.child,null,y),l.child=_l(l,null,f,y)):ir(s,l,f,y),l.memoizedState=_.state,s=l.child):s=rs(s,l,y),s}function _E(s,l,f,p){return gl(),l.flags|=256,ir(s,l,f,p),l.child}var j0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z0(s){return{baseLanes:s,cachePool:uw()}}function L0(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ii),s}function SE(s,l,f){var p=l.pendingProps,y=!1,_=(l.flags&128)!==0,N;if((N=_)||(N=s!==null&&s.memoizedState===null?!1:(bn.current&2)!==0),N&&(y=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(St){if(y?eo(l):to(),(s=Kt)?(s=IT(s,xi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ys!==null?{id:ya,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},f=tw(s),f.return=l,l.child=f,nr=l,Kt=null)):s=null,s===null)throw Ws(l);return _y(s)?l.lanes=32:l.lanes=536870912,null}var F=p.children;return p=p.fallback,y?(to(),y=l.mode,F=Cp({mode:"hidden",children:F},y),p=pl(p,y,f,null),F.return=l,p.return=l,F.sibling=p,l.child=F,p=l.child,p.memoizedState=z0(f),p.childLanes=L0(s,N,f),l.memoizedState=j0,Of(null,p)):(eo(l),B0(l,F))}var W=s.memoizedState;if(W!==null&&(F=W.dehydrated,F!==null)){if(_)l.flags&256?(eo(l),l.flags&=-257,l=U0(s,l,f)):l.memoizedState!==null?(to(),l.child=s.child,l.flags|=128,l=null):(to(),F=p.fallback,y=l.mode,p=Cp({mode:"visible",children:p.children},y),F=pl(F,y,f,null),F.flags|=2,p.return=l,F.return=l,p.sibling=F,l.child=p,_l(l,s.child,null,f),p=l.child,p.memoizedState=z0(f),p.childLanes=L0(s,N,f),l.memoizedState=j0,l=Of(null,p));else if(eo(l),_y(F)){if(N=F.nextSibling&&F.nextSibling.dataset,N)var oe=N.dgst;N=oe,p=Error(r(419)),p.stack="",p.digest=N,Sf({value:p,source:null,stack:null}),l=U0(s,l,f)}else if(Rn||Ec(s,l,f,!1),N=(f&s.childLanes)!==0,Rn||N){if(N=Gt,N!==null&&(p=ui(N,f),p!==0&&p!==W.retryLane))throw W.retryLane=p,hl(s,p),Lr(N,s,p),P0;xy(F)||Vp(),l=U0(s,l,f)}else xy(F)?(l.flags|=192,l.child=s.child,l=null):(s=W.treeContext,Kt=Si(F.nextSibling),nr=l,St=!0,Xs=null,xi=!1,s!==null&&iw(l,s),l=B0(l,p.children),l.flags|=4096);return l}return y?(to(),F=p.fallback,y=l.mode,W=s.child,oe=W.sibling,p=Qa(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,oe!==null?F=Qa(oe,F):(F=pl(F,y,f,null),F.flags|=2),F.return=l,p.return=l,p.sibling=F,l.child=p,Of(null,p),p=l.child,F=s.child.memoizedState,F===null?F=z0(f):(y=F.cachePool,y!==null?(W=An._currentValue,y=y.parent!==W?{parent:W,pool:W}:y):y=uw(),F={baseLanes:F.baseLanes|f,cachePool:y}),p.memoizedState=F,p.childLanes=L0(s,N,f),l.memoizedState=j0,Of(s.child,p)):(eo(l),f=s.child,s=f.sibling,f=Qa(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function B0(s,l){return l=Cp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Cp(s,l){return s=ei(22,s,null,l),s.lanes=0,s}function U0(s,l,f){return _l(l,s.child,null,f),s=B0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function wE(s,l,f){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),n0(s.return,l,f)}function F0(s,l,f,p,y,_){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:_}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=f,N.tailMode=y,N.treeForkCount=_)}function EE(s,l,f){var p=l.pendingProps,y=p.revealOrder,_=p.tail;p=p.children;var N=bn.current,F=(N&2)!==0;if(F?(N=N&1|2,l.flags|=128):N&=1,ie(bn,N),ir(s,l,p,f),p=St?_f:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wE(s,f,l);else if(s.tag===19)wE(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&gp(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),F0(l,!1,y,f,_,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&gp(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}F0(l,!0,f,null,_,p);break;case"together":F0(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function rs(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),io|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ec(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Qa(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Qa(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function G0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&op(s)))}function OP(s,l,f){switch(l.tag){case 3:Te(l,l.stateNode.containerInfo),Ks(l,An,s.memoizedState.cache),gl();break;case 27:case 5:Fe(l);break;case 4:Te(l,l.stateNode.containerInfo);break;case 10:Ks(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,p0(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(eo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?SE(s,l,f):(eo(l),s=rs(s,l,f),s!==null?s.sibling:null);eo(l);break;case 19:var y=(s.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(Ec(s,l,f,!1),p=(f&l.childLanes)!==0),y){if(p)return EE(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(bn,bn.current),p)break;return null;case 22:return l.lanes=0,mE(s,l,f,l.pendingProps);case 24:Ks(l,An,s.memoizedState.cache)}return rs(s,l,f)}function TE(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Rn=!0;else{if(!G0(s,f)&&(l.flags&128)===0)return Rn=!1,OP(s,l,f);Rn=(s.flags&131072)!==0}else Rn=!1,St&&(l.flags&1048576)!==0&&rw(l,_f,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=bl(l.elementType),l.type=s,typeof s=="function")Xv(s)?(p=wl(s,p),l.tag=1,l=xE(null,l,s,p,f)):(l.tag=0,l=V0(null,l,s,p,f));else{if(s!=null){var y=s.$$typeof;if(y===V){l.tag=11,l=hE(null,l,s,p,f);break e}else if(y===T){l.tag=14,l=pE(null,l,s,p,f);break e}}throw l=X(s)||s,Error(r(306,l,""))}}return l;case 0:return V0(s,l,l.type,l.pendingProps,f);case 1:return p=l.type,y=wl(p,l.pendingProps),xE(s,l,p,y,f);case 3:e:{if(Te(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var _=l.memoizedState;y=_.element,c0(s,l),Df(l,p,null,f);var N=l.memoizedState;if(p=N.cache,Ks(l,An,p),p!==_.cache&&r0(l,[An],f,!0),Rf(),p=N.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=_E(s,l,p,f);break e}else if(p!==y){y=vi(Error(r(424)),l),Sf(y),l=_E(s,l,p,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Kt=Si(s.firstChild),nr=l,St=!0,Xs=null,xi=!0,f=mw(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(gl(),p===y){l=rs(s,l,f);break e}ir(s,l,p,f)}l=l.child}return l;case 26:return Ap(s,l),s===null?(f=VT(l.type,null,l.pendingProps,null))?l.memoizedState=f:St||(f=l.type,s=l.pendingProps,p=Gp(ue.current).createElement(f),p[Wt]=l,p[dn]=s,ar(p,f,s),En(p),l.stateNode=p):l.memoizedState=VT(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Fe(l),s===null&&St&&(p=l.stateNode=MT(l.type,l.pendingProps,ue.current),nr=l,xi=!0,y=Kt,co(l.type)?(Sy=y,Kt=Si(p.firstChild)):Kt=y),ir(s,l,l.pendingProps.children,f),Ap(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&St&&((y=p=Kt)&&(p=u3(p,l.type,l.pendingProps,xi),p!==null?(l.stateNode=p,nr=l,Kt=Si(p.firstChild),xi=!1,y=!0):y=!1),y||Ws(l)),Fe(l),y=l.type,_=l.pendingProps,N=s!==null?s.memoizedProps:null,p=_.children,vy(y,_)?p=null:N!==null&&vy(y,N)&&(l.flags|=32),l.memoizedState!==null&&(y=m0(s,l,TP,null,null,f),Wf._currentValue=y),Ap(s,l),ir(s,l,p,f),l.child;case 6:return s===null&&St&&((s=f=Kt)&&(f=f3(f,l.pendingProps,xi),f!==null?(l.stateNode=f,nr=l,Kt=null,s=!0):s=!1),s||Ws(l)),null;case 13:return SE(s,l,f);case 4:return Te(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=_l(l,null,p,f):ir(s,l,p,f),l.child;case 11:return hE(s,l,l.type,l.pendingProps,f);case 7:return ir(s,l,l.pendingProps,f),l.child;case 8:return ir(s,l,l.pendingProps.children,f),l.child;case 12:return ir(s,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,Ks(l,l.type,p.value),ir(s,l,p.children,f),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,vl(l),y=rr(y),p=p(y),l.flags|=1,ir(s,l,p,f),l.child;case 14:return pE(s,l,l.type,l.pendingProps,f);case 15:return gE(s,l,l.type,l.pendingProps,f);case 19:return EE(s,l,f);case 31:return MP(s,l,f);case 22:return mE(s,l,f,l.pendingProps);case 24:return vl(l),p=rr(An),s===null?(y=s0(),y===null&&(y=Gt,_=i0(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=f),y=_),l.memoizedState={parent:p,cache:y},l0(l),Ks(l,An,y)):((s.lanes&f)!==0&&(c0(s,l),Df(l,null,null,f),Rf()),y=s.memoizedState,_=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Ks(l,An,p)):(p=_.cache,Ks(l,An,p),p!==y.cache&&r0(l,[An],f,!0))),ir(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function is(s){s.flags|=4}function q0(s,l,f,p,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(ZE())s.flags|=8192;else throw xl=fp,o0}else s.flags&=-16777217}function AE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!UT(l))if(ZE())s.flags|=8192;else throw xl=fp,o0}function Rp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?aa():536870912,s.lanes|=l,Vc|=l)}function Pf(s,l){if(!St)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Qt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=f,l}function PP(s,l,f){var p=l.pendingProps;switch(Zv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(l),null;case 1:return Qt(l),null;case 3:return f=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),es(An),Ce(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(wc(l)?is(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,e0())),Qt(l),null;case 26:var y=l.type,_=l.memoizedState;return s===null?(is(l),_!==null?(Qt(l),AE(l,_)):(Qt(l),q0(l,y,null,p,f))):_?_!==s.memoizedState?(is(l),Qt(l),AE(l,_)):(Qt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&is(l),Qt(l),q0(l,y,s,p,f)),null;case 27:if(Se(l),f=ue.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&is(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}s=re.current,wc(l)?aw(l):(s=MT(y,p,f),l.stateNode=s,is(l))}return Qt(l),null;case 5:if(Se(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&is(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}if(_=re.current,wc(l))aw(l);else{var N=Gp(ue.current);switch(_){case 1:_=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=N.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?_.multiple=!0:p.size&&(_.size=p.size);break;default:_=typeof p.is=="string"?N.createElement(y,{is:p.is}):N.createElement(y)}}_[Wt]=l,_[dn]=p;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)_.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=_;e:switch(ar(_,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&is(l)}}return Qt(l),q0(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&is(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=ue.current,wc(l)){if(s=l.stateNode,f=l.memoizedProps,p=null,y=nr,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}s[Wt]=l,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||ST(s.nodeValue,f)),s||Ws(l,!0)}else s=Gp(s).createTextNode(p),s[Wt]=l,l.stateNode=s}return Qt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(p=wc(l),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Wt]=l}else gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),s=!1}else f=e0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(ni(l),l):(ni(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Qt(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=wc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Wt]=l}else gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),y=!1}else y=e0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(ni(l),l):(ni(l),null)}return ni(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==y&&(p.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Rp(l,l.updateQueue),Qt(l),null);case 4:return Ce(),s===null&&dy(l.stateNode.containerInfo),Qt(l),null;case 10:return es(l.type),Qt(l),null;case 19:if(K(bn),p=l.memoizedState,p===null)return Qt(l),null;if(y=(l.flags&128)!==0,_=p.rendering,_===null)if(y)Pf(p,!1);else{if(pn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(_=gp(s),_!==null){for(l.flags|=128,Pf(p,!1),s=_.updateQueue,l.updateQueue=s,Rp(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)ew(f,s),f=f.sibling;return ie(bn,bn.current&1|2),St&&Za(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&lt()>Mp&&(l.flags|=128,y=!0,Pf(p,!1),l.lanes=4194304)}else{if(!y)if(s=gp(_),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Rp(l,s),Pf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!St)return Qt(l),null}else 2*lt()-p.renderingStartTime>Mp&&f!==536870912&&(l.flags|=128,y=!0,Pf(p,!1),l.lanes=4194304);p.isBackwards?(_.sibling=l.child,l.child=_):(s=p.last,s!==null?s.sibling=_:l.child=_,p.last=_)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=lt(),s.sibling=null,f=bn.current,ie(bn,y?f&1|2:f&1),St&&Za(l,p.treeForkCount),s):(Qt(l),null);case 22:case 23:return ni(l),h0(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Qt(l),l.subtreeFlags&6&&(l.flags|=8192)):Qt(l),f=l.updateQueue,f!==null&&Rp(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),s!==null&&K(yl),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),es(An),Qt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function VP(s,l){switch(Zv(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return es(An),Ce(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Se(l),null;case 31:if(l.memoizedState!==null){if(ni(l),l.alternate===null)throw Error(r(340));gl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(ni(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));gl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return K(bn),null;case 4:return Ce(),null;case 10:return es(l.type),null;case 22:case 23:return ni(l),h0(),s!==null&&K(yl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return es(An),null;case 25:return null;default:return null}}function CE(s,l){switch(Zv(l),l.tag){case 3:es(An),Ce();break;case 26:case 27:case 5:Se(l);break;case 4:Ce();break;case 31:l.memoizedState!==null&&ni(l);break;case 13:ni(l);break;case 19:K(bn);break;case 10:es(l.type);break;case 22:case 23:ni(l),h0(),s!==null&&K(yl);break;case 24:es(An)}}function Vf(s,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&s)===s){p=void 0;var _=f.create,N=f.inst;p=_(),N.destroy=p}f=f.next}while(f!==y)}}catch(F){Ot(l,l.return,F)}}function no(s,l,f){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var _=y.next;p=_;do{if((p.tag&s)===s){var N=p.inst,F=N.destroy;if(F!==void 0){N.destroy=void 0,y=l;var W=f,oe=F;try{oe()}catch(pe){Ot(y,W,pe)}}}p=p.next}while(p!==_)}}catch(pe){Ot(l,l.return,pe)}}function RE(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{yw(l,f)}catch(p){Ot(s,s.return,p)}}}function DE(s,l,f){f.props=wl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){Ot(s,l,p)}}function jf(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(y){Ot(s,l,y)}}function xa(s,l){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){Ot(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Ot(s,l,y)}else f.current=null}function IE(s){var l=s.type,f=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){Ot(s,s.return,y)}}function H0(s,l,f){try{var p=s.stateNode;i3(p,s.type,f,l),p[dn]=l}catch(y){Ot(s,s.return,y)}}function kE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&co(s.type)||s.tag===4}function $0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&co(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Y0(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Vi));else if(p!==4&&(p===27&&co(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(Y0(s,l,f),s=s.sibling;s!==null;)Y0(s,l,f),s=s.sibling}function Dp(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(p!==4&&(p===27&&co(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Dp(s,l,f),s=s.sibling;s!==null;)Dp(s,l,f),s=s.sibling}function NE(s){var l=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);ar(l,p,f),l[Wt]=s,l[dn]=f}catch(_){Ot(s,s.return,_)}}var as=!1,Dn=!1,X0=!1,ME=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function jP(s,l){if(s=s.containerInfo,gy=Kp,s=HS(s),Uv(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var N=0,F=-1,W=-1,oe=0,pe=0,ye=s,ce=null;t:for(;;){for(var he;ye!==f||y!==0&&ye.nodeType!==3||(F=N+y),ye!==_||p!==0&&ye.nodeType!==3||(W=N+p),ye.nodeType===3&&(N+=ye.nodeValue.length),(he=ye.firstChild)!==null;)ce=ye,ye=he;for(;;){if(ye===s)break t;if(ce===f&&++oe===y&&(F=N),ce===_&&++pe===p&&(W=N),(he=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=he}f=F===-1||W===-1?null:{start:F,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(my={focusedElem:s,selectionRange:f},Kp=!1,Wn=l;Wn!==null;)if(l=Wn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Wn=s;else for(;Wn!==null;){switch(l=Wn,_=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,f=l,y=_.memoizedProps,_=_.memoizedState,p=f.stateNode;try{var Me=wl(f.type,y);s=p.getSnapshotBeforeUpdate(Me,_),p.__reactInternalSnapshotBeforeUpdate=s}catch(He){Ot(f,f.return,He)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)by(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":by(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Wn=s;break}Wn=l.return}}function OE(s,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:os(s,f),p&4&&Vf(5,f);break;case 1:if(os(s,f),p&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Ot(f,f.return,N)}else{var y=wl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Ot(f,f.return,N)}}p&64&&RE(f),p&512&&jf(f,f.return);break;case 3:if(os(s,f),p&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{yw(s,l)}catch(N){Ot(f,f.return,N)}}break;case 27:l===null&&p&4&&NE(f);case 26:case 5:os(s,f),l===null&&p&4&&IE(f),p&512&&jf(f,f.return);break;case 12:os(s,f);break;case 31:os(s,f),p&4&&jE(s,f);break;case 13:os(s,f),p&4&&zE(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=$P.bind(null,f),d3(s,f))));break;case 22:if(p=f.memoizedState!==null||as,!p){l=l!==null&&l.memoizedState!==null||Dn,y=as;var _=Dn;as=p,(Dn=l)&&!_?ls(s,f,(f.subtreeFlags&8772)!==0):os(s,f),as=y,Dn=_}break;case 30:break;default:os(s,f)}}function PE(s){var l=s.alternate;l!==null&&(s.alternate=null,PE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&sc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var tn=null,Pr=!1;function ss(s,l,f){for(f=f.child;f!==null;)VE(s,l,f),f=f.sibling}function VE(s,l,f){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Sr,f)}catch{}switch(f.tag){case 26:Dn||xa(f,l),ss(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Dn||xa(f,l);var p=tn,y=Pr;co(f.type)&&(tn=f.stateNode,Pr=!1),ss(s,l,f),$f(f.stateNode),tn=p,Pr=y;break;case 5:Dn||xa(f,l);case 6:if(p=tn,y=Pr,tn=null,ss(s,l,f),tn=p,Pr=y,tn!==null)if(Pr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(f.stateNode)}catch(_){Ot(f,l,_)}else try{tn.removeChild(f.stateNode)}catch(_){Ot(f,l,_)}break;case 18:tn!==null&&(Pr?(s=tn,RT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),qc(s)):RT(tn,f.stateNode));break;case 4:p=tn,y=Pr,tn=f.stateNode.containerInfo,Pr=!0,ss(s,l,f),tn=p,Pr=y;break;case 0:case 11:case 14:case 15:no(2,f,l),Dn||no(4,f,l),ss(s,l,f);break;case 1:Dn||(xa(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&DE(f,l,p)),ss(s,l,f);break;case 21:ss(s,l,f);break;case 22:Dn=(p=Dn)||f.memoizedState!==null,ss(s,l,f),Dn=p;break;default:ss(s,l,f)}}function jE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qc(s)}catch(f){Ot(l,l.return,f)}}}function zE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qc(s)}catch(f){Ot(l,l.return,f)}}function zP(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new ME),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new ME),l;default:throw Error(r(435,s.tag))}}function Ip(s,l){var f=zP(s);l.forEach(function(p){if(!f.has(p)){f.add(p);var y=YP.bind(null,s,p);p.then(y,y)}})}function Vr(s,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],_=s,N=l,F=N;e:for(;F!==null;){switch(F.tag){case 27:if(co(F.type)){tn=F.stateNode,Pr=!1;break e}break;case 5:tn=F.stateNode,Pr=!1;break e;case 3:case 4:tn=F.stateNode.containerInfo,Pr=!0;break e}F=F.return}if(tn===null)throw Error(r(160));VE(_,N,y),tn=null,Pr=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)LE(l,s),l=l.sibling}var Fi=null;function LE(s,l){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vr(l,s),jr(s),p&4&&(no(3,s,s.return),Vf(3,s),no(5,s,s.return));break;case 1:Vr(l,s),jr(s),p&512&&(Dn||f===null||xa(f,f.return)),p&64&&as&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Fi;if(Vr(l,s),jr(s),p&512&&(Dn||f===null||xa(f,f.return)),p&4){var _=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){e:{p=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":_=y.getElementsByTagName("title")[0],(!_||_[sa]||_[Wt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(p),y.head.insertBefore(_,y.querySelector("head > title"))),ar(_,p,f),_[Wt]=s,En(_),p=_;break e;case"link":var N=LT("link","href",y).get(p+(f.href||""));if(N){for(var F=0;F<N.length;F++)if(_=N[F],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(F,1);break t}}_=y.createElement(p),ar(_,p,f),y.head.appendChild(_);break;case"meta":if(N=LT("meta","content",y).get(p+(f.content||""))){for(F=0;F<N.length;F++)if(_=N[F],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(F,1);break t}}_=y.createElement(p),ar(_,p,f),y.head.appendChild(_);break;default:throw Error(r(468,p))}_[Wt]=s,En(_),p=_}s.stateNode=p}else BT(y,s.type,s.stateNode);else s.stateNode=zT(y,p,s.memoizedProps);else _!==p?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,p===null?BT(y,s.type,s.stateNode):zT(y,p,s.memoizedProps)):p===null&&s.stateNode!==null&&H0(s,s.memoizedProps,f.memoizedProps)}break;case 27:Vr(l,s),jr(s),p&512&&(Dn||f===null||xa(f,f.return)),f!==null&&p&4&&H0(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Vr(l,s),jr(s),p&512&&(Dn||f===null||xa(f,f.return)),s.flags&32){y=s.stateNode;try{Or(y,"")}catch(Me){Ot(s,s.return,Me)}}p&4&&s.stateNode!=null&&(y=s.memoizedProps,H0(s,y,f!==null?f.memoizedProps:y)),p&1024&&(X0=!0);break;case 6:if(Vr(l,s),jr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(Me){Ot(s,s.return,Me)}}break;case 3:if($p=null,y=Fi,Fi=qp(l.containerInfo),Vr(l,s),Fi=y,jr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{qc(l.containerInfo)}catch(Me){Ot(s,s.return,Me)}X0&&(X0=!1,BE(s));break;case 4:p=Fi,Fi=qp(s.stateNode.containerInfo),Vr(l,s),jr(s),Fi=p;break;case 12:Vr(l,s),jr(s);break;case 31:Vr(l,s),jr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Ip(s,p)));break;case 13:Vr(l,s),jr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Np=lt()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Ip(s,p)));break;case 22:y=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,oe=as,pe=Dn;if(as=oe||y,Dn=pe||W,Vr(l,s),Dn=pe,as=oe,jr(s),p&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||W||as||Dn||El(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){W=f=l;try{if(_=W.stateNode,y)N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{F=W.stateNode;var ye=W.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;F.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Me){Ot(W,W.return,Me)}}}else if(l.tag===6){if(f===null){W=l;try{W.stateNode.nodeValue=y?"":W.memoizedProps}catch(Me){Ot(W,W.return,Me)}}}else if(l.tag===18){if(f===null){W=l;try{var he=W.stateNode;y?DT(he,!0):DT(W.stateNode,!1)}catch(Me){Ot(W,W.return,Me)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Ip(s,f))));break;case 19:Vr(l,s),jr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Ip(s,p)));break;case 30:break;case 21:break;default:Vr(l,s),jr(s)}}function jr(s){var l=s.flags;if(l&2){try{for(var f,p=s.return;p!==null;){if(kE(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,_=$0(s);Dp(s,_,y);break;case 5:var N=f.stateNode;f.flags&32&&(Or(N,""),f.flags&=-33);var F=$0(s);Dp(s,F,N);break;case 3:case 4:var W=f.stateNode.containerInfo,oe=$0(s);Y0(s,oe,W);break;default:throw Error(r(161))}}catch(pe){Ot(s,s.return,pe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function BE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;BE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function os(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)OE(s,l.alternate,l),l=l.sibling}function El(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:no(4,l,l.return),El(l);break;case 1:xa(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&DE(l,l.return,f),El(l);break;case 27:$f(l.stateNode);case 26:case 5:xa(l,l.return),El(l);break;case 22:l.memoizedState===null&&El(l);break;case 30:El(l);break;default:El(l)}s=s.sibling}}function ls(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=s,_=l,N=_.flags;switch(_.tag){case 0:case 11:case 15:ls(y,_,f),Vf(4,_);break;case 1:if(ls(y,_,f),p=_,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(oe){Ot(p,p.return,oe)}if(p=_,y=p.updateQueue,y!==null){var F=p.stateNode;try{var W=y.shared.hiddenCallbacks;if(W!==null)for(y.shared.hiddenCallbacks=null,y=0;y<W.length;y++)vw(W[y],F)}catch(oe){Ot(p,p.return,oe)}}f&&N&64&&RE(_),jf(_,_.return);break;case 27:NE(_);case 26:case 5:ls(y,_,f),f&&p===null&&N&4&&IE(_),jf(_,_.return);break;case 12:ls(y,_,f);break;case 31:ls(y,_,f),f&&N&4&&jE(y,_);break;case 13:ls(y,_,f),f&&N&4&&zE(y,_);break;case 22:_.memoizedState===null&&ls(y,_,f),jf(_,_.return);break;case 30:break;default:ls(y,_,f)}l=l.sibling}}function W0(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&wf(f))}function K0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wf(s))}function Gi(s,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)UE(s,l,f,p),l=l.sibling}function UE(s,l,f,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gi(s,l,f,p),y&2048&&Vf(9,l);break;case 1:Gi(s,l,f,p);break;case 3:Gi(s,l,f,p),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wf(s)));break;case 12:if(y&2048){Gi(s,l,f,p),s=l.stateNode;try{var _=l.memoizedProps,N=_.id,F=_.onPostCommit;typeof F=="function"&&F(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){Ot(l,l.return,W)}}else Gi(s,l,f,p);break;case 31:Gi(s,l,f,p);break;case 13:Gi(s,l,f,p);break;case 23:break;case 22:_=l.stateNode,N=l.alternate,l.memoizedState!==null?_._visibility&2?Gi(s,l,f,p):zf(s,l):_._visibility&2?Gi(s,l,f,p):(_._visibility|=2,Mc(s,l,f,p,(l.subtreeFlags&10256)!==0||!1)),y&2048&&W0(N,l);break;case 24:Gi(s,l,f,p),y&2048&&K0(l.alternate,l);break;default:Gi(s,l,f,p)}}function Mc(s,l,f,p,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=s,N=l,F=f,W=p,oe=N.flags;switch(N.tag){case 0:case 11:case 15:Mc(_,N,F,W,y),Vf(8,N);break;case 23:break;case 22:var pe=N.stateNode;N.memoizedState!==null?pe._visibility&2?Mc(_,N,F,W,y):zf(_,N):(pe._visibility|=2,Mc(_,N,F,W,y)),y&&oe&2048&&W0(N.alternate,N);break;case 24:Mc(_,N,F,W,y),y&&oe&2048&&K0(N.alternate,N);break;default:Mc(_,N,F,W,y)}l=l.sibling}}function zf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,p=l,y=p.flags;switch(p.tag){case 22:zf(f,p),y&2048&&W0(p.alternate,p);break;case 24:zf(f,p),y&2048&&K0(p.alternate,p);break;default:zf(f,p)}l=l.sibling}}var Lf=8192;function Oc(s,l,f){if(s.subtreeFlags&Lf)for(s=s.child;s!==null;)FE(s,l,f),s=s.sibling}function FE(s,l,f){switch(s.tag){case 26:Oc(s,l,f),s.flags&Lf&&s.memoizedState!==null&&E3(f,Fi,s.memoizedState,s.memoizedProps);break;case 5:Oc(s,l,f);break;case 3:case 4:var p=Fi;Fi=qp(s.stateNode.containerInfo),Oc(s,l,f),Fi=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Lf,Lf=16777216,Oc(s,l,f),Lf=p):Oc(s,l,f));break;default:Oc(s,l,f)}}function GE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Bf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];Wn=p,HE(p,s)}GE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qE(s),s=s.sibling}function qE(s){switch(s.tag){case 0:case 11:case 15:Bf(s),s.flags&2048&&no(9,s,s.return);break;case 3:Bf(s);break;case 12:Bf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,kp(s)):Bf(s);break;default:Bf(s)}}function kp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];Wn=p,HE(p,s)}GE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:no(8,l,l.return),kp(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,kp(l));break;default:kp(l)}s=s.sibling}}function HE(s,l){for(;Wn!==null;){var f=Wn;switch(f.tag){case 0:case 11:case 15:no(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:wf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Wn=p;else e:for(f=s;Wn!==null;){p=Wn;var y=p.sibling,_=p.return;if(PE(p),p===f){Wn=null;break e}if(y!==null){y.return=_,Wn=y;break e}Wn=_}}}var LP={getCacheForType:function(s){var l=rr(An),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return rr(An).controller.signal}},BP=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Gt=null,ht=null,vt=0,Mt=0,ri=null,ro=!1,Pc=!1,Q0=!1,cs=0,pn=0,io=0,Tl=0,Z0=0,ii=0,Vc=0,Uf=null,zr=null,J0=!1,Np=0,$E=0,Mp=1/0,Op=null,ao=null,zn=0,so=null,jc=null,us=0,ey=0,ty=null,YE=null,Ff=0,ny=null;function ai(){return(Dt&2)!==0&&vt!==0?vt&-vt:H.T!==null?ly():fi()}function XE(){if(ii===0)if((vt&536870912)===0||St){var s=Yt;Yt<<=1,(Yt&3932160)===0&&(Yt=262144),ii=s}else ii=536870912;return s=ti.current,s!==null&&(s.flags|=32),ii}function Lr(s,l,f){(s===Gt&&(Mt===2||Mt===9)||s.cancelPendingCommit!==null)&&(zc(s,0),oo(s,vt,ii,!1)),tt(s,f),((Dt&2)===0||s!==Gt)&&(s===Gt&&((Dt&2)===0&&(Tl|=f),pn===4&&oo(s,vt,ii,!1)),_a(s))}function WE(s,l,f){if((Dt&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&s.expiredLanes)===0||mt(s,l),y=p?GP(s,l):iy(s,l,!0),_=p;do{if(y===0){Pc&&!p&&oo(s,l,0,!1);break}else{if(f=s.current.alternate,_&&!UP(f)){y=iy(s,l,!1),_=!1;continue}if(y===2){if(_=l,s.errorRecoveryDisabledLanes&_)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var F=s;y=Uf;var W=F.current.memoizedState.isDehydrated;if(W&&(zc(F,N).flags|=256),N=iy(F,N,!1),N!==2){if(Q0&&!W){F.errorRecoveryDisabledLanes|=_,Tl|=_,y=4;break e}_=zr,zr=y,_!==null&&(zr===null?zr=_:zr.push.apply(zr,_))}y=N}if(_=!1,y!==2)continue}}if(y===1){zc(s,0),oo(s,l,0,!0);break}e:{switch(p=s,_=y,_){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:oo(p,l,ii,!ro);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Np+300-lt(),10<y)){if(oo(p,l,ii,!ro),Ft(p,0,!0)!==0)break e;us=l,p.timeoutHandle=AT(KE.bind(null,p,f,zr,Op,J0,l,ii,Tl,Vc,ro,_,"Throttled",-0,0),y);break e}KE(p,f,zr,Op,J0,l,ii,Tl,Vc,ro,_,null,-0,0)}}break}while(!0);_a(s)}function KE(s,l,f,p,y,_,N,F,W,oe,pe,ye,ce,he){if(s.timeoutHandle=-1,ye=l.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},FE(l,_,ye);var Me=(_&62914560)===_?Np-lt():(_&4194048)===_?$E-lt():0;if(Me=T3(ye,Me),Me!==null){us=_,s.cancelPendingCommit=Me(iT.bind(null,s,l,_,f,p,y,N,F,W,pe,ye,null,ce,he)),oo(s,_,N,!oe);return}}iT(s,l,_,f,p,y,N,F,W)}function UP(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],_=y.getSnapshot;y=y.value;try{if(!Jr(_(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function oo(s,l,f,p){l&=~Z0,l&=~Tl,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var y=l;0<y;){var _=31-$t(y),N=1<<_;p[_]=-1,y&=~N}f!==0&&fn(s,f,l)}function Pp(){return(Dt&6)===0?(Gf(0),!1):!0}function ry(){if(ht!==null){if(Mt===0)var s=ht.return;else s=ht,Ja=ml=null,b0(s),Rc=null,Tf=0,s=ht;for(;s!==null;)CE(s.alternate,s),s=s.return;ht=null}}function zc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,o3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),us=0,ry(),Gt=s,ht=f=Qa(s.current,null),vt=l,Mt=0,ri=null,ro=!1,Pc=mt(s,l),Q0=!1,Vc=ii=Z0=Tl=io=pn=0,zr=Uf=null,J0=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var y=31-$t(p),_=1<<y;l|=s[y],p&=~_}return cs=l,np(),f}function QE(s,l){at=null,H.H=Mf,l===Cc||l===up?(l=hw(),Mt=3):l===o0?(l=hw(),Mt=4):Mt=l===P0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ri=l,ht===null&&(pn=1,Ep(s,vi(l,s.current)))}function ZE(){var s=ti.current;return s===null?!0:(vt&4194048)===vt?_i===null:(vt&62914560)===vt||(vt&536870912)!==0?s===_i:!1}function JE(){var s=H.H;return H.H=Mf,s===null?Mf:s}function eT(){var s=H.A;return H.A=LP,s}function Vp(){pn=4,ro||(vt&4194048)!==vt&&ti.current!==null||(Pc=!0),(io&134217727)===0&&(Tl&134217727)===0||Gt===null||oo(Gt,vt,ii,!1)}function iy(s,l,f){var p=Dt;Dt|=2;var y=JE(),_=eT();(Gt!==s||vt!==l)&&(Op=null,zc(s,l)),l=!1;var N=pn;e:do try{if(Mt!==0&&ht!==null){var F=ht,W=ri;switch(Mt){case 8:ry(),N=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(l=!0);var oe=Mt;if(Mt=0,ri=null,Lc(s,F,W,oe),f&&Pc){N=0;break e}break;default:oe=Mt,Mt=0,ri=null,Lc(s,F,W,oe)}}FP(),N=pn;break}catch(pe){QE(s,pe)}while(!0);return l&&s.shellSuspendCounter++,Ja=ml=null,Dt=p,H.H=y,H.A=_,ht===null&&(Gt=null,vt=0,np()),N}function FP(){for(;ht!==null;)tT(ht)}function GP(s,l){var f=Dt;Dt|=2;var p=JE(),y=eT();Gt!==s||vt!==l?(Op=null,Mp=lt()+500,zc(s,l)):Pc=mt(s,l);e:do try{if(Mt!==0&&ht!==null){l=ht;var _=ri;t:switch(Mt){case 1:Mt=0,ri=null,Lc(s,l,_,1);break;case 2:case 9:if(fw(_)){Mt=0,ri=null,nT(l);break}l=function(){Mt!==2&&Mt!==9||Gt!==s||(Mt=7),_a(s)},_.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:fw(_)?(Mt=0,ri=null,nT(l)):(Mt=0,ri=null,Lc(s,l,_,7));break;case 5:var N=null;switch(ht.tag){case 26:N=ht.memoizedState;case 5:case 27:var F=ht;if(N?UT(N):F.stateNode.complete){Mt=0,ri=null;var W=F.sibling;if(W!==null)ht=W;else{var oe=F.return;oe!==null?(ht=oe,jp(oe)):ht=null}break t}}Mt=0,ri=null,Lc(s,l,_,5);break;case 6:Mt=0,ri=null,Lc(s,l,_,6);break;case 8:ry(),pn=6;break e;default:throw Error(r(462))}}qP();break}catch(pe){QE(s,pe)}while(!0);return Ja=ml=null,H.H=p,H.A=y,Dt=f,ht!==null?0:(Gt=null,vt=0,np(),pn)}function qP(){for(;ht!==null&&!Jt();)tT(ht)}function tT(s){var l=TE(s.alternate,s,cs);s.memoizedProps=s.pendingProps,l===null?jp(s):ht=l}function nT(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=bE(f,l,l.pendingProps,l.type,void 0,vt);break;case 11:l=bE(f,l,l.pendingProps,l.type.render,l.ref,vt);break;case 5:b0(l);default:CE(f,l),l=ht=ew(l,cs),l=TE(f,l,cs)}s.memoizedProps=s.pendingProps,l===null?jp(s):ht=l}function Lc(s,l,f,p){Ja=ml=null,b0(l),Rc=null,Tf=0;var y=l.return;try{if(NP(s,y,l,f,vt)){pn=1,Ep(s,vi(f,s.current)),ht=null;return}}catch(_){if(y!==null)throw ht=y,_;pn=1,Ep(s,vi(f,s.current)),ht=null;return}l.flags&32768?(St||p===1?s=!0:Pc||(vt&536870912)!==0?s=!1:(ro=s=!0,(p===2||p===9||p===3||p===6)&&(p=ti.current,p!==null&&p.tag===13&&(p.flags|=16384))),rT(l,s)):jp(l)}function jp(s){var l=s;do{if((l.flags&32768)!==0){rT(l,ro);return}s=l.return;var f=PP(l.alternate,l,cs);if(f!==null){ht=f;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=s}while(l!==null);pn===0&&(pn=5)}function rT(s,l){do{var f=VP(s.alternate,s);if(f!==null){f.flags&=32767,ht=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){ht=s;return}ht=s=f}while(s!==null);pn=6,ht=null}function iT(s,l,f,p,y,_,N,F,W){s.cancelPendingCommit=null;do zp();while(zn!==0);if((Dt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(_=l.lanes|l.childLanes,_|=$v,dr(s,f,_,N,F,W),s===Gt&&(ht=Gt=null,vt=0),jc=l,so=s,us=f,ey=_,ty=y,YE=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,XP(kr,function(){return cT(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,y=Y.p,Y.p=2,N=Dt,Dt|=4;try{jP(s,l,f)}finally{Dt=N,Y.p=y,H.T=p}}zn=1,aT(),sT(),oT()}}function aT(){if(zn===1){zn=0;var s=so,l=jc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var p=Y.p;Y.p=2;var y=Dt;Dt|=4;try{LE(l,s);var _=my,N=HS(s.containerInfo),F=_.focusedElem,W=_.selectionRange;if(N!==F&&F&&F.ownerDocument&&qS(F.ownerDocument.documentElement,F)){if(W!==null&&Uv(F)){var oe=W.start,pe=W.end;if(pe===void 0&&(pe=oe),"selectionStart"in F)F.selectionStart=oe,F.selectionEnd=Math.min(pe,F.value.length);else{var ye=F.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Me=F.textContent.length,He=Math.min(W.start,Me),Lt=W.end===void 0?He:Math.min(W.end,Me);!he.extend&&He>Lt&&(N=Lt,Lt=He,He=N);var ne=GS(F,He),ee=GS(F,Lt);if(ne&&ee&&(he.rangeCount!==1||he.anchorNode!==ne.node||he.anchorOffset!==ne.offset||he.focusNode!==ee.node||he.focusOffset!==ee.offset)){var se=ye.createRange();se.setStart(ne.node,ne.offset),he.removeAllRanges(),He>Lt?(he.addRange(se),he.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),he.addRange(se))}}}}for(ye=[],he=F;he=he.parentNode;)he.nodeType===1&&ye.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<ye.length;F++){var me=ye[F];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Kp=!!gy,my=gy=null}finally{Dt=y,Y.p=p,H.T=f}}s.current=l,zn=2}}function sT(){if(zn===2){zn=0;var s=so,l=jc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var p=Y.p;Y.p=2;var y=Dt;Dt|=4;try{OE(s,l.alternate,l)}finally{Dt=y,Y.p=p,H.T=f}}zn=3}}function oT(){if(zn===4||zn===3){zn=0,rn();var s=so,l=jc,f=us,p=YE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?zn=5:(zn=0,jc=so=null,lT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(ao=null),Xt(f),l=l.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Sr,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=H.T,y=Y.p,Y.p=2,H.T=null;try{for(var _=s.onRecoverableError,N=0;N<p.length;N++){var F=p[N];_(F.value,{componentStack:F.stack})}}finally{H.T=l,Y.p=y}}(us&3)!==0&&zp(),_a(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===ny?Ff++:(Ff=0,ny=s):Ff=0,Gf(0)}}function lT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,wf(l)))}function zp(){return aT(),sT(),oT(),cT()}function cT(){if(zn!==5)return!1;var s=so,l=ey;ey=0;var f=Xt(us),p=H.T,y=Y.p;try{Y.p=32>f?32:f,H.T=null,f=ty,ty=null;var _=so,N=us;if(zn=0,jc=so=null,us=0,(Dt&6)!==0)throw Error(r(331));var F=Dt;if(Dt|=4,qE(_.current),UE(_,_.current,N,f),Dt=F,Gf(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Sr,_)}catch{}return!0}finally{Y.p=y,H.T=p,lT(s,l)}}function uT(s,l,f){l=vi(f,l),l=O0(s.stateNode,l,2),s=Js(s,l,2),s!==null&&(tt(s,2),_a(s))}function Ot(s,l,f){if(s.tag===3)uT(s,s,f);else for(;l!==null;){if(l.tag===3){uT(l,s,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ao===null||!ao.has(p))){s=vi(f,s),f=fE(2),p=Js(l,f,2),p!==null&&(dE(f,p,l,s),tt(p,2),_a(p));break}}l=l.return}}function ay(s,l,f){var p=s.pingCache;if(p===null){p=s.pingCache=new BP;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(f)||(Q0=!0,y.add(f),s=HP.bind(null,s,l,f),l.then(s,s))}function HP(s,l,f){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Gt===s&&(vt&f)===f&&(pn===4||pn===3&&(vt&62914560)===vt&&300>lt()-Np?(Dt&2)===0&&zc(s,0):Z0|=f,Vc===vt&&(Vc=0)),_a(s)}function fT(s,l){l===0&&(l=aa()),s=hl(s,l),s!==null&&(tt(s,l),_a(s))}function $P(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),fT(s,f)}function YP(s,l){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),fT(s,f)}function XP(s,l){return qe(s,l)}var Lp=null,Bc=null,sy=!1,Bp=!1,oy=!1,lo=0;function _a(s){s!==Bc&&s.next===null&&(Bc===null?Lp=Bc=s:Bc=Bc.next=s),Bp=!0,sy||(sy=!0,KP())}function Gf(s,l){if(!oy&&Bp){oy=!0;do for(var f=!1,p=Lp;p!==null;){if(s!==0){var y=p.pendingLanes;if(y===0)var _=0;else{var N=p.suspendedLanes,F=p.pingedLanes;_=(1<<31-$t(42|s)+1)-1,_&=y&~(N&~F),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,gT(p,_))}else _=vt,_=Ft(p,p===Gt?_:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(_&3)===0||mt(p,_)||(f=!0,gT(p,_));p=p.next}while(f);oy=!1}}function WP(){dT()}function dT(){Bp=sy=!1;var s=0;lo!==0&&s3()&&(s=lo);for(var l=lt(),f=null,p=Lp;p!==null;){var y=p.next,_=hT(p,l);_===0?(p.next=null,f===null?Lp=y:f.next=y,y===null&&(Bc=f)):(f=p,(s!==0||(_&3)!==0)&&(Bp=!0)),p=y}zn!==0&&zn!==5||Gf(s),lo!==0&&(lo=0)}function hT(s,l){for(var f=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var N=31-$t(_),F=1<<N,W=y[N];W===-1?((F&f)===0||(F&p)!==0)&&(y[N]=Kr(F,l)):W<=l&&(s.expiredLanes|=F),_&=~F}if(l=Gt,f=vt,f=Ft(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===l&&(Mt===2||Mt===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&It(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||mt(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(p!==null&&It(p),Xt(f)){case 2:case 8:f=Zn;break;case 32:f=kr;break;case 268435456:f=Ya;break;default:f=kr}return p=pT.bind(null,s),f=qe(f,p),s.callbackPriority=l,s.callbackNode=f,l}return p!==null&&p!==null&&It(p),s.callbackPriority=2,s.callbackNode=null,2}function pT(s,l){if(zn!==0&&zn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(zp()&&s.callbackNode!==f)return null;var p=vt;return p=Ft(s,s===Gt?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(WE(s,p,l),hT(s,lt()),s.callbackNode!=null&&s.callbackNode===f?pT.bind(null,s):null)}function gT(s,l){if(zp())return null;WE(s,l,!0)}function KP(){l3(function(){(Dt&6)!==0?qe(Qn,WP):dT()})}function ly(){if(lo===0){var s=Tc;s===0&&(s=dt,dt<<=1,(dt&261888)===0&&(dt=256)),lo=s}return lo}function mT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uc(""+s)}function vT(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function QP(s,l,f,p,y){if(l==="submit"&&f&&f.stateNode===y){var _=mT((y[dn]||null).action),N=p.submitter;N&&(l=(l=N[dn]||null)?mT(l.formAction):N.getAttribute("formAction"),l!==null&&(_=l,N=null));var F=new pa("action","action",null,p,y);s.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(lo!==0){var W=N?vT(y,N):new FormData(y);R0(f,{pending:!0,data:W,method:y.method,action:_},null,W)}}else typeof _=="function"&&(F.preventDefault(),W=N?vT(y,N):new FormData(y),R0(f,{pending:!0,data:W,method:y.method,action:_},_,W))},currentTarget:y}]})}}for(var cy=0;cy<Hv.length;cy++){var uy=Hv[cy],ZP=uy.toLowerCase(),JP=uy[0].toUpperCase()+uy.slice(1);Ui(ZP,"on"+JP)}Ui(XS,"onAnimationEnd"),Ui(WS,"onAnimationIteration"),Ui(KS,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(gP,"onTransitionRun"),Ui(mP,"onTransitionStart"),Ui(vP,"onTransitionCancel"),Ui(QS,"onTransitionEnd"),ua("onMouseEnter",["mouseout","mouseover"]),ua("onMouseLeave",["mouseout","mouseover"]),ua("onPointerEnter",["pointerout","pointerover"]),ua("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qf));function yT(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],y=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var N=p.length-1;0<=N;N--){var F=p[N],W=F.instance,oe=F.currentTarget;if(F=F.listener,W!==_&&y.isPropagationStopped())break e;_=F,y.currentTarget=oe;try{_(y)}catch(pe){tp(pe)}y.currentTarget=null,_=W}else for(N=0;N<p.length;N++){if(F=p[N],W=F.instance,oe=F.currentTarget,F=F.listener,W!==_&&y.isPropagationStopped())break e;_=F,y.currentTarget=oe;try{_(y)}catch(pe){tp(pe)}y.currentTarget=null,_=W}}}}function pt(s,l){var f=l[ac];f===void 0&&(f=l[ac]=new Set);var p=s+"__bubble";f.has(p)||(bT(l,s,2,!1),f.add(p))}function fy(s,l,f){var p=0;l&&(p|=4),bT(f,s,p,l)}var Up="_reactListening"+Math.random().toString(36).slice(2);function dy(s){if(!s[Up]){s[Up]=!0,tf.forEach(function(f){f!=="selectionchange"&&(e3.has(f)||fy(f,!1,s),fy(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Up]||(l[Up]=!0,fy("selectionchange",!1,l))}}function bT(s,l,f,p){switch(XT(l)){case 2:var y=R3;break;case 8:y=D3;break;default:y=Cy}f=y.bind(null,l,f,s),y=void 0,!al||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function hy(s,l,f,p,y){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var F=p.stateNode.containerInfo;if(F===y)break;if(N===4)for(N=p.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===y)return;N=N.return}for(;F!==null;){if(N=oa(F),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){p=_=N;continue e}F=F.parentNode}}p=p.return}Gs(function(){var oe=_,pe=hi(f),ye=[];e:{var ce=ZS.get(s);if(ce!==void 0){var he=pa,Me=s;switch(s){case"keypress":if(ol(f)===0)break e;case"keydown":case"keyup":he=Zh;break;case"focusin":Me="focus",he=cl;break;case"focusout":Me="blur",he=cl;break;case"beforeblur":case"afterblur":he=cl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=R;break;case XS:case WS:case KS:he=Hh;break;case QS:he=G;break;case"scroll":case"scrollend":he=pf;break;case"wheel":he=de;break;case"copy":case"cut":case"paste":he=$h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Ka;break;case"toggle":case"beforetoggle":he=it}var He=(l&4)!==0,Lt=!He&&(s==="scroll"||s==="scrollend"),ne=He?ce!==null?ce+"Capture":null:ce;He=[];for(var ee=oe,se;ee!==null;){var me=ee;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||ne===null||(me=ji(ee,ne),me!=null&&He.push(Hf(ee,me,se))),Lt)break;ee=ee.return}0<He.length&&(ce=new he(ce,Me,null,f,pe),ye.push({event:ce,listeners:He}))}}if((l&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ce&&f!==ff&&(Me=f.relatedTarget||f.fromElement)&&(oa(Me)||Me[wr]))break e;if((he||ce)&&(ce=pe.window===pe?pe:(ce=pe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Me=f.relatedTarget||f.toElement,he=oe,Me=Me?oa(Me):null,Me!==null&&(Lt=a(Me),He=Me.tag,Me!==Lt||He!==5&&He!==27&&He!==6)&&(Me=null)):(he=null,Me=oe),he!==Me)){if(He=gf,me="onMouseLeave",ne="onMouseEnter",ee="mouse",(s==="pointerout"||s==="pointerover")&&(He=Ka,me="onPointerLeave",ne="onPointerEnter",ee="pointer"),Lt=he==null?ce:Qr(he),se=Me==null?ce:Qr(Me),ce=new He(me,ee+"leave",he,f,pe),ce.target=Lt,ce.relatedTarget=se,me=null,oa(pe)===oe&&(He=new He(ne,ee+"enter",Me,f,pe),He.target=se,He.relatedTarget=Lt,me=He),Lt=me,he&&Me)t:{for(He=t3,ne=he,ee=Me,se=0,me=ne;me;me=He(me))se++;me=0;for(var Le=ee;Le;Le=He(Le))me++;for(;0<se-me;)ne=He(ne),se--;for(;0<me-se;)ee=He(ee),me--;for(;se--;){if(ne===ee||ee!==null&&ne===ee.alternate){He=ne;break t}ne=He(ne),ee=He(ee)}He=null}else He=null;he!==null&&xT(ye,ce,he,He,!1),Me!==null&&Lt!==null&&xT(ye,Lt,Me,He,!0)}}e:{if(ce=oe?Qr(oe):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var At=jS;else if(PS(ce))if(zS)At=dP;else{At=uP;var Oe=cP}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&cc(oe.elementType)&&(At=jS):At=fP;if(At&&(At=At(s,oe))){VS(ye,At,f,pe);break e}Oe&&Oe(s,ce,oe),s==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&lf(ce,"number",ce.value)}switch(Oe=oe?Qr(oe):window,s){case"focusin":(PS(Oe)||Oe.contentEditable==="true")&&(vc=Oe,Fv=oe,xf=null);break;case"focusout":xf=Fv=vc=null;break;case"mousedown":Gv=!0;break;case"contextmenu":case"mouseup":case"dragend":Gv=!1,$S(ye,f,pe);break;case"selectionchange":if(pP)break;case"keydown":case"keyup":$S(ye,f,pe)}var ut;if(Rt)e:{switch(s){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else mc?ul(s,f)&&(yt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(yt="onCompositionStart");yt&&(va&&f.locale!=="ko"&&(mc||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&mc&&(ut=hf()):(ha=pe,df="value"in ha?ha.value:ha.textContent,mc=!0)),Oe=Fp(oe,yt),0<Oe.length&&(yt=new ma(yt,s,null,f,pe),ye.push({event:yt,listeners:Oe}),ut?yt.data=ut:(ut=gc(f),ut!==null&&(yt.data=ut)))),(ut=gi?aP(s,f):sP(s,f))&&(yt=Fp(oe,"onBeforeInput"),0<yt.length&&(Oe=new ma("onBeforeInput","beforeinput",null,f,pe),ye.push({event:Oe,listeners:yt}),Oe.data=ut)),QP(ye,s,oe,f,pe)}yT(ye,l)})}function Hf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Fp(s,l){for(var f=l+"Capture",p=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ji(s,f),y!=null&&p.unshift(Hf(s,y,_)),y=ji(s,l),y!=null&&p.push(Hf(s,y,_))),s.tag===3)return p;s=s.return}return[]}function t3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function xT(s,l,f,p,y){for(var _=l._reactName,N=[];f!==null&&f!==p;){var F=f,W=F.alternate,oe=F.stateNode;if(F=F.tag,W!==null&&W===p)break;F!==5&&F!==26&&F!==27||oe===null||(W=oe,y?(oe=ji(f,_),oe!=null&&N.unshift(Hf(f,oe,W))):y||(oe=ji(f,_),oe!=null&&N.push(Hf(f,oe,W)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var n3=/\r\n?/g,r3=/\u0000|\uFFFD/g;function _T(s){return(typeof s=="string"?s:""+s).replace(n3,`
`).replace(r3,"")}function ST(s,l){return l=_T(l),_T(s)===l}function zt(s,l,f,p,y,_){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Or(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Or(s,""+p);break;case"className":Zr(s,"class",p);break;case"tabIndex":Zr(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(s,f,p);break;case"style":uf(s,p,_);break;case"data":if(l!=="object"){Zr(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=uc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(l!=="input"&&zt(s,l,"name",y.name,y,null),zt(s,l,"formEncType",y.formEncType,y,null),zt(s,l,"formMethod",y.formMethod,y,null),zt(s,l,"formTarget",y.formTarget,y,null)):(zt(s,l,"encType",y.encType,y,null),zt(s,l,"method",y.method,y,null),zt(s,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=uc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=Vi);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=uc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":pt("beforetoggle",s),pt("toggle",s),oc(s,"popover",p);break;case"xlinkActuate":Tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Tn(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Tn(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Tn(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Tn(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":oc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Fh.get(f)||f,oc(s,f,p))}}function py(s,l,f,p,y,_){switch(f){case"style":uf(s,p,_);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Or(s,p):(typeof p=="number"||typeof p=="bigint")&&Or(s,""+p);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nf.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),_=s[dn]||null,_=_!=null?_[f]:null,typeof _=="function"&&s.removeEventListener(l,_,y),typeof p=="function")){typeof _!="function"&&_!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,p,y);break e}f in s?s[f]=p:p===!0?s.setAttribute(f,""):oc(s,f,p)}}}function ar(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var p=!1,y=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var N=f[_];if(N!=null)switch(_){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,_,N,f,null)}}y&&zt(s,l,"srcSet",f.srcSet,f,null),p&&zt(s,l,"src",f.src,f,null);return;case"input":pt("invalid",s);var F=_=N=y=null,W=null,oe=null;for(p in f)if(f.hasOwnProperty(p)){var pe=f[p];if(pe!=null)switch(p){case"name":y=pe;break;case"type":N=pe;break;case"checked":W=pe;break;case"defaultChecked":oe=pe;break;case"value":_=pe;break;case"defaultValue":F=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:zt(s,l,p,pe,f,null)}}Lh(s,_,F,W,oe,N,y,!1);return;case"select":pt("invalid",s),p=N=_=null;for(y in f)if(f.hasOwnProperty(y)&&(F=f[y],F!=null))switch(y){case"value":_=F;break;case"defaultValue":N=F;break;case"multiple":p=F;default:zt(s,l,y,F,f,null)}l=_,f=N,s.multiple=!!p,l!=null?Ls(s,!!p,l,!1):f!=null&&Ls(s,!!p,f,!0);return;case"textarea":pt("invalid",s),_=y=p=null;for(N in f)if(f.hasOwnProperty(N)&&(F=f[N],F!=null))switch(N){case"value":p=F;break;case"defaultValue":y=F;break;case"children":_=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:zt(s,l,N,F,f,null)}Bs(s,p,y,_);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(p=f[W],p!=null))switch(W){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:zt(s,l,W,p,f,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(p=0;p<qf.length;p++)pt(qf[p],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in f)if(f.hasOwnProperty(oe)&&(p=f[oe],p!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,oe,p,f,null)}return;default:if(cc(l)){for(pe in f)f.hasOwnProperty(pe)&&(p=f[pe],p!==void 0&&py(s,l,pe,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&zt(s,l,F,p,f,null))}function i3(s,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,N=null,F=null,W=null,oe=null,pe=null;for(he in f){var ye=f[he];if(f.hasOwnProperty(he)&&ye!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":W=ye;default:p.hasOwnProperty(he)||zt(s,l,he,null,p,ye)}}for(var ce in p){var he=p[ce];if(ye=f[ce],p.hasOwnProperty(ce)&&(he!=null||ye!=null))switch(ce){case"type":_=he;break;case"name":y=he;break;case"checked":oe=he;break;case"defaultChecked":pe=he;break;case"value":N=he;break;case"defaultValue":F=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:he!==ye&&zt(s,l,ce,he,p,ye)}}lc(s,N,F,W,oe,pe,_,y);return;case"select":he=N=F=ce=null;for(_ in f)if(W=f[_],f.hasOwnProperty(_)&&W!=null)switch(_){case"value":break;case"multiple":he=W;default:p.hasOwnProperty(_)||zt(s,l,_,null,p,W)}for(y in p)if(_=p[y],W=f[y],p.hasOwnProperty(y)&&(_!=null||W!=null))switch(y){case"value":ce=_;break;case"defaultValue":F=_;break;case"multiple":N=_;default:_!==W&&zt(s,l,y,_,p,W)}l=F,f=N,p=he,ce!=null?Ls(s,!!f,ce,!1):!!p!=!!f&&(l!=null?Ls(s,!!f,l,!0):Ls(s,!!f,f?[]:"",!1));return;case"textarea":he=ce=null;for(F in f)if(y=f[F],f.hasOwnProperty(F)&&y!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:zt(s,l,F,null,p,y)}for(N in p)if(y=p[N],_=f[N],p.hasOwnProperty(N)&&(y!=null||_!=null))switch(N){case"value":ce=y;break;case"defaultValue":he=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==_&&zt(s,l,N,y,p,_)}Bh(s,ce,he);return;case"option":for(var Me in f)if(ce=f[Me],f.hasOwnProperty(Me)&&ce!=null&&!p.hasOwnProperty(Me))switch(Me){case"selected":s.selected=!1;break;default:zt(s,l,Me,null,p,ce)}for(W in p)if(ce=p[W],he=f[W],p.hasOwnProperty(W)&&ce!==he&&(ce!=null||he!=null))switch(W){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:zt(s,l,W,ce,p,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)ce=f[He],f.hasOwnProperty(He)&&ce!=null&&!p.hasOwnProperty(He)&&zt(s,l,He,null,p,ce);for(oe in p)if(ce=p[oe],he=f[oe],p.hasOwnProperty(oe)&&ce!==he&&(ce!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:zt(s,l,oe,ce,p,he)}return;default:if(cc(l)){for(var Lt in f)ce=f[Lt],f.hasOwnProperty(Lt)&&ce!==void 0&&!p.hasOwnProperty(Lt)&&py(s,l,Lt,void 0,p,ce);for(pe in p)ce=p[pe],he=f[pe],!p.hasOwnProperty(pe)||ce===he||ce===void 0&&he===void 0||py(s,l,pe,ce,p,he);return}}for(var ne in f)ce=f[ne],f.hasOwnProperty(ne)&&ce!=null&&!p.hasOwnProperty(ne)&&zt(s,l,ne,null,p,ce);for(ye in p)ce=p[ye],he=f[ye],!p.hasOwnProperty(ye)||ce===he||ce==null&&he==null||zt(s,l,ye,ce,p,he)}function wT(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function a3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],_=y.transferSize,N=y.initiatorType,F=y.duration;if(_&&F&&wT(N)){for(N=0,F=y.responseEnd,p+=1;p<f.length;p++){var W=f[p],oe=W.startTime;if(oe>F)break;var pe=W.transferSize,ye=W.initiatorType;pe&&wT(ye)&&(W=W.responseEnd,N+=pe*(W<F?1:(F-oe)/(W-oe)))}if(--p,l+=8*(_+N)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var gy=null,my=null;function Gp(s){return s.nodeType===9?s:s.ownerDocument}function ET(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TT(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function vy(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var yy=null;function s3(){var s=window.event;return s&&s.type==="popstate"?s===yy?!1:(yy=s,!0):(yy=null,!1)}var AT=typeof setTimeout=="function"?setTimeout:void 0,o3=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,l3=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(s){return CT.resolve(null).then(s).catch(c3)}:AT;function c3(s){setTimeout(function(){throw s})}function co(s){return s==="head"}function RT(s,l){var f=l,p=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(y),qc(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")$f(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,$f(f);for(var _=f.firstChild;_;){var N=_.nextSibling,F=_.nodeName;_[sa]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=N}}else f==="body"&&$f(s.ownerDocument.body);f=y}while(f);qc(l)}function DT(s,l){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function by(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":by(f),sc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function u3(s,l,f,p){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[sa])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Si(s.nextSibling),s===null)break}return null}function f3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Si(s.nextSibling),s===null))return null;return s}function IT(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Si(s.nextSibling),s===null))return null;return s}function xy(s){return s.data==="$?"||s.data==="$~"}function _y(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function d3(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function Si(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Sy=null;function kT(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Si(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function NT(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function MT(s,l,f){switch(l=Gp(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function $f(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);sc(s)}var wi=new Map,OT=new Set;function qp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fs=Y.d;Y.d={f:h3,r:p3,D:g3,C:m3,L:v3,m:y3,X:x3,S:b3,M:_3};function h3(){var s=fs.f(),l=Pp();return s||l}function p3(s){var l=di(s);l!==null&&l.tag===5&&l.type==="form"?Qw(l):fs.r(s)}var Uc=typeof document>"u"?null:document;function PT(s,l,f){var p=Uc;if(p&&typeof l=="string"&&l){var y=Mr(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),OT.has(y)||(OT.add(y),s={rel:s,crossOrigin:f,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),ar(l,"link",s),En(l),p.head.appendChild(l)))}}function g3(s){fs.D(s),PT("dns-prefetch",s,null)}function m3(s,l){fs.C(s,l),PT("preconnect",s,l)}function v3(s,l,f){fs.L(s,l,f);var p=Uc;if(p&&s&&l){var y='link[rel="preload"][as="'+Mr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Mr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Mr(f.imageSizes)+'"]')):y+='[href="'+Mr(s)+'"]';var _=y;switch(l){case"style":_=Fc(s);break;case"script":_=Gc(s)}wi.has(_)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),wi.set(_,s),p.querySelector(y)!==null||l==="style"&&p.querySelector(Yf(_))||l==="script"&&p.querySelector(Xf(_))||(l=p.createElement("link"),ar(l,"link",s),En(l),p.head.appendChild(l)))}}function y3(s,l){fs.m(s,l);var f=Uc;if(f&&s){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Mr(p)+'"][href="'+Mr(s)+'"]',_=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Gc(s)}if(!wi.has(_)&&(s=g({rel:"modulepreload",href:s},l),wi.set(_,s),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Xf(_)))return}p=f.createElement("link"),ar(p,"link",s),En(p),f.head.appendChild(p)}}}function b3(s,l,f){fs.S(s,l,f);var p=Uc;if(p&&s){var y=la(p).hoistableStyles,_=Fc(s);l=l||"default";var N=y.get(_);if(!N){var F={loading:0,preload:null};if(N=p.querySelector(Yf(_)))F.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=wi.get(_))&&wy(s,f);var W=N=p.createElement("link");En(W),ar(W,"link",s),W._p=new Promise(function(oe,pe){W.onload=oe,W.onerror=pe}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Hp(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:F},y.set(_,N)}}}function x3(s,l){fs.X(s,l);var f=Uc;if(f&&s){var p=la(f).hoistableScripts,y=Gc(s),_=p.get(y);_||(_=f.querySelector(Xf(y)),_||(s=g({src:s,async:!0},l),(l=wi.get(y))&&Ey(s,l),_=f.createElement("script"),En(_),ar(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(y,_))}}function _3(s,l){fs.M(s,l);var f=Uc;if(f&&s){var p=la(f).hoistableScripts,y=Gc(s),_=p.get(y);_||(_=f.querySelector(Xf(y)),_||(s=g({src:s,async:!0,type:"module"},l),(l=wi.get(y))&&Ey(s,l),_=f.createElement("script"),En(_),ar(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(y,_))}}function VT(s,l,f,p){var y=(y=ue.current)?qp(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Fc(f.href),f=la(y).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Fc(f.href);var _=la(y).hoistableStyles,N=_.get(s);if(N||(y=y.ownerDocument||y,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,N),(_=y.querySelector(Yf(s)))&&!_._p&&(N.instance=_,N.state.loading=5),wi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},wi.set(s,f),_||S3(y,s,f,N.state))),l&&p===null)throw Error(r(528,""));return N}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Gc(f),f=la(y).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Fc(s){return'href="'+Mr(s)+'"'}function Yf(s){return'link[rel="stylesheet"]['+s+"]"}function jT(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function S3(s,l,f,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),ar(l,"link",f),En(l),s.head.appendChild(l))}function Gc(s){return'[src="'+Mr(s)+'"]'}function Xf(s){return"script[async]"+s}function zT(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+Mr(f.href)+'"]');if(p)return l.instance=p,En(p),p;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),En(p),ar(p,"style",y),Hp(p,f.precedence,s),l.instance=p;case"stylesheet":y=Fc(f.href);var _=s.querySelector(Yf(y));if(_)return l.state.loading|=4,l.instance=_,En(_),_;p=jT(f),(y=wi.get(y))&&wy(p,y),_=(s.ownerDocument||s).createElement("link"),En(_);var N=_;return N._p=new Promise(function(F,W){N.onload=F,N.onerror=W}),ar(_,"link",p),l.state.loading|=4,Hp(_,f.precedence,s),l.instance=_;case"script":return _=Gc(f.src),(y=s.querySelector(Xf(_)))?(l.instance=y,En(y),y):(p=f,(y=wi.get(_))&&(p=g({},f),Ey(p,y)),s=s.ownerDocument||s,y=s.createElement("script"),En(y),ar(y,"link",p),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Hp(p,f.precedence,s));return l.instance}function Hp(s,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,_=y,N=0;N<p.length;N++){var F=p[N];if(F.dataset.precedence===l)_=F;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function wy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Ey(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var $p=null;function LT(s,l,f){if($p===null){var p=new Map,y=$p=new Map;y.set(f,p)}else y=$p,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var _=f[y];if(!(_[sa]||_[Wt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var N=_.getAttribute(l)||"";N=s+N;var F=p.get(N);F?F.push(_):p.set(N,[_])}}return p}function BT(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function w3(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function UT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function E3(s,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Fc(p.href),_=l.querySelector(Yf(y));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Yp.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=_,En(_);return}_=l.ownerDocument||l,p=jT(p),(y=wi.get(y))&&wy(p,y),_=_.createElement("link"),En(_);var N=_;N._p=new Promise(function(F,W){N.onload=F,N.onerror=W}),ar(_,"link",p),f.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=Yp.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var Ty=0;function T3(s,l){return s.stylesheets&&s.count===0&&Wp(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&Wp(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+l);0<s.imgBytes&&Ty===0&&(Ty=62500*a3());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Wp(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Ty?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function Yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Xp=null;function Wp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Xp=new Map,l.forEach(A3,s),Xp=null,Yp.call(s))}function A3(s,l){if(!(l.state.loading&4)){var f=Xp.get(s);if(f)var p=f.get(null);else{f=new Map,Xp.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var N=y[_];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),p=N)}p&&f.set(null,p)}y=l.instance,N=y.getAttribute("data-precedence"),_=f.get(N)||p,_===p&&f.set(null,y),f.set(N,y),this.count++,p=Yp.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Wf={$$typeof:I,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function C3(s,l,f,p,y,_,N,F,W){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jn(0),this.hiddenUpdates=jn(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function FT(s,l,f,p,y,_,N,F,W,oe,pe,ye){return s=new C3(s,l,f,N,W,oe,pe,ye,F),l=1,_===!0&&(l|=24),_=ei(3,null,null,l),s.current=_,_.stateNode=s,l=i0(),l.refCount++,s.pooledCache=l,l.refCount++,_.memoizedState={element:p,isDehydrated:f,cache:l},l0(_),s}function GT(s){return s?(s=xc,s):xc}function qT(s,l,f,p,y,_){y=GT(y),p.context===null?p.context=y:p.pendingContext=y,p=Zs(l),p.payload={element:f},_=_===void 0?null:_,_!==null&&(p.callback=_),f=Js(s,p,l),f!==null&&(Lr(f,s,l),Cf(f,s,l))}function HT(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Ay(s,l){HT(s,l),(s=s.alternate)&&HT(s,l)}function $T(s){if(s.tag===13||s.tag===31){var l=hl(s,67108864);l!==null&&Lr(l,s,67108864),Ay(s,67108864)}}function YT(s){if(s.tag===13||s.tag===31){var l=ai();l=er(l);var f=hl(s,l);f!==null&&Lr(f,s,l),Ay(s,l)}}var Kp=!0;function R3(s,l,f,p){var y=H.T;H.T=null;var _=Y.p;try{Y.p=2,Cy(s,l,f,p)}finally{Y.p=_,H.T=y}}function D3(s,l,f,p){var y=H.T;H.T=null;var _=Y.p;try{Y.p=8,Cy(s,l,f,p)}finally{Y.p=_,H.T=y}}function Cy(s,l,f,p){if(Kp){var y=Ry(p);if(y===null)hy(s,l,p,Qp,f),WT(s,p);else if(k3(y,s,l,f,p))p.stopPropagation();else if(WT(s,p),l&4&&-1<I3.indexOf(s)){for(;y!==null;){var _=di(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var N=Ve(_.pendingLanes);if(N!==0){var F=_;for(F.pendingLanes|=2,F.entangledLanes|=2;N;){var W=1<<31-$t(N);F.entanglements[1]|=W,N&=~W}_a(_),(Dt&6)===0&&(Mp=lt()+500,Gf(0))}}break;case 31:case 13:F=hl(_,2),F!==null&&Lr(F,_,2),Pp(),Ay(_,2)}if(_=Ry(p),_===null&&hy(s,l,p,Qp,f),_===y)break;y=_}y!==null&&p.stopPropagation()}else hy(s,l,p,null,f)}}function Ry(s){return s=hi(s),Dy(s)}var Qp=null;function Dy(s){if(Qp=null,s=oa(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Qp=s,null}function XT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case Qn:return 2;case Zn:return 8;case kr:case Vs:return 32;case Ya:return 268435456;default:return 32}default:return 32}}var Iy=!1,uo=null,fo=null,ho=null,Kf=new Map,Qf=new Map,po=[],I3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WT(s,l){switch(s){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":Kf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(l.pointerId)}}function Zf(s,l,f,p,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},l!==null&&(l=di(l),l!==null&&$T(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function k3(s,l,f,p,y){switch(l){case"focusin":return uo=Zf(uo,s,l,f,p,y),!0;case"dragenter":return fo=Zf(fo,s,l,f,p,y),!0;case"mouseover":return ho=Zf(ho,s,l,f,p,y),!0;case"pointerover":var _=y.pointerId;return Kf.set(_,Zf(Kf.get(_)||null,s,l,f,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Qf.set(_,Zf(Qf.get(_)||null,s,l,f,p,y)),!0}return!1}function KT(s){var l=oa(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Yn(s.priority,function(){YT(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Yn(s.priority,function(){YT(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=Ry(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);ff=p,f.target.dispatchEvent(p),ff=null}else return l=di(f),l!==null&&$T(l),s.blockedOn=f,!1;l.shift()}return!0}function QT(s,l,f){Zp(s)&&f.delete(l)}function N3(){Iy=!1,uo!==null&&Zp(uo)&&(uo=null),fo!==null&&Zp(fo)&&(fo=null),ho!==null&&Zp(ho)&&(ho=null),Kf.forEach(QT),Qf.forEach(QT)}function Jp(s,l){s.blockedOn===l&&(s.blockedOn=null,Iy||(Iy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,N3)))}var eg=null;function ZT(s){eg!==s&&(eg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){eg===s&&(eg=null);for(var l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],y=s[l+2];if(typeof p!="function"){if(Dy(p||f)===null)continue;break}var _=di(f);_!==null&&(s.splice(l,3),l-=3,R0(_,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function qc(s){function l(W){return Jp(W,s)}uo!==null&&Jp(uo,s),fo!==null&&Jp(fo,s),ho!==null&&Jp(ho,s),Kf.forEach(l),Qf.forEach(l);for(var f=0;f<po.length;f++){var p=po[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<po.length&&(f=po[0],f.blockedOn===null);)KT(f),f.blockedOn===null&&po.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],_=f[p+1],N=y[dn]||null;if(typeof _=="function")N||ZT(f);else if(N){var F=null;if(_&&_.hasAttribute("formAction")){if(y=_,N=_[dn]||null)F=N.formAction;else if(Dy(y)!==null)continue}else F=N.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),ZT(f)}}}function JT(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(N){return y=N})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function ky(s){this._internalRoot=s}tg.prototype.render=ky.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=ai();qT(f,p,s,l,null,null)},tg.prototype.unmount=ky.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;qT(s.current,2,null,s,null,null),Pp(),l[wr]=null}};function tg(s){this._internalRoot=s}tg.prototype.unstable_scheduleHydration=function(s){if(s){var l=fi();s={blockedOn:null,target:s,priority:l};for(var f=0;f<po.length&&l!==0&&l<po[f].priority;f++);po.splice(f,0,s),f===0&&KT(s)}};var eA=e.version;if(eA!=="19.2.0")throw Error(r(527,eA,"19.2.0"));Y.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var M3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{Sr=ng.inject(M3),un=ng}catch{}}return ed.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,p="",y=oE,_=lE,N=cE;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=FT(s,1,!1,null,null,f,p,null,y,_,N,JT),s[wr]=l.current,dy(s),new ky(l)},ed.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var p=!1,y="",_=oE,N=lE,F=cE,W=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(W=f.formState)),l=FT(s,1,!0,l,f??null,p,y,W,_,N,F,JT),l.context=GT(null),f=l.current,p=ai(),p=er(p),y=Zs(p),y.callback=null,Js(f,y,p),f=p,l.current.lanes=f,tt(l,f),_a(l),s[wr]=l.current,dy(s),new tg(l)},ed.version="19.2.0",ed}var uA;function q3(){if(uA)return Oy.exports;uA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Oy.exports=G3(),Oy.exports}var H3=q3();const $3="modulepreload",Y3=function(t){return"/personal-budget-pwa/"+t},fA={},X3=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(h=>{if(h=Y3(h),h in fA)return;fA[h]=!0;const g=h.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":$3,g||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),g)return new Promise((S,w)=>{b.addEventListener("load",S),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function W3(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const d=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await X3(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:e}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),d}var dA="popstate";function K3(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Jl(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Mb("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:kd(a))}function r(i,a){li(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Z3(e,n,r,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function li(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q3(){return Math.random().toString(36).substring(2,10)}function hA(t,e){return{usr:t.state,key:t.key,idx:e}}function Mb(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jl(e):e,state:n,key:e&&e.key||r||Q3()}}function kd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Z3(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=h(),A=E==null?null:E-d;d=E,u&&u({action:c,location:w.location,delta:A})}function m(E,A){c="PUSH";let D=Mb(w.location,E,A);n&&n(D,E),d=h()+1;let I=hA(D,d),V=w.createHref(D);try{o.pushState(I,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(V)}a&&u&&u({action:c,location:w.location,delta:1})}function b(E,A){c="REPLACE";let D=Mb(w.location,E,A);n&&n(D,E),d=h();let I=hA(D,d),V=w.createHref(D);o.replaceState(I,"",V),a&&u&&u({action:c,location:w.location,delta:0})}function S(E){return J3(E)}let w={get action(){return c},get location(){return t(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(dA,g),u=E,()=>{i.removeEventListener(dA,g),u=null}},createHref(E){return e(i,E)},createURL:S,encodeLocation(E){let A=S(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:b,go(E){return o.go(E)}};return w}function J3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),on(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:kd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function bD(t,e,n="/"){return e5(t,e,n,!1)}function e5(t,e,n,r){let i=typeof e=="string"?Jl(e):e,a=ws(i.pathname||"/",n);if(a==null)return null;let o=xD(t);t5(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=d5(a);c=u5(o[u],d,r)}return c}function xD(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;on(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=vs([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(on(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xD(o.children,e,m,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:l5(g,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of _D(o.path))a(o,c,!0,u)}),e}function _D(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=_D(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function t5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var n5=/^:[\w-]+$/,r5=3,i5=2,a5=1,s5=10,o5=-2,pA=t=>t==="*";function l5(t,e){let n=t.split("/"),r=n.length;return n.some(pA)&&(r+=o5),e&&(r+=i5),n.filter(i=>!pA(i)).reduce((i,a)=>i+(n5.test(a)?r5:a===""?a5:s5),r)}function c5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function u5(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=Zg({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=Zg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:vs([a,g.pathname]),pathnameBase:v5(vs([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=vs([a,g.pathnameBase]))}return o}function Zg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=f5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let S=c[m]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const b=c[m];return g&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function f5(t,e=!1,n=!0){li(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function d5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return li(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var h5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p5=t=>h5.test(t);function g5(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Jl(t):t,a;if(n)if(p5(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),li(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=gA(n.substring(1),"/"):a=gA(n,e)}else a=e;return{pathname:a,search:y5(r),hash:b5(i)}}function gA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SD(t){let e=m5(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function wD(t,e,n,r=!1){let i;typeof t=="string"?i=Jl(t):(i={...t},on(!i.pathname||!i.pathname.includes("?"),zy("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),zy("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),zy("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=g5(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var vs=t=>t.join("/").replace(/\/\/+/g,"/"),v5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),y5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function x5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ED=["POST","PUT","PATCH","DELETE"];new Set(ED);var _5=["GET",...ED];new Set(_5);var ju=q.createContext(null);ju.displayName="DataRouter";var Fm=q.createContext(null);Fm.displayName="DataRouterState";q.createContext(!1);var TD=q.createContext({isTransitioning:!1});TD.displayName="ViewTransition";var S5=q.createContext(new Map);S5.displayName="Fetchers";var w5=q.createContext(null);w5.displayName="Await";var Ua=q.createContext(null);Ua.displayName="Navigation";var ah=q.createContext(null);ah.displayName="Location";var Fa=q.createContext({outlet:null,matches:[],isDataRoute:!1});Fa.displayName="Route";var cx=q.createContext(null);cx.displayName="RouteError";function E5(t,{relative:e}={}){on(sh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(Ua),{hash:i,pathname:a,search:o}=oh(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:vs([n,a])),r.createHref({pathname:c,search:o,hash:i})}function sh(){return q.useContext(ah)!=null}function Ga(){return on(sh(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(ah).location}var AD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CD(t){q.useContext(Ua).static||q.useLayoutEffect(t)}function qa(){let{isDataRoute:t}=q.useContext(Fa);return t?z5():T5()}function T5(){on(sh(),"useNavigate() may be used only in the context of a <Router> component.");let t=q.useContext(ju),{basename:e,navigator:n}=q.useContext(Ua),{matches:r}=q.useContext(Fa),{pathname:i}=Ga(),a=JSON.stringify(SD(r)),o=q.useRef(!1);return CD(()=>{o.current=!0}),q.useCallback((u,d={})=>{if(li(o.current,AD),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=wD(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vs([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}q.createContext(null);function A5(){let{matches:t}=q.useContext(Fa),e=t[t.length-1];return e?e.params:{}}function oh(t,{relative:e}={}){let{matches:n}=q.useContext(Fa),{pathname:r}=Ga(),i=JSON.stringify(SD(n));return q.useMemo(()=>wD(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function C5(t,e){return RD(t,e)}function RD(t,e,n,r,i){on(sh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(Ua),{matches:o}=q.useContext(Fa),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";DD(d,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let m=Ga(),b;if(e){let D=typeof e=="string"?Jl(e):e;on(h==="/"||D.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=m;let S=b.pathname||"/",w=S;if(h!=="/"){let D=h.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(D.length).join("/")}let E=bD(t,{pathname:w});li(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),li(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=N5(E&&E.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:vs([h,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:vs([h,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,n,r,i);return e&&A?q.createElement(ah.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function R5(){let t=j5(),e=x5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,o)}var D5=q.createElement(R5,null),I5=class extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?q.createElement(Fa.Provider,{value:this.props.routeContext},q.createElement(cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function k5({routeContext:t,match:e,children:n}){let r=q.useContext(ju);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Fa.Provider,{value:t},n)}function N5(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);on(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:b}=n,S=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let b,S=!1,w=null,E=null;n&&(b=o&&g.route.id?o[g.route.id]:void 0,w=g.route.errorElement||D5,c&&(u<0&&m===0?(DD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):u===m&&(S=!0,E=g.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,m+1)),D=()=>{let I;return b?I=w:S?I=E:g.route.Component?I=q.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=h,q.createElement(k5,{match:g,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:I})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?q.createElement(I5,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:D(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:d}):D()},null)}function ux(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M5(t){let e=q.useContext(ju);return on(e,ux(t)),e}function O5(t){let e=q.useContext(Fm);return on(e,ux(t)),e}function P5(t){let e=q.useContext(Fa);return on(e,ux(t)),e}function fx(t){let e=P5(t),n=e.matches[e.matches.length-1];return on(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function V5(){return fx("useRouteId")}function j5(){let t=q.useContext(cx),e=O5("useRouteError"),n=fx("useRouteError");return t!==void 0?t:e.errors?.[n]}function z5(){let{router:t}=M5("useNavigate"),e=fx("useNavigate"),n=q.useRef(!1);return CD(()=>{n.current=!0}),q.useCallback(async(i,a={})=>{li(n.current,AD),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var mA={};function DD(t,e,n){!e&&!mA[t]&&(mA[t]=!0,li(!1,n))}q.memo(L5);function L5({routes:t,future:e,state:n,unstable_onError:r}){return RD(t,void 0,n,r,e)}function xo(t){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function B5({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){on(!sh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Jl(n));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:m="default"}=n,b=q.useMemo(()=>{let S=ws(u,o);return S==null?null:{location:{pathname:S,search:d,hash:h,state:g,key:m},navigationType:r}},[o,u,d,h,g,m,r]);return li(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:q.createElement(Ua.Provider,{value:c},q.createElement(ah.Provider,{children:e,value:b}))}function U5({children:t,location:e}){return C5(Ob(t),e)}function Ob(t,e=[]){let n=[];return q.Children.forEach(t,(r,i)=>{if(!q.isValidElement(r))return;let a=[...e,i];if(r.type===q.Fragment){n.push.apply(n,Ob(r.props.children,a));return}on(r.type===xo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ob(r.props.children,a)),n.push(o)}),n}var kg="get",Ng="application/x-www-form-urlencoded";function Gm(t){return t!=null&&typeof t.tagName=="string"}function F5(t){return Gm(t)&&t.tagName.toLowerCase()==="button"}function G5(t){return Gm(t)&&t.tagName.toLowerCase()==="form"}function q5(t){return Gm(t)&&t.tagName.toLowerCase()==="input"}function H5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $5(t,e){return t.button===0&&(!e||e==="_self")&&!H5(t)}function Pb(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Y5(t,e){let n=Pb(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var ig=null;function X5(){if(ig===null)try{new FormData(document.createElement("form"),0),ig=!1}catch{ig=!0}return ig}var W5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ly(t){return t!=null&&!W5.has(t)?(li(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ng}"`),null):t}function K5(t,e){let n,r,i,a,o;if(G5(t)){let c=t.getAttribute("action");r=c?ws(c,e):null,n=t.getAttribute("method")||kg,i=Ly(t.getAttribute("enctype"))||Ng,a=new FormData(t)}else if(F5(t)||q5(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?ws(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||kg,i=Ly(t.getAttribute("formenctype"))||Ly(c.getAttribute("enctype"))||Ng,a=new FormData(c,t),!X5()){let{name:d,type:h,value:g}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(Gm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=kg,r=null,i=Ng,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Q5(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ws(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Z5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eV(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await Z5(a,n);return o.links?o.links():[]}return[]}));return iV(r.flat(1).filter(J5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function vA(t,e,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function tV(t,e,{includeHydrateFallback:n}={}){return nV(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function nV(t){return[...new Set(t)]}function rV(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function iV(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(rV(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function ID(){let t=q.useContext(ju);return dx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aV(){let t=q.useContext(Fm);return dx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var hx=q.createContext(void 0);hx.displayName="FrameworkContext";function kD(){let t=q.useContext(hx);return dx(t,"You must render this element inside a <HydratedRouter> element"),t}function sV(t,e){let n=q.useContext(hx),[r,i]=q.useState(!1),[a,o]=q.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,m=q.useRef(null);q.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=A=>{A.forEach(D=>{o(D.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[t]),q.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let b=()=>{i(!0)},S=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:td(c,b),onBlur:td(u,S),onMouseEnter:td(d,b),onMouseLeave:td(h,S),onTouchStart:td(g,b)}]:[!1,m,{}]}function td(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function oV({page:t,...e}){let{router:n}=ID(),r=q.useMemo(()=>bD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?q.createElement(cV,{page:t,matches:r,...e}):null}function lV(t){let{manifest:e,routeModules:n}=kD(),[r,i]=q.useState([]);return q.useEffect(()=>{let a=!1;return eV(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function cV({page:t,matches:e,...n}){let r=Ga(),{manifest:i,routeModules:a}=kD(),{basename:o}=ID(),{loaderData:c,matches:u}=aV(),d=q.useMemo(()=>vA(t,e,u,i,r,"data"),[t,e,u,i,r]),h=q.useMemo(()=>vA(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=q.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(e.forEach(A=>{let D=i.routes[A.route.id];!D||!D.hasLoader||(!d.some(I=>I.route.id===A.route.id)&&A.route.id in c&&a[A.route.id]?.shouldRevalidate||D.hasClientLoader?w=!0:S.add(A.route.id))}),S.size===0)return[];let E=Q5(t,o,"data");return w&&S.size>0&&E.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[E.pathname+E.search]},[o,c,r,i,d,e,t,a]),m=q.useMemo(()=>tV(h,i),[h,i]),b=lV(h);return q.createElement(q.Fragment,null,g.map(S=>q.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),m.map(S=>q.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:w})=>q.createElement("link",{key:S,nonce:n.nonce,...w})))}function uV(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ND=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ND&&(window.__reactRouterVersion="7.9.6")}catch{}function fV({basename:t,children:e,window:n}){let r=q.useRef();r.current==null&&(r.current=K3({window:n,v5Compat:!0}));let i=r.current,[a,o]=q.useState({action:i.action,location:i.location}),c=q.useCallback(u=>{q.startTransition(()=>o(u))},[o]);return q.useLayoutEffect(()=>i.listen(c),[i,c]),q.createElement(B5,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var MD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OD=q.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,...m},b){let{basename:S}=q.useContext(Ua),w=typeof d=="string"&&MD.test(d),E,A=!1;if(typeof d=="string"&&w&&(E=d,ND))try{let k=new URL(window.location.href),j=d.startsWith("//")?new URL(k.protocol+d):new URL(d),L=ws(j.pathname,S);j.origin===k.origin&&L!=null?d=L+j.search+j.hash:A=!0}catch{li(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=E5(d,{relative:i}),[I,V,z]=sV(r,m),O=gV(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g});function T(k){e&&e(k),k.defaultPrevented||O(k)}let C=q.createElement("a",{...m,...z,href:E||D,onClick:A||a?e:T,ref:uV(b,V),target:u,"data-discover":!w&&n==="render"?"true":void 0});return I&&!w?q.createElement(q.Fragment,null,C,q.createElement(oV,{page:D})):C});OD.displayName="Link";var dV=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let g=oh(o,{relative:d.relative}),m=Ga(),b=q.useContext(Fm),{navigator:S,basename:w}=q.useContext(Ua),E=b!=null&&_V(g)&&c===!0,A=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,D=m.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(D=D.toLowerCase(),I=I?I.toLowerCase():null,A=A.toLowerCase()),I&&w&&(I=ws(I,w)||I);const V=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let z=D===A||!i&&D.startsWith(A)&&D.charAt(V)==="/",O=I!=null&&(I===A||!i&&I.startsWith(A)&&I.charAt(A.length)==="/"),T={isActive:z,isPending:O,isTransitioning:E},C=z?e:void 0,k;typeof r=="function"?k=r(T):k=[r,z?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(T):a;return q.createElement(OD,{...d,"aria-current":C,className:k,ref:h,style:j,to:o,viewTransition:c},typeof u=="function"?u(T):u)});dV.displayName="NavLink";var hV=q.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=kg,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...m},b)=>{let S=bV(),w=xV(c,{relative:d}),E=o.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&MD.test(c),D=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let V=I.nativeEvent.submitter,z=V?.getAttribute("formmethod")||o;S(V||I.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g})};return q.createElement("form",{ref:b,method:E,action:w,onSubmit:r?u:D,...m,"data-discover":!A&&t==="render"?"true":void 0})});hV.displayName="Form";function pV(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PD(t){let e=q.useContext(ju);return on(e,pV(t)),e}function gV(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=qa(),u=Ga(),d=oh(t,{relative:a});return q.useCallback(h=>{if($5(h,e)){h.preventDefault();let g=n!==void 0?n:kd(u)===kd(d);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,n,r,e,t,i,a,o])}function mV(t){li(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=q.useRef(Pb(t)),n=q.useRef(!1),r=Ga(),i=q.useMemo(()=>Y5(r.search,n.current?null:e.current),[r.search]),a=qa(),o=q.useCallback((c,u)=>{const d=Pb(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var vV=0,yV=()=>`__${String(++vV)}__`;function bV(){let{router:t}=PD("useSubmit"),{basename:e}=q.useContext(Ua),n=V5();return q.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=K5(r,e);if(i.navigate===!1){let h=i.fetcherKey||yV();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function xV(t,{relative:e}={}){let{basename:n}=q.useContext(Ua),r=q.useContext(Fa);on(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...oh(t||".",{relative:e})},o=Ga();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:vs([n,a.pathname])),kd(a)}function _V(t,{relative:e}={}){let n=q.useContext(TD);on(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=PD("useViewTransitionState"),i=oh(t,{relative:e});if(!n.isTransitioning)return!1;let a=ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zg(i.pathname,o)!=null||Zg(i.pathname,a)!=null}const SV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wV=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yA=t=>{const e=wV(t);return e.charAt(0).toUpperCase()+e.slice(1)},VD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),EV=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var TV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AV=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>q.createElement("svg",{ref:u,...TV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:VD("lucide",i),...!a&&!EV(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>q.createElement(d,h)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=q.forwardRef(({className:r,...i},a)=>q.createElement(AV,{ref:a,iconNode:e,className:VD(`lucide-${SV(yA(t))}`,`lucide-${t}`,r),...i}));return n.displayName=yA(t),n};const CV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nd=Qe("arrow-left",CV);const RV=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],DV=Qe("arrow-right-left",RV);const IV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kV=Qe("check",IV);const NV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jD=Qe("chevron-down",NV);const MV=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],OV=Qe("chevron-left",MV);const PV=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$c=Qe("chevron-right",PV);const VV=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jV=Qe("chevron-up",VV);const zV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],LV=Qe("circle-arrow-down",zV);const BV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],UV=Qe("circle-arrow-up",BV);const FV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jg=Qe("circle-check-big",FV);const GV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bA=Qe("circle-check",GV);const qV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ag=Qe("circle-plus",qV);const HV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xA=Qe("circle-question-mark",HV);const $V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_A=Qe("circle",$V);const YV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XV=Qe("copy",YV);const WV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SA=Qe("download",WV);const KV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],QV=Qe("eye-off",KV);const ZV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JV=Qe("eye",ZV);const ej=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tj=Qe("file-text",ej);const nj=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],rj=Qe("folder-plus",nj);const ij=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],aj=Qe("funnel",ij);const sj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],oj=Qe("house",sj);const lj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],cj=Qe("list",lj);const uj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fj=Qe("loader-circle",uj);const dj=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],wA=Qe("loader",dj);const hj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],pj=Qe("lock-open",hj);const gj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mj=Qe("lock",gj);const vj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yj=Qe("log-out",vj);const bj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Vb=Qe("mail",bj);const xj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_j=Qe("pause",xj);const Sj=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Md=Qe("piggy-bank",Sj);const wj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jl=Qe("refresh-cw",wj);const Ej=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tj=Qe("search",Ej);const Aj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zD=Qe("settings",Aj);const Cj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Rj=Qe("target",Cj);const Dj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mg=Qe("trash-2",Dj);const Ij=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],LD=Qe("trash",Ij);const kj=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Nj=Qe("trending-down",kj);const Mj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Oj=Qe("trending-up",Mj);const Pj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Od=Qe("triangle-alert",Pj);const Vj=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],jj=Qe("undo-2",Vj);const zj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Lj=Qe("upload",zj);const Bj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Uj=Qe("user-plus",Bj);const Fj=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],px=Qe("wallet",Fj);const Gj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qj=Qe("wifi-off",Gj);const Hj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],$j=Qe("wifi",Hj);const Yj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lh=Qe("x",Yj),gx=q.createContext({});function qm(t){const e=q.useRef(null);return e.current===null&&(e.current=t()),e.current}const mx=typeof window<"u",vx=mx?q.useLayoutEffect:q.useEffect,Hm=q.createContext(null);function yx(t,e){t.indexOf(e)===-1&&t.push(e)}function bx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Es=(t,e,n)=>n>e?e:n<t?t:n;let xx=()=>{};const Ts={},BD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function UD(t){return typeof t=="object"&&t!==null}const FD=t=>/^0[^.\s]+$/u.test(t);function _x(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ii=t=>t,Xj=(t,e)=>n=>e(t(n)),ch=(...t)=>t.reduce(Xj),Pd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Sx{constructor(){this.subscriptions=[]}add(e){return yx(this.subscriptions,e),()=>bx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Da=t=>t*1e3,Di=t=>t/1e3;function GD(t,e){return e?t*(1e3/e):0}const qD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Wj=1e-7,Kj=12;function Qj(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=qD(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>Wj&&++c<Kj);return o}function uh(t,e,n,r){if(t===e&&n===r)return Ii;const i=a=>Qj(a,0,1,t,n);return a=>a===0||a===1?a:qD(i(a),e,r)}const HD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$D=t=>e=>1-t(1-e),YD=uh(.33,1.53,.69,.99),wx=$D(YD),XD=HD(wx),WD=t=>(t*=2)<1?.5*wx(t):.5*(2-Math.pow(2,-10*(t-1))),Ex=t=>1-Math.sin(Math.acos(t)),KD=$D(Ex),QD=HD(Ex),Zj=uh(.42,0,1,1),Jj=uh(0,0,.58,1),ZD=uh(.42,0,.58,1),e6=t=>Array.isArray(t)&&typeof t[0]!="number",JD=t=>Array.isArray(t)&&typeof t[0]=="number",t6={linear:Ii,easeIn:Zj,easeInOut:ZD,easeOut:Jj,circIn:Ex,circInOut:QD,circOut:KD,backIn:wx,backInOut:XD,backOut:YD,anticipate:WD},n6=t=>typeof t=="string",EA=t=>{if(JD(t)){xx(t.length===4);const[e,n,r,i]=t;return uh(e,n,r,i)}else if(n6(t))return t6[t];return t},sg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r6(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(c)}const d={schedule:(h,g=!1,m=!1)=>{const S=m&&i?n:r;return g&&o.add(h),S.has(h)||S.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const i6=40;function eI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=sg.reduce((I,V)=>(I[V]=r6(a),I),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:b,postRender:S}=o,w=()=>{const I=Ts.useManualTiming?i.timestamp:performance.now();n=!1,Ts.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,i6),1)),i.timestamp=I,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),g.process(i),m.process(i),b.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},E=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:sg.reduce((I,V)=>{const z=o[V];return I[V]=(O,T=!1,C=!1)=>(n||E(),z.schedule(O,T,C)),I},{}),cancel:I=>{for(let V=0;V<sg.length;V++)o[sg[V]].cancel(I)},state:i,steps:o}}const{schedule:nn,cancel:zo,state:or,steps:By}=eI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ii,!0);let Og;function a6(){Og=void 0}const qr={now:()=>(Og===void 0&&qr.set(or.isProcessing||Ts.useManualTiming?or.timestamp:performance.now()),Og),set:t=>{Og=t,queueMicrotask(a6)}},tI=t=>e=>typeof e=="string"&&e.startsWith(t),Tx=tI("--"),s6=tI("var(--"),Ax=t=>s6(t)?o6.test(t.split("/*")[0].trim()):!1,o6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vd={...zu,transform:t=>Es(0,1,t)},og={...zu,default:1},pd=t=>Math.round(t*1e5)/1e5,Cx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l6(t){return t==null}const c6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rx=(t,e)=>n=>!!(typeof n=="string"&&c6.test(n)&&n.startsWith(t)||e&&!l6(n)&&Object.prototype.hasOwnProperty.call(n,e)),nI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Cx);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},u6=t=>Es(0,255,t),Uy={...zu,transform:t=>Math.round(u6(t))},Ml={test:Rx("rgb","red"),parse:nI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Uy.transform(t)+", "+Uy.transform(e)+", "+Uy.transform(n)+", "+pd(Vd.transform(r))+")"};function f6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jb={test:Rx("#"),parse:f6,transform:Ml.transform},fh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_o=fh("deg"),Ia=fh("%"),Ke=fh("px"),d6=fh("vh"),h6=fh("vw"),TA={...Ia,parse:t=>Ia.parse(t)/100,transform:t=>Ia.transform(t*100)},Jc={test:Rx("hsl","hue"),parse:nI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ia.transform(pd(e))+", "+Ia.transform(pd(n))+", "+pd(Vd.transform(r))+")"},Nn={test:t=>Ml.test(t)||jb.test(t)||Jc.test(t),parse:t=>Ml.test(t)?Ml.parse(t):Jc.test(t)?Jc.parse(t):jb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ml.transform(t):Jc.transform(t),getAnimatableNone:t=>{const e=Nn.parse(t);return e.alpha=0,Nn.transform(e)}},p6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function g6(t){return isNaN(t)&&typeof t=="string"&&(t.match(Cx)?.length||0)+(t.match(p6)?.length||0)>0}const rI="number",iI="color",m6="var",v6="var(",AA="${}",y6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(y6,u=>(Nn.test(u)?(r.color.push(a),i.push(iI),n.push(Nn.parse(u))):u.startsWith(v6)?(r.var.push(a),i.push(m6),n.push(u)):(r.number.push(a),i.push(rI),n.push(parseFloat(u))),++a,AA)).split(AA);return{values:n,split:c,indexes:r,types:i}}function aI(t){return jd(t).values}function sI(t){const{split:e,types:n}=jd(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===rI?a+=pd(i[o]):c===iI?a+=Nn.transform(i[o]):a+=i[o]}return a}}const b6=t=>typeof t=="number"?0:Nn.test(t)?Nn.getAnimatableNone(t):t;function x6(t){const e=aI(t);return sI(t)(e.map(b6))}const Lo={test:g6,parse:aI,createTransformer:sI,getAnimatableNone:x6};function Fy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _6({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=Fy(u,c,t+1/3),a=Fy(u,c,t),o=Fy(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function em(t,e){return n=>n>0?e:t}const sn=(t,e,n)=>t+(e-t)*n,Gy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},S6=[jb,Ml,Jc],w6=t=>S6.find(e=>e.test(t));function CA(t){const e=w6(t);if(!e)return!1;let n=e.parse(t);return e===Jc&&(n=_6(n)),n}const RA=(t,e)=>{const n=CA(t),r=CA(e);if(!n||!r)return em(t,e);const i={...n};return a=>(i.red=Gy(n.red,r.red,a),i.green=Gy(n.green,r.green,a),i.blue=Gy(n.blue,r.blue,a),i.alpha=sn(n.alpha,r.alpha,a),Ml.transform(i))},zb=new Set(["none","hidden"]);function E6(t,e){return zb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function T6(t,e){return n=>sn(t,e,n)}function Dx(t){return typeof t=="number"?T6:typeof t=="string"?Ax(t)?em:Nn.test(t)?RA:R6:Array.isArray(t)?oI:typeof t=="object"?Nn.test(t)?RA:A6:em}function oI(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>Dx(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function A6(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Dx(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function C6(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const R6=(t,e)=>{const n=Lo.createTransformer(e),r=jd(t),i=jd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?zb.has(t)&&!i.values.length||zb.has(e)&&!r.values.length?E6(t,e):ch(oI(C6(r,i),i.values),n):em(t,e)};function lI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?sn(t,e,n):Dx(t)(t,e)}const D6=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>nn.update(e,n),stop:()=>zo(e),now:()=>or.isProcessing?or.timestamp:qr.now()}},cI=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},tm=2e4;function Ix(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tm;)e+=n,r=t.next(e);return e>=tm?1/0:e}function I6(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Ix(r),tm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Di(i)}}const k6=5;function uI(t,e,n){const r=Math.max(e-k6,0);return GD(n-t(r),e-r)}const gn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qy=.001;function N6({duration:t=gn.duration,bounce:e=gn.bounce,velocity:n=gn.velocity,mass:r=gn.mass}){let i,a,o=1-e;o=Es(gn.minDamping,gn.maxDamping,o),t=Es(gn.minDuration,gn.maxDuration,Di(t)),o<1?(i=d=>{const h=d*o,g=h*t,m=h-n,b=Lb(d,o),S=Math.exp(-g);return qy-m/b*S},a=d=>{const g=d*o*t,m=g*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,S=Math.exp(-g),w=Lb(Math.pow(d,2),o);return(-i(d)+qy>0?-1:1)*((m-b)*S)/w}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-qy+h*g},a=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const c=5/t,u=O6(i,a,c);if(t=Da(t),isNaN(u))return{stiffness:gn.stiffness,damping:gn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const M6=12;function O6(t,e,n){let r=n;for(let i=1;i<M6;i++)r=r-t(r)/e(r);return r}function Lb(t,e){return t*Math.sqrt(1-e*e)}const P6=["duration","bounce"],V6=["stiffness","damping","mass"];function DA(t,e){return e.some(n=>t[n]!==void 0)}function j6(t){let e={velocity:gn.velocity,stiffness:gn.stiffness,damping:gn.damping,mass:gn.mass,isResolvedFromDuration:!1,...t};if(!DA(t,V6)&&DA(t,P6))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Es(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:gn.mass,stiffness:i,damping:a}}else{const n=N6(t);e={...e,...n,mass:gn.mass},e.isResolvedFromDuration=!0}return e}function nm(t=gn.visualDuration,e=gn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:b}=j6({...n,velocity:-Di(n.velocity||0)}),S=m||0,w=d/(2*Math.sqrt(u*h)),E=o-a,A=Di(Math.sqrt(u/h)),D=Math.abs(E)<5;r||(r=D?gn.restSpeed.granular:gn.restSpeed.default),i||(i=D?gn.restDelta.granular:gn.restDelta.default);let I;if(w<1){const z=Lb(A,w);I=O=>{const T=Math.exp(-w*A*O);return o-T*((S+w*A*E)/z*Math.sin(z*O)+E*Math.cos(z*O))}}else if(w===1)I=z=>o-Math.exp(-A*z)*(E+(S+A*E)*z);else{const z=A*Math.sqrt(w*w-1);I=O=>{const T=Math.exp(-w*A*O),C=Math.min(z*O,300);return o-T*((S+w*A*E)*Math.sinh(C)+z*E*Math.cosh(C))/z}}const V={calculatedDuration:b&&g||null,next:z=>{const O=I(z);if(b)c.done=z>=g;else{let T=z===0?S:0;w<1&&(T=z===0?Da(S):uI(I,z,O));const C=Math.abs(T)<=r,k=Math.abs(o-O)<=i;c.done=C&&k}return c.value=c.done?o:O,c},toString:()=>{const z=Math.min(Ix(V),tm),O=cI(T=>V.next(z*T).value,z,30);return z+"ms "+O},toTransition:()=>{}};return V}nm.applyToOptions=t=>{const e=I6(t,100,nm);return t.ease=e.ease,t.duration=Da(e.duration),t.type="keyframes",t};function Bb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},b=C=>c!==void 0&&C<c||u!==void 0&&C>u,S=C=>c===void 0?u:u===void 0||Math.abs(c-C)<Math.abs(u-C)?c:u;let w=n*e;const E=g+w,A=o===void 0?E:o(E);A!==E&&(w=A-g);const D=C=>-w*Math.exp(-C/r),I=C=>A+D(C),V=C=>{const k=D(C),j=I(C);m.done=Math.abs(k)<=d,m.value=m.done?A:j};let z,O;const T=C=>{b(m.value)&&(z=C,O=nm({keyframes:[m.value,S(m.value)],velocity:uI(I,C,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return T(0),{calculatedDuration:null,next:C=>{let k=!1;return!O&&z===void 0&&(k=!0,V(C),T(C)),z!==void 0&&C>=z?O.next(C-z):(!k&&V(C),m)}}}function z6(t,e,n){const r=[],i=n||Ts.mix||lI,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ii:e;c=ch(u,c)}r.push(c)}return r}function L6(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(xx(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=z6(e,r,i),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=Pd(t[g],t[g+1],h);return c[g](m)};return n?h=>d(Es(t[0],t[a-1],h)):d}function B6(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pd(0,e,r);t.push(sn(n,1,i))}}function U6(t){const e=[0];return B6(e,t.length-1),e}function F6(t,e){return t.map(n=>n*e)}function G6(t,e){return t.map(()=>e||ZD).splice(0,t.length-1)}function gd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=e6(r)?r.map(EA):EA(r),a={done:!1,value:e[0]},o=F6(n&&n.length===e.length?n:U6(e),t),c=L6(o,e,{ease:Array.isArray(i)?i:G6(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const q6=t=>t!==null;function kx(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(q6),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const H6={decay:Bb,inertia:Bb,tween:gd,keyframes:gd,spring:nm};function fI(t){typeof t.type=="string"&&(t.type=H6[t.type])}class Nx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $6=t=>t/100;class Mx extends Nx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==qr.now()&&this.tick(qr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;fI(e);const{type:n=gd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||gd;u!==gd&&typeof c[0]!="number"&&(this.mixKeyframes=ch($6,lI(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Ix(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:b,type:S,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const A=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?A<0:A>i;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,V=r;if(g){const C=Math.min(this.currentTime,i)/c;let k=Math.floor(C),j=C%1;!j&&C>=1&&(j=1),j===1&&k--,k=Math.min(k,g+1),!!(k%2)&&(m==="reverse"?(j=1-j,b&&(j-=b/c)):m==="mirror"&&(V=o)),I=Es(0,1,j)*c}const z=D?{done:!1,value:h[0]}:V.next(I);a&&(z.value=a(z.value));let{done:O}=z;!D&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return T&&S!==Bb&&(z.value=kx(h,this.options,E,this.speed)),w&&w(z.value),T&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return Di(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Di(e)}get time(){return Di(this.currentTime)}set time(e){e=Da(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Di(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=D6,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Y6(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ol=t=>t*180/Math.PI,Ub=t=>{const e=Ol(Math.atan2(t[1],t[0]));return Fb(e)},X6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ub,rotateZ:Ub,skewX:t=>Ol(Math.atan(t[1])),skewY:t=>Ol(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Fb=t=>(t=t%360,t<0&&(t+=360),t),IA=Ub,kA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),NA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),W6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:kA,scaleY:NA,scale:t=>(kA(t)+NA(t))/2,rotateX:t=>Fb(Ol(Math.atan2(t[6],t[5]))),rotateY:t=>Fb(Ol(Math.atan2(-t[2],t[0]))),rotateZ:IA,rotate:IA,skewX:t=>Ol(Math.atan(t[4])),skewY:t=>Ol(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Gb(t){return t.includes("scale")?1:0}function qb(t,e){if(!t||t==="none")return Gb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=W6,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=X6,i=c}if(!i)return Gb(e);const a=r[e],o=i[1].split(",").map(Q6);return typeof a=="function"?a(o):o[a]}const K6=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return qb(n,e)};function Q6(t){return parseFloat(t.trim())}const Lu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bu=new Set(Lu),MA=t=>t===zu||t===Ke,Z6=new Set(["x","y","z"]),J6=Lu.filter(t=>!Z6.has(t));function ez(t){const e=[];return J6.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const zl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>qb(e,"x"),y:(t,{transform:e})=>qb(e,"y")};zl.translateX=zl.x;zl.translateY=zl.y;const Ll=new Set;let Hb=!1,$b=!1,Yb=!1;function dI(){if($b){const t=Array.from(Ll).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=ez(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$b=!1,Hb=!1,Ll.forEach(t=>t.complete(Yb)),Ll.clear()}function hI(){Ll.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($b=!0)})}function tz(){Yb=!0,hI(),dI(),Yb=!1}class Ox{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ll.add(this),Hb||(Hb=!0,nn.read(hI),nn.resolveKeyframes(dI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}Y6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ll.delete(this)}cancel(){this.state==="scheduled"&&(Ll.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nz=t=>t.startsWith("--");function rz(t,e,n){nz(e)?t.style.setProperty(e,n):t.style[e]=n}const iz=_x(()=>window.ScrollTimeline!==void 0),az={};function sz(t,e){const n=_x(t);return()=>az[e]??n()}const pI=sz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),id=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,OA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function gI(t,e){if(t)return typeof t=="function"?pI()?cI(t,e):"ease-out":JD(t)?id(t):Array.isArray(t)?t.map(n=>gI(n,e)||OA.easeOut):OA[t]}function oz(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const g=gI(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function mI(t){return typeof t=="function"&&"applyToOptions"in t}function lz({type:t,...e}){return mI(t)&&pI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class cz extends Nx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,xx(typeof e.type!="string");const d=lz(e);this.animation=oz(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=kx(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):rz(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Di(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Di(e)}get time(){return Di(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Da(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iz()?(this.animation.timeline=e,Ii):n(this)}}const vI={anticipate:WD,backInOut:XD,circInOut:QD};function uz(t){return t in vI}function fz(t){typeof t.ease=="string"&&uz(t.ease)&&(t.ease=vI[t.ease])}const PA=10;class dz extends cz{constructor(e){fz(e),fI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Mx({...o,autoplay:!1}),u=Da(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-PA).value,c.sample(u).value,PA),c.stop()}}const VA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Lo.test(t)||t==="0")&&!t.startsWith("url("));function hz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pz(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=VA(i,e),c=VA(a,e);return!o||!c?!1:hz(t)||(n==="spring"||mI(n))&&r}function Xb(t){t.duration=0,t.type="keyframes"}const gz=new Set(["opacity","clipPath","filter","transform"]),mz=_x(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function vz(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return mz()&&n&&gz.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const yz=40;class bz extends Nx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=qr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...g},b=h?.KeyframeResolver||Ox;this.keyframeResolver=new b(c,(S,w,E)=>this.onKeyframesResolved(S,w,m,!E),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=qr.now(),pz(e,a,o,c)||((Ts.instantAnimations||!u)&&h?.(kx(e,r,n)),e[0]=e[e.length-1],Xb(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>yz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&vz(m)?new dz({...m,element:m.motionValue.owner.current}):new Mx(m);b.finished.then(()=>this.notifyFinished()).catch(Ii),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const xz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _z(t){const e=xz.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function yI(t,e,n=1){const[r,i]=_z(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return BD(o)?parseFloat(o):o}return Ax(i)?yI(i,e,n+1):i}function Px(t,e){return t?.[e]??t?.default??t}const bI=new Set(["width","height","top","left","right","bottom",...Lu]),Sz={test:t=>t==="auto",parse:t=>t},xI=t=>e=>e.test(t),_I=[zu,Ke,Ia,_o,h6,d6,Sz],jA=t=>_I.find(xI(t));function wz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FD(t):!0}const Ez=new Set(["brightness","contrast","saturate","opacity"]);function Tz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cx)||[];if(!r)return t;const i=n.replace(r,"");let a=Ez.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Az=/\b([a-z-]*)\(.*?\)/gu,Wb={...Lo,getAnimatableNone:t=>{const e=t.match(Az);return e?e.map(Tz).join(" "):t}},zA={...zu,transform:Math.round},Cz={rotate:_o,rotateX:_o,rotateY:_o,rotateZ:_o,scale:og,scaleX:og,scaleY:og,scaleZ:og,skew:_o,skewX:_o,skewY:_o,distance:Ke,translateX:Ke,translateY:Ke,translateZ:Ke,x:Ke,y:Ke,z:Ke,perspective:Ke,transformPerspective:Ke,opacity:Vd,originX:TA,originY:TA,originZ:Ke},Vx={borderWidth:Ke,borderTopWidth:Ke,borderRightWidth:Ke,borderBottomWidth:Ke,borderLeftWidth:Ke,borderRadius:Ke,radius:Ke,borderTopLeftRadius:Ke,borderTopRightRadius:Ke,borderBottomRightRadius:Ke,borderBottomLeftRadius:Ke,width:Ke,maxWidth:Ke,height:Ke,maxHeight:Ke,top:Ke,right:Ke,bottom:Ke,left:Ke,padding:Ke,paddingTop:Ke,paddingRight:Ke,paddingBottom:Ke,paddingLeft:Ke,margin:Ke,marginTop:Ke,marginRight:Ke,marginBottom:Ke,marginLeft:Ke,backgroundPositionX:Ke,backgroundPositionY:Ke,...Cz,zIndex:zA,fillOpacity:Vd,strokeOpacity:Vd,numOctaves:zA},Rz={...Vx,color:Nn,backgroundColor:Nn,outlineColor:Nn,fill:Nn,stroke:Nn,borderColor:Nn,borderTopColor:Nn,borderRightColor:Nn,borderBottomColor:Nn,borderLeftColor:Nn,filter:Wb,WebkitFilter:Wb},SI=t=>Rz[t];function wI(t,e){let n=SI(t);return n!==Wb&&(n=Lo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Dz=new Set(["auto","none","0"]);function Iz(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Dz.has(a)&&jd(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=wI(n,i)}class kz extends Ox{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),Ax(d))){const h=yI(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!bI.has(r)||e.length!==2)return;const[i,a]=e,o=jA(i),c=jA(a);if(o!==c)if(MA(o)&&MA(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else zl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wz(e[i]))&&r.push(i);r.length&&Iz(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=zl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Nz(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const EI=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function TI(t){return UD(t)&&"offsetHeight"in t}const LA=30,Mz=t=>!isNaN(parseFloat(t));class Oz{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=qr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=qr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Mz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sx);const r=this.events[e].add(n);return e==="change"?()=>{r(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>LA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,LA);return GD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vu(t,e){return new Oz(t,e)}const{schedule:jx}=eI(queueMicrotask,!1),qi={x:!1,y:!1};function AI(){return qi.x||qi.y}function Pz(t){return t==="x"||t==="y"?qi[t]?null:(qi[t]=!0,()=>{qi[t]=!1}):qi.x||qi.y?null:(qi.x=qi.y=!0,()=>{qi.x=qi.y=!1})}function CI(t,e){const n=Nz(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function BA(t){return!(t.pointerType==="touch"||AI())}function Vz(t,e,n={}){const[r,i,a]=CI(t,n),o=c=>{if(!BA(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=g=>{BA(g)&&(d(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const RI=(t,e)=>e?t===e?!0:RI(t,e.parentElement):!1,zx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zz(t){return jz.has(t.tagName)||t.tabIndex!==-1}const Pg=new WeakSet;function UA(t){return e=>{e.key==="Enter"&&t(e)}}function Hy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Lz=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=UA(()=>{if(Pg.has(n))return;Hy(n,"down");const i=UA(()=>{Hy(n,"up")}),a=()=>Hy(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function FA(t){return zx(t)&&!AI()}function Bz(t,e,n={}){const[r,i,a]=CI(t,n),o=c=>{const u=c.currentTarget;if(!FA(c))return;Pg.add(u);const d=e(u,c),h=(b,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Pg.has(u)&&Pg.delete(u),FA(b)&&typeof d=="function"&&d(b,{success:S})},g=b=>{h(b,u===window||u===document||n.useGlobalTarget||RI(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),TI(c)&&(c.addEventListener("focus",d=>Lz(d,i)),!zz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function DI(t){return UD(t)&&"ownerSVGElement"in t}function Uz(t){return DI(t)&&t.tagName==="svg"}const yr=t=>!!(t&&t.getVelocity),Fz=[..._I,Nn,Lo],Gz=t=>Fz.find(xI(t)),Lx=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function GA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qz(...t){return e=>{let n=!1;const r=t.map(i=>{const a=GA(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():GA(t[i],null)}}}}function Hz(...t){return q.useCallback(qz(...t),t)}class $z extends q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=TI(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Yz({children:t,isPresent:e,anchorX:n,root:r}){const i=q.useId(),a=q.useRef(null),o=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=q.useContext(Lx),u=Hz(a,t?.ref);return q.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:b}=o.current;if(e||!a.current||!d||!h)return;const S=n==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");c&&(w.nonce=c);const E=r??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${S}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[e]),x.jsx($z,{isPresent:e,childRef:a,sizeRef:o,children:q.cloneElement(t,{ref:u})})}const Xz=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=qm(Wz),h=q.useId();let g=!0,m=q.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const S of d.values())if(!S)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return a&&g&&(m={...m}),q.useMemo(()=>{d.forEach((b,S)=>d.set(S,!1))},[n]),q.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=x.jsx(Yz,{isPresent:n,anchorX:c,root:u,children:t})),x.jsx(Hm.Provider,{value:m,children:t})};function Wz(){return new Map}function II(t=!0){const e=q.useContext(Hm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=q.useId();q.useEffect(()=>{if(t)return i(a)},[t]);const o=q.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const lg=t=>t.key||"";function qA(t){const e=[];return q.Children.forEach(t,n=>{q.isValidElement(n)&&e.push(n)}),e}const zd=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=II(o),g=q.useMemo(()=>qA(t),[t]),m=o&&!d?[]:g.map(lg),b=q.useRef(!0),S=q.useRef(g),w=qm(()=>new Map),[E,A]=q.useState(g),[D,I]=q.useState(g);vx(()=>{b.current=!1,S.current=g;for(let O=0;O<D.length;O++){const T=lg(D[O]);m.includes(T)?w.delete(T):w.get(T)!==!0&&w.set(T,!1)}},[D,m.length,m.join("-")]);const V=[];if(g!==E){let O=[...g];for(let T=0;T<D.length;T++){const C=D[T],k=lg(C);m.includes(k)||(O.splice(T,0,C),V.push(C))}return a==="wait"&&V.length&&(O=V),I(qA(O)),A(g),null}const{forceRender:z}=q.useContext(gx);return x.jsx(x.Fragment,{children:D.map(O=>{const T=lg(O),C=o&&!d?!1:g===D||m.includes(T),k=()=>{if(w.has(T))w.set(T,!0);else return;let j=!0;w.forEach(L=>{L||(j=!1)}),j&&(z?.(),I(S.current),o&&h?.(),r&&r())};return x.jsx(Xz,{isPresent:C,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:C?void 0:k,anchorX:c,children:O},T)})})},kI=q.createContext({strict:!1}),HA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yu={};for(const t in HA)yu[t]={isEnabled:e=>HA[t].some(n=>!!e[n])};function Kz(t){for(const e in t)yu[e]={...yu[e],...t[e]}}const Qz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qz.has(t)}let NI=t=>!rm(t);function Zz(t){typeof t=="function"&&(NI=e=>e.startsWith("on")?!rm(e):t(e))}try{Zz(require("@emotion/is-prop-valid").default)}catch{}function Jz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NI(i)||n===!0&&rm(i)||!e&&!rm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const $m=q.createContext({});function Ym(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ld(t){return typeof t=="string"||Array.isArray(t)}const Bx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ux=["initial",...Bx];function Xm(t){return Ym(t.animate)||Ux.some(e=>Ld(t[e]))}function MI(t){return!!(Xm(t)||t.variants)}function eL(t,e){if(Xm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ld(n)?n:void 0,animate:Ld(r)?r:void 0}}return t.inherit!==!1?e:{}}function tL(t){const{initial:e,animate:n}=eL(t,q.useContext($m));return q.useMemo(()=>({initial:e,animate:n}),[$A(e),$A(n)])}function $A(t){return Array.isArray(t)?t.join(" "):t}const Bd={};function nL(t){for(const e in t)Bd[e]=t[e],Tx(e)&&(Bd[e].isCSSVariable=!0)}function OI(t,{layout:e,layoutId:n}){return Bu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bd[t]||t==="opacity")}const rL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iL=Lu.length;function aL(t,e,n){let r="",i=!0;for(let a=0;a<iL;a++){const o=Lu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=EI(c,Vx[o]);if(!u){i=!1;const h=rL[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Fx(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(Bu.has(u)){o=!0;continue}else if(Tx(u)){i[u]=d;continue}else{const h=EI(d,Vx[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=aL(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Gx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function PI(t,e,n){for(const r in e)!yr(e[r])&&!OI(r,n)&&(t[r]=e[r])}function sL({transformTemplate:t},e){return q.useMemo(()=>{const n=Gx();return Fx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function oL(t,e){const n=t.style||{},r={};return PI(r,n,t),Object.assign(r,sL(t,e)),r}function lL(t,e){const n={},r=oL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const cL={offset:"stroke-dashoffset",array:"stroke-dasharray"},uL={offset:"strokeDashoffset",array:"strokeDasharray"};function fL(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?cL:uL;t[a.offset]=Ke.transform(-r);const o=Ke.transform(e),c=Ke.transform(n);t[a.array]=`${o} ${c}`}function VI(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Fx(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&fL(g,i,a,o,!1)}const jI=()=>({...Gx(),attrs:{}}),zI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dL(t,e,n,r){const i=q.useMemo(()=>{const a=jI();return VI(a,e,zI(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};PI(a,t.style,t),i.style={...a,...i.style}}return i}const hL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qx(t){return typeof t!="string"||t.includes("-")?!1:!!(hL.indexOf(t)>-1||/[A-Z]/u.test(t))}function pL(t,e,n,{latestValues:r},i,a=!1){const c=(qx(t)?dL:lL)(e,r,i,t),u=Jz(e,typeof t=="string",a),d=t!==q.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=q.useMemo(()=>yr(h)?h.get():h,[h]);return q.createElement(t,{...d,children:g})}function YA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Hx(t,e,n,r){if(typeof e=="function"){const[i,a]=YA(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=YA(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Vg(t){return yr(t)?t.get():t}function gL({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:mL(n,r,i,t),renderState:e()}}function mL(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=Vg(a[m]);let{initial:o,animate:c}=t;const u=Xm(t),d=MI(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!Ym(g)){const m=Array.isArray(g)?g:[g];for(let b=0;b<m.length;b++){const S=Hx(t,m[b]);if(S){const{transitionEnd:w,transition:E,...A}=S;for(const D in A){let I=A[D];if(Array.isArray(I)){const V=h?I.length-1:0;I=I[V]}I!==null&&(i[D]=I)}for(const D in w)i[D]=w[D]}}}return i}const LI=t=>(e,n)=>{const r=q.useContext($m),i=q.useContext(Hm),a=()=>gL(t,e,r,i);return n?a():qm(a)};function $x(t,e,n){const{style:r}=t,i={};for(const a in r)(yr(r[a])||e.style&&yr(e.style[a])||OI(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const vL=LI({scrapeMotionValuesFromProps:$x,createRenderState:Gx});function BI(t,e,n){const r=$x(t,e,n);for(const i in t)if(yr(t[i])||yr(e[i])){const a=Lu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const yL=LI({scrapeMotionValuesFromProps:BI,createRenderState:jI}),bL=Symbol.for("motionComponentSymbol");function eu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xL(t,e,n){return q.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):eu(n)&&(n.current=r))},[e])}const Yx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_L="framerAppearId",UI="data-"+Yx(_L),FI=q.createContext({});function SL(t,e,n,r,i){const{visualElement:a}=q.useContext($m),o=q.useContext(kI),c=q.useContext(Hm),u=q.useContext(Lx).reducedMotion,d=q.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,g=q.useContext(FI);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&wL(d.current,n,i,g);const m=q.useRef(!1);q.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const b=n[UI],S=q.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return vx(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),S.current&&h.animationState&&h.animationState.animateChanges())}),q.useEffect(()=>{h&&(!S.current&&h.animationState&&h.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),S.current=!1),h.enteringChildren=void 0)}),h}function wL(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:GI(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&eu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function GI(t){if(t)return t.options.allowProjection!==!1?t.projection:GI(t.parent)}function $y(t,{forwardMotionProps:e=!1}={},n,r){n&&Kz(n);const i=qx(t)?yL:vL;function a(c,u){let d;const h={...q.useContext(Lx),...c,layoutId:EL(c)},{isStatic:g}=h,m=tL(c),b=i(c,g);if(!g&&mx){TL();const S=AL(h);d=S.MeasureLayout,m.visualElement=SL(t,b,h,r,S.ProjectionNode)}return x.jsxs($m.Provider,{value:m,children:[d&&m.visualElement?x.jsx(d,{visualElement:m.visualElement,...h}):null,pL(t,c,xL(b,m.visualElement,u),b,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=q.forwardRef(a);return o[bL]=t,o}function EL({layoutId:t}){const e=q.useContext(gx).id;return e&&t!==void 0?e+"-"+t:t}function TL(t,e){q.useContext(kI).strict}function AL(t){const{drag:e,layout:n}=yu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function CL(t,e){if(typeof Proxy>"u")return $y;const n=new Map,r=(a,o)=>$y(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,$y(o,void 0,t,e)),n.get(o))})}function qI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function RL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function DL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Yy(t){return t===void 0||t===1}function Kb({scale:t,scaleX:e,scaleY:n}){return!Yy(t)||!Yy(e)||!Yy(n)}function Cl(t){return Kb(t)||HI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function HI(t){return XA(t.x)||XA(t.y)}function XA(t){return t&&t!=="0%"}function im(t,e,n){const r=t-n,i=e*r;return n+i}function WA(t,e,n,r,i){return i!==void 0&&(t=im(t,i,r)),im(t,n,r)+e}function Qb(t,e=0,n=1,r,i){t.min=WA(t.min,e,n,r,i),t.max=WA(t.max,e,n,r,i)}function $I(t,{x:e,y:n}){Qb(t.x,e.translate,e.scale,e.originPoint),Qb(t.y,n.translate,n.scale,n.originPoint)}const KA=.999999999999,QA=1.0000000000001;function IL(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,$I(t,o)),r&&Cl(a.latestValues)&&nu(t,a.latestValues))}e.x<QA&&e.x>KA&&(e.x=1),e.y<QA&&e.y>KA&&(e.y=1)}function tu(t,e){t.min=t.min+e,t.max=t.max+e}function ZA(t,e,n,r,i=.5){const a=sn(t.min,t.max,i);Qb(t,e,n,a,r)}function nu(t,e){ZA(t.x,e.x,e.scaleX,e.scale,e.originX),ZA(t.y,e.y,e.scaleY,e.scale,e.originY)}function YI(t,e){return qI(DL(t.getBoundingClientRect(),e))}function kL(t,e,n){const r=YI(t,n),{scroll:i}=e;return i&&(tu(r.x,i.offset.x),tu(r.y,i.offset.y)),r}const JA=()=>({translate:0,scale:1,origin:0,originPoint:0}),ru=()=>({x:JA(),y:JA()}),eC=()=>({min:0,max:0}),_n=()=>({x:eC(),y:eC()}),Zb={current:null},XI={current:!1};function NL(){if(XI.current=!0,!!mx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zb.current=t.matches;t.addEventListener("change",e),e()}else Zb.current=!1}const ML=new WeakMap;function OL(t,e,n){for(const r in e){const i=e[r],a=n[r];if(yr(i))t.addValue(r,i);else if(yr(a))t.addValue(r,vu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,vu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const tC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PL{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ox,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=qr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,nn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Xm(n),this.isVariantNode=MI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const b=g[m];u[m]!==void 0&&yr(b)&&b.set(u[m])}}mount(e){this.current=e,ML.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),XI.current||NL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zo(this.notifyUpdate),zo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yu){const n=yu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_n()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tC.length;r++){const i=tC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=OL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(BD(r)||FD(r))?r=parseFloat(r):!Gz(r)&&Lo.test(n)&&(r=wI(e,n)),this.setBaseTarget(e,yr(r)?r.get():r)),yr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Hx(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!yr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){jx.render(this.render)}}class WI extends PL{constructor(){super(...arguments),this.KeyframeResolver=kz}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function KI(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function VL(t){return window.getComputedStyle(t)}class jL extends WI{constructor(){super(...arguments),this.type="html",this.renderInstance=KI}readValueFromInstance(e,n){if(Bu.has(n))return this.projection?.isProjecting?Gb(n):K6(e,n);{const r=VL(e),i=(Tx(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YI(e,n)}build(e,n,r){Fx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return $x(e,n,r)}}const QI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zL(t,e,n,r){KI(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(QI.has(i)?i:Yx(i),e.attrs[i])}class LL extends WI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_n}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bu.has(n)){const r=SI(n);return r&&r.default||0}return n=QI.has(n)?n:Yx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return BI(e,n,r)}build(e,n,r){VI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){zL(e,n,r,i)}mount(e){this.isSVGTag=zI(e.tagName),super.mount(e)}}const BL=(t,e)=>qx(t)?new LL(e):new jL(e,{allowProjection:t!==q.Fragment});function fu(t,e,n){const r=t.getProps();return Hx(r,e,n!==void 0?n:r.custom,t)}const Jb=t=>Array.isArray(t);function UL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vu(n))}function FL(t){return Jb(t)?t[t.length-1]||0:t}function Xx(t,e){const n=fu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=FL(a[o]);UL(t,o,c)}}function GL(t){return!!(yr(t)&&t.add)}function e1(t,e){const n=t.getValue("willChange");if(GL(n))return n.add(e);if(!n&&Ts.WillChange){const r=new Ts.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function ZI(t){return t.props[UI]}const qL=t=>t!==null;function HL(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(qL),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const $L={type:"spring",stiffness:500,damping:25,restSpeed:10},YL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),XL={type:"keyframes",duration:.8},WL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KL=(t,{keyframes:e})=>e.length>2?XL:Bu.has(t)?t.startsWith("scale")?YL(e[1]):$L:WL;function QL({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Wx=(t,e,n,r={},i,a)=>o=>{const c=Px(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Da(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};QL(c)||Object.assign(h,KL(t,h)),h.duration&&(h.duration=Da(h.duration)),h.repeatDelay&&(h.repeatDelay=Da(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Xb(h),h.delay===0&&(g=!0)),(Ts.instantAnimations||Ts.skipAnimations)&&(g=!0,Xb(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const m=HL(h.keyframes,c);if(m!==void 0){nn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new Mx(h):new bz(h)};function ZL({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function JI(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const g=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||d&&ZL(d,h))continue;const b={delay:n,...Px(a||{},h)},S=g.get();if(S!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===S&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const A=ZI(t);if(A){const D=window.MotionHandoffAnimation(A,h,nn);D!==null&&(b.startTime=D,w=!0)}}e1(t,h),g.start(Wx(h,g,m,t.shouldReduceMotion&&bI.has(h)?{type:!1}:b,t,w));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{nn.update(()=>{o&&Xx(t,o)})}),u}function ek(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function t1(t,e,n={}){const r=fu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(JI(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return JL(t,e,u,d,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function JL(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(t1(u,e,{...o,delay:n+(typeof r=="function"?0:r)+ek(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function tk(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>t1(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=t1(t,e,n);else{const i=typeof e=="function"?fu(t,e,n.custom):e;r=Promise.all(JI(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function nk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const e9=Ux.length;function rk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?rk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<e9;n++){const r=Ux[n],i=t.props[r];(Ld(i)||i===!1)&&(e[r]=i)}return e}const t9=[...Bx].reverse(),n9=Bx.length;function r9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>tk(t,n,r)))}function i9(t){let e=r9(t),n=nC(),r=!0;const i=u=>(d,h)=>{const g=fu(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:b,...S}=g;d={...d,...S,...b}}return d};function a(u){e=u(t)}function o(u){const{props:d}=t,h=rk(t.parent)||{},g=[],m=new Set;let b={},S=1/0;for(let E=0;E<n9;E++){const A=t9[E],D=n[A],I=d[A]!==void 0?d[A]:h[A],V=Ld(I),z=A===u?D.isActive:null;z===!1&&(S=E);let O=I===h[A]&&I!==d[A]&&V;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),D.protectedKeys={...b},!D.isActive&&z===null||!I&&!D.prevProp||Ym(I)||typeof I=="boolean")continue;const T=a9(D.prevProp,I);let C=T||A===u&&D.isActive&&!O&&V||E>S&&V,k=!1;const j=Array.isArray(I)?I:[I];let L=j.reduce(i(A),{});z===!1&&(L={});const{prevResolvedValues:U={}}=D,P={...U,...L},X=Y=>{C=!0,m.has(Y)&&(k=!0,m.delete(Y)),D.needsAnimating[Y]=!0;const te=t.getValue(Y);te&&(te.liveStyle=!1)};for(const Y in P){const te=L[Y],le=U[Y];if(b.hasOwnProperty(Y))continue;let Z=!1;Jb(te)&&Jb(le)?Z=!nk(te,le):Z=te!==le,Z?te!=null?X(Y):m.add(Y):te!==void 0&&m.has(Y)?X(Y):D.protectedKeys[Y]=!0}D.prevProp=I,D.prevResolvedValues=L,D.isActive&&(b={...b,...L}),r&&t.blockInitialAnimation&&(C=!1);const $=O&&T;C&&(!$||k)&&g.push(...j.map(Y=>{const te={type:A};if(typeof Y=="string"&&r&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:le}=t,Z=fu(le,Y);if(le.enteringChildren&&Z){const{delayChildren:B}=Z.transition||{};te.delay=ek(le.enteringChildren,t,B)}}return{animation:Y,options:te}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const A=fu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);A&&A.transition&&(E.transition=A.transition)}m.forEach(A=>{const D=t.getBaseTarget(A),I=t.getValue(A);I&&(I.liveStyle=!0),E[A]=D??null}),g.push({animation:E})}let w=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(g):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=nC()}}}function a9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nk(e,t):!1}function Al(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nC(){return{animate:Al(!0),whileInView:Al(),whileHover:Al(),whileTap:Al(),whileDrag:Al(),whileFocus:Al(),exit:Al()}}class Ko{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s9 extends Ko{constructor(e){super(e),e.animationState||(e.animationState=i9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ym(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let o9=0;class l9 extends Ko{constructor(){super(...arguments),this.id=o9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const c9={animation:{Feature:s9},exit:{Feature:l9}};function Ud(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function dh(t){return{point:{x:t.pageX,y:t.pageY}}}const u9=t=>e=>zx(e)&&t(e,dh(e));function md(t,e,n,r){return Ud(t,e,u9(n),r)}const ik=1e-4,f9=1-ik,d9=1+ik,ak=.01,h9=0-ak,p9=0+ak;function Rr(t){return t.max-t.min}function g9(t,e,n){return Math.abs(t-e)<=n}function rC(t,e,n,r=.5){t.origin=r,t.originPoint=sn(e.min,e.max,t.origin),t.scale=Rr(n)/Rr(e),t.translate=sn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=f9&&t.scale<=d9||isNaN(t.scale))&&(t.scale=1),(t.translate>=h9&&t.translate<=p9||isNaN(t.translate))&&(t.translate=0)}function vd(t,e,n,r){rC(t.x,e.x,n.x,r?r.originX:void 0),rC(t.y,e.y,n.y,r?r.originY:void 0)}function iC(t,e,n){t.min=n.min+e.min,t.max=t.min+Rr(e)}function m9(t,e,n){iC(t.x,e.x,n.x),iC(t.y,e.y,n.y)}function aC(t,e,n){t.min=e.min-n.min,t.max=t.min+Rr(e)}function yd(t,e,n){aC(t.x,e.x,n.x),aC(t.y,e.y,n.y)}function Ai(t){return[t("x"),t("y")]}const sk=({current:t})=>t?t.ownerDocument.defaultView:null,sC=(t,e)=>Math.abs(t-e);function v9(t,e){const n=sC(t.x,e.x),r=sC(t.y,e.y);return Math.sqrt(n**2+r**2)}class ok{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Wy(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=v9(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:w}=m,{timestamp:E}=or;this.history.push({...w,timestamp:E});const{onStart:A,onMove:D}=this.handlers;b||(A&&A(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Xy(b,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:S,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Wy(m.type==="pointercancel"?this.lastMoveEventInfo:Xy(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(m,A),w&&w(m,A)},!zx(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=dh(e),u=Xy(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=or;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Wy(u,this.history)),this.removeListeners=ch(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zo(this.updatePoint)}}function Xy(t,e){return e?{point:e(t.point)}:t}function oC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wy({point:t},e){return{point:t,delta:oC(t,lk(e)),offset:oC(t,y9(e)),velocity:b9(e,.1)}}function y9(t){return t[0]}function lk(t){return t[t.length-1]}function b9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=lk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Da(e)));)n--;if(!r)return{x:0,y:0};const a=Di(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function x9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?sn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?sn(n,t,r.max):Math.min(t,n)),t}function lC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _9(t,{top:e,left:n,bottom:r,right:i}){return{x:lC(t.x,n,i),y:lC(t.y,e,r)}}function cC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function S9(t,e){return{x:cC(t.x,e.x),y:cC(t.y,e.y)}}function w9(t,e){let n=.5;const r=Rr(t),i=Rr(e);return i>r?n=Pd(e.min,e.max-r,t.min):r>i&&(n=Pd(t.min,t.max-i,e.min)),Es(0,1,n)}function E9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const n1=.35;function T9(t=n1){return t===!1?t=0:t===!0&&(t=n1),{x:uC(t,"left","right"),y:uC(t,"top","bottom")}}function uC(t,e,n){return{min:fC(t,e),max:fC(t,n)}}function fC(t,e){return typeof t=="number"?t:t[e]||0}const A9=new WeakMap;class C9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_n(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dh(g).point)},o=(g,m)=>{const{drag:b,dragPropagation:S,onDragStart:w}=this.getProps();if(b&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Pz(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ai(A=>{let D=this.getAxisMotionValue(A).get()||0;if(Ia.test(D)){const{projection:I}=this.visualElement;if(I&&I.layout){const V=I.layout.layoutBox[A];V&&(D=Rr(V)*(parseFloat(D)/100))}}this.originPoint[A]=D}),w&&nn.postRender(()=>w(g,m)),e1(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:w,onDrag:E}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:A}=m;if(S&&this.currentDirection===null){this.currentDirection=R9(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,A),this.updateAxis("y",m.point,A),this.visualElement.render(),E&&E(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ai(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new ok(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:sk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&nn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!cg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=x9(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&eu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=_9(r.layoutBox,e):this.constraints=!1,this.elastic=T9(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ai(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=E9(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!eu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=kL(r,i.root,this.visualElement.getTransformPagePoint());let o=S9(i.layout.layoutBox,a);if(n){const c=n(RL(o));this.hasMutatedConstraints=!!c,c&&(o=qI(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=Ai(h=>{if(!cg(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,S)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return e1(this.visualElement,e),r.start(Wx(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ai(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ai(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ai(n=>{const{drag:r}=this.getProps();if(!cg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-sn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!eu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ai(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=w9({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ai(o=>{if(!cg(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(sn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;A9.set(this.visualElement,this);const e=this.visualElement.current,n=md(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();eu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nn.read(r);const o=Ud(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ai(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=n1,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function cg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function R9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class D9 extends Ko{constructor(e){super(e),this.removeGroupControls=Ii,this.removeListeners=Ii,this.controls=new C9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const dC=t=>(e,n)=>{t&&nn.postRender(()=>t(e,n))};class I9 extends Ko{constructor(){super(...arguments),this.removePointerDownListener=Ii}onPointerDown(e){this.session=new ok(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dC(e),onStart:dC(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&nn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const nd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ke.test(t))t=parseFloat(t);else return t;const n=hC(t,e.target.x),r=hC(t,e.target.y);return`${n}% ${r}%`}},k9={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Lo.parse(t);if(i.length>5)return r;const a=Lo.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=sn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let Ky=!1;class N9 extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;nL(M9),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Ky&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Ky=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||nn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Ky=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ck(t){const[e,n]=II(),r=q.useContext(gx);return x.jsx(N9,{...t,layoutGroup:r,switchLayoutGroup:q.useContext(FI),isPresent:e,safeToRemove:n})}const M9={borderRadius:{...nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nd,borderTopRightRadius:nd,borderBottomLeftRadius:nd,borderBottomRightRadius:nd,boxShadow:k9};function O9(t,e,n){const r=yr(t)?t:vu(t);return r.start(Wx("",r,e,n)),r.animation}const P9=(t,e)=>t.depth-e.depth;class V9{constructor(){this.children=[],this.isDirty=!1}add(e){yx(this.children,e),this.isDirty=!0}remove(e){bx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(P9),this.isDirty=!1,this.children.forEach(e)}}function j9(t,e){const n=qr.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(zo(r),t(a-e))};return nn.setup(r,!0),()=>zo(r)}const uk=["TopLeft","TopRight","BottomLeft","BottomRight"],z9=uk.length,pC=t=>typeof t=="string"?parseFloat(t):t,gC=t=>typeof t=="number"||Ke.test(t);function L9(t,e,n,r,i,a){i?(t.opacity=sn(0,n.opacity??1,B9(r)),t.opacityExit=sn(e.opacity??1,0,U9(r))):a&&(t.opacity=sn(e.opacity??1,n.opacity??1,r));for(let o=0;o<z9;o++){const c=`border${uk[o]}Radius`;let u=mC(e,c),d=mC(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||gC(u)===gC(d)?(t[c]=Math.max(sn(pC(u),pC(d),r),0),(Ia.test(d)||Ia.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=sn(e.rotate||0,n.rotate||0,r))}function mC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const B9=fk(0,.5,KD),U9=fk(.5,.95,Ii);function fk(t,e,n){return r=>r<t?0:r>e?1:n(Pd(t,e,r))}function vC(t,e){t.min=e.min,t.max=e.max}function Ei(t,e){vC(t.x,e.x),vC(t.y,e.y)}function yC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bC(t,e,n,r,i){return t-=e,t=im(t,1/n,r),i!==void 0&&(t=im(t,1/i,r)),t}function F9(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ia.test(e)&&(e=parseFloat(e),e=sn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=sn(a.min,a.max,r);t===a&&(c-=e),t.min=bC(t.min,e,n,c,i),t.max=bC(t.max,e,n,c,i)}function xC(t,e,[n,r,i],a,o){F9(t,e[n],e[r],e[i],e.scale,a,o)}const G9=["x","scaleX","originX"],q9=["y","scaleY","originY"];function _C(t,e,n,r){xC(t.x,e,G9,n?n.x:void 0,r?r.x:void 0),xC(t.y,e,q9,n?n.y:void 0,r?r.y:void 0)}function SC(t){return t.translate===0&&t.scale===1}function dk(t){return SC(t.x)&&SC(t.y)}function wC(t,e){return t.min===e.min&&t.max===e.max}function H9(t,e){return wC(t.x,e.x)&&wC(t.y,e.y)}function EC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hk(t,e){return EC(t.x,e.x)&&EC(t.y,e.y)}function TC(t){return Rr(t.x)/Rr(t.y)}function AC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $9{constructor(){this.members=[]}add(e){yx(this.members,e),e.scheduleRender()}remove(e){if(bx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Y9(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:b,skewY:S}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),S&&(r+=`skewY(${S}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Qy=["","X","Y","Z"],X9=1e3;let W9=0;function Zy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function pk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ZI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",nn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&pk(r)}function gk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=W9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Z9),this.nodes.forEach(nB),this.nodes.forEach(rB),this.nodes.forEach(J9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new V9)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sx),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=DI(o)&&!Uz(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{g=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,h&&h(),h=j9(m,250),jg.hasAnimatedSinceResize&&(jg.hasAnimatedSinceResize=!1,this.nodes.forEach(DC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||lB,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=d.getProps(),A=!this.targetLayout||!hk(this.targetLayout,b),D=!g&&m;if(this.options.layoutRoot||this.resumeFrom||D||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...Px(S,"layout"),onPlay:w,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(h,D)}else g||DC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(RC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tB),this.nodes.forEach(K9),this.nodes.forEach(Q9)):this.nodes.forEach(RC),this.clearAllSnapshots();const c=qr.now();or.delta=Es(0,1e3/60,c-or.timestamp),or.timestamp=c,or.isProcessing=!0,By.update.process(or),By.preRender.process(or),By.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eB),this.sharedNodes.forEach(aB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rr(this.snapshot.measuredBox.x)&&!Rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!dk(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Cl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),cB(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return _n();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(uB))){const{scroll:d}=this.root;d&&(tu(c.x,d.offset.x),tu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=_n();if(Ei(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&Ei(c,o),tu(c.x,h.offset.x),tu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=_n();Ei(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&nu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Cl(h.latestValues)&&nu(u,h.latestValues)}return Cl(this.latestValues)&&nu(u,this.latestValues),u}removeTransform(o){const c=_n();Ei(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Cl(d.latestValues))continue;Kb(d.latestValues)&&d.updateSnapshot();const h=_n(),g=d.measurePageBox();Ei(h,g),_C(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Cl(this.latestValues)&&_C(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),yd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_n(),this.targetWithTransforms=_n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),m9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ei(this.target,this.layout.layoutBox),$I(this.target,this.targetDelta)):Ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),yd(this.relativeTargetOrigin,this.target,m.target),Ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Kb(this.parent.latestValues)||HI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===or.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ei(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;IL(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_n());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yC(this.prevProjectionDelta.x,this.projectionDelta.x),yC(this.prevProjectionDelta.y,this.projectionDelta.y)),vd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!AC(this.projectionDelta.x,this.prevProjectionDelta.x)||!AC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ru(),this.projectionDelta=ru(),this.projectionDeltaWithTransform=ru()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},g=ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=_n(),b=u?u.source:void 0,S=this.layout?this.layout.source:void 0,w=b!==S,E=this.getStack(),A=!E||E.members.length<=1,D=!!(w&&!A&&this.options.crossfade===!0&&!this.path.some(oB));this.animationProgress=0;let I;this.mixTargetDelta=V=>{const z=V/1e3;IC(g.x,o.x,z),IC(g.y,o.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sB(this.relativeTarget,this.relativeTargetOrigin,m,z),I&&H9(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=_n()),Ei(I,this.relativeTarget)),w&&(this.animationValues=h,L9(h,d,this.latestValues,z,D,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{jg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vu(0)),this.currentAnimation=O9(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(X9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&mk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||_n();const g=Rr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=Rr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Ei(c,u),nu(c,h),vd(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $9),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&Zy("z",o,d,this.animationValues);for(let h=0;h<Qy.length;h++)Zy(`rotate${Qy[h]}`,o,d,this.animationValues),Zy(`skew${Qy[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Vg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Vg(c?.pointerEvents)||""),this.hasProjected&&!Cl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=Y9(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const S in Bd){if(h[S]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:A}=Bd[S],D=g==="none"?h[S]:w(h[S],d);if(E){const I=E.length;for(let V=0;V<I;V++)o[E[V]]=D}else A?this.options.visualElement.renderState.vars[S]=D:o[S]=D}this.options.layoutId&&(o.pointerEvents=d===this?Vg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(CC),this.root.sharedNodes.clear()}}}function K9(t){t.updateLayout()}function Q9(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Ai(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Rr(g);g.min=n[h].min,g.max=g.min+m}):mk(i,e.layoutBox,n)&&Ai(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Rr(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=ru();vd(o,n,e.layoutBox);const c=ru();a?vd(c,t.applyTransform(r,!0),e.measuredBox):vd(c,n,e.layoutBox);const u=!dk(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const b=_n();yd(b,e.layoutBox,g.layoutBox);const S=_n();yd(S,n,m.layoutBox),hk(b,S)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Z9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function J9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function eB(t){t.clearSnapshot()}function CC(t){t.clearMeasurements()}function RC(t){t.isLayoutDirty=!1}function tB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nB(t){t.resolveTargetDelta()}function rB(t){t.calcProjection()}function iB(t){t.resetSkewAndRotation()}function aB(t){t.removeLeadSnapshot()}function IC(t,e,n){t.translate=sn(e.translate,0,n),t.scale=sn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kC(t,e,n,r){t.min=sn(e.min,n.min,r),t.max=sn(e.max,n.max,r)}function sB(t,e,n,r){kC(t.x,e.x,n.x,r),kC(t.y,e.y,n.y,r)}function oB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lB={duration:.45,ease:[.4,0,.1,1]},NC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),MC=NC("applewebkit/")&&!NC("chrome/")?Math.round:Ii;function OC(t){t.min=MC(t.min),t.max=MC(t.max)}function cB(t){OC(t.x),OC(t.y)}function mk(t,e,n){return t==="position"||t==="preserve-aspect"&&!g9(TC(e),TC(n),.2)}function uB(t){return t!==t.root&&t.scroll?.wasRoot}const fB=gk({attachResizeListener:(t,e)=>Ud(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jy={current:void 0},vk=gk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jy.current){const t=new fB({});t.mount(window),t.setOptions({layoutScroll:!0}),Jy.current=t}return Jy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dB={pan:{Feature:I9},drag:{Feature:D9,ProjectionNode:vk,MeasureLayout:ck}};function PC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&nn.postRender(()=>a(e,dh(e)))}class hB extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=Vz(e,(n,r)=>(PC(this.node,r,"Start"),i=>PC(this.node,i,"End"))))}unmount(){}}class pB extends Ko{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ch(Ud(this.node.current,"focus",()=>this.onFocus()),Ud(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VC(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&nn.postRender(()=>a(e,dh(e)))}class gB extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=Bz(e,(n,r)=>(VC(this.node,r,"Start"),(i,{success:a})=>VC(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const r1=new WeakMap,eb=new WeakMap,mB=t=>{const e=r1.get(t.target);e&&e(t)},vB=t=>{t.forEach(mB)};function yB({root:t,...e}){const n=t||document;eb.has(n)||eb.set(n,{});const r=eb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(vB,{root:t,...e})),r[i]}function bB(t,e,n){const r=yB(e);return r1.set(t,n),r.observe(t),()=>{r1.delete(t),r.unobserve(t)}}const xB={some:0,all:1};class _B extends Ko{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:xB[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(u)};return bB(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SB(e,n))&&this.startObserver()}unmount(){}}function SB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const wB={inView:{Feature:_B},tap:{Feature:gB},focus:{Feature:pB},hover:{Feature:hB}},EB={layout:{ProjectionNode:vk,MeasureLayout:ck}},TB={...c9,...wB,...dB,...EB},Uu=CL(TB,BL);function AB(t){t.values.forEach(e=>e.stop())}function i1(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&Xx(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{i1(a,e)})})}function CB(t,e){if(Array.isArray(e))return i1(t,e);if(typeof e=="string")return i1(t,[e]);Xx(t,e)}function RB(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(tk(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{CB(r,n)})},stop(){t.forEach(n=>{AB(n)})},mount(){return()=>{e.stop()}}};return e}function DB(){const t=qm(RB);return vx(t.mount,[]),t}const IB=DB;function kB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function NB(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function ys(t,e){return function(n){n&&(t[e]=n)}}function yk(t,e,n){return function(r){r&&(t[e][n]=r)}}function jC(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function MB(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var OB="function",PB="object",VB="string",jB="number",Kx="undefined",bk=typeof window!==Kx,zB=typeof document!==Kx&&document,LB=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Mn=1e-7,ug={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function BB(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function am(t,e,n,r){return(t*r+e*n)/(n+r)}function Wm(t){return typeof t===Kx}function Qi(t){return t&&typeof t===PB}function Vn(t){return Array.isArray(t)}function $r(t){return typeof t===VB}function bu(t){return typeof t===jB}function Qx(t){return typeof t===OB}function UB(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function xk(t,e,n,r,i){var a=Zx(t,e,n);return a?n:FB(t,e,n+1,r,i)}function Zx(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function FB(t,e,n,r,i){for(var a=function(d){var h=e[d].trim();if(h===t.close&&!Zx(t,e,d))return{value:d};var g=d,m=Yr(i,function(b){var S=b.open;return S===h});if(m&&(g=xk(m,e,d,r,i)),g===-1)return o=d,"break";d=g,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Jx(t,e){var n=$r(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?LB:d,g=h.map(function(T){var C=T.open,k=T.close;return C===k?C:C+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",b=new RegExp(m,"g"),S=t.split(b).filter(function(T){return T&&T!=="undefined"}),w=S.length,E=[],A=[];function D(){return A.length?(E.push(A.join("")),A=[],!0):!1}for(var I=function(T){var C=S[T].trim(),k=T,j=Yr(h,function(P){var X=P.open;return X===C}),L=Yr(h,function(P){var X=P.close;return X===C});if(j){if(k=xk(j,S,T,w,h),k!==-1&&u)return D()&&a||(E.push(S.slice(T,k+1).join("")),T=k,a)?(V=T,"break"):(V=T,"continue")}else if(L&&!Zx(L,S,T)){var U=BB(h);return U.splice(h.indexOf(L),1),{value:Jx(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:U})}}else if(UB(C,i)&&!o)return D(),a?(V=T,"break"):(V=T,"continue");k===-1&&(k=w-1),A.push(S.slice(T,k+1).join("")),T=k,V=T},V,z=0;z<w;++z){var O=I(z);if(z=V,typeof O=="object")return O.value;if(O==="break")break}return A.length&&E.push(A.join("")),E}function Bo(t){return Jx(t,"")}function Pl(t){return Jx(t,",")}function _k(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function hh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function GB(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function zg(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Fd(){return Date.now?Date.now():new Date().getTime()}function As(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Yr(t,e,n){var r=As(t,e);return r>-1?t[r]:n}var Sk=(function(){var t=Fd(),e=bk&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Fd(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),qB=(function(){var t=bk&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Cs(t){return Object.keys(t)}function HB(t){var e=Cs(t);return e.map(function(n){return t[n]})}function Bt(t,e){var n=hh(t),r=n.value,i=n.unit;if(Qi(e)){var a=e[i];if(a){if(Qx(a))return a(r);if(ug[i])return ug[i](r,a)}}else if(i==="%")return r*e/100;return ug[i]?ug[i](r):r}function a1(t,e,n){return Math.max(e,Math.min(t,n))}function zC(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[et(e[0],Mn),et(e[0]/r,Mn)],[et(e[1]*r,Mn),et(e[1],Mn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=et(c,Mn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function wk(t,e,n,r){if(!r)return t.map(function(b,S){return a1(b,e[S],n[S])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=zC(t,e,!1,o),u=c[0],d=c[1],h=zC(t,n,!0,o),g=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>g||a>m)&&(i=g,a=m),[i,a]}function $B(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function s1(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function wn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function YB(t){return[0,1].map(function(e){return s1(t.map(function(n){return n[e]}))})}function LC(t){var e=YB(t),n=wn(e,t[0]),r=wn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function bs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function et(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function BC(t,e){return t.forEach(function(n,r){t[r]=et(t[r],e)}),t}function XB(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Ek(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Tk(t,e){t.indexOf(e)===-1&&t.push(e)}function Un(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ak(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Ck(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function sr(t,e,n,r){t.addEventListener(e,n,r)}function Ln(t,e,n,r){t.removeEventListener(e,n,r)}function Fu(t){return t?.ownerDocument||zB}function e_(t){return Fu(t).documentElement}function Qo(t){return Fu(t).body}function No(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function Rk(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Gu(t){return Qi(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var WB=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),KB=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),QB=typeof Map=="function",ZB=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function JB(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new ZB;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var eU=(function(){function t(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=JB(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],g=d[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},t})();function ph(t,e,n){var r=QB?Map:n?KB:WB,i=n||function(D){return D},a=[],o=[],c=[],u=t.map(i),d=e.map(i),h=new r,g=new r,m=[],b=[],S={},w=[],E=0,A=0;return u.forEach(function(D,I){h.set(D,I)}),d.forEach(function(D,I){g.set(D,I)}),u.forEach(function(D,I){var V=g.get(D);typeof V>"u"?(++A,o.push(I)):S[V]=A}),d.forEach(function(D,I){var V=h.get(D);typeof V>"u"?(a.push(I),++E):(c.push([V,I]),A=S[I]||0,m.push([V-A,I-E]),b.push(I===V),V!==I&&w.push([V,I]))}),o.reverse(),new eU(t,e,a,o,w,c,m,b)}var tU=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=ph(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),o1=function(t,e){return o1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},o1(t,e)};function gh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Aa=function(){return Aa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Aa.apply(this,arguments)};function Dk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function UC(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function FC(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function Ik(t){var e=[];return t.forEach(function(n){e=e.concat(Vn(n)?Ik(n):n)}),e}function tb(t,e){if(!e)return t;for(var n in e)Wm(t[n])&&(t[n]=e[n]);return t}function sm(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function GC(t){var e=t.className,n=Dk(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function qC(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function Km(t){if(!t)return null;var e=t.b;return Gu(e)?e:Km(t.c)}function kk(t){var e=t.parentNode;e&&e.removeChild(t)}function Nk(t){t.forEach(function(e){e()})}function nU(){return this.constructor(this.props,this.context)}var t_=0,Qm=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,d=HB(r).filter(function(S){return S.$_req}),h=Ik(d.map(function(S){return S.$_subs})),g=Yr(h,function(S){return S.d===u});if(c.b&&!$r(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(S,w){var E=w.d;return S[0]?S[0].d===E&&S.push(w):E>u&&S.push(w),S},[]);return m.forEach(function(S){mh(S,S._ps,[S.o],n,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return $r(i)||(c.ps=i.props,c.ref=i.ref),n_(this),c.r(n,r,c.b?b:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function Mk(){return Object.__CROACT_CURRENT_INSTNACE__}function rU(){return t_}function iU(t){t_=t}function n_(t){return Object.__CROACT_CURRENT_INSTNACE__=t,t_=0,t}var r_=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Aa(Aa({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=mh(a.c,[a],[a.o],i,a._cs,Aa(Aa({},this.state),this.$_state),r);o&&(n&&i.push(n),Nk(i),n_(null))},t})(),Ok=(function(t){gh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return sm(this.props,r)||sm(this.state,i)},e})(r_);function Pk(t){var e=function(n){e.current=n};return e.current=t,e}function aU(t){return t._fr=!0,t}function sU(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new r_(e,n),a.constructor=t,t._fr?(r.fr=Pk(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=nU),a.$_p=r,a}var oU=(function(t){gh(e,t);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=t.call(this,r,i,a,o,c,u,tb(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(tb(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=tb(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=d.contextType,b=u.b,S=m?.get(u);u._cs=i,g?(b=sU(d,h,S,u),u.b=b):(b.props=h,b.context=S);var w=b.state;u._usefs=[],u._uefs=[];var E=b.render();((c=(o=E?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(E.props.children=u.ps.children);var A=Aa(Aa({},i),b.$_cs);mh(u,u._ps,E?[E]:[],r,A),g?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,w)}),r.push(function(){u._usefs.forEach(function(D){D()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(D){return D()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(Qm);function lU(t,e,n){var r=i_(GC(t),GC(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function cU(t,e,n){var r=i_(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function i_(t,e){var n=Cs(t),r=Cs(e),i=ph(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=t[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],g=[t[h],e[h]];t[h]!==e[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function uU(t,e,n){var r=n.style,i=i_(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=zg(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=zg(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=zg(u,"-");r.removeProperty(g)}}function fU(t){return t.replace(/^on/g,"").toLowerCase()}var dU=(function(t){gh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=fU(r);i?(Ln(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,d)},sr(c,u,o[r]))},n.s=function(r){return sm(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=Km(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var S=Fu(h);g?m=S.createElementNS("http://www.w3.org/2000/svg",b):m=S.createElement(b)}c.b=m}mh(c,c._ps,d.children,r,i);var w=c.b,E=qC(a),A=E[0],D=E[1],I=qC(d),V=I[0],z=I[1];return lU(A,V,w),cU(D,z,c),uU(a.style||{},d.style||{},w),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Ln(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||kk(a)},e})(Qm);function Gd(t){if(!t||Gu(t))return t;var e=t.$_p._ps;return e.length?Gd(e[0].b):null}function Vk(t){if(t){if(t.b&&Gu(t.b))return t;var e=t._ps;return e.length?Vk(e[0]):null}}function Xi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=Dk(i,["key","ref"]);return{type:t,key:a,ref:o,props:Aa(Aa({},c),{children:Ek(n).filter(function(u){return u!=null&&u!==!1})})}}var jk=(function(t){gh(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(Qm),hU=(function(t){gh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=Km(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Fu(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){kk(this.b)},e})(Qm);function pU(t,e,n){var r=n.map(function(u){return $r(u)?null:u.key}),i=FC(e.map(function(u){return u.k})),a=FC(r),o=ph(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],g=e.splice(d,1)[0];e.splice(h,0,g);var m=Gd(g.b),b=Gd(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){e.splice(u,0,HC(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],g=e[d],m=$r(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),e.splice(d,1,HC(h,r[d],d,t)),!0):(g.i=d,!1)});return UC(UC([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function gU(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Gd(n[i].b);if(a)return a}return null}function HC(t,e,n,r){var i=r.d+1;if($r(t)||bu(t))return new hU("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?dU:oU;return new o(a,i,e,n,r,t.ref,t.props)}function mh(t,e,n,r,i,a,o){var c=pU(t,e,n),u=t._hyd,d=e.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(g){var m=Vk(g);m&&(m._sel=!0)}),t._hyd=null;var h=Km(t);return h&&c.reverse().forEach(function(g){var m=e[g],b=Gd(m.b);if(b&&h!==b&&!b.parentNode){var S=gU(t,m);h.insertBefore(b,S)}}),d.length>0}function mU(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new jk(e));var a=[];return mh(n,n._ps,t?[t]:[],a,r,void 0,void 0),Nk(a),n_(null),i||(e.__CROACT__=n),n}function $C(t,e,n){return!n&&t&&(n=new jk(e.parentElement),n._hyd=[e],n._sel=!0),mU(t,e,n),n}function zk(t){var e=Mk(),n=e._hs||(e._hs=[]),r=rU(),i=n[r];if(iU(r+1),i){if(!sm(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function vU(t,e){var n=zk({func:t,deps:e});return n.value}function yU(t){return vU(function(){return Pk(t)},[])}function Lk(t,e,n){var r=Mk(),i=zk({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function bU(t,e,n){Lk(function(){t?.(e())},n,!0)}function a_(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Bk(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Uk(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function s_(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function xU(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function _U(t,e){var n=s_("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function l1(t){return t.replace(/_/g,".")}function ad(t,e){var n=null,r="-1";return a_(t,function(i){var a=s_("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=_U(i.versionTest.toLowerCase(),e)||r),r=l1(r),!0)}),{preset:n,version:r}}function fg(t,e){var n={brand:"",version:"-1"};return a_(t,function(r){var i=Fk(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function Fk(t,e){return Bk(t,function(n){var r=n.brand;return s_(""+e.test,r.toLowerCase())})}var Gk=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],qk=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],c1=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Hk=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],$k=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Yk(t){return!!ad(Hk,t).preset}function SU(t){var e=Uk(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:Yk(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=ad(Gk,e),o=a.preset,c=a.version,u=ad($k,e),d=u.preset,h=u.version,g=ad(qk,e);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=ad(c1,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function wU(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!fg(Hk,n).brand||Yk(Uk())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&a_(c1,function(m){return Fk(n,m)});var u=fg(qk,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=fg(c1,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=Bk($k,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=fg(Gk,n);o.name=g.brand||o.name,o.version=g.brand&&t?t.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=l1(c.version),o.version=l1(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function EU(t){return xU()?wU():SU(t)}function TU(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function AU(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],d=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=d}}function CU(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function Xk(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function za(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Zt(e),i=0;i<e;++i){var a=e*i+i;if(!et(n[a],Mn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){AU(n,r,i,o,e);break}}if(!et(n[a],Mn))return[];CU(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=n[u];!et(d,Mn)||i===o||TU(n,r,c,i,e,-d)}}return r}function RU(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function Wk(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function DU(t,e){for(var n=Zt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Gl(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Zi(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Zt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function om(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Zt(t);return e.forEach(function(i){r=Ut(r,i,t)}),r}function Ut(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function Tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Be(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function IU(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Kk(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function br(t,e,n){n===void 0&&(n=e.length);var r=Ut(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function kU(t,e){return Ut(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function NU(t,e){return Ut(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function MU(t,e){return Ut(t,yh(e,4))}function dg(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Ut(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function vh(t,e){return br(yh(e,3),Gl(t,3))}function nb(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Ut(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function YC(t,e){return Ut(t,e,4)}function yh(t,e){var n=Math.cos(t),r=Math.sin(t),i=Zt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Zt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function o_(t,e){for(var n=Zt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function ql(t,e){for(var n=Zt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function l_(t,e,n,r,i,a,o,c){var u=t[0],d=t[1],h=e[0],g=e[1],m=n[0],b=n[1],S=r[0],w=r[1],E=i[0],A=i[1],D=a[0],I=a[1],V=o[0],z=o[1],O=c[0],T=c[1],C=[u,0,h,0,m,0,S,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,S,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,-E*u,-A*u,-D*h,-I*h,-V*m,-z*m,-O*S,-T*S,-E*d,-A*d,-D*g,-I*g,-V*b,-z*b,-O*w,-T*w],k=za(C,8);if(!k.length)return[];var j=Ut(k,[E,A,D,I,V,z,O,T],8);return j[8]=1,Zi(RU(j),3,4)}var bd=function(){return bd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bd.apply(this,arguments)};function OU(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qd(t,e){return e===void 0&&(e=0),Yc(xu(t,e))}function PU(t,e){var n=br(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Yc(t){var e=OU();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function xu(t,e){e===void 0&&(e=0);var n=Vn(t)?t:Bo(t);return n.map(function(r){var i=_k(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=Qi(e)?bd(bd({},e),{"o%":e["%"]}):{"%":e,"o%":e},g=Pl(o).map(function(P,X){return X===0&&"x%"in h?h["%"]=e["x%"]:X===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Bt(P,h)}),m=g[0],b=g[1],S=b===void 0?0:b,w=g[2],E=w===void 0?0:w;c=nb,d=[m,S,E]}else if(a==="translateY"){var A=Qi(e)?bd({"%":e["y%"]},e):{"%":e},S=Bt(o,A);c=nb,d=[0,S,0]}else if(a==="translateZ"){var E=parseFloat(o);c=nb,d=[0,0,E]}else if(a==="scale"||a==="scale3d"){var D=Pl(o).map(function(P){return parseFloat(P)}),I=D[0],V=D[1],z=V===void 0?I:V,O=D[2],T=O===void 0?1:O;c=dg,d=[I,z,T]}else if(a==="scaleX"){var I=parseFloat(o);c=dg,d=[I,1,1]}else if(a==="scaleY"){var z=parseFloat(o);c=dg,d=[1,z,1]}else if(a==="scaleZ"){var T=parseFloat(o);c=dg,d=[1,1,T]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=hh(o),k=C.unit,j=C.value,L=k==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=MU):a==="rotateX"?c=kU:a==="rotateY"&&(c=NU),d=L}else if(a==="matrix3d")c=YC,d=Pl(o).map(function(P){return parseFloat(P)});else if(a==="matrix"){var U=Pl(o).map(function(P){return parseFloat(P)});c=YC,d=[U[0],U[1],0,0,U[2],U[3],0,0,0,0,1,0,U[4],U[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var u1=function(t,e){return u1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},u1(t,e)};function VU(t,e){u1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qk=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),Zk=(function(t){VU(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,Qk)||this}return e})(tU);function jU(t,e){return ph(t,e,Qk)}var f1=function(){return f1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f1.apply(this,arguments)};function zU(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var Zm=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Qi(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Qi(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=As(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,zU(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(f1({listener:r},i))},t})();var d1=function(t,e){return d1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},d1(t,e)};function LU(t,e){d1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var iu=function(){return iu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iu.apply(this,arguments)};function BU(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function XC(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function hg(t){if(t){if($r(t))return document.querySelector(t)}else return null;if(Qx(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var UU=(function(t){LU(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=hg(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,g=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(iu(iu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],S=m[1]-o[1],w=c||[b?Math.abs(b)/b:0,S?Math.abs(S)/S:0];return this._prevScrollPos=m,this._lock=!1,!b&&!S?!1:(this.emit("move",{offsetX:w[0]?b:0,offsetY:w[1]?S:0,inputEvent:h}),d&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?BU:o;return c({container:hg(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Fd(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var S=this._getScrollPosition(c,r);this._prevScrollPos=S,h&&(this._isWait=!0),d||(this._lock=!0);var w={container:hg(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,w),this.emit("scroll",w),this._isWait=!1,d||this.checkScroll(iu(iu({},r),{prevScrollPos:S,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?XC:i,o=hg(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=XC(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(Zm);function FU(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Br(t){return et(t,Mn)}function GU(t,e){return t.every(function(n,r){return Br(n-e[r])===0})}function qU(t,e){return!Br(t[0]-e[0])&&!Br(t[1]-e[1])}function Jk(t){return t.length<3?0:Math.abs($B(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function WC(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=Hl(t),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,g=n/(d-c),m=r/(h-u);return t.map(function(b){return[i+(b[0]-c)*g,a+(b[1]-u)*m]})}function Hl(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function h1(t,e,n){var r=t[0],i=t[1],a=Hl(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=lm(u[0],u[1]),h=p1(e),g=[];if(h.forEach(function(S){var w=lm(S[0],S[1]),E=S[0];if(GU(d,w))g.push({pos:t,line:S,type:"line"});else{var A=eN(c_(d,w),[u,S]);A.forEach(function(D){S.some(function(I){return qU(I,D)})?g.push({pos:D,line:S,type:"point"}):Br(E[1]-i)!==0&&g.push({pos:D,line:S,type:"intersection"})})}}),Yr(g,function(S){return S[0]===r}))return!0;var m=0,b={};return g.forEach(function(S){var w=S.pos,E=S.type,A=S.line;if(!(w[0]>r))if(E==="intersection")++m;else{if(E==="line")return;if(E==="point"){var D=Yr(A,function(z){return z[1]!==i}),I=b[w[0]],V=D[1]>i?1:-1;I?I!==V&&++m:b[w[0]]=V}}}),m%2===1}function lm(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<Mn&&(o=0),Math.abs(c)<Mn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function c_(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(d){var b=-i/n,S=-c/a;return b!==S?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var w=-i/r,E=-(o*w+c)/a;h=[[E,w]]}else if(a===0){var w=-c/o,E=-(r*w+i)/n;h=[[E,w]]}else if(r===0){var E=-i/n,w=-(a*E+c)/o;h=[[E,w]]}else if(o===0){var E=-c/a,w=-(n*E+i)/r;h=[[E,w]]}else{var E=(r*c-o*i)/(o*n-r*a),w=-(n*E+i)/r;h=[[E,w]]}return h.map(function(A){return[A[0],A[1]]})}function eN(t,e){var n=e.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Br(a-t[1][0])){if(!Br(o-t[1][1])){var d=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if(Br(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if(Br(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(g){var m=g[0],b=g[1];return n.every(function(S){return 0<=Br(m-S[0][0])&&0<=Br(S[0][1]-m)&&0<=Br(b-S[1][0])&&0<=Br(S[1][1]-b)})})),r.map(function(g){return[Br(g[0]),Br(g[1])]})}function p1(t){return FU(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function HU(t,e){var n=t.slice(),r=e.slice();LC(n)===-1&&n.reverse(),LC(r)===-1&&r.reverse();var i=p1(n),a=p1(r),o=i.map(function(h){return lm(h[0],h[1])}),c=a.map(function(h){return lm(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],b=[];c.forEach(function(S,w){var E=c_(h,S),A=eN(E,[m,a[w]]);b.push.apply(b,A.map(function(D){return{index1:g,index2:w,pos:D,type:"intersection"}}))}),b.sort(function(S,w){return bs(m[0],S.pos)-bs(m[0],w.pos)}),u.push.apply(u,b),h1(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(h1(h[1],n)){var m=!1,b=As(u,function(S){var w=S.index2;return w===g?(m=!0,!1):!!m});b===-1&&(m=!1,b=As(u,function(S){var w=S.index1,E=S.index2;return w===-1&&E+1===g?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return d[m]?!1:(d[m]=!0,!0)})}function $U(t,e){var n=HU(t,e);return n.map(function(r){var i=r.pos;return i})}function YU(t,e){var n=$U(t,e);return Jk(n)}var g1=function(t,e){return g1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},g1(t,e)};function XU(t,e){g1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var In=function(){return In=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},In.apply(this,arguments)};function WU(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function rb(t){return WU([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function KU(t){return t.touches&&t.touches.length>=2}function pg(t){return t?t.touches?ZU(t.touches):[tN(t)]:[]}function QU(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function KC(t,e,n){var r=n.length,i=xd(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=xd(e,r),h=d.clientX,g=d.clientY,m=xd(n,r),b=m.clientX,S=m.clientY,w=a-h,E=o-g,A=a-b,D=o-S;return{clientX:c,clientY:u,deltaX:w,deltaY:E,distX:A,distY:D}}function ib(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ZU(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(tN(t[r]));return n}function tN(t){return{clientX:t.clientX,clientY:t.clientY}}function xd(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ab=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),rb(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),rb(e)-rb(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=KC(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=KC([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=xd(e,this.length),i=xd(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ib(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ib(e)/ib(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),QC=["textarea","input"],JU=(function(t){XU(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var S=m.type.indexOf("drag")>=-1;if(!(i.flag&&S)){i._isDragAPI=!0;var w=i.options,E=w.container,A=w.pinchOutside,D=w.preventWheelClick,I=w.preventRightClick,V=w.preventDefault,z=w.checkInput,O=w.dragFocusedInput,T=w.preventClickEventOnDragStart,C=w.preventClickEventOnDrag,k=w.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,D&&(m.which===2||m.button===1)||I&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var U=i._window.document.activeElement,P=m.target;if(P){var X=P.tagName.toLowerCase(),$=QC.indexOf(X)>-1,H=P.isContentEditable;if($||H){if(z||!O&&U===P)return!1;if(U&&(U===P||H&&U.isContentEditable&&U.contains(P)))if(O)P.blur();else return!1}else if((V||m.type==="touchstart")&&U){var Y=U.tagName.toLowerCase();(U.isContentEditable||QC.indexOf(Y)>-1)&&U.blur()}(T||C||k)&&sr(i._window,"click",i._onClick,!0)}i.clientStores=[new ab(pg(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Fd()-i.prevTime<200,i._isMouseEvent=QU(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var te=i._preventMouseEvent||i.emit("dragStart",In(In({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));te===!1&&i.stop(),i._isMouseEvent&&i.flag&&V&&m.preventDefault()}if(!i.flag)return!1;var le=0;if(L?(i._attchDragEvent(),j&&A&&(le=setTimeout(function(){sr(E,"touchstart",i.onDragStart,{passive:!1})}))):j&&A&&Ln(E,"touchstart",i.onDragStart),i.flag&&KU(m)){if(clearTimeout(le),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var S=i.options.preventDefault;!i._isMouseEvent&&S&&m.preventDefault(),i._prevInputEvent=m;var w=pg(m),E=i.moveClients(w,m,!1);if(i._dragFlag){if(i.pinchFlag||E.deltaX||E.deltaY){var A=i._preventMouseEvent||i.emit("drag",In(In({},E),{isScroll:!!b,inputEvent:m}));if(A===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,w)}i.getCurrentStore().getPosition(w,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,S=b.pinchOutside,w=b.container,E=b.preventClickEventOnDrag,A=b.preventClickEventOnDragStart,D=b.preventClickEventByCondition,I=i.isDrag;(E||A||D)&&requestAnimationFrame(function(){i._allowClickEvent()}),!D&&!A&&E&&!I&&i._allowClickEvent(),i._useTouch&&S&&Ln(w,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var V=m?.touches?pg(m):[],z=V.length;z===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ab(V));var O=i._getPosition(),T=Fd(),C=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||C?0:T,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",In({data:i.data,datas:i.data,isDouble:C,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},O)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ln(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=Rk(o)?o:No(o),i.options=In({checkInput:!1,container:o&&!("document"in o)?No(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){sr(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){sr(m,"mousedown",i.onDragStart),sr(m,"mousemove",i._passCallback)}),sr(u,"contextmenu",i._onContextMenu)),h&&sr(No(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){sr(m,"touchstart",i.onDragStart,g),sr(m,"touchmove",i._passCallback,g)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),In(In({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Ln(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Ln(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Ln(a,"mousedown",n.onDragStart)}),Ln(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Ln(a,"touchstart",n.onDragStart)}),Ln(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ab(pg(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",In(In({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",In(In({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",In(In({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),In(In({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var g=h.getPosition();return d.distX+=g.distX,d.distY+=g.distY,d},a),c=o.distX,u=o.distY;return In(In({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(sr(r,"dragover",this.onDrag,i),sr(n,"dragend",this.onDragEnd)),this._useMouse&&(sr(r,"mousemove",this.onDrag),sr(n,"mouseup",this.onDragEnd)),this._useTouch&&(sr(r,"touchmove",this.onDrag,i),sr(n,"touchend",this.onDragEnd,i),sr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Ln(r,"dragover",this.onDrag),Ln(n,"dragend",this.onDragEnd)),this._useMouse&&(Ln(r,"mousemove",this.onDrag),Ln(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ln(r,"touchstart",this.onDragStart),Ln(r,"touchmove",this.onDrag),Ln(n,"touchend",this.onDragEnd),Ln(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(Zm);function e8(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var t8=e8;function n8(t){return t8(t).toString(36)}function r8(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function i8(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Pl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function a8(t,e,n,r,i){var a=Fu(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=i8(t,e,n),(i||a.head||a.body).appendChild(o),o}function s8(t){var e="rCS"+n8(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=r8(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=a8(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var m1=function(){return m1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m1.apply(this,arguments)};function o8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nN(t,e){var n=s8(e),r=n.className;return aU(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=o8(i,["className","cspNonce"]),d=yU();return bU(a,function(){return d.current},[]),Lk(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),Xi(t,m1({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var v1=function(t,e){return v1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},v1(t,e)};function bh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Q=function(){return Q=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Q.apply(this,arguments)};function l8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function c8(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function u8(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function we(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function xh(t,e){return Q({events:[],props:[],name:t},e)}var f8=["n","w","s","e"],u_=["n","w","s","e","nw","ne","sw","se"];function d8(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function h8(t){var e=d8(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var qu=EU(),rN=qu.browser.webkit,iN=rN&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),aN=qu.browser.name,sN=parseInt(qu.browser.version,10),p8=aN==="chrome",g8=qu.browser.chromium,m8=parseInt(qu.browser.chromiumVersion,10)||0,v8=p8&&sN>=109||g8&&m8>=109,y8=aN==="firefox",b8=parseInt(qu.browser.webkitVersion,10)>=612||sN>=15,f_="moveable-",x8=u_.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),_8=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(x8,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(h8(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(iN?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),S8=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],y1=1e-4,Ir=1e-7,gg=1e-9,b1=Math.pow(10,10),ZC=-b1,w8={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},d_={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},oN={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},lN=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function _h(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return Q(Q({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var _u=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),Q(Q({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function du(t,e,n,r){var i=t.length===16,a=i?4:3,o=tc(t,n,r,a),c=J(o,4),u=J(c[0],2),d=u[0],h=u[1],g=J(c[1],2),m=g[0],b=g[1],S=J(c[2],2),w=S[0],E=S[1],A=J(c[3],2),D=A[0],I=A[1],V=J(an(t,e,a),2),z=V[0],O=V[1],T=Math.min(d,m,w,D),C=Math.min(h,b,E,I),k=Math.max(d,m,w,D),j=Math.max(h,b,E,I);d=d-T||0,m=m-T||0,w=w-T||0,D=D-T||0,h=h-C||0,b=b-C||0,E=E-C||0,I=I-C||0,z=z-T||0,O=O-C||0;var L=t[0],U=t[a+1],P=Cr(L*U);return{left:T,top:C,right:k,bottom:j,origin:[z,O],pos1:[d,h],pos2:[m,b],pos3:[w,E],pos4:[D,I],direction:P}}function cN(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,g=o.top,m=u?4:3,b=J(Be(Eu(c,[n-h,r-g],m),d),2),S=b[0],w=b[1],E=J(Ha({datas:i,distX:S,distY:w}),2),A=E[0],D=E[1];return[A,D]}function ec(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,b=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=za(i,b),n.inverseBeforeMatrix=za(a,b),n.absoluteOrigin=Gl(Tt([c,u],d),b),n.startDragBeforeDist=br(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=br(n.inverseMatrix,n.absoluteOrigin,b)}function E8(t){return du(t.datas.beforeTransform,[50,50],100,100).direction}function Jm(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=As(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Yr(u,function(b){return b.index===a&&b.functionName===n})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=KF(o,t.state,d),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=we(we([],J(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function ev(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function T8(t){var e=t.datas,n=t.distX,r=t.distY,i=J(fN({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=uN(e,DU([a,o],4));return br(c,Gl([0,0,0],4),4)}function uN(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?Ut(c,e,4):Ut(e,c,4),d=Ut(za(n?a:r,4),u,4),h=Ut(d,za(n?o:i,4),4);return h}function fN(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return Be(br(i,Tt(c,[n,r]),u),o)}function Ha(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return Be(br(e?a:o,Tt(h,[r,i]),g),e?u:d)}function A8(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return Be(br(a,Tt(c,[r,i]),d),u)}function C8(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=hh(o),d=u.value,h=u.unit,g=c?i:r,m=c?n:e;if(o==="%"||isNaN(d)){var b=g?a[c]/g:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function dN(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function R8(t,e){return dN(e).map(function(n){return t[n]})}function sb(t,e){var n=(e+1)/2;return[am(t[0][0],t[1][0],n,1-n),am(t[0][1],t[1][1],n,1-n)]}function Fn(t,e){var n=sb([t[0],t[1]],e[0]),r=sb([t[2],t[3]],e[0]);return sb([n,r],e[1])}function D8(t,e,n,r,i,a){var o=tc(e,n,r,i),c=Fn(o,a),u=t[0]-c[0],d=t[1]-c[1];return[u,d]}function Sh(t,e,n,r){return Ut(t,Sd(e,r,n),r)}function I8(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if($r(n)){var d=e.beforeTransform,h=e.afterTransform;r?u=Zi(qd(n),4,c):u=Zi(Ut(Ut(d,qd([n]),4),h,4),4,c)}else u=n;return Sh(a,u,i,c)}function k8(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return Sh(r,Ut(o||a,o_(e,c),c),n,c)}function tv(t,e){var n=Hu(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Vn(r)?r:Bo(r),x1(t,e,i)},setTransformIndex:function(r){x1(t,e,r)}}}function nv(t,e,n){var r=Hu(e),i=r.startTransforms;x1(t,e,As(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function x1(t,e,n){var r=Hu(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=xu([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function h_(t,e){var n=Hu(t);n.nextTransforms=Bo(e)}function Hu(t){return t.originalDatas.beforeRenderable}function cm(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function mg(t){return(cm(t)||[]).join(" ")}function vg(t){return Hu(t).nextStyle}function hN(t,e,n,r,i){h_(i,e);var a=Ar.drag(t,_h(i,t.state,n,r)),o=a?a.transform:e;return Q(Q({transform:e,drag:a},Dr({transform:o},i)),{afterTransform:o})}function p_(t,e,n,r,i,a){var o=I8(t.state,i,e,a),c=O8(t,n,r,o);return c}function pN(t,e,n,r,i,a,o){var c=p_(t,e,n,i,a,o),u=t.state,d=u.left,h=u.top,g=t.props.groupable,m=g?d:0,b=g?h:0,S=Be(r,c);return Be(S,[m,b])}function N8(t,e,n,r,i,a,o){var c=pN(t,e,n,r,i,a,o);return c}function M8(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function O8(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return an(r,d,u)}function P8(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return pN(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function V8(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,b=c.left,S=c.top,w=a.fixedDirection,E=a.nextTargetMatrix||c.targetMatrix,A=h?4:3,D=C8(i,e,n,g,m,u),I=o?b:0,V=o?S:0,z=Sh(d,E,D,A),O=D8(r,z,e,n,A,w);return Be(O,[I,V])}function j8(t,e){return Fn(Pi(t.state),e)}function z8(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function L8(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function B8(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function gN(t,e,n){for(var r=t,i=[],a=e_(t)||Qo(t),o=!n&&t===e||t===a,c=o,u=!1,d=3,h,g,m,b=!1,S=$d(e,e,!0).offsetParent,w=1;r&&!c;){c=o;var E=Xr(r),A=E("position"),D=LN(r),I=A==="fixed",V=B8(E),z=IU(jF(D)),O=void 0,T=!1,C=!1,k=0,j=0,L=0,U=0,P={hasTransform:!1,fixedContainer:null};I&&(b=!0,P=FF(r),S=P.fixedContainer);var X=z.length;!u&&(X===16||V.length)&&(u=!0,d=4,A1(i),m&&(m=Zi(m,3,4))),u&&X===9&&(z=Zi(z,3,4));var $=UF(r,t),H=$.tagName,Y=$.hasOffset,te=$.isSVG,le=$.origin,Z=$.targetOrigin,B=$.offset,K=J(B,2),ie=K[0],re=K[1];H==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:GF(r,d)}),i.push({type:"offset",target:r,matrix:Zt(d)}));var fe=parseFloat(E("zoom"))||1;if(I)O=P.fixedContainer,T=!0;else{var ue=$d(r,e,!1,!0,E),ge=ue.offsetZoom;if(O=ue.offsetParent,T=ue.isEnd,C=ue.isStatic,w*=ge,(ue.isCustomElement||ge!==1)&&C)ie-=O.offsetLeft,re-=O.offsetTop;else if(y8||v8){var Te=ue.parentSlotElement;if(Te){for(var Ce=O,Fe=0,Se=0;Ce&&L8(Ce);)Fe+=Ce.offsetLeft,Se+=Ce.offsetTop,Ce=Ce.offsetParent;ie-=Fe,re-=Se}}}if(rN&&!b8&&Y&&!te&&C&&(A==="relative"||A==="static")&&(ie-=O.offsetLeft,re-=O.offsetTop,o=o||T),I)Y&&P.hasTransform&&(L=O.clientLeft,U=O.clientTop);else if(Y&&S!==O&&(k=O.clientLeft,j=O.clientTop),Y&&O===a){var De=BN(r,!1);ie+=De[0],re+=De[1]}if(i.push({type:"target",target:r,matrix:Sd(z,d,le)}),V.length&&(i.push({type:"offset",target:r,matrix:Zt(d)}),i.push({type:"target",target:r,matrix:Sd(qd(V),d,le)})),Y){var ot=r===t,Pe=ot?0:r.scrollLeft,Ge=ot?0:r.scrollTop;i.push({type:"offset",target:r,matrix:ql([ie-Pe+k-L,re-Ge+j-U],d)})}else i.push({type:"offset",target:r,origin:le});if(fe!==1&&i.push({type:"zoom",target:r,matrix:Sd(o_([fe,fe],d),d,[0,0])}),m||(m=z),h||(h=le),g||(g=Z),c||I)break;r=O,o=T,(!n||r===a)&&(c=o)}return m||(m=Zt(d)),h||(h=[0,0]),g||(g=[0,0]),{zoom:w,offsetContainer:S,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:b}}var Dl=null,Il=null,au=null;function Su(t){t?(window.Map&&(Dl=new Map,Il=new Map),au=[]):(Dl=null,au=null,Il=null)}function U8(t){var e=Il?.get(t);if(e)return e;var n=wd(t,!0);return Il&&Il.set(t,n),n}function F8(t,e){if(au){var n=Yr(au,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=gN(t,e,!0);return au&&au.push([[t,e],r]),r}function Xr(t){var e=Dl?.get(t);if(!e){var n=No(t).getComputedStyle(t);if(!Dl)return function(a){return n[a]};e={style:n,cached:{}},Dl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Wi(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},Q(Q({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function ob(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,g=Wi(t,e.name,i),m=t.moveables,b=[],S=g.map(function(w,E){var A=m[E],D=A.state,I=D.gestos,V=w;if(c)V=new _u(o).dragStart(r,w),b.push(V);else{if(I[o]||(I[o]=h.childGestos[E]),!I[o])return;V=_h(w,D,r,d,a,o),b.push(V)}var z=e[n](A,Q(Q({},V),{parentFlag:!0}));return u&&(I[o]=null),z});return c&&(h.childGestos=m.map(function(w){return w.state.gestos[o]})),{eventParams:S,childEvents:b}}function xs(t,e,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=Wi(t,e.name,r),u=t.moveables,d=c.map(function(h,g){var m=u[g],b=h;b=i(m,h);var S=e[n](m,Q(Q({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),S});return d}function um(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Pi(e.state),c=Fn(o,i),u=J(br(yh(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function mN(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=$l(t.props,e).zoom,d=_d(o/Math.PI*180),h={},g=t.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(S){var w=S.dir;h[w]=!0});var b=Cr(c);return n.map(function(S){var w=S.data,E=S.classNames,A=S.dir,D=d_[A];if(!D||!h[A])return null;m[A]=!0;var I=(et(d,15)+b*oN[A]+720)%180,V={};return Cs(w).forEach(function(z){V["data-".concat(z)]=w[z]}),r.createElement("div",Q({className:je.apply(void 0,we(["control","direction",A,e],J(E),!1)),"data-rotation":I,"data-direction":A},V,{key:"direction-".concat(A),style:pm.apply(void 0,we([o,u],J(D.map(function(z){return a[z]})),!1))}))})}function vN(t,e,n,r){var i=$l(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?u_:o;return we(we([],J(c?_N(t,r,n,u):[]),!1),J(mN(t,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function Hd(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=wn(n,r),d=e?et(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:je.apply(void 0,we(["line","direction",e?"edge":"",e],J(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:od(n,r,i,u)})}function yN(t,e,n,r,i){var a=n===!0?f8:n;return a.map(function(o,c){var u=J(d_[o],2),d=u[0],h=u[1];if(h!=null)return Hd(t,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function bN(t){return function(e,n){var r=$l(e.props,t).edge;return r&&(r===!0||r.length)?we(we([],J(yN(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),J(G8(e,t,n)),!1):xN(e,t,n)}}function xN(t,e,n){return vN(t,u_,e,n)}function G8(t,e,n){return vN(t,["nw","ne","sw","se"],e,n)}function _N(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=t.props.zoom,g=Cr(u),m=c/Math.PI*180;return(r||Cs(d)).map(function(b){var S=d_[b];if(!S)return null;var w=(et(m,15)+g*oN[b]+720)%180,E=["around-control"];return n&&E.push("direction",n),e.createElement("div",{className:je.apply(void 0,we([],J(E),!1)),"data-rotation":w,"data-direction":b,key:"direction-around-".concat(b),style:pm.apply(void 0,we([c,h],J(S.map(function(A){return o[A]})),!1))})})}function g_(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,S={position:a,left:c,top:d,right:g,bottom:b};return{vertical:JC(S,e,!0),horizontal:JC(S,n,!1)}}function rv(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,g=u.right,m=u.bottom,b=e||t.props.bounds||{},S=b.position||"client",w=S==="css",E=b.left,A=E===void 0?-1/0:E,D=b.top,I=D===void 0?-1/0:D,V=b.right,z=V===void 0?w?-1/0:1/0:V,O=b.bottom,T=O===void 0?w?-1/0:1/0:O;return w&&(z=a+g-d-z,T=i+m-h-T),{left:A+d-o,right:z+d-o,top:I+h-c,bottom:T+h-c}}function q8(t,e,n){var r=rv(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=J(n,2),d=u[0],h=u[1],g=J(Be(n,e),2),m=g[0],b=g[1];xe(m)<Ir&&(m=0),xe(b)<Ir&&(b=0);var S=b>0,w=m>0,E={isBound:!1,offset:0,pos:0},A={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:E,horizontal:A};if(m===0)S?c<h&&(A.pos=c,A.offset=h-c):a>h&&(A.pos=a,A.offset=h-a);else if(b===0)w?o<d&&(E.pos=o,E.offset=d-o):i>d&&(E.pos=i,E.offset=d-i);else{var D=b/m,I=n[1]-D*d,V=0,z=0,O=!1;w&&o<=d?(V=D*o+I,z=o,O=!0):!w&&d<=i&&(V=D*i+I,z=i,O=!0),O&&(V<a||V>c)&&(O=!1),O||(S&&c<=h?(V=c,z=(V-I)/D,O=!0):!S&&h<=a&&(V=a,z=(V-I)/D,O=!0)),O&&(E.isBound=!0,E.pos=z,E.offset=d-z,A.isBound=!0,A.pos=V,A.offset=h-V)}return{vertical:E,horizontal:A}}function JC(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,we([],J(e),!1)),o=Math.max.apply(Math,we([],J(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return xe(d.offset)-xe(u.offset)})}function e2(t,e,n){var r=n?t.map(function(i){return vh(i,n)}):t;return r.some(function(i){return i[0]<e.left&&xe(i[0]-e.left)>.1||i[0]>e.right&&xe(i[0]-e.right)>.1||i[1]<e.top&&xe(i[1]-e.top)>.1||i[1]>e.bottom&&xe(i[1]-e.bottom)>.1})}function H8(t,e,n){var r=Oi(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return xe(a-t[n?0:1])-xe(o-t[n?0:1])}).map(function(a){return wn([0,0],n?[a,e]:[e,a])})}function $8(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=rv(t),c=o.left,u=o.top,d=o.right,h=o.bottom,g=c-r[0],m=d-r[0],b=u-r[1],S=h-r[1],w={left:g,top:b,right:m,bottom:S};if(!e2(n,w,0))return[];var E=[];return[[g,0],[m,0],[b,1],[S,1]].forEach(function(A){var D=J(A,2),I=D[0],V=D[1];n.forEach(function(z){var O=wn([0,0],z);E.push.apply(E,we([],J(H8(z,I,V).map(function(T){return a+T-O}).filter(function(T){return!e2(e,w,T)}).map(function(T){return et(T*180/Math.PI,Ir)})),!1))})}),E}var Y8=["left","right","center"],X8=["top","bottom","middle"],t2={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Uo={start:"left",end:"right",center:"center"},Fo={start:"top",end:"bottom",center:"middle"};function su(){return{left:!1,top:!1,right:!1,bottom:!1}}function $u(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=t.state,g=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||g&&g.length||o&&o.length||c&&c.length)}function m_(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function W8(t,e){var n=m_(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function v_(t,e){var n=W8(t,e),r=X8.filter(function(a){return a in n}),i=Y8.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function K8(t,e,n){var r=an(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Q8(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Mn&&(i=0),Math.abs(a)<Mn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return et(d,Mn)})}var SN="snapRotationThreshold",wN="snapRotationDegrees",EN="snapHorizontalThreshold",TN="snapVerticalThreshold";function iv(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,d=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=m2(o,u[EN],5),g=m2(a,u[TN],5);return AN(t.state.guidelines,e,n,r,i,h,g,d)}function AN(t,e,n,r,i,a,o,c){return{vertical:r2(t,"vertical",e,o*c[0],r),horizontal:r2(t,"horizontal",n,a*c[1],i)}}function Z8(t,e,n){var r=J(n,2),i=r[0],a=r[1],o=J(e,2),c=o[0],u=o[1],d=J(Be(n,e),2),h=d[0],g=d[1],m=g>0,b=h>0;h=gm(h),g=gm(g);var S={isSnap:!1,offset:0,pos:0},w={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:S,horizontal:w};var E=iv(t,h?[i]:[],g?[a]:[],[],[],void 0,void 0),A=E.vertical,D=E.horizontal;A.posInfos.filter(function(H){var Y=H.pos;return b?Y>=c:Y<=c}),D.posInfos.filter(function(H){var Y=H.pos;return m?Y>=u:Y<=u}),A.isSnap=A.posInfos.length>0,D.isSnap=D.posInfos.length>0;var I=_1(A),V=I.isSnap,z=I.guideline,O=_1(D),T=O.isSnap,C=O.guideline,k=T?C.pos[1]:0,j=V?z.pos[0]:0;if(h===0)T&&(w.isSnap=!0,w.pos=C.pos[1],w.offset=a-w.pos);else if(g===0)V&&(S.isSnap=!0,S.pos=j,S.offset=i-j);else{var L=g/h,U=n[1]-L*i,P=0,X=0,$=!1;V?(X=j,P=L*X+U,$=!0):T&&(P=k,X=(P-U)/L,$=!0),$&&(S.isSnap=!0,S.pos=X,S.offset=i-X,w.isSnap=!0,w.pos=P,w.offset=a-P)}return{vertical:S,horizontal:w}}function Ro(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function n2(t,e,n,r){var i=v_(t.props.snapDirections,e),a=iv(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return Ro(u)}),i.horizontalNames.map(function(u){return Ro(u)}),n,r),o=Ro(i.horizontalNames[a.horizontal.index]),c=Ro(i.verticalNames[a.vertical.index]);return{vertical:Q(Q({},a.vertical),{direction:c}),horizontal:Q(Q({},a.horizontal),{direction:o})}}function _1(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function r2(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=n.map(function(g,m){var b=i[m]||"",S=t.map(function(w){var E=w.pos,A=g-E[u];return{offset:A,dist:xe(A),guideline:w,direction:b}}).filter(function(w){var E=w.guideline,A=w.dist,D=E.type;return!(D!==e||A>r)}).sort(function(w,E){return w.dist-E.dist});return{pos:g,index:m,guidelineInfos:S,direction:b}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function J8(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,S){var w=S[b+1]||S[0];a.push(m),a.push([(m[0]+w[0])/2,(m[1]+w[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,we([],J(R8([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Fn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=iv(t,c,u,a.map(function(m){return Ro(m[0])}),a.map(function(m){return Ro(m[1])}),r,i),h=Ro(a.map(function(m){return m[0]})[d.vertical.index]),g=Ro(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:Q(Q({},d.vertical),{direction:h}),horizontal:Q(Q({},d.horizontal),{direction:g})}}function CN(t,e){var n=xe(t.offset),r=xe(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ir?1:r<Ir?-1:n-r}function fm(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return CN({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function eF(t,e,n){var r=[];if(n)xe(e[0])!==1||xe(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=xe(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=xe(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function RN(t,e){var n=s1([e[0][0],e[1][0]]),r=s1([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function y_(t,e){var n=J(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];xe(a)<Ir&&(a=0),xe(o)<Ir&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var d=o/a;c=d*(t[0]-r[0])+r[1],u=t[1]}return c-u}function DN(t,e,n,r){return r===void 0&&(r=Ir),t.every(function(i){var a=y_(i,e),o=a<=0;return o===n||xe(a)<=r})}function i2(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function tF(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,g=c.height,m=[[u,d],[u,d+g]],b=[[u,d],[u+h,d]],S=[[u+h,d],[u+h,d+g]],w=[[u,d+g],[u+h,d+g]];if(DN([[u,d],[u+h,d],[u,d+g],[u+h,d+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=Do(n,o,b,i),A=Do(n,o,w,i),D=Do(n,o,m,a),I=Do(n,o,S,a),V=E.isBound&&A.isBound,z=E.isBound||A.isBound,O=D.isBound&&I.isBound,T=D.isBound||I.isBound,C=wu(E.offset,A.offset),k=wu(D.offset,I.offset),j=[0,0],L=!1,U=!1;return xe(k)<xe(C)?(j=[C,0],L=z,U=V):(j=[0,k],L=T,U=O),{isAllBound:U,isVerticalBound:z,isHorizontalBound:T,isBound:L,offset:j}}function Do(t,e,n,r,i,a){var o=J(e,2),c=o[0],u=o[1],d=t[0],h=n[0],g=n[1],m=gm(g[1]-h[1]),b=gm(g[0]-h[0]),S=u,w=c,E=-c/u;if(b){if(!m){if(a&&!S)return{isBound:!1,offset:0};if(w){var V=(h[1]-d[1])/E+d[0];return i2(V,h[0],g[0],r,i)}else{var D=h[1]-d[1],I=xe(D)<=(i||0);return{isBound:I,offset:I?D:0}}}}else{if(a&&!w)return{isBound:!1,offset:0};if(S){var A=E*(h[0]-d[0])+d[1];return i2(A,h[1],g[1],r,i)}else{var D=h[0]-d[0],I=xe(D)<=(i||0);return{isBound:I,offset:I?D:0}}}return{isBound:!1,offset:0}}function IN(t,e,n){return e.map(function(r){var i=tF(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=Ha({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function nF(t,e,n){var r,i=b_(t,e,[0,0],!1).map(function(m){return Q(Q({},m),{multiple:m.multiple.map(function(b){return xe(b)*2})})}),a=IN(t,i,n),o=fm(a,0),c=fm(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=J(A8({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:d}}}function rF(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function b_(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=tc(a,100,100,o?4:3),u=Fn(c,[0,0]);return rF(n,r).map(function(d){var h=J(d,3),g=h[0],m=h[1],b=h[2],S=[Fn(c,m),Fn(c,b)],w=Q8(S),E=RN(u,S),A=E.vertical,D=E.horizontal,I=y_(u,S)<=0;return{multiple:g,centerSign:I,verticalSign:A,horizontalSign:D,lineConstants:w,line:[Fn(e,m),Fn(e,b)]}})}function a2(t,e,n,r){var i=r?t.map(function(a){return vh(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=y_(n,a)<=0;return!DN(e,a,o)})}function iF(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return xe(n[0]);if(!a)return xe(n[1]);var o=a/i;return xe((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function aF(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function sF(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,g=c-r[0],m=c+d-r[0],b=u-r[1],S=u+h-r[1],w=[[g,b],[m,b],[g,S],[m,S]],E=Fn(n,[0,0]);if(!a2(n,w,E,0))return[];var A=[],D=w.map(function(I){return[Oi(I),wn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var V=wn([0,0],aF(I)),z=iF(I);A.push.apply(A,we([],J(D.filter(function(O){var T=J(O,1),C=T[0];return C&&z<=C}).map(function(O){var T=J(O,2),C=T[0],k=T[1],j=Math.acos(C?z/C:0),L=k+j,U=k-j;return[o+L-V,o+U-V]}).reduce(function(O,T){return O.push.apply(O,we([],J(T),!1)),O},[]).filter(function(O){return!a2(e,w,E,O)}).map(function(O){return et(O*180/Math.PI,Ir)})),!1))}),A}function oF(t){var e=t.props.innerBounds,n=su();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Fn(u,[0,0]),h=e.left,g=e.top,m=e.width,b=e.height,S=[[h,g],[h,g+b]],w=[[h,g],[h+m,g]],E=[[h+m,g],[h+m,g+b]],A=[[h,g+b],[h+m,g+b]],D=b_(t,u,[0,0],!1),I=[],V=[];return D.forEach(function(z){var O=z.line,T=z.lineConstants,C=RN(d,O),k=C.horizontal,j=C.vertical,L=Do(O,T,w,j,1,!0),U=Do(O,T,A,j,1,!0),P=Do(O,T,S,k,1,!0),X=Do(O,T,E,k,1,!0);L.isBound&&!n.top&&(I.push(g),n.top=!0),U.isBound&&!n.bottom&&(I.push(g+b),n.bottom=!0),P.isBound&&!n.left&&(V.push(h),n.left=!0),X.isBound&&!n.right&&(V.push(h+m),n.right=!0)}),{boundMap:n,horizontal:I,vertical:V}}function lF(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(xe(i)<Mn&&(i=0),xe(a)<Mn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var d=(e[1]+n-c)/o;return[d-e[0],n]}}function S1(t,e,n,r,i){var a=lF(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=bs(t,e),c=bs(a,t),u=bs(a,e),d=c>o||u>o,h=J(Ha({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:d}}function dm(t,e){return t.isBound?t.offset:e.isSnap?_1(e).offset:0}function cF(t,e,n,r,i){var a=J(e,2),o=a[0],c=a[1],u=J(n,2),d=u[0],h=u[1],g=J(r,2),m=g[0],b=g[1],S=J(i,2),w=S[0],E=S[1],A=-w,D=-E;if(t&&o&&c){A=0,D=0;var I=[];if(d&&h?I.push([0,E],[w,0]):d?I.push([w,0]):h?I.push([0,E]):m&&b?I.push([0,E],[w,0]):m?I.push([w,0]):b&&I.push([0,E]),I.length){I.sort(function(T,C){return Oi(Be([o,c],T))-Oi(Be([o,c],C))});var V=I[0];if(V[0]&&xe(o)>Mn)A=-V[0],D=c*xe(o+A)/xe(o)-c;else if(V[1]&&xe(c)>Mn){var z=c;D=-V[1],A=o*xe(c+D)/xe(z)-o}if(t&&h&&d)if(xe(A)>Mn&&xe(A)<xe(w)){var O=xe(w)/xe(A);A*=O,D*=O}else if(xe(D)>Mn&&xe(D)<xe(E)){var O=xe(E)/xe(D);A*=O,D*=O}else A=wu(-w,A),D=wu(-E,D)}}else A=o||d?-w:0,D=c||h?-E:0;return[A,D]}function uF(t,e,n,r,i,a){if(!$u(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=S_(a.absolutePoses,[e,n]),c=ki(o),u=c.left,d=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(X){return X[1]}),vertical:o.map(function(X){return X[0]})},b=m_(t.props.snapDirections),S=v_(b,{left:u,right:d,top:h,bottom:g,center:(u+d)/2,middle:(h+g)/2}),w=av(t,i,S,m),E=w.vertical,A=w.horizontal,D=nF(t,o,a),I=D.vertical,V=D.horizontal,z=E.isSnap,O=A.isSnap,T=E.isBound||I.isBound,C=A.isBound||V.isBound,k=wu(E.offset,I.offset),j=wu(A.offset,V.offset),L=J(cF(r,[e,n],[T,C],[z,O],[k,j]),2),U=L[0],P=L[1];return[{isBound:T,isSnap:z,offset:U},{isBound:C,isSnap:O,offset:P}]}function av(t,e,n,r){r===void 0&&(r=n);var i=g_(rv(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:iv(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=dm(a[0],u),g=dm(o[0],d),m=xe(h),b=xe(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:b,bounds:o,snap:d}}}function s2(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=g_(e,n,r),u=c.horizontal,d=c.vertical,h=AN(t,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,b=dm(u[0],g),S=dm(d[0],m),w=xe(b),E=xe(S);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:S,dist:E,bounds:d,snap:m}}}function fF(t,e,n,r){var i=wn(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,g=d.isSnap,m=d.dist,b=i%180,S=b<3||b>177,w=b>87&&b<93;return m<u&&(o||c&&!w&&(!r||!S))?"vertical":h||g&&!S&&(!r||!w)?"horizontal":""}function dF(t,e,n,r,i,a){return n.map(function(o){var c=J(o,2),u=c[0],d=c[1],h=Fn(e,u),g=Fn(e,d),m=r?hF(t,h,g,i):av(t,i,{vertical:[g[0]],horizontal:[g[1]]}),b=m.horizontal,S=b.offset,w=b.isBound,E=b.isSnap,A=m.vertical,D=A.offset,I=A.isBound,V=A.isSnap,z=Be(d,u);if(!D&&!S)return{isBound:I||w,isSnap:V||E,sign:z,offset:[0,0]};var O=fF(h,g,m,r);if(!O)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var T=O==="vertical",C=[0,0];return!r&&xe(d[0])===1&&xe(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?C=Ha({datas:a,distX:-D,distY:-S}):C=S1(h,g,-(T?D:S),T,a).offset,C=C.map(function(k,j){return k*(z[j]?2/z[j]:0)}),{sign:z,isBound:T?I:w,isSnap:T?V:E,offset:C}})}function o2(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function hF(t,e,n,r){var i=q8(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Z8(t,e,n),u=c.horizontal,d=c.vertical,h=o2(a,u),g=o2(o,d),m=xe(h),b=xe(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:g,dist:b}}}function pF(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,d=t.props.bounds,h=1/0,g=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],b=d.left,S=b===void 0?-1/0:b,w=d.top,E=w===void 0?-1/0:w,A=d.right,D=A===void 0?1/0:A,I=d.bottom,V=I===void 0?1/0:I;m.forEach(function(z){var O=z[0]!==a[0],T=z[1]!==a[1],C=Fn(e,z),k=wn(r,C)*360/Math.PI;if(T){var j=C.slice();(xe(k-360)<2||xe(k-180)<2)&&(j[1]=r[1]);var L=S1(r,j,(r[1]<C[1]?V:E)-C[1],!1,i),U=J(L.offset,2),P=U[1],X=L.isOutside;isNaN(P)||(g=u+(X?1:-1)*xe(P))}if(O){var j=C.slice();(xe(k-90)<2||xe(k-270)<2)&&(j[0]=r[0]);var $=S1(r,j,(r[0]<C[0]?D:S)-C[0],!0,i),H=J($.offset,1),Y=H[0],te=$.isOutside;isNaN(Y)||(h=c+(te?1:-1)*xe(Y))}})}return{maxWidth:h,maxHeight:g}}var Ar={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Oi(d),g=wn(d,[0,0]);return[e.createElement("div",{className:je("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],ec(t,e),nv(t,e,"translate"),MF(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=st(t,e,Q({set:function(h){n.startValue=h}},tv(t,e))),d=r||ke(t,"onDragStart",u);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){Jm(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,g=e.distX,m=e.distY,b=n.isDrag,S=n.prevDist,w=n.prevBeforeDist,E=n.startValue;if(b){o&&(g+=o[0],m+=o[1]);var A=t.props,D=A.parentMoveable,I=d?0:A.throttleDrag||h||0,V=r?0:A.throttleDragRotate||0,z=0,O=!1,T=!1,C=!1,k=!1;if(!r&&V>0&&(g||m)){var j=A.startDragRotate||0,L=et(j+wn([0,0],[g,m])*180/Math.PI,V)-j,U=m*Math.abs(Math.cos((L-90)/180*Math.PI)),P=g*Math.abs(Math.cos(L/180*Math.PI)),X=Oi([P,U]);z=L*Math.PI/180,g=X*Math.cos(z),m=X*Math.sin(z)}if(!a&&!r&&!i){var $=J(uF(t,g,m,V,!c&&u||o,n),2),H=$[0],Y=$[1];O=H.isSnap,T=H.isBound,C=Y.isSnap,k=Y.isBound;var te=H.offset,le=Y.offset;g+=te,m+=le}var Z=Tt(fN({datas:n,distX:g,distY:m}),E),B=Tt(T8({datas:n,distX:g,distY:m}),E);BC(B,Ir),BC(Z,Ir),V||(!O&&!T&&(B[0]=et(B[0],I),Z[0]=et(Z[0],I)),!C&&!k&&(B[1]=et(B[1],I),Z[1]=et(Z[1],I)));var K=Be(Z,E),ie=Be(B,E),re=Be(ie,S),fe=Be(K,w);n.prevDist=ie,n.prevBeforeDist=K,n.passDelta=re,n.passDist=ie;var ue=n.left+K[0],ge=n.top+K[1],Te=n.right-K[0],Ce=n.bottom-K[1],Fe=ev(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(ie[0],"px, ").concat(ie[1],"px)"));if(h_(e,Fe),t.state.dragInfo.dist=r?[0,0]:ie,!(!r&&!D&&re.every(function(Ge){return!Ge})&&fe.some(function(Ge){return!Ge}))){var Se=t.state,De=Se.width,ot=Se.height,Pe=st(t,e,Q({transform:Fe,dist:ie,delta:re,translate:B,beforeDist:K,beforeDelta:fe,beforeTranslate:Z,left:ue,top:ge,right:Te,bottom:Ce,width:De,height:ot,isPinch:a},Dr({transform:Fe},e)));return!r&&ke(t,"onDrag",Pe),Pe}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,Q(Q({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ci(t,e,{});return!n&&ke(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=ob(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,g=Q(Q({},c),{targets:t.props.targets,events:h}),m=ke(t,"onDragGroupStart",g);i.isDrag=m!==!1;var b=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,Q(Q({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=ob(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=Q({targets:t.props.targets,events:a},r);return ke(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=ob(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ke(t,"onDragGroupEnd",ci(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function kN(t,e){var n=Fn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function gF(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=an(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function NN(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=M8(e,i,a),u=an(n,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var l2=T_("resizable"),w1={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:bN("resizable"),dragControlCondition:l2,viewClassName:E_("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,g=HN(o,i,r,u),m=t.state,b=m.target,S=m.width,w=m.height,E=m.gestos;if(!g||!b||E.resizable)return!1;E.resizable=c||t.controlGesto,!i&&ec(t,e),u.datas={},u.direction=g,u.startOffsetWidth=S,u.startOffsetHeight=w,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var A=t.props.transformOrigin||"% %";u.transformOrigin=$r(A)?A.split(" "):A,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function D(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Pi(t.state);function I(k){var j=kN(u.startPositions,k);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function V(k){var j=NN(t.state,k);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function z(k){u.minSize=[Bt("".concat(k[0]),0)||0,Bt("".concat(k[1]),0)||0]}function O(k){var j=[k[0]||1/0,k[1]||1/0];(!bu(j[0])||isFinite(j[0]))&&(j[0]=Bt("".concat(j[0]),0)||1/0),(!bu(j[1])||isFinite(j[1]))&&(j[1]=Bt("".concat(j[1]),0)||1/0),u.maxSize=j}D(S/w),I(d||[-g[0],-g[1]]),u.setFixedDirection=I,u.setFixedPosition=V,u.setMin=z,u.setMax=O;var T=st(t,e,{direction:g,startRatio:u.ratio,set:function(k){var j=J(k,2),L=j[0],U=j[1];u.startWidth=L,u.startHeight=U},setMin:z,setMax:O,setRatio:D,setFixedDirection:I,setFixedPosition:V,setOrigin:function(k){u.transformOrigin=k},dragStart:Ar.dragStart(t,new _u().dragStart([0,0],e))}),C=h||ke(t,"onResizeStart",T);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,C!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:g}),u.isResize?T:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,g=e.isGroup,m=e.parentEvent,b=e.resolveMatrix,S=r.isResize,w=r.transformOrigin,E=r.startWidth,A=r.startHeight,D=r.prevWidth,I=r.prevHeight,V=r.minSize,z=r.maxSize,O=r.ratio,T=r.startOffsetWidth,C=r.startOffsetHeight,k=r.isWidth;if(!S)return;if(b){var j=t.state.is3d,L=r.startOffsetMatrix,U=r.startTransformOrigin,P=j?4:3,X=qd(cm(e)),$=Math.sqrt(X.length);P!==$&&(X=Zi(X,$,P));var H=Sh(L,X,U,P),Y=tc(H,T,C,P);r.startPositions=Y,r.nextTargetMatrix=X,r.nextAllMatrix=H}var te=$l(t.props,"resizable"),le=te.resizeFormat,Z=te.throttleResize,B=Z===void 0?i?0:1:Z,K=te.parentMoveable,ie=te.keepRatioFinally,re=r.direction,fe=re,ue=0,ge=0;!re[0]&&!re[1]&&(fe=[1,1]);var Te=O&&(o??te.keepRatio)||!1;function Ce(){var lt=r.fixedDirection,ct=QN(fe,Te,r,e);ue=ct.distWidth,ge=ct.distHeight;var Qn=fe[0]-lt[0]||Te?Math.max(T+ue,Ir):T,Zn=fe[1]-lt[1]||Te?Math.max(C+ge,Ir):C;return Te&&T&&C&&(k?Zn=Qn/O:Qn=Zn*O),[Qn,Zn]}var Fe=J(Ce(),2),Se=Fe[0],De=Fe[1];m||(r.setFixedDirection(r.fixedDirection),ke(t,"onBeforeResize",st(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(lt){var ct;return r.setFixedDirection(lt),ct=J(Ce(),2),Se=ct[0],De=ct[1],[Se,De]},setFixedPosition:function(lt){var ct;return r.setFixedPosition(lt),ct=J(Ce(),2),Se=ct[0],De=ct[1],[Se,De]},boundingWidth:Se,boundingHeight:De,setSize:function(lt){var ct;ct=J(lt,2),Se=ct[0],De=ct[1]}},!0)));var ot=c;c||(!i&&a?ot=j8(t,[0,0]):ot=r.fixedPosition);var Pe=[0,0];a||(Pe=kF(t,Se,De,re,ot,!d&&h,r)),u&&(!u[0]&&(Pe[0]=0),!u[1]&&(Pe[1]=0));function Ge(){var lt;le&&(lt=J(le([Se,De]),2),Se=lt[0],De=lt[1]),Se=et(Se,B),De=et(De,B)}if(Te){fe[0]&&fe[1]&&Pe[0]&&Pe[1]&&(xe(Pe[0])>xe(Pe[1])?Pe[1]=0:Pe[0]=0);var Ye=!Pe[0]&&!Pe[1];Ye&&Ge(),fe[0]&&!fe[1]||Pe[0]&&!Pe[1]||Ye&&k?(Se+=Pe[0],De=Se/O):(!fe[0]&&fe[1]||!Pe[0]&&Pe[1]||Ye&&!k)&&(De+=Pe[1],Se=De*O)}else Se+=Pe[0],De+=Pe[1],Se=Math.max(0,Se),De=Math.max(0,De);n=J(wk([Se,De],V,z,Te?O:!1),2),Se=n[0],De=n[1],Ge(),Te&&(g||ie)&&(k?De=Se/O:Se=De*O),ue=Se-T,ge=De-C;var gt=[ue-D,ge-I];r.prevWidth=ue,r.prevHeight=ge;var ft=V8(t,Se,De,ot,w,r);if(!(!K&&gt.every(function(lt){return!lt})&&ft.every(function(lt){return!lt}))){var Ne=Ar.drag(t,_h(e,t.state,ft,!!a,!1,"draggable")),qe=Ne.transform,It=E+ue,Jt=A+ge,rn=st(t,e,Q({width:It,height:Jt,offsetWidth:Math.round(Se),offsetHeight:Math.round(De),startRatio:O,boundingWidth:Se,boundingHeight:De,direction:re,dist:[ue,ge],delta:gt,isPinch:!!a,drag:Ne},YN({style:{width:"".concat(It,"px"),height:"".concat(Jt,"px")},transform:qe},Ne,e)));return!m&&ke(t,"onResize",rn),rn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,d=u.width,h=u.height,g=d-(i+o),m=h-(a+c),b=xe(g)>3,S=xe(m)>3;if(b&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),S&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),b||S)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ci(t,e,{});return!r&&ke(t,"onResizeEnd",i),i}},dragGroupControlCondition:l2,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Q(Q({},e),{isGroup:!0}));if(!r)return!1;var i=Wi(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var b=n.minSize;i.forEach(function(S){var w=S.datas,E=w.minSize,A=w.startOffsetWidth,D=w.startOffsetHeight,I=a*(A?E[0]/A:0),V=o*(D?E[1]/D:0);b[0]=Math.max(b[0],I),b[1]=Math.max(b[1],V)})}function u(){var b=n.maxSize;i.forEach(function(S){var w=S.datas,E=w.maxSize,A=w.startOffsetWidth,D=w.startOffsetHeight,I=a*(A?E[0]/A:0),V=o*(D?E[1]/D:0);b[0]=Math.min(b[0],I),b[1]=Math.min(b[1],V)})}var d=xs(t,this,"dragControlStart",e,function(b,S){return um(t,b,n,S)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(S,w){S.setFixedDirection(b),um(t,S.moveable,n,i[w])})};n.setFixedDirection=h;var g=Q(Q({},r),{targets:t.props.targets,events:d.map(function(b){return Q(Q({},b),{setMin:function(S){b.setMin(S),c()},setMax:function(S){b.setMax(S),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=ke(t,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=$l(t.props,"resizable");ov(t,"onBeforeResize",function(b){ke(t,"onBeforeResizeGroup",st(t,e,Q(Q({},b),{targets:r.targets}),!0))});var i=this.dragControl(t,Q(Q({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=xs(t,this,"dragControl",e,function(b,S){var w=J(br(yh(t.rotation/180*Math.PI,3),[S.datas.originalX*d[0],S.datas.originalY*d[1],1],3),2),E=w[0],A=w[1];return Q(Q({},S),{parentDist:null,parentScale:d,dragClient:Tt(h,[E,A]),parentKeepRatio:u})}),m=Q({targets:r.targets,events:g},i);return ke(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=xs(t,this,"dragControlEnd",e),a=ci(t,e,{targets:t.props.targets,events:i});return ke(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function lb(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,d=an(t.state.rootMatrix,Be([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=Tt([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=wn(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=bs(h,[n,r])}function Lg(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function cb(t,e,n,r){return Lg(wn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function ub(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var g=IF(t,e,r,i+r);h=g.isSnap,d=i+g.dist}h||(d=et(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function MN(t,e,n){var r=J(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Vn(t))return t.map(function(E){return MN(E,[i,a,o,c],n)[0]});var u=J((t||"top").split("-"),2),d=u[0],h=u[1],g=[i,a];d==="left"?g=[o,i]:d==="right"?g=[a,c]:d==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],b=GN(g,n);if(h){var S=h==="top"||h==="left",w=d==="bottom"||d==="left";m=g[S&&!w||!S&&w?0:1]}return[[m,b]]}function E1(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Un(n,je("rotation-control"))||t.props.rotateAroundControls&&Un(n,je("around-control"))||Un(n,je("control"))&&Un(n,je("rotatable")))return!0;var r=t.props.rotationTarget;return r?A_(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var mF=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,vF={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[mF],viewClassName:function(t){return t.isDragging("rotatable")?je("view-rotation-dragging"):""},render:function(t,e){var n=$l(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=t.getState(),h=d.renderPoses,g=d.direction;if(!r)return null;var m=MN(i,h,g),b=[];if(m.forEach(function(A,D){var I=J(A,2),V=I[0],z=I[1];b.push(e.createElement("div",{key:"rotation".concat(D),className:je("rotation"),style:{transform:"translate(-50%) translate(".concat(V[0],"px, ").concat(V[1],"px) rotate(").concat(z,"rad)")}},e.createElement("div",{className:je("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:je("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var S=Cs(u||{}),w={};S.forEach(function(A){u[A].forEach(function(D){w[D]=A})});var E=[];Vn(o)&&(E=o.map(function(A){var D=w[A];return{data:D?{resolve:D}:{},classNames:D?["move"]:[],dir:A}})),b.push.apply(b,we([],J(mN(t,"rotatable",E,e)),!1))}return c&&b.push.apply(b,we([],J(_N(t,e)),!1)),b},dragControlCondition:E1,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,g=t.state,m=g.target,b=g.left,S=g.top,w=g.direction,E=g.beforeDirection,A=g.targetTransform,D=g.moveableClientRect,I=g.offsetMatrix,V=g.targetMatrix,z=g.allMatrix,O=g.width,T=g.height;if(!h&&!m)return!1;var C=t.getRect();i.rect=C,i.transform=A,i.left=b,i.top=S;var k=function(fe){var ue=NN(t.state,fe);i.fixedDirection=ue.fixedDirection,i.fixedOffset=ue.fixedOffset,i.fixedPosition=ue.fixedPosition,B&&B.setFixedPosition(fe)},j=function(fe){var ue=gF(t.state,fe);i.fixedDirection=ue.fixedDirection,i.fixedOffset=ue.fixedOffset,i.fixedPosition=ue.fixedPosition,B&&B.setFixedDirection(fe)},L=a,U=o;if(h||d||u){var P=c||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=Q(Q({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=Q(Q({},i.beforeInfo),{origin:C.origin,startValue:P})}else{var X=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(X){var $=X.getAttribute("data-direction")||"",H=w8[$];if(H){i.isControl=!0,i.isAroundControl=Un(X,je("around-control")),i.controlDirection=H;var Y=X.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var te=$F(g.rootMatrix,g.renderPoses,D);n=J(Fn(te,H),2),L=n[0],U=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var le=k;k=function(fe){var ue=g.is3d?4:3,ge=J(Tt(Wk(V,ue),fe),2),Te=ge[0],Ce=ge[1],Fe=br(I,Gl([Te,Ce],ue)),Se=br(z,Gl([fe[0],fe[1]],ue));le(fe);var De=g.posDelta;i.beforeInfo.origin=Be(Fe,De),i.afterInfo.origin=Be(Se,De),i.absoluteInfo.origin=Be(Se,De),lb(t,i.beforeInfo,L,U,D),lb(t,i.afterInfo,L,U,D),lb(t,i.absoluteInfo,L,U,D)},j=function(fe){var ue=Fn([[0,0],[O,0],[0,T],[O,T]],fe);k(ue)}}i.startClientX=L,i.startClientY=U,i.direction=w,i.beforeDirection=E,i.startValue=0,i.datas={},nv(t,e,"rotate");var Z=!1,B=!1;if(i.isControl&&i.resolveAble){var K=i.resolveAble;K==="resizable"&&(B=w1.dragControlStart(t,Q(Q({},new _u("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}B||(Z=Ar.dragStart(t,new _u().dragStart([0,0],e))),k(YF(t));var ie=st(t,e,Q(Q({set:function(fe){i.startValue=fe*Math.PI/180},setFixedDirection:j,setFixedPosition:k},tv(t,e)),{dragStart:Z,resizeStart:B})),re=ke(t,"onRotateStart",ie);return i.isRotate=re!==!1,g.snapRenderInfo={request:e.isRequest},i.isRotate?ie:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,g=e.groupDelta,m=e.resolveMatrix,b=a.beforeDirection,S=a.beforeInfo,w=a.afterInfo,E=a.absoluteInfo,A=a.isRotate,D=a.startValue,I=a.rect,V=a.startClientX,z=a.startClientY;if(A){Jm(t,e,"rotate");var O=E8(e),T=b*O,C=t.props.parentMoveable,k=0,j,L,U=0,P,X,$=0,H,Y,te=180/Math.PI*D,le=E.startValue,Z=!1,B=V+o,K=z+c;if(!d&&"parentDist"in e){var ie=e.parentDist;j=ie,P=ie,H=ie}else h||d?(j=Lg(u,b,S),P=Lg(u,T,w),H=Lg(u,T,E)):(j=cb(B,K,b,S),P=cb(B,K,T,w),H=cb(B,K,T,E),Z=!0);if(L=te+j,X=te+P,Y=le+H,ke(t,"onBeforeRotate",st(t,e,{beforeRotation:L,rotation:X,absoluteRotation:Y,setRotation:function(ot){P=ot-te,j=P,H=P}},!0)),n=J(ub(t,I,S,j,te,Z),3),k=n[0],j=n[1],L=n[2],r=J(ub(t,I,w,P,te,Z),3),U=r[0],P=r[1],X=r[2],i=J(ub(t,I,E,H,le,Z),3),$=i[0],H=i[1],Y=i[2],!(!$&&!U&&!k&&!C&&!m)){var re=ev(a,"rotate(".concat(X,"deg)"),"rotate(".concat(P,"deg)"));m&&(a.fixedPosition=p_(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var fe=P8(t,P,a),ue=Be(Tt(g||[0,0],fe),a.prevInverseDist||[0,0]);a.prevInverseDist=fe,a.requestValue=null;var ge=hN(t,re,ue,h,e),Te=ge,Ce=bs([B,K],E.startAbsoluteOrigin)-E.startDist,Fe=void 0;if(a.resolveAble==="resizable"){var Se=w1.dragControl(t,Q(Q({},_h(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Ce}));Se&&(Fe=Se,Te=YN(Te,Se,e))}var De=st(t,e,Q(Q({delta:U,dist:P,rotate:X,rotation:X,beforeDist:j,beforeDelta:k,beforeRotate:L,beforeRotation:L,absoluteDist:H,absoluteDelta:$,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!h,resize:Fe},ge),Te));return ke(t,"onRotate",De),De}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ci(t,e,{});return ke(t,"onRotateEnd",r),r}},dragGroupControlCondition:E1,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=xs(t,this,"dragControlStart",e,function(g,m){var b=g.state,S=b.left,w=b.top,E=b.beforeOrigin,A=Tt(Be([S,w],[i,a]),Be(E,o));return m.datas.startGroupClient=A,m.datas.groupClient=A,Q(Q({},m),{parentRotate:0})}),d=Q(Q({},c),{targets:t.props.targets,events:u}),h=ke(t,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){ov(t,"onBeforeRotate",function(d){ke(t,"onBeforeRotateGroup",st(t,e,Q(Q({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=xs(t,this,"dragControl",e,function(d,h){var g=h.datas.startGroupClient,m=J(h.datas.groupClient,2),b=m[0],S=m[1],w=J(vh(g,o*i),2),E=w[0],A=w[1],D=[E-b,A-S];return h.datas.groupClient=[E,A],Q(Q({},h),{parentRotate:a,groupDelta:D})});t.rotation=i*r.beforeRotation;var u=Q({targets:t.props.targets,events:c,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return ke(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=xs(t,this,"dragControlEnd",e),a=ci(t,e,{targets:t.props.targets,events:i});return ke(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function yF(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function x_(t,e){return yF(Q(Q({},t),{classNames:we([je("line","guideline",t.direction)],J(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(et(n,.1),"px")})}),e)}function c2(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(d,h){var g=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,x_({key:"".concat(e,"TargetGuideline").concat(h),classNames:[je("target","bold",g)],posValue:b,sizeValue:a,zoom:u,direction:e},c)})}function u2(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?Uo:Fo,h=i[d.start],g=i[d.end];return n.filter(function(m){var b=m.hide,S=m.elementRect;if(b)return!1;if(u&&S){var w=S.rect;if(w[d.start]<=h&&g<=w[d.end])return!1}return!0}).map(function(m,b){var S=m.pos,w=m.size,E=m.element,A=m.className,D=[-r[0]+S[0],-r[1]+S[1]];return x_({key:"".concat(e,"-default-guideline-").concat(b),classNames:E?[je("bold"),A]:[je("normal"),A],direction:e,posValue:D,sizeValue:w,zoom:c},a)})}function sd(t,e,n,r,i,a,o,c){var u,d=t.props,h=d.snapDigit,g=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,S=d.snapDistFormat,w=S===void 0?function(z,O){return z}:S,E=d.zoom,A=e==="horizontal"?"X":"Y",D=e==="vertical"?"height":"width",I=Math.abs(i),V=b?parseFloat(I.toFixed(g)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:je("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[D]="".concat(I,"px"),u)},x_({direction:e,classNames:[je(n),o],size:"100%",posValue:[0,0],sizeValue:I,zoom:E},c),c.createElement("div",{className:je("size-value","gap"),style:{transform:"translate".concat(A,"(-50%) scale(").concat(E,")")}},V>0?w(V,e):""))}function bF(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Uo:Fo,c=n[o.start],u=n[o.end];return XN(e,function(d){return d.pos[i]}).map(function(d){var h=[],g=[],m=[];return d.forEach(function(b){var S,w,E=b.element,A=b.elementRect.rect;if(A[o.end]<c)h.push(b);else if(u<A[o.start])g.push(b);else if(A[o.start]<=c&&u<=A[o.end]&&r){var D=b.pos,I={element:E,rect:Q(Q({},A),(S={},S[o.end]=A[o.start],S))},V={element:E,rect:Q(Q({},A),(w={},w[o.start]=A[o.end],w))},z=[0,0],O=[0,0];z[i]=D[i],z[a]=D[a],O[i]=D[i],O[a]=D[a]+b.size,h.push({type:t,pos:z,size:0,elementRect:I,direction:"",elementDirection:"end"}),g.push({type:t,pos:O,size:0,elementRect:V,direction:"",elementDirection:"start"})}}),h.sort(function(b,S){return S.pos[a]-b.pos[a]}),g.sort(function(b,S){return b.pos[a]-S.pos[a]}),{total:d,start:h,end:g,inner:m}})}function xF(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(E){return E.type===c}),d=c==="vertical"?1:0,h=d?0:1,g=bF(c,u,r,a),m=d?Fo:Uo,b=d?Uo:Fo,S=r[m.start],w=r[m.end];g.forEach(function(E){var A=E.total,D=E.start,I=E.end,V=E.inner,z=n[h]+A[0].pos[h]-r[b.start],O=r;D.forEach(function(T){var C=T.elementRect.rect,k=O[m.start]-C[m.end];if(k>0){var j=[0,0];j[d]=n[d]+O[m.start]-S-k,j[h]=z,o.push(sd(t,c,"dashed",o.length,k,j,T.className,i))}O=C}),O=r,I.forEach(function(T){var C=T.elementRect.rect,k=C[m.start]-O[m.end];if(k>0){var j=[0,0];j[d]=n[d]+O[m.end]-S,j[h]=z,o.push(sd(t,c,"dashed",o.length,k,j,T.className,i))}O=C}),V.forEach(function(T){var C=T.elementRect.rect,k=S-C[m.start],j=C[m.end]-w,L=[0,0],U=[0,0];L[d]=n[d]-k,L[h]=z,U[d]=n[d]+w-S,U[h]=z,o.push(sd(t,c,"dashed",o.length,k,L,T.className,i)),o.push(sd(t,c,"dashed",o.length,j,U,T.className,i))})})}),o}function _F(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(E){return E.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?Fo:Uo,g=u?Uo:Fo,m=r[h.start],b=r[h.end],S=r[g.start],w=r[g.end];c.forEach(function(E){var A=E.gap,D=E.gapRects,I=Math.max.apply(Math,we([S],J(D.map(function(O){var T=O.rect;return T[g.start]})),!1)),V=Math.min.apply(Math,we([w],J(D.map(function(O){var T=O.rect;return T[g.end]})),!1)),z=(I+V)/2;I===V||z===(S+w)/2||D.forEach(function(O){var T=O.rect,C=O.className,k=[n[0],n[1]];if(T[h.end]<m)k[u]+=T[h.end]-m;else if(b<T[h.start])k[u]+=T[h.start]-m-A;else return;k[d]+=z-S,a.push(sd(t,u?"vertical":"horizontal","gap",a.length,A,k,C,i))})})}),a}function T1(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,b=t.props,S=b.snapGap,w=S===void 0?!0:S,E=b.verticalGuidelines,A=b.horizontalGuidelines,D=b.snapThreshold,I=D===void 0?5:D,V=b.maxSnapElementGuidelineDistance,z=V===void 0?1/0:V,O=b.isDisplayGridGuidelines,T=ki(Pi(t.state)),C=T.top,k=T.left,j=T.bottom,L=T.right,U={top:C,left:k,bottom:j,right:L,center:(k+L)/2,middle:(C+j)/2},P=TF(t),X=we([],J(P),!1),$=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(le){return le*I});w&&X.push.apply(X,we([],J(SF(t,U,$)),!1));var H=Q({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(X.push.apply(X,we([],J(EF(t,o?u:h,o?c:d,g,m,H,O)),!1)),a){var Y=i.left,te=i.top;H.left+=Y,H.top+=te,H.right+=Y,H.bottom+=te}return X.push.apply(X,we([],J(PN(A||!1,E||!1,o?u:h,o?c:d,g,m,H)),!1)),X=X.filter(function(le){var Z=le.element,B=le.elementRect,K=le.type;if(!Z||!B)return!0;var ie=B.rect;return ON(U,ie,K,z)}),X}function SF(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,d=[];return[["vertical",Uo,Fo],["horizontal",Fo,Uo]].forEach(function(h){var g=J(h,3),m=g[0],b=g[1],S=g[2],w=e[b.start],E=e[b.end],A=e[b.center],D=e[S.start],I=e[S.end],V={left:n[0],top:n[1]};function z(C){var k=C.rect,j=V[b.start];return k[b.end]<w+j?w-k[b.end]:E-j<k[b.start]?k[b.start]-E:-1}var O=u.filter(function(C){var k=C.rect;return k[S.start]>I||k[S.end]<D?!1:z(C)>0}).sort(function(C,k){return z(C)-z(k)}),T=[];O.forEach(function(C){O.forEach(function(k){if(C!==k){var j=C.rect,L=k.rect,U=j[S.start],P=j[S.end],X=L[S.start],$=L[S.end];U>$||X>P||T.push([C,k])}})}),T.forEach(function(C){var k=J(C,2),j=k[0],L=k[1],U=j.rect,P=L.rect,X=U[b.start],$=U[b.end],H=P[b.start],Y=P[b.end],te=V[b.start],le=0,Z=0,B=!1,K=!1,ie=!1;if($<=w&&E<=H){if(K=!0,le=(H-$-(E-w))/2,Z=$+le+(E-w)/2,xe(Z-A)>te)return}else if($<H&&Y<w+te){if(B=!0,le=H-$,Z=Y+le,xe(Z-w)>te)return}else if($<H&&E-te<X){if(ie=!0,le=H-$,Z=X-le,xe(Z-E)>te)return}else return;le&&ON(e,P,m,a)&&(le>c||d.push({type:m,pos:m==="vertical"?[Z,0]:[0,Z],element:L.element,size:0,className:L.className,isStart:B,isCenter:K,isEnd:ie,gap:le,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),d}function wF(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,g=o.snapGridHeight,m=g===void 0?0:g,b=c.snapRenderInfo,S=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),w=t.moveables;if(u&&w&&S&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var E=t.getRect(),A=E.children,D=b.direction;if(A){var I=D.map(function(z,O){var T=O===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},C=T.snapSize,k=T.posName,j=T.sizeName,L=T.clientOffset;if(!C)return{dir:z,multiple:1,snapSize:C,snapOffset:0};var U=E[j],P=E[k],X=Ek(A.map(function(B){return[B[k]-P,B[j],U-B[j]-B[k]+P]})).filter(function(B){return B}).sort(function(B,K){return B-K}),$=X[0],H=X.map(function(B){return et(B/$,.1)*C}),Y=1,te=et(U/$,.1);for(Y=1;Y<=10&&!H.every(function(B){return B*Y%1===0});++Y);var le=(-z+1)/2,Z=am(P-L,P-L+U,le,1-le);return{multiple:te*Y,dir:z,snapSize:C,snapOffset:Math.round(Z/C)}}),V=I.map(function(z){return z.multiple||1});c.snapThresholdInfo.multiples=V,c.snapThresholdInfo.offset=I.map(function(z){return z.snapOffset}),I.forEach(function(z,O){z.snapSize})}}else c.snapThresholdInfo=null}function EF(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,d=c.snapGridWidth,h=d===void 0?0:d,g=c.snapGridHeight,m=g===void 0?0:g,b=[],S=a.left,w=a.top,E=[0,0];wF(t,r,i,a);var A=u.snapThresholdInfo,D=h,I=m;if(A&&(h*=A.multiples[0]||1,m*=A.multiples[1]||1,E=A.offset),m){for(var V=function(O){b.push({type:"horizontal",pos:[S,et(E[1]*I+O-i+w,.1)],className:je("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},z=0;z<=n*2;z+=m)V(z);for(var z=-m;z>=-n;z-=m)V(z)}if(h){for(var V=function(T){b.push({type:"vertical",pos:[et(E[0]*D+T-r+S,.1),w],className:je("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},z=0;z<=e*2;z+=h)V(z);for(var z=-h;z>=-e;z-=h)V(z)}return b}function ON(t,e,n,r){return n==="horizontal"?xe(t.right-e.left)<=r||xe(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?xe(t.bottom-e.top)<=r||xe(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function TF(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return Qi(m)&&"element"in m?Q(Q({},m),{element:ka(m.element,!0)}):{element:ka(m,!0)}}).filter(function(m){return m.element}),o=jU(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=J(m,2),S=b[0],w=b[1];d[w]=i[S]}),AF(t,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),e.elementRects=d;var h=m_(t.props.elementSnapDirections),g=[];return d.forEach(function(m){var b=m.element,S=m.top,w=S===void 0?h.top:S,E=m.left,A=E===void 0?h.left:E,D=m.right,I=D===void 0?h.right:D,V=m.bottom,z=V===void 0?h.bottom:V,O=m.center,T=O===void 0?h.center:O,C=m.middle,k=C===void 0?h.middle:C,j=m.className,L=m.rect,U=v_({top:w,right:I,left:A,bottom:z,center:T,middle:k},L),P=U.horizontal,X=U.vertical,$=U.horizontalNames,H=U.verticalNames,Y=L.top,te=L.left,le=L.right-te,Z=L.bottom-Y,B=[le,Z];X.forEach(function(K,ie){g.push({type:"vertical",element:b,pos:[et(K,.1),Y],size:Z,sizes:B,className:j,elementRect:m,elementDirection:t2[H[ie]]||H[ie],direction:""})}),P.forEach(function(K,ie){g.push({type:"horizontal",element:b,pos:[te,et(K,.1)],size:le,sizes:B,className:j,elementRect:m,elementDirection:t2[$[ie]]||$[ie],direction:""})})}),g}function f2(t,e){return t?t.map(function(n){var r=Qi(n)?n:{pos:n},i=r.pos;return bu(i)?r:Q(Q({},r),{pos:Bt(i,e)})}):[]}function PN(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,g=o.right,m=n+g-u,b=r+h-d;return f2(t,b).forEach(function(S){c.push({type:"horizontal",pos:[u,et(S.pos-a+d,.1)],size:m,className:S.className,direction:""})}),f2(e,m).forEach(function(S){c.push({type:"vertical",pos:[et(S.pos-i+u,.1),d],size:b,className:S.className,direction:""})}),c}function AF(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=J(K8(a,i,u),2),h=d[0],g=d[1],m=n?0:c[0],b=n?0:c[1];return e.map(function(S){var w=S.element.getBoundingClientRect(),E=w.left-h-m,A=w.top-g-b,D=A+w.height,I=E+w.width,V=J(Eu(a,[E,A],u),2),z=V[0],O=V[1],T=J(Eu(a,[I,D],u),2),C=T[0],k=T[1];return Q(Q({},S),{rect:{left:z,right:C,top:O,bottom:k,center:(z+C)/2,middle:(O+k)/2}})})}function yg(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=ka(r,!0);if(o){var c=wd(o),u=v2(e,[c.left-i.left,c.top-i.top]),d=v2(e,[c.right-i.right,c.bottom-i.bottom]);a.left=et(u[0],1e-5),a.top=et(u[1],1e-5),a.right=et(d[0],1e-5),a.bottom=et(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=T1(t),e.enableSnap=!0,!0}function VN(t,e,n,r,i,a){var o=tc(t,e,n,a?4:3),c=Fn(o,r);return S_(o,Be(i,c))}function d2(t){return t?t/xe(t):0}function CF(t,e,n,r,i,a){var o=a.fixedDirection,c=eF(n,o,r),u=b_(t,e,n,r),d=we(we([],J(dF(t,e,c,r,i,a)),!1),J(IN(t,u,a)),!1),h=fm(d,0),g=fm(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function RF(t,e,n,r,i,a,o,c,u){var d=Fn(e,o),h=av(t,c,{vertical:[d[0]],horizontal:[d[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(et(m,y1)||et(g,y1)){var b=J(Ha({datas:u,distX:-m,distY:-g}),2),S=b[0],w=b[1],E=Math.min(i||1/0,n+o[0]*S),A=Math.min(a||1/0,r+o[1]*w);return[E-n,A-r]}return[0,0]}function jN(t,e,n,r,i,a,o,c){for(var u=Pi(t.state),d=t.props.keepRatio,h=0,g=0,m=0;m<2;++m){var b=e(h,g),S=CF(t,b,i,d,o,c),w=S.width,E=S.height,A=w.isBound,D=E.isBound,I=w.offset,V=E.offset;if(m===1&&(A||(I=0),D||(V=0)),m===0&&o&&!A&&!D)return[0,0];if(d){var z=xe(I)*(n?1/n:1),O=xe(V)*(r?1/r:1),T=A&&D?z<O:D||!A&&z<O;T?I=n*V/r:V=r*I/n}h+=I,g+=V}if(!d&&i[0]&&i[1]){var C=pF(t,u,i,a,c),k=C.maxWidth,j=C.maxHeight,L=J(RF(t,e(h,g).map(function(X){return X.map(function($){return et($,y1)})}),n+h,r+g,k,j,i,o,c),2),I=L[0],V=L[1];h+=I,g+=V}return[h,g]}function _d(t){return t<0&&(t=t%360+360),t%=360,t}function DF(t,e){e=_d(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return xe(t-r)<xe(t-i)?r:i}function fb(t,e){t=_d(t),e=_d(e);var n=_d(t-e);return Math.min(n,360-n)}function IF(t,e,n,r){var i,a=t.props,o=(i=a[SN])!==null&&i!==void 0?i:5,c=a[wN];if($u(t,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,g=e.pos4,m=e.origin,b=n*Math.PI/180,S=[u,d,h,g].map(function(V){return Be(V,m)}),w=S.map(function(V){return vh(V,b)}),E=we(we([],J($8(t,S,w,m,n)),!1),J(sF(t,S,w,m,n)),!1);E.sort(function(V,z){return xe(V-n)-xe(z-n)});var A=E.length>0;if(A)return{isSnap:A,dist:A?E[0]:n}}if(c?.length&&o){var D=c.slice().sort(function(V,z){return fb(V,r)-fb(z,r)}),I=D[0];if(fb(I,r)<=o)return{isSnap:!0,dist:n+DF(r,I)-r}}return{isSnap:!1,dist:n}}function kF(t,e,n,r,i,a,o){if(!$u(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=t.state,h=d.allMatrix,g=d.is3d;return jN(t,function(m,b){return VN(u||h,e+m,n+b,c,i,g)},e,n,r,i,a,o)}function NF(t,e,n,r,i){if(!$u(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=jN(t,function(g,m){return VN(k8(i,Tt(e,[g/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function MF(t,e){e.absolutePoses=Pi(t.state)}function h2(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Yr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return Q(Q({},r),{direction:i.direction})})}function p2(t,e,n,r,i,a){var o=g_(rv(t,a),e,n),c=o.vertical,u=o.horizontal,d=su();c.forEach(function(S){S.isBound&&(S.direction==="start"&&(d.left=!0),S.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:S.pos}))}),u.forEach(function(S){S.isBound&&(S.direction==="start"&&(d.top=!0),S.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:S.pos}))});var h=oF(t),g=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(S){As(r,function(w){var E=w.type,A=w.pos;return E==="bounds"&&A===S})>=0||r.push({type:"bounds",pos:S})}),b.forEach(function(S){As(i,function(w){var E=w.type,A=w.pos;return E==="bounds"&&A===S})>=0||i.push({type:"bounds",pos:S})}),{boundMap:d,innerBoundMap:g}}var OF=T_("",["resizable","scalable"]),PF={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",SN,wN,EN,TN,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=t.props.snapRenderThreshold,g=h===void 0?1:h;if(!d||!d.render||!$u(t,""))return lu(t,"boundMap",su(),function(re){return JSON.stringify(re)}),lu(t,"innerBoundMap",su(),function(re){return JSON.stringify(re)}),[];n.guidelines=T1(t);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),S=d.externalPoses||[],w=Pi(t.state),E=[],A=[],D=[],I=[],V=[],z=ki(w),O=z.width,T=z.height,C=z.top,k=z.left,j=z.bottom,L=z.right,U={left:k,right:L,top:C,bottom:j,center:(k+L)/2,middle:(C+j)/2},P=S.length>0,X=P?ki(S):{};if(!d.request){if(d.direction&&V.push(J8(t,w,d.direction,g,g)),d.snap){var $=ki(w);d.center&&($.middle=($.top+$.bottom)/2,$.center=($.left+$.right)/2),V.push(n2(t,$,g,g))}P&&(d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),V.push(n2(t,X,g,g))),V.forEach(function(re){var fe=re.vertical.posInfos,ue=re.horizontal.posInfos;E.push.apply(E,we([],J(fe.filter(function(ge){var Te=ge.guidelineInfos;return Te.some(function(Ce){var Fe=Ce.guideline;return!Fe.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),A.push.apply(A,we([],J(ue.filter(function(ge){var Te=ge.guidelineInfos;return Te.some(function(Ce){var Fe=Ce.guideline;return!Fe.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),D.push.apply(D,we([],J(h2(fe)),!1)),I.push.apply(I,we([],J(h2(ue)),!1))})}var H=p2(t,[k,L],[C,j],E,A),Y=H.boundMap,te=H.innerBoundMap;P&&p2(t,[X.left,X.right],[X.top,X.bottom],E,A,d.externalBounds);var le=we(we([],J(D),!1),J(I),!1),Z=le.filter(function(re){return re.element&&!re.gapRects}),B=le.filter(function(re){return re.gapRects}).sort(function(re,fe){return re.gap-fe.gap});ke(t,"onSnap",{guidelines:le.filter(function(re){var fe=re.element;return!fe}),elements:Z,gaps:B},!0);var K=lu(t,"boundMap",Y,function(re){return JSON.stringify(re)},su()),ie=lu(t,"innerBoundMap",te,function(re){return JSON.stringify(re)},su());return(Y===K||te===ie)&&ke(t,"onBound",{bounds:Y,innerBounds:te},!0),we(we(we(we(we(we([],J(xF(t,Z,[m,b],U,e)),!1),J(_F(t,B,[m,b],U,e)),!1),J(u2(t,"horizontal",I,[i,r],U,e)),!1),J(u2(t,"vertical",D,[i,r],U,e)),!1),J(c2(t,"horizontal",A,m,r,O,0,e)),!1),J(c2(t,"vertical",E,b,i,T,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},yg(t)},drag:function(t){var e=t.state;yg(t)||(e.guidelines=T1(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(OF(t,e)||E1(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Un(e.inputEvent.target,je("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,yg(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,yg(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function VF(t,e){return[t[0]*e[0],t[1]*e[1]]}function je(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kB.apply(void 0,we([f_],J(t),!1))}function zN(t){t()}function jF(t){return!t||t==="none"?[1,0,0,1,0,0]:Qi(t)?t:qd(t)}function Sd(t,e,n){return om(e,ql(n,e),t,ql(n.map(function(r){return-r}),e))}function zF(t,e,n){if(e==="%"){var r=__(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function LF(t){var e=BF(w_(t,":before"));return e.map(function(n,r){var i=hh(n),a=i.value,o=i.unit;return a*zF(t,o,r===0)})}function hm(t){return t?t.split(" "):["0","0"]}function BF(t){return hm(t.transformOrigin)}function LN(t){var e=Xr(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function $d(t,e,n,r,i){var a,o,c=e_(t)||Qo(t),u=!1,d,h;if(!t||n)d=t;else{var g=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;g?(u=!0,h=m,d=g):d=m}for(var b=!1,S=t===e||d===e,w="relative",E=1,A=parseFloat(i?.("zoom"))||1,D=i?.("position");d&&d!==c;){e===d&&(S=!0);var I=Xr(d),V=d.tagName.toLowerCase(),z=LN(d),O=I("willChange"),T=parseFloat(I("zoom"))||1;if(w=I("position"),r&&T!==1){E=T;break}if(!n&&r&&A!==1&&D&&D!=="absolute"||V==="svg"||V==="foreignobject"||w!=="static"||z&&z!=="none"||O==="transform")break;var C=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;C&&(u=!0,h=k);var j=k;if(j&&j.nodeType===11){d=j.host,b=!0,w=Xr(d)("position");break}d=j,w="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:w==="static",isEnd:S||!d||d===c,offsetParent:d||c}}function UF(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=Xr(t),c=Wm(i),u=!c,d,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(d=iN?LF(t):hm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=J(qF(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=hm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function BN(t,e){var n=Xr(t),r=Xr(Qo(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function A1(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Zi(n,3,4))})}function FF(t){for(var e=t.parentElement,n=!1,r=Qo(t);e;){var i=w_(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function sv(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Kk(t,!e).join(","),")")}function __(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function GF(t,e){var n,r=__(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=t.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,b=[0,0],S=[u,d],w=[0,0];if(g!==1){var E=(g-2)%3,A=Math.floor((g-2)/3);b[0]=i*E/2,b[1]=a*A/2;var D=m===2?Math.max(d,u):Math.min(u,d);S[0]=D,S[1]=D,w[0]=(o-i)/2*E,w[1]=(c-a)/2*A}var I=o_(S,e);return n=J(w,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],Sd(I,e,b)}function qF(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Xr(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=__(t.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,g=d-c.y,m=a?e[0]:e[0]-h,b=a?e[1]:e[1]-g;return[h,g,m,b]}function an(t,e,n){return br(t,Gl(e,n),n)}function tc(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return an(t,i,r)})}function ki(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,we([],J(e),!1)),i=Math.min.apply(Math,we([],J(n),!1)),a=Math.max.apply(Math,we([],J(e),!1)),o=Math.max.apply(Math,we([],J(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function g2(t,e,n,r){var i=tc(t,e,n,r);return ki(i)}function HF(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,d=FN(o),h=d.offsetWidth,g=d.offsetHeight,m=n.getBoundingClientRect(),b=[0,0];n===Qo(n)&&(b=BN(o,!0));for(var S=o.getBoundingClientRect(),w=S.left-m.left+n.scrollLeft-(n.clientLeft||0)+b[0],E=S.top-m.top+n.scrollTop-(n.clientTop||0)+b[1],A=S.width,D=S.height,I=om(r,i,u),V=g2(I,h,g,r),z=V.left,O=V.top,T=V.width,C=V.height,k=an(I,c,r),j=Be(k,[z,O]),L=[w+j[0]*A/T,E+j[1]*D/C],U=[0,0],P=0;++P<10;){var X=za(i,r);a=J(Be(an(X,L,r),an(X,k,r)),2),U[0]=a[0],U[1]=a[1];var $=om(r,i,ql(U,r),u),H=g2($,h,g,r),Y=H.left,te=H.top,le=Y-w,Z=te-E;if(xe(le)<2&&xe(Z)<2)break;L[0]-=le,L[1]-=Z}return U.map(function(B){return Math.round(B)})}function $F(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return an(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Oi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function UN(t,e){return Oi([e[0]-t[0],e[1]-t[1]])}function od(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=wn(t,e));var i=UN(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function pm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function $l(t,e){var n=t[e];return Qi(n)?Q(Q({},t),n):t}function FN(t){var e=t&&!Wm(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,g=0,m=0,b=0,S=1/0,w=1/0,E=1/0,A=1/0,D=0,I=0,V=!1;if(t)if(!e&&t.ownerSVGElement){var z=t.getBBox();V=!0,n=z.width,r=z.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var O=Xr(t),T=t.style,C=O("boxSizing")==="border-box",k=parseFloat(O("borderLeftWidth"))||0,j=parseFloat(O("borderRightWidth"))||0,L=parseFloat(O("borderTopWidth"))||0,U=parseFloat(O("borderBottomWidth"))||0,P=parseFloat(O("paddingLeft"))||0,X=parseFloat(O("paddingRight"))||0,$=parseFloat(O("paddingTop"))||0,H=parseFloat(O("paddingBottom"))||0,Y=P+X,te=$+H,le=k+j,Z=L+U,B=Y+le,K=te+Z,ie=O("position"),re=0,fe=0;if("clientLeft"in t){var ue=null;if(ie==="absolute"){var ge=$d(t,Qo(t));ue=ge.offsetParent}else ue=t.parentElement;if(ue){var Te=Xr(ue);re=parseFloat(Te("width")),fe=parseFloat(Te("height"))}}h=Math.max(Y,Bt(O("minWidth"),re)||0),g=Math.max(te,Bt(O("minHeight"),fe)||0),S=Bt(O("maxWidth"),re),w=Bt(O("maxHeight"),fe),isNaN(S)&&(S=1/0),isNaN(w)&&(w=1/0),D=Bt(T.width,0)||0,I=Bt(T.height,0)||0,o=parseFloat(O("width"))||0,c=parseFloat(O("height"))||0,u=xe(o-D)<1?a1(h,D||o,S):o,d=xe(c-I)<1?a1(g,I||c,w):c,n=u,r=d,i=u,a=d,C?(E=S,A=w,m=h,b=g,u=n-B,d=r-K):(E=S+B,A=w+K,m=h+B,b=g+K,n=u+B,r=d+K),i=u+Y,a=d+te}return{svg:V,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:D,inlineCSSHeight:I,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:S,maxHeight:w,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:E,maxOffsetHeight:A}}function GN(t,e){return wn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function bg(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function qN(t,e){var n=t===Qo(t)||t===e_(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Xr(t)("overflow")!=="visible",Q(Q({},e),r)}function db(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?qN(n,h):h}function wd(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?qN(t,c):c}function YF(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?C_(r,a,o):u}function HN(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=$N(a,r)}return i}function $N(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function S_(t,e){return[Tt(e,t[0]),Tt(e,t[1]),Tt(e,t[2]),Tt(e,t[3])]}function Pi(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return S_([r,i,a,o],[e,n])}function C1(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function ou(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&C1(t,e),r?.unset(),t[n]=null}function Dr(t,e){if(e){var n=Hu(e);n.nextStyle=Q(Q({},n.nextStyle),t)}return{style:t,cssText:Cs(t).map(function(r){return"".concat(zg(r,"-"),": ").concat(t[r],";")}).join("")}}function YN(t,e,n){var r=e.afterTransform||e.transform;return Q(Q({},Dr(Q(Q(Q({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function st(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=Q(Q({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ci(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Q(Q({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function ov(t,e,n){t._emitter.on(e,n)}function ke(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function w_(t,e){return No(t).getComputedStyle(t,e)}function xg(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function R1(t,e){return t===e||t==null&&e==null}function m2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Wm(i))return i}return t[n]}function XN(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function XF(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function WN(t){return t.reduce(function(e,n){return e.concat(n)},[])}function wu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return xe(r)-xe(n)}),t[0]}function Eu(t,e,n){return br(za(t,n),Gl(e,n),n)}function WF(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=J(Eu(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ti(t,e,n,r){if(!n[0]&&!n[1])return e;var i=an(t,[d2(n[0]||1),0],r),a=an(t,[0,d2(n[1]||1)],r),o=an(t,[n[0]/Oi(i),n[1]/Oi(a)],r);return Tt(e,o)}function Hi(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function gm(t){return xe(t)<=Ir?0:t}function E_(t){return function(e){if(!e.isDragging(t))return"";var n=z8(e,t),r=n.deg;return r?je("view-control-rotation".concat(r)):""}}function T_(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Un(i,je("direction"))&&(!t||Un(i,je(t)))}}function KF(t,e,n){var r,i=xu(t,{"x%":function(z){return z/100*e.offsetWidth},"y%":function(z){return z/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:xu([""])[0],b=n<0?[]:i.slice(n),S=n<0?[]:i.slice(n+1),w=m?[m]:[],E=Yc(h),A=Yc(g),D=Yc(b),I=Yc(S),V=Ut(E,D,4);return{transforms:t,beforeFunctionMatrix:E,beforeFunctionMatrix2:A,targetFunctionMatrix:Yc(w),afterFunctionMatrix:D,afterFunctionMatrix2:I,allFunctionMatrix:V,beforeFunctions:h,beforeFunctions2:g,targetFunction:w[0],afterFunctions:b,afterFunctions2:S,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function QF(t){return!t||!Qi(t)||Gu(t)?!1:Vn(t)||"length"in t}function ka(t,e){return t?Gu(t)?t:$r(t)?e?document.querySelector(t):t:Qx(t)?t():Rk(t)?t:"current"in t?t.current:t:null}function A_(t,e){if(!t)return[];var n=QF(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return $r(i)&&e?we(we([],J(r),!1),J([].slice.call(document.querySelectorAll(i))),!1):(Vn(i)?r.push(A_(i,e)):r.push(ka(i,e)),r)},[])}function ZF(t,e,n){var r=wn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function v2(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=za(n,i);return r||(a=Zi(a,3,4)),a[12]=0,a[13]=0,a[14]=0,PU(a,e)}function KN(t,e,n,r,i){var a=J(t,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=wn([0,0],e),g=wn([0,0],r),m=Oi(e),b=Math.cos(h-g)*m;if(!r[0])d=b,u=d*n;else if(!r[1])u=b,d=u/n;else{var S=r[0]*o,w=r[1]*c,E=Math.atan2(S+e[0],w+e[1]),A=Math.atan2(S,w);E<0&&(E+=Math.PI*2),A<0&&(A+=Math.PI*2);var D=0;xe(E-A)<Math.PI/2||xe(E-A)>Math.PI/2*3||(A+=Math.PI),D=E-A,D>Math.PI*2?D-=Math.PI*2:D>Math.PI?D=2*Math.PI-D:D<-Math.PI&&(D=-2*Math.PI-D);var I=Oi([S+e[0],w+e[1]])*Math.cos(D);u=I*Math.sin(A)-S,d=I*Math.cos(A)-w,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function QN(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,g=r.distY,m=r.pinchScale,b=r.parentDistance,S=r.parentDist,w=r.parentScale,E=n.fixedDirection,A=[0,1].map(function(T){return xe(t[T]-E[T])}),D=[0,1].map(function(T){var C=A[T];return C!==0&&(C=2/C),C});if(S)u=S[0],d=S[1],e&&(u?d||(d=u/a):u=d*a);else if(bu(m))u=(m-1)*o,d=(m-1)*c;else if(w)u=(w[0]-1)*o,d=(w[1]-1)*c;else if(b){var I=o*A[0],V=c*A[1],z=Oi([I,V]);u=b/z*I*D[0],d=b/z*V*D[1]}else{var O=Ha({datas:n,distX:h,distY:g});O=D.map(function(T,C){return O[C]*T}),i=J(KN([o,c],O,a,t,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function D1(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=J(t.split(" "),2),r=n[0],i=n[1],a=D1(r||""),o=D1(i||""),c=Q(Q({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function C_(t,e,n){var r=D1(t,!0),i=r.x,a=r.y;return[Bt(i,e)||0,Bt(a,n)||0]}function JF(t,e,n){var r=t.map(function(a){return Be(a,e)}),i=r.map(function(a){return vh(a,n)});return{prev:r,next:i,result:i.map(function(a){return Tt(a,e)})}}function ZN(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Vn(n),o=Vn(i);return a&&o?ZN(n,i):!a&&!o?n===i:!1})}function lu(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function Cr(t){return t>=0?1:-1}function xe(t){return Math.abs(t)}function hb(t,e){return XB(t).map(function(n){return e(n)})}function JN(t){return bu(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var e7=xh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?t.controlAbles:u.filter(function(w){return c.indexOf(w.name)>-1})).filter(function(w){return w.canPinch&&w[h]}),m=st(t,e,{});r&&(m.targets=r);var b=ke(t,d,m);n.isPinch=b!==!1,n.ables=g;var S=n.isPinch;return S?(g.forEach(function(w){if(a[w.name]=a[w.name]||{},!!w[h]){var E=Q(Q({},e),{datas:a[w.name],parentRotate:i,isPinch:!0});w[h](t,E)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},S):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var d=i*(1-1/r),h=st(t,e,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");ke(t,g,h);var m=n.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(S){S[b]&&S[b](t,Q(Q({},e),{datas:a[S.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=ci(t,e,{isDrag:r});a&&(u.targets=a),ke(t,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(g){g[h]&&g[h](t,Q(Q({},e),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Q(Q({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Q(Q({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Q(Q({},e),{targets:t.props.targets}))}}),y2=T_("scalable"),t7={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:bN("scalable"),dragControlCondition:y2,viewClassName:E_("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=HN(a,r,i,n),c=t.state,u=c.width,d=c.height,h=c.targetTransform,g=c.target,m=c.pos1,b=c.pos2,S=c.pos4;if(!o||!g)return!1;r||ec(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var w=!o[0]&&!o[1]||o[0]||!o[1];nv(t,e,"scale"),n.isWidth=w;function E(O){n.ratio=O&&isFinite(O)?O:0}n.startPositions=Pi(t.state);function A(O){var T=kN(n.startPositions,O);n.fixedDirection=T.fixedDirection,n.fixedPosition=T.fixedPosition,n.fixedOffset=T.fixedOffset}n.setFixedDirection=A,E(bs(m,b)/bs(b,S)),A([-o[0],-o[1]]);var D=function(O){n.minScaleSize=O},I=function(O){n.maxScaleSize=O};D([-1/0,-1/0]),I([1/0,1/0]);var V=st(t,e,Q(Q({direction:o,set:function(O){n.startValue=O},setRatio:E,setFixedDirection:A,setMinScaleSize:D,setMaxScaleSize:I},tv(t,e)),{dragStart:Ar.dragStart(t,new _u().dragStart([0,0],e))})),z=ke(t,"onScaleStart",V);return n.startFixedDirection=n.fixedDirection,z!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?V:!1},dragControl:function(t,e){Jm(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,b=n.startOffsetHeight,S=n.isScale,w=n.startValue,E=n.isWidth,A=n.ratio;if(!S)return!1;var D=t.props,I=D.throttleScale,V=D.parentMoveable,z=g;!g[0]&&!g[1]&&(z=[1,1]);var O=A&&(r??D.keepRatio)||!1,T=t.state,C=[w[0],w[1]];function k(){var Se=QN(z,O,n,e),De=Se.distWidth,ot=Se.distHeight,Pe=m?(m+De)/m:1,Ge=b?(b+ot)/b:1;w[0]||(C[0]=De/m),w[1]||(C[1]=ot/b);var Ye=(z[0]||O?Pe:1)*C[0],gt=(z[1]||O?Ge:1)*C[1];return Ye===0&&(Ye=Cr(h[0])*gg),gt===0&&(gt=Cr(h[1])*gg),[Ye,gt]}var j=k();if(!a&&t.props.groupable){var L=T.snapRenderInfo||{},U=L.direction;Vn(U)&&(U[0]||U[1])&&(T.snapRenderInfo={direction:g,request:e.isRequest})}ke(t,"onBeforeScale",st(t,e,{scale:j,setFixedDirection:function(Se){return n.setFixedDirection(Se),j=k(),j},startFixedDirection:n.startFixedDirection,setScale:function(Se){j=Se}},!0));var P=[j[0]/C[0],j[1]/C[1]],X=o,$=[0,0],H=Cr(P[0]*P[1]),Y=!o&&!i&&a;if(Y||d?X=p_(t,n.targetAllTransform,[0,0],[0,0],n):o||(X=n.fixedPosition),a||($=NF(t,P,g,!u&&c,n)),O){z[0]&&z[1]&&$[0]&&$[1]&&(Math.abs($[0]*m)>Math.abs($[1]*b)?$[1]=0:$[0]=0);var te=!$[0]&&!$[1];if(te&&(E?P[0]=et(P[0]*C[0],I)/C[0]:P[1]=et(P[1]*C[1],I)/C[1]),z[0]&&!z[1]||$[0]&&!$[1]||te&&E){P[0]+=$[0];var le=m*P[0]*C[0]/A;P[1]=Cr(H*P[0])*xe(le/b/C[1])}else if(!z[0]&&z[1]||!$[0]&&$[1]||te&&!E){P[1]+=$[1];var Z=b*P[1]*C[1]*A;P[0]=Cr(H*P[1])*xe(Z/m/C[0])}}else P[0]+=$[0],P[1]+=$[1],$[0]||(P[0]=et(P[0]*C[0],I)/C[0]),$[1]||(P[1]=et(P[1]*C[1],I)/C[1]);P[0]===0&&(P[0]=Cr(h[0])*gg),P[1]===0&&(P[1]=Cr(h[1])*gg),j=VF(P,[C[0],C[1]]);var B=[m,b],K=[m*j[0],b*j[1]];K=wk(K,n.minScaleSize,n.maxScaleSize,O?A:!1),j=hb(2,function(Se){return B[Se]?K[Se]/B[Se]:K[Se]}),P=hb(2,function(Se){return j[Se]/C[Se]});var ie=hb(2,function(Se){return h[Se]?P[Se]/h[Se]:P[Se]}),re="scale(".concat(P.join(", "),")"),fe="scale(".concat(j.join(", "),")"),ue=ev(n,fe,re),ge=!w[0]||!w[1],Te=N8(t,ge?fe:re,n.fixedDirection,X,n.fixedOffset,n,ge),Ce=Y?Te:Be(Te,n.prevInverseDist||[0,0]);if(n.prevDist=P,n.prevInverseDist=Te,j[0]===h[0]&&j[1]===h[1]&&Ce.every(function(Se){return!Se})&&!V&&!Y)return!1;var Fe=st(t,e,Q({offsetWidth:m,offsetHeight:b,direction:g,scale:j,dist:P,delta:ie,isPinch:!!a},hN(t,ue,Ce,a,e)));return ke(t,"onScale",Fe),Fe},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ci(t,e,{});return ke(t,"onScaleEnd",r),r},dragGroupControlCondition:y2,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Wi(t,"resizable",e);n.moveableScale=t.scale;var a=xs(t,this,"dragControlStart",e,function(d,h){return um(t,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,g){h.setFixedDirection(d),um(t,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=Q(Q({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=ke(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){ov(t,"onBeforeScale",function(h){ke(t,"onBeforeScaleGroup",st(t,e,Q(Q({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=xs(t,this,"dragControl",e,function(h,g){var m=J(br(yh(t.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),b=m[0],S=m[1];return Q(Q({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Tt(c,[b,S])})}),d=Q({targets:t.props.targets,events:u},r);return ke(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=xs(t,this,"dragControlEnd",e),a=ci(t,e,{targets:t.props.targets,events:i});return ke(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function mo(t,e){return t.map(function(n,r){return am(n,e[r],1,2)})}function b2(t,e,n){var r=wn(t,e),i=wn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function n7(t,e){var n=b2(t[0],t[1],t[2]),r=b2(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var r7={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:E_("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,d=c.pos2,h=c.pos3,g=c.pos4,m=mo(u,d),b=mo(d,u),S=mo(u,h),w=mo(h,u),E=mo(h,g),A=mo(g,h),D=mo(d,g),I=mo(g,d);return we([e.createElement("div",{className:je("line"),key:"middeLine1",style:od(m,E,o)}),e.createElement("div",{className:je("line"),key:"middeLine2",style:od(b,A,o)}),e.createElement("div",{className:je("line"),key:"middeLine3",style:od(S,D,o)}),e.createElement("div",{className:je("line"),key:"middeLine4",style:od(w,I,o)})],J(xN(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Un(n,je("direction"))&&Un(n,je("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=$N(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,b=c.height,S=c.left,w=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?g:Zi(g,3,4),n.targetInverseMatrix=Xk(za(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=S,n.top=w,n.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(D){return Be(D,u)}),n.nextPoses=n.poses.map(function(D){var I=J(D,2),V=I[0],z=I[1];return br(n.warpTargetMatrix,[V,z,0,1],4)}),n.startValue=Zt(4),n.prevMatrix=Zt(4),n.absolutePoses=Pi(c),n.posIndexes=dN(o),ec(t,e),nv(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var E=st(t,e,Q({set:function(D){n.startValue=D}},tv(t,e))),A=ke(t,"onWarpStart",E);return A!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(Jm(t,e,"matrix3d"),$u(t,"warpable")){var b=g.map(function(k){return m[k]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var S=av(t,r,{horizontal:b.map(function(k){return k[1]+a}),vertical:b.map(function(k){return k[0]+i})}),w=S.horizontal,E=S.vertical;a-=w.offset,i-=E.offset}var A=Ha({datas:n,distX:i,distY:a},!0),D=n.nextPoses.slice();if(g.forEach(function(k){D[k]=Tt(D[k],A)}),!S8.every(function(k){return n7(k.map(function(j){return h[j]}),k.map(function(j){return D[j]}))}))return!1;var I=l_(h[0],h[2],h[1],h[3],D[0],D[2],D[1],D[3]);if(!I.length)return!1;var V=Ut(o,I,4),z=uN(n,V,!0),O=Ut(za(c,4),z,4);n.prevMatrix=z;var T=Ut(d,z,4),C=ev(n,"matrix3d(".concat(T.join(", "),")"),"matrix3d(".concat(z.join(", "),")"));return h_(e,C),ke(t,"onWarp",st(t,e,Q({delta:O,matrix:T,dist:z,multiply:Ut,transform:C},Dr({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,ke(t,"onWarpEnd",ci(t,e,{})),r):!1}},i7=je("area-pieces"),_g=je("area-piece"),eM=je("avoid"),a7=je("view-dragging");function pb(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;Ck(e,eM),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function x2(t){return t.createElement("div",{key:"area_pieces",className:i7},t.createElement("div",{className:_g}),t.createElement("div",{className:_g}),t.createElement("div",{className:_g}),t.createElement("div",{className:_g}))}var tM={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,d=c.height,h=c.renderPoses,g=o?je("area","pass"):je("area");if(a)return[e.createElement("div",{key:"area",ref:ys(t,"areaElement"),className:g}),x2(e)];if(!r||!i)return[];var m=l_([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?sv(m,!0):"none";return[e.createElement("div",{key:"area",ref:ys(t,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),x2(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,b=u.top,S=ki(d),w=S.left,E=S.top,A=S.width,D=S.height,I=g?4:3,V=J(Eu(h,[r-m,i-b],I),2),z=V[0],O=V[1];z-=w,O-=E;var T=[{left:w,top:E,width:A,height:O-10},{left:w,top:E,width:z-10,height:D},{left:w,top:E+O+10,width:A,height:D-O-10},{left:w+z+10,top:E,width:A-z-10,height:D}],C=[].slice.call(o.nextElementSibling.children);T.forEach(function(k,j){C[j].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),Ak(o,eM),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,pb(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||pb(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){pb(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Sk(function(){e.disableNativeEvent=!1})}},s7=xh("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,b=o.top,S=o.offsetWidth,w=o.offsetHeight,E;if(!a&&d&&i){var A=J(C_(i,S,w),2),D=A[0],I=A[1],V=g?4:3,z=an(h,[D,I],V);E=pm(u,r,Be(z,[m,b]))}else E=pm(u,r,c);return[e.createElement("div",{className:je("control","origin"),style:E,key:"beforeOrigin"})]}});function o7(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var l7={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new UU,c=ka(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,b=st(t,e,{scrollContainer:g,direction:m}),S=d?"onScrollGroup":"onScroll";d&&(b.targets=d),ke(t,S,b)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,b=h.inputEvent;t[u].scrollBy(g,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(t[u].getCurrentEvent())}),o.dragStart(e,Q({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?o7:h,m=r.scrollOptions;return n.drag(e,Q({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return g({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Q(Q({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Q(Q({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Q(Q({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Q(Q({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Q(Q({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,Q(Q({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Q(Q({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},nM={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},c7=xh("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=JN(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),d=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,b=u.pos4,S=[h,g,m,b],w=[];return i>0&&w.push([0,2]),a>0&&w.push([0,1]),o>0&&w.push([1,3]),c>0&&w.push([2,3]),w.map(function(E,A){var D=J(E,2),I=D[0],V=D[1],z=S[I],O=S[V],T=d[I],C=d[V],k=l_([0,0],[100,0],[0,100],[100,100],z,O,T,C);if(k.length)return e.createElement("div",{key:"padding".concat(A),className:je("padding"),style:{transform:sv(k,!0)}})})}}),_2=["nw","ne","se","sw"];function Sg(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var u7=[1,2,5,6],f7=[0,3,4,7],kl=[1,-1,-1,1],Nl=[1,1,-1,-1];function R_(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=t.filter(function(m){return!m.virtual}),g=h.map(function(m){var b=m.horizontal,S=m.vertical,w=m.pos;if(S&&!d&&(d=!0,u.push("/")),d){var E=Math.max(0,S===1?w[1]-a:c-w[1]);return u.push(Hi(E,r,e)),E}else{var E=Math.max(0,b===1?w[0]-i:o-w[0]);return u.push(Hi(E,n,e)),E}});return{radiusPoses:h,styles:u,raws:g}}function rM(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function iM(t,e,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=t.indexOf("/"),m=(g>-1?t.slice(0,g):t).length,b=t.slice(0,m),S=t.slice(m+1),w=b.length,E=S.length,A=E>0,D=J(b,4),I=D[0],V=I===void 0?"0px":I,z=D[1],O=z===void 0?V:z,T=D[2],C=T===void 0?V:T,k=D[3],j=k===void 0?O:k,L=J(S,4),U=L[0],P=U===void 0?V:U,X=L[1],$=X===void 0?A?P:O:X,H=L[2],Y=H===void 0?A?P:C:H,te=L[3],le=te===void 0?A?$:j:te,Z=[V,O,C,j].map(function(ue){return Bt(ue,e)}),B=[P,$,Y,le].map(function(ue){return Bt(ue,n)}),K=Z.slice(),ie=B.slice();c=J(Sg([K[0],K[1]],e),2),K[0]=c[0],K[1]=c[1],u=J(Sg([K[3],K[2]],e),2),K[3]=u[0],K[2]=u[1],d=J(Sg([ie[0],ie[3]],n),2),ie[0]=d[0],ie[3]=d[1],h=J(Sg([ie[1],ie[2]],n),2),ie[1]=h[0],ie[2]=h[1];var re=o?K:K.slice(0,Math.max(a[0],w)),fe=o?ie:ie.slice(0,Math.max(a[1],E));return we(we([],J(re.map(function(ue,ge){var Te=_2[ge];return{virtual:ge>=w,horizontal:kl[ge],vertical:0,pos:[r+ue,i+(Nl[ge]===-1?n:0)],sub:!0,raw:Z[ge],direction:Te}})),!1),J(fe.map(function(ue,ge){var Te=_2[ge];return{virtual:ge>=E,horizontal:0,vertical:Nl[ge],pos:[r+(kl[ge]===-1?e:0),i+ue],sub:!0,raw:B[ge],direction:Te}})),!1)}function d7(t,e,n,r,i){i===void 0&&(i=e.length);var a=rM(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;t.splice(n,d),e.splice(n,d)}function h7(t,e,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var g=rM(t.slice(n)),m=g.horizontalRange,b=g.verticalRange;if(r>-1)for(var S=kl[r]===1?a-d:c-a,w=m[1];w<=r;++w){var E=Nl[w]===1?h:u,A=0;if(r===w?A=a:w===0?A=d+S:kl[w]===-1&&(A=c-(e[n][0]-d)),t.splice(n+w,0,{horizontal:kl[w],vertical:0,pos:[A,E]}),e.splice(n+w,0,[A,E]),w===0)break}else if(i>-1){var D=Nl[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var I=[d+D,h];t.push({horizontal:kl[0],vertical:0,pos:I}),e.push(I)}for(var V=b[0],w=b[1];w<=i;++w){var A=kl[w]===1?d:c,E=0;if(i===w?E=o:w===0?E=h+D:Nl[w]===1?E=e[n+V][1]:Nl[w]===-1&&(E=u-(e[n+V][1]-h)),t.push({horizontal:0,vertical:Nl[w],pos:[A,E]}),e.push([A,E]),w===0)break}}}function p7(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var g7=[[0,-1,"n"],[1,0,"e"]],m7=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function D_(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(O){return"".concat(Hi(O[0],a,r)," ").concat(Hi(O[1],o,r))});if(h||u==="inset"){var m=n[1][1],b=n[3][0],S=n[7][0],w=n[5][1];if(h)return[m,b,w,S].map(function(O){return"".concat(O,"px")});var E=[m,a-b,o-w,S].map(function(O,T){return Hi(O,T%2?a:o,r)});if(n.length>8){var A=J(Be(n[4],n[0]),2),D=A[0],I=A[1];E.push.apply(E,we(["round"],J(R_(d.slice(8).map(function(O,T){return Q(Q({},O),{pos:n[T]})}),r,D,I,S,m,b,w).styles),!1))}return E}else if(g||u==="ellipse"){var V=n[0],z=Hi(xe(n[1][1]-V[1]),g?Math.sqrt((a*a+o*o)/2):o,r),E=g?[z]:[Hi(xe(n[2][0]-V[0]),a,r),z];return E.push("at",Hi(V[0],a,r),Hi(V[1],o,r)),E}}function mm(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return m7.map(function(o){var c=J(o,3),u=c[0],d=c[1],h=c[2],g=i[u+1],m=a[d+1];return{vertical:xe(d),horizontal:xe(u),direction:h,pos:[g,m]}})}function aM(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[xe(e[1]-e[0]),xe(n[1]-n[0])]}function S2(t,e,n,r,i){var a,o,c,u,d,h,g,m,b;if(t){var S=i;if(!S){var w=Xr(t),E=w("clipPath");S=E!=="none"?E:w("clip")}if(!((!S||S==="none"||S==="auto")&&(S=r,!S))){var A=_k(S),D=A.prefix,I=D===void 0?S:D,V=A.value,z=V===void 0?"":V,O=I==="circle",T=" ";if(I==="polygon"){var C=Pl(z||"0% 0%, 100% 0%, 100% 100%, 0% 100%");T=",";var k=C.map(function(It){var Jt=J(It.split(" "),2),rn=Jt[0],lt=Jt[1];return{vertical:1,horizontal:1,pos:[Bt(rn,e),Bt(lt,n)]}}),j=Hl(k.map(function(It){return It.pos}));return{type:I,clipText:S,poses:k,splitter:T,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(O||I==="ellipse"){var L="",U="",P=0,X=0,C=Bo(z);if(O){var $="";a=J(C,4),o=a[0],$=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],U=u===void 0?"50%":u,P=Bt($,Math.sqrt((e*e+n*n)/2)),X=P}else{var H="",Y="";d=J(C,5),h=d[0],H=h===void 0?"50%":h,g=d[1],Y=g===void 0?"50%":g,m=d[3],L=m===void 0?"50%":m,b=d[4],U=b===void 0?"50%":b,P=Bt(H,e),X=Bt(Y,n)}var te=[Bt(L,e),Bt(U,n)],k=we([{vertical:1,horizontal:1,pos:te,direction:"nesw"}],J(g7.slice(0,O?1:2).map(function(rn){return{vertical:xe(rn[1]),horizontal:rn[0],direction:rn[2],sub:!0,pos:[te[0]+rn[0]*P,te[1]+rn[1]*X]}})),!1);return{type:I,clipText:S,radiusX:P,radiusY:X,left:te[0]-P,top:te[1]-X,right:te[0]+P,bottom:te[1]+X,poses:k,splitter:T}}else if(I==="inset"){var C=Bo(z||"0 0 0 0"),le=C.indexOf("round"),Z=(le>-1?C.slice(0,le):C).length,B=C.slice(Z+1),K=J(C.slice(0,Z),4),ie=K[0],re=K[1],fe=re===void 0?ie:re,ue=K[2],ge=ue===void 0?ie:ue,Te=K[3],Ce=Te===void 0?fe:Te,Fe=J([ie,ge].map(function(rn){return Bt(rn,n)}),2),Se=Fe[0],De=Fe[1],ot=J([Ce,fe].map(function(rn){return Bt(rn,e)}),2),Pe=ot[0],Ge=ot[1],Ye=e-Ge,gt=n-De,ft=iM(B,Ye-Pe,gt-Se,Pe,Se),k=we(we([],J(mm(Se,Ye,gt,Pe)),!1),J(ft),!1);return{type:"inset",clipText:S,poses:k,top:Se,left:Pe,right:Ye,bottom:gt,radius:B,splitter:T}}else if(I==="rect"){var C=Pl(z||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));T=",";var Ne=J(C.map(function(Qn){var Zn=hh(Qn).value;return Zn}),4),qe=Ne[0],Ge=Ne[1],De=Ne[2],Pe=Ne[3],k=mm(qe,Ge,De,Pe);return{type:"rect",clipText:S,poses:k,top:qe,right:Ge,bottom:De,left:Pe,values:C,splitter:T}}}}}function v7(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(P){return P==="w"||P==="e"}),g=d.filter(function(P){return P==="n"||P==="s"}),m=h[0],b=g[0];u[e]=n;var S=J(aM(t),2),w=S[0],E=S[1],A=w&&E?w/E:0;if(A&&i){var D=(e+4)%8,I=t[D].pos,V=[0,0];o.indexOf("w")>-1?V[0]=-1:o.indexOf("e")>-1&&(V[0]=1),o.indexOf("n")>-1?V[1]=-1:o.indexOf("s")>-1&&(V[1]=1);var z=KN([w,E],n,A,V,!0),O=w+z[0],T=E+z[1],C=I[1],k=I[1],j=I[0],L=I[0];V[0]===-1?j=L-O:V[0]===1?L=j+O:(j=j-O/2,L=L+O/2),V[1]===-1?C=k-T:(V[1]===1||(C=k-T/2),k=C+T);var U=mm(C,L,k,j);t.forEach(function(P,X){u[X][0]=U[X].pos[0]-P.pos[0],u[X][1]=U[X].pos[1]-P.pos[1]})}else t.forEach(function(P,X){var $=P.direction;$&&($.indexOf(m)>-1&&(u[X][0]=n[0]),$.indexOf(b)>-1&&(u[X][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),b&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(P){var X=P==="n"||P==="s";t.forEach(function($,H){var Y=$.direction,te=$.horizontal,le=$.vertical;!Y||Y.indexOf(P)===-1||(u[H]=[X||!te?0:n[0],!X||!le?0:n[1]])})}):u[e]=n;return u}function y7(t,e){var n=J(cN(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,g=u.splitter,m=h.map(function(D){return D.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=u7.indexOf(c),S=f7.indexOf(c),w=h.length;if(h7(h,m,8,b,S,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),w===h.length)return}else return;var E=D_(t,o,m),A="".concat(d,"(").concat(E.join(g),")");ke(t,"onClip",st(t,e,Q({clipEventType:"added",clipType:d,poses:m,clipStyles:E,clipStyle:A,distX:0,distY:0},Dr({clipPath:A},e))))}function b7(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(d7(c,d,i,8,h),h===c.length))return}else return;var g=D_(t,r,d),m="".concat(o,"(").concat(g.join(u),")");ke(t,"onClip",st(t,e,Q({clipEventType:"removed",clipType:o,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},Dr({clipPath:m},e))))}var x7={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),d=u.target,h=u.width,g=u.height,m=u.allMatrix,b=u.is3d,S=u.left,w=u.top,E=u.pos1,A=u.pos2,D=u.pos3,I=u.pos4,V=u.clipPathState,z=u.snapBoundInfos,O=u.rotation;if(!d||c)return[];var T=S2(d,h,g,i||"inset",V||r);if(!T)return[];var C=b?4:3,k=T.type,j=T.poses,L=j.map(function(Ge){var Ye=an(m,Ge.pos,C);return[Ye[0]-S,Ye[1]-w]}),U=[],P=[],X=k==="rect",$=k==="inset",H=k==="polygon";if(X||$||H){var Y=$?L.slice(0,8):L;P=Y.map(function(Ge,Ye){var gt=Ye===0?Y[Y.length-1]:Y[Ye-1],ft=wn(gt,Ge),Ne=UN(gt,Ge);return e.createElement("div",{key:"clipLine".concat(Ye),className:je("line","clip-line","snap-control"),"data-clip-index":Ye,style:{width:"".concat(Ne,"px"),transform:"translate(".concat(gt[0],"px, ").concat(gt[1],"px) rotate(").concat(ft,"rad) scaleY(").concat(o,")")}})})}if(U=L.map(function(Ge,Ye){return e.createElement("div",{key:"clipControl".concat(Ye),className:je("control","clip-control","snap-control"),"data-clip-index":Ye,style:{transform:"translate(".concat(Ge[0],"px, ").concat(Ge[1],"px) rotate(").concat(O,"rad) scale(").concat(o,")")}})}),$&&U.push.apply(U,we([],J(L.slice(8).map(function(Ge,Ye){return e.createElement("div",{key:"clipRadiusControl".concat(Ye),className:je("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ye,style:{transform:"translate(".concat(Ge[0],"px, ").concat(Ge[1],"px) rotate(").concat(O,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var te=T.left,le=T.top,Z=T.radiusX,B=T.radiusY,K=J(Be(an(m,[te,le],C),an(m,[0,0],C)),2),ie=K[0],re=K[1],fe="none";if(!a){for(var ue=Math.max(10,Z/5,B/5),ge=[],Te=0;Te<=ue;++Te){var Ce=Math.PI*2/ue*Te;ge.push([Z+(Z-o)*Math.cos(Ce),B+(B-o)*Math.sin(Ce)])}ge.push([Z,-2]),ge.push([-2,-2]),ge.push([-2,B*2+2]),ge.push([Z*2+2,B*2+2]),ge.push([Z*2+2,-2]),ge.push([Z,-2]),fe="polygon(".concat(ge.map(function(Ge){return"".concat(Ge[0],"px ").concat(Ge[1],"px")}).join(", "),")")}U.push(e.createElement("div",{key:"clipEllipse",className:je("clip-ellipse","snap-control"),style:{width:"".concat(Z*2,"px"),height:"".concat(B*2,"px"),clipPath:fe,transform:"translate(".concat(-S+ie,"px, ").concat(-w+re,"px) ").concat(sv(m))}}))}if(a){var Fe=ki(we([E,A,D,I],J(L),!1)),Se=Fe.width,De=Fe.height,ot=Fe.left,Pe=Fe.top;if(H||X||$){var ge=$?L.slice(0,8):L;U.push(e.createElement("div",{key:"clipArea",className:je("clip-area","snap-control"),style:{width:"".concat(Se,"px"),height:"".concat(De,"px"),transform:"translate(".concat(ot,"px, ").concat(Pe,"px)"),clipPath:"polygon(".concat(ge.map(function(Ye){return"".concat(Ye[0]-ot,"px ").concat(Ye[1]-Pe,"px")}).join(", "),")")}}))}}return z&&["vertical","horizontal"].forEach(function(Ge){var Ye=z[Ge],gt=Ge==="horizontal";Ye.isSnap&&P.push.apply(P,we([],J(Ye.snap.posInfos.map(function(ft,Ne){var qe=ft.pos,It=Be(an(m,gt?[0,qe]:[qe,0],C),[S,w]),Jt=Be(an(m,gt?[h,qe]:[qe,g],C),[S,w]);return Hd(e,"",It,Jt,o,"clip".concat(Ge,"snap").concat(Ne),"guideline")})),!1)),Ye.isBound&&P.push.apply(P,we([],J(Ye.bounds.map(function(ft,Ne){var qe=ft.pos,It=Be(an(m,gt?[0,qe]:[qe,0],C),[S,w]),Jt=Be(an(m,gt?[h,qe]:[qe,g],C),[S,w]);return Hd(e,"",It,Jt,o,"clip".concat(Ge,"bounds").concat(Ne),"guideline","bounds","bold")})),!1))}),we(we([],J(U),!1),J(P),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Q(Q({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",g=e.datas,m=S2(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,S=m.type,w=m.poses,E=ke(t,"onClipStart",st(t,e,{clipType:S,clipStyle:b,poses:w.map(function(A){return A.pos})}));return E===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=b,ec(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var S=$l(t.props,"clippable"),w=S.keepRatio,E=0,A=0,D=o.draggable,I=Ha(e);c&&D?(n=J(D.prevBeforeDist,2),E=n[0],A=n[1]):(r=J(I,2),E=r[0],A=r[1]);var V=[E,A],z=t.state,O=z.width,T=z.height,C=!g&&!d&&!h,k=b.type,j=b.poses,L=b.splitter,U=j.map(function(dt){return dt.pos});C&&(E=-E,A=-A);var P=!d||j[m].direction==="nesw",X=k==="inset"||k==="rect",$=j.map(function(){return[0,0]});if(d&&!P){var H=j[m],Y=H.horizontal,te=H.vertical,le=[E*xe(Y),A*xe(te)];$=v7(j,m,le,X,w)}else P&&($=U.map(function(){return[E,A]}));var Z=U.map(function(dt,Yt){return Tt(dt,$[Yt])}),B=we([],J(Z),!1);z.snapBoundInfos=null;var K=b.type==="circle",ie=b.type==="ellipse";if(K||ie){var re=ki(Z),fe=xe(re.bottom-re.top),ue=xe(ie?re.right-re.left:fe),ge=Z[0][1]+fe,Te=Z[0][0]-ue,Ce=Z[0][0]+ue;K&&(B.push([Ce,re.bottom]),$.push([1,0])),B.push([re.left,ge]),$.push([0,1]),B.push([Te,re.bottom]),$.push([1,0])}var Fe=PN((S.clipHorizontalGuidelines||[]).map(function(dt){return Bt("".concat(dt),T)}),(S.clipVerticalGuidelines||[]).map(function(dt){return Bt("".concat(dt),O)}),O,T),Se=[],De=[];if(K||ie)Se=[B[4][0],B[2][0]],De=[B[1][1],B[3][1]];else if(X){var ot=[B[0],B[2],B[4],B[6]],Pe=[$[0],$[2],$[4],$[6]];Se=ot.filter(function(dt,Yt){return Pe[Yt][0]}).map(function(dt){return dt[0]}),De=ot.filter(function(dt,Yt){return Pe[Yt][1]}).map(function(dt){return dt[1]})}else Se=B.filter(function(dt,Yt){return $[Yt][0]}).map(function(dt){return dt[0]}),De=B.filter(function(dt,Yt){return $[Yt][1]}).map(function(dt){return dt[1]});var Ge=[0,0],Ye=s2(Fe,S.clipTargetBounds&&{left:0,top:0,right:O,bottom:T},Se,De,5,5),gt=Ye.horizontal,ft=Ye.vertical,Ne=gt.offset,qe=ft.offset;if(gt.isBound&&(Ge[1]+=Ne),ft.isBound&&(Ge[0]+=qe),(ie||K)&&$[0][0]===0&&$[0][1]===0){var re=ki(Z),It=re.bottom-re.top,Jt=ie?re.right-re.left:It,rn=ft.isBound?xe(qe):ft.snapIndex===0?-qe:qe,lt=gt.isBound?xe(Ne):gt.snapIndex===0?-Ne:Ne;Jt-=rn,It-=lt,K&&(It=CN(ft,gt)>0?It:Jt,Jt=It);var ct=B[0];B[1][1]=ct[1]-It,B[2][0]=ct[0]+Jt,B[3][1]=ct[1]+It,B[4][0]=ct[0]-Jt}else if(X&&w&&d){var Qn=J(aM(j),2),Zn=Qn[0],kr=Qn[1],Vs=Zn&&kr?Zn/kr:0,Ya=j[m],Jn=Ya.direction||"",na=B[1][1],ge=B[5][1],Te=B[7][0],Ce=B[3][0];xe(Ne)<=xe(qe)?Ne=Cr(Ne)*xe(qe)/Vs:qe=Cr(qe)*xe(Ne)*Vs,Jn.indexOf("w")>-1?Te-=qe:Jn.indexOf("e")>-1?Ce-=qe:(Te+=qe/2,Ce-=qe/2),Jn.indexOf("n")>-1?na-=Ne:Jn.indexOf("s")>-1?ge-=Ne:(na+=Ne/2,ge-=Ne/2);var Sr=mm(na,Ce,ge,Te);B.forEach(function(Ve,Ft){var mt;mt=J(Sr[Ft].pos,2),Ve[0]=mt[0],Ve[1]=mt[1]})}else B.forEach(function(dt,Yt){var Ee=$[Yt];Ee[0]&&(dt[0]-=qe),Ee[1]&&(dt[1]-=Ne)});var un=D_(t,b,Z),Hn="".concat(k,"(").concat(un.join(L),")");if(z.clipPathState=Hn,K||ie)Se=[B[4][0],B[2][0]],De=[B[1][1],B[3][1]];else if(X){var ot=[B[0],B[2],B[4],B[6]];Se=ot.map(function(Yt){return Yt[0]}),De=ot.map(function(Yt){return Yt[1]})}else Se=B.map(function(dt){return dt[0]}),De=B.map(function(dt){return dt[1]});if(z.snapBoundInfos=s2(Fe,S.clipTargetBounds&&{left:0,top:0,right:O,bottom:T},Se,De,1,1),D){var $t=z.is3d,js=z.allMatrix,ra=$t?4:3,ia=Ge;c&&(ia=[V[0]+Ge[0]-I[0],V[1]+Ge[1]-I[1]]),D.deltaOffset=Ut(js,[ia[0],ia[1],0,0],ra)}return ke(t,"onClip",st(t,e,Q({clipEventType:"changed",clipType:k,poses:Z,clipStyle:Hn,clipStyles:un,distX:E,distY:A},Dr((i={},i[k==="rect"?"clip":"clipPath"]=Hn,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(ke(t,"onClipEnd",ci(t,e,{})),i&&(c?b7(t,e):a&&y7(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},_7={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Un(e.inputEvent.target,je("origin"))},dragControlStart:function(t,e){var n=e.datas;ec(t,e);var r=st(t,e,{dragStart:Ar.dragStart(t,new _u().dragStart([0,0],e))}),i=ke(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=J(Ha(e),2),o=a[0],c=a[1],u=t.state,d=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,S=t.props.originRelative,w=S===void 0?!0:S,E=b?4:3,A=[o,c];if(i){var D=e.distOrigin;(D[0]||D[1])&&(A=D)}var I=Tt(n.startOrigin,A),V=Tt(n.startTargetOrigin,A),z=Be(A,n.prevOrigin),O=Sh(g,m,I,E),T=t.getRect(),C=ki(tc(O,d,h,E)),k=[T.left-C.left,T.top-C.top];n.prevOrigin=A;var j=[Hi(V[0],d,w),Hi(V[1],h,w)].join(" "),L=Ar.drag(t,_h(e,t.state,k,!!r)),U=st(t,e,Q(Q({width:d,height:h,origin:I,dist:A,delta:z,transformOrigin:j,drag:L},Dr({transformOrigin:j,transform:L.transform},e)),{afterTransform:L.transform}));return ke(t,"onDragOrigin",U),U},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(ke(t,"onDragOriginEnd",ci(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function S7(t,e,n,r){var i=t.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=t.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];w7(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function w7(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function E7(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function w2(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Bo(t),iM(a,e,n,0,0,r,i)}function E2(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=R_(i,t.props.roundRelative,o,c),d=u.raws,h=u.styles,g=u.radiusPoses,m=p7(g,d),b=m.horizontals,S=m.verticals,w=h.join(" ");a.borderRadiusState=w;var E=st(t,e,Q({horizontals:b,verticals:S,borderRadius:w,width:o,height:c,delta:r,dist:n},Dr({borderRadius:w},e)));return ke(t,"onRound",E),E}function T2(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=w_(o).borderRadius,r.borderRadius=i))}return i}var T7={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?je("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,g=t.props,m=g.minRoundControls,b=m===void 0?[0,0]:m,S=g.maxRoundControls,w=S===void 0?[4,4]:S,E=g.zoom,A=g.roundPadding,D=A===void 0?0:A,I=g.isDisplayShadowRoundControls,V=g.groupable;if(!r)return null;var z=h||T2(t),O=c?4:3,T=w2(z,i,a,b,!0);if(!T)return null;var C=0,k=0,j=V?[0,0]:[u,d];return T.map(function(L,U){var P=L.horizontal,X=L.vertical,$=L.direction||"",H=we([],J(L.pos),!1);k+=Math.abs(P),C+=Math.abs(X),P&&$.indexOf("n")>-1&&(H[1]-=D),X&&$.indexOf("w")>-1&&(H[0]-=D),P&&$.indexOf("s")>-1&&(H[1]+=D),X&&$.indexOf("e")>-1&&(H[0]+=D);var Y=Be(an(o,H,O),j),te=I&&I!=="horizontal",le=L.vertical?C<=w[1]&&(te||!L.virtual):k<=w[0]&&(I||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(U),className:je("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":U,style:{display:le?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(E,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var g=st(t,e,{}),m=ke(t,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,ec(t,e);var b=t.props,S=b.roundRelative,w=b.minRoundControls,E=w===void 0?[0,0]:w,A=t.state,D=A.width,I=A.height;r.isRound=!0,r.prevDist=[0,0];var V=T2(t),z=w2(V||"",D,I,E,!0)||[];return r.controlPoses=z,A.borderRadiusState=R_(z,S,D,I).styles.join(" "),g},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=J(Ha(e),2),o=a[0],c=a[1],u=[o,c],d=Be(u,n.prevDist),h=t.props.maxRoundControls,g=h===void 0?[4,4]:h,m=t.state,b=m.width,S=m.height,w=r[i],E=w.vertical,A=w.horizontal,D=r.map(function(V){var z=V.horizontal,O=V.vertical,T=[z*A*u[0],O*E*u[1]];if(z){if(g[0]===1)return T;if(g[0]<4&&z!==A)return T}else{if(g[1]===0)return T[1]=O*A*u[0]/b*S,T;if(E){if(g[1]===1)return T;if(g[1]<4&&O!==E)return T}}return[0,0]});D[i]=u;var I=r.map(function(V,z){return Q(Q({},V),{pos:Tt(V.pos,D[z])})});return i<4?I.slice(0,i+1).forEach(function(V){V.virtual=!1}):I.slice(4,i+1).forEach(function(V){V.virtual=!1}),n.prevDist=[o,c],E2(t,e,u,d,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(A){var D=A.virtual;return D}).length,g=t.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))E7(d,o);else if(c&&(m===!0||m==="line")){var b=J(cN(t,e),2),S=b[0],w=b[1];S7(d,u,S,w)}h!==d.filter(function(A){var D=A.virtual;return D}).length&&E2(t,e,[0,0],[0,0],d)}var E=ci(t,e,{});return ke(t,"onRoundEnd",E),n.borderRadiusState="",E},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Wi(t,"roundable",e),o=Q({targets:t.props.targets,events:a.map(function(c,u){return Q(Q({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return ke(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Wi(t,"roundable",e),o=Q({targets:t.props.targets,events:a.map(function(c,u){return Q(Q(Q({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Dr({borderRadius:n.borderRadius},c))})},n);return ke(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Wi(t,"roundable",e);ov(t,"onRound",function(c){var u=Q({targets:t.props.targets,events:i.map(function(d,h){return Q(Q(Q({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),Dr({borderRadius:c.borderRadius},d))})},c);ke(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=Q({targets:t.props.targets,events:i.map(function(c,u){var d;return Q(Q({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return ke(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function A7(t,e){var n=e?4:3,r=Zt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var sM={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Kk(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=A7(c,r)?[]:Bo(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return st(t,e,{setTransform:function(n){e.datas.startTransforms=Vn(n)?n:Bo(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return st(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ke(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ke(t,"onBeforeRender",st(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ke(t,"onBeforeRenderEnd",st(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Wi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});ke(t,"onBeforeRenderGroupStart",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Wi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});ke(t,"onBeforeRenderGroup",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ke(t,"onBeforeRenderGroupEnd",st(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},oM={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ke(t,"onRenderStart",st(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ke(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ke(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ke(t,"onRenderGroupStart",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Wi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});ke(t,"onRenderGroup",st(t,e,Q(Q({isPinch:!!e.isPinch,targets:t.props.targets,transform:mg(e),transformObject:{}},Dr(vg(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Wi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});ke(t,"onRenderGroupEnd",st(t,e,Q({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:mg(e)},Dr(vg(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return xu(cm(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),st(t,e,Q({isPinch:!!e.isPinch,transformObject:n,transform:mg(e)},Dr(vg(e))))},fillDragEndParams:function(t,e){var n={};return xu(cm(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),st(t,e,Q({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:mg(e)},Dr(vg(e))))}};function Ed(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=t.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&t.areaElement===a.inputEvent.target)return!1;var b=we([],J(e),!1);if(g){var S=a.requestAble;b.some(function(U){return U.name===S})||b.push.apply(b,we([],J(t.props.ables.filter(function(U){return U.name===S})),!1))}if(!b.length||b.every(function(U){return U.dragRelation}))return!1;var w=a.inputEvent,E;u&&w&&(E=document.elementFromPoint(a.clientX,a.clientY)||w.target);var A=!1,D=function(){var U;A=!0,(U=a.stop)===null||U===void 0||U.call(a)},I=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var V=a.datas,z=m?"controlGesto":"targetGesto",O=t[z],T=function(U,P,X){if(!(P in U)||O!==t[z])return!1;var $=U.name,H=V[$]||(V[$]={});if(c&&(H.isEventStart=!X||!U[X]||U[X](t,a)),!H.isEventStart)return!1;var Y=U[P](t,Q(Q({},a),{stop:D,datas:H,originalDatas:V,inputTarget:E}));return t._emitter.off(),c&&Y===!1&&(H.isEventStart=!1),Y};I&&b.forEach(function(U){U.unset&&U.unset(t)}),T(sM,"drag".concat(r).concat(i));var C=0,k=0;n.forEach(function(U){if(A)return!1;var P="".concat(U).concat(r).concat(i),X="".concat(U).concat(r,"Condition");i===""&&!g&&WF(t.state,a);var $=b.filter(function(te){return te[P]});$=$.filter(function(te,le){return te.name&&$.indexOf(te)===le});var H=$.filter(function(te){return T(te,P,X)}),Y=H.length;A&&++C,Y&&++k,!A&&c&&$.length&&!Y&&(C+=$.filter(function(te){var le=te.name,Z=V[le];return Z.isEventStart?te.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&T(oM,"drag".concat(r).concat(i));var j=O!==t[z]||C===n.length;if((u||A||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(U){U.state.gestos={}}),b.forEach(function(U){U.unset&&U.unset(t)})),c&&!j&&!g&&k&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!c&&k&&!o||u){var L=t.props.flushSync||zN;L(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&Ed(t,e,n,r,i+"After",a),!0}function I_(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||Un(a,"moveable-area")||Un(a,"moveable-padding")||Un(a,"moveable-edgeDraggable")}}function lM(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=I_(t);return uM(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function cM(t,e){var n=t.controlBox,r=[];r.push(n);var i=I_(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return uM(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function uM(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,S=b===void 0?!0:b,w=o.preventRightClick,E=w===void 0?!0:w,A=o.preventWheelClick,D=A===void 0?!0:A,I=o.dragContainer,V=ka(I,!0),z={preventDefault:S,preventRightClick:E,preventWheelClick:D,container:V||No(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?g:!1,dragFocusedInput:m},O=new JU(e,z),T=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(k){O.on("".concat(C).concat(k),function(j){var L,U=j.eventType,P=C==="drag"&&j.isPinch;if(i[U]&&!i[U](j)){j.stop();return}if(!P){var X=C==="drag"?[C]:["drag",C],$=we([],J(t[n]),!1),H=Ed(t,$,X,r,k,j);H?(t.props.stopPropagation||k==="Start"&&T)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),O}var C7=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function R7(t,e,n,r){var i;n===void 0&&(n=e);var a=gN(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,b=a.zoom,S=F8(g,n),w=S.matrixes,E=S.is3d,A=S.offsetContainer,D=S.zoom,I=r,V=4,z=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,O=u,T=Zt(V),C=Zt(V),k=Zt(V),j=Zt(V),L=o.length,U=w.map(function(le){return Q(Q({},le),{matrix:le.matrix?we([],J(le.matrix),!1):void 0})}).reverse();o.reverse(),!c&&I&&(O=Zi(O,3,4),A1(o)),!E&&I&&A1(U),U.forEach(function(le){C=Ut(C,le.matrix,V)});var P=n||Qo(t),X=((i=U[0])===null||i===void 0?void 0:i.target)||$d(P,P,!0).offsetParent,$=U.slice(1).reduce(function(le,Z){return Ut(le,Z.matrix,V)},Zt(V));o.forEach(function(le,Z){if(L-2===Z&&(k=T.slice()),L-1===Z&&(j=T.slice()),!le.matrix){var B=o[Z+1],K=HF(le,B,X,V,Ut($,T,V));le.matrix=ql(K,V)}T=Ut(T,le.matrix,V)});var H=!z&&c;O||(O=Zt(H?4:3));var Y=sv(z&&O.length===16?Zi(O,4,3):O,H),te=C;return C=Xk(C,V,V),{hasZoom:b!==1||D!==1,hasFixed:m,matrixes:o,rootMatrix:C,originalRootMatrix:te,beforeMatrix:k,offsetMatrix:j,allMatrix:T,targetMatrix:O,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:h,is3d:I,offsetContainer:g,offsetRootContainer:A}}function D7(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=FN(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var d=R7(t,e,n,r),h=du(d.allMatrix,d.transformOrigin,i,a);c=Q(Q({},d),h);var g=du(d.allMatrix,[50,50],100,100);o=GN([g.pos1,g.pos2],g.direction)}var m=4;return Q(Q(Q({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Zt(m),rootMatrix:Zt(m),beforeMatrix:Zt(m),offsetMatrix:Zt(m),allMatrix:Zt(m),targetMatrix:Zt(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function I1(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=bg(),d=bg(),h=bg(),g=bg(),m=[0,0],b={},S=D7(e,n,i,!0);if(e){var w=Xr(e);a.forEach(function(U){b[U]=w(U)});var E=S.is3d?4:3,A=du(S.offsetMatrix,Tt(S.transformOrigin,Wk(S.targetMatrix,E)),S.width,S.height);o=A.direction,c=Tt(A.origin,[A.left-S.left,A.top-S.top]),g=wd(S.offsetRootContainer);var D=$d(r,r,!0).offsetParent||S.offsetRootContainer;if(S.hasZoom){var I=du(Ut(S.originalRootMatrix,S.allMatrix),S.transformOrigin,S.width,S.height),V=du(S.originalRootMatrix,hm(Xr(D)("transformOrigin")).map(function(U){return parseFloat(U)}),D.offsetWidth,D.offsetHeight);if(u=db(I,g),h=db(V,g,D,!0),t){var z=I.left,O=I.top;d=db({left:z,top:O,bottom:O,right:O},g)}}else{u=wd(e),h=U8(D),t&&(d=wd(t));var T=h.left,C=h.top,k=h.clientLeft,j=h.clientTop,L=[u.left-T,u.top-C];m=Be(Eu(S.rootMatrix,L,4),[k+S.left,j+S.top])}}return Q({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:b,offsetDelta:m},S)}function A2(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Hl([e,n,r,i]),o=[a.minX,a.minY],c=Be(t.origin,o);return e=Be(e,o),n=Be(n,o),r=Be(r,o),i=Be(i,o),Q(Q({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var Tu=(function(t){bh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=Q({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},I1(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Zm,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}qB(n._observerId),n._observerId=Sk(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var S=J(i||[0,0],2),w=S[0],E=S[1],A=r.left,D=r.top,I=r.target,V=r.direction,z=r.hasFixed,O=r.offsetDelta,T=n.targets,C=this.isDragging(),k={};this.getEnabledAbles().forEach(function($){k["data-able-".concat($.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=T&&T.length&&(I||g)||o||!this._hasFirstTarget&&this.state.isPersisted,U=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[A-w,D-E];!g&&n.useAccuratePosition&&(P[0]+=O[0],P[1]+=O[1]);var X={position:z?"fixed":"absolute",display:L?"block":"none",visibility:U?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(X["--moveable-line-padding"]=m),b&&(X["--moveable-control-padding"]=b),Xi(h,Q({cspNonce:u,ref:ys(this,"controlBox"),className:"".concat(je("control-box",V===-1?"reverse":"",C?"dragging":"")," ").concat(j," ").concat(a)},k,{onClick:this._onPreventClick,style:X}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),ou(this,!1),ou(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Yr(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(f_)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&I_(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Gu(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=Q({width:0,height:0},n);var m=h.left,b=h.top,S=h.width,w=h.height,E=WC([a,o,u,c],d),A=YU(E,[[m,b],[m+S,b],[m+S,b+w],[m,b+w]]),D=Jk(E);return!A||!D?0:Math.min(100,A/D*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?h1([n,r],WC([o,c,d,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Su(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=I1(this.controlBox,d,h,h,g||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=A2(a.persistData);for(var S in b)m[S]=b[S]}o&&Su(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Pi(this.state),i=J(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=ki(r),h=n.width,g=n.height,m=d.width,b=d.height,S=d.left,w=d.top,E=[n.left,n.top],A=Tt(E,n.origin),D=Tt(E,n.beforeOrigin),I=n.transformOrigin;return{width:m,height:b,left:S,top:w,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:D,origin:A,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&C1(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&C1(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return ZF(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Yr(u,function(A){return A.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,b=g.isControl?"controlAbles":"targetAbles",S="".concat(d?"Group":"").concat(g.isControl?"Control":""),w=we([],J(c[b]),!1),E={request:function(A){return Ed(a,w,["drag"],S,"",Q(Q({},g.request(A)),{requestAble:n,isRequest:!0}),m),E},requestEnd:function(){return Ed(a,w,["drag"],S,"End",Q(Q({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),E}};return Ed(a,w,["drag"],S,"Start",Q(Q({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?E.request(r).requestEnd():E},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,b=n.left,S=n.top,w=n.isPersisted,E=r.zoom||1;if(!i&&E<=1){n.renderPoses=[d,h,g,m],n.renderLines=[[d,h],[h,m],[m,g],[g,d]];return}var A=JN(i||{}),D=A.left,I=A.top,V=A.bottom,z=A.right,O=u?4:3,T=[];w?T=o:this.controlBox&&r.groupable?T=a:T=Tt(a,[b,S]);var C=om(O,ql(T.map(function(X){return-X}),O),c,ql(o,O)),k=Ti(C,d,[-D,-I],O),j=Ti(C,h,[z,-I],O),L=Ti(C,g,[-D,V],O),U=Ti(C,m,[z,V],O);n.renderPoses=[k,j,L,U],n.renderLines=[[k,j],[j,U],[U,L],[L,k]];{var P=E/2;n.renderLines=[[Ti(C,d,[-D-P,-I],O),Ti(C,h,[z+P,-I],O)],[Ti(C,h,[z,-I-P],O),Ti(C,m,[z,V+P],O)],[Ti(C,m,[z+P,V],O),Ti(C,g,[-D-P,V],O)],[Ti(C,g,[-D,V+P],O),Ti(C,d,[-D,-I-P],O)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!R1(c,r),h=d||!R1(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=nN(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=A2(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=xg(o,[c,u],a),g=xg(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Xi};return this.renderState={},XF(WN(xg(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return we(we([],J(r),!1),J(c),!1)},we([],J(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(ou(this,!1),this.updateState({gestos:{}})),r||ou(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=lM(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=cM(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=ka(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:Xi};return u.renderLines.map(function(h,g){return Hd(d,"",h[0],h[1],i,"render-line-".concat(g))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Cs(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var g=xg(d,[h]),m=g.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new C7(i,n,h),a[h]=b),b.setAbles(g)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=ka(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=ka(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(we(we([],J(this._getAbleViewClassNames()),!1),[this.isDragging()?a7:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=XN(n.filter(Boolean),function(d){return d}).map(function(d){var h=J(d,1),g=h[0];return g}),a=this._viewClassNames,o=ph(a,i),c=o.removed,u=o.added;c.forEach(function(d){Ck(r,a[d])}),u.forEach(function(d){Ak(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,g,m,b=d.name,S=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((g=c[b])===null||g===void 0)&&g.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(S+=" ".concat(je("".concat(b).concat(n,"-dragging")))),S.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=No(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=No(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,g;try{for(var m=u8(d),b=m.next();!b.done;b=m.next()){var S=b.value;S.type==="attributes"&&S.attributeName==="style"&&r.checkUpdateRect()}}catch(w){h={error:w}}finally{try{b&&!b.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:zN,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(Ok),k_={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=t.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=lu(t,"parentPosition",[o,c],function(S){return S.join(",")}),b=lu(t,"requestStyles",t.getRequestChildStyles(),function(S){return S.join(",")});return t.moveables=t.moveables.slice(0,i.length),we(we([],J(i.map(function(S,w){return e.createElement(Tu,{key:"moveable"+w,ref:yk(t,"moveables",w),target:S,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:g[w],zoom:d})})),!1),J(WN(h.map(function(S,w){var E=S.pos1,A=S.pos2,D=S.pos3,I=S.pos4,V=[E,A,D,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(z,O){var T=J(z,2),C=T[0],k=T[1];return Hd(e,"",Be(V[C],m),Be(V[k],m),d,"group-rect-".concat(w,"-").concat(O))})}))),!1)}},I7=xh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);ke(t,"onClick",st(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=As(i,function(u){return u.contains(r)}),c=a>-1),ke(t,"onClickGroup",st(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Hc(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Q(Q({},t),{datas:e})}var k7=xh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?yN(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,je("direction"))&&Un(i,je("edge"))&&Un(i,je("edgeDraggable"))},dragStart:function(t,e){return Ar.dragStart(t,Hc(e))},drag:function(t,e){return Ar.drag(t,Hc(e))},dragEnd:function(t,e){return Ar.dragEnd(t,Hc(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,je("direction"))&&Un(i,je("line"))},dragGroupStart:function(t,e){return Ar.dragGroupStart(t,Hc(e))},dragGroup:function(t,e){return Ar.dragGroup(t,Hc(e))},dragGroupEnd:function(t,e){return Ar.dragGroupEnd(t,Hc(e))},unset:function(t){return Ar.unset(t)}}),fM={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},N_=[sM,nM,PF,e7,Ar,k7,w1,t7,r7,vF,l7,c7,s7,_7,x7,T7,k_,fM,I7,tM,oM],N7=N_.reduce(function(t,e){return(e.events||[]).forEach(function(n){Tk(t,n)}),t},[]),M7=N_.reduce(function(t,e){return(e.props||[]).forEach(function(n){Tk(t,n)}),t},[]);function C2(t,e){var n=J(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function wg(t,e){var n=J(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function R2(t,e){return Math.max.apply(Math,we([],J(t.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function D2(t,e){return Math.min.apply(Math,we([],J(t.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function O7(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var g=et(e,Ir);if(g%90){var m=g/180*Math.PI,b=Math.tan(m),S=-1/b,w=[b1,ZC],E=[[0,0],[0,0]],A=[b1,ZC],D=[[0,0],[0,0]];t.forEach(function(ie){ie.forEach(function(re){var fe=C2([-b,1,0],re),ue=C2([-S,1,0],re);w[0]>fe&&(E[0]=re,w[0]=fe),w[1]<fe&&(E[1]=re,w[1]=fe),A[0]>ue&&(D[0]=re,A[0]=ue),A[1]<ue&&(D[1]=re,A[1]=ue)})});var I=J(E,2),V=I[0],z=I[1],O=J(D,2),T=O[0],C=O[1],k=[-b,1,wg([-b,1],V)],j=[-b,1,wg([-b,1],z)],L=[-S,1,wg([-S,1],T)],U=[-S,1,wg([-S,1],C)];n=J([[k,L],[k,U],[j,L],[j,U]].map(function(ie){var re=J(ie,2),fe=re[0],ue=re[1];return c_(fe,ue)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=A[1]-A[0],h=w[1]-w[0]}else{var P=D2(t,0),X=D2(t,1),$=R2(t,0),H=R2(t,1);if(a=[P,X],o=[$,X],c=[P,H],u=[$,H],d=$-P,h=H-X,g%180){var Y=[c,a,u,o];r=J(Y,4),a=r[0],o=r[1],c=r[2],u=r[3],d=H-X,h=$-P}}if(g%360>180){var Y=[u,c,o,a];i=J(Y,4),a=i[0],o=i[1],c=i[2],u=i[3]}var te=Hl([a,o,c,u]),le=te.minX,Z=te.minY,B=te.maxX,K=te.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:le,minY:Z,maxX:B,maxY:K,rotation:e}}function dM(t,e){var n=e.map(function(r){if(Vn(r)){var i=dM(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Yr(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Vn(n[0])?n[0]:n}var P7=(function(t){bh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new Zk,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Su(!0),this.moveables.forEach(function(Te){Te.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(Te){return{finded:!1,manager:Te}}),g=this.props.targetGroups||[],m=dM(h,g),b=c.useDefaultGroupRotate;m.push.apply(m,we([],J(h.filter(function(Te){var Ce=Te.finded;return!Ce}).map(function(Te){var Ce=Te.manager;return Ce})),!1));var S=[],w=!r||n!==""&&c.updateGroup,E=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var A=(a=c.persistData)===null||a===void 0?void 0:a.rotation;A!=null&&(E=A)}function D(Te,Ce,Fe){var Se=Te.map(function(ft){if(Vn(ft)){var Ne=D(ft,Ce),qe=[Ne.pos1,Ne.pos2,Ne.pos3,Ne.pos4];return S.push(Ne),{poses:qe,rotation:Ne.rotation}}else return{poses:Pi(ft.state),rotation:ft.getRotation()}}),De=Se.map(function(ft){var Ne=ft.rotation;return Ne}),ot=0,Pe=De[0],Ge=De.every(function(ft){return Math.abs(Pe-ft)<.1});w?ot=!b&&Ge?Pe:E:ot=!b&&!Fe&&Ge?Pe:Ce;var Ye=Se.map(function(ft){var Ne=ft.poses;return Ne}),gt=O7(Ye,ot);return gt}var I=D(m,this.rotation,!0);w&&(this.rotation=I.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=S;var V=this.transformOrigin,z=this.rotation,O=this.scale,T=I.width,C=I.height,k=I.minX,j=I.minY,L=JF([[0,0],[T,0],[0,C],[T,C]],C_(V,T,C),this.rotation/180*Math.PI),U=Hl(L.result),P=U.minX,X=U.minY,$=" rotate(".concat(z,"deg)")+" scale(".concat(Cr(O[0]),", ").concat(Cr(O[1]),")"),H="translate(".concat(-P,"px, ").concat(-X,"px)").concat($);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(V,";")+"width:".concat(T,"px;height:").concat(C,"px;")+"transform: ".concat(H),o.width=T,o.height=C;var Y=this.getContainer(),te=I1(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),le=[te.left,te.top],Z=J(Pi(te),4),B=Z[0],K=Z[1],ie=Z[2],re=Z[3],fe=Hl([B,K,ie,re]),ue=[fe.minX,fe.minY],ge=Cr(O[0]*O[1]);te.pos1=Be(B,ue),te.pos2=Be(K,ue),te.pos3=Be(ie,ue),te.pos4=Be(re,ue),te.left=k-te.left+ue[0],te.top=j-te.top+ue[1],te.origin=Be(Tt(le,te.origin),ue),te.beforeOrigin=Be(Tt(le,te.beforeOrigin),ue),te.originalBeforeOrigin=Tt(le,te.originalBeforeOrigin),te.transformOrigin=Be(Tt(le,te.transformOrigin),ue),d.style.transform="translate(".concat(-P-ue[0],"px, ").concat(-X-ue[1],"px)")+$,Su(),this.updateState(Q(Q({},te),{posDelta:ue,direction:ge,beforeDirection:ge}),i)},e.prototype.getRect=function(){return Q(Q({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return we(we([],J(r),!1),J(c),!1)},[]);return n},e.prototype.getMoveables=function(){return we([],J(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,we(we([],J(this.props.ables),!1),[k_],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ka(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ou(this,!1),ou(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=lM(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=cM(this,"GroupControl")));var m=!R1(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!ZN(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},e.prototype._updateObserver=function(){},e.defaultProps=Q(Q({},Tu.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Tu),V7=(function(t){bh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&g.length?u=g.map(function(){return null}):h||(g=[]),Xi(o,{cspNonce:a,ref:ys(this,"controlBox"),className:je("control-box")},u.map(function(m,b){var S,w,E=(w=(S=i.individualGroupableProps)===null||S===void 0?void 0:S.call(i,m,b))!==null&&w!==void 0?w:{};return Xi(Tu,Q({key:"moveable"+b,ref:yk(n,"moveables",b)},i,E,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Su(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Su()},e.prototype.getRect=function(){return Q(Q({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,Q(Q({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Yr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return we([],J(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Tu);function hM(t,e){var n=[];return t.forEach(function(r){if(r){if($r(r)){e[r]&&n.push.apply(n,we([],J(e[r]),!1));return}Vn(r)?n.push.apply(n,we([],J(hM(r,e)),!1)):n.push(r)}}),n}function pM(t,e){var n=[];return t.forEach(function(r){if(r){if($r(r)){e[r]&&n.push.apply(n,we([],J(e[r]),!1));return}Vn(r)?n.push(pM(r,e)):n.push(r)}}),n}function gM(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Vn(n)&&Vn(i)?gM(n,i):!0:!1})}var j7=(function(t){bh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new Zk,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=Cs(n).join(`
`);this.defaultStyled=nN("div",NB(f_,_8+i))},e.getTotalAbles=function(){return we([nM,k_,fM,tM],J(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=l8(i,["ables","props"]),u=J(this._updateRefs(!0),2),d=u[0],h=u[1],g=hM(d,h),m=g.length>1,b=r.getTotalAbles(),S=we(we([],J(b),!1),J(a||[]),!1),w=Q(Q(Q({},c),o||{}),{ables:S,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var E=null,A=this.moveable,D=c.persistData;if(D?.children&&(m=!0),c.individualGroupable)return Xi(V7,Q({key:"individual-group",ref:ys(this,"moveable")},w,{target:null,targets:g}));if(m){var I=pM(d,h);if(A&&!A.props.groupable&&!A.props.individualGroupable){var V=A.props.target;V&&g.indexOf(V)>-1&&(E=Q({},A.state))}return Xi(P7,Q({key:"group",ref:ys(this,"moveable")},w,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:I,firstRenderState:E}))}else{var z=g[0];if(A&&(A.props.groupable||A.props.individualGroupable)){var O=A.moveables||[],T=Yr(O,function(C){return C.props.target===z});T&&(E=Q({},T.state))}return Xi(Tu,Q({key:"single",ref:ys(this,"moveable")},w,{target:z,firstRenderState:E}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=A_(this.props.target||this.props.targets),a=typeof document<"u",o=gM(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if($r(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Vn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=J(this._updateRefs(),3),h=d[0],g=d[1],m=d[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,c8([MB(lN)],e.prototype,"moveable",void 0),e})(Ok),z7=(function(t){bh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=N_,e})(j7),k1=function(t,e){return k1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},k1(t,e)};function M_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");k1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yd=function(){return Yd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yd.apply(this,arguments)};function L7(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var B7=(function(t){M_(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Xi(z7,Yd({ref:ys(this,"moveable")},this.state))},e})(r_),U7=M7,F7=lN,G7=N7,q7=(function(t){M_(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Yd({},i),c={};G7.forEach(function(h){c[GB("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Fu(r).createElement("div"),r.appendChild(u)),a.containerProvider=$C(Xi(B7,Yd({ref:ys(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Vn(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;$C(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=L7([jC(F7,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),jC(U7,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(Zm),H7=(function(t){M_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(q7);const I2=t=>{let e;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const m=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(b=>b(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},$7=(t=>t?I2(t):I2),Y7=t=>t;function X7(t,e=Y7){const n=rg.useSyncExternalStore(t.subscribe,rg.useCallback(()=>e(t.getState()),[t,e]),rg.useCallback(()=>e(t.getInitialState()),[t,e]));return rg.useDebugValue(n),n}const k2=t=>{const e=$7(t),n=r=>X7(e,r);return Object.assign(n,e),n},lv=(t=>t?k2(t):k2);function W7(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const N1=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return N1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return N1(r)(n)}}}},K7=(t,e)=>(n,r,i)=>{let a={storage:W7(()=>localStorage),partialize:w=>w,version:0,merge:(w,E)=>({...E,...w}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,E)=>(g(w,E),h());const m=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>m;let b;const S=()=>{var w,E;if(!d)return;o=!1,c.forEach(D=>{var I;return D((I=r())!=null?I:m)});const A=((E=a.onRehydrateStorage)==null?void 0:E.call(a,(w=r())!=null?w:m))||void 0;return N1(d.getItem.bind(d))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const I=a.migrate(D.state,D.version);return I instanceof Promise?I.then(V=>[!0,V]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var I;const[V,z]=D;if(b=a.merge(z,(I=r())!=null?I:m),n(b,!0),V)return h()}).then(()=>{A?.(b,void 0),b=r(),o=!0,u.forEach(D=>D(b))}).catch(D=>{A?.(void 0,D)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||S(),b||m},O_=K7;var cu=9e15,Zo=1e9,M1="0123456789abcdef",vm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ym="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",O1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-cu,maxE:cu,crypto:!1},mM,ps,Ze=!0,cv="[DecimalError] ",Go=cv+"Invalid argument: ",vM=cv+"Precision limit exceeded",yM=cv+"crypto unavailable",bM="[object Decimal]",xr=Math.floor,Bn=Math.pow,Q7=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Z7=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,J7=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,xM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ki=1e7,$e=7,eG=9007199254740991,tG=vm.length-1,P1=ym.length-1,_e={toStringTag:bM};_e.absoluteValue=_e.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),ze(t)};_e.ceil=function(){return ze(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Go+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};_e.comparedTo=_e.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,d=t.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};_e.cosine=_e.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+$e,r.rounding=1,n=nG(r,TM(r,n)),r.precision=t,r.rounding=e,ze(ps==2||ps==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};_e.cubeRoot=_e.cbrt=function(){var t,e,n,r,i,a,o,c,u,d,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(Ze=!1,a=h.s*Bn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=ur(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Bn(n,1/3),t=xr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(t=g.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=qt(d.plus(h).times(c),d.plus(u),o+2,1),ur(c.d).slice(0,o)===(n=ur(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(ze(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(ze(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return Ze=!0,ze(r,t,g.rounding,e)};_e.decimalPlaces=_e.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-xr(this.e/$e))*$e,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};_e.dividedBy=_e.div=function(t){return qt(this,new this.constructor(t))};_e.dividedToIntegerBy=_e.divToInt=function(t){var e=this,n=e.constructor;return ze(qt(e,new n(t),0,1,1),n.precision,n.rounding)};_e.equals=_e.eq=function(t){return this.cmp(t)===0};_e.floor=function(){return ze(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(t){return this.cmp(t)>0};_e.greaterThanOrEqualTo=_e.gte=function(t){var e=this.cmp(t);return e==1||e===0};_e.hyperbolicCosine=_e.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/fv(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Au(o,1,a.times(e),new o(1),!0);for(var u,d=t,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return ze(a,o.precision=n,o.rounding=r,!0)};_e.hyperbolicSine=_e.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Au(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/fv(5,t)),i=Au(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=n,ze(i,e,n,!0)};_e.hyperbolicTangent=_e.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,qt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};_e.inverseCosine=_e.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ca(e,r,i):new e(0):new e(NaN):t.isZero()?Ca(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};_e.inverseHyperbolicCosine=_e.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Ze=!1,n=n.times(n).minus(1).sqrt().plus(n),Ze=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};_e.inverseHyperbolicSine=_e.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Ze=!1,n=n.times(n).plus(1).sqrt().plus(n),Ze=!0,r.precision=t,r.rounding=e,n.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?ze(new a(i),t,e,!0):(a.precision=n=r-i.e,i=qt(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};_e.inverseSine=_e.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ca(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};_e.inverseTangent=_e.atan=function(){var t,e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&g+4<=P1)return o=Ca(h,g+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(g+4<=P1)return o=Ca(h,g+4,m).times(.5),o.s=d.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/$e+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(Ze=!1,e=Math.ceil(c/$e),r=1,u=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),Ze=!0,ze(o,h.precision=g,h.rounding=m,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&xr(this.e/$e)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(t){return this.cmp(t)<0};_e.lessThanOrEqualTo=_e.lte=function(t){return this.cmp(t)<1};_e.logarithm=_e.log=function(t){var e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding,b=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(Ze=!1,c=g+b,o=Io(d,c),r=e?bm(h,c+10):Io(t,c),u=qt(o,r,c,1),Xd(u.d,i=g,m))do if(c+=10,o=Io(d,c),r=e?bm(h,c+10):Io(t,c),u=qt(o,r,c,1),!a){+ur(u.d).slice(i+1,i+15)+1==1e14&&(u=ze(u,g+1,0));break}while(Xd(u.d,i+=10,m));return Ze=!0,ze(u,g,m)};_e.minus=_e.sub=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,S=b.constructor;if(t=new S(t),!b.d||!t.d)return!b.s||!t.s?t=new S(NaN):b.d?t.s=-t.s:t=new S(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(d=b.d,m=t.d,c=S.precision,u=S.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new S(b);else return new S(u===3?-0:0);return Ze?ze(t,c,u):t}if(n=xr(t.e/$e),h=xr(b.e/$e),d=d.slice(),a=h-n,a){for(g=a<0,g?(e=d,a=-a,o=m.length):(e=m,n=h,o=d.length),r=Math.max(Math.ceil(c/$e),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){g=d[r]<m[r];break}a=0}for(g&&(e=d,d=m,m=e,t.s=-t.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=Ki-1;--d[i],d[r]+=Ki}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=uv(d,n),Ze?ze(t,c,u):t):new S(u===3?-0:0)};_e.modulo=_e.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?ze(new r(n),r.precision,r.rounding):(Ze=!1,r.modulo==9?(e=qt(n,t.abs(),0,3,1),e.s*=t.s):e=qt(n,t,0,r.modulo,1),e=e.times(t),Ze=!0,n.minus(e))};_e.naturalExponential=_e.exp=function(){return V1(this)};_e.naturalLogarithm=_e.ln=function(){return Io(this)};_e.negated=_e.neg=function(){var t=new this.constructor(this);return t.s=-t.s,ze(t)};_e.plus=_e.add=function(t){var e,n,r,i,a,o,c,u,d,h,g=this,m=g.constructor;if(t=new m(t),!g.d||!t.d)return!g.s||!t.s?t=new m(NaN):g.d||(t=new m(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(d=g.d,h=t.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(t=new m(g)),Ze?ze(t,c,u):t;if(a=xr(g.e/$e),r=xr(t.e/$e),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/$e),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/Ki|0,d[i]%=Ki;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=uv(d,r),Ze?ze(t,c,u):t};_e.precision=_e.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Go+t);return n.d?(e=_M(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};_e.round=function(){var t=this,e=t.constructor;return ze(new e(t),t.e+1,e.rounding)};_e.sine=_e.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+$e,r.rounding=1,n=iG(r,TM(r,n)),r.precision=t,r.rounding=e,ze(ps>2?n.neg():n,t,e,!0)):new r(NaN)};_e.squareRoot=_e.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(Ze=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=ur(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=xr((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(qt(o,a,n+2,1)).times(.5),ur(a.d).slice(0,n)===(e=ur(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(ze(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ze(r,u+1,1),t=!r.times(r).eq(o));break}return Ze=!0,ze(r,u,h.rounding,t)};_e.tangent=_e.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=qt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,ze(ps==2||ps==4?n.neg():n,t,e,!0)):new r(NaN)};_e.times=_e.mul=function(t){var e,n,r,i,a,o,c,u,d,h=this,g=h.constructor,m=h.d,b=(t=new g(t)).d;if(t.s*=h.s,!m||!m[0]||!b||!b[0])return new g(!t.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?t.s/0:t.s*0);for(n=xr(h.e/$e)+xr(t.e/$e),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+e,a[i--]=c%Ki|0,e=c/Ki|0;a[i]=(a[i]+e)%Ki|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=uv(a,n),Ze?ze(t,g.precision,g.rounding):t};_e.toBinary=function(t,e){return P_(this,2,t,e)};_e.toDecimalPlaces=_e.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Wr(t,0,Zo),e===void 0?e=r.rounding:Wr(e,0,8),ze(n,t+n.e+1,e))};_e.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=La(r,!0):(Wr(t,0,Zo),e===void 0?e=i.rounding:Wr(e,0,8),r=ze(new i(r),t+1,e),n=La(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};_e.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=La(i):(Wr(t,0,Zo),e===void 0?e=a.rounding:Wr(e,0,8),r=ze(new a(i),t+i.e+1,e),n=La(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};_e.toFraction=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,S=b.d,w=b.constructor;if(!S)return new w(b);if(d=n=new w(1),r=u=new w(0),e=new w(r),a=e.e=_M(S)-b.e-1,o=a%$e,e.d[0]=Bn(10,o<0?$e+o:o),t==null)t=a>0?e:d;else{if(c=new w(t),!c.isInt()||c.lt(d))throw Error(Go+c);t=c.gt(e)?a>0?e:d:c}for(Ze=!1,c=new w(ur(S)),h=w.precision,w.precision=a=S.length*$e*2;g=qt(c,e,0,1,1),i=n.plus(g.times(r)),i.cmp(t)!=1;)n=r,r=i,i=d,d=u.plus(g.times(i)),u=i,i=e,e=c.minus(g.times(i)),c=i;return i=qt(t.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=b.s,m=qt(d,r,a,1).minus(b).abs().cmp(qt(u,n,a,1).minus(b).abs())<1?[d,r]:[u,n],w.precision=h,Ze=!0,m};_e.toHexadecimal=_e.toHex=function(t,e){return P_(this,16,t,e)};_e.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Wr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Ze=!1,n=qt(n,t,0,e,1).times(t),Ze=!0,ze(n)):(t.s=n.s,n=t),n};_e.toNumber=function(){return+this};_e.toOctal=function(t,e){return P_(this,8,t,e)};_e.toPower=_e.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Bn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return ze(c,r,a);if(e=xr(t.e/$e),e>=t.d.length-1&&(n=d<0?-d:d)<=eG)return i=SM(u,c,n,r),t.s<0?new u(1).div(i):ze(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Bn(+c,d),e=n==0||!isFinite(n)?xr(d*(Math.log("0."+ur(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(Ze=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=V1(t.times(Io(c,r+n)),r),i.d&&(i=ze(i,r+5,1),Xd(i.d,r,a)&&(e=r+10,i=ze(V1(t.times(Io(c,e+n)),e),e+5,1),+ur(i.d).slice(r+1,r+15)+1==1e14&&(i=ze(i,r+1,0)))),i.s=o,Ze=!0,u.rounding=a,ze(i,r,a))};_e.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=La(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Wr(t,1,Zo),e===void 0?e=i.rounding:Wr(e,0,8),r=ze(new i(r),t,e),n=La(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};_e.toSignificantDigits=_e.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wr(t,1,Zo),e===void 0?e=r.rounding:Wr(e,0,8)),ze(new r(n),t,e)};_e.toString=function(){var t=this,e=t.constructor,n=La(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};_e.truncated=_e.trunc=function(){return ze(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var t=this,e=t.constructor,n=La(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function ur(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=$e-r.length,n&&(a+=So(n)),a+=r;o=t[e],r=o+"",n=$e-r.length,n&&(a+=So(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Wr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Go+t)}function Xd(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=$e,i=0):(i=Math.ceil((e+1)/$e),e%=$e),a=Bn(10,$e-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Bn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Bn(10,e-3)-1,o}function Bg(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=M1.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function nG(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/fv(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Au(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var qt=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,g,m,b,S,w,E,A,D,I,V,z,O,T,C,k,j,L,U,P=r.constructor,X=r.s==i.s?1:-1,$=r.d,H=i.d;if(!$||!$[0]||!H||!H[0])return new P(!r.s||!i.s||($?H&&$[0]==H[0]:!H)?NaN:$&&$[0]==0||!H?X*0:X/0);for(u?(b=1,h=r.e-i.e):(u=Ki,b=$e,h=xr(r.e/b)-xr(i.e/b)),L=H.length,k=$.length,A=new P(X),D=A.d=[],g=0;H[g]==($[g]||0);g++);if(H[g]>($[g]||0)&&h--,a==null?(O=a=P.precision,o=P.rounding):c?O=a+(r.e-i.e)+1:O=a,O<0)D.push(1),S=!0;else{if(O=O/b+2|0,g=0,L==1){for(m=0,H=H[0],O++;(g<k||m)&&O--;g++)T=m*u+($[g]||0),D[g]=T/H|0,m=T%H|0;S=m||g<k}else{for(m=u/(H[0]+1)|0,m>1&&(H=t(H,m,u),$=t($,m,u),L=H.length,k=$.length),C=L,I=$.slice(0,L),V=I.length;V<L;)I[V++]=0;U=H.slice(),U.unshift(0),j=H[0],H[1]>=u/2&&++j;do m=0,d=e(H,I,L,V),d<0?(z=I[0],L!=V&&(z=z*u+(I[1]||0)),m=z/j|0,m>1?(m>=u&&(m=u-1),w=t(H,m,u),E=w.length,V=I.length,d=e(w,I,E,V),d==1&&(m--,n(w,L<E?U:H,E,u))):(m==0&&(d=m=1),w=H.slice()),E=w.length,E<V&&w.unshift(0),n(I,w,V,u),d==-1&&(V=I.length,d=e(H,I,L,V),d<1&&(m++,n(I,L<V?U:H,V,u))),V=I.length):d===0&&(m++,I=[0]),D[g++]=m,d&&I[0]?I[V++]=$[C]||0:(I=[$[C]],V=1);while((C++<k||I[0]!==void 0)&&O--);S=I[0]!==void 0}D[0]||D.shift()}if(b==1)A.e=h,mM=S;else{for(g=1,m=D[0];m>=10;m/=10)g++;A.e=g+h*b-1,ze(A,c?a+A.e+1:a,o,S)}return A}})();function ze(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=$e,o=e,h=g[m=0],u=h/Bn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/$e),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=$e,o=a-$e+1}else break e;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=$e,o=a-$e+i,u=o<0?0:h/Bn(10,i-o-1)%10|0}if(r=r||e<0||g[m+1]!==void 0||(o<0?h:h%Bn(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Bn(10,i-o):0:g[m-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,d?(e-=t.e+1,g[0]=Bn(10,($e-e%$e)%$e),t.e=-e||0):g[0]=t.e=0,t;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Bn(10,$e-a),g[m]=o>0?(h/Bn(10,i-o)%Bn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,g[0]==Ki&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=Ki)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return Ze&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function La(t,e,n){if(!t.isFinite())return EM(t);var r,i=t.e,a=ur(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+So(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+So(-i-1)+a,n&&(r=n-o)>0&&(a+=So(r))):i>=o?(a+=So(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+So(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=So(r))),a}function uv(t,e){var n=t[0];for(e*=$e;n>=10;n/=10)e++;return e}function bm(t,e,n){if(e>tG)throw Ze=!0,n&&(t.precision=n),Error(vM);return ze(new t(vm),e,1,!0)}function Ca(t,e,n){if(e>P1)throw Error(vM);return ze(new t(ym),e,n,!0)}function _M(t){var e=t.length-1,n=e*$e+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function So(t){for(var e="";t--;)e+="0";return e}function SM(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/$e+4);for(Ze=!1;;){if(n%2&&(a=a.times(e),M2(a.d,o)&&(i=!0)),n=xr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),M2(e.d,o)}return Ze=!0,a}function N2(t){return t.d[t.d.length-1]&1}function wM(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function V1(t,e){var n,r,i,a,o,c,u,d=0,h=0,g=0,m=t.constructor,b=m.rounding,S=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Ze=!1,u=S):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),g+=5;for(r=Math.log(Bn(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=ze(a.times(t),u,1),n=n.times(++h),c=o.plus(qt(a,n,u,1)),ur(c.d).slice(0,u)===ur(o.d).slice(0,u)){for(i=g;i--;)o=ze(o.times(o),u,1);if(e==null)if(d<3&&Xd(o.d,u-r,b,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return ze(o,m.precision=S,b,Ze=!0);else return m.precision=S,o}o=c}}function Io(t,e){var n,r,i,a,o,c,u,d,h,g,m,b=1,S=10,w=t,E=w.d,A=w.constructor,D=A.rounding,I=A.precision;if(w.s<0||!E||!E[0]||!w.e&&E[0]==1&&E.length==1)return new A(E&&!E[0]?-1/0:w.s!=1?NaN:E?0:w);if(e==null?(Ze=!1,h=I):h=e,A.precision=h+=S,n=ur(E),r=n.charAt(0),Math.abs(a=w.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(t),n=ur(w.d),r=n.charAt(0),b++;a=w.e,r>1?(w=new A("0."+n),a++):w=new A(r+"."+n.slice(1))}else return d=bm(A,h+2,I).times(a+""),w=Io(new A(r+"."+n.slice(1)),h-S).plus(d),A.precision=I,e==null?ze(w,I,D,Ze=!0):w;for(g=w,u=o=w=qt(w.minus(1),w.plus(1),h,1),m=ze(w.times(w),h,1),i=3;;){if(o=ze(o.times(m),h,1),d=u.plus(qt(o,new A(i),h,1)),ur(d.d).slice(0,h)===ur(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(bm(A,h+2,I).times(a+""))),u=qt(u,new A(b),h,1),e==null)if(Xd(u.d,h-S,D,c))A.precision=h+=S,d=o=w=qt(g.minus(1),g.plus(1),h,1),m=ze(w.times(w),h,1),i=c=1;else return ze(u,A.precision=I,D,Ze=!0);else return A.precision=I,u;u=d,i+=2}}function EM(t){return String(t.s*t.s/0)}function Ug(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%$e,n<0&&(r+=$e),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=$e;r<i;)t.d.push(+e.slice(r,r+=$e));e=e.slice(r),r=$e-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),Ze&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function rG(t,e){var n,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),xM.test(e))return Ug(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Z7.test(e))n=16,e=e.toLowerCase();else if(Q7.test(e))n=2;else if(J7.test(e))n=8;else throw Error(Go+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=SM(r,new r(n),a,a*2)),d=Bg(e,n,Ki),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(t.s*0):(t.e=uv(d,h),t.d=d,Ze=!1,o&&(t=qt(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Bn(2,u):Fr.pow(2,u))),Ze=!0,t)}function iG(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Au(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/fv(5,n)),e=Au(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function Au(t,e,n,r,i){var a,o,c,u,d=t.precision,h=Math.ceil(d/$e);for(Ze=!1,u=n.times(n),c=new t(r);;){if(o=qt(c.times(u),new t(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=qt(o.times(u),new t(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return Ze=!0,o.d.length=h+1,o}function fv(t,e){for(var n=t;--e;)n*=t;return n}function TM(t,e){var n,r=e.s<0,i=Ca(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return ps=r?4:1,e;if(n=e.divToInt(i),n.isZero())ps=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return ps=N2(n)?r?2:3:r?4:1,e;ps=N2(n)?r?1:4:r?3:2}return e.minus(i).abs()}function P_(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor,S=n!==void 0;if(S?(Wr(n,1,Zo),r===void 0?r=b.rounding:Wr(r,0,8)):(n=b.precision,r=b.rounding),!t.isFinite())h=EM(t);else{for(h=La(t),o=h.indexOf("."),S?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=Bg(La(m),10,i),m.e=m.d.length),g=Bg(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=S?"0p+0":"0";else{if(o<0?a--:(t=new b(t),t.d=g,t.e=a,t=qt(t,m,n,r,0,i),g=t.d,a=t.e,d=mM),o=g[n],c=i/2,d=d||g[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&g[n-1]&1||r===(t.s<0?8:7)),g.length=n,d)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=M1.charAt(g[o]);if(S){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(g=Bg(h,i,e),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=M1.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function M2(t,e){if(t.length>e)return t.length=e,!0}function aG(t){return new this(t).abs()}function sG(t){return new this(t).acos()}function oG(t){return new this(t).acosh()}function lG(t,e){return new this(t).plus(e)}function cG(t){return new this(t).asin()}function uG(t){return new this(t).asinh()}function fG(t){return new this(t).atan()}function dG(t){return new this(t).atanh()}function hG(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ca(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ca(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ca(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(qt(t,e,a,1)),e=Ca(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(qt(t,e,a,1)),n}function pG(t){return new this(t).cbrt()}function gG(t){return ze(t=new this(t),t.e+1,2)}function mG(t,e,n){return new this(t).clamp(e,n)}function vG(t){if(!t||typeof t!="object")throw Error(cv+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Zo,"rounding",0,8,"toExpNeg",-cu,0,"toExpPos",0,cu,"maxE",0,cu,"minE",-cu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=O1[n]),(r=t[n])!==void 0)if(xr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Go+n+": "+r);if(n="crypto",i&&(this[n]=O1[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(yM);else this[n]=!1;else throw Error(Go+n+": "+r);return this}function yG(t){return new this(t).cos()}function bG(t){return new this(t).cosh()}function AM(t){var e,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,O2(a)){d.s=a.s,Ze?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;Ze?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return Ug(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),xM.test(a)?Ug(d,a):rG(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,Ug(d,a.toString());throw Error(Go+a)}if(i.prototype=_e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=vG,i.clone=AM,i.isDecimal=O2,i.abs=aG,i.acos=sG,i.acosh=oG,i.add=lG,i.asin=cG,i.asinh=uG,i.atan=fG,i.atanh=dG,i.atan2=hG,i.cbrt=pG,i.ceil=gG,i.clamp=mG,i.cos=yG,i.cosh=bG,i.div=xG,i.exp=_G,i.floor=SG,i.hypot=wG,i.ln=EG,i.log=TG,i.log10=CG,i.log2=AG,i.max=RG,i.min=DG,i.mod=IG,i.mul=kG,i.pow=NG,i.random=MG,i.round=OG,i.sign=PG,i.sin=VG,i.sinh=jG,i.sqrt=zG,i.sub=LG,i.sum=BG,i.tan=UG,i.tanh=FG,i.trunc=GG,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function xG(t,e){return new this(t).div(e)}function _G(t){return new this(t).exp()}function SG(t){return ze(t=new this(t),t.e+1,3)}function wG(){var t,e,n=new this(0);for(Ze=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Ze=!0,new this(1/0);n=e}return Ze=!0,n.sqrt()}function O2(t){return t instanceof Fr||t&&t.toStringTag===bM||!1}function EG(t){return new this(t).ln()}function TG(t,e){return new this(t).log(e)}function AG(t){return new this(t).log(2)}function CG(t){return new this(t).log(10)}function RG(){return wM(this,arguments,-1)}function DG(){return wM(this,arguments,1)}function IG(t,e){return new this(t).mod(e)}function kG(t,e){return new this(t).mul(e)}function NG(t,e){return new this(t).pow(e)}function MG(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:Wr(t,1,Zo),r=Math.ceil(t/$e),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(yM);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=$e,r&&t&&(i=Bn(10,$e-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=$e)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<$e&&(n-=$e-r)}return o.e=n,o.d=c,o}function OG(t){return ze(t=new this(t),t.e+1,this.rounding)}function PG(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function VG(t){return new this(t).sin()}function jG(t){return new this(t).sinh()}function zG(t){return new this(t).sqrt()}function LG(t,e){return new this(t).sub(e)}function BG(){var t=0,e=arguments,n=new this(e[t]);for(Ze=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Ze=!0,ze(n,this.precision,this.rounding)}function UG(t){return new this(t).tan()}function FG(t){return new this(t).tanh()}function GG(t){return ze(t=new this(t),t.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var Fr=_e.constructor=AM(O1);vm=new Fr(vm);ym=new Fr(ym);const qG=()=>{};var P2={};const CM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},RM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(n[h],n[g],n[m],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new $G;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $G extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YG=function(t){const e=CM(t);return RM.encodeByteArray(e,!0)},xm=function(t){return YG(t).replace(/\./g,"")},DM=function(t){try{return RM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WG=()=>XG().__FIREBASE_DEFAULTS__,KG=()=>{if(typeof process>"u"||typeof P2>"u")return;const t=P2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DM(t[1]);return e&&JSON.parse(e)},dv=()=>{try{return qG()||WG()||KG()||QG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IM=t=>dv()?.emulatorHosts?.[t],ZG=t=>{const e=IM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kM=()=>dv()?.config,NM=t=>dv()?.[`_${t}`];class JG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Yu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MM(t){return(await fetch(t,{credentials:"include"})).ok}function eq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xm(JSON.stringify(n)),xm(JSON.stringify(o)),""].join(".")}const Td={};function tq(){const t={prod:[],emulator:[]};for(const e of Object.keys(Td))Td[e]?t.emulator.push(e):t.prod.push(e);return t}function nq(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let V2=!1;function OM(t,e){if(typeof window>"u"||typeof document>"u"||!Yu(window.location.host)||Td[t]===e||Td[t]||V2)return;Td[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=tq().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{V2=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=nq(r),b=n("text"),S=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),E=document.getElementById(w)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;c(I),h(E,w);const V=d();u(D,A),I.append(D,S,E,V),document.body.appendChild(I)}a?(S.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function iq(){const t=dv()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lq(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cq(){return!iq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uq(){try{return typeof indexedDB=="object"}catch{return!1}}function fq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const dq="FirebaseError";class Ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dq,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wh.prototype.create)}}class wh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?hq(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ms(i,c,r)}}function hq(t,e){return t.replace(pq,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const pq=/\{\$([^}]+)}/g;function gq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(j2(a)&&j2(o)){if(!Yl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function j2(t){return t!==null&&typeof t=="object"}function Eh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ld(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function cd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mq(t,e){const n=new vq(t,e);return n.subscribe.bind(n)}class vq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yq(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gb),i.error===void 0&&(i.error=gb),i.complete===void 0&&(i.complete=gb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gb(){}function ln(t){return t&&t._delegate?t._delegate:t}class Xl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rl="[DEFAULT]";class bq{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JG;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_q(e))try{this.getOrInitializeService({instanceIdentifier:Rl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rl){return this.instances.has(e)}getOptions(e=Rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rl){return this.component?this.component.multipleInstances?e:Rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xq(t){return t===Rl?void 0:t}function _q(t){return t.instantiationMode==="EAGER"}class Sq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(bt||(bt={}));const wq={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},Eq=bt.INFO,Tq={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},Aq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Tq[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V_{constructor(e){this.name=e,this._logLevel=Eq,this._logHandler=Aq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const Cq=(t,e)=>e.some(n=>t instanceof n);let z2,L2;function Rq(){return z2||(z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dq(){return L2||(L2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PM=new WeakMap,j1=new WeakMap,VM=new WeakMap,mb=new WeakMap,j_=new WeakMap;function Iq(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Mo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PM.set(n,t)}).catch(()=>{}),j_.set(e,t),e}function kq(t){if(j1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});j1.set(t,e)}let z1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return j1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Nq(t){z1=t(z1)}function Mq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vb(this),e,...n);return VM.set(r,e.sort?e.sort():[e]),Mo(r)}:Dq().includes(t)?function(...e){return t.apply(vb(this),e),Mo(PM.get(this))}:function(...e){return Mo(t.apply(vb(this),e))}}function Oq(t){return typeof t=="function"?Mq(t):(t instanceof IDBTransaction&&kq(t),Cq(t,Rq())?new Proxy(t,z1):t)}function Mo(t){if(t instanceof IDBRequest)return Iq(t);if(mb.has(t))return mb.get(t);const e=Oq(t);return e!==t&&(mb.set(t,e),j_.set(e,t)),e}const vb=t=>j_.get(t);function Pq(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Mo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mo(o.result),u.oldVersion,u.newVersion,Mo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Vq=["get","getKey","getAll","getAllKeys","count"],jq=["put","add","delete","clear"],yb=new Map;function B2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yb.get(e))return yb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=jq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vq.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return yb.set(e,a),a}Nq(t=>({...t,get:(e,n,r)=>B2(e,n)||t.get(e,n,r),has:(e,n)=>!!B2(e,n)||t.has(e,n)}));class zq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lq(t){return t.getComponent()?.type==="VERSION"}const L1="@firebase/app",U2="0.14.6";const Rs=new V_("@firebase/app"),Bq="@firebase/app-compat",Uq="@firebase/analytics-compat",Fq="@firebase/analytics",Gq="@firebase/app-check-compat",qq="@firebase/app-check",Hq="@firebase/auth",$q="@firebase/auth-compat",Yq="@firebase/database",Xq="@firebase/data-connect",Wq="@firebase/database-compat",Kq="@firebase/functions",Qq="@firebase/functions-compat",Zq="@firebase/installations",Jq="@firebase/installations-compat",eH="@firebase/messaging",tH="@firebase/messaging-compat",nH="@firebase/performance",rH="@firebase/performance-compat",iH="@firebase/remote-config",aH="@firebase/remote-config-compat",sH="@firebase/storage",oH="@firebase/storage-compat",lH="@firebase/firestore",cH="@firebase/ai",uH="@firebase/firestore-compat",fH="firebase",dH="12.6.0";const B1="[DEFAULT]",hH={[L1]:"fire-core",[Bq]:"fire-core-compat",[Fq]:"fire-analytics",[Uq]:"fire-analytics-compat",[qq]:"fire-app-check",[Gq]:"fire-app-check-compat",[Hq]:"fire-auth",[$q]:"fire-auth-compat",[Yq]:"fire-rtdb",[Xq]:"fire-data-connect",[Wq]:"fire-rtdb-compat",[Kq]:"fire-fn",[Qq]:"fire-fn-compat",[Zq]:"fire-iid",[Jq]:"fire-iid-compat",[eH]:"fire-fcm",[tH]:"fire-fcm-compat",[nH]:"fire-perf",[rH]:"fire-perf-compat",[iH]:"fire-rc",[aH]:"fire-rc-compat",[sH]:"fire-gcs",[oH]:"fire-gcs-compat",[lH]:"fire-fst",[uH]:"fire-fst-compat",[cH]:"fire-vertex","fire-js":"fire-js",[fH]:"fire-js-all"};const _m=new Map,pH=new Map,U1=new Map;function F2(t,e){try{t.container.addComponent(e)}catch(n){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cu(t){const e=t.name;if(U1.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;U1.set(e,t);for(const n of _m.values())F2(n,t);for(const n of pH.values())F2(n,t);return!0}function z_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t==null?!1:t.settings!==void 0}const gH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new wh("app","Firebase",gH);class mH{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}const Xu=dH;function jM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:B1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Oo.create("bad-app-name",{appName:String(i)});if(n||(n=kM()),!n)throw Oo.create("no-options");const a=_m.get(i);if(a){if(Yl(n,a.options)&&Yl(r,a.config))return a;throw Oo.create("duplicate-app",{appName:i})}const o=new Sq(i);for(const u of U1.values())o.addComponent(u);const c=new mH(n,r,o);return _m.set(i,c),c}function zM(t=B1){const e=_m.get(t);if(!e&&t===B1&&kM())return jM();if(!e)throw Oo.create("no-app",{appName:t});return e}function Po(t,e,n){let r=hH[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(o.join(" "));return}Cu(new Xl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const vH="firebase-heartbeat-database",yH=1,Wd="firebase-heartbeat-store";let bb=null;function LM(){return bb||(bb=Pq(vH,yH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oo.create("idb-open",{originalErrorMessage:t.message})})),bb}async function bH(t){try{const n=(await LM()).transaction(Wd),r=await n.objectStore(Wd).get(BM(t));return await n.done,r}catch(e){if(e instanceof Ms)Rs.warn(e.message);else{const n=Oo.create("idb-get",{originalErrorMessage:e?.message});Rs.warn(n.message)}}}async function G2(t,e){try{const r=(await LM()).transaction(Wd,"readwrite");await r.objectStore(Wd).put(e,BM(t)),await r.done}catch(n){if(n instanceof Ms)Rs.warn(n.message);else{const r=Oo.create("idb-set",{originalErrorMessage:n?.message});Rs.warn(r.message)}}}function BM(t){return`${t.name}!${t.options.appId}`}const xH=1024,_H=30;class SH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=q2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>_H){const i=TH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q2(),{heartbeatsToSend:n,unsentEntries:r}=wH(this._heartbeatsCache.heartbeats),i=xm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Rs.warn(e),""}}}function q2(){return new Date().toISOString().substring(0,10)}function wH(t,e=xH){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),H2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uq()?fq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function H2(t){return xm(JSON.stringify({version:2,heartbeats:t})).length}function TH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function AH(t){Cu(new Xl("platform-logger",e=>new zq(e),"PRIVATE")),Cu(new Xl("heartbeat",e=>new SH(e),"PRIVATE")),Po(L1,U2,t),Po(L1,U2,"esm2020"),Po("fire-js","")}AH("");function UM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CH=UM,FM=new wh("auth","Firebase",UM());const Sm=new V_("@firebase/auth");function RH(t,...e){Sm.logLevel<=bt.WARN&&Sm.warn(`Auth (${Xu}): ${t}`,...e)}function Fg(t,...e){Sm.logLevel<=bt.ERROR&&Sm.error(`Auth (${Xu}): ${t}`,...e)}function Ji(t,...e){throw L_(t,...e)}function Na(t,...e){return L_(t,...e)}function GM(t,e,n){const r={...CH(),[e]:n};return new wh("auth","Firebase",r).create(e,{appName:t.name})}function _s(t){return GM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FM.create(t,...e)}function Xe(t,e,...n){if(!t)throw L_(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fg(e),new Error(e)}function Ds(t,e){t||gs(e)}function F1(){return typeof self<"u"&&self.location?.href||""}function DH(){return $2()==="http:"||$2()==="https:"}function $2(){return typeof self<"u"&&self.location?.protocol||null}function IH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DH()||sq()||"connection"in navigator)?navigator.onLine:!0}function kH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Th{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ds(n>e,"Short delay should be less than long delay!"),this.isMobile=rq()||oq()}get(){return IH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function B_(t,e){Ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class qM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OH=new Th(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function $a(t,e,n,r,i={}){return HM(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Eh({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return aq()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Yu(t.emulatorConfig.host)&&(d.credentials="include"),qM.fetch()(await $M(t,t.config.apiHost,n,c),d)})}async function HM(t,e,n){t._canInitEmulator=!1;const r={...NH,...e};try{const i=new VH(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Eg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Eg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Eg(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw GM(t,h,d);Ji(t,h)}}catch(i){if(i instanceof Ms)throw i;Ji(t,"network-request-failed",{message:String(i)})}}async function Ah(t,e,n,r,i={}){const a=await $a(t,e,n,r,i);return"mfaPendingCredential"in a&&Ji(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function $M(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?B_(t.config,i):`${t.config.apiScheme}://${i}`;return MH.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function PH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Na(this.auth,"network-request-failed")),OH.get())})}}function Eg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Na(t,e,r);return i.customData._tokenResponse=n,i}function Y2(t){return t!==void 0&&t.enterprise!==void 0}class jH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zH(t,e){return $a(t,"GET","/v2/recaptchaConfig",Os(t,e))}async function LH(t,e){return $a(t,"POST","/v1/accounts:delete",e)}async function wm(t,e){return $a(t,"POST","/v1/accounts:lookup",e)}function Ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BH(t,e=!1){const n=ln(t),r=await n.getIdToken(e),i=U_(r);Xe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Ad(xb(i.auth_time)),issuedAtTime:Ad(xb(i.iat)),expirationTime:Ad(xb(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function xb(t){return Number(t)*1e3}function U_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fg("JWT malformed, contained fewer than 3 sections"),null;try{const i=DM(n);return i?JSON.parse(i):(Fg("Failed to decode base64 JWT payload"),null)}catch(i){return Fg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function X2(t){const e=U_(t);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ms&&UH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class FH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class G1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ad(this.lastLoginAt),this.creationTime=Ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Em(t){const e=t.auth,n=await t.getIdToken(),r=await Ru(t,wm(e,{idToken:n}));Xe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?YM(i.providerUserInfo):[],o=qH(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new G1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function GH(t){const e=ln(t);await Em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function HH(t,e){const n=await HM(t,{},async()=>{const r=Eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await $M(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Yu(t.emulatorConfig.host)&&(u.credentials="include"),qM.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $H(t,e){return $a(t,"POST","/v2/accounts:revokeToken",Os(t,e))}class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const n=X2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await HH(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new hu;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Xe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Xe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return gs("not implemented")}}function vo(t,e){Xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $i{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new FH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return Xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BH(this,e)}reload(){return GH(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Em(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await Ru(this,LH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:b,providerData:S,stsTokenManager:w}=n;Xe(g&&w,e,"internal-error");const E=hu.fromJSON(this.name,w);Xe(typeof g=="string",e,"internal-error"),vo(r,e.name),vo(i,e.name),Xe(typeof m=="boolean",e,"internal-error"),Xe(typeof b=="boolean",e,"internal-error"),vo(a,e.name),vo(o,e.name),vo(c,e.name),vo(u,e.name),vo(d,e.name),vo(h,e.name);const A=new $i({uid:g,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:E,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(A.providerData=S.map(D=>({...D}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new hu;i.updateFromServerResponse(n);const a=new $i({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Em(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Xe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?YM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new hu;c.updateFromIdToken(r);const u=new $i({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new G1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const W2=new Map;function ms(t){Ds(t instanceof Function,"Expected a class definition");let e=W2.get(t);return e?(Ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W2.set(t,e),e)}class XM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XM.type="NONE";const K2=XM;function Gg(t,e,n){return`firebase:${t}:${e}:${n}`}class pu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wm(this.auth,{idToken:e}).catch(()=>{});return n?$i._fromGetAccountInfoResponse(this.auth,n,e):null}return $i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pu(ms(K2),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ms(K2);const o=Gg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let g;if(typeof h=="string"){const m=await wm(e,{idToken:h}).catch(()=>{});if(!m)break;g=await $i._fromGetAccountInfoResponse(e,m,h)}else g=$i._fromJSON(e,h);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new pu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new pu(a,e,r))}}function Q2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eO(e))return"Blackberry";if(tO(e))return"Webos";if(KM(e))return"Safari";if((e.includes("chrome/")||QM(e))&&!e.includes("edge/"))return"Chrome";if(JM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function WM(t=_r()){return/firefox\//i.test(t)}function KM(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QM(t=_r()){return/crios\//i.test(t)}function ZM(t=_r()){return/iemobile/i.test(t)}function JM(t=_r()){return/android/i.test(t)}function eO(t=_r()){return/blackberry/i.test(t)}function tO(t=_r()){return/webos/i.test(t)}function F_(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YH(t=_r()){return F_(t)&&!!window.navigator?.standalone}function XH(){return lq()&&document.documentMode===10}function nO(t=_r()){return F_(t)||JM(t)||tO(t)||eO(t)||/windows phone/i.test(t)||ZM(t)}function rO(t,e=[]){let n;switch(t){case"Browser":n=Q2(_r());break;case"Worker":n=`${Q2(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xu}/${r}`}class WH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KH(t,e={}){return $a(t,"GET","/v2/passwordPolicy",Os(t,e))}const QH=6;class ZH{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class JH{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z2(this),this.idTokenSubscription=new Z2(this),this.beforeStateQueue=new WH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wm(this,{idToken:e}),r=await $i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Em(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(_s(this));const n=e?ln(e):null;return n&&Xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KH(this),n=new ZH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $H(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Xe(n,this,"argument-error"),this.redirectPersistenceManager=await pu.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&RH(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jo(t){return ln(t)}class Z2{constructor(e){this.auth=e,this.observer=null,this.addObserver=mq(n=>this.observer=n)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e$(t){hv=t}function iO(t){return hv.loadJS(t)}function t$(){return hv.recaptchaEnterpriseScript}function n$(){return hv.gapiScript}function r$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class i${constructor(){this.enterprise=new a$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class a${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const s$="recaptcha-enterprise",aO="NO_RECAPTCHA";class o${constructor(e){this.type=s$,this.auth=Jo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{zH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new jH(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;Y2(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(aO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new i$().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&Y2(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=t$();u.length!==0&&(u+=c),iO(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function J2(t,e,n,r=!1,i=!1){const a=new o$(t);let o;if(i)o=aO;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Tm(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await J2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await J2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function l$(t,e){const n=z_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Yl(a,e??{}))return i;Ji(i,"already-initialized")}return n.initialize({options:e})}function c$(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ms);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function u$(t,e,n){const r=Jo(t);Xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=sO(e),{host:o,port:c}=f$(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xe(Yl(d,r.config.emulator)&&Yl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Yu(o)?(MM(`${a}//${o}${u}`),OM("Auth",!0)):d$()}function sO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f$(t){const e=sO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:eR(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:eR(o)}}}function eR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class G_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function h$(t,e){return $a(t,"POST","/v1/accounts:signUp",e)}async function p$(t,e){return Ah(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}async function oO(t,e){return $a(t,"POST","/v1/accounts:sendOobCode",Os(t,e))}async function g$(t,e){return oO(t,e)}async function m$(t,e){return oO(t,e)}async function v$(t,e){return Ah(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function y$(t,e){return Ah(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}class Kd extends G_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Kd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,n,"signInWithPassword",p$);case"emailLink":return v$(e,{email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,r,"signUpPassword",h$);case"emailLink":return y$(e,{idToken:n,email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function gu(t,e){return Ah(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}const b$="http://localhost";class Wl extends G_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Wl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gu(e,n)}buildRequest(){const e={requestUri:b$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eh(n)}return e}}function x$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _$(t){const e=ld(cd(t)).link,n=e?ld(cd(e)).deep_link_id:null,r=ld(cd(t)).deep_link_id;return(r?ld(cd(r)).link:null)||r||n||e||t}class q_{constructor(e){const n=ld(cd(e)),r=n.apiKey??null,i=n.oobCode??null,a=x$(n.mode??null);Xe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_$(e);try{return new q_(n)}catch{return null}}}class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(e,n){return Kd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=q_.parseLink(n);return Xe(r,"argument-error"),Kd._fromEmailAndCode(e,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ch extends lO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wo extends Ch{constructor(){super("facebook.com")}static credential(e){return Wl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";class Eo extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Eo.credential(n,r)}catch{return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";class To extends Ch{constructor(){super("github.com")}static credential(e){return Wl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";class Ao extends Ch{constructor(){super("twitter.com")}static credential(e,n){return Wl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ao.credential(n,r)}catch{return null}}}Ao.TWITTER_SIGN_IN_METHOD="twitter.com";Ao.PROVIDER_ID="twitter.com";async function S$(t,e){return Ah(t,"POST","/v1/accounts:signUp",Os(t,e))}class Kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await $i._fromIdTokenResponse(e,r,i),o=tR(r);return new Kl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tR(r);return new Kl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Am extends Ms{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Am.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Am(e,n,r,i)}}function cO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Am._fromErrorAndOperation(t,a,e,r):a})}async function w$(t,e,n=!1){const r=await Ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kl._forOperation(t,"link",r)}async function uO(t,e,n=!1){const{auth:r}=t;if(Ci(r.app))return Promise.reject(_s(r));const i="reauthenticate";try{const a=await Ru(t,cO(r,i,e,t),n);Xe(a.idToken,r,"internal-error");const o=U_(a.idToken);Xe(o,r,"internal-error");const{sub:c}=o;return Xe(t.uid===c,r,"user-mismatch"),Kl._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ji(r,"user-mismatch"),a}}async function fO(t,e,n=!1){if(Ci(t.app))return Promise.reject(_s(t));const r="signIn",i=await cO(t,r,e),a=await Kl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function E$(t,e){return fO(Jo(t),e)}async function T$(t,e){return uO(ln(t),e)}async function dO(t){const e=Jo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function A$(t,e,n){const r=Jo(t);await Tm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",m$)}async function C$(t,e,n){if(Ci(t.app))return Promise.reject(_s(t));const r=Jo(t),o=await Tm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dO(t),u}),c=await Kl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function R$(t,e,n){return Ci(t.app)?Promise.reject(_s(t)):E$(ln(t),nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dO(t),r})}async function nR(t,e){const n=ln(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await g$(n.auth,i);a!==t.email&&await t.reload()}async function D$(t,e){return $a(t,"POST","/v1/accounts:update",e)}async function I$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ln(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ru(r,D$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function k$(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function N$(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function M$(t,e,n,r){return ln(t).onAuthStateChanged(e,n,r)}function rR(t){return ln(t).signOut()}async function O$(t){return ln(t).delete()}const Cm="__sak";class hO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cm,"1"),this.storage.removeItem(Cm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const P$=1e3,V$=10;class pO extends hO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);XH()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,V$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},P$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pO.type="LOCAL";const j$=pO;class gO extends hO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gO.type="SESSION";const mO=gO;function z$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class pv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await z$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pv.receivers=[];function H_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class L${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=H_("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ma(){return window}function B$(t){Ma().location.href=t}function vO(){return typeof Ma().WorkerGlobalScope<"u"&&typeof Ma().importScripts=="function"}async function U$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F$(){return navigator?.serviceWorker?.controller||null}function G$(){return vO()?self:null}const yO="firebaseLocalStorageDb",q$=1,Rm="firebaseLocalStorage",bO="fbase_key";class Rh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gv(t,e){return t.transaction([Rm],e?"readwrite":"readonly").objectStore(Rm)}function H$(){const t=indexedDB.deleteDatabase(yO);return new Rh(t).toPromise()}function q1(){const t=indexedDB.open(yO,q$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rm,{keyPath:bO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rm)?e(r):(r.close(),await H$(),e(await q1()))})})}async function iR(t,e,n){const r=gv(t,!0).put({[bO]:e,value:n});return new Rh(r).toPromise()}async function $$(t,e){const n=gv(t,!1).get(e),r=await new Rh(n).toPromise();return r===void 0?null:r.value}function aR(t,e){const n=gv(t,!0).delete(e);return new Rh(n).toPromise()}const Y$=800,X$=3;class xO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await q1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pv._getInstance(G$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await U$(),!this.activeServiceWorker)return;this.sender=new L$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await q1();return await iR(e,Cm,"1"),await aR(e,Cm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=gv(i,!1).getAll();return new Rh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xO.type="LOCAL";const W$=xO;new Th(3e4,6e4);function K$(t,e){return e?ms(e):(Xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class $_ extends G_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q$(t){return fO(t.auth,new $_(t),t.bypassAuthState)}function Z$(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),uO(n,new $_(t),t.bypassAuthState)}async function J$(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),w$(n,new $_(t),t.bypassAuthState)}class _O{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q$;case"linkViaPopup":case"linkViaRedirect":return J$;case"reauthViaPopup":case"reauthViaRedirect":return Z$;default:Ji(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eY=new Th(2e3,1e4);class uu extends _O{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,uu.currentPopupAction&&uu.currentPopupAction.cancel(),uu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=H_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eY.get())};e()}}uu.currentPopupAction=null;const tY="pendingRedirect",qg=new Map;class nY extends _O{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qg.get(this.auth._key());if(!e){try{const r=await rY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qg.set(this.auth._key(),e)}return this.bypassAuthState||qg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rY(t,e){const n=sY(e),r=aY(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function iY(t,e){qg.set(t._key(),e)}function aY(t){return ms(t._redirectPersistence)}function sY(t){return Gg(tY,t.config.apiKey,t.name)}async function oY(t,e,n=!1){if(Ci(t.app))return Promise.reject(_s(t));const r=Jo(t),i=K$(r,e),o=await new nY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const lY=600*1e3;class cY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!SO(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Na(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lY&&this.cachedEventUids.clear(),this.cachedEventUids.has(sR(e))}saveEventToCache(e){this.cachedEventUids.add(sR(e)),this.lastProcessedEventTime=Date.now()}}function sR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SO({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function uY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SO(t);default:return!1}}async function fY(t,e={}){return $a(t,"GET","/v1/projects",e)}const dY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hY=/^https?/;async function pY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fY(t);for(const n of e)try{if(gY(n))return}catch{}Ji(t,"unauthorized-domain")}function gY(t){const e=F1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hY.test(n))return!1;if(dY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const mY=new Th(3e4,6e4);function oR(){const t=Ma().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vY(t){return new Promise((e,n)=>{function r(){oR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oR(),n(Na(t,"network-request-failed"))},timeout:mY.get()})}if(Ma().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ma().gapi?.load)r();else{const i=r$("iframefcb");return Ma()[i]=()=>{gapi.load?r():n(Na(t,"network-request-failed"))},iO(`${n$()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Hg=null,e})}let Hg=null;function yY(t){return Hg=Hg||vY(t),Hg}const bY=new Th(5e3,15e3),xY="__/auth/iframe",_Y="emulator/auth/iframe",SY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EY(t){const e=t.config;Xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?B_(e,_Y):`https://${t.config.authDomain}/${xY}`,r={apiKey:e.apiKey,appName:t.name,v:Xu},i=wY.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Eh(r).slice(1)}`}async function TY(t){const e=await yY(t),n=Ma().gapi;return Xe(n,t,"internal-error"),e.open({where:document.body,url:EY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SY,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Na(t,"network-request-failed"),c=Ma().setTimeout(()=>{a(o)},bY.get());function u(){Ma().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const AY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CY=500,RY=600,DY="_blank",IY="http://localhost";class lR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kY(t,e,n,r=CY,i=RY){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...AY,width:r.toString(),height:i.toString(),top:a,left:o},d=_r().toLowerCase();n&&(c=QM(d)?DY:n),WM(d)&&(e=e||IY,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,S])=>`${m}${b}=${S},`,"");if(YH(d)&&c!=="_self")return NY(e||"",c),new lR(null);const g=window.open(e||"",c,h);Xe(g,t,"popup-blocked");try{g.focus()}catch{}return new lR(g)}function NY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const MY="__/auth/handler",OY="emulator/auth/handler",PY=encodeURIComponent("fac");async function cR(t,e,n,r,i,a){Xe(t.config.authDomain,t,"auth-domain-config-required"),Xe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xu,eventId:i};if(e instanceof lO){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof Ch){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${PY}=${encodeURIComponent(u)}`:"";return`${VY(t)}?${Eh(c).slice(1)}${d}`}function VY({config:t}){return t.emulator?B_(t,OY):`https://${t.authDomain}/${MY}`}const _b="webStorageSupport";class jY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mO,this._completeRedirectFn=oY,this._overrideRedirectResult=iY}async _openPopup(e,n,r,i){Ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await cR(e,n,r,F1(),i);return kY(e,a,H_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await cR(e,n,r,F1(),i);return B$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ds(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TY(e),r=new cY(e);return n.register("authEvent",i=>(Xe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_b,{type:_b},i=>{const a=i?.[0]?.[_b];a!==void 0&&n(!!a),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nO()||KM()||F_()}}const zY=jY;var uR="@firebase/auth",fR="1.11.1";class LY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UY(t){Cu(new Xl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rO(t)},d=new JH(r,i,a,u);return c$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cu(new Xl("auth-internal",e=>{const n=Jo(e.getProvider("auth").getImmediate());return(r=>new LY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(uR,fR,BY(t)),Po(uR,fR,"esm2020")}const FY=300,GY=NM("authIdTokenMaxAge")||FY;let dR=null;const qY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GY)return;const i=n?.token;dR!==i&&(dR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function HY(t=zM()){const e=z_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=l$(t,{popupRedirectResolver:zY,persistence:[W$,j$,mO]}),r=NM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=qY(a.toString());N$(n,o,()=>o(n.currentUser)),k$(n,c=>o(c))}}const i=IM("auth");return i&&u$(n,`http://${i}`),n}function $Y(){return document.getElementsByTagName("head")?.[0]??document}e$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Na("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",$Y().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UY("Browser");var YY="firebase",XY="12.6.0";Po(YY,XY,"app");var hR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vo,wO;(function(){var t;function e(T,C){function k(){}k.prototype=C.prototype,T.F=C.prototype,T.prototype=new k,T.prototype.constructor=T,T.D=function(j,L,U){for(var P=Array(arguments.length-2),X=2;X<arguments.length;X++)P[X-2]=arguments[X];return C.prototype[L].apply(j,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,k){k||(k=0);const j=Array(16);if(typeof C=="string")for(var L=0;L<16;++L)j[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;L<16;++L)j[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=T.g[0],k=T.g[1],L=T.g[2];let U=T.g[3],P;P=C+(U^k&(L^U))+j[0]+3614090360&4294967295,C=k+(P<<7&4294967295|P>>>25),P=U+(L^C&(k^L))+j[1]+3905402710&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(k^U&(C^k))+j[2]+606105819&4294967295,L=U+(P<<17&4294967295|P>>>15),P=k+(C^L&(U^C))+j[3]+3250441966&4294967295,k=L+(P<<22&4294967295|P>>>10),P=C+(U^k&(L^U))+j[4]+4118548399&4294967295,C=k+(P<<7&4294967295|P>>>25),P=U+(L^C&(k^L))+j[5]+1200080426&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(k^U&(C^k))+j[6]+2821735955&4294967295,L=U+(P<<17&4294967295|P>>>15),P=k+(C^L&(U^C))+j[7]+4249261313&4294967295,k=L+(P<<22&4294967295|P>>>10),P=C+(U^k&(L^U))+j[8]+1770035416&4294967295,C=k+(P<<7&4294967295|P>>>25),P=U+(L^C&(k^L))+j[9]+2336552879&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(k^U&(C^k))+j[10]+4294925233&4294967295,L=U+(P<<17&4294967295|P>>>15),P=k+(C^L&(U^C))+j[11]+2304563134&4294967295,k=L+(P<<22&4294967295|P>>>10),P=C+(U^k&(L^U))+j[12]+1804603682&4294967295,C=k+(P<<7&4294967295|P>>>25),P=U+(L^C&(k^L))+j[13]+4254626195&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(k^U&(C^k))+j[14]+2792965006&4294967295,L=U+(P<<17&4294967295|P>>>15),P=k+(C^L&(U^C))+j[15]+1236535329&4294967295,k=L+(P<<22&4294967295|P>>>10),P=C+(L^U&(k^L))+j[1]+4129170786&4294967295,C=k+(P<<5&4294967295|P>>>27),P=U+(k^L&(C^k))+j[6]+3225465664&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^k&(U^C))+j[11]+643717713&4294967295,L=U+(P<<14&4294967295|P>>>18),P=k+(U^C&(L^U))+j[0]+3921069994&4294967295,k=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(k^L))+j[5]+3593408605&4294967295,C=k+(P<<5&4294967295|P>>>27),P=U+(k^L&(C^k))+j[10]+38016083&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^k&(U^C))+j[15]+3634488961&4294967295,L=U+(P<<14&4294967295|P>>>18),P=k+(U^C&(L^U))+j[4]+3889429448&4294967295,k=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(k^L))+j[9]+568446438&4294967295,C=k+(P<<5&4294967295|P>>>27),P=U+(k^L&(C^k))+j[14]+3275163606&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^k&(U^C))+j[3]+4107603335&4294967295,L=U+(P<<14&4294967295|P>>>18),P=k+(U^C&(L^U))+j[8]+1163531501&4294967295,k=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(k^L))+j[13]+2850285829&4294967295,C=k+(P<<5&4294967295|P>>>27),P=U+(k^L&(C^k))+j[2]+4243563512&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^k&(U^C))+j[7]+1735328473&4294967295,L=U+(P<<14&4294967295|P>>>18),P=k+(U^C&(L^U))+j[12]+2368359562&4294967295,k=L+(P<<20&4294967295|P>>>12),P=C+(k^L^U)+j[5]+4294588738&4294967295,C=k+(P<<4&4294967295|P>>>28),P=U+(C^k^L)+j[8]+2272392833&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^k)+j[11]+1839030562&4294967295,L=U+(P<<16&4294967295|P>>>16),P=k+(L^U^C)+j[14]+4259657740&4294967295,k=L+(P<<23&4294967295|P>>>9),P=C+(k^L^U)+j[1]+2763975236&4294967295,C=k+(P<<4&4294967295|P>>>28),P=U+(C^k^L)+j[4]+1272893353&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^k)+j[7]+4139469664&4294967295,L=U+(P<<16&4294967295|P>>>16),P=k+(L^U^C)+j[10]+3200236656&4294967295,k=L+(P<<23&4294967295|P>>>9),P=C+(k^L^U)+j[13]+681279174&4294967295,C=k+(P<<4&4294967295|P>>>28),P=U+(C^k^L)+j[0]+3936430074&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^k)+j[3]+3572445317&4294967295,L=U+(P<<16&4294967295|P>>>16),P=k+(L^U^C)+j[6]+76029189&4294967295,k=L+(P<<23&4294967295|P>>>9),P=C+(k^L^U)+j[9]+3654602809&4294967295,C=k+(P<<4&4294967295|P>>>28),P=U+(C^k^L)+j[12]+3873151461&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^k)+j[15]+530742520&4294967295,L=U+(P<<16&4294967295|P>>>16),P=k+(L^U^C)+j[2]+3299628645&4294967295,k=L+(P<<23&4294967295|P>>>9),P=C+(L^(k|~U))+j[0]+4096336452&4294967295,C=k+(P<<6&4294967295|P>>>26),P=U+(k^(C|~L))+j[7]+1126891415&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~k))+j[14]+2878612391&4294967295,L=U+(P<<15&4294967295|P>>>17),P=k+(U^(L|~C))+j[5]+4237533241&4294967295,k=L+(P<<21&4294967295|P>>>11),P=C+(L^(k|~U))+j[12]+1700485571&4294967295,C=k+(P<<6&4294967295|P>>>26),P=U+(k^(C|~L))+j[3]+2399980690&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~k))+j[10]+4293915773&4294967295,L=U+(P<<15&4294967295|P>>>17),P=k+(U^(L|~C))+j[1]+2240044497&4294967295,k=L+(P<<21&4294967295|P>>>11),P=C+(L^(k|~U))+j[8]+1873313359&4294967295,C=k+(P<<6&4294967295|P>>>26),P=U+(k^(C|~L))+j[15]+4264355552&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~k))+j[6]+2734768916&4294967295,L=U+(P<<15&4294967295|P>>>17),P=k+(U^(L|~C))+j[13]+1309151649&4294967295,k=L+(P<<21&4294967295|P>>>11),P=C+(L^(k|~U))+j[4]+4149444226&4294967295,C=k+(P<<6&4294967295|P>>>26),P=U+(k^(C|~L))+j[11]+3174756917&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~k))+j[2]+718787259&4294967295,L=U+(P<<15&4294967295|P>>>17),P=k+(U^(L|~C))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+L&4294967295,T.g[3]=T.g[3]+U&4294967295}r.prototype.v=function(T,C){C===void 0&&(C=T.length);const k=C-this.blockSize,j=this.C;let L=this.h,U=0;for(;U<C;){if(L==0)for(;U<=k;)i(this,T,U),U+=this.blockSize;if(typeof T=="string"){for(;U<C;)if(j[L++]=T.charCodeAt(U++),L==this.blockSize){i(this,j),L=0;break}}else for(;U<C;)if(j[L++]=T[U++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=C},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var k=T.length-8;k<T.length;++k)T[k]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,k=0;k<4;++k)for(let j=0;j<32;j+=8)T[C++]=this.g[k]>>>j&255;return T};function a(T,C){var k=c;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=C(T)}function o(T,C){this.h=C;const k=[];let j=!0;for(let L=T.length-1;L>=0;L--){const U=T[L]|0;j&&U==C||(k[L]=U,j=!1)}this.g=k}var c={};function u(T){return-128<=T&&T<128?a(T,function(C){return new o([C|0],C<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return g;if(T<0)return E(d(-T));const C=[];let k=1;for(let j=0;T>=k;j++)C[j]=T/k|0,k*=4294967296;return new o(C,0)}function h(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return E(h(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(C,8));let j=g;for(let U=0;U<T.length;U+=8){var L=Math.min(8,T.length-U);const P=parseInt(T.substring(U,U+L),C);L<8?(L=d(Math.pow(C,L)),j=j.j(L).add(d(P))):(j=j.j(k),j=j.add(d(P)))}return j}var g=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();let T=0,C=1;for(let k=0;k<this.g.length;k++){const j=this.i(k);T+=(j>=0?j:4294967296+j)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(w(this))return"-"+E(this).toString(T);const C=d(Math.pow(T,6));var k=this;let j="";for(;;){const L=V(k,C).g;k=A(k,L.j(C));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(T);if(k=L,S(k))return U+j;for(;U.length<6;)U="0"+U;j=U+j}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function w(T){return T.h==-1}t.l=function(T){return T=A(this,T),w(T)?-1:S(T)?0:1};function E(T){const C=T.g.length,k=[];for(let j=0;j<C;j++)k[j]=~T.g[j];return new o(k,~T.h).add(m)}t.abs=function(){return w(this)?E(this):this},t.add=function(T){const C=Math.max(this.g.length,T.g.length),k=[];let j=0;for(let L=0;L<=C;L++){let U=j+(this.i(L)&65535)+(T.i(L)&65535),P=(U>>>16)+(this.i(L)>>>16)+(T.i(L)>>>16);j=P>>>16,U&=65535,P&=65535,k[L]=P<<16|U}return new o(k,k[k.length-1]&-2147483648?-1:0)};function A(T,C){return T.add(E(C))}t.j=function(T){if(S(this)||S(T))return g;if(w(this))return w(T)?E(this).j(E(T)):E(E(this).j(T));if(w(T))return E(this.j(E(T)));if(this.l(b)<0&&T.l(b)<0)return d(this.m()*T.m());const C=this.g.length+T.g.length,k=[];for(var j=0;j<2*C;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<T.g.length;L++){const U=this.i(j)>>>16,P=this.i(j)&65535,X=T.i(L)>>>16,$=T.i(L)&65535;k[2*j+2*L]+=P*$,D(k,2*j+2*L),k[2*j+2*L+1]+=U*$,D(k,2*j+2*L+1),k[2*j+2*L+1]+=P*X,D(k,2*j+2*L+1),k[2*j+2*L+2]+=U*X,D(k,2*j+2*L+2)}for(T=0;T<C;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=C;T<2*C;T++)k[T]=0;return new o(k,0)};function D(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function I(T,C){this.g=T,this.h=C}function V(T,C){if(S(C))throw Error("division by zero");if(S(T))return new I(g,g);if(w(T))return C=V(E(T),C),new I(E(C.g),E(C.h));if(w(C))return C=V(T,E(C)),new I(E(C.g),C.h);if(T.g.length>30){if(w(T)||w(C))throw Error("slowDivide_ only works with positive integers.");for(var k=m,j=C;j.l(T)<=0;)k=z(k),j=z(j);var L=O(k,1),U=O(j,1);for(j=O(j,2),k=O(k,2);!S(j);){var P=U.add(j);P.l(T)<=0&&(L=L.add(k),U=P),j=O(j,1),k=O(k,1)}return C=A(T,L.j(C)),new I(L,C)}for(L=g;T.l(C)>=0;){for(k=Math.max(1,Math.floor(T.m()/C.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),U=d(k),P=U.j(C);w(P)||P.l(T)>0;)k-=j,U=d(k),P=U.j(C);S(U)&&(U=m),L=L.add(U),T=A(T,P)}return new I(L,T)}t.B=function(T){return V(this,T).h},t.and=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)&T.i(j);return new o(k,this.h&T.h)},t.or=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)|T.i(j);return new o(k,this.h|T.h)},t.xor=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)^T.i(j);return new o(k,this.h^T.h)};function z(T){const C=T.g.length+1,k=[];for(let j=0;j<C;j++)k[j]=T.i(j)<<1|T.i(j-1)>>>31;return new o(k,T.h)}function O(T,C){const k=C>>5;C%=32;const j=T.g.length-k,L=[];for(let U=0;U<j;U++)L[U]=C>0?T.i(U+k)>>>C|T.i(U+k+1)<<32-C:T.i(U+k);return new o(L,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Vo=o}).apply(typeof hR<"u"?hR:typeof self<"u"?self:typeof window<"u"?window:{});var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var EO,ud,TO,$g,H1,AO,CO,RO;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tg=="object"&&Tg];for(var R=0;R<v.length;++R){var M=v[R];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(v,R){if(R)e:{var M=r;v=v.split(".");for(var G=0;G<v.length-1;G++){var ae=v[G];if(!(ae in M))break e;M=M[ae]}v=v[v.length-1],G=M[v],R=R(G),R!=G&&R!=null&&e(M,v,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(R){var M=[],G;for(G in R)Object.prototype.hasOwnProperty.call(R,G)&&M.push([G,R[G]]);return M}});var a=a||{},o=this||self;function c(v){var R=typeof v;return R=="object"&&v!=null||R=="function"}function u(v,R,M){return v.call.apply(v.bind,arguments)}function d(v,R,M){return d=u,d.apply(null,arguments)}function h(v,R){var M=Array.prototype.slice.call(arguments,1);return function(){var G=M.slice();return G.push.apply(G,arguments),v.apply(this,G)}}function g(v,R){function M(){}M.prototype=R.prototype,v.Z=R.prototype,v.prototype=new M,v.prototype.constructor=v,v.Ob=function(G,ae,de){for(var Ae=Array(arguments.length-2),it=2;it<arguments.length;it++)Ae[it-2]=arguments[it];return R.prototype[ae].apply(G,Ae)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const R=v.length;if(R>0){const M=Array(R);for(let G=0;G<R;G++)M[G]=v[G];return M}return[]}function S(v,R){for(let G=1;G<arguments.length;G++){const ae=arguments[G];var M=typeof ae;if(M=M!="object"?M:ae?Array.isArray(ae)?"array":M:"null",M=="array"||M=="object"&&typeof ae.length=="number"){M=v.length||0;const de=ae.length||0;v.length=M+de;for(let Ae=0;Ae<de;Ae++)v[M+Ae]=ae[Ae]}else v.push(ae)}}class w{constructor(R,M){this.i=R,this.j=M,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function E(v){o.setTimeout(()=>{throw v},0)}function A(){var v=T;let R=null;return v.g&&(R=v.g,v.g=v.g.next,v.g||(v.h=null),R.next=null),R}class D{constructor(){this.h=this.g=null}add(R,M){const G=I.get();G.set(R,M),this.h?this.h.next=G:this.g=G,this.h=G}}var I=new w(()=>new V,v=>v.reset());class V{constructor(){this.next=this.g=this.h=null}set(R,M){this.h=R,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let z,O=!1,T=new D,C=()=>{const v=Promise.resolve(void 0);z=()=>{v.then(k)}};function k(){for(var v;v=A();){try{v.h.call(v.g)}catch(M){E(M)}var R=I;R.j(v),R.h<100&&(R.h++,v.next=R.g,R.g=v)}O=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,R){this.type=v,this.g=this.target=R,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,R=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const M=()=>{};o.addEventListener("test",M,R),o.removeEventListener("test",M,R)}catch{}return v})();function P(v){return/^[\s\xa0]*$/.test(v)}function X(v,R){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,R)}g(X,L),X.prototype.init=function(v,R){const M=this.type=v.type,G=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=R,R=v.relatedTarget,R||(M=="mouseover"?R=v.fromElement:M=="mouseout"&&(R=v.toElement)),this.relatedTarget=R,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),H=0;function Y(v,R,M,G,ae){this.listener=v,this.proxy=null,this.src=R,this.type=M,this.capture=!!G,this.ha=ae,this.key=++H,this.da=this.fa=!1}function te(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function le(v,R,M){for(const G in v)R.call(M,v[G],G,v)}function Z(v,R){for(const M in v)R.call(void 0,v[M],M,v)}function B(v){const R={};for(const M in v)R[M]=v[M];return R}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(v,R){let M,G;for(let ae=1;ae<arguments.length;ae++){G=arguments[ae];for(M in G)v[M]=G[M];for(let de=0;de<K.length;de++)M=K[de],Object.prototype.hasOwnProperty.call(G,M)&&(v[M]=G[M])}}function re(v){this.src=v,this.g={},this.h=0}re.prototype.add=function(v,R,M,G,ae){const de=v.toString();v=this.g[de],v||(v=this.g[de]=[],this.h++);const Ae=ue(v,R,G,ae);return Ae>-1?(R=v[Ae],M||(R.fa=!1)):(R=new Y(R,this.src,de,!!G,ae),R.fa=M,v.push(R)),R};function fe(v,R){const M=R.type;if(M in v.g){var G=v.g[M],ae=Array.prototype.indexOf.call(G,R,void 0),de;(de=ae>=0)&&Array.prototype.splice.call(G,ae,1),de&&(te(R),v.g[M].length==0&&(delete v.g[M],v.h--))}}function ue(v,R,M,G){for(let ae=0;ae<v.length;++ae){const de=v[ae];if(!de.da&&de.listener==R&&de.capture==!!M&&de.ha==G)return ae}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Te={};function Ce(v,R,M,G,ae){if(Array.isArray(R)){for(let de=0;de<R.length;de++)Ce(v,R[de],M,G,ae);return null}return M=ft(M),v&&v[$]?v.J(R,M,c(G)?!!G.capture:!1,ae):Fe(v,R,M,!1,G,ae)}function Fe(v,R,M,G,ae,de){if(!R)throw Error("Invalid event type");const Ae=c(ae)?!!ae.capture:!!ae;let it=Ye(v);if(it||(v[ge]=it=new re(v)),M=it.add(R,M,G,Ae,de),M.proxy)return M;if(G=Se(),M.proxy=G,G.src=v,G.listener=M,v.addEventListener)U||(ae=Ae),ae===void 0&&(ae=!1),v.addEventListener(R.toString(),G,ae);else if(v.attachEvent)v.attachEvent(Pe(R.toString()),G);else if(v.addListener&&v.removeListener)v.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Se(){function v(M){return R.call(v.src,v.listener,M)}const R=Ge;return v}function De(v,R,M,G,ae){if(Array.isArray(R))for(var de=0;de<R.length;de++)De(v,R[de],M,G,ae);else G=c(G)?!!G.capture:!!G,M=ft(M),v&&v[$]?(v=v.i,de=String(R).toString(),de in v.g&&(R=v.g[de],M=ue(R,M,G,ae),M>-1&&(te(R[M]),Array.prototype.splice.call(R,M,1),R.length==0&&(delete v.g[de],v.h--)))):v&&(v=Ye(v))&&(R=v.g[R.toString()],v=-1,R&&(v=ue(R,M,G,ae)),(M=v>-1?R[v]:null)&&ot(M))}function ot(v){if(typeof v!="number"&&v&&!v.da){var R=v.src;if(R&&R[$])fe(R.i,v);else{var M=v.type,G=v.proxy;R.removeEventListener?R.removeEventListener(M,G,v.capture):R.detachEvent?R.detachEvent(Pe(M),G):R.addListener&&R.removeListener&&R.removeListener(G),(M=Ye(R))?(fe(M,v),M.h==0&&(M.src=null,R[ge]=null)):te(v)}}}function Pe(v){return v in Te?Te[v]:Te[v]="on"+v}function Ge(v,R){if(v.da)v=!0;else{R=new X(R,this);const M=v.listener,G=v.ha||v.src;v.fa&&ot(v),v=M.call(G,R)}return v}function Ye(v){return v=v[ge],v instanceof re?v:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(v){return typeof v=="function"?v:(v[gt]||(v[gt]=function(R){return v.handleEvent(R)}),v[gt])}function Ne(){j.call(this),this.i=new re(this),this.M=this,this.G=null}g(Ne,j),Ne.prototype[$]=!0,Ne.prototype.removeEventListener=function(v,R,M,G){De(this,v,R,M,G)};function qe(v,R){var M,G=v.G;if(G)for(M=[];G;G=G.G)M.push(G);if(v=v.M,G=R.type||R,typeof R=="string")R=new L(R,v);else if(R instanceof L)R.target=R.target||v;else{var ae=R;R=new L(G,v),ie(R,ae)}ae=!0;let de,Ae;if(M)for(Ae=M.length-1;Ae>=0;Ae--)de=R.g=M[Ae],ae=It(de,G,!0,R)&&ae;if(de=R.g=v,ae=It(de,G,!0,R)&&ae,ae=It(de,G,!1,R)&&ae,M)for(Ae=0;Ae<M.length;Ae++)de=R.g=M[Ae],ae=It(de,G,!1,R)&&ae}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var v=this.i;for(const R in v.g){const M=v.g[R];for(let G=0;G<M.length;G++)te(M[G]);delete v.g[R],v.h--}}this.G=null},Ne.prototype.J=function(v,R,M,G){return this.i.add(String(v),R,!1,M,G)},Ne.prototype.K=function(v,R,M,G){return this.i.add(String(v),R,!0,M,G)};function It(v,R,M,G){if(R=v.i.g[String(R)],!R)return!0;R=R.concat();let ae=!0;for(let de=0;de<R.length;++de){const Ae=R[de];if(Ae&&!Ae.da&&Ae.capture==M){const it=Ae.listener,yn=Ae.ha||Ae.src;Ae.fa&&fe(v.i,Ae),ae=it.call(yn,G)!==!1&&ae}}return ae&&!G.defaultPrevented}function Jt(v,R){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(v,R||0)}function rn(v){v.g=Jt(()=>{v.g=null,v.i&&(v.i=!1,rn(v))},v.l);const R=v.h;v.h=null,v.m.apply(null,R)}class lt extends j{constructor(R,M){super(),this.m=R,this.l=M,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(v){j.call(this),this.h=v,this.g={}}g(ct,j);var Qn=[];function Zn(v){le(v.g,function(R,M){this.g.hasOwnProperty(M)&&ot(R)},v),v.g={}}ct.prototype.N=function(){ct.Z.N.call(this),Zn(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=o.JSON.stringify,Vs=o.JSON.parse,Ya=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Jn(){}function na(){}var Sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function un(){L.call(this,"d")}g(un,L);function Hn(){L.call(this,"c")}g(Hn,L);var $t={},js=null;function ra(){return js=js||new Ne}$t.Ia="serverreachability";function ia(v){L.call(this,$t.Ia,v)}g(ia,L);function dt(v){const R=ra();qe(R,new ia(R))}$t.STAT_EVENT="statevent";function Yt(v,R){L.call(this,$t.STAT_EVENT,v),this.stat=R}g(Yt,L);function Ee(v){const R=ra();qe(R,new Yt(R,v))}$t.Ja="timingevent";function Ve(v,R){L.call(this,$t.Ja,v),this.size=R}g(Ve,L);function Ft(v,R){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},R)}function mt(){this.g=!0}mt.prototype.ua=function(){this.g=!1};function Kr(v,R,M,G,ae,de){v.info(function(){if(v.g)if(de){var Ae="",it=de.split("&");for(let Rt=0;Rt<it.length;Rt++){var yn=it[Rt].split("=");if(yn.length>1){const en=yn[0];yn=yn[1];const gi=en.split("_");Ae=gi.length>=2&&gi[1]=="type"?Ae+(en+"="+yn+"&"):Ae+(en+"=redacted&")}}}else Ae=null;else Ae=de;return"XMLHTTP REQ ("+G+") [attempt "+ae+"]: "+R+`
`+M+`
`+Ae})}function aa(v,R,M,G,ae,de,Ae){v.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ae+"]: "+R+`
`+M+`
`+de+" "+Ae})}function jn(v,R,M,G){v.info(function(){return"XMLHTTP TEXT ("+R+"): "+dr(v,M)+(G?" "+G:"")})}function tt(v,R){v.info(function(){return"TIMEOUT: "+R})}mt.prototype.info=function(){};function dr(v,R){if(!v.g)return R;if(!R)return null;try{const de=JSON.parse(R);if(de){for(v=0;v<de.length;v++)if(Array.isArray(de[v])){var M=de[v];if(!(M.length<2)){var G=M[1];if(Array.isArray(G)&&!(G.length<1)){var ae=G[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Ae=1;Ae<G.length;Ae++)G[Ae]=""}}}}return kr(de)}catch{return R}}var fn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ui;function er(){}g(er,Jn),er.prototype.g=function(){return new XMLHttpRequest},ui=new er;function Xt(v){return encodeURIComponent(String(v))}function fi(v){var R=1;v=v.split(":");const M=[];for(;R>0&&v.length;)M.push(v.shift()),R--;return v.length&&M.push(v.join(":")),M}function Yn(v,R,M,G){this.j=v,this.i=R,this.l=M,this.S=G||1,this.V=new ct(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}var Wt={},dn={};function wr(v,R,M){v.M=1,v.A=nl(Tn(R)),v.u=M,v.R=!0,ac(v,null)}function ac(v,R){v.F=Date.now(),sa(v),v.B=Tn(v.A);var M=v.B,G=v.S;Array.isArray(G)||(G=[String(G)]),cc(M.i,"t",G),v.C=0,M=v.j.L,v.h=new Nr,v.g=Kh(v.j,M?R:null,!v.u),v.P>0&&(v.O=new lt(d(v.Y,v,v.g),v.P)),R=v.V,M=v.g,G=v.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Qn[0]=ae.toString()),ae=Qn);for(let de=0;de<ae.length;de++){const Ae=Ce(M,ae[de],G||R.handleEvent,!1,R.h||R);if(!Ae)break;R.g[Ae.key]=Ae}R=v.J?B(v.J):{},v.u?(v.v||(v.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,R)):(v.v="GET",v.g.ea(v.B,v.v,null,R)),dt(),Kr(v.i,v.v,v.B,v.l,v.S,v.u)}Yn.prototype.ba=function(v){v=v.target;const R=this.O;R&&zi(v)==3?R.j():this.Y(v)},Yn.prototype.Y=function(v){try{if(v==this.g)e:{const it=zi(this.g),yn=this.g.ya(),Rt=this.g.ca();if(!(it<3)&&(it!=3||this.g&&(this.h.h||this.g.la()||tr(this.g)))){this.K||it!=4||yn==7||(yn==8||Rt<=0?dt(3):dt(2)),oa(this);var R=this.g.ca();this.X=R;var M=zv(this);if(this.o=R==200,aa(this.i,this.v,this.B,this.l,this.S,it,R),this.o){if(this.U&&!this.L){t:{if(this.g){var G,ae=this.g;if((G=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(G)){var de=G;break t}}de=null}if(v=de)jn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,la(this,v);else{this.o=!1,this.m=3,Ee(12),Qr(this),di(this);break e}}if(this.R){v=!0;let en;for(;!this.K&&this.C<M.length;)if(en=jh(this,M),en==dn){it==4&&(this.m=4,Ee(14),v=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Wt){this.m=4,Ee(15),jn(this.i,this.l,M,"[Invalid Chunk]"),v=!1;break}else jn(this.i,this.l,en,null),la(this,en);if(Vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||M.length!=0||this.h.h||(this.m=1,Ee(16),v=!1),this.o=this.o&&v,!v)jn(this.i,this.l,M,"[Invalid Chunked Response]"),Qr(this),di(this);else if(M.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),mf(Ae),Ae.P=!0,Ee(11))}}else jn(this.i,this.l,M,null),la(this,M);it==4&&Qr(this),this.o&&!this.K&&(it==4?$h(this.j,this):(this.o=!1,sa(this)))}else Wa(this.g),R==400&&M.indexOf("Unknown SID")>0?(this.m=3,Ee(12)):(this.m=0,Ee(13)),Qr(this),di(this)}}}catch{}finally{}};function zv(v){if(!Vh(v))return v.g.la();const R=tr(v.g);if(R==="")return"";let M="";const G=R.length,ae=zi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Qr(v),di(v),"";v.h.i=new o.TextDecoder}for(let de=0;de<G;de++)v.h.h=!0,M+=v.h.i.decode(R[de],{stream:!(ae&&de==G-1)});return R.length=0,v.h.g+=M,v.C=0,v.h.g}function Vh(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function jh(v,R){var M=v.C,G=R.indexOf(`
`,M);return G==-1?dn:(M=Number(R.substring(M,G)),isNaN(M)?Wt:(G+=1,G+M>R.length?dn:(R=R.slice(G,G+M),v.C=G+M,R)))}Yn.prototype.cancel=function(){this.K=!0,Qr(this)};function sa(v){v.T=Date.now()+v.H,sc(v,v.H)}function sc(v,R){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Ft(d(v.aa,v),R)}function oa(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Yn.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(tt(this.i,this.B),this.M!=2&&(dt(),Ee(17)),Qr(this),this.m=2,di(this)):sc(this,this.T-v)};function di(v){v.j.I==0||v.K||$h(v.j,v)}function Qr(v){oa(v);var R=v.O;R&&typeof R.dispose=="function"&&R.dispose(),v.O=null,Zn(v.V),v.g&&(R=v.g,v.g=null,R.abort(),R.dispose())}function la(v,R){try{var M=v.j;if(M.I!=0&&(M.g==v||ua(M.h,v))){if(!v.L&&ua(M.h,v)&&M.I==3){try{var G=M.Ba.g.parse(R)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ae=G;if(ae[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<v.F)pc(M),Hs(M);else break e;cl(M),Ee(18)}}else M.xa=ae[1],0<M.xa-M.K&&ae[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Ft(d(M.Va,M),6e3));ca(M.h)<=1&&M.ta&&(M.ta=void 0)}else ma(M,11)}else if((v.L||M.g==v)&&pc(M),!P(R))for(ae=M.Ba.g.parse(R),R=0;R<ae.length;R++){let Rt=ae[R];const en=Rt[0];if(!(en<=M.K))if(M.K=en,Rt=Rt[1],M.I==2)if(Rt[0]=="c"){M.M=Rt[1],M.ba=Rt[2];const gi=Rt[3];gi!=null&&(M.ka=gi,M.j.info("VER="+M.ka));const va=Rt[4];va!=null&&(M.za=va,M.j.info("SVER="+M.za));const Li=Rt[5];Li!=null&&typeof Li=="number"&&Li>0&&(G=1.5*Li,M.O=G,M.j.info("backChannelRequestTimeoutMs_="+G)),G=M;const Bi=v.g;if(Bi){const ul=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var de=G.h;de.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(rf(de,de.h),de.h=null))}if(G.G){const gc=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;gc&&(G.wa=gc,Nt(G.J,G.G,gc))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-v.F,M.j.info("Handshake RTT: "+M.T+"ms")),G=M;var Ae=v;if(G.na=Wh(G,G.L?G.ba:null,G.W),Ae.L){af(G.h,Ae);var it=Ae,yn=G.O;yn&&(it.H=yn),it.D&&(oa(it),sa(it)),G.g=Ae}else qh(G);M.i.length>0&&ga(M)}else Rt[0]!="stop"&&Rt[0]!="close"||ma(M,7);else M.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?ma(M,7):pf(M):Rt[0]!="noop"&&M.l&&M.l.qa(Rt),M.A=0)}}dt(4)}catch{}}var En=class{constructor(v,R){this.g=v,this.map=R}};function tf(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nf(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ca(v){return v.h?1:v.g?v.g.size:0}function ua(v,R){return v.h?v.h==R:v.g?v.g.has(R):!1}function rf(v,R){v.g?v.g.add(R):v.h=R}function af(v,R){v.h&&v.h==R?v.h=null:v.g&&v.g.has(R)&&v.g.delete(R)}tf.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function sf(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let R=v.i;for(const M of v.g.values())R=R.concat(M.G);return R}return b(v.i)}var zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oc(v,R){if(v){v=v.split("&");for(let M=0;M<v.length;M++){const G=v[M].indexOf("=");let ae,de=null;G>=0?(ae=v[M].substring(0,G),de=v[M].substring(G+1)):ae=v[M],R(ae,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function Zr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;v instanceof Zr?(this.l=v.l,Xn(this,v.j),this.o=v.o,this.g=v.g,zs(this,v.u),this.h=v.h,of(this,Fh(v.i)),this.m=v.m):v&&(R=String(v).match(zh))?(this.l=!1,Xn(this,R[1]||"",!0),this.o=fa(R[2]||""),this.g=fa(R[3]||"",!0),zs(this,R[4]),this.h=fa(R[5]||"",!0),of(this,R[6]||"",!0),this.m=fa(R[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}Zr.prototype.toString=function(){const v=[];var R=this.j;R&&v.push(rl(R,lc,!0),":");var M=this.g;return(M||R=="file")&&(v.push("//"),(R=this.o)&&v.push(rl(R,lc,!0),"@"),v.push(Xt(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&v.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&v.push("/"),v.push(rl(M,M.charAt(0)=="/"?lf:Lh,!0))),(M=this.i.toString())&&v.push("?",M),(M=this.m)&&v.push("#",rl(M,Bh)),v.join("")},Zr.prototype.resolve=function(v){const R=Tn(this);let M=!!v.j;M?Xn(R,v.j):M=!!v.o,M?R.o=v.o:M=!!v.g,M?R.g=v.g:M=v.u!=null;var G=v.h;if(M)zs(R,v.u);else if(M=!!v.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var ae=R.h.lastIndexOf("/");ae!=-1&&(G=R.h.slice(0,ae+1)+G)}if(ae=G,ae==".."||ae==".")G="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){G=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const de=[];for(let Ae=0;Ae<ae.length;){const it=ae[Ae++];it=="."?G&&Ae==ae.length&&de.push(""):it==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),G&&Ae==ae.length&&de.push("")):(de.push(it),G=!0)}G=de.join("/")}else G=ae}return M?R.h=G:M=v.i.toString()!=="",M?of(R,Fh(v.i)):M=!!v.m,M&&(R.m=v.m),R};function Tn(v){return new Zr(v)}function Xn(v,R,M){v.j=M?fa(R,!0):R,v.j&&(v.j=v.j.replace(/:$/,""))}function zs(v,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);v.u=R}else v.u=null}function of(v,R,M){R instanceof Bs?(v.i=R,uc(v.i,v.l)):(M||(R=rl(R,Ls)),v.i=new Bs(R,v.l))}function Nt(v,R,M){v.i.set(R,M)}function nl(v){return Nt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function fa(v,R){return v?R?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function rl(v,R,M){return typeof v=="string"?(v=encodeURI(v).replace(R,Mr),M&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Mr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var lc=/[#\/\?@]/g,Lh=/[#\?:]/g,lf=/[#\?]/g,Ls=/[#\?@]/g,Bh=/#/g;function Bs(v,R){this.h=this.g=null,this.i=v||null,this.j=!!R}function Or(v){v.g||(v.g=new Map,v.h=0,v.i&&oc(v.i,function(R,M){v.add(decodeURIComponent(R.replace(/\+/g," ")),M)}))}t=Bs.prototype,t.add=function(v,R){Or(this),this.i=null,v=Us(this,v);let M=this.g.get(v);return M||this.g.set(v,M=[]),M.push(R),this.h+=1,this};function Uh(v,R){Or(v),R=Us(v,R),v.g.has(R)&&(v.i=null,v.h-=v.g.get(R).length,v.g.delete(R))}function cf(v,R){return Or(v),R=Us(v,R),v.g.has(R)}t.forEach=function(v,R){Or(this),this.g.forEach(function(M,G){M.forEach(function(ae){v.call(R,ae,G,this)},this)},this)};function uf(v,R){Or(v);let M=[];if(typeof R=="string")cf(v,R)&&(M=M.concat(v.g.get(Us(v,R))));else for(v=Array.from(v.g.values()),R=0;R<v.length;R++)M=M.concat(v[R]);return M}t.set=function(v,R){return Or(this),this.i=null,v=Us(this,v),cf(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[R]),this.h+=1,this},t.get=function(v,R){return v?(v=uf(this,v),v.length>0?String(v[0]):R):R};function cc(v,R,M){Uh(v,R),M.length>0&&(v.i=null,v.g.set(Us(v,R),b(M)),v.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],R=Array.from(this.g.keys());for(let G=0;G<R.length;G++){var M=R[G];const ae=Xt(M);M=uf(this,M);for(let de=0;de<M.length;de++){let Ae=ae;M[de]!==""&&(Ae+="="+Xt(M[de])),v.push(Ae)}}return this.i=v.join("&")};function Fh(v){const R=new Bs;return R.i=v.i,v.g&&(R.g=new Map(v.g),R.h=v.h),R}function Us(v,R){return R=String(R),v.j&&(R=R.toLowerCase()),R}function uc(v,R){R&&!v.j&&(Or(v),v.i=null,v.g.forEach(function(M,G){const ae=G.toLowerCase();G!=ae&&(Uh(this,G),cc(this,ae,M))},v)),v.j=R}function Vi(v,R){const M=new mt;if(o.Image){const G=new Image;G.onload=h(hi,M,"TestLoadImage: loaded",!0,R,G),G.onerror=h(hi,M,"TestLoadImage: error",!1,R,G),G.onabort=h(hi,M,"TestLoadImage: abort",!1,R,G),G.ontimeout=h(hi,M,"TestLoadImage: timeout",!1,R,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=v}else R(!1)}function ff(v,R){const M=new mt,G=new AbortController,ae=setTimeout(()=>{G.abort(),hi(M,"TestPingServer: timeout",!1,R)},1e4);fetch(v,{signal:G.signal}).then(de=>{clearTimeout(ae),de.ok?hi(M,"TestPingServer: ok",!0,R):hi(M,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(ae),hi(M,"TestPingServer: error",!1,R)})}function hi(v,R,M,G,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),G(M)}catch{}}function Fs(){this.g=new Ya}function da(v){this.i=v.Sb||null,this.h=v.ab||!1}g(da,Jn),da.prototype.g=function(){return new il(this.i,this.h)};function il(v,R){Ne.call(this),this.H=v,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(il,Ne),t=il.prototype,t.open=function(v,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=R,this.readyState=1,ji(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(R.body=v),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function fc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var R=v.value?v.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!v.done}))&&(this.response=this.responseText+=R)}v.done?Gs(this):ji(this),this.readyState==3&&fc(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,Gs(this))},t.Na=function(v){this.g&&(this.response=v,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(v){v.readyState=4,v.l=null,v.j=null,v.B=null,ji(v)}t.setRequestHeader=function(v,R){this.A.append(v,R)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],R=this.h.entries();for(var M=R.next();!M.done;)M=M.value,v.push(M[0]+": "+M[1]),M=R.next();return v.join(`\r
`)};function ji(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function pi(v){let R="";return le(v,function(M,G){R+=G,R+=":",R+=M,R+=`\r
`}),R}function al(v,R,M){e:{for(G in M){var G=!1;break e}G=!0}G||(M=pi(M),typeof v=="string"?M!=null&&Xt(M):Nt(v,R,M))}function Vt(v){Ne.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Vt,Ne);var ha=/^https?$/i,df=["POST","PUT"];t=Vt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,R,M,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);R=R?R.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ui.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(v),!0),this.B=!1}catch(de){sl(this,de);return}if(v=M||"",M=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ae in G)M.set(ae,G[ae]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const de of G.keys())M.set(de,G.get(de));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(M.keys()).find(de=>de.toLowerCase()=="content-type"),ae=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(df,R,void 0)>=0)||G||ae||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ae]of M)this.g.setRequestHeader(de,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(de){sl(this,de)}};function sl(v,R){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=R,v.o=5,hf(v),Xa(v)}function hf(v){v.A||(v.A=!0,qe(v,"complete"),qe(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,qe(this,"complete"),qe(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ol(this):this.Xa())},t.Xa=function(){ol(this)};function ol(v){if(v.h&&typeof a<"u"){if(v.v&&zi(v)==4)setTimeout(v.Ca.bind(v),0);else if(qe(v,"readystatechange"),zi(v)==4){v.h=!1;try{const de=v.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var M;if(!(M=R)){var G;if(G=de===0){let Ae=String(v.D).match(zh)[1]||null;!Ae&&o.self&&o.self.location&&(Ae=o.self.location.protocol.slice(0,-1)),G=!ha.test(Ae?Ae.toLowerCase():"")}M=G}if(M)qe(v,"complete"),qe(v,"success");else{v.o=6;try{var ae=zi(v)>2?v.g.statusText:""}catch{ae=""}v.l=ae+" ["+v.ca()+"]",hf(v)}}finally{Xa(v)}}}}function Xa(v,R){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const M=v.g;v.g=null,R||qe(v,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var R=this.g.responseText;return v&&R.indexOf(v)==0&&(R=R.substring(v.length)),Vs(R)}};function tr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Wa(v){const R={};v=(v.g&&zi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<v.length;G++){if(P(v[G]))continue;var M=fi(v[G]);const ae=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const de=R[ae]||[];R[ae]=de,de.push(M)}Z(R,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(v,R,M){return M&&M.internalChannelParams&&M.internalChannelParams[v]||R}function qs(v){this.za=0,this.i=[],this.j=new mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pa("baseRetryDelayMs",5e3,v),this.Za=pa("retryDelaySeedMs",1e4,v),this.Ta=pa("forwardChannelMaxRetries",2,v),this.va=pa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new tf(v&&v.concurrentRequestLimit),this.Ba=new Fs,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=qs.prototype,t.ka=8,t.I=1,t.connect=function(v,R,M,G){Ee(0),this.W=v,this.H=R||{},M&&G!==void 0&&(this.H.OSID=M,this.H.OAID=G),this.F=this.X,this.J=Wh(this,null,this.W),ga(this)};function pf(v){if(dc(v),v.I==3){var R=v.V++,M=Tn(v.J);if(Nt(M,"SID",v.M),Nt(M,"RID",R),Nt(M,"TYPE","terminate"),ll(v,M),R=new Yn(v,v.j,R),R.M=2,R.A=nl(Tn(M)),M=!1,o.navigator&&o.navigator.sendBeacon)try{M=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!M&&o.Image&&(new Image().src=R.A,M=!0),M||(R.g=Kh(R.j,null),R.g.ea(R.A)),R.F=Date.now(),sa(R)}Xh(v)}function Hs(v){v.g&&(mf(v),v.g.cancel(),v.g=null)}function dc(v){Hs(v),v.v&&(o.clearTimeout(v.v),v.v=null),pc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function ga(v){if(!nf(v.h)&&!v.m){v.m=!0;var R=v.Ea;z||C(),O||(z(),O=!0),T.add(R,v),v.D=0}}function hc(v,R){return ca(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=R.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Ft(d(v.Ea,v,R),Yh(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ae=new Yn(this,this.j,v);let de=this.o;if(this.U&&(de?(de=B(de),ie(de,this.U)):de=this.U),this.u!==null||this.R||(ae.J=de,de=null),this.S)e:{for(var R=0,M=0;M<this.i.length;M++){t:{var G=this.i[M];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(R+=G,R>4096){R=M;break e}if(R===4096||M===this.i.length-1){R=M+1;break e}}R=1e3}else R=1e3;R=Gh(this,ae,R),M=Tn(this.J),Nt(M,"RID",v),Nt(M,"CVER",22),this.G&&Nt(M,"X-HTTP-Session-Id",this.G),ll(this,M),de&&(this.R?R="headers="+Xt(pi(de))+"&"+R:this.u&&al(M,this.u,de)),rf(this.h,ae),this.Ra&&Nt(M,"TYPE","init"),this.S?(Nt(M,"$req",R),Nt(M,"SID","null"),ae.U=!0,wr(ae,M,null)):wr(ae,M,R),this.I=2}}else this.I==3&&(v?gf(this,v):this.i.length==0||nf(this.h)||gf(this))};function gf(v,R){var M;R?M=R.l:M=v.V++;const G=Tn(v.J);Nt(G,"SID",v.M),Nt(G,"RID",M),Nt(G,"AID",v.K),ll(v,G),v.u&&v.o&&al(G,v.u,v.o),M=new Yn(v,v.j,M,v.D+1),v.u===null&&(M.J=v.o),R&&(v.i=R.G.concat(v.i)),R=Gh(v,M,1e3),M.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),rf(v.h,M),wr(M,G,R)}function ll(v,R){v.H&&le(v.H,function(M,G){Nt(R,G,M)}),v.l&&le({},function(M,G){Nt(R,G,M)})}function Gh(v,R,M){M=Math.min(v.i.length,M);const G=v.l?d(v.l.Ka,v.l,v):null;e:{var ae=v.i;let it=-1;for(;;){const yn=["count="+M];it==-1?M>0?(it=ae[0].g,yn.push("ofs="+it)):it=0:yn.push("ofs="+it);let Rt=!0;for(let en=0;en<M;en++){var de=ae[en].g;const gi=ae[en].map;if(de-=it,de<0)it=Math.max(0,ae[en].g-100),Rt=!1;else try{de="req"+de+"_"||"";try{var Ae=gi instanceof Map?gi:Object.entries(gi);for(const[va,Li]of Ae){let Bi=Li;c(Li)&&(Bi=kr(Li)),yn.push(de+va+"="+encodeURIComponent(Bi))}}catch(va){throw yn.push(de+"type="+encodeURIComponent("_badmap")),va}}catch{G&&G(gi)}}if(Rt){Ae=yn.join("&");break e}}Ae=void 0}return v=v.i.splice(0,M),R.G=v,Ae}function qh(v){if(!v.g&&!v.v){v.Y=1;var R=v.Da;z||C(),O||(z(),O=!0),T.add(R,v),v.A=0}}function cl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Ft(d(v.Da,v),Yh(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,Hh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Ft(d(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ee(10),Hs(this),Hh(this))};function mf(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function Hh(v){v.g=new Yn(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var R=Tn(v.na);Nt(R,"RID","rpc"),Nt(R,"SID",v.M),Nt(R,"AID",v.K),Nt(R,"CI",v.F?"0":"1"),!v.F&&v.ia&&Nt(R,"TO",v.ia),Nt(R,"TYPE","xmlhttp"),ll(v,R),v.u&&v.o&&al(R,v.u,v.o),v.O&&(v.g.H=v.O);var M=v.g;v=v.ba,M.M=1,M.A=nl(Tn(R)),M.u=null,M.R=!0,ac(M,v)}t.Va=function(){this.C!=null&&(this.C=null,Hs(this),cl(this),Ee(19))};function pc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function $h(v,R){var M=null;if(v.g==R){pc(v),mf(v),v.g=null;var G=2}else if(ua(v.h,R))M=R.G,af(v.h,R),G=1;else return;if(v.I!=0){if(R.o)if(G==1){M=R.u?R.u.length:0,R=Date.now()-R.F;var ae=v.D;G=ra(),qe(G,new Ve(G,M)),ga(v)}else qh(v);else if(ae=R.m,ae==3||ae==0&&R.X>0||!(G==1&&hc(v,R)||G==2&&cl(v)))switch(M&&M.length>0&&(R=v.h,R.i=R.i.concat(M)),ae){case 1:ma(v,5);break;case 4:ma(v,10);break;case 3:ma(v,6);break;default:ma(v,2)}}}function Yh(v,R){let M=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(M*=2),M*R}function ma(v,R){if(v.j.info("Error code "+R),R==2){var M=d(v.bb,v),G=v.Ua;const ae=!G;G=new Zr(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xn(G,"https"),nl(G),ae?Vi(G.toString(),M):ff(G.toString(),M)}else Ee(2);v.I=0,v.l&&v.l.pa(R),Xh(v),dc(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function Xh(v){if(v.I=0,v.ja=[],v.l){const R=sf(v.h);(R.length!=0||v.i.length!=0)&&(S(v.ja,R),S(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function Wh(v,R,M){var G=M instanceof Zr?Tn(M):new Zr(M);if(G.g!="")R&&(G.g=R+"."+G.g),zs(G,G.u);else{var ae=o.location;G=ae.protocol,R=R?R+"."+ae.hostname:ae.hostname,ae=+ae.port;const de=new Zr(null);G&&Xn(de,G),R&&(de.g=R),ae&&zs(de,ae),M&&(de.h=M),G=de}return M=v.G,R=v.wa,M&&R&&Nt(G,M,R),Nt(G,"VER",v.ka),ll(v,G),G}function Kh(v,R,M){if(R&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=v.Aa&&!v.ma?new Vt(new da({ab:M})):new Vt(v.ma),R.Fa(v.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qh(){}t=Qh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $s(){}$s.prototype.g=function(v,R){return new Er(v,R)};function Er(v,R){Ne.call(this),this.g=new qs(R),this.l=v,this.h=R&&R.messageUrlParams||null,v=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(v?v["X-WebChannel-Content-Type"]=R.messageContentType:v={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(v?v["X-WebChannel-Client-Profile"]=R.sa:v={"X-WebChannel-Client-Profile":R.sa}),this.g.U=v,(v=R&&R.Qb)&&!P(v)&&(this.g.u=v),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!P(R)&&(this.g.G=R,v=this.h,v!==null&&R in v&&(v=this.h,R in v&&delete v[R])),this.j=new Ka(this)}g(Er,Ne),Er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){pf(this.g)},Er.prototype.o=function(v){var R=this.g;if(typeof v=="string"){var M={};M.__data__=v,v=M}else this.v&&(M={},M.__data__=kr(v),v=M);R.i.push(new En(R.Ya++,v)),R.I==3&&ga(R)},Er.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,Er.Z.N.call(this)};function Zh(v){un.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var R=v.__sm__;if(R){e:{for(const M in R){v=M;break e}v=void 0}(this.i=v)&&(v=this.i,R=R!==null&&v in R?R[v]:void 0),this.data=R}else this.data=v}g(Zh,un);function Jh(){Hn.call(this),this.status=1}g(Jh,Hn);function Ka(v){this.g=v}g(Ka,Qh),Ka.prototype.ra=function(){qe(this.g,"a")},Ka.prototype.qa=function(v){qe(this.g,new Zh(v))},Ka.prototype.pa=function(v){qe(this.g,new Jh)},Ka.prototype.oa=function(){qe(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,RO=function(){return new $s},CO=function(){return ra()},AO=$t,H1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,$g=fn,$n.COMPLETE="complete",TO=$n,na.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,ud=na,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,EO=Vt}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});const pR="@firebase/firestore",gR="4.9.2";class mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let Wu="12.3.0";const Ql=new V_("@firebase/firestore");function Xc(){return Ql.logLevel}function Ie(t,...e){if(Ql.logLevel<=bt.DEBUG){const n=e.map(Y_);Ql.debug(`Firestore (${Wu}): ${t}`,...n)}}function Is(t,...e){if(Ql.logLevel<=bt.ERROR){const n=e.map(Y_);Ql.error(`Firestore (${Wu}): ${t}`,...n)}}function Du(t,...e){if(Ql.logLevel<=bt.WARN){const n=e.map(Y_);Ql.warn(`Firestore (${Wu}): ${t}`,...n)}}function Y_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function We(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DO(t,r,n)}function DO(t,e,n){let r=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Is(r),new Error(r)}function kt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||DO(e,i,r)}function rt(t,e){return t}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ss{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class IO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mr.UNAUTHENTICATED)))}shutdown(){}}class KY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class QY{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){kt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ss,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ss)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt(typeof r.accessToken=="string",31837,{l:r}),new IO(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new mr(e)}}class ZY{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JY{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZY(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eX{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){kt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class X_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=tX(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function xt(t,e){return t<e?-1:t>e?1:0}function $1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return Sb(i)===Sb(a)?xt(i,a):Sb(i)?1:-1}return xt(t.length,e.length)}const nX=55296,rX=57343;function Sb(t){const e=t.charCodeAt(0);return e>=nX&&e<=rX}function Iu(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const vR="__name__";class wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&We(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&We(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=wa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return xt(e.length,n.length)}static compareSegments(e,n){const r=wa.isNumericId(e),i=wa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?wa.extractNumericId(e).compare(wa.extractNumericId(n)):$1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vo.fromString(e.substring(4,e.length-2))}}class Ht extends wa{construct(e,n,r){return new Ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ht(n)}static emptyPath(){return new Ht([])}}const iX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends wa{construct(e,n,r){return new cr(e,n,r)}static isValidIdentifier(e){return iX.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vR}static keyField(){return new cr([vR])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Re(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Re(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(n)}static emptyPath(){return new cr([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Ht.fromString(e))}static fromName(e){return new Ue(Ht.fromString(e).popFirst(5))}static empty(){return new Ue(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Ht(e.slice()))}}function kO(t,e,n){if(!n)throw new Re(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aX(t,e,n,r){if(e===!0&&r===!0)throw new Re(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yR(t){if(!Ue.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bR(t){if(Ue.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function NO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":We(12329,{type:typeof t})}function Hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mv(t);throw new Re(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Pn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dh(t,e){if(!NO(t))throw new Re(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(ve.INVALID_ARGUMENT,n);return!0}const xR=-62135596800,_R=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_R);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xR)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_R}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dh(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Pn("string",wt._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new wt(0,0))}static max(){return new Je(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qd=-1;function sX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new qo(i,Ue.empty(),e)}function oX(t){return new qo(t.readTime,t.key,Qd)}class qo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qo(Je.min(),Ue.empty(),Qd)}static max(){return new qo(Je.max(),Ue.empty(),Qd)}}function lX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(t.documentKey,e.documentKey),n!==0?n:xt(t.largestBatchId,e.largestBatchId))}const cX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ku(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==cX)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,r)=>{n(e)}))}static reject(e){return new be(((n,r)=>{r(e)}))}static waitFor(e){return new be(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next((i=>i?be.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new be(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new be(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function fX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qu(t){return t.name==="IndexedDbTransactionError"}class vv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vv.ce=-1;const W_=-1;function yv(t){return t==null}function Dm(t){return t===0&&1/t==-1/0}function dX(t){return typeof t=="number"&&Number.isInteger(t)&&!Dm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const MO="";function hX(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=SR(e)),e=pX(t.get(n),e);return SR(e)}function pX(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case MO:n+="";break;default:n+=a}}return n}function SR(t){return t+MO+""}function wR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function el(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class cn{constructor(e,n){this.comparator=e,this.root=n||lr.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ag(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ag(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ag(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ag(this.root,e,this.comparator,!0)}}class Ag{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??lr.RED,this.left=i??lr.EMPTY,this.right=a??lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new lr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return lr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new lr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ER(this.data.getIterator())}getIteratorFrom(e){return new ER(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Gn(this.comparator);return n.data=e,n}}class ER{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class oi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new oi([])}unionWith(e){let n=new Gn(cr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Iu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class PO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PO("Invalid base64 string: "+a):a}})(e);return new fr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const gX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(t){if(kt(!!t,39018),typeof t=="string"){let e=0;const n=gX.exec(t);if(kt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sn(t.seconds),nanos:Sn(t.nanos)}}function Sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $o(t){return typeof t=="string"?fr.fromBase64String(t):fr.fromUint8Array(t)}const VO="server_timestamp",jO="__type__",zO="__previous_value__",LO="__local_write_time__";function K_(t){return(t?.mapValue?.fields||{})[jO]?.stringValue===VO}function bv(t){const e=t.mapValue.fields[zO];return K_(e)?bv(e):e}function Zd(t){const e=Ho(t.mapValue.fields[LO].timestampValue);return new wt(e.seconds,e.nanos)}class mX{constructor(e,n,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Im="(default)";class Jd{constructor(e,n){this.projectId=e,this.database=n||Im}static empty(){return new Jd("","")}get isDefaultDatabase(){return this.database===Im}isEqual(e){return e instanceof Jd&&e.projectId===this.projectId&&e.database===this.database}}const BO="__type__",vX="__max__",Cg={mapValue:{}},UO="__vector__",km="value";function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K_(t)?4:bX(t)?9007199254740991:yX(t)?10:11:We(28295,{value:t})}function Ba(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zd(t).isEqual(Zd(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ho(i.timestampValue),c=Ho(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return $o(i.bytesValue).isEqual($o(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Sn(i.geoPointValue.latitude)===Sn(a.geoPointValue.latitude)&&Sn(i.geoPointValue.longitude)===Sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Sn(i.integerValue)===Sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Sn(i.doubleValue),c=Sn(a.doubleValue);return o===c?Dm(o)===Dm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Iu(t.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(wR(o)!==wR(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ba(o[u],c[u])))return!1;return!0})(t,e);default:return We(52216,{left:t})}}function eh(t,e){return(t.values||[]).find((n=>Ba(n,e)))!==void 0}function ku(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=Sn(a.integerValue||a.doubleValue),u=Sn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return TR(t.timestampValue,e.timestampValue);case 4:return TR(Zd(t),Zd(e));case 5:return $1(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=$o(a),u=$o(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=xt(c[d],u[d]);if(h!==0)return h}return xt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=xt(Sn(a.latitude),Sn(o.latitude));return c!==0?c:xt(Sn(a.longitude),Sn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return AR(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[km]?.arrayValue,h=u[km]?.arrayValue,g=xt(d?.values?.length||0,h?.values?.length||0);return g!==0?g:AR(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Cg.mapValue&&o===Cg.mapValue)return 0;if(a===Cg.mapValue)return 1;if(o===Cg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=$1(u[g],h[g]);if(m!==0)return m;const b=ku(c[u[g]],d[h[g]]);if(b!==0)return b}return xt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw We(23264,{he:n})}}function TR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xt(t,e);const n=Ho(t),r=Ho(e),i=xt(n.seconds,r.seconds);return i!==0?i:xt(n.nanos,r.nanos)}function AR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ku(n[i],r[i]);if(a)return a}return xt(n.length,r.length)}function Nu(t){return Y1(t)}function Y1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ho(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $o(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Y1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Y1(n.fields[o])}`;return i+"}"})(t.mapValue):We(61005,{value:t})}function Yg(t){switch(Yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bv(t);return e?16+Yg(e):16;case 5:return 2*t.stringValue.length;case 6:return $o(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Yg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return el(r.fields,((a,o)=>{i+=a.length+Yg(o)})),i})(t.mapValue);default:throw We(13486,{value:t})}}function CR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function X1(t){return!!t&&"integerValue"in t}function Q_(t){return!!t&&"arrayValue"in t}function RR(t){return!!t&&"nullValue"in t}function DR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xg(t){return!!t&&"mapValue"in t}function yX(t){return(t?.mapValue?.fields||{})[BO]?.stringValue===UO}function Cd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return el(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Cd(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cd(t.arrayValue.values[n]);return e}return{...t}}function bX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vX}class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cd(n)}setAll(e){let n=cr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Cd(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Xg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){el(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Gr(Cd(this.value))}}function FO(t){const e=[];return el(t.fields,((n,r)=>{const i=new cr([n]);if(Xg(r)){const a=FO(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new oi(e)}class vr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new vr(e,0,Je.min(),Je.min(),Je.min(),Gr.empty(),0)}static newFoundDocument(e,n,r,i){return new vr(e,1,n,Je.min(),r,i,0)}static newNoDocument(e,n){return new vr(e,2,n,Je.min(),Je.min(),Gr.empty(),0)}static newUnknownDocument(e,n){return new vr(e,3,n,Je.min(),Je.min(),Gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nm{constructor(e,n){this.position=e,this.inclusive=n}}function IR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=Ue.comparator(Ue.fromName(o.referenceValue),n.key):r=ku(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function kR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ba(t.position[n],e.position[n]))return!1;return!0}class th{constructor(e,n="asc"){this.field=e,this.dir=n}}function xX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class GO{}class On extends GO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SX(e,n,r):n==="array-contains"?new TX(e,r):n==="in"?new AX(e,r):n==="not-in"?new CX(e,r):n==="array-contains-any"?new RX(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wX(e,r):new EX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ku(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(ku(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ea extends GO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ea(e,n)}matches(e){return qO(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qO(t){return t.op==="and"}function HO(t){return _X(t)&&qO(t)}function _X(t){for(const e of t.filters)if(e instanceof ea)return!1;return!0}function W1(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+Nu(t.value);if(HO(t))return t.filters.map((e=>W1(e))).join(",");{const e=t.filters.map((n=>W1(n))).join(",");return`${t.op}(${e})`}}function $O(t,e){return t instanceof On?(function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Ba(r.value,i.value)})(t,e):t instanceof ea?(function(r,i){return i instanceof ea&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&$O(o,i.filters[c])),!0):!1})(t,e):void We(19439)}function YO(t){return t instanceof On?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nu(n.value)}`})(t):t instanceof ea?(function(n){return n.op.toString()+" {"+n.getFilters().map(YO).join(" ,")+"}"})(t):"Filter"}class SX extends On{constructor(e,n,r){super(e,n,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class wX extends On{constructor(e,n){super(e,"in",n),this.keys=XO("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class EX extends On{constructor(e,n){super(e,"not-in",n),this.keys=XO("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function XO(t,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class TX extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Q_(n)&&eh(n.arrayValue,this.value)}}class AX extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eh(this.value.arrayValue,n)}}class CX extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eh(this.value.arrayValue,n)}}class RX extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Q_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>eh(this.value.arrayValue,r)))}}class DX{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function NR(t,e=null,n=[],r=[],i=null,a=null,o=null){return new DX(t,e,n,r,i,a,o)}function Z_(t){const e=rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>W1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),yv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Nu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Nu(r))).join(",")),e.Te=n}return e.Te}function J_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$O(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kR(t.startAt,e.startAt)&&kR(t.endAt,e.endAt)}function K1(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Zu{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IX(t,e,n,r,i,a,o,c){return new Zu(t,e,n,r,i,a,o,c)}function xv(t){return new Zu(t)}function MR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WO(t){return t.collectionGroup!==null}function Rd(t){const e=rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Gn(cr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new th(a,r))})),n.has(cr.keyField().canonicalString())||e.Ie.push(new th(cr.keyField(),r))}return e.Ie}function Oa(t){const e=rt(t);return e.Ee||(e.Ee=kX(e,Rd(t))),e.Ee}function kX(t,e){if(t.limitType==="F")return NR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new th(i.field,a)}));const n=t.endAt?new Nm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nm(t.startAt.position,t.startAt.inclusive):null;return NR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Q1(t,e){const n=t.filters.concat([e]);return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mm(t,e,n){return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _v(t,e){return J_(Oa(t),Oa(e))&&t.limitType===e.limitType}function KO(t){return`${Z_(Oa(t))}|lt:${t.limitType}`}function Wc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>YO(i))).join(", ")}]`),yv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Nu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Nu(i))).join(",")),`Target(${r})`})(Oa(t))}; limitType=${t.limitType})`}function Sv(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Rd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=IR(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Rd(r),i)||r.endAt&&!(function(o,c,u){const d=IR(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Rd(r),i))})(t,e)}function NX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QO(t){return(e,n)=>{let r=!1;for(const i of Rd(t)){const a=MX(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function MX(t,e,n){const r=t.field.isKeyField()?Ue.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?ku(u,d):We(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:t.dir})}}class rc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return OO(this.inner)}size(){return this.innerSize}}const OX=new cn(Ue.comparator);function ks(){return OX}const ZO=new cn(Ue.comparator);function fd(...t){let e=ZO;for(const n of t)e=e.insert(n.key,n);return e}function JO(t){let e=ZO;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Vl(){return Dd()}function e4(){return Dd()}function Dd(){return new rc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const PX=new cn(Ue.comparator),VX=new Gn(Ue.comparator);function _t(...t){let e=VX;for(const n of t)e=e.add(n);return e}const jX=new Gn(xt);function zX(){return jX}function eS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dm(e)?"-0":e}}function t4(t){return{integerValue:""+t}}function LX(t,e){return dX(e)?t4(e):eS(t,e)}class wv{constructor(){this._=void 0}}function BX(t,e,n){return t instanceof Om?(function(i,a){const o={fields:{[jO]:{stringValue:VO},[LO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&K_(a)&&(a=bv(a)),a&&(o.fields[zO]=a),{mapValue:o}})(n,e):t instanceof nh?r4(t,e):t instanceof rh?i4(t,e):(function(i,a){const o=n4(i,a),c=OR(o)+OR(i.Ae);return X1(o)&&X1(i.Ae)?t4(c):eS(i.serializer,c)})(t,e)}function UX(t,e,n){return t instanceof nh?r4(t,e):t instanceof rh?i4(t,e):n}function n4(t,e){return t instanceof Pm?(function(r){return X1(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Om extends wv{}class nh extends wv{constructor(e){super(),this.elements=e}}function r4(t,e){const n=a4(e);for(const r of t.elements)n.some((i=>Ba(i,r)))||n.push(r);return{arrayValue:{values:n}}}class rh extends wv{constructor(e){super(),this.elements=e}}function i4(t,e){let n=a4(e);for(const r of t.elements)n=n.filter((i=>!Ba(i,r)));return{arrayValue:{values:n}}}class Pm extends wv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function OR(t){return Sn(t.integerValue||t.doubleValue)}function a4(t){return Q_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function FX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof nh&&i instanceof nh||r instanceof rh&&i instanceof rh?Iu(r.elements,i.elements,Ba):r instanceof Pm&&i instanceof Pm?Ba(r.Ae,i.Ae):r instanceof Om&&i instanceof Om})(t.transform,e.transform)}class GX{constructor(e,n){this.version=e,this.transformResults=n}}class Ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ev{}function s4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tS(t.key,Ni.none()):new Ih(t.key,t.data,Ni.none());{const n=t.data,r=Gr.empty();let i=new Gn(cr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new tl(t.key,r,new oi(i.toArray()),Ni.none())}}function qX(t,e,n){t instanceof Ih?(function(i,a,o){const c=i.value.clone(),u=VR(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof tl?(function(i,a,o){if(!Wg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=VR(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(o4(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Id(t,e,n,r){return t instanceof Ih?(function(a,o,c,u){if(!Wg(a.precondition,o))return c;const d=a.value.clone(),h=jR(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof tl?(function(a,o,c,u){if(!Wg(a.precondition,o))return c;const d=jR(a.fieldTransforms,u,o),h=o.data;return h.setAll(o4(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return Wg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function HX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=n4(r.transform,i||null);a!=null&&(n===null&&(n=Gr.empty()),n.set(r.field,a))}return n||null}function PR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Iu(r,i,((a,o)=>FX(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ih extends Ev{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tl extends Ev{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function o4(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function VR(t,e,n){const r=new Map;kt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,UX(o,c,n[i]))}return r}function jR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,BX(a,o,e))}return r}class tS extends Ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $X extends Ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YX{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&qX(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Id(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Id(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=e4();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=s4(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Je.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_t())}isEqual(e){return this.batchId===e.batchId&&Iu(this.mutations,e.mutations,((n,r)=>PR(n,r)))&&Iu(this.baseMutations,e.baseMutations,((n,r)=>PR(n,r)))}}class nS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){kt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return PX})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new nS(e,n,r,i)}}class XX{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WX{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,Et;function KX(t){switch(t){case ve.OK:return We(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return We(15467,{code:t})}}function l4(t){if(t===void 0)return Is("GRPC error has no .code"),ve.UNKNOWN;switch(t){case kn.OK:return ve.OK;case kn.CANCELLED:return ve.CANCELLED;case kn.UNKNOWN:return ve.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ve.INTERNAL;case kn.UNAVAILABLE:return ve.UNAVAILABLE;case kn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case kn.NOT_FOUND:return ve.NOT_FOUND;case kn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case kn.ABORTED:return ve.ABORTED;case kn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case kn.DATA_LOSS:return ve.DATA_LOSS;default:return We(39323,{code:t})}}(Et=kn||(kn={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";function QX(){return new TextEncoder}const ZX=new Vo([4294967295,4294967295],0);function zR(t){const e=QX().encode(t),n=new wO;return n.update(e),new Uint8Array(n.digest())}function LR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Vo([n,r],0),new Vo([i,a],0)]}class rS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dd(`Invalid padding: ${n}`);if(r<0)throw new dd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Vo.fromNumber(r)));return i.compare(ZX)===1&&(i=new Vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zR(e),[r,i]=LR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new rS(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=zR(e),[r,i]=LR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tv{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tv(Je.min(),i,new cn(xt),ks(),_t())}}class kh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kh(r,n,_t(),_t(),_t())}}class Kg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class c4{constructor(e,n){this.targetId=e,this.Ce=n}}class u4{constructor(e,n,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class BR{constructor(){this.ve=0,this.Fe=UR(),this.Me=fr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),n=_t(),r=_t();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:We(38017,{changeType:a})}})),new kh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=UR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JX{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=Rg(),this.He=Rg(),this.Ye=new cn(xt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(K1(a))if(r===0){const o=new Ue(a.path);this.et(n,o,vr.newNoDocument(o,Je.min()))}else kt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=$o(r).toUint8Array()}catch(u){if(u instanceof PO)return Du("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new rS(o,i,a)}catch(u){return Du(u instanceof dd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&K1(c.target)){const u=new Ue(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,vr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=_t();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Tv(e,n,this.Ye,this.je,r);return this.je=ks(),this.Je=Rg(),this.He=Rg(),this.Ye=new cn(xt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new BR,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gn(xt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gn(xt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new BR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rg(){return new cn(Ue.comparator)}function UR(){return new cn(Ue.comparator)}const eW={asc:"ASCENDING",desc:"DESCENDING"},tW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nW={and:"AND",or:"OR"};class rW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Z1(t,e){return t.useProto3Json||yv(e)?e:{value:e}}function Vm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iW(t,e){return Vm(t,e.toTimestamp())}function Pa(t){return kt(!!t,49232),Je.fromTimestamp((function(n){const r=Ho(n);return new wt(r.seconds,r.nanos)})(t))}function iS(t,e){return J1(t,e).canonicalString()}function J1(t,e){const n=(function(i){return new Ht(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function d4(t){const e=Ht.fromString(t);return kt(v4(e),10190,{key:e.toString()}),e}function ex(t,e){return iS(t.databaseId,e.path)}function wb(t,e){const n=d4(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ue(p4(n))}function h4(t,e){return iS(t.databaseId,e)}function aW(t){const e=d4(t);return e.length===4?Ht.emptyPath():p4(e)}function tx(t){return new Ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function p4(t){return kt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function FR(t,e,n){return{name:ex(t,e),fields:n.value.mapValue.fields}}function sW(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:We(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(kt(h===void 0||typeof h=="string",58123),fr.fromBase64String(h||"")):(kt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),fr.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?ve.UNKNOWN:l4(d.code);return new Re(h,d.message||"")})(o);n=new u4(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wb(t,r.document.name),a=Pa(r.document.updateTime),o=r.document.createTime?Pa(r.document.createTime):Je.min(),c=new Gr({mapValue:{fields:r.document.fields}}),u=vr.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Kg(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wb(t,r.document),a=r.readTime?Pa(r.readTime):Je.min(),o=vr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Kg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wb(t,r.document),a=r.removedTargetIds||[];n=new Kg([],a,i,null)}else{if(!("filter"in e))return We(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new WX(i,a),c=r.targetId;n=new c4(c,o)}}return n}function oW(t,e){let n;if(e instanceof Ih)n={update:FR(t,e.key,e.value)};else if(e instanceof tS)n={delete:ex(t,e.key)};else if(e instanceof tl)n={update:FR(t,e.key,e.data),updateMask:mW(e.fieldMask)};else{if(!(e instanceof $X))return We(16599,{Vt:e.type});n={verify:ex(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Om)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof nh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof rh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Pm)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw We(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:iW(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:We(27497)})(t,e.precondition)),n}function lW(t,e){return t&&t.length>0?(kt(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Pa(i.updateTime):Pa(a);return o.isEqual(Je.min())&&(o=Pa(a)),new GX(o,i.transformResults||[])})(n,e)))):[]}function cW(t,e){return{documents:[h4(t,e.path)]}}function uW(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h4(t,i);const a=(function(d){if(d.length!==0)return m4(ea.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Kc(m.field),direction:hW(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Z1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function fW(t){let e=aW(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){kt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=g4(g);return m instanceof ea&&HO(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(S){return new th(Qc(S.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,yv(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,b=g.values||[];return new Nm(b,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const m=!g.before,b=g.values||[];return new Nm(b,m)})(n.endAt)),IX(e,i,o,a,c,"F",u,d)}function dW(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function g4(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qc(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qc(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qc(n.unaryFilter.field);return On.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qc(n.unaryFilter.field);return On.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(t):t.fieldFilter!==void 0?(function(n){return On.create(Qc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ea.create(n.compositeFilter.filters.map((r=>g4(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(n.compositeFilter.op))})(t):We(30097,{filter:t})}function hW(t){return eW[t]}function pW(t){return tW[t]}function gW(t){return nW[t]}function Kc(t){return{fieldPath:t.canonicalString()}}function Qc(t){return cr.fromServerFormat(t.fieldPath)}function m4(t){return t instanceof On?(function(n){if(n.op==="=="){if(DR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NAN"}};if(RR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NAN"}};if(RR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(n.field),op:pW(n.op),value:n.value}}})(t):t instanceof ea?(function(n){const r=n.getFilters().map((i=>m4(i)));return r.length===1?r[0]:{compositeFilter:{op:gW(n.op),filters:r}}})(t):We(54877,{filter:t})}function mW(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function v4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ko{constructor(e,n,r,i,a=Je.min(),o=Je.min(),c=fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vW{constructor(e){this.yt=e}}function yW(t){const e=fW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mm(e,e.limit,"L"):e}class bW{constructor(){this.Cn=new xW}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(qo.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class xW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gn(Ht.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(Ht.comparator)).toArray()}}const GR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y4=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(y4,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class Mu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mu(0)}static cr(){return new Mu(-1)}}const qR="LruGarbageCollector",_W=1048576;function HR([t,e],[n,r]){const i=xt(t,n);return i===0?xt(e,r):i}class SW{constructor(e){this.Ir=e,this.buffer=new Gn(HR),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();HR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(qR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qu(n)?Ie(qR,"Ignoring IndexedDB error during garbage collection: ",n):await Ku(n)}await this.Vr(3e5)}))}}class EW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(vv.ce);const r=new SW(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(GR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GR):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),Xc()<=bt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function TW(t,e){return new EW(t,e)}class AW{constructor(){this.changes=new rc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class RW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Id(r.mutation,i,oi.empty(),wt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_t()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_t()){const i=Vl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=fd();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Vl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_t())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=ks();const o=Dd(),c=(function(){return Dd()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof tl)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Id(h.mutation,d,h.mutation.getFieldMask(),wt.now())):o.set(d.key,oi.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new CW(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Dd();let i=new cn(((o,c)=>o-c)),a=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||oi.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||_t()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=e4();h.forEach((m=>{if(!a.has(m)){const b=s4(n.get(m),r.get(m));b!==null&&g.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return be.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return Ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):be.resolve(Vl());let c=Qd,u=a;return o.next((d=>be.forEach(d,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?be.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,_t()))).next((h=>({batchId:c,changes:JO(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=fd();return this.indexManager.getCollectionParents(e,a).next((c=>be.forEach(c,(u=>{const d=(function(g,m){return new Zu(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,vr.newInvalidDocument(h)))}));let c=fd();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Id(h.mutation,d,oi.empty(),wt.now()),Sv(n,d)&&(c=c.insert(u,d))})),c}))}}class DW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Pa(i.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:yW(i.bundledQuery),readTime:Pa(i.readTime)}})(n)),be.resolve()}}class IW{constructor(){this.overlays=new cn(Ue.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vl();return be.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const i=Vl(),a=n.length+1,o=new Ue(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new cn(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Vl(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Vl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return be.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XX(n,r));let a=this.qr.get(n);a===void 0&&(a=_t(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class kW{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}class aS{constructor(){this.Qr=new Gn(Kn.$r),this.Ur=new Gn(Kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Kn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ue(new Ht([])),r=new Kn(n,e),i=new Kn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ue(new Ht([])),r=new Kn(n,e),i=new Kn(n,e+1);let a=_t();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Kn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ue.comparator(e.key,n.key)||xt(e.Yr,n.Yr)}static Kr(e,n){return xt(e.Yr,n.Yr)||Ue.comparator(e.key,n.key)}}class NW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gn(Kn.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YX(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Kn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return be.resolve(o)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return be.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?W_:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gn(xt);return n.forEach((i=>{const a=new Kn(i,0),o=new Kn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),be.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Ue.isDocumentKey(a)||(a=a.child(""));const o=new Kn(new Ue(a),0);let c=new Gn(xt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),be.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){kt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return be.forEach(n.mutations,(i=>{const a=new Kn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Kn(n,0),i=this.Zr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class MW{constructor(e){this.ri=e,this.docs=(function(){return new cn(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(n))}getEntries(e,n){let r=ks();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():vr.newInvalidDocument(i))})),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ks();const o=n.path,c=new Ue(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||lX(oX(h),r)<=0||(i.has(h.key)||Sv(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return be.resolve(a)}getAllFromCollectionGroup(e,n,r,i){We(9500)}ii(e,n){return be.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new OW(this)}getSize(e){return be.resolve(this.size)}}class OW extends AW{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class PW{constructor(e){this.persistence=e,this.si=new rc((n=>Z_(n)),J_),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new aS,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Mu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),be.waitFor(a).next((()=>i))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),be.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),be.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}class b4{constructor(e,n){this.ui={},this.overlays={},this.ci=new vv(0),this.li=!1,this.li=!0,this.hi=new kW,this.referenceDelegate=e(this),this.Pi=new PW(this),this.indexManager=new bW,this.remoteDocumentCache=(function(i){return new MW(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vW(n),this.Ii=new DW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new NW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new VW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return be.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class VW extends uX{constructor(e){super(),this.currentSequenceNumber=e}}class sS{constructor(e){this.persistence=e,this.Ri=new aS,this.Vi=null}static mi(e){return new sS(e)}get fi(){if(this.Vi)return this.Vi;throw We(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(r=>{const i=Ue.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Je.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jm{constructor(e,n){this.persistence=e,this.pi=new rc((r=>hX(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=TW(this,n)}static mi(e,n){return new jm(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return be.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?be.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,Je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yg(e.data.value)),n}br(e,n,r){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return be.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class oS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_t(),i=_t();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new oS(e,n.fromCache,r,i)}}class jW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cq()?8:fX(_r())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new jW;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Xc()<=bt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Wc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Xc()<=bt.DEBUG&&Ie("QueryEngine","Query:",Wc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Xc()<=bt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Wc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oa(n))):be.resolve())}ys(e,n){if(MR(n))return be.resolve(null);let r=Oa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Mm(n,null,"F"),r=Oa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=_t(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Mm(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return MR(n)||i.isEqual(Je.min())?be.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?be.resolve(null):(Xc()<=bt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wc(n)),this.vs(e,o,n,sX(i,Qd)).next((c=>c)))}))}Ds(e,n){let r=new Gn(QO(e));return n.forEach(((i,a)=>{Sv(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Xc()<=bt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Wc(n)),this.ps.getDocumentsMatchingQuery(e,n,qo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const lS="LocalStore",LW=3e8;class BW{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new cn(xt),this.xs=new rc((a=>Z_(a)),J_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UW(t,e,n,r){return new BW(t,e,n,r)}async function x4(t,e){const n=rt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=_t();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function FW(t,e){const n=rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const g=d.batch,m=g.keys();let b=be.resolve();return m.forEach((S=>{b=b.next((()=>h.getEntry(u,S))).next((w=>{const E=d.docVersions.get(S);kt(E!==null,48541),w.version.compareTo(E)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=_t();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function _4(t){const e=rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GW(t,e){const n=rt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(fr.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(g,b),(function(w,E,A){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=LW?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(m,b,h)&&c.push(n.Pi.updateTargetData(a,b))}));let u=ks(),d=_t();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(qW(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(Je.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return be.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function qW(t,e,n){let r=_t(),i=_t();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=ks();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Je.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ie(lS,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function HW(t,e){const n=rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=W_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $W(t,e){const n=rt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,be.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function nx(t,e,n){const r=rt(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qu(o))throw o;Ie(lS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $R(t,e,n){const r=rt(t);let i=Je.min(),a=_t();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const g=rt(u),m=g.xs.get(h);return m!==void 0?be.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,o,Oa(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Je.min(),n?a:_t()))).next((c=>(YW(r,NX(e),c),{documents:c,Qs:a})))))}function YW(t,e,n){let r=t.Os.get(e)||Je.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class YR{constructor(){this.activeTargetIds=zX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XW{constructor(){this.Mo=new YR,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WW{Oo(e){}shutdown(){}}const XR="ConnectivityMonitor";class WR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(XR,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(XR,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Dg=null;function rx(){return Dg===null?Dg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dg++,"0x"+Dg.toString(16)}const Eb="RestConnection",KW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Im?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=rx(),c=this.zo(e,n.toUriEncodedString());Ie(Eb,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=Yu(d);return this.Jo(e,c,u,r,h).then((g=>(Ie(Eb,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Du(Eb,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=KW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class ZW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const pr="WebChannelConnection";class JW extends QW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=rx();return new Promise(((c,u)=>{const d=new EO;d.setWithCredentials(!0),d.listenOnce(TO.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case $g.NO_ERROR:const g=d.getResponseJson();Ie(pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case $g.TIMEOUT:Ie(pr,`RPC '${e}' ${o} timed out`),u(new Re(ve.DEADLINE_EXCEEDED,"Request time out"));break;case $g.HTTP_ERROR:const m=d.getStatus();if(Ie(pr,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b?.error;if(S&&S.status&&S.message){const w=(function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(D)>=0?D:ve.UNKNOWN})(S.status);u(new Re(w,S.message))}else u(new Re(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Re(ve.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ie(pr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Ie(pr,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=rx(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RO(),c=CO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Ie(pr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,b=!1;const S=new ZW({Yo:E=>{b?Ie(pr,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(m||(Ie(pr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Ie(pr,`RPC '${e}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),w=(E,A,D)=>{E.listen(A,(I=>{try{D(I)}catch(V){setTimeout((()=>{throw V}),0)}}))};return w(g,ud.EventType.OPEN,(()=>{b||(Ie(pr,`RPC '${e}' stream ${i} transport opened.`),S.o_())})),w(g,ud.EventType.CLOSE,(()=>{b||(b=!0,Ie(pr,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(g))})),w(g,ud.EventType.ERROR,(E=>{b||(b=!0,Du(pr,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),S.a_(new Re(ve.UNAVAILABLE,"The operation could not be completed")))})),w(g,ud.EventType.MESSAGE,(E=>{if(!b){const A=E.data[0];kt(!!A,16349);const D=A,I=D?.error||D[0]?.error;if(I){Ie(pr,`RPC '${e}' stream ${i} received error:`,I);const V=I.status;let z=(function(C){const k=kn[C];if(k!==void 0)return l4(k)})(V),O=I.message;z===void 0&&(z=ve.INTERNAL,O="Unknown error status: "+V+" with message "+I.message),b=!0,S.a_(new Re(z,O)),g.close()}else Ie(pr,`RPC '${e}' stream ${i} received:`,A),S.u_(A)}})),w(c,AO.STAT_EVENT,(E=>{E.stat===H1.PROXY?Ie(pr,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===H1.NOPROXY&&Ie(pr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Tb(){return typeof document<"u"?document:null}function Av(t){return new rW(t,!0)}class S4{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const KR="PersistentStream";class w4{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new S4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Is(n.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(KR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ie(KR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eK extends w4{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sW(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Je.min():o.readTime?Pa(o.readTime):Je.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=tx(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=K1(u)?{documents:cW(a,u)}:{query:uW(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=f4(a,o.resumeToken);const d=Z1(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Je.min())>0){c.readTime=Vm(a,o.snapshotVersion.toTimestamp());const d=Z1(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=dW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=tx(this.serializer),n.removeTarget=e,this.q_(n)}}class tK extends w4{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lW(e.writeResults,e.commitTime),r=Pa(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=tx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>oW(this.serializer,r)))};this.q_(n)}}class nK{}class rK extends nK{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,J1(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ve.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,J1(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ve.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zl="RemoteStore";class aK{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ic(this)&&(Ie(Zl,"Restarting streams for network reachability change."),await(async function(u){const d=rt(u);d.Ea.add(4),await Nh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Cv(d)})(this))}))})),this.Ra=new iK(r,i)}}async function Cv(t){if(ic(t))for(const e of t.da)await e(!0)}async function Nh(t){for(const e of t.da)await e(!1)}function E4(t,e){const n=rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dS(n)?fS(n):Ju(n).O_()&&uS(n,e))}function cS(t,e){const n=rt(t),r=Ju(n);n.Ia.delete(e),r.O_()&&T4(n,e),n.Ia.size===0&&(r.O_()?r.L_():ic(n)&&n.Ra.set("Unknown"))}function uS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ju(t).Y_(e)}function T4(t,e){t.Va.Ue(e),Ju(t).Z_(e)}function fS(t){t.Va=new JX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ju(t).start(),t.Ra.ua()}function dS(t){return ic(t)&&!Ju(t).x_()&&t.Ia.size>0}function ic(t){return rt(t).Ea.size===0}function A4(t){t.Va=void 0}async function sK(t){t.Ra.set("Online")}async function oK(t){t.Ia.forEach(((e,n)=>{uS(t,e)}))}async function lK(t,e){A4(t),dS(t)?(t.Ra.ha(e),fS(t)):t.Ra.set("Unknown")}async function cK(t,e,n){if(t.Ra.set("Online"),e instanceof u4&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Ie(Zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zm(t,r)}else if(e instanceof Kg?t.Va.Ze(e):e instanceof c4?t.Va.st(e):t.Va.tt(e),!n.isEqual(Je.min()))try{const r=await _4(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(fr.EMPTY_BYTE_STRING,h.snapshotVersion)),T4(a,u);const g=new ko(h.target,u,d,h.sequenceNumber);uS(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Ie(Zl,"Failed to raise snapshot:",r),await zm(t,r)}}async function zm(t,e,n){if(!Qu(e))throw e;t.Ea.add(1),await Nh(t),t.Ra.set("Offline"),n||(n=()=>_4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ie(Zl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cv(t)}))}function C4(t,e){return e().catch((n=>zm(t,n,e)))}async function Rv(t){const e=rt(t),n=Xo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:W_;for(;uK(e);)try{const i=await HW(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,fK(e,i)}catch(i){await zm(e,i)}R4(e)&&D4(e)}function uK(t){return ic(t)&&t.Ta.length<10}function fK(t,e){t.Ta.push(e);const n=Xo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function R4(t){return ic(t)&&!Xo(t).x_()&&t.Ta.length>0}function D4(t){Xo(t).start()}async function dK(t){Xo(t).ra()}async function hK(t){const e=Xo(t);for(const n of t.Ta)e.ea(n.mutations)}async function pK(t,e,n){const r=t.Ta.shift(),i=nS.from(r,e,n);await C4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Rv(t)}async function gK(t,e){e&&Xo(t).X_&&await(async function(r,i){if((function(o){return KX(o)&&o!==ve.ABORTED})(i.code)){const a=r.Ta.shift();Xo(r).B_(),await C4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Rv(r)}})(t,e),R4(t)&&D4(t)}async function QR(t,e){const n=rt(t);n.asyncQueue.verifyOperationInProgress(),Ie(Zl,"RemoteStore received new credentials");const r=ic(n);n.Ea.add(3),await Nh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cv(n)}async function mK(t,e){const n=rt(t);e?(n.Ea.delete(2),await Cv(n)):e||(n.Ea.add(2),await Nh(n),n.Ra.set("Unknown"))}function Ju(t){return t.ma||(t.ma=(function(n,r,i){const a=rt(n);return a.sa(),new eK(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:sK.bind(null,t),t_:oK.bind(null,t),r_:lK.bind(null,t),H_:cK.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),dS(t)?fS(t):t.Ra.set("Unknown")):(await t.ma.stop(),A4(t))}))),t.ma}function Xo(t){return t.fa||(t.fa=(function(n,r,i){const a=rt(n);return a.sa(),new tK(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dK.bind(null,t),r_:gK.bind(null,t),ta:hK.bind(null,t),na:pK.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Rv(t)):(await t.fa.stop(),t.Ta.length>0&&(Ie(Zl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class hS{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new hS(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pS(t,e){if(Is("AsyncQueue",`${e}: ${t}`),Qu(t))return new Re(ve.UNAVAILABLE,`${e}: ${t}`);throw t}class mu{static emptySet(e){return new mu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ue.comparator(n.key,r.key):(n,r)=>Ue.comparator(n.key,r.key),this.keyedMap=fd(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class ZR{constructor(){this.ga=new cn(Ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):We(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ou{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ou(e,n,mu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class vK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yK{constructor(){this.queries=JR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=rt(n),a=i.queries;i.queries=JR(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Re(ve.ABORTED,"Firestore shutting down"))}}function JR(){return new rc((t=>KO(t)),_v)}async function gS(t,e){const n=rt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new vK,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=pS(o,`Initialization of query '${Wc(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&vS(n)}async function mS(t,e){const n=rt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bK(t,e){const n=rt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&vS(n)}function xK(t,e,n){const r=rt(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function vS(t){t.Ca.forEach((e=>{e.next()}))}var ix,eD;(eD=ix||(ix={})).Ma="default",eD.Cache="cache";class yS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ix.Cache}}class I4{constructor(e){this.key=e}}class k4{constructor(e){this.key=e}}class _K{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_t(),this.mutatedKeys=_t(),this.eu=QO(e),this.tu=new mu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ZR,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const m=i.get(h),b=Sv(this.query,g)?g:null,S=!!m&&this.mutatedKeys.has(m.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;m&&b?m.data.isEqual(b.data)?S!==w&&(r.track({type:3,doc:b}),E=!0):this.su(m,b)||(r.track({type:2,doc:b}),E=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),E=!0):m&&!b&&(r.track({type:1,doc:m}),E=!0,(u||d)&&(c=!0)),E&&(b?(o=o.add(b),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,g)=>(function(b,S){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Rt:E})}};return w(b)-w(S)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ou(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_t(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new k4(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new I4(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=_t();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ou.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bS="SyncEngine";class SK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wK{constructor(e){this.key=e,this.hu=!1}}class EK{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rc((c=>KO(c)),_v),this.Iu=new Map,this.Eu=new Set,this.du=new cn(Ue.comparator),this.Au=new Map,this.Ru=new aS,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TK(t,e,n=!0){const r=j4(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await N4(r,e,n,!0),i}async function AK(t,e){const n=j4(t);await N4(n,e,!0,!1)}async function N4(t,e,n,r){const i=await $W(t.localStore,Oa(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await CK(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&E4(t.remoteStore,i),c}async function CK(t,e,n,r,i){t.pu=(g,m,b)=>(async function(w,E,A,D){let I=E.view.ru(A);I.Cs&&(I=await $R(w.localStore,E.query,!1).then((({documents:T})=>E.view.ru(T,I))));const V=D&&D.targetChanges.get(E.targetId),z=D&&D.targetMismatches.get(E.targetId)!=null,O=E.view.applyChanges(I,w.isPrimaryClient,V,z);return nD(w,E.targetId,O.au),O.snapshot})(t,g,m,b);const a=await $R(t.localStore,e,!0),o=new _K(e,a.Qs),c=o.ru(a.documents),u=kh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);nD(t,n,d.au);const h=new SK(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function RK(t,e,n){const r=rt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!_v(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cS(r.remoteStore,i.targetId),ax(r,i.targetId)})).catch(Ku)):(ax(r,i.targetId),await nx(r.localStore,i.targetId,!0))}async function DK(t,e){const n=rt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cS(n.remoteStore,r.targetId))}async function IK(t,e,n){const r=jK(t);try{const i=await(function(o,c){const u=rt(o),d=wt.now(),h=c.reduce(((b,S)=>b.add(S.key)),_t());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=ks(),w=_t();return u.Ns.getEntries(b,h).next((E=>{S=E,S.forEach(((A,D)=>{D.isValidDocument()||(w=w.add(A))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,S))).next((E=>{g=E;const A=[];for(const D of c){const I=HX(D,g.get(D.key).overlayedDocument);I!=null&&A.push(new tl(D.key,I,FO(I.value.mapValue),Ni.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,A,c)})).next((E=>{m=E;const A=E.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(b,E.batchId,A)}))})).then((()=>({batchId:m.batchId,changes:JO(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new cn(xt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await Mh(r,i.changes),await Rv(r.remoteStore)}catch(i){const a=pS(i,"Failed to persist write");n.reject(a)}}async function M4(t,e){const n=rt(t);try{const r=await GW(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?kt(o.hu,14607):i.removedDocuments.size>0&&(kt(o.hu,42227),o.hu=!1))})),await Mh(n,r,e)}catch(r){await Ku(r)}}function tD(t,e,n){const r=rt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=rt(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(d=!0)})),d&&vS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kK(t,e,n){const r=rt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new cn(Ue.comparator);o=o.insert(a,vr.newNoDocument(a,Je.min()));const c=_t().add(a),u=new Tv(Je.min(),new Map,new cn(xt),o,c);await M4(r,u),r.du=r.du.remove(a),r.Au.delete(e),xS(r)}else await nx(r.localStore,e,!1).then((()=>ax(r,e,n))).catch(Ku)}async function NK(t,e){const n=rt(t),r=e.batch.batchId;try{const i=await FW(n.localStore,e);P4(n,r,null),O4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(n,i)}catch(i){await Ku(i)}}async function MK(t,e,n){const r=rt(t);try{const i=await(function(o,c){const u=rt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(kt(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);P4(r,e,n),O4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mh(r,i)}catch(i){await Ku(i)}}function O4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function P4(t,e,n){const r=rt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ax(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||V4(t,r)}))}function V4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(cS(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xS(t))}function nD(t,e,n){for(const r of n)r instanceof I4?(t.Ru.addReference(r.key,e),OK(t,r)):r instanceof k4?(Ie(bS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||V4(t,r.key)):We(19791,{wu:r})}function OK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ie(bS,"New document in limbo: "+n),t.Eu.add(r),xS(t))}function xS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ue(Ht.fromString(e)),r=t.fu.next();t.Au.set(r,new wK(n)),t.du=t.du.insert(n,r),E4(t.remoteStore,new ko(Oa(xv(n.path)),r,"TargetPurposeLimboResolution",vv.ce))}}async function Mh(t,e,n){const r=rt(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=oS.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=rt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>be.forEach(d,(m=>be.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b))).next((()=>be.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))))))}catch(g){if(!Qu(g))throw g;Ie(lS,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.Ms.get(m),S=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,w)}}})(r.localStore,a))}async function PK(t,e){const n=rt(t);if(!n.currentUser.isEqual(e)){Ie(bS,"User change. New user:",e.toKey());const r=await x4(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Re(ve.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mh(n,r.Ls)}}function VK(t,e){const n=rt(t),r=n.Au.get(e);if(r&&r.hu)return _t().add(r.key);{let i=_t();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function j4(t){const e=rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kK.bind(null,e),e.Pu.H_=bK.bind(null,e.eventManager),e.Pu.yu=xK.bind(null,e.eventManager),e}function jK(t){const e=rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MK.bind(null,e),e}class Lm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Av(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UW(this.persistence,new zW,e.initialUser,this.serializer)}Cu(e){return new b4(sS.mi,this.serializer)}Du(e){return new XW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lm.provider={build:()=>new Lm};class zK extends Lm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){kt(this.persistence.referenceDelegate instanceof jm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wW(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new b4((r=>jm.mi(r,n)),this.serializer)}}class sx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PK.bind(null,this.syncEngine),await mK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yK})()}createDatastore(e){const n=Av(e.databaseInfo.databaseId),r=(function(a){return new JW(a)})(e.databaseInfo);return(function(a,o,c,u){return new rK(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new aK(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>tD(this.syncEngine,n,0)),(function(){return WR.v()?new WR:new WW})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,h){const g=new EK(i,a,o,c,u,d);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=rt(n);Ie(Zl,"RemoteStore shutting down."),r.Ea.add(5),await Nh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sx.provider={build:()=>new sx};class _S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Wo="FirestoreClient";class LK{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mr.UNAUTHENTICATED,this.clientId=X_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Ie(Wo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Ie(Wo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ab(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Wo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await x4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function rD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BK(t);Ie(Wo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>QR(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>QR(e.remoteStore,i))),t._onlineComponents=e}async function BK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Wo,"Using user provided OfflineComponentProvider");try{await Ab(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Du("Error using user provided cache. Falling back to memory cache: "+n),await Ab(t,new Lm)}}else Ie(Wo,"Using default OfflineComponentProvider"),await Ab(t,new zK(void 0));return t._offlineComponents}async function z4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Wo,"Using user provided OnlineComponentProvider"),await rD(t,t._uninitializedComponentsProvider._online)):(Ie(Wo,"Using default OnlineComponentProvider"),await rD(t,new sx))),t._onlineComponents}function UK(t){return z4(t).then((e=>e.syncEngine))}async function Bm(t){const e=await z4(t),n=e.eventManager;return n.onListen=TK.bind(null,e.syncEngine),n.onUnlisten=RK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DK.bind(null,e.syncEngine),n}function FK(t,e,n={}){const r=new Ss;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new _S({next:m=>{h.Nu(),o.enqueueAndForget((()=>mS(a,g)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new Re(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new Re(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new yS(xv(c.path),h,{includeMetadataChanges:!0,qa:!0});return gS(a,g)})(await Bm(t),t.asyncQueue,e,n,r))),r.promise}function GK(t,e,n={}){const r=new Ss;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new _S({next:m=>{h.Nu(),o.enqueueAndForget((()=>mS(a,g))),m.fromCache&&u.source==="server"?d.reject(new Re(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new yS(c,h,{includeMetadataChanges:!0,qa:!0});return gS(a,g)})(await Bm(t),t.asyncQueue,e,n,r))),r.promise}function L4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const iD=new Map;const B4="firestore.googleapis.com",aD=!0;class sD{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B4,this.ssl=aD}else this.host=e.host,this.ssl=e.ssl??aD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_W)throw new Re(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sD(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WY;switch(r.type){case"firstParty":return new JY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=iD.get(n);r&&(Ie("ComponentProvider","Removing Datastore"),iD.delete(n),r.terminate())})(this),Promise.resolve()}}function qK(t,e,n,r={}){t=Hr(t,Dv);const i=Yu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(MM(`https://${c}`),OM("Firestore",!0)),a.host!==B4&&a.host!==c&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Yl(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=mr.MOCK_USER;else{d=eq(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Re(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mr(g)}t._authCredentials=new KY(new IO(d,h))}}class Ps{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ps(this.firestore,e,this._query)}}class vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dh(n,vn._jsonSchema))return new vn(e,r||null,new Ue(Ht.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:Pn("string",vn._jsonSchemaVersion),referencePath:Pn("string")};class jo extends Ps{constructor(e,n,r){super(e,n,xv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Ue(e))}withConverter(e){return new jo(this.firestore,e,this._path)}}function Ea(t,e,...n){if(t=ln(t),kO("collection","path",e),t instanceof Dv){const r=Ht.fromString(e,...n);return bR(r),new jo(t,null,r)}{if(!(t instanceof vn||t instanceof jo))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ht.fromString(e,...n));return bR(r),new jo(t.firestore,null,r)}}function mn(t,e,...n){if(t=ln(t),arguments.length===1&&(e=X_.newId()),kO("doc","path",e),t instanceof Dv){const r=Ht.fromString(e,...n);return yR(r),new vn(t,null,new Ue(r))}{if(!(t instanceof vn||t instanceof jo))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ht.fromString(e,...n));return yR(r),new vn(t.firestore,t instanceof jo?t.converter:null,new Ue(r))}}const oD="AsyncQueue";class lD{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new S4(this,"async_queue_retry"),this._c=()=>{const r=Tb();r&&Ie(oD,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qu(e))throw e;Ie(oD,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",cD(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=hS.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&We(47125,{Pc:cD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cD(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function uD(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ns extends Dv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lD,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lD(e),this._firestoreClient=void 0,await e}}}function HK(t,e){const n=typeof t=="object"?t:zM(),r=typeof t=="string"?t:Im,i=z_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=ZG("firestore");a&&qK(i,...a)}return i}function Iv(t){if(t._terminated)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$K(t),t._firestoreClient}function $K(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new mX(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,L4(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new LK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ri(fr.fromBase64String(e))}catch(n){throw new Re(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ri(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dh(e,Ri._jsonSchema))return Ri.fromBase64String(e.bytes)}}Ri._jsonSchemaVersion="firestore/bytes/1.0",Ri._jsonSchema={type:Pn("string",Ri._jsonSchemaVersion),bytes:Pn("string")};class kv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class SS{constructor(e){this._methodName=e}}class Va{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Va._jsonSchemaVersion}}static fromJSON(e){if(Dh(e,Va._jsonSchema))return new Va(e.latitude,e.longitude)}}Va._jsonSchemaVersion="firestore/geoPoint/1.0",Va._jsonSchema={type:Pn("string",Va._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};class ja{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ja._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dh(e,ja._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ja(e.vectorValues);throw new Re(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ja._jsonSchemaVersion="firestore/vectorValue/1.0",ja._jsonSchema={type:Pn("string",ja._jsonSchemaVersion),vectorValues:Pn("object")};const YK=/^__.*__$/;class XK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ih(e,this.data,n,this.fieldTransforms)}}class U4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function F4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{Ac:t})}}class wS{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(F4(this.Ac)&&YK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Av(e)}Cc(e,n,r,i=!1){return new wS({Ac:e,methodName:n,Dc:r,path:cr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nv(t){const e=t._freezeSettings(),n=Av(t._databaseId);return new WK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G4(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);ES("Data must be an object, but it was:",o,r);const c=q4(r,o);let u,d;if(a.merge)u=new oi(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=ox(e,g,n);if(!o.contains(m))throw new Re(ve.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$4(h,m)||h.push(m)}u=new oi(h),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new XK(new Gr(c),u,d)}class Mv extends SS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mv}}function KK(t,e,n,r){const i=t.Cc(1,e,n);ES("Data must be an object, but it was:",i,r);const a=[],o=Gr.empty();el(r,((u,d)=>{const h=TS(e,u,n);d=ln(d);const g=i.yc(h);if(d instanceof Mv)a.push(h);else{const m=Oh(d,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new oi(a);return new U4(o,c,i.fieldTransforms)}function QK(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[ox(e,r,n)],u=[i];if(a.length%2!=0)throw new Re(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(ox(e,a[m])),u.push(a[m+1]);const d=[],h=Gr.empty();for(let m=c.length-1;m>=0;--m)if(!$4(d,c[m])){const b=c[m];let S=u[m];S=ln(S);const w=o.yc(b);if(S instanceof Mv)d.push(b);else{const E=Oh(S,w);E!=null&&(d.push(b),h.set(b,E))}}const g=new oi(d);return new U4(h,g,o.fieldTransforms)}function ZK(t,e,n,r=!1){return Oh(n,t.Cc(r?4:3,e))}function Oh(t,e){if(H4(t=ln(t)))return ES("Unsupported field value:",e,t),q4(t,e);if(t instanceof SS)return(function(r,i){if(!F4(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Oh(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=wt.fromDate(r);return{timestampValue:Vm(i.serializer,a)}}if(r instanceof wt){const a=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vm(i.serializer,a)}}if(r instanceof Va)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ri)return{bytesValue:f4(i.serializer,r._byteString)};if(r instanceof vn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:iS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ja)return(function(o,c){return{mapValue:{fields:{[BO]:{stringValue:UO},[km]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return eS(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${mv(r)}`)})(t,e)}function q4(t,e){const n={};return OO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(t,((r,i)=>{const a=Oh(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function H4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Va||t instanceof Ri||t instanceof vn||t instanceof SS||t instanceof ja)}function ES(t,e,n){if(!H4(n)||!NO(n)){const r=mv(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function ox(t,e,n){if((e=ln(e))instanceof kv)return e._internalPath;if(typeof e=="string")return TS(t,e);throw Um("Field path arguments must be of type string or ",t,!1,void 0,n)}const JK=new RegExp("[~\\*/\\[\\]]");function TS(t,e,n){if(e.search(JK)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kv(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Um(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Re(ve.INVALID_ARGUMENT,c+t+u)}function $4(t,e){return t.some((n=>n.isEqual(e)))}class Y4{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ov("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eQ extends Y4{data(){return super.data()}}function Ov(t,e){return typeof e=="string"?TS(t,e):e instanceof kv?e._internalPath:e._delegate._internalPath}function X4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AS{}class CS extends AS{}function Yi(t,e,...n){let r=[];e instanceof AS&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof RS)).length,c=a.filter((u=>u instanceof Pv)).length;if(o>1||o>0&&c>0)throw new Re(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Pv extends CS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pv(e,n,r)}_apply(e){const n=this._parse(e);return W4(e._query,n),new Ps(e.firestore,e.converter,Q1(e._query,n))}_parse(e){const n=Nv(e.firestore);return(function(a,o,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hD(g,h);const S=[];for(const w of g)S.push(dD(u,a,w));m={arrayValue:{values:S}}}else m=dD(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hD(g,h),m=ZK(c,o,g,h==="in"||h==="not-in");return On.create(d,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yo(t,e,n){const r=e,i=Ov("where",t);return Pv._create(i,r,n)}class RS extends AS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new RS(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ea.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)W4(o,u),o=Q1(o,u)})(e._query,n),new Ps(e.firestore,e.converter,Q1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DS extends CS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new DS(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Re(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new th(a,o)})(e._query,this._field,this._direction);return new Ps(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Zu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function ih(t,e="asc"){const n=e,r=Ov("orderBy",t);return DS._create(r,n)}class IS extends CS{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new IS(e,n,r)}_apply(e){return new Ps(e.firestore,e.converter,Mm(e._query,this._limit,this._limitType))}}function fD(t){return IS._create("limit",t,"F")}function dD(t,e,n){if(typeof(n=ln(n))=="string"){if(n==="")throw new Re(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WO(e)&&n.indexOf("/")!==-1)throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ht.fromString(n));if(!Ue.isDocumentKey(r))throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CR(t,new Ue(r))}if(n instanceof vn)return CR(t,n._key);throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mv(n)}.`)}function hD(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W4(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tQ{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return el(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[km].arrayValue?.values?.map((r=>Sn(r.doubleValue)));return new ja(n)}convertGeoPoint(e){return new Va(Sn(e.latitude),Sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zd(e));default:return null}}convertTimestamp(e){const n=Ho(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ht.fromString(e);kt(v4(r),9688,{name:e});const i=new Jd(r.get(1),r.get(3)),a=new Ue(r.popFirst(5));return i.isEqual(n)||Is(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function K4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends Y4{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ov("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Bl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bl._jsonSchema={type:Pn("string",Bl._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class Qg extends Bl{data(e={}){return super.data(e)}}class Ul{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Qg(this._firestore,this._userDataWriter,r.key,r,new hd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Qg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Qg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:nQ(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ul._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=X_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:t})}}function rQ(t){t=Hr(t,vn);const e=Hr(t.firestore,Ns);return FK(Iv(e),t._key).then((n=>Q4(e,t,n)))}Ul._jsonSchemaVersion="firestore/querySnapshot/1.0",Ul._jsonSchema={type:Pn("string",Ul._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class kS extends tQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function Pu(t){t=Hr(t,Ps);const e=Hr(t.firestore,Ns),n=Iv(e),r=new kS(e);return X4(t._query),GK(n,t._query).then((i=>new Ul(e,r,t,i)))}function Co(t,e,n){t=Hr(t,vn);const r=Hr(t.firestore,Ns),i=K4(t.converter,e,n);return jv(r,[G4(Nv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ni.none())])}function Ph(t,e,n,...r){t=Hr(t,vn);const i=Hr(t.firestore,Ns),a=Nv(i);let o;return o=typeof(e=ln(e))=="string"||e instanceof kv?QK(a,"updateDoc",t._key,e,n,r):KK(a,"updateDoc",t._key,e),jv(i,[o.toMutation(t._key,Ni.exists(!0))])}function Vu(t){return jv(Hr(t.firestore,Ns),[new tS(t._key,Ni.none())])}function Vv(t,e){const n=Hr(t.firestore,Ns),r=mn(t),i=K4(t.converter,e);return jv(n,[G4(Nv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ni.exists(!1))]).then((()=>r))}function Fl(t,...e){t=ln(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||uD(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(uD(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof vn)o=Hr(t.firestore,Ns),c=xv(t._key.path),a={next:u=>{e[r]&&e[r](Q4(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Hr(t,Ps);o=Hr(u.firestore,Ns),c=u._query;const d=new kS(o);a={next:h=>{e[r]&&e[r](new Ul(o,d,u,h))},error:e[r+1],complete:e[r+2]},X4(t._query)}return(function(d,h,g,m){const b=new _S(m),S=new yS(h,b,g);return d.asyncQueue.enqueueAndForget((async()=>gS(await Bm(d),S))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>mS(await Bm(d),S)))}})(Iv(o),c,i,a)}function jv(t,e){return(function(r,i){const a=new Ss;return r.asyncQueue.enqueueAndForget((async()=>IK(await UK(r),i,a))),a.promise})(Iv(t),e)}function Q4(t,e,n){const r=n.docs.get(e._key),i=new kS(t);return new Bl(t,i,e._key,r,new hd(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Wu=i})(Xu),Cu(new Xl("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Ns(new QY(r.getProvider("auth-internal")),new eX(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jd(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Po(pR,gR,e),Po(pR,gR,"esm2020")})();const iQ={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},Z4=jM(iQ),bo=HY(Z4),Pt=HK(Z4),Cb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Mi=lv()(O_(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await R$(bo,e,n)).user;if(!i.emailVerified)return await rR(bo),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=Cb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await C$(bo,e,n)).user;await I$(a,{displayName:r}),await nR(a);const o=Cb(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await rR(bo),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await A$(bo,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=bo.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await nR(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Mi.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=bo.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=nc.credential(n.email,e);return await T$(n,r),await O$(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Mi.getState().isInitialized?()=>{}:(t({isInitialized:!1}),M$(bo,r=>{const i=Date.now(),a=Mi.getState(),o=r?Cb(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!d,m=r?o:d?a.currentUser:null;t({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),aQ=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,J4=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},NS=t=>{const e=t.date?.toDate?.()?t.date.toDate().toISOString():t.date,n=new Date(e),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return{id:t.id,date:e,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",merchant:t.merchant||void 0,envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:aQ(t.type),transferId:t.transferId??void 0,userId:t.userId,month:r,isAutomatic:t.isAutomatic??void 0}},sQ=(t,e)=>{const n={id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:wt.fromDate(new Date(t.date)),description:t.description,merchant:t.merchant||null,reconciled:t.reconciled??!1,type:J4(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(n.isAutomatic=!0),n},oQ=t=>{const e={envelopeId:t.envelopeId,amount:t.amount.toString(),date:wt.fromDate(new Date(t.date)),description:t.description,merchant:t.merchant||null,reconciled:t.reconciled??!1,type:J4(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(e.isAutomatic=!0),e},Rb=t=>Ea(Pt,"users",t,"transactions"),Ra={subscribeToTransactions:(t,e)=>{const n=Yi(Rb(t),ih("date","desc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Yi(Rb(t),ih("date","desc")),r=(await Pu(e)).docs.map(i=>{const a={id:i.id,...i.data()};return NS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await Vv(Rb(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=mn(Pt,"users",t,"transactions",e);return await Ph(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=mn(Pt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Vu(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},Db=t=>Ea(Pt,"users",t,"envelopes"),Ta={subscribeToEnvelopes:(t,e)=>{const n=Yi(Db(t),ih("orderIndex","asc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=Db(t),i=(await Pu(e)).docs.map((a,o)=>({id:a.id,...a.data(),orderIndex:a.data().orderIndex??o})).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await Vv(Db(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=mn(Pt,"users",t,"envelopes",e.id);return await Co(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=mn(Pt,"users",t,"envelopes",e);return await Ph(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=mn(Pt,"users",t,"envelopes",e);await Vu(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},pD=t=>{const e={...t},n=e;if(Object.keys(e).forEach(r=>{e[r]===void 0&&delete n[r]}),e.piggybankConfig){const r={...e.piggybankConfig},i=r;Object.keys(r).forEach(a=>{r[a]===void 0&&delete i[a]}),e.piggybankConfig=r}return e},lQ=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>{const i=a=>({id:a.id,date:a.date?.toDate?.()?a.date.toDate().toISOString():a.date,amount:parseFloat(a.amount)||0,description:a.description||"",envelopeId:a.envelopeId||"",reconciled:a.reconciled||!1,type:a.type==="income"?"Income":a.type==="expense"?"Expense":"Transfer",transferId:a.transferId||void 0,userId:a.userId||void 0});return{createEnvelope:async a=>{const o=a.currentBalance&&a.currentBalance>0,c=o?{...a,currentBalance:0,orderIndex:a.orderIndex??0}:{...a,orderIndex:a.orderIndex??0},u=`temp-${Date.now()}-${Math.random()}`,d={...c,id:u};if(t(h=>({envelopes:[...h.envelopes,d],isLoading:!0})),o){console.log(` Creating initial deposit transaction locally first: ${d.name} (tempId: ${u})`);try{await e().addTransaction({description:"Initial Deposit",amount:a.currentBalance,envelopeId:u,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(u);console.log(` Test balance for temp envelope ${u}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h=n(),g={...c,id:"",userId:h},m=await Ta.createEnvelope(g);console.log(" Firebase envelope creation successful:",m);const b={id:m.id,name:m.name,currentBalance:m.currentBalance,lastUpdated:m.lastUpdated,isActive:m.isActive??!0,orderIndex:m.orderIndex??0,userId:m.userId,createdAt:m.createdAt,isPiggybank:m.isPiggybank,piggybankConfig:m.piggybankConfig};if(t(S=>({envelopes:S.envelopes.map(w=>w.id===u?b:w),isLoading:!1,pendingSync:!1})),o){console.log(` Updating transactions from temp envelope ID ${u} to real ID ${m.id}`),console.log(" Transactions before update:",e().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description}))),t(w=>({transactions:w.transactions.map(E=>E.envelopeId===u?{...E,envelopeId:m.id}:E)})),console.log(" Transactions after envelopeId update:",e().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description})));const S=e().transactions.filter(w=>w.envelopeId===m.id&&w.id&&w.id.startsWith("temp-"));console.log(` Found ${S.length} transactions to sync for envelope ${m.id}:`,S.map(w=>({id:w.id,envelopeId:w.envelopeId})));for(const w of S)try{console.log(" Syncing transaction:",w);const E={...w,amount:w.amount.toString(),type:w.type.toLowerCase(),date:wt.fromDate(new Date(w.date))},A=await Ra.addTransaction(E);console.log(" Transaction synced:",A);const D=i(A);console.log(` Replacing temp transaction ${w.id} with Firebase transaction ${A.id}`),t(I=>({transactions:I.transactions.map(V=>V.id===w.id?D:V)}))}catch(E){console.error(` Failed to sync transaction ${w.id}:`,E)}console.log(" Final transactions after sync:",e().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${m.id}`)}return m}catch(h){if(console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:r(h)}),r(h))return console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null}),d;throw console.log(" Real error - removing temp envelope"),t(g=>({envelopes:g.envelopes.filter(m=>m.id!==u),transactions:g.transactions.filter(m=>m.envelopeId!==u),error:h.message,isLoading:!1})),h}return d},addToEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await e().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Income",reconciled:!1})},spendFromEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await e().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Expense",reconciled:!1})},transferFunds:async(a,o,c,u,d)=>{console.log(`Transferring ${c} from ${a} to ${o} with note: ${u}`);const h=d?typeof d=="string"?d:d.toISOString():new Date().toISOString(),g=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(m=>m.id===o)?.name||"envelope"}`,amount:c,envelopeId:a,date:h,type:"Expense",transferId:g,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(m=>m.id===a)?.name||"envelope"}`,amount:c,envelopeId:o,date:h,type:"Income",transferId:g,reconciled:!1})},deleteEnvelope:async a=>{const o=e().transactions.filter(c=>c.envelopeId===a);t(c=>({envelopes:c.envelopes.filter(u=>u.id!==a),transactions:c.transactions.filter(u=>u.envelopeId!==a),isLoading:!0}));try{const c=n();await Ta.deleteEnvelope(c,a);for(const u of o)u.id&&!u.id.startsWith("temp-")&&await Ra.deleteTransaction(c,u.id);await e().removeEnvelopeFromTemplates(a),t({isLoading:!1})}catch(c){if(console.error("Delete Envelope Failed:",c),r(c))t({isLoading:!1,pendingSync:!0,error:null});else{const u=e().envelopes.find(d=>d.id===a);t(u?d=>({envelopes:[...d.envelopes,u],transactions:[...d.transactions,...o],error:c.message,isLoading:!1}):{error:c.message,isLoading:!1})}}},reorderEnvelopes:async a=>{if(!a.length)return;const o=e(),c=new Map;a.forEach((g,m)=>{c.set(g,m)});const u=o.envelopes,d=u.map(g=>{if(!c.has(g.id))return g;const m=c.get(g.id);return g.orderIndex===m?g:{...g,orderIndex:m}}),h=d.filter((g,m)=>g!==u[m]);if(h.length){t({envelopes:d,isLoading:!0});try{const g=n();await Promise.all(h.map(m=>{const b=pD(m);return Ta.saveEnvelope(g,b)})),t({isLoading:!1})}catch(g){if(console.error("Reorder envelopes failed:",g),r(g))t({isLoading:!1,pendingSync:!0,error:null});else throw t({envelopes:u,isLoading:!1,error:g?.message??"Failed to reorder envelopes"}),g}}},updateEnvelope:async a=>{const o=pD(a);t(c=>({envelopes:c.envelopes.map(u=>u.id===o.id?o:u),isLoading:!0}));try{const c=n();await Ta.saveEnvelope(c,o),t({isLoading:!1})}catch(c){console.error("Update Envelope Failed:",c),r(c)?t({isLoading:!1,pendingSync:!0,error:null}):t({error:c.message,isLoading:!1})}},renameEnvelope:async(a,o)=>{t(c=>({envelopes:c.envelopes.map(u=>u.id===a?{...u,name:o}:u),isLoading:!0}));try{t({isLoading:!1})}catch(c){console.error("Rename Envelope Failed:",c),t({error:c.message,isLoading:!1})}}}},Ib=t=>Ea(Pt,"users",t,"distributionTemplates"),si={subscribeToDistributionTemplates:(t,e)=>{const n=Yi(Ib(t),ih("lastUsed","desc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Yi(Ib(t),ih("lastUsed","desc"));return(await Pu(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await Vv(Ib(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=mn(Pt,"users",t,"distributionTemplates",e.id);return await Co(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=mn(Pt,"users",t,"distributionTemplates",e);return await Ph(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=mn(Pt,"users",t,"distributionTemplates",e);await Vu(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},cQ=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>({saveTemplate:async(i,a,o)=>{console.log(" saveTemplate called with:",{name:i,distributions:a,note:o});try{const c=n(),u={id:`temp-${Date.now()}`,userId:c,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const d=si.createDistributionTemplate(u),h=new Promise((m,b)=>setTimeout(()=>b(new Error("Firebase timeout - likely offline")),5e3)),g=await Promise.race([d,h]);console.log(" Firebase template save succeeded (online mode):",g),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",g),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(d){throw console.log(" Firebase template save failed or timed out:",d.message),d}}catch(c){console.error(" Failed to save template to Firebase, saving locally:",c),console.log(" Error details:",{name:c?.name||"Unknown",message:c?.message||"Unknown",code:c?.code||"Unknown",isNetworkError:r(c)});const u=n(),d={id:`local-${Date.now()}`,userId:u,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Saving template locally (offline):",d),t(h=>({distributionTemplates:[...h.distributionTemplates,d],pendingSync:!0})),console.log(" Template saved locally as fallback:",d),console.log(" Store now has templates:",e().distributionTemplates.length)}},updateTemplate:async i=>{try{const a=n();await si.updateDistributionTemplate(a,i.id,{name:i.name,note:i.note,distributions:i.distributions,lastUsed:i.lastUsed}),t(o=>({distributionTemplates:o.distributionTemplates.map(c=>c.id===i.id?i:c)})),console.log(" Template updated in Firebase:",i.id)}catch(a){throw console.error(" Failed to update template in Firebase:",a),a}},deleteTemplate:async i=>{try{const a=n();await si.deleteDistributionTemplate(a,i),t(o=>({distributionTemplates:o.distributionTemplates.filter(c=>c.id!==i)})),console.log(" Template deleted from Firebase:",i)}catch(a){throw console.error(" Failed to delete template from Firebase:",a),a}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const i=e().distributionTemplates,a=e().envelopes,o=new Set(a.map(u=>u.id));let c=0;for(const u of i){const d={...u.distributions},h={};for(const[g,m]of Object.entries(u.distributions))o.has(g)&&(h[g]=m);if(Object.keys(h).length===0){console.log(` Deleting orphaned template: ${u.name}`);const g=n();await si.deleteDistributionTemplate(g,u.id),c++}else if(JSON.stringify(h)!==JSON.stringify(d)){console.log(` Updating template ${u.name} - removed orphaned envelope references`);const g=n();await si.updateDistributionTemplate(g,u.id,{distributions:h}),c++}}c>0?console.log(` Cleaned up ${c} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(i,a)=>{console.log(` Updating template references: ${i}  ${a}`);const o=e().distributionTemplates;let c=0;for(const u of o)if(u.distributions[i]!==void 0){const d={...u.distributions};d[a]=d[i],delete d[i],console.log(` Updating template: ${u.name}`);const h=n();await si.updateDistributionTemplate(h,u.id,{distributions:d}),c++}c>0&&console.log(` Updated ${c} templates with new envelope reference`)},removeEnvelopeFromTemplates:async i=>{console.log(` Removing envelope ${i} from all templates`);const a=e().distributionTemplates;let o=0,c=0;for(const u of a)if(u.distributions[i]!==void 0){const d={...u.distributions};if(delete d[i],Object.keys(d).length===0){console.log(` Deleting template ${u.name} - no envelopes left`);const h=n();await si.deleteDistributionTemplate(h,u.id),c++}else{console.log(` Removing envelope from template: ${u.name}`);const h=n();await si.updateDistributionTemplate(h,u.id,{distributions:d}),o++}}(o>0||c>0)&&console.log(` Updated ${o} templates, deleted ${c} empty templates`)}}),kb=t=>Ea(Pt,"users",t,"appSettings"),hs={subscribeToAppSettings:(t,e)=>{const n=Yi(kb(t),fD(1));return Fl(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Yi(kb(t),fD(1)),n=await Pu(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await Vv(kb(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=mn(Pt,"users",t,"appSettings",e.id);return await Co(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=mn(Pt,"users",t,"appSettings",e);return await Ph(r,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=mn(Pt,"users",t,"appSettings",e);await Vu(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},eP=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async r=>{const i=e();if(!i.appSettings){try{await eP({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const a=e();if(a.appSettings){const o={...a.appSettings,...r};t({appSettings:o});const c=n();await hs.updateAppSettings(c,a.appSettings.id,r),console.log(" App settings updated successfully")}}catch(a){console.error(" Failed to initialize/update settings:",a)}return}try{t(o=>({appSettings:{...o.appSettings,...r}}));const a=n();await hs.updateAppSettings(a,i.appSettings.id,r),console.log(" App settings updated successfully")}catch(a){throw console.error(" Failed to update app settings:",a),t(o=>({appSettings:o.appSettings})),a}},initializeAppSettings:async()=>{try{const i={userId:n(),theme:"system",enableMoveableReorder:!1},a=await hs.createAppSettings(i);t({appSettings:a}),console.log(" App settings initialized successfully")}catch(r){console.error(" Failed to initialize app settings:",r);const i=n();t({appSettings:{id:"local-settings",userId:i,theme:"system",enableMoveableReorder:!1}})}}});class gr{static instance;static getInstance(){return gr.instance||(gr.instance=new gr),gr.instance}async getMonthlyBudget(e,n){try{const r=mn(Pt,"monthlyBudgets",`${e}_${n}`),i=await rQ(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:a.createdAt.toDate().toISOString(),updatedAt:a.updatedAt.toDate().toISOString()}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const n=wt.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await Co(mn(Pt,"monthlyBudgets",r),i),{...e,id:r,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const r=Yi(Ea(Pt,"incomeSources"),yo("userId","==",e),yo("month","==",n));return(await Pu(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(e){try{const n=wt.now(),r=mn(Ea(Pt,"incomeSources")),i={id:r.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await Co(r,i),{...e,frequency:e.frequency||"monthly",id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const r=Yi(Ea(Pt,"envelopeAllocations"),yo("userId","==",e),yo("month","==",n));return(await Pu(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(e){try{const n=wt.now(),r=mn(Ea(Pt,"envelopeAllocations")),i={id:r.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await Co(r,i),{...e,id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,r){try{const i=await this.getIncomeSources(e,n);for(const d of i)await this.createIncomeSource({...d,month:r});const a=await this.getEnvelopeAllocations(e,n);for(const d of a)await this.createEnvelopeAllocation({...d,month:r});const o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:e,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e){try{const n=mn(Pt,"incomeSources",e);await Vu(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(e,n){try{const r=mn(Pt,"incomeSources",e),i={...n,updatedAt:wt.now()};await Co(r,i,{merge:!0})}catch(r){throw console.error("Error updating income source:",r),r}}async deleteEnvelopeAllocation(e){try{const n=mn(Pt,"envelopeAllocations",e);await Vu(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(e,n){try{const r=mn(Pt,"envelopeAllocations",e),i={...n,updatedAt:wt.now()};await Co(r,i,{merge:!0})}catch(r){throw console.error("Error updating envelope allocation:",r),r}}async clearMonthData(e,n){try{const[r,i]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),a=r.map(c=>this.deleteIncomeSource(c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,n){try{const r=await this.getIncomeSources(e,n),i=await this.getEnvelopeAllocations(e,n),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,n,r){const i=mn(Pt,"monthlyBudgets",`${e}_${n}`);return Fl(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(e,n,r){const i=Yi(Ea(Pt,"incomeSources"),yo("userId","==",e),yo("month","==",n));return Fl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const d=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return d-h});r(o)})}subscribeToEnvelopeAllocations(e,n,r){const i=Yi(Ea(Pt,"envelopeAllocations"),yo("userId","==",e),yo("month","==",n));return Fl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const uQ=t=>t?{id:t.id,userId:t.userId,month:t.month,totalIncome:parseFloat(t.totalIncome),availableToBudget:parseFloat(t.availableToBudget),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}:null,fQ=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),dQ=t=>({id:t.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:parseFloat(t.budgetedAmount),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),Nb=(t,e,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const r=gr.getInstance(),i=r.subscribeToMonthlyBudget(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Monthly budget updated",c?"found":"null");const d=uQ(c);t.setState({monthlyBudget:d})}}),a=r.subscribeToIncomeSources(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){const d=c.map(fQ),h=new Set,g=d.filter(m=>h.has(m.id)?!1:(h.add(m.id),!0));t.setState({incomeSources:g})}}),o=r.subscribeToEnvelopeAllocations(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Envelope allocations updated",c.length);const d=c.map(dQ);t.setState({envelopeAllocations:d})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:i,incomeSources:a,envelopeAllocations:o},console.log(" Monthly budget real-time subscriptions active for month:",n)},gD=()=>{if(window.__monthlyBudgetUnsubscribers){const t=window.__monthlyBudgetUnsubscribers;t.monthlyBudget&&t.monthlyBudget(),t.incomeSources&&t.incomeSources(),t.envelopeAllocations&&t.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},hQ=t=>{const{useMonthlyBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});let o=null;e.subscribe(u=>{if(o!==null&&u.currentMonth!==o){console.log(" Month changed from",o,"to",u.currentMonth),gD();const d=n.getState();d.isAuthenticated&&d.currentUser&&Nb(e,r(),u.currentMonth)}o=u.currentMonth});const c=n.getState();if(c.isAuthenticated&&c.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const u=e.getState().currentMonth;Nb(e,r(),u)}n.subscribe(u=>{if(u.isAuthenticated&&u.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const d=e.getState().currentMonth;Nb(e,r(),d)}else!u.isAuthenticated&&!u.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),gD(),e.getState().handleUserLogout())})},pQ=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},ds=()=>{const t=Mi.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},gQ=ds,mQ=async(t,e,n)=>{const{transactions:r,addTransaction:i,deleteTransaction:a}=qn.getState(),o="Monthly Budget Allocation",[c,u]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:t,budgetedAmount:e,month:n,totalTransactions:r.length});const d=r.filter(g=>{if(g.envelopeId!==t||g.description!==o)return!1;try{let m;if(typeof g.date=="string")m=new Date(g.date);else if(g.date?.toDate&&typeof g.date.toDate=="function")m=g.date.toDate();else return!1;return m.getFullYear()===c&&m.getMonth()+1===u}catch{return!1}});console.log(" Found existing transactions:",d.length);for(const g of d)console.log(" Deleting old allocation transaction:",g.id,"amount:",g.amount),await a(g.id);const h=new Fr(e.toString()||"0");if(h.gt(0)){console.log(" Creating new allocation transaction with amount",h.toNumber());const g=new Date(c,u-1,2).toISOString();await i({description:o,amount:h.toNumber(),envelopeId:t,date:g,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},ta=lv()(O_((t,e)=>({currentMonth:pQ(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{t({currentMonth:n,isLoading:!0}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{t({isLoading:!0,error:null});const n=ds(),r=e().currentMonth,i=gr.getInstance(),[a,o,c]=await Promise.all([i.getMonthlyBudget(n,r),i.getIncomeSources(n,r),i.getEnvelopeAllocations(n,r)]);t({monthlyBudget:a,incomeSources:o,envelopeAllocations:c,isLoading:!1}),await e().processMonthlyPiggybankContributions(r)}catch(n){console.error("Error fetching monthly data:",n),t({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const r=ds(),i=e().currentMonth,a=gr.getInstance();await a.createIncomeSource({...n,userId:r,month:i});const o=await a.getIncomeSources(r,i);t({incomeSources:o})}catch(r){throw console.error("Error creating income source:",r),r}},updateIncomeSource:async(n,r)=>{try{const i={updatedAt:wt.now()};r.name!==void 0&&(i.name=r.name),r.amount!==void 0&&(i.amount=r.amount.toString()),r.frequency!==void 0&&(i.frequency=r.frequency),r.category!==void 0&&(i.category=r.category);const a=mn(Pt,"incomeSources",n);await Ph(a,i);const o=gr.getInstance(),c=ds(),u=e().currentMonth,d=await o.getIncomeSources(c,u);t({incomeSources:d})}catch(i){throw console.error("Error updating income source:",i),i}},deleteIncomeSource:async n=>{t(i=>({incomeSources:i.incomeSources.filter(a=>a.id!==n)})),gr.getInstance().deleteIncomeSource(n).catch(i=>{console.error("Error deleting income source from Firebase:",i)})},restoreIncomeSource:async(n,r)=>{try{t(i=>{const a=[...i.incomeSources];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{incomeSources:a}}),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring income source:",i),i}},createEnvelopeAllocation:async n=>{try{const r=ds(),i=e().currentMonth,a=gr.getInstance();await a.createEnvelopeAllocation({...n,userId:r,month:i});const o=await a.getEnvelopeAllocations(r,i);t({envelopeAllocations:o})}catch(r){throw console.error("Error creating envelope allocation:",r),r}},updateEnvelopeAllocation:async(n,r)=>{try{const i=ds(),a=e().currentMonth,o=gr.getInstance(),c={};r.envelopeId!==void 0&&(c.envelopeId=r.envelopeId),r.budgetedAmount!==void 0&&(c.budgetedAmount=r.budgetedAmount.toString()),await o.updateEnvelopeAllocation(n,c);const u=await o.getEnvelopeAllocations(i,a);t({envelopeAllocations:u})}catch(i){throw console.error("Error updating envelope allocation:",i),i}},deleteEnvelopeAllocation:async n=>{t(i=>({envelopeAllocations:i.envelopeAllocations.filter(a=>a.id!==n)})),gr.getInstance().deleteEnvelopeAllocation(n).catch(i=>{console.error("Error deleting envelope allocation from Firebase:",i)})},restoreEnvelopeAllocation:async(n,r)=>{try{t(i=>{const a=[...i.envelopeAllocations];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{envelopeAllocations:a}}),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring envelope allocation:",i),i}},setEnvelopeAllocation:async(n,r)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:r});const i=e().envelopeAllocations.find(o=>o.envelopeId===n);console.log(" Existing allocation:",i),i?(console.log(" Updating existing allocation..."),await e().updateEnvelopeAllocation(i.id,{budgetedAmount:r}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const a=e().currentMonth;await mQ(n,r,a),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await e().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(i){throw console.error(" Error setting envelope allocation:",i),console.error("Error details:",i instanceof Error?i.message:i),i}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=ds(),r=e().currentMonth,[i,a]=r.split("-").map(Number);let o=i,c=a-1;c<1&&(o=i-1,c=12);const u=`${o}-${c.toString().padStart(2,"0")}`,d=gr.getInstance(),[h,g]=await Promise.all([d.getIncomeSources(n,u),d.getEnvelopeAllocations(n,u)]);for(const m of h)await e().createIncomeSource({name:m.name,amount:m.amount});for(const m of g)await e().setEnvelopeAllocation(m.envelopeId,m.budgetedAmount);await e().processMonthlyPiggybankContributions(r),await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},processMonthlyPiggybankContributions:async n=>{try{console.log(" Processing piggybank contributions for month:",n);const{envelopes:r,transactions:i,addTransaction:a}=qn.getState(),o=new Date,c=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(n>c){console.log(`Skipping piggybank contributions for ${n} - future month beyond ${c}`);return}const u=r.filter(g=>g.isPiggybank&&g.isActive);if(console.log(`Found ${u.length} active piggybanks`),u.length===0){console.log("No piggybanks to process");return}const[d,h]=n.split("-").map(Number);for(const g of u){const m=g.piggybankConfig?.monthlyContribution||0;if(g.piggybankConfig?.paused||!1){console.log(`Skipping ${g.name} - contributions paused`);continue}if(m<=0){console.log(`Skipping ${g.name} - no contribution set`);continue}if(g.createdAt){const E=new Date(g.createdAt),A=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`;if(n<A){console.log(`Skipping ${g.name} - month ${n} is before creation month ${A}`);continue}}if(i.find(E=>E.envelopeId===g.id&&E.isAutomatic===!0&&E.month===n&&E.type==="Income")){console.log(`Auto-contribution already exists for ${g.name} in ${n}`);continue}console.log(`Creating auto-contribution for ${g.name}: $${m}`);const w=new Date(d,h-1,1,12,0,0);await a({amount:m,description:`Monthly contribution to ${g.name}`,date:w.toISOString(),envelopeId:g.id,type:"Income",reconciled:!1,isAutomatic:!0}),console.log(` Created auto-contribution for ${g.name}`)}await e().refreshAvailableToBudget()}catch(r){throw console.error("Error processing piggybank contributions:",r),r}},calculateAvailableToBudget:()=>{const n=e(),r=n.incomeSources.reduce((a,o)=>a+o.amount,0),i=n.envelopeAllocations.reduce((a,o)=>a+o.budgetedAmount,0);return r-i},refreshAvailableToBudget:async()=>{try{const n=e(),r=ds(),i=n.currentMonth,a=n.incomeSources.reduce((h,g)=>h+g.amount,0),o=n.envelopeAllocations.reduce((h,g)=>h+g.budgetedAmount,0),c=a-o,u=gr.getInstance(),d=n.monthlyBudget;if(d){const h={...d,availableToBudget:c,totalIncome:a};await u.createOrUpdateMonthlyBudget(h),t({monthlyBudget:h})}else{const h=await u.createOrUpdateMonthlyBudget({userId:r,month:i,totalIncome:a,availableToBudget:c});t({monthlyBudget:h})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,r)=>{t({incomeSources:n,envelopeAllocations:r,isLoading:!1})},clearMonthData:async()=>{try{const n=ds(),r=e().currentMonth,i=gr.getInstance(),{transactions:a,deleteTransaction:o}=qn.getState(),c="Monthly Budget Allocation",[u,d]=r.split("-").map(Number),h=a.filter(g=>{if(g.description!==c)return!1;try{const m=new Date(g.date);return m.getFullYear()===u&&m.getMonth()+1===d}catch{return!1}});for(const g of h)await o(g.id);await i.clearMonthData(n,r),t({incomeSources:[],envelopeAllocations:[]}),await e().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{t({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",version:1,partialize:t=>({})}));hQ({useMonthlyBudgetStore:ta,useAuthStore:Mi,getCurrentUserId:gQ});const vQ=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>({addTransaction:async i=>{const a=`temp-${Date.now()}-${Math.random()}`,o=n(),c=new Date(i.date),u=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;console.log(" Month calculation in addTransaction:",{originalDate:i.date,dateObj:c,calculatedMonth:u,currentMonth:ta.getState().currentMonth});const d={...i,id:a,userId:o,month:u};if(t(h=>({transactions:[...h.transactions,d],isLoading:!0})),i.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${i.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const h=sQ(d,o),g=await Ra.addTransaction(h);console.log(` Replacing temp transaction ${a} with Firebase transaction:`,g);const m=NS(g);t(b=>({transactions:b.transactions.map(S=>S.id===a?m:S),isLoading:!1,pendingSync:!1}))}catch(h){console.error("Add Transaction Failed:",h),r(h)?t({isLoading:!1,pendingSync:!0,error:null}):t(g=>({transactions:g.transactions.filter(m=>m.id!==a),error:h.message,isLoading:!1}))}},deleteTransaction:async i=>{const a=e().transactions.find(c=>c.id===i);if(!a)return;const o=[i];if(a.transferId){const c=e().transactions.find(u=>u.transferId===a.transferId&&u.id!==i);c&&c.id&&o.push(c.id)}t(c=>({transactions:c.transactions.filter(u=>u.id&&!o.includes(u.id)),isLoading:!0}));try{const c=n(),u=o.filter(d=>!d.startsWith("temp-"));for(const d of u)console.log(` About to delete transaction ID: ${d}`),await Ra.deleteTransaction(c,d),console.log(` Deleted transaction ID: ${d}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(c){if(console.error("Delete Transaction Failed:",c),r(c))t({isLoading:!1,pendingSync:!0,error:null});else{const u=o.map(d=>e().transactions.find(h=>h.id===d)||a).filter(Boolean);t(d=>({transactions:[...d.transactions,...u],error:c.message,isLoading:!1}))}}},updateTransaction:async i=>{console.log(" updateTransaction called:",i),t(a=>({transactions:a.transactions.map(o=>o.id===i.id?i:o),isLoading:!0}));try{const a=n(),o=Ra.updateTransaction(a,i.id,oQ(i)),c=new Promise((u,d)=>setTimeout(()=>d(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([o,c]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(a){console.error("Update Transaction Failed:",a),console.log(" Error details:",{name:a?.name||"Unknown",message:a?.message||"Unknown",code:a?.code||"Unknown",isNetworkError:r(a)}),r(a)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:a.message,isLoading:!1})}},restoreTransaction:async i=>{t(a=>({transactions:[...a.transactions,i],isLoading:!0}));try{t({isLoading:!1})}catch(a){console.error("Restore Transaction Failed:",a),t({error:a.message,isLoading:!1})}}}),yQ=({set:t,get:e,getCurrentUserId:n,isNetworkError:r,loadFallbackData:i,checkOnlineStatus:a,clearUserData:o})=>{const c=async()=>{const w=e(),E=n();if(w.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",E),t({isLoading:!0,error:null});try{let A,D,I,V;[A,D,I,V]=await Promise.all([Ta.getAllEnvelopes(E).catch(T=>(console.error(" Failed to fetch envelopes:",T),[])),Ra.getAllTransactions(E).catch(T=>(console.error(" Failed to fetch transactions:",T),[])),si.getAllDistributionTemplates(E).catch(T=>(console.error(" Failed to fetch templates:",T),[])),hs.getAppSettings(E).catch(T=>(console.error(" Failed to fetch settings:",T),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:A?.length||0,transactions:D?.length||0,templates:I?.length||0,settings:V?"found":"null"}),e().markOnlineFromFirebaseSuccess();const z=(A?.length||0)>0||(D?.length||0)>0||(I?.length||0)>0;let O=null;z||(console.log(" No data from Firebase, loading fallback data..."),O=await i(),O&&(console.log(" Using fallback data for initialization"),A=O.envelopes||[],D=O.transactions||[],I=O.distributionTemplates||[],V=O.appSettings||null)),t(T=>{const C=Z=>Z.map(B=>({...B,date:B.date&&typeof B.date=="object"&&B.date.toDate?B.date.toDate().toISOString():B.date,type:B.type==="income"?"Income":B.type==="expense"?"Expense":B.type==="transfer"?"Transfer":B.type,amount:typeof B.amount=="string"?parseFloat(B.amount):B.amount})),k=Z=>({id:Z.id,name:Z.name,currentBalance:Z.currentBalance||0,lastUpdated:Z.lastUpdated,isActive:Z.isActive??!0,orderIndex:Z.orderIndex??0,createdAt:Z.createdAt,isPiggybank:Z.isPiggybank,piggybankConfig:Z.piggybankConfig}),j=A.filter(Z=>!("orderIndex"in Z));j.length>0&&(console.log(` Migrating ${j.length} envelopes to add orderIndex...`),j.forEach((Z,B)=>{const K=B,ie=n();Ta.saveEnvelope(ie,{...Z,orderIndex:K}).then(()=>console.log(` Migrated envelope ${Z.name} with orderIndex ${K}`)).catch(re=>console.warn(`Failed to migrate envelope ${Z.id}:`,re))}));const L=A.map(k),U=new Set([...T.envelopes.map(Z=>Z.id),...A.map(Z=>Z.id)]),P=T.envelopes.filter(Z=>Z.id&&!A.some(B=>B.id===Z.id)&&!Z.id.startsWith("temp-")),X=T.transactions.filter(Z=>Z.id&&!D.some(B=>B.id===Z.id)&&(!Z.id.startsWith("temp-")||U.has(Z.envelopeId)));let $,H=[];navigator.onLine?($=I,console.log(` Online mode: Using Firebase templates only (${$.length} templates)`)):(H=T.distributionTemplates.filter(Z=>Z.id&&!I.some(B=>B.id===Z.id)),$=I.concat(H),console.log(` Offline mode: Merged ${I.length} Firebase + ${H.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",T.envelopes.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Firebase envelopes:",A.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Store transactions:",T.transactions.map(Z=>({id:Z.id,envelopeId:Z.envelopeId,description:Z.description}))),console.log("  Firebase transactions:",D.map(Z=>({id:Z.id,envelopeId:Z.envelopeId,description:Z.description}))),console.log("  Store templates:",T.distributionTemplates.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Firebase templates:",I.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Local-only envelopes:",P.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Local-only transactions:",X.map(Z=>({id:Z.id,envelopeId:Z.envelopeId,description:Z.description}))),console.log("  Local-only templates:",H.map(Z=>({id:Z.id,name:Z.name}))),console.log("  Total merged templates:",$.length,$.map(Z=>({id:Z.id,name:Z.name})));const Y=L.concat(P),te=C(D).concat(X);let le=V;if(V&&"isDarkMode"in V&&!("theme"in V)){const Z=V;if(le={...Z,theme:Z.isDarkMode?"dark":"light"},delete le.isDarkMode,le&&le.id){const B=n();hs.updateAppSettings(B,le.id,{theme:le.theme}).catch(K=>console.warn("Failed to migrate app settings:",K))}}return{envelopes:Y,transactions:te,distributionTemplates:$,appSettings:le,isLoading:!1,pendingSync:!1}})}catch(A){console.error("Sync Failed:",A),r(A)?t({isLoading:!1,pendingSync:!0}):t({error:A.message,isLoading:!1})}},u=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(E){console.error("Firebase reset during sync failed:",E)}return}t({pendingSync:!0});try{await e().fetchData()}catch(E){console.error("Manual sync failed:",E)}},d=async()=>{const w=await a();t({isOnline:w})},h=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},g=()=>{o()},m=async w=>{try{if(!w.envelopes||!w.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const E=n();console.log(` Importing data for user: ${E}`),console.log(" Clearing existing Firebase data before import..."),await b(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const A=w.envelopes.map(T=>({id:T.id||`imported-${Date.now()}-${Math.random()}`,name:T.name,currentBalance:T.currentBalance||T.budget||0,lastUpdated:new Date().toISOString(),isActive:T.isActive??!0,orderIndex:T.orderIndex??0,userId:E})),D=w.transactions.map(T=>({...T,id:T.id||`imported-${Date.now()}-${Math.random()}`,userId:E,date:T.date,amount:typeof T.amount=="number"?T.amount:parseFloat(T.amount)||0,type:T.type,reconciled:T.reconciled??!1})),I=(w.distributionTemplates||[]).map(T=>({...T,id:T.id||`imported-${Date.now()}-${Math.random()}`,userId:E})),V=w.appSettings?{...w.appSettings,id:w.appSettings.id||`settings-${E}`,userId:E}:null;console.log(` Importing: ${A.length} envelopes, ${D.length} transactions, ${I.length} templates`),t({envelopes:A,transactions:D,distributionTemplates:I,appSettings:V,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const T of A)try{await Ta.saveEnvelope(E,T),console.log(` Synced envelope: ${T.name}`)}catch(C){console.error(` Failed to sync envelope ${T.name}:`,C)}for(const T of D)try{const C={...T,amount:T.amount.toString(),type:T.type.toLowerCase(),date:wt.fromDate(new Date(T.date))};await Ra.addTransaction(C),console.log(` Synced transaction: ${T.description}`)}catch(C){console.error(` Failed to sync transaction ${T.description}:`,C)}for(const T of I)try{await si.createDistributionTemplate(T),console.log(` Synced template: ${T.name}`)}catch(C){console.error(` Failed to sync template ${T.name}:`,C)}if(V)try{await hs.createAppSettings(V),console.log(" Synced app settings")}catch(T){console.error(" Failed to sync app settings:",T)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(T){console.error(" Error syncing to Firebase:",T),t({pendingSync:!0})}const z=I.length,O=V?"Settings imported.":"";return{success:!0,message:`Imported and synced ${A.length} envelopes, ${D.length} transactions${z>0?`, ${z} templates`:""} to Firebase.${O?` ${O}`:""}`}}catch(E){return console.error("Import failed:",E),{success:!1,message:"Failed to import data. Check file format."}}},b=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const w=n();console.log(" Querying Firebase for all data to delete...");const[E,A,D,I]=await Promise.all([Ta.getAllEnvelopes(w).catch(T=>(console.error(" Failed to fetch envelopes for reset:",T),[])),Ra.getAllTransactions(w).catch(T=>(console.error(" Failed to fetch transactions for reset:",T),[])),si.getAllDistributionTemplates(w).catch(T=>(console.error(" Failed to fetch templates for reset:",T),[])),hs.getAppSettings(w).catch(T=>(console.error(" Failed to fetch settings for reset:",T),null))]);console.log(` Found in Firebase: ${E.length} envelopes, ${A.length} transactions, ${D.length} templates`);let V=0;for(const T of E)if(T.id)try{await Ta.deleteEnvelope(w,T.id),V++,console.log(` Deleted envelope: ${T.name||T.id}`)}catch(C){console.error(` Failed to delete envelope ${T.id}:`,C)}let z=0;for(const T of A)if(T.id)try{await Ra.deleteTransaction(w,T.id),z++,console.log(` Deleted transaction: ${T.id}`)}catch(C){console.error(` Failed to delete transaction ${T.id}:`,C)}let O=0;for(const T of D)if(T.id)try{await si.deleteDistributionTemplate(w,T.id),O++,console.log(` Deleted template: ${T.name||T.id}`)}catch(C){console.error(` Failed to delete template ${T.id}:`,C)}if(I?.id)try{await hs.deleteAppSettings(w,I.id),console.log(" Deleted app settings")}catch(T){console.error(" Failed to delete app settings:",T)}console.log(` Firebase reset complete: Deleted ${V} envelopes, ${z} transactions, ${O} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(w){throw console.error(" Error during Firebase reset:",w),t({isLoading:!1,pendingSync:!0}),w}};return{fetchData:c,syncData:u,updateOnlineStatus:d,markOnlineFromFirebaseSuccess:h,handleUserLogout:g,importData:m,performFirebaseReset:b,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(E){console.error(" Firebase reset failed, will retry on next sync:",E),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},bQ=t=>NS(t),xQ=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig}),_Q=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),mD=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=Ta.subscribeToEnvelopes(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Envelopes updated",o.length);const u=o.map(xQ);t.setState({envelopes:u})}}),r=Ra.subscribeToTransactions(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Transactions updated",o.length);const u=o.map(bQ);t.setState({transactions:u})}}),i=si.subscribeToDistributionTemplates(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Templates updated from Firebase",o.length),console.log(" Firebase templates:",o.map(d=>({id:d.id,name:d.name})));const u=o.map(_Q);console.log(" Setting store templates to:",u.map(d=>({id:d.id,name:d.name}))),t.setState({distributionTemplates:u})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),a=hs.subscribeToAppSettings(e,o=>{const c=t.getState();c.isOnline&&!c.pendingSync&&!c.resetPending&&(console.log(" Real-time sync: Settings updated",o?"found":"null"),t.setState({appSettings:o}))});window.__firebaseUnsubscribers={envelopes:n,transactions:r,templates:i,settings:a},console.log(" Real-time subscriptions active - cross-device sync enabled")},SQ=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const c=e.getState();c.isOnline&&(c.pendingSync||c.resetPending)&&(console.log(" Auto-syncing pending operations..."),c.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const c=e.getState();if(!c.isOnline&&!c.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(c.pendingSync||c.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(u){console.log(" Periodic retry failed:",u),e.setState({testingConnectivity:!1})}}else c.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(c=>{!c.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=n.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),mD(e,r())),n.subscribe(c=>{if(c.isAuthenticated&&c.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),mD(e,r());else if(!c.isAuthenticated&&!c.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.envelopes&&u.envelopes(),u.transactions&&u.transactions(),u.templates&&u.templates(),u.settings&&u.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},wQ=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},Zc=()=>{const{currentUser:t}=Mi.getState();if(!t)throw new Error("No authenticated user found");return t.id},EQ=()=>{console.log(" Clearing user data on logout"),qn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},vD=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,r={})=>{try{const i=new AbortController,a=setTimeout(()=>i.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:i.signal,...r}),clearTimeout(a),!0}catch(i){return console.log(` Connectivity test failed for ${n}:`,i instanceof Error?i.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),r=n.filter(a=>a.status==="fulfilled"&&a.value===!0).length,i=n.length;return r>0?(console.log(` Connectivity confirmed (${r}/${i} tests passed)`),!0):(console.log(` All connectivity tests failed (${i} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},Ig=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",r=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||r==="undefined"&&n==="undefined")},qn=lv()(O_((t,e)=>{const n=lQ({set:t,get:e,getCurrentUserId:Zc,isNetworkError:Ig}),r=cQ({set:t,get:e,getCurrentUserId:Zc,isNetworkError:Ig}),i=eP({set:t,get:e,getCurrentUserId:Zc}),a=vQ({set:t,get:e,getCurrentUserId:Zc,isNetworkError:Ig}),o=yQ({set:t,get:e,getCurrentUserId:Zc,isNetworkError:Ig,loadFallbackData:wQ,checkOnlineStatus:vD,clearUserData:EQ});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addEnvelope:async c=>(await n.createEnvelope(c)).id,updateEnvelope:n.updateEnvelope,reorderEnvelopes:n.reorderEnvelopes,deleteEnvelope:n.deleteEnvelope,renameEnvelope:n.renameEnvelope,transferFunds:n.transferFunds,addTransaction:a.addTransaction,updateTransaction:a.updateTransaction,deleteTransaction:a.deleteTransaction,restoreTransaction:a.restoreTransaction,addDistributionTemplate:r.saveTemplate,updateDistributionTemplate:r.updateTemplate,deleteDistributionTemplate:r.deleteTemplate,removeEnvelopeFromTemplates:r.removeEnvelopeFromTemplates,cleanupOrphanedTemplates:r.cleanupOrphanedTemplates,updateAppSettings:i.updateAppSettings,initializeAppSettings:i.initializeAppSettings,fetchData:o.fetchData,syncData:o.syncData,updateOnlineStatus:o.updateOnlineStatus,markOnlineFromFirebaseSuccess:o.markOnlineFromFirebaseSuccess,handleUserLogout:o.handleUserLogout,importData:o.importData,performFirebaseReset:o.performFirebaseReset,resetData:o.resetData,getEnvelopeBalance:c=>{const u=e();if(!u.envelopes.find(E=>E.id===c))return console.log(` getEnvelopeBalance: Envelope ${c} not found`),new Fr(0);const h=u.transactions.filter(E=>E.envelopeId===c),g=h.filter(E=>E.type==="Expense"),m=h.filter(E=>E.type==="Income"),b=g.reduce((E,A)=>E.plus(new Fr(A.amount||0)),new Fr(0));return m.reduce((E,A)=>E.plus(new Fr(A.amount||0)),new Fr(0)).minus(b)},getTransactionsForMonth:c=>e().transactions.filter(d=>d.month===c),resetAllData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},testConnectivity:async()=>{console.log(" Testing connectivity"),await vD()}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));SQ({useEnvelopeStore:qn,useAuthStore:Mi,getCurrentUserId:Zc});const TQ=({currentMonth:t,onMonthChange:e})=>{const[n,r]=t.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=n,h=r-1;h<1&&(d=n-1,h=12);const g=`${d}-${h.toString().padStart(2,"0")}`;e(g)},c=()=>{let d=n,h=r+1;h>12&&(d=n+1,h=1);const g=`${d}-${h.toString().padStart(2,"0")}`;e(g)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return x.jsx("div",{className:"py-1.5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:x.jsx(OV,{size:20})}),x.jsx("div",{className:"flex-1 text-center",children:x.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",n]})}),x.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:x.jsx($c,{size:20})})]})})},AQ=({amount:t,totalIncome:e,totalAllocated:n,isLoading:r=!1,variant:i="default"})=>{const a=e>0?n/e*100:0,o=t>0,c=Math.abs(t)<.01,u=t<0,d=c?100:Math.min(a,100),h=u?"bg-red-500":"bg-green-500",g=c,m=u,b=o,w=g?{icon:Jg,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:m?{icon:Nj,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:Rj,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?x.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),x.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),x.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):x.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${w.bgColor} ${w.borderColor}`,children:[x.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex-shrink-0 text-center",children:[x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),x.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]})]}),i==="header"&&x.jsx("div",{className:"flex-1 flex justify-center items-center",children:c?x.jsx("img",{src:"/personal-budget-pwa/images/budget-balanced.png",alt:"Budget Balanced",className:"w-6 h-6"}):u?x.jsx("div",{className:"text-center",children:x.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):x.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:x.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${h}`,style:{width:`${d}%`}})})}),x.jsx("div",{className:"flex-shrink-0 text-center",children:o?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),x.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",t.toFixed(2)]})]}):c?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),x.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),x.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(t).toFixed(2)]})]})})]}),i!=="header"&&!g&&e>0&&x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx("span",{children:"Allocated"}),x.jsxs("span",{children:[a.toFixed(0),"% of income"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:x.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${m?"bg-red-500":b?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})}),x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[x.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),x.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),i!=="header"&&x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:x.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},CQ=()=>{const[t,e]=q.useState(!1),n=q.useRef(null),{currentUser:r,logout:i}=Mi(),{handleUserLogout:a}=qn(),o=qa();q.useEffect(()=>{const d=h=>{n.current&&!n.current.contains(h.target)&&e(!1)};if(t)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[t]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return x.jsxs("div",{className:"relative",ref:n,children:[x.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[x.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),x.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),x.jsx(jD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[x.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),x.jsxs("div",{className:"py-1",children:[x.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[x.jsx(zD,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),x.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[x.jsx(yj,{size:18}),"Log Out"]})]})]})]})},MS=({children:t,onDelete:e,threshold:n=-100})=>{const r=IB(),[i,a]=q.useState(!1),o=q.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),g<n||g<-50&&m<-500){const b=e();b===!1?r.start({x:0}):b instanceof Promise&&b.then(S=>{S===!1&&r.start({x:0})})}else r.start({x:0})};return x.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[x.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:x.jsx(Mg,{className:"text-white w-6 h-6"})}),x.jsx(Uu.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:t})]})},tP=({message:t="Loading your budget...",showTimeout:e=!1})=>x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[x.jsx("div",{className:"mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx(jl,{size:48,className:"text-blue-500 animate-spin"}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx(px,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),x.jsxs("div",{className:"text-center space-y-3",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),x.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),x.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),x.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),x.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&x.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:x.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),x.jsx("div",{className:"mt-8 w-full max-w-md",children:x.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),ef=lv((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),RQ=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{createIncomeSource:i,updateIncomeSource:a}=ta(),{showToast:o}=ef(),[c,u]=q.useState(""),[d,h]=q.useState(""),[g,m]=q.useState(!1);q.useEffect(()=>{if(!t)return;const S=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(S)},[t,n,r]);const b=async S=>{if(S.preventDefault(),!c.trim()||!d||parseFloat(d)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i({name:c.trim(),amount:parseFloat(d)}),o(`Added "${c.trim()}" as income source`,"success");else if(n==="edit"){if(!r){o("Error: No income source to edit","error");return}await a(r.id,{name:c.trim(),amount:parseFloat(d)}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){console.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return t?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),x.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),x.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),x.jsx("input",{type:"text",value:c,onChange:S=>u(S.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),x.jsx("input",{type:"number",value:d,onChange:S=>h(S.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:g||!c.trim()||!d||parseFloat(d)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},DQ=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[d,h]=q.useState(""),[g,m]=q.useState("confirm"),b=E=>{const[A,D]=E.split("-");return new Date(parseInt(A),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},S=()=>{g==="confirm"?m("type"):g==="type"&&d==="START FRESH"&&n()},w=()=>{m("confirm"),h(""),e()};return t?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[x.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),x.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),x.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-start",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"ml-3",children:[x.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),x.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:x.jsxs("ul",{className:"space-y-1",children:[x.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),x.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),x.jsx("div",{className:"ml-3",children:x.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[x.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"text-center",children:[x.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",x.jsx("strong",{children:"START FRESH"})," to confirm:"]}),x.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),x.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),x.jsx("button",{type:"button",onClick:S,disabled:u||g==="type"&&d!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":g==="confirm"?"Continue":"Start Fresh"})]})]})}):null},IQ=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(XV,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),x.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(t)," to get started with ",i(t),"?"]}),x.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),x.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:x.jsx(lh,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"mt-4 flex space-x-3",children:[x.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),x.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},kQ=({piggybank:t,balance:e,onNavigate:n})=>{const r=qn(X=>X.updateEnvelope),i=qn(X=>X.transactions),a=qn(X=>X.updateTransaction),o=ta(X=>X.currentMonth),c=ta(X=>X.processMonthlyPiggybankContributions),u=ef(X=>X.showToast),d=t.piggybankConfig?.targetAmount,h=t.piggybankConfig?.monthlyContribution||0,g=t.piggybankConfig?.color||"#3B82F6",m=t.piggybankConfig?.paused||!1,b=e.toNumber(),S=(X,$=1)=>{const H=X.replace("#",""),Y=parseInt(H,16),te=Y>>16&255,le=Y>>8&255,Z=Y&255;return`rgba(${te}, ${le}, ${Z}, ${$})`},w=`linear-gradient(135deg, ${S(g,.14)} 0%, ${S(g,.05)} 100%)`,E=S(g,.4),[A,D]=q.useState(!1),[I,V]=q.useState(h?h.toFixed(2):"0.00"),[z,O]=q.useState(!1),T=q.useRef(null),C=d&&d>0?Math.min(b/d*100,100):0,k=d&&b>=d;q.useEffect(()=>{A||V(h?h.toFixed(2):"0.00")},[h,A]);const j=X=>{X.stopPropagation(),!z&&(V(h?h.toFixed(2):"0.00"),D(!0),requestAnimationFrame(()=>{T.current?.focus(),T.current?.select()}))},L=()=>{D(!1),V(h?h.toFixed(2):"0.00")},U=async()=>{if(!A||z)return;const X=parseFloat(I);if(Number.isNaN(X)||X<0){u("Enter a valid contribution amount","error");return}if(X===h){D(!1);return}O(!0);try{const $={...t,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:X,targetAmount:t.piggybankConfig?.targetAmount,color:t.piggybankConfig?.color,icon:t.piggybankConfig?.icon,paused:t.piggybankConfig?.paused}};await r($);const H=i.find(Y=>Y.envelopeId===t.id&&Y.isAutomatic===!0&&Y.month===o&&Y.type==="Income");H&&H.id?H.amount!==X&&await a({...H,amount:X}):X>0&&!m&&await c(o),u("Monthly contribution updated","success"),V(X.toFixed(2)),D(!1)}catch($){console.error("Failed to update piggybank contribution",$),u("Failed to update contribution","error")}finally{O(!1)}},P=X=>{X.key==="Enter"?(X.preventDefault(),U()):X.key==="Escape"&&(X.preventDefault(),L())};return x.jsxs("div",{onClick:()=>n(t.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:w,borderColor:E},children:[x.jsxs("div",{className:"flex items-start justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${g}20`},children:x.jsx(Md,{size:20,style:{color:g}})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),k&&x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",b.toFixed(2)]}),d&&x.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",d.toFixed(2)]})]})]}),d&&d>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C}%`,backgroundColor:g}})}),x.jsxs("div",{className:"flex justify-between items-center mt-1",children:[x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[C.toFixed(0),"% complete"]}),x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(d-b).toFixed(2)," to go"]}),x.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:S(g,.15),color:g},children:"Piggybank"})]})]}),x.jsx("div",{className:"mt-2",children:m?x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx(_j,{size:14,className:"text-orange-500"}),x.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx(Oj,{size:14,style:{color:g}}),A?x.jsxs("form",{onSubmit:X=>{X.preventDefault(),U()},className:"flex items-center gap-2",children:[x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{ref:T,type:"number",min:"0",step:"0.01",value:I,onChange:X=>V(X.target.value),onBlur:U,onKeyDown:P,disabled:z,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),z&&x.jsx(fj,{size:16,className:"animate-spin text-gray-400"})]}):x.jsxs("button",{type:"button",onClick:j,className:"font-medium text-gray-900 dark:text-white hover:underline focus:outline-none",children:["$",h.toFixed(2),"/month"]})]})})]})},rd=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},NQ=12,MQ=(t,e,n)=>Math.min(Math.max(t,e),n),OQ=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:g,setMoveableRef:m,isReorderingActive:b,activelyDraggingId:S,onItemDragStart:w,onMoveUp:E,onMoveDown:A,isFirst:D,isLast:I,isReorderUnlocked:V})=>{const z=!!t.isPiggybank,O=t.piggybankConfig?.color||"#3B82F6",T=z?`linear-gradient(135deg, ${rd(O,.18)} 0%, ${rd(O,.08)} 100%)`:void 0,C=z?rd(O,.5):void 0,k=q.useRef(null),[j,L]=q.useState(!1),U=h.filter(B=>B.envelopeId===t.id&&B.month===g),P=U.filter(B=>B.type==="Expense"),X=U.filter(B=>B.type==="Income"),$=P.reduce((B,K)=>B+(K.amount||0),0),H=X.reduce((B,K)=>B+(K.amount||0),0),Y=Math.max(0,$/H*100),te=B=>{if(j||b){B.preventDefault(),B.stopPropagation();return}if(r===t.id){B.preventDefault(),B.stopPropagation();return}u(`/envelope/${t.id}`)};q.useEffect(()=>{S&&S!==t.id&&L(!1)},[S,t.id]),q.useEffect(()=>{S===t.id&&(L(!0),w(t.id))},[S,t.id,w]),q.useEffect(()=>{if(!S&&j){const B=setTimeout(()=>{L(!1)},300);return()=>clearTimeout(B)}},[S,j]);const le=x.jsxs("div",{className:"flex items-center gap-2 w-full",children:[V&&x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("button",{onClick:B=>{B.stopPropagation(),E()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:x.jsx(jV,{size:18})}),x.jsx("button",{onClick:B=>{B.stopPropagation(),A()},disabled:I,className:`p-1 rounded transition-colors ${I?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:x.jsx(jD,{size:18})})]}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[z&&x.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:rd(O,.4),backgroundColor:rd(O,.15),color:O},children:x.jsx(Md,{size:16})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),z&&x.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:O},children:"Piggybank"})]})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"flex items-center space-x-4",onPointerDown:B=>B.stopPropagation(),children:r===t.id?x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),x.jsx("form",{onSubmit:B=>{B.preventDefault(),c()},children:x.jsx("input",{ref:d,type:"number",value:a,onChange:B=>o(B.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):x.jsxs("div",{onClick:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},onTouchEnd:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),x.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),x.jsxs("div",{className:"text-right",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),x.jsxs("span",{className:`font-bold ${n.toNumber()<0||100-Y<=5?"text-red-500":Y>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",n.toNumber().toFixed(2)]})]})]}),e>0&&x.jsx("div",{className:"mt-3",onClick:B=>B.stopPropagation(),children:x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[x.jsx("span",{children:"Budget Used"}),x.jsxs("span",{children:[Y.toFixed(0),"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:x.jsx("div",{className:`h-full transition-all duration-300 ease-out ${n.toNumber()<0||100-Y<=5?"bg-red-500":Y>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-Y,2)}%`}})})]})})]})]}),Z=S===t.id;return x.jsx(Uu.div,{layout:!Z,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:B=>{m(t.id)(B),k.current=B},onClick:te,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:T,borderColor:C,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${z?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:le})},PQ=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=qn(),d=q.useCallback(Ee=>Ve=>{Ve?ft.current[Ee]=Ve:delete ft.current[Ee]},[]),{currentMonth:h,fetchMonthlyData:g,incomeSources:m,envelopeAllocations:b,calculateAvailableToBudget:S,deleteIncomeSource:w,restoreIncomeSource:E,clearMonthData:A,copyFromPreviousMonth:D,setEnvelopeAllocation:I,isLoading:V}=ta(),{showToast:z}=ef(),O=qa(),T=q.useCallback(async Ee=>{if(!Ee.length)return;const Ve=Ee.map(Ft=>Ft.id);try{await u(Ve)}catch(Ft){console.error("Failed to persist envelope order:",Ft),z("Failed to save envelope order","error")}},[u,z]),[C,k]=q.useState(!1),[j,L]=q.useState("add"),[U,P]=q.useState(null),[X,$]=q.useState(!1),[H,Y]=q.useState(!1),[te,le]=q.useState(!1),Z=q.useRef(null),[B,K]=q.useState(!0),[ie,re]=q.useState(!1),fe=q.useRef(null),[ue,ge]=q.useState(null),[Te,Ce]=q.useState(""),Fe=q.useRef(null),[Se,De]=q.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");q.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",Se.toString())},[Se]);const ot=Ee=>{const Ve=e.filter(tt=>tt.envelopeId===Ee&&tt.month===h),Ft=Ve.filter(tt=>tt.type==="Expense"),mt=Ve.filter(tt=>tt.type==="Income"),Kr=Ft.reduce((tt,dr)=>tt.plus(new Fr(dr.amount||0)),new Fr(0));return mt.reduce((tt,dr)=>tt.plus(new Fr(dr.amount||0)),new Fr(0)).minus(Kr)};q.useEffect(()=>(console.log(" Starting initial data load, isInitialLoading:",B),(async()=>{console.log(" Setting timeout for loading message"),fe.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),re(!0)},8e3);try{console.log(" Fetching data in parallel..."),await Promise.all([n().then(()=>console.log(" Envelope data fetched")),g().then(()=>console.log(" Monthly budget data fetched"))]),fe.current&&clearTimeout(fe.current),console.log(" Data load complete, hiding loading screen"),K(!1),re(!1)}catch(Ve){console.error(" Error loading initial data:",Ve),K(!1),re(!1)}})(),()=>{fe.current&&clearTimeout(fe.current)}),[]),q.useEffect(()=>{if(!V&&!B){const Ee=m.length===0&&b.length===0;le(Ee)}},[V,B,m,b,h]),q.useEffect(()=>{ue&&Fe.current&&(Fe.current.focus(),Fe.current.select())},[ue]);const[Pe,Ge]=q.useState(!1),Ye=q.useRef(null),gt=q.useRef(0),ft=q.useRef({}),Ne=q.useRef({}),[qe,It]=q.useState(null),Jt=q.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[rn,lt]=q.useState([]),ct=q.useRef([]),Qn=t.filter(Ee=>Ee.isPiggybank===!0&&Ee.isActive);q.useEffect(()=>{if(!Pe){const Ee=t.filter(Ve=>!Ve.isPiggybank&&Ve.isActive!==!1&&b.some(Ft=>Ft.envelopeId===Ve.id)).sort((Ve,Ft)=>{const mt=Ve.orderIndex??0,Kr=Ft.orderIndex??0;return mt-Kr});lt(Ee),ct.current=Ee}},[t,b,Pe]);const Zn=q.useCallback(()=>Ge(!0),[]),kr=q.useCallback(()=>{Ge(!1),ct.current.length&&T(ct.current)},[T]),Vs=q.useCallback(Ee=>{},[]),Ya=q.useCallback(Ee=>{ue!==Ee&&O(`/envelope/${Ee}`)},[ue,O]),Jn=rn;q.useEffect(()=>{const Ee=()=>{Object.values(Ne.current).forEach(mt=>mt?.destroy()),Ne.current={}};if(!Jn.length)return;const Ve=()=>{Se&&Jn.forEach(mt=>{const Kr=ft.current[mt.id];if(!Kr)return;const aa=Ne.current[mt.id];if(aa){aa.target=Kr;return}const jn=new H7(Ye.current,{target:Kr,draggable:Se,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});jn.on("dragStart",dr=>{const fn=ct.current.findIndex(Xt=>Xt.id===mt.id),$n=dr.target,er=$n.getBoundingClientRect().height+NQ;It(mt.id),Jt.current={activeId:mt.id,startIndex:fn,currentIndex:fn,itemHeight:er},$n&&($n.style.transition="none",$n.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",$n.style.zIndex="20"),Zn()});let tt=null;jn.on("drag",dr=>{const fn=dr.target;tt!==null&&cancelAnimationFrame(tt),tt=requestAnimationFrame(()=>{const $n=Jt.current;if($n.activeId!==mt.id)return;const ui=dr.beforeTranslate[1];fn.style.transform=`translateY(${ui}px)`,fn.style.transition="none";const{itemHeight:er,startIndex:Xt}=$n;if(!er)return;const fi=Math.round(ui/er),Yn=MQ(Xt+fi,0,ct.current.length-1);Yn!==$n.currentIndex&&($n.currentIndex=Yn,ct.current.forEach((Nr,Wt)=>{if(Nr.id===mt.id)return;const dn=ft.current[Nr.id];if(!dn)return;let wr=0;Xt<Yn?Wt>Xt&&Wt<=Yn&&(wr=-er):Xt>Yn&&Wt>=Yn&&Wt<Xt&&(wr=er),dn.style.transform=wr?`translateY(${wr}px)`:"",dn.style.transition="transform 0.2s ease"})),tt=null})}),jn.on("dragEnd",dr=>{tt!==null&&(cancelAnimationFrame(tt),tt=null);const fn=dr.target,$n=Jt.current,{startIndex:ui,currentIndex:er}=$n;if(fn.style.transform="",fn.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",fn.style.boxShadow="",ct.current.forEach(Xt=>{if(Xt.id===mt.id)return;const fi=ft.current[Xt.id];fi&&(fi.style.transform="",fi.style.transition="")}),ui!==er){const Xt=[...ct.current],[fi]=Xt.splice(ui,1);Xt.splice(er,0,fi),ct.current=Xt,lt(Xt)}setTimeout(()=>{fn.style.zIndex="",fn.style.transition="",It(null)},300),Jt.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},gt.current=Date.now(),kr()}),jn.on("click",dr=>{const fn=dr.inputEvent.target;fn.closest(".js-budget-target")||fn.tagName==="INPUT"||Ya(mt.id)}),Ne.current[mt.id]=jn})},Ft=window.setTimeout(Ve,80);return()=>{clearTimeout(Ft),Ee()}},[Jn,Zn,kr,Ya,Se]);const na=t.reduce((Ee,Ve)=>Ee+ot(Ve.id).toNumber(),0);console.log(" Total balance:",na);const Sr=async()=>{if(ue)try{const Ee=parseFloat(Te)||0;await I(ue,Ee)}catch(Ee){console.error("Failed to save budget amount:",Ee),z("Failed to update budget","error")}finally{ge(null),Ce("")}},un=()=>{L("add"),P(null),k(!0)},Hn=Ee=>{Z.current&&clearTimeout(Z.current),!X&&(L("edit"),P(Ee),k(!0))},$t=Ee=>{Z.current&&clearTimeout(Z.current),$(!0);const Ve=m.findIndex(mt=>mt.id===Ee.id),Ft={...Ee};w(Ee.id).catch(console.error),z(`Deleted "${Ee.name}"`,"neutral",()=>E(Ft,Ve)),setTimeout(()=>$(!1),500)},js=()=>{k(!1),P(null)},ra=()=>{Y(!0)},ia=async()=>{try{await A(),Y(!1),z(`"${h}" budget cleared`,"neutral",()=>z('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(Ee){console.error("Error clearing month data:",Ee),z("Failed to clear month data","error")}},dt=async()=>{try{await D(),le(!1),z("Previous month budget copied","success")}catch(Ee){console.error("Error copying previous month:",Ee),z("Failed to copy previous month","error")}},Yt=S();return console.log(" Checking loading screen condition, isInitialLoading:",B),B?(console.log(" Showing loading screen"),x.jsx(tP,{message:ie?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:ie})):(console.log(" Showing main content"),x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[x.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"flex items-center gap-2",children:i?r?x.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[x.jsx(jl,{size:16,className:"animate-spin"}),x.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):a?x.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[x.jsx(jl,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):x.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[x.jsx($j,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):x.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[x.jsx(qj,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:c?"Testing...":r?"Saving...":"Offline"})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>De(!Se),className:`transition-colors ${Se?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:Se?"Lock envelope order":"Unlock to reorder envelopes",children:Se?x.jsx(pj,{size:22}):x.jsx(mj,{size:22})}),x.jsx("button",{onClick:ra,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:x.jsx(jl,{size:22})}),x.jsx(CQ,{})]})]}),x.jsx(AQ,{amount:Yt,totalIncome:m.reduce((Ee,Ve)=>Ee+Ve.amount,0),totalAllocated:b.reduce((Ee,Ve)=>Ee+Ve.budgetedAmount,0),isLoading:r,variant:"header"}),x.jsx(TQ,{currentMonth:h,onMonthChange:Ee=>{le(!1),ta.getState().setCurrentMonth(Ee)}})]}),x.jsxs("div",{className:"pt-24 p-4 max-w-md mx-auto space-y-6",children:[te&&x.jsx(IQ,{currentMonth:h,onCopy:dt,onDismiss:()=>le(!1)}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),x.jsx("button",{onClick:un,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:x.jsx(ag,{size:20})})]}),m.length===0?x.jsx("div",{className:"text-center py-6",children:x.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):x.jsx("div",{className:"space-y-3",children:x.jsx(zd,{initial:!1,mode:"popLayout",children:m.map(Ee=>x.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(MS,{onDelete:()=>$t(Ee),children:x.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Hn(Ee),children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Ee.name}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),x.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Ee.amount.toFixed(2)]})]})})},Ee.id))})})]}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[x.jsx(Md,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),x.jsx("button",{onClick:()=>O("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:x.jsx(ag,{size:20})})]}),Qn.length>0?x.jsx("div",{className:"space-y-3",children:Qn.map(Ee=>x.jsx(kQ,{piggybank:Ee,balance:ot(Ee.id),onNavigate:Ve=>O(`/envelope/${Ve}`)},Ee.id))}):x.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[x.jsx(Md,{size:48,className:"mx-auto mb-3 opacity-30"}),x.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),x.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),x.jsx("button",{onClick:()=>O("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:x.jsx(ag,{size:20})})]}),Jn.length===0?x.jsxs("div",{className:"text-center py-6",children:[x.jsx(px,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),x.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length>0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),x.jsx("button",{onClick:()=>O("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):x.jsx("div",{ref:Ye,children:x.jsx(zd,{initial:!1,children:x.jsx("div",{className:"space-y-3",children:Jn.map((Ee,Ve)=>{const mt=b.find(tt=>tt.envelopeId===Ee.id)?.budgetedAmount||0,Kr=ot(Ee.id),aa=()=>{if(Ve===0)return;const tt=[...ct.current];[tt[Ve-1],tt[Ve]]=[tt[Ve],tt[Ve-1]],ct.current=tt,lt(tt),T(tt)},jn=()=>{if(Ve===Jn.length-1)return;const tt=[...ct.current];[tt[Ve],tt[Ve+1]]=[tt[Ve+1],tt[Ve]],ct.current=tt,lt(tt),T(tt)};return x.jsx(OQ,{env:Ee,budgetedAmount:mt,remainingBalance:Kr,editingEnvelopeId:ue,setEditingEnvelopeId:ge,editingAmount:Te,setEditingAmount:Ce,handleBudgetSave:Sr,navigate:O,inputRef:Fe,transactions:e,currentMonth:h,setMoveableRef:d,isReorderingActive:Pe,activelyDraggingId:qe,onItemDragStart:Vs,onMoveUp:aa,onMoveDown:jn,isFirst:Ve===0,isLast:Ve===Jn.length-1,isReorderUnlocked:Se},Ee.id)})})})})]}),x.jsx("button",{onClick:()=>O("/add-transaction"),className:"fixed bottom-24 right-6 md:bottom-10 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:x.jsx(ag,{size:28})}),x.jsx(RQ,{isVisible:C,onClose:js,mode:j,initialIncomeSource:U}),x.jsx(DQ,{isVisible:H,onClose:()=>Y(!1),onConfirm:ia,currentMonth:h,incomeCount:m.length,totalIncome:m.reduce((Ee,Ve)=>Ee+Ve.amount,0),allocationCount:b.length,totalAllocated:b.reduce((Ee,Ve)=>Ee+Ve.budgetedAmount,0)})]})]})]}))},nP=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c}=qn(),{currentMonth:u}=ta(),[d,h]=q.useState(""),[g,m]=q.useState(""),[b,S]=q.useState(""),[w,E]=q.useState(new Date().toISOString().split("T")[0]);if(q.useEffect(()=>{if(!t)return;const z=window.setTimeout(()=>{if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),S(i.description);try{const O=new Date(i.date);isNaN(O.getTime())?(console.warn("Invalid date in transaction:",i.date),E(new Date().toISOString().split("T")[0])):E(O.toISOString().split("T")[0])}catch(O){console.error("Error parsing transaction date:",O),E(new Date().toISOString().split("T")[0])}}else h(""),m(""),S(""),E(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(z)},[t,n,i]),!t)return null;const A=async z=>{z.preventDefault();const O=parseFloat(d);if(isNaN(O)||O<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:n,amount:O,note:b,date:w,envelopeId:r.id});try{const T=new Date(w),C=`${T.getFullYear()}-${(T.getMonth()+1).toString().padStart(2,"0")}`;if(C!==u){const k=`This transaction date (${C}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(k))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:O,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:O,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:O,description:b,merchant:g||void 0,date:new Date(w).toISOString()})),console.log(" Transaction saved successfully"),e()}catch(T){console.error(" Error saving transaction:",T),alert("Failed to save transaction: "+(T instanceof Error?T.message:"Unknown error"))}},D=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},I=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",V=n==="add"?"text-green-500":"text-red-500";return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),x.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:I}),x.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0,children:"Save"})]}),x.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${V}`,children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:z=>{const O=z.target.value;(O===""||!isNaN(parseFloat(O))&&parseFloat(O)>=0)&&h(O)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${V} placeholder-gray-700`})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),x.jsx("input",{type:"text",value:g,onChange:z=>m(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),x.jsx("input",{type:"text",value:b,onChange:z=>S(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?x.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[x.jsx(Od,{size:14}),x.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),x.jsx("input",{type:"date",value:w,onChange:z=>{console.log("Date changed to:",z.target.value),E(z.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&x.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:x.jsxs("button",{type:"button",onClick:D,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[x.jsx(LD,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},VQ=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=qn(),[a,o]=q.useState(""),[c,u]=q.useState(""),[d,h]=q.useState(""),[g,m]=q.useState(new Date().toISOString().split("T")[0]),b=r.filter(E=>E.id!==n.id);if(q.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(E)},[t]),!t)return null;const S=E=>{E.preventDefault();const A=parseFloat(c);isNaN(A)||A<=0||!a||(i(n.id,a,A,d,new Date(g)),e())},w=r.find(E=>E.id===a);return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),x.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),x.jsx("button",{onClick:S,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),x.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),x.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),x.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[x.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(E=>x.jsx("option",{value:E.id,className:"bg-white dark:bg-zinc-900",children:E.name},E.id))]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:E=>u(E.target.value),onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),x.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),x.jsx("input",{type:"date",value:g,onChange:E=>m(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),w&&c&&parseFloat(c)>0&&x.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",x.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:w.name})]})]})]})})},jQ=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},zQ=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},rP=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),x.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[x.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&x.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),x.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[x.jsx("span",{children:jQ(t.date)}),e&&x.jsxs(x.Fragment,{children:[x.jsx("span",{children:""}),x.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",zQ(t.amount)]}),n?x.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?x.jsx(bA,{className:"text-green-500",size:20}):x.jsx(_A,{className:"text-gray-400",size:20})}):x.jsx("span",{children:t.reconciled?x.jsx(bA,{className:"text-green-500",size:20}):x.jsx(_A,{className:"text-gray-400",size:20})})]})]})},LQ=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),BQ=()=>{const{id:t}=A5(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h}=qn(),{showToast:g}=ef(),m=qa(),b=Ga(),[S,w]=q.useState(!1),[E,A]=q.useState(!1),[D,I]=q.useState(!1),[V,z]=q.useState(null);q.useEffect(()=>{e.length===0&&r()},[]);const O=e.find(L=>L.id===t);if(!O)return i?x.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:x.jsx("p",{children:"Loading envelope..."})}):x.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:x.jsx("p",{children:"Envelope not found."})});const T=n.filter(L=>L.envelopeId===O.id).sort((L,U)=>new Date(U.date).getTime()-new Date(L.date).getTime()),C=()=>{b.state?.fromGlobalFAB?m("/"):m(-1)},k=()=>{t&&(a(t),m(-1))},j=L=>{const U={...L,reconciled:!L.reconciled};c(U)};return x.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[x.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[x.jsx("button",{onClick:()=>{const L=prompt("Rename envelope:",O.name);L&&L.trim()&&t&&o(t,L)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),x.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:O.name}),x.jsx("button",{onClick:C,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),x.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const L=h(O.id).toNumber();return console.log(`Debug: Envelope ${O.name} Balance:`,L),x.jsx("span",{className:`text-xl font-bold ${L<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:LQ(L)})})()]})}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>w(!0),children:[x.jsx(UV,{className:"w-5 h-5 mr-3"}),"Add Money"]}),x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[x.jsx(LV,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>I(!0),children:[x.jsx(DV,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),x.jsxs("section",{className:"mt-6",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:T.length===0?x.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):x.jsx(zd,{initial:!1,mode:"popLayout",children:T.map(L=>x.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(MS,{onDelete:()=>{if(!L.id)return;const U={...L};u(L.id),g("Transaction deleted","neutral",()=>d(U))},children:x.jsx(rP,{transaction:L,onReconcile:()=>j(L),onEdit:()=>z(L)})})},L.id))})})]}),x.jsx("div",{className:"mt-8",children:x.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${O.name}"? This will delete all transactions.`)&&k()},children:[x.jsx(LD,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(S||E||V)&&x.jsx(nP,{isVisible:S||E||!!V,onClose:()=>{w(!1),A(!1),z(null)},mode:S?"add":E?"spend":"edit",currentEnvelope:O,initialTransaction:V}),D&&x.jsx(VQ,{isVisible:D,onClose:()=>I(!1),sourceEnvelope:O})]})},UQ="1.1.0",FQ={version:UQ},GQ=()=>{const t=qa(),e=q.useRef(null),{envelopes:n,transactions:r,distributionTemplates:i,resetData:a,importData:o,getEnvelopeBalance:c,appSettings:u,updateAppSettings:d,initializeAppSettings:h}=qn(),{currentUser:g,deleteAccount:m}=Mi(),[b,S]=q.useState(null),[w,E]=q.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[A,D]=q.useState(!1),[I,V]=q.useState(""),[z,O]=q.useState(!1),[T,C]=q.useState(!1),[k,j]=q.useState(null),L=978307200,U=u?.theme??"system";q.useEffect(()=>{u||h().catch(B=>{console.error("Failed to initialize app settings:",B)})},[u,h]);const P=(B,K)=>{S({type:B,text:K}),setTimeout(()=>S(null),3500)},X=q.useMemo(()=>{const B=n.length,K=r.length,ie=i.length,re=n.reduce((Te,Ce)=>Te+c(Ce.id).toNumber(),0),fe=0,ue=r.reduce((Te,Ce)=>{let Fe=0;if(typeof Ce.date=="string"){const Se=Date.parse(Ce.date);Fe=Number.isNaN(Se)?0:Se}else typeof Ce.date=="number"&&(Fe=Ce.date<2e9?(Ce.date+L)*1e3:Ce.date);return Math.max(Te,Fe)},0),ge=fe||ue?new Date(Math.max(fe,ue)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:B,transactionCount:K,templateCount:ie,totalBalance:re,lastUpdated:ge}},[n,r,i]),$=()=>{try{const B={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:u||{theme:"system"},envelopes:n.map(ue=>({...ue,currentBalance:c(ue.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:r,distributionTemplates:i},K=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),ie=URL.createObjectURL(K),re=document.createElement("a");re.href=ie,re.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(ie);const fe=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",fe),E(fe),j({success:!0,message:"Backup downloaded successfully."})}catch(B){console.error(B),j({success:!1,message:"Failed to create backup file.",onRetry:$})}},H=()=>{C(!0),j(null);try{const B=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],K=r.map(ge=>{const Te=n.find(De=>De.id===ge.envelopeId)?.name||"Unknown",Ce=(ge.merchant||"").replace(/"/g,'""'),Fe=(ge.description||"").replace(/"/g,'""');let Se="Invalid Date";if(ge.date){if(typeof ge.date=="string")Se=ge.date.split("T")[0];else if(typeof ge.date=="number"){const De=ge.date<2e9?(ge.date+L)*1e3:ge.date;Se=new Date(De).toISOString().split("T")[0]}}return[Se,`"${Ce}"`,`"${Fe}"`,ge.amount.toFixed(2),ge.type,`"${Te}"`,ge.reconciled?"Yes":"No"].join(",")}),ie=[B.join(","),...K].join(`
`),re=new Blob([ie],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(re),ue=document.createElement("a");ue.href=fe,ue.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(fe),j({success:!0,message:"Transactions CSV exported successfully."})}catch(B){console.error(B),j({success:!1,message:"Failed to export CSV. Please try again.",onRetry:H})}finally{C(!1)}},Y=()=>{e.current?.click()},te=B=>{const K=B.target.files?.[0];if(!K)return;const ie=new FileReader;ie.onload=async re=>{try{const fe=JSON.parse(re.target?.result),ue=await o(fe);if(!ue.success){P("error",ue.message);return}if(fe.appSettings?.theme)try{await d({theme:fe.appSettings.theme})}catch(ge){console.error("Failed to update imported settings:",ge)}else if(fe.appSettings?.isDarkMode!==void 0)try{const ge=fe.appSettings.isDarkMode?"dark":"light";await d({theme:ge})}catch(ge){console.error("Failed to update imported settings:",ge)}P("success",`Loaded ${fe.envelopes?.length??0} envelopes, ${fe.transactions?.length??0} transactions, and ${fe.distributionTemplates?.length??0} templates.`)}catch(fe){console.error(fe),P("error","Invalid backup file. Please verify the JSON.")}},ie.readAsText(K),B.target.value=""},le=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await a(),P("success","All data has been permanently deleted."),t("/")}catch(B){console.error("Reset failed:",B),P("error","Failed to delete all data. Some data may remain.")}},Z=async()=>{if(!I.trim()){P("error","Please enter your password to confirm account deletion.");return}D(!0);try{await a(),await m(I)?P("success","Your account has been permanently deleted."):P("error","Failed to delete account. Please try again.")}catch(B){console.error("Account deletion failed:",B),P("error","Failed to delete account. Please try again.")}finally{D(!1),O(!1),V("")}};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[x.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),x.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[b&&x.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${b.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[b.type==="success"?x.jsx(Jg,{size:18}):x.jsx(Mg,{size:18}),b.text]}),x.jsx("section",{children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(SA,{className:"text-blue-500",size:22}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),x.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.envelopeCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.transactionCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.templateCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:X.lastUpdated})]})]})]})}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[U==="light"&&x.jsx("span",{className:"text-orange-500 text-lg",children:""}),U==="dark"&&x.jsx("span",{className:"text-purple-500 text-lg",children:""}),U==="system"&&x.jsx("span",{className:"text-gray-500 text-lg",children:""}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:U})]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),x.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(B=>x.jsx("button",{onClick:async()=>{try{await d({theme:B.value})}catch(K){console.error("Failed to update theme setting:",K)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${U===B.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:B.label},B.value))})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[x.jsxs("button",{onClick:$,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(SA,{className:"text-blue-500",size:20}),x.jsxs("div",{className:"flex flex-col items-start",children:[x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",w]})]})]}),x.jsx($c,{className:"text-gray-400",size:18})]}),x.jsxs("button",{onClick:Y,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Lj,{className:"text-blue-500",size:20}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),x.jsx($c,{className:"text-gray-400",size:18})]}),x.jsx("div",{className:"p-4",children:x.jsxs("button",{onClick:H,disabled:T,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[T?x.jsx(wA,{className:"text-blue-500 animate-spin",size:20}):x.jsx(tj,{className:"text-blue-500",size:20}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:T?"Preparing CSV":"Export Transactions (CSV)"})]}),x.jsx($c,{className:"text-gray-400",size:18})]})}),x.jsx("input",{type:"file",ref:e,onChange:te,accept:".json",className:"hidden"})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[x.jsx("p",{children:"Create regular backups before major changes."}),x.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),x.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),x.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[x.jsxs("button",{onClick:le,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Mg,{className:"text-red-500 group-hover:text-red-600",size:20}),x.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),x.jsx($c,{className:"text-gray-400",size:18})]}),x.jsxs("button",{onClick:()=>O(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Mg,{className:"text-red-600 group-hover:text-red-700",size:20}),x.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),x.jsx($c,{className:"text-gray-400",size:18})]})]}),x.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[x.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),x.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),x.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",FQ.version]})]}),z&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:x.jsx(Od,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),x.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:x.jsx(lh,{size:20})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[x.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),x.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",x.jsx("span",{className:"font-semibold",children:g?.email})]}),x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),x.jsx("input",{type:"password",value:I,onChange:B=>V(B.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:A})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>O(!1),disabled:A,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),x.jsx("button",{onClick:Z,disabled:A||!I.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?x.jsxs(x.Fragment,{children:[x.jsx(wA,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})}),k&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-sm w-full p-6 shadow-xl text-center",children:[x.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${k.success?"bg-green-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:k.success?x.jsx(Jg,{className:"w-6 h-6 text-green-600 dark:text-emerald-400"}):x.jsx(Od,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:k.success?"Success":"Error"}),x.jsx("p",{className:"text-gray-600 dark:text-zinc-400 mb-6",children:k.message}),x.jsx("div",{className:"flex gap-3 justify-center",children:k.success?x.jsx("button",{onClick:()=>j(null),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Okay"}):x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),k.onRetry&&x.jsx("button",{onClick:()=>{const B=k.onRetry;j(null),B&&B()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Re-try"})]})})]})})]})},qQ=()=>{const{addEnvelope:t}=qn(),{setEnvelopeAllocation:e}=ta(),n=qa(),[r]=mV(),[i,a]=q.useState(""),[o,c]=q.useState(""),u=r.get("type")==="piggybank",[d,h]=q.useState(""),[g,m]=q.useState(""),[b,S]=q.useState("#3B82F6"),w=async E=>{if(E.preventDefault(),!i.trim())return;const A=parseFloat(o),D=isNaN(A)?0:A,I=qn.getState().envelopes,z=(I.length>0?Math.max(...I.map(C=>C.orderIndex??0)):-1)+1,O={name:i,currentBalance:D,lastUpdated:new Date().toISOString(),createdAt:new Date().toISOString(),isActive:!0,orderIndex:z};u&&(O.isPiggybank=!0,O.piggybankConfig={targetAmount:d?parseFloat(d):void 0,monthlyContribution:parseFloat(g||"0"),color:b,icon:"piggy-bank"});const T=await t(O);T&&await e(T,0),n("/")};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[x.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:x.jsx(Nd,{size:24})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"New Piggybank":"New Envelope"})]}),x.jsx("div",{className:"p-4 max-w-md mx-auto",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[x.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:x.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:u?x.jsx(Md,{size:40}):x.jsx(rj,{size:40})})}),x.jsxs("form",{onSubmit:w,className:"p-6 space-y-6 pb-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:u?"Piggybank Name":"Envelope Name"}),x.jsx("input",{type:"text",id:"name",value:i,onChange:E=>a(E.target.value),placeholder:u?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),u&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"monthly-contribution",value:g,onChange:E=>m(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:u})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"target-amount",value:d,onChange:E=>h(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),x.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(E=>x.jsx("button",{type:"button",onClick:()=>S(E.value),className:`w-full aspect-square rounded-lg transition-all ${b===E.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:E.value},title:E.label},E.value))})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"balance",value:o,onChange:E=>c(E.target.value),onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),x.jsxs("div",{className:"pt-4 flex gap-3",children:[x.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:!i.trim()||u&&!g,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&(!u||g)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:u?"Create Piggybank":"Create Envelope"})]})]})]})})]})},HQ=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=q.useState([]),[a,o]=q.useState({}),[c,u]=q.useState(e),d=S=>{i(w=>w.includes(S)?w.filter(E=>E!==S):[...w,S])},h=(S,w)=>{o(E=>({...E,[S]:w}))};q.useEffect(()=>{if(r.length===1){const S=r[0];o({[S]:e})}},[r.length,e]),q.useEffect(()=>{const S=Object.values(a).reduce((w,E)=>w+(E||0),0);u(e-S),n(a)},[a,e,n]),q.useEffect(()=>{const S={...a};Object.keys(S).forEach(w=>{r.includes(w)||delete S[w]}),Object.keys(S).length!==Object.keys(a).length&&o(S)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return x.jsxs("div",{className:"space-y-3",children:[r.length>1&&x.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),x.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&x.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),x.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(S=>x.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsx("input",{type:"checkbox",checked:r.includes(S.id),onChange:()=>d(S.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),x.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:S.name}),r.includes(S.id)&&r.length>1&&x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),x.jsx("input",{type:"number",min:"0",step:"0.01",value:a[S.id]||"",onChange:w=>h(S.id,parseFloat(w.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},S.id))})]})},$Q=()=>{const t=qa(),{envelopes:e,addTransaction:n}=qn(),{currentMonth:r}=ta(),[i,a]=q.useState(""),[o,c]=q.useState(""),[u,d]=q.useState(""),[h,g]=q.useState(new Date().toISOString().split("T")[0]),[m,b]=q.useState("expense"),[S,w]=q.useState({}),E=Object.keys(S).length>0,A=Object.values(S).reduce((T,C)=>T+(C||0),0),D=Math.abs(A-parseFloat(i||"0"))<.01,I=i&&parseFloat(i)>0&&E&&D,V=async T=>{if(T.preventDefault(),!I)return;const[C,k,j]=h.split("-").map(Number),L=new Date(C,k-1,j,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",L.toISOString());try{const[U,P]=h.split("-").map(Number),X=`${U}-${P.toString().padStart(2,"0")}`;if(X!==r){const H=`This transaction date (${X}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(H))return}const $=Object.entries(S).filter(([H,Y])=>Y>0);for(const[H,Y]of $)await n({amount:Y,description:u,merchant:o||void 0,date:L.toISOString(),envelopeId:H,type:m==="income"?"Income":"Expense",reconciled:!1});t("/")}catch(U){console.error("Error saving transaction:",U),alert("Failed to save transaction: "+(U instanceof Error?U.message:"Unknown error"))}},z=[...e].sort((T,C)=>{const k=T.orderIndex??0,j=C.orderIndex??0;return k!==j?k-j:T.name.localeCompare(C.name)}),O=m==="income"?"text-green-500":"text-red-500";return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[x.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),x.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),x.jsx("button",{onClick:V,disabled:!I,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),x.jsx("div",{className:"p-4 max-w-md mx-auto",children:x.jsxs("form",{onSubmit:V,className:"space-y-6",children:[x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:x.jsxs("div",{className:"flex",children:[x.jsx("button",{type:"button",onClick:()=>b("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),x.jsx("button",{type:"button",onClick:()=>b("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${O}`,children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:T=>{const C=T.target.value;(C===""||!isNaN(parseFloat(C))&&parseFloat(C)>=0)&&a(C)},onKeyDown:T=>{(T.key==="e"||T.key==="E"||T.key==="+"||T.key==="-")&&T.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${O} placeholder-gray-700`})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),x.jsx("input",{type:"text",value:o,onChange:T=>c(T.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),x.jsx("input",{type:"text",value:u,onChange:T=>d(T.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[T,C]=h.split("-").map(Number);return`${T}-${C.toString().padStart(2,"0")}`!==r?x.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[x.jsx(Od,{size:14}),x.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),x.jsx("input",{type:"date",value:h,onChange:T=>g(T.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:x.jsx(HQ,{envelopes:z,transactionAmount:parseFloat(i)||0,onSplitChange:w})})]})})]})},YQ=()=>{const t=qa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a}=qn(),{showToast:o}=ef(),{currentMonth:c}=ta(),[u,d]=q.useState(!1),[h,g]=q.useState(""),[m,b]=q.useState("all"),[S,w]=q.useState("All"),[E,A]=q.useState(!1),[D,I]=q.useState("all"),[V,z]=q.useState(!1),[O,T]=q.useState(()=>{const $=new Date;return $.setMonth($.getMonth()-1),$.toISOString().split("T")[0]}),[C,k]=q.useState(()=>new Date().toISOString().split("T")[0]),[j,L]=q.useState(null),U=q.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:V,currentMonth:c,transactionMonths:e.map(Y=>({id:Y.id,month:Y.month,date:Y.date}))});let $=e;return V||($=e.filter(Y=>Y.month===c||!Y.month),console.log(" After month filter:",$.length,"transactions remain")),$.map(Y=>{if(!Y)return null;let te=Y.date;if(typeof Y.date=="number"){const Z=(Y.date+978307200)*1e3;te=new Date(Z).toISOString()}else if(!Y.date||typeof Y.date!="string")return null;return{...Y,date:te}}).filter(Boolean).filter(Y=>{if(h){const le=h.toLowerCase(),Z=n.find(ie=>ie.id===Y.envelopeId)?.name.toLowerCase()||"",B=Y.amount.toFixed(2);if(!(Y.description.toLowerCase().includes(le)||Z.includes(le)||B.includes(le)))return!1}if(m!=="all"&&Y.envelopeId!==m||S!=="All"&&Y.type!==S||!Y.date||typeof Y.date!="string")return!1;const te=Y.date.split("T")[0];return!(D!=="all"&&new Date(te).getMonth()!==parseInt(D)||E&&!Y.reconciled)}).sort((Y,te)=>new Date(te.date).getTime()-new Date(Y.date).getTime())},[e,n,h,m,S,O,C,E,V,c]);console.log(" Final filtered transactions:",{count:U.length,transactions:U.map($=>({id:$.id,description:$.description,amount:$.amount,date:$.date,month:$.month,type:$.type}))});const P=j?n.find($=>$.id===j.envelopeId):null,X=$=>{const H={...$,reconciled:!$.reconciled};r(H)};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:x.jsx(Nd,{size:24})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),x.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:x.jsx(aj,{size:20,className:u?"fill-current":""})})]}),x.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[x.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",c]}),x.jsx("button",{onClick:()=>z(!V),className:`text-sm px-3 py-1 rounded-md ${V?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:V?"Current Month Only":"All Time"})]}),x.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"relative",children:[x.jsx(Tj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),x.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:$=>g($.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&x.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:x.jsx(lh,{size:16})})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),x.jsxs("select",{value:m,onChange:$=>b($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[x.jsx("option",{value:"all",children:"All Envelopes"}),n.sort(($,H)=>$.name.localeCompare(H.name)).map($=>x.jsx("option",{value:$.id,children:$.name},$.id))]})]}),x.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map($=>x.jsx("button",{onClick:()=>w($),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===$?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:$},$))}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),x.jsxs("select",{value:D,onChange:$=>I($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[x.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},($,H)=>H).map($=>x.jsx("option",{value:$,children:new Date(2022,$).toLocaleString("default",{month:"long"})},$))]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:O,onChange:$=>T($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:C,onChange:$=>k($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),x.jsx("button",{onClick:()=>A(!E),className:`w-11 h-6 rounded-full transition-colors relative ${E?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:x.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${E?"translate-x-5":"translate-x-0"}`})})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),x.jsx("button",{onClick:()=>z(!V),className:`w-11 h-6 rounded-full transition-colors relative ${V?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:x.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${V?"translate-x-5":"translate-x-0"}`})})]})]})}),x.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):x.jsx(zd,{initial:!1,mode:"popLayout",children:U.map($=>{const H=n.find(Y=>Y.id===$.envelopeId);return x.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(MS,{onDelete:()=>{if(!$.id)return;const Y={...$};i($.id),o("Transaction deleted","neutral",()=>a(Y))},children:x.jsx(rP,{transaction:$,envelopeName:H?.name||"Unknown Envelope",onReconcile:()=>X($),onEdit:()=>{H?L($):alert("Cannot edit: Envelope deleted.")}})})},$.id)})})})}),j&&P&&x.jsx(nP,{isVisible:!!j,onClose:()=>L(null),mode:"edit",currentEnvelope:P,initialTransaction:j})]})},iP=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],XQ=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=iP.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},OS=t=>{const e=iP.map(i=>({...i,met:i.regex.test(t)})),n=XQ(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},WQ=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=OS(t);return r?null:x.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[x.jsx("div",{className:"flex-1",children:x.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>x.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),x.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},KQ=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=OS(t);return r?null:x.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?x.jsx(kV,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):x.jsx(lh,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),x.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},QQ=()=>{const[t,e]=q.useState(""),[n,r]=q.useState(""),[i,a]=q.useState(""),[o,c]=q.useState(!1),[u,d]=q.useState(!1),[h,g]=q.useState(!1),[m,b]=q.useState(!1),{login:S,register:w,sendPasswordReset:E,isLoading:A,loginError:D,clearError:I}=Mi(),V=OS(n),z=async T=>{if(T.preventDefault(),I(),t.trim()&&n.trim())if(u){if(!i.trim()||!V.isValid)return;await w(t.trim(),n,i.trim())}else await S(t.trim(),n)},O=async T=>{T.preventDefault(),t.trim()&&await E(t.trim())&&b(!0)};return q.useEffect(()=>{e(""),r(""),a(""),b(!1)},[u,h]),x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full space-y-8",children:[x.jsx("div",{className:"text-center",children:x.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),x.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?x.jsxs("form",{onSubmit:O,className:"space-y-6",children:[x.jsxs("div",{className:"text-center mb-2",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(Vb,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{id:"reset-email",type:"email",value:t,onChange:T=>e(T.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:A,autoComplete:"email"})]})]}),m?x.jsxs("div",{className:"text-center py-4",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:x.jsx(Vb,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),x.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),x.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",x.jsx("span",{className:"font-medium",children:t})]}),x.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[x.jsx(Nd,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):x.jsxs(x.Fragment,{children:[x.jsx("button",{type:"submit",disabled:A||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:A?"Sending...":"Send Reset Link"}),x.jsx("div",{className:"mt-4 text-center",children:x.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:A,children:[x.jsx(Nd,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):x.jsxs("form",{onSubmit:z,className:"space-y-6",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x.jsx("input",{id:"email",type:"email",value:t,onChange:T=>e(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:A,autoComplete:"username"})]}),u&&x.jsxs("div",{children:[x.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),x.jsx("input",{id:"displayName",type:"text",value:i,onChange:T=>a(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:A})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&x.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:A,children:"Forgot password?"})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:T=>r(T.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!V.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:A,autoComplete:u?"new-password":"current-password"}),x.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:A,children:o?x.jsx(QV,{className:"h-5 w-5"}):x.jsx(JV,{className:"h-5 w-5"})})]}),u&&n&&x.jsx("div",{className:"mt-2",children:x.jsx(WQ,{password:n})}),u&&n&&x.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:x.jsx(KQ,{password:n})})]}),D&&x.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[D,D.includes("verify your email")&&x.jsx("div",{className:"mt-3",children:x.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),x.jsx("button",{type:"submit",disabled:A||!t.trim()||!n.trim()||u&&!i.trim()||u&&!V.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:A?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),x.jsx("div",{className:"mt-6 text-center",children:x.jsxs("button",{type:"button",onClick:()=>{d(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:A,children:[x.jsx(Uj,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},yD=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Mi();q.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full space-y-8",children:[x.jsx("div",{className:"text-center",children:x.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),x.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:x.jsx(Vb,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(Jg,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),x.jsxs("div",{className:"text-left",children:[x.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),x.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[x.jsx("li",{children:"1. Open your email inbox"}),x.jsx("li",{children:"2. Find the email from House Budget"}),x.jsx("li",{children:'3. Click the "Verify Email" link'}),x.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&x.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&x.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),x.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?x.jsxs(x.Fragment,{children:[x.jsx(jl,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):x.jsxs(x.Fragment,{children:[x.jsx(jl,{className:"h-4 w-4"}),"Resend verification email"]})}),x.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[x.jsx(Nd,{className:"h-4 w-4"}),"Back to sign in"]})]})}),x.jsx("div",{className:"text-center",children:x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},ZQ=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=ef(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return x.jsx(zd,{children:n&&x.jsx(Uu.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:x.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[x.jsx("div",{className:"flex items-center flex-1 min-w-0",children:x.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),x.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&x.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[x.jsx(jj,{size:14,className:"inline mr-1"}),"Undo"]}),x.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:x.jsx(lh,{size:16})})]})]})})})};class Sa extends q.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[x.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:x.jsx(Od,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[x.jsx(jl,{className:"h-4 w-4"}),"Try Again"]}),x.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[x.jsx(oj,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const JQ=()=>{const t=qa(),e=Ga(),n=[{path:"/",label:"Budget",icon:x.jsx(px,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:x.jsx(cj,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:x.jsx(zD,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:x.jsx(xA,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:x.jsx(xA,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&t(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return x.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:x.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((a,o)=>x.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[x.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),x.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function eZ(){const[t,e]=q.useState(!0),{appSettings:n}=qn(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Mi();if(q.useEffect(()=>{const g=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(g)},[]),q.useEffect(()=>a(),[a]),q.useEffect(()=>{const g=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),b=()=>{const S=n?.theme??"system",w=m.matches;S==="dark"||S==="system"&&w?g.classList.add("dark"):g.classList.remove("dark")};if(b(),n?.theme==="system")return m.addEventListener("change",b),()=>m.removeEventListener("change",b)},[n]),t||!i)return x.jsx(tP,{message:"Initializing Personal Budget..."});if(!r)return u?x.jsx(Sa,{children:x.jsx(yD,{})}):x.jsx(Sa,{children:x.jsx(QQ,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return x.jsxs(Sa,{children:[h&&x.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),x.jsx("div",{className:"ml-3",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),x.jsxs(fV,{children:[x.jsxs(U5,{children:[x.jsx(xo,{path:"/",element:x.jsx(Sa,{children:x.jsx(PQ,{})})}),x.jsx(xo,{path:"/envelope/:id",element:x.jsx(Sa,{children:x.jsx(BQ,{})})}),x.jsx(xo,{path:"/add-envelope",element:x.jsx(Sa,{children:x.jsx(qQ,{})})}),x.jsx(xo,{path:"/add-transaction",element:x.jsx(Sa,{children:x.jsx($Q,{})})}),x.jsx(xo,{path:"/transactions",element:x.jsx(Sa,{children:x.jsx(YQ,{})})}),x.jsx(xo,{path:"/settings",element:x.jsx(Sa,{children:x.jsx(GQ,{})})}),x.jsx(xo,{path:"/verify-email",element:x.jsx(Sa,{children:x.jsx(yD,{})})})]}),x.jsx(JQ,{})]}),x.jsx(ZQ,{})]})}W3({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});H3.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(eZ,{})}));
