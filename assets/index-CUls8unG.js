(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function vI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vg={exports:{}},tu={};var kw;function bI(){if(kw)return tu;kw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:o}}return tu.Fragment=e,tu.jsx=n,tu.jsxs=n,tu}var Dw;function _I(){return Dw||(Dw=1,Vg.exports=bI()),Vg.exports}var v=_I(),Pg={exports:{}},Oe={};var Mw;function wI(){if(Mw)return Oe;Mw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function O(L,G,ue){this.props=L,this.context=G,this.refs=N,this.updater=ue||k}O.prototype.isReactComponent={},O.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=O.prototype;function P(L,G,ue){this.props=L,this.context=G,this.refs=N,this.updater=ue||k}var H=P.prototype=new z;H.constructor=P,A(H,O.prototype),H.isPureReactComponent=!0;var te=Array.isArray;function ee(){}var S={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(L,G,ue){var de=ue.ref;return{$$typeof:t,type:L,key:G,ref:de!==void 0?de:null,props:ue}}function j(L,G){return M(L.type,G,L.props)}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function F(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ue){return G[ue]})}var U=/\/+/g;function Me(L,G){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):G.toString(36)}function he(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ee,ee):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,G,ue,de,ye){var we=typeof L;(we==="undefined"||we==="boolean")&&(L=null);var xe=!1;if(L===null)xe=!0;else switch(we){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(L.$$typeof){case t:case e:xe=!0;break;case g:return xe=L._init,$(xe(L._payload),G,ue,de,ye)}}if(xe)return ye=ye(L),xe=de===""?"."+Me(L,0):de,te(ye)?(ue="",xe!=null&&(ue=xe.replace(U,"$&/")+"/"),$(ye,G,ue,"",function(_n){return _n})):ye!=null&&(D(ye)&&(ye=j(ye,ue+(ye.key==null||L&&L.key===ye.key?"":(""+ye.key).replace(U,"$&/")+"/")+xe)),G.push(ye)),1;xe=0;var ht=de===""?".":de+":";if(te(L))for(var Ke=0;Ke<L.length;Ke++)de=L[Ke],we=ht+Me(de,Ke),xe+=$(de,G,ue,we,ye);else if(Ke=E(L),typeof Ke=="function")for(L=Ke.call(L),Ke=0;!(de=L.next()).done;)de=de.value,we=ht+Me(de,Ke++),xe+=$(de,G,ue,we,ye);else if(we==="object"){if(typeof L.then=="function")return $(he(L),G,ue,de,ye);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ae(L,G,ue){if(L==null)return L;var de=[],ye=0;return $(L,de,"","",function(we){return G.call(ue,we,ye++)}),de}function me(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(ue){(L._status===0||L._status===-1)&&(L._status=1,L._result=ue)},function(ue){(L._status===0||L._status===-1)&&(L._status=2,L._result=ue)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var _e=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},le={map:ae,forEach:function(L,G,ue){ae(L,function(){G.apply(this,arguments)},ue)},count:function(L){var G=0;return ae(L,function(){G++}),G},toArray:function(L){return ae(L,function(G){return G})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Oe.Activity=b,Oe.Children=le,Oe.Component=O,Oe.Fragment=n,Oe.Profiler=a,Oe.PureComponent=P,Oe.StrictMode=i,Oe.Suspense=h,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return S.H.useMemoCache(L)}},Oe.cache=function(L){return function(){return L.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(L,G,ue){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=A({},L.props),ye=L.key;if(G!=null)for(we in G.key!==void 0&&(ye=""+G.key),G)!R.call(G,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&G.ref===void 0||(de[we]=G[we]);var we=arguments.length-2;if(we===1)de.children=ue;else if(1<we){for(var xe=Array(we),ht=0;ht<we;ht++)xe[ht]=arguments[ht+2];de.children=xe}return M(L.type,ye,de)},Oe.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Oe.createElement=function(L,G,ue){var de,ye={},we=null;if(G!=null)for(de in G.key!==void 0&&(we=""+G.key),G)R.call(G,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ye[de]=G[de]);var xe=arguments.length-2;if(xe===1)ye.children=ue;else if(1<xe){for(var ht=Array(xe),Ke=0;Ke<xe;Ke++)ht[Ke]=arguments[Ke+2];ye.children=ht}if(L&&L.defaultProps)for(de in xe=L.defaultProps,xe)ye[de]===void 0&&(ye[de]=xe[de]);return M(L,we,ye)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:d,render:L}},Oe.isValidElement=D,Oe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:me}},Oe.memo=function(L,G){return{$$typeof:f,type:L,compare:G===void 0?null:G}},Oe.startTransition=function(L){var G=S.T,ue={};S.T=ue;try{var de=L(),ye=S.S;ye!==null&&ye(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ee,_e)}catch(we){_e(we)}finally{G!==null&&ue.types!==null&&(G.types=ue.types),S.T=G}},Oe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Oe.use=function(L){return S.H.use(L)},Oe.useActionState=function(L,G,ue){return S.H.useActionState(L,G,ue)},Oe.useCallback=function(L,G){return S.H.useCallback(L,G)},Oe.useContext=function(L){return S.H.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L,G){return S.H.useDeferredValue(L,G)},Oe.useEffect=function(L,G){return S.H.useEffect(L,G)},Oe.useEffectEvent=function(L){return S.H.useEffectEvent(L)},Oe.useId=function(){return S.H.useId()},Oe.useImperativeHandle=function(L,G,ue){return S.H.useImperativeHandle(L,G,ue)},Oe.useInsertionEffect=function(L,G){return S.H.useInsertionEffect(L,G)},Oe.useLayoutEffect=function(L,G){return S.H.useLayoutEffect(L,G)},Oe.useMemo=function(L,G){return S.H.useMemo(L,G)},Oe.useOptimistic=function(L,G){return S.H.useOptimistic(L,G)},Oe.useReducer=function(L,G,ue){return S.H.useReducer(L,G,ue)},Oe.useRef=function(L){return S.H.useRef(L)},Oe.useState=function(L){return S.H.useState(L)},Oe.useSyncExternalStore=function(L,G,ue){return S.H.useSyncExternalStore(L,G,ue)},Oe.useTransition=function(){return S.H.useTransition()},Oe.version="19.2.0",Oe}var Ow;function Ty(){return Ow||(Ow=1,Pg.exports=wI()),Pg.exports}var V=Ty();const Lh=vI(V);var jg={exports:{}},nu={},Lg={exports:{}},Ug={};var Vw;function TI(){return Vw||(Vw=1,(function(t){function e($,ae){var me=$.length;$.push(ae);e:for(;0<me;){var _e=me-1>>>1,le=$[_e];if(0<a(le,ae))$[_e]=ae,$[me]=le,me=_e;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ae=$[0],me=$.pop();if(me!==ae){$[0]=me;e:for(var _e=0,le=$.length,L=le>>>1;_e<L;){var G=2*(_e+1)-1,ue=$[G],de=G+1,ye=$[de];if(0>a(ue,me))de<le&&0>a(ye,ue)?($[_e]=ye,$[de]=me,_e=de):($[_e]=ue,$[G]=me,_e=G);else if(de<le&&0>a(ye,me))$[_e]=ye,$[de]=me,_e=de;else break e}}return ae}function a($,ae){var me=$.sortIndex-ae.sortIndex;return me!==0?me:$.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],g=1,b=null,_=3,E=!1,k=!1,A=!1,N=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H($){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=$)i(f),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=n(f)}}function te($){if(A=!1,H($),!k)if(n(h)!==null)k=!0,ee||(ee=!0,F());else{var ae=n(f);ae!==null&&he(te,ae.startTime-$)}}var ee=!1,S=-1,R=5,M=-1;function j(){return N?!0:!(t.unstable_now()-M<R)}function D(){if(N=!1,ee){var $=t.unstable_now();M=$;var ae=!0;try{e:{k=!1,A&&(A=!1,z(S),S=-1),E=!0;var me=_;try{t:{for(H($),b=n(h);b!==null&&!(b.expirationTime>$&&j());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,_=b.priorityLevel;var le=_e(b.expirationTime<=$);if($=t.unstable_now(),typeof le=="function"){b.callback=le,H($),ae=!0;break t}b===n(h)&&i(h),H($)}else i(h);b=n(h)}if(b!==null)ae=!0;else{var L=n(f);L!==null&&he(te,L.startTime-$),ae=!1}}break e}finally{b=null,_=me,E=!1}ae=void 0}}finally{ae?F():ee=!1}}}var F;if(typeof P=="function")F=function(){P(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Me=U.port2;U.port1.onmessage=D,F=function(){Me.postMessage(null)}}else F=function(){O(D,0)};function he($,ae){S=O(function(){$(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function($){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var me=_;_=ae;try{return $()}finally{_=me}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=_;_=$;try{return ae()}finally{_=me}},t.unstable_scheduleCallback=function($,ae,me){var _e=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?_e+me:_e):me=_e,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=me+le,$={id:g++,callback:ae,priorityLevel:$,startTime:me,expirationTime:le,sortIndex:-1},me>_e?($.sortIndex=me,e(f,$),n(h)===null&&$===n(f)&&(A?(z(S),S=-1):A=!0,he(te,me-_e))):($.sortIndex=le,e(h,$),k||E||(k=!0,ee||(ee=!0,F()))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var ae=_;return function(){var me=_;_=ae;try{return $.apply(this,arguments)}finally{_=me}}}})(Ug)),Ug}var Pw;function xI(){return Pw||(Pw=1,Lg.exports=TI()),Lg.exports}var zg={exports:{}},hn={};var jw;function EI(){if(jw)return hn;jw=1;var t=Ty();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:h,containerInfo:f,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},hn.flushSync=function(h){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=g,i.d.f()}},hn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},hn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},hn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:E}):g==="script"&&i.d.X(h,{crossOrigin:b,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},hn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},hn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin);i.d.L(h,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},hn.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},hn.requestFormReset=function(h){i.d.r(h)},hn.unstable_batchedUpdates=function(h,f){return h(f)},hn.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},hn.useFormStatus=function(){return c.H.useHostTransitionStatus()},hn.version="19.2.0",hn}var Lw;function SI(){if(Lw)return zg.exports;Lw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zg.exports=EI(),zg.exports}var Uw;function AI(){if(Uw)return nu;Uw=1;var t=xI(),e=Ty(),n=SI();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,u=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),r;if(y===u)return h(p),s;y=y.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=y;else{for(var T=!1,C=p.child;C;){if(C===l){T=!0,l=p,u=y;break}if(C===u){T=!0,u=p,l=y;break}C=C.sibling}if(!T){for(C=y.child;C;){if(C===l){T=!0,l=y,u=p;break}if(C===u){T=!0,u=y,l=p;break}C=C.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),P=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function Me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case O:return"Profiler";case N:return"StrictMode";case te:return"Suspense";case ee:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case P:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case H:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return s=r.displayName||null,s!==null?s:Me(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return Me(r(s))}catch{}}return null}var he=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},_e=[],le=-1;function L(r){return{current:r}}function G(r){0>le||(r.current=_e[le],_e[le]=null,le--)}function ue(r,s){le++,_e[le]=r.current,r.current=s}var de=L(null),ye=L(null),we=L(null),xe=L(null);function ht(r,s){switch(ue(we,s),ue(ye,r),ue(de,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?ew(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=ew(s),r=tw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}G(de),ue(de,r)}function Ke(){G(de),G(ye),G(we)}function _n(r){r.memoizedState!==null&&ue(xe,r);var s=de.current,l=tw(s,r.type);s!==l&&(ue(ye,r),ue(de,l))}function Ln(r){ye.current===r&&(G(de),G(ye)),xe.current===r&&(G(xe),Wc._currentValue=me)}var wo,To;function Pi(r){if(wo===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);wo=s&&s[1]||"",To=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wo+r+To}var Wl=!1;function _a(r,s){if(!r||Wl)return"";Wl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var W=J}Reflect.construct(r,[],se)}else{try{se.call()}catch(J){W=J}r.call(se.prototype)}}else{try{throw Error()}catch(J){W=J}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],C=y[1];if(T&&C){var B=T.split(`
`),X=C.split(`
`);for(p=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(u===B.length||p===X.length)for(u=B.length-1,p=X.length-1;1<=u&&0<=p&&B[u]!==X[p];)p--;for(;1<=u&&0<=p;u--,p--)if(B[u]!==X[p]){if(u!==1||p!==1)do if(u--,p--,0>p||B[u]!==X[p]){var ne=`
`+B[u].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=u&&0<=p);break}}}finally{Wl=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Pi(l):""}function Zl(r,s){switch(r.tag){case 26:case 27:case 5:return Pi(r.type);case 16:return Pi("Lazy");case 13:return r.child!==s&&s!==null?Pi("Suspense Fallback"):Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 15:return _a(r.type,!1);case 11:return _a(r.type.render,!1);case 1:return _a(r.type,!0);case 31:return Pi("Activity");default:return""}}function Jl(r){try{var s="",l=null;do s+=Zl(r,l),l=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,Gt=t.unstable_scheduleCallback,ls=t.unstable_cancelCallback,jm=t.unstable_shouldYield,cd=t.unstable_requestPaint,wn=t.unstable_now,wa=t.unstable_getCurrentPriorityLevel,ec=t.unstable_ImmediatePriority,tc=t.unstable_UserBlockingPriority,cs=t.unstable_NormalPriority,Lm=t.unstable_LowPriority,ud=t.unstable_IdlePriority,dd=t.log,hd=t.unstable_setDisableYieldValue,yi=null,en=null;function Qn(r){if(typeof dd=="function"&&hd(r),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(yi,r)}catch{}}var At=Math.clz32?Math.clz32:md,fd=Math.log,xo=Math.LN2;function md(r){return r>>>=0,r===0?32:31-(fd(r)/xo|0)|0}var ji=256,Ta=262144,Ot=4194304;function Li(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ui(r,s,l){var u=r.pendingLanes;if(u===0)return 0;var p=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?p=Li(u):(T&=C,T!==0?p=Li(T):l||(l=C&~r,l!==0&&(p=Li(l))))):(C=u&~y,C!==0?p=Li(C):T!==0?p=Li(T):l||(l=u&~r,l!==0&&(p=Li(l)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:p}function vi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Um(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var r=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),r}function zi(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function xa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function zm(r,s,l,u,p,y){var T=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,B=r.expirationTimes,X=r.hiddenUpdates;for(l=T&~l;0<l;){var ne=31-At(l),se=1<<ne;C[ne]=0,B[ne]=-1;var W=X[ne];if(W!==null)for(X[ne]=null,ne=0;ne<W.length;ne++){var J=W[ne];J!==null&&(J.lane&=-536870913)}l&=~se}u!==0&&Ea(r,u,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~s))}function Ea(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-At(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function nc(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-At(l),p=1<<u;p&s|r[u]&s&&(r[u]|=s),l&=~p}}function ic(r,s){var l=s&-s;return l=(l&42)!==0?1:Sa(l),(l&(r.suspendedLanes|s))!==0?0:l}function Sa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Tr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function gd(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:Ew(r.type))}function bi(r,s){var l=ae.p;try{return ae.p=r,s()}finally{ae.p=l}}var _i=Math.random().toString(36).slice(2),Vt="__reactFiber$"+_i,Xt="__reactProps$"+_i,Bi="__reactContainer$"+_i,Eo="__reactEvents$"+_i,Bm="__reactListeners$"+_i,yd="__reactHandles$"+_i,vd="__reactResources$"+_i,Fi="__reactMarker$"+_i;function So(r){delete r[Vt],delete r[Xt],delete r[Eo],delete r[Bm],delete r[yd]}function qi(r){var s=r[Vt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Bi]||l[Vt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=lw(r);r!==null;){if(l=r[Vt])return l;r=lw(r)}return s}r=l,l=r.parentNode}return null}function Xn(r){if(r=r[Vt]||r[Bi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Un(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Hi(r){var s=r[vd];return s||(s=r[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(r){r[Fi]=!0}var rc=new Set,sc={};function $i(r,s){Gi(r,s),Gi(r+"Capture",s)}function Gi(r,s){for(sc[r]=s,r=0;r<s.length;r++)rc.add(s[r])}var ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oc={},lc={};function bd(r){return Mt.call(lc,r)?!0:Mt.call(oc,r)?!1:ac.test(r)?lc[r]=!0:(oc[r]=!0,!1)}function Ao(r,s,l){if(bd(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function zn(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function jt(r,s,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+u)}}function Wt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function us(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cc(r,s,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function nt(r){if(!r._valueTracker){var s=us(r)?"checked":"value";r._valueTracker=cc(r,s,""+r[s])}}function Aa(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=us(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function Ki(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ca=/[\n"\\]/g;function Sn(r){return r.replace(Ca,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Co(r,s,l,u,p,y,T,C){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Wt(s)):r.value!==""+Wt(s)&&(r.value=""+Wt(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?uc(r,T,Wt(s)):l!=null?uc(r,T,Wt(l)):u!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Wt(C):r.removeAttribute("name")}function _d(r,s,l,u,p,y,T,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){nt(r);return}l=l!=null?""+Wt(l):"",s=s!=null?""+Wt(s):l,C||s===r.value||(r.value=s),r.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),nt(r)}function uc(r,s,l){s==="number"&&Ki(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function ds(r,s,l,u){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Wt(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function wd(r,s,l){if(s!=null&&(s=""+Wt(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+Wt(l):""}function hs(r,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(i(92));if(he(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=Wt(s),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),nt(r)}function An(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Td=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dc(r,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,l):typeof l!="number"||l===0||Td.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function hc(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&l[p]!==u&&dc(r,p,u)}else for(var y in s)s.hasOwnProperty(y)&&dc(r,y,s[y])}function Ro(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(r){return fs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function wi(){}var fc=null;function Wn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ms=null,Yi=null;function Ra(r){var s=Xn(r);if(s&&(r=s.stateNode)){var l=r[Xt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Co(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Sn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var p=u[Xt]||null;if(!p)throw Error(i(90));Co(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===r.form&&Aa(u)}break e;case"textarea":wd(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ds(r,!!l.multiple,s,!1)}}}var Io=!1;function ps(r,s,l){if(Io)return r(s,l);Io=!0;try{var u=r(s);return u}finally{if(Io=!1,(ms!==null||Yi!==null)&&(gh(),ms&&(s=ms,r=Yi,Yi=ms=null,Ra(s),r)))for(s=0;s<r.length;s++)Ra(r[s])}}function Ti(r,s){var l=r.stateNode;if(l===null)return null;var u=l[Xt]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(Zn)try{var st={};Object.defineProperty(st,"passive",{get:function(){Na=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Na=!1}var Qi=null,mc=null,Ia=null;function pc(){if(Ia)return Ia;var r,s=mc,l=s.length,u,p="value"in Qi?Qi.value:Qi.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var T=l-r;for(u=1;u<=T&&s[l-u]===p[y-u];u++);return Ia=p.slice(r,1<u?1-u:void 0)}function ka(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function xr(){return!0}function xi(){return!1}function tn(r){function s(l,u,p,y,T){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xr:xi,this.isPropagationStopped=xi,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),s}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=tn(Er),gs=b({},Er,{view:0,detail:0}),gc=tn(gs),ys,ko,Wi,Do=b({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wi&&(Wi&&r.type==="mousemove"?(ys=r.screenX-Wi.screenX,ko=r.screenY-Wi.screenY):ko=ys=0,Wi=r),ys)},movementY:function(r){return"movementY"in r?r.movementY:ko}}),yc=tn(Do),Da=b({},Do,{dataTransfer:0}),Ed=tn(Da),Sd=b({},gs,{relatedTarget:0}),Ma=tn(Sd),vc=b({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Ad=tn(vc),Mo=b({},Er,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Cd=tn(Mo),Rd=b({},Er,{data:0}),Zi=tn(Rd),Nd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dd(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=kd[r])?!!s[r]:!1}function vs(){return Dd}var Tn=b({},gs,{key:function(r){if(r.key){var s=Nd[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ka(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Id[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(r){return r.type==="keypress"?ka(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ka(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Md=tn(Tn),Od=b({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sr=tn(Od),m=b({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),w=tn(m),x=b({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=tn(x),Y=b({},Do,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=tn(Y),fe=b({},Er,{newState:0,oldState:0}),Pe=tn(fe),Ct=[9,13,27,32],Je=Zn&&"CompositionEvent"in window,pt=null;Zn&&"documentMode"in document&&(pt=document.documentMode);var Jn=Zn&&"TextEvent"in window&&!pt,Ji=Zn&&(!Je||pt&&8<pt&&11>=pt),Ei=" ",Si=!1;function Oa(r,s){switch(r){case"keyup":return Ct.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Vo=!1;function FR(r,s){switch(r){case"compositionend":return Oo(s);case"keypress":return s.which!==32?null:(Si=!0,Ei);case"textInput":return r=s.data,r===Ei&&Si?null:r;default:return null}}function qR(r,s){if(Vo)return r==="compositionend"||!Je&&Oa(r,s)?(r=pc(),Ia=mc=Qi=null,Vo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ji&&s.locale!=="ko"?null:s.data;default:return null}}var HR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function db(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!HR[r.type]:s==="textarea"}function hb(r,s,l,u){ms?Yi?Yi.push(u):Yi=[u]:ms=u,s=xh(s,"onChange"),0<s.length&&(l=new Xi("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var bc=null,_c=null;function $R(r){Y1(r,0)}function Vd(r){var s=Un(r);if(Aa(s))return r}function fb(r,s){if(r==="change")return s}var mb=!1;if(Zn){var Fm;if(Zn){var qm="oninput"in document;if(!qm){var pb=document.createElement("div");pb.setAttribute("oninput","return;"),qm=typeof pb.oninput=="function"}Fm=qm}else Fm=!1;mb=Fm&&(!document.documentMode||9<document.documentMode)}function gb(){bc&&(bc.detachEvent("onpropertychange",yb),_c=bc=null)}function yb(r){if(r.propertyName==="value"&&Vd(_c)){var s=[];hb(s,_c,r,Wn(r)),ps($R,s)}}function GR(r,s,l){r==="focusin"?(gb(),bc=s,_c=l,bc.attachEvent("onpropertychange",yb)):r==="focusout"&&gb()}function KR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Vd(_c)}function YR(r,s){if(r==="click")return Vd(s)}function QR(r,s){if(r==="input"||r==="change")return Vd(s)}function XR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Bn=typeof Object.is=="function"?Object.is:XR;function wc(r,s){if(Bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!Mt.call(s,p)||!Bn(r[p],s[p]))return!1}return!0}function vb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bb(r,s){var l=vb(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=vb(l)}}function _b(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?_b(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function wb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ki(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Ki(r.document)}return s}function Hm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var WR=Zn&&"documentMode"in document&&11>=document.documentMode,Po=null,$m=null,Tc=null,Gm=!1;function Tb(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Gm||Po==null||Po!==Ki(u)||(u=Po,"selectionStart"in u&&Hm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Tc&&wc(Tc,u)||(Tc=u,u=xh($m,"onSelect"),0<u.length&&(s=new Xi("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=Po)))}function Va(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var jo={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},Km={},xb={};Zn&&(xb=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Pa(r){if(Km[r])return Km[r];if(!jo[r])return r;var s=jo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in xb)return Km[r]=s[l];return r}var Eb=Pa("animationend"),Sb=Pa("animationiteration"),Ab=Pa("animationstart"),ZR=Pa("transitionrun"),JR=Pa("transitionstart"),eN=Pa("transitioncancel"),Cb=Pa("transitionend"),Rb=new Map,Ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ym.push("scrollEnd");function Ai(r,s){Rb.set(r,s),$i(s,[r])}var Pd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ei=[],Lo=0,Qm=0;function jd(){for(var r=Lo,s=Qm=Lo=0;s<r;){var l=ei[s];ei[s++]=null;var u=ei[s];ei[s++]=null;var p=ei[s];ei[s++]=null;var y=ei[s];if(ei[s++]=null,u!==null&&p!==null){var T=u.pending;T===null?p.next=p:(p.next=T.next,T.next=p),u.pending=p}y!==0&&Nb(l,p,y)}}function Ld(r,s,l,u){ei[Lo++]=r,ei[Lo++]=s,ei[Lo++]=l,ei[Lo++]=u,Qm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Xm(r,s,l,u){return Ld(r,s,l,u),Ud(r)}function ja(r,s){return Ld(r,null,null,s),Ud(r)}function Nb(r,s,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var p=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&s!==null&&(p=31-At(l),r=y.hiddenUpdates,u=r[p],u===null?r[p]=[s]:u.push(s),s.lane=l|536870912),y):null}function Ud(r){if(50<Hc)throw Hc=0,sg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Uo={};function tN(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(r,s,l,u){return new tN(r,s,l,u)}function Wm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ar(r,s){var l=r.alternate;return l===null?(l=Fn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Ib(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function zd(r,s,l,u,p,y){var T=0;if(u=r,typeof r=="function")Wm(r)&&(T=1);else if(typeof r=="string")T=aI(r,l,de.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=Fn(31,l,s,p),r.elementType=M,r.lanes=y,r;case A:return La(l.children,p,y,s);case N:T=8,p|=24;break;case O:return r=Fn(12,l,s,p|2),r.elementType=O,r.lanes=y,r;case te:return r=Fn(13,l,s,p),r.elementType=te,r.lanes=y,r;case ee:return r=Fn(19,l,s,p),r.elementType=ee,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:T=10;break e;case z:T=9;break e;case H:T=11;break e;case S:T=14;break e;case R:T=16,u=null;break e}T=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Fn(T,l,s,p),s.elementType=r,s.type=u,s.lanes=y,s}function La(r,s,l,u){return r=Fn(7,r,u,s),r.lanes=l,r}function Zm(r,s,l){return r=Fn(6,r,null,s),r.lanes=l,r}function kb(r){var s=Fn(18,null,null,0);return s.stateNode=r,s}function Jm(r,s,l){return s=Fn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Db=new WeakMap;function ti(r,s){if(typeof r=="object"&&r!==null){var l=Db.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Jl(s)},Db.set(r,s),s)}return{value:r,source:s,stack:Jl(s)}}var zo=[],Bo=0,Bd=null,xc=0,ni=[],ii=0,bs=null,er=1,tr="";function Cr(r,s){zo[Bo++]=xc,zo[Bo++]=Bd,Bd=r,xc=s}function Mb(r,s,l){ni[ii++]=er,ni[ii++]=tr,ni[ii++]=bs,bs=r;var u=er;r=tr;var p=32-At(u)-1;u&=~(1<<p),l+=1;var y=32-At(s)+p;if(30<y){var T=p-p%5;y=(u&(1<<T)-1).toString(32),u>>=T,p-=T,er=1<<32-At(s)+p|l<<p|u,tr=y+r}else er=1<<y|l<<p|u,tr=r}function ep(r){r.return!==null&&(Cr(r,1),Mb(r,1,0))}function tp(r){for(;r===Bd;)Bd=zo[--Bo],zo[Bo]=null,xc=zo[--Bo],zo[Bo]=null;for(;r===bs;)bs=ni[--ii],ni[ii]=null,tr=ni[--ii],ni[ii]=null,er=ni[--ii],ni[ii]=null}function Ob(r,s){ni[ii++]=er,ni[ii++]=tr,ni[ii++]=bs,er=s.id,tr=s.overflow,bs=r}var nn=null,ft=null,Ye=!1,_s=null,ri=!1,np=Error(i(519));function ws(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ec(ti(s,r)),np}function Vb(r){var s=r.stateNode,l=r.type,u=r.memoizedProps;switch(s[Vt]=r,s[Xt]=u,l){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(l=0;l<Gc.length;l++)Be(Gc[l],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),_d(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),hs(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||Z1(s.textContent,l)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=wi),s=!0):s=!1,s||ws(r,!0)}function Pb(r){for(nn=r.return;nn;)switch(nn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:nn=nn.return}}function Fo(r){if(r!==nn)return!1;if(!Ye)return Pb(r),Ye=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||_g(r.type,r.memoizedProps)),l=!l),l&&ft&&ws(r),Pb(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ft=ow(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ft=ow(r)}else s===27?(s=ft,Vs(r.type)?(r=Sg,Sg=null,ft=r):ft=s):ft=nn?ai(r.stateNode.nextSibling):null;return!0}function Ua(){ft=nn=null,Ye=!1}function ip(){var r=_s;return r!==null&&(In===null?In=r:In.push.apply(In,r),_s=null),r}function Ec(r){_s===null?_s=[r]:_s.push(r)}var rp=L(null),za=null,Rr=null;function Ts(r,s,l){ue(rp,s._currentValue),s._currentValue=l}function Nr(r){r._currentValue=rp.current,G(rp)}function sp(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function ap(r,s,l,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=p;for(var B=0;B<s.length;B++)if(C.context===s[B]){y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),sp(y.return,l,r),u||(T=null);break e}y=C.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),sp(T,l,r),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===r){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function qo(r,s,l,u){r=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=p.type;Bn(p.pendingProps.value,T.value)||(r!==null?r.push(C):r=[C])}}else if(p===xe.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Wc):r=[Wc])}p=p.return}r!==null&&ap(s,r,l,u),s.flags|=262144}function Fd(r){for(r=r.firstContext;r!==null;){if(!Bn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ba(r){za=r,Rr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function rn(r){return jb(za,r)}function qd(r,s){return za===null&&Ba(r),jb(r,s)}function jb(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Rr===null){if(r===null)throw Error(i(308));Rr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Rr=Rr.next=s;return l}var nN=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},iN=t.unstable_scheduleCallback,rN=t.unstable_NormalPriority,Lt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new nN,data:new Map,refCount:0}}function Sc(r){r.refCount--,r.refCount===0&&iN(rN,function(){r.controller.abort()})}var Ac=null,lp=0,Ho=0,$o=null;function sN(r,s){if(Ac===null){var l=Ac=[];lp=0,Ho=dg(),$o={status:"pending",value:void 0,then:function(u){l.push(u)}}}return lp++,s.then(Lb,Lb),s}function Lb(){if(--lp===0&&Ac!==null){$o!==null&&($o.status="fulfilled");var r=Ac;Ac=null,Ho=0,$o=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function aN(r,s){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Ub=$.S;$.S=function(r,s){T1=wn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&sN(r,s),Ub!==null&&Ub(r,s)};var Fa=L(null);function cp(){var r=Fa.current;return r!==null?r:ct.pooledCache}function Hd(r,s){s===null?ue(Fa,Fa.current):ue(Fa,s.pool)}function zb(){var r=cp();return r===null?null:{parent:Lt._currentValue,pool:r}}var Go=Error(i(460)),up=Error(i(474)),$d=Error(i(542)),Gd={then:function(){}};function Bb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Fb(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(wi,wi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Hb(r),r;default:if(typeof s.status=="string")s.then(wi,wi);else{if(r=ct,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Hb(r),r}throw Ha=s,Go}}function qa(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ha=l,Go):l}}var Ha=null;function qb(){if(Ha===null)throw Error(i(459));var r=Ha;return Ha=null,r}function Hb(r){if(r===Go||r===$d)throw Error(i(483))}var Ko=null,Cc=0;function Kd(r){var s=Cc;return Cc+=1,Ko===null&&(Ko=[]),Fb(Ko,r,s)}function Rc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Yd(r,s){throw s.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function $b(r){function s(K,q){if(r){var Q=K.deletions;Q===null?(K.deletions=[q],K.flags|=16):Q.push(q)}}function l(K,q){if(!r)return null;for(;q!==null;)s(K,q),q=q.sibling;return null}function u(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function p(K,q){return K=Ar(K,q),K.index=0,K.sibling=null,K}function y(K,q,Q){return K.index=Q,r?(Q=K.alternate,Q!==null?(Q=Q.index,Q<q?(K.flags|=67108866,q):Q):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function T(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function C(K,q,Q,ie){return q===null||q.tag!==6?(q=Zm(Q,K.mode,ie),q.return=K,q):(q=p(q,Q),q.return=K,q)}function B(K,q,Q,ie){var Ee=Q.type;return Ee===A?ne(K,q,Q.props.children,ie,Q.key):q!==null&&(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&qa(Ee)===q.type)?(q=p(q,Q.props),Rc(q,Q),q.return=K,q):(q=zd(Q.type,Q.key,Q.props,null,K.mode,ie),Rc(q,Q),q.return=K,q)}function X(K,q,Q,ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=Jm(Q,K.mode,ie),q.return=K,q):(q=p(q,Q.children||[]),q.return=K,q)}function ne(K,q,Q,ie,Ee){return q===null||q.tag!==7?(q=La(Q,K.mode,ie,Ee),q.return=K,q):(q=p(q,Q),q.return=K,q)}function se(K,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Zm(""+q,K.mode,Q),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return Q=zd(q.type,q.key,q.props,null,K.mode,Q),Rc(Q,q),Q.return=K,Q;case k:return q=Jm(q,K.mode,Q),q.return=K,q;case R:return q=qa(q),se(K,q,Q)}if(he(q)||F(q))return q=La(q,K.mode,Q,null),q.return=K,q;if(typeof q.then=="function")return se(K,Kd(q),Q);if(q.$$typeof===P)return se(K,qd(K,q),Q);Yd(K,q)}return null}function W(K,q,Q,ie){var Ee=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ee!==null?null:C(K,q,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case E:return Q.key===Ee?B(K,q,Q,ie):null;case k:return Q.key===Ee?X(K,q,Q,ie):null;case R:return Q=qa(Q),W(K,q,Q,ie)}if(he(Q)||F(Q))return Ee!==null?null:ne(K,q,Q,ie,null);if(typeof Q.then=="function")return W(K,q,Kd(Q),ie);if(Q.$$typeof===P)return W(K,q,qd(K,Q),ie);Yd(K,Q)}return null}function J(K,q,Q,ie,Ee){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return K=K.get(Q)||null,C(q,K,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return K=K.get(ie.key===null?Q:ie.key)||null,B(q,K,ie,Ee);case k:return K=K.get(ie.key===null?Q:ie.key)||null,X(q,K,ie,Ee);case R:return ie=qa(ie),J(K,q,Q,ie,Ee)}if(he(ie)||F(ie))return K=K.get(Q)||null,ne(q,K,ie,Ee,null);if(typeof ie.then=="function")return J(K,q,Q,Kd(ie),Ee);if(ie.$$typeof===P)return J(K,q,Q,qd(q,ie),Ee);Yd(q,ie)}return null}function ve(K,q,Q,ie){for(var Ee=null,Xe=null,be=q,Le=q=0,qe=null;be!==null&&Le<Q.length;Le++){be.index>Le?(qe=be,be=null):qe=be.sibling;var We=W(K,be,Q[Le],ie);if(We===null){be===null&&(be=qe);break}r&&be&&We.alternate===null&&s(K,be),q=y(We,q,Le),Xe===null?Ee=We:Xe.sibling=We,Xe=We,be=qe}if(Le===Q.length)return l(K,be),Ye&&Cr(K,Le),Ee;if(be===null){for(;Le<Q.length;Le++)be=se(K,Q[Le],ie),be!==null&&(q=y(be,q,Le),Xe===null?Ee=be:Xe.sibling=be,Xe=be);return Ye&&Cr(K,Le),Ee}for(be=u(be);Le<Q.length;Le++)qe=J(be,K,Le,Q[Le],ie),qe!==null&&(r&&qe.alternate!==null&&be.delete(qe.key===null?Le:qe.key),q=y(qe,q,Le),Xe===null?Ee=qe:Xe.sibling=qe,Xe=qe);return r&&be.forEach(function(zs){return s(K,zs)}),Ye&&Cr(K,Le),Ee}function Ae(K,q,Q,ie){if(Q==null)throw Error(i(151));for(var Ee=null,Xe=null,be=q,Le=q=0,qe=null,We=Q.next();be!==null&&!We.done;Le++,We=Q.next()){be.index>Le?(qe=be,be=null):qe=be.sibling;var zs=W(K,be,We.value,ie);if(zs===null){be===null&&(be=qe);break}r&&be&&zs.alternate===null&&s(K,be),q=y(zs,q,Le),Xe===null?Ee=zs:Xe.sibling=zs,Xe=zs,be=qe}if(We.done)return l(K,be),Ye&&Cr(K,Le),Ee;if(be===null){for(;!We.done;Le++,We=Q.next())We=se(K,We.value,ie),We!==null&&(q=y(We,q,Le),Xe===null?Ee=We:Xe.sibling=We,Xe=We);return Ye&&Cr(K,Le),Ee}for(be=u(be);!We.done;Le++,We=Q.next())We=J(be,K,Le,We.value,ie),We!==null&&(r&&We.alternate!==null&&be.delete(We.key===null?Le:We.key),q=y(We,q,Le),Xe===null?Ee=We:Xe.sibling=We,Xe=We);return r&&be.forEach(function(yI){return s(K,yI)}),Ye&&Cr(K,Le),Ee}function lt(K,q,Q,ie){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case E:e:{for(var Ee=Q.key;q!==null;){if(q.key===Ee){if(Ee=Q.type,Ee===A){if(q.tag===7){l(K,q.sibling),ie=p(q,Q.props.children),ie.return=K,K=ie;break e}}else if(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&qa(Ee)===q.type){l(K,q.sibling),ie=p(q,Q.props),Rc(ie,Q),ie.return=K,K=ie;break e}l(K,q);break}else s(K,q);q=q.sibling}Q.type===A?(ie=La(Q.props.children,K.mode,ie,Q.key),ie.return=K,K=ie):(ie=zd(Q.type,Q.key,Q.props,null,K.mode,ie),Rc(ie,Q),ie.return=K,K=ie)}return T(K);case k:e:{for(Ee=Q.key;q!==null;){if(q.key===Ee)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){l(K,q.sibling),ie=p(q,Q.children||[]),ie.return=K,K=ie;break e}else{l(K,q);break}else s(K,q);q=q.sibling}ie=Jm(Q,K.mode,ie),ie.return=K,K=ie}return T(K);case R:return Q=qa(Q),lt(K,q,Q,ie)}if(he(Q))return ve(K,q,Q,ie);if(F(Q)){if(Ee=F(Q),typeof Ee!="function")throw Error(i(150));return Q=Ee.call(Q),Ae(K,q,Q,ie)}if(typeof Q.then=="function")return lt(K,q,Kd(Q),ie);if(Q.$$typeof===P)return lt(K,q,qd(K,Q),ie);Yd(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(l(K,q.sibling),ie=p(q,Q),ie.return=K,K=ie):(l(K,q),ie=Zm(Q,K.mode,ie),ie.return=K,K=ie),T(K)):l(K,q)}return function(K,q,Q,ie){try{Cc=0;var Ee=lt(K,q,Q,ie);return Ko=null,Ee}catch(be){if(be===Go||be===$d)throw be;var Xe=Fn(29,be,null,K.mode);return Xe.lanes=ie,Xe.return=K,Xe}finally{}}}var $a=$b(!0),Gb=$b(!1),xs=!1;function dp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Es(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ss(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Ud(r),Nb(r,null,l),s}return Ld(r,u,s,l),Ud(r)}function Nc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,nc(r,l)}}function fp(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var mp=!1;function Ic(){if(mp){var r=$o;if(r!==null)throw r}}function kc(r,s,l,u){mp=!1;var p=r.updateQueue;xs=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var B=C,X=B.next;B.next=null,T===null?y=X:T.next=X,T=B;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==T&&(C===null?ne.firstBaseUpdate=X:C.next=X,ne.lastBaseUpdate=B))}if(y!==null){var se=p.baseState;T=0,ne=X=B=null,C=y;do{var W=C.lane&-536870913,J=W!==C.lane;if(J?(Fe&W)===W:(u&W)===W){W!==0&&W===Ho&&(mp=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ve=r,Ae=C;W=s;var lt=l;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){se=ve.call(lt,se,W);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,W=typeof ve=="function"?ve.call(lt,se,W):ve,W==null)break e;se=b({},se,W);break e;case 2:xs=!0}}W=C.callback,W!==null&&(r.flags|=64,J&&(r.flags|=8192),J=p.callbacks,J===null?p.callbacks=[W]:J.push(W))}else J={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(X=ne=J,B=se):ne=ne.next=J,T|=W;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;J=C,C=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ne===null&&(B=se),p.baseState=B,p.firstBaseUpdate=X,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),Is|=T,r.lanes=T,r.memoizedState=se}}function Kb(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Yb(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Kb(l[r],s)}var Yo=L(null),Qd=L(0);function Qb(r,s){r=Lr,ue(Qd,r),ue(Yo,s),Lr=r|s.baseLanes}function pp(){ue(Qd,Lr),ue(Yo,Yo.current)}function gp(){Lr=Qd.current,G(Yo),G(Qd)}var qn=L(null),si=null;function As(r){var s=r.alternate;ue(Rt,Rt.current&1),ue(qn,r),si===null&&(s===null||Yo.current!==null||s.memoizedState!==null)&&(si=r)}function yp(r){ue(Rt,Rt.current),ue(qn,r),si===null&&(si=r)}function Xb(r){r.tag===22?(ue(Rt,Rt.current),ue(qn,r),si===null&&(si=r)):Cs()}function Cs(){ue(Rt,Rt.current),ue(qn,qn.current)}function Hn(r){G(qn),si===r&&(si=null),G(Rt)}var Rt=L(0);function Xd(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||xg(l)||Eg(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ir=0,je=null,at=null,Ut=null,Wd=!1,Qo=!1,Ga=!1,Zd=0,Dc=0,Xo=null,oN=0;function Tt(){throw Error(i(321))}function vp(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Bn(r[l],s[l]))return!1;return!0}function bp(r,s,l,u,p,y){return Ir=y,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?M_:Op,Ga=!1,y=l(u,p),Ga=!1,Qo&&(y=Zb(s,l,u,p)),Wb(r),y}function Wb(r){$.H=Vc;var s=at!==null&&at.next!==null;if(Ir=0,Ut=at=je=null,Wd=!1,Dc=0,Xo=null,s)throw Error(i(300));r===null||zt||(r=r.dependencies,r!==null&&Fd(r)&&(zt=!0))}function Zb(r,s,l,u){je=r;var p=0;do{if(Qo&&(Xo=null),Dc=0,Qo=!1,25<=p)throw Error(i(301));if(p+=1,Ut=at=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=O_,y=s(l,u)}while(Qo);return y}function lN(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?Mc(s):s,r=r.useState()[0],(at!==null?at.memoizedState:null)!==r&&(je.flags|=1024),s}function _p(){var r=Zd!==0;return Zd=0,r}function wp(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Tp(r){if(Wd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wd=!1}Ir=0,Ut=at=je=null,Qo=!1,Dc=Zd=0,Xo=null}function xn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?je.memoizedState=Ut=r:Ut=Ut.next=r,Ut}function Nt(){if(at===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=at.next;var s=Ut===null?je.memoizedState:Ut.next;if(s!==null)Ut=s,at=r;else{if(r===null)throw je.alternate===null?Error(i(467)):Error(i(310));at=r,r={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ut===null?je.memoizedState=Ut=r:Ut=Ut.next=r}return Ut}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mc(r){var s=Dc;return Dc+=1,Xo===null&&(Xo=[]),r=Fb(Xo,r,s),s=je,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?M_:Op),r}function eh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Mc(r);if(r.$$typeof===P)return rn(r)}throw Error(i(438,String(r)))}function xp(r){var s=null,l=je.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Jd(),je.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),u=0;u<r;u++)l[u]=j;return s.index++,l}function kr(r,s){return typeof s=="function"?s(r):s}function th(r){var s=Nt();return Ep(s,at,r)}function Ep(r,s,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=r.baseQueue,y=u.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}s.baseQueue=p=y,u.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{s=p.next;var C=T=null,B=null,X=s,ne=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(Fe&se)===se:(Ir&se)===se){var W=X.revertLane;if(W===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Ho&&(ne=!0);else if((Ir&W)===W){X=X.next,W===Ho&&(ne=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(C=B=se,T=y):B=B.next=se,je.lanes|=W,Is|=W;se=X.action,Ga&&l(y,se),y=X.hasEagerState?X.eagerState:l(y,se)}else W={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(C=B=W,T=y):B=B.next=W,je.lanes|=se,Is|=se;X=X.next}while(X!==null&&X!==s);if(B===null?T=y:B.next=C,!Bn(y,r.memoizedState)&&(zt=!0,ne&&(l=$o,l!==null)))throw l;r.memoizedState=y,r.baseState=T,r.baseQueue=B,u.lastRenderedState=y}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Sp(r){var s=Nt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);Bn(y,s.memoizedState)||(zt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,u]}function Jb(r,s,l){var u=je,p=Nt(),y=Ye;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=s();var T=!Bn((at||p).memoizedState,l);if(T&&(p.memoizedState=l,zt=!0),p=p.queue,Rp(n_.bind(null,u,p,r),[r]),p.getSnapshot!==s||T||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Wo(9,{destroy:void 0},t_.bind(null,u,p,l,s),null),ct===null)throw Error(i(349));y||(Ir&127)!==0||e_(u,s,l)}return l}function e_(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=je.updateQueue,s===null?(s=Jd(),je.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function t_(r,s,l,u){s.value=l,s.getSnapshot=u,i_(s)&&r_(r)}function n_(r,s,l){return l(function(){i_(s)&&r_(r)})}function i_(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Bn(r,l)}catch{return!0}}function r_(r){var s=ja(r,2);s!==null&&kn(s,r,2)}function Ap(r){var s=xn();if(typeof r=="function"){var l=r;if(r=l(),Ga){Qn(!0);try{l()}finally{Qn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:r},s}function s_(r,s,l,u){return r.baseState=l,Ep(r,at,typeof u=="function"?u:kr)}function cN(r,s,l,u,p){if(rh(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};$.T!==null?l(!0):y.isTransition=!1,u(y),l=s.pending,l===null?(y.next=s.pending=y,a_(s,y)):(y.next=l.next,s.pending=l.next=y)}}function a_(r,s){var l=s.action,u=s.payload,p=r.state;if(s.isTransition){var y=$.T,T={};$.T=T;try{var C=l(p,u),B=$.S;B!==null&&B(T,C),o_(r,s,C)}catch(X){Cp(r,s,X)}finally{y!==null&&T.types!==null&&(y.types=T.types),$.T=y}}else try{y=l(p,u),o_(r,s,y)}catch(X){Cp(r,s,X)}}function o_(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){l_(r,s,u)},function(u){return Cp(r,s,u)}):l_(r,s,l)}function l_(r,s,l){s.status="fulfilled",s.value=l,c_(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,a_(r,l)))}function Cp(r,s,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,c_(s),s=s.next;while(s!==u)}r.action=null}function c_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function u_(r,s){return s}function d_(r,s){if(Ye){var l=ct.formState;if(l!==null){e:{var u=je;if(Ye){if(ft){t:{for(var p=ft,y=ri;p.nodeType!==8;){if(!y){p=null;break t}if(p=ai(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){ft=ai(p.nextSibling),u=p.data==="F!";break e}}ws(u)}u=!1}u&&(s=l[0])}}return l=xn(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u_,lastRenderedState:s},l.queue=u,l=I_.bind(null,je,u),u.dispatch=l,u=Ap(!1),y=Mp.bind(null,je,!1,u.queue),u=xn(),p={state:s,dispatch:null,action:r,pending:null},u.queue=p,l=cN.bind(null,je,p,y,l),p.dispatch=l,u.memoizedState=r,[s,l,!1]}function h_(r){var s=Nt();return f_(s,at,r)}function f_(r,s,l){if(s=Ep(r,s,u_)[0],r=th(kr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Mc(s)}catch(T){throw T===Go?$d:T}else u=s;s=Nt();var p=s.queue,y=p.dispatch;return l!==s.memoizedState&&(je.flags|=2048,Wo(9,{destroy:void 0},uN.bind(null,p,l),null)),[u,y,r]}function uN(r,s){r.action=s}function m_(r){var s=Nt(),l=at;if(l!==null)return f_(s,l,r);Nt(),s=s.memoizedState,l=Nt();var u=l.queue.dispatch;return l.memoizedState=r,[s,u,!1]}function Wo(r,s,l,u){return r={tag:r,create:l,deps:u,inst:s,next:null},s=je.updateQueue,s===null&&(s=Jd(),je.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r),r}function p_(){return Nt().memoizedState}function nh(r,s,l,u){var p=xn();je.flags|=r,p.memoizedState=Wo(1|s,{destroy:void 0},l,u===void 0?null:u)}function ih(r,s,l,u){var p=Nt();u=u===void 0?null:u;var y=p.memoizedState.inst;at!==null&&u!==null&&vp(u,at.memoizedState.deps)?p.memoizedState=Wo(s,y,l,u):(je.flags|=r,p.memoizedState=Wo(1|s,y,l,u))}function g_(r,s){nh(8390656,8,r,s)}function Rp(r,s){ih(2048,8,r,s)}function dN(r){je.flags|=4;var s=je.updateQueue;if(s===null)s=Jd(),je.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function y_(r){var s=Nt().memoizedState;return dN({ref:s,nextImpl:r}),function(){if((et&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function v_(r,s){return ih(4,2,r,s)}function b_(r,s){return ih(4,4,r,s)}function __(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function w_(r,s,l){l=l!=null?l.concat([r]):null,ih(4,4,__.bind(null,s,r),l)}function Np(){}function T_(r,s){var l=Nt();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&vp(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function x_(r,s){var l=Nt();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&vp(s,u[1]))return u[0];if(u=r(),Ga){Qn(!0);try{r()}finally{Qn(!1)}}return l.memoizedState=[u,s],u}function Ip(r,s,l){return l===void 0||(Ir&1073741824)!==0&&(Fe&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=E1(),je.lanes|=r,Is|=r,l)}function E_(r,s,l,u){return Bn(l,s)?l:Yo.current!==null?(r=Ip(r,l,u),Bn(r,s)||(zt=!0),r):(Ir&42)===0||(Ir&1073741824)!==0&&(Fe&261930)===0?(zt=!0,r.memoizedState=l):(r=E1(),je.lanes|=r,Is|=r,s)}function S_(r,s,l,u,p){var y=ae.p;ae.p=y!==0&&8>y?y:8;var T=$.T,C={};$.T=C,Mp(r,!1,s,l);try{var B=p(),X=$.S;if(X!==null&&X(C,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=aN(B,u);Oc(r,s,ne,Kn(r))}else Oc(r,s,u,Kn(r))}catch(se){Oc(r,s,{then:function(){},status:"rejected",reason:se},Kn())}finally{ae.p=y,T!==null&&C.types!==null&&(T.types=C.types),$.T=T}}function hN(){}function kp(r,s,l,u){if(r.tag!==5)throw Error(i(476));var p=A_(r).queue;S_(r,p,s,me,l===null?hN:function(){return C_(r),l(u)})}function A_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:me},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function C_(r){var s=A_(r);s.next===null&&(s=r.alternate.memoizedState),Oc(r,s.next.queue,{},Kn())}function Dp(){return rn(Wc)}function R_(){return Nt().memoizedState}function N_(){return Nt().memoizedState}function fN(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Kn();r=Es(l);var u=Ss(s,r,l);u!==null&&(kn(u,s,l),Nc(u,s,l)),s={cache:op()},r.payload=s;return}s=s.return}}function mN(r,s,l){var u=Kn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},rh(r)?k_(s,l):(l=Xm(r,s,l,u),l!==null&&(kn(l,r,u),D_(l,s,u)))}function I_(r,s,l){var u=Kn();Oc(r,s,l,u)}function Oc(r,s,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(rh(r))k_(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,C=y(T,l);if(p.hasEagerState=!0,p.eagerState=C,Bn(C,T))return Ld(r,s,p,0),ct===null&&jd(),!1}catch{}finally{}if(l=Xm(r,s,p,u),l!==null)return kn(l,r,u),D_(l,s,u),!0}return!1}function Mp(r,s,l,u){if(u={lane:2,revertLane:dg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},rh(r)){if(s)throw Error(i(479))}else s=Xm(r,l,u,2),s!==null&&kn(s,r,2)}function rh(r){var s=r.alternate;return r===je||s!==null&&s===je}function k_(r,s){Qo=Wd=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function D_(r,s,l){if((l&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,nc(r,l)}}var Vc={readContext:rn,use:eh,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Vc.useEffectEvent=Tt;var M_={readContext:rn,use:eh,useCallback:function(r,s){return xn().memoizedState=[r,s===void 0?null:s],r},useContext:rn,useEffect:g_,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,nh(4194308,4,__.bind(null,s,r),l)},useLayoutEffect:function(r,s){return nh(4194308,4,r,s)},useInsertionEffect:function(r,s){nh(4,2,r,s)},useMemo:function(r,s){var l=xn();s=s===void 0?null:s;var u=r();if(Ga){Qn(!0);try{r()}finally{Qn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(r,s,l){var u=xn();if(l!==void 0){var p=l(s);if(Ga){Qn(!0);try{l(s)}finally{Qn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=mN.bind(null,je,r),[u.memoizedState,r]},useRef:function(r){var s=xn();return r={current:r},s.memoizedState=r},useState:function(r){r=Ap(r);var s=r.queue,l=I_.bind(null,je,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Np,useDeferredValue:function(r,s){var l=xn();return Ip(l,r,s)},useTransition:function(){var r=Ap(!1);return r=S_.bind(null,je,r.queue,!0,!1),xn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var u=je,p=xn();if(Ye){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ct===null)throw Error(i(349));(Fe&127)!==0||e_(u,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,g_(n_.bind(null,u,y,r),[r]),u.flags|=2048,Wo(9,{destroy:void 0},t_.bind(null,u,y,l,s),null),l},useId:function(){var r=xn(),s=ct.identifierPrefix;if(Ye){var l=tr,u=er;l=(u&~(1<<32-At(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Zd++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=oN++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Dp,useFormState:d_,useActionState:d_,useOptimistic:function(r){var s=xn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Mp.bind(null,je,!0,l),l.dispatch=s,[r,s]},useMemoCache:xp,useCacheRefresh:function(){return xn().memoizedState=fN.bind(null,je)},useEffectEvent:function(r){var s=xn(),l={impl:r};return s.memoizedState=l,function(){if((et&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Op={readContext:rn,use:eh,useCallback:T_,useContext:rn,useEffect:Rp,useImperativeHandle:w_,useInsertionEffect:v_,useLayoutEffect:b_,useMemo:x_,useReducer:th,useRef:p_,useState:function(){return th(kr)},useDebugValue:Np,useDeferredValue:function(r,s){var l=Nt();return E_(l,at.memoizedState,r,s)},useTransition:function(){var r=th(kr)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:Mc(r),s]},useSyncExternalStore:Jb,useId:R_,useHostTransitionStatus:Dp,useFormState:h_,useActionState:h_,useOptimistic:function(r,s){var l=Nt();return s_(l,at,r,s)},useMemoCache:xp,useCacheRefresh:N_};Op.useEffectEvent=y_;var O_={readContext:rn,use:eh,useCallback:T_,useContext:rn,useEffect:Rp,useImperativeHandle:w_,useInsertionEffect:v_,useLayoutEffect:b_,useMemo:x_,useReducer:Sp,useRef:p_,useState:function(){return Sp(kr)},useDebugValue:Np,useDeferredValue:function(r,s){var l=Nt();return at===null?Ip(l,r,s):E_(l,at.memoizedState,r,s)},useTransition:function(){var r=Sp(kr)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:Mc(r),s]},useSyncExternalStore:Jb,useId:R_,useHostTransitionStatus:Dp,useFormState:m_,useActionState:m_,useOptimistic:function(r,s){var l=Nt();return at!==null?s_(l,at,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:xp,useCacheRefresh:N_};O_.useEffectEvent=y_;function Vp(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:b({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Pp={enqueueSetState:function(r,s,l){r=r._reactInternals;var u=Kn(),p=Es(u);p.payload=s,l!=null&&(p.callback=l),s=Ss(r,p,u),s!==null&&(kn(s,r,u),Nc(s,r,u))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=Kn(),p=Es(u);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=Ss(r,p,u),s!==null&&(kn(s,r,u),Nc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Kn(),u=Es(l);u.tag=2,s!=null&&(u.callback=s),s=Ss(r,u,l),s!==null&&(kn(s,r,l),Nc(s,r,l))}};function V_(r,s,l,u,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!wc(l,u)||!wc(p,y):!0}function P_(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&Pp.enqueueReplaceState(s,s.state,null)}function Ka(r,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(r=r.defaultProps){l===s&&(l=b({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}function j_(r){Pd(r)}function L_(r){console.error(r)}function U_(r){Pd(r)}function sh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function z_(r,s,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function jp(r,s,l){return l=Es(l),l.tag=3,l.payload={element:null},l.callback=function(){sh(r,s)},l}function B_(r){return r=Es(r),r.tag=3,r}function F_(r,s,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;r.payload=function(){return p(y)},r.callback=function(){z_(s,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){z_(s,l,u),typeof p!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function pN(r,s,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&qo(s,l,p,!0),l=qn.current,l!==null){switch(l.tag){case 31:case 13:return si===null?yh():l.alternate===null&&xt===0&&(xt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===Gd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),lg(r,u,p)),!1;case 22:return l.flags|=65536,u===Gd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),lg(r,u,p)),!1}throw Error(i(435,l.tag))}return lg(r,u,p),yh(),!1}if(Ye)return s=qn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==np&&(r=Error(i(422),{cause:u}),Ec(ti(r,l)))):(u!==np&&(s=Error(i(423),{cause:u}),Ec(ti(s,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ti(u,l),p=jp(r.stateNode,u,p),fp(r,p),xt!==4&&(xt=2)),!1;var y=Error(i(520),{cause:u});if(y=ti(y,l),qc===null?qc=[y]:qc.push(y),xt!==4&&(xt=2),s===null)return!0;u=ti(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=jp(l.stateNode,u,r),fp(l,r),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ks===null||!ks.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=B_(p),F_(p,r,l,u),fp(l,p),!1}l=l.return}while(l!==null);return!1}var Lp=Error(i(461)),zt=!1;function sn(r,s,l,u){s.child=r===null?Gb(s,null,l,u):$a(s,r.child,l,u)}function q_(r,s,l,u,p){l=l.render;var y=s.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return Ba(s),u=bp(r,s,l,T,y,p),C=_p(),r!==null&&!zt?(wp(r,s,p),Dr(r,s,p)):(Ye&&C&&ep(s),s.flags|=1,sn(r,s,u,p),s.child)}function H_(r,s,l,u,p){if(r===null){var y=l.type;return typeof y=="function"&&!Wm(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,$_(r,s,y,u,p)):(r=zd(l.type,null,u,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!Gp(r,p)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:wc,l(T,u)&&r.ref===s.ref)return Dr(r,s,p)}return s.flags|=1,r=Ar(y,u),r.ref=s.ref,r.return=s,s.child=r}function $_(r,s,l,u,p){if(r!==null){var y=r.memoizedProps;if(wc(y,u)&&r.ref===s.ref)if(zt=!1,s.pendingProps=u=y,Gp(r,p))(r.flags&131072)!==0&&(zt=!0);else return s.lanes=r.lanes,Dr(r,s,p)}return Up(r,s,l,u,p)}function G_(r,s,l,u){var p=u.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(u=s.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return K_(r,s,y,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hd(s,y!==null?y.cachePool:null),y!==null?Qb(s,y):pp(),Xb(s);else return u=s.lanes=536870912,K_(r,s,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(Hd(s,y.cachePool),Qb(s,y),Cs(),s.memoizedState=null):(r!==null&&Hd(s,null),pp(),Cs());return sn(r,s,p,l),s.child}function Pc(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function K_(r,s,l,u,p){var y=cp();return y=y===null?null:{parent:Lt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},r!==null&&Hd(s,null),pp(),Xb(s),r!==null&&qo(r,s,u,!0),s.childLanes=p,null}function ah(r,s){return s=lh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Y_(r,s,l){return $a(s,r.child,null,l),r=ah(s,s.pendingProps),r.flags|=2,Hn(s),s.memoizedState=null,r}function gN(r,s,l){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Ye){if(u.mode==="hidden")return r=ah(s,u),s.lanes=536870912,Pc(null,r);if(yp(s),(r=ft)?(r=aw(r,ri),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:bs!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},l=kb(r),l.return=s,s.child=l,nn=s,ft=null)):r=null,r===null)throw ws(s);return s.lanes=536870912,null}return ah(s,u)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(yp(s),p)if(s.flags&256)s.flags&=-257,s=Y_(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(zt||qo(r,s,l,!1),p=(l&r.childLanes)!==0,zt||p){if(u=ct,u!==null&&(T=ic(u,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,ja(r,T),kn(u,r,T),Lp;yh(),s=Y_(r,s,l)}else r=y.treeContext,ft=ai(T.nextSibling),nn=s,Ye=!0,_s=null,ri=!1,r!==null&&Ob(s,r),s=ah(s,u),s.flags|=4096;return s}return r=Ar(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function oh(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function Up(r,s,l,u,p){return Ba(s),l=bp(r,s,l,u,void 0,p),u=_p(),r!==null&&!zt?(wp(r,s,p),Dr(r,s,p)):(Ye&&u&&ep(s),s.flags|=1,sn(r,s,l,p),s.child)}function Q_(r,s,l,u,p,y){return Ba(s),s.updateQueue=null,l=Zb(s,u,l,p),Wb(r),u=_p(),r!==null&&!zt?(wp(r,s,y),Dr(r,s,y)):(Ye&&u&&ep(s),s.flags|=1,sn(r,s,l,y),s.child)}function X_(r,s,l,u,p){if(Ba(s),s.stateNode===null){var y=Uo,T=l.contextType;typeof T=="object"&&T!==null&&(y=rn(T)),y=new l(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Pp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},dp(s),T=l.contextType,y.context=typeof T=="object"&&T!==null?rn(T):Uo,y.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Vp(s,l,T,u),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Pp.enqueueReplaceState(y,y.state,null),kc(s,u,y,p),Ic(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){y=s.stateNode;var C=s.memoizedProps,B=Ka(l,C);y.props=B;var X=y.context,ne=l.contextType;T=Uo,typeof ne=="object"&&ne!==null&&(T=rn(ne));var se=l.getDerivedStateFromProps;ne=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||X!==T)&&P_(s,y,u,T),xs=!1;var W=s.memoizedState;y.state=W,kc(s,u,y,p),Ic(),X=s.memoizedState,C||W!==X||xs?(typeof se=="function"&&(Vp(s,l,se,u),X=s.memoizedState),(B=xs||V_(s,l,B,u,W,X,T))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),y.props=u,y.state=X,y.context=T,u=B):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,hp(r,s),T=s.memoizedProps,ne=Ka(l,T),y.props=ne,se=s.pendingProps,W=y.context,X=l.contextType,B=Uo,typeof X=="object"&&X!==null&&(B=rn(X)),C=l.getDerivedStateFromProps,(X=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==se||W!==B)&&P_(s,y,u,B),xs=!1,W=s.memoizedState,y.state=W,kc(s,u,y,p),Ic();var J=s.memoizedState;T!==se||W!==J||xs||r!==null&&r.dependencies!==null&&Fd(r.dependencies)?(typeof C=="function"&&(Vp(s,l,C,u),J=s.memoizedState),(ne=xs||V_(s,l,ne,u,W,J,B)||r!==null&&r.dependencies!==null&&Fd(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,J,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,J,B)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),y.props=u,y.state=J,y.context=B,u=ne):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),u=!1)}return y=u,oh(r,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&u?(s.child=$a(s,r.child,null,p),s.child=$a(s,null,l,p)):sn(r,s,l,p),s.memoizedState=y.state,r=s.child):r=Dr(r,s,p),r}function W_(r,s,l,u){return Ua(),s.flags|=256,sn(r,s,l,u),s.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bp(r){return{baseLanes:r,cachePool:zb()}}function Fp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Gn),r}function Z_(r,s,l){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(Rt.current&2)!==0),T&&(p=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ye){if(p?As(s):Cs(),(r=ft)?(r=aw(r,ri),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:bs!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},l=kb(r),l.return=s,s.child=l,nn=s,ft=null)):r=null,r===null)throw ws(s);return Eg(r)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(Cs(),p=s.mode,C=lh({mode:"hidden",children:C},p),u=La(u,p,l,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=Bp(l),u.childLanes=Fp(r,T,l),s.memoizedState=zp,Pc(null,u)):(As(s),qp(s,C))}var B=r.memoizedState;if(B!==null&&(C=B.dehydrated,C!==null)){if(y)s.flags&256?(As(s),s.flags&=-257,s=Hp(r,s,l)):s.memoizedState!==null?(Cs(),s.child=r.child,s.flags|=128,s=null):(Cs(),C=u.fallback,p=s.mode,u=lh({mode:"visible",children:u.children},p),C=La(C,p,l,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,$a(s,r.child,null,l),u=s.child,u.memoizedState=Bp(l),u.childLanes=Fp(r,T,l),s.memoizedState=zp,s=Pc(null,u));else if(As(s),Eg(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var X=T.dgst;T=X,u=Error(i(419)),u.stack="",u.digest=T,Ec({value:u,source:null,stack:null}),s=Hp(r,s,l)}else if(zt||qo(r,s,l,!1),T=(l&r.childLanes)!==0,zt||T){if(T=ct,T!==null&&(u=ic(T,l),u!==0&&u!==B.retryLane))throw B.retryLane=u,ja(r,u),kn(T,r,u),Lp;xg(C)||yh(),s=Hp(r,s,l)}else xg(C)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,ft=ai(C.nextSibling),nn=s,Ye=!0,_s=null,ri=!1,r!==null&&Ob(s,r),s=qp(s,u.children),s.flags|=4096);return s}return p?(Cs(),C=u.fallback,p=s.mode,B=r.child,X=B.sibling,u=Ar(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,X!==null?C=Ar(X,C):(C=La(C,p,l,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,Pc(null,u),u=s.child,C=r.child.memoizedState,C===null?C=Bp(l):(p=C.cachePool,p!==null?(B=Lt._currentValue,p=p.parent!==B?{parent:B,pool:B}:p):p=zb(),C={baseLanes:C.baseLanes|l,cachePool:p}),u.memoizedState=C,u.childLanes=Fp(r,T,l),s.memoizedState=zp,Pc(r.child,u)):(As(s),l=r.child,r=l.sibling,l=Ar(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=l,s.memoizedState=null,l)}function qp(r,s){return s=lh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function lh(r,s){return r=Fn(22,r,null,s),r.lanes=0,r}function Hp(r,s,l){return $a(s,r.child,null,l),r=qp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function J_(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),sp(r.return,s,l)}function $p(r,s,l,u,p,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=l,T.tailMode=p,T.treeForkCount=y)}function e1(r,s,l){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var T=Rt.current,C=(T&2)!==0;if(C?(T=T&1|2,s.flags|=128):T&=1,ue(Rt,T),sn(r,s,u,l),u=Ye?xc:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&J_(r,l,s);else if(r.tag===19)J_(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&Xd(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),$p(s,!1,p,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&Xd(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}$p(s,!0,l,null,y,u);break;case"together":$p(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Dr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Is|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(qo(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=Ar(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ar(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function Gp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Fd(r)))}function yN(r,s,l){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),Ts(s,Lt,r.memoizedState.cache),Ua();break;case 27:case 5:_n(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:Ts(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,yp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(As(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Z_(r,s,l):(As(s),r=Dr(r,s,l),r!==null?r.sibling:null);As(s);break;case 19:var p=(r.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(qo(r,s,l,!1),u=(l&s.childLanes)!==0),p){if(u)return e1(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ue(Rt,Rt.current),u)break;return null;case 22:return s.lanes=0,G_(r,s,l,s.pendingProps);case 24:Ts(s,Lt,r.memoizedState.cache)}return Dr(r,s,l)}function t1(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)zt=!0;else{if(!Gp(r,l)&&(s.flags&128)===0)return zt=!1,yN(r,s,l);zt=(r.flags&131072)!==0}else zt=!1,Ye&&(s.flags&1048576)!==0&&Mb(s,xc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=qa(s.elementType),s.type=r,typeof r=="function")Wm(r)?(u=Ka(r,u),s.tag=1,s=X_(null,s,r,u,l)):(s.tag=0,s=Up(null,s,r,u,l));else{if(r!=null){var p=r.$$typeof;if(p===H){s.tag=11,s=q_(null,s,r,u,l);break e}else if(p===S){s.tag=14,s=H_(null,s,r,u,l);break e}}throw s=Me(r)||r,Error(i(306,s,""))}}return s;case 0:return Up(r,s,s.type,s.pendingProps,l);case 1:return u=s.type,p=Ka(u,s.pendingProps),X_(r,s,u,p,l);case 3:e:{if(ht(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,hp(r,s),kc(s,u,null,l);var T=s.memoizedState;if(u=T.cache,Ts(s,Lt,u),u!==y.cache&&ap(s,[Lt],l,!0),Ic(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=W_(r,s,u,l);break e}else if(u!==p){p=ti(Error(i(424)),s),Ec(p),s=W_(r,s,u,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ft=ai(r.firstChild),nn=s,Ye=!0,_s=null,ri=!0,l=Gb(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ua(),u===p){s=Dr(r,s,l);break e}sn(r,s,u,l)}s=s.child}return s;case 26:return oh(r,s),r===null?(l=hw(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ye||(l=s.type,r=s.pendingProps,u=Eh(we.current).createElement(l),u[Vt]=s,u[Xt]=r,an(u,l,r),Pt(u),s.stateNode=u):s.memoizedState=hw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return _n(s),r===null&&Ye&&(u=s.stateNode=cw(s.type,s.pendingProps,we.current),nn=s,ri=!0,p=ft,Vs(s.type)?(Sg=p,ft=ai(u.firstChild)):ft=p),sn(r,s,s.pendingProps.children,l),oh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ye&&((p=u=ft)&&(u=KN(u,s.type,s.pendingProps,ri),u!==null?(s.stateNode=u,nn=s,ft=ai(u.firstChild),ri=!1,p=!0):p=!1),p||ws(s)),_n(s),p=s.type,y=s.pendingProps,T=r!==null?r.memoizedProps:null,u=y.children,_g(p,y)?u=null:T!==null&&_g(p,T)&&(s.flags|=32),s.memoizedState!==null&&(p=bp(r,s,lN,null,null,l),Wc._currentValue=p),oh(r,s),sn(r,s,u,l),s.child;case 6:return r===null&&Ye&&((r=l=ft)&&(l=YN(l,s.pendingProps,ri),l!==null?(s.stateNode=l,nn=s,ft=null,r=!0):r=!1),r||ws(s)),null;case 13:return Z_(r,s,l);case 4:return ht(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=$a(s,null,u,l):sn(r,s,u,l),s.child;case 11:return q_(r,s,s.type,s.pendingProps,l);case 7:return sn(r,s,s.pendingProps,l),s.child;case 8:return sn(r,s,s.pendingProps.children,l),s.child;case 12:return sn(r,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,Ts(s,s.type,u.value),sn(r,s,u.children,l),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,Ba(s),p=rn(p),u=u(p),s.flags|=1,sn(r,s,u,l),s.child;case 14:return H_(r,s,s.type,s.pendingProps,l);case 15:return $_(r,s,s.type,s.pendingProps,l);case 19:return e1(r,s,l);case 31:return gN(r,s,l);case 22:return G_(r,s,l,s.pendingProps);case 24:return Ba(s),u=rn(Lt),r===null?(p=cp(),p===null&&(p=ct,y=op(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),s.memoizedState={parent:u,cache:p},dp(s),Ts(s,Lt,p)):((r.lanes&l)!==0&&(hp(r,s),kc(s,null,null,l),Ic()),p=r.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ts(s,Lt,u)):(u=y.cache,Ts(s,Lt,u),u!==p.cache&&ap(s,[Lt],l,!0))),sn(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Mr(r){r.flags|=4}function Kp(r,s,l,u,p){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(R1())r.flags|=8192;else throw Ha=Gd,up}else r.flags&=-16777217}function n1(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yw(s))if(R1())r.flags|=8192;else throw Ha=Gd,up}function ch(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?pd():536870912,r.lanes|=s,tl|=s)}function jc(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function vN(r,s,l){var u=s.pendingProps;switch(tp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return l=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Nr(Lt),Ke(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Fo(s)?Mr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ip())),mt(s),null;case 26:var p=s.type,y=s.memoizedState;return r===null?(Mr(s),y!==null?(mt(s),n1(s,y)):(mt(s),Kp(s,p,null,u,l))):y?y!==r.memoizedState?(Mr(s),mt(s),n1(s,y)):(mt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&Mr(s),mt(s),Kp(s,p,r,u,l)),null;case 27:if(Ln(s),l=we.current,p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return mt(s),null}r=de.current,Fo(s)?Vb(s):(r=cw(p,u,l),s.stateNode=r,Mr(s))}return mt(s),null;case 5:if(Ln(s),p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(y=de.current,Fo(s))Vb(s);else{var T=Eh(we.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(p,{is:u.is}):T.createElement(p)}}y[Vt]=s,y[Xt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(an(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mr(s)}}return mt(s),Kp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Mr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=we.current,Fo(s)){if(r=s.stateNode,l=s.memoizedProps,u=null,p=nn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Vt]=s,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Z1(r.nodeValue,l)),r||ws(s,!0)}else r=Eh(r).createTextNode(u),r[Vt]=s,s.stateNode=r}return mt(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(u=Fo(s),l!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Vt]=s}else Ua(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),r=!1}else l=ip(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(Hn(s),s):(Hn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return mt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Fo(s),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Vt]=s}else Ua(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),p=!1}else p=ip(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Hn(s),s):(Hn(s),null)}return Hn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),ch(s,s.updateQueue),mt(s),null);case 4:return Ke(),r===null&&pg(s.stateNode.containerInfo),mt(s),null;case 10:return Nr(s.type),mt(s),null;case 19:if(G(Rt),u=s.memoizedState,u===null)return mt(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)jc(u,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=Xd(r),y!==null){for(s.flags|=128,jc(u,!1),r=y.updateQueue,s.updateQueue=r,ch(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)Ib(l,r),l=l.sibling;return ue(Rt,Rt.current&1|2),Ye&&Cr(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&wn()>mh&&(s.flags|=128,p=!0,jc(u,!1),s.lanes=4194304)}else{if(!p)if(r=Xd(y),r!==null){if(s.flags|=128,p=!0,r=r.updateQueue,s.updateQueue=r,ch(s,r),jc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ye)return mt(s),null}else 2*wn()-u.renderingStartTime>mh&&l!==536870912&&(s.flags|=128,p=!0,jc(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(r=u.last,r!==null?r.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=wn(),r.sibling=null,l=Rt.current,ue(Rt,p?l&1|2:l&1),Ye&&Cr(s,u.treeForkCount),r):(mt(s),null);case 22:case 23:return Hn(s),gp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),l=s.updateQueue,l!==null&&ch(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),r!==null&&G(Fa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Nr(Lt),mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function bN(r,s){switch(tp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Nr(Lt),Ke(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ln(s),null;case 31:if(s.memoizedState!==null){if(Hn(s),s.alternate===null)throw Error(i(340));Ua()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Hn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ua()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return G(Rt),null;case 4:return Ke(),null;case 10:return Nr(s.type),null;case 22:case 23:return Hn(s),gp(),r!==null&&G(Fa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Nr(Lt),null;case 25:return null;default:return null}}function i1(r,s){switch(tp(s),s.tag){case 3:Nr(Lt),Ke();break;case 26:case 27:case 5:Ln(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&Hn(s);break;case 13:Hn(s);break;case 19:G(Rt);break;case 10:Nr(s.type);break;case 22:case 23:Hn(s),gp(),r!==null&&G(Fa);break;case 24:Nr(Lt)}}function Lc(r,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&r)===r){u=void 0;var y=l.create,T=l.inst;u=y(),T.destroy=u}l=l.next}while(l!==p)}}catch(C){rt(s,s.return,C)}}function Rs(r,s,l){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,p=s;var B=l,X=C;try{X()}catch(ne){rt(p,B,ne)}}}u=u.next}while(u!==y)}}catch(ne){rt(s,s.return,ne)}}function r1(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{Yb(s,l)}catch(u){rt(r,r.return,u)}}}function s1(r,s,l){l.props=Ka(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){rt(r,s,u)}}function Uc(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(p){rt(r,s,p)}}function nr(r,s){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){rt(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){rt(r,s,p)}else l.current=null}function a1(r){var s=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){rt(r,r.return,p)}}function Yp(r,s,l){try{var u=r.stateNode;BN(u,r.type,l,s),u[Xt]=s}catch(p){rt(r,r.return,p)}}function o1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Vs(r.type)||r.tag===4}function Qp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||o1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Vs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xp(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=wi));else if(u!==4&&(u===27&&Vs(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Xp(r,s,l),r=r.sibling;r!==null;)Xp(r,s,l),r=r.sibling}function uh(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&(u===27&&Vs(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(uh(r,s,l),r=r.sibling;r!==null;)uh(r,s,l),r=r.sibling}function l1(r){var s=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);an(s,u,l),s[Vt]=r,s[Xt]=l}catch(y){rt(r,r.return,y)}}var Or=!1,Bt=!1,Wp=!1,c1=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function _N(r,s){if(r=r.containerInfo,vg=kh,r=wb(r),Hm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,C=-1,B=-1,X=0,ne=0,se=r,W=null;t:for(;;){for(var J;se!==l||p!==0&&se.nodeType!==3||(C=T+p),se!==y||u!==0&&se.nodeType!==3||(B=T+u),se.nodeType===3&&(T+=se.nodeValue.length),(J=se.firstChild)!==null;)W=se,se=J;for(;;){if(se===r)break t;if(W===l&&++X===p&&(C=T),W===y&&++ne===u&&(B=T),(J=se.nextSibling)!==null)break;se=W,W=se.parentNode}se=J}l=C===-1||B===-1?null:{start:C,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(bg={focusedElem:r,selectionRange:l},kh=!1,Zt=s;Zt!==null;)if(s=Zt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Zt=r;else for(;Zt!==null;){switch(s=Zt,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)p=r[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=s,p=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var ve=Ka(l.type,p);r=u.getSnapshotBeforeUpdate(ve,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){rt(l,l.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Tg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Tg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Zt=r;break}Zt=s.return}}function u1(r,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Pr(r,l),u&4&&Lc(5,l);break;case 1:if(Pr(r,l),u&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(T){rt(l,l.return,T)}else{var p=Ka(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){rt(l,l.return,T)}}u&64&&r1(l),u&512&&Uc(l,l.return);break;case 3:if(Pr(r,l),u&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Yb(r,s)}catch(T){rt(l,l.return,T)}}break;case 27:s===null&&u&4&&l1(l);case 26:case 5:Pr(r,l),s===null&&u&4&&a1(l),u&512&&Uc(l,l.return);break;case 12:Pr(r,l);break;case 31:Pr(r,l),u&4&&f1(r,l);break;case 13:Pr(r,l),u&4&&m1(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=NN.bind(null,l),QN(r,l))));break;case 22:if(u=l.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Bt,p=Or;var y=Bt;Or=u,(Bt=s)&&!y?jr(r,l,(l.subtreeFlags&8772)!==0):Pr(r,l),Or=p,Bt=y}break;case 30:break;default:Pr(r,l)}}function d1(r){var s=r.alternate;s!==null&&(r.alternate=null,d1(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&So(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gt=null,Cn=!1;function Vr(r,s,l){for(l=l.child;l!==null;)h1(r,s,l),l=l.sibling}function h1(r,s,l){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(yi,l)}catch{}switch(l.tag){case 26:Bt||nr(l,s),Vr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||nr(l,s);var u=gt,p=Cn;Vs(l.type)&&(gt=l.stateNode,Cn=!1),Vr(r,s,l),Yc(l.stateNode),gt=u,Cn=p;break;case 5:Bt||nr(l,s);case 6:if(u=gt,p=Cn,gt=null,Vr(r,s,l),gt=u,Cn=p,gt!==null)if(Cn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(l.stateNode)}catch(y){rt(l,s,y)}else try{gt.removeChild(l.stateNode)}catch(y){rt(l,s,y)}break;case 18:gt!==null&&(Cn?(r=gt,rw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),cl(r)):rw(gt,l.stateNode));break;case 4:u=gt,p=Cn,gt=l.stateNode.containerInfo,Cn=!0,Vr(r,s,l),gt=u,Cn=p;break;case 0:case 11:case 14:case 15:Rs(2,l,s),Bt||Rs(4,l,s),Vr(r,s,l);break;case 1:Bt||(nr(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&s1(l,s,u)),Vr(r,s,l);break;case 21:Vr(r,s,l);break;case 22:Bt=(u=Bt)||l.memoizedState!==null,Vr(r,s,l),Bt=u;break;default:Vr(r,s,l)}}function f1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(l){rt(s,s.return,l)}}}function m1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(l){rt(s,s.return,l)}}function wN(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new c1),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new c1),s;default:throw Error(i(435,r.tag))}}function dh(r,s){var l=wN(r);s.forEach(function(u){if(!l.has(u)){l.add(u);var p=IN.bind(null,r,u);u.then(p,p)}})}function Rn(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],y=r,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Vs(C.type)){gt=C.stateNode,Cn=!1;break e}break;case 5:gt=C.stateNode,Cn=!1;break e;case 3:case 4:gt=C.stateNode.containerInfo,Cn=!0;break e}C=C.return}if(gt===null)throw Error(i(160));h1(y,T,p),gt=null,Cn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)p1(s,r),s=s.sibling}var Ci=null;function p1(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Rn(s,r),Nn(r),u&4&&(Rs(3,r,r.return),Lc(3,r),Rs(5,r,r.return));break;case 1:Rn(s,r),Nn(r),u&512&&(Bt||l===null||nr(l,l.return)),u&64&&Or&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Ci;if(Rn(s,r),Nn(r),u&512&&(Bt||l===null||nr(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Fi]||y[Vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),an(y,u,l),y[Vt]=r,Pt(y),u=y;break e;case"link":var T=pw("link","href",p).get(u+(l.href||""));if(T){for(var C=0;C<T.length;C++)if(y=T[C],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(C,1);break t}}y=p.createElement(u),an(y,u,l),p.head.appendChild(y);break;case"meta":if(T=pw("meta","content",p).get(u+(l.content||""))){for(C=0;C<T.length;C++)if(y=T[C],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(C,1);break t}}y=p.createElement(u),an(y,u,l),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[Vt]=r,Pt(y),u=y}r.stateNode=u}else gw(p,r.type,r.stateNode);else r.stateNode=mw(p,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?gw(p,r.type,r.stateNode):mw(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Yp(r,r.memoizedProps,l.memoizedProps)}break;case 27:Rn(s,r),Nn(r),u&512&&(Bt||l===null||nr(l,l.return)),l!==null&&u&4&&Yp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Rn(s,r),Nn(r),u&512&&(Bt||l===null||nr(l,l.return)),r.flags&32){p=r.stateNode;try{An(p,"")}catch(ve){rt(r,r.return,ve)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Yp(r,p,l!==null?l.memoizedProps:p)),u&1024&&(Wp=!0);break;case 6:if(Rn(s,r),Nn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(ve){rt(r,r.return,ve)}}break;case 3:if(Ch=null,p=Ci,Ci=Sh(s.containerInfo),Rn(s,r),Ci=p,Nn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{cl(s.containerInfo)}catch(ve){rt(r,r.return,ve)}Wp&&(Wp=!1,g1(r));break;case 4:u=Ci,Ci=Sh(r.stateNode.containerInfo),Rn(s,r),Nn(r),Ci=u;break;case 12:Rn(s,r),Nn(r);break;case 31:Rn(s,r),Nn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,dh(r,u)));break;case 13:Rn(s,r),Nn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(fh=wn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,dh(r,u)));break;case 22:p=r.memoizedState!==null;var B=l!==null&&l.memoizedState!==null,X=Or,ne=Bt;if(Or=X||p,Bt=ne||B,Rn(s,r),Bt=ne,Or=X,Nn(r),u&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(l===null||B||Or||Bt||Ya(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){B=l=s;try{if(y=B.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=B.stateNode;var se=B.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ve){rt(B,B.return,ve)}}}else if(s.tag===6){if(l===null){B=s;try{B.stateNode.nodeValue=p?"":B.memoizedProps}catch(ve){rt(B,B.return,ve)}}}else if(s.tag===18){if(l===null){B=s;try{var J=B.stateNode;p?sw(J,!0):sw(B.stateNode,!1)}catch(ve){rt(B,B.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,dh(r,l))));break;case 19:Rn(s,r),Nn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,dh(r,u)));break;case 30:break;case 21:break;default:Rn(s,r),Nn(r)}}function Nn(r){var s=r.flags;if(s&2){try{for(var l,u=r.return;u!==null;){if(o1(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=Qp(r);uh(r,y,p);break;case 5:var T=l.stateNode;l.flags&32&&(An(T,""),l.flags&=-33);var C=Qp(r);uh(r,C,T);break;case 3:case 4:var B=l.stateNode.containerInfo,X=Qp(r);Xp(r,X,B);break;default:throw Error(i(161))}}catch(ne){rt(r,r.return,ne)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function g1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;g1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Pr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)u1(r,s.alternate,s),s=s.sibling}function Ya(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Rs(4,s,s.return),Ya(s);break;case 1:nr(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&s1(s,s.return,l),Ya(s);break;case 27:Yc(s.stateNode);case 26:case 5:nr(s,s.return),Ya(s);break;case 22:s.memoizedState===null&&Ya(s);break;case 30:Ya(s);break;default:Ya(s)}r=r.sibling}}function jr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=r,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:jr(p,y,l),Lc(4,y);break;case 1:if(jr(p,y,l),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){rt(u,u.return,X)}if(u=y,p=u.updateQueue,p!==null){var C=u.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)Kb(B[p],C)}catch(X){rt(u,u.return,X)}}l&&T&64&&r1(y),Uc(y,y.return);break;case 27:l1(y);case 26:case 5:jr(p,y,l),l&&u===null&&T&4&&a1(y),Uc(y,y.return);break;case 12:jr(p,y,l);break;case 31:jr(p,y,l),l&&T&4&&f1(p,y);break;case 13:jr(p,y,l),l&&T&4&&m1(p,y);break;case 22:y.memoizedState===null&&jr(p,y,l),Uc(y,y.return);break;case 30:break;default:jr(p,y,l)}s=s.sibling}}function Zp(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Sc(l))}function Jp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Sc(r))}function Ri(r,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)y1(r,s,l,u),s=s.sibling}function y1(r,s,l,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(r,s,l,u),p&2048&&Lc(9,s);break;case 1:Ri(r,s,l,u);break;case 3:Ri(r,s,l,u),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Sc(r)));break;case 12:if(p&2048){Ri(r,s,l,u),r=s.stateNode;try{var y=s.memoizedProps,T=y.id,C=y.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){rt(s,s.return,B)}}else Ri(r,s,l,u);break;case 31:Ri(r,s,l,u);break;case 13:Ri(r,s,l,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?Ri(r,s,l,u):zc(r,s):y._visibility&2?Ri(r,s,l,u):(y._visibility|=2,Zo(r,s,l,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Zp(T,s);break;case 24:Ri(r,s,l,u),p&2048&&Jp(s.alternate,s);break;default:Ri(r,s,l,u)}}function Zo(r,s,l,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,T=s,C=l,B=u,X=T.flags;switch(T.tag){case 0:case 11:case 15:Zo(y,T,C,B,p),Lc(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?Zo(y,T,C,B,p):zc(y,T):(ne._visibility|=2,Zo(y,T,C,B,p)),p&&X&2048&&Zp(T.alternate,T);break;case 24:Zo(y,T,C,B,p),p&&X&2048&&Jp(T.alternate,T);break;default:Zo(y,T,C,B,p)}s=s.sibling}}function zc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,u=s,p=u.flags;switch(u.tag){case 22:zc(l,u),p&2048&&Zp(u.alternate,u);break;case 24:zc(l,u),p&2048&&Jp(u.alternate,u);break;default:zc(l,u)}s=s.sibling}}var Bc=8192;function Jo(r,s,l){if(r.subtreeFlags&Bc)for(r=r.child;r!==null;)v1(r,s,l),r=r.sibling}function v1(r,s,l){switch(r.tag){case 26:Jo(r,s,l),r.flags&Bc&&r.memoizedState!==null&&oI(l,Ci,r.memoizedState,r.memoizedProps);break;case 5:Jo(r,s,l);break;case 3:case 4:var u=Ci;Ci=Sh(r.stateNode.containerInfo),Jo(r,s,l),Ci=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Bc,Bc=16777216,Jo(r,s,l),Bc=u):Jo(r,s,l));break;default:Jo(r,s,l)}}function b1(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Fc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Zt=u,w1(u,r)}b1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_1(r),r=r.sibling}function _1(r){switch(r.tag){case 0:case 11:case 15:Fc(r),r.flags&2048&&Rs(9,r,r.return);break;case 3:Fc(r);break;case 12:Fc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,hh(r)):Fc(r);break;default:Fc(r)}}function hh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Zt=u,w1(u,r)}b1(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Rs(8,s,s.return),hh(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,hh(s));break;default:hh(s)}r=r.sibling}}function w1(r,s){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:Rs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Sc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Zt=u;else e:for(l=r;Zt!==null;){u=Zt;var p=u.sibling,y=u.return;if(d1(u),u===l){Zt=null;break e}if(p!==null){p.return=y,Zt=p;break e}Zt=y}}}var TN={getCacheForType:function(r){var s=rn(Lt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return rn(Lt).controller.signal}},xN=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,ze=null,Fe=0,it=0,$n=null,Ns=!1,el=!1,eg=!1,Lr=0,xt=0,Is=0,Qa=0,tg=0,Gn=0,tl=0,qc=null,In=null,ng=!1,fh=0,T1=0,mh=1/0,ph=null,ks=null,Kt=0,Ds=null,nl=null,Ur=0,ig=0,rg=null,x1=null,Hc=0,sg=null;function Kn(){return(et&2)!==0&&Fe!==0?Fe&-Fe:$.T!==null?dg():gd()}function E1(){if(Gn===0)if((Fe&536870912)===0||Ye){var r=Ta;Ta<<=1,(Ta&3932160)===0&&(Ta=262144),Gn=r}else Gn=536870912;return r=qn.current,r!==null&&(r.flags|=32),Gn}function kn(r,s,l){(r===ct&&(it===2||it===9)||r.cancelPendingCommit!==null)&&(il(r,0),Ms(r,Fe,Gn,!1)),xa(r,l),((et&2)===0||r!==ct)&&(r===ct&&((et&2)===0&&(Qa|=l),xt===4&&Ms(r,Fe,Gn,!1)),ir(r))}function S1(r,s,l){if((et&6)!==0)throw Error(i(327));var u=!l&&(s&127)===0&&(s&r.expiredLanes)===0||vi(r,s),p=u?AN(r,s):og(r,s,!0),y=u;do{if(p===0){el&&!u&&Ms(r,s,0,!1);break}else{if(l=r.current.alternate,y&&!EN(l)){p=og(r,s,!1),y=!1;continue}if(p===2){if(y=s,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=r;p=qc;var B=C.current.memoizedState.isDehydrated;if(B&&(il(C,T).flags|=256),T=og(C,T,!1),T!==2){if(eg&&!B){C.errorRecoveryDisabledLanes|=y,Qa|=y,p=4;break e}y=In,In=p,y!==null&&(In===null?In=y:In.push.apply(In,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){il(r,0),Ms(r,s,0,!0);break}e:{switch(u=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ms(u,s,Gn,!Ns);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=fh+300-wn(),10<p)){if(Ms(u,s,Gn,!Ns),Ui(u,0,!0)!==0)break e;Ur=s,u.timeoutHandle=nw(A1.bind(null,u,l,In,ph,ng,s,Gn,Qa,tl,Ns,y,"Throttled",-0,0),p);break e}A1(u,l,In,ph,ng,s,Gn,Qa,tl,Ns,y,null,-0,0)}}break}while(!0);ir(r)}function A1(r,s,l,u,p,y,T,C,B,X,ne,se,W,J){if(r.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},v1(s,y,se);var ve=(y&62914560)===y?fh-wn():(y&4194048)===y?T1-wn():0;if(ve=lI(se,ve),ve!==null){Ur=y,r.cancelPendingCommit=ve(O1.bind(null,r,s,y,l,u,p,T,C,B,ne,se,null,W,J)),Ms(r,y,T,!X);return}}O1(r,s,y,l,u,p,T,C,B)}function EN(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!Bn(y(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ms(r,s,l,u){s&=~tg,s&=~Qa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var p=s;0<p;){var y=31-At(p),T=1<<y;u[y]=-1,p&=~T}l!==0&&Ea(r,l,s)}function gh(){return(et&6)===0?($c(0),!1):!0}function ag(){if(ze!==null){if(it===0)var r=ze.return;else r=ze,Rr=za=null,Tp(r),Ko=null,Cc=0,r=ze;for(;r!==null;)i1(r.alternate,r),r=r.return;ze=null}}function il(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,HN(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Ur=0,ag(),ct=r,ze=l=Ar(r.current,null),Fe=s,it=0,$n=null,Ns=!1,el=vi(r,s),eg=!1,tl=Gn=tg=Qa=Is=xt=0,In=qc=null,ng=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var p=31-At(u),y=1<<p;s|=r[p],u&=~y}return Lr=s,jd(),l}function C1(r,s){je=null,$.H=Vc,s===Go||s===$d?(s=qb(),it=3):s===up?(s=qb(),it=4):it=s===Lp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,ze===null&&(xt=1,sh(r,ti(s,r.current)))}function R1(){var r=qn.current;return r===null?!0:(Fe&4194048)===Fe?si===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?r===si:!1}function N1(){var r=$.H;return $.H=Vc,r===null?Vc:r}function I1(){var r=$.A;return $.A=TN,r}function yh(){xt=4,Ns||(Fe&4194048)!==Fe&&qn.current!==null||(el=!0),(Is&134217727)===0&&(Qa&134217727)===0||ct===null||Ms(ct,Fe,Gn,!1)}function og(r,s,l){var u=et;et|=2;var p=N1(),y=I1();(ct!==r||Fe!==s)&&(ph=null,il(r,s)),s=!1;var T=xt;e:do try{if(it!==0&&ze!==null){var C=ze,B=$n;switch(it){case 8:ag(),T=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(s=!0);var X=it;if(it=0,$n=null,rl(r,C,B,X),l&&el){T=0;break e}break;default:X=it,it=0,$n=null,rl(r,C,B,X)}}SN(),T=xt;break}catch(ne){C1(r,ne)}while(!0);return s&&r.shellSuspendCounter++,Rr=za=null,et=u,$.H=p,$.A=y,ze===null&&(ct=null,Fe=0,jd()),T}function SN(){for(;ze!==null;)k1(ze)}function AN(r,s){var l=et;et|=2;var u=N1(),p=I1();ct!==r||Fe!==s?(ph=null,mh=wn()+500,il(r,s)):el=vi(r,s);e:do try{if(it!==0&&ze!==null){s=ze;var y=$n;t:switch(it){case 1:it=0,$n=null,rl(r,s,y,1);break;case 2:case 9:if(Bb(y)){it=0,$n=null,D1(s);break}s=function(){it!==2&&it!==9||ct!==r||(it=7),ir(r)},y.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Bb(y)?(it=0,$n=null,D1(s)):(it=0,$n=null,rl(r,s,y,7));break;case 5:var T=null;switch(ze.tag){case 26:T=ze.memoizedState;case 5:case 27:var C=ze;if(T?yw(T):C.stateNode.complete){it=0,$n=null;var B=C.sibling;if(B!==null)ze=B;else{var X=C.return;X!==null?(ze=X,vh(X)):ze=null}break t}}it=0,$n=null,rl(r,s,y,5);break;case 6:it=0,$n=null,rl(r,s,y,6);break;case 8:ag(),xt=6;break e;default:throw Error(i(462))}}CN();break}catch(ne){C1(r,ne)}while(!0);return Rr=za=null,$.H=u,$.A=p,et=l,ze!==null?0:(ct=null,Fe=0,jd(),xt)}function CN(){for(;ze!==null&&!jm();)k1(ze)}function k1(r){var s=t1(r.alternate,r,Lr);r.memoizedProps=r.pendingProps,s===null?vh(r):ze=s}function D1(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=Q_(l,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=Q_(l,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:Tp(s);default:i1(l,s),s=ze=Ib(s,Lr),s=t1(l,s,Lr)}r.memoizedProps=r.pendingProps,s===null?vh(r):ze=s}function rl(r,s,l,u){Rr=za=null,Tp(s),Ko=null,Cc=0;var p=s.return;try{if(pN(r,p,s,l,Fe)){xt=1,sh(r,ti(l,r.current)),ze=null;return}}catch(y){if(p!==null)throw ze=p,y;xt=1,sh(r,ti(l,r.current)),ze=null;return}s.flags&32768?(Ye||u===1?r=!0:el||(Fe&536870912)!==0?r=!1:(Ns=r=!0,(u===2||u===9||u===3||u===6)&&(u=qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),M1(s,r)):vh(s)}function vh(r){var s=r;do{if((s.flags&32768)!==0){M1(s,Ns);return}r=s.return;var l=vN(s.alternate,s,Lr);if(l!==null){ze=l;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=r}while(s!==null);xt===0&&(xt=5)}function M1(r,s){do{var l=bN(r.alternate,r);if(l!==null){l.flags&=32767,ze=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){ze=r;return}ze=r=l}while(r!==null);xt=6,ze=null}function O1(r,s,l,u,p,y,T,C,B){r.cancelPendingCommit=null;do bh();while(Kt!==0);if((et&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Qm,zm(r,l,y,T,C,B),r===ct&&(ze=ct=null,Fe=0),nl=s,Ds=r,Ur=l,ig=y,rg=p,x1=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,kN(cs,function(){return U1(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,p=ae.p,ae.p=2,T=et,et|=4;try{_N(r,s,l)}finally{et=T,ae.p=p,$.T=u}}Kt=1,V1(),P1(),j1()}}function V1(){if(Kt===1){Kt=0;var r=Ds,s=nl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var u=ae.p;ae.p=2;var p=et;et|=4;try{p1(s,r);var y=bg,T=wb(r.containerInfo),C=y.focusedElem,B=y.selectionRange;if(T!==C&&C&&C.ownerDocument&&_b(C.ownerDocument.documentElement,C)){if(B!==null&&Hm(C)){var X=B.start,ne=B.end;if(ne===void 0&&(ne=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(ne,C.value.length);else{var se=C.ownerDocument||document,W=se&&se.defaultView||window;if(W.getSelection){var J=W.getSelection(),ve=C.textContent.length,Ae=Math.min(B.start,ve),lt=B.end===void 0?Ae:Math.min(B.end,ve);!J.extend&&Ae>lt&&(T=lt,lt=Ae,Ae=T);var K=bb(C,Ae),q=bb(C,lt);if(K&&q&&(J.rangeCount!==1||J.anchorNode!==K.node||J.anchorOffset!==K.offset||J.focusNode!==q.node||J.focusOffset!==q.offset)){var Q=se.createRange();Q.setStart(K.node,K.offset),J.removeAllRanges(),Ae>lt?(J.addRange(Q),J.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),J.addRange(Q))}}}}for(se=[],J=C;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<se.length;C++){var ie=se[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}kh=!!vg,bg=vg=null}finally{et=p,ae.p=u,$.T=l}}r.current=s,Kt=2}}function P1(){if(Kt===2){Kt=0;var r=Ds,s=nl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var u=ae.p;ae.p=2;var p=et;et|=4;try{u1(r,s.alternate,s)}finally{et=p,ae.p=u,$.T=l}}Kt=3}}function j1(){if(Kt===4||Kt===3){Kt=0,cd();var r=Ds,s=nl,l=Ur,u=x1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,nl=Ds=null,L1(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(ks=null),Tr(l),s=s.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(yi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,p=ae.p,ae.p=2,$.T=null;try{for(var y=r.onRecoverableError,T=0;T<u.length;T++){var C=u[T];y(C.value,{componentStack:C.stack})}}finally{$.T=s,ae.p=p}}(Ur&3)!==0&&bh(),ir(r),p=r.pendingLanes,(l&261930)!==0&&(p&42)!==0?r===sg?Hc++:(Hc=0,sg=r):Hc=0,$c(0)}}function L1(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Sc(s)))}function bh(){return V1(),P1(),j1(),U1()}function U1(){if(Kt!==5)return!1;var r=Ds,s=ig;ig=0;var l=Tr(Ur),u=$.T,p=ae.p;try{ae.p=32>l?32:l,$.T=null,l=rg,rg=null;var y=Ds,T=Ur;if(Kt=0,nl=Ds=null,Ur=0,(et&6)!==0)throw Error(i(331));var C=et;if(et|=4,_1(y.current),y1(y,y.current,T,l),et=C,$c(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(yi,y)}catch{}return!0}finally{ae.p=p,$.T=u,L1(r,s)}}function z1(r,s,l){s=ti(l,s),s=jp(r.stateNode,s,2),r=Ss(r,s,2),r!==null&&(xa(r,2),ir(r))}function rt(r,s,l){if(r.tag===3)z1(r,r,l);else for(;s!==null;){if(s.tag===3){z1(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ks===null||!ks.has(u))){r=ti(l,r),l=B_(2),u=Ss(s,l,2),u!==null&&(F_(l,u,s,r),xa(u,2),ir(u));break}}s=s.return}}function lg(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new xN;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(l)||(eg=!0,p.add(l),r=RN.bind(null,r,s,l),s.then(r,r))}function RN(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ct===r&&(Fe&l)===l&&(xt===4||xt===3&&(Fe&62914560)===Fe&&300>wn()-fh?(et&2)===0&&il(r,0):tg|=l,tl===Fe&&(tl=0)),ir(r)}function B1(r,s){s===0&&(s=pd()),r=ja(r,s),r!==null&&(xa(r,s),ir(r))}function NN(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),B1(r,l)}function IN(r,s){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),B1(r,l)}function kN(r,s){return Gt(r,s)}var _h=null,sl=null,cg=!1,wh=!1,ug=!1,Os=0;function ir(r){r!==sl&&r.next===null&&(sl===null?_h=sl=r:sl=sl.next=r),wh=!0,cg||(cg=!0,MN())}function $c(r,s){if(!ug&&wh){ug=!0;do for(var l=!1,u=_h;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var T=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-At(42|r)+1)-1,y&=p&~(T&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,$1(u,y))}else y=Fe,y=Ui(u,u===ct?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||vi(u,y)||(l=!0,$1(u,y));u=u.next}while(l);ug=!1}}function DN(){F1()}function F1(){wh=cg=!1;var r=0;Os!==0&&qN()&&(r=Os);for(var s=wn(),l=null,u=_h;u!==null;){var p=u.next,y=q1(u,s);y===0?(u.next=null,l===null?_h=p:l.next=p,p===null&&(sl=l)):(l=u,(r!==0||(y&3)!==0)&&(wh=!0)),u=p}Kt!==0&&Kt!==5||$c(r),Os!==0&&(Os=0)}function q1(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-At(y),C=1<<T,B=p[T];B===-1?((C&l)===0||(C&u)!==0)&&(p[T]=Um(C,s)):B<=s&&(r.expiredLanes|=C),y&=~C}if(s=ct,l=Fe,l=Ui(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===s&&(it===2||it===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ls(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||vi(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(u!==null&&ls(u),Tr(l)){case 2:case 8:l=tc;break;case 32:l=cs;break;case 268435456:l=ud;break;default:l=cs}return u=H1.bind(null,r),l=Gt(l,u),r.callbackPriority=s,r.callbackNode=l,s}return u!==null&&u!==null&&ls(u),r.callbackPriority=2,r.callbackNode=null,2}function H1(r,s){if(Kt!==0&&Kt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(bh()&&r.callbackNode!==l)return null;var u=Fe;return u=Ui(r,r===ct?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(S1(r,u,s),q1(r,wn()),r.callbackNode!=null&&r.callbackNode===l?H1.bind(null,r):null)}function $1(r,s){if(bh())return null;S1(r,s,!0)}function MN(){$N(function(){(et&6)!==0?Gt(ec,DN):F1()})}function dg(){if(Os===0){var r=Ho;r===0&&(r=ji,ji<<=1,(ji&261888)===0&&(ji=256)),Os=r}return Os}function G1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:No(""+r)}function K1(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function ON(r,s,l,u,p){if(s==="submit"&&l&&l.stateNode===p){var y=G1((p[Xt]||null).action),T=u.submitter;T&&(s=(s=T[Xt]||null)?G1(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var C=new Xi("action","action",null,u,p);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Os!==0){var B=T?K1(p,T):new FormData(p);kp(l,{pending:!0,data:B,method:p.method,action:y},null,B)}}else typeof y=="function"&&(C.preventDefault(),B=T?K1(p,T):new FormData(p),kp(l,{pending:!0,data:B,method:p.method,action:y},y,B))},currentTarget:p}]})}}for(var hg=0;hg<Ym.length;hg++){var fg=Ym[hg],VN=fg.toLowerCase(),PN=fg[0].toUpperCase()+fg.slice(1);Ai(VN,"on"+PN)}Ai(Eb,"onAnimationEnd"),Ai(Sb,"onAnimationIteration"),Ai(Ab,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(ZR,"onTransitionRun"),Ai(JR,"onTransitionStart"),Ai(eN,"onTransitionCancel"),Ai(Cb,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gc));function Y1(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var C=u[T],B=C.instance,X=C.currentTarget;if(C=C.listener,B!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=X;try{y(p)}catch(ne){Pd(ne)}p.currentTarget=null,y=B}else for(T=0;T<u.length;T++){if(C=u[T],B=C.instance,X=C.currentTarget,C=C.listener,B!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=X;try{y(p)}catch(ne){Pd(ne)}p.currentTarget=null,y=B}}}}function Be(r,s){var l=s[Eo];l===void 0&&(l=s[Eo]=new Set);var u=r+"__bubble";l.has(u)||(Q1(s,r,2,!1),l.add(u))}function mg(r,s,l){var u=0;s&&(u|=4),Q1(l,r,u,s)}var Th="_reactListening"+Math.random().toString(36).slice(2);function pg(r){if(!r[Th]){r[Th]=!0,rc.forEach(function(l){l!=="selectionchange"&&(jN.has(l)||mg(l,!1,r),mg(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Th]||(s[Th]=!0,mg("selectionchange",!1,s))}}function Q1(r,s,l,u){switch(Ew(s)){case 2:var p=dI;break;case 8:p=hI;break;default:p=Ig}l=p.bind(null,s,l,r),p=void 0,!Na||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function gg(r,s,l,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===p)break;if(T===4)for(T=u.return;T!==null;){var B=T.tag;if((B===3||B===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;C!==null;){if(T=qi(C),T===null)return;if(B=T.tag,B===5||B===6||B===26||B===27){u=y=T;continue e}C=C.parentNode}}u=u.return}ps(function(){var X=y,ne=Wn(l),se=[];e:{var W=Rb.get(r);if(W!==void 0){var J=Xi,ve=r;switch(r){case"keypress":if(ka(l)===0)break e;case"keydown":case"keyup":J=Md;break;case"focusin":ve="focus",J=Ma;break;case"focusout":ve="blur",J=Ma;break;case"beforeblur":case"afterblur":J=Ma;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=w;break;case Eb:case Sb:case Ab:J=Ad;break;case Cb:J=I;break;case"scroll":case"scrollend":J=gc;break;case"wheel":J=Z;break;case"copy":case"cut":case"paste":J=Cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Sr;break;case"toggle":case"beforetoggle":J=Pe}var Ae=(s&4)!==0,lt=!Ae&&(r==="scroll"||r==="scrollend"),K=Ae?W!==null?W+"Capture":null:W;Ae=[];for(var q=X,Q;q!==null;){var ie=q;if(Q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Q===null||K===null||(ie=Ti(q,K),ie!=null&&Ae.push(Kc(q,ie,Q))),lt)break;q=q.return}0<Ae.length&&(W=new J(W,ve,null,l,ne),se.push({event:W,listeners:Ae}))}}if((s&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",W&&l!==fc&&(ve=l.relatedTarget||l.fromElement)&&(qi(ve)||ve[Bi]))break e;if((J||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,J?(ve=l.relatedTarget||l.toElement,J=X,ve=ve?qi(ve):null,ve!==null&&(lt=o(ve),Ae=ve.tag,ve!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(J=null,ve=X),J!==ve)){if(Ae=yc,ie="onMouseLeave",K="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Sr,ie="onPointerLeave",K="onPointerEnter",q="pointer"),lt=J==null?W:Un(J),Q=ve==null?W:Un(ve),W=new Ae(ie,q+"leave",J,l,ne),W.target=lt,W.relatedTarget=Q,ie=null,qi(ne)===X&&(Ae=new Ae(K,q+"enter",ve,l,ne),Ae.target=Q,Ae.relatedTarget=lt,ie=Ae),lt=ie,J&&ve)t:{for(Ae=LN,K=J,q=ve,Q=0,ie=K;ie;ie=Ae(ie))Q++;ie=0;for(var Ee=q;Ee;Ee=Ae(Ee))ie++;for(;0<Q-ie;)K=Ae(K),Q--;for(;0<ie-Q;)q=Ae(q),ie--;for(;Q--;){if(K===q||q!==null&&K===q.alternate){Ae=K;break t}K=Ae(K),q=Ae(q)}Ae=null}else Ae=null;J!==null&&X1(se,W,J,Ae,!1),ve!==null&&lt!==null&&X1(se,lt,ve,Ae,!0)}}e:{if(W=X?Un(X):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var Xe=fb;else if(db(W))if(mb)Xe=QR;else{Xe=KR;var be=GR}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Ro(X.elementType)&&(Xe=fb):Xe=YR;if(Xe&&(Xe=Xe(r,X))){hb(se,Xe,l,ne);break e}be&&be(r,W,X),r==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&uc(W,"number",W.value)}switch(be=X?Un(X):window,r){case"focusin":(db(be)||be.contentEditable==="true")&&(Po=be,$m=X,Tc=null);break;case"focusout":Tc=$m=Po=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,Tb(se,l,ne);break;case"selectionchange":if(WR)break;case"keydown":case"keyup":Tb(se,l,ne)}var Le;if(Je)e:{switch(r){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Vo?Oa(r,l)&&(qe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(Ji&&l.locale!=="ko"&&(Vo||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Vo&&(Le=pc()):(Qi=ne,mc="value"in Qi?Qi.value:Qi.textContent,Vo=!0)),be=xh(X,qe),0<be.length&&(qe=new Zi(qe,r,null,l,ne),se.push({event:qe,listeners:be}),Le?qe.data=Le:(Le=Oo(l),Le!==null&&(qe.data=Le)))),(Le=Jn?FR(r,l):qR(r,l))&&(qe=xh(X,"onBeforeInput"),0<qe.length&&(be=new Zi("onBeforeInput","beforeinput",null,l,ne),se.push({event:be,listeners:qe}),be.data=Le)),ON(se,r,X,l,ne)}Y1(se,s)})}function Kc(r,s,l){return{instance:r,listener:s,currentTarget:l}}function xh(r,s){for(var l=s+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ti(r,l),p!=null&&u.unshift(Kc(r,p,y)),p=Ti(r,s),p!=null&&u.push(Kc(r,p,y))),r.tag===3)return u;r=r.return}return[]}function LN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function X1(r,s,l,u,p){for(var y=s._reactName,T=[];l!==null&&l!==u;){var C=l,B=C.alternate,X=C.stateNode;if(C=C.tag,B!==null&&B===u)break;C!==5&&C!==26&&C!==27||X===null||(B=X,p?(X=Ti(l,y),X!=null&&T.unshift(Kc(l,X,B))):p||(X=Ti(l,y),X!=null&&T.push(Kc(l,X,B)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var UN=/\r\n?/g,zN=/\u0000|\uFFFD/g;function W1(r){return(typeof r=="string"?r:""+r).replace(UN,`
`).replace(zN,"")}function Z1(r,s){return s=W1(s),W1(r)===s}function ot(r,s,l,u,p,y){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||An(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&An(r,""+u);break;case"className":zn(r,"class",u);break;case"tabIndex":zn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(r,l,u);break;case"style":hc(r,u,y);break;case"data":if(s!=="object"){zn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=No(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&ot(r,s,"name",p.name,p,null),ot(r,s,"formEncType",p.formEncType,p,null),ot(r,s,"formMethod",p.formMethod,p,null),ot(r,s,"formTarget",p.formTarget,p,null)):(ot(r,s,"encType",p.encType,p,null),ot(r,s,"method",p.method,p,null),ot(r,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=No(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=wi);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=No(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":Be("beforetoggle",r),Be("toggle",r),Ao(r,"popover",u);break;case"xlinkActuate":jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ao(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=xd.get(l)||l,Ao(r,l,u))}}function yg(r,s,l,u,p,y){switch(l){case"style":hc(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?An(r,u):(typeof u=="number"||typeof u=="bigint")&&An(r,""+u);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"onClick":u!=null&&(r.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),y=r[Xt]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,u,p);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Ao(r,l,u)}}}function an(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var u=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(r,s,y,T,l,null)}}p&&ot(r,s,"srcSet",l.srcSet,l,null),u&&ot(r,s,"src",l.src,l,null);return;case"input":Be("invalid",r);var C=y=T=p=null,B=null,X=null;for(u in l)if(l.hasOwnProperty(u)){var ne=l[u];if(ne!=null)switch(u){case"name":p=ne;break;case"type":T=ne;break;case"checked":B=ne;break;case"defaultChecked":X=ne;break;case"value":y=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:ot(r,s,u,ne,l,null)}}_d(r,y,C,B,X,T,p,!1);return;case"select":Be("invalid",r),u=T=y=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:ot(r,s,p,C,l,null)}s=y,l=T,r.multiple=!!u,s!=null?ds(r,!!u,s,!1):l!=null&&ds(r,!!u,l,!0);return;case"textarea":Be("invalid",r),y=p=u=null;for(T in l)if(l.hasOwnProperty(T)&&(C=l[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ot(r,s,T,C,l,null)}hs(r,u,p,y);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(u=l[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(r,s,B,u,l,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(u=0;u<Gc.length;u++)Be(Gc[u],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(u=l[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(r,s,X,u,l,null)}return;default:if(Ro(s)){for(ne in l)l.hasOwnProperty(ne)&&(u=l[ne],u!==void 0&&yg(r,s,ne,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&ot(r,s,C,u,l,null))}function BN(r,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,C=null,B=null,X=null,ne=null;for(J in l){var se=l[J];if(l.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":B=se;default:u.hasOwnProperty(J)||ot(r,s,J,null,u,se)}}for(var W in u){var J=u[W];if(se=l[W],u.hasOwnProperty(W)&&(J!=null||se!=null))switch(W){case"type":y=J;break;case"name":p=J;break;case"checked":X=J;break;case"defaultChecked":ne=J;break;case"value":T=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==se&&ot(r,s,W,J,u,se)}}Co(r,T,C,B,X,ne,y,p);return;case"select":J=T=C=W=null;for(y in l)if(B=l[y],l.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":J=B;default:u.hasOwnProperty(y)||ot(r,s,y,null,u,B)}for(p in u)if(y=u[p],B=l[p],u.hasOwnProperty(p)&&(y!=null||B!=null))switch(p){case"value":W=y;break;case"defaultValue":C=y;break;case"multiple":T=y;default:y!==B&&ot(r,s,p,y,u,B)}s=C,l=T,u=J,W!=null?ds(r,!!l,W,!1):!!u!=!!l&&(s!=null?ds(r,!!l,s,!0):ds(r,!!l,l?[]:"",!1));return;case"textarea":J=W=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ot(r,s,C,null,u,p)}for(T in u)if(p=u[T],y=l[T],u.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":W=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ot(r,s,T,p,u,y)}wd(r,W,J);return;case"option":for(var ve in l)if(W=l[ve],l.hasOwnProperty(ve)&&W!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ot(r,s,ve,null,u,W)}for(B in u)if(W=u[B],J=l[B],u.hasOwnProperty(B)&&W!==J&&(W!=null||J!=null))switch(B){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ot(r,s,B,W,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)W=l[Ae],l.hasOwnProperty(Ae)&&W!=null&&!u.hasOwnProperty(Ae)&&ot(r,s,Ae,null,u,W);for(X in u)if(W=u[X],J=l[X],u.hasOwnProperty(X)&&W!==J&&(W!=null||J!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ot(r,s,X,W,u,J)}return;default:if(Ro(s)){for(var lt in l)W=l[lt],l.hasOwnProperty(lt)&&W!==void 0&&!u.hasOwnProperty(lt)&&yg(r,s,lt,void 0,u,W);for(ne in u)W=u[ne],J=l[ne],!u.hasOwnProperty(ne)||W===J||W===void 0&&J===void 0||yg(r,s,ne,W,u,J);return}}for(var K in l)W=l[K],l.hasOwnProperty(K)&&W!=null&&!u.hasOwnProperty(K)&&ot(r,s,K,null,u,W);for(se in u)W=u[se],J=l[se],!u.hasOwnProperty(se)||W===J||W==null&&J==null||ot(r,s,se,W,u,J)}function J1(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],y=p.transferSize,T=p.initiatorType,C=p.duration;if(y&&C&&J1(T)){for(T=0,C=p.responseEnd,u+=1;u<l.length;u++){var B=l[u],X=B.startTime;if(X>C)break;var ne=B.transferSize,se=B.initiatorType;ne&&J1(se)&&(B=B.responseEnd,T+=ne*(B<C?1:(C-X)/(B-X)))}if(--u,s+=8*(y+T)/(p.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var vg=null,bg=null;function Eh(r){return r.nodeType===9?r:r.ownerDocument}function ew(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function _g(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wg=null;function qN(){var r=window.event;return r&&r.type==="popstate"?r===wg?!1:(wg=r,!0):(wg=null,!1)}var nw=typeof setTimeout=="function"?setTimeout:void 0,HN=typeof clearTimeout=="function"?clearTimeout:void 0,iw=typeof Promise=="function"?Promise:void 0,$N=typeof queueMicrotask=="function"?queueMicrotask:typeof iw<"u"?function(r){return iw.resolve(null).then(r).catch(GN)}:nw;function GN(r){setTimeout(function(){throw r})}function Vs(r){return r==="head"}function rw(r,s){var l=s,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(p),cl(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Yc(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Yc(l);for(var y=l.firstChild;y;){var T=y.nextSibling,C=y.nodeName;y[Fi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&Yc(r.ownerDocument.body);l=p}while(l);cl(s)}function sw(r,s){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function Tg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Tg(l),So(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function KN(r,s,l,u){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Fi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=ai(r.nextSibling),r===null)break}return null}function YN(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=ai(r.nextSibling),r===null))return null;return r}function aw(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=ai(r.nextSibling),r===null))return null;return r}function xg(r){return r.data==="$?"||r.data==="$~"}function Eg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function QN(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function ai(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Sg=null;function ow(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return ai(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function lw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function cw(r,s,l){switch(s=Eh(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Yc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);So(r)}var oi=new Map,uw=new Set;function Sh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var zr=ae.d;ae.d={f:XN,r:WN,D:ZN,C:JN,L:eI,m:tI,X:iI,S:nI,M:rI};function XN(){var r=zr.f(),s=gh();return r||s}function WN(r){var s=Xn(r);s!==null&&s.tag===5&&s.type==="form"?C_(s):zr.r(r)}var al=typeof document>"u"?null:document;function dw(r,s,l){var u=al;if(u&&typeof s=="string"&&s){var p=Sn(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),uw.has(p)||(uw.add(p),r={rel:r,crossOrigin:l,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),an(s,"link",r),Pt(s),u.head.appendChild(s)))}}function ZN(r){zr.D(r),dw("dns-prefetch",r,null)}function JN(r,s){zr.C(r,s),dw("preconnect",r,s)}function eI(r,s,l){zr.L(r,s,l);var u=al;if(u&&r&&s){var p='link[rel="preload"][as="'+Sn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Sn(l.imageSizes)+'"]')):p+='[href="'+Sn(r)+'"]';var y=p;switch(s){case"style":y=ol(r);break;case"script":y=ll(r)}oi.has(y)||(r=b({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),oi.set(y,r),u.querySelector(p)!==null||s==="style"&&u.querySelector(Qc(y))||s==="script"&&u.querySelector(Xc(y))||(s=u.createElement("link"),an(s,"link",r),Pt(s),u.head.appendChild(s)))}}function tI(r,s){zr.m(r,s);var l=al;if(l&&r){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Sn(u)+'"][href="'+Sn(r)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ll(r)}if(!oi.has(y)&&(r=b({rel:"modulepreload",href:r},s),oi.set(y,r),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xc(y)))return}u=l.createElement("link"),an(u,"link",r),Pt(u),l.head.appendChild(u)}}}function nI(r,s,l){zr.S(r,s,l);var u=al;if(u&&r){var p=Hi(u).hoistableStyles,y=ol(r);s=s||"default";var T=p.get(y);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(Qc(y)))C.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},l),(l=oi.get(y))&&Ag(r,l);var B=T=u.createElement("link");Pt(B),an(B,"link",r),B._p=new Promise(function(X,ne){B.onload=X,B.onerror=ne}),B.addEventListener("load",function(){C.loading|=1}),B.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ah(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:C},p.set(y,T)}}}function iI(r,s){zr.X(r,s);var l=al;if(l&&r){var u=Hi(l).hoistableScripts,p=ll(r),y=u.get(p);y||(y=l.querySelector(Xc(p)),y||(r=b({src:r,async:!0},s),(s=oi.get(p))&&Cg(r,s),y=l.createElement("script"),Pt(y),an(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function rI(r,s){zr.M(r,s);var l=al;if(l&&r){var u=Hi(l).hoistableScripts,p=ll(r),y=u.get(p);y||(y=l.querySelector(Xc(p)),y||(r=b({src:r,async:!0,type:"module"},s),(s=oi.get(p))&&Cg(r,s),y=l.createElement("script"),Pt(y),an(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function hw(r,s,l,u){var p=(p=we.current)?Sh(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ol(l.href),l=Hi(p).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ol(l.href);var y=Hi(p).hoistableStyles,T=y.get(r);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=p.querySelector(Qc(r)))&&!y._p&&(T.instance=y,T.state.loading=5),oi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},oi.set(r,l),y||sI(p,r,l,T.state))),s&&u===null)throw Error(i(528,""));return T}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ll(l),l=Hi(p).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ol(r){return'href="'+Sn(r)+'"'}function Qc(r){return'link[rel="stylesheet"]['+r+"]"}function fw(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function sI(r,s,l,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),an(s,"link",l),Pt(s),r.head.appendChild(s))}function ll(r){return'[src="'+Sn(r)+'"]'}function Xc(r){return"script[async]"+r}function mw(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Sn(l.href)+'"]');if(u)return s.instance=u,Pt(u),u;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Pt(u),an(u,"style",p),Ah(u,l.precedence,r),s.instance=u;case"stylesheet":p=ol(l.href);var y=r.querySelector(Qc(p));if(y)return s.state.loading|=4,s.instance=y,Pt(y),y;u=fw(l),(p=oi.get(p))&&Ag(u,p),y=(r.ownerDocument||r).createElement("link"),Pt(y);var T=y;return T._p=new Promise(function(C,B){T.onload=C,T.onerror=B}),an(y,"link",u),s.state.loading|=4,Ah(y,l.precedence,r),s.instance=y;case"script":return y=ll(l.src),(p=r.querySelector(Xc(y)))?(s.instance=p,Pt(p),p):(u=l,(p=oi.get(y))&&(u=b({},l),Cg(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),Pt(p),an(p,"link",u),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ah(u,l.precedence,r));return s.instance}function Ah(r,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===s)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function Ag(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Cg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ch=null;function pw(r,s,l){if(Ch===null){var u=new Map,p=Ch=new Map;p.set(l,u)}else p=Ch,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var y=l[p];if(!(y[Fi]||y[Vt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=r+T;var C=u.get(T);C?C.push(y):u.set(T,[y])}}return u}function gw(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function aI(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function yw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function oI(r,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=ol(u.href),y=s.querySelector(Qc(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Rh.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=y,Pt(y);return}y=s.ownerDocument||s,u=fw(u),(p=oi.get(p))&&Ag(u,p),y=y.createElement("link"),Pt(y);var T=y;T._p=new Promise(function(C,B){T.onload=C,T.onerror=B}),an(y,"link",u),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Rh.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var Rg=0;function lI(r,s){return r.stylesheets&&r.count===0&&Ih(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&Ih(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&Rg===0&&(Rg=62500*FN());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ih(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Rg?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Nh=null;function Ih(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Nh=new Map,s.forEach(cI,r),Nh=null,Rh.call(r))}function cI(r,s){if(!(s.state.loading&4)){var l=Nh.get(r);if(l)var u=l.get(null);else{l=new Map,Nh.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}p=s.instance,T=p.getAttribute("data-precedence"),y=l.get(T)||u,y===u&&l.set(null,p),l.set(T,p),this.count++,u=Rh.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var Wc={$$typeof:P,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function uI(r,s,l,u,p,y,T,C,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function vw(r,s,l,u,p,y,T,C,B,X,ne,se){return r=new uI(r,s,l,T,B,X,ne,se,C),s=1,y===!0&&(s|=24),y=Fn(3,null,null,s),r.current=y,y.stateNode=r,s=op(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:s},dp(y),r}function bw(r){return r?(r=Uo,r):Uo}function _w(r,s,l,u,p,y){p=bw(p),u.context===null?u.context=p:u.pendingContext=p,u=Es(s),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Ss(r,u,s),l!==null&&(kn(l,r,s),Nc(l,r,s))}function ww(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Ng(r,s){ww(r,s),(r=r.alternate)&&ww(r,s)}function Tw(r){if(r.tag===13||r.tag===31){var s=ja(r,67108864);s!==null&&kn(s,r,67108864),Ng(r,67108864)}}function xw(r){if(r.tag===13||r.tag===31){var s=Kn();s=Sa(s);var l=ja(r,s);l!==null&&kn(l,r,s),Ng(r,s)}}var kh=!0;function dI(r,s,l,u){var p=$.T;$.T=null;var y=ae.p;try{ae.p=2,Ig(r,s,l,u)}finally{ae.p=y,$.T=p}}function hI(r,s,l,u){var p=$.T;$.T=null;var y=ae.p;try{ae.p=8,Ig(r,s,l,u)}finally{ae.p=y,$.T=p}}function Ig(r,s,l,u){if(kh){var p=kg(u);if(p===null)gg(r,s,u,Dh,l),Sw(r,u);else if(mI(p,r,s,l,u))u.stopPropagation();else if(Sw(r,u),s&4&&-1<fI.indexOf(r)){for(;p!==null;){var y=Xn(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Li(y.pendingLanes);if(T!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var B=1<<31-At(T);C.entanglements[1]|=B,T&=~B}ir(y),(et&6)===0&&(mh=wn()+500,$c(0))}}break;case 31:case 13:C=ja(y,2),C!==null&&kn(C,y,2),gh(),Ng(y,2)}if(y=kg(u),y===null&&gg(r,s,u,Dh,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else gg(r,s,u,null,l)}}function kg(r){return r=Wn(r),Dg(r)}var Dh=null;function Dg(r){if(Dh=null,r=qi(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=c(s),r!==null)return r;r=null}else if(l===31){if(r=d(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Dh=r,null}function Ew(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wa()){case ec:return 2;case tc:return 8;case cs:case Lm:return 32;case ud:return 268435456;default:return 32}default:return 32}}var Mg=!1,Ps=null,js=null,Ls=null,Zc=new Map,Jc=new Map,Us=[],fI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sw(r,s){switch(r){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Zc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jc.delete(s.pointerId)}}function eu(r,s,l,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Xn(s),s!==null&&Tw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function mI(r,s,l,u,p){switch(s){case"focusin":return Ps=eu(Ps,r,s,l,u,p),!0;case"dragenter":return js=eu(js,r,s,l,u,p),!0;case"mouseover":return Ls=eu(Ls,r,s,l,u,p),!0;case"pointerover":var y=p.pointerId;return Zc.set(y,eu(Zc.get(y)||null,r,s,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Jc.set(y,eu(Jc.get(y)||null,r,s,l,u,p)),!0}return!1}function Aw(r){var s=qi(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){r.blockedOn=s,bi(r.priority,function(){xw(l)});return}}else if(s===31){if(s=d(l),s!==null){r.blockedOn=s,bi(r.priority,function(){xw(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=kg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);fc=u,l.target.dispatchEvent(u),fc=null}else return s=Xn(l),s!==null&&Tw(s),r.blockedOn=l,!1;s.shift()}return!0}function Cw(r,s,l){Mh(r)&&l.delete(s)}function pI(){Mg=!1,Ps!==null&&Mh(Ps)&&(Ps=null),js!==null&&Mh(js)&&(js=null),Ls!==null&&Mh(Ls)&&(Ls=null),Zc.forEach(Cw),Jc.forEach(Cw)}function Oh(r,s){r.blockedOn===s&&(r.blockedOn=null,Mg||(Mg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pI)))}var Vh=null;function Rw(r){Vh!==r&&(Vh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vh===r&&(Vh=null);for(var s=0;s<r.length;s+=3){var l=r[s],u=r[s+1],p=r[s+2];if(typeof u!="function"){if(Dg(u||l)===null)continue;break}var y=Xn(l);y!==null&&(r.splice(s,3),s-=3,kp(y,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function cl(r){function s(B){return Oh(B,r)}Ps!==null&&Oh(Ps,r),js!==null&&Oh(js,r),Ls!==null&&Oh(Ls,r),Zc.forEach(s),Jc.forEach(s);for(var l=0;l<Us.length;l++){var u=Us[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Us.length&&(l=Us[0],l.blockedOn===null);)Aw(l),l.blockedOn===null&&Us.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],T=p[Xt]||null;if(typeof y=="function")T||Rw(l);else if(T){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Xt]||null)C=T.formAction;else if(Dg(p)!==null)continue}else C=T.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Rw(l)}}}function Nw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Og(r){this._internalRoot=r}Ph.prototype.render=Og.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,u=Kn();_w(l,u,r,s,null,null)},Ph.prototype.unmount=Og.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;_w(r.current,2,null,r,null,null),gh(),s[Bi]=null}};function Ph(r){this._internalRoot=r}Ph.prototype.unstable_scheduleHydration=function(r){if(r){var s=gd();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Us.length&&s!==0&&s<Us[l].priority;l++);Us.splice(l,0,r),l===0&&Aw(r)}};var Iw=e.version;if(Iw!=="19.2.0")throw Error(i(527,Iw,"19.2.0"));ae.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var gI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{yi=jh.inject(gI),en=jh}catch{}}return nu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,u="",p=j_,y=L_,T=U_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=vw(r,1,!1,null,null,l,u,null,p,y,T,Nw),r[Bi]=s.current,pg(r),new Og(s)},nu.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var u=!1,p="",y=j_,T=L_,C=U_,B=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(B=l.formState)),s=vw(r,1,!0,s,l??null,u,p,B,y,T,C,Nw),s.context=bw(null),l=s.current,u=Kn(),u=Sa(u),p=Es(u),p.callback=null,Ss(l,p,u),l=u,s.current.lanes=l,xa(s,l),ir(s),r[Bi]=s.current,pg(r),new Ph(s)},nu.version="19.2.0",nu}var zw;function CI(){if(zw)return jg.exports;zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jg.exports=AI(),jg.exports}var RI=CI();const NI="modulepreload",II=function(t){return"/personal-budget-pwa/"+t},Bw={},kI=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let f=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");a=f(n.map(g=>{if(g=II(g),g in Bw)return;Bw[g]=!0;const b=g.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":NI,b||(E.as="script"),E.crossOrigin="",E.href=g,h&&E.setAttribute("nonce",h),document.head.appendChild(E),b)return new Promise((k,A)=>{E.addEventListener("load",k),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function DI(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:c}=t;let d,h;const f=async(b=!0)=>{await h};async function g(){if("serviceWorker"in navigator){if(d=await kI(async()=>{const{Workbox:b}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:b}},[]).then(({Workbox:b})=>new b("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(b=>{c?.(b)}),!d)return;d.addEventListener("activated",b=>{(b.isUpdate||b.isExternal)&&window.location.reload()}),d.addEventListener("installed",b=>{b.isUpdate||i?.()}),d.register({immediate:e}).then(b=>{o?o("/personal-budget-pwa/sw.js",b):a?.(b)}).catch(b=>{c?.(b)})}}return h=g(),f}var Fw="popstate";function MI(t={}){function e(a,o){let{pathname:c="/",search:d="",hash:h=""}=yo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),w0("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=a.location.href,f=h.indexOf("#");d=f===-1?h:h.slice(0,f)}return d+"#"+(typeof o=="string"?o:Eu(o))}function i(a,o){gi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return VI(e,n,i,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OI(){return Math.random().toString(36).substring(2,10)}function qw(t,e){return{usr:t.state,key:t.key,idx:e}}function w0(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:n,key:e&&e.key||i||OI()}}function Eu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function VI(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,d="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function b(){d="POP";let N=g(),O=N==null?null:N-f;f=N,h&&h({action:d,location:A.location,delta:O})}function _(N,O){d="PUSH";let z=w0(A.location,N,O);n&&n(z,N),f=g()+1;let P=qw(z,f),H=A.createHref(z);try{c.pushState(P,"",H)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(H)}o&&h&&h({action:d,location:A.location,delta:1})}function E(N,O){d="REPLACE";let z=w0(A.location,N,O);n&&n(z,N),f=g();let P=qw(z,f),H=A.createHref(z);c.replaceState(P,"",H),o&&h&&h({action:d,location:A.location,delta:0})}function k(N){return PI(N)}let A={get action(){return d},get location(){return t(a,c)},listen(N){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(Fw,b),h=N,()=>{a.removeEventListener(Fw,b),h=null}},createHref(N){return e(a,N)},createURL:k,encodeLocation(N){let O=k(N);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:E,go(N){return c.go(N)}};return A}function PI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),bt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Eu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function JE(t,e,n="/"){return jI(t,e,n,!1)}function jI(t,e,n,i){let a=typeof e=="string"?yo(e):e,o=Xr(a.pathname||"/",n);if(o==null)return null;let c=eS(t);LI(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=QI(o);d=KI(c[h],f,i)}return d}function eS(t,e=[],n=[],i="",a=!1){let o=(c,d,h=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&h)return;bt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let b=Kr([i,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(bt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),eS(c.children,e,_,b,h)),!(c.path==null&&!c.index)&&e.push({path:b,score:$I(b,c.index),routesMeta:_})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of tS(c.path))o(c,d,!0,h)}),e}function tS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=tS(i.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function LI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var UI=/^:[\w-]+$/,zI=3,BI=2,FI=1,qI=10,HI=-2,Hw=t=>t==="*";function $I(t,e){let n=t.split("/"),i=n.length;return n.some(Hw)&&(i+=HI),e&&(i+=BI),n.filter(a=>!Hw(a)).reduce((a,o)=>a+(UI.test(o)?zI:o===""?FI:qI),i)}function GI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function KI(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],f=d===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",b=vf({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!b&&f&&n&&!i[i.length-1].route.index&&(b=vf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:Kr([o,b.pathname]),pathnameBase:ek(Kr([o,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(o=Kr([o,b.pathnameBase]))}return c}function vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=YI(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:b},_)=>{if(g==="*"){let k=d[_]||"";c=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const E=d[_];return b&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function YI(t,e=!1,n=!0){gi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function QI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var XI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WI=t=>XI.test(t);function ZI(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?yo(t):t,o;if(n)if(WI(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),gi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?o=$w(n.substring(1),"/"):o=$w(n,e)}else o=e;return{pathname:o,search:tk(i),hash:nk(a)}}function $w(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Bg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nS(t){let e=JI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function iS(t,e,n,i=!1){let a;typeof t=="string"?a=yo(t):(a={...t},bt(!a.pathname||!a.pathname.includes("?"),Bg("?","pathname","search",a)),bt(!a.pathname||!a.pathname.includes("#"),Bg("#","pathname","hash",a)),bt(!a.search||!a.search.includes("#"),Bg("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=n;else{let b=e.length-1;if(!i&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),b-=1;a.pathname=_.join("/")}d=b>=0?e[b]:"/"}let h=ZI(a,d),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var Kr=t=>t.join("/").replace(/\/\/+/g,"/"),ek=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ik(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rS=["POST","PUT","PATCH","DELETE"];new Set(rS);var rk=["GET",...rS];new Set(rk);var zl=V.createContext(null);zl.displayName="DataRouter";var Xf=V.createContext(null);Xf.displayName="DataRouterState";V.createContext(!1);var sS=V.createContext({isTransitioning:!1});sS.displayName="ViewTransition";var sk=V.createContext(new Map);sk.displayName="Fetchers";var ak=V.createContext(null);ak.displayName="Await";var br=V.createContext(null);br.displayName="Navigation";var qu=V.createContext(null);qu.displayName="Location";var _r=V.createContext({outlet:null,matches:[],isDataRoute:!1});_r.displayName="Route";var xy=V.createContext(null);xy.displayName="RouteError";function ok(t,{relative:e}={}){bt(Hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=V.useContext(br),{hash:a,pathname:o,search:c}=$u(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:Kr([n,o])),i.createHref({pathname:d,search:c,hash:a})}function Hu(){return V.useContext(qu)!=null}function fa(){return bt(Hu(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(qu).location}var aS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oS(t){V.useContext(br).static||V.useLayoutEffect(t)}function ma(){let{isDataRoute:t}=V.useContext(_r);return t?wk():lk()}function lk(){bt(Hu(),"useNavigate() may be used only in the context of a <Router> component.");let t=V.useContext(zl),{basename:e,navigator:n}=V.useContext(br),{matches:i}=V.useContext(_r),{pathname:a}=fa(),o=JSON.stringify(nS(i)),c=V.useRef(!1);return oS(()=>{c.current=!0}),V.useCallback((h,f={})=>{if(gi(c.current,aS),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=iS(h,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Kr([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,a,t])}V.createContext(null);function ck(){let{matches:t}=V.useContext(_r),e=t[t.length-1];return e?e.params:{}}function $u(t,{relative:e}={}){let{matches:n}=V.useContext(_r),{pathname:i}=fa(),a=JSON.stringify(nS(n));return V.useMemo(()=>iS(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function uk(t,e){return lS(t,e)}function lS(t,e,n,i,a){bt(Hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=V.useContext(br),{matches:c}=V.useContext(_r),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let z=b&&b.path||"";cS(f,!b||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=fa(),E;if(e){let z=typeof e=="string"?yo(e):e;bt(g==="/"||z.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),E=z}else E=_;let k=E.pathname||"/",A=k;if(g!=="/"){let z=g.replace(/^\//,"").split("/");A="/"+k.replace(/^\//,"").split("/").slice(z.length).join("/")}let N=JE(t,{pathname:A});gi(b||N!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),gi(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=pk(N&&N.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Kr([g,o.encodeLocation?o.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Kr([g,o.encodeLocation?o.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,n,i,a);return e&&O?V.createElement(qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},O):O}function dk(){let t=_k(),e=ik(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:o},"ErrorBoundary")," or"," ",V.createElement("code",{style:o},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:a},n):null,c)}var hk=V.createElement(dk,null),fk=class extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?V.createElement(_r.Provider,{value:this.props.routeContext},V.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mk({routeContext:t,match:e,children:n}){let i=V.useContext(zl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(_r.Provider,{value:t},n)}function pk(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let g=o.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);bt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,h=-1;if(n)for(let g=0;g<o.length;g++){let b=o[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=g),b.route.id){let{loaderData:_,errors:E}=n,k=b.route.loader&&!_.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||k){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=n&&i?(g,b)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:b})}:void 0;return o.reduceRight((g,b,_)=>{let E,k=!1,A=null,N=null;n&&(E=c&&b.route.id?c[b.route.id]:void 0,A=b.route.errorElement||hk,d&&(h<0&&_===0?(cS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,N=null):h===_&&(k=!0,N=b.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,_+1)),z=()=>{let P;return E?P=A:k?P=N:b.route.Component?P=V.createElement(b.route.Component,null):b.route.element?P=b.route.element:P=g,V.createElement(mk,{match:b,routeContext:{outlet:g,matches:O,isDataRoute:n!=null},children:P})};return n&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?V.createElement(fk,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:z(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:f}):z()},null)}function Ey(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gk(t){let e=V.useContext(zl);return bt(e,Ey(t)),e}function yk(t){let e=V.useContext(Xf);return bt(e,Ey(t)),e}function vk(t){let e=V.useContext(_r);return bt(e,Ey(t)),e}function Sy(t){let e=vk(t),n=e.matches[e.matches.length-1];return bt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function bk(){return Sy("useRouteId")}function _k(){let t=V.useContext(xy),e=yk("useRouteError"),n=Sy("useRouteError");return t!==void 0?t:e.errors?.[n]}function wk(){let{router:t}=gk("useNavigate"),e=Sy("useNavigate"),n=V.useRef(!1);return oS(()=>{n.current=!0}),V.useCallback(async(a,o={})=>{gi(n.current,aS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var Gw={};function cS(t,e,n){!e&&!Gw[t]&&(Gw[t]=!0,gi(!1,n))}V.memo(Tk);function Tk({routes:t,future:e,state:n,unstable_onError:i}){return lS(t,void 0,n,i,e)}function Br(t){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xk({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){bt(!Hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof n=="string"&&(n=yo(n));let{pathname:h="/",search:f="",hash:g="",state:b=null,key:_="default"}=n,E=V.useMemo(()=>{let k=Xr(h,c);return k==null?null:{location:{pathname:k,search:f,hash:g,state:b,key:_},navigationType:i}},[c,h,f,g,b,_,i]);return gi(E!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:V.createElement(br.Provider,{value:d},V.createElement(qu.Provider,{children:e,value:E}))}function Ek({children:t,location:e}){return uk(T0(t),e)}function T0(t,e=[]){let n=[];return V.Children.forEach(t,(i,a)=>{if(!V.isValidElement(i))return;let o=[...e,a];if(i.type===V.Fragment){n.push.apply(n,T0(i.props.children,o));return}bt(i.type===Br,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=T0(i.props.children,o)),n.push(c)}),n}var Zh="get",Jh="application/x-www-form-urlencoded";function Wf(t){return t!=null&&typeof t.tagName=="string"}function Sk(t){return Wf(t)&&t.tagName.toLowerCase()==="button"}function Ak(t){return Wf(t)&&t.tagName.toLowerCase()==="form"}function Ck(t){return Wf(t)&&t.tagName.toLowerCase()==="input"}function Rk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Nk(t,e){return t.button===0&&(!e||e==="_self")&&!Rk(t)}var Uh=null;function Ik(){if(Uh===null)try{new FormData(document.createElement("form"),0),Uh=!1}catch{Uh=!0}return Uh}var kk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fg(t){return t!=null&&!kk.has(t)?(gi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jh}"`),null):t}function Dk(t,e){let n,i,a,o,c;if(Ak(t)){let d=t.getAttribute("action");i=d?Xr(d,e):null,n=t.getAttribute("method")||Zh,a=Fg(t.getAttribute("enctype"))||Jh,o=new FormData(t)}else if(Sk(t)||Ck(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(i=h?Xr(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Zh,a=Fg(t.getAttribute("formenctype"))||Fg(d.getAttribute("enctype"))||Jh,o=new FormData(d,t),!Ik()){let{name:f,type:g,value:b}=t;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,b)}}else{if(Wf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zh,i=null,a=Jh,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ay(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mk(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Xr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Ok(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Pk(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await Ok(o,n);return c.links?c.links():[]}return[]}));return zk(i.flat(1).filter(Vk).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Kw(t,e,n,i,a,o){let c=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>n[f].pathname!==h.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):o==="data"?e.filter((h,f)=>{let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function jk(t,e,{includeHydrateFallback:n}={}){return Lk(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Lk(t){return[...new Set(t)]}function Uk(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function zk(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(Uk(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function uS(){let t=V.useContext(zl);return Ay(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Bk(){let t=V.useContext(Xf);return Ay(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cy=V.createContext(void 0);Cy.displayName="FrameworkContext";function dS(){let t=V.useContext(Cy);return Ay(t,"You must render this element inside a <HydratedRouter> element"),t}function Fk(t,e){let n=V.useContext(Cy),[i,a]=V.useState(!1),[o,c]=V.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=e,_=V.useRef(null);V.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=O=>{O.forEach(z=>{c(z.isIntersecting)})},N=new IntersectionObserver(A,{threshold:.5});return _.current&&N.observe(_.current),()=>{N.disconnect()}}},[t]),V.useEffect(()=>{if(i){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[i]);let E=()=>{a(!0)},k=()=>{a(!1),c(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:iu(d,E),onBlur:iu(h,k),onMouseEnter:iu(f,E),onMouseLeave:iu(g,k),onTouchStart:iu(b,E)}]:[!1,_,{}]}function iu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function qk({page:t,...e}){let{router:n}=uS(),i=V.useMemo(()=>JE(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?V.createElement($k,{page:t,matches:i,...e}):null}function Hk(t){let{manifest:e,routeModules:n}=dS(),[i,a]=V.useState([]);return V.useEffect(()=>{let o=!1;return Pk(t,e,n).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,n]),i}function $k({page:t,matches:e,...n}){let i=fa(),{manifest:a,routeModules:o}=dS(),{basename:c}=uS(),{loaderData:d,matches:h}=Bk(),f=V.useMemo(()=>Kw(t,e,h,a,i,"data"),[t,e,h,a,i]),g=V.useMemo(()=>Kw(t,e,h,a,i,"assets"),[t,e,h,a,i]),b=V.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let k=new Set,A=!1;if(e.forEach(O=>{let z=a.routes[O.route.id];!z||!z.hasLoader||(!f.some(P=>P.route.id===O.route.id)&&O.route.id in d&&o[O.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:k.add(O.route.id))}),k.size===0)return[];let N=Mk(t,c,"data");return A&&k.size>0&&N.searchParams.set("_routes",e.filter(O=>k.has(O.route.id)).map(O=>O.route.id).join(",")),[N.pathname+N.search]},[c,d,i,a,f,e,t,o]),_=V.useMemo(()=>jk(g,a),[g,a]),E=Hk(g);return V.createElement(V.Fragment,null,b.map(k=>V.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),_.map(k=>V.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),E.map(({key:k,link:A})=>V.createElement("link",{key:k,nonce:n.nonce,...A})))}function Gk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hS&&(window.__reactRouterVersion="7.9.6")}catch{}function Kk({basename:t,children:e,window:n}){let i=V.useRef();i.current==null&&(i.current=MI({window:n,v5Compat:!0}));let a=i.current,[o,c]=V.useState({action:a.action,location:a.location}),d=V.useCallback(h=>{V.startTransition(()=>c(h))},[c]);return V.useLayoutEffect(()=>a.listen(d),[a,d]),V.createElement(xk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var fS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mS=V.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:d,target:h,to:f,preventScrollReset:g,viewTransition:b,..._},E){let{basename:k}=V.useContext(br),A=typeof f=="string"&&fS.test(f),N,O=!1;if(typeof f=="string"&&A&&(N=f,hS))try{let M=new URL(window.location.href),j=f.startsWith("//")?new URL(M.protocol+f):new URL(f),D=Xr(j.pathname,k);j.origin===M.origin&&D!=null?f=D+j.search+j.hash:O=!0}catch{gi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=ok(f,{relative:a}),[P,H,te]=Fk(i,_),ee=Wk(f,{replace:c,state:d,target:h,preventScrollReset:g,relative:a,viewTransition:b});function S(M){e&&e(M),M.defaultPrevented||ee(M)}let R=V.createElement("a",{..._,...te,href:N||z,onClick:O||o?e:S,ref:Gk(E,H),target:h,"data-discover":!A&&n==="render"?"true":void 0});return P&&!A?V.createElement(V.Fragment,null,R,V.createElement(qk,{page:z})):R});mS.displayName="Link";var Yk=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:d,children:h,...f},g){let b=$u(c,{relative:f.relative}),_=fa(),E=V.useContext(Xf),{navigator:k,basename:A}=V.useContext(br),N=E!=null&&nD(b)&&d===!0,O=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,z=_.pathname,P=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(z=z.toLowerCase(),P=P?P.toLowerCase():null,O=O.toLowerCase()),P&&A&&(P=Xr(P,A)||P);const H=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let te=z===O||!a&&z.startsWith(O)&&z.charAt(H)==="/",ee=P!=null&&(P===O||!a&&P.startsWith(O)&&P.charAt(O.length)==="/"),S={isActive:te,isPending:ee,isTransitioning:N},R=te?e:void 0,M;typeof i=="function"?M=i(S):M=[i,te?"active":null,ee?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(S):o;return V.createElement(mS,{...f,"aria-current":R,className:M,ref:g,style:j,to:c,viewTransition:d},typeof h=="function"?h(S):h)});Yk.displayName="NavLink";var Qk=V.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:c=Zh,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:b,..._},E)=>{let k=eD(),A=tD(d,{relative:f}),N=c.toLowerCase()==="get"?"get":"post",O=typeof d=="string"&&fS.test(d),z=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let H=P.nativeEvent.submitter,te=H?.getAttribute("formmethod")||c;k(H||P.currentTarget,{fetcherKey:e,method:te,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:b})};return V.createElement("form",{ref:E,method:N,action:A,onSubmit:i?h:z,..._,"data-discover":!O&&t==="render"?"true":void 0})});Qk.displayName="Form";function Xk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pS(t){let e=V.useContext(zl);return bt(e,Xk(t)),e}function Wk(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:c}={}){let d=ma(),h=fa(),f=$u(t,{relative:o});return V.useCallback(g=>{if(Nk(g,e)){g.preventDefault();let b=n!==void 0?n:Eu(h)===Eu(f);d(t,{replace:b,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[h,d,f,n,i,e,t,a,o,c])}var Zk=0,Jk=()=>`__${String(++Zk)}__`;function eD(){let{router:t}=pS("useSubmit"),{basename:e}=V.useContext(br),n=bk();return V.useCallback(async(i,a={})=>{let{action:o,method:c,encType:d,formData:h,body:f}=Dk(i,e);if(a.navigate===!1){let g=a.fetcherKey||Jk();await t.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function tD(t,{relative:e}={}){let{basename:n}=V.useContext(br),i=V.useContext(_r);bt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...$u(t||".",{relative:e})},c=fa();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(b=>b).forEach(b=>d.append("index",b));let g=d.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Kr([n,o.pathname])),Eu(o)}function nD(t,{relative:e}={}){let n=V.useContext(sS);bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=pS("useViewTransitionState"),a=$u(t,{relative:e});if(!n.isTransitioning)return!1;let o=Xr(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Xr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return vf(a.pathname,c)!=null||vf(a.pathname,o)!=null}const iD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Yw=t=>{const e=rD(t);return e.charAt(0).toUpperCase()+e.slice(1)},gS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),sD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var aD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oD=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:c,...d},h)=>V.createElement("svg",{ref:h,...aD,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:gS("lucide",a),...!o&&!sD(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,g])=>V.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Ue=(t,e)=>{const n=V.forwardRef(({className:i,...a},o)=>V.createElement(oD,{ref:o,iconNode:e,className:gS(`lucide-${iD(Yw(t))}`,`lucide-${t}`,i),...a}));return n.displayName=Yw(t),n};const lD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Su=Ue("arrow-left",lD);const cD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],uD=Ue("arrow-right-left",cD);const dD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hD=Ue("check",dD);const fD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mD=Ue("chevron-down",fD);const pD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gD=Ue("chevron-left",pD);const yD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wa=Ue("chevron-right",yD);const vD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],bD=Ue("circle-arrow-down",vD);const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],wD=Ue("circle-arrow-up",_D);const TD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ry=Ue("circle-check-big",TD);const xD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qw=Ue("circle-check",xD);const ED=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ef=Ue("circle-plus",ED);const SD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xw=Ue("circle",SD);const AD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bf=Ue("download",AD);const CD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],RD=Ue("eye-off",CD);const ND=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ID=Ue("eye",ND);const kD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],DD=Ue("file-text",kD);const MD=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],OD=Ue("folder-plus",MD);const VD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],PD=Ue("funnel",VD);const jD=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Ww=Ue("git-branch",jD);const LD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],UD=Ue("house",LD);const zD=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],BD=Ue("list",zD);const FD=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Zw=Ue("loader",FD);const qD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],HD=Ue("log-out",qD);const $D=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],x0=Ue("mail",$D);const GD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],co=Ue("refresh-cw",GD);const KD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YD=Ue("save",KD);const QD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],XD=Ue("search",QD);const WD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ZD=Ue("settings",WD);const JD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],e4=Ue("square-pen",JD);const t4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],n4=Ue("target",t4);const i4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ro=Ue("trash-2",i4);const r4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yS=Ue("trash",r4);const s4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],a4=Ue("trending-down",s4);const o4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vS=Ue("triangle-alert",o4);const l4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],c4=Ue("undo-2",l4);const u4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],d4=Ue("upload",u4);const h4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],f4=Ue("user-plus",h4);const m4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],p4=Ue("wallet",m4);const g4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y4=Ue("wifi-off",g4);const v4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],b4=Ue("wifi",v4);const _4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gu=Ue("x",_4),Jw=t=>{let e;const n=new Set,i=(f,g)=>{const b=typeof f=="function"?f(e):f;if(!Object.is(b,e)){const _=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(E=>E(e,_))}},a=()=>e,d={setState:i,getState:a,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=e=t(i,a,d);return d},w4=(t=>t?Jw(t):Jw),T4=t=>t;function x4(t,e=T4){const n=Lh.useSyncExternalStore(t.subscribe,Lh.useCallback(()=>e(t.getState()),[t,e]),Lh.useCallback(()=>e(t.getInitialState()),[t,e]));return Lh.useDebugValue(n),n}const eT=t=>{const e=w4(t),n=i=>x4(e,i);return Object.assign(n,e),n},Zf=(t=>t?eT(t):eT);function E4(t,e){let n;try{n=t()}catch{return}return{getItem:a=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),d=(o=n.getItem(a))!=null?o:null;return d instanceof Promise?d.then(c):c(d)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>n.removeItem(a)}}const E0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return E0(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return E0(i)(n)}}}},S4=(t,e)=>(n,i,a)=>{let o={storage:E4(()=>localStorage),partialize:A=>A,version:0,merge:(A,N)=>({...N,...A}),...e},c=!1;const d=new Set,h=new Set;let f=o.storage;if(!f)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...A)},i,a);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},b=a.setState;a.setState=(A,N)=>(b(A,N),g());const _=t((...A)=>(n(...A),g()),i,a);a.getInitialState=()=>_;let E;const k=()=>{var A,N;if(!f)return;c=!1,d.forEach(z=>{var P;return z((P=i())!=null?P:_)});const O=((N=o.onRehydrateStorage)==null?void 0:N.call(o,(A=i())!=null?A:_))||void 0;return E0(f.getItem.bind(f))(o.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==o.version){if(o.migrate){const P=o.migrate(z.state,z.version);return P instanceof Promise?P.then(H=>[!0,H]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var P;const[H,te]=z;if(E=o.merge(te,(P=i())!=null?P:_),n(E,!0),H)return g()}).then(()=>{O?.(E,void 0),E=i(),c=!0,h.forEach(z=>z(E))}).catch(z=>{O?.(void 0,z)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>k(),hasHydrated:()=>c,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||k(),E||_},Ny=S4;var pl=9e15,pa=1e9,S0="0123456789abcdef",_f="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",wf="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",A0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-pl,maxE:pl,crypto:!1},bS,Hr,ke=!0,Jf="[DecimalError] ",ra=Jf+"Invalid argument: ",_S=Jf+"Precision limit exceeded",wS=Jf+"crypto unavailable",TS="[object Decimal]",vn=Math.floor,Yt=Math.pow,A4=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,C4=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,R4=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,xS=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Di=1e7,Ce=7,N4=9007199254740991,I4=_f.length-1,C0=wf.length-1,ce={toStringTag:TS};ce.absoluteValue=ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Te(t)};ce.ceil=function(){return Te(new this.constructor(this),this.e+1,2)};ce.clampedTo=ce.clamp=function(t,e){var n,i=this,a=i.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(ra+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new a(i)};ce.comparedTo=ce.cmp=function(t){var e,n,i,a,o=this,c=o.d,d=(t=new o.constructor(t)).d,h=o.s,f=t.s;if(!c||!d)return!h||!f?NaN:h!==f?h:c===d?0:!c^h<0?1:-1;if(!c[0]||!d[0])return c[0]?h:d[0]?-f:0;if(h!==f)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(i=c.length,a=d.length,e=0,n=i<a?i:a;e<n;++e)if(c[e]!==d[e])return c[e]>d[e]^h<0?1:-1;return i===a?0:i>a^h<0?1:-1};ce.cosine=ce.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Ce,i.rounding=1,n=k4(i,RS(i,n)),i.precision=t,i.rounding=e,Te(Hr==2||Hr==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};ce.cubeRoot=ce.cbrt=function(){var t,e,n,i,a,o,c,d,h,f,g=this,b=g.constructor;if(!g.isFinite()||g.isZero())return new b(g);for(ke=!1,o=g.s*Yt(g.s*g,1/3),!o||Math.abs(o)==1/0?(n=un(g.d),t=g.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=Yt(n,1/3),t=vn((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new b(n),i.s=g.s):i=new b(o.toString()),c=(t=b.precision)+3;;)if(d=i,h=d.times(d).times(d),f=h.plus(g),i=ut(f.plus(g).times(d),f.plus(h),c+2,1),un(d.d).slice(0,c)===(n=un(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!a&&n=="4999"){if(!a&&(Te(d,t+1,0),d.times(d).times(d).eq(g))){i=d;break}c+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Te(i,t+1,1),e=!i.times(i).times(i).eq(g));break}return ke=!0,Te(i,t,b.rounding,e)};ce.decimalPlaces=ce.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-vn(this.e/Ce))*Ce,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};ce.dividedBy=ce.div=function(t){return ut(this,new this.constructor(t))};ce.dividedToIntegerBy=ce.divToInt=function(t){var e=this,n=e.constructor;return Te(ut(e,new n(t),0,1,1),n.precision,n.rounding)};ce.equals=ce.eq=function(t){return this.cmp(t)===0};ce.floor=function(){return Te(new this.constructor(this),this.e+1,3)};ce.greaterThan=ce.gt=function(t){return this.cmp(t)>0};ce.greaterThanOrEqualTo=ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};ce.hyperbolicCosine=ce.cosh=function(){var t,e,n,i,a,o=this,c=o.constructor,d=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return d;n=c.precision,i=c.rounding,c.precision=n+Math.max(o.e,o.sd())+4,c.rounding=1,a=o.d.length,a<32?(t=Math.ceil(a/3),e=(1/tm(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=Rl(c,1,o.times(e),new c(1),!0);for(var h,f=t,g=new c(8);f--;)h=o.times(o),o=d.minus(h.times(g.minus(h.times(g))));return Te(o,c.precision=n,c.rounding=i,!0)};ce.hyperbolicSine=ce.sinh=function(){var t,e,n,i,a=this,o=a.constructor;if(!a.isFinite()||a.isZero())return new o(a);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<3)a=Rl(o,2,a,a,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,a=a.times(1/tm(5,t)),a=Rl(o,2,a,a,!0);for(var c,d=new o(5),h=new o(16),f=new o(20);t--;)c=a.times(a),a=a.times(d.plus(c.times(h.times(c).plus(f))))}return o.precision=e,o.rounding=n,Te(a,e,n,!0)};ce.hyperbolicTangent=ce.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,ut(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};ce.inverseCosine=ce.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,a=e.rounding;return n!==-1?n===0?t.isNeg()?or(e,i,a):new e(0):new e(NaN):t.isZero()?or(e,i+4,a).times(.5):(e.precision=i+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=i,e.rounding=a,t.times(2))};ce.inverseHyperbolicCosine=ce.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,ke=!1,n=n.times(n).minus(1).sqrt().plus(n),ke=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};ce.inverseHyperbolicSine=ce.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,ke=!1,n=n.times(n).plus(1).sqrt().plus(n),ke=!0,i.precision=t,i.rounding=e,n.ln())};ce.inverseHyperbolicTangent=ce.atanh=function(){var t,e,n,i,a=this,o=a.constructor;return a.isFinite()?a.e>=0?new o(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=o.precision,e=o.rounding,i=a.sd(),Math.max(i,t)<2*-a.e-1?Te(new o(a),t,e,!0):(o.precision=n=i-a.e,a=ut(a.plus(1),new o(1).minus(a),n+t,1),o.precision=t+4,o.rounding=1,a=a.ln(),o.precision=t,o.rounding=e,a.times(.5))):new o(NaN)};ce.inverseSine=ce.asin=function(){var t,e,n,i,a=this,o=a.constructor;return a.isZero()?new o(a):(e=a.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=or(o,n+4,i).times(.5),t.s=a.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,a=a.div(new o(1).minus(a.times(a)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,a.times(2)))};ce.inverseTangent=ce.atan=function(){var t,e,n,i,a,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&b+4<=C0)return c=or(g,b+4,_).times(.25),c.s=f.s,c}else{if(!f.s)return new g(NaN);if(b+4<=C0)return c=or(g,b+4,_).times(.5),c.s=f.s,c}for(g.precision=d=b+10,g.rounding=1,n=Math.min(28,d/Ce+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(ke=!1,e=Math.ceil(d/Ce),i=1,h=f.times(f),c=new g(f),a=f;t!==-1;)if(a=a.times(h),o=c.minus(a.div(i+=2)),a=a.times(h),c=o.plus(a.div(i+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return n&&(c=c.times(2<<n-1)),ke=!0,Te(c,g.precision=b,g.rounding=_,!0)};ce.isFinite=function(){return!!this.d};ce.isInteger=ce.isInt=function(){return!!this.d&&vn(this.e/Ce)>this.d.length-2};ce.isNaN=function(){return!this.s};ce.isNegative=ce.isNeg=function(){return this.s<0};ce.isPositive=ce.isPos=function(){return this.s>0};ce.isZero=function(){return!!this.d&&this.d[0]===0};ce.lessThan=ce.lt=function(t){return this.cmp(t)<0};ce.lessThanOrEqualTo=ce.lte=function(t){return this.cmp(t)<1};ce.logarithm=ce.log=function(t){var e,n,i,a,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding,E=5;if(t==null)t=new g(10),e=!0;else{if(t=new g(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new g(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new g(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(a=n[0];a%10===0;)a/=10;o=a!==1}if(ke=!1,d=b+E,c=Xs(f,d),i=e?Tf(g,d+10):Xs(t,d),h=ut(c,i,d,1),Au(h.d,a=b,_))do if(d+=10,c=Xs(f,d),i=e?Tf(g,d+10):Xs(t,d),h=ut(c,i,d,1),!o){+un(h.d).slice(a+1,a+15)+1==1e14&&(h=Te(h,b+1,0));break}while(Au(h.d,a+=10,_));return ke=!0,Te(h,b,_)};ce.minus=ce.sub=function(t){var e,n,i,a,o,c,d,h,f,g,b,_,E=this,k=E.constructor;if(t=new k(t),!E.d||!t.d)return!E.s||!t.s?t=new k(NaN):E.d?t.s=-t.s:t=new k(t.d||E.s!==t.s?E:NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(f=E.d,_=t.d,d=k.precision,h=k.rounding,!f[0]||!_[0]){if(_[0])t.s=-t.s;else if(f[0])t=new k(E);else return new k(h===3?-0:0);return ke?Te(t,d,h):t}if(n=vn(t.e/Ce),g=vn(E.e/Ce),f=f.slice(),o=g-n,o){for(b=o<0,b?(e=f,o=-o,c=_.length):(e=_,n=g,c=f.length),i=Math.max(Math.ceil(d/Ce),c)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,c=_.length,b=i<c,b&&(c=i),i=0;i<c;i++)if(f[i]!=_[i]){b=f[i]<_[i];break}o=0}for(b&&(e=f,f=_,_=e,t.s=-t.s),c=f.length,i=_.length-c;i>0;--i)f[c++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(a=i;a&&f[--a]===0;)f[a]=Di-1;--f[a],f[i]+=Di}f[i]-=_[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=em(f,n),ke?Te(t,d,h):t):new k(h===3?-0:0)};ce.modulo=ce.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?Te(new i(n),i.precision,i.rounding):(ke=!1,i.modulo==9?(e=ut(n,t.abs(),0,3,1),e.s*=t.s):e=ut(n,t,0,i.modulo,1),e=e.times(t),ke=!0,n.minus(e))};ce.naturalExponential=ce.exp=function(){return R0(this)};ce.naturalLogarithm=ce.ln=function(){return Xs(this)};ce.negated=ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Te(t)};ce.plus=ce.add=function(t){var e,n,i,a,o,c,d,h,f,g,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d||(t=new _(t.d||b.s===t.s?b:NaN)),t;if(b.s!=t.s)return t.s=-t.s,b.minus(t);if(f=b.d,g=t.d,d=_.precision,h=_.rounding,!f[0]||!g[0])return g[0]||(t=new _(b)),ke?Te(t,d,h):t;if(o=vn(b.e/Ce),i=vn(t.e/Ce),f=f.slice(),a=o-i,a){for(a<0?(n=f,a=-a,c=g.length):(n=g,i=o,c=f.length),o=Math.ceil(d/Ce),c=o>c?o+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=f.length,a=g.length,c-a<0&&(a=c,n=g,g=f,f=n),e=0;a;)e=(f[--a]=f[a]+g[a]+e)/Di|0,f[a]%=Di;for(e&&(f.unshift(e),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=em(f,i),ke?Te(t,d,h):t};ce.precision=ce.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ra+t);return n.d?(e=ES(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};ce.round=function(){var t=this,e=t.constructor;return Te(new e(t),t.e+1,e.rounding)};ce.sine=ce.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Ce,i.rounding=1,n=M4(i,RS(i,n)),i.precision=t,i.rounding=e,Te(Hr>2?n.neg():n,t,e,!0)):new i(NaN)};ce.squareRoot=ce.sqrt=function(){var t,e,n,i,a,o,c=this,d=c.d,h=c.e,f=c.s,g=c.constructor;if(f!==1||!d||!d[0])return new g(!f||f<0&&(!d||d[0])?NaN:d?c:1/0);for(ke=!1,f=Math.sqrt(+c),f==0||f==1/0?(e=un(d),(e.length+h)%2==0&&(e+="0"),f=Math.sqrt(e),h=vn((h+1)/2)-(h<0||h%2),f==1/0?e="5e"+h:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),i=new g(e)):i=new g(f.toString()),n=(h=g.precision)+3;;)if(o=i,i=o.plus(ut(c,o,n+2,1)).times(.5),un(o.d).slice(0,n)===(e=un(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Te(o,h+1,0),o.times(o).eq(c))){i=o;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Te(i,h+1,1),t=!i.times(i).eq(c));break}return ke=!0,Te(i,h,g.rounding,t)};ce.tangent=ce.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=ut(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Te(Hr==2||Hr==4?n.neg():n,t,e,!0)):new i(NaN)};ce.times=ce.mul=function(t){var e,n,i,a,o,c,d,h,f,g=this,b=g.constructor,_=g.d,E=(t=new b(t)).d;if(t.s*=g.s,!_||!_[0]||!E||!E[0])return new b(!t.s||_&&!_[0]&&!E||E&&!E[0]&&!_?NaN:!_||!E?t.s/0:t.s*0);for(n=vn(g.e/Ce)+vn(t.e/Ce),h=_.length,f=E.length,h<f&&(o=_,_=E,E=o,c=h,h=f,f=c),o=[],c=h+f,i=c;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,a=h+i;a>i;)d=o[a]+E[i]*_[a-i-1]+e,o[a--]=d%Di|0,e=d/Di|0;o[a]=(o[a]+e)%Di|0}for(;!o[--c];)o.pop();return e?++n:o.shift(),t.d=o,t.e=em(o,n),ke?Te(t,b.precision,b.rounding):t};ce.toBinary=function(t,e){return Iy(this,2,t,e)};ce.toDecimalPlaces=ce.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Pn(t,0,pa),e===void 0?e=i.rounding:Pn(e,0,8),Te(n,t+n.e+1,e))};ce.toExponential=function(t,e){var n,i=this,a=i.constructor;return t===void 0?n=yr(i,!0):(Pn(t,0,pa),e===void 0?e=a.rounding:Pn(e,0,8),i=Te(new a(i),t+1,e),n=yr(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};ce.toFixed=function(t,e){var n,i,a=this,o=a.constructor;return t===void 0?n=yr(a):(Pn(t,0,pa),e===void 0?e=o.rounding:Pn(e,0,8),i=Te(new o(a),t+a.e+1,e),n=yr(i,!1,t+i.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};ce.toFraction=function(t){var e,n,i,a,o,c,d,h,f,g,b,_,E=this,k=E.d,A=E.constructor;if(!k)return new A(E);if(f=n=new A(1),i=h=new A(0),e=new A(i),o=e.e=ES(k)-E.e-1,c=o%Ce,e.d[0]=Yt(10,c<0?Ce+c:c),t==null)t=o>0?e:f;else{if(d=new A(t),!d.isInt()||d.lt(f))throw Error(ra+d);t=d.gt(e)?o>0?e:f:d}for(ke=!1,d=new A(un(k)),g=A.precision,A.precision=o=k.length*Ce*2;b=ut(d,e,0,1,1),a=n.plus(b.times(i)),a.cmp(t)!=1;)n=i,i=a,a=f,f=h.plus(b.times(a)),h=a,a=e,e=d.minus(b.times(a)),d=a;return a=ut(t.minus(n),i,0,1,1),h=h.plus(a.times(f)),n=n.plus(a.times(i)),h.s=f.s=E.s,_=ut(f,i,o,1).minus(E).abs().cmp(ut(h,n,o,1).minus(E).abs())<1?[f,i]:[h,n],A.precision=g,ke=!0,_};ce.toHexadecimal=ce.toHex=function(t,e){return Iy(this,16,t,e)};ce.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Pn(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ke=!1,n=ut(n,t,0,e,1).times(t),ke=!0,Te(n)):(t.s=n.s,n=t),n};ce.toNumber=function(){return+this};ce.toOctal=function(t,e){return Iy(this,8,t,e)};ce.toPower=ce.pow=function(t){var e,n,i,a,o,c,d=this,h=d.constructor,f=+(t=new h(t));if(!d.d||!t.d||!d.d[0]||!t.d[0])return new h(Yt(+d,f));if(d=new h(d),d.eq(1))return d;if(i=h.precision,o=h.rounding,t.eq(1))return Te(d,i,o);if(e=vn(t.e/Ce),e>=t.d.length-1&&(n=f<0?-f:f)<=N4)return a=SS(h,d,n,i),t.s<0?new h(1).div(a):Te(a,i,o);if(c=d.s,c<0){if(e<t.d.length-1)return new h(NaN);if((t.d[e]&1)==0&&(c=1),d.e==0&&d.d[0]==1&&d.d.length==1)return d.s=c,d}return n=Yt(+d,f),e=n==0||!isFinite(n)?vn(f*(Math.log("0."+un(d.d))/Math.LN10+d.e+1)):new h(n+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?c/0:0):(ke=!1,h.rounding=d.s=1,n=Math.min(12,(e+"").length),a=R0(t.times(Xs(d,i+n)),i),a.d&&(a=Te(a,i+5,1),Au(a.d,i,o)&&(e=i+10,a=Te(R0(t.times(Xs(d,e+n)),e),e+5,1),+un(a.d).slice(i+1,i+15)+1==1e14&&(a=Te(a,i+1,0)))),a.s=c,ke=!0,h.rounding=o,Te(a,i,o))};ce.toPrecision=function(t,e){var n,i=this,a=i.constructor;return t===void 0?n=yr(i,i.e<=a.toExpNeg||i.e>=a.toExpPos):(Pn(t,1,pa),e===void 0?e=a.rounding:Pn(e,0,8),i=Te(new a(i),t,e),n=yr(i,t<=i.e||i.e<=a.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};ce.toSignificantDigits=ce.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Pn(t,1,pa),e===void 0?e=i.rounding:Pn(e,0,8)),Te(new i(n),t,e)};ce.toString=function(){var t=this,e=t.constructor,n=yr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};ce.truncated=ce.trunc=function(){return Te(new this.constructor(this),this.e+1,1)};ce.valueOf=ce.toJSON=function(){var t=this,e=t.constructor,n=yr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function un(t){var e,n,i,a=t.length-1,o="",c=t[0];if(a>0){for(o+=c,e=1;e<a;e++)i=t[e]+"",n=Ce-i.length,n&&(o+=Hs(n)),o+=i;c=t[e],i=c+"",n=Ce-i.length,n&&(o+=Hs(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function Pn(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ra+t)}function Au(t,e,n,i){var a,o,c,d;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Ce,a=0):(a=Math.ceil((e+1)/Ce),e%=Ce),o=Yt(10,Ce-e),d=t[a]%o|0,i==null?e<3?(e==0?d=d/100|0:e==1&&(d=d/10|0),c=n<4&&d==99999||n>3&&d==49999||d==5e4||d==0):c=(n<4&&d+1==o||n>3&&d+1==o/2)&&(t[a+1]/o/100|0)==Yt(10,e-2)-1||(d==o/2||d==0)&&(t[a+1]/o/100|0)==0:e<4?(e==0?d=d/1e3|0:e==1?d=d/100|0:e==2&&(d=d/10|0),c=(i||n<4)&&d==9999||!i&&n>3&&d==4999):c=((i||n<4)&&d+1==o||!i&&n>3&&d+1==o/2)&&(t[a+1]/o/1e3|0)==Yt(10,e-3)-1,c}function tf(t,e,n){for(var i,a=[0],o,c=0,d=t.length;c<d;){for(o=a.length;o--;)a[o]*=e;for(a[0]+=S0.indexOf(t.charAt(c++)),i=0;i<a.length;i++)a[i]>n-1&&(a[i+1]===void 0&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}function k4(t,e){var n,i,a;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),a=(1/tm(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=Rl(t,1,e.times(a),new t(1));for(var o=n;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=n,e}var ut=(function(){function t(i,a,o){var c,d=0,h=i.length;for(i=i.slice();h--;)c=i[h]*a+d,i[h]=c%o|0,d=c/o|0;return d&&i.unshift(d),i}function e(i,a,o,c){var d,h;if(o!=c)h=o>c?1:-1;else for(d=h=0;d<o;d++)if(i[d]!=a[d]){h=i[d]>a[d]?1:-1;break}return h}function n(i,a,o,c){for(var d=0;o--;)i[o]-=d,d=i[o]<a[o]?1:0,i[o]=d*c+i[o]-a[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,o,c,d,h){var f,g,b,_,E,k,A,N,O,z,P,H,te,ee,S,R,M,j,D,F,U=i.constructor,Me=i.s==a.s?1:-1,he=i.d,$=a.d;if(!he||!he[0]||!$||!$[0])return new U(!i.s||!a.s||(he?$&&he[0]==$[0]:!$)?NaN:he&&he[0]==0||!$?Me*0:Me/0);for(h?(E=1,g=i.e-a.e):(h=Di,E=Ce,g=vn(i.e/E)-vn(a.e/E)),D=$.length,M=he.length,O=new U(Me),z=O.d=[],b=0;$[b]==(he[b]||0);b++);if($[b]>(he[b]||0)&&g--,o==null?(ee=o=U.precision,c=U.rounding):d?ee=o+(i.e-a.e)+1:ee=o,ee<0)z.push(1),k=!0;else{if(ee=ee/E+2|0,b=0,D==1){for(_=0,$=$[0],ee++;(b<M||_)&&ee--;b++)S=_*h+(he[b]||0),z[b]=S/$|0,_=S%$|0;k=_||b<M}else{for(_=h/($[0]+1)|0,_>1&&($=t($,_,h),he=t(he,_,h),D=$.length,M=he.length),R=D,P=he.slice(0,D),H=P.length;H<D;)P[H++]=0;F=$.slice(),F.unshift(0),j=$[0],$[1]>=h/2&&++j;do _=0,f=e($,P,D,H),f<0?(te=P[0],D!=H&&(te=te*h+(P[1]||0)),_=te/j|0,_>1?(_>=h&&(_=h-1),A=t($,_,h),N=A.length,H=P.length,f=e(A,P,N,H),f==1&&(_--,n(A,D<N?F:$,N,h))):(_==0&&(f=_=1),A=$.slice()),N=A.length,N<H&&A.unshift(0),n(P,A,H,h),f==-1&&(H=P.length,f=e($,P,D,H),f<1&&(_++,n(P,D<H?F:$,H,h))),H=P.length):f===0&&(_++,P=[0]),z[b++]=_,f&&P[0]?P[H++]=he[R]||0:(P=[he[R]],H=1);while((R++<M||P[0]!==void 0)&&ee--);k=P[0]!==void 0}z[0]||z.shift()}if(E==1)O.e=g,bS=k;else{for(b=1,_=z[0];_>=10;_/=10)b++;O.e=b+g*E-1,Te(O,d?o+O.e+1:o,c,k)}return O}})();function Te(t,e,n,i){var a,o,c,d,h,f,g,b,_,E=t.constructor;e:if(e!=null){if(b=t.d,!b)return t;for(a=1,d=b[0];d>=10;d/=10)a++;if(o=e-a,o<0)o+=Ce,c=e,g=b[_=0],h=g/Yt(10,a-c-1)%10|0;else if(_=Math.ceil((o+1)/Ce),d=b.length,_>=d)if(i){for(;d++<=_;)b.push(0);g=h=0,a=1,o%=Ce,c=o-Ce+1}else break e;else{for(g=d=b[_],a=1;d>=10;d/=10)a++;o%=Ce,c=o-Ce+a,h=c<0?0:g/Yt(10,a-c-1)%10|0}if(i=i||e<0||b[_+1]!==void 0||(c<0?g:g%Yt(10,a-c-1)),f=n<4?(h||i)&&(n==0||n==(t.s<0?3:2)):h>5||h==5&&(n==4||i||n==6&&(o>0?c>0?g/Yt(10,a-c):0:b[_-1])%10&1||n==(t.s<0?8:7)),e<1||!b[0])return b.length=0,f?(e-=t.e+1,b[0]=Yt(10,(Ce-e%Ce)%Ce),t.e=-e||0):b[0]=t.e=0,t;if(o==0?(b.length=_,d=1,_--):(b.length=_+1,d=Yt(10,Ce-o),b[_]=c>0?(g/Yt(10,a-c)%Yt(10,c)|0)*d:0),f)for(;;)if(_==0){for(o=1,c=b[0];c>=10;c/=10)o++;for(c=b[0]+=d,d=1;c>=10;c/=10)d++;o!=d&&(t.e++,b[0]==Di&&(b[0]=1));break}else{if(b[_]+=d,b[_]!=Di)break;b[_--]=0,d=1}for(o=b.length;b[--o]===0;)b.pop()}return ke&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function yr(t,e,n){if(!t.isFinite())return CS(t);var i,a=t.e,o=un(t.d),c=o.length;return e?(n&&(i=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+Hs(i):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):a<0?(o="0."+Hs(-a-1)+o,n&&(i=n-c)>0&&(o+=Hs(i))):a>=c?(o+=Hs(a+1-c),n&&(i=n-a-1)>0&&(o=o+"."+Hs(i))):((i=a+1)<c&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-c)>0&&(a+1===c&&(o+="."),o+=Hs(i))),o}function em(t,e){var n=t[0];for(e*=Ce;n>=10;n/=10)e++;return e}function Tf(t,e,n){if(e>I4)throw ke=!0,n&&(t.precision=n),Error(_S);return Te(new t(_f),e,1,!0)}function or(t,e,n){if(e>C0)throw Error(_S);return Te(new t(wf),e,n,!0)}function ES(t){var e=t.length-1,n=e*Ce+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Hs(t){for(var e="";t--;)e+="0";return e}function SS(t,e,n,i){var a,o=new t(1),c=Math.ceil(i/Ce+4);for(ke=!1;;){if(n%2&&(o=o.times(e),nT(o.d,c)&&(a=!0)),n=vn(n/2),n===0){n=o.d.length-1,a&&o.d[n]===0&&++o.d[n];break}e=e.times(e),nT(e.d,c)}return ke=!0,o}function tT(t){return t.d[t.d.length-1]&1}function AS(t,e,n){for(var i,a,o=new t(e[0]),c=0;++c<e.length;){if(a=new t(e[c]),!a.s){o=a;break}i=o.cmp(a),(i===n||i===0&&o.s===n)&&(o=a)}return o}function R0(t,e){var n,i,a,o,c,d,h,f=0,g=0,b=0,_=t.constructor,E=_.rounding,k=_.precision;if(!t.d||!t.d[0]||t.e>17)return new _(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(ke=!1,h=k):h=e,d=new _(.03125);t.e>-2;)t=t.times(d),b+=5;for(i=Math.log(Yt(2,b))/Math.LN10*2+5|0,h+=i,n=o=c=new _(1),_.precision=h;;){if(o=Te(o.times(t),h,1),n=n.times(++g),d=c.plus(ut(o,n,h,1)),un(d.d).slice(0,h)===un(c.d).slice(0,h)){for(a=b;a--;)c=Te(c.times(c),h,1);if(e==null)if(f<3&&Au(c.d,h-i,E,f))_.precision=h+=10,n=o=d=new _(1),g=0,f++;else return Te(c,_.precision=k,E,ke=!0);else return _.precision=k,c}c=d}}function Xs(t,e){var n,i,a,o,c,d,h,f,g,b,_,E=1,k=10,A=t,N=A.d,O=A.constructor,z=O.rounding,P=O.precision;if(A.s<0||!N||!N[0]||!A.e&&N[0]==1&&N.length==1)return new O(N&&!N[0]?-1/0:A.s!=1?NaN:N?0:A);if(e==null?(ke=!1,g=P):g=e,O.precision=g+=k,n=un(N),i=n.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)A=A.times(t),n=un(A.d),i=n.charAt(0),E++;o=A.e,i>1?(A=new O("0."+n),o++):A=new O(i+"."+n.slice(1))}else return f=Tf(O,g+2,P).times(o+""),A=Xs(new O(i+"."+n.slice(1)),g-k).plus(f),O.precision=P,e==null?Te(A,P,z,ke=!0):A;for(b=A,h=c=A=ut(A.minus(1),A.plus(1),g,1),_=Te(A.times(A),g,1),a=3;;){if(c=Te(c.times(_),g,1),f=h.plus(ut(c,new O(a),g,1)),un(f.d).slice(0,g)===un(h.d).slice(0,g))if(h=h.times(2),o!==0&&(h=h.plus(Tf(O,g+2,P).times(o+""))),h=ut(h,new O(E),g,1),e==null)if(Au(h.d,g-k,z,d))O.precision=g+=k,f=c=A=ut(b.minus(1),b.plus(1),g,1),_=Te(A.times(A),g,1),a=d=1;else return Te(h,O.precision=P,z,ke=!0);else return O.precision=P,h;h=f,a+=2}}function CS(t){return String(t.s*t.s/0)}function nf(t,e){var n,i,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(i,a),e){if(a-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%Ce,n<0&&(i+=Ce),i<a){for(i&&t.d.push(+e.slice(0,i)),a-=Ce;i<a;)t.d.push(+e.slice(i,i+=Ce));e=e.slice(i),i=Ce-e.length}else i-=a;for(;i--;)e+="0";t.d.push(+e),ke&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function D4(t,e){var n,i,a,o,c,d,h,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),xS.test(e))return nf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(C4.test(e))n=16,e=e.toLowerCase();else if(A4.test(e))n=2;else if(R4.test(e))n=8;else throw Error(ra+e);for(o=e.search(/p/i),o>0?(h=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,i=t.constructor,c&&(e=e.replace(".",""),d=e.length,o=d-o,a=SS(i,new i(n),o,o*2)),f=tf(e,n,Di),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(t.s*0):(t.e=em(f,g),t.d=f,ke=!1,c&&(t=ut(t,a,d*4)),h&&(t=t.times(Math.abs(h)<54?Yt(2,h):Fr.pow(2,h))),ke=!0,t)}function M4(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Rl(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/tm(5,n)),e=Rl(t,2,e,e);for(var a,o=new t(5),c=new t(16),d=new t(20);n--;)a=e.times(e),e=e.times(o.plus(a.times(c.times(a).minus(d))));return e}function Rl(t,e,n,i,a){var o,c,d,h,f=t.precision,g=Math.ceil(f/Ce);for(ke=!1,h=n.times(n),d=new t(i);;){if(c=ut(d.times(h),new t(e++*e++),f,1),d=a?i.plus(c):i.minus(c),i=ut(c.times(h),new t(e++*e++),f,1),c=d.plus(i),c.d[g]!==void 0){for(o=g;c.d[o]===d.d[o]&&o--;);if(o==-1)break}o=d,d=i,i=c,c=o}return ke=!0,c.d.length=g+1,c}function tm(t,e){for(var n=t;--e;)n*=t;return n}function RS(t,e){var n,i=e.s<0,a=or(t,t.precision,1),o=a.times(.5);if(e=e.abs(),e.lte(o))return Hr=i?4:1,e;if(n=e.divToInt(a),n.isZero())Hr=i?3:2;else{if(e=e.minus(n.times(a)),e.lte(o))return Hr=tT(n)?i?2:3:i?4:1,e;Hr=tT(n)?i?1:4:i?3:2}return e.minus(a).abs()}function Iy(t,e,n,i){var a,o,c,d,h,f,g,b,_,E=t.constructor,k=n!==void 0;if(k?(Pn(n,1,pa),i===void 0?i=E.rounding:Pn(i,0,8)):(n=E.precision,i=E.rounding),!t.isFinite())g=CS(t);else{for(g=yr(t),c=g.indexOf("."),k?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,c>=0&&(g=g.replace(".",""),_=new E(1),_.e=g.length-c,_.d=tf(yr(_),10,a),_.e=_.d.length),b=tf(g,10,a),o=h=b.length;b[--h]==0;)b.pop();if(!b[0])g=k?"0p+0":"0";else{if(c<0?o--:(t=new E(t),t.d=b,t.e=o,t=ut(t,_,n,i,0,a),b=t.d,o=t.e,f=bS),c=b[n],d=a/2,f=f||b[n+1]!==void 0,f=i<4?(c!==void 0||f)&&(i===0||i===(t.s<0?3:2)):c>d||c===d&&(i===4||f||i===6&&b[n-1]&1||i===(t.s<0?8:7)),b.length=n,f)for(;++b[--n]>a-1;)b[n]=0,n||(++o,b.unshift(1));for(h=b.length;!b[h-1];--h);for(c=0,g="";c<h;c++)g+=S0.charAt(b[c]);if(k){if(h>1)if(e==16||e==8){for(c=e==16?4:3,--h;h%c;h++)g+="0";for(b=tf(g,a,e),h=b.length;!b[h-1];--h);for(c=1,g="1.";c<h;c++)g+=S0.charAt(b[c])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>h)for(o-=h;o--;)g+="0";else o<h&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return t.s<0?"-"+g:g}function nT(t,e){if(t.length>e)return t.length=e,!0}function O4(t){return new this(t).abs()}function V4(t){return new this(t).acos()}function P4(t){return new this(t).acosh()}function j4(t,e){return new this(t).plus(e)}function L4(t){return new this(t).asin()}function U4(t){return new this(t).asinh()}function z4(t){return new this(t).atan()}function B4(t){return new this(t).atanh()}function F4(t,e){t=new this(t),e=new this(e);var n,i=this.precision,a=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=or(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?or(this,i,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=or(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(ut(t,e,o,1)),e=or(this,o,1),this.precision=i,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(ut(t,e,o,1)),n}function q4(t){return new this(t).cbrt()}function H4(t){return Te(t=new this(t),t.e+1,2)}function $4(t,e,n){return new this(t).clamp(e,n)}function G4(t){if(!t||typeof t!="object")throw Error(Jf+"Object expected");var e,n,i,a=t.defaults===!0,o=["precision",1,pa,"rounding",0,8,"toExpNeg",-pl,0,"toExpPos",0,pl,"maxE",0,pl,"minE",-pl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],a&&(this[n]=A0[n]),(i=t[n])!==void 0)if(vn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(ra+n+": "+i);if(n="crypto",a&&(this[n]=A0[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(wS);else this[n]=!1;else throw Error(ra+n+": "+i);return this}function K4(t){return new this(t).cos()}function Y4(t){return new this(t).cosh()}function NS(t){var e,n,i;function a(o){var c,d,h,f=this;if(!(f instanceof a))return new a(o);if(f.constructor=a,iT(o)){f.s=o.s,ke?!o.d||o.e>a.maxE?(f.e=NaN,f.d=null):o.e<a.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(h=typeof o,h==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(c=0,d=o;d>=10;d/=10)c++;ke?c>a.maxE?(f.e=NaN,f.d=null):c<a.minE?(f.e=0,f.d=[0]):(f.e=c,f.d=[o]):(f.e=c,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return nf(f,o.toString())}if(h==="string")return(d=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(d===43&&(o=o.slice(1)),f.s=1),xS.test(o)?nf(f,o):D4(f,o);if(h==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,nf(f,o.toString());throw Error(ra+o)}if(a.prototype=ce,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=G4,a.clone=NS,a.isDecimal=iT,a.abs=O4,a.acos=V4,a.acosh=P4,a.add=j4,a.asin=L4,a.asinh=U4,a.atan=z4,a.atanh=B4,a.atan2=F4,a.cbrt=q4,a.ceil=H4,a.clamp=$4,a.cos=K4,a.cosh=Y4,a.div=Q4,a.exp=X4,a.floor=W4,a.hypot=Z4,a.ln=J4,a.log=eM,a.log10=nM,a.log2=tM,a.max=iM,a.min=rM,a.mod=sM,a.mul=aM,a.pow=oM,a.random=lM,a.round=cM,a.sign=uM,a.sin=dM,a.sinh=hM,a.sqrt=fM,a.sub=mM,a.sum=pM,a.tan=gM,a.tanh=yM,a.trunc=vM,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return a.config(t),a}function Q4(t,e){return new this(t).div(e)}function X4(t){return new this(t).exp()}function W4(t){return Te(t=new this(t),t.e+1,3)}function Z4(){var t,e,n=new this(0);for(ke=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return ke=!0,new this(1/0);n=e}return ke=!0,n.sqrt()}function iT(t){return t instanceof Fr||t&&t.toStringTag===TS||!1}function J4(t){return new this(t).ln()}function eM(t,e){return new this(t).log(e)}function tM(t){return new this(t).log(2)}function nM(t){return new this(t).log(10)}function iM(){return AS(this,arguments,-1)}function rM(){return AS(this,arguments,1)}function sM(t,e){return new this(t).mod(e)}function aM(t,e){return new this(t).mul(e)}function oM(t,e){return new this(t).pow(e)}function lM(t){var e,n,i,a,o=0,c=new this(1),d=[];if(t===void 0?t=this.precision:Pn(t,1,pa),i=Math.ceil(t/Ce),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)a=e[o],a>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:d[o++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)a=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,o):(d.push(a%1e7),o+=4);o=i/4}else throw Error(wS);else for(;o<i;)d[o++]=Math.random()*1e7|0;for(i=d[--o],t%=Ce,i&&t&&(a=Yt(10,Ce-t),d[o]=(i/a|0)*a);d[o]===0;o--)d.pop();if(o<0)n=0,d=[0];else{for(n=-1;d[0]===0;n-=Ce)d.shift();for(i=1,a=d[0];a>=10;a/=10)i++;i<Ce&&(n-=Ce-i)}return c.e=n,c.d=d,c}function cM(t){return Te(t=new this(t),t.e+1,this.rounding)}function uM(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function dM(t){return new this(t).sin()}function hM(t){return new this(t).sinh()}function fM(t){return new this(t).sqrt()}function mM(t,e){return new this(t).sub(e)}function pM(){var t=0,e=arguments,n=new this(e[t]);for(ke=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return ke=!0,Te(n,this.precision,this.rounding)}function gM(t){return new this(t).tan()}function yM(t){return new this(t).tanh()}function vM(t){return Te(t=new this(t),t.e+1,1)}ce[Symbol.for("nodejs.util.inspect.custom")]=ce.toString;ce[Symbol.toStringTag]="Decimal";var Fr=ce.constructor=NS(A0);_f=new Fr(_f);wf=new Fr(wf);const bM=()=>{};var rT={};const IS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},_M=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[n++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[n++],c=t[n++],d=t[n++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,d=c?t[a+1]:0,h=a+2<t.length,f=h?t[a+2]:0,g=o>>2,b=(o&3)<<4|d>>4;let _=(d&15)<<2|f>>6,E=f&63;h||(E=64,c||(_=64)),i.push(n[g],n[b],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_M(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const o=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const f=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,o==null||d==null||f==null||b==null)throw new wM;const _=o<<2|d>>4;if(i.push(_),f!==64){const E=d<<4&240|f>>2;if(i.push(E),b!==64){const k=f<<6&192|b;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TM=function(t){const e=IS(t);return kS.encodeByteArray(e,!0)},xf=function(t){return TM(t).replace(/\./g,"")},DS=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const EM=()=>xM().__FIREBASE_DEFAULTS__,SM=()=>{if(typeof process>"u"||typeof rT>"u")return;const t=rT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},nm=()=>{try{return bM()||EM()||SM()||AM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MS=t=>nm()?.emulatorHosts?.[t],CM=t=>{const e=MS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OS=()=>nm()?.config,VS=t=>nm()?.[`_${t}`];class RM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Bl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PS(t){return(await fetch(t,{credentials:"include"})).ok}function NM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xf(JSON.stringify(n)),xf(JSON.stringify(c)),""].join(".")}const fu={};function IM(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function kM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sT=!1;function jS(t,e){if(typeof window>"u"||typeof document>"u"||!Bl(window.location.host)||fu[t]===e||fu[t]||sT)return;fu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=IM().prod.length>0;function c(){const _=document.getElementById(i);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{sT=!0,c()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=kM(i),E=n("text"),k=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),N=document.getElementById(A)||document.createElement("a"),O=n("preprendIcon"),z=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const P=_.element;d(P),g(N,A);const H=f();h(z,O),P.append(z,k,N,H),document.body.appendChild(P)}o?(k.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function MM(){const t=nm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jM(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LM(){return!MM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UM(){try{return typeof indexedDB=="object"}catch{return!1}}function zM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const BM="FirebaseError";class ss extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=BM,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?FM(o,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ss(a,d,i)}}function FM(t,e){return t.replace(qM,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const qM=/\{\$([^}]+)}/g;function HM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const o=t[a],c=e[a];if(aT(o)&&aT(c)){if(!uo(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function aT(t){return t!==null&&typeof t=="object"}function Yu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function au(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function ou(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $M(t,e){const n=new GM(t,e);return n.subscribe.bind(n)}class GM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=qg),a.error===void 0&&(a.error=qg),a.complete===void 0&&(a.complete=qg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qg(){}function _t(t){return t&&t._delegate?t._delegate:t}class ho{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Za="[DEFAULT]";class YM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new RM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XM(e))try{this.getOrInitializeService({instanceIdentifier:Za})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=Za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Za){return this.instances.has(e)}getOptions(e=Za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&c.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Za){return this.component?this.component.multipleInstances?e:Za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QM(t){return t===Za?void 0:t}function XM(t){return t.instantiationMode==="EAGER"}class WM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const ZM={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},JM=He.INFO,e3={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},t3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=e3[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=JM,this._logHandler=t3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const n3=(t,e)=>e.some(n=>t instanceof n);let oT,lT;function i3(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r3(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LS=new WeakMap,N0=new WeakMap,US=new WeakMap,Hg=new WeakMap,Dy=new WeakMap;function s3(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(Js(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&LS.set(n,t)}).catch(()=>{}),Dy.set(e,t),e}function a3(t){if(N0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});N0.set(t,e)}let I0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return N0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||US.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o3(t){I0=t(I0)}function l3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($g(this),e,...n);return US.set(i,e.sort?e.sort():[e]),Js(i)}:r3().includes(t)?function(...e){return t.apply($g(this),e),Js(LS.get(this))}:function(...e){return Js(t.apply($g(this),e))}}function c3(t){return typeof t=="function"?l3(t):(t instanceof IDBTransaction&&a3(t),n3(t,i3())?new Proxy(t,I0):t)}function Js(t){if(t instanceof IDBRequest)return s3(t);if(Hg.has(t))return Hg.get(t);const e=c3(t);return e!==t&&(Hg.set(t,e),Dy.set(e,t)),e}const $g=t=>Dy.get(t);function u3(t,e,{blocked:n,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),d=Js(c);return i&&c.addEventListener("upgradeneeded",h=>{i(Js(c.result),h.oldVersion,h.newVersion,Js(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const d3=["get","getKey","getAll","getAllKeys","count"],h3=["put","add","delete","clear"],Gg=new Map;function cT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gg.get(e))return Gg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=h3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||d3.includes(n)))return;const o=async function(c,...d){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),a&&h.done]))[0]};return Gg.set(e,o),o}o3(t=>({...t,get:(e,n,i)=>cT(e,n)||t.get(e,n,i),has:(e,n)=>!!cT(e,n)||t.has(e,n)}));class f3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(m3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function m3(t){return t.getComponent()?.type==="VERSION"}const k0="@firebase/app",uT="0.14.6";const Wr=new ky("@firebase/app"),p3="@firebase/app-compat",g3="@firebase/analytics-compat",y3="@firebase/analytics",v3="@firebase/app-check-compat",b3="@firebase/app-check",_3="@firebase/auth",w3="@firebase/auth-compat",T3="@firebase/database",x3="@firebase/data-connect",E3="@firebase/database-compat",S3="@firebase/functions",A3="@firebase/functions-compat",C3="@firebase/installations",R3="@firebase/installations-compat",N3="@firebase/messaging",I3="@firebase/messaging-compat",k3="@firebase/performance",D3="@firebase/performance-compat",M3="@firebase/remote-config",O3="@firebase/remote-config-compat",V3="@firebase/storage",P3="@firebase/storage-compat",j3="@firebase/firestore",L3="@firebase/ai",U3="@firebase/firestore-compat",z3="firebase",B3="12.6.0";const D0="[DEFAULT]",F3={[k0]:"fire-core",[p3]:"fire-core-compat",[y3]:"fire-analytics",[g3]:"fire-analytics-compat",[b3]:"fire-app-check",[v3]:"fire-app-check-compat",[_3]:"fire-auth",[w3]:"fire-auth-compat",[T3]:"fire-rtdb",[x3]:"fire-data-connect",[E3]:"fire-rtdb-compat",[S3]:"fire-fn",[A3]:"fire-fn-compat",[C3]:"fire-iid",[R3]:"fire-iid-compat",[N3]:"fire-fcm",[I3]:"fire-fcm-compat",[k3]:"fire-perf",[D3]:"fire-perf-compat",[M3]:"fire-rc",[O3]:"fire-rc-compat",[V3]:"fire-gcs",[P3]:"fire-gcs-compat",[j3]:"fire-fst",[U3]:"fire-fst-compat",[L3]:"fire-vertex","fire-js":"fire-js",[z3]:"fire-js-all"};const Ef=new Map,q3=new Map,M0=new Map;function dT(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nl(t){const e=t.name;if(M0.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;M0.set(e,t);for(const n of Ef.values())dT(n,t);for(const n of q3.values())dT(n,t);return!0}function My(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t==null?!1:t.settings!==void 0}const H3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new Ku("app","Firebase",H3);class $3{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}}const Fl=B3;function zS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:D0,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ea.create("bad-app-name",{appName:String(a)});if(n||(n=OS()),!n)throw ea.create("no-options");const o=Ef.get(a);if(o){if(uo(n,o.options)&&uo(i,o.config))return o;throw ea.create("duplicate-app",{appName:a})}const c=new WM(a);for(const h of M0.values())c.addComponent(h);const d=new $3(n,i,c);return Ef.set(a,d),d}function BS(t=D0){const e=Ef.get(t);if(!e&&t===D0&&OS())return zS();if(!e)throw ea.create("no-app",{appName:t});return e}function ta(t,e,n){let i=F3[t]??t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(c.join(" "));return}Nl(new ho(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const G3="firebase-heartbeat-database",K3=1,Cu="firebase-heartbeat-store";let Kg=null;function FS(){return Kg||(Kg=u3(G3,K3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ea.create("idb-open",{originalErrorMessage:t.message})})),Kg}async function Y3(t){try{const n=(await FS()).transaction(Cu),i=await n.objectStore(Cu).get(qS(t));return await n.done,i}catch(e){if(e instanceof ss)Wr.warn(e.message);else{const n=ea.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(n.message)}}}async function hT(t,e){try{const i=(await FS()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,qS(t)),await i.done}catch(n){if(n instanceof ss)Wr.warn(n.message);else{const i=ea.create("idb-set",{originalErrorMessage:n?.message});Wr.warn(i.message)}}}function qS(t){return`${t.name}!${t.options.appId}`}const Q3=1024,X3=30;class W3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>X3){const a=eO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fT(),{heartbeatsToSend:n,unsentEntries:i}=Z3(this._heartbeatsCache.heartbeats),a=xf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Wr.warn(e),""}}}function fT(){return new Date().toISOString().substring(0,10)}function Z3(t,e=Q3){const n=[];let i=t.slice();for(const a of t){const o=n.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),mT(n)>e){o.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),mT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class J3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UM()?zM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Y3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mT(t){return xf(JSON.stringify({version:2,heartbeats:t})).length}function eO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function tO(t){Nl(new ho("platform-logger",e=>new f3(e),"PRIVATE")),Nl(new ho("heartbeat",e=>new W3(e),"PRIVATE")),ta(k0,uT,t),ta(k0,uT,"esm2020"),ta("fire-js","")}tO("");function HS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nO=HS,$S=new Ku("auth","Firebase",HS());const Sf=new ky("@firebase/auth");function iO(t,...e){Sf.logLevel<=He.WARN&&Sf.warn(`Auth (${Fl}): ${t}`,...e)}function rf(t,...e){Sf.logLevel<=He.ERROR&&Sf.error(`Auth (${Fl}): ${t}`,...e)}function Oi(t,...e){throw Oy(t,...e)}function cr(t,...e){return Oy(t,...e)}function GS(t,e,n){const i={...nO(),[e]:n};return new Ku("auth","Firebase",i).create(e,{appName:t.name})}function Yr(t){return GS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Oy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return $S.create(t,...e)}function Re(t,e,...n){if(!t)throw Oy(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rf(e),new Error(e)}function Zr(t,e){t||$r(e)}function O0(){return typeof self<"u"&&self.location?.href||""}function rO(){return pT()==="http:"||pT()==="https:"}function pT(){return typeof self<"u"&&self.location?.protocol||null}function sO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rO()||VM()||"connection"in navigator)?navigator.onLine:!0}function aO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Qu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zr(n>e,"Short delay should be less than long delay!"),this.isMobile=DM()||PM()}get(){return sO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vy(t,e){Zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class KS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cO=new Qu(3e4,6e4);function as(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wr(t,e,n,i,a={}){return YS(t,a,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const d=Yu({key:t.config.apiKey,...c}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return OM()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Bl(t.emulatorConfig.host)&&(f.credentials="include"),KS.fetch()(await QS(t,t.config.apiHost,n,d),f)})}async function YS(t,e,n){t._canInitEmulator=!1;const i={...oO,...e};try{const a=new dO(t),o=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw zh(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw zh(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw zh(t,"user-disabled",c);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw GS(t,g,f);Oi(t,g)}}catch(a){if(a instanceof ss)throw a;Oi(t,"network-request-failed",{message:String(a)})}}async function Xu(t,e,n,i,a={}){const o=await wr(t,e,n,i,a);return"mfaPendingCredential"in o&&Oi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function QS(t,e,n,i){const a=`${e}${n}?${i}`,o=t,c=o.config.emulator?Vy(t.config,a):`${t.config.apiScheme}://${a}`;return lO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function uO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(cr(this.auth,"network-request-failed")),cO.get())})}}function zh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=cr(t,e,i);return a.customData._tokenResponse=n,a}function gT(t){return t!==void 0&&t.enterprise!==void 0}class hO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fO(t,e){return wr(t,"GET","/v2/recaptchaConfig",as(t,e))}async function mO(t,e){return wr(t,"POST","/v1/accounts:delete",e)}async function Af(t,e){return wr(t,"POST","/v1/accounts:lookup",e)}function mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pO(t,e=!1){const n=_t(t),i=await n.getIdToken(e),a=Py(i);Re(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:mu(Yg(a.auth_time)),issuedAtTime:mu(Yg(a.iat)),expirationTime:mu(Yg(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Yg(t){return Number(t)*1e3}function Py(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{const a=DS(n);return a?JSON.parse(a):(rf("Failed to decode base64 JWT payload"),null)}catch(a){return rf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function yT(t){const e=Py(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Il(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ss&&gO(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function gO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class yO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class V0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Cf(t){const e=t.auth,n=await t.getIdToken(),i=await Il(t,Af(e,{idToken:n}));Re(i?.users.length,e,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=a.providerUserInfo?.length?XS(a.providerUserInfo):[],c=bO(t.providerData,o),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!c?.length,f=d?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new V0(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function vO(t){const e=_t(t);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bO(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function XS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _O(t,e){const n=await YS(t,{},async()=>{const i=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,c=await QS(t,a,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return t.emulatorConfig&&Bl(t.emulatorConfig.host)&&(h.credentials="include"),KS.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wO(t,e){return wr(t,"POST","/v2/accounts:revokeToken",as(t,e))}class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=yT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:o}=await _O(e,n);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:o}=n,c=new Tl;return i&&(Re(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Re(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Re(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return $r("not implemented")}}function Bs(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor({uid:e,auth:n,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new yO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new V0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Il(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pO(this,e)}reload(){return vO(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ki({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Il(this,mO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,a=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:E,providerData:k,stsTokenManager:A}=n;Re(b&&A,e,"internal-error");const N=Tl.fromJSON(this.name,A);Re(typeof b=="string",e,"internal-error"),Bs(i,e.name),Bs(a,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),Bs(o,e.name),Bs(c,e.name),Bs(d,e.name),Bs(h,e.name),Bs(f,e.name),Bs(g,e.name);const O=new ki({uid:b,auth:e,email:a,emailVerified:_,displayName:i,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:N,createdAt:f,lastLoginAt:g});return k&&Array.isArray(k)&&(O.providerData=k.map(z=>({...z}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(e,n,i=!1){const a=new Tl;a.updateFromServerResponse(n);const o=new ki({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Cf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];Re(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?XS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,d=new Tl;d.updateFromIdToken(i);const h=new ki({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new V0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const vT=new Map;function Gr(t){Zr(t instanceof Function,"Expected a class definition");let e=vT.get(t);return e?(Zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vT.set(t,e),e)}class WS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WS.type="NONE";const bT=WS;function sf(t,e,n){return`firebase:${t}:${e}:${n}`}class xl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=sf(this.userKey,a.apiKey,o),this.fullPersistenceKey=sf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Af(this.auth,{idToken:e}).catch(()=>{});return n?ki._fromGetAccountInfoResponse(this.auth,n,e):null}return ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xl(Gr(bT),e,i);const a=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||Gr(bT);const c=sf(i,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(c);if(g){let b;if(typeof g=="string"){const _=await Af(e,{idToken:g}).catch(()=>{});if(!_)break;b=await ki._fromGetAccountInfoResponse(e,_,g)}else b=ki._fromJSON(e,g);f!==o&&(d=b),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new xl(o,e,i):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new xl(o,e,i))}}function _T(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iA(e))return"Blackberry";if(rA(e))return"Webos";if(JS(e))return"Safari";if((e.includes("chrome/")||eA(e))&&!e.includes("edge/"))return"Chrome";if(nA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function ZS(t=bn()){return/firefox\//i.test(t)}function JS(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eA(t=bn()){return/crios\//i.test(t)}function tA(t=bn()){return/iemobile/i.test(t)}function nA(t=bn()){return/android/i.test(t)}function iA(t=bn()){return/blackberry/i.test(t)}function rA(t=bn()){return/webos/i.test(t)}function jy(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TO(t=bn()){return jy(t)&&!!window.navigator?.standalone}function xO(){return jM()&&document.documentMode===10}function sA(t=bn()){return jy(t)||nA(t)||rA(t)||iA(t)||/windows phone/i.test(t)||tA(t)}function aA(t,e=[]){let n;switch(t){case"Browser":n=_T(bn());break;case"Worker":n=`${_T(bn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fl}/${i}`}class EO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function SO(t,e={}){return wr(t,"GET","/v2/passwordPolicy",as(t,e))}const AO=6;class CO{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class RO{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wT(this),this.idTokenSubscription=new wT(this),this.beforeStateQueue=new EO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Af(this,{idToken:e}),i=await ki._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(di(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(Yr(this));const n=e?_t(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SO(this),n=new CO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await wO(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,a);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&iO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ga(t){return _t(t)}class wT{constructor(e){this.auth=e,this.observer=null,this.addObserver=$M(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NO(t){im=t}function oA(t){return im.loadJS(t)}function IO(){return im.recaptchaEnterpriseScript}function kO(){return im.gapiScript}function DO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MO{constructor(){this.enterprise=new OO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VO="recaptcha-enterprise",lA="NO_RECAPTCHA";class PO{constructor(e){this.type=VO,this.auth=ga(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{fO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new hO(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function a(o,c,d){const h=window.grecaptcha;gT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(lA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(d=>{if(!n&&gT(window.grecaptcha))a(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=IO();h.length!==0&&(h+=d),oA(h).then(()=>{a(d,o,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function TT(t,e,n,i=!1,a=!1){const o=new PO(t);let c;if(a)c=lA;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Rf(t,e,n,i,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TT(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await TT(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(o)})}function jO(t,e){const n=My(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),o=n.getOptions();if(uo(o,e??{}))return a;Oi(a,"already-initialized")}return n.initialize({options:e})}function LO(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Gr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function UO(t,e,n){const i=ga(t);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=cA(e),{host:c,port:d}=zO(e),h=d===null?"":`:${d}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(uo(f,i.config.emulator)&&uo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Bl(c)?(PS(`${o}//${c}${h}`),jS("Auth",!0)):BO()}function cA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zO(t){const e=cA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:xT(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:xT(c)}}}function xT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Ly{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function FO(t,e){return wr(t,"POST","/v1/accounts:signUp",e)}async function qO(t,e){return Xu(t,"POST","/v1/accounts:signInWithPassword",as(t,e))}async function uA(t,e){return wr(t,"POST","/v1/accounts:sendOobCode",as(t,e))}async function HO(t,e){return uA(t,e)}async function $O(t,e){return uA(t,e)}async function GO(t,e){return Xu(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}async function KO(t,e){return Xu(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}class Ru extends Ly{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ru(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rf(e,n,"signInWithPassword",qO);case"emailLink":return GO(e,{email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rf(e,i,"signUpPassword",FO);case"emailLink":return KO(e,{idToken:n,email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function El(t,e){return Xu(t,"POST","/v1/accounts:signInWithIdp",as(t,e))}const YO="http://localhost";class fo extends Ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...o}=n;if(!i||!a)return null;const c=new fo(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,El(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:YO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yu(n)}return e}}function QO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XO(t){const e=au(ou(t)).link,n=e?au(ou(e)).deep_link_id:null,i=au(ou(t)).deep_link_id;return(i?au(ou(i)).link:null)||i||n||e||t}class Uy{constructor(e){const n=au(ou(e)),i=n.apiKey??null,a=n.oobCode??null,o=QO(n.mode??null);Re(i&&a&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=XO(e);try{return new Uy(n)}catch{return null}}}class vo{constructor(){this.providerId=vo.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Uy.parseLink(n);return Re(i,"argument-error"),Ru._fromEmailAndCode(e,i.code,i.tenantId)}}vo.PROVIDER_ID="password";vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wu extends dA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $s extends Wu{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";class Gs extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Gs.credential(n,i)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";class Ks extends Wu{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";class Ys extends Wu{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ys.credential(n,i)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";async function WO(t,e){return Xu(t,"POST","/v1/accounts:signUp",as(t,e))}class mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const o=await ki._fromIdTokenResponse(e,i,a),c=ET(i);return new mo({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=ET(i);return new mo({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function ET(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Nf extends ss{constructor(e,n,i,a){super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Nf(e,n,i,a)}}function hA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(t,o,e,i):o})}async function ZO(t,e,n=!1){const i=await Il(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mo._forOperation(t,"link",i)}async function fA(t,e,n=!1){const{auth:i}=t;if(di(i.app))return Promise.reject(Yr(i));const a="reauthenticate";try{const o=await Il(t,hA(i,a,e,t),n);Re(o.idToken,i,"internal-error");const c=Py(o.idToken);Re(c,i,"internal-error");const{sub:d}=c;return Re(t.uid===d,i,"user-mismatch"),mo._forOperation(t,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&Oi(i,"user-mismatch"),o}}async function mA(t,e,n=!1){if(di(t.app))return Promise.reject(Yr(t));const i="signIn",a=await hA(t,i,e),o=await mo._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(o.user),o}async function JO(t,e){return mA(ga(t),e)}async function eV(t,e){return fA(_t(t),e)}async function pA(t){const e=ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tV(t,e,n){const i=ga(t);await Rf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$O)}async function nV(t,e,n){if(di(t.app))return Promise.reject(Yr(t));const i=ga(t),c=await Rf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&pA(t),h}),d=await mo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function iV(t,e,n){return di(t.app)?Promise.reject(Yr(t)):JO(_t(t),vo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pA(t),i})}async function ST(t,e){const n=_t(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await HO(n.auth,a);o!==t.email&&await t.reload()}async function rV(t,e){return wr(t,"POST","/v1/accounts:update",e)}async function sV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=_t(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Il(i,rV(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function aV(t,e,n,i){return _t(t).onIdTokenChanged(e,n,i)}function oV(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function lV(t,e,n,i){return _t(t).onAuthStateChanged(e,n,i)}function AT(t){return _t(t).signOut()}async function cV(t){return _t(t).delete()}const If="__sak";class gA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uV=1e3,dV=10;class yA extends gA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);xO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,dV):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},uV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const hV=yA;class vA extends gA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vA.type="SESSION";const bA=vA;function fV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new rm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:o}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async f=>f(n.origin,o)),h=await fV(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rm.receivers=[];function zy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class mV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const f=zy("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function ur(){return window}function pV(t){ur().location.href=t}function _A(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function gV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yV(){return navigator?.serviceWorker?.controller||null}function vV(){return _A()?self:null}const wA="firebaseLocalStorageDb",bV=1,kf="firebaseLocalStorage",TA="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sm(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function _V(){const t=indexedDB.deleteDatabase(wA);return new Zu(t).toPromise()}function P0(){const t=indexedDB.open(wA,bV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(kf,{keyPath:TA})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(kf)?e(i):(i.close(),await _V(),e(await P0()))})})}async function CT(t,e,n){const i=sm(t,!0).put({[TA]:e,value:n});return new Zu(i).toPromise()}async function wV(t,e){const n=sm(t,!1).get(e),i=await new Zu(n).toPromise();return i===void 0?null:i.value}function RT(t,e){const n=sm(t,!0).delete(e);return new Zu(n).toPromise()}const TV=800,xV=3;class xA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _A()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rm._getInstance(vV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gV(),!this.activeServiceWorker)return;this.sender=new mV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await CT(e,If,"1"),await RT(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>CT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>wV(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=sm(a,!1).getAll();return new Zu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xA.type="LOCAL";const EV=xA;new Qu(3e4,6e4);function SV(t,e){return e?Gr(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class By extends Ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AV(t){return mA(t.auth,new By(t),t.bypassAuthState)}function CV(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),fA(n,new By(t),t.bypassAuthState)}async function RV(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),ZO(n,new By(t),t.bypassAuthState)}class EA{constructor(e,n,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AV;case"linkViaPopup":case"linkViaRedirect":return RV;case"reauthViaPopup":case"reauthViaRedirect":return CV;default:Oi(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NV=new Qu(2e3,1e4);class gl extends EA{constructor(e,n,i,a,o){super(e,n,a,o),this.provider=i,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=zy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NV.get())};e()}}gl.currentPopupAction=null;const IV="pendingRedirect",af=new Map;class kV extends EA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=af.get(this.auth._key());if(!e){try{const i=await DV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DV(t,e){const n=VV(e),i=OV(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function MV(t,e){af.set(t._key(),e)}function OV(t){return Gr(t._redirectPersistence)}function VV(t){return sf(IV,t.config.apiKey,t.name)}async function PV(t,e,n=!1){if(di(t.app))return Promise.reject(Yr(t));const i=ga(t),a=SV(i,e),c=await new kV(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const jV=600*1e3;class LV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!SA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jV&&this.cachedEventUids.clear(),this.cachedEventUids.has(NT(e))}saveEventToCache(e){this.cachedEventUids.add(NT(e)),this.lastProcessedEventTime=Date.now()}}function NT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function UV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SA(t);default:return!1}}async function zV(t,e={}){return wr(t,"GET","/v1/projects",e)}const BV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FV=/^https?/;async function qV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zV(t);for(const n of e)try{if(HV(n))return}catch{}Oi(t,"unauthorized-domain")}function HV(t){const e=O0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!FV.test(n))return!1;if(BV.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const $V=new Qu(3e4,6e4);function IT(){const t=ur().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GV(t){return new Promise((e,n)=>{function i(){IT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IT(),n(cr(t,"network-request-failed"))},timeout:$V.get()})}if(ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ur().gapi?.load)i();else{const a=DO("iframefcb");return ur()[a]=()=>{gapi.load?i():n(cr(t,"network-request-failed"))},oA(`${kO()}?onload=${a}`).catch(o=>n(o))}}).catch(e=>{throw of=null,e})}let of=null;function KV(t){return of=of||GV(t),of}const YV=new Qu(5e3,15e3),QV="__/auth/iframe",XV="emulator/auth/iframe",WV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JV(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vy(e,XV):`https://${t.config.authDomain}/${QV}`,i={apiKey:e.apiKey,appName:t.name,v:Fl},a=ZV.get(t.config.apiHost);a&&(i.eid=a);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Yu(i).slice(1)}`}async function e5(t){const e=await KV(t),n=ur().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:JV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WV,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=cr(t,"network-request-failed"),d=ur().setTimeout(()=>{o(c)},YV.get());function h(){ur().clearTimeout(d),a(i)}i.ping(h).then(h,()=>{o(c)})}))}const t5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n5=500,i5=600,r5="_blank",s5="http://localhost";class kT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a5(t,e,n,i=n5,a=i5){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h={...t5,width:i.toString(),height:a.toString(),top:o,left:c},f=bn().toLowerCase();n&&(d=eA(f)?r5:n),ZS(f)&&(e=e||s5,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(TO(f)&&d!=="_self")return o5(e||"",d),new kT(null);const b=window.open(e||"",d,g);Re(b,t,"popup-blocked");try{b.focus()}catch{}return new kT(b)}function o5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const l5="__/auth/handler",c5="emulator/auth/handler",u5=encodeURIComponent("fac");async function DT(t,e,n,i,a,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Fl,eventId:a};if(e instanceof dA){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",HM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))c[g]=b}if(e instanceof Wu){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await t._getAppCheckToken(),f=h?`#${u5}=${encodeURIComponent(h)}`:"";return`${d5(t)}?${Yu(d).slice(1)}${f}`}function d5({config:t}){return t.emulator?Vy(t,c5):`https://${t.authDomain}/${l5}`}const Qg="webStorageSupport";class h5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bA,this._completeRedirectFn=PV,this._overrideRedirectResult=MV}async _openPopup(e,n,i,a){Zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await DT(e,n,i,O0(),a);return a5(e,o,zy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const o=await DT(e,n,i,O0(),a);return pV(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:o}=this.eventManagers[n];return a?Promise.resolve(a):(Zr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await e5(e),i=new LV(e);return n.register("authEvent",a=>(Re(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qg,{type:Qg},a=>{const o=a?.[0]?.[Qg];o!==void 0&&n(!!o),Oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sA()||JS()||jy()}}const f5=h5;var MT="@firebase/auth",OT="1.11.1";class m5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function p5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g5(t){Nl(new ho("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aA(t)},f=new RO(i,a,o,h);return LO(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Nl(new ho("auth-internal",e=>{const n=ga(e.getProvider("auth").getImmediate());return(i=>new m5(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ta(MT,OT,p5(t)),ta(MT,OT,"esm2020")}const y5=300,v5=VS("authIdTokenMaxAge")||y5;let VT=null;const b5=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>v5)return;const a=n?.token;VT!==a&&(VT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function _5(t=BS()){const e=My(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jO(t,{popupRedirectResolver:f5,persistence:[EV,hV,bA]}),i=VS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=b5(o.toString());oV(n,c,()=>c(n.currentUser)),aV(n,d=>c(d))}}const a=MS("auth");return a&&UO(n,`http://${a}`),n}function w5(){return document.getElementsByTagName("head")?.[0]??document}NO({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const o=cr("internal-error");o.customData=a,n(o)},i.type="text/javascript",i.charset="UTF-8",w5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g5("Browser");var T5="firebase",x5="12.6.0";ta(T5,x5,"app");var PT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var na,AA;(function(){var t;function e(S,R){function M(){}M.prototype=R.prototype,S.F=R.prototype,S.prototype=new M,S.prototype.constructor=S,S.D=function(j,D,F){for(var U=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)U[Me-2]=arguments[Me];return R.prototype[D].apply(j,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,R,M){M||(M=0);const j=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)j[D]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(D=0;D<16;++D)j[D]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=S.g[0],M=S.g[1],D=S.g[2];let F=S.g[3],U;U=R+(F^M&(D^F))+j[0]+3614090360&4294967295,R=M+(U<<7&4294967295|U>>>25),U=F+(D^R&(M^D))+j[1]+3905402710&4294967295,F=R+(U<<12&4294967295|U>>>20),U=D+(M^F&(R^M))+j[2]+606105819&4294967295,D=F+(U<<17&4294967295|U>>>15),U=M+(R^D&(F^R))+j[3]+3250441966&4294967295,M=D+(U<<22&4294967295|U>>>10),U=R+(F^M&(D^F))+j[4]+4118548399&4294967295,R=M+(U<<7&4294967295|U>>>25),U=F+(D^R&(M^D))+j[5]+1200080426&4294967295,F=R+(U<<12&4294967295|U>>>20),U=D+(M^F&(R^M))+j[6]+2821735955&4294967295,D=F+(U<<17&4294967295|U>>>15),U=M+(R^D&(F^R))+j[7]+4249261313&4294967295,M=D+(U<<22&4294967295|U>>>10),U=R+(F^M&(D^F))+j[8]+1770035416&4294967295,R=M+(U<<7&4294967295|U>>>25),U=F+(D^R&(M^D))+j[9]+2336552879&4294967295,F=R+(U<<12&4294967295|U>>>20),U=D+(M^F&(R^M))+j[10]+4294925233&4294967295,D=F+(U<<17&4294967295|U>>>15),U=M+(R^D&(F^R))+j[11]+2304563134&4294967295,M=D+(U<<22&4294967295|U>>>10),U=R+(F^M&(D^F))+j[12]+1804603682&4294967295,R=M+(U<<7&4294967295|U>>>25),U=F+(D^R&(M^D))+j[13]+4254626195&4294967295,F=R+(U<<12&4294967295|U>>>20),U=D+(M^F&(R^M))+j[14]+2792965006&4294967295,D=F+(U<<17&4294967295|U>>>15),U=M+(R^D&(F^R))+j[15]+1236535329&4294967295,M=D+(U<<22&4294967295|U>>>10),U=R+(D^F&(M^D))+j[1]+4129170786&4294967295,R=M+(U<<5&4294967295|U>>>27),U=F+(M^D&(R^M))+j[6]+3225465664&4294967295,F=R+(U<<9&4294967295|U>>>23),U=D+(R^M&(F^R))+j[11]+643717713&4294967295,D=F+(U<<14&4294967295|U>>>18),U=M+(F^R&(D^F))+j[0]+3921069994&4294967295,M=D+(U<<20&4294967295|U>>>12),U=R+(D^F&(M^D))+j[5]+3593408605&4294967295,R=M+(U<<5&4294967295|U>>>27),U=F+(M^D&(R^M))+j[10]+38016083&4294967295,F=R+(U<<9&4294967295|U>>>23),U=D+(R^M&(F^R))+j[15]+3634488961&4294967295,D=F+(U<<14&4294967295|U>>>18),U=M+(F^R&(D^F))+j[4]+3889429448&4294967295,M=D+(U<<20&4294967295|U>>>12),U=R+(D^F&(M^D))+j[9]+568446438&4294967295,R=M+(U<<5&4294967295|U>>>27),U=F+(M^D&(R^M))+j[14]+3275163606&4294967295,F=R+(U<<9&4294967295|U>>>23),U=D+(R^M&(F^R))+j[3]+4107603335&4294967295,D=F+(U<<14&4294967295|U>>>18),U=M+(F^R&(D^F))+j[8]+1163531501&4294967295,M=D+(U<<20&4294967295|U>>>12),U=R+(D^F&(M^D))+j[13]+2850285829&4294967295,R=M+(U<<5&4294967295|U>>>27),U=F+(M^D&(R^M))+j[2]+4243563512&4294967295,F=R+(U<<9&4294967295|U>>>23),U=D+(R^M&(F^R))+j[7]+1735328473&4294967295,D=F+(U<<14&4294967295|U>>>18),U=M+(F^R&(D^F))+j[12]+2368359562&4294967295,M=D+(U<<20&4294967295|U>>>12),U=R+(M^D^F)+j[5]+4294588738&4294967295,R=M+(U<<4&4294967295|U>>>28),U=F+(R^M^D)+j[8]+2272392833&4294967295,F=R+(U<<11&4294967295|U>>>21),U=D+(F^R^M)+j[11]+1839030562&4294967295,D=F+(U<<16&4294967295|U>>>16),U=M+(D^F^R)+j[14]+4259657740&4294967295,M=D+(U<<23&4294967295|U>>>9),U=R+(M^D^F)+j[1]+2763975236&4294967295,R=M+(U<<4&4294967295|U>>>28),U=F+(R^M^D)+j[4]+1272893353&4294967295,F=R+(U<<11&4294967295|U>>>21),U=D+(F^R^M)+j[7]+4139469664&4294967295,D=F+(U<<16&4294967295|U>>>16),U=M+(D^F^R)+j[10]+3200236656&4294967295,M=D+(U<<23&4294967295|U>>>9),U=R+(M^D^F)+j[13]+681279174&4294967295,R=M+(U<<4&4294967295|U>>>28),U=F+(R^M^D)+j[0]+3936430074&4294967295,F=R+(U<<11&4294967295|U>>>21),U=D+(F^R^M)+j[3]+3572445317&4294967295,D=F+(U<<16&4294967295|U>>>16),U=M+(D^F^R)+j[6]+76029189&4294967295,M=D+(U<<23&4294967295|U>>>9),U=R+(M^D^F)+j[9]+3654602809&4294967295,R=M+(U<<4&4294967295|U>>>28),U=F+(R^M^D)+j[12]+3873151461&4294967295,F=R+(U<<11&4294967295|U>>>21),U=D+(F^R^M)+j[15]+530742520&4294967295,D=F+(U<<16&4294967295|U>>>16),U=M+(D^F^R)+j[2]+3299628645&4294967295,M=D+(U<<23&4294967295|U>>>9),U=R+(D^(M|~F))+j[0]+4096336452&4294967295,R=M+(U<<6&4294967295|U>>>26),U=F+(M^(R|~D))+j[7]+1126891415&4294967295,F=R+(U<<10&4294967295|U>>>22),U=D+(R^(F|~M))+j[14]+2878612391&4294967295,D=F+(U<<15&4294967295|U>>>17),U=M+(F^(D|~R))+j[5]+4237533241&4294967295,M=D+(U<<21&4294967295|U>>>11),U=R+(D^(M|~F))+j[12]+1700485571&4294967295,R=M+(U<<6&4294967295|U>>>26),U=F+(M^(R|~D))+j[3]+2399980690&4294967295,F=R+(U<<10&4294967295|U>>>22),U=D+(R^(F|~M))+j[10]+4293915773&4294967295,D=F+(U<<15&4294967295|U>>>17),U=M+(F^(D|~R))+j[1]+2240044497&4294967295,M=D+(U<<21&4294967295|U>>>11),U=R+(D^(M|~F))+j[8]+1873313359&4294967295,R=M+(U<<6&4294967295|U>>>26),U=F+(M^(R|~D))+j[15]+4264355552&4294967295,F=R+(U<<10&4294967295|U>>>22),U=D+(R^(F|~M))+j[6]+2734768916&4294967295,D=F+(U<<15&4294967295|U>>>17),U=M+(F^(D|~R))+j[13]+1309151649&4294967295,M=D+(U<<21&4294967295|U>>>11),U=R+(D^(M|~F))+j[4]+4149444226&4294967295,R=M+(U<<6&4294967295|U>>>26),U=F+(M^(R|~D))+j[11]+3174756917&4294967295,F=R+(U<<10&4294967295|U>>>22),U=D+(R^(F|~M))+j[2]+718787259&4294967295,D=F+(U<<15&4294967295|U>>>17),U=M+(F^(D|~R))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+R&4294967295,S.g[1]=S.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+F&4294967295}i.prototype.v=function(S,R){R===void 0&&(R=S.length);const M=R-this.blockSize,j=this.C;let D=this.h,F=0;for(;F<R;){if(D==0)for(;F<=M;)a(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<R;)if(j[D++]=S.charCodeAt(F++),D==this.blockSize){a(this,j),D=0;break}}else for(;F<R;)if(j[D++]=S[F++],D==this.blockSize){a(this,j),D=0;break}}this.h=D,this.o+=R},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var R=1;R<S.length-8;++R)S[R]=0;R=this.o*8;for(var M=S.length-8;M<S.length;++M)S[M]=R&255,R/=256;for(this.v(S),S=Array(16),R=0,M=0;M<4;++M)for(let j=0;j<32;j+=8)S[R++]=this.g[M]>>>j&255;return S};function o(S,R){var M=d;return Object.prototype.hasOwnProperty.call(M,S)?M[S]:M[S]=R(S)}function c(S,R){this.h=R;const M=[];let j=!0;for(let D=S.length-1;D>=0;D--){const F=S[D]|0;j&&F==R||(M[D]=F,j=!1)}this.g=M}var d={};function h(S){return-128<=S&&S<128?o(S,function(R){return new c([R|0],R<0?-1:0)}):new c([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return b;if(S<0)return N(f(-S));const R=[];let M=1;for(let j=0;S>=M;j++)R[j]=S/M|0,M*=4294967296;return new c(R,0)}function g(S,R){if(S.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(S.charAt(0)=="-")return N(g(S.substring(1),R));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(R,8));let j=b;for(let F=0;F<S.length;F+=8){var D=Math.min(8,S.length-F);const U=parseInt(S.substring(F,F+D),R);D<8?(D=f(Math.pow(R,D)),j=j.j(D).add(f(U))):(j=j.j(M),j=j.add(f(U)))}return j}var b=h(0),_=h(1),E=h(16777216);t=c.prototype,t.m=function(){if(A(this))return-N(this).m();let S=0,R=1;for(let M=0;M<this.g.length;M++){const j=this.i(M);S+=(j>=0?j:4294967296+j)*R,R*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(A(this))return"-"+N(this).toString(S);const R=f(Math.pow(S,6));var M=this;let j="";for(;;){const D=H(M,R).g;M=O(M,D.j(R));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(S);if(M=D,k(M))return F+j;for(;F.length<6;)F="0"+F;j=F+j}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(let R=0;R<S.g.length;R++)if(S.g[R]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=O(this,S),A(S)?-1:k(S)?0:1};function N(S){const R=S.g.length,M=[];for(let j=0;j<R;j++)M[j]=~S.g[j];return new c(M,~S.h).add(_)}t.abs=function(){return A(this)?N(this):this},t.add=function(S){const R=Math.max(this.g.length,S.g.length),M=[];let j=0;for(let D=0;D<=R;D++){let F=j+(this.i(D)&65535)+(S.i(D)&65535),U=(F>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);j=U>>>16,F&=65535,U&=65535,M[D]=U<<16|F}return new c(M,M[M.length-1]&-2147483648?-1:0)};function O(S,R){return S.add(N(R))}t.j=function(S){if(k(this)||k(S))return b;if(A(this))return A(S)?N(this).j(N(S)):N(N(this).j(S));if(A(S))return N(this.j(N(S)));if(this.l(E)<0&&S.l(E)<0)return f(this.m()*S.m());const R=this.g.length+S.g.length,M=[];for(var j=0;j<2*R;j++)M[j]=0;for(j=0;j<this.g.length;j++)for(let D=0;D<S.g.length;D++){const F=this.i(j)>>>16,U=this.i(j)&65535,Me=S.i(D)>>>16,he=S.i(D)&65535;M[2*j+2*D]+=U*he,z(M,2*j+2*D),M[2*j+2*D+1]+=F*he,z(M,2*j+2*D+1),M[2*j+2*D+1]+=U*Me,z(M,2*j+2*D+1),M[2*j+2*D+2]+=F*Me,z(M,2*j+2*D+2)}for(S=0;S<R;S++)M[S]=M[2*S+1]<<16|M[2*S];for(S=R;S<2*R;S++)M[S]=0;return new c(M,0)};function z(S,R){for(;(S[R]&65535)!=S[R];)S[R+1]+=S[R]>>>16,S[R]&=65535,R++}function P(S,R){this.g=S,this.h=R}function H(S,R){if(k(R))throw Error("division by zero");if(k(S))return new P(b,b);if(A(S))return R=H(N(S),R),new P(N(R.g),N(R.h));if(A(R))return R=H(S,N(R)),new P(N(R.g),R.h);if(S.g.length>30){if(A(S)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var M=_,j=R;j.l(S)<=0;)M=te(M),j=te(j);var D=ee(M,1),F=ee(j,1);for(j=ee(j,2),M=ee(M,2);!k(j);){var U=F.add(j);U.l(S)<=0&&(D=D.add(M),F=U),j=ee(j,1),M=ee(M,1)}return R=O(S,D.j(R)),new P(D,R)}for(D=b;S.l(R)>=0;){for(M=Math.max(1,Math.floor(S.m()/R.m())),j=Math.ceil(Math.log(M)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),F=f(M),U=F.j(R);A(U)||U.l(S)>0;)M-=j,F=f(M),U=F.j(R);k(F)&&(F=_),D=D.add(F),S=O(S,U)}return new P(D,S)}t.B=function(S){return H(this,S).h},t.and=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let j=0;j<R;j++)M[j]=this.i(j)&S.i(j);return new c(M,this.h&S.h)},t.or=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let j=0;j<R;j++)M[j]=this.i(j)|S.i(j);return new c(M,this.h|S.h)},t.xor=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let j=0;j<R;j++)M[j]=this.i(j)^S.i(j);return new c(M,this.h^S.h)};function te(S){const R=S.g.length+1,M=[];for(let j=0;j<R;j++)M[j]=S.i(j)<<1|S.i(j-1)>>>31;return new c(M,S.h)}function ee(S,R){const M=R>>5;R%=32;const j=S.g.length-M,D=[];for(let F=0;F<j;F++)D[F]=R>0?S.i(F+M)>>>R|S.i(F+M+1)<<32-R:S.i(F+M);return new c(D,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,AA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,na=c}).apply(typeof PT<"u"?PT:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var CA,lu,RA,lf,j0,NA,IA,kA;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var w=0;w<m.length;++w){var x=m[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function a(m,w){if(w)e:{var x=i;m=m.split(".");for(var I=0;I<m.length-1;I++){var Y=m[I];if(!(Y in x))break e;x=x[Y]}m=m[m.length-1],I=x[m],w=w(I),w!=I&&w!=null&&e(x,m,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(m){return m||function(w){var x=[],I;for(I in w)Object.prototype.hasOwnProperty.call(w,I)&&x.push([I,w[I]]);return x}});var o=o||{},c=this||self;function d(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function h(m,w,x){return m.call.apply(m.bind,arguments)}function f(m,w,x){return f=h,f.apply(null,arguments)}function g(m,w){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function b(m,w){function x(){}x.prototype=w.prototype,m.Z=w.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(I,Y,Z){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return w.prototype[Y].apply(I,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function E(m){const w=m.length;if(w>0){const x=Array(w);for(let I=0;I<w;I++)x[I]=m[I];return x}return[]}function k(m,w){for(let I=1;I<arguments.length;I++){const Y=arguments[I];var x=typeof Y;if(x=x!="object"?x:Y?Array.isArray(Y)?"array":x:"null",x=="array"||x=="object"&&typeof Y.length=="number"){x=m.length||0;const Z=Y.length||0;m.length=x+Z;for(let fe=0;fe<Z;fe++)m[x+fe]=Y[fe]}else m.push(Y)}}class A{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function N(m){c.setTimeout(()=>{throw m},0)}function O(){var m=S;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class z{constructor(){this.h=this.g=null}add(w,x){const I=P.get();I.set(w,x),this.h?this.h.next=I:this.g=I,this.h=I}}var P=new A(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ee=!1,S=new z,R=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(M)}};function M(){for(var m;m=O();){try{m.h.call(m.g)}catch(x){N(x)}var w=P;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}ee=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};c.addEventListener("test",x,w),c.removeEventListener("test",x,w)}catch{}return m})();function U(m){return/^[\s\xa0]*$/.test(m)}function Me(m,w){D.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}b(Me,D),Me.prototype.init=function(m,w){const x=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(x=="mouseover"?w=m.fromElement:x=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),$=0;function ae(m,w,x,I,Y){this.listener=m,this.proxy=null,this.src=w,this.type=x,this.capture=!!I,this.ha=Y,this.key=++$,this.da=this.fa=!1}function me(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function _e(m,w,x){for(const I in m)w.call(x,m[I],I,m)}function le(m,w){for(const x in m)w.call(void 0,m[x],x,m)}function L(m){const w={};for(const x in m)w[x]=m[x];return w}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,w){let x,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(x in I)m[x]=I[x];for(let Z=0;Z<G.length;Z++)x=G[Z],Object.prototype.hasOwnProperty.call(I,x)&&(m[x]=I[x])}}function de(m){this.src=m,this.g={},this.h=0}de.prototype.add=function(m,w,x,I,Y){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const fe=we(m,w,I,Y);return fe>-1?(w=m[fe],x||(w.fa=!1)):(w=new ae(w,this.src,Z,!!I,Y),w.fa=x,m.push(w)),w};function ye(m,w){const x=w.type;if(x in m.g){var I=m.g[x],Y=Array.prototype.indexOf.call(I,w,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(I,Y,1),Z&&(me(w),m.g[x].length==0&&(delete m.g[x],m.h--))}}function we(m,w,x,I){for(let Y=0;Y<m.length;++Y){const Z=m[Y];if(!Z.da&&Z.listener==w&&Z.capture==!!x&&Z.ha==I)return Y}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),ht={};function Ke(m,w,x,I,Y){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)Ke(m,w[Z],x,I,Y);return null}return x=Jl(x),m&&m[he]?m.J(w,x,d(I)?!!I.capture:!1,Y):_n(m,w,x,!1,I,Y)}function _n(m,w,x,I,Y,Z){if(!w)throw Error("Invalid event type");const fe=d(Y)?!!Y.capture:!!Y;let Pe=_a(m);if(Pe||(m[xe]=Pe=new de(m)),x=Pe.add(w,x,I,fe,Z),x.proxy)return x;if(I=Ln(),x.proxy=I,I.src=m,I.listener=x,m.addEventListener)F||(Y=fe),Y===void 0&&(Y=!1),m.addEventListener(w.toString(),I,Y);else if(m.attachEvent)m.attachEvent(Pi(w.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ln(){function m(x){return w.call(m.src,m.listener,x)}const w=Wl;return m}function wo(m,w,x,I,Y){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)wo(m,w[Z],x,I,Y);else I=d(I)?!!I.capture:!!I,x=Jl(x),m&&m[he]?(m=m.i,Z=String(w).toString(),Z in m.g&&(w=m.g[Z],x=we(w,x,I,Y),x>-1&&(me(w[x]),Array.prototype.splice.call(w,x,1),w.length==0&&(delete m.g[Z],m.h--)))):m&&(m=_a(m))&&(w=m.g[w.toString()],m=-1,w&&(m=we(w,x,I,Y)),(x=m>-1?w[m]:null)&&To(x))}function To(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[he])ye(w.i,m);else{var x=m.type,I=m.proxy;w.removeEventListener?w.removeEventListener(x,I,m.capture):w.detachEvent?w.detachEvent(Pi(x),I):w.addListener&&w.removeListener&&w.removeListener(I),(x=_a(w))?(ye(x,m),x.h==0&&(x.src=null,w[xe]=null)):me(m)}}}function Pi(m){return m in ht?ht[m]:ht[m]="on"+m}function Wl(m,w){if(m.da)m=!0;else{w=new Me(w,this);const x=m.listener,I=m.ha||m.src;m.fa&&To(m),m=x.call(I,w)}return m}function _a(m){return m=m[xe],m instanceof de?m:null}var Zl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jl(m){return typeof m=="function"?m:(m[Zl]||(m[Zl]=function(w){return m.handleEvent(w)}),m[Zl])}function Mt(){j.call(this),this.i=new de(this),this.M=this,this.G=null}b(Mt,j),Mt.prototype[he]=!0,Mt.prototype.removeEventListener=function(m,w,x,I){wo(this,m,w,x,I)};function Gt(m,w){var x,I=m.G;if(I)for(x=[];I;I=I.G)x.push(I);if(m=m.M,I=w.type||w,typeof w=="string")w=new D(w,m);else if(w instanceof D)w.target=w.target||m;else{var Y=w;w=new D(I,m),ue(w,Y)}Y=!0;let Z,fe;if(x)for(fe=x.length-1;fe>=0;fe--)Z=w.g=x[fe],Y=ls(Z,I,!0,w)&&Y;if(Z=w.g=m,Y=ls(Z,I,!0,w)&&Y,Y=ls(Z,I,!1,w)&&Y,x)for(fe=0;fe<x.length;fe++)Z=w.g=x[fe],Y=ls(Z,I,!1,w)&&Y}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const x=m.g[w];for(let I=0;I<x.length;I++)me(x[I]);delete m.g[w],m.h--}}this.G=null},Mt.prototype.J=function(m,w,x,I){return this.i.add(String(m),w,!1,x,I)},Mt.prototype.K=function(m,w,x,I){return this.i.add(String(m),w,!0,x,I)};function ls(m,w,x,I){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let Y=!0;for(let Z=0;Z<w.length;++Z){const fe=w[Z];if(fe&&!fe.da&&fe.capture==x){const Pe=fe.listener,Ct=fe.ha||fe.src;fe.fa&&ye(m.i,fe),Y=Pe.call(Ct,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function jm(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(m,w||0)}function cd(m){m.g=jm(()=>{m.g=null,m.i&&(m.i=!1,cd(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class wn extends j{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:cd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(m){j.call(this),this.h=m,this.g={}}b(wa,j);var ec=[];function tc(m){_e(m.g,function(w,x){this.g.hasOwnProperty(x)&&To(w)},m),m.g={}}wa.prototype.N=function(){wa.Z.N.call(this),tc(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=c.JSON.stringify,Lm=c.JSON.parse,ud=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function dd(){}function hd(){}var yi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){D.call(this,"d")}b(en,D);function Qn(){D.call(this,"c")}b(Qn,D);var At={},fd=null;function xo(){return fd=fd||new Mt}At.Ia="serverreachability";function md(m){D.call(this,At.Ia,m)}b(md,D);function ji(m){const w=xo();Gt(w,new md(w))}At.STAT_EVENT="statevent";function Ta(m,w){D.call(this,At.STAT_EVENT,m),this.stat=w}b(Ta,D);function Ot(m){const w=xo();Gt(w,new Ta(w,m))}At.Ja="timingevent";function Li(m,w){D.call(this,At.Ja,m),this.size=w}b(Li,D);function Ui(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},w)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Um(m,w,x,I,Y,Z){m.info(function(){if(m.g)if(Z){var fe="",Pe=Z.split("&");for(let Je=0;Je<Pe.length;Je++){var Ct=Pe[Je].split("=");if(Ct.length>1){const pt=Ct[0];Ct=Ct[1];const Jn=pt.split("_");fe=Jn.length>=2&&Jn[1]=="type"?fe+(pt+"="+Ct+"&"):fe+(pt+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+w+`
`+x+`
`+fe})}function pd(m,w,x,I,Y,Z,fe){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+w+`
`+x+`
`+Z+" "+fe})}function zi(m,w,x,I){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+zm(m,x)+(I?" "+I:"")})}function xa(m,w){m.info(function(){return"TIMEOUT: "+w})}vi.prototype.info=function(){};function zm(m,w){if(!m.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var x=Z[m];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var Y=I[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<I.length;fe++)I[fe]=""}}}}return cs(Z)}catch{return w}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ic;function Sa(){}b(Sa,dd),Sa.prototype.g=function(){return new XMLHttpRequest},ic=new Sa;function Tr(m){return encodeURIComponent(String(m))}function gd(m){var w=1;m=m.split(":");const x=[];for(;w>0&&m.length;)x.push(m.shift()),w--;return m.length&&x.push(m.join(":")),x}function bi(m,w,x,I){this.j=m,this.i=w,this.l=x,this.S=I||1,this.V=new wa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}var Vt={},Xt={};function Bi(m,w,x){m.M=1,m.A=Aa(jt(w)),m.u=x,m.R=!0,Eo(m,null)}function Eo(m,w){m.F=Date.now(),Fi(m),m.B=jt(m.A);var x=m.B,I=m.S;Array.isArray(I)||(I=[String(I)]),Ro(x.i,"t",I),m.C=0,x=m.j.L,m.h=new _i,m.g=kd(m.j,x?w:null,!m.u),m.P>0&&(m.O=new wn(f(m.Y,m,m.g),m.P)),w=m.V,x=m.g,I=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ec[0]=Y.toString()),Y=ec);for(let Z=0;Z<Y.length;Z++){const fe=Ke(x,Y[Z],I||w.handleEvent,!1,w.h||w);if(!fe)break;w.g[fe.key]=fe}w=m.J?L(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),ji(),Um(m.i,m.v,m.B,m.l,m.S,m.u)}bi.prototype.ba=function(m){m=m.target;const w=this.O;w&&xi(m)==3?w.j():this.Y(m)},bi.prototype.Y=function(m){try{if(m==this.g)e:{const Pe=xi(this.g),Ct=this.g.ya(),Je=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Pe!=4||Ct==7||(Ct==8||Je<=0?ji(3):ji(2)),qi(this);var w=this.g.ca();this.X=w;var x=Bm(this);if(this.o=w==200,pd(this.i,this.v,this.B,this.l,this.S,Pe,w),this.o){if(this.U&&!this.L){t:{if(this.g){var I,Y=this.g;if((I=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(I)){var Z=I;break t}}Z=null}if(m=Z)zi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hi(this,m);else{this.o=!1,this.m=3,Ot(12),Un(this),Xn(this);break e}}if(this.R){m=!0;let pt;for(;!this.K&&this.C<x.length;)if(pt=vd(this,x),pt==Xt){Pe==4&&(this.m=4,Ot(14),m=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Vt){this.m=4,Ot(15),zi(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else zi(this.i,this.l,pt,null),Hi(this,pt);if(yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Ot(16),m=!1),this.o=this.o&&m,!m)zi(this.i,this.l,x,"[Invalid Chunked Response]"),Un(this),Xn(this);else if(x.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),vc(fe),fe.P=!0,Ot(11))}}else zi(this.i,this.l,x,null),Hi(this,x);Pe==4&&Un(this),this.o&&!this.K&&(Pe==4?Cd(this.j,this):(this.o=!1,Fi(this)))}else Er(this.g),w==400&&x.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Un(this),Xn(this)}}}catch{}finally{}};function Bm(m){if(!yd(m))return m.g.la();const w=tn(m.g);if(w==="")return"";let x="";const I=w.length,Y=xi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Un(m),Xn(m),"";m.h.i=new c.TextDecoder}for(let Z=0;Z<I;Z++)m.h.h=!0,x+=m.h.i.decode(w[Z],{stream:!(Y&&Z==I-1)});return w.length=0,m.h.g+=x,m.C=0,m.h.g}function yd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function vd(m,w){var x=m.C,I=w.indexOf(`
`,x);return I==-1?Xt:(x=Number(w.substring(x,I)),isNaN(x)?Vt:(I+=1,I+x>w.length?Xt:(w=w.slice(I,I+x),m.C=I+x,w)))}bi.prototype.cancel=function(){this.K=!0,Un(this)};function Fi(m){m.T=Date.now()+m.H,So(m,m.H)}function So(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ui(f(m.aa,m),w)}function qi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}bi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(xa(this.i,this.B),this.M!=2&&(ji(),Ot(17)),Un(this),this.m=2,Xn(this)):So(this,this.T-m)};function Xn(m){m.j.I==0||m.K||Cd(m.j,m)}function Un(m){qi(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,tc(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Hi(m,w){try{var x=m.j;if(x.I!=0&&(x.g==m||Gi(x.h,m))){if(!m.L&&Gi(x.h,m)&&x.I==3){try{var I=x.Ba.g.parse(w)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)Mo(x),ys(x);else break e;Ma(x),Ot(18)}}else x.xa=Y[1],0<x.xa-x.K&&Y[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ui(f(x.Va,x),6e3));$i(x.h)<=1&&x.ta&&(x.ta=void 0)}else Zi(x,11)}else if((m.L||x.g==m)&&Mo(x),!U(w))for(Y=x.Ba.g.parse(w),w=0;w<Y.length;w++){let Je=Y[w];const pt=Je[0];if(!(pt<=x.K))if(x.K=pt,Je=Je[1],x.I==2)if(Je[0]=="c"){x.M=Je[1],x.ba=Je[2];const Jn=Je[3];Jn!=null&&(x.ka=Jn,x.j.info("VER="+x.ka));const Ji=Je[4];Ji!=null&&(x.za=Ji,x.j.info("SVER="+x.za));const Ei=Je[5];Ei!=null&&typeof Ei=="number"&&Ei>0&&(I=1.5*Ei,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Si=m.g;if(Si){const Oa=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var Z=I.h;Z.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ac(Z,Z.h),Z.h=null))}if(I.G){const Oo=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(I.wa=Oo,nt(I.J,I.G,Oo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var fe=m;if(I.na=Id(I,I.L?I.ba:null,I.W),fe.L){oc(I.h,fe);var Pe=fe,Ct=I.O;Ct&&(Pe.H=Ct),Pe.D&&(qi(Pe),Fi(Pe)),I.g=fe}else Sd(I);x.i.length>0&&Wi(x)}else Je[0]!="stop"&&Je[0]!="close"||Zi(x,7);else x.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Zi(x,7):gc(x):Je[0]!="noop"&&x.l&&x.l.qa(Je),x.A=0)}}ji(4)}catch{}}var Pt=class{constructor(m,w){this.g=m,this.map=w}};function rc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function $i(m){return m.h?1:m.g?m.g.size:0}function Gi(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function ac(m,w){m.g?m.g.add(w):m.h=w}function oc(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}rc.prototype.cancel=function(){if(this.i=lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function lc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const x of m.g.values())w=w.concat(x.G);return w}return E(m.i)}var bd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(m,w){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const I=m[x].indexOf("=");let Y,Z=null;I>=0?(Y=m[x].substring(0,I),Z=m[x].substring(I+1)):Y=m[x],w(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function zn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof zn?(this.l=m.l,Wt(this,m.j),this.o=m.o,this.g=m.g,us(this,m.u),this.h=m.h,cc(this,xd(m.i)),this.m=m.m):m&&(w=String(m).match(bd))?(this.l=!1,Wt(this,w[1]||"",!0),this.o=Ki(w[2]||""),this.g=Ki(w[3]||"",!0),us(this,w[4]),this.h=Ki(w[5]||"",!0),cc(this,w[6]||"",!0),this.m=Ki(w[7]||"")):(this.l=!1,this.i=new hs(null,this.l))}zn.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(Ca(w,Co,!0),":");var x=this.g;return(x||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Ca(w,Co,!0),"@"),m.push(Tr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(Ca(x,x.charAt(0)=="/"?uc:_d,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",Ca(x,wd)),m.join("")},zn.prototype.resolve=function(m){const w=jt(this);let x=!!m.j;x?Wt(w,m.j):x=!!m.o,x?w.o=m.o:x=!!m.g,x?w.g=m.g:x=m.u!=null;var I=m.h;if(x)us(w,m.u);else if(x=!!m.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var Y=w.h.lastIndexOf("/");Y!=-1&&(I=w.h.slice(0,Y+1)+I)}if(Y=I,Y==".."||Y==".")I="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){I=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let fe=0;fe<Y.length;){const Pe=Y[fe++];Pe=="."?I&&fe==Y.length&&Z.push(""):Pe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),I&&fe==Y.length&&Z.push("")):(Z.push(Pe),I=!0)}I=Z.join("/")}else I=Y}return x?w.h=I:x=m.i.toString()!=="",x?cc(w,xd(m.i)):x=!!m.m,x&&(w.m=m.m),w};function jt(m){return new zn(m)}function Wt(m,w,x){m.j=x?Ki(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function us(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function cc(m,w,x){w instanceof hs?(m.i=w,No(m.i,m.l)):(x||(w=Ca(w,ds)),m.i=new hs(w,m.l))}function nt(m,w,x){m.i.set(w,x)}function Aa(m){return nt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ki(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ca(m,w,x){return typeof m=="string"?(m=encodeURI(m).replace(w,Sn),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Sn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Co=/[#\/\?@]/g,_d=/[#\?:]/g,uc=/[#\?]/g,ds=/[#\?@]/g,wd=/#/g;function hs(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function An(m){m.g||(m.g=new Map,m.h=0,m.i&&Ao(m.i,function(w,x){m.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}t=hs.prototype,t.add=function(m,w){An(this),this.i=null,m=fs(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(w),this.h+=1,this};function Td(m,w){An(m),w=fs(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function dc(m,w){return An(m),w=fs(m,w),m.g.has(w)}t.forEach=function(m,w){An(this),this.g.forEach(function(x,I){x.forEach(function(Y){m.call(w,Y,I,this)},this)},this)};function hc(m,w){An(m);let x=[];if(typeof w=="string")dc(m,w)&&(x=x.concat(m.g.get(fs(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)x=x.concat(m[w]);return x}t.set=function(m,w){return An(this),this.i=null,m=fs(this,m),dc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=hc(this,m),m.length>0?String(m[0]):w):w};function Ro(m,w,x){Td(m,w),x.length>0&&(m.i=null,m.g.set(fs(m,w),E(x)),m.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let I=0;I<w.length;I++){var x=w[I];const Y=Tr(x);x=hc(this,x);for(let Z=0;Z<x.length;Z++){let fe=Y;x[Z]!==""&&(fe+="="+Tr(x[Z])),m.push(fe)}}return this.i=m.join("&")};function xd(m){const w=new hs;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function fs(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function No(m,w){w&&!m.j&&(An(m),m.i=null,m.g.forEach(function(x,I){const Y=I.toLowerCase();I!=Y&&(Td(this,I),Ro(this,Y,x))},m)),m.j=w}function wi(m,w){const x=new vi;if(c.Image){const I=new Image;I.onload=g(Wn,x,"TestLoadImage: loaded",!0,w,I),I.onerror=g(Wn,x,"TestLoadImage: error",!1,w,I),I.onabort=g(Wn,x,"TestLoadImage: abort",!1,w,I),I.ontimeout=g(Wn,x,"TestLoadImage: timeout",!1,w,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else w(!1)}function fc(m,w){const x=new vi,I=new AbortController,Y=setTimeout(()=>{I.abort(),Wn(x,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:I.signal}).then(Z=>{clearTimeout(Y),Z.ok?Wn(x,"TestPingServer: ok",!0,w):Wn(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Y),Wn(x,"TestPingServer: error",!1,w)})}function Wn(m,w,x,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(x)}catch{}}function ms(){this.g=new ud}function Yi(m){this.i=m.Sb||null,this.h=m.ab||!1}b(Yi,dd),Yi.prototype.g=function(){return new Ra(this.i,this.h)};function Ra(m,w){Mt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ra,Mt),t=Ra.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Ti(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Io(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Io(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?ps(this):Ti(this),this.readyState==3&&Io(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,ps(this))},t.Na=function(m){this.g&&(this.response=m,ps(this))},t.ga=function(){this.g&&ps(this)};function ps(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ti(m)}t.setRequestHeader=function(m,w){this.A.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=w.next();return m.join(`\r
`)};function Ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Zn(m){let w="";return _e(m,function(x,I){w+=I,w+=":",w+=x,w+=`\r
`}),w}function Na(m,w,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Zn(x),typeof m=="string"?x!=null&&Tr(x):nt(m,w,x))}function st(m){Mt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(st,Mt);var Qi=/^https?$/i,mc=["POST","PUT"];t=st.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,w,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ic.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(Z){Ia(this,Z);return}if(m=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)x.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Z of I.keys())x.set(Z,I.get(Z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(mc,w,void 0)>=0)||I||Y||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of x)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Ia(this,Z)}};function Ia(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,pc(m),xr(m)}function pc(m){m.A||(m.A=!0,Gt(m,"complete"),Gt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Gt(this,"complete"),Gt(this,"abort"),xr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ka(this):this.Xa())},t.Xa=function(){ka(this)};function ka(m){if(m.h&&typeof o<"u"){if(m.v&&xi(m)==4)setTimeout(m.Ca.bind(m),0);else if(Gt(m,"readystatechange"),xi(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var I;if(I=Z===0){let fe=String(m.D).match(bd)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),I=!Qi.test(fe?fe.toLowerCase():"")}x=I}if(x)Gt(m,"complete"),Gt(m,"success");else{m.o=6;try{var Y=xi(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",pc(m)}}finally{xr(m)}}}}function xr(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,w||Gt(m,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xi(m){return m.g?m.g.readyState:0}t.ca=function(){try{return xi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),Lm(w)}};function tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Er(m){const w={};m=(m.g&&xi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(U(m[I]))continue;var x=gd(m[I]);const Y=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=w[Y]||[];w[Y]=Z,Z.push(x)}le(w,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xi(m,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||w}function gs(m){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xi("baseRetryDelayMs",5e3,m),this.Za=Xi("retryDelaySeedMs",1e4,m),this.Ta=Xi("forwardChannelMaxRetries",2,m),this.va=Xi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new rc(m&&m.concurrentRequestLimit),this.Ba=new ms,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=gs.prototype,t.ka=8,t.I=1,t.connect=function(m,w,x,I){Ot(0),this.W=m,this.H=w||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Id(this,null,this.W),Wi(this)};function gc(m){if(ko(m),m.I==3){var w=m.V++,x=jt(m.J);if(nt(x,"SID",m.M),nt(x,"RID",w),nt(x,"TYPE","terminate"),Da(m,x),w=new bi(m,m.j,w),w.M=2,w.A=Aa(jt(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=w.A,x=!0),x||(w.g=kd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Fi(w)}Nd(m)}function ys(m){m.g&&(vc(m),m.g.cancel(),m.g=null)}function ko(m){ys(m),m.v&&(c.clearTimeout(m.v),m.v=null),Mo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Wi(m){if(!sc(m.h)&&!m.m){m.m=!0;var w=m.Ea;te||R(),ee||(te(),ee=!0),S.add(w,m),m.D=0}}function Do(m,w){return $i(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ui(f(m.Ea,m,w),Rd(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new bi(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=L(Z),ue(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(w+=I,w>4096){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=Ed(this,Y,w),x=jt(this.J),nt(x,"RID",m),nt(x,"CVER",22),this.G&&nt(x,"X-HTTP-Session-Id",this.G),Da(this,x),Z&&(this.R?w="headers="+Tr(Zn(Z))+"&"+w:this.u&&Na(x,this.u,Z)),ac(this.h,Y),this.Ra&&nt(x,"TYPE","init"),this.S?(nt(x,"$req",w),nt(x,"SID","null"),Y.U=!0,Bi(Y,x,null)):Bi(Y,x,w),this.I=2}}else this.I==3&&(m?yc(this,m):this.i.length==0||sc(this.h)||yc(this))};function yc(m,w){var x;w?x=w.l:x=m.V++;const I=jt(m.J);nt(I,"SID",m.M),nt(I,"RID",x),nt(I,"AID",m.K),Da(m,I),m.u&&m.o&&Na(I,m.u,m.o),x=new bi(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Ed(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ac(m.h,x),Bi(x,I,w)}function Da(m,w){m.H&&_e(m.H,function(x,I){nt(w,I,x)}),m.l&&_e({},function(x,I){nt(w,I,x)})}function Ed(m,w,x){x=Math.min(m.i.length,x);const I=m.l?f(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Pe=-1;for(;;){const Ct=["count="+x];Pe==-1?x>0?(Pe=Y[0].g,Ct.push("ofs="+Pe)):Pe=0:Ct.push("ofs="+Pe);let Je=!0;for(let pt=0;pt<x;pt++){var Z=Y[pt].g;const Jn=Y[pt].map;if(Z-=Pe,Z<0)Pe=Math.max(0,Y[pt].g-100),Je=!1;else try{Z="req"+Z+"_"||"";try{var fe=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Ji,Ei]of fe){let Si=Ei;d(Ei)&&(Si=cs(Ei)),Ct.push(Z+Ji+"="+encodeURIComponent(Si))}}catch(Ji){throw Ct.push(Z+"type="+encodeURIComponent("_badmap")),Ji}}catch{I&&I(Jn)}}if(Je){fe=Ct.join("&");break e}}fe=void 0}return m=m.i.splice(0,x),w.G=m,fe}function Sd(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;te||R(),ee||(te(),ee=!0),S.add(w,m),m.A=0}}function Ma(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ui(f(m.Da,m),Rd(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Ad(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ui(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),ys(this),Ad(this))};function vc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Ad(m){m.g=new bi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=jt(m.na);nt(w,"RID","rpc"),nt(w,"SID",m.M),nt(w,"AID",m.K),nt(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&nt(w,"TO",m.ia),nt(w,"TYPE","xmlhttp"),Da(m,w),m.u&&m.o&&Na(w,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=Aa(jt(w)),x.u=null,x.R=!0,Eo(x,m)}t.Va=function(){this.C!=null&&(this.C=null,ys(this),Ma(this),Ot(19))};function Mo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Cd(m,w){var x=null;if(m.g==w){Mo(m),vc(m),m.g=null;var I=2}else if(Gi(m.h,w))x=w.G,oc(m.h,w),I=1;else return;if(m.I!=0){if(w.o)if(I==1){x=w.u?w.u.length:0,w=Date.now()-w.F;var Y=m.D;I=xo(),Gt(I,new Li(I,x)),Wi(m)}else Sd(m);else if(Y=w.m,Y==3||Y==0&&w.X>0||!(I==1&&Do(m,w)||I==2&&Ma(m)))switch(x&&x.length>0&&(w=m.h,w.i=w.i.concat(x)),Y){case 1:Zi(m,5);break;case 4:Zi(m,10);break;case 3:Zi(m,6);break;default:Zi(m,2)}}}function Rd(m,w){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*w}function Zi(m,w){if(m.j.info("Error code "+w),w==2){var x=f(m.bb,m),I=m.Ua;const Y=!I;I=new zn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wt(I,"https"),Aa(I),Y?wi(I.toString(),x):fc(I.toString(),x)}else Ot(2);m.I=0,m.l&&m.l.pa(w),Nd(m),ko(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Nd(m){if(m.I=0,m.ja=[],m.l){const w=lc(m.h);(w.length!=0||m.i.length!=0)&&(k(m.ja,w),k(m.ja,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.oa()}}function Id(m,w,x){var I=x instanceof zn?jt(x):new zn(x);if(I.g!="")w&&(I.g=w+"."+I.g),us(I,I.u);else{var Y=c.location;I=Y.protocol,w=w?w+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new zn(null);I&&Wt(Z,I),w&&(Z.g=w),Y&&us(Z,Y),x&&(Z.h=x),I=Z}return x=m.G,w=m.wa,x&&w&&nt(I,x,w),nt(I,"VER",m.ka),Da(m,I),I}function kd(m,w,x){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new st(new Yi({ab:x})):new st(m.ma),w.Fa(m.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dd(){}t=Dd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function vs(){}vs.prototype.g=function(m,w){return new Tn(m,w)};function Tn(m,w){Mt.call(this),this.g=new gs(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!U(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!U(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Sr(this)}b(Tn,Mt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){gc(this.g)},Tn.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=cs(m),m=x);w.i.push(new Pt(w.Ya++,m)),w.I==3&&Wi(w)},Tn.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Tn.Z.N.call(this)};function Md(m){en.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const x in w){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}b(Md,en);function Od(){Qn.call(this),this.status=1}b(Od,Qn);function Sr(m){this.g=m}b(Sr,Dd),Sr.prototype.ra=function(){Gt(this.g,"a")},Sr.prototype.qa=function(m){Gt(this.g,new Md(m))},Sr.prototype.pa=function(m){Gt(this.g,new Od)},Sr.prototype.oa=function(){Gt(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,kA=function(){return new vs},IA=function(){return xo()},NA=At,j0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,lf=Ea,nc.COMPLETE="complete",RA=nc,hd.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,lu=hd,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,CA=st}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const jT="@firebase/firestore",LT="4.9.2";class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let ql="12.3.0";const po=new ky("@firebase/firestore");function ul(){return po.logLevel}function ge(t,...e){if(po.logLevel<=He.DEBUG){const n=e.map(Fy);po.debug(`Firestore (${ql}): ${t}`,...n)}}function Jr(t,...e){if(po.logLevel<=He.ERROR){const n=e.map(Fy);po.error(`Firestore (${ql}): ${t}`,...n)}}function kl(t,...e){if(po.logLevel<=He.WARN){const n=e.map(Fy);po.warn(`Firestore (${ql}): ${t}`,...n)}}function Fy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ne(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,DA(t,i,n)}function DA(t,e,n){let i=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Jr(i),new Error(i)}function tt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||DA(e,a,i)}function Ve(t,e){return t}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class MA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class S5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class A5{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0,42304);let i=this.i;const a=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},d=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qr)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string",31837,{l:i}),new MA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class C5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new C5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0,3512);const i=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const a=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new UT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function I5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=I5(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<n&&(i+=e.charAt(a[o]%62))}return i}}function $e(t,e){return t<e?-1:t>e?1:0}function L0(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const a=t.charAt(i),o=e.charAt(i);if(a!==o)return Xg(a)===Xg(o)?$e(a,o):Xg(a)?1:-1}return $e(t.length,e.length)}const k5=55296,D5=57343;function Xg(t){const e=t.charCodeAt(0);return e>=k5&&e<=D5}function Dl(t,e,n){return t.length===e.length&&t.every(((i,a)=>n(i,e[a])))}const zT="__name__";class sr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ne(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const o=sr.compareSegments(e.get(a),n.get(a));if(o!==0)return o}return $e(e.length,n.length)}static compareSegments(e,n){const i=sr.isNumericId(e),a=sr.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?sr.extractNumericId(e).compare(sr.extractNumericId(n)):L0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class dt extends sr{construct(e,n,i){return new dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const M5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends sr{construct(e,n,i){return new cn(e,n,i)}static isValidIdentifier(e){return M5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zT}static keyField(){return new cn([zT])}static fromServerFormat(e){const n=[];let i="",a=0;const o=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(o(),a++)}if(o(),c)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(dt.fromString(e))}static fromName(e){return new Se(dt.fromString(e).popFirst(5))}static empty(){return new Se(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new dt(e.slice()))}}function OA(t,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O5(t,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BT(t){if(!Se.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FT(t){if(Se.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function am(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=am(t);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $t(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ju(t,e){if(!VA(t))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(a&&typeof c!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}const qT=-62135596800,HT=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*HT);return new Ze(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qT)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HT}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:$t("string",Ze._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Ze(0,0))}static max(){return new De(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nu=-1;function V5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=De.fromTimestamp(i===1e9?new Ze(n+1,0):new Ze(n,i));return new sa(a,Se.empty(),e)}function P5(t){return new sa(t.readTime,t.key,Nu)}class sa{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new sa(De.min(),Se.empty(),Nu)}static max(){return new sa(De.max(),Se.empty(),Nu)}}function j5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}const L5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hl(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==L5)throw t;ge("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,i)=>{n(e)}))}static reject(e){return new oe(((n,i)=>{i(e)}))}static waitFor(e){return new oe(((n,i)=>{let a=0,o=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++o,c&&o===a&&n()}),(h=>i(h)))})),c=!0,o===a&&n()}))}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next((a=>a?oe.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,o)=>{i.push(n.call(this,a,o))})),this.waitFor(i)}static mapArray(e,n){return new oe(((i,a)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((g=>{c[f]=g,++d,d===o&&i(c)}),(g=>a(g)))}}))}static doWhile(e,n){return new oe(((i,a)=>{const o=()=>{e()===!0?n().next((()=>{o()}),a):i()};o()}))}}function z5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $l(t){return t.name==="IndexedDbTransactionError"}class om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}om.ce=-1;const Hy=-1;function lm(t){return t==null}function Df(t){return t===0&&1/t==-1/0}function B5(t){return typeof t=="number"&&Number.isInteger(t)&&!Df(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const PA="";function F5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$T(e)),e=q5(t.get(n),e);return $T(e)}function q5(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const o=t.charAt(a);switch(o){case"\0":n+="";break;case PA:n+="";break;default:n+=o}}return n}function $T(t){return t+PA+""}function GT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class wt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,i,a,o){this.key=e,this.value=n,this.color=i??ln.RED,this.left=a??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,o){return new ln(e??this.key,n??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,n,i),null):o===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,i,a,o){return this}insert(e,n,i){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KT(this.data.getIterator())}getIteratorFrom(e){return new KT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class KT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yn{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new Qt(cn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class LA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LA("Invalid base64 string: "+o):o}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const H5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(t){if(tt(!!t,39018),typeof t=="string"){let e=0;const n=H5.exec(t);if(tt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oa(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}const UA="server_timestamp",zA="__type__",BA="__previous_value__",FA="__local_write_time__";function $y(t){return(t?.mapValue?.fields||{})[zA]?.stringValue===UA}function cm(t){const e=t.mapValue.fields[BA];return $y(e)?cm(e):e}function Iu(t){const e=aa(t.mapValue.fields[FA].timestampValue);return new Ze(e.seconds,e.nanos)}class $5{constructor(e,n,i,a,o,c,d,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Mf="(default)";class ku{constructor(e,n){this.projectId=e,this.database=n||Mf}static empty(){return new ku("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}const qA="__type__",G5="__max__",qh={mapValue:{}},HA="__vector__",Of="value";function la(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$y(t)?4:Y5(t)?9007199254740991:K5(t)?10:11:Ne(28295,{value:t})}function vr(t,e){if(t===e)return!0;const n=la(t);if(n!==la(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iu(t).isEqual(Iu(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=aa(a.timestampValue),d=aa(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,o){return oa(a.bytesValue).isEqual(oa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,o){return kt(a.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(o.geoPointValue.longitude)})(t,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return kt(a.integerValue)===kt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=kt(a.doubleValue),d=kt(o.doubleValue);return c===d?Df(c)===Df(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},d=o.mapValue.fields||{};if(GT(c)!==GT(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!vr(c[h],d[h])))return!1;return!0})(t,e);default:return Ne(52216,{left:t})}}function Du(t,e){return(t.values||[]).find((n=>vr(n,e)))!==void 0}function Ml(t,e){if(t===e)return 0;const n=la(t),i=la(e);if(n!==i)return $e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=kt(o.integerValue||o.doubleValue),h=kt(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return YT(t.timestampValue,e.timestampValue);case 4:return YT(Iu(t),Iu(e));case 5:return L0(t.stringValue,e.stringValue);case 6:return(function(o,c){const d=oa(o),h=oa(c);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const g=$e(d[f],h[f]);if(g!==0)return g}return $e(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=$e(kt(o.latitude),kt(c.latitude));return d!==0?d:$e(kt(o.longitude),kt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return QT(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},f=d[Of]?.arrayValue,g=h[Of]?.arrayValue,b=$e(f?.values?.length||0,g?.values?.length||0);return b!==0?b:QT(f,g)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===qh.mapValue&&c===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(c===qh.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const _=L0(h[b],g[b]);if(_!==0)return _;const E=Ml(d[h[b]],f[g[b]]);if(E!==0)return E}return $e(h.length,g.length)})(t.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function YT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=aa(t),i=aa(e),a=$e(n.seconds,i.seconds);return a!==0?a:$e(n.nanos,i.nanos)}function QT(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const o=Ml(n[a],i[a]);if(o)return o}return $e(n.length,i.length)}function Ol(t){return U0(t)}function U0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=aa(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return oa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Se.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",a=!0;for(const o of n.values||[])a?a=!1:i+=",",i+=U0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${U0(n.fields[c])}`;return a+"}"})(t.mapValue):Ne(61005,{value:t})}function cf(t){switch(la(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(t);return e?16+cf(e):16;case 5:return 2*t.stringValue.length;case 6:return oa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,o)=>a+cf(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let a=0;return ya(i.fields,((o,c)=>{a+=o.length+cf(c)})),a})(t.mapValue);default:throw Ne(13486,{value:t})}}function XT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function z0(t){return!!t&&"integerValue"in t}function Gy(t){return!!t&&"arrayValue"in t}function WT(t){return!!t&&"nullValue"in t}function ZT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uf(t){return!!t&&"mapValue"in t}function K5(t){return(t?.mapValue?.fields||{})[qA]?.stringValue===HA}function pu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=pu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return{...t}}function Y5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===G5}class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!uf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=cn.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=pu(c):a.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,a)}delete(e){const n=this.field(e.popLast());uf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];uf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){ya(n,((a,o)=>e[a]=o));for(const a of i)delete e[a]}clone(){return new Mn(pu(this.value))}}function $A(t){const e=[];return ya(t.fields,((n,i)=>{const a=new cn([n]);if(uf(i)){const o=$A(i.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new Yn(e)}class pn{constructor(e,n,i,a,o,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new pn(e,0,De.min(),De.min(),De.min(),Mn.empty(),0)}static newFoundDocument(e,n,i,a){return new pn(e,1,n,De.min(),i,a,0)}static newNoDocument(e,n){return new pn(e,2,n,De.min(),De.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,De.min(),De.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vf{constructor(e,n){this.position=e,this.inclusive=n}}function JT(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const o=e[a],c=t.position[a];if(o.field.isKeyField()?i=Se.comparator(Se.fromName(c.referenceValue),n.key):i=Ml(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function ex(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class GA{}class Ht extends GA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new W5(e,n,i):n==="array-contains"?new e6(e,i):n==="in"?new t6(e,i):n==="not-in"?new n6(e,i):n==="array-contains-any"?new i6(e,i):new Ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Z5(e,i):new J5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&la(this.value)===la(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends GA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vi(e,n)}matches(e){return KA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KA(t){return t.op==="and"}function YA(t){return X5(t)&&KA(t)}function X5(t){for(const e of t.filters)if(e instanceof Vi)return!1;return!0}function B0(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(YA(t))return t.filters.map((e=>B0(e))).join(",");{const e=t.filters.map((n=>B0(n))).join(",");return`${t.op}(${e})`}}function QA(t,e){return t instanceof Ht?(function(i,a){return a instanceof Ht&&i.op===a.op&&i.field.isEqual(a.field)&&vr(i.value,a.value)})(t,e):t instanceof Vi?(function(i,a){return a instanceof Vi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((o,c,d)=>o&&QA(c,a.filters[d])),!0):!1})(t,e):void Ne(19439)}function XA(t){return t instanceof Ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(t):t instanceof Vi?(function(n){return n.op.toString()+" {"+n.getFilters().map(XA).join(" ,")+"}"})(t):"Filter"}class W5 extends Ht{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Z5 extends Ht{constructor(e,n){super(e,"in",n),this.keys=WA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class J5 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=WA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WA(t,e){return(e.arrayValue?.values||[]).map((n=>Se.fromName(n.referenceValue)))}class e6 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gy(n)&&Du(n.arrayValue,this.value)}}class t6 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class n6 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Du(this.value.arrayValue,n)}}class i6 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Du(this.value.arrayValue,i)))}}class r6{constructor(e,n=null,i=[],a=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function tx(t,e=null,n=[],i=[],a=null,o=null,c=null){return new r6(t,e,n,i,a,o,c)}function Ky(t){const e=Ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>B0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),lm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Te=n}return e.Te}function Yy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ex(t.startAt,e.startAt)&&ex(t.endAt,e.endAt)}function F0(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Gl{constructor(e,n=null,i=[],a=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s6(t,e,n,i,a,o,c,d){return new Gl(t,e,n,i,a,o,c,d)}function um(t){return new Gl(t)}function nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZA(t){return t.collectionGroup!==null}function gu(t){const e=Ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qt(cn.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Mu(o,i))})),n.has(cn.keyField().canonicalString())||e.Ie.push(new Mu(cn.keyField(),i))}return e.Ie}function dr(t){const e=Ve(t);return e.Ee||(e.Ee=a6(e,gu(t))),e.Ee}function a6(t,e){if(t.limitType==="F")return tx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new Mu(a.field,o)}));const n=t.endAt?new Vf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vf(t.startAt.position,t.startAt.inclusive):null;return tx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function q0(t,e){const n=t.filters.concat([e]);return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pf(t,e,n){return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dm(t,e){return Yy(dr(t),dr(e))&&t.limitType===e.limitType}function JA(t){return`${Ky(dr(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>XA(a))).join(", ")}]`),lm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Ol(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Ol(a))).join(",")),`Target(${i})`})(dr(t))}; limitType=${t.limitType})`}function hm(t,e){return e.isFoundDocument()&&(function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Se.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,a){for(const o of gu(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0})(t,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,h){const f=JT(c,d,h);return c.inclusive?f<=0:f<0})(i.startAt,gu(i),a)||i.endAt&&!(function(c,d,h){const f=JT(c,d,h);return c.inclusive?f>=0:f>0})(i.endAt,gu(i),a))})(t,e)}function o6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function e2(t){return(e,n)=>{let i=!1;for(const a of gu(t)){const o=l6(a,e,n);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function l6(t,e,n){const i=t.field.isKeyField()?Se.comparator(e.key,n.key):(function(o,c,d){const h=c.data.field(o),f=d.data.field(o);return h!==null&&f!==null?Ml(h,f):Ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:t.dir})}}class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,((n,i)=>{for(const[a,o]of i)e(a,o)}))}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}const c6=new wt(Se.comparator);function es(){return c6}const t2=new wt(Se.comparator);function cu(...t){let e=t2;for(const n of t)e=e.insert(n.key,n);return e}function n2(t){let e=t2;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function to(){return yu()}function i2(){return yu()}function yu(){return new bo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const u6=new wt(Se.comparator),d6=new Qt(Se.comparator);function Ge(...t){let e=d6;for(const n of t)e=e.add(n);return e}const h6=new Qt($e);function f6(){return h6}function Qy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(e)?"-0":e}}function r2(t){return{integerValue:""+t}}function m6(t,e){return B5(e)?r2(e):Qy(t,e)}class fm{constructor(){this._=void 0}}function p6(t,e,n){return t instanceof jf?(function(a,o){const c={fields:{[zA]:{stringValue:UA},[FA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&$y(o)&&(o=cm(o)),o&&(c.fields[BA]=o),{mapValue:c}})(n,e):t instanceof Ou?a2(t,e):t instanceof Vu?o2(t,e):(function(a,o){const c=s2(a,o),d=ix(c)+ix(a.Ae);return z0(c)&&z0(a.Ae)?r2(d):Qy(a.serializer,d)})(t,e)}function g6(t,e,n){return t instanceof Ou?a2(t,e):t instanceof Vu?o2(t,e):n}function s2(t,e){return t instanceof Lf?(function(i){return z0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class jf extends fm{}class Ou extends fm{constructor(e){super(),this.elements=e}}function a2(t,e){const n=l2(e);for(const i of t.elements)n.some((a=>vr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class Vu extends fm{constructor(e){super(),this.elements=e}}function o2(t,e){let n=l2(e);for(const i of t.elements)n=n.filter((a=>!vr(a,i)));return{arrayValue:{values:n}}}class Lf extends fm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ix(t){return kt(t.integerValue||t.doubleValue)}function l2(t){return Gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function y6(t,e){return t.field.isEqual(e.field)&&(function(i,a){return i instanceof Ou&&a instanceof Ou||i instanceof Vu&&a instanceof Vu?Dl(i.elements,a.elements,vr):i instanceof Lf&&a instanceof Lf?vr(i.Ae,a.Ae):i instanceof jf&&a instanceof jf})(t.transform,e.transform)}class v6{constructor(e,n){this.version=e,this.transformResults=n}}class mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mm{}function c2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xy(t.key,mi.none()):new ed(t.key,t.data,mi.none());{const n=t.data,i=Mn.empty();let a=new Qt(cn.comparator);for(let o of e.fields)if(!a.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new va(t.key,i,new Yn(a.toArray()),mi.none())}}function b6(t,e,n){t instanceof ed?(function(a,o,c){const d=a.value.clone(),h=sx(a.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof va?(function(a,o,c){if(!df(a.precondition,o))return void o.convertToUnknownDocument(c.version);const d=sx(a.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(u2(a)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function vu(t,e,n,i){return t instanceof ed?(function(o,c,d,h){if(!df(o.precondition,c))return d;const f=o.value.clone(),g=ax(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof va?(function(o,c,d,h){if(!df(o.precondition,c))return d;const f=ax(o.fieldTransforms,h,c),g=c.data;return g.setAll(u2(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,i):(function(o,c,d){return df(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function _6(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),o=s2(i.transform,a||null);o!=null&&(n===null&&(n=Mn.empty()),n.set(i.field,o))}return n||null}function rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Dl(i,a,((o,c)=>y6(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ed extends mm{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class va extends mm{constructor(e,n,i,a,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function u2(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function sx(t,e,n){const i=new Map;tt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const o=t[a],c=o.transform,d=e.data.field(o.field);i.set(o.field,g6(c,d,n[a]))}return i}function ax(t,e,n){const i=new Map;for(const a of t){const o=a.transform,c=n.data.field(a.field);i.set(a.field,p6(o,c,e))}return i}class Xy extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w6 extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T6{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&b6(o,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=vu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=vu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=i2();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(a.key)?null:d;const h=c2(c,d);h!==null&&i.set(a.key,h),c.isValidDocument()||c.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,((n,i)=>rx(n,i)))&&Dl(this.baseMutations,e.baseMutations,((n,i)=>rx(n,i)))}}class Wy{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){tt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return u6})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Wy(e,n,i,a)}}class x6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class E6{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ft,Qe;function S6(t){switch(t){case re.OK:return Ne(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function d2(t){if(t===void 0)return Jr("GRPC error has no .code"),re.UNKNOWN;switch(t){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return Ne(39323,{code:t})}}(Qe=Ft||(Ft={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function A6(){return new TextEncoder}const C6=new na([4294967295,4294967295],0);function ox(t){const e=A6().encode(t),n=new AA;return n.update(e),new Uint8Array(n.digest())}function lx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new na([n,i],0),new na([a,o],0)]}class Zy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new uu(`Invalid padding: ${n}`);if(i<0)throw new uu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new uu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=na.fromNumber(this.ge)}ye(e,n,i){let a=e.add(n.multiply(na.fromNumber(i)));return a.compare(C6)===1&&(a=new na([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ox(e),[i,a]=lx(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);if(!this.we(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Zy(o,a,n);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const n=ox(e),[i,a]=lx(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pm{constructor(e,n,i,a,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,td.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new pm(De.min(),a,new wt($e),es(),Ge())}}class td{constructor(e,n,i,a,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new td(i,n,Ge(),Ge(),Ge())}}class hf{constructor(e,n,i,a){this.be=e,this.removedTargetIds=n,this.key=i,this.De=a}}class h2{constructor(e,n){this.targetId=e,this.Ce=n}}class f2{constructor(e,n,i=dn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class cx{constructor(){this.ve=0,this.Fe=ux(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),i=Ge();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Ne(38017,{changeType:o})}})),new td(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=ux()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R6{constructor(e){this.Ge=e,this.ze=new Map,this.je=es(),this.Je=Hh(),this.He=Hh(),this.Ye=new wt($e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,i=e.Ce.count,a=this.ot(n);if(a){const o=a.target;if(F0(o))if(i===0){const c=new Se(o.path);this.et(n,c,pn.newNoDocument(c,De.min()))}else tt(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=n;let c,d;try{c=oa(i).toUint8Array()}catch(h){if(h instanceof LA)return kl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Zy(c,a,o)}catch(h){return kl(h instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let a=0;return i.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&F0(d.target)){const h=new Se(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,pn.newNoDocument(h,e))}o.Be&&(n.set(c,o.ke()),o.qe())}}));let i=Ge();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new pm(e,n,this.Ye,this.je,i);return this.je=es(),this.Je=Hh(),this.He=Hh(),this.Ye=new wt($e),a}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qt($e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qt($e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new wt(Se.comparator)}function ux(){return new wt(Se.comparator)}const N6={asc:"ASCENDING",desc:"DESCENDING"},I6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k6={and:"AND",or:"OR"};class D6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function H0(t,e){return t.useProto3Json||lm(e)?e:{value:e}}function Uf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M6(t,e){return Uf(t,e.toTimestamp())}function hr(t){return tt(!!t,49232),De.fromTimestamp((function(n){const i=aa(n);return new Ze(i.seconds,i.nanos)})(t))}function Jy(t,e){return $0(t,e).canonicalString()}function $0(t,e){const n=(function(a){return new dt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function p2(t){const e=dt.fromString(t);return tt(_2(e),10190,{key:e.toString()}),e}function G0(t,e){return Jy(t.databaseId,e.path)}function Wg(t,e){const n=p2(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(y2(n))}function g2(t,e){return Jy(t.databaseId,e)}function O6(t){const e=p2(t);return e.length===4?dt.emptyPath():y2(e)}function K0(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y2(t){return tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dx(t,e,n){return{name:G0(t,e),fields:n.value.mapValue.fields}}function V6(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ne(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(tt(g===void 0||typeof g=="string",58123),dn.fromBase64String(g||"")):(tt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),dn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const g=f.code===void 0?re.UNKNOWN:d2(f.code);return new pe(g,f.message||"")})(c);n=new f2(i,a,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Wg(t,i.document.name),o=hr(i.document.updateTime),c=i.document.createTime?hr(i.document.createTime):De.min(),d=new Mn({mapValue:{fields:i.document.fields}}),h=pn.newFoundDocument(a,o,c,d),f=i.targetIds||[],g=i.removedTargetIds||[];n=new hf(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Wg(t,i.document),o=i.readTime?hr(i.readTime):De.min(),c=pn.newNoDocument(a,o),d=i.removedTargetIds||[];n=new hf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Wg(t,i.document),o=i.removedTargetIds||[];n=new hf([],o,a,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new E6(a,o),d=i.targetId;n=new h2(d,c)}}return n}function P6(t,e){let n;if(e instanceof ed)n={update:dx(t,e.key,e.value)};else if(e instanceof Xy)n={delete:G0(t,e.key)};else if(e instanceof va)n={update:dx(t,e.key,e.data),updateMask:$6(e.fieldMask)};else{if(!(e instanceof w6))return Ne(16599,{Vt:e.type});n={verify:G0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const d=c.transform;if(d instanceof jf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ou)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Lf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ne(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:M6(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne(27497)})(t,e.precondition)),n}function j6(t,e){return t&&t.length>0?(tt(e!==void 0,14353),t.map((n=>(function(a,o){let c=a.updateTime?hr(a.updateTime):hr(o);return c.isEqual(De.min())&&(c=hr(o)),new v6(c,a.transformResults||[])})(n,e)))):[]}function L6(t,e){return{documents:[g2(t,e.path)]}}function U6(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=g2(t,a);const o=(function(f){if(f.length!==0)return b2(Vi.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:hl(_.field),direction:F6(_.dir)}})(g)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=H0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:a}}function z6(t){let e=O6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){tt(i===1,65062);const g=n.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(b){const _=v2(b);return _ instanceof Vi&&YA(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((_=>(function(k){return new Mu(fl(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(_)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let _;return _=typeof b=="object"?b.value:b,lm(_)?null:_})(n.limit));let h=null;n.startAt&&(h=(function(b){const _=!!b.before,E=b.values||[];return new Vf(E,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(b){const _=!b.before,E=b.values||[];return new Vf(E,_)})(n.endAt)),s6(e,a,c,o,d,"F",h,f)}function B6(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function v2(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=fl(n.unaryFilter.field);return Ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fl(n.unaryFilter.field);return Ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fl(n.unaryFilter.field);return Ht.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ht.create(fl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vi.create(n.compositeFilter.filters.map((i=>v2(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(t):Ne(30097,{filter:t})}function F6(t){return N6[t]}function q6(t){return I6[t]}function H6(t){return k6[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return cn.fromServerFormat(t.fieldPath)}function b2(t){return t instanceof Ht?(function(n){if(n.op==="=="){if(ZT(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(WT(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZT(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(WT(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:q6(n.op),value:n.value}}})(t):t instanceof Vi?(function(n){const i=n.getFilters().map((a=>b2(a)));return i.length===1?i[0]:{compositeFilter:{op:H6(n.op),filters:i}}})(t):Ne(54877,{filter:t})}function $6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function _2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ws{constructor(e,n,i,a,o=De.min(),c=De.min(),d=dn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class G6{constructor(e){this.yt=e}}function K6(t){const e=z6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pf(e,e.limit,"L"):e}class Y6{constructor(){this.Cn=new Q6}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(sa.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class Q6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Qt(dt.comparator),o=!a.has(i);return this.index[n]=a.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Qt(dt.comparator)).toArray()}}const hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w2=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(w2,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class Vl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vl(0)}static cr(){return new Vl(-1)}}const fx="LruGarbageCollector",X6=1048576;function mx([t,e],[n,i]){const a=$e(t,n);return a===0?$e(e,i):a}class W6{constructor(e){this.Ir=e,this.buffer=new Qt(mx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();mx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Z6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$l(n)?ge(fx,"Ignoring IndexedDB error during garbage collection: ",n):await Hl(n)}await this.Vr(3e5)}))}}class J6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(om.ce);const i=new W6(n);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,a,o,c,d,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,n)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(f=Date.now(),ul()<=He.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:b}))))}}function eP(t,e){return new J6(t,e)}class tP{constructor(){this.changes=new bo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class iP{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&vu(i.mutation,a,Yn.empty(),Ze.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ge()){const a=to();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((o=>{let c=cu();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=to();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ge())))}populateOverlays(e,n,i){const a=[];return i.forEach((o=>{n.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,i,a){let o=es();const c=yu(),d=(function(){return yu()})();return n.forEach(((h,f)=>{const g=i.get(f.key);a.has(f.key)&&(g===void 0||g.mutation instanceof va)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),vu(g.mutation,f,g.mutation.getFieldMask(),Ze.now())):c.set(f.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),n.forEach(((f,g)=>d.set(f,new nP(g,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=yu();let a=new wt(((c,d)=>c-d)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||Yn.empty();g=d.applyToLocalView(f,g),i.set(h,g);const b=(a.get(d.batchId)||Ge()).add(h);a=a.insert(d.batchId,b)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,g=h.value,b=i2();g.forEach((_=>{if(!o.has(_)){const E=c2(n.get(_),i.get(_));E!==null&&b.set(_,E),o=o.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return oe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-o.size):oe.resolve(to());let d=Nu,h=o;return c.next((f=>oe.forEach(f,((g,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(g)?oe.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ge()))).next((g=>({batchId:d,changes:n2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((i=>{let a=cu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const o=n.collectionGroup;let c=cu();return this.indexManager.getCollectionParents(e,o).next((d=>oe.forEach(d,(h=>{const f=(function(b,_){return new Gl(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,a).next((g=>{g.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,a)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,pn.newInvalidDocument(g)))}));let d=cu();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&vu(g.mutation,f,Yn.empty(),Ze.now()),hm(n,f)&&(d=d.insert(h,f))})),d}))}}class rP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:hr(a.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:K6(a.bundledQuery),readTime:hr(a.readTime)}})(n)),oe.resolve()}}class sP{constructor(){this.overlays=new wt(Se.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=to();return oe.forEach(n,(a=>this.getOverlay(e,a).next((o=>{o!==null&&i.set(a,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,o)=>{this.St(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const a=to(),o=n.length+1,c=new Se(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&a.set(h.getKey(),h)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let o=new wt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=to(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=to(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>d.set(f,g))),!(d.size()>=a)););return oe.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new x6(n,i));let o=this.qr.get(n);o===void 0&&(o=Ge(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}class aP{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class ev{constructor(){this.Qr=new Qt(Jt.$r),this.Ur=new Qt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Jt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Jt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Se(new dt([])),i=new Jt(n,e),a=new Jt(n,e+1),o=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new dt([])),i=new Jt(n,e),a=new Jt(n,e+1);let o=Ge();return this.Ur.forEachInRange([i,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const n=new Jt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||$e(e.Yr,n.Yr)}static Kr(e,n){return $e(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}class oP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Jt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new T6(o,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Jt(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ei(i),o=a<0?0:a;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Hy:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Jt(n,0),a=new Jt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);o.push(d)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qt($e);return n.forEach((a=>{const o=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{i=i.add(d.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let o=i;Se.isDocumentKey(o)||(o=o.child(""));const c=new Jt(new Se(o),0);let d=new Qt($e);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===a&&(d=d.add(h.Yr)),!0)}),c),oe.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){tt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(n.mutations,(a=>{const o=new Jt(a.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Jt(n,0),a=this.Zr.firstAfterOrEqual(i);return oe.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class lP{constructor(e){this.ri=e,this.docs=(function(){return new wt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),o=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let i=es();return n.forEach((a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():pn.newInvalidDocument(a))})),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let o=es();const c=n.path,d=new Se(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||j5(P5(g),i)<=0||(a.has(g.key)||hm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,i,a){Ne(9500)}ii(e,n){return oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new cP(this)}getSize(e){return oe.resolve(this.size)}}class cP extends tP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class uP{constructor(e){this.persistence=e,this.si=new bo((n=>Ky(n)),Yy),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new ev,this.targetCount=0,this.ai=Vl.ur()}forEachTarget(e,n){return this.si.forEach(((i,a)=>n(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let a=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),oe.waitFor(o).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const a=this.persistence.referenceDelegate,o=[];return a&&n.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}class T2{constructor(e,n){this.ui={},this.overlays={},this.ci=new om(0),this.li=!1,this.li=!0,this.hi=new aP,this.referenceDelegate=e(this),this.Pi=new uP(this),this.indexManager=new Y6,this.remoteDocumentCache=(function(a){return new lP(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new G6(n),this.Ii=new rP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new oP(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const a=new dP(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,n){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class dP extends U5{constructor(e){super(),this.currentSequenceNumber=e}}class tv{constructor(e){this.persistence=e,this.Ri=new ev,this.Vi=null}static mi(e){return new tv(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const a=Se.fromPath(i);return this.gi(e,a).next((o=>{o||n.removeEntry(a,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zf{constructor(e,n){this.persistence=e,this.pi=new bo((i=>F5(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=eP(this,n)}static mi(e,n){return new zf(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return oe.forEach(this.pi,((i,a)=>this.br(e,i,a).next((o=>o?oe.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((d=>{d||(i++,o.removeEntry(c,De.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=cf(e.data.value)),n}br(e,n,i){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return oe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nv{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=a}static As(e,n){let i=Ge(),a=Ge();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new nv(e,n.fromCache,i,a)}}class hP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LM()?8:z5(bn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,a){const o={result:null};return this.ys(e,n).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,n,a,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new hP;return this.Ss(e,n,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,c,d.size)}))})).next((()=>o.result))}bs(e,n,i,a){return i.documentReadCount<this.fs?(ul()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(ul()<=He.DEBUG&&ge("QueryEngine","Query:",dl(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(ul()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):oe.resolve())}ys(e,n){if(nx(n))return oe.resolve(null);let i=dr(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Pf(n,null,"F"),i=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Ge(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(n,d);return this.Cs(n,f,c,h.readTime)?this.ys(e,Pf(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,i,a){return nx(n)||a.isEqual(De.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(n,o);return this.Cs(n,c,i,a)?oe.resolve(null):(ul()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),dl(n)),this.vs(e,c,n,V5(a,Nu)).next((d=>d)))}))}Ds(e,n){let i=new Qt(e2(e));return n.forEach(((a,o)=>{hm(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,n,i){return ul()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,sa.min(),i)}vs(e,n,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((o=>(n.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const iv="LocalStore",mP=3e8;class pP{constructor(e,n,i,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new wt($e),this.xs=new bo((o=>Ky(o)),Yy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function gP(t,e,n,i){return new pP(t,e,n,i)}async function x2(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((o=>(a=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],d=[];let h=Ge();for(const f of a){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function yP(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,g){const b=f.batch,_=b.keys();let E=oe.resolve();return _.forEach((k=>{E=E.next((()=>g.getEntry(h,k))).next((A=>{const N=f.docVersions.get(k);tt(N!==null,48541),A.version.compareTo(N)<0&&(b.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=Ge();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function E2(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function vP(t,e){const n=Ve(t),i=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const d=[];e.targetChanges.forEach(((g,b)=>{const _=a.get(b);if(!_)return;d.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,b))));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(dn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,i)),a=a.insert(b,E),(function(A,N,O){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=mP?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(_,E,g)&&d.push(n.Pi.updateTargetData(o,E))}));let h=es(),f=Ge();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),d.push(bP(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!i.isEqual(De.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));d.push(g)}return oe.waitFor(d).next((()=>c.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Ms=a,o)))}function bP(t,e,n){let i=Ge(),a=Ge();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let c=es();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(d)),h.isNoDocument()&&h.version.isEqual(De.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ge(iv,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:a}}))}function _P(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function wP(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.Pi.getTargetData(i,e).next((o=>o?(a=o,oe.resolve(a)):n.Pi.allocateTargetId(i).next((c=>(a=new Ws(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Y0(t,e,n){const i=Ve(t),a=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!$l(c))throw c;ge(iv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function px(t,e,n){const i=Ve(t);let a=De.min(),o=Ge();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const b=Ve(h),_=b.xs.get(g);return _!==void 0?oe.resolve(b.Ms.get(_)):b.Pi.getTargetData(f,g)})(i,c,dr(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,n?a:De.min(),n?o:Ge()))).next((d=>(TP(i,o6(e),d),{documents:d,Qs:o})))))}function TP(t,e,n){let i=t.Os.get(e)||De.min();n.forEach(((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.Os.set(e,i)}class gx{constructor(){this.activeTargetIds=f6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xP{constructor(){this.Mo=new gx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EP{Oo(e){}shutdown(){}}const yx="ConnectivityMonitor";class vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(yx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(yx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $h=null;function Q0(){return $h===null?$h=(function(){return 268435456+Math.round(2147483648*Math.random())})():$h++,"0x"+$h.toString(16)}const Zg="RestConnection",SP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Mf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,n,i,a,o){const c=Q0(),d=this.zo(e,n.toUriEncodedString());ge(Zg,`Sending RPC '${e}' ${c}:`,d,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,a,o);const{host:f}=new URL(d),g=Bl(f);return this.Jo(e,d,h,i,g).then((b=>(ge(Zg,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw kl(Zg,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",i),b}))}Ho(e,n,i,a,o,c){return this.Go(e,n,i,a,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,o)=>e[o]=a)),i&&i.headers.forEach(((a,o)=>e[o]=a))}zo(e,n){const i=SP[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class CP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const fn="WebChannelConnection";class RP extends AP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,o){const c=Q0();return new Promise(((d,h)=>{const f=new CA;f.setWithCredentials(!0),f.listenOnce(RA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case lf.NO_ERROR:const b=f.getResponseJson();ge(fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case lf.TIMEOUT:ge(fn,`RPC '${e}' ${c} timed out`),h(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const _=f.getStatus();if(ge(fn,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E?.error;if(k&&k.status&&k.message){const A=(function(O){const z=O.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(z)>=0?z:re.UNKNOWN})(k.status);h(new pe(A,k.message))}else h(new pe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(fn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(a);ge(fn,`RPC '${e}' ${c} sending request:`,a),f.send(n,"POST",g,i,15)}))}T_(e,n,i){const a=Q0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kA(),d=IA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");ge(fn,`Creating RPC '${e}' stream ${a}: ${g}`,h);const b=c.createWebChannel(g,h);this.I_(b);let _=!1,E=!1;const k=new CP({Yo:N=>{E?ge(fn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(_||(ge(fn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ge(fn,`RPC '${e}' stream ${a} sending:`,N),b.send(N))},Zo:()=>b.close()}),A=(N,O,z)=>{N.listen(O,(P=>{try{z(P)}catch(H){setTimeout((()=>{throw H}),0)}}))};return A(b,lu.EventType.OPEN,(()=>{E||(ge(fn,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),A(b,lu.EventType.CLOSE,(()=>{E||(E=!0,ge(fn,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(b))})),A(b,lu.EventType.ERROR,(N=>{E||(E=!0,kl(fn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),A(b,lu.EventType.MESSAGE,(N=>{if(!E){const O=N.data[0];tt(!!O,16349);const z=O,P=z?.error||z[0]?.error;if(P){ge(fn,`RPC '${e}' stream ${a} received error:`,P);const H=P.status;let te=(function(R){const M=Ft[R];if(M!==void 0)return d2(M)})(H),ee=P.message;te===void 0&&(te=re.INTERNAL,ee="Unknown error status: "+H+" with message "+P.message),E=!0,k.a_(new pe(te,ee)),b.close()}else ge(fn,`RPC '${e}' stream ${a} received:`,O),k.u_(O)}})),A(d,NA.STAT_EVENT,(N=>{N.stat===j0.PROXY?ge(fn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===j0.NOPROXY&&ge(fn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Jg(){return typeof document<"u"?document:null}function gm(t){return new D6(t,!0)}class S2{constructor(e,n,i=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-i);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const bx="PersistentStream";class A2{constructor(e,n,i,a,o,c,d,h){this.Mi=e,this.S_=i,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new S2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===n&&this.G_(i,a)}),(i=>{e((()=>{const a=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NP extends A2{constructor(e,n,i,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?hr(c.readTime):De.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=K0(this.serializer),n.addTarget=(function(o,c){let d;const h=c.target;if(d=F0(h)?{documents:L6(o,h)}:{query:U6(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=m2(o,c.resumeToken);const f=H0(o,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(De.min())>0){d.readTime=Uf(o,c.snapshotVersion.toTimestamp());const f=H0(o,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const i=B6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=K0(this.serializer),n.removeTarget=e,this.q_(n)}}class IP extends A2{constructor(e,n,i,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=j6(e.writeResults,e.commitTime),i=hr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=K0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>P6(this.serializer,i)))};this.q_(n)}}class kP{}class DP extends kP{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,$0(n,i),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Ho(e,n,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,$0(n,i),a,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class MP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const go="RemoteStore";class OP{constructor(e,n,i,a,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{_o(this)&&(ge(go,"Restarting streams for network reachability change."),await(async function(h){const f=Ve(h);f.Ea.add(4),await nd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ym(f)})(this))}))})),this.Ra=new MP(i,a)}}async function ym(t){if(_o(t))for(const e of t.da)await e(!0)}async function nd(t){for(const e of t.da)await e(!1)}function C2(t,e){const n=Ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ov(n)?av(n):Kl(n).O_()&&sv(n,e))}function rv(t,e){const n=Ve(t),i=Kl(n);n.Ia.delete(e),i.O_()&&R2(n,e),n.Ia.size===0&&(i.O_()?i.L_():_o(n)&&n.Ra.set("Unknown"))}function sv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).Y_(e)}function R2(t,e){t.Va.Ue(e),Kl(t).Z_(e)}function av(t){t.Va=new R6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.Ra.ua()}function ov(t){return _o(t)&&!Kl(t).x_()&&t.Ia.size>0}function _o(t){return Ve(t).Ea.size===0}function N2(t){t.Va=void 0}async function VP(t){t.Ra.set("Online")}async function PP(t){t.Ia.forEach(((e,n)=>{sv(t,e)}))}async function jP(t,e){N2(t),ov(t)?(t.Ra.ha(e),av(t)):t.Ra.set("Unknown")}async function LP(t,e,n){if(t.Ra.set("Online"),e instanceof f2&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const d of o.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(t,e)}catch(i){ge(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bf(t,i)}else if(e instanceof hf?t.Va.Ze(e):e instanceof h2?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const i=await E2(t.localStore);n.compareTo(i)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(dn.EMPTY_BYTE_STRING,g.snapshotVersion)),R2(o,h);const b=new Ws(g.target,h,f,g.sequenceNumber);sv(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ge(go,"Failed to raise snapshot:",i),await Bf(t,i)}}async function Bf(t,e,n){if(!$l(e))throw e;t.Ea.add(1),await nd(t),t.Ra.set("Offline"),n||(n=()=>E2(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ym(t)}))}function I2(t,e){return e().catch((n=>Bf(t,n,e)))}async function vm(t){const e=Ve(t),n=ca(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hy;for(;UP(e);)try{const a=await _P(e.localStore,i);if(a===null){e.Ta.length===0&&n.L_();break}i=a.batchId,zP(e,a)}catch(a){await Bf(e,a)}k2(e)&&D2(e)}function UP(t){return _o(t)&&t.Ta.length<10}function zP(t,e){t.Ta.push(e);const n=ca(t);n.O_()&&n.X_&&n.ea(e.mutations)}function k2(t){return _o(t)&&!ca(t).x_()&&t.Ta.length>0}function D2(t){ca(t).start()}async function BP(t){ca(t).ra()}async function FP(t){const e=ca(t);for(const n of t.Ta)e.ea(n.mutations)}async function qP(t,e,n){const i=t.Ta.shift(),a=Wy.from(i,e,n);await I2(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await vm(t)}async function HP(t,e){e&&ca(t).X_&&await(async function(i,a){if((function(c){return S6(c)&&c!==re.ABORTED})(a.code)){const o=i.Ta.shift();ca(i).B_(),await I2(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a))),await vm(i)}})(t,e),k2(t)&&D2(t)}async function _x(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),ge(go,"RemoteStore received new credentials");const i=_o(n);n.Ea.add(3),await nd(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ym(n)}async function $P(t,e){const n=Ve(t);e?(n.Ea.delete(2),await ym(n)):e||(n.Ea.add(2),await nd(n),n.Ra.set("Unknown"))}function Kl(t){return t.ma||(t.ma=(function(n,i,a){const o=Ve(n);return o.sa(),new NP(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:VP.bind(null,t),t_:PP.bind(null,t),r_:jP.bind(null,t),H_:LP.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),ov(t)?av(t):t.Ra.set("Unknown")):(await t.ma.stop(),N2(t))}))),t.ma}function ca(t){return t.fa||(t.fa=(function(n,i,a){const o=Ve(n);return o.sa(),new IP(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:BP.bind(null,t),r_:HP.bind(null,t),ta:FP.bind(null,t),na:qP.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await vm(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class lv{constructor(e,n,i,a,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,o){const c=Date.now()+i,d=new lv(e,n,c,a,o);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cv(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),$l(t))return new pe(re.UNAVAILABLE,`${e}: ${t}`);throw t}class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=cu(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class wx{constructor(){this.ga=new wt(Se.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Pl{constructor(e,n,i,a,o,c,d,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,a,o){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Pl(e,n,Sl.emptySet(n),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}class GP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KP{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ve(n),o=a.queries;a.queries=Tx(),o.forEach(((c,d)=>{for(const h of d.Sa)h.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function Tx(){return new bo((t=>JA(t)),dm)}async function uv(t,e){const n=Ve(t);let i=3;const a=e.query;let o=n.queries.get(a);o?!o.ba()&&e.Da()&&(i=2):(o=new GP,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(a,!0);break;case 1:o.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=cv(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&hv(n)}async function dv(t,e){const n=Ve(t),i=e.query;let a=3;const o=n.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function YP(t,e){const n=Ve(t);let i=!1;for(const a of e){const o=a.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&hv(n)}function QP(t,e,n){const i=Ve(t),a=i.queries.get(e);if(a)for(const o of a.Sa)o.onError(n);i.queries.delete(e)}function hv(t){t.Ca.forEach((e=>{e.next()}))}var X0,xx;(xx=X0||(X0={})).Ma="default",xx.Cache="cache";class fv{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Pl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==X0.Cache}}class M2{constructor(e){this.key=e}}class O2{constructor(e){this.key=e}}class XP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=e2(e),this.tu=new Sl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new wx,a=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((g,b)=>{const _=a.get(g),E=hm(this.query,b)?b:null,k=!!_&&this.mutatedKeys.has(_.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;_&&E?_.data.isEqual(E.data)?k!==A&&(i.track({type:3,doc:E}),N=!0):this.su(_,E)||(i.track({type:2,doc:E}),N=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(d=!0)):!_&&E?(i.track({type:0,doc:E}),N=!0):_&&!E&&(i.track({type:1,doc:_}),N=!0,(h||f)&&(d=!0)),N&&(E?(c=c.add(E),o=A?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:c,iu:i,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,b)=>(function(E,k){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:N})}};return A(E)-A(k)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(i),a=a??!1;const d=n&&!a?this._u():[],h=this.Xa.size===0&&this.current&&!a?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Pl(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new O2(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new M2(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mv="SyncEngine";class WP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ZP{constructor(e){this.key=e,this.hu=!1}}class JP{constructor(e,n,i,a,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bo((d=>JA(d)),dm),this.Iu=new Map,this.Eu=new Set,this.du=new wt(Se.comparator),this.Au=new Map,this.Ru=new ev,this.Vu={},this.mu=new Map,this.fu=Vl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ej(t,e,n=!0){const i=z2(t);let a;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await V2(i,e,n,!0),a}async function tj(t,e){const n=z2(t);await V2(n,e,!0,!1)}async function V2(t,e,n,i){const a=await wP(t.localStore,dr(e)),o=a.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return i&&(d=await nj(t,e,o,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&C2(t.remoteStore,a),d}async function nj(t,e,n,i,a){t.pu=(b,_,E)=>(async function(A,N,O,z){let P=N.view.ru(O);P.Cs&&(P=await px(A.localStore,N.query,!1).then((({documents:S})=>N.view.ru(S,P))));const H=z&&z.targetChanges.get(N.targetId),te=z&&z.targetMismatches.get(N.targetId)!=null,ee=N.view.applyChanges(P,A.isPrimaryClient,H,te);return Sx(A,N.targetId,ee.au),ee.snapshot})(t,b,_,E);const o=await px(t.localStore,e,!0),c=new XP(e,o.Qs),d=c.ru(o.documents),h=td.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),f=c.applyChanges(d,t.isPrimaryClient,h);Sx(t,n,f.au);const g=new WP(e,n,c);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function ij(t,e,n){const i=Ve(t),a=i.Tu.get(e),o=i.Iu.get(a.targetId);if(o.length>1)return i.Iu.set(a.targetId,o.filter((c=>!dm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Y0(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&rv(i.remoteStore,a.targetId),W0(i,a.targetId)})).catch(Hl)):(W0(i,a.targetId),await Y0(i.localStore,a.targetId,!0))}async function rj(t,e){const n=Ve(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rv(n.remoteStore,i.targetId))}async function sj(t,e,n){const i=hj(t);try{const a=await(function(c,d){const h=Ve(c),f=Ze.now(),g=d.reduce(((E,k)=>E.add(k.key)),Ge());let b,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let k=es(),A=Ge();return h.Ns.getEntries(E,g).next((N=>{k=N,k.forEach(((O,z)=>{z.isValidDocument()||(A=A.add(O))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,k))).next((N=>{b=N;const O=[];for(const z of d){const P=_6(z,b.get(z.key).overlayedDocument);P!=null&&O.push(new va(z.key,P,$A(P.value.mapValue),mi.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,O,d)})).next((N=>{_=N;const O=N.applyToLocalDocumentSet(b,A);return h.documentOverlayCache.saveOverlays(E,N.batchId,O)}))})).then((()=>({batchId:_.batchId,changes:n2(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new wt($e)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(i,a.batchId,n),await id(i,a.changes),await vm(i.remoteStore)}catch(a){const o=cv(a,"Failed to persist write");n.reject(o)}}async function P2(t,e){const n=Ve(t);try{const i=await vP(n.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=n.Au.get(o);c&&(tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?tt(c.hu,14607):a.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await id(n,i,e)}catch(i){await Hl(i)}}function Ex(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const h=Ve(c);h.onlineState=d;let f=!1;h.queries.forEach(((g,b)=>{for(const _ of b.Sa)_.va(d)&&(f=!0)})),f&&hv(h)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aj(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Au.get(e),o=a&&a.key;if(o){let c=new wt(Se.comparator);c=c.insert(o,pn.newNoDocument(o,De.min()));const d=Ge().add(o),h=new pm(De.min(),new Map,new wt($e),c,d);await P2(i,h),i.du=i.du.remove(o),i.Au.delete(e),pv(i)}else await Y0(i.localStore,e,!1).then((()=>W0(i,e,n))).catch(Hl)}async function oj(t,e){const n=Ve(t),i=e.batch.batchId;try{const a=await yP(n.localStore,e);L2(n,i,null),j2(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await id(n,a)}catch(a){await Hl(a)}}async function lj(t,e,n){const i=Ve(t);try{const a=await(function(c,d){const h=Ve(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,d).next((b=>(tt(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);L2(i,e,n),j2(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await id(i,a)}catch(a){await Hl(a)}}function j2(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function L2(t,e,n){const i=Ve(t);let a=i.Vu[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(n?o.reject(n):o.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function W0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||U2(t,i)}))}function U2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(rv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),pv(t))}function Sx(t,e,n){for(const i of n)i instanceof M2?(t.Ru.addReference(i.key,e),cj(t,i)):i instanceof O2?(ge(mv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||U2(t,i.key)):Ne(19791,{wu:i})}function cj(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ge(mv,"New document in limbo: "+n),t.Eu.add(i),pv(t))}function pv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Se(dt.fromString(e)),i=t.fu.next();t.Au.set(i,new ZP(n)),t.du=t.du.insert(n,i),C2(t.remoteStore,new Ws(dr(um(n.path)),i,"TargetPurposeLimboResolution",om.ce))}}async function id(t,e,n){const i=Ve(t),a=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,h)=>{c.push(i.pu(h,e,n).then((f=>{if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){a.push(f);const g=nv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(h,f){const g=Ve(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>oe.forEach(f,(_=>oe.forEach(_.Es,(E=>g.persistence.referenceDelegate.addReference(b,_.targetId,E))).next((()=>oe.forEach(_.ds,(E=>g.persistence.referenceDelegate.removeReference(b,_.targetId,E)))))))))}catch(b){if(!$l(b))throw b;ge(iv,"Failed to update sequence numbers: "+b)}for(const b of f){const _=b.targetId;if(!b.fromCache){const E=g.Ms.get(_),k=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function uj(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){ge(mv,"User change. New user:",e.toKey());const i=await x2(n.localStore,e);n.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new pe(re.CANCELLED,c))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await id(n,i.Ls)}}function dj(t,e){const n=Ve(t),i=n.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let a=Ge();const o=n.Iu.get(e);if(!o)return a;for(const c of o){const d=n.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function z2(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=P2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.Pu.H_=YP.bind(null,e.eventManager),e.Pu.yu=QP.bind(null,e.eventManager),e}function hj(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lj.bind(null,e),e}class Ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gP(this.persistence,new fP,e.initialUser,this.serializer)}Cu(e){return new T2(tv.mi,this.serializer)}Du(e){return new xP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ff.provider={build:()=>new Ff};class fj extends Ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){tt(this.persistence.referenceDelegate instanceof zf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Z6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new T2((i=>zf.mi(i,n)),this.serializer)}}class Z0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ex(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uj.bind(null,this.syncEngine),await $P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KP})()}createDatastore(e){const n=gm(e.databaseInfo.databaseId),i=(function(o){return new RP(o)})(e.databaseInfo);return(function(o,c,d,h){return new DP(o,c,d,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,o,c,d){return new OP(i,a,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ex(this.syncEngine,n,0)),(function(){return vx.v()?new vx:new EP})())}createSyncEngine(e,n){return(function(a,o,c,d,h,f,g){const b=new JP(a,o,c,d,h,f);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ve(n);ge(go,"RemoteStore shutting down."),i.Ea.add(5),await nd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Z0.provider={build:()=>new Z0};class gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ua="FirestoreClient";class mj{constructor(e,n,i,a,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{ge(ua,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ge(ua,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function e0(t,e){t.asyncQueue.verifyOperationInProgress(),ge(ua,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async a=>{i.isEqual(a)||(await x2(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ax(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pj(t);ge(ua,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>_x(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,a)=>_x(e.remoteStore,a))),t._onlineComponents=e}async function pj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(ua,"Using user provided OfflineComponentProvider");try{await e0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await e0(t,new Ff)}}else ge(ua,"Using default OfflineComponentProvider"),await e0(t,new fj(void 0));return t._offlineComponents}async function B2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(ua,"Using user provided OnlineComponentProvider"),await Ax(t,t._uninitializedComponentsProvider._online)):(ge(ua,"Using default OnlineComponentProvider"),await Ax(t,new Z0))),t._onlineComponents}function gj(t){return B2(t).then((e=>e.syncEngine))}async function qf(t){const e=await B2(t),n=e.eventManager;return n.onListen=ej.bind(null,e.syncEngine),n.onUnlisten=ij.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rj.bind(null,e.syncEngine),n}function yj(t,e,n={}){const i=new Qr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new gv({next:_=>{g.Nu(),c.enqueueAndForget((()=>dv(o,b)));const E=_.docs.has(d);!E&&_.fromCache?f.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new fv(um(d.path),g,{includeMetadataChanges:!0,qa:!0});return uv(o,b)})(await qf(t),t.asyncQueue,e,n,i))),i.promise}function vj(t,e,n={}){const i=new Qr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new gv({next:_=>{g.Nu(),c.enqueueAndForget((()=>dv(o,b))),_.fromCache&&h.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new fv(d,g,{includeMetadataChanges:!0,qa:!0});return uv(o,b)})(await qf(t),t.asyncQueue,e,n,i))),i.promise}function F2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Cx=new Map;const q2="firestore.googleapis.com",Rx=!0;class Nx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q2,this.ssl=Rx}else this.host=e.host,this.ssl=e.ssl??Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X6)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F2(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E5;switch(i.type){case"firstParty":return new R5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Cx.get(n);i&&(ge("ComponentProvider","Removing Datastore"),Cx.delete(n),i.terminate())})(this),Promise.resolve()}}function bj(t,e,n,i={}){t=Vn(t,bm);const a=Bl(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;a&&(PS(`https://${d}`),jS("Firestore",!0)),o.host!==q2&&o.host!==d&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:a,emulatorOptions:i};if(!uo(h,c)&&(t._setSettings(h),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=mn.MOCK_USER;else{f=NM(i.mockUserToken,t._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new mn(b)}t._authCredentials=new S5(new MA(f,g))}}class os{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class St{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ju(n,St._jsonSchema))return new St(e,i||null,new Se(dt.fromString(n.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:$t("string",St._jsonSchemaVersion),referencePath:$t("string")};class ia extends os{constructor(e,n,i){super(e,n,um(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Se(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function Zs(t,e,...n){if(t=_t(t),OA("collection","path",e),t instanceof bm){const i=dt.fromString(e,...n);return FT(i),new ia(t,null,i)}{if(!(t instanceof St||t instanceof ia))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return FT(i),new ia(t.firestore,null,i)}}function gn(t,e,...n){if(t=_t(t),arguments.length===1&&(e=qy.newId()),OA("doc","path",e),t instanceof bm){const i=dt.fromString(e,...n);return BT(i),new St(t,null,new Se(i))}{if(!(t instanceof St||t instanceof ia))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return BT(i),new St(t.firestore,t instanceof ia?t.converter:null,new Se(i))}}const Ix="AsyncQueue";class kx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new S2(this,"async_queue_retry"),this._c=()=>{const i=Jg();i&&ge(Ix,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Jg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$l(e))throw e;ge(Ix,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",Dx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=lv.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&Ne(47125,{Pc:Dx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function Mx(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ts extends bm{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new kx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kx(e),this._firestoreClient=void 0,await e}}}function _j(t,e){const n=typeof t=="object"?t:BS(),i=typeof t=="string"?t:Mf,a=My(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=CM("firestore");o&&bj(a,...o)}return a}function _m(t){if(t._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wj(t),t._firestoreClient}function wj(t){const e=t._freezeSettings(),n=(function(a,o,c,d){return new $5(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,F2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(t._componentsProvider))}class hi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hi(dn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hi(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,hi._jsonSchema))return hi.fromBase64String(e.bytes)}}hi._jsonSchemaVersion="firestore/bytes/1.0",hi._jsonSchema={type:$t("string",hi._jsonSchemaVersion),bytes:$t("string")};class wm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yv{constructor(e){this._methodName=e}}class fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:$t("string",fr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};class mr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mr(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:$t("string",mr._jsonSchemaVersion),vectorValues:$t("object")};const Tj=/^__.*__$/;class xj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,n,this.fieldTransforms):new ed(e,this.data,n,this.fieldTransforms)}}class H2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new va(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:t})}}class vv{constructor(e,n,i,a,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($2(this.Ac)&&Tj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ej{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||gm(e)}Cc(e,n,i,a=!1){return new vv({Ac:e,methodName:n,Dc:i,path:cn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(t){const e=t._freezeSettings(),n=gm(t._databaseId);return new Ej(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G2(t,e,n,i,a,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,n,a);bv("Data must be an object, but it was:",c,i);const d=K2(i,c);let h,f;if(o.merge)h=new Yn(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const _=J0(e,b,n);if(!c.contains(_))throw new pe(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Q2(g,_)||g.push(_)}h=new Yn(g),f=c.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=c.fieldTransforms;return new xj(new Mn(d),h,f)}class xm extends yv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xm}}function Sj(t,e,n,i){const a=t.Cc(1,e,n);bv("Data must be an object, but it was:",a,i);const o=[],c=Mn.empty();ya(i,((h,f)=>{const g=_v(e,h,n);f=_t(f);const b=a.yc(g);if(f instanceof xm)o.push(g);else{const _=rd(f,b);_!=null&&(o.push(g),c.set(g,_))}}));const d=new Yn(o);return new H2(c,d,a.fieldTransforms)}function Aj(t,e,n,i,a,o){const c=t.Cc(1,e,n),d=[J0(e,i,n)],h=[a];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(J0(e,o[_])),h.push(o[_+1]);const f=[],g=Mn.empty();for(let _=d.length-1;_>=0;--_)if(!Q2(f,d[_])){const E=d[_];let k=h[_];k=_t(k);const A=c.yc(E);if(k instanceof xm)f.push(E);else{const N=rd(k,A);N!=null&&(f.push(E),g.set(E,N))}}const b=new Yn(f);return new H2(g,b,c.fieldTransforms)}function Cj(t,e,n,i=!1){return rd(n,t.Cc(i?4:3,e))}function rd(t,e){if(Y2(t=_t(t)))return bv("Unsupported field value:",e,t),K2(t,e);if(t instanceof yv)return(function(i,a){if(!$2(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const o=[];let c=0;for(const d of i){let h=rd(d,a.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(t,e)}return(function(i,a){if((i=_t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ze.fromDate(i);return{timestampValue:Uf(a.serializer,o)}}if(i instanceof Ze){const o=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Uf(a.serializer,o)}}if(i instanceof fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hi)return{bytesValue:m2(a.serializer,i._byteString)};if(i instanceof St){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof mr)return(function(c,d){return{mapValue:{fields:{[qA]:{stringValue:HA},[Of]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return Qy(d.serializer,f)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${am(i)}`)})(t,e)}function K2(t,e){const n={};return jA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,((i,a)=>{const o=rd(a,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function Y2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof fr||t instanceof hi||t instanceof St||t instanceof yv||t instanceof mr)}function bv(t,e,n){if(!Y2(n)||!VA(n)){const i=am(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function J0(t,e,n){if((e=_t(e))instanceof wm)return e._internalPath;if(typeof e=="string")return _v(t,e);throw Hf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Rj=new RegExp("[~\\*/\\[\\]]");function _v(t,e,n){if(e.search(Rj)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wm(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hf(t,e,n,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${i}`),c&&(h+=` in document ${a}`),h+=")"),new pe(re.INVALID_ARGUMENT,d+t+h)}function Q2(t,e){return t.some((n=>n.isEqual(e)))}class X2{constructor(e,n,i,a,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Em("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Nj extends X2{data(){return super.data()}}function Em(t,e){return typeof e=="string"?_v(t,e):e instanceof wm?e._internalPath:e._delegate._internalPath}function W2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class Tv extends wv{}function ns(t,e,...n){let i=[];e instanceof wv&&i.push(e),i=i.concat(n),(function(o){const c=o.filter((h=>h instanceof xv)).length,d=o.filter((h=>h instanceof Sm)).length;if(c>1||c>0&&d>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)t=a._apply(t);return t}class Sm extends Tv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Sm(e,n,i)}_apply(e){const n=this._parse(e);return Z2(e._query,n),new os(e.firestore,e.converter,q0(e._query,n))}_parse(e){const n=Tm(e.firestore);return(function(o,c,d,h,f,g,b){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Px(b,g);const k=[];for(const A of b)k.push(Vx(h,o,A));_={arrayValue:{values:k}}}else _=Vx(h,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Px(b,g),_=Cj(d,c,b,g==="in"||g==="not-in");return Ht.create(f,g,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gh(t,e,n){const i=e,a=Em("where",t);return Sm._create(a,i,n)}class xv extends wv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xv(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,o){let c=a;const d=o.getFlattenedFilters();for(const h of d)Z2(c,h),c=q0(c,h)})(e._query,n),new os(e.firestore,e.converter,q0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ev extends Tv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ev(e,n)}_apply(e){const n=(function(a,o,c){if(a.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(o,c)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new Gl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Pu(t,e="asc"){const n=e,i=Em("orderBy",t);return Ev._create(i,n)}class Sv extends Tv{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Sv(e,n,i)}_apply(e){return new os(e.firestore,e.converter,Pf(e._query,this._limit,this._limitType))}}function Ox(t){return Sv._create("limit",t,"F")}function Vx(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZA(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(dt.fromString(n));if(!Se.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return XT(t,new Se(i))}if(n instanceof St)return XT(t,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${am(n)}.`)}function Px(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z2(t,e){const n=(function(a,o){for(const c of a)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ij{convertValue(e,n="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ya(e,((a,o)=>{i[a]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[Of].arrayValue?.values?.map((i=>kt(i.doubleValue)));return new mr(n)}convertGeoPoint(e){return new fr(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=cm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=aa(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=dt.fromString(e);tt(_2(i),9688,{name:e});const a=new ku(i.get(1),i.get(3)),o=new Se(i.popFirst(5));return a.isEqual(n)||Jr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function J2(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends X2{constructor(e,n,i,a,o,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Em("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=so._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:$t("string",so._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class ff extends so{data(e={}){return super.data(e)}}class ao{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new du(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new ff(this._firestore,this._userDataWriter,i.key,i,new du(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const h=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new du(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new du(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,g=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:kj(d.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}function Dj(t){t=Vn(t,St);const e=Vn(t.firestore,ts);return yj(_m(e),t._key).then((n=>eC(e,t,n)))}ao._jsonSchemaVersion="firestore/querySnapshot/1.0",ao._jsonSchema={type:$t("string",ao._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Av extends Ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function jl(t){t=Vn(t,os);const e=Vn(t.firestore,ts),n=_m(e),i=new Av(e);return W2(t._query),vj(n,t._query).then((a=>new ao(e,i,t,a)))}function Al(t,e,n){t=Vn(t,St);const i=Vn(t.firestore,ts),a=J2(t.converter,e,n);return Im(i,[G2(Tm(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,mi.none())])}function Am(t,e,n,...i){t=Vn(t,St);const a=Vn(t.firestore,ts),o=Tm(a);let c;return c=typeof(e=_t(e))=="string"||e instanceof wm?Aj(o,"updateDoc",t._key,e,n,i):Sj(o,"updateDoc",t._key,e),Im(a,[c.toMutation(t._key,mi.exists(!0))])}function Cm(t){return Im(Vn(t.firestore,ts),[new Xy(t._key,mi.none())])}function Rm(t,e){const n=Vn(t.firestore,ts),i=gn(t),a=J2(t.converter,e);return Im(n,[G2(Tm(t.firestore),"addDoc",i._key,a,t.converter!==null,{}).toMutation(i._key,mi.exists(!1))]).then((()=>i))}function Nm(t,...e){t=_t(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Mx(e[i])||(n=e[i++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Mx(e[i])){const h=e[i];e[i]=h.next?.bind(h),e[i+1]=h.error?.bind(h),e[i+2]=h.complete?.bind(h)}let o,c,d;if(t instanceof St)c=Vn(t.firestore,ts),d=um(t._key.path),o={next:h=>{e[i]&&e[i](eC(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=Vn(t,os);c=Vn(h.firestore,ts),d=h._query;const f=new Av(c);o={next:g=>{e[i]&&e[i](new ao(c,f,h,g))},error:e[i+1],complete:e[i+2]},W2(t._query)}return(function(f,g,b,_){const E=new gv(_),k=new fv(g,E,b);return f.asyncQueue.enqueueAndForget((async()=>uv(await qf(f),k))),()=>{E.Nu(),f.asyncQueue.enqueueAndForget((async()=>dv(await qf(f),k)))}})(_m(c),d,a,o)}function Im(t,e){return(function(i,a){const o=new Qr;return i.asyncQueue.enqueueAndForget((async()=>sj(await gj(i),a,o))),o.promise})(_m(t),e)}function eC(t,e,n){const i=n.docs.get(e._key),a=new Av(t);return new so(t,a,e._key,i,new du(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){ql=a})(Fl),Nl(new ho("firestore",((i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),d=new ts(new A5(i.getProvider("auth-internal")),new N5(c,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(f.options.projectId,g)})(c,a),c);return o={useFetchStreams:n,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),ta(jT,LT,e),ta(jT,LT,"esm2020")})();const Mj={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},tC=zS(Mj),Fs=_5(tC),Dt=_j(tC),t0=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Mi=Zf()(Ny(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const a=(await iV(Fs,e,n)).user;if(!a.emailVerified)return await AT(Fs),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${a.email} not verified`),!1;const o=t0(a);return t({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i),console.error("Error code:",i.code),console.error("Error message:",i.message);let a="Login failed. Please try again.";if(i.code)switch(i.code){case"auth/invalid-email":a="Invalid email address.";break;case"auth/user-disabled":a="This account has been disabled.";break;case"auth/user-not-found":a="No account found with this email.";break;case"auth/wrong-password":a="Incorrect password.";break;case"auth/too-many-requests":a="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":a="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":a="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${i.code}`),a="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",i),a="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},register:async(e,n,i)=>{t({isLoading:!0,loginError:null});try{const o=(await nV(Fs,e,n)).user;await sV(o,{displayName:i}),await ST(o);const c=t0(o);return t({currentUser:c,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${c.email}, verification email sent`),!0}catch(a){console.error("Registration error:",a);let o="Registration failed. Please try again.";switch(a.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await AT(Fs),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await tV(Fs,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let i="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:i}),!1}},sendEmailVerification:async()=>{const e=Fs.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await ST(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let i="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":i="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:i}),!1}},resendEmailVerification:async()=>{const e=Mi.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,i=60*1e3;if(n<i){const a=Math.ceil((i-n)/1e3);return t({loginError:`Please wait ${a} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=Fs.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const i=vo.credential(n.email,e);return await eV(n,i),await cV(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(i){console.error("Account deletion error:",i);let a="Failed to delete account. Please try again.";switch(i.code){case"auth/requires-recent-login":a="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":a="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":a="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":a="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:a}),!1}},initializeAuth:()=>Mi.getState().isInitialized?()=>{}:(t({isInitialized:!1}),lV(Fs,i=>{const a=Date.now(),o=Mi.getState(),c=i?t0(i):null,d=o.lastAuthTime&&a-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&d&&!c,g=i?i.emailVerified:!0,b=i&&g||!!f,_=i?c:f?o.currentUser:null;t({currentUser:_,isAuthenticated:b,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:i&&g?a:o.lastAuthTime}),_?console.log(` Auth state: User is signed in (${_.email})`,f?"(offline grace period)":g?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),n0=t=>Zs(Dt,"users",t,"transactions"),lr={subscribeToTransactions:(t,e)=>{const n=ns(n0(t),Pu("date","desc"));return Nm(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=ns(n0(t),Pu("date","desc")),i=(await jl(e)).docs.map(a=>({id:a.id,...a.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(a=>({id:a.id,description:a.description}))),i},addTransaction:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",i);const a=await Rm(n0(e),i);console.log(" addDoc succeeded, docRef:",a),console.log(` Document ID: ${a.id}`),console.log(` Document path: ${a.path}`);const o={id:a.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(a){throw console.error(" addDoc failed:",a),console.error("Error message:",a.message),a}},updateTransaction:async(t,e,n)=>{const i=gn(Dt,"users",t,"transactions",e);return await Am(i,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=gn(Dt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Cm(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},i0=t=>Zs(Dt,"users",t,"envelopes"),Qs={subscribeToEnvelopes:(t,e)=>{const n=ns(i0(t),Pu("orderIndex","asc"));return Nm(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=i0(t),a=(await jl(e)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const d=o.orderIndex??0,h=c.orderIndex??0;return d-h});return console.log(" Fetched envelopes:",a.length),a}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${n}`);try{const a=await Rm(i0(e),i);console.log(" Envelope addDoc succeeded, docRef:",a),console.log(` Document ID: ${a.id}`);const o={id:a.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(a){throw console.error(" Envelope addDoc failed:",a),a}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=gn(Dt,"users",t,"envelopes",e.id);return await Al(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const i=gn(Dt,"users",t,"envelopes",e);return await Am(i,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=gn(Dt,"users",t,"envelopes",e);await Cm(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},Oj=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>{const a=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const c=o.currentBalance&&o.currentBalance>0,d=c?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},h=`temp-${Date.now()}-${Math.random()}`,f={...d,id:h};if(t(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),c){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${h})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:h,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(h);console.log(` Test balance for temp envelope ${h}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=n(),b={...d,id:"",userId:g},_=await Qs.createEnvelope(b);console.log(" Firebase envelope creation successful:",_);const E={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(t(k=>({envelopes:k.envelopes.map(A=>A.id===h?E:A),isLoading:!1,pendingSync:!1})),c){console.log(` Updating transactions from temp envelope ID ${h} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t(A=>({transactions:A.transactions.map(N=>N.envelopeId===h?{...N,envelopeId:_.id}:N)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const k=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${k.length} transactions to sync for envelope ${_.id}:`,k.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of k)try{console.log(" Syncing transaction:",A);const N={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:Ze.fromDate(new Date(A.date))},O=await lr.addTransaction(N);console.log(" Transaction synced:",O);const z=a(O);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${O.id}`),t(P=>({transactions:P.transactions.map(H=>H.id===A.id?z:H)}))}catch(N){console.error(` Failed to sync transaction ${A.id}:`,N)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}}catch(g){console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),t(b=>({envelopes:b.envelopes.filter(_=>_.id!==h),transactions:b.transactions.filter(_=>_.envelopeId!==h),error:g.message,isLoading:!1})))}},addToEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,c,d,h,f)=>{console.log(`Transferring ${d} from ${o} to ${c} with note: ${h}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),b=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===c)?.name||"envelope"}`,amount:d,envelopeId:o,date:g,type:"Expense",transferId:b,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:d,envelopeId:c,date:g,type:"Income",transferId:b,reconciled:!1})},deleteEnvelope:async o=>{const c=e().transactions.filter(d=>d.envelopeId===o);t(d=>({envelopes:d.envelopes.filter(h=>h.id!==o),transactions:d.transactions.filter(h=>h.envelopeId!==o),isLoading:!0}));try{const d=n();await Qs.deleteEnvelope(d,o);for(const h of c)h.id&&!h.id.startsWith("temp-")&&await lr.deleteTransaction(d,h.id);await e().removeEnvelopeFromTemplates(o),t({isLoading:!1})}catch(d){if(console.error("Delete Envelope Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=e().envelopes.find(f=>f.id===o);t(h?f=>({envelopes:[...f.envelopes,h],transactions:[...f.transactions,...c],error:d.message,isLoading:!1}):{error:d.message,isLoading:!1})}}},renameEnvelope:async(o,c)=>{t(d=>({envelopes:d.envelopes.map(h=>h.id===o?{...h,name:c}:h),isLoading:!0}));try{t({isLoading:!1})}catch(d){console.error("Rename Envelope Failed:",d),t({error:d.message,isLoading:!1})}}}},r0=t=>Zs(Dt,"users",t,"distributionTemplates"),ui={subscribeToDistributionTemplates:(t,e)=>{const n=ns(r0(t),Pu("lastUsed","desc"));return Nm(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllDistributionTemplates:async t=>{const e=ns(r0(t),Pu("lastUsed","desc"));return(await jl(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const a=await Rm(r0(e),i);console.log(" Template addDoc succeeded, docRef:",a);const o={id:a.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(a){throw console.error(" Template addDoc failed:",a),a}},saveDistributionTemplate:async(t,e)=>{const n=gn(Dt,"users",t,"distributionTemplates",e.id);return await Al(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const i=gn(Dt,"users",t,"distributionTemplates",e);return await Am(i,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=gn(Dt,"users",t,"distributionTemplates",e);await Cm(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Vj=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({saveTemplate:async(a,o,c)=>{console.log(" saveTemplate called with:",{name:a,distributions:o,note:c});try{const d=n(),h={id:`temp-${Date.now()}`,userId:d,name:a,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=ui.createDistributionTemplate(h),g=new Promise((_,E)=>setTimeout(()=>E(new Error("Firebase timeout - likely offline")),5e3)),b=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",b),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",b),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(d){console.error(" Failed to save template to Firebase, saving locally:",d),console.log(" Error details:",{name:d?.name||"Unknown",message:d?.message||"Unknown",code:d?.code||"Unknown",isNetworkError:i(d)});const h=n(),f={id:`local-${Date.now()}`,userId:h,name:a,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),t(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async a=>{try{const o=n();await ui.deleteDistributionTemplate(o,a),t(c=>({distributionTemplates:c.distributionTemplates.filter(d=>d.id!==a)})),console.log(" Template deleted from Firebase:",a)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const a=e().distributionTemplates,o=e().envelopes,c=new Set(o.map(h=>h.id));let d=0;for(const h of a){const f={...h.distributions},g={};for(const[b,_]of Object.entries(h.distributions))c.has(b)&&(g[b]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${h.name}`);const b=n();await ui.deleteDistributionTemplate(b,h.id),d++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${h.name} - removed orphaned envelope references`);const b=n();await ui.updateDistributionTemplate(b,h.id,{distributions:g}),d++}}d>0?console.log(` Cleaned up ${d} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(a,o)=>{console.log(` Updating template references: ${a}  ${o}`);const c=e().distributionTemplates;let d=0;for(const h of c)if(h.distributions[a]!==void 0){const f={...h.distributions};f[o]=f[a],delete f[a],console.log(` Updating template: ${h.name}`);const g=n();await ui.updateDistributionTemplate(g,h.id,{distributions:f}),d++}d>0&&console.log(` Updated ${d} templates with new envelope reference`)},removeEnvelopeFromTemplates:async a=>{console.log(` Removing envelope ${a} from all templates`);const o=e().distributionTemplates;let c=0,d=0;for(const h of o)if(h.distributions[a]!==void 0){const f={...h.distributions};if(delete f[a],Object.keys(f).length===0){console.log(` Deleting template ${h.name} - no envelopes left`);const g=n();await ui.deleteDistributionTemplate(g,h.id),d++}else{console.log(` Removing envelope from template: ${h.name}`);const g=n();await ui.updateDistributionTemplate(g,h.id,{distributions:f}),c++}}(c>0||d>0)&&console.log(` Updated ${c} templates, deleted ${d} empty templates`)}}),s0=t=>Zs(Dt,"users",t,"appSettings"),qr={subscribeToAppSettings:(t,e)=>{const n=ns(s0(t),Ox(1));return Nm(n,a=>{if(a.empty){e(null);return}const o=a.docs.map(c=>({id:c.id,...c.data()}))[0];e(o)})},getAppSettings:async t=>{const e=ns(s0(t),Ox(1)),n=await jl(e);if(n.empty)return null;const i=n.docs[0];return{id:i.id,...i.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const i=await Rm(s0(e),n);console.log(" Settings addDoc succeeded, docRef:",i);const a={id:i.id,...n,userId:e};return console.log(" Final settings result object:",a),a}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(t,e)=>{const n=gn(Dt,"users",t,"appSettings",e.id);return await Al(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const i=gn(Dt,"users",t,"appSettings",e);return await Am(i,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=gn(Dt,"users",t,"appSettings",e);await Cm(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},nC=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async i=>{const a=e();if(!a.appSettings){try{await nC({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const o=e();if(o.appSettings){const c={...o.appSettings,...i};t({appSettings:c});const d=n();await qr.updateAppSettings(d,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{t(c=>({appSettings:{...c.appSettings,...i}}));const o=n();await qr.updateAppSettings(o,a.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),t(c=>({appSettings:c.appSettings})),o}},initializeAppSettings:async()=>{try{const a={userId:n(),theme:"system"},o=await qr.createAppSettings(a);t({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const a=n();t({appSettings:{id:"local-settings",userId:a,theme:"system"}})}}}),Pj=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,iC=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},rC=t=>({id:t.id,date:t.date?.toDate?.()?t.date.toDate().toISOString():t.date,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:Pj(t.type),transferId:t.transferId??void 0,userId:t.userId}),jj=(t,e)=>({id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:Ze.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:iC(t.type),transferId:t.transferId??null}),Lj=t=>({envelopeId:t.envelopeId,amount:t.amount.toString(),date:Ze.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:iC(t.type),transferId:t.transferId??null}),Uj=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({addTransaction:async a=>{const o=`temp-${Date.now()}-${Math.random()}`,c=n(),d={...a,id:o,userId:c};if(t(h=>({transactions:[...h.transactions,d],isLoading:!0})),a.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${a.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const h=jj(d,c),f=await lr.addTransaction(h);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,f);const g=rC(f);t(b=>({transactions:b.transactions.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1}))}catch(h){console.error("Add Transaction Failed:",h),i(h)?t({isLoading:!1,pendingSync:!0,error:null}):t(f=>({transactions:f.transactions.filter(g=>g.id!==o),error:h.message,isLoading:!1}))}},deleteTransaction:async a=>{const o=e().transactions.find(d=>d.id===a);if(!o)return;const c=[a];if(o.transferId){const d=e().transactions.find(h=>h.transferId===o.transferId&&h.id!==a);d&&d.id&&c.push(d.id)}t(d=>({transactions:d.transactions.filter(h=>h.id&&!c.includes(h.id)),isLoading:!0}));try{const d=n(),h=c.filter(f=>!f.startsWith("temp-"));for(const f of h)console.log(` About to delete transaction ID: ${f}`),await lr.deleteTransaction(d,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(d){if(console.error("Delete Transaction Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=c.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);t(f=>({transactions:[...f.transactions,...h],error:d.message,isLoading:!1}))}}},updateTransaction:async a=>{console.log(" updateTransaction called:",a),t(o=>({transactions:o.transactions.map(c=>c.id===a.id?a:c),isLoading:!0}));try{const o=n(),c=lr.updateTransaction(o,a.id,Lj(a)),d=new Promise((h,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([c,d]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:o.message,isLoading:!1})}},restoreTransaction:async a=>{t(o=>({transactions:[...o.transactions,a],isLoading:!0}));try{t({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),t({error:o.message,isLoading:!1})}}}),zj=({set:t,get:e,getCurrentUserId:n,isNetworkError:i,loadFallbackData:a,checkOnlineStatus:o,clearUserData:c})=>{const d=async()=>{const A=e(),N=n();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",N),t({isLoading:!0,error:null});try{let O,z,P,H;[O,z,P,H]=await Promise.all([Qs.getAllEnvelopes(N).catch(S=>(console.error(" Failed to fetch envelopes:",S),[])),lr.getAllTransactions(N).catch(S=>(console.error(" Failed to fetch transactions:",S),[])),ui.getAllDistributionTemplates(N).catch(S=>(console.error(" Failed to fetch templates:",S),[])),qr.getAppSettings(N).catch(S=>(console.error(" Failed to fetch settings:",S),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:O?.length||0,transactions:z?.length||0,templates:P?.length||0,settings:H?"found":"null"}),e().markOnlineFromFirebaseSuccess();const te=(O?.length||0)>0||(z?.length||0)>0||(P?.length||0)>0;let ee=null;te||(console.log(" No data from Firebase, loading fallback data..."),ee=await a(),ee&&(console.log(" Using fallback data for initialization"),O=ee.envelopes||[],z=ee.transactions||[],P=ee.distributionTemplates||[],H=ee.appSettings||null)),t(S=>{const R=le=>le.map(L=>({...L,date:L.date&&typeof L.date=="object"&&L.date.toDate?L.date.toDate().toISOString():L.date,type:L.type==="income"?"Income":L.type==="expense"?"Expense":L.type==="transfer"?"Transfer":L.type,amount:typeof L.amount=="string"?parseFloat(L.amount):L.amount})),M=le=>({id:le.id,name:le.name,currentBalance:le.currentBalance||0,lastUpdated:le.lastUpdated,isActive:le.isActive??!0,orderIndex:le.orderIndex??0}),j=O.filter(le=>!("orderIndex"in le));j.length>0&&(console.log(` Migrating ${j.length} envelopes to add orderIndex...`),j.forEach((le,L)=>{const G=L,ue=n();Qs.saveEnvelope(ue,{...le,orderIndex:G}).then(()=>console.log(` Migrated envelope ${le.name} with orderIndex ${G}`)).catch(de=>console.warn(`Failed to migrate envelope ${le.id}:`,de))}));const D=O.map(M),F=new Set([...S.envelopes.map(le=>le.id),...O.map(le=>le.id)]),U=S.envelopes.filter(le=>le.id&&!O.some(L=>L.id===le.id)&&!le.id.startsWith("temp-")),Me=S.transactions.filter(le=>le.id&&!z.some(L=>L.id===le.id)&&(!le.id.startsWith("temp-")||F.has(le.envelopeId)));let he,$=[];navigator.onLine?(he=P,console.log(` Online mode: Using Firebase templates only (${he.length} templates)`)):($=S.distributionTemplates.filter(le=>le.id&&!P.some(L=>L.id===le.id)),he=P.concat($),console.log(` Offline mode: Merged ${P.length} Firebase + ${$.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",S.envelopes.map(le=>({id:le.id,name:le.name}))),console.log("  Firebase envelopes:",O.map(le=>({id:le.id,name:le.name}))),console.log("  Store transactions:",S.transactions.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Firebase transactions:",z.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Store templates:",S.distributionTemplates.map(le=>({id:le.id,name:le.name}))),console.log("  Firebase templates:",P.map(le=>({id:le.id,name:le.name}))),console.log("  Local-only envelopes:",U.map(le=>({id:le.id,name:le.name}))),console.log("  Local-only transactions:",Me.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Local-only templates:",$.map(le=>({id:le.id,name:le.name}))),console.log("  Total merged templates:",he.length,he.map(le=>({id:le.id,name:le.name})));const ae=D.concat(U),me=R(z).concat(Me);let _e=H;if(H&&"isDarkMode"in H&&!("theme"in H)){const le=H;if(_e={...le,theme:le.isDarkMode?"dark":"light"},delete _e.isDarkMode,_e&&_e.id){const L=n();qr.updateAppSettings(L,_e.id,{theme:_e.theme}).catch(G=>console.warn("Failed to migrate app settings:",G))}}return{envelopes:ae,transactions:me,distributionTemplates:he,appSettings:_e,isLoading:!1,pendingSync:!1}})}catch(O){console.error("Sync Failed:",O),i(O)?t({isLoading:!1,pendingSync:!0}):t({error:O.message,isLoading:!1})}},h=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(N){console.error("Firebase reset during sync failed:",N)}return}t({pendingSync:!0});try{await e().fetchData()}catch(N){console.error("Manual sync failed:",N)}},f=async()=>{const A=await o();t({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},b=()=>{c()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const N=n();console.log(` Importing data for user: ${N}`),console.log(" Clearing existing Firebase data before import..."),await E(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const O=A.envelopes.map(S=>({id:S.id||`imported-${Date.now()}-${Math.random()}`,name:S.name,currentBalance:S.currentBalance||S.budget||0,lastUpdated:new Date().toISOString(),isActive:S.isActive??!0,orderIndex:S.orderIndex??0,userId:N})),z=A.transactions.map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:N,date:S.date,amount:typeof S.amount=="number"?S.amount:parseFloat(S.amount)||0,type:S.type,reconciled:S.reconciled??!1})),P=(A.distributionTemplates||[]).map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:N})),H=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${N}`,userId:N}:null;console.log(` Importing: ${O.length} envelopes, ${z.length} transactions, ${P.length} templates`),t({envelopes:O,transactions:z,distributionTemplates:P,appSettings:H,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const S of O)try{await Qs.saveEnvelope(N,S),console.log(` Synced envelope: ${S.name}`)}catch(R){console.error(` Failed to sync envelope ${S.name}:`,R)}for(const S of z)try{const R={...S,amount:S.amount.toString(),type:S.type.toLowerCase(),date:Ze.fromDate(new Date(S.date))};await lr.addTransaction(R),console.log(` Synced transaction: ${S.description}`)}catch(R){console.error(` Failed to sync transaction ${S.description}:`,R)}for(const S of P)try{await ui.createDistributionTemplate(S),console.log(` Synced template: ${S.name}`)}catch(R){console.error(` Failed to sync template ${S.name}:`,R)}if(H)try{await qr.createAppSettings(H),console.log(" Synced app settings")}catch(S){console.error(" Failed to sync app settings:",S)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(S){console.error(" Error syncing to Firebase:",S),t({pendingSync:!0})}const te=P.length,ee=H?"Settings imported.":"";return{success:!0,message:`Imported and synced ${O.length} envelopes, ${z.length} transactions${te>0?`, ${te} templates`:""} to Firebase.${ee?` ${ee}`:""}`}}catch(N){return console.error("Import failed:",N),{success:!1,message:"Failed to import data. Check file format."}}},E=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const A=n();console.log(" Querying Firebase for all data to delete...");const[N,O,z,P]=await Promise.all([Qs.getAllEnvelopes(A).catch(S=>(console.error(" Failed to fetch envelopes for reset:",S),[])),lr.getAllTransactions(A).catch(S=>(console.error(" Failed to fetch transactions for reset:",S),[])),ui.getAllDistributionTemplates(A).catch(S=>(console.error(" Failed to fetch templates for reset:",S),[])),qr.getAppSettings(A).catch(S=>(console.error(" Failed to fetch settings for reset:",S),null))]);console.log(` Found in Firebase: ${N.length} envelopes, ${O.length} transactions, ${z.length} templates`);let H=0;for(const S of N)if(S.id)try{await Qs.deleteEnvelope(A,S.id),H++,console.log(` Deleted envelope: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete envelope ${S.id}:`,R)}let te=0;for(const S of O)if(S.id)try{await lr.deleteTransaction(A,S.id),te++,console.log(` Deleted transaction: ${S.id}`)}catch(R){console.error(` Failed to delete transaction ${S.id}:`,R)}let ee=0;for(const S of z)if(S.id)try{await ui.deleteDistributionTemplate(A,S.id),ee++,console.log(` Deleted template: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete template ${S.id}:`,R)}if(P?.id)try{await qr.deleteAppSettings(A,P.id),console.log(" Deleted app settings")}catch(S){console.error(" Failed to delete app settings:",S)}console.log(` Firebase reset complete: Deleted ${H} envelopes, ${te} transactions, ${ee} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),t({isLoading:!1,pendingSync:!0}),A}};return{fetchData:d,syncData:h,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:b,importData:_,performFirebaseReset:E,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(N){console.error(" Firebase reset failed, will retry on next sync:",N),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},Bj=t=>rC(t),Fj=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0}),qj=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),jx=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=Qs.subscribeToEnvelopes(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Envelopes updated",c.length);const h=c.map(Fj);t.setState({envelopes:h})}}),i=lr.subscribeToTransactions(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Transactions updated",c.length);const h=c.map(Bj);t.setState({transactions:h})}}),a=ui.subscribeToDistributionTemplates(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Templates updated from Firebase",c.length),console.log(" Firebase templates:",c.map(f=>({id:f.id,name:f.name})));const h=c.map(qj);console.log(" Setting store templates to:",h.map(f=>({id:f.id,name:f.name}))),t.setState({distributionTemplates:h})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=qr.subscribeToAppSettings(e,c=>{const d=t.getState();d.isOnline&&!d.pendingSync&&!d.resetPending&&(console.log(" Real-time sync: Settings updated",c?"found":"null"),t.setState({appSettings:c}))});window.__firebaseUnsubscribers={envelopes:n,transactions:i,templates:a,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},Hj=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const d=e.getState();d.isOnline&&(d.pendingSync||d.resetPending)&&(console.log(" Auto-syncing pending operations..."),d.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let a=null;const o=()=>{a&&clearInterval(a),a=setInterval(async()=>{const d=e.getState();if(!d.isOnline&&!d.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(d.pendingSync||d.resetPending)&&e.getState().syncData(),a&&(clearInterval(a),a=null)):e.setState({testingConnectivity:!1})}catch(h){console.log(" Periodic retry failed:",h),e.setState({testingConnectivity:!1})}}else d.isOnline&&a&&(clearInterval(a),a=null)},3e4)};o(),e.subscribe(d=>{!d.isOnline&&!a&&(console.log(" Starting periodic connectivity retry"),o())});const c=n.getState();c.isAuthenticated&&c.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),jx(e,i())),n.subscribe(d=>{if(d.isAuthenticated&&d.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),jx(e,i());else if(!d.isAuthenticated&&!d.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.envelopes&&h.envelopes(),h.transactions&&h.transactions(),h.templates&&h.templates(),h.settings&&h.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},$j=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},ml=()=>{const{currentUser:t}=Mi.getState();if(!t)throw new Error("No authenticated user found");return t.id},Gj=()=>{console.log(" Clearing user data on logout"),jn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},Kj=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,i={})=>{try{const a=new AbortController,o=setTimeout(()=>a.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:a.signal,...i}),clearTimeout(o),!0}catch(a){return console.log(` Connectivity test failed for ${n}:`,a instanceof Error?a.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),i=n.filter(o=>o.status==="fulfilled"&&o.value===!0).length,a=n.length;return i>0?(console.log(` Connectivity confirmed (${i}/${a} tests passed)`),!0):(console.log(` All connectivity tests failed (${a} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},Kh=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",i=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&n==="undefined")},jn=Zf()(Ny((t,e)=>{const n=Oj({set:t,get:e,getCurrentUserId:ml,isNetworkError:Kh}),i=Vj({set:t,get:e,getCurrentUserId:ml,isNetworkError:Kh}),a=nC({set:t,get:e,getCurrentUserId:ml}),o=Uj({set:t,get:e,getCurrentUserId:ml,isNetworkError:Kh}),c=zj({set:t,get:e,getCurrentUserId:ml,isNetworkError:Kh,loadFallbackData:$j,checkOnlineStatus:Kj,clearUserData:Gj});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addTransaction:o.addTransaction,createEnvelope:n.createEnvelope,addToEnvelope:n.addToEnvelope,spendFromEnvelope:n.spendFromEnvelope,transferFunds:n.transferFunds,deleteEnvelope:n.deleteEnvelope,deleteTransaction:o.deleteTransaction,updateTransaction:o.updateTransaction,restoreTransaction:o.restoreTransaction,renameEnvelope:n.renameEnvelope,saveTemplate:i.saveTemplate,deleteTemplate:i.deleteTemplate,updateAppSettings:a.updateAppSettings,initializeAppSettings:a.initializeAppSettings,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateTemplateEnvelopeReferences:i.updateTemplateEnvelopeReferences,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,fetchData:c.fetchData,syncData:c.syncData,updateOnlineStatus:c.updateOnlineStatus,markOnlineFromFirebaseSuccess:c.markOnlineFromFirebaseSuccess,handleUserLogout:c.handleUserLogout,importData:c.importData,performFirebaseReset:c.performFirebaseReset,resetData:c.resetData,getEnvelopeBalance:d=>{const h=e();if(!h.envelopes.find(N=>N.id===d))return console.log(` getEnvelopeBalance: Envelope ${d} not found`),new Fr(0);const g=h.transactions.filter(N=>N.envelopeId===d),b=g.filter(N=>N.type==="Expense"),_=g.filter(N=>N.type==="Income"),E=b.reduce((N,O)=>N.plus(new Fr(O.amount||0)),new Fr(0));return _.reduce((N,O)=>N.plus(new Fr(O.amount||0)),new Fr(0)).minus(E)}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));Hj({useEnvelopeStore:jn,useAuthStore:Mi,getCurrentUserId:ml});const Yj=({isOpen:t,onClose:e})=>{const{envelopes:n,addToEnvelope:i,distributionTemplates:a,saveTemplate:o,deleteTemplate:c,getEnvelopeBalance:d}=jn(),[h,f]=V.useState(""),[g,b]=V.useState({}),[_,E]=V.useState(""),[k,A]=V.useState(!1),[N,O]=V.useState(!1),[z,P]=V.useState(""),H=V.useMemo(()=>n.sort((he,$)=>he.name.localeCompare($.name)),[n]),te=parseFloat(h)||0,ee=V.useMemo(()=>Object.values(g).reduce((he,$)=>he+$,0),[g]),S=te-ee,R=Math.abs(S)<.01,M=te>0&&R,j=ee>0&&R,D=(he,$)=>{const ae=parseFloat($);b(me=>({...me,[he]:isNaN(ae)?0:ae}))},F=()=>{M&&(Object.entries(g).forEach(([he,$])=>{$>0&&i(he,$,_||"Deposit",new Date)}),f(""),b({}),E(""),e())},U=()=>{z.trim()&&(o(z,g,_),A(!1),P(""))},Me=he=>{const $=Object.fromEntries(Object.entries(he.distributions).filter(([me])=>H.some(_e=>_e.id===me)));b($);const ae=Object.values($).reduce((me,_e)=>me+_e,0);f(ae.toFixed(2)),E(he.note||""),O(!1)};return t?v.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[v.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),v.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),v.jsx("button",{onClick:F,disabled:!M,className:`font-bold text-base ${M?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[v.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",value:h,onChange:he=>f(he.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),v.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),v.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",ee.toFixed(2)]})]}),v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),v.jsxs("span",{className:`text-lg ${S===0?"text-green-600 dark:text-green-400":S<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",S.toFixed(2)]})]})]}),!R&&te>0&&v.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:S>0?`You still have $${S.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(S).toFixed(2)}`}),v.jsx("div",{className:"pt-2",children:j?v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("button",{onClick:()=>O(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[v.jsx(bf,{size:16}),"Load Template"]}),v.jsxs("button",{onClick:()=>A(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[v.jsx(YD,{size:16}),"Save Template"]})]}):v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:()=>O(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[v.jsx(bf,{size:16}),"Load Template"]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),v.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:he=>E(he.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),v.jsx("div",{className:"p-4 space-y-3",children:H.filter(he=>he.id).map(he=>{const $=he.id,ae=g[$]||0,me=ee>0?Math.round(ae/ee*100):0;return v.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:he.name}),ae>0&&v.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[me,"%"]})]}),v.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",d(he.id).toNumber().toFixed(2)]})]}),v.jsxs("div",{className:"w-32 relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",value:g[$]===0?"":g[$],onChange:_e=>D($,_e.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},$)})})]}),k&&v.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),v.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:z,onChange:he=>P(he.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),v.jsx("button",{onClick:U,disabled:!z.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),N&&v.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[v.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),v.jsx("button",{onClick:()=>O(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:v.jsx(Gu,{size:20})})]}),v.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:a.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):a.map(he=>v.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[v.jsxs("button",{onClick:()=>Me(he),className:"flex-1 text-left",children:[v.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:he.name}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(he.distributions).reduce(($,ae)=>$+ae,0).toFixed(2),he.note&&v.jsxs("span",{className:"ml-2 opacity-75",children:[" ",he.note]})]})]}),v.jsx("button",{onClick:$=>{$.stopPropagation(),confirm("Delete this template?")&&c(he.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:v.jsx(ro,{size:18})})]},he.id))})]})})]}):null},sC=()=>{const[t,e]=V.useState(!1),n=V.useRef(null),{currentUser:i,logout:a}=Mi(),{handleUserLogout:o}=jn(),c=ma();V.useEffect(()=>{const f=g=>{n.current&&!n.current.contains(g.target)&&e(!1)};if(t)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const d=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),a(),c("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const h=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return v.jsxs("div",{className:"relative",ref:n,children:[v.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:h}),v.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx(mD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&v.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[v.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:h}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),v.jsxs("div",{className:"py-1",children:[v.jsxs("button",{onClick:()=>{c("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx(ZD,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),v.jsxs("button",{onClick:d,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[v.jsx(HD,{size:18}),"Log Out"]})]})]})]})},Qj=()=>{const{envelopes:t,transactions:e,fetchData:n,isOnline:i,pendingSync:a,syncData:o,isLoading:c,getEnvelopeBalance:d,testingConnectivity:h}=jn(),[f,g]=V.useState(!1),b=ma();V.useEffect(()=>{t.length===0&&n()},[]);const _=[...t].sort((k,A)=>{const N=k.orderIndex??0,O=A.orderIndex??0;return N!==O?N-O:k.name.localeCompare(A.name)});console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",t.length),console.log(" Current transactions:",e.length);const E=t.reduce((k,A)=>{const N=d(A.id);return console.log(` Envelope ${A.name} (${A.id}): $${N.toNumber().toFixed(2)}`),k+N.toNumber()},0);return console.log(" Total balance:",E),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center gap-2",children:i?c?v.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[v.jsx(co,{size:16,className:"animate-spin"}),v.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):a?v.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[v.jsx(co,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[v.jsx(b4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[v.jsx(y4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:h?"Testing Connection...":c?"Offline (Saving...)":"Offline"})]})}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>b("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:v.jsx(BD,{size:22})}),v.jsx("button",{onClick:()=>b("/monthly-budget-demo"),className:"text-purple-500 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",title:"Monthly Budget Demo",children:v.jsx(Ww,{size:22})}),v.jsx(sC,{})]})]}),v.jsx("div",{className:"mt-4",children:v.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Personal Budget"})})]}),v.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),v.jsxs("span",{className:`text-2xl font-bold ${E>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[E<0?"-":"","$",Math.abs(E).toFixed(2)]})]}),v.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[v.jsx(Ww,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),v.jsx("section",{children:_.length===0?v.jsxs("div",{className:"text-center py-10 space-y-3",children:[v.jsx(p4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),v.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),v.jsx("button",{onClick:()=>b("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex justify-between items-end px-1",children:[v.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),v.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>b("/add-envelope"),children:"+ New Envelope"})]}),_.map(k=>v.jsxs("div",{onClick:()=>b(`/envelope/${k.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[v.jsx("div",{className:"flex flex-col",children:v.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:k.name})}),v.jsxs("span",{className:`font-bold ${d(k.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[d(k.id).toNumber()<0?"-":"","$",Math.abs(d(k.id).toNumber()).toFixed(2)]})]},k.id))]})})]}),v.jsx("button",{onClick:()=>b("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:v.jsx(ef,{size:28})}),v.jsx(Yj,{isOpen:f,onClose:()=>g(!1)})]})},Cv=Zf((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,i="neutral",a)=>{t({message:n,type:i,isVisible:!0,undoAction:a}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{t({isVisible:!1})}})),aC=({isVisible:t,onClose:e,mode:n,currentEnvelope:i,initialTransaction:a})=>{const{addToEnvelope:o,spendFromEnvelope:c,updateTransaction:d,deleteTransaction:h}=jn(),[f,g]=V.useState(""),[b,_]=V.useState(""),[E,k]=V.useState(new Date().toISOString().split("T")[0]);if(V.useEffect(()=>{if(!t)return;const P=window.setTimeout(()=>{if(n==="edit"&&a){g(a.amount.toString()),_(a.description);try{const H=new Date(a.date);isNaN(H.getTime())?(console.warn("Invalid date in transaction:",a.date),k(new Date().toISOString().split("T")[0])):k(H.toISOString().split("T")[0])}catch(H){console.error("Error parsing transaction date:",H),k(new Date().toISOString().split("T")[0])}}else g(""),_(""),k(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(P)},[t,n,a]),!t)return null;const A=P=>{P.preventDefault();const H=parseFloat(f);isNaN(H)||H<=0||(n==="add"?o(i.id,H,b,new Date(E)):n==="spend"?c(i.id,H,b,new Date(E)):n==="edit"&&a&&d({...a,amount:H,description:b,date:new Date(E).toISOString()}),e())},N=()=>{!a||!a.id||window.confirm("Are you sure you want to delete this transaction?")&&(h(a.id),e())},O=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",z=n==="add"?"text-green-500":"text-red-500";return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:O}),v.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),v.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:P=>{const H=P.target.value;(H===""||!isNaN(parseFloat(H))&&parseFloat(H)>=0)&&g(H)},onKeyDown:P=>{(P.key==="e"||P.key==="E"||P.key==="+"||P.key==="-")&&P.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:b,onChange:P=>_(P.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:E,onChange:P=>{console.log("Date changed to:",P.target.value),k(P.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&v.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:v.jsxs("button",{type:"button",onClick:N,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[v.jsx(yS,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},Xj=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:i,transferFunds:a}=jn(),[o,c]=V.useState(""),[d,h]=V.useState(""),[f,g]=V.useState(""),[b,_]=V.useState(new Date().toISOString().split("T")[0]),E=i.filter(N=>N.id!==n.id);if(V.useEffect(()=>{if(!t)return;const N=window.setTimeout(()=>{c(""),h(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(N)},[t]),!t)return null;const k=N=>{N.preventDefault();const O=parseFloat(d);isNaN(O)||O<=0||!o||(a(n.id,o,O,f,new Date(b)),e())},A=i.find(N=>N.id===o);return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),v.jsx("button",{onClick:k,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||!o,children:"Transfer"})]}),v.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),v.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),v.jsxs("select",{value:o,onChange:N=>c(N.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),E.map(N=>v.jsx("option",{value:N.id,className:"bg-white dark:bg-zinc-900",children:N.name},N.id))]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:N=>h(N.target.value),onKeyDown:N=>{(N.key==="e"||N.key==="E"||N.key==="+"||N.key==="-")&&N.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),v.jsx("input",{type:"text",value:f,onChange:N=>g(N.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:b,onChange:N=>_(N.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&d&&parseFloat(d)>0&&v.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(d).toFixed(2)]})," from"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},Wj=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},Zj=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},oC=({transaction:t,envelopeName:e,onReconcile:n,onEdit:i})=>{if(!t)return null;const a=t.type==="Income",o=t.type==="Expense";let c="text-gray-900 dark:text-white";return a&&(c="text-green-600 dark:text-green-400"),o&&(c="text-red-600 dark:text-red-400"),v.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[v.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.description||"No Description"}),t.reconciled&&v.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[v.jsx("span",{children:Wj(t.date)}),e&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${c}`,children:[o?"-":a?"+":"",Zj(t.amount)]}),n?v.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?v.jsx(Qw,{className:"text-green-500",size:20}):v.jsx(Xw,{className:"text-gray-400",size:20})}):v.jsx("span",{children:t.reconciled?v.jsx(Qw,{className:"text-green-500",size:20}):v.jsx(Xw,{className:"text-gray-400",size:20})})]})]})},Rv=V.createContext({});function km(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Nv=typeof window<"u",Iv=Nv?V.useLayoutEffect:V.useEffect,Dm=V.createContext(null);function kv(t,e){t.indexOf(e)===-1&&t.push(e)}function Dv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const is=(t,e,n)=>n>e?e:n<t?t:n;let Mv=()=>{};const rs={},lC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function cC(t){return typeof t=="object"&&t!==null}const uC=t=>/^0[^.\s]+$/u.test(t);function Ov(t){let e;return()=>(e===void 0&&(e=t()),e)}const pi=t=>t,Jj=(t,e)=>n=>e(t(n)),sd=(...t)=>t.reduce(Jj),ju=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class Vv{constructor(){this.subscriptions=[]}add(e){return kv(this.subscriptions,e),()=>Dv(this.subscriptions,e)}notify(e,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,i);else for(let o=0;o<a;o++){const c=this.subscriptions[o];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pr=t=>t*1e3,fi=t=>t/1e3;function dC(t,e){return e?t*(1e3/e):0}const hC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,e9=1e-7,t9=12;function n9(t,e,n,i,a){let o,c,d=0;do c=e+(n-e)/2,o=hC(c,i,a)-t,o>0?n=c:e=c;while(Math.abs(o)>e9&&++d<t9);return c}function ad(t,e,n,i){if(t===e&&n===i)return pi;const a=o=>n9(o,0,1,t,n);return o=>o===0||o===1?o:hC(a(o),e,i)}const fC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mC=t=>e=>1-t(1-e),pC=ad(.33,1.53,.69,.99),Pv=mC(pC),gC=fC(Pv),yC=t=>(t*=2)<1?.5*Pv(t):.5*(2-Math.pow(2,-10*(t-1))),jv=t=>1-Math.sin(Math.acos(t)),vC=mC(jv),bC=fC(jv),i9=ad(.42,0,1,1),r9=ad(0,0,.58,1),_C=ad(.42,0,.58,1),s9=t=>Array.isArray(t)&&typeof t[0]!="number",wC=t=>Array.isArray(t)&&typeof t[0]=="number",a9={linear:pi,easeIn:i9,easeInOut:_C,easeOut:r9,circIn:jv,circInOut:bC,circOut:vC,backIn:Pv,backInOut:gC,backOut:pC,anticipate:yC},o9=t=>typeof t=="string",Lx=t=>{if(wC(t)){Mv(t.length===4);const[e,n,i,a]=t;return ad(e,n,i,a)}else if(o9(t))return a9[t];return t},Yh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function l9(t,e){let n=new Set,i=new Set,a=!1,o=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(g){c.has(g)&&(f.schedule(g),t()),g(d)}const f={schedule:(g,b=!1,_=!1)=>{const k=_&&a?n:i;return b&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{i.delete(g),c.delete(g)},process:g=>{if(d=g,a){o=!0;return}a=!0,[n,i]=[i,n],n.forEach(h),n.clear(),a=!1,o&&(o=!1,f.process(g))}};return f}const c9=40;function TC(t,e){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Yh.reduce((P,H)=>(P[H]=l9(o),P),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:g,update:b,preRender:_,render:E,postRender:k}=c,A=()=>{const P=rs.useManualTiming?a.timestamp:performance.now();n=!1,rs.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(P-a.timestamp,c9),1)),a.timestamp=P,a.isProcessing=!0,d.process(a),h.process(a),f.process(a),g.process(a),b.process(a),_.process(a),E.process(a),k.process(a),a.isProcessing=!1,n&&e&&(i=!1,t(A))},N=()=>{n=!0,i=!0,a.isProcessing||t(A)};return{schedule:Yh.reduce((P,H)=>{const te=c[H];return P[H]=(ee,S=!1,R=!1)=>(n||N(),te.schedule(ee,S,R)),P},{}),cancel:P=>{for(let H=0;H<Yh.length;H++)c[Yh[H]].cancel(P)},state:a,steps:c}}const{schedule:yt,cancel:da,state:on,steps:a0}=TC(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0);let mf;function u9(){mf=void 0}const On={now:()=>(mf===void 0&&On.set(on.isProcessing||rs.useManualTiming?on.timestamp:performance.now()),mf),set:t=>{mf=t,queueMicrotask(u9)}},xC=t=>e=>typeof e=="string"&&e.startsWith(t),Lv=xC("--"),d9=xC("var(--"),Uv=t=>d9(t)?h9.test(t.split("/*")[0].trim()):!1,h9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lu={...Yl,transform:t=>is(0,1,t)},Qh={...Yl,default:1},bu=t=>Math.round(t*1e5)/1e5,zv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function f9(t){return t==null}const m9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bv=(t,e)=>n=>!!(typeof n=="string"&&m9.test(n)&&n.startsWith(t)||e&&!f9(n)&&Object.prototype.hasOwnProperty.call(n,e)),EC=(t,e,n)=>i=>{if(typeof i!="string")return i;const[a,o,c,d]=i.match(zv);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},p9=t=>is(0,255,t),o0={...Yl,transform:t=>Math.round(p9(t))},no={test:Bv("rgb","red"),parse:EC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+o0.transform(t)+", "+o0.transform(e)+", "+o0.transform(n)+", "+bu(Lu.transform(i))+")"};function g9(t){let e="",n="",i="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const ey={test:Bv("#"),parse:g9,transform:no.transform},od=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qs=od("deg"),gr=od("%"),Ie=od("px"),y9=od("vh"),v9=od("vw"),Ux={...gr,parse:t=>gr.parse(t)/100,transform:t=>gr.transform(t*100)},yl={test:Bv("hsl","hue"),parse:EC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+gr.transform(bu(e))+", "+gr.transform(bu(n))+", "+bu(Lu.transform(i))+")"},qt={test:t=>no.test(t)||ey.test(t)||yl.test(t),parse:t=>no.test(t)?no.parse(t):yl.test(t)?yl.parse(t):ey.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?no.transform(t):yl.transform(t),getAnimatableNone:t=>{const e=qt.parse(t);return e.alpha=0,qt.transform(e)}},b9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _9(t){return isNaN(t)&&typeof t=="string"&&(t.match(zv)?.length||0)+(t.match(b9)?.length||0)>0}const SC="number",AC="color",w9="var",T9="var(",zx="${}",x9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},a=[];let o=0;const d=e.replace(x9,h=>(qt.test(h)?(i.color.push(o),a.push(AC),n.push(qt.parse(h))):h.startsWith(T9)?(i.var.push(o),a.push(w9),n.push(h)):(i.number.push(o),a.push(SC),n.push(parseFloat(h))),++o,zx)).split(zx);return{values:n,split:d,indexes:i,types:a}}function CC(t){return Uu(t).values}function RC(t){const{split:e,types:n}=Uu(t),i=e.length;return a=>{let o="";for(let c=0;c<i;c++)if(o+=e[c],a[c]!==void 0){const d=n[c];d===SC?o+=bu(a[c]):d===AC?o+=qt.transform(a[c]):o+=a[c]}return o}}const E9=t=>typeof t=="number"?0:qt.test(t)?qt.getAnimatableNone(t):t;function S9(t){const e=CC(t);return RC(t)(e.map(E9))}const ha={test:_9,parse:CC,createTransformer:RC,getAnimatableNone:S9};function l0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function A9({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let a=0,o=0,c=0;if(!e)a=o=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;a=l0(h,d,t+1/3),o=l0(h,d,t),c=l0(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function $f(t,e){return n=>n>0?e:t}const vt=(t,e,n)=>t+(e-t)*n,c0=(t,e,n)=>{const i=t*t,a=n*(e*e-i)+i;return a<0?0:Math.sqrt(a)},C9=[ey,no,yl],R9=t=>C9.find(e=>e.test(t));function Bx(t){const e=R9(t);if(!e)return!1;let n=e.parse(t);return e===yl&&(n=A9(n)),n}const Fx=(t,e)=>{const n=Bx(t),i=Bx(e);if(!n||!i)return $f(t,e);const a={...n};return o=>(a.red=c0(n.red,i.red,o),a.green=c0(n.green,i.green,o),a.blue=c0(n.blue,i.blue,o),a.alpha=vt(n.alpha,i.alpha,o),no.transform(a))},ty=new Set(["none","hidden"]);function N9(t,e){return ty.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function I9(t,e){return n=>vt(t,e,n)}function Fv(t){return typeof t=="number"?I9:typeof t=="string"?Uv(t)?$f:qt.test(t)?Fx:M9:Array.isArray(t)?NC:typeof t=="object"?qt.test(t)?Fx:k9:$f}function NC(t,e){const n=[...t],i=n.length,a=t.map((o,c)=>Fv(o)(o,e[c]));return o=>{for(let c=0;c<i;c++)n[c]=a[c](o);return n}}function k9(t,e){const n={...t,...e},i={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(i[a]=Fv(t[a])(t[a],e[a]));return a=>{for(const o in i)n[o]=i[o](a);return n}}function D9(t,e){const n=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],d=t.values[c]??0;n[a]=d,i[o]++}return n}const M9=(t,e)=>{const n=ha.createTransformer(e),i=Uu(t),a=Uu(e);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?ty.has(t)&&!a.values.length||ty.has(e)&&!i.values.length?N9(t,e):sd(NC(D9(i,a),a.values),n):$f(t,e)};function IC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?vt(t,e,n):Fv(t)(t,e)}const O9=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>yt.update(e,n),stop:()=>da(e),now:()=>on.isProcessing?on.timestamp:On.now()}},kC=(t,e,n=10)=>{let i="";const a=Math.max(Math.round(e/n),2);for(let o=0;o<a;o++)i+=Math.round(t(o/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Gf=2e4;function qv(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Gf;)e+=n,i=t.next(e);return e>=Gf?1/0:e}function V9(t,e=100,n){const i=n({...t,keyframes:[0,e]}),a=Math.min(qv(i),Gf);return{type:"keyframes",ease:o=>i.next(a*o).value/e,duration:fi(a)}}const P9=5;function DC(t,e,n){const i=Math.max(e-P9,0);return dC(n-t(i),e-i)}const Et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},u0=.001;function j9({duration:t=Et.duration,bounce:e=Et.bounce,velocity:n=Et.velocity,mass:i=Et.mass}){let a,o,c=1-e;c=is(Et.minDamping,Et.maxDamping,c),t=is(Et.minDuration,Et.maxDuration,fi(t)),c<1?(a=f=>{const g=f*c,b=g*t,_=g-n,E=ny(f,c),k=Math.exp(-b);return u0-_/E*k},o=f=>{const b=f*c*t,_=b*n+n,E=Math.pow(c,2)*Math.pow(f,2)*t,k=Math.exp(-b),A=ny(Math.pow(f,2),c);return(-a(f)+u0>0?-1:1)*((_-E)*k)/A}):(a=f=>{const g=Math.exp(-f*t),b=(f-n)*t+1;return-u0+g*b},o=f=>{const g=Math.exp(-f*t),b=(n-f)*(t*t);return g*b});const d=5/t,h=U9(a,o,d);if(t=pr(t),isNaN(h))return{stiffness:Et.stiffness,damping:Et.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const L9=12;function U9(t,e,n){let i=n;for(let a=1;a<L9;a++)i=i-t(i)/e(i);return i}function ny(t,e){return t*Math.sqrt(1-e*e)}const z9=["duration","bounce"],B9=["stiffness","damping","mass"];function qx(t,e){return e.some(n=>t[n]!==void 0)}function F9(t){let e={velocity:Et.velocity,stiffness:Et.stiffness,damping:Et.damping,mass:Et.mass,isResolvedFromDuration:!1,...t};if(!qx(t,B9)&&qx(t,z9))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),a=i*i,o=2*is(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Et.mass,stiffness:a,damping:o}}else{const n=j9(t);e={...e,...n,mass:Et.mass},e.isResolvedFromDuration=!0}return e}function Kf(t=Et.visualDuration,e=Et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:a}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:g,duration:b,velocity:_,isResolvedFromDuration:E}=F9({...n,velocity:-fi(n.velocity||0)}),k=_||0,A=f/(2*Math.sqrt(h*g)),N=c-o,O=fi(Math.sqrt(h/g)),z=Math.abs(N)<5;i||(i=z?Et.restSpeed.granular:Et.restSpeed.default),a||(a=z?Et.restDelta.granular:Et.restDelta.default);let P;if(A<1){const te=ny(O,A);P=ee=>{const S=Math.exp(-A*O*ee);return c-S*((k+A*O*N)/te*Math.sin(te*ee)+N*Math.cos(te*ee))}}else if(A===1)P=te=>c-Math.exp(-O*te)*(N+(k+O*N)*te);else{const te=O*Math.sqrt(A*A-1);P=ee=>{const S=Math.exp(-A*O*ee),R=Math.min(te*ee,300);return c-S*((k+A*O*N)*Math.sinh(R)+te*N*Math.cosh(R))/te}}const H={calculatedDuration:E&&b||null,next:te=>{const ee=P(te);if(E)d.done=te>=b;else{let S=te===0?k:0;A<1&&(S=te===0?pr(k):DC(P,te,ee));const R=Math.abs(S)<=i,M=Math.abs(c-ee)<=a;d.done=R&&M}return d.value=d.done?c:ee,d},toString:()=>{const te=Math.min(qv(H),Gf),ee=kC(S=>H.next(te*S).value,te,30);return te+"ms "+ee},toTransition:()=>{}};return H}Kf.applyToOptions=t=>{const e=V9(t,100,Kf);return t.ease=e.ease,t.duration=pr(e.duration),t.type="keyframes",t};function iy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:c,min:d,max:h,restDelta:f=.5,restSpeed:g}){const b=t[0],_={done:!1,value:b},E=R=>d!==void 0&&R<d||h!==void 0&&R>h,k=R=>d===void 0?h:h===void 0||Math.abs(d-R)<Math.abs(h-R)?d:h;let A=n*e;const N=b+A,O=c===void 0?N:c(N);O!==N&&(A=O-b);const z=R=>-A*Math.exp(-R/i),P=R=>O+z(R),H=R=>{const M=z(R),j=P(R);_.done=Math.abs(M)<=f,_.value=_.done?O:j};let te,ee;const S=R=>{E(_.value)&&(te=R,ee=Kf({keyframes:[_.value,k(_.value)],velocity:DC(P,R,_.value),damping:a,stiffness:o,restDelta:f,restSpeed:g}))};return S(0),{calculatedDuration:null,next:R=>{let M=!1;return!ee&&te===void 0&&(M=!0,H(R),S(R)),te!==void 0&&R>=te?ee.next(R-te):(!M&&H(R),_)}}}function q9(t,e,n){const i=[],a=n||rs.mix||IC,o=t.length-1;for(let c=0;c<o;c++){let d=a(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||pi:e;d=sd(h,d)}i.push(d)}return i}function H9(t,e,{clamp:n=!0,ease:i,mixer:a}={}){const o=t.length;if(Mv(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=q9(e,i,a),h=d.length,f=g=>{if(c&&g<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(g<t[b+1]);b++);const _=ju(t[b],t[b+1],g);return d[b](_)};return n?g=>f(is(t[0],t[o-1],g)):f}function $9(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const a=ju(0,e,i);t.push(vt(n,1,a))}}function G9(t){const e=[0];return $9(e,t.length-1),e}function K9(t,e){return t.map(n=>n*e)}function Y9(t,e){return t.map(()=>e||_C).splice(0,t.length-1)}function _u({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const a=s9(i)?i.map(Lx):Lx(i),o={done:!1,value:e[0]},c=K9(n&&n.length===e.length?n:G9(e),t),d=H9(c,e,{ease:Array.isArray(a)?a:Y9(e,a)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const Q9=t=>t!==null;function Hv(t,{repeat:e,repeatType:n="loop"},i,a=1){const o=t.filter(Q9),d=a<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!d||i===void 0?o[d]:i}const X9={decay:iy,inertia:iy,tween:_u,keyframes:_u,spring:Kf};function MC(t){typeof t.type=="string"&&(t.type=X9[t.type])}class $v{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const W9=t=>t/100;class Gv extends $v{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MC(e);const{type:n=_u,repeat:i=0,repeatDelay:a=0,repeatType:o,velocity:c=0}=e;let{keyframes:d}=e;const h=n||_u;h!==_u&&typeof d[0]!="number"&&(this.mixKeyframes=sd(W9,IC(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=qv(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:a,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:b,repeatType:_,repeatDelay:E,type:k,onUpdate:A,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const O=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?O<0:O>a;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let P=this.currentTime,H=i;if(b){const R=Math.min(this.currentTime,a)/d;let M=Math.floor(R),j=R%1;!j&&R>=1&&(j=1),j===1&&M--,M=Math.min(M,b+1),!!(M%2)&&(_==="reverse"?(j=1-j,E&&(j-=E/d)):_==="mirror"&&(H=c)),P=is(0,1,j)*d}const te=z?{done:!1,value:g[0]}:H.next(P);o&&(te.value=o(te.value));let{done:ee}=te;!z&&h!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return S&&k!==iy&&(te.value=Hv(g,this.options,N,this.speed)),A&&A(te.value),S&&this.finish(),te}then(e,n){return this.finished.then(e,n)}get duration(){return fi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fi(e)}get time(){return fi(this.currentTime)}set time(e){e=pr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(On.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=O9,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Z9(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const io=t=>t*180/Math.PI,ry=t=>{const e=io(Math.atan2(t[1],t[0]));return sy(e)},J9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ry,rotateZ:ry,skewX:t=>io(Math.atan(t[1])),skewY:t=>io(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},sy=t=>(t=t%360,t<0&&(t+=360),t),Hx=ry,$x=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Gx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),eL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$x,scaleY:Gx,scale:t=>($x(t)+Gx(t))/2,rotateX:t=>sy(io(Math.atan2(t[6],t[5]))),rotateY:t=>sy(io(Math.atan2(-t[2],t[0]))),rotateZ:Hx,rotate:Hx,skewX:t=>io(Math.atan(t[4])),skewY:t=>io(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ay(t){return t.includes("scale")?1:0}function oy(t,e){if(!t||t==="none")return ay(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(n)i=eL,a=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=J9,a=d}if(!a)return ay(e);const o=i[e],c=a[1].split(",").map(nL);return typeof o=="function"?o(c):c[o]}const tL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return oy(n,e)};function nL(t){return parseFloat(t.trim())}const Ql=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xl=new Set(Ql),Kx=t=>t===Yl||t===Ie,iL=new Set(["x","y","z"]),rL=Ql.filter(t=>!iL.has(t));function sL(t){const e=[];return rL.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const oo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>oy(e,"x"),y:(t,{transform:e})=>oy(e,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const lo=new Set;let ly=!1,cy=!1,uy=!1;function OC(){if(cy){const t=Array.from(lo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const a=sL(i);a.length&&(n.set(i,a),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const a=n.get(i);a&&a.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}cy=!1,ly=!1,lo.forEach(t=>t.complete(uy)),lo.clear()}function VC(){lo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(cy=!0)})}function aL(){uy=!0,VC(),OC(),uy=!1}class Kv{constructor(e,n,i,a,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=a,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(lo.add(this),ly||(ly=!0,yt.read(VC),yt.resolveKeyframes(OC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:a}=this;if(e[0]===null){const o=a?.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),a&&o===void 0&&a.set(e[0])}Z9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),lo.delete(this)}cancel(){this.state==="scheduled"&&(lo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oL=t=>t.startsWith("--");function lL(t,e,n){oL(e)?t.style.setProperty(e,n):t.style[e]=n}const cL=Ov(()=>window.ScrollTimeline!==void 0),uL={};function dL(t,e){const n=Ov(t);return()=>uL[e]??n()}const PC=dL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Yx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hu([0,.65,.55,1]),circOut:hu([.55,0,1,.45]),backIn:hu([.31,.01,.66,-.59]),backOut:hu([.33,1.53,.69,.99])};function jC(t,e){if(t)return typeof t=="function"?PC()?kC(t,e):"ease-out":wC(t)?hu(t):Array.isArray(t)?t.map(n=>jC(n,e)||Yx.easeOut):Yx[t]}function hL(t,e,n,{delay:i=0,duration:a=300,repeat:o=0,repeatType:c="loop",ease:d="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const b=jC(d,a);Array.isArray(b)&&(g.easing=b);const _={delay:i,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(g,_)}function LC(t){return typeof t=="function"&&"applyToOptions"in t}function fL({type:t,...e}){return LC(t)&&PC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mL extends $v{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:a,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,Mv(typeof e.type!="string");const f=fL(e);this.animation=hL(n,i,a,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Hv(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):lL(n,i,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fi(e)}get time(){return fi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&cL()?(this.animation.timeline=e,pi):n(this)}}const UC={anticipate:yC,backInOut:gC,circInOut:bC};function pL(t){return t in UC}function gL(t){typeof t.ease=="string"&&pL(t.ease)&&(t.ease=UC[t.ease])}const Qx=10;class yL extends mL{constructor(e){gL(e),MC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:a,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new Gv({...c,autoplay:!1}),h=pr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-Qx).value,d.sample(h).value,Qx),d.stop()}}const Xx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ha.test(t)||t==="0")&&!t.startsWith("url("));function vL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bL(t,e,n,i){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=Xx(a,e),d=Xx(o,e);return!c||!d?!1:vL(t)||(n==="spring"||LC(n))&&i}function dy(t){t.duration=0,t.type="keyframes"}const _L=new Set(["opacity","clipPath","filter","transform"]),wL=Ov(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TL(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:a,damping:o,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return wL()&&n&&_L.has(n)&&(n!=="transform"||!f)&&!h&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}const xL=40;class EL extends $v{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:c="loop",keyframes:d,name:h,motionValue:f,element:g,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=On.now();const _={autoplay:e,delay:n,type:i,repeat:a,repeatDelay:o,repeatType:c,name:h,motionValue:f,element:g,...b},E=g?.KeyframeResolver||Kv;this.keyframeResolver=new E(d,(k,A,N)=>this.onKeyframesResolved(k,A,_,!N),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,a){this.keyframeResolver=void 0;const{name:o,type:c,velocity:d,delay:h,isHandoff:f,onUpdate:g}=i;this.resolvedAt=On.now(),bL(e,o,c,d)||((rs.instantAnimations||!h)&&g?.(Hv(e,i,n)),e[0]=e[e.length-1],dy(i),i.repeat=0);const _={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>xL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},E=!f&&TL(_)?new yL({..._,element:_.motionValue.owner.current}):new Gv(_);E.finished.then(()=>this.notifyFinished()).catch(pi),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),aL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const SL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AL(t){const e=SL.exec(t);if(!e)return[,];const[,n,i,a]=e;return[`--${n??i}`,a]}function zC(t,e,n=1){const[i,a]=AL(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const c=o.trim();return lC(c)?parseFloat(c):c}return Uv(a)?zC(a,e,n+1):a}function Yv(t,e){return t?.[e]??t?.default??t}const BC=new Set(["width","height","top","left","right","bottom",...Ql]),CL={test:t=>t==="auto",parse:t=>t},FC=t=>e=>e.test(t),qC=[Yl,Ie,gr,qs,v9,y9,CL],Wx=t=>qC.find(FC(t));function RL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uC(t):!0}const NL=new Set(["brightness","contrast","saturate","opacity"]);function IL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(zv)||[];if(!i)return t;const a=n.replace(i,"");let o=NL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+a+")"}const kL=/\b([a-z-]*)\(.*?\)/gu,hy={...ha,getAnimatableNone:t=>{const e=t.match(kL);return e?e.map(IL).join(" "):t}},Zx={...Yl,transform:Math.round},DL={rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Qh,scaleX:Qh,scaleY:Qh,scaleZ:Qh,skew:qs,skewX:qs,skewY:qs,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Lu,originX:Ux,originY:Ux,originZ:Ie},Qv={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...DL,zIndex:Zx,fillOpacity:Lu,strokeOpacity:Lu,numOctaves:Zx},ML={...Qv,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:hy,WebkitFilter:hy},HC=t=>ML[t];function $C(t,e){let n=HC(t);return n!==hy&&(n=ha),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OL=new Set(["auto","none","0"]);function VL(t,e,n){let i=0,a;for(;i<t.length&&!a;){const o=t[i];typeof o=="string"&&!OL.has(o)&&Uu(o).values.length&&(a=t[i]),i++}if(a&&n)for(const o of e)t[o]=$C(n,a)}class PL extends Kv{constructor(e,n,i,a,o){super(e,n,i,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Uv(f))){const g=zC(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!BC.has(i)||e.length!==2)return;const[a,o]=e,c=Wx(a),d=Wx(o);if(c!==d)if(Kx(c)&&Kx(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else oo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let a=0;a<e.length;a++)(e[a]===null||RL(e[a]))&&i.push(a);i.length&&VL(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(i,a).jump(a,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=oo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function jL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const a=n?.[t]??i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const GC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function KC(t){return cC(t)&&"offsetHeight"in t}const Jx=30,LL=t=>!isNaN(parseFloat(t));class UL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const a=On.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=On.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=LL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Vv);const i=this.events[e].add(n);return e==="change"?()=>{i(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jx);return dC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ll(t,e){return new UL(t,e)}const{schedule:Xv}=TC(queueMicrotask,!1),Ii={x:!1,y:!1};function YC(){return Ii.x||Ii.y}function zL(t){return t==="x"||t==="y"?Ii[t]?null:(Ii[t]=!0,()=>{Ii[t]=!1}):Ii.x||Ii.y?null:(Ii.x=Ii.y=!0,()=>{Ii.x=Ii.y=!1})}function QC(t,e){const n=jL(t),i=new AbortController,a={passive:!0,...e,signal:i.signal};return[n,a,()=>i.abort()]}function eE(t){return!(t.pointerType==="touch"||YC())}function BL(t,e,n={}){const[i,a,o]=QC(t,n),c=d=>{if(!eE(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const g=b=>{eE(b)&&(f(b),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,a)};return i.forEach(d=>{d.addEventListener("pointerenter",c,a)}),o}const XC=(t,e)=>e?t===e?!0:XC(t,e.parentElement):!1,Wv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qL(t){return FL.has(t.tagName)||t.tabIndex!==-1}const pf=new WeakSet;function tE(t){return e=>{e.key==="Enter"&&t(e)}}function d0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HL=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=tE(()=>{if(pf.has(n))return;d0(n,"down");const a=tE(()=>{d0(n,"up")}),o=()=>d0(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function nE(t){return Wv(t)&&!YC()}function $L(t,e,n={}){const[i,a,o]=QC(t,n),c=d=>{const h=d.currentTarget;if(!nE(d))return;pf.add(h);const f=e(h,d),g=(E,k)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",_),pf.has(h)&&pf.delete(h),nE(E)&&typeof f=="function"&&f(E,{success:k})},b=E=>{g(E,h===window||h===document||n.useGlobalTarget||XC(h,E.target))},_=E=>{g(E,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",_,a)};return i.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,a),KC(d)&&(d.addEventListener("focus",f=>HL(f,a)),!qL(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),o}function WC(t){return cC(t)&&"ownerSVGElement"in t}function GL(t){return WC(t)&&t.tagName==="svg"}const yn=t=>!!(t&&t.getVelocity),KL=[...qC,qt,ha],YL=t=>KL.find(FC(t)),Zv=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function iE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function QL(...t){return e=>{let n=!1;const i=t.map(a=>{const o=iE(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<i.length;a++){const o=i[a];typeof o=="function"?o():iE(t[a],null)}}}}function XL(...t){return V.useCallback(QL(...t),t)}class WL extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,a=KC(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZL({children:t,isPresent:e,anchorX:n,root:i}){const a=V.useId(),o=V.useRef(null),c=V.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=V.useContext(Zv),h=XL(o,t?.ref);return V.useInsertionEffect(()=>{const{width:f,height:g,top:b,left:_,right:E}=c.current;if(e||!o.current||!f||!g)return;const k=n==="left"?`left: ${_}`:`right: ${E}`;o.current.dataset.motionPopId=a;const A=document.createElement("style");d&&(A.nonce=d);const N=i??document.head;return N.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${k}px !important;
            top: ${b}px !important;
          }
        `),()=>{N.contains(A)&&N.removeChild(A)}},[e]),v.jsx(WL,{isPresent:e,childRef:o,sizeRef:c,children:V.cloneElement(t,{ref:h})})}const JL=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:o,mode:c,anchorX:d,root:h})=>{const f=km(eU),g=V.useId();let b=!0,_=V.useMemo(()=>(b=!1,{id:g,initial:e,isPresent:n,custom:a,onExitComplete:E=>{f.set(E,!0);for(const k of f.values())if(!k)return;i&&i()},register:E=>(f.set(E,!1),()=>f.delete(E))}),[n,f,i]);return o&&b&&(_={..._}),V.useMemo(()=>{f.forEach((E,k)=>f.set(k,!1))},[n]),V.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=v.jsx(ZL,{isPresent:n,anchorX:d,root:h,children:t})),v.jsx(Dm.Provider,{value:_,children:t})};function eU(){return new Map}function ZC(t=!0){const e=V.useContext(Dm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:a}=e,o=V.useId();V.useEffect(()=>{if(t)return a(o)},[t]);const c=V.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,c]:[!0]}const Xh=t=>t.key||"";function rE(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Jv=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[f,g]=ZC(c),b=V.useMemo(()=>rE(t),[t]),_=c&&!f?[]:b.map(Xh),E=V.useRef(!0),k=V.useRef(b),A=km(()=>new Map),[N,O]=V.useState(b),[z,P]=V.useState(b);Iv(()=>{E.current=!1,k.current=b;for(let ee=0;ee<z.length;ee++){const S=Xh(z[ee]);_.includes(S)?A.delete(S):A.get(S)!==!0&&A.set(S,!1)}},[z,_.length,_.join("-")]);const H=[];if(b!==N){let ee=[...b];for(let S=0;S<z.length;S++){const R=z[S],M=Xh(R);_.includes(M)||(ee.splice(S,0,R),H.push(R))}return o==="wait"&&H.length&&(ee=H),P(rE(ee)),O(b),null}const{forceRender:te}=V.useContext(Rv);return v.jsx(v.Fragment,{children:z.map(ee=>{const S=Xh(ee),R=c&&!f?!1:b===z||_.includes(S),M=()=>{if(A.has(S))A.set(S,!0);else return;let j=!0;A.forEach(D=>{D||(j=!1)}),j&&(te?.(),P(k.current),c&&g?.(),i&&i())};return v.jsx(JL,{isPresent:R,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:o,root:h,onExitComplete:R?void 0:M,anchorX:d,children:ee},S)})})},JC=V.createContext({strict:!1}),sE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ul={};for(const t in sE)Ul[t]={isEnabled:e=>sE[t].some(n=>!!e[n])};function tU(t){for(const e in t)Ul[e]={...Ul[e],...t[e]}}const nU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nU.has(t)}let eR=t=>!Yf(t);function iU(t){typeof t=="function"&&(eR=e=>e.startsWith("on")?!Yf(e):t(e))}try{iU(require("@emotion/is-prop-valid").default)}catch{}function rU(t,e,n){const i={};for(const a in t)a==="values"&&typeof t.values=="object"||(eR(a)||n===!0&&Yf(a)||!e&&!Yf(a)||t.draggable&&a.startsWith("onDrag"))&&(i[a]=t[a]);return i}const Mm=V.createContext({});function Om(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zu(t){return typeof t=="string"||Array.isArray(t)}const eb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tb=["initial",...eb];function Vm(t){return Om(t.animate)||tb.some(e=>zu(t[e]))}function tR(t){return!!(Vm(t)||t.variants)}function sU(t,e){if(Vm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||zu(n)?n:void 0,animate:zu(i)?i:void 0}}return t.inherit!==!1?e:{}}function aU(t){const{initial:e,animate:n}=sU(t,V.useContext(Mm));return V.useMemo(()=>({initial:e,animate:n}),[aE(e),aE(n)])}function aE(t){return Array.isArray(t)?t.join(" "):t}const Bu={};function oU(t){for(const e in t)Bu[e]=t[e],Lv(e)&&(Bu[e].isCSSVariable=!0)}function nR(t,{layout:e,layoutId:n}){return Xl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bu[t]||t==="opacity")}const lU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cU=Ql.length;function uU(t,e,n){let i="",a=!0;for(let o=0;o<cU;o++){const c=Ql[o],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=GC(d,Qv[c]);if(!h){a=!1;const g=lU[c]||c;i+=`${g}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,a?"":i):a&&(i="none"),i}function nb(t,e,n){const{style:i,vars:a,transformOrigin:o}=t;let c=!1,d=!1;for(const h in e){const f=e[h];if(Xl.has(h)){c=!0;continue}else if(Lv(h)){a[h]=f;continue}else{const g=GC(f,Qv[h]);h.startsWith("origin")?(d=!0,o[h]=g):i[h]=g}}if(e.transform||(c||n?i.transform=uU(e,t.transform,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${h} ${f} ${g}`}}const ib=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iR(t,e,n){for(const i in e)!yn(e[i])&&!nR(i,n)&&(t[i]=e[i])}function dU({transformTemplate:t},e){return V.useMemo(()=>{const n=ib();return nb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function hU(t,e){const n=t.style||{},i={};return iR(i,n,t),Object.assign(i,dU(t,e)),i}function fU(t,e){const n={},i=hU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const mU={offset:"stroke-dashoffset",array:"stroke-dasharray"},pU={offset:"strokeDashoffset",array:"strokeDasharray"};function gU(t,e,n=1,i=0,a=!0){t.pathLength=1;const o=a?mU:pU;t[o.offset]=Ie.transform(-i);const c=Ie.transform(e),d=Ie.transform(n);t[o.array]=`${c} ${d}`}function rR(t,{attrX:e,attrY:n,attrScale:i,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...d},h,f,g){if(nb(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:_}=t;b.transform&&(_.transform=b.transform,delete b.transform),(_.transform||b.transformOrigin)&&(_.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),a!==void 0&&gU(b,a,o,c,!1)}const sR=()=>({...ib(),attrs:{}}),aR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yU(t,e,n,i){const a=V.useMemo(()=>{const o=sR();return rR(o,e,aR(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};iR(o,t.style,t),a.style={...o,...a.style}}return a}const vU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rb(t){return typeof t!="string"||t.includes("-")?!1:!!(vU.indexOf(t)>-1||/[A-Z]/u.test(t))}function bU(t,e,n,{latestValues:i},a,o=!1){const d=(rb(t)?yU:fU)(e,i,a,t),h=rU(e,typeof t=="string",o),f=t!==V.Fragment?{...h,...d,ref:n}:{},{children:g}=e,b=V.useMemo(()=>yn(g)?g.get():g,[g]);return V.createElement(t,{...f,children:b})}function oE(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function sb(t,e,n,i){if(typeof e=="function"){const[a,o]=oE(i);e=e(n!==void 0?n:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=oE(i);e=e(n!==void 0?n:t.custom,a,o)}return e}function gf(t){return yn(t)?t.get():t}function _U({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,a){return{latestValues:wU(n,i,a,t),renderState:e()}}function wU(t,e,n,i){const a={},o=i(t,{});for(const _ in o)a[_]=gf(o[_]);let{initial:c,animate:d}=t;const h=Vm(t),f=tR(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const b=g?d:c;if(b&&typeof b!="boolean"&&!Om(b)){const _=Array.isArray(b)?b:[b];for(let E=0;E<_.length;E++){const k=sb(t,_[E]);if(k){const{transitionEnd:A,transition:N,...O}=k;for(const z in O){let P=O[z];if(Array.isArray(P)){const H=g?P.length-1:0;P=P[H]}P!==null&&(a[z]=P)}for(const z in A)a[z]=A[z]}}}return a}const oR=t=>(e,n)=>{const i=V.useContext(Mm),a=V.useContext(Dm),o=()=>_U(t,e,i,a);return n?o():km(o)};function ab(t,e,n){const{style:i}=t,a={};for(const o in i)(yn(i[o])||e.style&&yn(e.style[o])||nR(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(a[o]=i[o]);return a}const TU=oR({scrapeMotionValuesFromProps:ab,createRenderState:ib});function lR(t,e,n){const i=ab(t,e,n);for(const a in t)if(yn(t[a])||yn(e[a])){const o=Ql.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[o]=t[a]}return i}const xU=oR({scrapeMotionValuesFromProps:lR,createRenderState:sR}),EU=Symbol.for("motionComponentSymbol");function vl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function SU(t,e,n){return V.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):vl(n)&&(n.current=i))},[e])}const ob=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),AU="framerAppearId",cR="data-"+ob(AU),uR=V.createContext({});function CU(t,e,n,i,a){const{visualElement:o}=V.useContext(Mm),c=V.useContext(JC),d=V.useContext(Dm),h=V.useContext(Zv).reducedMotion,f=V.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,b=V.useContext(uR);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&RU(f.current,n,a,b);const _=V.useRef(!1);V.useInsertionEffect(()=>{g&&_.current&&g.update(n,d)});const E=n[cR],k=V.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return Iv(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),k.current&&g.animationState&&g.animationState.animateChanges())}),V.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),k.current=!1),g.enteringChildren=void 0)}),g}function RU(t,e,n,i){const{layoutId:a,layout:o,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dR(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!c||d&&vl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:h,layoutRoot:f})}function dR(t){if(t)return t.options.allowProjection!==!1?t.projection:dR(t.parent)}function h0(t,{forwardMotionProps:e=!1}={},n,i){n&&tU(n);const a=rb(t)?xU:TU;function o(d,h){let f;const g={...V.useContext(Zv),...d,layoutId:NU(d)},{isStatic:b}=g,_=aU(d),E=a(d,b);if(!b&&Nv){IU();const k=kU(g);f=k.MeasureLayout,_.visualElement=CU(t,E,g,i,k.ProjectionNode)}return v.jsxs(Mm.Provider,{value:_,children:[f&&_.visualElement?v.jsx(f,{visualElement:_.visualElement,...g}):null,bU(t,d,SU(E,_.visualElement,h),E,b,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=V.forwardRef(o);return c[EU]=t,c}function NU({layoutId:t}){const e=V.useContext(Rv).id;return e&&t!==void 0?e+"-"+t:t}function IU(t,e){V.useContext(JC).strict}function kU(t){const{drag:e,layout:n}=Ul;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function DU(t,e){if(typeof Proxy>"u")return h0;const n=new Map,i=(o,c)=>h0(o,c,t,e),a=(o,c)=>i(o,c);return new Proxy(a,{get:(o,c)=>c==="create"?i:(n.has(c)||n.set(c,h0(c,void 0,t,e)),n.get(c))})}function hR({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function MU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function f0(t){return t===void 0||t===1}function fy({scale:t,scaleX:e,scaleY:n}){return!f0(t)||!f0(e)||!f0(n)}function Ja(t){return fy(t)||fR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fR(t){return lE(t.x)||lE(t.y)}function lE(t){return t&&t!=="0%"}function Qf(t,e,n){const i=t-n,a=e*i;return n+a}function cE(t,e,n,i,a){return a!==void 0&&(t=Qf(t,a,i)),Qf(t,n,i)+e}function my(t,e=0,n=1,i,a){t.min=cE(t.min,e,n,i,a),t.max=cE(t.max,e,n,i,a)}function mR(t,{x:e,y:n}){my(t.x,e.translate,e.scale,e.originPoint),my(t.y,n.translate,n.scale,n.originPoint)}const uE=.999999999999,dE=1.0000000000001;function VU(t,e,n,i=!1){const a=n.length;if(!a)return;e.x=e.y=1;let o,c;for(let d=0;d<a;d++){o=n[d],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&_l(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,mR(t,c)),i&&Ja(o.latestValues)&&_l(t,o.latestValues))}e.x<dE&&e.x>uE&&(e.x=1),e.y<dE&&e.y>uE&&(e.y=1)}function bl(t,e){t.min=t.min+e,t.max=t.max+e}function hE(t,e,n,i,a=.5){const o=vt(t.min,t.max,a);my(t,e,n,o,i)}function _l(t,e){hE(t.x,e.x,e.scaleX,e.scale,e.originX),hE(t.y,e.y,e.scaleY,e.scale,e.originY)}function pR(t,e){return hR(OU(t.getBoundingClientRect(),e))}function PU(t,e,n){const i=pR(t,n),{scroll:a}=e;return a&&(bl(i.x,a.offset.x),bl(i.y,a.offset.y)),i}const fE=()=>({translate:0,scale:1,origin:0,originPoint:0}),wl=()=>({x:fE(),y:fE()}),mE=()=>({min:0,max:0}),It=()=>({x:mE(),y:mE()}),py={current:null},gR={current:!1};function jU(){if(gR.current=!0,!!Nv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>py.current=t.matches;t.addEventListener("change",e),e()}else py.current=!1}const LU=new WeakMap;function UU(t,e,n){for(const i in e){const a=e[i],o=n[i];if(yn(a))t.addValue(i,a);else if(yn(o))t.addValue(i,Ll(a,{owner:t}));else if(o!==a)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(i);t.addValue(i,Ll(c!==void 0?c:a,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const pE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zU{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:o,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=On.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,yt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Vm(n),this.isVariantNode=tR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in b){const E=b[_];h[_]!==void 0&&yn(E)&&E.set(h[_])}}mount(e){this.current=e,LU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),gR.current||jU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:py.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Xl.has(e);i&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&yt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ul){const n=Ul[e];if(!n)continue;const{isEnabled:i,Feature:a}=n;if(!this.features[e]&&a&&i(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<pE.length;i++){const a=pE[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,c=e[o];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=UU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ll(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(lC(i)||uC(i))?i=parseFloat(i):!YL(i)&&ha.test(n)&&(i=$C(e,n)),this.setBaseTarget(e,yn(i)?i.get():i)),yn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=sb(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!yn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Vv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Xv.render(this.render)}}class yR extends zU{constructor(){super(...arguments),this.KeyframeResolver=PL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function vR(t,{style:e,vars:n},i,a){const o=t.style;let c;for(c in e)o[c]=e[c];a?.applyProjectionStyles(o,i);for(c in n)o.setProperty(c,n[c])}function BU(t){return window.getComputedStyle(t)}class FU extends yR{constructor(){super(...arguments),this.type="html",this.renderInstance=vR}readValueFromInstance(e,n){if(Xl.has(n))return this.projection?.isProjecting?ay(n):tL(e,n);{const i=BU(e),a=(Lv(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pR(e,n)}build(e,n,i){nb(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return ab(e,n,i)}}const bR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qU(t,e,n,i){vR(t,e,void 0,i);for(const a in e.attrs)t.setAttribute(bR.has(a)?a:ob(a),e.attrs[a])}class HU extends yR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xl.has(n)){const i=HC(n);return i&&i.default||0}return n=bR.has(n)?n:ob(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return lR(e,n,i)}build(e,n,i){rR(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,a){qU(e,n,i,a)}mount(e){this.isSVGTag=aR(e.tagName),super.mount(e)}}const $U=(t,e)=>rb(t)?new HU(e):new FU(e,{allowProjection:t!==V.Fragment});function Cl(t,e,n){const i=t.getProps();return sb(i,e,n!==void 0?n:i.custom,t)}const gy=t=>Array.isArray(t);function GU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ll(n))}function KU(t){return gy(t)?t[t.length-1]||0:t}function lb(t,e){const n=Cl(t,e);let{transitionEnd:i={},transition:a={},...o}=n||{};o={...o,...i};for(const c in o){const d=KU(o[c]);GU(t,c,d)}}function YU(t){return!!(yn(t)&&t.add)}function yy(t,e){const n=t.getValue("willChange");if(YU(n))return n.add(e);if(!n&&rs.WillChange){const i=new rs.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function _R(t){return t.props[cR]}const QU=t=>t!==null;function XU(t,{repeat:e,repeatType:n="loop"},i){const a=t.filter(QU),o=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[o]}const WU={type:"spring",stiffness:500,damping:25,restSpeed:10},ZU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),JU={type:"keyframes",duration:.8},e8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t8=(t,{keyframes:e})=>e.length>2?JU:Xl.has(t)?t.startsWith("scale")?ZU(e[1]):WU:e8;function n8({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:o,repeatType:c,repeatDelay:d,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const cb=(t,e,n,i={},a,o)=>c=>{const d=Yv(i,t)||{},h=d.delay||i.delay||0;let{elapsed:f=0}=i;f=f-pr(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:a};n8(d)||Object.assign(g,t8(t,g)),g.duration&&(g.duration=pr(g.duration)),g.repeatDelay&&(g.repeatDelay=pr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let b=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(dy(g),g.delay===0&&(b=!0)),(rs.instantAnimations||rs.skipAnimations)&&(b=!0,dy(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,b&&!o&&e.get()!==void 0){const _=XU(g.keyframes,d);if(_!==void 0){yt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return d.isSync?new Gv(g):new EL(g)};function i8({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function wR(t,e,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(o=i);const h=[],f=a&&t.animationState&&t.animationState.getState()[a];for(const g in d){const b=t.getValue(g,t.latestValues[g]??null),_=d[g];if(_===void 0||f&&i8(f,g))continue;const E={delay:n,...Yv(o||{},g)},k=b.get();if(k!==void 0&&!b.isAnimating&&!Array.isArray(_)&&_===k&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const O=_R(t);if(O){const z=window.MotionHandoffAnimation(O,g,yt);z!==null&&(E.startTime=z,A=!0)}}yy(t,g),b.start(cb(g,b,_,t.shouldReduceMotion&&BC.has(g)?{type:!1}:E,t,A));const N=b.animation;N&&h.push(N)}return c&&Promise.all(h).then(()=>{yt.update(()=>{c&&lb(t,c)})}),h}function TR(t,e,n,i=0,a=1){const o=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),c=t.size,d=(c-1)*i;return typeof n=="function"?n(o,c):a===1?o*i:d-o*i}function vy(t,e,n={}){const i=Cl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(wR(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:b}=a;return r8(t,e,h,f,g,b,n)}:()=>Promise.resolve(),{when:d}=a;if(d){const[h,f]=d==="beforeChildren"?[o,c]:[c,o];return h().then(()=>f())}else return Promise.all([o(),c(n.delay)])}function r8(t,e,n=0,i=0,a=0,o=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(vy(h,e,{...c,delay:n+(typeof i=="function"?0:i)+TR(t.variantChildren,h,i,a,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function xR(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const a=e.map(o=>vy(t,o,n));i=Promise.all(a)}else if(typeof e=="string")i=vy(t,e,n);else{const a=typeof e=="function"?Cl(t,e,n.custom):e;i=Promise.all(wR(t,a,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function ER(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const s8=tb.length;function SR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?SR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<s8;n++){const i=tb[n],a=t.props[i];(zu(a)||a===!1)&&(e[i]=a)}return e}const a8=[...eb].reverse(),o8=eb.length;function l8(t){return e=>Promise.all(e.map(({animation:n,options:i})=>xR(t,n,i)))}function c8(t){let e=l8(t),n=gE(),i=!0;const a=h=>(f,g)=>{const b=Cl(t,g,h==="exit"?t.presenceContext?.custom:void 0);if(b){const{transition:_,transitionEnd:E,...k}=b;f={...f,...k,...E}}return f};function o(h){e=h(t)}function c(h){const{props:f}=t,g=SR(t.parent)||{},b=[],_=new Set;let E={},k=1/0;for(let N=0;N<o8;N++){const O=a8[N],z=n[O],P=f[O]!==void 0?f[O]:g[O],H=zu(P),te=O===h?z.isActive:null;te===!1&&(k=N);let ee=P===g[O]&&P!==f[O]&&H;if(ee&&i&&t.manuallyAnimateOnMount&&(ee=!1),z.protectedKeys={...E},!z.isActive&&te===null||!P&&!z.prevProp||Om(P)||typeof P=="boolean")continue;const S=u8(z.prevProp,P);let R=S||O===h&&z.isActive&&!ee&&H||N>k&&H,M=!1;const j=Array.isArray(P)?P:[P];let D=j.reduce(a(O),{});te===!1&&(D={});const{prevResolvedValues:F={}}=z,U={...F,...D},Me=ae=>{R=!0,_.has(ae)&&(M=!0,_.delete(ae)),z.needsAnimating[ae]=!0;const me=t.getValue(ae);me&&(me.liveStyle=!1)};for(const ae in U){const me=D[ae],_e=F[ae];if(E.hasOwnProperty(ae))continue;let le=!1;gy(me)&&gy(_e)?le=!ER(me,_e):le=me!==_e,le?me!=null?Me(ae):_.add(ae):me!==void 0&&_.has(ae)?Me(ae):z.protectedKeys[ae]=!0}z.prevProp=P,z.prevResolvedValues=D,z.isActive&&(E={...E,...D}),i&&t.blockInitialAnimation&&(R=!1);const he=ee&&S;R&&(!he||M)&&b.push(...j.map(ae=>{const me={type:O};if(typeof ae=="string"&&i&&!he&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,le=Cl(_e,ae);if(_e.enteringChildren&&le){const{delayChildren:L}=le.transition||{};me.delay=TR(_e.enteringChildren,t,L)}}return{animation:ae,options:me}}))}if(_.size){const N={};if(typeof f.initial!="boolean"){const O=Cl(t,Array.isArray(f.initial)?f.initial[0]:f.initial);O&&O.transition&&(N.transition=O.transition)}_.forEach(O=>{const z=t.getBaseTarget(O),P=t.getValue(O);P&&(P.liveStyle=!0),N[O]=z??null}),b.push({animation:N})}let A=!!b.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(b):Promise.resolve()}function d(h,f){if(n[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(b=>b.animationState?.setActive(h,f)),n[h].isActive=f;const g=c(h);for(const b in n)n[b].protectedKeys={};return g}return{animateChanges:c,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=gE()}}}function u8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ER(e,t):!1}function Xa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gE(){return{animate:Xa(!0),whileInView:Xa(),whileHover:Xa(),whileTap:Xa(),whileDrag:Xa(),whileFocus:Xa(),exit:Xa()}}class ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}class d8 extends ba{constructor(e){super(e),e.animationState||(e.animationState=c8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Om(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let h8=0;class f8 extends ba{constructor(){super(...arguments),this.id=h8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const m8={animation:{Feature:d8},exit:{Feature:f8}};function Fu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ld(t){return{point:{x:t.pageX,y:t.pageY}}}const p8=t=>e=>Wv(e)&&t(e,ld(e));function wu(t,e,n,i){return Fu(t,e,p8(n),i)}const AR=1e-4,g8=1-AR,y8=1+AR,CR=.01,v8=0-CR,b8=0+CR;function En(t){return t.max-t.min}function _8(t,e,n){return Math.abs(t-e)<=n}function yE(t,e,n,i=.5){t.origin=i,t.originPoint=vt(e.min,e.max,t.origin),t.scale=En(n)/En(e),t.translate=vt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=g8&&t.scale<=y8||isNaN(t.scale))&&(t.scale=1),(t.translate>=v8&&t.translate<=b8||isNaN(t.translate))&&(t.translate=0)}function Tu(t,e,n,i){yE(t.x,e.x,n.x,i?i.originX:void 0),yE(t.y,e.y,n.y,i?i.originY:void 0)}function vE(t,e,n){t.min=n.min+e.min,t.max=t.min+En(e)}function w8(t,e,n){vE(t.x,e.x,n.x),vE(t.y,e.y,n.y)}function bE(t,e,n){t.min=e.min-n.min,t.max=t.min+En(e)}function xu(t,e,n){bE(t.x,e.x,n.x),bE(t.y,e.y,n.y)}function ci(t){return[t("x"),t("y")]}const RR=({current:t})=>t?t.ownerDocument.defaultView:null,_E=(t,e)=>Math.abs(t-e);function T8(t,e){const n=_E(t.x,e.x),i=_E(t.y,e.y);return Math.sqrt(n**2+i**2)}class NR{constructor(e,n,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=p0(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,k=T8(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!k)return;const{point:A}=_,{timestamp:N}=on;this.history.push({...A,timestamp:N});const{onStart:O,onMove:z}=this.handlers;E||(O&&O(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=m0(E,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:k,onSessionEnd:A,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=p0(_.type==="pointercancel"?this.lastMoveEventInfo:m0(E,this.transformPagePoint),this.history);this.startEvent&&k&&k(_,O),A&&A(_,O)},!Wv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=a||window;const d=ld(e),h=m0(d,this.transformPagePoint),{point:f}=h,{timestamp:g}=on;this.history=[{...f,timestamp:g}];const{onSessionStart:b}=n;b&&b(e,p0(h,this.history)),this.removeListeners=sd(wu(this.contextWindow,"pointermove",this.handlePointerMove),wu(this.contextWindow,"pointerup",this.handlePointerUp),wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),da(this.updatePoint)}}function m0(t,e){return e?{point:e(t.point)}:t}function wE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function p0({point:t},e){return{point:t,delta:wE(t,IR(e)),offset:wE(t,x8(e)),velocity:E8(e,.1)}}function x8(t){return t[0]}function IR(t){return t[t.length-1]}function E8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const a=IR(t);for(;n>=0&&(i=t[n],!(a.timestamp-i.timestamp>pr(e)));)n--;if(!i)return{x:0,y:0};const o=fi(a.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(a.x-i.x)/o,y:(a.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function S8(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?vt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?vt(n,t,i.max):Math.min(t,n)),t}function TE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function A8(t,{top:e,left:n,bottom:i,right:a}){return{x:TE(t.x,n,a),y:TE(t.y,e,i)}}function xE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function C8(t,e){return{x:xE(t.x,e.x),y:xE(t.y,e.y)}}function R8(t,e){let n=.5;const i=En(t),a=En(e);return a>i?n=ju(e.min,e.max-i,t.min):i>a&&(n=ju(t.min,t.max-a,e.min)),is(0,1,n)}function N8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const by=.35;function I8(t=by){return t===!1?t=0:t===!0&&(t=by),{x:EE(t,"left","right"),y:EE(t,"top","bottom")}}function EE(t,e,n){return{min:SE(t,e),max:SE(t,n)}}function SE(t,e){return typeof t=="number"?t:t[e]||0}const k8=new WeakMap;class D8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=b=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ld(b).point)},c=(b,_)=>{const{drag:E,dragPropagation:k,onDragStart:A}=this.getProps();if(E&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zL(E),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ci(O=>{let z=this.getAxisMotionValue(O).get()||0;if(gr.test(z)){const{projection:P}=this.visualElement;if(P&&P.layout){const H=P.layout.layoutBox[O];H&&(z=En(H)*(parseFloat(z)/100))}}this.originPoint[O]=z}),A&&yt.postRender(()=>A(b,_)),yy(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},d=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_;const{dragPropagation:E,dragDirectionLock:k,onDirectionLock:A,onDrag:N}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:O}=_;if(k&&this.currentDirection===null){this.currentDirection=M8(O),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,O),this.updateAxis("y",_.point,O),this.visualElement.render(),N&&N(b,_)},h=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_,this.stop(b,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>ci(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new NR(e,{onSessionStart:o,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:RR(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,a=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!i)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&yt.postRender(()=>d(i,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:a}=this.getProps();if(!i||!Wh(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=S8(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&vl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=A8(i.layoutBox,e):this.constraints=!1,this.elastic=I8(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ci(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=N8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vl(e))return!1;const i=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=PU(i,a.root,this.visualElement.getTransformPagePoint());let c=C8(a.layout.layoutBox,o);if(n){const d=n(MU(c));this.hasMutatedConstraints=!!d,d&&(c=hR(d))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=ci(g=>{if(!Wh(g,n,this.currentDirection))return;let b=h&&h[g]||{};c&&(b={min:0,max:0});const _=a?200:1e6,E=a?40:1e7,k={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(g,k)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return yy(this.visualElement,e),i.start(cb(e,i,0,n,this.visualElement,!1))}stopAnimation(){ci(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ci(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ci(n=>{const{drag:i}=this.getProps();if(!Wh(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:d}=a.layout.layoutBox[n];o.set(e[n]-vt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!vl(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ci(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();a[c]=R8({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ci(c=>{if(!Wh(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];d.set(vt(h,f,a[c]))})}addListeners(){if(!this.visualElement.current)return;k8.set(this.visualElement,this);const e=this.visualElement.current,n=wu(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();vl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),yt.read(i);const c=Fu(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(ci(g=>{const b=this.getAxisMotionValue(g);b&&(this.originPoint[g]+=h[g].translate,b.set(b.get()+h[g].translate))}),this.visualElement.render())}));return()=>{c(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:c=by,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:o,dragElastic:c,dragMomentum:d}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function M8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class O8 extends ba{constructor(e){super(e),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new D8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const AE=t=>(e,n)=>{t&&yt.postRender(()=>t(e,n))};class V8 extends ba{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(e){this.session=new NR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:AE(e),onStart:AE(n),onMove:i,onEnd:(o,c)=>{delete this.session,a&&yt.postRender(()=>a(o,c))}}}mount(){this.removePointerDownListener=wu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ru={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=CE(t,e.target.x),i=CE(t,e.target.y);return`${n}% ${i}%`}},P8={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,a=ha.parse(t);if(a.length>5)return i;const o=ha.createTransformer(t),c=typeof a[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;a[0+c]/=d,a[1+c]/=h;const f=vt(d,h,.5);return typeof a[2+c]=="number"&&(a[2+c]/=f),typeof a[3+c]=="number"&&(a[3+c]/=f),o(a)}};let g0=!1;class j8 extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:o}=e;oU(L8),o&&(n.group&&n.group.add(o),i&&i.register&&a&&i.register(o),g0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),yf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:a,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,g0=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||yt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=e;g0=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kR(t){const[e,n]=ZC(),i=V.useContext(Rv);return v.jsx(j8,{...t,layoutGroup:i,switchLayoutGroup:V.useContext(uR),isPresent:e,safeToRemove:n})}const L8={borderRadius:{...ru,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ru,borderTopRightRadius:ru,borderBottomLeftRadius:ru,borderBottomRightRadius:ru,boxShadow:P8};function U8(t,e,n){const i=yn(t)?t:Ll(t);return i.start(cb("",i,e,n)),i.animation}const z8=(t,e)=>t.depth-e.depth;class B8{constructor(){this.children=[],this.isDirty=!1}add(e){kv(this.children,e),this.isDirty=!0}remove(e){Dv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z8),this.isDirty=!1,this.children.forEach(e)}}function F8(t,e){const n=On.now(),i=({timestamp:a})=>{const o=a-n;o>=e&&(da(i),t(o-e))};return yt.setup(i,!0),()=>da(i)}const DR=["TopLeft","TopRight","BottomLeft","BottomRight"],q8=DR.length,RE=t=>typeof t=="string"?parseFloat(t):t,NE=t=>typeof t=="number"||Ie.test(t);function H8(t,e,n,i,a,o){a?(t.opacity=vt(0,n.opacity??1,$8(i)),t.opacityExit=vt(e.opacity??1,0,G8(i))):o&&(t.opacity=vt(e.opacity??1,n.opacity??1,i));for(let c=0;c<q8;c++){const d=`border${DR[c]}Radius`;let h=IE(e,d),f=IE(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||NE(h)===NE(f)?(t[d]=Math.max(vt(RE(h),RE(f),i),0),(gr.test(f)||gr.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=vt(e.rotate||0,n.rotate||0,i))}function IE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $8=MR(0,.5,vC),G8=MR(.5,.95,pi);function MR(t,e,n){return i=>i<t?0:i>e?1:n(ju(t,e,i))}function kE(t,e){t.min=e.min,t.max=e.max}function li(t,e){kE(t.x,e.x),kE(t.y,e.y)}function DE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ME(t,e,n,i,a){return t-=e,t=Qf(t,1/n,i),a!==void 0&&(t=Qf(t,1/a,i)),t}function K8(t,e=0,n=1,i=.5,a,o=t,c=t){if(gr.test(e)&&(e=parseFloat(e),e=vt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=vt(o.min,o.max,i);t===o&&(d-=e),t.min=ME(t.min,e,n,d,a),t.max=ME(t.max,e,n,d,a)}function OE(t,e,[n,i,a],o,c){K8(t,e[n],e[i],e[a],e.scale,o,c)}const Y8=["x","scaleX","originX"],Q8=["y","scaleY","originY"];function VE(t,e,n,i){OE(t.x,e,Y8,n?n.x:void 0,i?i.x:void 0),OE(t.y,e,Q8,n?n.y:void 0,i?i.y:void 0)}function PE(t){return t.translate===0&&t.scale===1}function OR(t){return PE(t.x)&&PE(t.y)}function jE(t,e){return t.min===e.min&&t.max===e.max}function X8(t,e){return jE(t.x,e.x)&&jE(t.y,e.y)}function LE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function VR(t,e){return LE(t.x,e.x)&&LE(t.y,e.y)}function UE(t){return En(t.x)/En(t.y)}function zE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class W8{constructor(){this.members=[]}add(e){kv(this.members,e),e.scheduleRender()}remove(e){if(Dv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Z8(t,e,n){let i="";const a=t.x.translate/e.x,o=t.y.translate/e.y,c=n?.z||0;if((a||o||c)&&(i=`translate3d(${a}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:b,rotateY:_,skewX:E,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),b&&(i+=`rotateX(${b}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),k&&(i+=`skewY(${k}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(i+=`scale(${d}, ${h})`),i||"none"}const y0=["","X","Y","Z"],J8=1e3;let ez=0;function v0(t,e,n,i){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),i&&(i[t]=0))}function PR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_R(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(a||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&PR(i)}function jR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(c={},d=e?.()){this.id=ez++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(iz),this.nodes.forEach(oz),this.nodes.forEach(lz),this.nodes.forEach(rz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new B8)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Vv),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=WC(c)&&!GL(c),this.instance=c;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let g,b=0;const _=()=>this.root.updateBlockedByResize=!1;yt.read(()=>{b=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==b&&(b=E,this.root.updateBlockedByResize=!0,g&&g(),g=F8(_,250),yf.hasAnimatedSinceResize&&(yf.hasAnimatedSinceResize=!1,this.nodes.forEach(qE)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b,hasRelativeLayoutChanged:_,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||f.getDefaultTransition()||fz,{onLayoutAnimationStart:A,onLayoutAnimationComplete:N}=f.getProps(),O=!this.targetLayout||!VR(this.targetLayout,E),z=!b&&_;if(this.options.layoutRoot||this.resumeFrom||z||b&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...Yv(k,"layout"),onPlay:A,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,z)}else b||qE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cz),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const b=this.path[g];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(FE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(az),this.nodes.forEach(tz),this.nodes.forEach(nz)):this.nodes.forEach(FE),this.clearAllSnapshots();const d=On.now();on.delta=is(0,1e3/60,d-on.timestamp),on.timestamp=d,on.isProcessing=!0,a0.update.process(on),a0.preRender.process(on),a0.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sz),this.sharedNodes.forEach(uz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!En(this.snapshot.measuredBox.x)&&!En(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!OR(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(d||Ja(this.latestValues)||g)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),mz(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return It();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(pz))){const{scroll:f}=this.root;f&&(bl(d.x,f.offset.x),bl(d.y,f.offset.y))}return d}removeElementScroll(c){const d=It();if(li(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:b}=f;f!==this.root&&g&&b.layoutScroll&&(g.wasRoot&&li(d,c),bl(d.x,g.offset.x),bl(d.y,g.offset.y))}return d}applyTransform(c,d=!1){const h=It();li(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&_l(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ja(g.latestValues)&&_l(h,g.latestValues)}return Ja(this.latestValues)&&_l(h,this.latestValues),h}removeTransform(c){const d=It();li(d,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ja(f.latestValues))continue;fy(f.latestValues)&&f.updateSnapshot();const g=It(),b=f.measurePageBox();li(g,b),VE(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Ja(this.latestValues)&&VE(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:b}=this.options;if(!(!this.layout||!(g||b))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),xu(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),w8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):li(this.target,this.layout.layoutBox),mR(this.target,this.targetDelta)):li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),xu(this.relativeTargetOrigin,this.target,_.target),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fy(this.parent.latestValues)||fR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===on.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;li(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,_=this.treeScale.y;VU(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=It());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DE(this.prevProjectionDelta.x,this.projectionDelta.x),DE(this.prevProjectionDelta.y,this.projectionDelta.y)),Tu(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==_||!zE(this.projectionDelta.x,this.prevProjectionDelta.x)||!zE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wl(),this.projectionDelta=wl(),this.projectionDeltaWithTransform=wl()}setAnimationOrigin(c,d=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},b=wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=It(),E=h?h.source:void 0,k=this.layout?this.layout.source:void 0,A=E!==k,N=this.getStack(),O=!N||N.members.length<=1,z=!!(A&&!O&&this.options.crossfade===!0&&!this.path.some(hz));this.animationProgress=0;let P;this.mixTargetDelta=H=>{const te=H/1e3;HE(b.x,c.x,te),HE(b.y,c.y,te),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dz(this.relativeTarget,this.relativeTargetOrigin,_,te),P&&X8(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=It()),li(P,this.relativeTarget)),A&&(this.animationValues=g,H8(g,f,this.latestValues,te,z,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{yf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ll(0)),this.currentAnimation=U8(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(J8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:g}=c;if(!(!d||!h||!f)){if(this!==c&&this.layout&&f&&LR(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||It();const b=En(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+b;const _=En(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+_}li(d,h),_l(d,g),Tu(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new W8),this.sharedNodes.get(c).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&v0("z",c,f,this.animationValues);for(let g=0;g<y0.length;g++)v0(`rotate${y0[g]}`,c,f,this.animationValues),v0(`skew${y0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=gf(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=gf(d?.pointerEvents)||""),this.hasProjected&&!Ja(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let b=Z8(this.projectionDeltaWithTransform,this.treeScale,g);h&&(b=h(g,b)),c.transform=b;const{x:_,y:E}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Bu){if(g[k]===void 0)continue;const{correct:A,applyTo:N,isCSSVariable:O}=Bu[k],z=b==="none"?g[k]:A(g[k],f);if(N){const P=N.length;for(let H=0;H<P;H++)c[N[H]]=z}else O?this.options.visualElement.renderState.vars[k]=z:c[k]=z}this.options.layoutId&&(c.pointerEvents=f===this?gf(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(BE),this.root.sharedNodes.clear()}}}function tz(t){t.updateLayout()}function nz(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?ci(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=En(b);b.min=n[g].min,b.max=b.min+_}):LR(a,e.layoutBox,n)&&ci(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=En(n[g]);b.max=b.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const c=wl();Tu(c,n,e.layoutBox);const d=wl();o?Tu(d,t.applyTransform(i,!0),e.measuredBox):Tu(d,n,e.layoutBox);const h=!OR(c);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:b,layout:_}=g;if(b&&_){const E=It();xu(E,e.layoutBox,b.layoutBox);const k=It();xu(k,n,_.layoutBox),VR(E,k)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function iz(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sz(t){t.clearSnapshot()}function BE(t){t.clearMeasurements()}function FE(t){t.isLayoutDirty=!1}function az(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function oz(t){t.resolveTargetDelta()}function lz(t){t.calcProjection()}function cz(t){t.resetSkewAndRotation()}function uz(t){t.removeLeadSnapshot()}function HE(t,e,n){t.translate=vt(e.translate,0,n),t.scale=vt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $E(t,e,n,i){t.min=vt(e.min,n.min,i),t.max=vt(e.max,n.max,i)}function dz(t,e,n,i){$E(t.x,e.x,n.x,i),$E(t.y,e.y,n.y,i)}function hz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fz={duration:.45,ease:[.4,0,.1,1]},GE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KE=GE("applewebkit/")&&!GE("chrome/")?Math.round:pi;function YE(t){t.min=KE(t.min),t.max=KE(t.max)}function mz(t){YE(t.x),YE(t.y)}function LR(t,e,n){return t==="position"||t==="preserve-aspect"&&!_8(UE(e),UE(n),.2)}function pz(t){return t!==t.root&&t.scroll?.wasRoot}const gz=jR({attachResizeListener:(t,e)=>Fu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),b0={current:void 0},UR=jR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!b0.current){const t=new gz({});t.mount(window),t.setOptions({layoutScroll:!0}),b0.current=t}return b0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yz={pan:{Feature:V8},drag:{Feature:O8,ProjectionNode:UR,MeasureLayout:kR}};function QE(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=i[a];o&&yt.postRender(()=>o(e,ld(e)))}class vz extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=BL(e,(n,i)=>(QE(this.node,i,"Start"),a=>QE(this.node,a,"End"))))}unmount(){}}class bz extends ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Fu(this.node.current,"focus",()=>this.onFocus()),Fu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XE(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=i[a];o&&yt.postRender(()=>o(e,ld(e)))}class _z extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=$L(e,(n,i)=>(XE(this.node,i,"Start"),(a,{success:o})=>XE(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _y=new WeakMap,_0=new WeakMap,wz=t=>{const e=_y.get(t.target);e&&e(t)},Tz=t=>{t.forEach(wz)};function xz({root:t,...e}){const n=t||document;_0.has(n)||_0.set(n,{});const i=_0.get(n),a=JSON.stringify(e);return i[a]||(i[a]=new IntersectionObserver(Tz,{root:t,...e})),i[a]}function Ez(t,e,n){const i=xz(e);return _y.set(t,n),i.observe(t),()=>{_y.delete(t),i.unobserve(t)}}const Sz={some:0,all:1};class Az extends ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:Sz[a]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:b}=this.node.getProps(),_=f?g:b;_&&_(h)};return Ez(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Cz(e,n))&&this.startObserver()}unmount(){}}function Cz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Rz={inView:{Feature:Az},tap:{Feature:_z},focus:{Feature:bz},hover:{Feature:vz}},Nz={layout:{ProjectionNode:UR,MeasureLayout:kR}},Iz={...m8,...Rz,...yz,...Nz},Pm=DU(Iz,$U);function kz(t){t.values.forEach(e=>e.stop())}function wy(t,e){[...e].reverse().forEach(i=>{const a=t.getVariant(i);a&&lb(t,a),t.variantChildren&&t.variantChildren.forEach(o=>{wy(o,e)})})}function Dz(t,e){if(Array.isArray(e))return wy(t,e);if(typeof e=="string")return wy(t,[e]);lb(t,e)}function Mz(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const a=[];return t.forEach(o=>{a.push(xR(o,n,{transitionOverride:i}))}),Promise.all(a)},set(n){return t.forEach(i=>{Dz(i,n)})},stop(){t.forEach(n=>{kz(n)})},mount(){return()=>{e.stop()}}};return e}function Oz(){const t=km(Mz);return Iv(t.mount,[]),t}const Vz=Oz,zR=({children:t,onDelete:e,threshold:n=-100})=>{const i=Vz(),[a,o]=V.useState(!1),c=V.useRef(0),d=()=>{o(!0),c.current=Date.now()},h=async(f,g)=>{const b=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),b<n||b<-50&&_<-500?e():i.start({x:0})};return v.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[v.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:v.jsx(ro,{className:"text-white w-6 h-6"})}),v.jsx(Pm.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:d,onDragEnd:h,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},WE=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),Pz=()=>{const{id:t}=ck(),{envelopes:e,transactions:n,fetchData:i,isLoading:a,deleteEnvelope:o,renameEnvelope:c,updateTransaction:d,deleteTransaction:h,restoreTransaction:f,getEnvelopeBalance:g}=jn(),{showToast:b}=Cv(),_=ma(),E=fa(),[k,A]=V.useState(!1),[N,O]=V.useState(!1),[z,P]=V.useState(!1),[H,te]=V.useState(null);V.useEffect(()=>{e.length===0&&i()},[]);const ee=e.find(D=>D.id===t);if(!ee)return a?v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Loading envelope..."})}):v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Envelope not found."})});const S=n.filter(D=>D.envelopeId===ee.id).sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime()),R=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},M=()=>{t&&(o(t),_(-1))},j=D=>{const F={...D,reconciled:!D.reconciled};d(F)};return v.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[v.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[v.jsx("button",{onClick:()=>{const D=prompt("Rename envelope:",ee.name);D&&D.trim()&&t&&c(t,D)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),v.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.name}),v.jsx("button",{onClick:R,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),v.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const D=g(ee.id).toNumber();return console.log(`Debug: Envelope ${ee.name} Balance:`,D),v.jsx("span",{className:`text-xl font-bold ${D<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:WE(D)})})()]}),v.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[v.jsx("span",{children:"Budget"}),v.jsx("span",{children:WE(ee.currentBalance||0)})]})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[v.jsx(wD,{className:"w-5 h-5 mr-3"}),"Add Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[v.jsx(bD,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[v.jsx(uD,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),v.jsxs("section",{className:"mt-6",children:[v.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:S.length===0?v.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):v.jsx(Jv,{initial:!1,mode:"popLayout",children:S.map(D=>v.jsx(Pm.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(zR,{onDelete:()=>{if(!D.id)return;const F={...D};h(D.id),b("Transaction deleted","neutral",()=>f(F))},children:v.jsx(oC,{transaction:D,onReconcile:()=>j(D),onEdit:()=>te(D)})})},D.id))})})]}),v.jsx("div",{className:"mt-8",children:v.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${ee.name}"? This will delete all transactions.`)&&M()},children:[v.jsx(yS,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(k||N||H)&&v.jsx(aC,{isVisible:k||N||!!H,onClose:()=>{A(!1),O(!1),te(null)},mode:k?"add":N?"spend":"edit",currentEnvelope:ee,initialTransaction:H}),z&&v.jsx(Xj,{isVisible:z,onClose:()=>P(!1),sourceEnvelope:ee})]})},jz="1.1.0",Lz={version:jz},Uz=()=>{const t=ma(),e=V.useRef(null),{envelopes:n,transactions:i,distributionTemplates:a,resetData:o,importData:c,getEnvelopeBalance:d,appSettings:h,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:b}=jn(),{currentUser:_,deleteAccount:E}=Mi(),[k,A]=V.useState(null),[N,O]=V.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[z,P]=V.useState(!1),[H,te]=V.useState(!1),[ee,S]=V.useState(""),[R,M]=V.useState(!1),j=978307200,D=h?.theme??"system";V.useEffect(()=>{h||g().catch(L=>{console.error("Failed to initialize app settings:",L)})},[h,g]);const F=(L,G)=>{A({type:L,text:G}),setTimeout(()=>A(null),3500)},U=V.useMemo(()=>{const L=n.length,G=i.length,ue=a.length,de=n.reduce((ht,Ke)=>ht+d(Ke.id).toNumber(),0),ye=0,we=i.reduce((ht,Ke)=>{let _n=0;if(typeof Ke.date=="string"){const Ln=Date.parse(Ke.date);_n=Number.isNaN(Ln)?0:Ln}else typeof Ke.date=="number"&&(_n=Ke.date<2e9?(Ke.date+j)*1e3:Ke.date);return Math.max(ht,_n)},0),xe=ye||we?new Date(Math.max(ye,we)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:L,transactionCount:G,templateCount:ue,totalBalance:de,lastUpdated:xe}},[n,i,a]),Me=()=>{try{const L={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:h||{theme:"system"},envelopes:n.map(we=>({...we,currentBalance:d(we.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:a},G=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),ue=URL.createObjectURL(G),de=document.createElement("a");de.href=ue,de.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(ue);const ye=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ye),O(ye),F("success","Backup downloaded successfully.")}catch(L){console.error(L),F("error","Failed to create backup file.")}},he=()=>{try{const L=["Date","Description","Amount","Type","Envelope","Reconciled"],G=i.map(xe=>{const ht=n.find(Ln=>Ln.id===xe.envelopeId)?.name||"Unknown",Ke=(xe.description||"").replace(/"/g,'""');let _n="Invalid Date";if(xe.date){if(typeof xe.date=="string")_n=xe.date.split("T")[0];else if(typeof xe.date=="number"){const Ln=xe.date<2e9?(xe.date+j)*1e3:xe.date;_n=new Date(Ln).toISOString().split("T")[0]}}return[_n,`"${Ke}"`,xe.amount.toFixed(2),xe.type,`"${ht}"`,xe.reconciled?"Yes":"No"].join(",")}),ue=[L.join(","),...G].join(`
`),de=new Blob([ue],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(de),we=document.createElement("a");we.href=ye,we.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(ye),F("success","CSV export ready to open in Excel/Numbers.")}catch(L){console.error(L),F("error","Failed to export CSV.")}},$=()=>{e.current?.click()},ae=L=>{const G=L.target.files?.[0];if(!G)return;const ue=new FileReader;ue.onload=async de=>{try{const ye=JSON.parse(de.target?.result),we=await c(ye);if(!we.success){F("error",we.message);return}if(ye.appSettings?.theme)try{await f({theme:ye.appSettings.theme})}catch(xe){console.error("Failed to update imported settings:",xe)}else if(ye.appSettings?.isDarkMode!==void 0)try{const xe=ye.appSettings.isDarkMode?"dark":"light";await f({theme:xe})}catch(xe){console.error("Failed to update imported settings:",xe)}F("success",`Loaded ${ye.envelopes?.length??0} envelopes, ${ye.transactions?.length??0} transactions, and ${ye.distributionTemplates?.length??0} templates.`)}catch(ye){console.error(ye),F("error","Invalid backup file. Please verify the JSON.")}},ue.readAsText(G),L.target.value=""},me=async()=>{P(!0);try{F("success","Scanning templates for orphaned references..."),await b(),F("success","Orphaned templates have been cleaned up successfully.")}catch(L){console.error("Template cleanup failed:",L),F("error","Failed to clean up orphaned templates. Check console for details.")}finally{P(!1)}},_e=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),F("success","All data has been permanently deleted."),t("/")}catch(L){console.error("Reset failed:",L),F("error","Failed to delete all data. Some data may remain.")}},le=async()=>{if(!ee.trim()){F("error","Please enter your password to confirm account deletion.");return}te(!0);try{await o(),await E(ee)?F("success","Your account has been permanently deleted."):F("error","Failed to delete account. Please try again.")}catch(L){console.error("Account deletion failed:",L),F("error","Failed to delete account. Please try again.")}finally{te(!1),M(!1),S("")}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[v.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),v.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[k&&v.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${k.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[k.type==="success"?v.jsx(Ry,{size:18}):v.jsx(ro,{size:18}),k.text]}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(bf,{className:"text-blue-500",size:22}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.envelopeCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.transactionCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.templateCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),v.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.lastUpdated})]})]})]})}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[D==="light"&&v.jsx("span",{className:"text-orange-500 text-lg",children:""}),D==="dark"&&v.jsx("span",{className:"text-purple-500 text-lg",children:""}),D==="system"&&v.jsx("span",{className:"text-gray-500 text-lg",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:D})]}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),v.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(L=>v.jsx("button",{onClick:async()=>{try{await f({theme:L.value})}catch(G){console.error("Failed to update theme setting:",G)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${D===L.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:L.label},L.value))})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[v.jsxs("button",{onClick:Me,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(bf,{className:"text-blue-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",N]})]})]}),v.jsx(Wa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:$,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(d4,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),v.jsx(Wa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:he,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(DD,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),v.jsx(Wa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:me,disabled:z,className:`w-full p-4 flex items-center justify-between transition-colors ${z?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[z?v.jsx(Zw,{className:"text-blue-500 animate-spin",size:20}):v.jsx(co,{className:"text-blue-500",size:20}),v.jsx("span",{className:`font-medium ${z?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:z?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),z?v.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):v.jsx(Wa,{className:"text-gray-400",size:18})]}),v.jsx("input",{type:"file",ref:e,onChange:ae,accept:".json",className:"hidden"})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[v.jsx("p",{children:"Create regular backups before major changes."}),v.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),v.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),v.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[v.jsxs("button",{onClick:_e,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(ro,{className:"text-red-500 group-hover:text-red-600",size:20}),v.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),v.jsx(Wa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:()=>M(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(ro,{className:"text-red-600 group-hover:text-red-700",size:20}),v.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),v.jsx(Wa,{className:"text-gray-400",size:18})]})]}),v.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[v.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),v.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),v.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",Lz.version]})]}),R&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:v.jsx(vS,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),v.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:v.jsx(Gu,{size:20})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[v.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),v.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",v.jsx("span",{className:"font-semibold",children:_?.email})]}),v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),v.jsx("input",{type:"password",value:ee,onChange:L=>S(L.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:H})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>M(!1),disabled:H,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),v.jsx("button",{onClick:le,disabled:H||!ee.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H?v.jsxs(v.Fragment,{children:[v.jsx(Zw,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},zz=()=>{const t=ma(),{createEnvelope:e}=jn(),[n,i]=V.useState(""),[a,o]=V.useState(""),c=d=>{if(d.preventDefault(),!n.trim())return;const h=parseFloat(a),f=isNaN(h)?0:h,g=jn.getState().envelopes,_=(g.length>0?Math.max(...g.map(E=>E.orderIndex??0)):-1)+1;e({name:n,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),t("/")};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>t("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(Su,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:v.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:v.jsx(OD,{size:40})})}),v.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),v.jsx("input",{type:"text",id:"name",value:n,onChange:d=>i(d.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"balance",value:a,onChange:d=>o(d.target.value),onKeyDown:d=>{(d.key==="e"||d.key==="E"||d.key==="+"||d.key==="-")&&d.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>t("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!n.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${n.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},Bz=()=>{const t=ma(),{envelopes:e,getEnvelopeBalance:n,addToEnvelope:i,spendFromEnvelope:a}=jn(),[o,c]=V.useState(""),[d,h]=V.useState(""),[f,g]=V.useState(new Date().toISOString().split("T")[0]),[b,_]=V.useState(""),[E,k]=V.useState("expense"),A=o&&parseFloat(o)>0&&b,N=P=>{if(P.preventDefault(),!A)return;const H=parseFloat(o),te=new Date(f);E==="income"?i(b,H,d,te):a(b,H,d,te),t("/")},O=[...e].sort((P,H)=>{const te=P.orderIndex??0,ee=H.orderIndex??0;return te!==ee?te-ee:P.name.localeCompare(H.name)}),z=E==="income"?"text-green-500":"text-red-500";return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[v.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),v.jsx("button",{onClick:N,disabled:!A,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("form",{onSubmit:N,className:"space-y-6",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:v.jsxs("div",{className:"flex",children:[v.jsx("button",{type:"button",onClick:()=>k("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${E==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),v.jsx("button",{type:"button",onClick:()=>k("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${E==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:o,onChange:P=>{const H=P.target.value;(H===""||!isNaN(parseFloat(H))&&parseFloat(H)>=0)&&c(H)},onKeyDown:P=>{(P.key==="e"||P.key==="E"||P.key==="+"||P.key==="-")&&P.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:d,onChange:P=>h(P.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:f,onChange:P=>g(P.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Envelope"}),v.jsxs("select",{value:b,onChange:P=>_(P.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",children:[v.jsx("option",{value:"",children:"Select an envelope"}),O.map(P=>v.jsxs("option",{value:P.id,children:[P.name," ($",n(P.id).toNumber().toFixed(2),")"]},P.id))]})]})]})})]})},Fz=()=>{const t=ma(),{transactions:e,envelopes:n,updateTransaction:i,deleteTransaction:a,restoreTransaction:o}=jn(),{showToast:c}=Cv(),[d,h]=V.useState(!1),[f,g]=V.useState(""),[b,_]=V.useState("all"),[E,k]=V.useState("All"),[A,N]=V.useState(!1),[O,z]=V.useState(()=>{const j=new Date;return j.setMonth(j.getMonth()-1),j.toISOString().split("T")[0]}),[P,H]=V.useState(()=>new Date().toISOString().split("T")[0]),[te,ee]=V.useState(null),S=V.useMemo(()=>e.map(D=>{if(!D)return null;let F=D.date;if(typeof D.date=="number"){const Me=(D.date+978307200)*1e3;F=new Date(Me).toISOString()}else if(!D.date||typeof D.date!="string")return null;return{...D,date:F}}).filter(Boolean).filter(D=>{if(f){const U=f.toLowerCase(),Me=n.find(ae=>ae.id===D.envelopeId)?.name.toLowerCase()||"",he=D.amount.toFixed(2);if(!(D.description.toLowerCase().includes(U)||Me.includes(U)||he.includes(U)))return!1}if(b!=="all"&&D.envelopeId!==b||E!=="All"&&D.type!==E||!D.date||typeof D.date!="string")return!1;const F=D.date.split("T")[0];return!(F<O||F>P||A&&!D.reconciled)}).sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime()),[e,n,f,b,E,O,P,A]),R=te?n.find(j=>j.id===te.envelopeId):null,M=j=>{const D={...j,reconciled:!j.reconciled};i(D)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:v.jsx(Su,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),v.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-full transition-colors ${d?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:v.jsx(PD,{size:20,className:d?"fill-current":""})})]}),v.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${d?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(XD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),v.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:j=>g(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&v.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:v.jsx(Gu,{size:16})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),v.jsxs("select",{value:b,onChange:j=>_(j.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((j,D)=>j.name.localeCompare(D.name)).map(j=>v.jsx("option",{value:j.id,children:j.name},j.id))]})]}),v.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(j=>v.jsx("button",{onClick:()=>k(j),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${E===j?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:j},j))}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:O,onChange:j=>z(j.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:P,onChange:j=>H(j.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),v.jsx("button",{onClick:()=>N(!A),className:`w-11 h-6 rounded-full transition-colors relative ${A?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${A?"translate-x-5":"translate-x-0"}`})})]})]})}),v.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:S.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):v.jsx(Jv,{initial:!1,mode:"popLayout",children:S.map(j=>{const D=n.find(F=>F.id===j.envelopeId);return v.jsx(Pm.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(zR,{onDelete:()=>{if(!j.id)return;const F={...j};a(j.id),c("Transaction deleted","neutral",()=>o(F))},children:v.jsx(oC,{transaction:j,envelopeName:D?.name||"Unknown Envelope",onReconcile:()=>M(j),onEdit:()=>{D?ee(j):alert("Cannot edit: Envelope deleted.")}})})},j.id)})})})}),te&&R&&v.jsx(aC,{isVisible:!!te,onClose:()=>ee(null),mode:"edit",currentEnvelope:R,initialTransaction:te})]})},BR=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],qz=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const i=BR.map(d=>({...d,met:d.regex.test(t)})).filter(d=>d.met).length;let a,o,c;return i<=1?(a="weak",o="text-red-500",c="Weak"):i<=3?(a="medium",o="text-yellow-500",c="Medium"):i===4?(a="strong",o="text-blue-500",c="Strong"):(a="very-strong",o="text-green-500",c="Very Strong"),{score:i,level:a,color:o,label:c}},ub=t=>{const e=BR.map(a=>({...a,met:a.regex.test(t)})),n=qz(t),i=e.every(a=>a.met);return{requirements:e,strength:n,isValid:i,isEmpty:!t.trim()}},Hz=({password:t,className:e=""})=>{const{strength:n,isEmpty:i}=ub(t);return i?null:v.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(a=>v.jsx("div",{className:`h-1 flex-1 rounded-full ${a<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},a))})}),v.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},$z=({password:t,className:e=""})=>{const{requirements:n,isEmpty:i}=ub(t);return i?null:v.jsx("div",{className:`space-y-1 ${e}`,children:n.map(a=>v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.met?v.jsx(hD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):v.jsx(Gu,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),v.jsx("span",{className:a.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:a.label})]},a.id))})},Gz=()=>{const[t,e]=V.useState(""),[n,i]=V.useState(""),[a,o]=V.useState(""),[c,d]=V.useState(!1),[h,f]=V.useState(!1),[g,b]=V.useState(!1),[_,E]=V.useState(!1),{login:k,register:A,sendPasswordReset:N,isLoading:O,loginError:z,clearError:P}=Mi(),H=ub(n),te=async S=>{if(S.preventDefault(),P(),t.trim()&&n.trim())if(h){if(!a.trim()||!H.isValid)return;await A(t.trim(),n,a.trim())}else await k(t.trim(),n)},ee=async S=>{S.preventDefault(),t.trim()&&await N(t.trim())&&E(!0)};return V.useEffect(()=>{e(""),i(""),o(""),E(!1)},[h,g]),v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?v.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(x0,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"reset-email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:O,autoComplete:"email"})]})]}),_?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:v.jsx(x0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),v.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",v.jsx("span",{className:"font-medium",children:t})]}),v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[v.jsx(Su,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"submit",disabled:O||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:O?"Sending...":"Send Reset Link"}),v.jsx("div",{className:"mt-4 text-center",children:v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:O,children:[v.jsx(Su,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):v.jsxs("form",{onSubmit:te,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Create Account":"Sign In"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:h?"Create a new account to get started":"Sign in to your account"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:O,autoComplete:"username"})]}),h&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),v.jsx("input",{id:"displayName",type:"text",value:a,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:O})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!h&&v.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:O,children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"password",type:c?"text":"password",value:n,onChange:S=>i(S.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${h&&n&&!H.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:O,autoComplete:h?"new-password":"current-password"}),v.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:O,children:c?v.jsx(RD,{className:"h-5 w-5"}):v.jsx(ID,{className:"h-5 w-5"})})]}),h&&n&&v.jsx("div",{className:"mt-2",children:v.jsx(Hz,{password:n})}),h&&n&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:v.jsx($z,{password:n})})]}),z&&v.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[z,z.includes("verify your email")&&v.jsx("div",{className:"mt-3",children:v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),v.jsx("button",{type:"submit",disabled:O||!t.trim()||!n.trim()||h&&!a.trim()||h&&!H.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:O?h?"Creating Account...":"Signing in...":h?"Create Account":"Sign In"}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("button",{type:"button",onClick:()=>{f(!h),b(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:O,children:[v.jsx(f4,{className:"h-4 w-4"}),h?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},ZE=()=>{const[t,e]=V.useState(!1),[n,i]=V.useState(!1),{currentUser:a,resendEmailVerification:o,logout:c,loginError:d}=Mi();V.useEffect(()=>{a||console.warn("EmailVerificationView: No current user, this should not happen")},[a]);const h=async()=>{e(!0),i(!1);const g=await o();e(!1),g&&(i(!0),setTimeout(()=>i(!1),3e3))},f=async()=>{await c()};return a?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:v.jsx(x0,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.email})]}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(Ry,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),v.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[v.jsx("li",{children:"1. Open your email inbox"}),v.jsx("li",{children:"2. Find the email from House Budget"}),v.jsx("li",{children:'3. Click the "Verify Email" link'}),v.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),d&&v.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:d}),n&&v.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),v.jsx("button",{onClick:h,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?v.jsxs(v.Fragment,{children:[v.jsx(co,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(co,{className:"h-4 w-4"}),"Resend verification email"]})}),v.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[v.jsx(Su,{className:"h-4 w-4"}),"Back to sign in"]})]})}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null};class ar{static instance;static getInstance(){return ar.instance||(ar.instance=new ar),ar.instance}async getMonthlyBudget(e,n){try{const i=gn(Dt,"monthlyBudgets",`${e}_${n}`),a=await Dj(i);if(a.exists()){const o=a.data();return{id:o.id,userId:o.userId,month:o.month,totalIncome:parseFloat(o.totalIncome),availableToBudget:parseFloat(o.availableToBudget),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}return null}catch(i){throw console.error("Error getting monthly budget:",i),i}}async createOrUpdateMonthlyBudget(e){try{const n=Ze.now(),i=`${e.userId}_${e.month}`,a={id:i,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await Al(gn(Dt,"monthlyBudgets",i),a),{...e,id:i,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const i=ns(Zs(Dt,"incomeSources"),Gh("userId","==",e),Gh("month","==",n));return(await jl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,month:c.month,name:c.name,amount:parseFloat(c.amount),frequency:c.frequency,category:c.category,createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}})}catch(i){throw console.error("Error getting income sources:",i),i}}async createIncomeSource(e){try{const n=Ze.now(),i=gn(Zs(Dt,"incomeSources")),a={id:i.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await Al(i,a),{...e,frequency:e.frequency||"monthly",id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const i=ns(Zs(Dt,"envelopeAllocations"),Gh("userId","==",e),Gh("month","==",n));return(await jl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,envelopeId:c.envelopeId,month:c.month,budgetedAmount:parseFloat(c.budgetedAmount),createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}})}catch(i){throw console.error("Error getting envelope allocations:",i),i}}async createEnvelopeAllocation(e){try{const n=Ze.now(),i=gn(Zs(Dt,"envelopeAllocations")),a={id:i.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await Al(i,a),{...e,id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,i){try{const a=await this.getIncomeSources(e,n);for(const f of a)await this.createIncomeSource({...f,month:i});const o=await this.getEnvelopeAllocations(e,n);for(const f of o)await this.createEnvelopeAllocation({...f,month:i});const c=a.reduce((f,g)=>f+g.amount,0),d=o.reduce((f,g)=>f+g.budgetedAmount,0),h=c-d;await this.createOrUpdateMonthlyBudget({userId:e,month:i,totalIncome:c,availableToBudget:h})}catch(a){throw console.error("Error copying month data:",a),a}}async calculateAvailableToBudget(e,n){try{const i=await this.getIncomeSources(e,n),a=await this.getEnvelopeAllocations(e,n),o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0);return o-c}catch(i){throw console.error("Error calculating available to budget:",i),i}}}const Kz=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},su=()=>{const t=Mi.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},eo=Zf()(Ny((t,e)=>({currentMonth:Kz(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,setCurrentMonth:n=>{t({currentMonth:n}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{t({isLoading:!0,error:null});const n=su(),i=e().currentMonth,a=ar.getInstance(),[o,c,d]=await Promise.all([a.getMonthlyBudget(n,i),a.getIncomeSources(n,i),a.getEnvelopeAllocations(n,i)]);t({monthlyBudget:o,incomeSources:c,envelopeAllocations:d,isLoading:!1})}catch(n){console.error("Error fetching monthly data:",n),t({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const i=su(),a=e().currentMonth,c=await ar.getInstance().createIncomeSource({...n,userId:i,month:a});t(d=>({incomeSources:[...d.incomeSources,c]})),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error creating income source:",i),i}},updateIncomeSource:async(n,i)=>{try{await e().deleteIncomeSource(n),i.name!==void 0&&i.amount!==void 0&&await e().createIncomeSource({name:i.name,amount:i.amount,frequency:"monthly"})}catch(a){throw console.error("Error updating income source:",a),a}},deleteIncomeSource:async n=>{try{t(i=>({incomeSources:i.incomeSources.filter(a=>a.id!==n)})),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error deleting income source:",i),i}},createEnvelopeAllocation:async n=>{try{const i=su(),a=e().currentMonth,c=await ar.getInstance().createEnvelopeAllocation({...n,userId:i,month:a});t(d=>({envelopeAllocations:[...d.envelopeAllocations,c]})),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error creating envelope allocation:",i),i}},updateEnvelopeAllocation:async(n,i)=>{try{await e().deleteEnvelopeAllocation(n),i.envelopeId!==void 0&&i.budgetedAmount!==void 0&&await e().createEnvelopeAllocation({envelopeId:i.envelopeId,budgetedAmount:i.budgetedAmount})}catch(a){throw console.error("Error updating envelope allocation:",a),a}},deleteEnvelopeAllocation:async n=>{try{t(i=>({envelopeAllocations:i.envelopeAllocations.filter(a=>a.id!==n)})),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error deleting envelope allocation:",i),i}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=su(),i=e().currentMonth,[a,o]=i.split("-").map(Number);let c=a,d=o-1;d<1&&(c=a-1,d=12);const h=`${c}-${d.toString().padStart(2,"0")}`;await ar.getInstance().copyMonthData(n,h,i),await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},calculateAvailableToBudget:()=>{const n=e(),i=n.incomeSources.reduce((o,c)=>o+c.amount,0),a=n.envelopeAllocations.reduce((o,c)=>o+c.budgetedAmount,0);return i-a},refreshAvailableToBudget:async()=>{try{const n=su(),i=e().currentMonth,a=ar.getInstance(),o=await a.calculateAvailableToBudget(n,i),c=e().monthlyBudget;if(c){const d={...c,availableToBudget:o};await a.createOrUpdateMonthlyBudget(d),t({monthlyBudget:d})}else{const d=e().incomeSources.reduce((f,g)=>f+g.amount,0),h=await a.createOrUpdateMonthlyBudget({userId:n,month:i,totalIncome:d,availableToBudget:o});t({monthlyBudget:h})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,i)=>{t({incomeSources:n,envelopeAllocations:i,isLoading:!1})}}),{name:"monthly-budget-store",partialize:t=>({currentMonth:t.currentMonth})})),Yz=({currentMonth:t,onMonthChange:e})=>{const[n,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let f=n,g=i-1;g<1&&(f=n-1,g=12);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},d=()=>{let f=n,g=i+1;g>12&&(f=n+1,g=1);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},h=()=>{const f=new Date,g=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`;e(g)};return v.jsx("div",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 py-3",children:v.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[v.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:v.jsx(gD,{size:20})}),v.jsx("div",{className:"flex-1 text-center",children:v.jsxs("button",{onClick:h,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[o," ",n]})}),v.jsx("button",{onClick:d,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:v.jsx(Wa,{size:20})})]})})},Qz=({amount:t,totalIncome:e,totalAllocated:n,isLoading:i=!1})=>{const a=e>0?n/e*100:0,o=Math.abs(t)<.01,c=t<0,d=t>0,f=o?{icon:Ry,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:c?{icon:a4,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:n4,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"},g=f.icon;return i?v.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),v.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):v.jsxs("div",{className:`rounded-2xl p-6 border ${f.bgColor} ${f.borderColor}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`p-2 rounded-xl ${f.bgColor} ${f.borderColor}`,children:v.jsx(g,{size:24,className:f.color})}),v.jsxs("div",{children:[v.jsx("h3",{className:`font-semibold ${f.color}`,children:f.title}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:f.subtitle})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:`text-3xl font-bold ${f.color}`,children:[c?"-":"","$",Math.abs(t).toFixed(2)]}),o&&v.jsx("div",{className:"text-sm text-green-600 dark:text-emerald-400 font-medium",children:"Perfect Balance"})]})]}),!o&&e>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[v.jsx("span",{children:"Allocated"}),v.jsxs("span",{children:[a.toFixed(0),"% of income"]})]}),v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:v.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${c?"bg-red-500":d?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[v.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),v.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},Xz=({isVisible:t,onClose:e,mode:n,initialIncomeSource:i})=>{const{createIncomeSource:a,updateIncomeSource:o}=eo(),[c,d]=V.useState(""),[h,f]=V.useState(""),[g,b]=V.useState(!1);V.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{n==="edit"&&i?(d(i.name),f(i.amount.toString())):(d(""),f(""))},0);return()=>window.clearTimeout(E)},[t,n,i]);const _=async E=>{if(E.preventDefault(),!(!c.trim()||!h||parseFloat(h)<=0)){b(!0);try{n==="add"?await a({name:c.trim(),amount:parseFloat(h)}):n==="edit"&&i&&await o(i.id,{name:c.trim(),amount:parseFloat(h)}),e()}catch(k){console.error("Error saving income source:",k)}finally{b(!1)}}};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),v.jsx("input",{type:"text",value:c,onChange:E=>d(E.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",value:h,onChange:E=>f(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:g||!c.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},rr={currentMonth:"2025-01",incomeSources:[{id:"income-1",userId:"demo-user",month:"2025-01",name:"Primary Job",amount:4e3,frequency:"monthly",category:"salary",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"income-2",userId:"demo-user",month:"2025-01",name:"Freelance",amount:800,frequency:"monthly",category:"side-hustle",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],envelopeAllocations:[{id:"alloc-1",userId:"demo-user",envelopeId:"env-groceries",month:"2025-01",budgetedAmount:600,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"alloc-2",userId:"demo-user",envelopeId:"env-gas",month:"2025-01",budgetedAmount:200,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"alloc-3",userId:"demo-user",envelopeId:"env-utilities",month:"2025-01",budgetedAmount:300,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},Wz={"env-groceries":"Groceries","env-gas":"Gas","env-utilities":"Utilities","env-entertainment":"Entertainment","env-savings":"Emergency Savings","env-dining":"Dining Out","env-clothing":"Clothing","env-insurance":"Insurance","env-subscriptions":"Subscriptions","env-gifts":"Gifts"},Zz=()=>{const{currentMonth:t,incomeSources:e,envelopeAllocations:n,isLoading:i,calculateAvailableToBudget:a,deleteIncomeSource:o}=eo(),c=G=>{eo.setState({currentMonth:G}),G===rr.currentMonth?eo.setState({incomeSources:rr.incomeSources,envelopeAllocations:rr.envelopeAllocations,isLoading:!1}):eo.setState({incomeSources:[],envelopeAllocations:[],isLoading:!1})},d=()=>{t!==rr.currentMonth&&eo.setState({incomeSources:rr.incomeSources.map(G=>({...G,month:t,id:`${G.id}-${t}`})),envelopeAllocations:rr.envelopeAllocations.map(G=>({...G,month:t,id:`${G.id}-${t}`})),isLoading:!1})},[h,f]=V.useState(!1),[g,b]=V.useState(!1),[_,E]=V.useState("add"),[k,A]=V.useState(null),[N,O]=V.useState(null),[z,P]=V.useState(!1),H=V.useRef(null),te=()=>{E("add"),A(null),b(!0)},ee=G=>{H.current&&(clearTimeout(H.current),H.current=null),!z&&(E("edit"),A(G),b(!0))},S=async G=>{if(H.current&&(clearTimeout(H.current),H.current=null),P(!0),window.confirm(`Delete "${G.name}"? This will affect your available budget.`))try{await o(G.id)}catch(de){console.error("Error deleting income source:",de)}setTimeout(()=>{P(!1)},500)},R=()=>{b(!1),A(null)},[M,j]=V.useState(null),[D,F]=V.useState(null),U=50,Me=G=>{F(null),j(G.targetTouches[0].clientX)},he=G=>{F(G.targetTouches[0].clientX)},$=(G,ue)=>{if(z)return;if(H.current&&(clearTimeout(H.current),H.current=null),!M||!D){H.current=setTimeout(()=>{!z&&N!==G&&ee(ue),H.current=null},50);return}const de=M-D;de>U?O(G):(Math.abs(de)<10&&(H.current=setTimeout(()=>{!z&&N!==G&&ee(ue),H.current=null},50)),O(null))},ae=G=>{if(!z&&(H.current&&(clearTimeout(H.current),H.current=null),N===G.id)){O(null);return}};V.useEffect(()=>{(()=>{h||(eo.setState({currentMonth:rr.currentMonth,incomeSources:rr.incomeSources,envelopeAllocations:rr.envelopeAllocations,isLoading:!1}),f(!0))})()},[h]),V.useEffect(()=>()=>{H.current&&clearTimeout(H.current)},[]);const me=a(),_e=e.reduce((G,ue)=>G+ue.amount,0),le=n.reduce((G,ue)=>G+ue.budgetedAmount,0),L=G=>Wz[G]||`Envelope ${G}`;return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[v.jsx(co,{size:16,className:i?"animate-spin":""}),v.jsx("span",{className:"text-sm font-medium",children:i?"Loading...":"Demo Ready"})]})}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:d,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors text-sm font-medium",disabled:i||t===rr.currentMonth,children:"Copy Month"}),v.jsx(sC,{})]})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Zero-Based Budget Demo"}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400 mt-1",children:"EveryDollar-style monthly budgeting"})]})]}),v.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[v.jsx(Yz,{currentMonth:t,onMonthChange:c}),v.jsx(Qz,{amount:me,totalIncome:_e,totalAllocated:le,isLoading:i}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:te,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(ef,{size:20})})]}),e.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income to get started."})}):v.jsx("div",{className:"space-y-3",children:e.map(G=>v.jsxs("div",{className:"relative flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl group overflow-hidden cursor-pointer md:cursor-default",onTouchStart:Me,onTouchMove:he,onTouchEnd:()=>$(G.id,G),onClick:()=>ae(G),children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:G.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),v.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",G.amount.toFixed(2)]}),v.jsxs("div",{className:"hidden md:flex opacity-0 md:group-hover:opacity-100 transition-opacity gap-1 ml-2",children:[v.jsx("button",{onClick:ue=>{ue.stopPropagation(),ee(G)},className:"p-1 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Edit income source",children:v.jsx(e4,{size:16})}),v.jsx("button",{onClick:ue=>{ue.stopPropagation(),ue.preventDefault(),S(G)},className:"p-1 text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete income source",children:v.jsx(ro,{size:16})})]})]}),N===G.id&&v.jsx("div",{className:"absolute right-0 top-0 h-full flex items-center bg-red-500 rounded-r-xl px-4 md:hidden",children:v.jsx("button",{onClick:ue=>{ue.stopPropagation(),ue.preventDefault(),H.current&&(clearTimeout(H.current),H.current=null),O(null),S(G)},className:"p-2 text-white hover:bg-red-600 rounded transition-colors",title:"Delete income source",children:v.jsx(ro,{size:20})})})]},G.id))})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Envelope Allocations"}),v.jsx("button",{className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(ef,{size:20})})]}),n.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No allocations yet. Fund envelopes from your available budget."})}):v.jsx("div",{className:"space-y-3",children:n.map(G=>v.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:L(G.envelopeId)}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Budgeted this month"})]}),v.jsxs("p",{className:"font-semibold text-blue-600 dark:text-blue-400",children:["$",G.budgetedAmount.toFixed(2)]})]},G.id))})]}),v.jsxs("section",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-4 border border-blue-200 dark:border-blue-800",children:[v.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Demo Instructions"}),v.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[v.jsx("li",{children:" Use month selector to navigate between months"}),v.jsx("li",{children:' "Copy Month" copies data from previous month'}),v.jsx("li",{children:" Available to Budget shows your zero-based progress"}),v.jsx("li",{children:" Goal: Get Available to Budget to $0.00"})]})]})]}),v.jsx("button",{className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",onClick:()=>{},children:v.jsx(ef,{size:28})}),v.jsx(Xz,{isVisible:g,onClose:R,mode:_,initialIncomeSource:k})]})},Jz=()=>{const{message:t,type:e,isVisible:n,undoAction:i,hideToast:a}=Cv(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return v.jsx(Jv,{children:n&&v.jsx(Pm.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:v.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[v.jsx("div",{className:"flex items-center flex-1 min-w-0",children:v.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),v.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&v.jsxs("button",{onClick:()=>{i(),a()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[v.jsx(c4,{size:14,className:"inline mr-1"}),"Undo"]}),v.jsx("button",{onClick:a,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:v.jsx(Gu,{size:16})})]})]})})})};class Ni extends V.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((i,a)=>i!==e.resetKeys?.[a])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[v.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(vS,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[v.jsx(co,{className:"h-4 w-4"}),"Try Again"]}),v.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[v.jsx(UD,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}function e7(){const[t,e]=V.useState(!0),{appSettings:n}=jn(),{isAuthenticated:i,isInitialized:a,initializeAuth:o,lastAuthTime:c,offlineGracePeriod:d,currentUser:h}=Mi();if(V.useEffect(()=>{const b=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(b)},[]),V.useEffect(()=>o(),[o]),V.useEffect(()=>{const b=document.documentElement,_=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{const k=n?.theme??"system",A=_.matches;k==="dark"||k==="system"&&A?b.classList.add("dark"):b.classList.remove("dark")};if(E(),n?.theme==="system")return _.addEventListener("change",E),()=>_.removeEventListener("change",E)},[n]),t||!a)return v.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:v.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"Personal Budget"})});if(!i)return h?v.jsx(Ni,{children:v.jsx(ZE,{})}):v.jsx(Ni,{children:v.jsx(Gz,{})});const g=typeof navigator<"u"&&!navigator.onLine&&i&&c&&Date.now()-c<d;return v.jsxs(Ni,{children:[g&&v.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((d-(Date.now()-c))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),v.jsx(Kk,{children:v.jsxs(Ek,{children:[v.jsx(Br,{path:"/",element:v.jsx(Ni,{children:v.jsx(Qj,{})})}),v.jsx(Br,{path:"/envelope/:id",element:v.jsx(Ni,{children:v.jsx(Pz,{})})}),v.jsx(Br,{path:"/add-envelope",element:v.jsx(Ni,{children:v.jsx(zz,{})})}),v.jsx(Br,{path:"/add-transaction",element:v.jsx(Ni,{children:v.jsx(Bz,{})})}),v.jsx(Br,{path:"/transactions",element:v.jsx(Ni,{children:v.jsx(Fz,{})})}),v.jsx(Br,{path:"/settings",element:v.jsx(Ni,{children:v.jsx(Uz,{})})}),v.jsx(Br,{path:"/verify-email",element:v.jsx(Ni,{children:v.jsx(ZE,{})})}),v.jsx(Br,{path:"/monthly-budget-demo",element:v.jsx(Ni,{children:v.jsx(Zz,{})})})]})}),v.jsx(Jz,{})]})}DI({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});RI.createRoot(document.getElementById("root")).render(v.jsx(V.StrictMode,{children:v.jsx(e7,{})}));
