(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function kI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ug={exports:{}},mu={};var jw;function DI(){if(jw)return mu;jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:c,ref:s!==void 0?s:null,props:o}}return mu.Fragment=e,mu.jsx=n,mu.jsxs=n,mu}var Lw;function MI(){return Lw||(Lw=1,Ug.exports=DI()),Ug.exports}var v=MI(),Fg={exports:{}},Pe={};var zw;function OI(){if(zw)return Pe;zw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function E(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function O(V,J,ie){this.props=V,this.context=J,this.refs=C,this.updater=ie||I}O.prototype.isReactComponent={},O.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},O.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function z(){}z.prototype=O.prototype;function L(V,J,ie){this.props=V,this.context=J,this.refs=C,this.updater=ie||I}var $=L.prototype=new z;$.constructor=L,A($,O.prototype),$.isPureReactComponent=!0;var ne=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(V,J,ie){var he=ie.ref;return{$$typeof:t,type:V,key:J,ref:he!==void 0?he:null,props:ie}}function U(V,J){return M(V.type,J,V.props)}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function B(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ie){return J[ie]})}var j=/\/+/g;function pe(V,J){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):J.toString(36)}function ce(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(te,te):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,J,ie,he,ge){var Ee=typeof V;(Ee==="undefined"||Ee==="boolean")&&(V=null);var Te=!1;if(V===null)Te=!0;else switch(Ee){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(V.$$typeof){case t:case e:Te=!0;break;case g:return Te=V._init,H(Te(V._payload),J,ie,he,ge)}}if(Te)return ge=ge(V),Te=he===""?"."+pe(V,0):he,ne(ge)?(ie="",Te!=null&&(ie=Te.replace(j,"$&/")+"/"),H(ge,J,ie,"",function(rn){return rn})):ge!=null&&(P(ge)&&(ge=U(ge,ie+(ge.key==null||V&&V.key===ge.key?"":(""+ge.key).replace(j,"$&/")+"/")+Te)),J.push(ge)),1;Te=0;var rt=he===""?".":he+":";if(ne(V))for(var Fe=0;Fe<V.length;Fe++)he=V[Fe],Ee=rt+pe(he,Fe),Te+=H(he,J,ie,Ee,ge);else if(Fe=E(V),typeof Fe=="function")for(V=Fe.call(V),Fe=0;!(he=V.next()).done;)he=he.value,Ee=rt+pe(he,Fe++),Te+=H(he,J,ie,Ee,ge);else if(Ee==="object"){if(typeof V.then=="function")return H(ce(V),J,ie,he,ge);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Te}function W(V,J,ie){if(V==null)return V;var he=[],ge=0;return H(V,he,"","",function(Ee){return J.call(ie,Ee,ge++)}),he}function fe(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=ie)},function(ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=ie)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var _e=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},se={map:W,forEach:function(V,J,ie){W(V,function(){J.apply(this,arguments)},ie)},count:function(V){var J=0;return W(V,function(){J++}),J},toArray:function(V){return W(V,function(J){return J})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Pe.Activity=b,Pe.Children=se,Pe.Component=O,Pe.Fragment=n,Pe.Profiler=s,Pe.PureComponent=L,Pe.StrictMode=i,Pe.Suspense=h,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Pe.cache=function(V){return function(){return V.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(V,J,ie){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=A({},V.props),ge=V.key;if(J!=null)for(Ee in J.key!==void 0&&(ge=""+J.key),J)!R.call(J,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&J.ref===void 0||(he[Ee]=J[Ee]);var Ee=arguments.length-2;if(Ee===1)he.children=ie;else if(1<Ee){for(var Te=Array(Ee),rt=0;rt<Ee;rt++)Te[rt]=arguments[rt+2];he.children=Te}return M(V.type,ge,he)},Pe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Pe.createElement=function(V,J,ie){var he,ge={},Ee=null;if(J!=null)for(he in J.key!==void 0&&(Ee=""+J.key),J)R.call(J,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ge[he]=J[he]);var Te=arguments.length-2;if(Te===1)ge.children=ie;else if(1<Te){for(var rt=Array(Te),Fe=0;Fe<Te;Fe++)rt[Fe]=arguments[Fe+2];ge.children=rt}if(V&&V.defaultProps)for(he in Te=V.defaultProps,Te)ge[he]===void 0&&(ge[he]=Te[he]);return M(V,Ee,ge)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(V){return{$$typeof:d,render:V}},Pe.isValidElement=P,Pe.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:fe}},Pe.memo=function(V,J){return{$$typeof:f,type:V,compare:J===void 0?null:J}},Pe.startTransition=function(V){var J=S.T,ie={};S.T=ie;try{var he=V(),ge=S.S;ge!==null&&ge(ie,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(te,_e)}catch(Ee){_e(Ee)}finally{J!==null&&ie.types!==null&&(J.types=ie.types),S.T=J}},Pe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Pe.use=function(V){return S.H.use(V)},Pe.useActionState=function(V,J,ie){return S.H.useActionState(V,J,ie)},Pe.useCallback=function(V,J){return S.H.useCallback(V,J)},Pe.useContext=function(V){return S.H.useContext(V)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(V,J){return S.H.useDeferredValue(V,J)},Pe.useEffect=function(V,J){return S.H.useEffect(V,J)},Pe.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Pe.useId=function(){return S.H.useId()},Pe.useImperativeHandle=function(V,J,ie){return S.H.useImperativeHandle(V,J,ie)},Pe.useInsertionEffect=function(V,J){return S.H.useInsertionEffect(V,J)},Pe.useLayoutEffect=function(V,J){return S.H.useLayoutEffect(V,J)},Pe.useMemo=function(V,J){return S.H.useMemo(V,J)},Pe.useOptimistic=function(V,J){return S.H.useOptimistic(V,J)},Pe.useReducer=function(V,J,ie){return S.H.useReducer(V,J,ie)},Pe.useRef=function(V){return S.H.useRef(V)},Pe.useState=function(V){return S.H.useState(V)},Pe.useSyncExternalStore=function(V,J,ie){return S.H.useSyncExternalStore(V,J,ie)},Pe.useTransition=function(){return S.H.useTransition()},Pe.version="19.2.0",Pe}var Uw;function Ry(){return Uw||(Uw=1,Fg.exports=OI()),Fg.exports}var D=Ry();const Yh=kI(D);var Bg={exports:{}},pu={},qg={exports:{}},Hg={};var Fw;function PI(){return Fw||(Fw=1,(function(t){function e(H,W){var fe=H.length;H.push(W);e:for(;0<fe;){var _e=fe-1>>>1,se=H[_e];if(0<s(se,W))H[_e]=W,H[fe]=se,fe=_e;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],fe=H.pop();if(fe!==W){H[0]=fe;e:for(var _e=0,se=H.length,V=se>>>1;_e<V;){var J=2*(_e+1)-1,ie=H[J],he=J+1,ge=H[he];if(0>s(ie,fe))he<se&&0>s(ge,ie)?(H[_e]=ge,H[he]=fe,_e=he):(H[_e]=ie,H[J]=fe,_e=J);else if(he<se&&0>s(ge,fe))H[_e]=ge,H[he]=fe,_e=he;else break e}}return W}function s(H,W){var fe=H.sortIndex-W.sortIndex;return fe!==0?fe:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],g=1,b=null,_=3,E=!1,I=!1,A=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function $(H){for(var W=n(f);W!==null;){if(W.callback===null)i(f);else if(W.startTime<=H)i(f),W.sortIndex=W.expirationTime,e(h,W);else break;W=n(f)}}function ne(H){if(A=!1,$(H),!I)if(n(h)!==null)I=!0,te||(te=!0,B());else{var W=n(f);W!==null&&ce(ne,W.startTime-H)}}var te=!1,S=-1,R=5,M=-1;function U(){return C?!0:!(t.unstable_now()-M<R)}function P(){if(C=!1,te){var H=t.unstable_now();M=H;var W=!0;try{e:{I=!1,A&&(A=!1,z(S),S=-1),E=!0;var fe=_;try{t:{for($(H),b=n(h);b!==null&&!(b.expirationTime>H&&U());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,_=b.priorityLevel;var se=_e(b.expirationTime<=H);if(H=t.unstable_now(),typeof se=="function"){b.callback=se,$(H),W=!0;break t}b===n(h)&&i(h),$(H)}else i(h);b=n(h)}if(b!==null)W=!0;else{var V=n(f);V!==null&&ce(ne,V.startTime-H),W=!1}}break e}finally{b=null,_=fe,E=!1}W=void 0}}finally{W?B():te=!1}}}var B;if(typeof L=="function")B=function(){L(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,pe=j.port2;j.port1.onmessage=P,B=function(){pe.postMessage(null)}}else B=function(){O(P,0)};function ce(H,W){S=O(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var fe=_;_=W;try{return H()}finally{_=fe}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var fe=_;_=H;try{return W()}finally{_=fe}},t.unstable_scheduleCallback=function(H,W,fe){var _e=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?_e+fe:_e):fe=_e,H){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=fe+se,H={id:g++,callback:W,priorityLevel:H,startTime:fe,expirationTime:se,sortIndex:-1},fe>_e?(H.sortIndex=fe,e(f,H),n(h)===null&&H===n(f)&&(A?(z(S),S=-1):A=!0,ce(ne,fe-_e))):(H.sortIndex=se,e(h,H),I||E||(I=!0,te||(te=!0,B()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var W=_;return function(){var fe=_;_=W;try{return H.apply(this,arguments)}finally{_=fe}}}})(Hg)),Hg}var Bw;function VI(){return Bw||(Bw=1,qg.exports=PI()),qg.exports}var $g={exports:{}},Tn={};var qw;function jI(){if(qw)return Tn;qw=1;var t=Ry();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:h,containerInfo:f,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},Tn.flushSync=function(h){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=g,i.d.f()}},Tn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Tn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Tn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:E}):g==="script"&&i.d.X(h,{crossOrigin:b,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Tn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Tn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin);i.d.L(h,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Tn.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Tn.requestFormReset=function(h){i.d.r(h)},Tn.unstable_batchedUpdates=function(h,f){return h(f)},Tn.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Tn.version="19.2.0",Tn}var Hw;function LI(){if(Hw)return $g.exports;Hw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$g.exports=jI(),$g.exports}var $w;function zI(){if($w)return pu;$w=1;var t=VI(),e=Ry(),n=LI();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,u=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),r;if(y===u)return h(p),a;y=y.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=y;else{for(var x=!1,N=p.child;N;){if(N===l){x=!0,l=p,u=y;break}if(N===u){x=!0,u=p,l=y;break}N=N.sibling}if(!x){for(N=y.child;N;){if(N===l){x=!0,l=y,u=p;break}if(N===u){x=!0,u=y,l=p;break}N=N.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),L=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var j=Symbol.for("react.client.reference");function pe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===j?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case ne:return"Suspense";case te:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case I:return"Portal";case L:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case $:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return a=r.displayName||null,a!==null?a:pe(r.type)||"Memo";case R:a=r._payload,r=r._init;try{return pe(r(a))}catch{}}return null}var ce=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},_e=[],se=-1;function V(r){return{current:r}}function J(r){0>se||(r.current=_e[se],_e[se]=null,se--)}function ie(r,a){se++,_e[se]=r.current,r.current=a}var he=V(null),ge=V(null),Ee=V(null),Te=V(null);function rt(r,a){switch(ie(Ee,a),ie(ge,r),ie(he,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?aw(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=aw(a),r=ow(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(he),ie(he,r)}function Fe(){J(he),J(ge),J(Ee)}function rn(r){r.memoizedState!==null&&ie(Te,r);var a=he.current,l=ow(a,r.type);a!==l&&(ie(ge,r),ie(he,l))}function xn(r){ge.current===r&&(J(he),J(ge)),Te.current===r&&(J(Te),uu._currentValue=fe)}var Es,Mr;function Kn(r){if(Es===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Es=a&&a[1]||"",Mr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+r+Mr}var qi=!1;function Hi(r,a){if(!r||qi)return"";qi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var X=ee}Reflect.construct(r,[],le)}else{try{le.call()}catch(ee){X=ee}r.call(le.prototype)}}else{try{throw Error()}catch(ee){X=ee}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),x=y[0],N=y[1];if(x&&N){var F=x.split(`
`),Q=N.split(`
`);for(p=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(u===F.length||p===Q.length)for(u=F.length-1,p=Q.length-1;1<=u&&0<=p&&F[u]!==Q[p];)p--;for(;1<=u&&0<=p;u--,p--)if(F[u]!==Q[p]){if(u!==1||p!==1)do if(u--,p--,0>p||F[u]!==Q[p]){var re=`
`+F[u].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=u&&0<=p);break}}}finally{qi=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Kn(l):""}function Oa(r,a){switch(r.tag){case 26:case 27:case 5:return Kn(r.type);case 16:return Kn("Lazy");case 13:return r.child!==a&&a!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return Hi(r.type,!1);case 11:return Hi(r.type.render,!1);case 1:return Hi(r.type,!0);case 31:return Kn("Activity");default:return""}}function Pa(r){try{var a="",l=null;do a+=Oa(r,l),l=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Rt=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,$i=t.unstable_cancelCallback,hc=t.unstable_shouldYield,jo=t.unstable_requestPaint,un=t.unstable_now,Or=t.unstable_getCurrentPriorityLevel,Va=t.unstable_ImmediatePriority,ja=t.unstable_UserBlockingPriority,Gi=t.unstable_NormalPriority,fc=t.unstable_LowPriority,Lo=t.unstable_IdlePriority,we=t.log,Ze=t.unstable_setDisableYieldValue,yt=null,mt=null;function sn(r){if(typeof we=="function"&&Ze(r),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(yt,r)}catch{}}var bt=Math.clz32?Math.clz32:st,mc=Math.log,Pr=Math.LN2;function st(r){return r>>>=0,r===0?32:31-(mc(r)/Pr|0)|0}var Mn=256,La=262144,Ft=4194304;function Ki(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Yi(r,a,l){var u=r.pendingLanes;if(u===0)return 0;var p=0,y=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var N=u&134217727;return N!==0?(u=N&~y,u!==0?p=Ki(u):(x&=N,x!==0?p=Ki(x):l||(l=N&~r,l!==0&&(p=Ki(l))))):(N=u&~y,N!==0?p=Ki(N):x!==0?p=Ki(x):l||(l=u&~r,l!==0&&(p=Ki(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Ai(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Hm(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sd(){var r=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),r}function Qi(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function za(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function $m(r,a,l,u,p,y){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var N=r.entanglements,F=r.expirationTimes,Q=r.hiddenUpdates;for(l=x&~l;0<l;){var re=31-bt(l),le=1<<re;N[re]=0,F[re]=-1;var X=Q[re];if(X!==null)for(Q[re]=null,re=0;re<X.length;re++){var ee=X[re];ee!==null&&(ee.lane&=-536870913)}l&=~le}u!==0&&Ua(r,u,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(x&~a))}function Ua(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-bt(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function pc(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var u=31-bt(l),p=1<<u;p&a|r[u]&a&&(r[u]|=a),l&=~p}}function gc(r,a){var l=a&-a;return l=(l&42)!==0?1:Fa(l),(l&(r.suspendedLanes|a))!==0?0:l}function Fa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Vr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ad(){var r=W.p;return r!==0?r:(r=window.event,r===void 0?32:Iw(r.type))}function Ci(r,a){var l=W.p;try{return W.p=r,a()}finally{W.p=l}}var Ni=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ni,an="__reactProps$"+Ni,Xi="__reactContainer$"+Ni,zo="__reactEvents$"+Ni,Gm="__reactListeners$"+Ni,Cd="__reactHandles$"+Ni,Nd="__reactResources$"+Ni,Wi="__reactMarker$"+Ni;function Uo(r){delete r[Bt],delete r[an],delete r[zo],delete r[Gm],delete r[Cd]}function Zi(r){var a=r[Bt];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Xi]||l[Bt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=mw(r);r!==null;){if(l=r[Bt])return l;r=mw(r)}return a}r=l,l=r.parentNode}return null}function ai(r){if(r=r[Bt]||r[Xi]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Yn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Ji(r){var a=r[Nd];return a||(a=r[Nd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(r){r[Wi]=!0}var yc=new Set,vc={};function er(r,a){tr(r,a),tr(r+"Capture",a)}function tr(r,a){for(vc[r]=a,r=0;r<a.length;r++)yc.add(a[r])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},wc={};function Rd(r){return Rt.call(wc,r)?!0:Rt.call(_c,r)?!1:bc.test(r)?wc[r]=!0:(_c[r]=!0,!1)}function Fo(r,a,l){if(Rd(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Qn(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Ht(r,a,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+u)}}function on(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ss(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xc(r,a,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(x){l=""+x,y.call(this,x)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function at(r){if(!r._valueTracker){var a=Ss(r)?"checked":"value";r._valueTracker=xc(r,a,""+r[a])}}function Ba(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return r&&(u=Ss(r)?r.checked?"true":"false":r.value),r=u,r!==l?(a.setValue(r),!0):!1}function nr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var qa=/[\n"\\]/g;function On(r){return r.replace(qa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Bo(r,a,l,u,p,y,x,N){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),a!=null?x==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+on(a)):r.value!==""+on(a)&&(r.value=""+on(a)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),a!=null?Tc(r,x,on(a)):l!=null?Tc(r,x,on(l)):u!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+on(N):r.removeAttribute("name")}function Id(r,a,l,u,p,y,x,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){at(r);return}l=l!=null?""+on(l):"",a=a!=null?""+on(a):l,N||a===r.value||(r.value=a),r.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=N?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),at(r)}function Tc(r,a,l){a==="number"&&nr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function As(r,a,l,u){if(r=r.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=a.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+on(l),a=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function kd(r,a,l){if(a!=null&&(a=""+on(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+on(l):""}function Cs(r,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(ce(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=on(a),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),at(r)}function Pn(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var Dd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(r,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,l):typeof l!="number"||l===0||Dd.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function Sc(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&Ec(r,p,u)}else for(var y in a)a.hasOwnProperty(y)&&Ec(r,y,a[y])}function qo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(r){return Ns.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ri(){}var Ac=null;function oi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rs=null,ir=null;function Ha(r){var a=ai(r);if(a&&(r=a.stateNode)){var l=r[an]||null;e:switch(r=a.stateNode,a.type){case"input":if(Bo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+On(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==r&&u.form===r.form){var p=u[an]||null;if(!p)throw Error(i(90));Bo(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===r.form&&Ba(u)}break e;case"textarea":kd(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&As(r,!!l.multiple,a,!1)}}}var $o=!1;function Is(r,a,l){if($o)return r(a,l);$o=!0;try{var u=r(a);return u}finally{if($o=!1,(Rs!==null||ir!==null)&&(Ah(),Rs&&(a=Rs,r=ir,ir=Rs=null,Ha(a),r)))for(a=0;a<r.length;a++)Ha(r[a])}}function Ii(r,a){var l=r.stateNode;if(l===null)return null;var u=l[an]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=!1;if(li)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){$a=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{$a=!1}var rr=null,Cc=null,Ga=null;function Nc(){if(Ga)return Ga;var r,a=Cc,l=a.length,u,p="value"in rr?rr.value:rr.textContent,y=p.length;for(r=0;r<l&&a[r]===p[r];r++);var x=l-r;for(u=1;u<=x&&a[l-u]===p[y-u];u++);return Ga=p.slice(r,1<u?1-u:void 0)}function Ka(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function jr(){return!0}function ki(){return!1}function dn(r){function a(l,u,p,y,x){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(l=r[N],this[N]=l?l(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?jr:ki,this.isPropagationStopped=ki,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),a}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=dn(Lr),ks=b({},Lr,{view:0,detail:0}),Rc=dn(ks),Ds,Go,ar,Ko=b({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ar&&(ar&&r.type==="mousemove"?(Ds=r.screenX-ar.screenX,Go=r.screenY-ar.screenY):Go=Ds=0,ar=r),Ds)},movementY:function(r){return"movementY"in r?r.movementY:Go}}),Ic=dn(Ko),Ya=b({},Ko,{dataTransfer:0}),Od=dn(Ya),Pd=b({},ks,{relatedTarget:0}),Qa=dn(Pd),kc=b({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=dn(kc),Yo=b({},Lr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jd=dn(Yo),Ld=b({},Lr,{data:0}),or=dn(Ld),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Fd[r])?!!a[r]:!1}function Ms(){return Bd}var In=b({},ks,{key:function(r){if(r.key){var a=zd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ka(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ud[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(r){return r.type==="keypress"?Ka(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ka(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qd=dn(In),Hd=b({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zr=dn(Hd),m=b({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),w=dn(m),T=b({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=dn(T),K=b({},Ko,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=dn(K),me=b({},Lr,{newState:0,oldState:0}),Le=dn(me),Vt=[9,13,27,32],tt=li&&"CompositionEvent"in window,Tt=null;li&&"documentMode"in document&&(Tt=document.documentMode);var ci=li&&"TextEvent"in window&&!Tt,lr=li&&(!tt||Tt&&8<Tt&&11>=Tt),Di=" ",Mi=!1;function Xa(r,a){switch(r){case"keyup":return Vt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xo=!1;function tR(r,a){switch(r){case"compositionend":return Qo(a);case"keypress":return a.which!==32?null:(Mi=!0,Di);case"textInput":return r=a.data,r===Di&&Mi?null:r;default:return null}}function nR(r,a){if(Xo)return r==="compositionend"||!tt&&Xa(r,a)?(r=Nc(),Ga=Cc=rr=null,Xo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return lr&&a.locale!=="ko"?null:a.data;default:return null}}var iR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!iR[r.type]:a==="textarea"}function vb(r,a,l,u){Rs?ir?ir.push(u):ir=[u]:Rs=u,a=Mh(a,"onChange"),0<a.length&&(l=new sr("onChange","change",null,l,u),r.push({event:l,listeners:a}))}var Dc=null,Mc=null;function rR(r){ew(r,0)}function $d(r){var a=Yn(r);if(Ba(a))return r}function bb(r,a){if(r==="change")return a}var _b=!1;if(li){var Km;if(li){var Ym="oninput"in document;if(!Ym){var wb=document.createElement("div");wb.setAttribute("oninput","return;"),Ym=typeof wb.oninput=="function"}Km=Ym}else Km=!1;_b=Km&&(!document.documentMode||9<document.documentMode)}function xb(){Dc&&(Dc.detachEvent("onpropertychange",Tb),Mc=Dc=null)}function Tb(r){if(r.propertyName==="value"&&$d(Mc)){var a=[];vb(a,Mc,r,oi(r)),Is(rR,a)}}function sR(r,a,l){r==="focusin"?(xb(),Dc=a,Mc=l,Dc.attachEvent("onpropertychange",Tb)):r==="focusout"&&xb()}function aR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return $d(Mc)}function oR(r,a){if(r==="click")return $d(a)}function lR(r,a){if(r==="input"||r==="change")return $d(a)}function cR(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Xn=typeof Object.is=="function"?Object.is:cR;function Oc(r,a){if(Xn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!Rt.call(a,p)||!Xn(r[p],a[p]))return!1}return!0}function Eb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Sb(r,a){var l=Eb(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=a&&u>=a)return{node:l,offset:a-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Eb(l)}}function Ab(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Ab(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Cb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=nr(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=nr(r.document)}return a}function Qm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var uR=li&&"documentMode"in document&&11>=document.documentMode,Wo=null,Xm=null,Pc=null,Wm=!1;function Nb(r,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wm||Wo==null||Wo!==nr(u)||(u=Wo,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pc&&Oc(Pc,u)||(Pc=u,u=Mh(Xm,"onSelect"),0<u.length&&(a=new sr("onSelect","select",null,a,l),r.push({event:a,listeners:u}),a.target=Wo)))}function Wa(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Zo={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Zm={},Rb={};li&&(Rb=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function Za(r){if(Zm[r])return Zm[r];if(!Zo[r])return r;var a=Zo[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in Rb)return Zm[r]=a[l];return r}var Ib=Za("animationend"),kb=Za("animationiteration"),Db=Za("animationstart"),dR=Za("transitionrun"),hR=Za("transitionstart"),fR=Za("transitioncancel"),Mb=Za("transitionend"),Ob=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function Oi(r,a){Ob.set(r,a),er(a,[r])}var Gd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ui=[],Jo=0,ep=0;function Kd(){for(var r=Jo,a=ep=Jo=0;a<r;){var l=ui[a];ui[a++]=null;var u=ui[a];ui[a++]=null;var p=ui[a];ui[a++]=null;var y=ui[a];if(ui[a++]=null,u!==null&&p!==null){var x=u.pending;x===null?p.next=p:(p.next=x.next,x.next=p),u.pending=p}y!==0&&Pb(l,p,y)}}function Yd(r,a,l,u){ui[Jo++]=r,ui[Jo++]=a,ui[Jo++]=l,ui[Jo++]=u,ep|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function tp(r,a,l,u){return Yd(r,a,l,u),Qd(r)}function Ja(r,a){return Yd(r,null,null,a),Qd(r)}function Pb(r,a,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var p=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-bt(l),r=y.hiddenUpdates,u=r[p],u===null?r[p]=[a]:u.push(a),a.lane=l|536870912),y):null}function Qd(r){if(50<iu)throw iu=0,ug=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var el={};function mR(r,a,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,a,l,u){return new mR(r,a,l,u)}function np(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ur(r,a){var l=r.alternate;return l===null?(l=Wn(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Vb(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Xd(r,a,l,u,p,y){var x=0;if(u=r,typeof r=="function")np(r)&&(x=1);else if(typeof r=="string")x=bI(r,l,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=Wn(31,l,a,p),r.elementType=M,r.lanes=y,r;case A:return eo(l.children,p,y,a);case C:x=8,p|=24;break;case O:return r=Wn(12,l,a,p|2),r.elementType=O,r.lanes=y,r;case ne:return r=Wn(13,l,a,p),r.elementType=ne,r.lanes=y,r;case te:return r=Wn(19,l,a,p),r.elementType=te,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:x=10;break e;case z:x=9;break e;case $:x=11;break e;case S:x=14;break e;case R:x=16,u=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Wn(x,l,a,p),a.elementType=r,a.type=u,a.lanes=y,a}function eo(r,a,l,u){return r=Wn(7,r,u,a),r.lanes=l,r}function ip(r,a,l){return r=Wn(6,r,null,a),r.lanes=l,r}function jb(r){var a=Wn(18,null,null,0);return a.stateNode=r,a}function rp(r,a,l){return a=Wn(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Lb=new WeakMap;function di(r,a){if(typeof r=="object"&&r!==null){var l=Lb.get(r);return l!==void 0?l:(a={value:r,source:a,stack:Pa(a)},Lb.set(r,a),a)}return{value:r,source:a,stack:Pa(a)}}var tl=[],nl=0,Wd=null,Vc=0,hi=[],fi=0,Os=null,cr=1,ur="";function Fr(r,a){tl[nl++]=Vc,tl[nl++]=Wd,Wd=r,Vc=a}function zb(r,a,l){hi[fi++]=cr,hi[fi++]=ur,hi[fi++]=Os,Os=r;var u=cr;r=ur;var p=32-bt(u)-1;u&=~(1<<p),l+=1;var y=32-bt(a)+p;if(30<y){var x=p-p%5;y=(u&(1<<x)-1).toString(32),u>>=x,p-=x,cr=1<<32-bt(a)+p|l<<p|u,ur=y+r}else cr=1<<y|l<<p|u,ur=r}function sp(r){r.return!==null&&(Fr(r,1),zb(r,1,0))}function ap(r){for(;r===Wd;)Wd=tl[--nl],tl[nl]=null,Vc=tl[--nl],tl[nl]=null;for(;r===Os;)Os=hi[--fi],hi[fi]=null,ur=hi[--fi],hi[fi]=null,cr=hi[--fi],hi[fi]=null}function Ub(r,a){hi[fi++]=cr,hi[fi++]=ur,hi[fi++]=Os,cr=a.id,ur=a.overflow,Os=r}var hn=null,_t=null,Qe=!1,Ps=null,mi=!1,op=Error(i(519));function Vs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jc(di(a,r)),op}function Fb(r){var a=r.stateNode,l=r.type,u=r.memoizedProps;switch(a[Bt]=r,a[an]=u,l){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(l=0;l<su.length;l++)qe(su[l],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),Id(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),Cs(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||rw(a.textContent,l)?(u.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),u.onScroll!=null&&qe("scroll",a),u.onScrollEnd!=null&&qe("scrollend",a),u.onClick!=null&&(a.onclick=Ri),a=!0):a=!1,a||Vs(r,!0)}function Bb(r){for(hn=r.return;hn;)switch(hn.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:hn=hn.return}}function il(r){if(r!==hn)return!1;if(!Qe)return Bb(r),Qe=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Sg(r.type,r.memoizedProps)),l=!l),l&&_t&&Vs(r),Bb(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));_t=fw(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));_t=fw(r)}else a===27?(a=_t,Xs(r.type)?(r=Ig,Ig=null,_t=r):_t=a):_t=hn?gi(r.stateNode.nextSibling):null;return!0}function to(){_t=hn=null,Qe=!1}function lp(){var r=Ps;return r!==null&&(zn===null?zn=r:zn.push.apply(zn,r),Ps=null),r}function jc(r){Ps===null?Ps=[r]:Ps.push(r)}var cp=V(null),no=null,Br=null;function js(r,a,l){ie(cp,a._currentValue),a._currentValue=l}function qr(r){r._currentValue=cp.current,J(cp)}function up(r,a,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===l)break;r=r.return}}function dp(r,a,l,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var x=p.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=p;for(var F=0;F<a.length;F++)if(N.context===a[F]){y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),up(y.return,l,r),u||(x=null);break e}y=N.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(i(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),up(x,l,r),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===r){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function rl(r,a,l,u){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=p.type;Xn(p.pendingProps.value,x.value)||(r!==null?r.push(N):r=[N])}}else if(p===Te.current){if(x=p.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(uu):r=[uu])}p=p.return}r!==null&&dp(a,r,l,u),a.flags|=262144}function Zd(r){for(r=r.firstContext;r!==null;){if(!Xn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function io(r){no=r,Br=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fn(r){return qb(no,r)}function Jd(r,a){return no===null&&io(r),qb(r,a)}function qb(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Br===null){if(r===null)throw Error(i(308));Br=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Br=Br.next=a;return l}var pR=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},gR=t.unstable_scheduleCallback,yR=t.unstable_NormalPriority,$t={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hp(){return{controller:new pR,data:new Map,refCount:0}}function Lc(r){r.refCount--,r.refCount===0&&gR(yR,function(){r.controller.abort()})}var zc=null,fp=0,sl=0,al=null;function vR(r,a){if(zc===null){var l=zc=[];fp=0,sl=gg(),al={status:"pending",value:void 0,then:function(u){l.push(u)}}}return fp++,a.then(Hb,Hb),a}function Hb(){if(--fp===0&&zc!==null){al!==null&&(al.status="fulfilled");var r=zc;zc=null,sl=0,al=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function bR(r,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var $b=H.S;H.S=function(r,a){N_=un(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&vR(r,a),$b!==null&&$b(r,a)};var ro=V(null);function mp(){var r=ro.current;return r!==null?r:pt.pooledCache}function eh(r,a){a===null?ie(ro,ro.current):ie(ro,a.pool)}function Gb(){var r=mp();return r===null?null:{parent:$t._currentValue,pool:r}}var ol=Error(i(460)),pp=Error(i(474)),th=Error(i(542)),nh={then:function(){}};function Kb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Yb(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Ri,Ri),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xb(r),r;default:if(typeof a.status=="string")a.then(Ri,Ri);else{if(r=pt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xb(r),r}throw ao=a,ol}}function so(r){try{var a=r._init;return a(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ao=l,ol):l}}var ao=null;function Qb(){if(ao===null)throw Error(i(459));var r=ao;return ao=null,r}function Xb(r){if(r===ol||r===th)throw Error(i(483))}var ll=null,Uc=0;function ih(r){var a=Uc;return Uc+=1,ll===null&&(ll=[]),Yb(ll,r,a)}function Fc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function rh(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Wb(r){function a(G,q){if(r){var Y=G.deletions;Y===null?(G.deletions=[q],G.flags|=16):Y.push(q)}}function l(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function u(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function p(G,q){return G=Ur(G,q),G.index=0,G.sibling=null,G}function y(G,q,Y){return G.index=Y,r?(Y=G.alternate,Y!==null?(Y=Y.index,Y<q?(G.flags|=67108866,q):Y):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function x(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function N(G,q,Y,ae){return q===null||q.tag!==6?(q=ip(Y,G.mode,ae),q.return=G,q):(q=p(q,Y),q.return=G,q)}function F(G,q,Y,ae){var Ae=Y.type;return Ae===A?re(G,q,Y.props.children,ae,Y.key):q!==null&&(q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&so(Ae)===q.type)?(q=p(q,Y.props),Fc(q,Y),q.return=G,q):(q=Xd(Y.type,Y.key,Y.props,null,G.mode,ae),Fc(q,Y),q.return=G,q)}function Q(G,q,Y,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=rp(Y,G.mode,ae),q.return=G,q):(q=p(q,Y.children||[]),q.return=G,q)}function re(G,q,Y,ae,Ae){return q===null||q.tag!==7?(q=eo(Y,G.mode,ae,Ae),q.return=G,q):(q=p(q,Y),q.return=G,q)}function le(G,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ip(""+q,G.mode,Y),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return Y=Xd(q.type,q.key,q.props,null,G.mode,Y),Fc(Y,q),Y.return=G,Y;case I:return q=rp(q,G.mode,Y),q.return=G,q;case R:return q=so(q),le(G,q,Y)}if(ce(q)||B(q))return q=eo(q,G.mode,Y,null),q.return=G,q;if(typeof q.then=="function")return le(G,ih(q),Y);if(q.$$typeof===L)return le(G,Jd(G,q),Y);rh(G,q)}return null}function X(G,q,Y,ae){var Ae=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ae!==null?null:N(G,q,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Ae?F(G,q,Y,ae):null;case I:return Y.key===Ae?Q(G,q,Y,ae):null;case R:return Y=so(Y),X(G,q,Y,ae)}if(ce(Y)||B(Y))return Ae!==null?null:re(G,q,Y,ae,null);if(typeof Y.then=="function")return X(G,q,ih(Y),ae);if(Y.$$typeof===L)return X(G,q,Jd(G,Y),ae);rh(G,Y)}return null}function ee(G,q,Y,ae,Ae){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Y)||null,N(q,G,""+ae,Ae);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:return G=G.get(ae.key===null?Y:ae.key)||null,F(q,G,ae,Ae);case I:return G=G.get(ae.key===null?Y:ae.key)||null,Q(q,G,ae,Ae);case R:return ae=so(ae),ee(G,q,Y,ae,Ae)}if(ce(ae)||B(ae))return G=G.get(Y)||null,re(q,G,ae,Ae,null);if(typeof ae.then=="function")return ee(G,q,Y,ih(ae),Ae);if(ae.$$typeof===L)return ee(G,q,Y,Jd(q,ae),Ae);rh(q,ae)}return null}function be(G,q,Y,ae){for(var Ae=null,Je=null,xe=q,Ue=q=0,$e=null;xe!==null&&Ue<Y.length;Ue++){xe.index>Ue?($e=xe,xe=null):$e=xe.sibling;var et=X(G,xe,Y[Ue],ae);if(et===null){xe===null&&(xe=$e);break}r&&xe&&et.alternate===null&&a(G,xe),q=y(et,q,Ue),Je===null?Ae=et:Je.sibling=et,Je=et,xe=$e}if(Ue===Y.length)return l(G,xe),Qe&&Fr(G,Ue),Ae;if(xe===null){for(;Ue<Y.length;Ue++)xe=le(G,Y[Ue],ae),xe!==null&&(q=y(xe,q,Ue),Je===null?Ae=xe:Je.sibling=xe,Je=xe);return Qe&&Fr(G,Ue),Ae}for(xe=u(xe);Ue<Y.length;Ue++)$e=ee(xe,G,Ue,Y[Ue],ae),$e!==null&&(r&&$e.alternate!==null&&xe.delete($e.key===null?Ue:$e.key),q=y($e,q,Ue),Je===null?Ae=$e:Je.sibling=$e,Je=$e);return r&&xe.forEach(function(ta){return a(G,ta)}),Qe&&Fr(G,Ue),Ae}function Ne(G,q,Y,ae){if(Y==null)throw Error(i(151));for(var Ae=null,Je=null,xe=q,Ue=q=0,$e=null,et=Y.next();xe!==null&&!et.done;Ue++,et=Y.next()){xe.index>Ue?($e=xe,xe=null):$e=xe.sibling;var ta=X(G,xe,et.value,ae);if(ta===null){xe===null&&(xe=$e);break}r&&xe&&ta.alternate===null&&a(G,xe),q=y(ta,q,Ue),Je===null?Ae=ta:Je.sibling=ta,Je=ta,xe=$e}if(et.done)return l(G,xe),Qe&&Fr(G,Ue),Ae;if(xe===null){for(;!et.done;Ue++,et=Y.next())et=le(G,et.value,ae),et!==null&&(q=y(et,q,Ue),Je===null?Ae=et:Je.sibling=et,Je=et);return Qe&&Fr(G,Ue),Ae}for(xe=u(xe);!et.done;Ue++,et=Y.next())et=ee(xe,G,Ue,et.value,ae),et!==null&&(r&&et.alternate!==null&&xe.delete(et.key===null?Ue:et.key),q=y(et,q,Ue),Je===null?Ae=et:Je.sibling=et,Je=et);return r&&xe.forEach(function(II){return a(G,II)}),Qe&&Fr(G,Ue),Ae}function ft(G,q,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Ae=Y.key;q!==null;){if(q.key===Ae){if(Ae=Y.type,Ae===A){if(q.tag===7){l(G,q.sibling),ae=p(q,Y.props.children),ae.return=G,G=ae;break e}}else if(q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&so(Ae)===q.type){l(G,q.sibling),ae=p(q,Y.props),Fc(ae,Y),ae.return=G,G=ae;break e}l(G,q);break}else a(G,q);q=q.sibling}Y.type===A?(ae=eo(Y.props.children,G.mode,ae,Y.key),ae.return=G,G=ae):(ae=Xd(Y.type,Y.key,Y.props,null,G.mode,ae),Fc(ae,Y),ae.return=G,G=ae)}return x(G);case I:e:{for(Ae=Y.key;q!==null;){if(q.key===Ae)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){l(G,q.sibling),ae=p(q,Y.children||[]),ae.return=G,G=ae;break e}else{l(G,q);break}else a(G,q);q=q.sibling}ae=rp(Y,G.mode,ae),ae.return=G,G=ae}return x(G);case R:return Y=so(Y),ft(G,q,Y,ae)}if(ce(Y))return be(G,q,Y,ae);if(B(Y)){if(Ae=B(Y),typeof Ae!="function")throw Error(i(150));return Y=Ae.call(Y),Ne(G,q,Y,ae)}if(typeof Y.then=="function")return ft(G,q,ih(Y),ae);if(Y.$$typeof===L)return ft(G,q,Jd(G,Y),ae);rh(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(l(G,q.sibling),ae=p(q,Y),ae.return=G,G=ae):(l(G,q),ae=ip(Y,G.mode,ae),ae.return=G,G=ae),x(G)):l(G,q)}return function(G,q,Y,ae){try{Uc=0;var Ae=ft(G,q,Y,ae);return ll=null,Ae}catch(xe){if(xe===ol||xe===th)throw xe;var Je=Wn(29,xe,null,G.mode);return Je.lanes=ae,Je.return=G,Je}finally{}}}var oo=Wb(!0),Zb=Wb(!1),Ls=!1;function gp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function zs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Us(r,a,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(nt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=Qd(r),Pb(r,null,l),a}return Yd(r,u,a,l),Qd(r)}function Bc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,pc(r,l)}}function vp(r,a){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var bp=!1;function qc(){if(bp){var r=al;if(r!==null)throw r}}function Hc(r,a,l,u){bp=!1;var p=r.updateQueue;Ls=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var F=N,Q=F.next;F.next=null,x===null?y=Q:x.next=Q,x=F;var re=r.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==x&&(N===null?re.firstBaseUpdate=Q:N.next=Q,re.lastBaseUpdate=F))}if(y!==null){var le=p.baseState;x=0,re=Q=F=null,N=y;do{var X=N.lane&-536870913,ee=X!==N.lane;if(ee?(He&X)===X:(u&X)===X){X!==0&&X===sl&&(bp=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var be=r,Ne=N;X=a;var ft=l;switch(Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){le=be.call(ft,le,X);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,X=typeof be=="function"?be.call(ft,le,X):be,X==null)break e;le=b({},le,X);break e;case 2:Ls=!0}}X=N.callback,X!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(Q=re=ee,F=le):re=re.next=ee,x|=X;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);re===null&&(F=le),p.baseState=F,p.firstBaseUpdate=Q,p.lastBaseUpdate=re,y===null&&(p.shared.lanes=0),$s|=x,r.lanes=x,r.memoizedState=le}}function Jb(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function e1(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Jb(l[r],a)}var cl=V(null),sh=V(0);function t1(r,a){r=Zr,ie(sh,r),ie(cl,a),Zr=r|a.baseLanes}function _p(){ie(sh,Zr),ie(cl,cl.current)}function wp(){Zr=sh.current,J(cl),J(sh)}var Zn=V(null),pi=null;function Fs(r){var a=r.alternate;ie(jt,jt.current&1),ie(Zn,r),pi===null&&(a===null||cl.current!==null||a.memoizedState!==null)&&(pi=r)}function xp(r){ie(jt,jt.current),ie(Zn,r),pi===null&&(pi=r)}function n1(r){r.tag===22?(ie(jt,jt.current),ie(Zn,r),pi===null&&(pi=r)):Bs()}function Bs(){ie(jt,jt.current),ie(Zn,Zn.current)}function Jn(r){J(Zn),pi===r&&(pi=null),J(jt)}var jt=V(0);function ah(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Ng(l)||Rg(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hr=0,ze=null,dt=null,Gt=null,oh=!1,ul=!1,lo=!1,lh=0,$c=0,dl=null,_R=0;function kt(){throw Error(i(321))}function Tp(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Xn(r[l],a[l]))return!1;return!0}function Ep(r,a,l,u,p,y){return Hr=y,ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?z1:zp,lo=!1,y=l(u,p),lo=!1,ul&&(y=r1(a,l,u,p)),i1(r),y}function i1(r){H.H=Yc;var a=dt!==null&&dt.next!==null;if(Hr=0,Gt=dt=ze=null,oh=!1,$c=0,dl=null,a)throw Error(i(300));r===null||Kt||(r=r.dependencies,r!==null&&Zd(r)&&(Kt=!0))}function r1(r,a,l,u){ze=r;var p=0;do{if(ul&&(dl=null),$c=0,ul=!1,25<=p)throw Error(i(301));if(p+=1,Gt=dt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=U1,y=a(l,u)}while(ul);return y}function wR(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?Gc(a):a,r=r.useState()[0],(dt!==null?dt.memoizedState:null)!==r&&(ze.flags|=1024),a}function Sp(){var r=lh!==0;return lh=0,r}function Ap(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function Cp(r){if(oh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}oh=!1}Hr=0,Gt=dt=ze=null,ul=!1,$c=lh=0,dl=null}function kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?ze.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Lt(){if(dt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var a=Gt===null?ze.memoizedState:Gt.next;if(a!==null)Gt=a,dt=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Gt===null?ze.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gc(r){var a=$c;return $c+=1,dl===null&&(dl=[]),r=Yb(dl,r,a),a=ze,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?z1:zp),r}function uh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Gc(r);if(r.$$typeof===L)return fn(r)}throw Error(i(438,String(r)))}function Np(r){var a=null,l=ze.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=ch(),ze.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),u=0;u<r;u++)l[u]=U;return a.index++,l}function $r(r,a){return typeof a=="function"?a(r):a}function dh(r){var a=Lt();return Rp(a,dt,r)}function Rp(r,a,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=r.baseQueue,y=u.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}a.baseQueue=p=y,u.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var N=x=null,F=null,Q=a,re=!1;do{var le=Q.lane&-536870913;if(le!==Q.lane?(He&le)===le:(Hr&le)===le){var X=Q.revertLane;if(X===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),le===sl&&(re=!0);else if((Hr&X)===X){Q=Q.next,X===sl&&(re=!0);continue}else le={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(N=F=le,x=y):F=F.next=le,ze.lanes|=X,$s|=X;le=Q.action,lo&&l(y,le),y=Q.hasEagerState?Q.eagerState:l(y,le)}else X={lane:le,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(N=F=X,x=y):F=F.next=X,ze.lanes|=le,$s|=le;Q=Q.next}while(Q!==null&&Q!==a);if(F===null?x=y:F.next=N,!Xn(y,r.memoizedState)&&(Kt=!0,re&&(l=al,l!==null)))throw l;r.memoizedState=y,r.baseState=x,r.baseQueue=F,u.lastRenderedState=y}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Ip(r){var a=Lt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do y=r(y,x.action),x=x.next;while(x!==p);Xn(y,a.memoizedState)||(Kt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,u]}function s1(r,a,l){var u=ze,p=Lt(),y=Qe;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!Xn((dt||p).memoizedState,l);if(x&&(p.memoizedState=l,Kt=!0),p=p.queue,Mp(l1.bind(null,u,p,r),[r]),p.getSnapshot!==a||x||Gt!==null&&Gt.memoizedState.tag&1){if(u.flags|=2048,hl(9,{destroy:void 0},o1.bind(null,u,p,l,a),null),pt===null)throw Error(i(349));y||(Hr&127)!==0||a1(u,a,l)}return l}function a1(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=ze.updateQueue,a===null?(a=ch(),ze.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function o1(r,a,l,u){a.value=l,a.getSnapshot=u,c1(a)&&u1(r)}function l1(r,a,l){return l(function(){c1(a)&&u1(r)})}function c1(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Xn(r,l)}catch{return!0}}function u1(r){var a=Ja(r,2);a!==null&&Un(a,r,2)}function kp(r){var a=kn();if(typeof r=="function"){var l=r;if(r=l(),lo){sn(!0);try{l()}finally{sn(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:r},a}function d1(r,a,l,u){return r.baseState=l,Rp(r,dt,typeof u=="function"?u:$r)}function xR(r,a,l,u,p){if(mh(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};H.T!==null?l(!0):y.isTransition=!1,u(y),l=a.pending,l===null?(y.next=a.pending=y,h1(a,y)):(y.next=l.next,a.pending=l.next=y)}}function h1(r,a){var l=a.action,u=a.payload,p=r.state;if(a.isTransition){var y=H.T,x={};H.T=x;try{var N=l(p,u),F=H.S;F!==null&&F(x,N),f1(r,a,N)}catch(Q){Dp(r,a,Q)}finally{y!==null&&x.types!==null&&(y.types=x.types),H.T=y}}else try{y=l(p,u),f1(r,a,y)}catch(Q){Dp(r,a,Q)}}function f1(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){m1(r,a,u)},function(u){return Dp(r,a,u)}):m1(r,a,l)}function m1(r,a,l){a.status="fulfilled",a.value=l,p1(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,h1(r,l)))}function Dp(r,a,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,p1(a),a=a.next;while(a!==u)}r.action=null}function p1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function g1(r,a){return a}function y1(r,a){if(Qe){var l=pt.formState;if(l!==null){e:{var u=ze;if(Qe){if(_t){t:{for(var p=_t,y=mi;p.nodeType!==8;){if(!y){p=null;break t}if(p=gi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){_t=gi(p.nextSibling),u=p.data==="F!";break e}}Vs(u)}u=!1}u&&(a=l[0])}}return l=kn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g1,lastRenderedState:a},l.queue=u,l=V1.bind(null,ze,u),u.dispatch=l,u=kp(!1),y=Lp.bind(null,ze,!1,u.queue),u=kn(),p={state:a,dispatch:null,action:r,pending:null},u.queue=p,l=xR.bind(null,ze,p,y,l),p.dispatch=l,u.memoizedState=r,[a,l,!1]}function v1(r){var a=Lt();return b1(a,dt,r)}function b1(r,a,l){if(a=Rp(r,a,g1)[0],r=dh($r)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Gc(a)}catch(x){throw x===ol?th:x}else u=a;a=Lt();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(ze.flags|=2048,hl(9,{destroy:void 0},TR.bind(null,p,l),null)),[u,y,r]}function TR(r,a){r.action=a}function _1(r){var a=Lt(),l=dt;if(l!==null)return b1(a,l,r);Lt(),a=a.memoizedState,l=Lt();var u=l.queue.dispatch;return l.memoizedState=r,[a,u,!1]}function hl(r,a,l,u){return r={tag:r,create:l,deps:u,inst:a,next:null},a=ze.updateQueue,a===null&&(a=ch(),ze.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,a.lastEffect=r),r}function w1(){return Lt().memoizedState}function hh(r,a,l,u){var p=kn();ze.flags|=r,p.memoizedState=hl(1|a,{destroy:void 0},l,u===void 0?null:u)}function fh(r,a,l,u){var p=Lt();u=u===void 0?null:u;var y=p.memoizedState.inst;dt!==null&&u!==null&&Tp(u,dt.memoizedState.deps)?p.memoizedState=hl(a,y,l,u):(ze.flags|=r,p.memoizedState=hl(1|a,y,l,u))}function x1(r,a){hh(8390656,8,r,a)}function Mp(r,a){fh(2048,8,r,a)}function ER(r){ze.flags|=4;var a=ze.updateQueue;if(a===null)a=ch(),ze.updateQueue=a,a.events=[r];else{var l=a.events;l===null?a.events=[r]:l.push(r)}}function T1(r){var a=Lt().memoizedState;return ER({ref:a,nextImpl:r}),function(){if((nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function E1(r,a){return fh(4,2,r,a)}function S1(r,a){return fh(4,4,r,a)}function A1(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function C1(r,a,l){l=l!=null?l.concat([r]):null,fh(4,4,A1.bind(null,a,r),l)}function Op(){}function N1(r,a){var l=Lt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Tp(a,u[1])?u[0]:(l.memoizedState=[r,a],r)}function R1(r,a){var l=Lt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Tp(a,u[1]))return u[0];if(u=r(),lo){sn(!0);try{r()}finally{sn(!1)}}return l.memoizedState=[u,a],u}function Pp(r,a,l){return l===void 0||(Hr&1073741824)!==0&&(He&261930)===0?r.memoizedState=a:(r.memoizedState=l,r=I_(),ze.lanes|=r,$s|=r,l)}function I1(r,a,l,u){return Xn(l,a)?l:cl.current!==null?(r=Pp(r,l,u),Xn(r,a)||(Kt=!0),r):(Hr&42)===0||(Hr&1073741824)!==0&&(He&261930)===0?(Kt=!0,r.memoizedState=l):(r=I_(),ze.lanes|=r,$s|=r,a)}function k1(r,a,l,u,p){var y=W.p;W.p=y!==0&&8>y?y:8;var x=H.T,N={};H.T=N,Lp(r,!1,a,l);try{var F=p(),Q=H.S;if(Q!==null&&Q(N,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var re=bR(F,u);Kc(r,a,re,ni(r))}else Kc(r,a,u,ni(r))}catch(le){Kc(r,a,{then:function(){},status:"rejected",reason:le},ni())}finally{W.p=y,x!==null&&N.types!==null&&(x.types=N.types),H.T=x}}function SR(){}function Vp(r,a,l,u){if(r.tag!==5)throw Error(i(476));var p=D1(r).queue;k1(r,p,a,fe,l===null?SR:function(){return M1(r),l(u)})}function D1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:fe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function M1(r){var a=D1(r);a.next===null&&(a=r.alternate.memoizedState),Kc(r,a.next.queue,{},ni())}function jp(){return fn(uu)}function O1(){return Lt().memoizedState}function P1(){return Lt().memoizedState}function AR(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=ni();r=zs(l);var u=Us(a,r,l);u!==null&&(Un(u,a,l),Bc(u,a,l)),a={cache:hp()},r.payload=a;return}a=a.return}}function CR(r,a,l){var u=ni();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},mh(r)?j1(a,l):(l=tp(r,a,l,u),l!==null&&(Un(l,r,u),L1(l,a,u)))}function V1(r,a,l){var u=ni();Kc(r,a,l,u)}function Kc(r,a,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(mh(r))j1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,N=y(x,l);if(p.hasEagerState=!0,p.eagerState=N,Xn(N,x))return Yd(r,a,p,0),pt===null&&Kd(),!1}catch{}finally{}if(l=tp(r,a,p,u),l!==null)return Un(l,r,u),L1(l,a,u),!0}return!1}function Lp(r,a,l,u){if(u={lane:2,revertLane:gg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},mh(r)){if(a)throw Error(i(479))}else a=tp(r,l,u,2),a!==null&&Un(a,r,2)}function mh(r){var a=r.alternate;return r===ze||a!==null&&a===ze}function j1(r,a){ul=oh=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function L1(r,a,l){if((l&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,pc(r,l)}}var Yc={readContext:fn,use:uh,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Yc.useEffectEvent=kt;var z1={readContext:fn,use:uh,useCallback:function(r,a){return kn().memoizedState=[r,a===void 0?null:a],r},useContext:fn,useEffect:x1,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,hh(4194308,4,A1.bind(null,a,r),l)},useLayoutEffect:function(r,a){return hh(4194308,4,r,a)},useInsertionEffect:function(r,a){hh(4,2,r,a)},useMemo:function(r,a){var l=kn();a=a===void 0?null:a;var u=r();if(lo){sn(!0);try{r()}finally{sn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(r,a,l){var u=kn();if(l!==void 0){var p=l(a);if(lo){sn(!0);try{l(a)}finally{sn(!1)}}}else p=a;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=CR.bind(null,ze,r),[u.memoizedState,r]},useRef:function(r){var a=kn();return r={current:r},a.memoizedState=r},useState:function(r){r=kp(r);var a=r.queue,l=V1.bind(null,ze,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Op,useDeferredValue:function(r,a){var l=kn();return Pp(l,r,a)},useTransition:function(){var r=kp(!1);return r=k1.bind(null,ze,r.queue,!0,!1),kn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var u=ze,p=kn();if(Qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),pt===null)throw Error(i(349));(He&127)!==0||a1(u,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,x1(l1.bind(null,u,y,r),[r]),u.flags|=2048,hl(9,{destroy:void 0},o1.bind(null,u,y,l,a),null),l},useId:function(){var r=kn(),a=pt.identifierPrefix;if(Qe){var l=ur,u=cr;l=(u&~(1<<32-bt(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=lh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=_R++,a="_"+a+"r_"+l.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:jp,useFormState:y1,useActionState:y1,useOptimistic:function(r){var a=kn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Lp.bind(null,ze,!0,l),l.dispatch=a,[r,a]},useMemoCache:Np,useCacheRefresh:function(){return kn().memoizedState=AR.bind(null,ze)},useEffectEvent:function(r){var a=kn(),l={impl:r};return a.memoizedState=l,function(){if((nt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},zp={readContext:fn,use:uh,useCallback:N1,useContext:fn,useEffect:Mp,useImperativeHandle:C1,useInsertionEffect:E1,useLayoutEffect:S1,useMemo:R1,useReducer:dh,useRef:w1,useState:function(){return dh($r)},useDebugValue:Op,useDeferredValue:function(r,a){var l=Lt();return I1(l,dt.memoizedState,r,a)},useTransition:function(){var r=dh($r)[0],a=Lt().memoizedState;return[typeof r=="boolean"?r:Gc(r),a]},useSyncExternalStore:s1,useId:O1,useHostTransitionStatus:jp,useFormState:v1,useActionState:v1,useOptimistic:function(r,a){var l=Lt();return d1(l,dt,r,a)},useMemoCache:Np,useCacheRefresh:P1};zp.useEffectEvent=T1;var U1={readContext:fn,use:uh,useCallback:N1,useContext:fn,useEffect:Mp,useImperativeHandle:C1,useInsertionEffect:E1,useLayoutEffect:S1,useMemo:R1,useReducer:Ip,useRef:w1,useState:function(){return Ip($r)},useDebugValue:Op,useDeferredValue:function(r,a){var l=Lt();return dt===null?Pp(l,r,a):I1(l,dt.memoizedState,r,a)},useTransition:function(){var r=Ip($r)[0],a=Lt().memoizedState;return[typeof r=="boolean"?r:Gc(r),a]},useSyncExternalStore:s1,useId:O1,useHostTransitionStatus:jp,useFormState:_1,useActionState:_1,useOptimistic:function(r,a){var l=Lt();return dt!==null?d1(l,dt,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Np,useCacheRefresh:P1};U1.useEffectEvent=T1;function Up(r,a,l,u){a=r.memoizedState,l=l(u,a),l=l==null?a:b({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Fp={enqueueSetState:function(r,a,l){r=r._reactInternals;var u=ni(),p=zs(u);p.payload=a,l!=null&&(p.callback=l),a=Us(r,p,u),a!==null&&(Un(a,r,u),Bc(a,r,u))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var u=ni(),p=zs(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Us(r,p,u),a!==null&&(Un(a,r,u),Bc(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=ni(),u=zs(l);u.tag=2,a!=null&&(u.callback=a),a=Us(r,u,l),a!==null&&(Un(a,r,l),Bc(a,r,l))}};function F1(r,a,l,u,p,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,x):a.prototype&&a.prototype.isPureReactComponent?!Oc(l,u)||!Oc(p,y):!0}function B1(r,a,l,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==r&&Fp.enqueueReplaceState(a,a.state,null)}function co(r,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(r=r.defaultProps){l===a&&(l=b({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}function q1(r){Gd(r)}function H1(r){console.error(r)}function $1(r){Gd(r)}function ph(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function G1(r,a,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Bp(r,a,l){return l=zs(l),l.tag=3,l.payload={element:null},l.callback=function(){ph(r,a)},l}function K1(r){return r=zs(r),r.tag=3,r}function Y1(r,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;r.payload=function(){return p(y)},r.callback=function(){G1(a,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){G1(a,l,u),typeof p!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function NR(r,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&rl(a,l,p,!0),l=Zn.current,l!==null){switch(l.tag){case 31:case 13:return pi===null?Ch():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===nh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),fg(r,u,p)),!1;case 22:return l.flags|=65536,u===nh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),fg(r,u,p)),!1}throw Error(i(435,l.tag))}return fg(r,u,p),Ch(),!1}if(Qe)return a=Zn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==op&&(r=Error(i(422),{cause:u}),jc(di(r,l)))):(u!==op&&(a=Error(i(423),{cause:u}),jc(di(a,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=di(u,l),p=Bp(r.stateNode,u,p),vp(r,p),Dt!==4&&(Dt=2)),!1;var y=Error(i(520),{cause:u});if(y=di(y,l),nu===null?nu=[y]:nu.push(y),Dt!==4&&(Dt=2),a===null)return!0;u=di(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Bp(l.stateNode,u,r),vp(l,r),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gs===null||!Gs.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=K1(p),Y1(p,r,l,u),vp(l,p),!1}l=l.return}while(l!==null);return!1}var qp=Error(i(461)),Kt=!1;function mn(r,a,l,u){a.child=r===null?Zb(a,null,l,u):oo(a,r.child,l,u)}function Q1(r,a,l,u,p){l=l.render;var y=a.ref;if("ref"in u){var x={};for(var N in u)N!=="ref"&&(x[N]=u[N])}else x=u;return io(a),u=Ep(r,a,l,x,y,p),N=Sp(),r!==null&&!Kt?(Ap(r,a,p),Gr(r,a,p)):(Qe&&N&&sp(a),a.flags|=1,mn(r,a,u,p),a.child)}function X1(r,a,l,u,p){if(r===null){var y=l.type;return typeof y=="function"&&!np(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,W1(r,a,y,u,p)):(r=Xd(l.type,null,u,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!Wp(r,p)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:Oc,l(x,u)&&r.ref===a.ref)return Gr(r,a,p)}return a.flags|=1,r=Ur(y,u),r.ref=a.ref,r.return=a,a.child=r}function W1(r,a,l,u,p){if(r!==null){var y=r.memoizedProps;if(Oc(y,u)&&r.ref===a.ref)if(Kt=!1,a.pendingProps=u=y,Wp(r,p))(r.flags&131072)!==0&&(Kt=!0);else return a.lanes=r.lanes,Gr(r,a,p)}return Hp(r,a,l,u,p)}function Z1(r,a,l,u){var p=u.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(u=a.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,a.child=null;return J1(r,a,y,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&eh(a,y!==null?y.cachePool:null),y!==null?t1(a,y):_p(),n1(a);else return u=a.lanes=536870912,J1(r,a,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(eh(a,y.cachePool),t1(a,y),Bs(),a.memoizedState=null):(r!==null&&eh(a,null),_p(),Bs());return mn(r,a,p,l),a.child}function Qc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function J1(r,a,l,u,p){var y=mp();return y=y===null?null:{parent:$t._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},r!==null&&eh(a,null),_p(),n1(a),r!==null&&rl(r,a,u,!0),a.childLanes=p,null}function gh(r,a){return a=vh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function e_(r,a,l){return oo(a,r.child,null,l),r=gh(a,a.pendingProps),r.flags|=2,Jn(a),a.memoizedState=null,r}function RR(r,a,l){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Qe){if(u.mode==="hidden")return r=gh(a,u),a.lanes=536870912,Qc(null,r);if(xp(a),(r=_t)?(r=hw(r,mi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Os!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},l=jb(r),l.return=a,a.child=l,hn=a,_t=null)):r=null,r===null)throw Vs(a);return a.lanes=536870912,null}return gh(a,u)}var y=r.memoizedState;if(y!==null){var x=y.dehydrated;if(xp(a),p)if(a.flags&256)a.flags&=-257,a=e_(r,a,l);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Kt||rl(r,a,l,!1),p=(l&r.childLanes)!==0,Kt||p){if(u=pt,u!==null&&(x=gc(u,l),x!==0&&x!==y.retryLane))throw y.retryLane=x,Ja(r,x),Un(u,r,x),qp;Ch(),a=e_(r,a,l)}else r=y.treeContext,_t=gi(x.nextSibling),hn=a,Qe=!0,Ps=null,mi=!1,r!==null&&Ub(a,r),a=gh(a,u),a.flags|=4096;return a}return r=Ur(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function yh(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Hp(r,a,l,u,p){return io(a),l=Ep(r,a,l,u,void 0,p),u=Sp(),r!==null&&!Kt?(Ap(r,a,p),Gr(r,a,p)):(Qe&&u&&sp(a),a.flags|=1,mn(r,a,l,p),a.child)}function t_(r,a,l,u,p,y){return io(a),a.updateQueue=null,l=r1(a,u,l,p),i1(r),u=Sp(),r!==null&&!Kt?(Ap(r,a,y),Gr(r,a,y)):(Qe&&u&&sp(a),a.flags|=1,mn(r,a,l,y),a.child)}function n_(r,a,l,u,p){if(io(a),a.stateNode===null){var y=el,x=l.contextType;typeof x=="object"&&x!==null&&(y=fn(x)),y=new l(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Fp,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},gp(a),x=l.contextType,y.context=typeof x=="object"&&x!==null?fn(x):el,y.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Up(a,l,x,u),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Fp.enqueueReplaceState(y,y.state,null),Hc(a,u,y,p),qc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){y=a.stateNode;var N=a.memoizedProps,F=co(l,N);y.props=F;var Q=y.context,re=l.contextType;x=el,typeof re=="object"&&re!==null&&(x=fn(re));var le=l.getDerivedStateFromProps;re=typeof le=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||Q!==x)&&B1(a,y,u,x),Ls=!1;var X=a.memoizedState;y.state=X,Hc(a,u,y,p),qc(),Q=a.memoizedState,N||X!==Q||Ls?(typeof le=="function"&&(Up(a,l,le,u),Q=a.memoizedState),(F=Ls||F1(a,l,F,u,X,Q,x))?(re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),y.props=u,y.state=Q,y.context=x,u=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,yp(r,a),x=a.memoizedProps,re=co(l,x),y.props=re,le=a.pendingProps,X=y.context,Q=l.contextType,F=el,typeof Q=="object"&&Q!==null&&(F=fn(Q)),N=l.getDerivedStateFromProps,(Q=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==le||X!==F)&&B1(a,y,u,F),Ls=!1,X=a.memoizedState,y.state=X,Hc(a,u,y,p),qc();var ee=a.memoizedState;x!==le||X!==ee||Ls||r!==null&&r.dependencies!==null&&Zd(r.dependencies)?(typeof N=="function"&&(Up(a,l,N,u),ee=a.memoizedState),(re=Ls||F1(a,l,re,u,X,ee,F)||r!==null&&r.dependencies!==null&&Zd(r.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ee,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ee,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ee),y.props=u,y.state=ee,y.context=F,u=re):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),u=!1)}return y=u,yh(r,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&u?(a.child=oo(a,r.child,null,p),a.child=oo(a,null,l,p)):mn(r,a,l,p),a.memoizedState=y.state,r=a.child):r=Gr(r,a,p),r}function i_(r,a,l,u){return to(),a.flags|=256,mn(r,a,l,u),a.child}var $p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gp(r){return{baseLanes:r,cachePool:Gb()}}function Kp(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=ti),r}function r_(r,a,l){var u=a.pendingProps,p=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=r!==null&&r.memoizedState===null?!1:(jt.current&2)!==0),x&&(p=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(p?Fs(a):Bs(),(r=_t)?(r=hw(r,mi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Os!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},l=jb(r),l.return=a,a.child=l,hn=a,_t=null)):r=null,r===null)throw Vs(a);return Rg(r)?a.lanes=32:a.lanes=536870912,null}var N=u.children;return u=u.fallback,p?(Bs(),p=a.mode,N=vh({mode:"hidden",children:N},p),u=eo(u,p,l,null),N.return=a,u.return=a,N.sibling=u,a.child=N,u=a.child,u.memoizedState=Gp(l),u.childLanes=Kp(r,x,l),a.memoizedState=$p,Qc(null,u)):(Fs(a),Yp(a,N))}var F=r.memoizedState;if(F!==null&&(N=F.dehydrated,N!==null)){if(y)a.flags&256?(Fs(a),a.flags&=-257,a=Qp(r,a,l)):a.memoizedState!==null?(Bs(),a.child=r.child,a.flags|=128,a=null):(Bs(),N=u.fallback,p=a.mode,u=vh({mode:"visible",children:u.children},p),N=eo(N,p,l,null),N.flags|=2,u.return=a,N.return=a,u.sibling=N,a.child=u,oo(a,r.child,null,l),u=a.child,u.memoizedState=Gp(l),u.childLanes=Kp(r,x,l),a.memoizedState=$p,a=Qc(null,u));else if(Fs(a),Rg(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var Q=x.dgst;x=Q,u=Error(i(419)),u.stack="",u.digest=x,jc({value:u,source:null,stack:null}),a=Qp(r,a,l)}else if(Kt||rl(r,a,l,!1),x=(l&r.childLanes)!==0,Kt||x){if(x=pt,x!==null&&(u=gc(x,l),u!==0&&u!==F.retryLane))throw F.retryLane=u,Ja(r,u),Un(x,r,u),qp;Ng(N)||Ch(),a=Qp(r,a,l)}else Ng(N)?(a.flags|=192,a.child=r.child,a=null):(r=F.treeContext,_t=gi(N.nextSibling),hn=a,Qe=!0,Ps=null,mi=!1,r!==null&&Ub(a,r),a=Yp(a,u.children),a.flags|=4096);return a}return p?(Bs(),N=u.fallback,p=a.mode,F=r.child,Q=F.sibling,u=Ur(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,Q!==null?N=Ur(Q,N):(N=eo(N,p,l,null),N.flags|=2),N.return=a,u.return=a,u.sibling=N,a.child=u,Qc(null,u),u=a.child,N=r.child.memoizedState,N===null?N=Gp(l):(p=N.cachePool,p!==null?(F=$t._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=Gb(),N={baseLanes:N.baseLanes|l,cachePool:p}),u.memoizedState=N,u.childLanes=Kp(r,x,l),a.memoizedState=$p,Qc(r.child,u)):(Fs(a),l=r.child,r=l.sibling,l=Ur(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,r!==null&&(x=a.deletions,x===null?(a.deletions=[r],a.flags|=16):x.push(r)),a.child=l,a.memoizedState=null,l)}function Yp(r,a){return a=vh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function vh(r,a){return r=Wn(22,r,null,a),r.lanes=0,r}function Qp(r,a,l){return oo(a,r.child,null,l),r=Yp(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function s_(r,a,l){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),up(r.return,a,l)}function Xp(r,a,l,u,p,y){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=l,x.tailMode=p,x.treeForkCount=y)}function a_(r,a,l){var u=a.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var x=jt.current,N=(x&2)!==0;if(N?(x=x&1|2,a.flags|=128):x&=1,ie(jt,x),mn(r,a,u,l),u=Qe?Vc:0,!N&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&s_(r,l,a);else if(r.tag===19)s_(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)r=l.alternate,r!==null&&ah(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Xp(a,!1,p,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&ah(r)===null){a.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Xp(a,!0,l,null,y,u);break;case"together":Xp(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Gr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(rl(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Ur(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Ur(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function Wp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Zd(r)))}function IR(r,a,l){switch(a.tag){case 3:rt(a,a.stateNode.containerInfo),js(a,$t,r.memoizedState.cache),to();break;case 27:case 5:rn(a);break;case 4:rt(a,a.stateNode.containerInfo);break;case 10:js(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,xp(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?r_(r,a,l):(Fs(a),r=Gr(r,a,l),r!==null?r.sibling:null);Fs(a);break;case 19:var p=(r.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(rl(r,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return a_(r,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(jt,jt.current),u)break;return null;case 22:return a.lanes=0,Z1(r,a,l,a.pendingProps);case 24:js(a,$t,r.memoizedState.cache)}return Gr(r,a,l)}function o_(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Kt=!0;else{if(!Wp(r,l)&&(a.flags&128)===0)return Kt=!1,IR(r,a,l);Kt=(r.flags&131072)!==0}else Kt=!1,Qe&&(a.flags&1048576)!==0&&zb(a,Vc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=so(a.elementType),a.type=r,typeof r=="function")np(r)?(u=co(r,u),a.tag=1,a=n_(null,a,r,u,l)):(a.tag=0,a=Hp(null,a,r,u,l));else{if(r!=null){var p=r.$$typeof;if(p===$){a.tag=11,a=Q1(null,a,r,u,l);break e}else if(p===S){a.tag=14,a=X1(null,a,r,u,l);break e}}throw a=pe(r)||r,Error(i(306,a,""))}}return a;case 0:return Hp(r,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=co(u,a.pendingProps),n_(r,a,u,p,l);case 3:e:{if(rt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));u=a.pendingProps;var y=a.memoizedState;p=y.element,yp(r,a),Hc(a,u,null,l);var x=a.memoizedState;if(u=x.cache,js(a,$t,u),u!==y.cache&&dp(a,[$t],l,!0),qc(),u=x.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=i_(r,a,u,l);break e}else if(u!==p){p=di(Error(i(424)),a),jc(p),a=i_(r,a,u,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(_t=gi(r.firstChild),hn=a,Qe=!0,Ps=null,mi=!0,l=Zb(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(to(),u===p){a=Gr(r,a,l);break e}mn(r,a,u,l)}a=a.child}return a;case 26:return yh(r,a),r===null?(l=vw(a.type,null,a.pendingProps,null))?a.memoizedState=l:Qe||(l=a.type,r=a.pendingProps,u=Oh(Ee.current).createElement(l),u[Bt]=a,u[an]=r,pn(u,l,r),qt(u),a.stateNode=u):a.memoizedState=vw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return rn(a),r===null&&Qe&&(u=a.stateNode=pw(a.type,a.pendingProps,Ee.current),hn=a,mi=!0,p=_t,Xs(a.type)?(Ig=p,_t=gi(u.firstChild)):_t=p),mn(r,a,a.pendingProps.children,l),yh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Qe&&((p=u=_t)&&(u=aI(u,a.type,a.pendingProps,mi),u!==null?(a.stateNode=u,hn=a,_t=gi(u.firstChild),mi=!1,p=!0):p=!1),p||Vs(a)),rn(a),p=a.type,y=a.pendingProps,x=r!==null?r.memoizedProps:null,u=y.children,Sg(p,y)?u=null:x!==null&&Sg(p,x)&&(a.flags|=32),a.memoizedState!==null&&(p=Ep(r,a,wR,null,null,l),uu._currentValue=p),yh(r,a),mn(r,a,u,l),a.child;case 6:return r===null&&Qe&&((r=l=_t)&&(l=oI(l,a.pendingProps,mi),l!==null?(a.stateNode=l,hn=a,_t=null,r=!0):r=!1),r||Vs(a)),null;case 13:return r_(r,a,l);case 4:return rt(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=oo(a,null,u,l):mn(r,a,u,l),a.child;case 11:return Q1(r,a,a.type,a.pendingProps,l);case 7:return mn(r,a,a.pendingProps,l),a.child;case 8:return mn(r,a,a.pendingProps.children,l),a.child;case 12:return mn(r,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,js(a,a.type,u.value),mn(r,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,io(a),p=fn(p),u=u(p),a.flags|=1,mn(r,a,u,l),a.child;case 14:return X1(r,a,a.type,a.pendingProps,l);case 15:return W1(r,a,a.type,a.pendingProps,l);case 19:return a_(r,a,l);case 31:return RR(r,a,l);case 22:return Z1(r,a,l,a.pendingProps);case 24:return io(a),u=fn($t),r===null?(p=mp(),p===null&&(p=pt,y=hp(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:u,cache:p},gp(a),js(a,$t,p)):((r.lanes&l)!==0&&(yp(r,a),Hc(a,null,null,l),qc()),p=r.memoizedState,y=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),js(a,$t,u)):(u=y.cache,js(a,$t,u),u!==p.cache&&dp(a,[$t],l,!0))),mn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Kr(r){r.flags|=4}function Zp(r,a,l,u,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(O_())r.flags|=8192;else throw ao=nh,pp}else r.flags&=-16777217}function l_(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Tw(a))if(O_())r.flags|=8192;else throw ao=nh,pp}function bh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Sd():536870912,r.lanes|=a,gl|=a)}function Xc(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function wt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(a)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,a}function kR(r,a,l){var u=a.pendingProps;switch(ap(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(a),null;case 1:return wt(a),null;case 3:return l=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),qr($t),Fe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(il(a)?Kr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,lp())),wt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Kr(a),y!==null?(wt(a),l_(a,y)):(wt(a),Zp(a,p,null,u,l))):y?y!==r.memoizedState?(Kr(a),wt(a),l_(a,y)):(wt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&Kr(a),wt(a),Zp(a,p,r,u,l)),null;case 27:if(xn(a),l=Ee.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Kr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return wt(a),null}r=he.current,il(a)?Fb(a):(r=pw(p,u,l),a.stateNode=r,Kr(a))}return wt(a),null;case 5:if(xn(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Kr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return wt(a),null}if(y=he.current,il(a))Fb(a);else{var x=Oh(Ee.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?x.createElement("select",{is:u.is}):x.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?x.createElement(p,{is:u.is}):x.createElement(p)}}y[Bt]=a,y[an]=u;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=y;e:switch(pn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Kr(a)}}return wt(a),Zp(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,l),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&Kr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=Ee.current,il(a)){if(r=a.stateNode,l=a.memoizedProps,u=null,p=hn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Bt]=a,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||rw(r.nodeValue,l)),r||Vs(a,!0)}else r=Oh(r).createTextNode(u),r[Bt]=a,a.stateNode=r}return wt(a),null;case 31:if(l=a.memoizedState,r===null||r.memoizedState!==null){if(u=il(a),l!==null){if(r===null){if(!u)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Bt]=a}else to(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wt(a),r=!1}else l=lp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return a.flags&256?(Jn(a),a):(Jn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return wt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=il(a),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Bt]=a}else to(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wt(a),p=!1}else p=lp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Jn(a),a):(Jn(a),null)}return Jn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),l!==r&&l&&(a.child.flags|=8192),bh(a,a.updateQueue),wt(a),null);case 4:return Fe(),r===null&&_g(a.stateNode.containerInfo),wt(a),null;case 10:return qr(a.type),wt(a),null;case 19:if(J(jt),u=a.memoizedState,u===null)return wt(a),null;if(p=(a.flags&128)!==0,y=u.rendering,y===null)if(p)Xc(u,!1);else{if(Dt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=ah(r),y!==null){for(a.flags|=128,Xc(u,!1),r=y.updateQueue,a.updateQueue=r,bh(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)Vb(l,r),l=l.sibling;return ie(jt,jt.current&1|2),Qe&&Fr(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&un()>Eh&&(a.flags|=128,p=!0,Xc(u,!1),a.lanes=4194304)}else{if(!p)if(r=ah(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,bh(a,r),Xc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Qe)return wt(a),null}else 2*un()-u.renderingStartTime>Eh&&l!==536870912&&(a.flags|=128,p=!0,Xc(u,!1),a.lanes=4194304);u.isBackwards?(y.sibling=a.child,a.child=y):(r=u.last,r!==null?r.sibling=y:a.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=un(),r.sibling=null,l=jt.current,ie(jt,p?l&1|2:l&1),Qe&&Fr(a,u.treeForkCount),r):(wt(a),null);case 22:case 23:return Jn(a),wp(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(wt(a),a.subtreeFlags&6&&(a.flags|=8192)):wt(a),l=a.updateQueue,l!==null&&bh(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),r!==null&&J(ro),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),qr($t),wt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function DR(r,a){switch(ap(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return qr($t),Fe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return xn(a),null;case 31:if(a.memoizedState!==null){if(Jn(a),a.alternate===null)throw Error(i(340));to()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Jn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));to()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return J(jt),null;case 4:return Fe(),null;case 10:return qr(a.type),null;case 22:case 23:return Jn(a),wp(),r!==null&&J(ro),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return qr($t),null;case 25:return null;default:return null}}function c_(r,a){switch(ap(a),a.tag){case 3:qr($t),Fe();break;case 26:case 27:case 5:xn(a);break;case 4:Fe();break;case 31:a.memoizedState!==null&&Jn(a);break;case 13:Jn(a);break;case 19:J(jt);break;case 10:qr(a.type);break;case 22:case 23:Jn(a),wp(),r!==null&&J(ro);break;case 24:qr($t)}}function Wc(r,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&r)===r){u=void 0;var y=l.create,x=l.inst;u=y(),x.destroy=u}l=l.next}while(l!==p)}}catch(N){lt(a,a.return,N)}}function qs(r,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){var x=u.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,p=a;var F=l,Q=N;try{Q()}catch(re){lt(p,F,re)}}}u=u.next}while(u!==y)}}catch(re){lt(a,a.return,re)}}function u_(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{e1(a,l)}catch(u){lt(r,r.return,u)}}}function d_(r,a,l){l.props=co(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){lt(r,a,u)}}function Zc(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(p){lt(r,a,p)}}function dr(r,a){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){lt(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){lt(r,a,p)}else l.current=null}function h_(r){var a=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){lt(r,r.return,p)}}function Jp(r,a,l){try{var u=r.stateNode;eI(u,r.type,l,a),u[an]=a}catch(p){lt(r,r.return,p)}}function f_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xs(r.type)||r.tag===4}function eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||f_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tg(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ri));else if(u!==4&&(u===27&&Xs(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(tg(r,a,l),r=r.sibling;r!==null;)tg(r,a,l),r=r.sibling}function _h(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(u!==4&&(u===27&&Xs(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(_h(r,a,l),r=r.sibling;r!==null;)_h(r,a,l),r=r.sibling}function m_(r){var a=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);pn(a,u,l),a[Bt]=r,a[an]=l}catch(y){lt(r,r.return,y)}}var Yr=!1,Yt=!1,ng=!1,p_=typeof WeakSet=="function"?WeakSet:Set,ln=null;function MR(r,a){if(r=r.containerInfo,Tg=Fh,r=Cb(r),Qm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,N=-1,F=-1,Q=0,re=0,le=r,X=null;t:for(;;){for(var ee;le!==l||p!==0&&le.nodeType!==3||(N=x+p),le!==y||u!==0&&le.nodeType!==3||(F=x+u),le.nodeType===3&&(x+=le.nodeValue.length),(ee=le.firstChild)!==null;)X=le,le=ee;for(;;){if(le===r)break t;if(X===l&&++Q===p&&(N=x),X===y&&++re===u&&(F=x),(ee=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=ee}l=N===-1||F===-1?null:{start:N,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Eg={focusedElem:r,selectionRange:l},Fh=!1,ln=a;ln!==null;)if(a=ln,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,ln=r;else for(;ln!==null;){switch(a=ln,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)p=r[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var be=co(l.type,p);r=u.getSnapshotBeforeUpdate(be,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ne){lt(l,l.return,Ne)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)Cg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,ln=r;break}ln=a.return}}function g_(r,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Xr(r,l),u&4&&Wc(5,l);break;case 1:if(Xr(r,l),u&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(x){lt(l,l.return,x)}else{var p=co(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(x){lt(l,l.return,x)}}u&64&&u_(l),u&512&&Zc(l,l.return);break;case 3:if(Xr(r,l),u&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{e1(r,a)}catch(x){lt(l,l.return,x)}}break;case 27:a===null&&u&4&&m_(l);case 26:case 5:Xr(r,l),a===null&&u&4&&h_(l),u&512&&Zc(l,l.return);break;case 12:Xr(r,l);break;case 31:Xr(r,l),u&4&&b_(r,l);break;case 13:Xr(r,l),u&4&&__(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=BR.bind(null,l),lI(r,l))));break;case 22:if(u=l.memoizedState!==null||Yr,!u){a=a!==null&&a.memoizedState!==null||Yt,p=Yr;var y=Yt;Yr=u,(Yt=a)&&!y?Wr(r,l,(l.subtreeFlags&8772)!==0):Xr(r,l),Yr=p,Yt=y}break;case 30:break;default:Xr(r,l)}}function y_(r){var a=r.alternate;a!==null&&(r.alternate=null,y_(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Uo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Et=null,Vn=!1;function Qr(r,a,l){for(l=l.child;l!==null;)v_(r,a,l),l=l.sibling}function v_(r,a,l){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(yt,l)}catch{}switch(l.tag){case 26:Yt||dr(l,a),Qr(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Yt||dr(l,a);var u=Et,p=Vn;Xs(l.type)&&(Et=l.stateNode,Vn=!1),Qr(r,a,l),ou(l.stateNode),Et=u,Vn=p;break;case 5:Yt||dr(l,a);case 6:if(u=Et,p=Vn,Et=null,Qr(r,a,l),Et=u,Vn=p,Et!==null)if(Vn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(l.stateNode)}catch(y){lt(l,a,y)}else try{Et.removeChild(l.stateNode)}catch(y){lt(l,a,y)}break;case 18:Et!==null&&(Vn?(r=Et,uw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),El(r)):uw(Et,l.stateNode));break;case 4:u=Et,p=Vn,Et=l.stateNode.containerInfo,Vn=!0,Qr(r,a,l),Et=u,Vn=p;break;case 0:case 11:case 14:case 15:qs(2,l,a),Yt||qs(4,l,a),Qr(r,a,l);break;case 1:Yt||(dr(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&d_(l,a,u)),Qr(r,a,l);break;case 21:Qr(r,a,l);break;case 22:Yt=(u=Yt)||l.memoizedState!==null,Qr(r,a,l),Yt=u;break;default:Qr(r,a,l)}}function b_(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{El(r)}catch(l){lt(a,a.return,l)}}}function __(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{El(r)}catch(l){lt(a,a.return,l)}}function OR(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new p_),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new p_),a;default:throw Error(i(435,r.tag))}}function wh(r,a){var l=OR(r);a.forEach(function(u){if(!l.has(u)){l.add(u);var p=qR.bind(null,r,u);u.then(p,p)}})}function jn(r,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],y=r,x=a,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(Xs(N.type)){Et=N.stateNode,Vn=!1;break e}break;case 5:Et=N.stateNode,Vn=!1;break e;case 3:case 4:Et=N.stateNode.containerInfo,Vn=!0;break e}N=N.return}if(Et===null)throw Error(i(160));v_(y,x,p),Et=null,Vn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)w_(a,r),a=a.sibling}var Pi=null;function w_(r,a){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:jn(a,r),Ln(r),u&4&&(qs(3,r,r.return),Wc(3,r),qs(5,r,r.return));break;case 1:jn(a,r),Ln(r),u&512&&(Yt||l===null||dr(l,l.return)),u&64&&Yr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Pi;if(jn(a,r),Ln(r),u&512&&(Yt||l===null||dr(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Wi]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),pn(y,u,l),y[Bt]=r,qt(y),u=y;break e;case"link":var x=ww("link","href",p).get(u+(l.href||""));if(x){for(var N=0;N<x.length;N++)if(y=x[N],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(N,1);break t}}y=p.createElement(u),pn(y,u,l),p.head.appendChild(y);break;case"meta":if(x=ww("meta","content",p).get(u+(l.content||""))){for(N=0;N<x.length;N++)if(y=x[N],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(N,1);break t}}y=p.createElement(u),pn(y,u,l),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[Bt]=r,qt(y),u=y}r.stateNode=u}else xw(p,r.type,r.stateNode);else r.stateNode=_w(p,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?xw(p,r.type,r.stateNode):_w(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Jp(r,r.memoizedProps,l.memoizedProps)}break;case 27:jn(a,r),Ln(r),u&512&&(Yt||l===null||dr(l,l.return)),l!==null&&u&4&&Jp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(jn(a,r),Ln(r),u&512&&(Yt||l===null||dr(l,l.return)),r.flags&32){p=r.stateNode;try{Pn(p,"")}catch(be){lt(r,r.return,be)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Jp(r,p,l!==null?l.memoizedProps:p)),u&1024&&(ng=!0);break;case 6:if(jn(a,r),Ln(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(be){lt(r,r.return,be)}}break;case 3:if(jh=null,p=Pi,Pi=Ph(a.containerInfo),jn(a,r),Pi=p,Ln(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{El(a.containerInfo)}catch(be){lt(r,r.return,be)}ng&&(ng=!1,x_(r));break;case 4:u=Pi,Pi=Ph(r.stateNode.containerInfo),jn(a,r),Ln(r),Pi=u;break;case 12:jn(a,r),Ln(r);break;case 31:jn(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,wh(r,u)));break;case 13:jn(a,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Th=un()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,wh(r,u)));break;case 22:p=r.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,Q=Yr,re=Yt;if(Yr=Q||p,Yt=re||F,jn(a,r),Yt=re,Yr=Q,Ln(r),u&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||F||Yr||Yt||uo(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(y=F.stateNode,p)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=F.stateNode;var le=F.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;N.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(be){lt(F,F.return,be)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(be){lt(F,F.return,be)}}}else if(a.tag===18){if(l===null){F=a;try{var ee=F.stateNode;p?dw(ee,!0):dw(F.stateNode,!1)}catch(be){lt(F,F.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,wh(r,l))));break;case 19:jn(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,wh(r,u)));break;case 30:break;case 21:break;default:jn(a,r),Ln(r)}}function Ln(r){var a=r.flags;if(a&2){try{for(var l,u=r.return;u!==null;){if(f_(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=eg(r);_h(r,y,p);break;case 5:var x=l.stateNode;l.flags&32&&(Pn(x,""),l.flags&=-33);var N=eg(r);_h(r,N,x);break;case 3:case 4:var F=l.stateNode.containerInfo,Q=eg(r);tg(r,Q,F);break;default:throw Error(i(161))}}catch(re){lt(r,r.return,re)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function x_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;x_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Xr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)g_(r,a.alternate,a),a=a.sibling}function uo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:qs(4,a,a.return),uo(a);break;case 1:dr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&d_(a,a.return,l),uo(a);break;case 27:ou(a.stateNode);case 26:case 5:dr(a,a.return),uo(a);break;case 22:a.memoizedState===null&&uo(a);break;case 30:uo(a);break;default:uo(a)}r=r.sibling}}function Wr(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=r,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:Wr(p,y,l),Wc(4,y);break;case 1:if(Wr(p,y,l),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){lt(u,u.return,Q)}if(u=y,p=u.updateQueue,p!==null){var N=u.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)Jb(F[p],N)}catch(Q){lt(u,u.return,Q)}}l&&x&64&&u_(y),Zc(y,y.return);break;case 27:m_(y);case 26:case 5:Wr(p,y,l),l&&u===null&&x&4&&h_(y),Zc(y,y.return);break;case 12:Wr(p,y,l);break;case 31:Wr(p,y,l),l&&x&4&&b_(p,y);break;case 13:Wr(p,y,l),l&&x&4&&__(p,y);break;case 22:y.memoizedState===null&&Wr(p,y,l),Zc(y,y.return);break;case 30:break;default:Wr(p,y,l)}a=a.sibling}}function ig(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Lc(l))}function rg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Lc(r))}function Vi(r,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T_(r,a,l,u),a=a.sibling}function T_(r,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Vi(r,a,l,u),p&2048&&Wc(9,a);break;case 1:Vi(r,a,l,u);break;case 3:Vi(r,a,l,u),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Lc(r)));break;case 12:if(p&2048){Vi(r,a,l,u),r=a.stateNode;try{var y=a.memoizedProps,x=y.id,N=y.onPostCommit;typeof N=="function"&&N(x,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){lt(a,a.return,F)}}else Vi(r,a,l,u);break;case 31:Vi(r,a,l,u);break;case 13:Vi(r,a,l,u);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?Vi(r,a,l,u):Jc(r,a):y._visibility&2?Vi(r,a,l,u):(y._visibility|=2,fl(r,a,l,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&ig(x,a);break;case 24:Vi(r,a,l,u),p&2048&&rg(a.alternate,a);break;default:Vi(r,a,l,u)}}function fl(r,a,l,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,x=a,N=l,F=u,Q=x.flags;switch(x.tag){case 0:case 11:case 15:fl(y,x,N,F,p),Wc(8,x);break;case 23:break;case 22:var re=x.stateNode;x.memoizedState!==null?re._visibility&2?fl(y,x,N,F,p):Jc(y,x):(re._visibility|=2,fl(y,x,N,F,p)),p&&Q&2048&&ig(x.alternate,x);break;case 24:fl(y,x,N,F,p),p&&Q&2048&&rg(x.alternate,x);break;default:fl(y,x,N,F,p)}a=a.sibling}}function Jc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,u=a,p=u.flags;switch(u.tag){case 22:Jc(l,u),p&2048&&ig(u.alternate,u);break;case 24:Jc(l,u),p&2048&&rg(u.alternate,u);break;default:Jc(l,u)}a=a.sibling}}var eu=8192;function ml(r,a,l){if(r.subtreeFlags&eu)for(r=r.child;r!==null;)E_(r,a,l),r=r.sibling}function E_(r,a,l){switch(r.tag){case 26:ml(r,a,l),r.flags&eu&&r.memoizedState!==null&&_I(l,Pi,r.memoizedState,r.memoizedProps);break;case 5:ml(r,a,l);break;case 3:case 4:var u=Pi;Pi=Ph(r.stateNode.containerInfo),ml(r,a,l),Pi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=eu,eu=16777216,ml(r,a,l),eu=u):ml(r,a,l));break;default:ml(r,a,l)}}function S_(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function tu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ln=u,C_(u,r)}S_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)A_(r),r=r.sibling}function A_(r){switch(r.tag){case 0:case 11:case 15:tu(r),r.flags&2048&&qs(9,r,r.return);break;case 3:tu(r);break;case 12:tu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,xh(r)):tu(r);break;default:tu(r)}}function xh(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ln=u,C_(u,r)}S_(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:qs(8,a,a.return),xh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,xh(a));break;default:xh(a)}r=r.sibling}}function C_(r,a){for(;ln!==null;){var l=ln;switch(l.tag){case 0:case 11:case 15:qs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Lc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ln=u;else e:for(l=r;ln!==null;){u=ln;var p=u.sibling,y=u.return;if(y_(u),u===l){ln=null;break e}if(p!==null){p.return=y,ln=p;break e}ln=y}}}var PR={getCacheForType:function(r){var a=fn($t),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l},cacheSignal:function(){return fn($t).controller.signal}},VR=typeof WeakMap=="function"?WeakMap:Map,nt=0,pt=null,Be=null,He=0,ot=0,ei=null,Hs=!1,pl=!1,sg=!1,Zr=0,Dt=0,$s=0,ho=0,ag=0,ti=0,gl=0,nu=null,zn=null,og=!1,Th=0,N_=0,Eh=1/0,Sh=null,Gs=null,en=0,Ks=null,yl=null,Jr=0,lg=0,cg=null,R_=null,iu=0,ug=null;function ni(){return(nt&2)!==0&&He!==0?He&-He:H.T!==null?gg():Ad()}function I_(){if(ti===0)if((He&536870912)===0||Qe){var r=La;La<<=1,(La&3932160)===0&&(La=262144),ti=r}else ti=536870912;return r=Zn.current,r!==null&&(r.flags|=32),ti}function Un(r,a,l){(r===pt&&(ot===2||ot===9)||r.cancelPendingCommit!==null)&&(vl(r,0),Ys(r,He,ti,!1)),za(r,l),((nt&2)===0||r!==pt)&&(r===pt&&((nt&2)===0&&(ho|=l),Dt===4&&Ys(r,He,ti,!1)),hr(r))}function k_(r,a,l){if((nt&6)!==0)throw Error(i(327));var u=!l&&(a&127)===0&&(a&r.expiredLanes)===0||Ai(r,a),p=u?zR(r,a):hg(r,a,!0),y=u;do{if(p===0){pl&&!u&&Ys(r,a,0,!1);break}else{if(l=r.current.alternate,y&&!jR(l)){p=hg(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var N=r;p=nu;var F=N.current.memoizedState.isDehydrated;if(F&&(vl(N,x).flags|=256),x=hg(N,x,!1),x!==2){if(sg&&!F){N.errorRecoveryDisabledLanes|=y,ho|=y,p=4;break e}y=zn,zn=p,y!==null&&(zn===null?zn=y:zn.push.apply(zn,y))}p=x}if(y=!1,p!==2)continue}}if(p===1){vl(r,0),Ys(r,a,0,!0);break}e:{switch(u=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ys(u,a,ti,!Hs);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=Th+300-un(),10<p)){if(Ys(u,a,ti,!Hs),Yi(u,0,!0)!==0)break e;Jr=a,u.timeoutHandle=lw(D_.bind(null,u,l,zn,Sh,og,a,ti,ho,gl,Hs,y,"Throttled",-0,0),p);break e}D_(u,l,zn,Sh,og,a,ti,ho,gl,Hs,y,null,-0,0)}}break}while(!0);hr(r)}function D_(r,a,l,u,p,y,x,N,F,Q,re,le,X,ee){if(r.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},E_(a,y,le);var be=(y&62914560)===y?Th-un():(y&4194048)===y?N_-un():0;if(be=wI(le,be),be!==null){Jr=y,r.cancelPendingCommit=be(U_.bind(null,r,a,y,l,u,p,x,N,F,re,le,null,X,ee)),Ys(r,y,x,!Q);return}}U_(r,a,y,l,u,p,x,N,F)}function jR(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!Xn(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ys(r,a,l,u){a&=~ag,a&=~ho,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var p=a;0<p;){var y=31-bt(p),x=1<<y;u[y]=-1,p&=~x}l!==0&&Ua(r,l,a)}function Ah(){return(nt&6)===0?(ru(0),!1):!0}function dg(){if(Be!==null){if(ot===0)var r=Be.return;else r=Be,Br=no=null,Cp(r),ll=null,Uc=0,r=Be;for(;r!==null;)c_(r.alternate,r),r=r.return;Be=null}}function vl(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,iI(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Jr=0,dg(),pt=r,Be=l=Ur(r.current,null),He=a,ot=0,ei=null,Hs=!1,pl=Ai(r,a),sg=!1,gl=ti=ag=ho=$s=Dt=0,zn=nu=null,og=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var p=31-bt(u),y=1<<p;a|=r[p],u&=~y}return Zr=a,Kd(),l}function M_(r,a){ze=null,H.H=Yc,a===ol||a===th?(a=Qb(),ot=3):a===pp?(a=Qb(),ot=4):ot=a===qp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ei=a,Be===null&&(Dt=1,ph(r,di(a,r.current)))}function O_(){var r=Zn.current;return r===null?!0:(He&4194048)===He?pi===null:(He&62914560)===He||(He&536870912)!==0?r===pi:!1}function P_(){var r=H.H;return H.H=Yc,r===null?Yc:r}function V_(){var r=H.A;return H.A=PR,r}function Ch(){Dt=4,Hs||(He&4194048)!==He&&Zn.current!==null||(pl=!0),($s&134217727)===0&&(ho&134217727)===0||pt===null||Ys(pt,He,ti,!1)}function hg(r,a,l){var u=nt;nt|=2;var p=P_(),y=V_();(pt!==r||He!==a)&&(Sh=null,vl(r,a)),a=!1;var x=Dt;e:do try{if(ot!==0&&Be!==null){var N=Be,F=ei;switch(ot){case 8:dg(),x=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(a=!0);var Q=ot;if(ot=0,ei=null,bl(r,N,F,Q),l&&pl){x=0;break e}break;default:Q=ot,ot=0,ei=null,bl(r,N,F,Q)}}LR(),x=Dt;break}catch(re){M_(r,re)}while(!0);return a&&r.shellSuspendCounter++,Br=no=null,nt=u,H.H=p,H.A=y,Be===null&&(pt=null,He=0,Kd()),x}function LR(){for(;Be!==null;)j_(Be)}function zR(r,a){var l=nt;nt|=2;var u=P_(),p=V_();pt!==r||He!==a?(Sh=null,Eh=un()+500,vl(r,a)):pl=Ai(r,a);e:do try{if(ot!==0&&Be!==null){a=Be;var y=ei;t:switch(ot){case 1:ot=0,ei=null,bl(r,a,y,1);break;case 2:case 9:if(Kb(y)){ot=0,ei=null,L_(a);break}a=function(){ot!==2&&ot!==9||pt!==r||(ot=7),hr(r)},y.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Kb(y)?(ot=0,ei=null,L_(a)):(ot=0,ei=null,bl(r,a,y,7));break;case 5:var x=null;switch(Be.tag){case 26:x=Be.memoizedState;case 5:case 27:var N=Be;if(x?Tw(x):N.stateNode.complete){ot=0,ei=null;var F=N.sibling;if(F!==null)Be=F;else{var Q=N.return;Q!==null?(Be=Q,Nh(Q)):Be=null}break t}}ot=0,ei=null,bl(r,a,y,5);break;case 6:ot=0,ei=null,bl(r,a,y,6);break;case 8:dg(),Dt=6;break e;default:throw Error(i(462))}}UR();break}catch(re){M_(r,re)}while(!0);return Br=no=null,H.H=u,H.A=p,nt=l,Be!==null?0:(pt=null,He=0,Kd(),Dt)}function UR(){for(;Be!==null&&!hc();)j_(Be)}function j_(r){var a=o_(r.alternate,r,Zr);r.memoizedProps=r.pendingProps,a===null?Nh(r):Be=a}function L_(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=t_(l,a,a.pendingProps,a.type,void 0,He);break;case 11:a=t_(l,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:Cp(a);default:c_(l,a),a=Be=Vb(a,Zr),a=o_(l,a,Zr)}r.memoizedProps=r.pendingProps,a===null?Nh(r):Be=a}function bl(r,a,l,u){Br=no=null,Cp(a),ll=null,Uc=0;var p=a.return;try{if(NR(r,p,a,l,He)){Dt=1,ph(r,di(l,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;Dt=1,ph(r,di(l,r.current)),Be=null;return}a.flags&32768?(Qe||u===1?r=!0:pl||(He&536870912)!==0?r=!1:(Hs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Zn.current,u!==null&&u.tag===13&&(u.flags|=16384))),z_(a,r)):Nh(a)}function Nh(r){var a=r;do{if((a.flags&32768)!==0){z_(a,Hs);return}r=a.return;var l=kR(a.alternate,a,Zr);if(l!==null){Be=l;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);Dt===0&&(Dt=5)}function z_(r,a){do{var l=DR(r.alternate,r);if(l!==null){l.flags&=32767,Be=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=l}while(r!==null);Dt=6,Be=null}function U_(r,a,l,u,p,y,x,N,F){r.cancelPendingCommit=null;do Rh();while(en!==0);if((nt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=ep,$m(r,l,y,x,N,F),r===pt&&(Be=pt=null,He=0),yl=a,Ks=r,Jr=l,lg=y,cg=p,R_=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,HR(Gi,function(){return $_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,p=W.p,W.p=2,x=nt,nt|=4;try{MR(r,a,l)}finally{nt=x,W.p=p,H.T=u}}en=1,F_(),B_(),q_()}}function F_(){if(en===1){en=0;var r=Ks,a=yl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var u=W.p;W.p=2;var p=nt;nt|=4;try{w_(a,r);var y=Eg,x=Cb(r.containerInfo),N=y.focusedElem,F=y.selectionRange;if(x!==N&&N&&N.ownerDocument&&Ab(N.ownerDocument.documentElement,N)){if(F!==null&&Qm(N)){var Q=F.start,re=F.end;if(re===void 0&&(re=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(re,N.value.length);else{var le=N.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var ee=X.getSelection(),be=N.textContent.length,Ne=Math.min(F.start,be),ft=F.end===void 0?Ne:Math.min(F.end,be);!ee.extend&&Ne>ft&&(x=ft,ft=Ne,Ne=x);var G=Sb(N,Ne),q=Sb(N,ft);if(G&&q&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var Y=le.createRange();Y.setStart(G.node,G.offset),ee.removeAllRanges(),Ne>ft?(ee.addRange(Y),ee.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),ee.addRange(Y))}}}}for(le=[],ee=N;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<le.length;N++){var ae=le[N];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Fh=!!Tg,Eg=Tg=null}finally{nt=p,W.p=u,H.T=l}}r.current=a,en=2}}function B_(){if(en===2){en=0;var r=Ks,a=yl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var u=W.p;W.p=2;var p=nt;nt|=4;try{g_(r,a.alternate,a)}finally{nt=p,W.p=u,H.T=l}}en=3}}function q_(){if(en===4||en===3){en=0,jo();var r=Ks,a=yl,l=Jr,u=R_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?en=5:(en=0,yl=Ks=null,H_(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Gs=null),Vr(l),a=a.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(yt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=H.T,p=W.p,W.p=2,H.T=null;try{for(var y=r.onRecoverableError,x=0;x<u.length;x++){var N=u[x];y(N.value,{componentStack:N.stack})}}finally{H.T=a,W.p=p}}(Jr&3)!==0&&Rh(),hr(r),p=r.pendingLanes,(l&261930)!==0&&(p&42)!==0?r===ug?iu++:(iu=0,ug=r):iu=0,ru(0)}}function H_(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Lc(a)))}function Rh(){return F_(),B_(),q_(),$_()}function $_(){if(en!==5)return!1;var r=Ks,a=lg;lg=0;var l=Vr(Jr),u=H.T,p=W.p;try{W.p=32>l?32:l,H.T=null,l=cg,cg=null;var y=Ks,x=Jr;if(en=0,yl=Ks=null,Jr=0,(nt&6)!==0)throw Error(i(331));var N=nt;if(nt|=4,A_(y.current),T_(y,y.current,x,l),nt=N,ru(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(yt,y)}catch{}return!0}finally{W.p=p,H.T=u,H_(r,a)}}function G_(r,a,l){a=di(l,a),a=Bp(r.stateNode,a,2),r=Us(r,a,2),r!==null&&(za(r,2),hr(r))}function lt(r,a,l){if(r.tag===3)G_(r,r,l);else for(;a!==null;){if(a.tag===3){G_(a,r,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gs===null||!Gs.has(u))){r=di(l,r),l=K1(2),u=Us(a,l,2),u!==null&&(Y1(l,u,a,r),za(u,2),hr(u));break}}a=a.return}}function fg(r,a,l){var u=r.pingCache;if(u===null){u=r.pingCache=new VR;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(sg=!0,p.add(l),r=FR.bind(null,r,a,l),a.then(r,r))}function FR(r,a,l){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,pt===r&&(He&l)===l&&(Dt===4||Dt===3&&(He&62914560)===He&&300>un()-Th?(nt&2)===0&&vl(r,0):ag|=l,gl===He&&(gl=0)),hr(r)}function K_(r,a){a===0&&(a=Sd()),r=Ja(r,a),r!==null&&(za(r,a),hr(r))}function BR(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),K_(r,l)}function qR(r,a){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),K_(r,l)}function HR(r,a){return It(r,a)}var Ih=null,_l=null,mg=!1,kh=!1,pg=!1,Qs=0;function hr(r){r!==_l&&r.next===null&&(_l===null?Ih=_l=r:_l=_l.next=r),kh=!0,mg||(mg=!0,GR())}function ru(r,a){if(!pg&&kh){pg=!0;do for(var l=!1,u=Ih;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var x=u.suspendedLanes,N=u.pingedLanes;y=(1<<31-bt(42|r)+1)-1,y&=p&~(x&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,W_(u,y))}else y=He,y=Yi(u,u===pt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ai(u,y)||(l=!0,W_(u,y));u=u.next}while(l);pg=!1}}function $R(){Y_()}function Y_(){kh=mg=!1;var r=0;Qs!==0&&nI()&&(r=Qs);for(var a=un(),l=null,u=Ih;u!==null;){var p=u.next,y=Q_(u,a);y===0?(u.next=null,l===null?Ih=p:l.next=p,p===null&&(_l=l)):(l=u,(r!==0||(y&3)!==0)&&(kh=!0)),u=p}en!==0&&en!==5||ru(r),Qs!==0&&(Qs=0)}function Q_(r,a){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var x=31-bt(y),N=1<<x,F=p[x];F===-1?((N&l)===0||(N&u)!==0)&&(p[x]=Hm(N,a)):F<=a&&(r.expiredLanes|=N),y&=~N}if(a=pt,l=He,l=Yi(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===a&&(ot===2||ot===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&$i(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ai(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(u!==null&&$i(u),Vr(l)){case 2:case 8:l=ja;break;case 32:l=Gi;break;case 268435456:l=Lo;break;default:l=Gi}return u=X_.bind(null,r),l=It(l,u),r.callbackPriority=a,r.callbackNode=l,a}return u!==null&&u!==null&&$i(u),r.callbackPriority=2,r.callbackNode=null,2}function X_(r,a){if(en!==0&&en!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Rh()&&r.callbackNode!==l)return null;var u=He;return u=Yi(r,r===pt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(k_(r,u,a),Q_(r,un()),r.callbackNode!=null&&r.callbackNode===l?X_.bind(null,r):null)}function W_(r,a){if(Rh())return null;k_(r,a,!0)}function GR(){rI(function(){(nt&6)!==0?It(Va,$R):Y_()})}function gg(){if(Qs===0){var r=sl;r===0&&(r=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),Qs=r}return Qs}function Z_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ho(""+r)}function J_(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function KR(r,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var y=Z_((p[an]||null).action),x=u.submitter;x&&(a=(a=x[an]||null)?Z_(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var N=new sr("action","action",null,u,p);r.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qs!==0){var F=x?J_(p,x):new FormData(p);Vp(l,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(N.preventDefault(),F=x?J_(p,x):new FormData(p),Vp(l,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var yg=0;yg<Jm.length;yg++){var vg=Jm[yg],YR=vg.toLowerCase(),QR=vg[0].toUpperCase()+vg.slice(1);Oi(YR,"on"+QR)}Oi(Ib,"onAnimationEnd"),Oi(kb,"onAnimationIteration"),Oi(Db,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(dR,"onTransitionRun"),Oi(hR,"onTransitionStart"),Oi(fR,"onTransitionCancel"),Oi(Mb,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function ew(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var x=u.length-1;0<=x;x--){var N=u[x],F=N.instance,Q=N.currentTarget;if(N=N.listener,F!==y&&p.isPropagationStopped())break e;y=N,p.currentTarget=Q;try{y(p)}catch(re){Gd(re)}p.currentTarget=null,y=F}else for(x=0;x<u.length;x++){if(N=u[x],F=N.instance,Q=N.currentTarget,N=N.listener,F!==y&&p.isPropagationStopped())break e;y=N,p.currentTarget=Q;try{y(p)}catch(re){Gd(re)}p.currentTarget=null,y=F}}}}function qe(r,a){var l=a[zo];l===void 0&&(l=a[zo]=new Set);var u=r+"__bubble";l.has(u)||(tw(a,r,2,!1),l.add(u))}function bg(r,a,l){var u=0;a&&(u|=4),tw(l,r,u,a)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function _g(r){if(!r[Dh]){r[Dh]=!0,yc.forEach(function(l){l!=="selectionchange"&&(XR.has(l)||bg(l,!1,r),bg(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Dh]||(a[Dh]=!0,bg("selectionchange",!1,a))}}function tw(r,a,l,u){switch(Iw(a)){case 2:var p=EI;break;case 8:p=SI;break;default:p=Pg}l=p.bind(null,a,l,r),p=void 0,!$a||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(a,l,{capture:!0,passive:p}):r.addEventListener(a,l,!0):p!==void 0?r.addEventListener(a,l,{passive:p}):r.addEventListener(a,l,!1)}function wg(r,a,l,u,p){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var N=u.stateNode.containerInfo;if(N===p)break;if(x===4)for(x=u.return;x!==null;){var F=x.tag;if((F===3||F===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;N!==null;){if(x=Zi(N),x===null)return;if(F=x.tag,F===5||F===6||F===26||F===27){u=y=x;continue e}N=N.parentNode}}u=u.return}Is(function(){var Q=y,re=oi(l),le=[];e:{var X=Ob.get(r);if(X!==void 0){var ee=sr,be=r;switch(r){case"keypress":if(Ka(l)===0)break e;case"keydown":case"keyup":ee=qd;break;case"focusin":be="focus",ee=Qa;break;case"focusout":be="blur",ee=Qa;break;case"beforeblur":case"afterblur":ee=Qa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=w;break;case Ib:case kb:case Db:ee=Vd;break;case Mb:ee=k;break;case"scroll":case"scrollend":ee=Rc;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=zr;break;case"toggle":case"beforetoggle":ee=Le}var Ne=(a&4)!==0,ft=!Ne&&(r==="scroll"||r==="scrollend"),G=Ne?X!==null?X+"Capture":null:X;Ne=[];for(var q=Q,Y;q!==null;){var ae=q;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||G===null||(ae=Ii(q,G),ae!=null&&Ne.push(au(q,ae,Y))),ft)break;q=q.return}0<Ne.length&&(X=new ee(X,be,null,l,re),le.push({event:X,listeners:Ne}))}}if((a&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",X&&l!==Ac&&(be=l.relatedTarget||l.fromElement)&&(Zi(be)||be[Xi]))break e;if((ee||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(be=l.relatedTarget||l.toElement,ee=Q,be=be?Zi(be):null,be!==null&&(ft=o(be),Ne=be.tag,be!==ft||Ne!==5&&Ne!==27&&Ne!==6)&&(be=null)):(ee=null,be=Q),ee!==be)){if(Ne=Ic,ae="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=zr,ae="onPointerLeave",G="onPointerEnter",q="pointer"),ft=ee==null?X:Yn(ee),Y=be==null?X:Yn(be),X=new Ne(ae,q+"leave",ee,l,re),X.target=ft,X.relatedTarget=Y,ae=null,Zi(re)===Q&&(Ne=new Ne(G,q+"enter",be,l,re),Ne.target=Y,Ne.relatedTarget=ft,ae=Ne),ft=ae,ee&&be)t:{for(Ne=WR,G=ee,q=be,Y=0,ae=G;ae;ae=Ne(ae))Y++;ae=0;for(var Ae=q;Ae;Ae=Ne(Ae))ae++;for(;0<Y-ae;)G=Ne(G),Y--;for(;0<ae-Y;)q=Ne(q),ae--;for(;Y--;){if(G===q||q!==null&&G===q.alternate){Ne=G;break t}G=Ne(G),q=Ne(q)}Ne=null}else Ne=null;ee!==null&&nw(le,X,ee,Ne,!1),be!==null&&ft!==null&&nw(le,ft,be,Ne,!0)}}e:{if(X=Q?Yn(Q):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var Je=bb;else if(yb(X))if(_b)Je=lR;else{Je=aR;var xe=sR}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&qo(Q.elementType)&&(Je=bb):Je=oR;if(Je&&(Je=Je(r,Q))){vb(le,Je,l,re);break e}xe&&xe(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Tc(X,"number",X.value)}switch(xe=Q?Yn(Q):window,r){case"focusin":(yb(xe)||xe.contentEditable==="true")&&(Wo=xe,Xm=Q,Pc=null);break;case"focusout":Pc=Xm=Wo=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Nb(le,l,re);break;case"selectionchange":if(uR)break;case"keydown":case"keyup":Nb(le,l,re)}var Ue;if(tt)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Xo?Xa(r,l)&&($e="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&($e="onCompositionStart");$e&&(lr&&l.locale!=="ko"&&(Xo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Xo&&(Ue=Nc()):(rr=re,Cc="value"in rr?rr.value:rr.textContent,Xo=!0)),xe=Mh(Q,$e),0<xe.length&&($e=new or($e,r,null,l,re),le.push({event:$e,listeners:xe}),Ue?$e.data=Ue:(Ue=Qo(l),Ue!==null&&($e.data=Ue)))),(Ue=ci?tR(r,l):nR(r,l))&&($e=Mh(Q,"onBeforeInput"),0<$e.length&&(xe=new or("onBeforeInput","beforeinput",null,l,re),le.push({event:xe,listeners:$e}),xe.data=Ue)),KR(le,r,Q,l,re)}ew(le,a)})}function au(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Mh(r,a){for(var l=a+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ii(r,l),p!=null&&u.unshift(au(r,p,y)),p=Ii(r,a),p!=null&&u.push(au(r,p,y))),r.tag===3)return u;r=r.return}return[]}function WR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function nw(r,a,l,u,p){for(var y=a._reactName,x=[];l!==null&&l!==u;){var N=l,F=N.alternate,Q=N.stateNode;if(N=N.tag,F!==null&&F===u)break;N!==5&&N!==26&&N!==27||Q===null||(F=Q,p?(Q=Ii(l,y),Q!=null&&x.unshift(au(l,Q,F))):p||(Q=Ii(l,y),Q!=null&&x.push(au(l,Q,F)))),l=l.return}x.length!==0&&r.push({event:a,listeners:x})}var ZR=/\r\n?/g,JR=/\u0000|\uFFFD/g;function iw(r){return(typeof r=="string"?r:""+r).replace(ZR,`
`).replace(JR,"")}function rw(r,a){return a=iw(a),iw(r)===a}function ht(r,a,l,u,p,y){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Pn(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Pn(r,""+u);break;case"className":Qn(r,"class",u);break;case"tabIndex":Qn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(r,l,u);break;case"style":Sc(r,u,y);break;case"data":if(a!=="object"){Qn(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Ho(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&ht(r,a,"name",p.name,p,null),ht(r,a,"formEncType",p.formEncType,p,null),ht(r,a,"formMethod",p.formMethod,p,null),ht(r,a,"formTarget",p.formTarget,p,null)):(ht(r,a,"encType",p.encType,p,null),ht(r,a,"method",p.method,p,null),ht(r,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Ho(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Ri);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=Ho(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Fo(r,"popover",u);break;case"xlinkActuate":Ht(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ht(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ht(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ht(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ht(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ht(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Md.get(l)||l,Fo(r,l,u))}}function xg(r,a,l,u,p,y){switch(l){case"style":Sc(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?Pn(r,u):(typeof u=="number"||typeof u=="bigint")&&Pn(r,""+u);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=r[an]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,u,p);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Fo(r,l,u)}}}function pn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var u=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,y,x,l,null)}}p&&ht(r,a,"srcSet",l.srcSet,l,null),u&&ht(r,a,"src",l.src,l,null);return;case"input":qe("invalid",r);var N=y=x=p=null,F=null,Q=null;for(u in l)if(l.hasOwnProperty(u)){var re=l[u];if(re!=null)switch(u){case"name":p=re;break;case"type":x=re;break;case"checked":F=re;break;case"defaultChecked":Q=re;break;case"value":y=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:ht(r,a,u,re,l,null)}}Id(r,y,N,F,Q,x,p,!1);return;case"select":qe("invalid",r),u=x=y=null;for(p in l)if(l.hasOwnProperty(p)&&(N=l[p],N!=null))switch(p){case"value":y=N;break;case"defaultValue":x=N;break;case"multiple":u=N;default:ht(r,a,p,N,l,null)}a=y,l=x,r.multiple=!!u,a!=null?As(r,!!u,a,!1):l!=null&&As(r,!!u,l,!0);return;case"textarea":qe("invalid",r),y=p=u=null;for(x in l)if(l.hasOwnProperty(x)&&(N=l[x],N!=null))switch(x){case"value":u=N;break;case"defaultValue":p=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:ht(r,a,x,N,l,null)}Cs(r,u,p,y);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(r,a,F,u,l,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(u=0;u<su.length;u++)qe(su[u],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,Q,u,l,null)}return;default:if(qo(a)){for(re in l)l.hasOwnProperty(re)&&(u=l[re],u!==void 0&&xg(r,a,re,u,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(u=l[N],u!=null&&ht(r,a,N,u,l,null))}function eI(r,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,x=null,N=null,F=null,Q=null,re=null;for(ee in l){var le=l[ee];if(l.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=le;default:u.hasOwnProperty(ee)||ht(r,a,ee,null,u,le)}}for(var X in u){var ee=u[X];if(le=l[X],u.hasOwnProperty(X)&&(ee!=null||le!=null))switch(X){case"type":y=ee;break;case"name":p=ee;break;case"checked":Q=ee;break;case"defaultChecked":re=ee;break;case"value":x=ee;break;case"defaultValue":N=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==le&&ht(r,a,X,ee,u,le)}}Bo(r,x,N,F,Q,re,y,p);return;case"select":ee=x=N=X=null;for(y in l)if(F=l[y],l.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ee=F;default:u.hasOwnProperty(y)||ht(r,a,y,null,u,F)}for(p in u)if(y=u[p],F=l[p],u.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":X=y;break;case"defaultValue":N=y;break;case"multiple":x=y;default:y!==F&&ht(r,a,p,y,u,F)}a=N,l=x,u=ee,X!=null?As(r,!!l,X,!1):!!u!=!!l&&(a!=null?As(r,!!l,a,!0):As(r,!!l,l?[]:"",!1));return;case"textarea":ee=X=null;for(N in l)if(p=l[N],l.hasOwnProperty(N)&&p!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(r,a,N,null,u,p)}for(x in u)if(p=u[x],y=l[x],u.hasOwnProperty(x)&&(p!=null||y!=null))switch(x){case"value":X=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ht(r,a,x,p,u,y)}kd(r,X,ee);return;case"option":for(var be in l)if(X=l[be],l.hasOwnProperty(be)&&X!=null&&!u.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:ht(r,a,be,null,u,X)}for(F in u)if(X=u[F],ee=l[F],u.hasOwnProperty(F)&&X!==ee&&(X!=null||ee!=null))switch(F){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ht(r,a,F,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)X=l[Ne],l.hasOwnProperty(Ne)&&X!=null&&!u.hasOwnProperty(Ne)&&ht(r,a,Ne,null,u,X);for(Q in u)if(X=u[Q],ee=l[Q],u.hasOwnProperty(Q)&&X!==ee&&(X!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:ht(r,a,Q,X,u,ee)}return;default:if(qo(a)){for(var ft in l)X=l[ft],l.hasOwnProperty(ft)&&X!==void 0&&!u.hasOwnProperty(ft)&&xg(r,a,ft,void 0,u,X);for(re in u)X=u[re],ee=l[re],!u.hasOwnProperty(re)||X===ee||X===void 0&&ee===void 0||xg(r,a,re,X,u,ee);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!u.hasOwnProperty(G)&&ht(r,a,G,null,u,X);for(le in u)X=u[le],ee=l[le],!u.hasOwnProperty(le)||X===ee||X==null&&ee==null||ht(r,a,le,X,u,ee)}function sw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],y=p.transferSize,x=p.initiatorType,N=p.duration;if(y&&N&&sw(x)){for(x=0,N=p.responseEnd,u+=1;u<l.length;u++){var F=l[u],Q=F.startTime;if(Q>N)break;var re=F.transferSize,le=F.initiatorType;re&&sw(le)&&(F=F.responseEnd,x+=re*(F<N?1:(N-Q)/(F-Q)))}if(--u,a+=8*(y+x)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Tg=null,Eg=null;function Oh(r){return r.nodeType===9?r:r.ownerDocument}function aw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ow(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Sg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ag=null;function nI(){var r=window.event;return r&&r.type==="popstate"?r===Ag?!1:(Ag=r,!0):(Ag=null,!1)}var lw=typeof setTimeout=="function"?setTimeout:void 0,iI=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,rI=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(r){return cw.resolve(null).then(r).catch(sI)}:lw;function sI(r){setTimeout(function(){throw r})}function Xs(r){return r==="head"}function uw(r,a){var l=a,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(p),El(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")ou(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,ou(l);for(var y=l.firstChild;y;){var x=y.nextSibling,N=y.nodeName;y[Wi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=x}}else l==="body"&&ou(r.ownerDocument.body);l=p}while(l);El(a)}function dw(r,a){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function Cg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Cg(l),Uo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function aI(r,a,l,u){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Wi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=gi(r.nextSibling),r===null)break}return null}function oI(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=gi(r.nextSibling),r===null))return null;return r}function hw(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=gi(r.nextSibling),r===null))return null;return r}function Ng(r){return r.data==="$?"||r.data==="$~"}function Rg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function lI(r,a){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function gi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Ig=null;function fw(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(a===0)return gi(r.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}r=r.nextSibling}return null}function mw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return r;a--}else l!=="/$"&&l!=="/&"||a++}r=r.previousSibling}return null}function pw(r,a,l){switch(a=Oh(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ou(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Uo(r)}var yi=new Map,gw=new Set;function Ph(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var es=W.d;W.d={f:cI,r:uI,D:dI,C:hI,L:fI,m:mI,X:gI,S:pI,M:yI};function cI(){var r=es.f(),a=Ah();return r||a}function uI(r){var a=ai(r);a!==null&&a.tag===5&&a.type==="form"?M1(a):es.r(r)}var wl=typeof document>"u"?null:document;function yw(r,a,l){var u=wl;if(u&&typeof a=="string"&&a){var p=On(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),gw.has(p)||(gw.add(p),r={rel:r,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),pn(a,"link",r),qt(a),u.head.appendChild(a)))}}function dI(r){es.D(r),yw("dns-prefetch",r,null)}function hI(r,a){es.C(r,a),yw("preconnect",r,a)}function fI(r,a,l){es.L(r,a,l);var u=wl;if(u&&r&&a){var p='link[rel="preload"][as="'+On(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+On(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+On(l.imageSizes)+'"]')):p+='[href="'+On(r)+'"]';var y=p;switch(a){case"style":y=xl(r);break;case"script":y=Tl(r)}yi.has(y)||(r=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),yi.set(y,r),u.querySelector(p)!==null||a==="style"&&u.querySelector(lu(y))||a==="script"&&u.querySelector(cu(y))||(a=u.createElement("link"),pn(a,"link",r),qt(a),u.head.appendChild(a)))}}function mI(r,a){es.m(r,a);var l=wl;if(l&&r){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+On(u)+'"][href="'+On(r)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Tl(r)}if(!yi.has(y)&&(r=b({rel:"modulepreload",href:r},a),yi.set(y,r),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(cu(y)))return}u=l.createElement("link"),pn(u,"link",r),qt(u),l.head.appendChild(u)}}}function pI(r,a,l){es.S(r,a,l);var u=wl;if(u&&r){var p=Ji(u).hoistableStyles,y=xl(r);a=a||"default";var x=p.get(y);if(!x){var N={loading:0,preload:null};if(x=u.querySelector(lu(y)))N.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":a},l),(l=yi.get(y))&&kg(r,l);var F=x=u.createElement("link");qt(F),pn(F,"link",r),F._p=new Promise(function(Q,re){F.onload=Q,F.onerror=re}),F.addEventListener("load",function(){N.loading|=1}),F.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Vh(x,a,u)}x={type:"stylesheet",instance:x,count:1,state:N},p.set(y,x)}}}function gI(r,a){es.X(r,a);var l=wl;if(l&&r){var u=Ji(l).hoistableScripts,p=Tl(r),y=u.get(p);y||(y=l.querySelector(cu(p)),y||(r=b({src:r,async:!0},a),(a=yi.get(p))&&Dg(r,a),y=l.createElement("script"),qt(y),pn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function yI(r,a){es.M(r,a);var l=wl;if(l&&r){var u=Ji(l).hoistableScripts,p=Tl(r),y=u.get(p);y||(y=l.querySelector(cu(p)),y||(r=b({src:r,async:!0,type:"module"},a),(a=yi.get(p))&&Dg(r,a),y=l.createElement("script"),qt(y),pn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function vw(r,a,l,u){var p=(p=Ee.current)?Ph(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=xl(l.href),l=Ji(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=xl(l.href);var y=Ji(p).hoistableStyles,x=y.get(r);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,x),(y=p.querySelector(lu(r)))&&!y._p&&(x.instance=y,x.state.loading=5),yi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},yi.set(r,l),y||vI(p,r,l,x.state))),a&&u===null)throw Error(i(528,""));return x}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Tl(l),l=Ji(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function xl(r){return'href="'+On(r)+'"'}function lu(r){return'link[rel="stylesheet"]['+r+"]"}function bw(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function vI(r,a,l,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),pn(a,"link",l),qt(a),r.head.appendChild(a))}function Tl(r){return'[src="'+On(r)+'"]'}function cu(r){return"script[async]"+r}function _w(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+On(l.href)+'"]');if(u)return a.instance=u,qt(u),u;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),qt(u),pn(u,"style",p),Vh(u,l.precedence,r),a.instance=u;case"stylesheet":p=xl(l.href);var y=r.querySelector(lu(p));if(y)return a.state.loading|=4,a.instance=y,qt(y),y;u=bw(l),(p=yi.get(p))&&kg(u,p),y=(r.ownerDocument||r).createElement("link"),qt(y);var x=y;return x._p=new Promise(function(N,F){x.onload=N,x.onerror=F}),pn(y,"link",u),a.state.loading|=4,Vh(y,l.precedence,r),a.instance=y;case"script":return y=Tl(l.src),(p=r.querySelector(cu(y)))?(a.instance=p,qt(p),p):(u=l,(p=yi.get(y))&&(u=b({},l),Dg(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),qt(p),pn(p,"link",u),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Vh(u,l.precedence,r));return a.instance}function Vh(r,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,x=0;x<u.length;x++){var N=u[x];if(N.dataset.precedence===a)y=N;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function kg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Dg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var jh=null;function ww(r,a,l){if(jh===null){var u=new Map,p=jh=new Map;p.set(l,u)}else p=jh,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var y=l[p];if(!(y[Wi]||y[Bt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=r+x;var N=u.get(x);N?N.push(y):u.set(x,[y])}}return u}function xw(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function bI(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Tw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function _I(r,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=xl(u.href),y=a.querySelector(lu(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Lh.bind(r),a.then(r,r)),l.state.loading|=4,l.instance=y,qt(y);return}y=a.ownerDocument||a,u=bw(u),(p=yi.get(p))&&kg(u,p),y=y.createElement("link"),qt(y);var x=y;x._p=new Promise(function(N,F){x.onload=N,x.onerror=F}),pn(y,"link",u),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Lh.bind(r),a.addEventListener("load",l),a.addEventListener("error",l))}}var Mg=0;function wI(r,a){return r.stylesheets&&r.count===0&&Uh(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&Uh(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Mg===0&&(Mg=62500*tI());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Uh(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Mg?50:800)+a);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var zh=null;function Uh(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,zh=new Map,a.forEach(xI,r),zh=null,Lh.call(r))}function xI(r,a){if(!(a.state.loading&4)){var l=zh.get(r);if(l)var u=l.get(null);else{l=new Map,zh.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var x=p[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}p=a.instance,x=p.getAttribute("data-precedence"),y=l.get(x)||u,y===u&&l.set(null,p),l.set(x,p),this.count++,u=Lh.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var uu={$$typeof:L,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function TI(r,a,l,u,p,y,x,N,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Ew(r,a,l,u,p,y,x,N,F,Q,re,le){return r=new TI(r,a,l,x,F,Q,re,le,N),a=1,y===!0&&(a|=24),y=Wn(3,null,null,a),r.current=y,y.stateNode=r,a=hp(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:a},gp(y),r}function Sw(r){return r?(r=el,r):el}function Aw(r,a,l,u,p,y){p=Sw(p),u.context===null?u.context=p:u.pendingContext=p,u=zs(a),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Us(r,u,a),l!==null&&(Un(l,r,a),Bc(l,r,a))}function Cw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Og(r,a){Cw(r,a),(r=r.alternate)&&Cw(r,a)}function Nw(r){if(r.tag===13||r.tag===31){var a=Ja(r,67108864);a!==null&&Un(a,r,67108864),Og(r,67108864)}}function Rw(r){if(r.tag===13||r.tag===31){var a=ni();a=Fa(a);var l=Ja(r,a);l!==null&&Un(l,r,a),Og(r,a)}}var Fh=!0;function EI(r,a,l,u){var p=H.T;H.T=null;var y=W.p;try{W.p=2,Pg(r,a,l,u)}finally{W.p=y,H.T=p}}function SI(r,a,l,u){var p=H.T;H.T=null;var y=W.p;try{W.p=8,Pg(r,a,l,u)}finally{W.p=y,H.T=p}}function Pg(r,a,l,u){if(Fh){var p=Vg(u);if(p===null)wg(r,a,u,Bh,l),kw(r,u);else if(CI(p,r,a,l,u))u.stopPropagation();else if(kw(r,u),a&4&&-1<AI.indexOf(r)){for(;p!==null;){var y=ai(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Ki(y.pendingLanes);if(x!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var F=1<<31-bt(x);N.entanglements[1]|=F,x&=~F}hr(y),(nt&6)===0&&(Eh=un()+500,ru(0))}}break;case 31:case 13:N=Ja(y,2),N!==null&&Un(N,y,2),Ah(),Og(y,2)}if(y=Vg(u),y===null&&wg(r,a,u,Bh,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else wg(r,a,u,null,l)}}function Vg(r){return r=oi(r),jg(r)}var Bh=null;function jg(r){if(Bh=null,r=Zi(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=c(a),r!==null)return r;r=null}else if(l===31){if(r=d(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Bh=r,null}function Iw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Or()){case Va:return 2;case ja:return 8;case Gi:case fc:return 32;case Lo:return 268435456;default:return 32}default:return 32}}var Lg=!1,Ws=null,Zs=null,Js=null,du=new Map,hu=new Map,ea=[],AI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kw(r,a){switch(r){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":du.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(a.pointerId)}}function fu(r,a,l,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ai(a),a!==null&&Nw(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function CI(r,a,l,u,p){switch(a){case"focusin":return Ws=fu(Ws,r,a,l,u,p),!0;case"dragenter":return Zs=fu(Zs,r,a,l,u,p),!0;case"mouseover":return Js=fu(Js,r,a,l,u,p),!0;case"pointerover":var y=p.pointerId;return du.set(y,fu(du.get(y)||null,r,a,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,hu.set(y,fu(hu.get(y)||null,r,a,l,u,p)),!0}return!1}function Dw(r){var a=Zi(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){r.blockedOn=a,Ci(r.priority,function(){Rw(l)});return}}else if(a===31){if(a=d(l),a!==null){r.blockedOn=a,Ci(r.priority,function(){Rw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qh(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Vg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Ac=u,l.target.dispatchEvent(u),Ac=null}else return a=ai(l),a!==null&&Nw(a),r.blockedOn=l,!1;a.shift()}return!0}function Mw(r,a,l){qh(r)&&l.delete(a)}function NI(){Lg=!1,Ws!==null&&qh(Ws)&&(Ws=null),Zs!==null&&qh(Zs)&&(Zs=null),Js!==null&&qh(Js)&&(Js=null),du.forEach(Mw),hu.forEach(Mw)}function Hh(r,a){r.blockedOn===a&&(r.blockedOn=null,Lg||(Lg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,NI)))}var $h=null;function Ow(r){$h!==r&&($h=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$h===r&&($h=null);for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1],p=r[a+2];if(typeof u!="function"){if(jg(u||l)===null)continue;break}var y=ai(l);y!==null&&(r.splice(a,3),a-=3,Vp(y,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function El(r){function a(F){return Hh(F,r)}Ws!==null&&Hh(Ws,r),Zs!==null&&Hh(Zs,r),Js!==null&&Hh(Js,r),du.forEach(a),hu.forEach(a);for(var l=0;l<ea.length;l++){var u=ea[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ea.length&&(l=ea[0],l.blockedOn===null);)Dw(l),l.blockedOn===null&&ea.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],x=p[an]||null;if(typeof y=="function")x||Ow(l);else if(x){var N=null;if(y&&y.hasAttribute("formAction")){if(p=y,x=y[an]||null)N=x.formAction;else if(jg(p)!==null)continue}else N=x.action;typeof N=="function"?l[u+1]=N:(l.splice(u,3),u-=3),Ow(l)}}}function Pw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return p=x})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function zg(r){this._internalRoot=r}Gh.prototype.render=zg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=ni();Aw(l,u,r,a,null,null)},Gh.prototype.unmount=zg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Aw(r.current,2,null,r,null,null),Ah(),a[Xi]=null}};function Gh(r){this._internalRoot=r}Gh.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ad();r={blockedOn:null,target:r,priority:a};for(var l=0;l<ea.length&&a!==0&&a<ea[l].priority;l++);ea.splice(l,0,r),l===0&&Dw(r)}};var Vw=e.version;if(Vw!=="19.2.0")throw Error(i(527,Vw,"19.2.0"));W.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var RI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{yt=Kh.inject(RI),mt=Kh}catch{}}return pu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,u="",p=q1,y=H1,x=$1;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ew(r,1,!1,null,null,l,u,null,p,y,x,Pw),r[Xi]=a.current,_g(r),new zg(a)},pu.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var u=!1,p="",y=q1,x=H1,N=$1,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=Ew(r,1,!0,a,l??null,u,p,F,y,x,N,Pw),a.context=Sw(null),l=a.current,u=ni(),u=Fa(u),p=zs(u),p.callback=null,Us(l,p,u),l=u,a.current.lanes=l,za(a,l),hr(a),r[Xi]=a.current,_g(r),new Gh(a)},pu.version="19.2.0",pu}var Gw;function UI(){if(Gw)return Bg.exports;Gw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bg.exports=zI(),Bg.exports}var FI=UI();const BI="modulepreload",qI=function(t){return"/personal-budget-pwa/"+t},Kw={},HI=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){let f=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");s=f(n.map(g=>{if(g=qI(g),g in Kw)return;Kw[g]=!0;const b=g.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":BI,b||(E.as="script"),E.crossOrigin="",E.href=g,h&&E.setAttribute("nonce",h),document.head.appendChild(E),b)return new Promise((I,A)=>{E.addEventListener("load",I),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return s.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function $I(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:c}=t;let d,h;const f=async(b=!0)=>{await h};async function g(){if("serviceWorker"in navigator){if(d=await HI(async()=>{const{Workbox:b}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:b}},[]).then(({Workbox:b})=>new b("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(b=>{c?.(b)}),!d)return;d.addEventListener("activated",b=>{(b.isUpdate||b.isExternal)&&window.location.reload()}),d.addEventListener("installed",b=>{b.isUpdate||i?.()}),d.register({immediate:e}).then(b=>{o?o("/personal-budget-pwa/sw.js",b):s?.(b)}).catch(b=>{c?.(b)})}}return h=g(),f}var Yw="popstate";function GI(t={}){function e(s,o){let{pathname:c="/",search:d="",hash:h=""}=Do(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),C0("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=s.location.href,f=h.indexOf("#");d=f===-1?h:h.slice(0,f)}return d+"#"+(typeof o=="string"?o:Lu(o))}function i(s,o){si(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return YI(e,n,i,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function si(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KI(){return Math.random().toString(36).substring(2,10)}function Qw(t,e){return{usr:t.state,key:t.key,idx:e}}function C0(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Do(e):e,state:n,key:e&&e.key||i||KI()}}function Lu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Do(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function YI(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,d="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function b(){d="POP";let C=g(),O=C==null?null:C-f;f=C,h&&h({action:d,location:A.location,delta:O})}function _(C,O){d="PUSH";let z=C0(A.location,C,O);n&&n(z,C),f=g()+1;let L=Qw(z,f),$=A.createHref(z);try{c.pushState(L,"",$)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;s.location.assign($)}o&&h&&h({action:d,location:A.location,delta:1})}function E(C,O){d="REPLACE";let z=C0(A.location,C,O);n&&n(z,C),f=g();let L=Qw(z,f),$=A.createHref(z);c.replaceState(L,"",$),o&&h&&h({action:d,location:A.location,delta:0})}function I(C){return QI(C)}let A={get action(){return d},get location(){return t(s,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Yw,b),h=C,()=>{s.removeEventListener(Yw,b),h=null}},createHref(C){return e(s,C)},createURL:I,encodeLocation(C){let O=I(C);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:E,go(C){return c.go(C)}};return A}function QI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),At(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Lu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function cS(t,e,n="/"){return XI(t,e,n,!1)}function XI(t,e,n,i){let s=typeof e=="string"?Do(e):e,o=us(s.pathname||"/",n);if(o==null)return null;let c=uS(t);WI(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=lk(o);d=ak(c[h],f,i)}return d}function uS(t,e=[],n=[],i="",s=!1){let o=(c,d,h=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&h)return;At(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let b=os([i,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(At(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),uS(c.children,e,_,b,h)),!(c.path==null&&!c.index)&&e.push({path:b,score:rk(b,c.index),routesMeta:_})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of dS(c.path))o(c,d,!0,h)}),e}function dS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let c=dS(i.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function WI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sk(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var ZI=/^:[\w-]+$/,JI=3,ek=2,tk=1,nk=10,ik=-2,Xw=t=>t==="*";function rk(t,e){let n=t.split("/"),i=n.length;return n.some(Xw)&&(i+=ik),e&&(i+=ek),n.filter(s=>!Xw(s)).reduce((s,o)=>s+(ZI.test(o)?JI:o===""?tk:nk),i)}function sk(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function ak(t,e,n=!1){let{routesMeta:i}=t,s={},o="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],f=d===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",b=Nf({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!b&&f&&n&&!i[i.length-1].route.index&&(b=Nf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!b)return null;Object.assign(s,b.params),c.push({params:s,pathname:os([o,b.pathname]),pathnameBase:fk(os([o,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(o=os([o,b.pathnameBase]))}return c}function Nf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=ok(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:b},_)=>{if(g==="*"){let I=d[_]||"";c=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const E=d[_];return b&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function ok(t,e=!1,n=!0){si(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function lk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function us(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var ck=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uk=t=>ck.test(t);function dk(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Do(t):t,o;if(n)if(uk(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),si(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?o=Ww(n.substring(1),"/"):o=Ww(n,e)}else o=e;return{pathname:o,search:mk(i),hash:pk(s)}}function Ww(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Gg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hS(t){let e=hk(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fS(t,e,n,i=!1){let s;typeof t=="string"?s=Do(t):(s={...t},At(!s.pathname||!s.pathname.includes("?"),Gg("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),Gg("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),Gg("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,d;if(c==null)d=n;else{let b=e.length-1;if(!i&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),b-=1;s.pathname=_.join("/")}d=b>=0?e[b]:"/"}let h=dk(s,d),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var os=t=>t.join("/").replace(/\/\/+/g,"/"),fk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mS=["POST","PUT","PATCH","DELETE"];new Set(mS);var yk=["GET",...mS];new Set(yk);var ec=D.createContext(null);ec.displayName="DataRouter";var sm=D.createContext(null);sm.displayName="DataRouterState";D.createContext(!1);var pS=D.createContext({isTransitioning:!1});pS.displayName="ViewTransition";var vk=D.createContext(new Map);vk.displayName="Fetchers";var bk=D.createContext(null);bk.displayName="Await";var Nr=D.createContext(null);Nr.displayName="Navigation";var rd=D.createContext(null);rd.displayName="Location";var Rr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var Iy=D.createContext(null);Iy.displayName="RouteError";function _k(t,{relative:e}={}){At(sd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Nr),{hash:s,pathname:o,search:c}=ad(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:os([n,o])),i.createHref({pathname:d,search:c,hash:s})}function sd(){return D.useContext(rd)!=null}function Ir(){return At(sd(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(rd).location}var gS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yS(t){D.useContext(Nr).static||D.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=D.useContext(Rr);return t?Ok():wk()}function wk(){At(sd(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(ec),{basename:e,navigator:n}=D.useContext(Nr),{matches:i}=D.useContext(Rr),{pathname:s}=Ir(),o=JSON.stringify(hS(i)),c=D.useRef(!1);return yS(()=>{c.current=!0}),D.useCallback((h,f={})=>{if(si(c.current,gS),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=fS(h,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:os([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,s,t])}D.createContext(null);function xk(){let{matches:t}=D.useContext(Rr),e=t[t.length-1];return e?e.params:{}}function ad(t,{relative:e}={}){let{matches:n}=D.useContext(Rr),{pathname:i}=Ir(),s=JSON.stringify(hS(n));return D.useMemo(()=>fS(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function Tk(t,e){return vS(t,e)}function vS(t,e,n,i,s){At(sd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(Nr),{matches:c}=D.useContext(Rr),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let z=b&&b.path||"";bS(f,!b||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=Ir(),E;if(e){let z=typeof e=="string"?Do(e):e;At(g==="/"||z.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),E=z}else E=_;let I=E.pathname||"/",A=I;if(g!=="/"){let z=g.replace(/^\//,"").split("/");A="/"+I.replace(/^\//,"").split("/").slice(z.length).join("/")}let C=cS(t,{pathname:A});si(b||C!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),si(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Nk(C&&C.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:os([g,o.encodeLocation?o.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:os([g,o.encodeLocation?o.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,n,i,s);return e&&O?D.createElement(rd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},O):O}function Ek(){let t=Mk(),e=gk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,c)}var Sk=D.createElement(Ek,null),Ak=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Rr.Provider,{value:this.props.routeContext},D.createElement(Iy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ck({routeContext:t,match:e,children:n}){let i=D.useContext(ec);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Rr.Provider,{value:t},n)}function Nk(t,e=[],n=null,i=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let g=o.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);At(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,h=-1;if(n)for(let g=0;g<o.length;g++){let b=o[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=g),b.route.id){let{loaderData:_,errors:E}=n,I=b.route.loader&&!_.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||I){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=n&&i?(g,b)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:b})}:void 0;return o.reduceRight((g,b,_)=>{let E,I=!1,A=null,C=null;n&&(E=c&&b.route.id?c[b.route.id]:void 0,A=b.route.errorElement||Sk,d&&(h<0&&_===0?(bS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,C=null):h===_&&(I=!0,C=b.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,_+1)),z=()=>{let L;return E?L=A:I?L=C:b.route.Component?L=D.createElement(b.route.Component,null):b.route.element?L=b.route.element:L=g,D.createElement(Ck,{match:b,routeContext:{outlet:g,matches:O,isDataRoute:n!=null},children:L})};return n&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?D.createElement(Ak,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:z(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:f}):z()},null)}function ky(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rk(t){let e=D.useContext(ec);return At(e,ky(t)),e}function Ik(t){let e=D.useContext(sm);return At(e,ky(t)),e}function kk(t){let e=D.useContext(Rr);return At(e,ky(t)),e}function Dy(t){let e=kk(t),n=e.matches[e.matches.length-1];return At(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Dk(){return Dy("useRouteId")}function Mk(){let t=D.useContext(Iy),e=Ik("useRouteError"),n=Dy("useRouteError");return t!==void 0?t:e.errors?.[n]}function Ok(){let{router:t}=Rk("useNavigate"),e=Dy("useNavigate"),n=D.useRef(!1);return yS(()=>{n.current=!0}),D.useCallback(async(s,o={})=>{si(n.current,gS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var Zw={};function bS(t,e,n){!e&&!Zw[t]&&(Zw[t]=!0,si(!1,n))}D.memo(Pk);function Pk({routes:t,future:e,state:n,unstable_onError:i}){return vS(t,void 0,n,i,e)}function sa(t){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vk({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:o=!1}){At(!sd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof n=="string"&&(n=Do(n));let{pathname:h="/",search:f="",hash:g="",state:b=null,key:_="default"}=n,E=D.useMemo(()=>{let I=us(h,c);return I==null?null:{location:{pathname:I,search:f,hash:g,state:b,key:_},navigationType:i}},[c,h,f,g,b,_,i]);return si(E!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:D.createElement(Nr.Provider,{value:d},D.createElement(rd.Provider,{children:e,value:E}))}function jk({children:t,location:e}){return Tk(N0(t),e)}function N0(t,e=[]){let n=[];return D.Children.forEach(t,(i,s)=>{if(!D.isValidElement(i))return;let o=[...e,s];if(i.type===D.Fragment){n.push.apply(n,N0(i.props.children,o));return}At(i.type===sa,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=N0(i.props.children,o)),n.push(c)}),n}var cf="get",uf="application/x-www-form-urlencoded";function am(t){return t!=null&&typeof t.tagName=="string"}function Lk(t){return am(t)&&t.tagName.toLowerCase()==="button"}function zk(t){return am(t)&&t.tagName.toLowerCase()==="form"}function Uk(t){return am(t)&&t.tagName.toLowerCase()==="input"}function Fk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Bk(t,e){return t.button===0&&(!e||e==="_self")&&!Fk(t)}function R0(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(s=>[n,s]):[[n,i]])},[]))}function qk(t,e){let n=R0(t);return e&&e.forEach((i,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}var Qh=null;function Hk(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var $k=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kg(t){return t!=null&&!$k.has(t)?(si(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uf}"`),null):t}function Gk(t,e){let n,i,s,o,c;if(zk(t)){let d=t.getAttribute("action");i=d?us(d,e):null,n=t.getAttribute("method")||cf,s=Kg(t.getAttribute("enctype"))||uf,o=new FormData(t)}else if(Lk(t)||Uk(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(i=h?us(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||cf,s=Kg(t.getAttribute("formenctype"))||Kg(d.getAttribute("enctype"))||uf,o=new FormData(d,t),!Hk()){let{name:f,type:g,value:b}=t;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,b)}}else{if(am(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cf,i=null,s=uf,c=t}return o&&s==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function My(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kk(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&us(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Yk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Xk(t,e,n){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await Yk(o,n);return c.links?c.links():[]}return[]}));return eD(i.flat(1).filter(Qk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Jw(t,e,n,i,s,o){let c=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>n[f].pathname!==h.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):o==="data"?e.filter((h,f)=>{let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Wk(t,e,{includeHydrateFallback:n}={}){return Zk(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Zk(t){return[...new Set(t)]}function Jk(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function eD(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(Jk(s));return n.has(o)||(n.add(o),i.push({key:o,link:s})),i},[])}function _S(){let t=D.useContext(ec);return My(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tD(){let t=D.useContext(sm);return My(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Oy=D.createContext(void 0);Oy.displayName="FrameworkContext";function wS(){let t=D.useContext(Oy);return My(t,"You must render this element inside a <HydratedRouter> element"),t}function nD(t,e){let n=D.useContext(Oy),[i,s]=D.useState(!1),[o,c]=D.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=e,_=D.useRef(null);D.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=O=>{O.forEach(z=>{c(z.isIntersecting)})},C=new IntersectionObserver(A,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[t]),D.useEffect(()=>{if(i){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[i]);let E=()=>{s(!0)},I=()=>{s(!1),c(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:gu(d,E),onBlur:gu(h,I),onMouseEnter:gu(f,E),onMouseLeave:gu(g,I),onTouchStart:gu(b,E)}]:[!1,_,{}]}function gu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iD({page:t,...e}){let{router:n}=_S(),i=D.useMemo(()=>cS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(sD,{page:t,matches:i,...e}):null}function rD(t){let{manifest:e,routeModules:n}=wS(),[i,s]=D.useState([]);return D.useEffect(()=>{let o=!1;return Xk(t,e,n).then(c=>{o||s(c)}),()=>{o=!0}},[t,e,n]),i}function sD({page:t,matches:e,...n}){let i=Ir(),{manifest:s,routeModules:o}=wS(),{basename:c}=_S(),{loaderData:d,matches:h}=tD(),f=D.useMemo(()=>Jw(t,e,h,s,i,"data"),[t,e,h,s,i]),g=D.useMemo(()=>Jw(t,e,h,s,i,"assets"),[t,e,h,s,i]),b=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let I=new Set,A=!1;if(e.forEach(O=>{let z=s.routes[O.route.id];!z||!z.hasLoader||(!f.some(L=>L.route.id===O.route.id)&&O.route.id in d&&o[O.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:I.add(O.route.id))}),I.size===0)return[];let C=Kk(t,c,"data");return A&&I.size>0&&C.searchParams.set("_routes",e.filter(O=>I.has(O.route.id)).map(O=>O.route.id).join(",")),[C.pathname+C.search]},[c,d,i,s,f,e,t,o]),_=D.useMemo(()=>Wk(g,s),[g,s]),E=rD(g);return D.createElement(D.Fragment,null,b.map(I=>D.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),_.map(I=>D.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),E.map(({key:I,link:A})=>D.createElement("link",{key:I,nonce:n.nonce,...A})))}function aD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var xS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xS&&(window.__reactRouterVersion="7.9.6")}catch{}function oD({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=GI({window:n,v5Compat:!0}));let s=i.current,[o,c]=D.useState({action:s.action,location:s.location}),d=D.useCallback(h=>{D.startTransition(()=>c(h))},[c]);return D.useLayoutEffect(()=>s.listen(d),[s,d]),D.createElement(Vk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var TS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ES=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:o,replace:c,state:d,target:h,to:f,preventScrollReset:g,viewTransition:b,..._},E){let{basename:I}=D.useContext(Nr),A=typeof f=="string"&&TS.test(f),C,O=!1;if(typeof f=="string"&&A&&(C=f,xS))try{let M=new URL(window.location.href),U=f.startsWith("//")?new URL(M.protocol+f):new URL(f),P=us(U.pathname,I);U.origin===M.origin&&P!=null?f=P+U.search+U.hash:O=!0}catch{si(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=_k(f,{relative:s}),[L,$,ne]=nD(i,_),te=dD(f,{replace:c,state:d,target:h,preventScrollReset:g,relative:s,viewTransition:b});function S(M){e&&e(M),M.defaultPrevented||te(M)}let R=D.createElement("a",{..._,...ne,href:C||z,onClick:O||o?e:S,ref:aD(E,$),target:h,"data-discover":!A&&n==="render"?"true":void 0});return L&&!A?D.createElement(D.Fragment,null,R,D.createElement(iD,{page:z})):R});ES.displayName="Link";var lD=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:d,children:h,...f},g){let b=ad(c,{relative:f.relative}),_=Ir(),E=D.useContext(sm),{navigator:I,basename:A}=D.useContext(Nr),C=E!=null&&yD(b)&&d===!0,O=I.encodeLocation?I.encodeLocation(b).pathname:b.pathname,z=_.pathname,L=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(z=z.toLowerCase(),L=L?L.toLowerCase():null,O=O.toLowerCase()),L&&A&&(L=us(L,A)||L);const $=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let ne=z===O||!s&&z.startsWith(O)&&z.charAt($)==="/",te=L!=null&&(L===O||!s&&L.startsWith(O)&&L.charAt(O.length)==="/"),S={isActive:ne,isPending:te,isTransitioning:C},R=ne?e:void 0,M;typeof i=="function"?M=i(S):M=[i,ne?"active":null,te?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(S):o;return D.createElement(ES,{...f,"aria-current":R,className:M,ref:g,style:U,to:c,viewTransition:d},typeof h=="function"?h(S):h)});lD.displayName="NavLink";var cD=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:o,method:c=cf,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:b,..._},E)=>{let I=pD(),A=gD(d,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",O=typeof d=="string"&&TS.test(d),z=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let $=L.nativeEvent.submitter,ne=$?.getAttribute("formmethod")||c;I($||L.currentTarget,{fetcherKey:e,method:ne,navigate:n,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:b})};return D.createElement("form",{ref:E,method:C,action:A,onSubmit:i?h:z,..._,"data-discover":!O&&t==="render"?"true":void 0})});cD.displayName="Form";function uD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SS(t){let e=D.useContext(ec);return At(e,uD(t)),e}function dD(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:c}={}){let d=kr(),h=Ir(),f=ad(t,{relative:o});return D.useCallback(g=>{if(Bk(g,e)){g.preventDefault();let b=n!==void 0?n:Lu(h)===Lu(f);d(t,{replace:b,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[h,d,f,n,i,e,t,s,o,c])}function hD(t){si(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=D.useRef(R0(t)),n=D.useRef(!1),i=Ir(),s=D.useMemo(()=>qk(i.search,n.current?null:e.current),[i.search]),o=kr(),c=D.useCallback((d,h)=>{const f=R0(typeof d=="function"?d(new URLSearchParams(s)):d);n.current=!0,o("?"+f,h)},[o,s]);return[s,c]}var fD=0,mD=()=>`__${String(++fD)}__`;function pD(){let{router:t}=SS("useSubmit"),{basename:e}=D.useContext(Nr),n=Dk();return D.useCallback(async(i,s={})=>{let{action:o,method:c,encType:d,formData:h,body:f}=Gk(i,e);if(s.navigate===!1){let g=s.fetcherKey||mD();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function gD(t,{relative:e}={}){let{basename:n}=D.useContext(Nr),i=D.useContext(Rr);At(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...ad(t||".",{relative:e})},c=Ir();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(b=>b).forEach(b=>d.append("index",b));let g=d.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:os([n,o.pathname])),Lu(o)}function yD(t,{relative:e}={}){let n=D.useContext(pS);At(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=SS("useViewTransitionState"),s=ad(t,{relative:e});if(!n.isTransitioning)return!1;let o=us(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=us(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Nf(s.pathname,c)!=null||Nf(s.pathname,o)!=null}const vD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),ex=t=>{const e=bD(t);return e.charAt(0).toUpperCase()+e.slice(1)},AS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),_D=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var wD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xD=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...d},h)=>D.createElement("svg",{ref:h,...wD,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:AS("lucide",s),...!o&&!_D(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,g])=>D.createElement(f,g)),...Array.isArray(o)?o:[o]]));const je=(t,e)=>{const n=D.forwardRef(({className:i,...s},o)=>D.createElement(xD,{ref:o,iconNode:e,className:AS(`lucide-${vD(ex(t))}`,`lucide-${t}`,i),...s}));return n.displayName=ex(t),n};const TD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zu=je("arrow-left",TD);const ED=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],SD=je("arrow-right-left",ED);const AD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],CD=je("check",AD);const ND=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],RD=je("chevron-down",ND);const ID=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],kD=je("chevron-left",ID);const DD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mo=je("chevron-right",DD);const MD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],OD=je("circle-arrow-down",MD);const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],VD=je("circle-arrow-up",PD);const jD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Py=je("circle-check-big",jD);const LD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tx=je("circle-check",LD);const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Xh=je("circle-plus",zD);const UD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nx=je("circle-question-mark",UD);const FD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ix=je("circle",FD);const BD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qD=je("copy",BD);const HD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rx=je("download",HD);const $D=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],GD=je("eye-off",$D);const KD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YD=je("eye",KD);const QD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],XD=je("file-text",QD);const WD=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ZD=je("folder-plus",WD);const JD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],e4=je("funnel",JD);const t4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],n4=je("house",t4);const i4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],r4=je("list",i4);const s4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],a4=je("loader-circle",s4);const o4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],sx=je("loader",o4);const l4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],c4=je("log-out",l4);const u4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],I0=je("mail",u4);const d4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],h4=je("pause",d4);const f4=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Uu=je("piggy-bank",f4);const m4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pa=je("refresh-cw",m4);const p4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],g4=je("search",p4);const y4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],CS=je("settings",y4);const v4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],b4=je("target",v4);const _4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],df=je("trash-2",_4);const w4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],NS=je("trash",w4);const x4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],T4=je("trending-down",x4);const E4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],S4=je("trending-up",E4);const A4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],RS=je("triangle-alert",A4);const C4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],N4=je("undo-2",C4);const R4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],I4=je("upload",R4);const k4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],D4=je("user-plus",k4);const M4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Vy=je("wallet",M4);const O4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],P4=je("wifi-off",O4);const V4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],j4=je("wifi",V4);const L4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],od=je("x",L4),jy=D.createContext({});function _s(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ly=typeof window<"u",om=Ly?D.useLayoutEffect:D.useEffect,lm=D.createContext(null);function zy(t,e){t.indexOf(e)===-1&&t.push(e)}function Uy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function z4([...t],e,n){const i=e<0?t.length+e:e;if(i>=0&&i<t.length){const s=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(s,0,o)}return t}const ds=(t,e,n)=>n>e?e:n<t?t:n;let Fy=()=>{};const hs={},IS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function kS(t){return typeof t=="object"&&t!==null}const DS=t=>/^0[^.\s]+$/u.test(t);function By(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ti=t=>t,U4=(t,e)=>n=>e(t(n)),ld=(...t)=>t.reduce(U4),Fu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class qy{constructor(){this.subscriptions=[]}add(e){return zy(this.subscriptions,e),()=>Uy(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=t=>t*1e3,xi=t=>t/1e3;function MS(t,e){return e?t*(1e3/e):0}const OS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,F4=1e-7,B4=12;function q4(t,e,n,i,s){let o,c,d=0;do c=e+(n-e)/2,o=OS(c,i,s)-t,o>0?n=c:e=c;while(Math.abs(o)>F4&&++d<B4);return c}function cd(t,e,n,i){if(t===e&&n===i)return Ti;const s=o=>q4(o,0,1,t,n);return o=>o===0||o===1?o:OS(s(o),e,i)}const PS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VS=t=>e=>1-t(1-e),jS=cd(.33,1.53,.69,.99),Hy=VS(jS),LS=PS(Hy),zS=t=>(t*=2)<1?.5*Hy(t):.5*(2-Math.pow(2,-10*(t-1))),$y=t=>1-Math.sin(Math.acos(t)),US=VS($y),FS=PS($y),H4=cd(.42,0,1,1),$4=cd(0,0,.58,1),BS=cd(.42,0,.58,1),G4=t=>Array.isArray(t)&&typeof t[0]!="number",qS=t=>Array.isArray(t)&&typeof t[0]=="number",K4={linear:Ti,easeIn:H4,easeInOut:BS,easeOut:$4,circIn:$y,circInOut:FS,circOut:US,backIn:Hy,backInOut:LS,backOut:jS,anticipate:zS},Y4=t=>typeof t=="string",ax=t=>{if(qS(t)){Fy(t.length===4);const[e,n,i,s]=t;return cd(e,n,i,s)}else if(Y4(t))return K4[t];return t},Wh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Q4(t,e){let n=new Set,i=new Set,s=!1,o=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(g){c.has(g)&&(f.schedule(g),t()),g(d)}const f={schedule:(g,b=!1,_=!1)=>{const I=_&&s?n:i;return b&&c.add(g),I.has(g)||I.add(g),g},cancel:g=>{i.delete(g),c.delete(g)},process:g=>{if(d=g,s){o=!0;return}s=!0,[n,i]=[i,n],n.forEach(h),n.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const X4=40;function HS(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Wh.reduce((L,$)=>(L[$]=Q4(o),L),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:g,update:b,preRender:_,render:E,postRender:I}=c,A=()=>{const L=hs.useManualTiming?s.timestamp:performance.now();n=!1,hs.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(L-s.timestamp,X4),1)),s.timestamp=L,s.isProcessing=!0,d.process(s),h.process(s),f.process(s),g.process(s),b.process(s),_.process(s),E.process(s),I.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(A))},C=()=>{n=!0,i=!0,s.isProcessing||t(A)};return{schedule:Wh.reduce((L,$)=>{const ne=c[$];return L[$]=(te,S=!1,R=!1)=>(n||C(),ne.schedule(te,S,R)),L},{}),cancel:L=>{for(let $=0;$<Wh.length;$++)c[Wh[$]].cancel(L)},state:s,steps:c}}const{schedule:xt,cancel:fs,state:gn,steps:Yg}=HS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0);let hf;function W4(){hf=void 0}const Hn={now:()=>(hf===void 0&&Hn.set(gn.isProcessing||hs.useManualTiming?gn.timestamp:performance.now()),hf),set:t=>{hf=t,queueMicrotask(W4)}},$S=t=>e=>typeof e=="string"&&e.startsWith(t),Gy=$S("--"),Z4=$S("var(--"),Ky=t=>Z4(t)?J4.test(t.split("/*")[0].trim()):!1,J4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bu={...tc,transform:t=>ds(0,1,t)},Zh={...tc,default:1},Au=t=>Math.round(t*1e5)/1e5,Yy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eM(t){return t==null}const tM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qy=(t,e)=>n=>!!(typeof n=="string"&&tM.test(n)&&n.startsWith(t)||e&&!eM(n)&&Object.prototype.hasOwnProperty.call(n,e)),GS=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,o,c,d]=i.match(Yy);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},nM=t=>ds(0,255,t),Qg={...tc,transform:t=>Math.round(nM(t))},yo={test:Qy("rgb","red"),parse:GS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Qg.transform(t)+", "+Qg.transform(e)+", "+Qg.transform(n)+", "+Au(Bu.transform(i))+")"};function iM(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const k0={test:Qy("#"),parse:iM,transform:yo.transform},ud=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),aa=ud("deg"),br=ud("%"),De=ud("px"),rM=ud("vh"),sM=ud("vw"),ox={...br,parse:t=>br.parse(t)/100,transform:t=>br.transform(t*100)},Il={test:Qy("hsl","hue"),parse:GS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+br.transform(Au(e))+", "+br.transform(Au(n))+", "+Au(Bu.transform(i))+")"},Xt={test:t=>yo.test(t)||k0.test(t)||Il.test(t),parse:t=>yo.test(t)?yo.parse(t):Il.test(t)?Il.parse(t):k0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?yo.transform(t):Il.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},aM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oM(t){return isNaN(t)&&typeof t=="string"&&(t.match(Yy)?.length||0)+(t.match(aM)?.length||0)>0}const KS="number",YS="color",lM="var",cM="var(",lx="${}",uM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(uM,h=>(Xt.test(h)?(i.color.push(o),s.push(YS),n.push(Xt.parse(h))):h.startsWith(cM)?(i.var.push(o),s.push(lM),n.push(h)):(i.number.push(o),s.push(KS),n.push(parseFloat(h))),++o,lx)).split(lx);return{values:n,split:d,indexes:i,types:s}}function QS(t){return qu(t).values}function XS(t){const{split:e,types:n}=qu(t),i=e.length;return s=>{let o="";for(let c=0;c<i;c++)if(o+=e[c],s[c]!==void 0){const d=n[c];d===KS?o+=Au(s[c]):d===YS?o+=Xt.transform(s[c]):o+=s[c]}return o}}const dM=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function hM(t){const e=QS(t);return XS(t)(e.map(dM))}const wa={test:oM,parse:QS,createTransformer:XS,getAnimatableNone:hM};function Xg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fM({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,o=0,c=0;if(!e)s=o=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;s=Xg(h,d,t+1/3),o=Xg(h,d,t),c=Xg(h,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function Rf(t,e){return n=>n>0?e:t}const St=(t,e,n)=>t+(e-t)*n,Wg=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},mM=[k0,yo,Il],pM=t=>mM.find(e=>e.test(t));function cx(t){const e=pM(t);if(!e)return!1;let n=e.parse(t);return e===Il&&(n=fM(n)),n}const ux=(t,e)=>{const n=cx(t),i=cx(e);if(!n||!i)return Rf(t,e);const s={...n};return o=>(s.red=Wg(n.red,i.red,o),s.green=Wg(n.green,i.green,o),s.blue=Wg(n.blue,i.blue,o),s.alpha=St(n.alpha,i.alpha,o),yo.transform(s))},D0=new Set(["none","hidden"]);function gM(t,e){return D0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function yM(t,e){return n=>St(t,e,n)}function Xy(t){return typeof t=="number"?yM:typeof t=="string"?Ky(t)?Rf:Xt.test(t)?ux:_M:Array.isArray(t)?WS:typeof t=="object"?Xt.test(t)?ux:vM:Rf}function WS(t,e){const n=[...t],i=n.length,s=t.map((o,c)=>Xy(o)(o,e[c]));return o=>{for(let c=0;c<i;c++)n[c]=s[c](o);return n}}function vM(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=Xy(t[s])(t[s],e[s]));return s=>{for(const o in i)n[o]=i[o](s);return n}}function bM(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][i[o]],d=t.values[c]??0;n[s]=d,i[o]++}return n}const _M=(t,e)=>{const n=wa.createTransformer(e),i=qu(t),s=qu(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?D0.has(t)&&!s.values.length||D0.has(e)&&!i.values.length?gM(t,e):ld(WS(bM(i,s),s.values),n):Rf(t,e)};function ZS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?St(t,e,n):Xy(t)(t,e)}const wM=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>xt.update(e,n),stop:()=>fs(e),now:()=>gn.isProcessing?gn.timestamp:Hn.now()}},JS=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)i+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},If=2e4;function Wy(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<If;)e+=n,i=t.next(e);return e>=If?1/0:e}function xM(t,e=100,n){const i=n({...t,keyframes:[0,e]}),s=Math.min(Wy(i),If);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:xi(s)}}const TM=5;function eA(t,e,n){const i=Math.max(e-TM,0);return MS(n-t(i),e-i)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Zg=.001;function EM({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:i=Mt.mass}){let s,o,c=1-e;c=ds(Mt.minDamping,Mt.maxDamping,c),t=ds(Mt.minDuration,Mt.maxDuration,xi(t)),c<1?(s=f=>{const g=f*c,b=g*t,_=g-n,E=M0(f,c),I=Math.exp(-b);return Zg-_/E*I},o=f=>{const b=f*c*t,_=b*n+n,E=Math.pow(c,2)*Math.pow(f,2)*t,I=Math.exp(-b),A=M0(Math.pow(f,2),c);return(-s(f)+Zg>0?-1:1)*((_-E)*I)/A}):(s=f=>{const g=Math.exp(-f*t),b=(f-n)*t+1;return-Zg+g*b},o=f=>{const g=Math.exp(-f*t),b=(n-f)*(t*t);return g*b});const d=5/t,h=AM(s,o,d);if(t=vr(t),isNaN(h))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const SM=12;function AM(t,e,n){let i=n;for(let s=1;s<SM;s++)i=i-t(i)/e(i);return i}function M0(t,e){return t*Math.sqrt(1-e*e)}const CM=["duration","bounce"],NM=["stiffness","damping","mass"];function dx(t,e){return e.some(n=>t[n]!==void 0)}function RM(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!dx(t,NM)&&dx(t,CM))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,o=2*ds(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:o}}else{const n=EM(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function kf(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:g,duration:b,velocity:_,isResolvedFromDuration:E}=RM({...n,velocity:-xi(n.velocity||0)}),I=_||0,A=f/(2*Math.sqrt(h*g)),C=c-o,O=xi(Math.sqrt(h/g)),z=Math.abs(C)<5;i||(i=z?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=z?Mt.restDelta.granular:Mt.restDelta.default);let L;if(A<1){const ne=M0(O,A);L=te=>{const S=Math.exp(-A*O*te);return c-S*((I+A*O*C)/ne*Math.sin(ne*te)+C*Math.cos(ne*te))}}else if(A===1)L=ne=>c-Math.exp(-O*ne)*(C+(I+O*C)*ne);else{const ne=O*Math.sqrt(A*A-1);L=te=>{const S=Math.exp(-A*O*te),R=Math.min(ne*te,300);return c-S*((I+A*O*C)*Math.sinh(R)+ne*C*Math.cosh(R))/ne}}const $={calculatedDuration:E&&b||null,next:ne=>{const te=L(ne);if(E)d.done=ne>=b;else{let S=ne===0?I:0;A<1&&(S=ne===0?vr(I):eA(L,ne,te));const R=Math.abs(S)<=i,M=Math.abs(c-te)<=s;d.done=R&&M}return d.value=d.done?c:te,d},toString:()=>{const ne=Math.min(Wy($),If),te=JS(S=>$.next(ne*S).value,ne,30);return ne+"ms "+te},toTransition:()=>{}};return $}kf.applyToOptions=t=>{const e=xM(t,100,kf);return t.ease=e.ease,t.duration=vr(e.duration),t.type="keyframes",t};function O0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:d,max:h,restDelta:f=.5,restSpeed:g}){const b=t[0],_={done:!1,value:b},E=R=>d!==void 0&&R<d||h!==void 0&&R>h,I=R=>d===void 0?h:h===void 0||Math.abs(d-R)<Math.abs(h-R)?d:h;let A=n*e;const C=b+A,O=c===void 0?C:c(C);O!==C&&(A=O-b);const z=R=>-A*Math.exp(-R/i),L=R=>O+z(R),$=R=>{const M=z(R),U=L(R);_.done=Math.abs(M)<=f,_.value=_.done?O:U};let ne,te;const S=R=>{E(_.value)&&(ne=R,te=kf({keyframes:[_.value,I(_.value)],velocity:eA(L,R,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return S(0),{calculatedDuration:null,next:R=>{let M=!1;return!te&&ne===void 0&&(M=!0,$(R),S(R)),ne!==void 0&&R>=ne?te.next(R-ne):(!M&&$(R),_)}}}function IM(t,e,n){const i=[],s=n||hs.mix||ZS,o=t.length-1;for(let c=0;c<o;c++){let d=s(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||Ti:e;d=ld(h,d)}i.push(d)}return i}function tA(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const o=t.length;if(Fy(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=IM(e,i,s),h=d.length,f=g=>{if(c&&g<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(g<t[b+1]);b++);const _=Fu(t[b],t[b+1],g);return d[b](_)};return n?g=>f(ds(t[0],t[o-1],g)):f}function kM(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=Fu(0,e,i);t.push(St(n,1,s))}}function DM(t){const e=[0];return kM(e,t.length-1),e}function MM(t,e){return t.map(n=>n*e)}function OM(t,e){return t.map(()=>e||BS).splice(0,t.length-1)}function Cu({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=G4(i)?i.map(ax):ax(i),o={done:!1,value:e[0]},c=MM(n&&n.length===e.length?n:DM(e),t),d=tA(c,e,{ease:Array.isArray(s)?s:OM(e,s)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const PM=t=>t!==null;function Zy(t,{repeat:e,repeatType:n="loop"},i,s=1){const o=t.filter(PM),d=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!d||i===void 0?o[d]:i}const VM={decay:O0,inertia:O0,tween:Cu,keyframes:Cu,spring:kf};function nA(t){typeof t.type=="string"&&(t.type=VM[t.type])}class Jy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const jM=t=>t/100;class ev extends Jy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;nA(e);const{type:n=Cu,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:d}=e;const h=n||Cu;h!==Cu&&typeof d[0]!="number"&&(this.mixKeyframes=ld(jM,ZS(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=Wy(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:b,repeatType:_,repeatDelay:E,type:I,onUpdate:A,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const O=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?O<0:O>s;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,$=i;if(b){const R=Math.min(this.currentTime,s)/d;let M=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&M--,M=Math.min(M,b+1),!!(M%2)&&(_==="reverse"?(U=1-U,E&&(U-=E/d)):_==="mirror"&&($=c)),L=ds(0,1,U)*d}const ne=z?{done:!1,value:g[0]}:$.next(L);o&&(ne.value=o(ne.value));let{done:te}=ne;!z&&h!==null&&(te=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return S&&I!==O0&&(ne.value=Zy(g,this.options,C,this.speed)),A&&A(ne.value),S&&this.finish(),ne}then(e,n){return this.finished.then(e,n)}get duration(){return xi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xi(e)}get time(){return xi(this.currentTime)}set time(e){e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=wM,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function LM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const vo=t=>t*180/Math.PI,P0=t=>{const e=vo(Math.atan2(t[1],t[0]));return V0(e)},zM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:P0,rotateZ:P0,skewX:t=>vo(Math.atan(t[1])),skewY:t=>vo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},V0=t=>(t=t%360,t<0&&(t+=360),t),hx=P0,fx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),mx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),UM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fx,scaleY:mx,scale:t=>(fx(t)+mx(t))/2,rotateX:t=>V0(vo(Math.atan2(t[6],t[5]))),rotateY:t=>V0(vo(Math.atan2(-t[2],t[0]))),rotateZ:hx,rotate:hx,skewX:t=>vo(Math.atan(t[4])),skewY:t=>vo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function j0(t){return t.includes("scale")?1:0}function L0(t,e){if(!t||t==="none")return j0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=UM,s=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=zM,s=d}if(!s)return j0(e);const o=i[e],c=s[1].split(",").map(BM);return typeof o=="function"?o(c):c[o]}const FM=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return L0(n,e)};function BM(t){return parseFloat(t.trim())}const nc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ic=new Set(nc),px=t=>t===tc||t===De,qM=new Set(["x","y","z"]),HM=nc.filter(t=>!qM.has(t));function $M(t){const e=[];return HM.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const _o={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>L0(e,"x"),y:(t,{transform:e})=>L0(e,"y")};_o.translateX=_o.x;_o.translateY=_o.y;const wo=new Set;let z0=!1,U0=!1,F0=!1;function iA(){if(U0){const t=Array.from(wo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=$M(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}U0=!1,z0=!1,wo.forEach(t=>t.complete(F0)),wo.clear()}function rA(){wo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(U0=!0)})}function GM(){F0=!0,rA(),iA(),F0=!1}class tv{constructor(e,n,i,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),z0||(z0=!0,xt.read(rA),xt.resolveKeyframes(iA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}LM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KM=t=>t.startsWith("--");function YM(t,e,n){KM(e)?t.style.setProperty(e,n):t.style[e]=n}const QM=By(()=>window.ScrollTimeline!==void 0),XM={};function WM(t,e){const n=By(t);return()=>XM[e]??n()}const sA=WM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,gx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bu([0,.65,.55,1]),circOut:bu([.55,0,1,.45]),backIn:bu([.31,.01,.66,-.59]),backOut:bu([.33,1.53,.69,.99])};function aA(t,e){if(t)return typeof t=="function"?sA()?JS(t,e):"ease-out":qS(t)?bu(t):Array.isArray(t)?t.map(n=>aA(n,e)||gx.easeOut):gx[t]}function ZM(t,e,n,{delay:i=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:d="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const b=aA(d,s);Array.isArray(b)&&(g.easing=b);const _={delay:i,duration:s,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(g,_)}function oA(t){return typeof t=="function"&&"applyToOptions"in t}function JM({type:t,...e}){return oA(t)&&sA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class e3 extends Jy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,Fy(typeof e.type!="string");const f=JM(e);this.animation=ZM(n,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Zy(s,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):YM(n,i,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return xi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xi(e)}get time(){return xi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&QM()?(this.animation.timeline=e,Ti):n(this)}}const lA={anticipate:zS,backInOut:LS,circInOut:FS};function t3(t){return t in lA}function n3(t){typeof t.ease=="string"&&t3(t.ease)&&(t.ease=lA[t.ease])}const yx=10;class i3 extends e3{constructor(e){n3(e),nA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:s,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new ev({...c,autoplay:!1}),h=vr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-yx).value,d.sample(h).value,yx),d.stop()}}const vx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wa.test(t)||t==="0")&&!t.startsWith("url("));function r3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function s3(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=vx(s,e),d=vx(o,e);return!c||!d?!1:r3(t)||(n==="spring"||oA(n))&&i}function B0(t){t.duration=0,t.type="keyframes"}const a3=new Set(["opacity","clipPath","filter","transform"]),o3=By(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function l3(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:o,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return o3()&&n&&a3.has(n)&&(n!=="transform"||!f)&&!h&&!i&&s!=="mirror"&&o!==0&&c!=="inertia"}const c3=40;class u3 extends Jy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:d,name:h,motionValue:f,element:g,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const _={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:o,repeatType:c,name:h,motionValue:f,element:g,...b},E=g?.KeyframeResolver||tv;this.keyframeResolver=new E(d,(I,A,C)=>this.onKeyframesResolved(I,A,_,!C),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:o,type:c,velocity:d,delay:h,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Hn.now(),s3(e,o,c,d)||((hs.instantAnimations||!h)&&g?.(Zy(e,i,n)),e[0]=e[e.length-1],B0(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>c3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},E=!f&&l3(_)?new i3({..._,element:_.motionValue.owner.current}):new ev(_);E.finished.then(()=>this.notifyFinished()).catch(Ti),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),GM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const d3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h3(t){const e=d3.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function cA(t,e,n=1){const[i,s]=h3(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const c=o.trim();return IS(c)?parseFloat(c):c}return Ky(s)?cA(s,e,n+1):s}function nv(t,e){return t?.[e]??t?.default??t}const uA=new Set(["width","height","top","left","right","bottom",...nc]),f3={test:t=>t==="auto",parse:t=>t},dA=t=>e=>e.test(t),hA=[tc,De,br,aa,sM,rM,f3],bx=t=>hA.find(dA(t));function m3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||DS(t):!0}const p3=new Set(["brightness","contrast","saturate","opacity"]);function g3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Yy)||[];if(!i)return t;const s=n.replace(i,"");let o=p3.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+s+")"}const y3=/\b([a-z-]*)\(.*?\)/gu,q0={...wa,getAnimatableNone:t=>{const e=t.match(y3);return e?e.map(g3).join(" "):t}},_x={...tc,transform:Math.round},v3={rotate:aa,rotateX:aa,rotateY:aa,rotateZ:aa,scale:Zh,scaleX:Zh,scaleY:Zh,scaleZ:Zh,skew:aa,skewX:aa,skewY:aa,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:Bu,originX:ox,originY:ox,originZ:De},iv={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De,...v3,zIndex:_x,fillOpacity:Bu,strokeOpacity:Bu,numOctaves:_x},b3={...iv,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:q0,WebkitFilter:q0},fA=t=>b3[t];function mA(t,e){let n=fA(t);return n!==q0&&(n=wa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const _3=new Set(["auto","none","0"]);function w3(t,e,n){let i=0,s;for(;i<t.length&&!s;){const o=t[i];typeof o=="string"&&!_3.has(o)&&qu(o).values.length&&(s=t[i]),i++}if(s&&n)for(const o of e)t[o]=mA(n,s)}class x3 extends tv{constructor(e,n,i,s,o){super(e,n,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Ky(f))){const g=cA(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!uA.has(i)||e.length!==2)return;const[s,o]=e,c=bx(s),d=bx(o);if(c!==d)if(px(c)&&px(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else _o[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||m3(e[s]))&&i.push(s);i.length&&w3(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_o[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=_o[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function T3(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const s=n?.[t]??i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const pA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function gA(t){return kS(t)&&"offsetHeight"in t}const wx=30,E3=t=>!isNaN(parseFloat(t)),Nu={current:void 0};class S3{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Hn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=E3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qy);const i=this.events[e].add(n);return e==="change"?()=>{i(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Nu.current&&Nu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wx);return MS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function So(t,e){return new S3(t,e)}const{schedule:rv}=HS(queueMicrotask,!1),ji={x:!1,y:!1};function yA(){return ji.x||ji.y}function A3(t){return t==="x"||t==="y"?ji[t]?null:(ji[t]=!0,()=>{ji[t]=!1}):ji.x||ji.y?null:(ji.x=ji.y=!0,()=>{ji.x=ji.y=!1})}function vA(t,e){const n=T3(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function xx(t){return!(t.pointerType==="touch"||yA())}function C3(t,e,n={}){const[i,s,o]=vA(t,n),c=d=>{if(!xx(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const g=b=>{xx(b)&&(f(b),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,s)};return i.forEach(d=>{d.addEventListener("pointerenter",c,s)}),o}const bA=(t,e)=>e?t===e?!0:bA(t,e.parentElement):!1,sv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function R3(t){return N3.has(t.tagName)||t.tabIndex!==-1}const ff=new WeakSet;function Tx(t){return e=>{e.key==="Enter"&&t(e)}}function Jg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const I3=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Tx(()=>{if(ff.has(n))return;Jg(n,"down");const s=Tx(()=>{Jg(n,"up")}),o=()=>Jg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Ex(t){return sv(t)&&!yA()}function k3(t,e,n={}){const[i,s,o]=vA(t,n),c=d=>{const h=d.currentTarget;if(!Ex(d))return;ff.add(h);const f=e(h,d),g=(E,I)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",_),ff.has(h)&&ff.delete(h),Ex(E)&&typeof f=="function"&&f(E,{success:I})},b=E=>{g(E,h===window||h===document||n.useGlobalTarget||bA(h,E.target))},_=E=>{g(E,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",_,s)};return i.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,s),gA(d)&&(d.addEventListener("focus",f=>I3(f,s)),!R3(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),o}function _A(t){return kS(t)&&"ownerSVGElement"in t}function D3(t){return _A(t)&&t.tagName==="svg"}function M3(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],s=t[1+n],o=t[2+n],c=t[3+n],d=tA(s,o,c);return e?d(i):d}const bn=t=>!!(t&&t.getVelocity),O3=[...hA,Xt,wa],P3=t=>O3.find(dA(t)),cm=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Sx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function V3(...t){return e=>{let n=!1;const i=t.map(s=>{const o=Sx(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():Sx(t[s],null)}}}}function j3(...t){return D.useCallback(V3(...t),t)}class L3 extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=gA(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function z3({children:t,isPresent:e,anchorX:n,root:i}){const s=D.useId(),o=D.useRef(null),c=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=D.useContext(cm),h=j3(o,t?.ref);return D.useInsertionEffect(()=>{const{width:f,height:g,top:b,left:_,right:E}=c.current;if(e||!o.current||!f||!g)return;const I=n==="left"?`left: ${_}`:`right: ${E}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");d&&(A.nonce=d);const C=i??document.head;return C.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${I}px !important;
            top: ${b}px !important;
          }
        `),()=>{C.contains(A)&&C.removeChild(A)}},[e]),v.jsx(L3,{isPresent:e,childRef:o,sizeRef:c,children:D.cloneElement(t,{ref:h})})}const U3=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:c,anchorX:d,root:h})=>{const f=_s(F3),g=D.useId();let b=!0,_=D.useMemo(()=>(b=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:E=>{f.set(E,!0);for(const I of f.values())if(!I)return;i&&i()},register:E=>(f.set(E,!1),()=>f.delete(E))}),[n,f,i]);return o&&b&&(_={..._}),D.useMemo(()=>{f.forEach((E,I)=>f.set(I,!1))},[n]),D.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=v.jsx(z3,{isPresent:n,anchorX:d,root:h,children:t})),v.jsx(lm.Provider,{value:_,children:t})};function F3(){return new Map}function wA(t=!0){const e=D.useContext(lm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,o=D.useId();D.useEffect(()=>{if(t)return s(o)},[t]);const c=D.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,c]:[!0]}const Jh=t=>t.key||"";function Ax(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const um=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[f,g]=wA(c),b=D.useMemo(()=>Ax(t),[t]),_=c&&!f?[]:b.map(Jh),E=D.useRef(!0),I=D.useRef(b),A=_s(()=>new Map),[C,O]=D.useState(b),[z,L]=D.useState(b);om(()=>{E.current=!1,I.current=b;for(let te=0;te<z.length;te++){const S=Jh(z[te]);_.includes(S)?A.delete(S):A.get(S)!==!0&&A.set(S,!1)}},[z,_.length,_.join("-")]);const $=[];if(b!==C){let te=[...b];for(let S=0;S<z.length;S++){const R=z[S],M=Jh(R);_.includes(M)||(te.splice(S,0,R),$.push(R))}return o==="wait"&&$.length&&(te=$),L(Ax(te)),O(b),null}const{forceRender:ne}=D.useContext(jy);return v.jsx(v.Fragment,{children:z.map(te=>{const S=Jh(te),R=c&&!f?!1:b===z||_.includes(S),M=()=>{if(A.has(S))A.set(S,!0);else return;let U=!0;A.forEach(P=>{P||(U=!1)}),U&&(ne?.(),L(I.current),c&&g?.(),i&&i())};return v.jsx(U3,{isPresent:R,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:h,onExitComplete:R?void 0:M,anchorX:d,children:te},S)})})},xA=D.createContext({strict:!1}),Cx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bl={};for(const t in Cx)Bl[t]={isEnabled:e=>Cx[t].some(n=>!!e[n])};function B3(t){for(const e in t)Bl[e]={...Bl[e],...t[e]}}const q3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Df(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q3.has(t)}let TA=t=>!Df(t);function H3(t){typeof t=="function"&&(TA=e=>e.startsWith("on")?!Df(e):t(e))}try{H3(require("@emotion/is-prop-valid").default)}catch{}function $3(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(TA(s)||n===!0&&Df(s)||!e&&!Df(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}const dm=D.createContext({});function hm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hu(t){return typeof t=="string"||Array.isArray(t)}const av=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ov=["initial",...av];function fm(t){return hm(t.animate)||ov.some(e=>Hu(t[e]))}function EA(t){return!!(fm(t)||t.variants)}function G3(t,e){if(fm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Hu(n)?n:void 0,animate:Hu(i)?i:void 0}}return t.inherit!==!1?e:{}}function K3(t){const{initial:e,animate:n}=G3(t,D.useContext(dm));return D.useMemo(()=>({initial:e,animate:n}),[Nx(e),Nx(n)])}function Nx(t){return Array.isArray(t)?t.join(" "):t}const $u={};function Y3(t){for(const e in t)$u[e]=t[e],Gy(e)&&($u[e].isCSSVariable=!0)}function SA(t,{layout:e,layoutId:n}){return ic.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$u[t]||t==="opacity")}const Q3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},X3=nc.length;function W3(t,e,n){let i="",s=!0;for(let o=0;o<X3;o++){const c=nc[o],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=pA(d,iv[c]);if(!h){s=!1;const g=Q3[c]||c;i+=`${g}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function lv(t,e,n){const{style:i,vars:s,transformOrigin:o}=t;let c=!1,d=!1;for(const h in e){const f=e[h];if(ic.has(h)){c=!0;continue}else if(Gy(h)){s[h]=f;continue}else{const g=pA(f,iv[h]);h.startsWith("origin")?(d=!0,o[h]=g):i[h]=g}}if(e.transform||(c||n?i.transform=W3(e,t.transform,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${h} ${f} ${g}`}}const cv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AA(t,e,n){for(const i in e)!bn(e[i])&&!SA(i,n)&&(t[i]=e[i])}function Z3({transformTemplate:t},e){return D.useMemo(()=>{const n=cv();return lv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function J3(t,e){const n=t.style||{},i={};return AA(i,n,t),Object.assign(i,Z3(t,e)),i}function eO(t,e){const n={},i=J3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const tO={offset:"stroke-dashoffset",array:"stroke-dasharray"},nO={offset:"strokeDashoffset",array:"strokeDasharray"};function iO(t,e,n=1,i=0,s=!0){t.pathLength=1;const o=s?tO:nO;t[o.offset]=De.transform(-i);const c=De.transform(e),d=De.transform(n);t[o.array]=`${c} ${d}`}function CA(t,{attrX:e,attrY:n,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...d},h,f,g){if(lv(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:_}=t;b.transform&&(_.transform=b.transform,delete b.transform),(_.transform||b.transformOrigin)&&(_.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),s!==void 0&&iO(b,s,o,c,!1)}const NA=()=>({...cv(),attrs:{}}),RA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rO(t,e,n,i){const s=D.useMemo(()=>{const o=NA();return CA(o,e,RA(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};AA(o,t.style,t),s.style={...o,...s.style}}return s}const sO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uv(t){return typeof t!="string"||t.includes("-")?!1:!!(sO.indexOf(t)>-1||/[A-Z]/u.test(t))}function aO(t,e,n,{latestValues:i},s,o=!1){const d=(uv(t)?rO:eO)(e,i,s,t),h=$3(e,typeof t=="string",o),f=t!==D.Fragment?{...h,...d,ref:n}:{},{children:g}=e,b=D.useMemo(()=>bn(g)?g.get():g,[g]);return D.createElement(t,{...f,children:b})}function Rx(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function dv(t,e,n,i){if(typeof e=="function"){const[s,o]=Rx(i);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Rx(i);e=e(n!==void 0?n:t.custom,s,o)}return e}function mf(t){return bn(t)?t.get():t}function oO({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,s){return{latestValues:lO(n,i,s,t),renderState:e()}}function lO(t,e,n,i){const s={},o=i(t,{});for(const _ in o)s[_]=mf(o[_]);let{initial:c,animate:d}=t;const h=fm(t),f=EA(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const b=g?d:c;if(b&&typeof b!="boolean"&&!hm(b)){const _=Array.isArray(b)?b:[b];for(let E=0;E<_.length;E++){const I=dv(t,_[E]);if(I){const{transitionEnd:A,transition:C,...O}=I;for(const z in O){let L=O[z];if(Array.isArray(L)){const $=g?L.length-1:0;L=L[$]}L!==null&&(s[z]=L)}for(const z in A)s[z]=A[z]}}}return s}const IA=t=>(e,n)=>{const i=D.useContext(dm),s=D.useContext(lm),o=()=>oO(t,e,i,s);return n?o():_s(o)};function hv(t,e,n){const{style:i}=t,s={};for(const o in i)(bn(i[o])||e.style&&bn(e.style[o])||SA(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const cO=IA({scrapeMotionValuesFromProps:hv,createRenderState:cv});function kA(t,e,n){const i=hv(t,e,n);for(const s in t)if(bn(t[s])||bn(e[s])){const o=nc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=t[s]}return i}const uO=IA({scrapeMotionValuesFromProps:kA,createRenderState:NA}),dO=Symbol.for("motionComponentSymbol");function kl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hO(t,e,n){return D.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):kl(n)&&(n.current=i))},[e])}const fv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fO="framerAppearId",DA="data-"+fv(fO),MA=D.createContext({});function mO(t,e,n,i,s){const{visualElement:o}=D.useContext(dm),c=D.useContext(xA),d=D.useContext(lm),h=D.useContext(cm).reducedMotion,f=D.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,b=D.useContext(MA);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&pO(f.current,n,s,b);const _=D.useRef(!1);D.useInsertionEffect(()=>{g&&_.current&&g.update(n,d)});const E=n[DA],I=D.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return om(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),I.current&&g.animationState&&g.animationState.animateChanges())}),D.useEffect(()=>{g&&(!I.current&&g.animationState&&g.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),I.current=!1),g.enteringChildren=void 0)}),g}function pO(t,e,n,i){const{layoutId:s,layout:o,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:OA(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||d&&kl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:h,layoutRoot:f})}function OA(t){if(t)return t.options.allowProjection!==!1?t.projection:OA(t.parent)}function e0(t,{forwardMotionProps:e=!1}={},n,i){n&&B3(n);const s=uv(t)?uO:cO;function o(d,h){let f;const g={...D.useContext(cm),...d,layoutId:gO(d)},{isStatic:b}=g,_=K3(d),E=s(d,b);if(!b&&Ly){yO();const I=vO(g);f=I.MeasureLayout,_.visualElement=mO(t,E,g,i,I.ProjectionNode)}return v.jsxs(dm.Provider,{value:_,children:[f&&_.visualElement?v.jsx(f,{visualElement:_.visualElement,...g}):null,aO(t,d,hO(E,_.visualElement,h),E,b,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=D.forwardRef(o);return c[dO]=t,c}function gO({layoutId:t}){const e=D.useContext(jy).id;return e&&t!==void 0?e+"-"+t:t}function yO(t,e){D.useContext(xA).strict}function vO(t){const{drag:e,layout:n}=Bl;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function bO(t,e){if(typeof Proxy>"u")return e0;const n=new Map,i=(o,c)=>e0(o,c,t,e),s=(o,c)=>i(o,c);return new Proxy(s,{get:(o,c)=>c==="create"?i:(n.has(c)||n.set(c,e0(c,void 0,t,e)),n.get(c))})}function PA({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function _O({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wO(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function t0(t){return t===void 0||t===1}function H0({scale:t,scaleX:e,scaleY:n}){return!t0(t)||!t0(e)||!t0(n)}function po(t){return H0(t)||VA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function VA(t){return Ix(t.x)||Ix(t.y)}function Ix(t){return t&&t!=="0%"}function Mf(t,e,n){const i=t-n,s=e*i;return n+s}function kx(t,e,n,i,s){return s!==void 0&&(t=Mf(t,s,i)),Mf(t,n,i)+e}function $0(t,e=0,n=1,i,s){t.min=kx(t.min,e,n,i,s),t.max=kx(t.max,e,n,i,s)}function jA(t,{x:e,y:n}){$0(t.x,e.translate,e.scale,e.originPoint),$0(t.y,n.translate,n.scale,n.originPoint)}const Dx=.999999999999,Mx=1.0000000000001;function xO(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,c;for(let d=0;d<s;d++){o=n[d],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ml(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,jA(t,c)),i&&po(o.latestValues)&&Ml(t,o.latestValues))}e.x<Mx&&e.x>Dx&&(e.x=1),e.y<Mx&&e.y>Dx&&(e.y=1)}function Dl(t,e){t.min=t.min+e,t.max=t.max+e}function Ox(t,e,n,i,s=.5){const o=St(t.min,t.max,s);$0(t,e,n,o,i)}function Ml(t,e){Ox(t.x,e.x,e.scaleX,e.scale,e.originX),Ox(t.y,e.y,e.scaleY,e.scale,e.originY)}function LA(t,e){return PA(wO(t.getBoundingClientRect(),e))}function TO(t,e,n){const i=LA(t,n),{scroll:s}=e;return s&&(Dl(i.x,s.offset.x),Dl(i.y,s.offset.y)),i}const Px=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ol=()=>({x:Px(),y:Px()}),Vx=()=>({min:0,max:0}),zt=()=>({x:Vx(),y:Vx()}),G0={current:null},zA={current:!1};function EO(){if(zA.current=!0,!!Ly)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>G0.current=t.matches;t.addEventListener("change",e),e()}else G0.current=!1}const SO=new WeakMap;function AO(t,e,n){for(const i in e){const s=e[i],o=n[i];if(bn(s))t.addValue(i,s);else if(bn(o))t.addValue(i,So(s,{owner:t}));else if(o!==s)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(i);t.addValue(i,So(c!==void 0?c:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const jx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CO{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Hn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,xt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=fm(n),this.isVariantNode=EA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in b){const E=b[_];h[_]!==void 0&&bn(E)&&E.set(h[_])}}mount(e){this.current=e,SO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),zA.current||EO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ic.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&xt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bl){const n=Bl[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<jx.length;i++){const s=jx[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=AO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=So(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(IS(i)||DS(i))?i=parseFloat(i):!P3(i)&&wa.test(n)&&(i=mA(e,n)),this.setBaseTarget(e,bn(i)?i.get():i)),bn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=dv(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!bn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){rv.render(this.render)}}class UA extends CO{constructor(){super(...arguments),this.KeyframeResolver=x3}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function FA(t,{style:e,vars:n},i,s){const o=t.style;let c;for(c in e)o[c]=e[c];s?.applyProjectionStyles(o,i);for(c in n)o.setProperty(c,n[c])}function NO(t){return window.getComputedStyle(t)}class RO extends UA{constructor(){super(...arguments),this.type="html",this.renderInstance=FA}readValueFromInstance(e,n){if(ic.has(n))return this.projection?.isProjecting?j0(n):FM(e,n);{const i=NO(e),s=(Gy(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return LA(e,n)}build(e,n,i){lv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return hv(e,n,i)}}const BA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IO(t,e,n,i){FA(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(BA.has(s)?s:fv(s),e.attrs[s])}class kO extends UA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ic.has(n)){const i=fA(n);return i&&i.default||0}return n=BA.has(n)?n:fv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return kA(e,n,i)}build(e,n,i){CA(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,s){IO(e,n,i,s)}mount(e){this.isSVGTag=RA(e.tagName),super.mount(e)}}const DO=(t,e)=>uv(t)?new kO(e):new RO(e,{allowProjection:t!==D.Fragment});function jl(t,e,n){const i=t.getProps();return dv(i,e,n!==void 0?n:i.custom,t)}const K0=t=>Array.isArray(t);function MO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,So(n))}function OO(t){return K0(t)?t[t.length-1]||0:t}function mv(t,e){const n=jl(t,e);let{transitionEnd:i={},transition:s={},...o}=n||{};o={...o,...i};for(const c in o){const d=OO(o[c]);MO(t,c,d)}}function PO(t){return!!(bn(t)&&t.add)}function Y0(t,e){const n=t.getValue("willChange");if(PO(n))return n.add(e);if(!n&&hs.WillChange){const i=new hs.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function qA(t){return t.props[DA]}const VO=t=>t!==null;function jO(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(VO),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const LO={type:"spring",stiffness:500,damping:25,restSpeed:10},zO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),UO={type:"keyframes",duration:.8},FO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BO=(t,{keyframes:e})=>e.length>2?UO:ic.has(t)?t.startsWith("scale")?zO(e[1]):LO:FO;function qO({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:d,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const pv=(t,e,n,i={},s,o)=>c=>{const d=nv(i,t)||{},h=d.delay||i.delay||0;let{elapsed:f=0}=i;f=f-vr(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};qO(d)||Object.assign(g,BO(t,g)),g.duration&&(g.duration=vr(g.duration)),g.repeatDelay&&(g.repeatDelay=vr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let b=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(B0(g),g.delay===0&&(b=!0)),(hs.instantAnimations||hs.skipAnimations)&&(b=!0,B0(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,b&&!o&&e.get()!==void 0){const _=jO(g.keyframes,d);if(_!==void 0){xt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return d.isSync?new ev(g):new u3(g)};function HO({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function HA(t,e,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(o=i);const h=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const g in d){const b=t.getValue(g,t.latestValues[g]??null),_=d[g];if(_===void 0||f&&HO(f,g))continue;const E={delay:n,...nv(o||{},g)},I=b.get();if(I!==void 0&&!b.isAnimating&&!Array.isArray(_)&&_===I&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const O=qA(t);if(O){const z=window.MotionHandoffAnimation(O,g,xt);z!==null&&(E.startTime=z,A=!0)}}Y0(t,g),b.start(pv(g,b,_,t.shouldReduceMotion&&uA.has(g)?{type:!1}:E,t,A));const C=b.animation;C&&h.push(C)}return c&&Promise.all(h).then(()=>{xt.update(()=>{c&&mv(t,c)})}),h}function $A(t,e,n,i=0,s=1){const o=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),c=t.size,d=(c-1)*i;return typeof n=="function"?n(o,c):s===1?o*i:d-o*i}function Q0(t,e,n={}){const i=jl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(HA(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:b}=s;return $O(t,e,h,f,g,b,n)}:()=>Promise.resolve(),{when:d}=s;if(d){const[h,f]=d==="beforeChildren"?[o,c]:[c,o];return h().then(()=>f())}else return Promise.all([o(),c(n.delay)])}function $O(t,e,n=0,i=0,s=0,o=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(Q0(h,e,{...c,delay:n+(typeof i=="function"?0:i)+$A(t.variantChildren,h,i,s,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function GA(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>Q0(t,o,n));i=Promise.all(s)}else if(typeof e=="string")i=Q0(t,e,n);else{const s=typeof e=="function"?jl(t,e,n.custom):e;i=Promise.all(HA(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function KA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const GO=ov.length;function YA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?YA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<GO;n++){const i=ov[n],s=t.props[i];(Hu(s)||s===!1)&&(e[i]=s)}return e}const KO=[...av].reverse(),YO=av.length;function QO(t){return e=>Promise.all(e.map(({animation:n,options:i})=>GA(t,n,i)))}function XO(t){let e=QO(t),n=Lx(),i=!0;const s=h=>(f,g)=>{const b=jl(t,g,h==="exit"?t.presenceContext?.custom:void 0);if(b){const{transition:_,transitionEnd:E,...I}=b;f={...f,...I,...E}}return f};function o(h){e=h(t)}function c(h){const{props:f}=t,g=YA(t.parent)||{},b=[],_=new Set;let E={},I=1/0;for(let C=0;C<YO;C++){const O=KO[C],z=n[O],L=f[O]!==void 0?f[O]:g[O],$=Hu(L),ne=O===h?z.isActive:null;ne===!1&&(I=C);let te=L===g[O]&&L!==f[O]&&$;if(te&&i&&t.manuallyAnimateOnMount&&(te=!1),z.protectedKeys={...E},!z.isActive&&ne===null||!L&&!z.prevProp||hm(L)||typeof L=="boolean")continue;const S=WO(z.prevProp,L);let R=S||O===h&&z.isActive&&!te&&$||C>I&&$,M=!1;const U=Array.isArray(L)?L:[L];let P=U.reduce(s(O),{});ne===!1&&(P={});const{prevResolvedValues:B={}}=z,j={...B,...P},pe=W=>{R=!0,_.has(W)&&(M=!0,_.delete(W)),z.needsAnimating[W]=!0;const fe=t.getValue(W);fe&&(fe.liveStyle=!1)};for(const W in j){const fe=P[W],_e=B[W];if(E.hasOwnProperty(W))continue;let se=!1;K0(fe)&&K0(_e)?se=!KA(fe,_e):se=fe!==_e,se?fe!=null?pe(W):_.add(W):fe!==void 0&&_.has(W)?pe(W):z.protectedKeys[W]=!0}z.prevProp=L,z.prevResolvedValues=P,z.isActive&&(E={...E,...P}),i&&t.blockInitialAnimation&&(R=!1);const ce=te&&S;R&&(!ce||M)&&b.push(...U.map(W=>{const fe={type:O};if(typeof W=="string"&&i&&!ce&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,se=jl(_e,W);if(_e.enteringChildren&&se){const{delayChildren:V}=se.transition||{};fe.delay=$A(_e.enteringChildren,t,V)}}return{animation:W,options:fe}}))}if(_.size){const C={};if(typeof f.initial!="boolean"){const O=jl(t,Array.isArray(f.initial)?f.initial[0]:f.initial);O&&O.transition&&(C.transition=O.transition)}_.forEach(O=>{const z=t.getBaseTarget(O),L=t.getValue(O);L&&(L.liveStyle=!0),C[O]=z??null}),b.push({animation:C})}let A=!!b.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(b):Promise.resolve()}function d(h,f){if(n[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(b=>b.animationState?.setActive(h,f)),n[h].isActive=f;const g=c(h);for(const b in n)n[b].protectedKeys={};return g}return{animateChanges:c,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Lx()}}}function WO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!KA(e,t):!1}function fo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lx(){return{animate:fo(!0),whileInView:fo(),whileHover:fo(),whileTap:fo(),whileDrag:fo(),whileFocus:fo(),exit:fo()}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ZO extends Ra{constructor(e){super(e),e.animationState||(e.animationState=XO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let JO=0;class e5 extends Ra{constructor(){super(...arguments),this.id=JO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const t5={animation:{Feature:ZO},exit:{Feature:e5}};function Gu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function dd(t){return{point:{x:t.pageX,y:t.pageY}}}const n5=t=>e=>sv(e)&&t(e,dd(e));function Ru(t,e,n,i){return Gu(t,e,n5(n),i)}const QA=1e-4,i5=1-QA,r5=1+QA,XA=.01,s5=0-XA,a5=0+XA;function Dn(t){return t.max-t.min}function o5(t,e,n){return Math.abs(t-e)<=n}function zx(t,e,n,i=.5){t.origin=i,t.originPoint=St(e.min,e.max,t.origin),t.scale=Dn(n)/Dn(e),t.translate=St(n.min,n.max,t.origin)-t.originPoint,(t.scale>=i5&&t.scale<=r5||isNaN(t.scale))&&(t.scale=1),(t.translate>=s5&&t.translate<=a5||isNaN(t.translate))&&(t.translate=0)}function Iu(t,e,n,i){zx(t.x,e.x,n.x,i?i.originX:void 0),zx(t.y,e.y,n.y,i?i.originY:void 0)}function Ux(t,e,n){t.min=n.min+e.min,t.max=t.min+Dn(e)}function l5(t,e,n){Ux(t.x,e.x,n.x),Ux(t.y,e.y,n.y)}function Fx(t,e,n){t.min=e.min-n.min,t.max=t.min+Dn(e)}function ku(t,e,n){Fx(t.x,e.x,n.x),Fx(t.y,e.y,n.y)}function bi(t){return[t("x"),t("y")]}const WA=({current:t})=>t?t.ownerDocument.defaultView:null,Bx=(t,e)=>Math.abs(t-e);function c5(t,e){const n=Bx(t.x,e.x),i=Bx(t.y,e.y);return Math.sqrt(n**2+i**2)}class ZA{constructor(e,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=i0(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,I=c5(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!I)return;const{point:A}=_,{timestamp:C}=gn;this.history.push({...A,timestamp:C});const{onStart:O,onMove:z}=this.handlers;E||(O&&O(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=n0(E,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:I,onSessionEnd:A,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=i0(_.type==="pointercancel"?this.lastMoveEventInfo:n0(E,this.transformPagePoint),this.history);this.startEvent&&I&&I(_,O),A&&A(_,O)},!sv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=s||window;const d=dd(e),h=n0(d,this.transformPagePoint),{point:f}=h,{timestamp:g}=gn;this.history=[{...f,timestamp:g}];const{onSessionStart:b}=n;b&&b(e,i0(h,this.history)),this.removeListeners=ld(Ru(this.contextWindow,"pointermove",this.handlePointerMove),Ru(this.contextWindow,"pointerup",this.handlePointerUp),Ru(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function n0(t,e){return e?{point:e(t.point)}:t}function qx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function i0({point:t},e){return{point:t,delta:qx(t,JA(e)),offset:qx(t,u5(e)),velocity:d5(e,.1)}}function u5(t){return t[0]}function JA(t){return t[t.length-1]}function d5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=JA(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>vr(e)));)n--;if(!i)return{x:0,y:0};const o=xi(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function h5(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?St(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?St(n,t,i.max):Math.min(t,n)),t}function Hx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function f5(t,{top:e,left:n,bottom:i,right:s}){return{x:Hx(t.x,n,s),y:Hx(t.y,e,i)}}function $x(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function m5(t,e){return{x:$x(t.x,e.x),y:$x(t.y,e.y)}}function p5(t,e){let n=.5;const i=Dn(t),s=Dn(e);return s>i?n=Fu(e.min,e.max-i,t.min):i>s&&(n=Fu(t.min,t.max-s,e.min)),ds(0,1,n)}function g5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const X0=.35;function y5(t=X0){return t===!1?t=0:t===!0&&(t=X0),{x:Gx(t,"left","right"),y:Gx(t,"top","bottom")}}function Gx(t,e,n){return{min:Kx(t,e),max:Kx(t,n)}}function Kx(t,e){return typeof t=="number"?t:t[e]||0}const v5=new WeakMap;class b5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=b=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dd(b).point)},c=(b,_)=>{const{drag:E,dragPropagation:I,onDragStart:A}=this.getProps();if(E&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=A3(E),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bi(O=>{let z=this.getAxisMotionValue(O).get()||0;if(br.test(z)){const{projection:L}=this.visualElement;if(L&&L.layout){const $=L.layout.layoutBox[O];$&&(z=Dn($)*(parseFloat(z)/100))}}this.originPoint[O]=z}),A&&xt.postRender(()=>A(b,_)),Y0(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},d=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_;const{dragPropagation:E,dragDirectionLock:I,onDirectionLock:A,onDrag:C}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:O}=_;if(I&&this.currentDirection===null){this.currentDirection=_5(O),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,O),this.updateAxis("y",_.point,O),this.visualElement.render(),C&&C(b,_)},h=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_,this.stop(b,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>bi(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new ZA(e,{onSessionStart:o,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:WA(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&xt.postRender(()=>d(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!ef(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=h5(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&kl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=f5(i.layoutBox,e):this.constraints=!1,this.elastic=y5(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&bi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=g5(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!kl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=TO(i,s.root,this.visualElement.getTransformPagePoint());let c=m5(s.layout.layoutBox,o);if(n){const d=n(_O(c));this.hasMutatedConstraints=!!d,d&&(c=PA(d))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=bi(g=>{if(!ef(g,n,this.currentDirection))return;let b=h&&h[g]||{};c&&(b={min:0,max:0});const _=s?200:1e6,E=s?40:1e7,I={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(g,I)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Y0(this.visualElement,e),i.start(pv(e,i,0,n,this.visualElement,!1))}stopAnimation(){bi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){bi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){bi(n=>{const{drag:i}=this.getProps();if(!ef(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:d}=s.layout.layoutBox[n];o.set(e[n]-St(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!kl(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};bi(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();s[c]=p5({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),bi(c=>{if(!ef(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];d.set(St(h,f,s[c]))})}addListeners(){if(!this.visualElement.current)return;v5.set(this.visualElement,this);const e=this.visualElement.current,n=Ru(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();kl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),xt.read(i);const c=Gu(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(bi(g=>{const b=this.getAxisMotionValue(g);b&&(this.originPoint[g]+=h[g].translate,b.set(b.get()+h[g].translate))}),this.visualElement.render())}));return()=>{c(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=X0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:d}}}function ef(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class w5 extends Ra{constructor(e){super(e),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new b5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yx=t=>(e,n)=>{t&&xt.postRender(()=>t(e,n))};class x5 extends Ra{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(e){this.session=new ZA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Yx(e),onStart:Yx(n),onMove:i,onEnd:(o,c)=>{delete this.session,s&&xt.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=Ru(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(De.test(t))t=parseFloat(t);else return t;const n=Qx(t,e.target.x),i=Qx(t,e.target.y);return`${n}% ${i}%`}},T5={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=wa.parse(t);if(s.length>5)return i;const o=wa.createTransformer(t),c=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;s[0+c]/=d,s[1+c]/=h;const f=St(d,h,.5);return typeof s[2+c]=="number"&&(s[2+c]/=f),typeof s[3+c]=="number"&&(s[3+c]/=f),o(s)}};let r0=!1;class E5 extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;Y3(S5),o&&(n.group&&n.group.add(o),i&&i.register&&s&&i.register(o),r0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),pf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,r0=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||xt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;r0=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function e2(t){const[e,n]=wA(),i=D.useContext(jy);return v.jsx(E5,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(MA),isPresent:e,safeToRemove:n})}const S5={borderRadius:{...yu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yu,borderTopRightRadius:yu,borderBottomLeftRadius:yu,borderBottomRightRadius:yu,boxShadow:T5};function A5(t,e,n){const i=bn(t)?t:So(t);return i.start(pv("",i,e,n)),i.animation}const C5=(t,e)=>t.depth-e.depth;class N5{constructor(){this.children=[],this.isDirty=!1}add(e){zy(this.children,e),this.isDirty=!0}remove(e){Uy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(C5),this.isDirty=!1,this.children.forEach(e)}}function R5(t,e){const n=Hn.now(),i=({timestamp:s})=>{const o=s-n;o>=e&&(fs(i),t(o-e))};return xt.setup(i,!0),()=>fs(i)}const t2=["TopLeft","TopRight","BottomLeft","BottomRight"],I5=t2.length,Xx=t=>typeof t=="string"?parseFloat(t):t,Wx=t=>typeof t=="number"||De.test(t);function k5(t,e,n,i,s,o){s?(t.opacity=St(0,n.opacity??1,D5(i)),t.opacityExit=St(e.opacity??1,0,M5(i))):o&&(t.opacity=St(e.opacity??1,n.opacity??1,i));for(let c=0;c<I5;c++){const d=`border${t2[c]}Radius`;let h=Zx(e,d),f=Zx(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Wx(h)===Wx(f)?(t[d]=Math.max(St(Xx(h),Xx(f),i),0),(br.test(f)||br.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=St(e.rotate||0,n.rotate||0,i))}function Zx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const D5=n2(0,.5,US),M5=n2(.5,.95,Ti);function n2(t,e,n){return i=>i<t?0:i>e?1:n(Fu(t,e,i))}function Jx(t,e){t.min=e.min,t.max=e.max}function vi(t,e){Jx(t.x,e.x),Jx(t.y,e.y)}function eT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function tT(t,e,n,i,s){return t-=e,t=Mf(t,1/n,i),s!==void 0&&(t=Mf(t,1/s,i)),t}function O5(t,e=0,n=1,i=.5,s,o=t,c=t){if(br.test(e)&&(e=parseFloat(e),e=St(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=St(o.min,o.max,i);t===o&&(d-=e),t.min=tT(t.min,e,n,d,s),t.max=tT(t.max,e,n,d,s)}function nT(t,e,[n,i,s],o,c){O5(t,e[n],e[i],e[s],e.scale,o,c)}const P5=["x","scaleX","originX"],V5=["y","scaleY","originY"];function iT(t,e,n,i){nT(t.x,e,P5,n?n.x:void 0,i?i.x:void 0),nT(t.y,e,V5,n?n.y:void 0,i?i.y:void 0)}function rT(t){return t.translate===0&&t.scale===1}function i2(t){return rT(t.x)&&rT(t.y)}function sT(t,e){return t.min===e.min&&t.max===e.max}function j5(t,e){return sT(t.x,e.x)&&sT(t.y,e.y)}function aT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function r2(t,e){return aT(t.x,e.x)&&aT(t.y,e.y)}function oT(t){return Dn(t.x)/Dn(t.y)}function lT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class L5{constructor(){this.members=[]}add(e){zy(this.members,e),e.scheduleRender()}remove(e){if(Uy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function z5(t,e,n){let i="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=n?.z||0;if((s||o||c)&&(i=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:b,rotateY:_,skewX:E,skewY:I}=n;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),b&&(i+=`rotateX(${b}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),I&&(i+=`skewY(${I}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(i+=`scale(${d}, ${h})`),i||"none"}const s0=["","X","Y","Z"],U5=1e3;let F5=0;function a0(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function s2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",xt,!(s||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&s2(i)}function a2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(c={},d=e?.()){this.id=F5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(H5),this.nodes.forEach(Y5),this.nodes.forEach(Q5),this.nodes.forEach($5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new N5)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new qy),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=_A(c)&&!D3(c),this.instance=c;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let g,b=0;const _=()=>this.root.updateBlockedByResize=!1;xt.read(()=>{b=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==b&&(b=E,this.root.updateBlockedByResize=!0,g&&g(),g=R5(_,250),pf.hasAnimatedSinceResize&&(pf.hasAnimatedSinceResize=!1,this.nodes.forEach(dT)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b,hasRelativeLayoutChanged:_,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||f.getDefaultTransition()||eP,{onLayoutAnimationStart:A,onLayoutAnimationComplete:C}=f.getProps(),O=!this.targetLayout||!r2(this.targetLayout,E),z=!b&&_;if(this.options.layoutRoot||this.resumeFrom||z||b&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...nv(I,"layout"),onPlay:A,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,z)}else b||dT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X5),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&s2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const b=this.path[g];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(uT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(K5),this.nodes.forEach(B5),this.nodes.forEach(q5)):this.nodes.forEach(uT),this.clearAllSnapshots();const d=Hn.now();gn.delta=ds(0,1e3/60,d-gn.timestamp),gn.timestamp=d,gn.isProcessing=!0,Yg.update.process(gn),Yg.preRender.process(gn),Yg.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G5),this.sharedNodes.forEach(W5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!i2(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(d||po(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),tP(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return zt();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nP))){const{scroll:f}=this.root;f&&(Dl(d.x,f.offset.x),Dl(d.y,f.offset.y))}return d}removeElementScroll(c){const d=zt();if(vi(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:b}=f;f!==this.root&&g&&b.layoutScroll&&(g.wasRoot&&vi(d,c),Dl(d.x,g.offset.x),Dl(d.y,g.offset.y))}return d}applyTransform(c,d=!1){const h=zt();vi(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ml(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),po(g.latestValues)&&Ml(h,g.latestValues)}return po(this.latestValues)&&Ml(h,this.latestValues),h}removeTransform(c){const d=zt();vi(d,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!po(f.latestValues))continue;H0(f.latestValues)&&f.updateSnapshot();const g=zt(),b=f.measurePageBox();vi(g,b),iT(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return po(this.latestValues)&&iT(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:b}=this.options;if(!(!this.layout||!(g||b))){if(this.resolvedRelativeTargetAt=gn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),ku(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),jA(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),ku(this.relativeTargetOrigin,this.target,_.target),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||H0(this.parent.latestValues)||VA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;vi(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,_=this.treeScale.y;xO(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=zt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(eT(this.prevProjectionDelta.x,this.projectionDelta.x),eT(this.prevProjectionDelta.y,this.projectionDelta.y)),Iu(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==_||!lT(this.projectionDelta.x,this.prevProjectionDelta.x)||!lT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ol(),this.projectionDelta=Ol(),this.projectionDeltaWithTransform=Ol()}setAnimationOrigin(c,d=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},b=Ol();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=zt(),E=h?h.source:void 0,I=this.layout?this.layout.source:void 0,A=E!==I,C=this.getStack(),O=!C||C.members.length<=1,z=!!(A&&!O&&this.options.crossfade===!0&&!this.path.some(J5));this.animationProgress=0;let L;this.mixTargetDelta=$=>{const ne=$/1e3;hT(b.x,c.x,ne),hT(b.y,c.y,ne),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ku(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z5(this.relativeTarget,this.relativeTargetOrigin,_,ne),L&&j5(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=zt()),vi(L,this.relativeTarget)),A&&(this.animationValues=g,k5(g,f,this.latestValues,ne,z,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{pf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=So(0)),this.currentAnimation=A5(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(U5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:g}=c;if(!(!d||!h||!f)){if(this!==c&&this.layout&&f&&o2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||zt();const b=Dn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+b;const _=Dn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+_}vi(d,h),Ml(d,g),Iu(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new L5),this.sharedNodes.get(c).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&a0("z",c,f,this.animationValues);for(let g=0;g<s0.length;g++)a0(`rotate${s0[g]}`,c,f,this.animationValues),a0(`skew${s0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=mf(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=mf(d?.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let b=z5(this.projectionDeltaWithTransform,this.treeScale,g);h&&(b=h(g,b)),c.transform=b;const{x:_,y:E}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const I in $u){if(g[I]===void 0)continue;const{correct:A,applyTo:C,isCSSVariable:O}=$u[I],z=b==="none"?g[I]:A(g[I],f);if(C){const L=C.length;for(let $=0;$<L;$++)c[C[$]]=z}else O?this.options.visualElement.renderState.vars[I]=z:c[I]=z}this.options.layoutId&&(c.pointerEvents=f===this?mf(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(cT),this.root.sharedNodes.clear()}}}function B5(t){t.updateLayout()}function q5(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?bi(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(b);b.min=n[g].min,b.max=b.min+_}):o2(s,e.layoutBox,n)&&bi(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(n[g]);b.max=b.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const c=Ol();Iu(c,n,e.layoutBox);const d=Ol();o?Iu(d,t.applyTransform(i,!0),e.measuredBox):Iu(d,n,e.layoutBox);const h=!i2(c);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:b,layout:_}=g;if(b&&_){const E=zt();ku(E,e.layoutBox,b.layoutBox);const I=zt();ku(I,n,_.layoutBox),r2(E,I)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function H5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function G5(t){t.clearSnapshot()}function cT(t){t.clearMeasurements()}function uT(t){t.isLayoutDirty=!1}function K5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function dT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Y5(t){t.resolveTargetDelta()}function Q5(t){t.calcProjection()}function X5(t){t.resetSkewAndRotation()}function W5(t){t.removeLeadSnapshot()}function hT(t,e,n){t.translate=St(e.translate,0,n),t.scale=St(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function fT(t,e,n,i){t.min=St(e.min,n.min,i),t.max=St(e.max,n.max,i)}function Z5(t,e,n,i){fT(t.x,e.x,n.x,i),fT(t.y,e.y,n.y,i)}function J5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eP={duration:.45,ease:[.4,0,.1,1]},mT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),pT=mT("applewebkit/")&&!mT("chrome/")?Math.round:Ti;function gT(t){t.min=pT(t.min),t.max=pT(t.max)}function tP(t){gT(t.x),gT(t.y)}function o2(t,e,n){return t==="position"||t==="preserve-aspect"&&!o5(oT(e),oT(n),.2)}function nP(t){return t!==t.root&&t.scroll?.wasRoot}const iP=a2({attachResizeListener:(t,e)=>Gu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),o0={current:void 0},l2=a2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!o0.current){const t=new iP({});t.mount(window),t.setOptions({layoutScroll:!0}),o0.current=t}return o0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),rP={pan:{Feature:x5},drag:{Feature:w5,ProjectionNode:l2,MeasureLayout:e2}};function yT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=i[s];o&&xt.postRender(()=>o(e,dd(e)))}class sP extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=C3(e,(n,i)=>(yT(this.node,i,"Start"),s=>yT(this.node,s,"End"))))}unmount(){}}class aP extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ld(Gu(this.node.current,"focus",()=>this.onFocus()),Gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vT(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=i[s];o&&xt.postRender(()=>o(e,dd(e)))}class oP extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=k3(e,(n,i)=>(vT(this.node,i,"Start"),(s,{success:o})=>vT(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const W0=new WeakMap,l0=new WeakMap,lP=t=>{const e=W0.get(t.target);e&&e(t)},cP=t=>{t.forEach(lP)};function uP({root:t,...e}){const n=t||document;l0.has(n)||l0.set(n,{});const i=l0.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(cP,{root:t,...e})),i[s]}function dP(t,e,n){const i=uP(e);return W0.set(t,n),i.observe(t),()=>{W0.delete(t),i.unobserve(t)}}const hP={some:0,all:1};class fP extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:hP[s]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:b}=this.node.getProps(),_=f?g:b;_&&_(h)};return dP(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mP(e,n))&&this.startObserver()}unmount(){}}function mP({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pP={inView:{Feature:fP},tap:{Feature:oP},focus:{Feature:aP},hover:{Feature:sP}},gP={layout:{ProjectionNode:l2,MeasureLayout:e2}},yP={...t5,...pP,...rP,...gP},Mo=bO(yP,DO);function c2(t){const e=_s(()=>So(t)),{isStatic:n}=D.useContext(cm);if(n){const[,i]=D.useState(t);D.useEffect(()=>e.on("change",i),[])}return e}function u2(t,e){const n=c2(e()),i=()=>n.set(e());return i(),om(()=>{const s=()=>xt.preRender(i,!1,!0),o=t.map(c=>c.on("change",s));return()=>{o.forEach(c=>c()),fs(i)}}),n}function vP(t){Nu.current=[],t();const e=u2(Nu.current,t);return Nu.current=void 0,e}function bP(t,e,n,i){if(typeof t=="function")return vP(t);const s=typeof e=="function"?e:M3(e,n,i);return Array.isArray(t)?bT(t,s):bT([t],([o])=>s(o))}function bT(t,e){const n=_s(()=>[]);return u2(t,()=>{n.length=0;const i=t.length;for(let s=0;s<i;s++)n[s]=t[s].get();return e(n)})}function _P(t){t.values.forEach(e=>e.stop())}function Z0(t,e){[...e].reverse().forEach(i=>{const s=t.getVariant(i);s&&mv(t,s),t.variantChildren&&t.variantChildren.forEach(o=>{Z0(o,e)})})}function wP(t,e){if(Array.isArray(e))return Z0(t,e);if(typeof e=="string")return Z0(t,[e]);mv(t,e)}function xP(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const s=[];return t.forEach(o=>{s.push(GA(o,n,{transitionOverride:i}))}),Promise.all(s)},set(n){return t.forEach(i=>{wP(i,n)})},stop(){t.forEach(n=>{_P(n)})},mount(){return()=>{e.stop()}}};return e}function TP(){const t=_s(xP);return om(t.mount,[]),t}const EP=TP;class SP{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(i=>{i.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const AP=()=>new SP;function CP(){return _s(AP)}const d2=D.createContext(null);function NP(t,e,n,i){if(!i)return t;const s=t.findIndex(g=>g.value===e);if(s===-1)return t;const o=i>0?1:-1,c=t[s+o];if(!c)return t;const d=t[s],h=c.layout,f=St(h.min,h.max,.5);return o===1&&d.layout.max+n>f||o===-1&&d.layout.min+n<f?z4(t,s,s+o):t}function RP({children:t,as:e="ul",axis:n="y",onReorder:i,values:s,...o},c){const d=_s(()=>Mo[e]),h=[],f=D.useRef(!1),g={axis:n,registerItem:(b,_)=>{const E=h.findIndex(I=>b===I.value);E!==-1?h[E].layout=_[n]:h.push({value:b,layout:_[n]}),h.sort(DP)},updateOrder:(b,_,E)=>{if(f.current)return;const I=NP(h,b,_,E);h!==I&&(f.current=!0,i(I.map(kP).filter(A=>s.indexOf(A)!==-1)))}};return D.useEffect(()=>{f.current=!1}),v.jsx(d,{...o,ref:c,ignoreStrict:!0,children:v.jsx(d2.Provider,{value:g,children:t})})}const IP=D.forwardRef(RP);function kP(t){return t.value}function DP(t,e){return t.layout.min-e.layout.min}function _T(t,e=0){return bn(t)?t:c2(e)}function MP({children:t,style:e={},value:n,as:i="li",onDrag:s,layout:o=!0,...c},d){const h=_s(()=>Mo[i]),f=D.useContext(d2),g={x:_T(e.x),y:_T(e.y)},b=bP([g.x,g.y],([A,C])=>A||C?1:"unset"),{axis:_,registerItem:E,updateOrder:I}=f;return v.jsx(h,{drag:_,...c,dragSnapToOrigin:!0,style:{...e,x:g.x,y:g.y,zIndex:b},layout:o,onDrag:(A,C)=>{const{velocity:O}=C;O[_]&&I(n,g[_].get(),O[_]),s&&s(A,C)},onLayoutMeasure:A=>E(n,A),ref:d,ignoreStrict:!0,children:t})}const OP=D.forwardRef(MP),wT=t=>{let e;const n=new Set,i=(f,g)=>{const b=typeof f=="function"?f(e):f;if(!Object.is(b,e)){const _=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(E=>E(e,_))}},s=()=>e,d={setState:i,getState:s,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=e=t(i,s,d);return d},PP=(t=>t?wT(t):wT),VP=t=>t;function jP(t,e=VP){const n=Yh.useSyncExternalStore(t.subscribe,Yh.useCallback(()=>e(t.getState()),[t,e]),Yh.useCallback(()=>e(t.getInitialState()),[t,e]));return Yh.useDebugValue(n),n}const xT=t=>{const e=PP(t),n=i=>jP(e,i);return Object.assign(n,e),n},mm=(t=>t?xT(t):xT);function LP(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),d=(o=n.getItem(s))!=null?o:null;return d instanceof Promise?d.then(c):c(d)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const J0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return J0(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return J0(i)(n)}}}},zP=(t,e)=>(n,i,s)=>{let o={storage:LP(()=>localStorage),partialize:A=>A,version:0,merge:(A,C)=>({...C,...A}),...e},c=!1;const d=new Set,h=new Set;let f=o.storage;if(!f)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...A)},i,s);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},b=s.setState;s.setState=(A,C)=>(b(A,C),g());const _=t((...A)=>(n(...A),g()),i,s);s.getInitialState=()=>_;let E;const I=()=>{var A,C;if(!f)return;c=!1,d.forEach(z=>{var L;return z((L=i())!=null?L:_)});const O=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(A=i())!=null?A:_))||void 0;return J0(f.getItem.bind(f))(o.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==o.version){if(o.migrate){const L=o.migrate(z.state,z.version);return L instanceof Promise?L.then($=>[!0,$]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var L;const[$,ne]=z;if(E=o.merge(ne,(L=i())!=null?L:_),n(E,!0),$)return g()}).then(()=>{O?.(E,void 0),E=i(),c=!0,h.forEach(z=>z(E))}).catch(z=>{O?.(void 0,z)})};return s.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>I(),hasHydrated:()=>c,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||I(),E||_},gv=zP;var Pl=9e15,Ia=1e9,ey="0123456789abcdef",Of="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Pf="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ty={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Pl,maxE:Pl,crypto:!1},h2,rs,Me=!0,pm="[DecimalError] ",xa=pm+"Invalid argument: ",f2=pm+"Precision limit exceeded",m2=pm+"crypto unavailable",p2="[object Decimal]",Nn=Math.floor,tn=Math.pow,UP=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,FP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,BP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,g2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,Re=7,qP=9007199254740991,HP=Of.length-1,ny=Pf.length-1,de={toStringTag:p2};de.absoluteValue=de.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Se(t)};de.ceil=function(){return Se(new this.constructor(this),this.e+1,2)};de.clampedTo=de.clamp=function(t,e){var n,i=this,s=i.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(xa+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new s(i)};de.comparedTo=de.cmp=function(t){var e,n,i,s,o=this,c=o.d,d=(t=new o.constructor(t)).d,h=o.s,f=t.s;if(!c||!d)return!h||!f?NaN:h!==f?h:c===d?0:!c^h<0?1:-1;if(!c[0]||!d[0])return c[0]?h:d[0]?-f:0;if(h!==f)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(i=c.length,s=d.length,e=0,n=i<s?i:s;e<n;++e)if(c[e]!==d[e])return c[e]>d[e]^h<0?1:-1;return i===s?0:i>s^h<0?1:-1};de.cosine=de.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Re,i.rounding=1,n=$P(i,w2(i,n)),i.precision=t,i.rounding=e,Se(rs==2||rs==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};de.cubeRoot=de.cbrt=function(){var t,e,n,i,s,o,c,d,h,f,g=this,b=g.constructor;if(!g.isFinite()||g.isZero())return new b(g);for(Me=!1,o=g.s*tn(g.s*g,1/3),!o||Math.abs(o)==1/0?(n=_n(g.d),t=g.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=tn(n,1/3),t=Nn((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new b(n),i.s=g.s):i=new b(o.toString()),c=(t=b.precision)+3;;)if(d=i,h=d.times(d).times(d),f=h.plus(g),i=gt(f.plus(g).times(d),f.plus(h),c+2,1),_n(d.d).slice(0,c)===(n=_n(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!s&&n=="4999"){if(!s&&(Se(d,t+1,0),d.times(d).times(d).eq(g))){i=d;break}c+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Se(i,t+1,1),e=!i.times(i).times(i).eq(g));break}return Me=!0,Se(i,t,b.rounding,e)};de.decimalPlaces=de.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Nn(this.e/Re))*Re,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};de.dividedBy=de.div=function(t){return gt(this,new this.constructor(t))};de.dividedToIntegerBy=de.divToInt=function(t){var e=this,n=e.constructor;return Se(gt(e,new n(t),0,1,1),n.precision,n.rounding)};de.equals=de.eq=function(t){return this.cmp(t)===0};de.floor=function(){return Se(new this.constructor(this),this.e+1,3)};de.greaterThan=de.gt=function(t){return this.cmp(t)>0};de.greaterThanOrEqualTo=de.gte=function(t){var e=this.cmp(t);return e==1||e===0};de.hyperbolicCosine=de.cosh=function(){var t,e,n,i,s,o=this,c=o.constructor,d=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return d;n=c.precision,i=c.rounding,c.precision=n+Math.max(o.e,o.sd())+4,c.rounding=1,s=o.d.length,s<32?(t=Math.ceil(s/3),e=(1/ym(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=ql(c,1,o.times(e),new c(1),!0);for(var h,f=t,g=new c(8);f--;)h=o.times(o),o=d.minus(h.times(g.minus(h.times(g))));return Se(o,c.precision=n,c.rounding=i,!0)};de.hyperbolicSine=de.sinh=function(){var t,e,n,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=ql(o,2,s,s,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,s=s.times(1/ym(5,t)),s=ql(o,2,s,s,!0);for(var c,d=new o(5),h=new o(16),f=new o(20);t--;)c=s.times(s),s=s.times(d.plus(c.times(h.times(c).plus(f))))}return o.precision=e,o.rounding=n,Se(s,e,n,!0)};de.hyperbolicTangent=de.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,gt(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};de.inverseCosine=de.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,s=e.rounding;return n!==-1?n===0?t.isNeg()?gr(e,i,s):new e(0):new e(NaN):t.isZero()?gr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,t.times(2))};de.inverseHyperbolicCosine=de.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,Me=!1,n=n.times(n).minus(1).sqrt().plus(n),Me=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};de.inverseHyperbolicSine=de.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,Me=!1,n=n.times(n).plus(1).sqrt().plus(n),Me=!0,i.precision=t,i.rounding=e,n.ln())};de.inverseHyperbolicTangent=de.atanh=function(){var t,e,n,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=o.precision,e=o.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?Se(new o(s),t,e,!0):(o.precision=n=i-s.e,s=gt(s.plus(1),new o(1).minus(s),n+t,1),o.precision=t+4,o.rounding=1,s=s.ln(),o.precision=t,o.rounding=e,s.times(.5))):new o(NaN)};de.inverseSine=de.asin=function(){var t,e,n,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=gr(o,n+4,i).times(.5),t.s=s.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,s.times(2)))};de.inverseTangent=de.atan=function(){var t,e,n,i,s,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&b+4<=ny)return c=gr(g,b+4,_).times(.25),c.s=f.s,c}else{if(!f.s)return new g(NaN);if(b+4<=ny)return c=gr(g,b+4,_).times(.5),c.s=f.s,c}for(g.precision=d=b+10,g.rounding=1,n=Math.min(28,d/Re+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(d/Re),i=1,h=f.times(f),c=new g(f),s=f;t!==-1;)if(s=s.times(h),o=c.minus(s.div(i+=2)),s=s.times(h),c=o.plus(s.div(i+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return n&&(c=c.times(2<<n-1)),Me=!0,Se(c,g.precision=b,g.rounding=_,!0)};de.isFinite=function(){return!!this.d};de.isInteger=de.isInt=function(){return!!this.d&&Nn(this.e/Re)>this.d.length-2};de.isNaN=function(){return!this.s};de.isNegative=de.isNeg=function(){return this.s<0};de.isPositive=de.isPos=function(){return this.s>0};de.isZero=function(){return!!this.d&&this.d[0]===0};de.lessThan=de.lt=function(t){return this.cmp(t)<0};de.lessThanOrEqualTo=de.lte=function(t){return this.cmp(t)<1};de.logarithm=de.log=function(t){var e,n,i,s,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding,E=5;if(t==null)t=new g(10),e=!0;else{if(t=new g(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new g(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new g(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(s=n[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,d=b+E,c=fa(f,d),i=e?Vf(g,d+10):fa(t,d),h=gt(c,i,d,1),Ku(h.d,s=b,_))do if(d+=10,c=fa(f,d),i=e?Vf(g,d+10):fa(t,d),h=gt(c,i,d,1),!o){+_n(h.d).slice(s+1,s+15)+1==1e14&&(h=Se(h,b+1,0));break}while(Ku(h.d,s+=10,_));return Me=!0,Se(h,b,_)};de.minus=de.sub=function(t){var e,n,i,s,o,c,d,h,f,g,b,_,E=this,I=E.constructor;if(t=new I(t),!E.d||!t.d)return!E.s||!t.s?t=new I(NaN):E.d?t.s=-t.s:t=new I(t.d||E.s!==t.s?E:NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(f=E.d,_=t.d,d=I.precision,h=I.rounding,!f[0]||!_[0]){if(_[0])t.s=-t.s;else if(f[0])t=new I(E);else return new I(h===3?-0:0);return Me?Se(t,d,h):t}if(n=Nn(t.e/Re),g=Nn(E.e/Re),f=f.slice(),o=g-n,o){for(b=o<0,b?(e=f,o=-o,c=_.length):(e=_,n=g,c=f.length),i=Math.max(Math.ceil(d/Re),c)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,c=_.length,b=i<c,b&&(c=i),i=0;i<c;i++)if(f[i]!=_[i]){b=f[i]<_[i];break}o=0}for(b&&(e=f,f=_,_=e,t.s=-t.s),c=f.length,i=_.length-c;i>0;--i)f[c++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=Ui-1;--f[s],f[i]+=Ui}f[i]-=_[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=gm(f,n),Me?Se(t,d,h):t):new I(h===3?-0:0)};de.modulo=de.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?Se(new i(n),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=gt(n,t.abs(),0,3,1),e.s*=t.s):e=gt(n,t,0,i.modulo,1),e=e.times(t),Me=!0,n.minus(e))};de.naturalExponential=de.exp=function(){return iy(this)};de.naturalLogarithm=de.ln=function(){return fa(this)};de.negated=de.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Se(t)};de.plus=de.add=function(t){var e,n,i,s,o,c,d,h,f,g,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d||(t=new _(t.d||b.s===t.s?b:NaN)),t;if(b.s!=t.s)return t.s=-t.s,b.minus(t);if(f=b.d,g=t.d,d=_.precision,h=_.rounding,!f[0]||!g[0])return g[0]||(t=new _(b)),Me?Se(t,d,h):t;if(o=Nn(b.e/Re),i=Nn(t.e/Re),f=f.slice(),s=o-i,s){for(s<0?(n=f,s=-s,c=g.length):(n=g,i=o,c=f.length),o=Math.ceil(d/Re),c=o>c?o+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=f.length,s=g.length,c-s<0&&(s=c,n=g,g=f,f=n),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/Ui|0,f[s]%=Ui;for(e&&(f.unshift(e),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=gm(f,i),Me?Se(t,d,h):t};de.precision=de.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xa+t);return n.d?(e=y2(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};de.round=function(){var t=this,e=t.constructor;return Se(new e(t),t.e+1,e.rounding)};de.sine=de.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Re,i.rounding=1,n=KP(i,w2(i,n)),i.precision=t,i.rounding=e,Se(rs>2?n.neg():n,t,e,!0)):new i(NaN)};de.squareRoot=de.sqrt=function(){var t,e,n,i,s,o,c=this,d=c.d,h=c.e,f=c.s,g=c.constructor;if(f!==1||!d||!d[0])return new g(!f||f<0&&(!d||d[0])?NaN:d?c:1/0);for(Me=!1,f=Math.sqrt(+c),f==0||f==1/0?(e=_n(d),(e.length+h)%2==0&&(e+="0"),f=Math.sqrt(e),h=Nn((h+1)/2)-(h<0||h%2),f==1/0?e="5e"+h:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),i=new g(e)):i=new g(f.toString()),n=(h=g.precision)+3;;)if(o=i,i=o.plus(gt(c,o,n+2,1)).times(.5),_n(o.d).slice(0,n)===(e=_n(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!s&&e=="4999"){if(!s&&(Se(o,h+1,0),o.times(o).eq(c))){i=o;break}n+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Se(i,h+1,1),t=!i.times(i).eq(c));break}return Me=!0,Se(i,h,g.rounding,t)};de.tangent=de.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=gt(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Se(rs==2||rs==4?n.neg():n,t,e,!0)):new i(NaN)};de.times=de.mul=function(t){var e,n,i,s,o,c,d,h,f,g=this,b=g.constructor,_=g.d,E=(t=new b(t)).d;if(t.s*=g.s,!_||!_[0]||!E||!E[0])return new b(!t.s||_&&!_[0]&&!E||E&&!E[0]&&!_?NaN:!_||!E?t.s/0:t.s*0);for(n=Nn(g.e/Re)+Nn(t.e/Re),h=_.length,f=E.length,h<f&&(o=_,_=E,E=o,c=h,h=f,f=c),o=[],c=h+f,i=c;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=h+i;s>i;)d=o[s]+E[i]*_[s-i-1]+e,o[s--]=d%Ui|0,e=d/Ui|0;o[s]=(o[s]+e)%Ui|0}for(;!o[--c];)o.pop();return e?++n:o.shift(),t.d=o,t.e=gm(o,n),Me?Se(t,b.precision,b.rounding):t};de.toBinary=function(t,e){return yv(this,2,t,e)};de.toDecimalPlaces=de.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Gn(t,0,Ia),e===void 0?e=i.rounding:Gn(e,0,8),Se(n,t+n.e+1,e))};de.toExponential=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=Ar(i,!0):(Gn(t,0,Ia),e===void 0?e=s.rounding:Gn(e,0,8),i=Se(new s(i),t+1,e),n=Ar(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};de.toFixed=function(t,e){var n,i,s=this,o=s.constructor;return t===void 0?n=Ar(s):(Gn(t,0,Ia),e===void 0?e=o.rounding:Gn(e,0,8),i=Se(new o(s),t+s.e+1,e),n=Ar(i,!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n};de.toFraction=function(t){var e,n,i,s,o,c,d,h,f,g,b,_,E=this,I=E.d,A=E.constructor;if(!I)return new A(E);if(f=n=new A(1),i=h=new A(0),e=new A(i),o=e.e=y2(I)-E.e-1,c=o%Re,e.d[0]=tn(10,c<0?Re+c:c),t==null)t=o>0?e:f;else{if(d=new A(t),!d.isInt()||d.lt(f))throw Error(xa+d);t=d.gt(e)?o>0?e:f:d}for(Me=!1,d=new A(_n(I)),g=A.precision,A.precision=o=I.length*Re*2;b=gt(d,e,0,1,1),s=n.plus(b.times(i)),s.cmp(t)!=1;)n=i,i=s,s=f,f=h.plus(b.times(s)),h=s,s=e,e=d.minus(b.times(s)),d=s;return s=gt(t.minus(n),i,0,1,1),h=h.plus(s.times(f)),n=n.plus(s.times(i)),h.s=f.s=E.s,_=gt(f,i,o,1).minus(E).abs().cmp(gt(h,n,o,1).minus(E).abs())<1?[f,i]:[h,n],A.precision=g,Me=!0,_};de.toHexadecimal=de.toHex=function(t,e){return yv(this,16,t,e)};de.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Gn(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Me=!1,n=gt(n,t,0,e,1).times(t),Me=!0,Se(n)):(t.s=n.s,n=t),n};de.toNumber=function(){return+this};de.toOctal=function(t,e){return yv(this,8,t,e)};de.toPower=de.pow=function(t){var e,n,i,s,o,c,d=this,h=d.constructor,f=+(t=new h(t));if(!d.d||!t.d||!d.d[0]||!t.d[0])return new h(tn(+d,f));if(d=new h(d),d.eq(1))return d;if(i=h.precision,o=h.rounding,t.eq(1))return Se(d,i,o);if(e=Nn(t.e/Re),e>=t.d.length-1&&(n=f<0?-f:f)<=qP)return s=v2(h,d,n,i),t.s<0?new h(1).div(s):Se(s,i,o);if(c=d.s,c<0){if(e<t.d.length-1)return new h(NaN);if((t.d[e]&1)==0&&(c=1),d.e==0&&d.d[0]==1&&d.d.length==1)return d.s=c,d}return n=tn(+d,f),e=n==0||!isFinite(n)?Nn(f*(Math.log("0."+_n(d.d))/Math.LN10+d.e+1)):new h(n+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?c/0:0):(Me=!1,h.rounding=d.s=1,n=Math.min(12,(e+"").length),s=iy(t.times(fa(d,i+n)),i),s.d&&(s=Se(s,i+5,1),Ku(s.d,i,o)&&(e=i+10,s=Se(iy(t.times(fa(d,e+n)),e),e+5,1),+_n(s.d).slice(i+1,i+15)+1==1e14&&(s=Se(s,i+1,0)))),s.s=c,Me=!0,h.rounding=o,Se(s,i,o))};de.toPrecision=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=Ar(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(Gn(t,1,Ia),e===void 0?e=s.rounding:Gn(e,0,8),i=Se(new s(i),t,e),n=Ar(i,t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};de.toSignificantDigits=de.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Gn(t,1,Ia),e===void 0?e=i.rounding:Gn(e,0,8)),Se(new i(n),t,e)};de.toString=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};de.truncated=de.trunc=function(){return Se(new this.constructor(this),this.e+1,1)};de.valueOf=de.toJSON=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function _n(t){var e,n,i,s=t.length-1,o="",c=t[0];if(s>0){for(o+=c,e=1;e<s;e++)i=t[e]+"",n=Re-i.length,n&&(o+=oa(n)),o+=i;c=t[e],i=c+"",n=Re-i.length,n&&(o+=oa(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function Gn(t,e,n){if(t!==~~t||t<e||t>n)throw Error(xa+t)}function Ku(t,e,n,i){var s,o,c,d;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Re,s=0):(s=Math.ceil((e+1)/Re),e%=Re),o=tn(10,Re-e),d=t[s]%o|0,i==null?e<3?(e==0?d=d/100|0:e==1&&(d=d/10|0),c=n<4&&d==99999||n>3&&d==49999||d==5e4||d==0):c=(n<4&&d+1==o||n>3&&d+1==o/2)&&(t[s+1]/o/100|0)==tn(10,e-2)-1||(d==o/2||d==0)&&(t[s+1]/o/100|0)==0:e<4?(e==0?d=d/1e3|0:e==1?d=d/100|0:e==2&&(d=d/10|0),c=(i||n<4)&&d==9999||!i&&n>3&&d==4999):c=((i||n<4)&&d+1==o||!i&&n>3&&d+1==o/2)&&(t[s+1]/o/1e3|0)==tn(10,e-3)-1,c}function gf(t,e,n){for(var i,s=[0],o,c=0,d=t.length;c<d;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=ey.indexOf(t.charAt(c++)),i=0;i<s.length;i++)s[i]>n-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}function $P(t,e){var n,i,s;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),s=(1/ym(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=ql(t,1,e.times(s),new t(1));for(var o=n;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=n,e}var gt=(function(){function t(i,s,o){var c,d=0,h=i.length;for(i=i.slice();h--;)c=i[h]*s+d,i[h]=c%o|0,d=c/o|0;return d&&i.unshift(d),i}function e(i,s,o,c){var d,h;if(o!=c)h=o>c?1:-1;else for(d=h=0;d<o;d++)if(i[d]!=s[d]){h=i[d]>s[d]?1:-1;break}return h}function n(i,s,o,c){for(var d=0;o--;)i[o]-=d,d=i[o]<s[o]?1:0,i[o]=d*c+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,c,d,h){var f,g,b,_,E,I,A,C,O,z,L,$,ne,te,S,R,M,U,P,B,j=i.constructor,pe=i.s==s.s?1:-1,ce=i.d,H=s.d;if(!ce||!ce[0]||!H||!H[0])return new j(!i.s||!s.s||(ce?H&&ce[0]==H[0]:!H)?NaN:ce&&ce[0]==0||!H?pe*0:pe/0);for(h?(E=1,g=i.e-s.e):(h=Ui,E=Re,g=Nn(i.e/E)-Nn(s.e/E)),P=H.length,M=ce.length,O=new j(pe),z=O.d=[],b=0;H[b]==(ce[b]||0);b++);if(H[b]>(ce[b]||0)&&g--,o==null?(te=o=j.precision,c=j.rounding):d?te=o+(i.e-s.e)+1:te=o,te<0)z.push(1),I=!0;else{if(te=te/E+2|0,b=0,P==1){for(_=0,H=H[0],te++;(b<M||_)&&te--;b++)S=_*h+(ce[b]||0),z[b]=S/H|0,_=S%H|0;I=_||b<M}else{for(_=h/(H[0]+1)|0,_>1&&(H=t(H,_,h),ce=t(ce,_,h),P=H.length,M=ce.length),R=P,L=ce.slice(0,P),$=L.length;$<P;)L[$++]=0;B=H.slice(),B.unshift(0),U=H[0],H[1]>=h/2&&++U;do _=0,f=e(H,L,P,$),f<0?(ne=L[0],P!=$&&(ne=ne*h+(L[1]||0)),_=ne/U|0,_>1?(_>=h&&(_=h-1),A=t(H,_,h),C=A.length,$=L.length,f=e(A,L,C,$),f==1&&(_--,n(A,P<C?B:H,C,h))):(_==0&&(f=_=1),A=H.slice()),C=A.length,C<$&&A.unshift(0),n(L,A,$,h),f==-1&&($=L.length,f=e(H,L,P,$),f<1&&(_++,n(L,P<$?B:H,$,h))),$=L.length):f===0&&(_++,L=[0]),z[b++]=_,f&&L[0]?L[$++]=ce[R]||0:(L=[ce[R]],$=1);while((R++<M||L[0]!==void 0)&&te--);I=L[0]!==void 0}z[0]||z.shift()}if(E==1)O.e=g,h2=I;else{for(b=1,_=z[0];_>=10;_/=10)b++;O.e=b+g*E-1,Se(O,d?o+O.e+1:o,c,I)}return O}})();function Se(t,e,n,i){var s,o,c,d,h,f,g,b,_,E=t.constructor;e:if(e!=null){if(b=t.d,!b)return t;for(s=1,d=b[0];d>=10;d/=10)s++;if(o=e-s,o<0)o+=Re,c=e,g=b[_=0],h=g/tn(10,s-c-1)%10|0;else if(_=Math.ceil((o+1)/Re),d=b.length,_>=d)if(i){for(;d++<=_;)b.push(0);g=h=0,s=1,o%=Re,c=o-Re+1}else break e;else{for(g=d=b[_],s=1;d>=10;d/=10)s++;o%=Re,c=o-Re+s,h=c<0?0:g/tn(10,s-c-1)%10|0}if(i=i||e<0||b[_+1]!==void 0||(c<0?g:g%tn(10,s-c-1)),f=n<4?(h||i)&&(n==0||n==(t.s<0?3:2)):h>5||h==5&&(n==4||i||n==6&&(o>0?c>0?g/tn(10,s-c):0:b[_-1])%10&1||n==(t.s<0?8:7)),e<1||!b[0])return b.length=0,f?(e-=t.e+1,b[0]=tn(10,(Re-e%Re)%Re),t.e=-e||0):b[0]=t.e=0,t;if(o==0?(b.length=_,d=1,_--):(b.length=_+1,d=tn(10,Re-o),b[_]=c>0?(g/tn(10,s-c)%tn(10,c)|0)*d:0),f)for(;;)if(_==0){for(o=1,c=b[0];c>=10;c/=10)o++;for(c=b[0]+=d,d=1;c>=10;c/=10)d++;o!=d&&(t.e++,b[0]==Ui&&(b[0]=1));break}else{if(b[_]+=d,b[_]!=Ui)break;b[_--]=0,d=1}for(o=b.length;b[--o]===0;)b.pop()}return Me&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function Ar(t,e,n){if(!t.isFinite())return _2(t);var i,s=t.e,o=_n(t.d),c=o.length;return e?(n&&(i=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+oa(i):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):s<0?(o="0."+oa(-s-1)+o,n&&(i=n-c)>0&&(o+=oa(i))):s>=c?(o+=oa(s+1-c),n&&(i=n-s-1)>0&&(o=o+"."+oa(i))):((i=s+1)<c&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-c)>0&&(s+1===c&&(o+="."),o+=oa(i))),o}function gm(t,e){var n=t[0];for(e*=Re;n>=10;n/=10)e++;return e}function Vf(t,e,n){if(e>HP)throw Me=!0,n&&(t.precision=n),Error(f2);return Se(new t(Of),e,1,!0)}function gr(t,e,n){if(e>ny)throw Error(f2);return Se(new t(Pf),e,n,!0)}function y2(t){var e=t.length-1,n=e*Re+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function oa(t){for(var e="";t--;)e+="0";return e}function v2(t,e,n,i){var s,o=new t(1),c=Math.ceil(i/Re+4);for(Me=!1;;){if(n%2&&(o=o.times(e),ET(o.d,c)&&(s=!0)),n=Nn(n/2),n===0){n=o.d.length-1,s&&o.d[n]===0&&++o.d[n];break}e=e.times(e),ET(e.d,c)}return Me=!0,o}function TT(t){return t.d[t.d.length-1]&1}function b2(t,e,n){for(var i,s,o=new t(e[0]),c=0;++c<e.length;){if(s=new t(e[c]),!s.s){o=s;break}i=o.cmp(s),(i===n||i===0&&o.s===n)&&(o=s)}return o}function iy(t,e){var n,i,s,o,c,d,h,f=0,g=0,b=0,_=t.constructor,E=_.rounding,I=_.precision;if(!t.d||!t.d[0]||t.e>17)return new _(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Me=!1,h=I):h=e,d=new _(.03125);t.e>-2;)t=t.times(d),b+=5;for(i=Math.log(tn(2,b))/Math.LN10*2+5|0,h+=i,n=o=c=new _(1),_.precision=h;;){if(o=Se(o.times(t),h,1),n=n.times(++g),d=c.plus(gt(o,n,h,1)),_n(d.d).slice(0,h)===_n(c.d).slice(0,h)){for(s=b;s--;)c=Se(c.times(c),h,1);if(e==null)if(f<3&&Ku(c.d,h-i,E,f))_.precision=h+=10,n=o=d=new _(1),g=0,f++;else return Se(c,_.precision=I,E,Me=!0);else return _.precision=I,c}c=d}}function fa(t,e){var n,i,s,o,c,d,h,f,g,b,_,E=1,I=10,A=t,C=A.d,O=A.constructor,z=O.rounding,L=O.precision;if(A.s<0||!C||!C[0]||!A.e&&C[0]==1&&C.length==1)return new O(C&&!C[0]?-1/0:A.s!=1?NaN:C?0:A);if(e==null?(Me=!1,g=L):g=e,O.precision=g+=I,n=_n(C),i=n.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)A=A.times(t),n=_n(A.d),i=n.charAt(0),E++;o=A.e,i>1?(A=new O("0."+n),o++):A=new O(i+"."+n.slice(1))}else return f=Vf(O,g+2,L).times(o+""),A=fa(new O(i+"."+n.slice(1)),g-I).plus(f),O.precision=L,e==null?Se(A,L,z,Me=!0):A;for(b=A,h=c=A=gt(A.minus(1),A.plus(1),g,1),_=Se(A.times(A),g,1),s=3;;){if(c=Se(c.times(_),g,1),f=h.plus(gt(c,new O(s),g,1)),_n(f.d).slice(0,g)===_n(h.d).slice(0,g))if(h=h.times(2),o!==0&&(h=h.plus(Vf(O,g+2,L).times(o+""))),h=gt(h,new O(E),g,1),e==null)if(Ku(h.d,g-I,z,d))O.precision=g+=I,f=c=A=gt(b.minus(1),b.plus(1),g,1),_=Se(A.times(A),g,1),s=d=1;else return Se(h,O.precision=L,z,Me=!0);else return O.precision=L,h;h=f,s+=2}}function _2(t){return String(t.s*t.s/0)}function yf(t,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%Re,n<0&&(i+=Re),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=Re;i<s;)t.d.push(+e.slice(i,i+=Re));e=e.slice(i),i=Re-e.length}else i-=s;for(;i--;)e+="0";t.d.push(+e),Me&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function GP(t,e){var n,i,s,o,c,d,h,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),g2.test(e))return yf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(FP.test(e))n=16,e=e.toLowerCase();else if(UP.test(e))n=2;else if(BP.test(e))n=8;else throw Error(xa+e);for(o=e.search(/p/i),o>0?(h=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,i=t.constructor,c&&(e=e.replace(".",""),d=e.length,o=d-o,s=v2(i,new i(n),o,o*2)),f=gf(e,n,Ui),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(t.s*0):(t.e=gm(f,g),t.d=f,Me=!1,c&&(t=gt(t,s,d*4)),h&&(t=t.times(Math.abs(h)<54?tn(2,h):Bn.pow(2,h))),Me=!0,t)}function KP(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:ql(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/ym(5,n)),e=ql(t,2,e,e);for(var s,o=new t(5),c=new t(16),d=new t(20);n--;)s=e.times(e),e=e.times(o.plus(s.times(c.times(s).minus(d))));return e}function ql(t,e,n,i,s){var o,c,d,h,f=t.precision,g=Math.ceil(f/Re);for(Me=!1,h=n.times(n),d=new t(i);;){if(c=gt(d.times(h),new t(e++*e++),f,1),d=s?i.plus(c):i.minus(c),i=gt(c.times(h),new t(e++*e++),f,1),c=d.plus(i),c.d[g]!==void 0){for(o=g;c.d[o]===d.d[o]&&o--;);if(o==-1)break}o=d,d=i,i=c,c=o}return Me=!0,c.d.length=g+1,c}function ym(t,e){for(var n=t;--e;)n*=t;return n}function w2(t,e){var n,i=e.s<0,s=gr(t,t.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return rs=i?4:1,e;if(n=e.divToInt(s),n.isZero())rs=i?3:2;else{if(e=e.minus(n.times(s)),e.lte(o))return rs=TT(n)?i?2:3:i?4:1,e;rs=TT(n)?i?1:4:i?3:2}return e.minus(s).abs()}function yv(t,e,n,i){var s,o,c,d,h,f,g,b,_,E=t.constructor,I=n!==void 0;if(I?(Gn(n,1,Ia),i===void 0?i=E.rounding:Gn(i,0,8)):(n=E.precision,i=E.rounding),!t.isFinite())g=_2(t);else{for(g=Ar(t),c=g.indexOf("."),I?(s=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):s=e,c>=0&&(g=g.replace(".",""),_=new E(1),_.e=g.length-c,_.d=gf(Ar(_),10,s),_.e=_.d.length),b=gf(g,10,s),o=h=b.length;b[--h]==0;)b.pop();if(!b[0])g=I?"0p+0":"0";else{if(c<0?o--:(t=new E(t),t.d=b,t.e=o,t=gt(t,_,n,i,0,s),b=t.d,o=t.e,f=h2),c=b[n],d=s/2,f=f||b[n+1]!==void 0,f=i<4?(c!==void 0||f)&&(i===0||i===(t.s<0?3:2)):c>d||c===d&&(i===4||f||i===6&&b[n-1]&1||i===(t.s<0?8:7)),b.length=n,f)for(;++b[--n]>s-1;)b[n]=0,n||(++o,b.unshift(1));for(h=b.length;!b[h-1];--h);for(c=0,g="";c<h;c++)g+=ey.charAt(b[c]);if(I){if(h>1)if(e==16||e==8){for(c=e==16?4:3,--h;h%c;h++)g+="0";for(b=gf(g,s,e),h=b.length;!b[h-1];--h);for(c=1,g="1.";c<h;c++)g+=ey.charAt(b[c])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>h)for(o-=h;o--;)g+="0";else o<h&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return t.s<0?"-"+g:g}function ET(t,e){if(t.length>e)return t.length=e,!0}function YP(t){return new this(t).abs()}function QP(t){return new this(t).acos()}function XP(t){return new this(t).acosh()}function WP(t,e){return new this(t).plus(e)}function ZP(t){return new this(t).asin()}function JP(t){return new this(t).asinh()}function eV(t){return new this(t).atan()}function tV(t){return new this(t).atanh()}function nV(t,e){t=new this(t),e=new this(e);var n,i=this.precision,s=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=gr(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?gr(this,i,s):new this(0),n.s=t.s):!t.d||e.isZero()?(n=gr(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(gt(t,e,o,1)),e=gr(this,o,1),this.precision=i,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(gt(t,e,o,1)),n}function iV(t){return new this(t).cbrt()}function rV(t){return Se(t=new this(t),t.e+1,2)}function sV(t,e,n){return new this(t).clamp(e,n)}function aV(t){if(!t||typeof t!="object")throw Error(pm+"Object expected");var e,n,i,s=t.defaults===!0,o=["precision",1,Ia,"rounding",0,8,"toExpNeg",-Pl,0,"toExpPos",0,Pl,"maxE",0,Pl,"minE",-Pl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],s&&(this[n]=ty[n]),(i=t[n])!==void 0)if(Nn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(xa+n+": "+i);if(n="crypto",s&&(this[n]=ty[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(m2);else this[n]=!1;else throw Error(xa+n+": "+i);return this}function oV(t){return new this(t).cos()}function lV(t){return new this(t).cosh()}function x2(t){var e,n,i;function s(o){var c,d,h,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,ST(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(h=typeof o,h==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(c=0,d=o;d>=10;d/=10)c++;Me?c>s.maxE?(f.e=NaN,f.d=null):c<s.minE?(f.e=0,f.d=[0]):(f.e=c,f.d=[o]):(f.e=c,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return yf(f,o.toString())}if(h==="string")return(d=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(d===43&&(o=o.slice(1)),f.s=1),g2.test(o)?yf(f,o):GP(f,o);if(h==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,yf(f,o.toString());throw Error(xa+o)}if(s.prototype=de,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=aV,s.clone=x2,s.isDecimal=ST,s.abs=YP,s.acos=QP,s.acosh=XP,s.add=WP,s.asin=ZP,s.asinh=JP,s.atan=eV,s.atanh=tV,s.atan2=nV,s.cbrt=iV,s.ceil=rV,s.clamp=sV,s.cos=oV,s.cosh=lV,s.div=cV,s.exp=uV,s.floor=dV,s.hypot=hV,s.ln=fV,s.log=mV,s.log10=gV,s.log2=pV,s.max=yV,s.min=vV,s.mod=bV,s.mul=_V,s.pow=wV,s.random=xV,s.round=TV,s.sign=EV,s.sin=SV,s.sinh=AV,s.sqrt=CV,s.sub=NV,s.sum=RV,s.tan=IV,s.tanh=kV,s.trunc=DV,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return s.config(t),s}function cV(t,e){return new this(t).div(e)}function uV(t){return new this(t).exp()}function dV(t){return Se(t=new this(t),t.e+1,3)}function hV(){var t,e,n=new this(0);for(Me=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);n=e}return Me=!0,n.sqrt()}function ST(t){return t instanceof Bn||t&&t.toStringTag===p2||!1}function fV(t){return new this(t).ln()}function mV(t,e){return new this(t).log(e)}function pV(t){return new this(t).log(2)}function gV(t){return new this(t).log(10)}function yV(){return b2(this,arguments,-1)}function vV(){return b2(this,arguments,1)}function bV(t,e){return new this(t).mod(e)}function _V(t,e){return new this(t).mul(e)}function wV(t,e){return new this(t).pow(e)}function xV(t){var e,n,i,s,o=0,c=new this(1),d=[];if(t===void 0?t=this.precision:Gn(t,1,Ia),i=Math.ceil(t/Re),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:d[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(d.push(s%1e7),o+=4);o=i/4}else throw Error(m2);else for(;o<i;)d[o++]=Math.random()*1e7|0;for(i=d[--o],t%=Re,i&&t&&(s=tn(10,Re-t),d[o]=(i/s|0)*s);d[o]===0;o--)d.pop();if(o<0)n=0,d=[0];else{for(n=-1;d[0]===0;n-=Re)d.shift();for(i=1,s=d[0];s>=10;s/=10)i++;i<Re&&(n-=Re-i)}return c.e=n,c.d=d,c}function TV(t){return Se(t=new this(t),t.e+1,this.rounding)}function EV(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function SV(t){return new this(t).sin()}function AV(t){return new this(t).sinh()}function CV(t){return new this(t).sqrt()}function NV(t,e){return new this(t).sub(e)}function RV(){var t=0,e=arguments,n=new this(e[t]);for(Me=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Me=!0,Se(n,this.precision,this.rounding)}function IV(t){return new this(t).tan()}function kV(t){return new this(t).tanh()}function DV(t){return Se(t=new this(t),t.e+1,1)}de[Symbol.for("nodejs.util.inspect.custom")]=de.toString;de[Symbol.toStringTag]="Decimal";var Bn=de.constructor=x2(ty);Of=new Bn(Of);Pf=new Bn(Pf);const MV=()=>{};var AT={};const T2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],c=t[n++],d=t[n++],h=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},E2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],c=s+1<t.length,d=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,g=o>>2,b=(o&3)<<4|d>>4;let _=(d&15)<<2|f>>6,E=f&63;h||(E=64,c||(_=64)),i.push(n[g],n[b],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(T2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const b=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||d==null||f==null||b==null)throw new PV;const _=o<<2|d>>4;if(i.push(_),f!==64){const E=d<<4&240|f>>2;if(i.push(E),b!==64){const I=f<<6&192|b;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VV=function(t){const e=T2(t);return E2.encodeByteArray(e,!0)},jf=function(t){return VV(t).replace(/\./g,"")},S2=function(t){try{return E2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LV=()=>jV().__FIREBASE_DEFAULTS__,zV=()=>{if(typeof process>"u"||typeof AT>"u")return;const t=AT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S2(t[1]);return e&&JSON.parse(e)},vm=()=>{try{return MV()||LV()||zV()||UV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A2=t=>vm()?.emulatorHosts?.[t],FV=t=>{const e=A2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},C2=()=>vm()?.config,N2=t=>vm()?.[`_${t}`];class BV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function rc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R2(t){return(await fetch(t,{credentials:"include"})).ok}function qV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jf(JSON.stringify(n)),jf(JSON.stringify(c)),""].join(".")}const Du={};function HV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Du))Du[e]?t.emulator.push(e):t.prod.push(e);return t}function $V(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let CT=!1;function I2(t,e){if(typeof window>"u"||typeof document>"u"||!rc(window.location.host)||Du[t]===e||Du[t]||CT)return;Du[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=HV().prod.length>0;function c(){const _=document.getElementById(i);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{CT=!0,c()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=$V(i),E=n("text"),I=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),O=n("preprendIcon"),z=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;d(L),g(C,A);const $=f();h(z,O),L.append(z,I,C,$),document.body.appendChild(L)}o?(I.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function KV(){const t=vm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WV(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZV(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JV(){try{return typeof indexedDB=="object"}catch{return!1}}function ej(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const tj="FirebaseError";class ws extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tj,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hd.prototype.create)}}class hd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?nj(o,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ws(s,d,i)}}function nj(t,e){return t.replace(ij,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ij=/\{\$([^}]+)}/g;function rj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ao(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],c=e[s];if(NT(o)&&NT(c)){if(!Ao(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function NT(t){return t!==null&&typeof t=="object"}function fd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sj(t,e){const n=new aj(t,e);return n.subscribe.bind(n)}class aj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");oj(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=c0),s.error===void 0&&(s.error=c0),s.complete===void 0&&(s.complete=c0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function c0(){}function Ct(t){return t&&t._delegate?t._delegate:t}class Co{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class lj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new BV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uj(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&c.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cj(t){return t===go?void 0:t}function uj(t){return t.instantiationMode==="EAGER"}class dj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const hj={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},fj=Ge.INFO,mj={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},pj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=mj[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vv{constructor(e){this.name=e,this._logLevel=fj,this._logHandler=pj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const gj=(t,e)=>e.some(n=>t instanceof n);let RT,IT;function yj(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vj(){return IT||(IT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k2=new WeakMap,ry=new WeakMap,D2=new WeakMap,u0=new WeakMap,bv=new WeakMap;function bj(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(ga(t.result)),s()},c=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&k2.set(n,t)}).catch(()=>{}),bv.set(e,t),e}function _j(t){if(ry.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});ry.set(t,e)}let sy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ry.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ga(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wj(t){sy=t(sy)}function xj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(d0(this),e,...n);return D2.set(i,e.sort?e.sort():[e]),ga(i)}:vj().includes(t)?function(...e){return t.apply(d0(this),e),ga(k2.get(this))}:function(...e){return ga(t.apply(d0(this),e))}}function Tj(t){return typeof t=="function"?xj(t):(t instanceof IDBTransaction&&_j(t),gj(t,yj())?new Proxy(t,sy):t)}function ga(t){if(t instanceof IDBRequest)return bj(t);if(u0.has(t))return u0.get(t);const e=Tj(t);return e!==t&&(u0.set(t,e),bv.set(e,t)),e}const d0=t=>bv.get(t);function Ej(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(t,e),d=ga(c);return i&&c.addEventListener("upgradeneeded",h=>{i(ga(c.result),h.oldVersion,h.newVersion,ga(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const Sj=["get","getKey","getAll","getAllKeys","count"],Aj=["put","add","delete","clear"],h0=new Map;function kT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(h0.get(e))return h0.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=Aj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Sj.includes(n)))return;const o=async function(c,...d){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),s&&h.done]))[0]};return h0.set(e,o),o}wj(t=>({...t,get:(e,n,i)=>kT(e,n)||t.get(e,n,i),has:(e,n)=>!!kT(e,n)||t.has(e,n)}));class Cj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Nj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Nj(t){return t.getComponent()?.type==="VERSION"}const ay="@firebase/app",DT="0.14.6";const ms=new vv("@firebase/app"),Rj="@firebase/app-compat",Ij="@firebase/analytics-compat",kj="@firebase/analytics",Dj="@firebase/app-check-compat",Mj="@firebase/app-check",Oj="@firebase/auth",Pj="@firebase/auth-compat",Vj="@firebase/database",jj="@firebase/data-connect",Lj="@firebase/database-compat",zj="@firebase/functions",Uj="@firebase/functions-compat",Fj="@firebase/installations",Bj="@firebase/installations-compat",qj="@firebase/messaging",Hj="@firebase/messaging-compat",$j="@firebase/performance",Gj="@firebase/performance-compat",Kj="@firebase/remote-config",Yj="@firebase/remote-config-compat",Qj="@firebase/storage",Xj="@firebase/storage-compat",Wj="@firebase/firestore",Zj="@firebase/ai",Jj="@firebase/firestore-compat",e6="firebase",t6="12.6.0";const oy="[DEFAULT]",n6={[ay]:"fire-core",[Rj]:"fire-core-compat",[kj]:"fire-analytics",[Ij]:"fire-analytics-compat",[Mj]:"fire-app-check",[Dj]:"fire-app-check-compat",[Oj]:"fire-auth",[Pj]:"fire-auth-compat",[Vj]:"fire-rtdb",[jj]:"fire-data-connect",[Lj]:"fire-rtdb-compat",[zj]:"fire-fn",[Uj]:"fire-fn-compat",[Fj]:"fire-iid",[Bj]:"fire-iid-compat",[qj]:"fire-fcm",[Hj]:"fire-fcm-compat",[$j]:"fire-perf",[Gj]:"fire-perf-compat",[Kj]:"fire-rc",[Yj]:"fire-rc-compat",[Qj]:"fire-gcs",[Xj]:"fire-gcs-compat",[Wj]:"fire-fst",[Jj]:"fire-fst-compat",[Zj]:"fire-vertex","fire-js":"fire-js",[e6]:"fire-js-all"};const Lf=new Map,i6=new Map,ly=new Map;function MT(t,e){try{t.container.addComponent(e)}catch(n){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hl(t){const e=t.name;if(ly.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;ly.set(e,t);for(const n of Lf.values())MT(n,t);for(const n of i6.values())MT(n,t);return!0}function _v(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _i(t){return t==null?!1:t.settings!==void 0}const r6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new hd("app","Firebase",r6);class s6{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const sc=t6;function M2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:oy,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(n||(n=C2()),!n)throw ya.create("no-options");const o=Lf.get(s);if(o){if(Ao(n,o.options)&&Ao(i,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const c=new dj(s);for(const h of ly.values())c.addComponent(h);const d=new s6(n,i,c);return Lf.set(s,d),d}function O2(t=oy){const e=Lf.get(t);if(!e&&t===oy&&C2())return M2();if(!e)throw ya.create("no-app",{appName:t});return e}function va(t,e,n){let i=n6[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(c.join(" "));return}Hl(new Co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const a6="firebase-heartbeat-database",o6=1,Yu="firebase-heartbeat-store";let f0=null;function P2(){return f0||(f0=Ej(a6,o6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ya.create("idb-open",{originalErrorMessage:t.message})})),f0}async function l6(t){try{const n=(await P2()).transaction(Yu),i=await n.objectStore(Yu).get(V2(t));return await n.done,i}catch(e){if(e instanceof ws)ms.warn(e.message);else{const n=ya.create("idb-get",{originalErrorMessage:e?.message});ms.warn(n.message)}}}async function OT(t,e){try{const i=(await P2()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,V2(t)),await i.done}catch(n){if(n instanceof ws)ms.warn(n.message);else{const i=ya.create("idb-set",{originalErrorMessage:n?.message});ms.warn(i.message)}}}function V2(t){return`${t.name}!${t.options.appId}`}const c6=1024,u6=30;class d6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f6(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=PT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>u6){const s=m6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ms.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PT(),{heartbeatsToSend:n,unsentEntries:i}=h6(this._heartbeatsCache.heartbeats),s=jf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ms.warn(e),""}}}function PT(){return new Date().toISOString().substring(0,10)}function h6(t,e=c6){const n=[];let i=t.slice();for(const s of t){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),VT(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),VT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class f6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JV()?ej().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return OT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return OT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function VT(t){return jf(JSON.stringify({version:2,heartbeats:t})).length}function m6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function p6(t){Hl(new Co("platform-logger",e=>new Cj(e),"PRIVATE")),Hl(new Co("heartbeat",e=>new d6(e),"PRIVATE")),va(ay,DT,t),va(ay,DT,"esm2020"),va("fire-js","")}p6("");function j2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g6=j2,L2=new hd("auth","Firebase",j2());const zf=new vv("@firebase/auth");function y6(t,...e){zf.logLevel<=Ge.WARN&&zf.warn(`Auth (${sc}): ${t}`,...e)}function vf(t,...e){zf.logLevel<=Ge.ERROR&&zf.error(`Auth (${sc}): ${t}`,...e)}function Fi(t,...e){throw wv(t,...e)}function _r(t,...e){return wv(t,...e)}function z2(t,e,n){const i={...g6(),[e]:n};return new hd("auth","Firebase",i).create(e,{appName:t.name})}function ls(t){return z2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return L2.create(t,...e)}function Ie(t,e,...n){if(!t)throw wv(e,...n)}function ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vf(e),new Error(e)}function ps(t,e){t||ss(e)}function cy(){return typeof self<"u"&&self.location?.href||""}function v6(){return jT()==="http:"||jT()==="https:"}function jT(){return typeof self<"u"&&self.location?.protocol||null}function b6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v6()||QV()||"connection"in navigator)?navigator.onLine:!0}function _6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class md{constructor(e,n){this.shortDelay=e,this.longDelay=n,ps(n>e,"Short delay should be less than long delay!"),this.isMobile=GV()||XV()}get(){return b6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xv(t,e){ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class U2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const w6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const x6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T6=new md(3e4,6e4);function xs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Dr(t,e,n,i,s={}){return F2(t,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const d=fd({key:t.config.apiKey,...c}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return YV()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&rc(t.emulatorConfig.host)&&(f.credentials="include"),U2.fetch()(await B2(t,t.config.apiHost,n,d),f)})}async function F2(t,e,n){t._canInitEmulator=!1;const i={...w6,...e};try{const s=new S6(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw tf(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw tf(t,"user-disabled",c);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw z2(t,g,f);Fi(t,g)}}catch(s){if(s instanceof ws)throw s;Fi(t,"network-request-failed",{message:String(s)})}}async function pd(t,e,n,i,s={}){const o=await Dr(t,e,n,i,s);return"mfaPendingCredential"in o&&Fi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function B2(t,e,n,i){const s=`${e}${n}?${i}`,o=t,c=o.config.emulator?xv(t.config,s):`${t.config.apiScheme}://${s}`;return x6.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function E6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),T6.get())})}}function tf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_r(t,e,i);return s.customData._tokenResponse=n,s}function LT(t){return t!==void 0&&t.enterprise!==void 0}class A6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C6(t,e){return Dr(t,"GET","/v2/recaptchaConfig",xs(t,e))}async function N6(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function Uf(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}function Mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R6(t,e=!1){const n=Ct(t),i=await n.getIdToken(e),s=Tv(i);Ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:Mu(m0(s.auth_time)),issuedAtTime:Mu(m0(s.iat)),expirationTime:Mu(m0(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function m0(t){return Number(t)*1e3}function Tv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=S2(n);return s?JSON.parse(s):(vf("Failed to decode base64 JWT payload"),null)}catch(s){return vf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function zT(t){const e=Tv(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ws&&I6(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function I6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class k6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class uy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ff(t){const e=t.auth,n=await t.getIdToken(),i=await $l(t,Uf(e,{idToken:n}));Ie(i?.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=s.providerUserInfo?.length?q2(s.providerUserInfo):[],c=M6(t.providerData,o),d=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!c?.length,f=d?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new uy(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function D6(t){const e=Ct(t);await Ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M6(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function q2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function O6(t,e){const n=await F2(t,{},async()=>{const i=fd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,c=await B2(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return t.emulatorConfig&&rc(t.emulatorConfig.host)&&(h.credentials="include"),U2.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function P6(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",xs(t,e))}class Ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=zT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await O6(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,c=new Ll;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Ie(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ll,this.toJSON())}_performRefresh(){return ss("not implemented")}}function na(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Li{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new k6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return R6(this,e)}reload(){return D6(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ff(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await $l(this,N6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:E,providerData:I,stsTokenManager:A}=n;Ie(b&&A,e,"internal-error");const C=Ll.fromJSON(this.name,A);Ie(typeof b=="string",e,"internal-error"),na(i,e.name),na(s,e.name),Ie(typeof _=="boolean",e,"internal-error"),Ie(typeof E=="boolean",e,"internal-error"),na(o,e.name),na(c,e.name),na(d,e.name),na(h,e.name),na(f,e.name),na(g,e.name);const O=new Li({uid:b,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:C,createdAt:f,lastLoginAt:g});return I&&Array.isArray(I)&&(O.providerData=I.map(z=>({...z}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(e,n,i=!1){const s=new Ll;s.updateFromServerResponse(n);const o=new Li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Ff(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?q2(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,d=new Ll;d.updateFromIdToken(i);const h=new Li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new uy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const UT=new Map;function as(t){ps(t instanceof Function,"Expected a class definition");let e=UT.get(t);return e?(ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UT.set(t,e),e)}class H2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H2.type="NONE";const FT=H2;function bf(t,e,n){return`firebase:${t}:${e}:${n}`}class zl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=bf(this.userKey,s.apiKey,o),this.fullPersistenceKey=bf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uf(this.auth,{idToken:e}).catch(()=>{});return n?Li._fromGetAccountInfoResponse(this.auth,n,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new zl(as(FT),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||as(FT);const c=bf(i,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(c);if(g){let b;if(typeof g=="string"){const _=await Uf(e,{idToken:g}).catch(()=>{});if(!_)break;b=await Li._fromGetAccountInfoResponse(e,_,g)}else b=Li._fromJSON(e,g);f!==o&&(d=b),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new zl(o,e,i):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new zl(o,e,i))}}function BT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X2(e))return"Blackberry";if(W2(e))return"Webos";if(G2(e))return"Safari";if((e.includes("chrome/")||K2(e))&&!e.includes("edge/"))return"Chrome";if(Q2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function $2(t=Rn()){return/firefox\//i.test(t)}function G2(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K2(t=Rn()){return/crios\//i.test(t)}function Y2(t=Rn()){return/iemobile/i.test(t)}function Q2(t=Rn()){return/android/i.test(t)}function X2(t=Rn()){return/blackberry/i.test(t)}function W2(t=Rn()){return/webos/i.test(t)}function Ev(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V6(t=Rn()){return Ev(t)&&!!window.navigator?.standalone}function j6(){return WV()&&document.documentMode===10}function Z2(t=Rn()){return Ev(t)||Q2(t)||W2(t)||X2(t)||/windows phone/i.test(t)||Y2(t)}function J2(t,e=[]){let n;switch(t){case"Browser":n=BT(Rn());break;case"Worker":n=`${BT(Rn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sc}/${i}`}class L6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function z6(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",xs(t,e))}const U6=6;class F6{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??U6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class B6{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qT(this),this.idTokenSubscription=new qT(this),this.beforeStateQueue=new L6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uf(this,{idToken:e}),i=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_i(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ff(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(ls(this));const n=e?Ct(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z6(this),n=new F6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await P6(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&y6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ka(t){return Ct(t)}class qT{constructor(e){this.auth=e,this.observer=null,this.addObserver=sj(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q6(t){bm=t}function eC(t){return bm.loadJS(t)}function H6(){return bm.recaptchaEnterpriseScript}function $6(){return bm.gapiScript}function G6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class K6{constructor(){this.enterprise=new Y6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Y6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q6="recaptcha-enterprise",tC="NO_RECAPTCHA";class X6{constructor(e){this.type=Q6,this.auth=ka(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{C6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new A6(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function s(o,c,d){const h=window.grecaptcha;LT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(tC)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new K6().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(d=>{if(!n&&LT(window.grecaptcha))s(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=H6();h.length!==0&&(h+=d),eC(h).then(()=>{s(d,o,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function HT(t,e,n,i=!1,s=!1){const o=new X6(t);let c;if(s)c=tC;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Bf(t,e,n,i,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await HT(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await HT(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(o)})}function W6(t,e){const n=_v(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Ao(o,e??{}))return s;Fi(s,"already-initialized")}return n.initialize({options:e})}function Z6(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(as);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function J6(t,e,n){const i=ka(t);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=nC(e),{host:c,port:d}=e9(e),h=d===null?"":`:${d}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Ao(f,i.config.emulator)&&Ao(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,rc(c)?(R2(`${o}//${c}${h}`),I2("Auth",!0)):t9()}function nC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e9(t){const e=nC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:$T(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:$T(c)}}}function $T(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Sv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,n){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}async function n9(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}async function i9(t,e){return pd(t,"POST","/v1/accounts:signInWithPassword",xs(t,e))}async function iC(t,e){return Dr(t,"POST","/v1/accounts:sendOobCode",xs(t,e))}async function r9(t,e){return iC(t,e)}async function s9(t,e){return iC(t,e)}async function a9(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}async function o9(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}class Qu extends Sv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Qu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Qu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,n,"signInWithPassword",i9);case"emailLink":return a9(e,{email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,i,"signUpPassword",n9);case"emailLink":return o9(e,{idToken:n,email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ul(t,e){return pd(t,"POST","/v1/accounts:signInWithIdp",xs(t,e))}const l9="http://localhost";class No extends Sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const c=new No(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ul(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ul(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ul(e,n)}buildRequest(){const e={requestUri:l9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fd(n)}return e}}function c9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u9(t){const e=_u(wu(t)).link,n=e?_u(wu(e)).deep_link_id:null,i=_u(wu(t)).deep_link_id;return(i?_u(wu(i)).link:null)||i||n||e||t}class Av{constructor(e){const n=_u(wu(e)),i=n.apiKey??null,s=n.oobCode??null,o=c9(n.mode??null);Ie(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=u9(e);try{return new Av(n)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return Qu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Av.parseLink(n);return Ie(i,"argument-error"),Qu._fromEmailAndCode(e,i.code,i.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gd extends rC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends gd{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";class ca extends gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ca.credential(n,i)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";class ua extends gd{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";class da extends gd{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return da.credential(n,i)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";async function d9(t,e){return pd(t,"POST","/v1/accounts:signUp",xs(t,e))}class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Li._fromIdTokenResponse(e,i,s),c=GT(i);return new Ro({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=GT(i);return new Ro({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function GT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class qf extends ws{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new qf(e,n,i,s)}}function sC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(t,o,e,i):o})}async function h9(t,e,n=!1){const i=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ro._forOperation(t,"link",i)}async function aC(t,e,n=!1){const{auth:i}=t;if(_i(i.app))return Promise.reject(ls(i));const s="reauthenticate";try{const o=await $l(t,sC(i,s,e,t),n);Ie(o.idToken,i,"internal-error");const c=Tv(o.idToken);Ie(c,i,"internal-error");const{sub:d}=c;return Ie(t.uid===d,i,"user-mismatch"),Ro._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fi(i,"user-mismatch"),o}}async function oC(t,e,n=!1){if(_i(t.app))return Promise.reject(ls(t));const i="signIn",s=await sC(t,i,e),o=await Ro._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function f9(t,e){return oC(ka(t),e)}async function m9(t,e){return aC(Ct(t),e)}async function lC(t){const e=ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p9(t,e,n){const i=ka(t);await Bf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",s9)}async function g9(t,e,n){if(_i(t.app))return Promise.reject(ls(t));const i=ka(t),c=await Bf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d9).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&lC(t),h}),d=await Ro._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function y9(t,e,n){return _i(t.app)?Promise.reject(ls(t)):f9(Ct(t),Oo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lC(t),i})}async function KT(t,e){const n=Ct(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await r9(n.auth,s);o!==t.email&&await t.reload()}async function v9(t,e){return Dr(t,"POST","/v1/accounts:update",e)}async function b9(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ct(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await $l(i,v9(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function _9(t,e,n,i){return Ct(t).onIdTokenChanged(e,n,i)}function w9(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function x9(t,e,n,i){return Ct(t).onAuthStateChanged(e,n,i)}function YT(t){return Ct(t).signOut()}async function T9(t){return Ct(t).delete()}const Hf="__sak";class cC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hf,"1"),this.storage.removeItem(Hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const E9=1e3,S9=10;class uC extends cC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);j6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,S9):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},E9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uC.type="LOCAL";const A9=uC;class dC extends cC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dC.type="SESSION";const hC=dC;function C9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new _m(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async f=>f(n.origin,o)),h=await C9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];function Cv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class N9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const f=Cv("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(b){const _=b;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function wr(){return window}function R9(t){wr().location.href=t}function fC(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function I9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k9(){return navigator?.serviceWorker?.controller||null}function D9(){return fC()?self:null}const mC="firebaseLocalStorageDb",M9=1,$f="firebaseLocalStorage",pC="fbase_key";class yd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wm(t,e){return t.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function O9(){const t=indexedDB.deleteDatabase(mC);return new yd(t).toPromise()}function dy(){const t=indexedDB.open(mC,M9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore($f,{keyPath:pC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains($f)?e(i):(i.close(),await O9(),e(await dy()))})})}async function QT(t,e,n){const i=wm(t,!0).put({[pC]:e,value:n});return new yd(i).toPromise()}async function P9(t,e){const n=wm(t,!1).get(e),i=await new yd(n).toPromise();return i===void 0?null:i.value}function XT(t,e){const n=wm(t,!0).delete(e);return new yd(n).toPromise()}const V9=800,j9=3;class gC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>j9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(D9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await I9(),!this.activeServiceWorker)return;this.sender=new N9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dy();return await QT(e,Hf,"1"),await XT(e,Hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>QT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>P9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=wm(s,!1).getAll();return new yd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gC.type="LOCAL";const L9=gC;new md(3e4,6e4);function z9(t,e){return e?as(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Nv extends Sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ul(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ul(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U9(t){return oC(t.auth,new Nv(t),t.bypassAuthState)}function F9(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),aC(n,new Nv(t),t.bypassAuthState)}async function B9(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),h9(n,new Nv(t),t.bypassAuthState)}class yC{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U9;case"linkViaPopup":case"linkViaRedirect":return B9;case"reauthViaPopup":case"reauthViaRedirect":return F9;default:Fi(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const q9=new md(2e3,1e4);class Vl extends yC{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Vl.currentPopupAction&&Vl.currentPopupAction.cancel(),Vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=Cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q9.get())};e()}}Vl.currentPopupAction=null;const H9="pendingRedirect",_f=new Map;class $9 extends yC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_f.get(this.auth._key());if(!e){try{const i=await G9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_f.set(this.auth._key(),e)}return this.bypassAuthState||_f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G9(t,e){const n=Q9(e),i=Y9(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function K9(t,e){_f.set(t._key(),e)}function Y9(t){return as(t._redirectPersistence)}function Q9(t){return bf(H9,t.config.apiKey,t.name)}async function X9(t,e,n=!1){if(_i(t.app))return Promise.reject(ls(t));const i=ka(t),s=z9(i,e),c=await new $9(i,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const W9=600*1e3;class Z9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!vC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W9&&this.cachedEventUids.clear(),this.cachedEventUids.has(WT(e))}saveEventToCache(e){this.cachedEventUids.add(WT(e)),this.lastProcessedEventTime=Date.now()}}function WT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function J9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(t);default:return!1}}async function eL(t,e={}){return Dr(t,"GET","/v1/projects",e)}const tL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nL=/^https?/;async function iL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eL(t);for(const n of e)try{if(rL(n))return}catch{}Fi(t,"unauthorized-domain")}function rL(t){const e=cy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!nL.test(n))return!1;if(tL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const sL=new md(3e4,6e4);function ZT(){const t=wr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aL(t){return new Promise((e,n)=>{function i(){ZT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZT(),n(_r(t,"network-request-failed"))},timeout:sL.get()})}if(wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wr().gapi?.load)i();else{const s=G6("iframefcb");return wr()[s]=()=>{gapi.load?i():n(_r(t,"network-request-failed"))},eC(`${$6()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw wf=null,e})}let wf=null;function oL(t){return wf=wf||aL(t),wf}const lL=new md(5e3,15e3),cL="__/auth/iframe",uL="emulator/auth/iframe",dL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fL(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xv(e,uL):`https://${t.config.authDomain}/${cL}`,i={apiKey:e.apiKey,appName:t.name,v:sc},s=hL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${fd(i).slice(1)}`}async function mL(t){const e=await oL(t),n=wr().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:fL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=_r(t,"network-request-failed"),d=wr().setTimeout(()=>{o(c)},lL.get());function h(){wr().clearTimeout(d),s(i)}i.ping(h).then(h,()=>{o(c)})}))}const pL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gL=500,yL=600,vL="_blank",bL="http://localhost";class JT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _L(t,e,n,i=gL,s=yL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h={...pL,width:i.toString(),height:s.toString(),top:o,left:c},f=Rn().toLowerCase();n&&(d=K2(f)?vL:n),$2(f)&&(e=e||bL,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[E,I])=>`${_}${E}=${I},`,"");if(V6(f)&&d!=="_self")return wL(e||"",d),new JT(null);const b=window.open(e||"",d,g);Ie(b,t,"popup-blocked");try{b.focus()}catch{}return new JT(b)}function wL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const xL="__/auth/handler",TL="emulator/auth/handler",EL=encodeURIComponent("fac");async function eE(t,e,n,i,s,o){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:sc,eventId:s};if(e instanceof rC){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",rj(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))c[g]=b}if(e instanceof gd){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await t._getAppCheckToken(),f=h?`#${EL}=${encodeURIComponent(h)}`:"";return`${SL(t)}?${fd(d).slice(1)}${f}`}function SL({config:t}){return t.emulator?xv(t,TL):`https://${t.authDomain}/${xL}`}const p0="webStorageSupport";class AL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hC,this._completeRedirectFn=X9,this._overrideRedirectResult=K9}async _openPopup(e,n,i,s){ps(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await eE(e,n,i,cy(),s);return _L(e,o,Cv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await eE(e,n,i,cy(),s);return R9(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ps(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mL(e),i=new Z9(e);return n.register("authEvent",s=>(Ie(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(p0,{type:p0},s=>{const o=s?.[0]?.[p0];o!==void 0&&n(!!o),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z2()||G2()||Ev()}}const CL=AL;var tE="@firebase/auth",nE="1.11.1";class NL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function RL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IL(t){Hl(new Co("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J2(t)},f=new B6(i,s,o,h);return Z6(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Hl(new Co("auth-internal",e=>{const n=ka(e.getProvider("auth").getImmediate());return(i=>new NL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),va(tE,nE,RL(t)),va(tE,nE,"esm2020")}const kL=300,DL=N2("authIdTokenMaxAge")||kL;let iE=null;const ML=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>DL)return;const s=n?.token;iE!==s&&(iE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function OL(t=O2()){const e=_v(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W6(t,{popupRedirectResolver:CL,persistence:[L9,A9,hC]}),i=N2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=ML(o.toString());w9(n,c,()=>c(n.currentUser)),_9(n,d=>c(d))}}const s=A2("auth");return s&&J6(n,`http://${s}`),n}function PL(){return document.getElementsByTagName("head")?.[0]??document}q6({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=_r("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",PL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IL("Browser");var VL="firebase",jL="12.6.0";va(VL,jL,"app");var rE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ba,bC;(function(){var t;function e(S,R){function M(){}M.prototype=R.prototype,S.F=R.prototype,S.prototype=new M,S.prototype.constructor=S,S.D=function(U,P,B){for(var j=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)j[pe-2]=arguments[pe];return R.prototype[P].apply(U,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,R,M){M||(M=0);const U=Array(16);if(typeof R=="string")for(var P=0;P<16;++P)U[P]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(P=0;P<16;++P)U[P]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=S.g[0],M=S.g[1],P=S.g[2];let B=S.g[3],j;j=R+(B^M&(P^B))+U[0]+3614090360&4294967295,R=M+(j<<7&4294967295|j>>>25),j=B+(P^R&(M^P))+U[1]+3905402710&4294967295,B=R+(j<<12&4294967295|j>>>20),j=P+(M^B&(R^M))+U[2]+606105819&4294967295,P=B+(j<<17&4294967295|j>>>15),j=M+(R^P&(B^R))+U[3]+3250441966&4294967295,M=P+(j<<22&4294967295|j>>>10),j=R+(B^M&(P^B))+U[4]+4118548399&4294967295,R=M+(j<<7&4294967295|j>>>25),j=B+(P^R&(M^P))+U[5]+1200080426&4294967295,B=R+(j<<12&4294967295|j>>>20),j=P+(M^B&(R^M))+U[6]+2821735955&4294967295,P=B+(j<<17&4294967295|j>>>15),j=M+(R^P&(B^R))+U[7]+4249261313&4294967295,M=P+(j<<22&4294967295|j>>>10),j=R+(B^M&(P^B))+U[8]+1770035416&4294967295,R=M+(j<<7&4294967295|j>>>25),j=B+(P^R&(M^P))+U[9]+2336552879&4294967295,B=R+(j<<12&4294967295|j>>>20),j=P+(M^B&(R^M))+U[10]+4294925233&4294967295,P=B+(j<<17&4294967295|j>>>15),j=M+(R^P&(B^R))+U[11]+2304563134&4294967295,M=P+(j<<22&4294967295|j>>>10),j=R+(B^M&(P^B))+U[12]+1804603682&4294967295,R=M+(j<<7&4294967295|j>>>25),j=B+(P^R&(M^P))+U[13]+4254626195&4294967295,B=R+(j<<12&4294967295|j>>>20),j=P+(M^B&(R^M))+U[14]+2792965006&4294967295,P=B+(j<<17&4294967295|j>>>15),j=M+(R^P&(B^R))+U[15]+1236535329&4294967295,M=P+(j<<22&4294967295|j>>>10),j=R+(P^B&(M^P))+U[1]+4129170786&4294967295,R=M+(j<<5&4294967295|j>>>27),j=B+(M^P&(R^M))+U[6]+3225465664&4294967295,B=R+(j<<9&4294967295|j>>>23),j=P+(R^M&(B^R))+U[11]+643717713&4294967295,P=B+(j<<14&4294967295|j>>>18),j=M+(B^R&(P^B))+U[0]+3921069994&4294967295,M=P+(j<<20&4294967295|j>>>12),j=R+(P^B&(M^P))+U[5]+3593408605&4294967295,R=M+(j<<5&4294967295|j>>>27),j=B+(M^P&(R^M))+U[10]+38016083&4294967295,B=R+(j<<9&4294967295|j>>>23),j=P+(R^M&(B^R))+U[15]+3634488961&4294967295,P=B+(j<<14&4294967295|j>>>18),j=M+(B^R&(P^B))+U[4]+3889429448&4294967295,M=P+(j<<20&4294967295|j>>>12),j=R+(P^B&(M^P))+U[9]+568446438&4294967295,R=M+(j<<5&4294967295|j>>>27),j=B+(M^P&(R^M))+U[14]+3275163606&4294967295,B=R+(j<<9&4294967295|j>>>23),j=P+(R^M&(B^R))+U[3]+4107603335&4294967295,P=B+(j<<14&4294967295|j>>>18),j=M+(B^R&(P^B))+U[8]+1163531501&4294967295,M=P+(j<<20&4294967295|j>>>12),j=R+(P^B&(M^P))+U[13]+2850285829&4294967295,R=M+(j<<5&4294967295|j>>>27),j=B+(M^P&(R^M))+U[2]+4243563512&4294967295,B=R+(j<<9&4294967295|j>>>23),j=P+(R^M&(B^R))+U[7]+1735328473&4294967295,P=B+(j<<14&4294967295|j>>>18),j=M+(B^R&(P^B))+U[12]+2368359562&4294967295,M=P+(j<<20&4294967295|j>>>12),j=R+(M^P^B)+U[5]+4294588738&4294967295,R=M+(j<<4&4294967295|j>>>28),j=B+(R^M^P)+U[8]+2272392833&4294967295,B=R+(j<<11&4294967295|j>>>21),j=P+(B^R^M)+U[11]+1839030562&4294967295,P=B+(j<<16&4294967295|j>>>16),j=M+(P^B^R)+U[14]+4259657740&4294967295,M=P+(j<<23&4294967295|j>>>9),j=R+(M^P^B)+U[1]+2763975236&4294967295,R=M+(j<<4&4294967295|j>>>28),j=B+(R^M^P)+U[4]+1272893353&4294967295,B=R+(j<<11&4294967295|j>>>21),j=P+(B^R^M)+U[7]+4139469664&4294967295,P=B+(j<<16&4294967295|j>>>16),j=M+(P^B^R)+U[10]+3200236656&4294967295,M=P+(j<<23&4294967295|j>>>9),j=R+(M^P^B)+U[13]+681279174&4294967295,R=M+(j<<4&4294967295|j>>>28),j=B+(R^M^P)+U[0]+3936430074&4294967295,B=R+(j<<11&4294967295|j>>>21),j=P+(B^R^M)+U[3]+3572445317&4294967295,P=B+(j<<16&4294967295|j>>>16),j=M+(P^B^R)+U[6]+76029189&4294967295,M=P+(j<<23&4294967295|j>>>9),j=R+(M^P^B)+U[9]+3654602809&4294967295,R=M+(j<<4&4294967295|j>>>28),j=B+(R^M^P)+U[12]+3873151461&4294967295,B=R+(j<<11&4294967295|j>>>21),j=P+(B^R^M)+U[15]+530742520&4294967295,P=B+(j<<16&4294967295|j>>>16),j=M+(P^B^R)+U[2]+3299628645&4294967295,M=P+(j<<23&4294967295|j>>>9),j=R+(P^(M|~B))+U[0]+4096336452&4294967295,R=M+(j<<6&4294967295|j>>>26),j=B+(M^(R|~P))+U[7]+1126891415&4294967295,B=R+(j<<10&4294967295|j>>>22),j=P+(R^(B|~M))+U[14]+2878612391&4294967295,P=B+(j<<15&4294967295|j>>>17),j=M+(B^(P|~R))+U[5]+4237533241&4294967295,M=P+(j<<21&4294967295|j>>>11),j=R+(P^(M|~B))+U[12]+1700485571&4294967295,R=M+(j<<6&4294967295|j>>>26),j=B+(M^(R|~P))+U[3]+2399980690&4294967295,B=R+(j<<10&4294967295|j>>>22),j=P+(R^(B|~M))+U[10]+4293915773&4294967295,P=B+(j<<15&4294967295|j>>>17),j=M+(B^(P|~R))+U[1]+2240044497&4294967295,M=P+(j<<21&4294967295|j>>>11),j=R+(P^(M|~B))+U[8]+1873313359&4294967295,R=M+(j<<6&4294967295|j>>>26),j=B+(M^(R|~P))+U[15]+4264355552&4294967295,B=R+(j<<10&4294967295|j>>>22),j=P+(R^(B|~M))+U[6]+2734768916&4294967295,P=B+(j<<15&4294967295|j>>>17),j=M+(B^(P|~R))+U[13]+1309151649&4294967295,M=P+(j<<21&4294967295|j>>>11),j=R+(P^(M|~B))+U[4]+4149444226&4294967295,R=M+(j<<6&4294967295|j>>>26),j=B+(M^(R|~P))+U[11]+3174756917&4294967295,B=R+(j<<10&4294967295|j>>>22),j=P+(R^(B|~M))+U[2]+718787259&4294967295,P=B+(j<<15&4294967295|j>>>17),j=M+(B^(P|~R))+U[9]+3951481745&4294967295,S.g[0]=S.g[0]+R&4294967295,S.g[1]=S.g[1]+(P+(j<<21&4294967295|j>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+B&4294967295}i.prototype.v=function(S,R){R===void 0&&(R=S.length);const M=R-this.blockSize,U=this.C;let P=this.h,B=0;for(;B<R;){if(P==0)for(;B<=M;)s(this,S,B),B+=this.blockSize;if(typeof S=="string"){for(;B<R;)if(U[P++]=S.charCodeAt(B++),P==this.blockSize){s(this,U),P=0;break}}else for(;B<R;)if(U[P++]=S[B++],P==this.blockSize){s(this,U),P=0;break}}this.h=P,this.o+=R},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var R=1;R<S.length-8;++R)S[R]=0;R=this.o*8;for(var M=S.length-8;M<S.length;++M)S[M]=R&255,R/=256;for(this.v(S),S=Array(16),R=0,M=0;M<4;++M)for(let U=0;U<32;U+=8)S[R++]=this.g[M]>>>U&255;return S};function o(S,R){var M=d;return Object.prototype.hasOwnProperty.call(M,S)?M[S]:M[S]=R(S)}function c(S,R){this.h=R;const M=[];let U=!0;for(let P=S.length-1;P>=0;P--){const B=S[P]|0;U&&B==R||(M[P]=B,U=!1)}this.g=M}var d={};function h(S){return-128<=S&&S<128?o(S,function(R){return new c([R|0],R<0?-1:0)}):new c([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return b;if(S<0)return C(f(-S));const R=[];let M=1;for(let U=0;S>=M;U++)R[U]=S/M|0,M*=4294967296;return new c(R,0)}function g(S,R){if(S.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(S.charAt(0)=="-")return C(g(S.substring(1),R));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(R,8));let U=b;for(let B=0;B<S.length;B+=8){var P=Math.min(8,S.length-B);const j=parseInt(S.substring(B,B+P),R);P<8?(P=f(Math.pow(R,P)),U=U.j(P).add(f(j))):(U=U.j(M),U=U.add(f(j)))}return U}var b=h(0),_=h(1),E=h(16777216);t=c.prototype,t.m=function(){if(A(this))return-C(this).m();let S=0,R=1;for(let M=0;M<this.g.length;M++){const U=this.i(M);S+=(U>=0?U:4294967296+U)*R,R*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(A(this))return"-"+C(this).toString(S);const R=f(Math.pow(S,6));var M=this;let U="";for(;;){const P=$(M,R).g;M=O(M,P.j(R));let B=((M.g.length>0?M.g[0]:M.h)>>>0).toString(S);if(M=P,I(M))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(let R=0;R<S.g.length;R++)if(S.g[R]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=O(this,S),A(S)?-1:I(S)?0:1};function C(S){const R=S.g.length,M=[];for(let U=0;U<R;U++)M[U]=~S.g[U];return new c(M,~S.h).add(_)}t.abs=function(){return A(this)?C(this):this},t.add=function(S){const R=Math.max(this.g.length,S.g.length),M=[];let U=0;for(let P=0;P<=R;P++){let B=U+(this.i(P)&65535)+(S.i(P)&65535),j=(B>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);U=j>>>16,B&=65535,j&=65535,M[P]=j<<16|B}return new c(M,M[M.length-1]&-2147483648?-1:0)};function O(S,R){return S.add(C(R))}t.j=function(S){if(I(this)||I(S))return b;if(A(this))return A(S)?C(this).j(C(S)):C(C(this).j(S));if(A(S))return C(this.j(C(S)));if(this.l(E)<0&&S.l(E)<0)return f(this.m()*S.m());const R=this.g.length+S.g.length,M=[];for(var U=0;U<2*R;U++)M[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<S.g.length;P++){const B=this.i(U)>>>16,j=this.i(U)&65535,pe=S.i(P)>>>16,ce=S.i(P)&65535;M[2*U+2*P]+=j*ce,z(M,2*U+2*P),M[2*U+2*P+1]+=B*ce,z(M,2*U+2*P+1),M[2*U+2*P+1]+=j*pe,z(M,2*U+2*P+1),M[2*U+2*P+2]+=B*pe,z(M,2*U+2*P+2)}for(S=0;S<R;S++)M[S]=M[2*S+1]<<16|M[2*S];for(S=R;S<2*R;S++)M[S]=0;return new c(M,0)};function z(S,R){for(;(S[R]&65535)!=S[R];)S[R+1]+=S[R]>>>16,S[R]&=65535,R++}function L(S,R){this.g=S,this.h=R}function $(S,R){if(I(R))throw Error("division by zero");if(I(S))return new L(b,b);if(A(S))return R=$(C(S),R),new L(C(R.g),C(R.h));if(A(R))return R=$(S,C(R)),new L(C(R.g),R.h);if(S.g.length>30){if(A(S)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var M=_,U=R;U.l(S)<=0;)M=ne(M),U=ne(U);var P=te(M,1),B=te(U,1);for(U=te(U,2),M=te(M,2);!I(U);){var j=B.add(U);j.l(S)<=0&&(P=P.add(M),B=j),U=te(U,1),M=te(M,1)}return R=O(S,P.j(R)),new L(P,R)}for(P=b;S.l(R)>=0;){for(M=Math.max(1,Math.floor(S.m()/R.m())),U=Math.ceil(Math.log(M)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=f(M),j=B.j(R);A(j)||j.l(S)>0;)M-=U,B=f(M),j=B.j(R);I(B)&&(B=_),P=P.add(B),S=O(S,j)}return new L(P,S)}t.B=function(S){return $(this,S).h},t.and=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let U=0;U<R;U++)M[U]=this.i(U)&S.i(U);return new c(M,this.h&S.h)},t.or=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let U=0;U<R;U++)M[U]=this.i(U)|S.i(U);return new c(M,this.h|S.h)},t.xor=function(S){const R=Math.max(this.g.length,S.g.length),M=[];for(let U=0;U<R;U++)M[U]=this.i(U)^S.i(U);return new c(M,this.h^S.h)};function ne(S){const R=S.g.length+1,M=[];for(let U=0;U<R;U++)M[U]=S.i(U)<<1|S.i(U-1)>>>31;return new c(M,S.h)}function te(S,R){const M=R>>5;R%=32;const U=S.g.length-M,P=[];for(let B=0;B<U;B++)P[B]=R>0?S.i(B+M)>>>R|S.i(B+M+1)<<32-R:S.i(B+M);return new c(P,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,bC=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ba=c}).apply(typeof rE<"u"?rE:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _C,xu,wC,xf,hy,xC,TC,EC;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var w=0;w<m.length;++w){var T=m[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function s(m,w){if(w)e:{var T=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var K=m[k];if(!(K in T))break e;T=T[K]}m=m[m.length-1],k=T[m],w=w(k),w!=k&&w!=null&&e(T,m,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(w){var T=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&T.push([k,w[k]]);return T}});var o=o||{},c=this||self;function d(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function h(m,w,T){return m.call.apply(m.bind,arguments)}function f(m,w,T){return f=h,f.apply(null,arguments)}function g(m,w){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function b(m,w){function T(){}T.prototype=w.prototype,m.Z=w.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(k,K,Z){for(var me=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)me[Le-2]=arguments[Le];return w.prototype[K].apply(k,me)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function E(m){const w=m.length;if(w>0){const T=Array(w);for(let k=0;k<w;k++)T[k]=m[k];return T}return[]}function I(m,w){for(let k=1;k<arguments.length;k++){const K=arguments[k];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=m.length||0;const Z=K.length||0;m.length=T+Z;for(let me=0;me<Z;me++)m[T+me]=K[me]}else m.push(K)}}class A{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function C(m){c.setTimeout(()=>{throw m},0)}function O(){var m=S;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class z{constructor(){this.h=this.g=null}add(w,T){const k=L.get();k.set(w,T),this.h?this.h.next=k:this.g=k,this.h=k}}var L=new A(()=>new $,m=>m.reset());class ${constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,te=!1,S=new z,R=()=>{const m=Promise.resolve(void 0);ne=()=>{m.then(M)}};function M(){for(var m;m=O();){try{m.h.call(m.g)}catch(T){C(T)}var w=L;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}te=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};c.addEventListener("test",T,w),c.removeEventListener("test",T,w)}catch{}return m})();function j(m){return/^[\s\xa0]*$/.test(m)}function pe(m,w){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}b(pe,P),pe.prototype.init=function(m,w){const T=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(T=="mouseover"?w=m.fromElement:T=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),H=0;function W(m,w,T,k,K){this.listener=m,this.proxy=null,this.src=w,this.type=T,this.capture=!!k,this.ha=K,this.key=++H,this.da=this.fa=!1}function fe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function _e(m,w,T){for(const k in m)w.call(T,m[k],k,m)}function se(m,w){for(const T in m)w.call(void 0,m[T],T,m)}function V(m){const w={};for(const T in m)w[T]=m[T];return w}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,w){let T,k;for(let K=1;K<arguments.length;K++){k=arguments[K];for(T in k)m[T]=k[T];for(let Z=0;Z<J.length;Z++)T=J[Z],Object.prototype.hasOwnProperty.call(k,T)&&(m[T]=k[T])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,w,T,k,K){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const me=Ee(m,w,k,K);return me>-1?(w=m[me],T||(w.fa=!1)):(w=new W(w,this.src,Z,!!k,K),w.fa=T,m.push(w)),w};function ge(m,w){const T=w.type;if(T in m.g){var k=m.g[T],K=Array.prototype.indexOf.call(k,w,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(k,K,1),Z&&(fe(w),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Ee(m,w,T,k){for(let K=0;K<m.length;++K){const Z=m[K];if(!Z.da&&Z.listener==w&&Z.capture==!!T&&Z.ha==k)return K}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),rt={};function Fe(m,w,T,k,K){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)Fe(m,w[Z],T,k,K);return null}return T=Pa(T),m&&m[ce]?m.J(w,T,d(k)?!!k.capture:!1,K):rn(m,w,T,!1,k,K)}function rn(m,w,T,k,K,Z){if(!w)throw Error("Invalid event type");const me=d(K)?!!K.capture:!!K;let Le=Hi(m);if(Le||(m[Te]=Le=new he(m)),T=Le.add(w,T,k,me,Z),T.proxy)return T;if(k=xn(),T.proxy=k,k.src=m,k.listener=T,m.addEventListener)B||(K=me),K===void 0&&(K=!1),m.addEventListener(w.toString(),k,K);else if(m.attachEvent)m.attachEvent(Kn(w.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function xn(){function m(T){return w.call(m.src,m.listener,T)}const w=qi;return m}function Es(m,w,T,k,K){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)Es(m,w[Z],T,k,K);else k=d(k)?!!k.capture:!!k,T=Pa(T),m&&m[ce]?(m=m.i,Z=String(w).toString(),Z in m.g&&(w=m.g[Z],T=Ee(w,T,k,K),T>-1&&(fe(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Hi(m))&&(w=m.g[w.toString()],m=-1,w&&(m=Ee(w,T,k,K)),(T=m>-1?w[m]:null)&&Mr(T))}function Mr(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[ce])ge(w.i,m);else{var T=m.type,k=m.proxy;w.removeEventListener?w.removeEventListener(T,k,m.capture):w.detachEvent?w.detachEvent(Kn(T),k):w.addListener&&w.removeListener&&w.removeListener(k),(T=Hi(w))?(ge(T,m),T.h==0&&(T.src=null,w[Te]=null)):fe(m)}}}function Kn(m){return m in rt?rt[m]:rt[m]="on"+m}function qi(m,w){if(m.da)m=!0;else{w=new pe(w,this);const T=m.listener,k=m.ha||m.src;m.fa&&Mr(m),m=T.call(k,w)}return m}function Hi(m){return m=m[Te],m instanceof he?m:null}var Oa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pa(m){return typeof m=="function"?m:(m[Oa]||(m[Oa]=function(w){return m.handleEvent(w)}),m[Oa])}function Rt(){U.call(this),this.i=new he(this),this.M=this,this.G=null}b(Rt,U),Rt.prototype[ce]=!0,Rt.prototype.removeEventListener=function(m,w,T,k){Es(this,m,w,T,k)};function It(m,w){var T,k=m.G;if(k)for(T=[];k;k=k.G)T.push(k);if(m=m.M,k=w.type||w,typeof w=="string")w=new P(w,m);else if(w instanceof P)w.target=w.target||m;else{var K=w;w=new P(k,m),ie(w,K)}K=!0;let Z,me;if(T)for(me=T.length-1;me>=0;me--)Z=w.g=T[me],K=$i(Z,k,!0,w)&&K;if(Z=w.g=m,K=$i(Z,k,!0,w)&&K,K=$i(Z,k,!1,w)&&K,T)for(me=0;me<T.length;me++)Z=w.g=T[me],K=$i(Z,k,!1,w)&&K}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const T=m.g[w];for(let k=0;k<T.length;k++)fe(T[k]);delete m.g[w],m.h--}}this.G=null},Rt.prototype.J=function(m,w,T,k){return this.i.add(String(m),w,!1,T,k)},Rt.prototype.K=function(m,w,T,k){return this.i.add(String(m),w,!0,T,k)};function $i(m,w,T,k){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let K=!0;for(let Z=0;Z<w.length;++Z){const me=w[Z];if(me&&!me.da&&me.capture==T){const Le=me.listener,Vt=me.ha||me.src;me.fa&&ge(m.i,me),K=Le.call(Vt,k)!==!1&&K}}return K&&!k.defaultPrevented}function hc(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(m,w||0)}function jo(m){m.g=hc(()=>{m.g=null,m.i&&(m.i=!1,jo(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class un extends U{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:jo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(m){U.call(this),this.h=m,this.g={}}b(Or,U);var Va=[];function ja(m){_e(m.g,function(w,T){this.g.hasOwnProperty(T)&&Mr(w)},m),m.g={}}Or.prototype.N=function(){Or.Z.N.call(this),ja(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gi=c.JSON.stringify,fc=c.JSON.parse,Lo=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function we(){}function Ze(){}var yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mt(){P.call(this,"d")}b(mt,P);function sn(){P.call(this,"c")}b(sn,P);var bt={},mc=null;function Pr(){return mc=mc||new Rt}bt.Ia="serverreachability";function st(m){P.call(this,bt.Ia,m)}b(st,P);function Mn(m){const w=Pr();It(w,new st(w))}bt.STAT_EVENT="statevent";function La(m,w){P.call(this,bt.STAT_EVENT,m),this.stat=w}b(La,P);function Ft(m){const w=Pr();It(w,new La(w,m))}bt.Ja="timingevent";function Ki(m,w){P.call(this,bt.Ja,m),this.size=w}b(Ki,P);function Yi(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},w)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function Hm(m,w,T,k,K,Z){m.info(function(){if(m.g)if(Z){var me="",Le=Z.split("&");for(let tt=0;tt<Le.length;tt++){var Vt=Le[tt].split("=");if(Vt.length>1){const Tt=Vt[0];Vt=Vt[1];const ci=Tt.split("_");me=ci.length>=2&&ci[1]=="type"?me+(Tt+"="+Vt+"&"):me+(Tt+"=redacted&")}}}else me=null;else me=Z;return"XMLHTTP REQ ("+k+") [attempt "+K+"]: "+w+`
`+T+`
`+me})}function Sd(m,w,T,k,K,Z,me){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+K+"]: "+w+`
`+T+`
`+Z+" "+me})}function Qi(m,w,T,k){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+$m(m,T)+(k?" "+k:"")})}function za(m,w){m.info(function(){return"TIMEOUT: "+w})}Ai.prototype.info=function(){};function $m(m,w){if(!m.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var T=Z[m];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var K=k[0];if(K!="noop"&&K!="stop"&&K!="close")for(let me=1;me<k.length;me++)k[me]=""}}}}return Gi(Z)}catch{return w}}var Ua={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gc;function Fa(){}b(Fa,we),Fa.prototype.g=function(){return new XMLHttpRequest},gc=new Fa;function Vr(m){return encodeURIComponent(String(m))}function Ad(m){var w=1;m=m.split(":");const T=[];for(;w>0&&m.length;)T.push(m.shift()),w--;return m.length&&T.push(m.join(":")),T}function Ci(m,w,T,k){this.j=m,this.i=w,this.l=T,this.S=k||1,this.V=new Or(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}var Bt={},an={};function Xi(m,w,T){m.M=1,m.A=Ba(Ht(w)),m.u=T,m.R=!0,zo(m,null)}function zo(m,w){m.F=Date.now(),Wi(m),m.B=Ht(m.A);var T=m.B,k=m.S;Array.isArray(k)||(k=[String(k)]),qo(T.i,"t",k),m.C=0,T=m.j.L,m.h=new Ni,m.g=Fd(m.j,T?w:null,!m.u),m.P>0&&(m.O=new un(f(m.Y,m,m.g),m.P)),w=m.V,T=m.g,k=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(Va[0]=K.toString()),K=Va);for(let Z=0;Z<K.length;Z++){const me=Fe(T,K[Z],k||w.handleEvent,!1,w.h||w);if(!me)break;w.g[me.key]=me}w=m.J?V(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),Mn(),Hm(m.i,m.v,m.B,m.l,m.S,m.u)}Ci.prototype.ba=function(m){m=m.target;const w=this.O;w&&ki(m)==3?w.j():this.Y(m)},Ci.prototype.Y=function(m){try{if(m==this.g)e:{const Le=ki(this.g),Vt=this.g.ya(),tt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Le!=4||Vt==7||(Vt==8||tt<=0?Mn(3):Mn(2)),Zi(this);var w=this.g.ca();this.X=w;var T=Gm(this);if(this.o=w==200,Sd(this.i,this.v,this.B,this.l,this.S,Le,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,K=this.g;if((k=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(k)){var Z=k;break t}}Z=null}if(m=Z)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ji(this,m);else{this.o=!1,this.m=3,Ft(12),Yn(this),ai(this);break e}}if(this.R){m=!0;let Tt;for(;!this.K&&this.C<T.length;)if(Tt=Nd(this,T),Tt==an){Le==4&&(this.m=4,Ft(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Bt){this.m=4,Ft(15),Qi(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,Tt,null),Ji(this,Tt);if(Cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||T.length!=0||this.h.h||(this.m=1,Ft(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,T,"[Invalid Chunked Response]"),Yn(this),ai(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),kc(me),me.P=!0,Ft(11))}}else Qi(this.i,this.l,T,null),Ji(this,T);Le==4&&Yn(this),this.o&&!this.K&&(Le==4?jd(this.j,this):(this.o=!1,Wi(this)))}else Lr(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Yn(this),ai(this)}}}catch{}finally{}};function Gm(m){if(!Cd(m))return m.g.la();const w=dn(m.g);if(w==="")return"";let T="";const k=w.length,K=ki(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Yn(m),ai(m),"";m.h.i=new c.TextDecoder}for(let Z=0;Z<k;Z++)m.h.h=!0,T+=m.h.i.decode(w[Z],{stream:!(K&&Z==k-1)});return w.length=0,m.h.g+=T,m.C=0,m.h.g}function Cd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Nd(m,w){var T=m.C,k=w.indexOf(`
`,T);return k==-1?an:(T=Number(w.substring(T,k)),isNaN(T)?Bt:(k+=1,k+T>w.length?an:(w=w.slice(k,k+T),m.C=k+T,w)))}Ci.prototype.cancel=function(){this.K=!0,Yn(this)};function Wi(m){m.T=Date.now()+m.H,Uo(m,m.H)}function Uo(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Yi(f(m.aa,m),w)}function Zi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Ci.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(za(this.i,this.B),this.M!=2&&(Mn(),Ft(17)),Yn(this),this.m=2,ai(this)):Uo(this,this.T-m)};function ai(m){m.j.I==0||m.K||jd(m.j,m)}function Yn(m){Zi(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,ja(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Ji(m,w){try{var T=m.j;if(T.I!=0&&(T.g==m||tr(T.h,m))){if(!m.L&&tr(T.h,m)&&T.I==3){try{var k=T.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var K=k;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Yo(T),Ds(T);else break e;Qa(T),Ft(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Yi(f(T.Va,T),6e3));er(T.h)<=1&&T.ta&&(T.ta=void 0)}else or(T,11)}else if((m.L||T.g==m)&&Yo(T),!j(w))for(K=T.Ba.g.parse(w),w=0;w<K.length;w++){let tt=K[w];const Tt=tt[0];if(!(Tt<=T.K))if(T.K=Tt,tt=tt[1],T.I==2)if(tt[0]=="c"){T.M=tt[1],T.ba=tt[2];const ci=tt[3];ci!=null&&(T.ka=ci,T.j.info("VER="+T.ka));const lr=tt[4];lr!=null&&(T.za=lr,T.j.info("SVER="+T.za));const Di=tt[5];Di!=null&&typeof Di=="number"&&Di>0&&(k=1.5*Di,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const Mi=m.g;if(Mi){const Xa=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Z=k.h;Z.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(bc(Z,Z.h),Z.h=null))}if(k.G){const Qo=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(k.wa=Qo,at(k.J,k.G,Qo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var me=m;if(k.na=Ud(k,k.L?k.ba:null,k.W),me.L){_c(k.h,me);var Le=me,Vt=k.O;Vt&&(Le.H=Vt),Le.D&&(Zi(Le),Wi(Le)),k.g=me}else Pd(k);T.i.length>0&&ar(T)}else tt[0]!="stop"&&tt[0]!="close"||or(T,7);else T.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?or(T,7):Rc(T):tt[0]!="noop"&&T.l&&T.l.qa(tt),T.A=0)}}Mn(4)}catch{}}var qt=class{constructor(m,w){this.g=m,this.map=w}};function yc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function er(m){return m.h?1:m.g?m.g.size:0}function tr(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function bc(m,w){m.g?m.g.add(w):m.h=w}function _c(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}yc.prototype.cancel=function(){if(this.i=wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function wc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const T of m.g.values())w=w.concat(T.G);return w}return E(m.i)}var Rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(m,w){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const k=m[T].indexOf("=");let K,Z=null;k>=0?(K=m[T].substring(0,k),Z=m[T].substring(k+1)):K=m[T],w(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Qn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof Qn?(this.l=m.l,on(this,m.j),this.o=m.o,this.g=m.g,Ss(this,m.u),this.h=m.h,xc(this,Md(m.i)),this.m=m.m):m&&(w=String(m).match(Rd))?(this.l=!1,on(this,w[1]||"",!0),this.o=nr(w[2]||""),this.g=nr(w[3]||"",!0),Ss(this,w[4]),this.h=nr(w[5]||"",!0),xc(this,w[6]||"",!0),this.m=nr(w[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}Qn.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(qa(w,Bo,!0),":");var T=this.g;return(T||w=="file")&&(m.push("//"),(w=this.o)&&m.push(qa(w,Bo,!0),"@"),m.push(Vr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(qa(T,T.charAt(0)=="/"?Tc:Id,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",qa(T,kd)),m.join("")},Qn.prototype.resolve=function(m){const w=Ht(this);let T=!!m.j;T?on(w,m.j):T=!!m.o,T?w.o=m.o:T=!!m.g,T?w.g=m.g:T=m.u!=null;var k=m.h;if(T)Ss(w,m.u);else if(T=!!m.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var K=w.h.lastIndexOf("/");K!=-1&&(k=w.h.slice(0,K+1)+k)}if(K=k,K==".."||K==".")k="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){k=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let me=0;me<K.length;){const Le=K[me++];Le=="."?k&&me==K.length&&Z.push(""):Le==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),k&&me==K.length&&Z.push("")):(Z.push(Le),k=!0)}k=Z.join("/")}else k=K}return T?w.h=k:T=m.i.toString()!=="",T?xc(w,Md(m.i)):T=!!m.m,T&&(w.m=m.m),w};function Ht(m){return new Qn(m)}function on(m,w,T){m.j=T?nr(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function Ss(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function xc(m,w,T){w instanceof Cs?(m.i=w,Ho(m.i,m.l)):(T||(w=qa(w,As)),m.i=new Cs(w,m.l))}function at(m,w,T){m.i.set(w,T)}function Ba(m){return at(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function nr(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function qa(m,w,T){return typeof m=="string"?(m=encodeURI(m).replace(w,On),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function On(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Bo=/[#\/\?@]/g,Id=/[#\?:]/g,Tc=/[#\?]/g,As=/[#\?@]/g,kd=/#/g;function Cs(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Pn(m){m.g||(m.g=new Map,m.h=0,m.i&&Fo(m.i,function(w,T){m.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}t=Cs.prototype,t.add=function(m,w){Pn(this),this.i=null,m=Ns(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(w),this.h+=1,this};function Dd(m,w){Pn(m),w=Ns(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Ec(m,w){return Pn(m),w=Ns(m,w),m.g.has(w)}t.forEach=function(m,w){Pn(this),this.g.forEach(function(T,k){T.forEach(function(K){m.call(w,K,k,this)},this)},this)};function Sc(m,w){Pn(m);let T=[];if(typeof w=="string")Ec(m,w)&&(T=T.concat(m.g.get(Ns(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)T=T.concat(m[w]);return T}t.set=function(m,w){return Pn(this),this.i=null,m=Ns(this,m),Ec(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=Sc(this,m),m.length>0?String(m[0]):w):w};function qo(m,w,T){Dd(m,w),T.length>0&&(m.i=null,m.g.set(Ns(m,w),E(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var T=w[k];const K=Vr(T);T=Sc(this,T);for(let Z=0;Z<T.length;Z++){let me=K;T[Z]!==""&&(me+="="+Vr(T[Z])),m.push(me)}}return this.i=m.join("&")};function Md(m){const w=new Cs;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function Ns(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Ho(m,w){w&&!m.j&&(Pn(m),m.i=null,m.g.forEach(function(T,k){const K=k.toLowerCase();k!=K&&(Dd(this,k),qo(this,K,T))},m)),m.j=w}function Ri(m,w){const T=new Ai;if(c.Image){const k=new Image;k.onload=g(oi,T,"TestLoadImage: loaded",!0,w,k),k.onerror=g(oi,T,"TestLoadImage: error",!1,w,k),k.onabort=g(oi,T,"TestLoadImage: abort",!1,w,k),k.ontimeout=g(oi,T,"TestLoadImage: timeout",!1,w,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else w(!1)}function Ac(m,w){const T=new Ai,k=new AbortController,K=setTimeout(()=>{k.abort(),oi(T,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:k.signal}).then(Z=>{clearTimeout(K),Z.ok?oi(T,"TestPingServer: ok",!0,w):oi(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),oi(T,"TestPingServer: error",!1,w)})}function oi(m,w,T,k,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),k(T)}catch{}}function Rs(){this.g=new Lo}function ir(m){this.i=m.Sb||null,this.h=m.ab||!1}b(ir,we),ir.prototype.g=function(){return new Ha(this.i,this.h)};function Ha(m,w){Rt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ha,Rt),t=Ha.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Ii(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$o(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function $o(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Is(this):Ii(this),this.readyState==3&&$o(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Is(this))},t.Na=function(m){this.g&&(this.response=m,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ii(m)}t.setRequestHeader=function(m,w){this.A.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=w.next();return m.join(`\r
`)};function Ii(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function li(m){let w="";return _e(m,function(T,k){w+=k,w+=":",w+=T,w+=`\r
`}),w}function $a(m,w,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=li(T),typeof m=="string"?T!=null&&Vr(T):at(m,w,T))}function ut(m){Rt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ut,Rt);var rr=/^https?$/i,Cc=["POST","PUT"];t=ut.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,w,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(Z){Ga(this,Z);return}if(m=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var K in k)T.set(K,k[K]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Z of k.keys())T.set(Z,k.get(Z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Cc,w,void 0)>=0)||k||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,me]of T)this.g.setRequestHeader(Z,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Ga(this,Z)}};function Ga(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Nc(m),jr(m)}function Nc(m){m.A||(m.A=!0,It(m,"complete"),It(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,It(this,"complete"),It(this,"abort"),jr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),ut.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ka(this):this.Xa())},t.Xa=function(){Ka(this)};function Ka(m){if(m.h&&typeof o<"u"){if(m.v&&ki(m)==4)setTimeout(m.Ca.bind(m),0);else if(It(m,"readystatechange"),ki(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var k;if(k=Z===0){let me=String(m.D).match(Rd)[1]||null;!me&&c.self&&c.self.location&&(me=c.self.location.protocol.slice(0,-1)),k=!rr.test(me?me.toLowerCase():"")}T=k}if(T)It(m,"complete"),It(m,"success");else{m.o=6;try{var K=ki(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Nc(m)}}finally{jr(m)}}}}function jr(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,w||It(m,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ki(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ki(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),fc(w)}};function dn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Lr(m){const w={};m=(m.g&&ki(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(j(m[k]))continue;var T=Ad(m[k]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=w[K]||[];w[K]=Z,Z.push(T)}se(w,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(m,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||w}function ks(m){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,m),this.Za=sr("retryDelaySeedMs",1e4,m),this.Ta=sr("forwardChannelMaxRetries",2,m),this.va=sr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(m&&m.concurrentRequestLimit),this.Ba=new Rs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ks.prototype,t.ka=8,t.I=1,t.connect=function(m,w,T,k){Ft(0),this.W=m,this.H=w||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=Ud(this,null,this.W),ar(this)};function Rc(m){if(Go(m),m.I==3){var w=m.V++,T=Ht(m.J);if(at(T,"SID",m.M),at(T,"RID",w),at(T,"TYPE","terminate"),Ya(m,T),w=new Ci(m,m.j,w),w.M=2,w.A=Ba(Ht(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=w.A,T=!0),T||(w.g=Fd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Wi(w)}zd(m)}function Ds(m){m.g&&(kc(m),m.g.cancel(),m.g=null)}function Go(m){Ds(m),m.v&&(c.clearTimeout(m.v),m.v=null),Yo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function ar(m){if(!vc(m.h)&&!m.m){m.m=!0;var w=m.Ea;ne||R(),te||(ne(),te=!0),S.add(w,m),m.D=0}}function Ko(m,w){return er(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Yi(f(m.Ea,m,w),Ld(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ci(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=V(Z),ie(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Od(this,K,w),T=Ht(this.J),at(T,"RID",m),at(T,"CVER",22),this.G&&at(T,"X-HTTP-Session-Id",this.G),Ya(this,T),Z&&(this.R?w="headers="+Vr(li(Z))+"&"+w:this.u&&$a(T,this.u,Z)),bc(this.h,K),this.Ra&&at(T,"TYPE","init"),this.S?(at(T,"$req",w),at(T,"SID","null"),K.U=!0,Xi(K,T,null)):Xi(K,T,w),this.I=2}}else this.I==3&&(m?Ic(this,m):this.i.length==0||vc(this.h)||Ic(this))};function Ic(m,w){var T;w?T=w.l:T=m.V++;const k=Ht(m.J);at(k,"SID",m.M),at(k,"RID",T),at(k,"AID",m.K),Ya(m,k),m.u&&m.o&&$a(k,m.u,m.o),T=new Ci(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Od(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),bc(m.h,T),Xi(T,k,w)}function Ya(m,w){m.H&&_e(m.H,function(T,k){at(w,k,T)}),m.l&&_e({},function(T,k){at(w,k,T)})}function Od(m,w,T){T=Math.min(m.i.length,T);const k=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let Le=-1;for(;;){const Vt=["count="+T];Le==-1?T>0?(Le=K[0].g,Vt.push("ofs="+Le)):Le=0:Vt.push("ofs="+Le);let tt=!0;for(let Tt=0;Tt<T;Tt++){var Z=K[Tt].g;const ci=K[Tt].map;if(Z-=Le,Z<0)Le=Math.max(0,K[Tt].g-100),tt=!1;else try{Z="req"+Z+"_"||"";try{var me=ci instanceof Map?ci:Object.entries(ci);for(const[lr,Di]of me){let Mi=Di;d(Di)&&(Mi=Gi(Di)),Vt.push(Z+lr+"="+encodeURIComponent(Mi))}}catch(lr){throw Vt.push(Z+"type="+encodeURIComponent("_badmap")),lr}}catch{k&&k(ci)}}if(tt){me=Vt.join("&");break e}}me=void 0}return m=m.i.splice(0,T),w.G=m,me}function Pd(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;ne||R(),te||(ne(),te=!0),S.add(w,m),m.A=0}}function Qa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Yi(f(m.Da,m),Ld(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Yi(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Ds(this),Vd(this))};function kc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Vd(m){m.g=new Ci(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Ht(m.na);at(w,"RID","rpc"),at(w,"SID",m.M),at(w,"AID",m.K),at(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&at(w,"TO",m.ia),at(w,"TYPE","xmlhttp"),Ya(m,w),m.u&&m.o&&$a(w,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=Ba(Ht(w)),T.u=null,T.R=!0,zo(T,m)}t.Va=function(){this.C!=null&&(this.C=null,Ds(this),Qa(this),Ft(19))};function Yo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function jd(m,w){var T=null;if(m.g==w){Yo(m),kc(m),m.g=null;var k=2}else if(tr(m.h,w))T=w.G,_c(m.h,w),k=1;else return;if(m.I!=0){if(w.o)if(k==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var K=m.D;k=Pr(),It(k,new Ki(k,T)),ar(m)}else Pd(m);else if(K=w.m,K==3||K==0&&w.X>0||!(k==1&&Ko(m,w)||k==2&&Qa(m)))switch(T&&T.length>0&&(w=m.h,w.i=w.i.concat(T)),K){case 1:or(m,5);break;case 4:or(m,10);break;case 3:or(m,6);break;default:or(m,2)}}}function Ld(m,w){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*w}function or(m,w){if(m.j.info("Error code "+w),w==2){var T=f(m.bb,m),k=m.Ua;const K=!k;k=new Qn(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||on(k,"https"),Ba(k),K?Ri(k.toString(),T):Ac(k.toString(),T)}else Ft(2);m.I=0,m.l&&m.l.pa(w),zd(m),Go(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function zd(m){if(m.I=0,m.ja=[],m.l){const w=wc(m.h);(w.length!=0||m.i.length!=0)&&(I(m.ja,w),I(m.ja,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.oa()}}function Ud(m,w,T){var k=T instanceof Qn?Ht(T):new Qn(T);if(k.g!="")w&&(k.g=w+"."+k.g),Ss(k,k.u);else{var K=c.location;k=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;const Z=new Qn(null);k&&on(Z,k),w&&(Z.g=w),K&&Ss(Z,K),T&&(Z.h=T),k=Z}return T=m.G,w=m.wa,T&&w&&at(k,T,w),at(k,"VER",m.ka),Ya(m,k),k}function Fd(m,w,T){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new ut(new ir({ab:T})):new ut(m.ma),w.Fa(m.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}t=Bd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ms(){}Ms.prototype.g=function(m,w){return new In(m,w)};function In(m,w){Rt.call(this),this.g=new ks(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!j(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!j(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new zr(this)}b(In,Rt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Rc(this.g)},In.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=Gi(m),m=T);w.i.push(new qt(w.Ya++,m)),w.I==3&&ar(w)},In.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,In.Z.N.call(this)};function qd(m){mt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const T in w){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}b(qd,mt);function Hd(){sn.call(this),this.status=1}b(Hd,sn);function zr(m){this.g=m}b(zr,Bd),zr.prototype.ra=function(){It(this.g,"a")},zr.prototype.qa=function(m){It(this.g,new qd(m))},zr.prototype.pa=function(m){It(this.g,new Hd)},zr.prototype.oa=function(){It(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,EC=function(){return new Ms},TC=function(){return Pr()},xC=bt,hy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,xf=Ua,pc.COMPLETE="complete",wC=pc,Ze.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,xu=Ze,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,_C=ut}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});const sE="@firebase/firestore",aE="4.9.2";class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");let ac="12.3.0";const Io=new vv("@firebase/firestore");function Sl(){return Io.logLevel}function ve(t,...e){if(Io.logLevel<=Ge.DEBUG){const n=e.map(Rv);Io.debug(`Firestore (${ac}): ${t}`,...n)}}function gs(t,...e){if(Io.logLevel<=Ge.ERROR){const n=e.map(Rv);Io.error(`Firestore (${ac}): ${t}`,...n)}}function Gl(t,...e){if(Io.logLevel<=Ge.WARN){const n=e.map(Rv);Io.warn(`Firestore (${ac}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ke(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,SC(t,i,n)}function SC(t,e,n){let i=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gs(i),new Error(i)}function it(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||SC(e,s,i)}function Ve(t,e){return t}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class AC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(An.UNAUTHENTICATED)))}shutdown(){}}class zL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UL{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cs,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cs)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new AC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class FL{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BL{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new FL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const i=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new oE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function HL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Iv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=HL(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function fy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return g0(s)===g0(o)?Ke(s,o):g0(s)?1:-1}return Ke(t.length,e.length)}const $L=55296,GL=57343;function g0(t){const e=t.charCodeAt(0);return e>=$L&&e<=GL}function Kl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}const lE="__name__";class mr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ke(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=mr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const i=mr.isNumericId(e),s=mr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?mr.extractNumericId(e).compare(mr.extractNumericId(n)):fy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ba.fromString(e.substring(4,e.length-2))}}class vt extends mr{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new vt(n)}static emptyPath(){return new vt([])}}const KL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends mr{construct(e,n,i){return new vn(e,n,i)}static isValidIdentifier(e){return KL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lE}static keyField(){return new vn([lE])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ye(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ye(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(o(),s++)}if(o(),c)throw new ye(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}function CC(t,e,n){if(!n)throw new ye(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YL(t,e,n,i){if(e===!0&&i===!0)throw new ye(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cE(t){if(!Ce.isDocumentKey(t))throw new ye(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){if(Ce.isDocumentKey(t))throw new ye(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function NC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(t);throw new ye(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Zt(t,e){const n={typeString:t};return e&&(n.value=e),n}function vd(t,e){if(!NC(t))throw new ye(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(s&&typeof c!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ye(oe.INVALID_ARGUMENT,n);return!0}const dE=-62135596800,hE=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*hE);return new Xe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dE)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vd(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Zt("string",Xe._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Xe(0,0))}static max(){return new Oe(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xu=-1;function QL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new Ta(s,Ce.empty(),e)}function XL(t){return new Ta(t.readTime,t.key,Xu)}class Ta{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ta(Oe.min(),Ce.empty(),Xu)}static max(){return new Ta(Oe.max(),Ce.empty(),Xu)}}function WL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}const ZL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function oc(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==ZL)throw t;ve("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,o=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++o,c&&o===s&&n()}),(h=>i(h)))})),c=!0,o===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,o)=>{i.push(n.call(this,s,o))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((g=>{c[f]=g,++d,d===o&&i(c)}),(g=>s(g)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):i()};o()}))}}function e8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lc(t){return t.name==="IndexedDbTransactionError"}class Tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tm.ce=-1;const kv=-1;function Em(t){return t==null}function Gf(t){return t===0&&1/t==-1/0}function t8(t){return typeof t=="number"&&Number.isInteger(t)&&!Gf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const RC="";function n8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fE(e)),e=i8(t.get(n),e);return fE(e)}function i8(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case RC:n+="";break;default:n+=o}}return n}function fE(t){return t+RC+""}function mE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Nt{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??yn.RED,this.left=s??yn.EMPTY,this.right=o??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new yn(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ri{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new ri([])}unionWith(e){let n=new nn(vn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class kC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kC("Invalid base64 string: "+o):o}})(e);return new wn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const r8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(t){if(it(!!t,39018),typeof t=="string"){let e=0;const n=r8.exec(t);if(it(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sa(t){return typeof t=="string"?wn.fromBase64String(t):wn.fromUint8Array(t)}const DC="server_timestamp",MC="__type__",OC="__previous_value__",PC="__local_write_time__";function Dv(t){return(t?.mapValue?.fields||{})[MC]?.stringValue===DC}function Sm(t){const e=t.mapValue.fields[OC];return Dv(e)?Sm(e):e}function Wu(t){const e=Ea(t.mapValue.fields[PC].timestampValue);return new Xe(e.seconds,e.nanos)}class s8{constructor(e,n,i,s,o,c,d,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Kf="(default)";class Zu{constructor(e,n){this.projectId=e,this.database=n||Kf}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}const VC="__type__",a8="__max__",sf={mapValue:{}},jC="__vector__",Yf="value";function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dv(t)?4:l8(t)?9007199254740991:o8(t)?10:11:ke(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Ea(s.timestampValue),d=Ea(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Sa(s.bytesValue).isEqual(Sa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Ut(s.geoPointValue.latitude)===Ut(o.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Ut(s.integerValue)===Ut(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Ut(s.doubleValue),d=Ut(o.doubleValue);return c===d?Gf(c)===Gf(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return Kl(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},d=o.mapValue.fields||{};if(mE(c)!==mE(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Cr(c[h],d[h])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Ju(t,e){return(t.values||[]).find((n=>Cr(n,e)))!==void 0}function Yl(t,e){if(t===e)return 0;const n=Aa(t),i=Aa(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Ut(o.integerValue||o.doubleValue),h=Ut(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return gE(t.timestampValue,e.timestampValue);case 4:return gE(Wu(t),Wu(e));case 5:return fy(t.stringValue,e.stringValue);case 6:return(function(o,c){const d=Sa(o),h=Sa(c);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const g=Ke(d[f],h[f]);if(g!==0)return g}return Ke(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=Ke(Ut(o.latitude),Ut(c.latitude));return d!==0?d:Ke(Ut(o.longitude),Ut(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return yE(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},f=d[Yf]?.arrayValue,g=h[Yf]?.arrayValue,b=Ke(f?.values?.length||0,g?.values?.length||0);return b!==0?b:yE(f,g)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===sf.mapValue&&c===sf.mapValue)return 0;if(o===sf.mapValue)return 1;if(c===sf.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const _=fy(h[b],g[b]);if(_!==0)return _;const E=Yl(d[h[b]],f[g[b]]);if(E!==0)return E}return Ke(h.length,g.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function gE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Ea(t),i=Ea(e),s=Ke(n.seconds,i.seconds);return s!==0?s:Ke(n.nanos,i.nanos)}function yE(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Yl(n[s],i[s]);if(o)return o}return Ke(n.length,i.length)}function Ql(t){return my(t)}function my(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ea(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Sa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=my(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${my(n.fields[c])}`;return s+"}"})(t.mapValue):ke(61005,{value:t})}function Tf(t){switch(Aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sm(t);return e?16+Tf(e):16;case 5:return 2*t.stringValue.length;case 6:return Sa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+Tf(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return Da(i.fields,((o,c)=>{s+=o.length+Tf(c)})),s})(t.mapValue);default:throw ke(13486,{value:t})}}function vE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function py(t){return!!t&&"integerValue"in t}function Mv(t){return!!t&&"arrayValue"in t}function bE(t){return!!t&&"nullValue"in t}function _E(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ef(t){return!!t&&"mapValue"in t}function o8(t){return(t?.mapValue?.fields||{})[VC]?.stringValue===jC}function Ou(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ou(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ou(t.arrayValue.values[n]);return e}return{...t}}function l8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===a8}class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ef(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(n)}setAll(e){let n=vn.emptyPath(),i={},s=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,s),i={},s=[],n=d.popLast()}c?i[d.lastSegment()]=Ou(c):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Ef(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Ef(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Da(n,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new qn(Ou(this.value))}}function LC(t){const e=[];return Da(t.fields,((n,i)=>{const s=new vn([n]);if(Ef(i)){const o=LC(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ri(e)}class Cn{constructor(e,n,i,s,o,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Cn(e,0,Oe.min(),Oe.min(),Oe.min(),qn.empty(),0)}static newFoundDocument(e,n,i,s){return new Cn(e,1,n,Oe.min(),i,s,0)}static newNoDocument(e,n){return new Cn(e,2,n,Oe.min(),Oe.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,Oe.min(),Oe.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qf{constructor(e,n){this.position=e,this.inclusive=n}}function wE(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],c=t.position[s];if(o.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),n.key):i=Yl(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function xE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}class ed{constructor(e,n="asc"){this.field=e,this.dir=n}}function c8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class zC{}class Wt extends zC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new d8(e,n,i):n==="array-contains"?new m8(e,i):n==="in"?new p8(e,i):n==="not-in"?new g8(e,i):n==="array-contains-any"?new y8(e,i):new Wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new h8(e,i):new f8(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yl(n,this.value)):n!==null&&Aa(this.value)===Aa(n)&&this.matchesComparison(Yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends zC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bi(e,n)}matches(e){return UC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UC(t){return t.op==="and"}function FC(t){return u8(t)&&UC(t)}function u8(t){for(const e of t.filters)if(e instanceof Bi)return!1;return!0}function gy(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+Ql(t.value);if(FC(t))return t.filters.map((e=>gy(e))).join(",");{const e=t.filters.map((n=>gy(n))).join(",");return`${t.op}(${e})`}}function BC(t,e){return t instanceof Wt?(function(i,s){return s instanceof Wt&&i.op===s.op&&i.field.isEqual(s.field)&&Cr(i.value,s.value)})(t,e):t instanceof Bi?(function(i,s){return s instanceof Bi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,d)=>o&&BC(c,s.filters[d])),!0):!1})(t,e):void ke(19439)}function qC(t){return t instanceof Wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ql(n.value)}`})(t):t instanceof Bi?(function(n){return n.op.toString()+" {"+n.getFilters().map(qC).join(" ,")+"}"})(t):"Filter"}class d8 extends Wt{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class h8 extends Wt{constructor(e,n){super(e,"in",n),this.keys=HC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class f8 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=HC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function HC(t,e){return(e.arrayValue?.values||[]).map((n=>Ce.fromName(n.referenceValue)))}class m8 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mv(n)&&Ju(n.arrayValue,this.value)}}class p8 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ju(this.value.arrayValue,n)}}class g8 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ju(this.value.arrayValue,n)}}class y8 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ju(this.value.arrayValue,i)))}}class v8{constructor(e,n=null,i=[],s=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function TE(t,e=null,n=[],i=[],s=null,o=null,c=null){return new v8(t,e,n,i,s,o,c)}function Ov(t){const e=Ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>gy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ql(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ql(i))).join(",")),e.Te=n}return e.Te}function Pv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xE(t.startAt,e.startAt)&&xE(t.endAt,e.endAt)}function yy(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class cc{constructor(e,n=null,i=[],s=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b8(t,e,n,i,s,o,c,d){return new cc(t,e,n,i,s,o,c,d)}function Am(t){return new cc(t)}function EE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $C(t){return t.collectionGroup!==null}function Pu(t){const e=Ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new nn(vn.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ed(o,i))})),n.has(vn.keyField().canonicalString())||e.Ie.push(new ed(vn.keyField(),i))}return e.Ie}function xr(t){const e=Ve(t);return e.Ee||(e.Ee=_8(e,Pu(t))),e.Ee}function _8(t,e){if(t.limitType==="F")return TE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new ed(s.field,o)}));const n=t.endAt?new Qf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Qf(t.startAt.position,t.startAt.inclusive):null;return TE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function vy(t,e){const n=t.filters.concat([e]);return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xf(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cm(t,e){return Pv(xr(t),xr(e))&&t.limitType===e.limitType}function GC(t){return`${Ov(xr(t))}|lt:${t.limitType}`}function Al(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>qC(s))).join(", ")}]`),Em(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Ql(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Ql(s))).join(",")),`Target(${i})`})(xr(t))}; limitType=${t.limitType})`}function Nm(t,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,s){for(const o of Pu(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(c,d,h){const f=wE(c,d,h);return c.inclusive?f<=0:f<0})(i.startAt,Pu(i),s)||i.endAt&&!(function(c,d,h){const f=wE(c,d,h);return c.inclusive?f>=0:f>0})(i.endAt,Pu(i),s))})(t,e)}function w8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KC(t){return(e,n)=>{let i=!1;for(const s of Pu(t)){const o=x8(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function x8(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):(function(o,c,d){const h=c.data.field(o),f=d.data.field(o);return h!==null&&f!==null?Yl(h,f):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:t.dir})}}class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((n,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return IC(this.inner)}size(){return this.innerSize}}const T8=new Nt(Ce.comparator);function ys(){return T8}const YC=new Nt(Ce.comparator);function Tu(...t){let e=YC;for(const n of t)e=e.insert(n.key,n);return e}function QC(t){let e=YC;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function bo(){return Vu()}function XC(){return Vu()}function Vu(){return new Po((t=>t.toString()),((t,e)=>t.isEqual(e)))}const E8=new Nt(Ce.comparator),S8=new nn(Ce.comparator);function Ye(...t){let e=S8;for(const n of t)e=e.add(n);return e}const A8=new nn(Ke);function C8(){return A8}function Vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function WC(t){return{integerValue:""+t}}function N8(t,e){return t8(e)?WC(e):Vv(t,e)}class Rm{constructor(){this._=void 0}}function R8(t,e,n){return t instanceof Wf?(function(s,o){const c={fields:{[MC]:{stringValue:DC},[PC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Dv(o)&&(o=Sm(o)),o&&(c.fields[OC]=o),{mapValue:c}})(n,e):t instanceof td?JC(t,e):t instanceof nd?eN(t,e):(function(s,o){const c=ZC(s,o),d=SE(c)+SE(s.Ae);return py(c)&&py(s.Ae)?WC(d):Vv(s.serializer,d)})(t,e)}function I8(t,e,n){return t instanceof td?JC(t,e):t instanceof nd?eN(t,e):n}function ZC(t,e){return t instanceof Zf?(function(i){return py(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Wf extends Rm{}class td extends Rm{constructor(e){super(),this.elements=e}}function JC(t,e){const n=tN(e);for(const i of t.elements)n.some((s=>Cr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class nd extends Rm{constructor(e){super(),this.elements=e}}function eN(t,e){let n=tN(e);for(const i of t.elements)n=n.filter((s=>!Cr(s,i)));return{arrayValue:{values:n}}}class Zf extends Rm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function SE(t){return Ut(t.integerValue||t.doubleValue)}function tN(t){return Mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function k8(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof td&&s instanceof td||i instanceof nd&&s instanceof nd?Kl(i.elements,s.elements,Cr):i instanceof Zf&&s instanceof Zf?Cr(i.Ae,s.Ae):i instanceof Wf&&s instanceof Wf})(t.transform,e.transform)}class D8{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Im{}function nN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jv(t.key,Ei.none()):new bd(t.key,t.data,Ei.none());{const n=t.data,i=qn.empty();let s=new nn(vn.comparator);for(let o of e.fields)if(!s.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new Ma(t.key,i,new ri(s.toArray()),Ei.none())}}function M8(t,e,n){t instanceof bd?(function(s,o,c){const d=s.value.clone(),h=CE(s.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ma?(function(s,o,c){if(!Sf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const d=CE(s.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(iN(s)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function ju(t,e,n,i){return t instanceof bd?(function(o,c,d,h){if(!Sf(o.precondition,c))return d;const f=o.value.clone(),g=NE(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ma?(function(o,c,d,h){if(!Sf(o.precondition,c))return d;const f=NE(o.fieldTransforms,h,c),g=c.data;return g.setAll(iN(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,i):(function(o,c,d){return Sf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function O8(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=ZC(i.transform,s||null);o!=null&&(n===null&&(n=qn.empty()),n.set(i.field,o))}return n||null}function AE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Kl(i,s,((o,c)=>k8(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bd extends Im{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ma extends Im{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function CE(t,e,n){const i=new Map;it(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],c=o.transform,d=e.data.field(o.field);i.set(o.field,I8(c,d,n[s]))}return i}function NE(t,e,n){const i=new Map;for(const s of t){const o=s.transform,c=n.data.field(s.field);i.set(s.field,R8(o,c,e))}return i}class jv extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P8 extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class V8{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&M8(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ju(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ju(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=XC();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(s.key)?null:d;const h=nN(c,d);h!==null&&i.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,((n,i)=>AE(n,i)))&&Kl(this.baseMutations,e.baseMutations,((n,i)=>AE(n,i)))}}class Lv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){it(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return E8})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new Lv(e,n,i,s)}}class j8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class L8{constructor(e,n){this.count=e,this.unchangedNames=n}}var Qt,We;function z8(t){switch(t){case oe.OK:return ke(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function rN(t){if(t===void 0)return gs("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Qt.OK:return oe.OK;case Qt.CANCELLED:return oe.CANCELLED;case Qt.UNKNOWN:return oe.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return oe.INTERNAL;case Qt.UNAVAILABLE:return oe.UNAVAILABLE;case Qt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Qt.NOT_FOUND:return oe.NOT_FOUND;case Qt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Qt.ABORTED:return oe.ABORTED;case Qt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Qt.DATA_LOSS:return oe.DATA_LOSS;default:return ke(39323,{code:t})}}(We=Qt||(Qt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function U8(){return new TextEncoder}const F8=new ba([4294967295,4294967295],0);function RE(t){const e=U8().encode(t),n=new bC;return n.update(e),new Uint8Array(n.digest())}function IE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ba([n,i],0),new ba([s,o],0)]}class zv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Eu(`Invalid padding: ${n}`);if(i<0)throw new Eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Eu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ba.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(ba.fromNumber(i)));return s.compare(F8)===1&&(s=new ba([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=RE(e),[i,s]=IE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new zv(o,s,n);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const n=RE(e),[i,s]=IE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class km{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,_d.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new km(Oe.min(),s,new Nt(Ke),ys(),Ye())}}class _d{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _d(i,n,Ye(),Ye(),Ye())}}class Af{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class sN{constructor(e,n){this.targetId=e,this.Ce=n}}class aN{constructor(e,n,i=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class kE{constructor(){this.ve=0,this.Fe=DE(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),i=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ke(38017,{changeType:o})}})),new _d(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=DE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B8{constructor(e){this.Ge=e,this.ze=new Map,this.je=ys(),this.Je=af(),this.He=af(),this.Ye=new Nt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(yy(o))if(i===0){const c=new Ce(o.path);this.et(n,c,Cn.newNoDocument(c,Oe.min()))}else it(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let c,d;try{c=Sa(i).toUint8Array()}catch(h){if(h instanceof kC)return Gl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new zv(c,s,o)}catch(h){return Gl(h instanceof Eu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&yy(d.target)){const h=new Ce(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Cn.newNoDocument(h,e))}o.Be&&(n.set(c,o.ke()),o.qe())}}));let i=Ye();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new km(e,n,this.Ye,this.je,i);return this.je=ys(),this.Je=af(),this.He=af(),this.Ye=new Nt(Ke),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function af(){return new Nt(Ce.comparator)}function DE(){return new Nt(Ce.comparator)}const q8={asc:"ASCENDING",desc:"DESCENDING"},H8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$8={and:"AND",or:"OR"};class G8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function by(t,e){return t.useProto3Json||Em(e)?e:{value:e}}function Jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K8(t,e){return Jf(t,e.toTimestamp())}function Tr(t){return it(!!t,49232),Oe.fromTimestamp((function(n){const i=Ea(n);return new Xe(i.seconds,i.nanos)})(t))}function Uv(t,e){return _y(t,e).canonicalString()}function _y(t,e){const n=(function(s){return new vt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function lN(t){const e=vt.fromString(t);return it(fN(e),10190,{key:e.toString()}),e}function wy(t,e){return Uv(t.databaseId,e.path)}function y0(t,e){const n=lN(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(uN(n))}function cN(t,e){return Uv(t.databaseId,e)}function Y8(t){const e=lN(t);return e.length===4?vt.emptyPath():uN(e)}function xy(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uN(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ME(t,e,n){return{name:wy(t,e),fields:n.value.mapValue.fields}}function Q8(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ke(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(it(g===void 0||typeof g=="string",58123),wn.fromBase64String(g||"")):(it(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),wn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const g=f.code===void 0?oe.UNKNOWN:rN(f.code);return new ye(g,f.message||"")})(c);n=new aN(i,s,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=y0(t,i.document.name),o=Tr(i.document.updateTime),c=i.document.createTime?Tr(i.document.createTime):Oe.min(),d=new qn({mapValue:{fields:i.document.fields}}),h=Cn.newFoundDocument(s,o,c,d),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Af(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=y0(t,i.document),o=i.readTime?Tr(i.readTime):Oe.min(),c=Cn.newNoDocument(s,o),d=i.removedTargetIds||[];n=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=y0(t,i.document),o=i.removedTargetIds||[];n=new Af([],o,s,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new L8(s,o),d=i.targetId;n=new sN(d,c)}}return n}function X8(t,e){let n;if(e instanceof bd)n={update:ME(t,e.key,e.value)};else if(e instanceof jv)n={delete:wy(t,e.key)};else if(e instanceof Ma)n={update:ME(t,e.key,e.data),updateMask:sz(e.fieldMask)};else{if(!(e instanceof P8))return ke(16599,{Vt:e.type});n={verify:wy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const d=c.transform;if(d instanceof Wf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof td)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ke(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:K8(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ke(27497)})(t,e.precondition)),n}function W8(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map((n=>(function(s,o){let c=s.updateTime?Tr(s.updateTime):Tr(o);return c.isEqual(Oe.min())&&(c=Tr(o)),new D8(c,s.transformResults||[])})(n,e)))):[]}function Z8(t,e){return{documents:[cN(t,e.path)]}}function J8(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cN(t,s);const o=(function(f){if(f.length!==0)return hN(Bi.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Cl(_.field),direction:nz(_.dir)}})(g)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=by(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function ez(t){let e=Y8(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){it(i===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(b){const _=dN(b);return _ instanceof Bi&&FC(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((_=>(function(I){return new ed(Nl(I.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(_)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let _;return _=typeof b=="object"?b.value:b,Em(_)?null:_})(n.limit));let h=null;n.startAt&&(h=(function(b){const _=!!b.before,E=b.values||[];return new Qf(E,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(b){const _=!b.before,E=b.values||[];return new Qf(E,_)})(n.endAt)),b8(e,s,c,o,d,"F",h,f)}function tz(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Nl(n.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(n.unaryFilter.field);return Wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Nl(n.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nl(n.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Wt.create(Nl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Bi.create(n.compositeFilter.filters.map((i=>dN(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function nz(t){return q8[t]}function iz(t){return H8[t]}function rz(t){return $8[t]}function Cl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return vn.fromServerFormat(t.fieldPath)}function hN(t){return t instanceof Wt?(function(n){if(n.op==="=="){if(_E(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NAN"}};if(bE(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_E(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NOT_NAN"}};if(bE(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cl(n.field),op:iz(n.op),value:n.value}}})(t):t instanceof Bi?(function(n){const i=n.getFilters().map((s=>hN(s)));return i.length===1?i[0]:{compositeFilter:{op:rz(n.op),filters:i}}})(t):ke(54877,{filter:t})}function sz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ma{constructor(e,n,i,s,o=Oe.min(),c=Oe.min(),d=wn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class az{constructor(e){this.yt=e}}function oz(t){const e=ez({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xf(e,e.limit,"L"):e}class lz{constructor(){this.Cn=new cz}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Ta.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Ta.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class cz{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new nn(vt.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new nn(vt.comparator)).toArray()}}const OE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mN=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(mN,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class Xl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xl(0)}static cr(){return new Xl(-1)}}const PE="LruGarbageCollector",uz=1048576;function VE([t,e],[n,i]){const s=Ke(t,n);return s===0?Ke(e,i):s}class dz{constructor(e){this.Ir=e,this.buffer=new nn(VE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();VE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hz{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(PE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lc(n)?ve(PE,"Ignoring IndexedDB error during garbage collection: ",n):await oc(n)}await this.Vr(3e5)}))}}class fz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(Tm.ce);const i=new dz(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(OE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,c,d,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,c=Date.now(),this.nthSequenceNumber(e,s)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,n)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(f=Date.now(),Sl()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function mz(t,e){return new fz(t,e)}class pz{constructor(){this.changes=new Po((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class yz{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&ju(i.mutation,s,ri.empty(),Xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ye()){const s=bo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((o=>{let c=Tu();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=bo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ye())))}populateOverlays(e,n,i){const s=[];return i.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,i,s){let o=ys();const c=Vu(),d=(function(){return Vu()})();return n.forEach(((h,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Ma)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),ju(g.mutation,f,g.mutation.getFieldMask(),Xe.now())):c.set(f.key,ri.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),n.forEach(((f,g)=>d.set(f,new gz(g,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=Vu();let s=new Nt(((c,d)=>c-d)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||ri.empty();g=d.applyToLocalView(f,g),i.set(h,g);const b=(s.get(d.batchId)||Ye()).add(h);s=s.insert(d.batchId,b)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,g=h.value,b=XC();g.forEach((_=>{if(!o.has(_)){const E=nN(n.get(_),i.get(_));E!==null&&b.set(_,E),o=o.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return ue.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$C(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):ue.resolve(bo());let d=Xu,h=o;return c.next((f=>ue.forEach(f,((g,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ye()))).next((g=>({batchId:d,changes:QC(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((i=>{let s=Tu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let c=Tu();return this.indexManager.getCollectionParents(e,o).next((d=>ue.forEach(d,(h=>{const f=(function(b,_){return new cc(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Cn.newInvalidDocument(g)))}));let d=Tu();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&ju(g.mutation,f,ri.empty(),Xe.now()),Nm(n,f)&&(d=d.insert(h,f))})),d}))}}class vz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:oz(s.bundledQuery),readTime:Tr(s.readTime)}})(n)),ue.resolve()}}class bz{constructor(){this.overlays=new Nt(Ce.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=bo();return ue.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,o)=>{this.St(e,n,o)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=bo(),o=n.length+1,c=new Ce(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Nt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=bo(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=bo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>d.set(f,g))),!(d.size()>=s)););return ue.resolve(d)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new j8(n,i));let o=this.qr.get(n);o===void 0&&(o=Ye(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}class _z{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class Fv{constructor(){this.Qr=new nn(cn.$r),this.Ur=new nn(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new cn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new cn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ce(new vt([])),i=new cn(n,e),s=new cn(n,e+1),o=[];return this.Ur.forEachInRange([i,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ce(new vt([])),i=new cn(n,e),s=new cn(n,e+1);let o=Ye();return this.Ur.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const n=new cn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ce.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||Ce.comparator(e.key,n.key)}}class wz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(cn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new V8(o,n,i,s);this.mutationQueue.push(c);for(const d of s)this.Zr=this.Zr.add(new cn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?kv:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new cn(n,0),s=new cn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(c=>{const d=this.Xr(c.Yr);o.push(d)})),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nn(Ke);return n.forEach((s=>{const o=new cn(s,0),c=new cn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{i=i.add(d.Yr)}))})),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;Ce.isDocumentKey(o)||(o=o.child(""));const c=new cn(new Ce(o),0);let d=new nn(Ke);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(d=d.add(h.Yr)),!0)}),c),ue.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){it(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(n.mutations,(s=>{const o=new cn(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new cn(n,0),s=this.Zr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class xz{constructor(e){this.ri=e,this.docs=(function(){return new Nt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,c=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let i=ys();return n.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Cn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=ys();const c=n.path,d=new Ce(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||WL(XL(g),i)<=0||(s.has(g.key)||Nm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,n,i,s){ke(9500)}ii(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new Tz(this)}getSize(e){return ue.resolve(this.size)}}class Tz extends pz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Ez{constructor(e){this.persistence=e,this.si=new Po((n=>Ov(n)),Pv),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Fv,this.targetCount=0,this.ai=Xl.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(o).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),ue.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class pN{constructor(e,n){this.ui={},this.overlays={},this.ci=new Tm(0),this.li=!1,this.li=!0,this.hi=new _z,this.referenceDelegate=e(this),this.Pi=new Ez(this),this.indexManager=new lz,this.remoteDocumentCache=(function(s){return new xz(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new az(n),this.Ii=new vz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new wz(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const s=new Sz(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return ue.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class Sz extends JL{constructor(e){super(),this.currentSequenceNumber=e}}class Bv{constructor(e){this.persistence=e,this.Ri=new Fv,this.Vi=null}static mi(e){return new Bv(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(i=>{const s=Ce.fromPath(i);return this.gi(e,s).next((o=>{o||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class em{constructor(e,n){this.persistence=e,this.pi=new Po((i=>n8(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=mz(this,n)}static mi(e,n){return new em(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,n).next((d=>{d||(i++,o.removeEntry(c,Oe.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tf(e.data.value)),n}br(e,n,i){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ye(),s=Ye();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new qv(e,n.fromCache,i,s)}}class Az{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Cz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ZV()?8:e8(Rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,n,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new Az;return this.Ss(e,n,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,c,d.size)}))})).next((()=>o.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Sl()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Sl()<=Ge.DEBUG&&ve("QueryEngine","Query:",Al(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Sl()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):ue.resolve())}ys(e,n){if(EE(n))return ue.resolve(null);let i=xr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Xf(n,null,"F"),i=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(n,d);return this.Cs(n,f,c,h.readTime)?this.ys(e,Xf(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,i,s){return EE(n)||s.isEqual(Oe.min())?ue.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(n,o);return this.Cs(n,c,i,s)?ue.resolve(null):(Sl()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Al(n)),this.vs(e,c,n,QL(s,Xu)).next((d=>d)))}))}Ds(e,n){let i=new nn(KC(e));return n.forEach(((s,o)=>{Nm(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return Sl()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Al(n)),this.ps.getDocumentsMatchingQuery(e,n,Ta.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(n.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Hv="LocalStore",Nz=3e8;class Rz{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Nt(Ke),this.xs=new Po((o=>Ov(o)),Pv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Iz(t,e,n,i){return new Rz(t,e,n,i)}async function gN(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],d=[];let h=Ye();for(const f of s){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function kz(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,g){const b=f.batch,_=b.keys();let E=ue.resolve();return _.forEach((I=>{E=E.next((()=>g.getEntry(h,I))).next((A=>{const C=f.docVersions.get(I);it(C!==null,48541),A.version.compareTo(C)<0&&(b.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=Ye();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function yN(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Dz(t,e){const n=Ve(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const d=[];e.targetChanges.forEach(((g,b)=>{const _=s.get(b);if(!_)return;d.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,b))));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(wn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,i)),s=s.insert(b,E),(function(A,C,O){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Nz?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(_,E,g)&&d.push(n.Pi.updateTargetData(o,E))}));let h=ys(),f=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),d.push(Mz(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!i.isEqual(Oe.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));d.push(g)}return ue.waitFor(d).next((()=>c.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Ms=s,o)))}function Mz(t,e,n){let i=Ye(),s=Ye();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let c=ys();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(Oe.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ve(Hv,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:s}}))}function Oz(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=kv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Pz(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((o=>o?(s=o,ue.resolve(s)):n.Pi.allocateTargetId(i).next((c=>(s=new ma(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Ty(t,e,n){const i=Ve(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!lc(c))throw c;ve(Hv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function jE(t,e,n){const i=Ve(t);let s=Oe.min(),o=Ye();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const b=Ve(h),_=b.xs.get(g);return _!==void 0?ue.resolve(b.Ms.get(_)):b.Pi.getTargetData(f,g)})(i,c,xr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,n?s:Oe.min(),n?o:Ye()))).next((d=>(Vz(i,w8(e),d),{documents:d,Qs:o})))))}function Vz(t,e,n){let i=t.Os.get(e)||Oe.min();n.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.Os.set(e,i)}class LE{constructor(){this.activeTargetIds=C8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jz{constructor(){this.Mo=new LE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lz{Oo(e){}shutdown(){}}const zE="ConnectivityMonitor";class UE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(zE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(zE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let of=null;function Ey(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}const v0="RestConnection",zz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Kf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const c=Ey(),d=this.zo(e,n.toUriEncodedString());ve(v0,`Sending RPC '${e}' ${c}:`,d,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,o);const{host:f}=new URL(d),g=rc(f);return this.Jo(e,d,h,i,g).then((b=>(ve(v0,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Gl(v0,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",i),b}))}Ho(e,n,i,s,o,c){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const i=zz[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class Fz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const En="WebChannelConnection";class Bz extends Uz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const c=Ey();return new Promise(((d,h)=>{const f=new _C;f.setWithCredentials(!0),f.listenOnce(wC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case xf.NO_ERROR:const b=f.getResponseJson();ve(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case xf.TIMEOUT:ve(En,`RPC '${e}' ${c} timed out`),h(new ye(oe.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const _=f.getStatus();if(ve(En,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E?.error;if(I&&I.status&&I.message){const A=(function(O){const z=O.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(z)>=0?z:oe.UNKNOWN})(I.status);h(new ye(A,I.message))}else h(new ye(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ye(oe.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(En,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ve(En,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",g,i,15)}))}T_(e,n,i){const s=Ey(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=EC(),d=TC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");ve(En,`Creating RPC '${e}' stream ${s}: ${g}`,h);const b=c.createWebChannel(g,h);this.I_(b);let _=!1,E=!1;const I=new Fz({Yo:C=>{E?ve(En,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(_||(ve(En,`Opening RPC '${e}' stream ${s} transport.`),b.open(),_=!0),ve(En,`RPC '${e}' stream ${s} sending:`,C),b.send(C))},Zo:()=>b.close()}),A=(C,O,z)=>{C.listen(O,(L=>{try{z(L)}catch($){setTimeout((()=>{throw $}),0)}}))};return A(b,xu.EventType.OPEN,(()=>{E||(ve(En,`RPC '${e}' stream ${s} transport opened.`),I.o_())})),A(b,xu.EventType.CLOSE,(()=>{E||(E=!0,ve(En,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(b))})),A(b,xu.EventType.ERROR,(C=>{E||(E=!0,Gl(En,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),I.a_(new ye(oe.UNAVAILABLE,"The operation could not be completed")))})),A(b,xu.EventType.MESSAGE,(C=>{if(!E){const O=C.data[0];it(!!O,16349);const z=O,L=z?.error||z[0]?.error;if(L){ve(En,`RPC '${e}' stream ${s} received error:`,L);const $=L.status;let ne=(function(R){const M=Qt[R];if(M!==void 0)return rN(M)})($),te=L.message;ne===void 0&&(ne=oe.INTERNAL,te="Unknown error status: "+$+" with message "+L.message),E=!0,I.a_(new ye(ne,te)),b.close()}else ve(En,`RPC '${e}' stream ${s} received:`,O),I.u_(O)}})),A(d,xC.STAT_EVENT,(C=>{C.stat===hy.PROXY?ve(En,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===hy.NOPROXY&&ve(En,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function b0(){return typeof document<"u"?document:null}function Dm(t){return new G8(t,!0)}class vN{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const FE="PersistentStream";class bN{constructor(e,n,i,s,o,c,d,h){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(gs(n.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new ye(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(FE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(FE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qz extends bN{constructor(e,n,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Q8(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Oe.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Oe.min():c.readTime?Tr(c.readTime):Oe.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=xy(this.serializer),n.addTarget=(function(o,c){let d;const h=c.target;if(d=yy(h)?{documents:Z8(o,h)}:{query:J8(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=oN(o,c.resumeToken);const f=by(o,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Oe.min())>0){d.readTime=Jf(o,c.snapshotVersion.toTimestamp());const f=by(o,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const i=tz(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=xy(this.serializer),n.removeTarget=e,this.q_(n)}}class Hz extends bN{constructor(e,n,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=W8(e.writeResults,e.commitTime),i=Tr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=xy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>X8(this.serializer,i)))};this.q_(n)}}class $z{}class Gz extends $z{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,_y(n,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(oe.UNKNOWN,o.toString())}))}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,_y(n,i),s,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Kz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gs(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ko="RemoteStore";class Yz{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Vo(this)&&(ve(ko,"Restarting streams for network reachability change."),await(async function(h){const f=Ve(h);f.Ea.add(4),await wd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Mm(f)})(this))}))})),this.Ra=new Kz(i,s)}}async function Mm(t){if(Vo(t))for(const e of t.da)await e(!0)}async function wd(t){for(const e of t.da)await e(!1)}function _N(t,e){const n=Ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yv(n)?Kv(n):uc(n).O_()&&Gv(n,e))}function $v(t,e){const n=Ve(t),i=uc(n);n.Ia.delete(e),i.O_()&&wN(n,e),n.Ia.size===0&&(i.O_()?i.L_():Vo(n)&&n.Ra.set("Unknown"))}function Gv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uc(t).Y_(e)}function wN(t,e){t.Va.Ue(e),uc(t).Z_(e)}function Kv(t){t.Va=new B8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),uc(t).start(),t.Ra.ua()}function Yv(t){return Vo(t)&&!uc(t).x_()&&t.Ia.size>0}function Vo(t){return Ve(t).Ea.size===0}function xN(t){t.Va=void 0}async function Qz(t){t.Ra.set("Online")}async function Xz(t){t.Ia.forEach(((e,n)=>{Gv(t,e)}))}async function Wz(t,e){xN(t),Yv(t)?(t.Ra.ha(e),Kv(t)):t.Ra.set("Unknown")}async function Zz(t,e,n){if(t.Ra.set("Online"),e instanceof aN&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const d of o.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.Va.removeTarget(d))})(t,e)}catch(i){ve(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await tm(t,i)}else if(e instanceof Af?t.Va.Ze(e):e instanceof sN?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const i=await yN(t.localStore);n.compareTo(i)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(wn.EMPTY_BYTE_STRING,g.snapshotVersion)),wN(o,h);const b=new ma(g.target,h,f,g.sequenceNumber);Gv(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ve(ko,"Failed to raise snapshot:",i),await tm(t,i)}}async function tm(t,e,n){if(!lc(e))throw e;t.Ea.add(1),await wd(t),t.Ra.set("Offline"),n||(n=()=>yN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(ko,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mm(t)}))}function TN(t,e){return e().catch((n=>tm(t,n,e)))}async function Om(t){const e=Ve(t),n=Ca(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kv;for(;Jz(e);)try{const s=await Oz(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,eU(e,s)}catch(s){await tm(e,s)}EN(e)&&SN(e)}function Jz(t){return Vo(t)&&t.Ta.length<10}function eU(t,e){t.Ta.push(e);const n=Ca(t);n.O_()&&n.X_&&n.ea(e.mutations)}function EN(t){return Vo(t)&&!Ca(t).x_()&&t.Ta.length>0}function SN(t){Ca(t).start()}async function tU(t){Ca(t).ra()}async function nU(t){const e=Ca(t);for(const n of t.Ta)e.ea(n.mutations)}async function iU(t,e,n){const i=t.Ta.shift(),s=Lv.from(i,e,n);await TN(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Om(t)}async function rU(t,e){e&&Ca(t).X_&&await(async function(i,s){if((function(c){return z8(c)&&c!==oe.ABORTED})(s.code)){const o=i.Ta.shift();Ca(i).B_(),await TN(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Om(i)}})(t,e),EN(t)&&SN(t)}async function BE(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),ve(ko,"RemoteStore received new credentials");const i=Vo(n);n.Ea.add(3),await wd(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mm(n)}async function sU(t,e){const n=Ve(t);e?(n.Ea.delete(2),await Mm(n)):e||(n.Ea.add(2),await wd(n),n.Ra.set("Unknown"))}function uc(t){return t.ma||(t.ma=(function(n,i,s){const o=Ve(n);return o.sa(),new qz(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:Qz.bind(null,t),t_:Xz.bind(null,t),r_:Wz.bind(null,t),H_:Zz.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Yv(t)?Kv(t):t.Ra.set("Unknown")):(await t.ma.stop(),xN(t))}))),t.ma}function Ca(t){return t.fa||(t.fa=(function(n,i,s){const o=Ve(n);return o.sa(),new Hz(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:tU.bind(null,t),r_:rU.bind(null,t),ta:nU.bind(null,t),na:iU.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Om(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(ko,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Qv{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const c=Date.now()+i,d=new Qv(e,n,c,s,o);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xv(t,e){if(gs("AsyncQueue",`${e}: ${t}`),lc(t))return new ye(oe.UNAVAILABLE,`${e}: ${t}`);throw t}class Fl{static emptySet(e){return new Fl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=Tu(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Fl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class qE{constructor(){this.ga=new Nt(Ce.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Wl{constructor(e,n,i,s,o,c,d,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,o){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Wl(e,n,Fl.emptySet(n),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}class aU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oU{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ve(n),o=s.queries;s.queries=HE(),o.forEach(((c,d)=>{for(const h of d.Sa)h.onError(i)}))})(this,new ye(oe.ABORTED,"Firestore shutting down"))}}function HE(){return new Po((t=>GC(t)),Cm)}async function Wv(t,e){const n=Ve(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new aU,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const d=Xv(c,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Jv(n)}async function Zv(t,e){const n=Ve(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lU(t,e){const n=Ve(t);let i=!1;for(const s of e){const o=s.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Fa(s)&&(i=!0);c.wa=s}}i&&Jv(n)}function cU(t,e,n){const i=Ve(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function Jv(t){t.Ca.forEach((e=>{e.next()}))}var Sy,$E;($E=Sy||(Sy={})).Ma="default",$E.Cache="cache";class eb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Wl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sy.Cache}}class AN{constructor(e){this.key=e}}class CN{constructor(e){this.key=e}}class uU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=KC(e),this.tu=new Fl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new qE,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,b)=>{const _=s.get(g),E=Nm(this.query,b)?b:null,I=!!_&&this.mutatedKeys.has(_.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;_&&E?_.data.isEqual(E.data)?I!==A&&(i.track({type:3,doc:E}),C=!0):this.su(_,E)||(i.track({type:2,doc:E}),C=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(d=!0)):!_&&E?(i.track({type:0,doc:E}),C=!0):_&&!E&&(i.track({type:1,doc:_}),C=!0,(h||f)&&(d=!0)),C&&(E?(c=c.add(E),o=A?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:c,iu:i,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,b)=>(function(E,I){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:C})}};return A(E)-A(I)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(i),s=s??!1;const d=n&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Wl(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new CN(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new AN(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tb="SyncEngine";class dU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class hU{constructor(e){this.key=e,this.hu=!1}}class fU{constructor(e,n,i,s,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Po((d=>GC(d)),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(Ce.comparator),this.Au=new Map,this.Ru=new Fv,this.Vu={},this.mu=new Map,this.fu=Xl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mU(t,e,n=!0){const i=MN(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await NN(i,e,n,!0),s}async function pU(t,e){const n=MN(t);await NN(n,e,!0,!1)}async function NN(t,e,n,i){const s=await Pz(t.localStore,xr(e)),o=s.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return i&&(d=await gU(t,e,o,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&_N(t.remoteStore,s),d}async function gU(t,e,n,i,s){t.pu=(b,_,E)=>(async function(A,C,O,z){let L=C.view.ru(O);L.Cs&&(L=await jE(A.localStore,C.query,!1).then((({documents:S})=>C.view.ru(S,L))));const $=z&&z.targetChanges.get(C.targetId),ne=z&&z.targetMismatches.get(C.targetId)!=null,te=C.view.applyChanges(L,A.isPrimaryClient,$,ne);return KE(A,C.targetId,te.au),te.snapshot})(t,b,_,E);const o=await jE(t.localStore,e,!0),c=new uU(e,o.Qs),d=c.ru(o.documents),h=_d.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=c.applyChanges(d,t.isPrimaryClient,h);KE(t,n,f.au);const g=new dU(e,n,c);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function yU(t,e,n){const i=Ve(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!Cm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ty(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&$v(i.remoteStore,s.targetId),Ay(i,s.targetId)})).catch(oc)):(Ay(i,s.targetId),await Ty(i.localStore,s.targetId,!0))}async function vU(t,e){const n=Ve(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$v(n.remoteStore,i.targetId))}async function bU(t,e,n){const i=AU(t);try{const s=await(function(c,d){const h=Ve(c),f=Xe.now(),g=d.reduce(((E,I)=>E.add(I.key)),Ye());let b,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=ys(),A=Ye();return h.Ns.getEntries(E,g).next((C=>{I=C,I.forEach(((O,z)=>{z.isValidDocument()||(A=A.add(O))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,I))).next((C=>{b=C;const O=[];for(const z of d){const L=O8(z,b.get(z.key).overlayedDocument);L!=null&&O.push(new Ma(z.key,L,LC(L.value.mapValue),Ei.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,O,d)})).next((C=>{_=C;const O=C.applyToLocalDocumentSet(b,A);return h.documentOverlayCache.saveOverlays(E,C.batchId,O)}))})).then((()=>({batchId:_.batchId,changes:QC(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Nt(Ke)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(i,s.batchId,n),await xd(i,s.changes),await Om(i.remoteStore)}catch(s){const o=Xv(s,"Failed to persist write");n.reject(o)}}async function RN(t,e){const n=Ve(t);try{const i=await Dz(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=n.Au.get(o);c&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?it(c.hu,14607):s.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await xd(n,i,e)}catch(i){await oc(i)}}function GE(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const h=Ve(c);h.onlineState=d;let f=!1;h.queries.forEach(((g,b)=>{for(const _ of b.Sa)_.va(d)&&(f=!0)})),f&&Jv(h)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _U(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let c=new Nt(Ce.comparator);c=c.insert(o,Cn.newNoDocument(o,Oe.min()));const d=Ye().add(o),h=new km(Oe.min(),new Map,new Nt(Ke),c,d);await RN(i,h),i.du=i.du.remove(o),i.Au.delete(e),nb(i)}else await Ty(i.localStore,e,!1).then((()=>Ay(i,e,n))).catch(oc)}async function wU(t,e){const n=Ve(t),i=e.batch.batchId;try{const s=await kz(n.localStore,e);kN(n,i,null),IN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xd(n,s)}catch(s){await oc(s)}}async function xU(t,e,n){const i=Ve(t);try{const s=await(function(c,d){const h=Ve(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,d).next((b=>(it(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);kN(i,e,n),IN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await xd(i,s)}catch(s){await oc(s)}}function IN(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function kN(t,e,n){const i=Ve(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Ay(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||DN(t,i)}))}function DN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($v(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),nb(t))}function KE(t,e,n){for(const i of n)i instanceof AN?(t.Ru.addReference(i.key,e),TU(t,i)):i instanceof CN?(ve(tb,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||DN(t,i.key)):ke(19791,{wu:i})}function TU(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ve(tb,"New document in limbo: "+n),t.Eu.add(i),nb(t))}function nb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ce(vt.fromString(e)),i=t.fu.next();t.Au.set(i,new hU(n)),t.du=t.du.insert(n,i),_N(t.remoteStore,new ma(xr(Am(n.path)),i,"TargetPurposeLimboResolution",Tm.ce))}}async function xd(t,e,n){const i=Ve(t),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,h)=>{c.push(i.pu(h,e,n).then((f=>{if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){s.push(f);const g=qv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),i.Pu.H_(s),await(async function(h,f){const g=Ve(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ue.forEach(f,(_=>ue.forEach(_.Es,(E=>g.persistence.referenceDelegate.addReference(b,_.targetId,E))).next((()=>ue.forEach(_.ds,(E=>g.persistence.referenceDelegate.removeReference(b,_.targetId,E)))))))))}catch(b){if(!lc(b))throw b;ve(Hv,"Failed to update sequence numbers: "+b)}for(const b of f){const _=b.targetId;if(!b.fromCache){const E=g.Ms.get(_),I=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(I);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function EU(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){ve(tb,"User change. New user:",e.toKey());const i=await gN(n.localStore,e);n.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new ye(oe.CANCELLED,c))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xd(n,i.Ls)}}function SU(t,e){const n=Ve(t),i=n.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let s=Ye();const o=n.Iu.get(e);if(!o)return s;for(const c of o){const d=n.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function MN(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_U.bind(null,e),e.Pu.H_=lU.bind(null,e.eventManager),e.Pu.yu=cU.bind(null,e.eventManager),e}function AU(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xU.bind(null,e),e}class nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Iz(this.persistence,new Cz,e.initialUser,this.serializer)}Cu(e){return new pN(Bv.mi,this.serializer)}Du(e){return new jz}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nm.provider={build:()=>new nm};class CU extends nm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){it(this.persistence.referenceDelegate instanceof em,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hz(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new pN((i=>em.mi(i,n)),this.serializer)}}class Cy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EU.bind(null,this.syncEngine),await sU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oU})()}createDatastore(e){const n=Dm(e.databaseInfo.databaseId),i=(function(o){return new Bz(o)})(e.databaseInfo);return(function(o,c,d,h){return new Gz(o,c,d,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,o,c,d){return new Yz(i,s,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>GE(this.syncEngine,n,0)),(function(){return UE.v()?new UE:new Lz})())}createSyncEngine(e,n){return(function(s,o,c,d,h,f,g){const b=new fU(s,o,c,d,h,f);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ve(n);ve(ko,"RemoteStore shutting down."),i.Ea.add(5),await wd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cy.provider={build:()=>new Cy};class ib{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Na="FirestoreClient";class NU{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=Iv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{ve(Na,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ve(Na,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function _0(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Na,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await gN(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function YE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RU(t);ve(Na,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>BE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>BE(e.remoteStore,s))),t._onlineComponents=e}async function RU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Na,"Using user provided OfflineComponentProvider");try{await _0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Gl("Error using user provided cache. Falling back to memory cache: "+n),await _0(t,new nm)}}else ve(Na,"Using default OfflineComponentProvider"),await _0(t,new CU(void 0));return t._offlineComponents}async function ON(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Na,"Using user provided OnlineComponentProvider"),await YE(t,t._uninitializedComponentsProvider._online)):(ve(Na,"Using default OnlineComponentProvider"),await YE(t,new Cy))),t._onlineComponents}function IU(t){return ON(t).then((e=>e.syncEngine))}async function im(t){const e=await ON(t),n=e.eventManager;return n.onListen=mU.bind(null,e.syncEngine),n.onUnlisten=yU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vU.bind(null,e.syncEngine),n}function kU(t,e,n={}){const i=new cs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new ib({next:_=>{g.Nu(),c.enqueueAndForget((()=>Zv(o,b)));const E=_.docs.has(d);!E&&_.fromCache?f.reject(new ye(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new ye(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new eb(Am(d.path),g,{includeMetadataChanges:!0,qa:!0});return Wv(o,b)})(await im(t),t.asyncQueue,e,n,i))),i.promise}function DU(t,e,n={}){const i=new cs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new ib({next:_=>{g.Nu(),c.enqueueAndForget((()=>Zv(o,b))),_.fromCache&&h.source==="server"?f.reject(new ye(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new eb(d,g,{includeMetadataChanges:!0,qa:!0});return Wv(o,b)})(await im(t),t.asyncQueue,e,n,i))),i.promise}function PN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const QE=new Map;const VN="firestore.googleapis.com",XE=!0;class WE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VN,this.ssl=XE}else this.host=e.host,this.ssl=e.ssl??XE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uz)throw new ye(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pm{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LL;switch(i.type){case"firstParty":return new BL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=QE.get(n);i&&(ve("ComponentProvider","Removing Datastore"),QE.delete(n),i.terminate())})(this),Promise.resolve()}}function MU(t,e,n,i={}){t=$n(t,Pm);const s=rc(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;s&&(R2(`https://${d}`),I2("Firestore",!0)),o.host!==VN&&o.host!==d&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:s,emulatorOptions:i};if(!Ao(h,c)&&(t._setSettings(h),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=An.MOCK_USER;else{f=qV(i.mockUserToken,t._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ye(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new An(b)}t._authCredentials=new zL(new AC(f,g))}}class Ts{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Pt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(vd(n,Pt._jsonSchema))return new Pt(e,i||null,new Ce(vt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Zt("string",Pt._jsonSchemaVersion),referencePath:Zt("string")};class _a extends Ts{constructor(e,n,i){super(e,n,Am(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ce(e))}withConverter(e){return new _a(this.firestore,e,this._path)}}function pr(t,e,...n){if(t=Ct(t),CC("collection","path",e),t instanceof Pm){const i=vt.fromString(e,...n);return uE(i),new _a(t,null,i)}{if(!(t instanceof Pt||t instanceof _a))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return uE(i),new _a(t.firestore,null,i)}}function Ot(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=Iv.newId()),CC("doc","path",e),t instanceof Pm){const i=vt.fromString(e,...n);return cE(i),new Pt(t,null,new Ce(i))}{if(!(t instanceof Pt||t instanceof _a))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return cE(i),new Pt(t.firestore,t instanceof _a?t.converter:null,new Ce(i))}}const ZE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vN(this,"async_queue_retry"),this._c=()=>{const i=b0();i&&ve(ZE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=b0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=b0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lc(e))throw e;ve(ZE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,gs("INTERNAL UNHANDLED ERROR: ",eS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Qv.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ke(47125,{Pc:eS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function tS(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class vs extends Pm{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new JE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function OU(t,e){const n=typeof t=="object"?t:O2(),i=typeof t=="string"?t:Kf,s=_v(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=FV("firestore");o&&MU(s,...o)}return s}function Vm(t){if(t._terminated)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PU(t),t._firestoreClient}function PU(t){const e=t._freezeSettings(),n=(function(s,o,c,d){return new s8(s,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new NU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(t._componentsProvider))}class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(wn.fromBase64String(e))}catch(n){throw new ye(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vd(e,wi._jsonSchema))return wi.fromBase64String(e.bytes)}}wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:Zt("string",wi._jsonSchemaVersion),bytes:Zt("string")};class jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rb{constructor(e){this._methodName=e}}class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(vd(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Zt("string",Er._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};class Sr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vd(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sr(e.vectorValues);throw new ye(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Zt("string",Sr._jsonSchemaVersion),vectorValues:Zt("object")};const VU=/^__.*__$/;class jU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms):new bd(e,this.data,n,this.fieldTransforms)}}class jN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:t})}}class sb{constructor(e,n,i,s,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LN(this.Ac)&&VU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dm(e)}Cc(e,n,i,s=!1){return new sb({Ac:e,methodName:n,Dc:i,path:vn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lm(t){const e=t._freezeSettings(),n=Dm(t._databaseId);return new LU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zN(t,e,n,i,s,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);ab("Data must be an object, but it was:",c,i);const d=UN(i,c);let h,f;if(o.merge)h=new ri(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const _=Ny(e,b,n);if(!c.contains(_))throw new ye(oe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);BN(g,_)||g.push(_)}h=new ri(g),f=c.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=c.fieldTransforms;return new jU(new qn(d),h,f)}class zm extends rb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zm}}function zU(t,e,n,i){const s=t.Cc(1,e,n);ab("Data must be an object, but it was:",s,i);const o=[],c=qn.empty();Da(i,((h,f)=>{const g=ob(e,h,n);f=Ct(f);const b=s.yc(g);if(f instanceof zm)o.push(g);else{const _=Td(f,b);_!=null&&(o.push(g),c.set(g,_))}}));const d=new ri(o);return new jN(c,d,s.fieldTransforms)}function UU(t,e,n,i,s,o){const c=t.Cc(1,e,n),d=[Ny(e,i,n)],h=[s];if(o.length%2!=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(Ny(e,o[_])),h.push(o[_+1]);const f=[],g=qn.empty();for(let _=d.length-1;_>=0;--_)if(!BN(f,d[_])){const E=d[_];let I=h[_];I=Ct(I);const A=c.yc(E);if(I instanceof zm)f.push(E);else{const C=Td(I,A);C!=null&&(f.push(E),g.set(E,C))}}const b=new ri(f);return new jN(g,b,c.fieldTransforms)}function FU(t,e,n,i=!1){return Td(n,t.Cc(i?4:3,e))}function Td(t,e){if(FN(t=Ct(t)))return ab("Unsupported field value:",e,t),UN(t,e);if(t instanceof rb)return(function(i,s){if(!LN(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const d of i){let h=Td(d,s.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(t,e)}return(function(i,s){if((i=Ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return N8(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Xe.fromDate(i);return{timestampValue:Jf(s.serializer,o)}}if(i instanceof Xe){const o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jf(s.serializer,o)}}if(i instanceof Er)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wi)return{bytesValue:oN(s.serializer,i._byteString)};if(i instanceof Pt){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Uv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Sr)return(function(c,d){return{mapValue:{fields:{[VC]:{stringValue:jC},[Yf]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return Vv(d.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${xm(i)}`)})(t,e)}function UN(t,e){const n={};return IC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,((i,s)=>{const o=Td(s,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function FN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Er||t instanceof wi||t instanceof Pt||t instanceof rb||t instanceof Sr)}function ab(t,e,n){if(!FN(n)||!NC(n)){const i=xm(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ny(t,e,n){if((e=Ct(e))instanceof jm)return e._internalPath;if(typeof e=="string")return ob(t,e);throw rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const BU=new RegExp("[~\\*/\\[\\]]");function ob(t,e,n){if(e.search(BU)>=0)throw rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jm(...e.split("."))._internalPath}catch{throw rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rm(t,e,n,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${i}`),c&&(h+=` in document ${s}`),h+=")"),new ye(oe.INVALID_ARGUMENT,d+t+h)}function BN(t,e){return t.some((n=>n.isEqual(e)))}class qN{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Um("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qU extends qN{data(){return super.data()}}function Um(t,e){return typeof e=="string"?ob(t,e):e instanceof jm?e._internalPath:e._delegate._internalPath}function HN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lb{}class cb extends lb{}function zi(t,e,...n){let i=[];e instanceof lb&&i.push(e),i=i.concat(n),(function(o){const c=o.filter((h=>h instanceof ub)).length,d=o.filter((h=>h instanceof Fm)).length;if(c>1||c>0&&d>0)throw new ye(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class Fm extends cb{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Fm(e,n,i)}_apply(e){const n=this._parse(e);return $N(e._query,n),new Ts(e.firestore,e.converter,vy(e._query,n))}_parse(e){const n=Lm(e.firestore);return(function(o,c,d,h,f,g,b){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){rS(b,g);const I=[];for(const A of b)I.push(iS(h,o,A));_={arrayValue:{values:I}}}else _=iS(h,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||rS(b,g),_=FU(d,c,b,g==="in"||g==="not-in");return Wt.create(f,g,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ia(t,e,n){const i=e,s=Um("where",t);return Fm._create(s,i,n)}class ub extends lb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ub(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Bi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let c=s;const d=o.getFlattenedFilters();for(const h of d)$N(c,h),c=vy(c,h)})(e._query,n),new Ts(e.firestore,e.converter,vy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class db extends cb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new db(e,n)}_apply(e){const n=(function(s,o,c){if(s.startAt!==null)throw new ye(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(o,c)})(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new cc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function id(t,e="asc"){const n=e,i=Um("orderBy",t);return db._create(i,n)}class hb extends cb{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new hb(e,n,i)}_apply(e){return new Ts(e.firestore,e.converter,Xf(e._query,this._limit,this._limitType))}}function nS(t){return hb._create("limit",t,"F")}function iS(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ye(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$C(e)&&n.indexOf("/")!==-1)throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ce.isDocumentKey(i))throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vE(t,new Ce(i))}if(n instanceof Pt)return vE(t,n._key);throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(n)}.`)}function rS(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $N(t,e){const n=(function(s,o){for(const c of s)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HU{convertValue(e,n="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Da(e,((s,o)=>{i[s]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[Yf].arrayValue?.values?.map((i=>Ut(i.doubleValue)));return new Sr(n)}convertGeoPoint(e){return new Er(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Sm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=Ea(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);it(fN(i),9688,{name:e});const s=new Zu(i.get(1),i.get(3)),o=new Ce(i.popFirst(5));return s.isEqual(n)||gs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function GN(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends qN{constructor(e,n,i,s,o,c){super(e,n,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Um("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:Zt("string",xo._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Cf extends xo{data(e={}){return super.data(e)}}class To{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Su(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Cf(this._firestore,this._userDataWriter,i.key,i,new Su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const h=new Cf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Su(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Cf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Su(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:$U(d.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $U(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}function GU(t){t=$n(t,Pt);const e=$n(t.firestore,vs);return kU(Vm(e),t._key).then((n=>KN(e,t,n)))}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:Zt("string",To._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class fb extends HU{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Zl(t){t=$n(t,Ts);const e=$n(t.firestore,vs),n=Vm(e),i=new fb(e);return HN(t._query),DU(n,t._query).then((s=>new To(e,i,t,s)))}function ha(t,e,n){t=$n(t,Pt);const i=$n(t.firestore,vs),s=GN(t.converter,e,n);return qm(i,[zN(Lm(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ei.none())])}function Ed(t,e,n,...i){t=$n(t,Pt);const s=$n(t.firestore,vs),o=Lm(s);let c;return c=typeof(e=Ct(e))=="string"||e instanceof jm?UU(o,"updateDoc",t._key,e,n,i):zU(o,"updateDoc",t._key,e),qm(s,[c.toMutation(t._key,Ei.exists(!0))])}function Jl(t){return qm($n(t.firestore,vs),[new jv(t._key,Ei.none())])}function Bm(t,e){const n=$n(t.firestore,vs),i=Ot(t),s=GN(t.converter,e);return qm(n,[zN(Lm(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ei.exists(!1))]).then((()=>i))}function Eo(t,...e){t=Ct(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||tS(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tS(e[i])){const h=e[i];e[i]=h.next?.bind(h),e[i+1]=h.error?.bind(h),e[i+2]=h.complete?.bind(h)}let o,c,d;if(t instanceof Pt)c=$n(t.firestore,vs),d=Am(t._key.path),o={next:h=>{e[i]&&e[i](KN(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=$n(t,Ts);c=$n(h.firestore,vs),d=h._query;const f=new fb(c);o={next:g=>{e[i]&&e[i](new To(c,f,h,g))},error:e[i+1],complete:e[i+2]},HN(t._query)}return(function(f,g,b,_){const E=new ib(_),I=new eb(g,E,b);return f.asyncQueue.enqueueAndForget((async()=>Wv(await im(f),I))),()=>{E.Nu(),f.asyncQueue.enqueueAndForget((async()=>Zv(await im(f),I)))}})(Vm(c),d,s,o)}function qm(t,e){return(function(i,s){const o=new cs;return i.asyncQueue.enqueueAndForget((async()=>bU(await IU(i),s,o))),o.promise})(Vm(t),e)}function KN(t,e,n){const i=n.docs.get(e._key),s=new fb(t);return new xo(t,s,e._key,i,new Su(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ac=s})(sc),Hl(new Co("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),d=new vs(new UL(i.getProvider("auth-internal")),new qL(c,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:n,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),va(sE,aE,e),va(sE,aE,"esm2020")})();const KU={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},YN=M2(KU),ra=OL(YN),ct=OU(YN),w0=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Si=mm()(gv(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const s=(await y9(ra,e,n)).user;if(!s.emailVerified)return await YT(ra),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${s.email} not verified`),!1;const o=w0(s);return t({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i),console.error("Error code:",i.code),console.error("Error message:",i.message);let s="Login failed. Please try again.";if(i.code)switch(i.code){case"auth/invalid-email":s="Invalid email address.";break;case"auth/user-disabled":s="This account has been disabled.";break;case"auth/user-not-found":s="No account found with this email.";break;case"auth/wrong-password":s="Incorrect password.";break;case"auth/too-many-requests":s="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":s="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${i.code}`),s="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",i),s="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:s}),!1}},register:async(e,n,i)=>{t({isLoading:!0,loginError:null});try{const o=(await g9(ra,e,n)).user;await b9(o,{displayName:i}),await KT(o);const c=w0(o);return t({currentUser:c,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${c.email}, verification email sent`),!0}catch(s){console.error("Registration error:",s);let o="Registration failed. Please try again.";switch(s.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await YT(ra),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await p9(ra,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let i="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:i}),!1}},sendEmailVerification:async()=>{const e=ra.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await KT(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let i="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":i="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:i}),!1}},resendEmailVerification:async()=>{const e=Si.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,i=60*1e3;if(n<i){const s=Math.ceil((i-n)/1e3);return t({loginError:`Please wait ${s} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=ra.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const i=Oo.credential(n.email,e);return await m9(n,i),await T9(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(i){console.error("Account deletion error:",i);let s="Failed to delete account. Please try again.";switch(i.code){case"auth/requires-recent-login":s="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":s="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":s="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:s}),!1}},initializeAuth:()=>Si.getState().isInitialized?()=>{}:(t({isInitialized:!1}),x9(ra,i=>{const s=Date.now(),o=Si.getState(),c=i?w0(i):null,d=o.lastAuthTime&&s-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&d&&!c,g=i?i.emailVerified:!0,b=i&&g||!!f,_=i?c:f?o.currentUser:null;t({currentUser:_,isAuthenticated:b,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:i&&g?s:o.lastAuthTime}),_?console.log(` Auth state: User is signed in (${_.email})`,f?"(offline grace period)":g?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),YU=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,QN=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},mb=t=>{const e=t.date?.toDate?.()?t.date.toDate().toISOString():t.date,n=new Date(e),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return{id:t.id,date:e,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:YU(t.type),transferId:t.transferId??void 0,userId:t.userId,month:i,isAutomatic:t.isAutomatic??void 0}},QU=(t,e)=>{const n={id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:Xe.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:QN(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(n.isAutomatic=!0),n},XU=t=>{const e={envelopeId:t.envelopeId,amount:t.amount.toString(),date:Xe.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:QN(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(e.isAutomatic=!0),e},x0=t=>pr(ct,"users",t,"transactions"),yr={subscribeToTransactions:(t,e)=>{const n=zi(x0(t),id("date","desc"));return Eo(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=zi(x0(t),id("date","desc")),i=(await Zl(e)).docs.map(s=>{const o={id:s.id,...s.data()};return mb(o)});return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description,month:s.month}))),i},addTransaction:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",i);const s=await Bm(x0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(t,e,n)=>{const i=Ot(ct,"users",t,"transactions",e);return await Ed(i,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Ot(ct,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Jl(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},T0=t=>pr(ct,"users",t,"envelopes"),ns={subscribeToEnvelopes:(t,e)=>{const n=zi(T0(t),id("orderIndex","asc"));return Eo(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=T0(t),s=(await Zl(e)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const d=o.orderIndex??0,h=c.orderIndex??0;return d-h});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await Bm(T0(e),i)).id,...i,userId:e}}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Ot(ct,"users",t,"envelopes",e.id);return await ha(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const i=Ot(ct,"users",t,"envelopes",e);return await Ed(i,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Ot(ct,"users",t,"envelopes",e);await Jl(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},WU=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>{const s=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const c=o.currentBalance&&o.currentBalance>0,d=c?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},h=`temp-${Date.now()}-${Math.random()}`,f={...d,id:h};if(t(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),c){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${h})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:h,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(h);console.log(` Test balance for temp envelope ${h}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=n(),b={...d,id:"",userId:g},_=await ns.createEnvelope(b);console.log(" Firebase envelope creation successful:",_);const E={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId,createdAt:_.createdAt,isPiggybank:_.isPiggybank,piggybankConfig:_.piggybankConfig};if(t(I=>({envelopes:I.envelopes.map(A=>A.id===h?E:A),isLoading:!1,pendingSync:!1})),c){console.log(` Updating transactions from temp envelope ID ${h} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t(A=>({transactions:A.transactions.map(C=>C.envelopeId===h?{...C,envelopeId:_.id}:C)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const I=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${I.length} transactions to sync for envelope ${_.id}:`,I.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of I)try{console.log(" Syncing transaction:",A);const C={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:Xe.fromDate(new Date(A.date))},O=await yr.addTransaction(C);console.log(" Transaction synced:",O);const z=s(O);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${O.id}`),t(L=>({transactions:L.transactions.map($=>$.id===A.id?z:$)}))}catch(C){console.error(` Failed to sync transaction ${A.id}:`,C)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}return _}catch(g){if(console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g))return console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null}),f;throw console.log(" Real error - removing temp envelope"),t(b=>({envelopes:b.envelopes.filter(_=>_.id!==h),transactions:b.transactions.filter(_=>_.envelopeId!==h),error:g.message,isLoading:!1})),g}return f},addToEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,c,d,h,f)=>{console.log(`Transferring ${d} from ${o} to ${c} with note: ${h}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),b=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===c)?.name||"envelope"}`,amount:d,envelopeId:o,date:g,type:"Expense",transferId:b,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:d,envelopeId:c,date:g,type:"Income",transferId:b,reconciled:!1})},deleteEnvelope:async o=>{const c=e().transactions.filter(d=>d.envelopeId===o);t(d=>({envelopes:d.envelopes.filter(h=>h.id!==o),transactions:d.transactions.filter(h=>h.envelopeId!==o),isLoading:!0}));try{const d=n();await ns.deleteEnvelope(d,o);for(const h of c)h.id&&!h.id.startsWith("temp-")&&await yr.deleteTransaction(d,h.id);await e().removeEnvelopeFromTemplates(o),t({isLoading:!1})}catch(d){if(console.error("Delete Envelope Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=e().envelopes.find(f=>f.id===o);t(h?f=>({envelopes:[...f.envelopes,h],transactions:[...f.transactions,...c],error:d.message,isLoading:!1}):{error:d.message,isLoading:!1})}}},updateEnvelope:async o=>{t(c=>({envelopes:c.envelopes.map(d=>d.id===o.id?o:d),isLoading:!0}));try{const c=n();await ns.saveEnvelope(c,o),t({isLoading:!1})}catch(c){console.error("Update Envelope Failed:",c),i(c)?t({isLoading:!1,pendingSync:!0,error:null}):t({error:c.message,isLoading:!1})}},renameEnvelope:async(o,c)=>{t(d=>({envelopes:d.envelopes.map(h=>h.id===o?{...h,name:c}:h),isLoading:!0}));try{t({isLoading:!1})}catch(d){console.error("Rename Envelope Failed:",d),t({error:d.message,isLoading:!1})}}}},E0=t=>pr(ct,"users",t,"distributionTemplates"),ii={subscribeToDistributionTemplates:(t,e)=>{const n=zi(E0(t),id("lastUsed","desc"));return Eo(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllDistributionTemplates:async t=>{const e=zi(E0(t),id("lastUsed","desc"));return(await Zl(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await Bm(E0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(t,e)=>{const n=Ot(ct,"users",t,"distributionTemplates",e.id);return await ha(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const i=Ot(ct,"users",t,"distributionTemplates",e);return await Ed(i,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Ot(ct,"users",t,"distributionTemplates",e);await Jl(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},ZU=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({saveTemplate:async(s,o,c)=>{console.log(" saveTemplate called with:",{name:s,distributions:o,note:c});try{const d=n(),h={id:`temp-${Date.now()}`,userId:d,name:s,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=ii.createDistributionTemplate(h),g=new Promise((_,E)=>setTimeout(()=>E(new Error("Firebase timeout - likely offline")),5e3)),b=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",b),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",b),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(d){console.error(" Failed to save template to Firebase, saving locally:",d),console.log(" Error details:",{name:d?.name||"Unknown",message:d?.message||"Unknown",code:d?.code||"Unknown",isNetworkError:i(d)});const h=n(),f={id:`local-${Date.now()}`,userId:h,name:s,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),t(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},updateTemplate:async s=>{try{const o=n();await ii.updateDistributionTemplate(o,s.id,{name:s.name,note:s.note,distributions:s.distributions,lastUsed:s.lastUsed}),t(c=>({distributionTemplates:c.distributionTemplates.map(d=>d.id===s.id?s:d)})),console.log(" Template updated in Firebase:",s.id)}catch(o){throw console.error(" Failed to update template in Firebase:",o),o}},deleteTemplate:async s=>{try{const o=n();await ii.deleteDistributionTemplate(o,s),t(c=>({distributionTemplates:c.distributionTemplates.filter(d=>d.id!==s)})),console.log(" Template deleted from Firebase:",s)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const s=e().distributionTemplates,o=e().envelopes,c=new Set(o.map(h=>h.id));let d=0;for(const h of s){const f={...h.distributions},g={};for(const[b,_]of Object.entries(h.distributions))c.has(b)&&(g[b]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${h.name}`);const b=n();await ii.deleteDistributionTemplate(b,h.id),d++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${h.name} - removed orphaned envelope references`);const b=n();await ii.updateDistributionTemplate(b,h.id,{distributions:g}),d++}}d>0?console.log(` Cleaned up ${d} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(s,o)=>{console.log(` Updating template references: ${s}  ${o}`);const c=e().distributionTemplates;let d=0;for(const h of c)if(h.distributions[s]!==void 0){const f={...h.distributions};f[o]=f[s],delete f[s],console.log(` Updating template: ${h.name}`);const g=n();await ii.updateDistributionTemplate(g,h.id,{distributions:f}),d++}d>0&&console.log(` Updated ${d} templates with new envelope reference`)},removeEnvelopeFromTemplates:async s=>{console.log(` Removing envelope ${s} from all templates`);const o=e().distributionTemplates;let c=0,d=0;for(const h of o)if(h.distributions[s]!==void 0){const f={...h.distributions};if(delete f[s],Object.keys(f).length===0){console.log(` Deleting template ${h.name} - no envelopes left`);const g=n();await ii.deleteDistributionTemplate(g,h.id),d++}else{console.log(` Removing envelope from template: ${h.name}`);const g=n();await ii.updateDistributionTemplate(g,h.id,{distributions:f}),c++}}(c>0||d>0)&&console.log(` Updated ${c} templates, deleted ${d} empty templates`)}}),S0=t=>pr(ct,"users",t,"appSettings"),is={subscribeToAppSettings:(t,e)=>{const n=zi(S0(t),nS(1));return Eo(n,s=>{if(s.empty){e(null);return}const o=s.docs.map(c=>({id:c.id,...c.data()}))[0];e(o)})},getAppSettings:async t=>{const e=zi(S0(t),nS(1)),n=await Zl(e);if(n.empty)return null;const i=n.docs[0];return{id:i.id,...i.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const i=await Bm(S0(e),n);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...n,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(t,e)=>{const n=Ot(ct,"users",t,"appSettings",e.id);return await ha(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const i=Ot(ct,"users",t,"appSettings",e);return await Ed(i,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Ot(ct,"users",t,"appSettings",e);await Jl(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},XN=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async i=>{const s=e();if(!s.appSettings){try{await XN({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const o=e();if(o.appSettings){const c={...o.appSettings,...i};t({appSettings:c});const d=n();await is.updateAppSettings(d,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{t(c=>({appSettings:{...c.appSettings,...i}}));const o=n();await is.updateAppSettings(o,s.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),t(c=>({appSettings:c.appSettings})),o}},initializeAppSettings:async()=>{try{const s={userId:n(),theme:"system"},o=await is.createAppSettings(s);t({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const s=n();t({appSettings:{id:"local-settings",userId:s,theme:"system"}})}}});class Sn{static instance;static getInstance(){return Sn.instance||(Sn.instance=new Sn),Sn.instance}async getMonthlyBudget(e,n){try{const i=Ot(ct,"monthlyBudgets",`${e}_${n}`),s=await GU(i);if(s.exists()){const o=s.data();return{id:o.id,userId:o.userId,month:o.month,totalIncome:parseFloat(o.totalIncome),availableToBudget:parseFloat(o.availableToBudget),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}return null}catch(i){throw console.error("Error getting monthly budget:",i),i}}async createOrUpdateMonthlyBudget(e){try{const n=Xe.now(),i=`${e.userId}_${e.month}`,s={id:i,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await ha(Ot(ct,"monthlyBudgets",i),s),{...e,id:i,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const i=zi(pr(ct,"incomeSources"),ia("userId","==",e),ia("month","==",n));return(await Zl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,month:c.month,name:c.name,amount:parseFloat(c.amount),frequency:c.frequency,category:c.category,createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}}).sort((o,c)=>new Date(o.createdAt).getTime()-new Date(c.createdAt).getTime())}catch(i){throw console.error("Error getting income sources:",i),i}}async createIncomeSource(e){try{const n=Xe.now(),i=Ot(pr(ct,"incomeSources")),s={id:i.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await ha(i,s),{...e,frequency:e.frequency||"monthly",id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const i=zi(pr(ct,"envelopeAllocations"),ia("userId","==",e),ia("month","==",n));return(await Zl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,envelopeId:c.envelopeId,month:c.month,budgetedAmount:parseFloat(c.budgetedAmount),createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}}).sort((o,c)=>new Date(o.createdAt).getTime()-new Date(c.createdAt).getTime())}catch(i){throw console.error("Error getting envelope allocations:",i),i}}async createEnvelopeAllocation(e){try{const n=Xe.now(),i=Ot(pr(ct,"envelopeAllocations")),s={id:i.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await ha(i,s),{...e,id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,i){try{const s=await this.getIncomeSources(e,n);for(const f of s)await this.createIncomeSource({...f,month:i});const o=await this.getEnvelopeAllocations(e,n);for(const f of o)await this.createEnvelopeAllocation({...f,month:i});const c=s.reduce((f,g)=>f+g.amount,0),d=o.reduce((f,g)=>f+g.budgetedAmount,0),h=c-d;await this.createOrUpdateMonthlyBudget({userId:e,month:i,totalIncome:c,availableToBudget:h})}catch(s){throw console.error("Error copying month data:",s),s}}async deleteIncomeSource(e){try{const n=Ot(ct,"incomeSources",e);await Jl(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(e,n){try{const i=Ot(ct,"incomeSources",e),s={...n,updatedAt:Xe.now()};await ha(i,s,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e){try{const n=Ot(ct,"envelopeAllocations",e);await Jl(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(e,n){try{const i=Ot(ct,"envelopeAllocations",e),s={...n,updatedAt:Xe.now()};await ha(i,s,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,n){try{const[i,s]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),o=i.map(d=>this.deleteIncomeSource(d.id)),c=s.map(d=>this.deleteEnvelopeAllocation(d.id));await Promise.all([...o,...c]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(i){throw console.error("Error clearing month data:",i),i}}async calculateAvailableToBudget(e,n){try{const i=await this.getIncomeSources(e,n),s=await this.getEnvelopeAllocations(e,n),o=i.reduce((d,h)=>d+h.amount,0),c=s.reduce((d,h)=>d+h.budgetedAmount,0);return o-c}catch(i){throw console.error("Error calculating available to budget:",i),i}}subscribeToMonthlyBudget(e,n,i){const s=Ot(ct,"monthlyBudgets",`${e}_${n}`);return Eo(s,o=>{if(o.exists()){const c=o.data();i(c)}else i(null)})}subscribeToIncomeSources(e,n,i){const s=zi(pr(ct,"incomeSources"),ia("userId","==",e),ia("month","==",n));return Eo(s,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()})).sort((d,h)=>{const f=d.createdAt?.toDate?.()?.getTime()||0,g=h.createdAt?.toDate?.()?.getTime()||0;return f-g});i(c)})}subscribeToEnvelopeAllocations(e,n,i){const s=zi(pr(ct,"envelopeAllocations"),ia("userId","==",e),ia("month","==",n));return Eo(s,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()}));i(c)})}}const JU=t=>t?{id:t.id,userId:t.userId,month:t.month,totalIncome:parseFloat(t.totalIncome),availableToBudget:parseFloat(t.availableToBudget),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}:null,e7=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),t7=t=>({id:t.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:parseFloat(t.budgetedAmount),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),A0=(t,e,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const i=Sn.getInstance(),s=i.subscribeToMonthlyBudget(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Monthly budget updated",d?"found":"null");const f=JU(d);t.setState({monthlyBudget:f})}}),o=i.subscribeToIncomeSources(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){const f=d.map(e7),g=new Set,b=f.filter(_=>g.has(_.id)?!1:(g.add(_.id),!0));t.setState({incomeSources:b})}}),c=i.subscribeToEnvelopeAllocations(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Envelope allocations updated",d.length);const f=d.map(t7);t.setState({envelopeAllocations:f})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:s,incomeSources:o,envelopeAllocations:c},console.log(" Monthly budget real-time subscriptions active for month:",n)},sS=()=>{if(window.__monthlyBudgetUnsubscribers){const t=window.__monthlyBudgetUnsubscribers;t.monthlyBudget&&t.monthlyBudget(),t.incomeSources&&t.incomeSources(),t.envelopeAllocations&&t.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},n7=t=>{const{useMonthlyBudgetStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const h=e.getState();h.isOnline&&(h.pendingSync||h.resetPending)&&(console.log(" Auto-syncing pending operations..."),h.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const h=e.getState();if(!h.isOnline&&!h.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(h.pendingSync||h.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(f){console.log(" Periodic retry failed:",f),e.setState({testingConnectivity:!1})}}else h.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(h=>{!h.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});let c=null;e.subscribe(h=>{if(c!==null&&h.currentMonth!==c){console.log(" Month changed from",c,"to",h.currentMonth),sS();const f=n.getState();f.isAuthenticated&&f.currentUser&&A0(e,i(),h.currentMonth)}c=h.currentMonth});const d=n.getState();if(d.isAuthenticated&&d.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const h=e.getState().currentMonth;A0(e,i(),h)}n.subscribe(h=>{if(h.isAuthenticated&&h.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const f=e.getState().currentMonth;A0(e,i(),f)}else!h.isAuthenticated&&!h.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),sS(),e.getState().handleUserLogout())})},i7=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},ts=()=>{const t=Si.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},r7=ts,s7=async(t,e,n)=>{const{transactions:i,addTransaction:s,deleteTransaction:o}=Jt.getState(),c="Monthly Budget Allocation",[d,h]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:t,budgetedAmount:e,month:n,totalTransactions:i.length});const f=i.filter(b=>{if(b.envelopeId!==t||b.description!==c)return!1;try{let _;if(typeof b.date=="string")_=new Date(b.date);else if(b.date?.toDate&&typeof b.date.toDate=="function")_=b.date.toDate();else return!1;return _.getFullYear()===d&&_.getMonth()+1===h}catch{return!1}});console.log(" Found existing transactions:",f.length);for(const b of f)console.log(" Deleting old allocation transaction:",b.id,"amount:",b.amount),await o(b.id);const g=new Bn(e.toString()||"0");if(g.gt(0)){console.log(" Creating new allocation transaction with amount",g.toNumber());const b=new Date(d,h-1,2).toISOString();await s({description:c,amount:g.toNumber(),envelopeId:t,date:b,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},bs=mm()(gv((t,e)=>({currentMonth:i7(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{t({currentMonth:n,isLoading:!0}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{t({isLoading:!0,error:null});const n=ts(),i=e().currentMonth,s=Sn.getInstance(),[o,c,d]=await Promise.all([s.getMonthlyBudget(n,i),s.getIncomeSources(n,i),s.getEnvelopeAllocations(n,i)]);t({monthlyBudget:o,incomeSources:c,envelopeAllocations:d,isLoading:!1}),await e().processMonthlyPiggybankContributions(i)}catch(n){console.error("Error fetching monthly data:",n),t({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const i=ts(),s=e().currentMonth,o=Sn.getInstance();await o.createIncomeSource({...n,userId:i,month:s});const c=await o.getIncomeSources(i,s);t({incomeSources:c})}catch(i){throw console.error("Error creating income source:",i),i}},updateIncomeSource:async(n,i)=>{try{const s={updatedAt:Xe.now()};i.name!==void 0&&(s.name=i.name),i.amount!==void 0&&(s.amount=i.amount.toString()),i.frequency!==void 0&&(s.frequency=i.frequency),i.category!==void 0&&(s.category=i.category);const o=Ot(ct,"incomeSources",n);await Ed(o,s);const c=Sn.getInstance(),d=ts(),h=e().currentMonth,f=await c.getIncomeSources(d,h);t({incomeSources:f})}catch(s){throw console.error("Error updating income source:",s),s}},deleteIncomeSource:async n=>{t(s=>({incomeSources:s.incomeSources.filter(o=>o.id!==n)})),Sn.getInstance().deleteIncomeSource(n).catch(s=>{console.error("Error deleting income source from Firebase:",s)})},restoreIncomeSource:async(n,i)=>{try{t(s=>{const o=[...s.incomeSources];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{incomeSources:o}}),await e().refreshAvailableToBudget()}catch(s){throw console.error("Error restoring income source:",s),s}},createEnvelopeAllocation:async n=>{try{const i=ts(),s=e().currentMonth,o=Sn.getInstance();await o.createEnvelopeAllocation({...n,userId:i,month:s});const c=await o.getEnvelopeAllocations(i,s);t({envelopeAllocations:c})}catch(i){throw console.error("Error creating envelope allocation:",i),i}},updateEnvelopeAllocation:async(n,i)=>{try{const s=ts(),o=e().currentMonth,c=Sn.getInstance(),d={};i.envelopeId!==void 0&&(d.envelopeId=i.envelopeId),i.budgetedAmount!==void 0&&(d.budgetedAmount=i.budgetedAmount.toString()),await c.updateEnvelopeAllocation(n,d);const h=await c.getEnvelopeAllocations(s,o);t({envelopeAllocations:h})}catch(s){throw console.error("Error updating envelope allocation:",s),s}},deleteEnvelopeAllocation:async n=>{t(s=>({envelopeAllocations:s.envelopeAllocations.filter(o=>o.id!==n)})),Sn.getInstance().deleteEnvelopeAllocation(n).catch(s=>{console.error("Error deleting envelope allocation from Firebase:",s)})},restoreEnvelopeAllocation:async(n,i)=>{try{t(s=>{const o=[...s.envelopeAllocations];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{envelopeAllocations:o}}),await e().refreshAvailableToBudget()}catch(s){throw console.error("Error restoring envelope allocation:",s),s}},setEnvelopeAllocation:async(n,i)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:i});const s=e().envelopeAllocations.find(c=>c.envelopeId===n);console.log(" Existing allocation:",s),s?(console.log(" Updating existing allocation..."),await e().updateEnvelopeAllocation(s.id,{budgetedAmount:i}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:i}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const o=e().currentMonth;await s7(n,i,o),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await e().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(s){throw console.error(" Error setting envelope allocation:",s),console.error("Error details:",s instanceof Error?s.message:s),s}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=ts(),i=e().currentMonth,[s,o]=i.split("-").map(Number);let c=s,d=o-1;d<1&&(c=s-1,d=12);const h=`${c}-${d.toString().padStart(2,"0")}`,f=Sn.getInstance(),[g,b]=await Promise.all([f.getIncomeSources(n,h),f.getEnvelopeAllocations(n,h)]);for(const _ of g)await e().createIncomeSource({name:_.name,amount:_.amount});for(const _ of b)await e().setEnvelopeAllocation(_.envelopeId,_.budgetedAmount);await e().processMonthlyPiggybankContributions(i),await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},processMonthlyPiggybankContributions:async n=>{try{console.log(" Processing piggybank contributions for month:",n);const{envelopes:i,transactions:s,addTransaction:o}=Jt.getState(),c=new Date,d=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;if(n>d){console.log(`Skipping piggybank contributions for ${n} - future month beyond ${d}`);return}const h=i.filter(b=>b.isPiggybank&&b.isActive);if(console.log(`Found ${h.length} active piggybanks`),h.length===0){console.log("No piggybanks to process");return}const[f,g]=n.split("-").map(Number);for(const b of h){const _=b.piggybankConfig?.monthlyContribution||0;if(b.piggybankConfig?.paused||!1){console.log(`Skipping ${b.name} - contributions paused`);continue}if(_<=0){console.log(`Skipping ${b.name} - no contribution set`);continue}if(b.createdAt){const C=new Date(b.createdAt),O=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;if(n<O){console.log(`Skipping ${b.name} - month ${n} is before creation month ${O}`);continue}}if(s.find(C=>C.envelopeId===b.id&&C.isAutomatic===!0&&C.month===n&&C.type==="Income")){console.log(`Auto-contribution already exists for ${b.name} in ${n}`);continue}console.log(`Creating auto-contribution for ${b.name}: $${_}`);const A=new Date(f,g-1,1,12,0,0);await o({amount:_,description:`Monthly contribution to ${b.name}`,date:A.toISOString(),envelopeId:b.id,type:"Income",reconciled:!1,isAutomatic:!0}),console.log(` Created auto-contribution for ${b.name}`)}await e().refreshAvailableToBudget()}catch(i){throw console.error("Error processing piggybank contributions:",i),i}},calculateAvailableToBudget:()=>{const n=e(),i=n.incomeSources.reduce((o,c)=>o+c.amount,0),s=n.envelopeAllocations.reduce((o,c)=>o+c.budgetedAmount,0);return i-s},refreshAvailableToBudget:async()=>{try{const n=e(),i=ts(),s=n.currentMonth,o=n.incomeSources.reduce((g,b)=>g+b.amount,0),c=n.envelopeAllocations.reduce((g,b)=>g+b.budgetedAmount,0),d=o-c,h=Sn.getInstance(),f=n.monthlyBudget;if(f){const g={...f,availableToBudget:d,totalIncome:o};await h.createOrUpdateMonthlyBudget(g),t({monthlyBudget:g})}else{const g=await h.createOrUpdateMonthlyBudget({userId:i,month:s,totalIncome:o,availableToBudget:d});t({monthlyBudget:g})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,i)=>{t({incomeSources:n,envelopeAllocations:i,isLoading:!1})},clearMonthData:async()=>{try{const n=ts(),i=e().currentMonth,s=Sn.getInstance(),{transactions:o,deleteTransaction:c}=Jt.getState(),d="Monthly Budget Allocation",[h,f]=i.split("-").map(Number),g=o.filter(b=>{if(b.description!==d)return!1;try{const _=new Date(b.date);return _.getFullYear()===h&&_.getMonth()+1===f}catch{return!1}});for(const b of g)await c(b.id);await s.clearMonthData(n,i),t({incomeSources:[],envelopeAllocations:[]}),await e().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{t({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",version:1,partialize:t=>({})}));n7({useMonthlyBudgetStore:bs,useAuthStore:Si,getCurrentUserId:r7});const a7=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({addTransaction:async s=>{const o=`temp-${Date.now()}-${Math.random()}`,c=n(),d=new Date(s.date),h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;console.log(" Month calculation in addTransaction:",{originalDate:s.date,dateObj:d,calculatedMonth:h,currentMonth:bs.getState().currentMonth});const f={...s,id:o,userId:c,month:h};if(t(g=>({transactions:[...g.transactions,f],isLoading:!0})),s.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${s.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const g=QU(f,c),b=await yr.addTransaction(g);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,b);const _=mb(b);t(E=>({transactions:E.transactions.map(I=>I.id===o?_:I),isLoading:!1,pendingSync:!1}))}catch(g){console.error("Add Transaction Failed:",g),i(g)?t({isLoading:!1,pendingSync:!0,error:null}):t(b=>({transactions:b.transactions.filter(_=>_.id!==o),error:g.message,isLoading:!1}))}},deleteTransaction:async s=>{const o=e().transactions.find(d=>d.id===s);if(!o)return;const c=[s];if(o.transferId){const d=e().transactions.find(h=>h.transferId===o.transferId&&h.id!==s);d&&d.id&&c.push(d.id)}t(d=>({transactions:d.transactions.filter(h=>h.id&&!c.includes(h.id)),isLoading:!0}));try{const d=n(),h=c.filter(f=>!f.startsWith("temp-"));for(const f of h)console.log(` About to delete transaction ID: ${f}`),await yr.deleteTransaction(d,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(d){if(console.error("Delete Transaction Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=c.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);t(f=>({transactions:[...f.transactions,...h],error:d.message,isLoading:!1}))}}},updateTransaction:async s=>{console.log(" updateTransaction called:",s),t(o=>({transactions:o.transactions.map(c=>c.id===s.id?s:c),isLoading:!0}));try{const o=n(),c=yr.updateTransaction(o,s.id,XU(s)),d=new Promise((h,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([c,d]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:o.message,isLoading:!1})}},restoreTransaction:async s=>{t(o=>({transactions:[...o.transactions,s],isLoading:!0}));try{t({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),t({error:o.message,isLoading:!1})}}}),o7=({set:t,get:e,getCurrentUserId:n,isNetworkError:i,loadFallbackData:s,checkOnlineStatus:o,clearUserData:c})=>{const d=async()=>{const A=e(),C=n();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",C),t({isLoading:!0,error:null});try{let O,z,L,$;[O,z,L,$]=await Promise.all([ns.getAllEnvelopes(C).catch(S=>(console.error(" Failed to fetch envelopes:",S),[])),yr.getAllTransactions(C).catch(S=>(console.error(" Failed to fetch transactions:",S),[])),ii.getAllDistributionTemplates(C).catch(S=>(console.error(" Failed to fetch templates:",S),[])),is.getAppSettings(C).catch(S=>(console.error(" Failed to fetch settings:",S),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:O?.length||0,transactions:z?.length||0,templates:L?.length||0,settings:$?"found":"null"}),e().markOnlineFromFirebaseSuccess();const ne=(O?.length||0)>0||(z?.length||0)>0||(L?.length||0)>0;let te=null;ne||(console.log(" No data from Firebase, loading fallback data..."),te=await s(),te&&(console.log(" Using fallback data for initialization"),O=te.envelopes||[],z=te.transactions||[],L=te.distributionTemplates||[],$=te.appSettings||null)),t(S=>{const R=se=>se.map(V=>({...V,date:V.date&&typeof V.date=="object"&&V.date.toDate?V.date.toDate().toISOString():V.date,type:V.type==="income"?"Income":V.type==="expense"?"Expense":V.type==="transfer"?"Transfer":V.type,amount:typeof V.amount=="string"?parseFloat(V.amount):V.amount})),M=se=>({id:se.id,name:se.name,currentBalance:se.currentBalance||0,lastUpdated:se.lastUpdated,isActive:se.isActive??!0,orderIndex:se.orderIndex??0,createdAt:se.createdAt,isPiggybank:se.isPiggybank,piggybankConfig:se.piggybankConfig}),U=O.filter(se=>!("orderIndex"in se));U.length>0&&(console.log(` Migrating ${U.length} envelopes to add orderIndex...`),U.forEach((se,V)=>{const J=V,ie=n();ns.saveEnvelope(ie,{...se,orderIndex:J}).then(()=>console.log(` Migrated envelope ${se.name} with orderIndex ${J}`)).catch(he=>console.warn(`Failed to migrate envelope ${se.id}:`,he))}));const P=O.map(M),B=new Set([...S.envelopes.map(se=>se.id),...O.map(se=>se.id)]),j=S.envelopes.filter(se=>se.id&&!O.some(V=>V.id===se.id)&&!se.id.startsWith("temp-")),pe=S.transactions.filter(se=>se.id&&!z.some(V=>V.id===se.id)&&(!se.id.startsWith("temp-")||B.has(se.envelopeId)));let ce,H=[];navigator.onLine?(ce=L,console.log(` Online mode: Using Firebase templates only (${ce.length} templates)`)):(H=S.distributionTemplates.filter(se=>se.id&&!L.some(V=>V.id===se.id)),ce=L.concat(H),console.log(` Offline mode: Merged ${L.length} Firebase + ${H.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",S.envelopes.map(se=>({id:se.id,name:se.name}))),console.log("  Firebase envelopes:",O.map(se=>({id:se.id,name:se.name}))),console.log("  Store transactions:",S.transactions.map(se=>({id:se.id,envelopeId:se.envelopeId,description:se.description}))),console.log("  Firebase transactions:",z.map(se=>({id:se.id,envelopeId:se.envelopeId,description:se.description}))),console.log("  Store templates:",S.distributionTemplates.map(se=>({id:se.id,name:se.name}))),console.log("  Firebase templates:",L.map(se=>({id:se.id,name:se.name}))),console.log("  Local-only envelopes:",j.map(se=>({id:se.id,name:se.name}))),console.log("  Local-only transactions:",pe.map(se=>({id:se.id,envelopeId:se.envelopeId,description:se.description}))),console.log("  Local-only templates:",H.map(se=>({id:se.id,name:se.name}))),console.log("  Total merged templates:",ce.length,ce.map(se=>({id:se.id,name:se.name})));const W=P.concat(j),fe=R(z).concat(pe);let _e=$;if($&&"isDarkMode"in $&&!("theme"in $)){const se=$;if(_e={...se,theme:se.isDarkMode?"dark":"light"},delete _e.isDarkMode,_e&&_e.id){const V=n();is.updateAppSettings(V,_e.id,{theme:_e.theme}).catch(J=>console.warn("Failed to migrate app settings:",J))}}return{envelopes:W,transactions:fe,distributionTemplates:ce,appSettings:_e,isLoading:!1,pendingSync:!1}})}catch(O){console.error("Sync Failed:",O),i(O)?t({isLoading:!1,pendingSync:!0}):t({error:O.message,isLoading:!1})}},h=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(C){console.error("Firebase reset during sync failed:",C)}return}t({pendingSync:!0});try{await e().fetchData()}catch(C){console.error("Manual sync failed:",C)}},f=async()=>{const A=await o();t({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},b=()=>{c()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const C=n();console.log(` Importing data for user: ${C}`),console.log(" Clearing existing Firebase data before import..."),await E(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const O=A.envelopes.map(S=>({id:S.id||`imported-${Date.now()}-${Math.random()}`,name:S.name,currentBalance:S.currentBalance||S.budget||0,lastUpdated:new Date().toISOString(),isActive:S.isActive??!0,orderIndex:S.orderIndex??0,userId:C})),z=A.transactions.map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:C,date:S.date,amount:typeof S.amount=="number"?S.amount:parseFloat(S.amount)||0,type:S.type,reconciled:S.reconciled??!1})),L=(A.distributionTemplates||[]).map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:C})),$=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${C}`,userId:C}:null;console.log(` Importing: ${O.length} envelopes, ${z.length} transactions, ${L.length} templates`),t({envelopes:O,transactions:z,distributionTemplates:L,appSettings:$,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const S of O)try{await ns.saveEnvelope(C,S),console.log(` Synced envelope: ${S.name}`)}catch(R){console.error(` Failed to sync envelope ${S.name}:`,R)}for(const S of z)try{const R={...S,amount:S.amount.toString(),type:S.type.toLowerCase(),date:Xe.fromDate(new Date(S.date))};await yr.addTransaction(R),console.log(` Synced transaction: ${S.description}`)}catch(R){console.error(` Failed to sync transaction ${S.description}:`,R)}for(const S of L)try{await ii.createDistributionTemplate(S),console.log(` Synced template: ${S.name}`)}catch(R){console.error(` Failed to sync template ${S.name}:`,R)}if($)try{await is.createAppSettings($),console.log(" Synced app settings")}catch(S){console.error(" Failed to sync app settings:",S)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(S){console.error(" Error syncing to Firebase:",S),t({pendingSync:!0})}const ne=L.length,te=$?"Settings imported.":"";return{success:!0,message:`Imported and synced ${O.length} envelopes, ${z.length} transactions${ne>0?`, ${ne} templates`:""} to Firebase.${te?` ${te}`:""}`}}catch(C){return console.error("Import failed:",C),{success:!1,message:"Failed to import data. Check file format."}}},E=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const A=n();console.log(" Querying Firebase for all data to delete...");const[C,O,z,L]=await Promise.all([ns.getAllEnvelopes(A).catch(S=>(console.error(" Failed to fetch envelopes for reset:",S),[])),yr.getAllTransactions(A).catch(S=>(console.error(" Failed to fetch transactions for reset:",S),[])),ii.getAllDistributionTemplates(A).catch(S=>(console.error(" Failed to fetch templates for reset:",S),[])),is.getAppSettings(A).catch(S=>(console.error(" Failed to fetch settings for reset:",S),null))]);console.log(` Found in Firebase: ${C.length} envelopes, ${O.length} transactions, ${z.length} templates`);let $=0;for(const S of C)if(S.id)try{await ns.deleteEnvelope(A,S.id),$++,console.log(` Deleted envelope: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete envelope ${S.id}:`,R)}let ne=0;for(const S of O)if(S.id)try{await yr.deleteTransaction(A,S.id),ne++,console.log(` Deleted transaction: ${S.id}`)}catch(R){console.error(` Failed to delete transaction ${S.id}:`,R)}let te=0;for(const S of z)if(S.id)try{await ii.deleteDistributionTemplate(A,S.id),te++,console.log(` Deleted template: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete template ${S.id}:`,R)}if(L?.id)try{await is.deleteAppSettings(A,L.id),console.log(" Deleted app settings")}catch(S){console.error(" Failed to delete app settings:",S)}console.log(` Firebase reset complete: Deleted ${$} envelopes, ${ne} transactions, ${te} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),t({isLoading:!1,pendingSync:!0}),A}};return{fetchData:d,syncData:h,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:b,importData:_,performFirebaseReset:E,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(C){console.error(" Firebase reset failed, will retry on next sync:",C),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},l7=t=>mb(t),c7=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt}),u7=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),aS=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=ns.subscribeToEnvelopes(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Envelopes updated",c.length);const h=c.map(c7);t.setState({envelopes:h})}}),i=yr.subscribeToTransactions(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Transactions updated",c.length);const h=c.map(l7);t.setState({transactions:h})}}),s=ii.subscribeToDistributionTemplates(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Templates updated from Firebase",c.length),console.log(" Firebase templates:",c.map(f=>({id:f.id,name:f.name})));const h=c.map(u7);console.log(" Setting store templates to:",h.map(f=>({id:f.id,name:f.name}))),t.setState({distributionTemplates:h})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=is.subscribeToAppSettings(e,c=>{const d=t.getState();d.isOnline&&!d.pendingSync&&!d.resetPending&&(console.log(" Real-time sync: Settings updated",c?"found":"null"),t.setState({appSettings:c}))});window.__firebaseUnsubscribers={envelopes:n,transactions:i,templates:s,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},d7=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const d=e.getState();d.isOnline&&(d.pendingSync||d.resetPending)&&(console.log(" Auto-syncing pending operations..."),d.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const d=e.getState();if(!d.isOnline&&!d.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(d.pendingSync||d.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(h){console.log(" Periodic retry failed:",h),e.setState({testingConnectivity:!1})}}else d.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(d=>{!d.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});const c=n.getState();c.isAuthenticated&&c.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),aS(e,i())),n.subscribe(d=>{if(d.isAuthenticated&&d.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),aS(e,i());else if(!d.isAuthenticated&&!d.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.envelopes&&h.envelopes(),h.transactions&&h.transactions(),h.templates&&h.templates(),h.settings&&h.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},h7=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},Rl=()=>{const{currentUser:t}=Si.getState();if(!t)throw new Error("No authenticated user found");return t.id},f7=()=>{console.log(" Clearing user data on logout"),Jt.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},oS=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${n}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),i=n.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=n.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},lf=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",i=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&n==="undefined")},Jt=mm()(gv((t,e)=>{const n=WU({set:t,get:e,getCurrentUserId:Rl,isNetworkError:lf}),i=ZU({set:t,get:e,getCurrentUserId:Rl,isNetworkError:lf}),s=XN({set:t,get:e,getCurrentUserId:Rl}),o=a7({set:t,get:e,getCurrentUserId:Rl,isNetworkError:lf}),c=o7({set:t,get:e,getCurrentUserId:Rl,isNetworkError:lf,loadFallbackData:h7,checkOnlineStatus:oS,clearUserData:f7});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addEnvelope:async d=>(await n.createEnvelope(d)).id,updateEnvelope:n.updateEnvelope,deleteEnvelope:n.deleteEnvelope,renameEnvelope:n.renameEnvelope,transferFunds:n.transferFunds,addTransaction:o.addTransaction,updateTransaction:o.updateTransaction,deleteTransaction:o.deleteTransaction,restoreTransaction:o.restoreTransaction,addDistributionTemplate:i.saveTemplate,updateDistributionTemplate:i.updateTemplate,deleteDistributionTemplate:i.deleteTemplate,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateAppSettings:s.updateAppSettings,initializeAppSettings:s.initializeAppSettings,fetchData:c.fetchData,syncData:c.syncData,updateOnlineStatus:c.updateOnlineStatus,markOnlineFromFirebaseSuccess:c.markOnlineFromFirebaseSuccess,handleUserLogout:c.handleUserLogout,importData:c.importData,performFirebaseReset:c.performFirebaseReset,resetData:c.resetData,getEnvelopeBalance:d=>{const h=e();if(!h.envelopes.find(C=>C.id===d))return console.log(` getEnvelopeBalance: Envelope ${d} not found`),new Bn(0);const g=h.transactions.filter(C=>C.envelopeId===d),b=g.filter(C=>C.type==="Expense"),_=g.filter(C=>C.type==="Income"),E=b.reduce((C,O)=>C.plus(new Bn(O.amount||0)),new Bn(0));return _.reduce((C,O)=>C.plus(new Bn(O.amount||0)),new Bn(0)).minus(E)},getTransactionsForMonth:d=>e().transactions.filter(f=>f.month===d),resetAllData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},testConnectivity:async()=>{console.log(" Testing connectivity"),await oS()}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));d7({useEnvelopeStore:Jt,useAuthStore:Si,getCurrentUserId:Rl});const m7=({currentMonth:t,onMonthChange:e})=>{const[n,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let f=n,g=i-1;g<1&&(f=n-1,g=12);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},d=()=>{let f=n,g=i+1;g>12&&(f=n+1,g=1);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},h=()=>{const f=new Date,g=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`;e(g)};return v.jsx("div",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 py-3",children:v.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[v.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:v.jsx(kD,{size:20})}),v.jsx("div",{className:"flex-1 text-center",children:v.jsxs("button",{onClick:h,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[o," ",n]})}),v.jsx("button",{onClick:d,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:v.jsx(mo,{size:20})})]})})},p7=({amount:t,totalIncome:e,totalAllocated:n,isLoading:i=!1})=>{const s=e>0?n/e*100:0,o=Math.abs(t)<.01,c=t<0,d=t>0,f=o?{icon:Py,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:c?{icon:T4,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:b4,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"},g=f.icon;return i?v.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),v.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):v.jsxs("div",{className:`rounded-2xl p-6 border ${f.bgColor} ${f.borderColor}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`p-2 rounded-xl ${f.bgColor} ${f.borderColor}`,children:v.jsx(g,{size:24,className:f.color})}),v.jsxs("div",{children:[v.jsx("h3",{className:`font-semibold ${f.color}`,children:f.title}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:f.subtitle})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:`text-3xl font-bold ${f.color}`,children:[c?"-":"","$",Math.abs(t).toFixed(2)]}),o&&v.jsx("div",{className:"text-sm text-green-600 dark:text-emerald-400 font-medium",children:"Perfect Balance"})]})]}),!o&&e>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[v.jsx("span",{children:"Allocated"}),v.jsxs("span",{children:[s.toFixed(0),"% of income"]})]}),v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:v.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${c?"bg-red-500":d?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(s,100)}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[v.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),v.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},g7=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),{currentUser:i,logout:s}=Si(),{handleUserLogout:o}=Jt(),c=kr();D.useEffect(()=>{const f=g=>{n.current&&!n.current.contains(g.target)&&e(!1)};if(t)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const d=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),c("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const h=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return v.jsxs("div",{className:"relative",ref:n,children:[v.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:h}),v.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx(RD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&v.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[v.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:h}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),v.jsxs("div",{className:"py-1",children:[v.jsxs("button",{onClick:()=>{c("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx(CS,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),v.jsxs("button",{onClick:d,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[v.jsx(c4,{size:18}),"Log Out"]})]})]})]})},pb=({children:t,onDelete:e,threshold:n=-100})=>{const i=EP(),[s,o]=D.useState(!1),c=D.useRef(0),d=()=>{o(!0),c.current=Date.now()},h=async(f,g)=>{const b=g.offset.x,_=g.velocity.x;if(setTimeout(()=>o(!1),100),b<n||b<-50&&_<-500){const E=e();E===!1?i.start({x:0}):E instanceof Promise&&E.then(I=>{I===!1&&i.start({x:0})})}else i.start({x:0})};return v.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[v.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:v.jsx(df,{className:"text-white w-6 h-6"})}),v.jsx(Mo.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:d,onDragEnd:h,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${s?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:t})]})},WN=({message:t="Loading your budget...",showTimeout:e=!1})=>v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[v.jsx("div",{className:"mb-8",children:v.jsxs("div",{className:"relative",children:[v.jsx(pa,{size:48,className:"text-blue-500 animate-spin"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx(Vy,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),v.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&v.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:v.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),v.jsx("div",{className:"mt-8 w-full max-w-md",children:v.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),dc=mm((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,i="neutral",s)=>{t({message:n,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),y7=({isVisible:t,onClose:e,mode:n,initialIncomeSource:i})=>{const{createIncomeSource:s,updateIncomeSource:o}=bs(),{showToast:c}=dc(),[d,h]=D.useState(""),[f,g]=D.useState(""),[b,_]=D.useState(!1);D.useEffect(()=>{if(!t)return;const I=window.setTimeout(()=>{n==="edit"&&i?(h(i.name),g(i.amount.toString())):(h(""),g(""))},0);return()=>window.clearTimeout(I)},[t,n,i]);const E=async I=>{if(I.preventDefault(),!d.trim()||!f||parseFloat(f)<=0){c("Please fill in all required fields with valid values","error");return}_(!0);try{if(n==="add")await s({name:d.trim(),amount:parseFloat(f)}),c(`Added "${d.trim()}" as income source`,"success");else if(n==="edit"){if(!i){c("Error: No income source to edit","error");return}await o(i.id,{name:d.trim(),amount:parseFloat(f)}),c(`Updated "${d.trim()}" income source`,"success")}e()}catch(A){console.error("Error saving income source:",A),c("Failed to save income source. Please try again.","error")}finally{_(!1)}};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),v.jsx("input",{type:"text",value:d,onChange:I=>h(I.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",value:f,onChange:I=>g(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:b||!d.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},v7=({isVisible:t,onClose:e,onConfirm:n,currentMonth:i,incomeCount:s,totalIncome:o,allocationCount:c,totalAllocated:d,isLoading:h=!1})=>{const[f,g]=D.useState(""),[b,_]=D.useState("confirm"),E=C=>{const[O,z]=C.split("-");return new Date(parseInt(O),parseInt(z)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},I=()=>{b==="confirm"?_("type"):b==="type"&&f==="START FRESH"&&n()},A=()=>{_("confirm"),g(""),e()};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",E(i)]}),v.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),v.jsx("div",{className:"p-6 space-y-4",children:b==="confirm"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:v.jsxs("ul",{className:"space-y-1",children:[v.jsxs("li",{children:[" ",s," income source",s!==1?"s":""," (totaling $",o.toFixed(2),"/month)"]}),v.jsxs("li",{children:[" ",c," envelope allocation",c!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[v.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"text-center",children:[v.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",v.jsx("strong",{children:"START FRESH"})," to confirm:"]}),v.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),v.jsx("button",{type:"button",onClick:I,disabled:h||b==="type"&&f!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":b==="confirm"?"Continue":"Start Fresh"})]})]})}):null},b7=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:i=!1})=>{const s=c=>{const[d,h]=c.split("-");return new Date(parseInt(d),parseInt(h)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},o=c=>{const[d,h]=c.split("-").map(Number);let f=d,g=h-1;return g<1&&(f=d-1,g=12),s(`${f}-${g.toString().padStart(2,"0")}`)};return v.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-start space-x-3",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(qD,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),v.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",o(t)," to get started with ",s(t),"?"]}),v.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),v.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:v.jsx(od,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"mt-4 flex space-x-3",children:[v.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:i,children:"Start Fresh"}),v.jsx("button",{onClick:e,disabled:i,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Copying...":"Copy Previous Month"})]})]})},_7=({piggybank:t,balance:e,onNavigate:n})=>{const i=Jt(pe=>pe.updateEnvelope),s=Jt(pe=>pe.transactions),o=Jt(pe=>pe.updateTransaction),c=bs(pe=>pe.currentMonth),d=bs(pe=>pe.processMonthlyPiggybankContributions),h=dc(pe=>pe.showToast),f=t.piggybankConfig?.targetAmount,g=t.piggybankConfig?.monthlyContribution||0,b=t.piggybankConfig?.color||"#3B82F6",_=t.piggybankConfig?.paused||!1,E=e.toNumber(),I=(pe,ce=1)=>{const H=pe.replace("#",""),W=parseInt(H,16),fe=W>>16&255,_e=W>>8&255,se=W&255;return`rgba(${fe}, ${_e}, ${se}, ${ce})`},A=`linear-gradient(135deg, ${I(b,.14)} 0%, ${I(b,.05)} 100%)`,C=I(b,.4),[O,z]=D.useState(!1),[L,$]=D.useState(g?g.toFixed(2):"0.00"),[ne,te]=D.useState(!1),S=D.useRef(null),R=f&&f>0?Math.min(E/f*100,100):0,M=f&&E>=f;D.useEffect(()=>{O||$(g?g.toFixed(2):"0.00")},[g,O]);const U=pe=>{pe.stopPropagation(),!ne&&($(g?g.toFixed(2):"0.00"),z(!0),requestAnimationFrame(()=>{S.current?.focus(),S.current?.select()}))},P=()=>{z(!1),$(g?g.toFixed(2):"0.00")},B=async()=>{if(!O||ne)return;const pe=parseFloat(L);if(Number.isNaN(pe)||pe<0){h("Enter a valid contribution amount","error");return}if(pe===g){z(!1);return}te(!0);try{const ce={...t,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:pe,targetAmount:t.piggybankConfig?.targetAmount,color:t.piggybankConfig?.color,icon:t.piggybankConfig?.icon,paused:t.piggybankConfig?.paused}};await i(ce);const H=s.find(W=>W.envelopeId===t.id&&W.isAutomatic===!0&&W.month===c&&W.type==="Income");H&&H.id?H.amount!==pe&&await o({...H,amount:pe}):pe>0&&!_&&await d(c),h("Monthly contribution updated","success"),$(pe.toFixed(2)),z(!1)}catch(ce){console.error("Failed to update piggybank contribution",ce),h("Failed to update contribution","error")}finally{te(!1)}},j=pe=>{pe.key==="Enter"?(pe.preventDefault(),B()):pe.key==="Escape"&&(pe.preventDefault(),P())};return v.jsxs("div",{onClick:()=>n(t.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:A,borderColor:C},children:[v.jsxs("div",{className:"flex items-start justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${b}20`},children:v.jsx(Uu,{size:20,style:{color:b}})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),M&&v.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",E.toFixed(2)]}),f&&v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",f.toFixed(2)]})]})]}),f&&f>0&&v.jsxs("div",{className:"mb-3",children:[v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:v.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${R}%`,backgroundColor:b}})}),v.jsxs("div",{className:"flex justify-between items-center mt-1",children:[v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[R.toFixed(0),"% complete"]}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(f-E).toFixed(2)," to go"]}),v.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:I(b,.15),color:b},children:"Piggybank"})]})]}),v.jsx("div",{className:"mt-2",children:_?v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[v.jsx(h4,{size:14,className:"text-orange-500"}),v.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[v.jsx(S4,{size:14,style:{color:b}}),O?v.jsxs("form",{onSubmit:pe=>{pe.preventDefault(),B()},className:"flex items-center gap-2",children:[v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{ref:S,type:"number",min:"0",step:"0.01",value:L,onChange:pe=>$(pe.target.value),onBlur:B,onKeyDown:j,disabled:ne,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),ne&&v.jsx(a4,{size:16,className:"animate-spin text-gray-400"})]}):v.jsxs("button",{type:"button",onClick:U,className:"font-medium text-gray-900 dark:text-white hover:underline focus:outline-none",children:["$",g.toFixed(2),"/month"]})]})})]})},vu=(t,e=1)=>{const n=t.replace("#",""),i=parseInt(n,16),s=i>>16&255,o=i>>8&255,c=i&255;return`rgba(${s}, ${o}, ${c}, ${e})`},w7=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:i,setEditingEnvelopeId:s,editingAmount:o,setEditingAmount:c,handleBudgetSave:d,navigate:h,inputRef:f,dragConstraints:g,onDragStart:b,onDragEnd:_,transactions:E,currentMonth:I})=>{const A=CP(),C=!!t.isPiggybank,O=t.piggybankConfig?.color||"#3B82F6",z=C?`linear-gradient(135deg, ${vu(O,.18)} 0%, ${vu(O,.08)} 100%)`:void 0,L=C?vu(O,.5):void 0,[$,ne]=D.useState(!1),[te,S]=D.useState(!1),R=D.useRef(null),M=D.useRef(null),U=D.useRef(null),P=E.filter(ie=>ie.envelopeId===t.id&&ie.month===I),B=P.filter(ie=>ie.type==="Expense"),j=P.filter(ie=>ie.type==="Income"),pe=B.reduce((ie,he)=>ie+(he.amount||0),0),ce=j.reduce((ie,he)=>ie+(he.amount||0),0),H=Math.max(0,pe/ce*100),W=()=>{R.current!==null&&(clearTimeout(R.current),R.current=null)},fe=ie=>{ie.button!==0&&ie.pointerType!=="touch"||(M.current={x:ie.clientX,y:ie.clientY},W(),R.current=window.setTimeout(()=>{S(!0),A.start(ie)},220))},_e=ie=>{if(!M.current||R.current===null)return;const he=ie.clientX-M.current.x,ge=ie.clientY-M.current.y;Math.hypot(he,ge)>8&&W()},se=()=>{W(),S(!1),M.current=null},V=()=>{W(),S(!1),M.current=null},J=()=>{$||i!==t.id&&h(`/envelope/${t.id}`)};return D.useEffect(()=>{const ie=U.current;if(!ie)return;const he=ge=>{($||te)&&ge.preventDefault()};return ie.addEventListener("touchmove",he,{passive:!1}),()=>{ie.removeEventListener("touchmove",he)}},[$,te]),v.jsx(OP,{ref:U,value:t,dragListener:!1,dragControls:A,dragConstraints:g,dragElastic:.16,dragMomentum:!1,onDragStart:()=>{ne(!0),b()},onDragEnd:()=>{ne(!1),S(!1),_()},transition:{type:"spring",stiffness:420,damping:30,mass:.7},whileDrag:{scale:1.04,zIndex:20},layout:!0,onPointerDown:fe,onPointerUp:se,onPointerMove:_e,onPointerCancel:V,style:{boxShadow:$?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",touchAction:"none",background:z,borderColor:L},className:`p-4 rounded-xl cursor-pointer active:scale-[0.99] transition-transform select-none border ${C?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:v.jsx("div",{className:"flex items-center gap-3 w-full",children:v.jsxs("div",{className:"flex-1",onClick:J,children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C&&v.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:vu(O,.4),backgroundColor:vu(O,.15),color:O},children:v.jsx(Uu,{size:16})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),C&&v.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:O},children:"Piggybank"})]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center space-x-4",onClick:ie=>ie.stopPropagation(),onPointerDown:ie=>ie.stopPropagation(),children:i===t.id?v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),v.jsx("form",{onSubmit:ie=>{ie.preventDefault(),d()},children:v.jsx("input",{ref:f,type:"number",value:o,onChange:ie=>c(ie.target.value),onBlur:d,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):v.jsxs("div",{onClick:ie=>{ie.stopPropagation(),s(t.id),c(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-2 py-1 rounded transition-colors",children:[v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),v.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),v.jsxs("div",{className:"text-right",children:[v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),v.jsxs("span",{className:`font-bold ${n.toNumber()<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",n.toNumber().toFixed(2)]})]})]}),e>0&&v.jsx("div",{className:"mt-3",onClick:ie=>ie.stopPropagation(),children:(console.log(` Envelope: ${t.name}`,{budgetedAmount:e,totalIncome:ce,totalSpent:pe,remainingBalance:n.toNumber(),percentage:H}),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[v.jsx("span",{children:"Budget Used"}),v.jsxs("span",{children:[H.toFixed(0),"%"]})]}),v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:v.jsx("div",{className:`h-full transition-all duration-300 ease-out ${n.toNumber()<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]}))})]})})})},x7=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:i,isOnline:s,pendingSync:o,syncData:c,testingConnectivity:d}=Jt(),{currentMonth:h,fetchMonthlyData:f,incomeSources:g,envelopeAllocations:b,calculateAvailableToBudget:_,deleteIncomeSource:E,restoreIncomeSource:I,clearMonthData:A,copyFromPreviousMonth:C,setEnvelopeAllocation:O,isLoading:z}=bs(),{showToast:L}=dc(),$=kr(),[ne,te]=D.useState(!1),[S,R]=D.useState("add"),[M,U]=D.useState(null),[P,B]=D.useState(!1),[j,pe]=D.useState(!1),[ce,H]=D.useState(!1),W=D.useRef(null),[fe,_e]=D.useState(!0),[se,V]=D.useState(!1),J=D.useRef(null),[ie,he]=D.useState(null),[ge,Ee]=D.useState(""),Te=D.useRef(null),rt=we=>{const Ze=e.filter(st=>st.envelopeId===we&&st.month===h),yt=e.filter(st=>st.envelopeId===we);console.log(` Balance calc for envelope ${we}:`,{currentMonth:h,totalTransactions:e.length,allEnvelopeTransactions:yt.map(st=>({id:st.id,amount:st.amount,type:st.type,month:st.month,date:st.date})),matchingMonthTransactions:Ze.map(st=>({id:st.id,amount:st.amount,type:st.type,month:st.month,date:st.date}))});const mt=Ze.filter(st=>st.type==="Expense"),sn=Ze.filter(st=>st.type==="Income"),bt=mt.reduce((st,Mn)=>st.plus(new Bn(Mn.amount||0)),new Bn(0)),Pr=sn.reduce((st,Mn)=>st.plus(new Bn(Mn.amount||0)),new Bn(0)).minus(bt);return console.log(` Final balance for envelope ${we}:`,Pr.toNumber()),Pr};D.useEffect(()=>(console.log(" Starting initial data load, isInitialLoading:",fe),(async()=>{console.log(" Setting timeout for loading message"),J.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),V(!0)},8e3);try{console.log(" Fetching data in parallel..."),await Promise.all([n().then(()=>console.log(" Envelope data fetched")),f().then(()=>console.log(" Monthly budget data fetched"))]),J.current&&clearTimeout(J.current),console.log(" Data load complete, hiding loading screen"),_e(!1),V(!1)}catch(Ze){console.error(" Error loading initial data:",Ze),_e(!1),V(!1)}})(),()=>{J.current&&clearTimeout(J.current)}),[]),D.useEffect(()=>{if(!z&&!fe){const we=g.length===0&&b.length===0;H(we)}},[z,fe,g,b,h]),D.useEffect(()=>{ie&&Te.current&&(Te.current.focus(),Te.current.select())},[ie]);const[Fe,rn]=D.useState(!1),xn=D.useRef(null),Es=we=>{console.log(" Reordered envelopes:",we.map(Ze=>Ze.name)),we.forEach((Ze,yt)=>{Ze.orderIndex!==yt&&Jt.getState().updateEnvelope({...Ze,orderIndex:yt})})},[Mr,Kn]=D.useState([]),qi=D.useRef([]),Hi=t.filter(we=>we.isPiggybank&&we.isActive);D.useEffect(()=>{if(!Fe){const Ze=[...t.filter(yt=>!yt.isPiggybank)].filter(yt=>b.some(mt=>mt.envelopeId===yt.id)).sort((yt,mt)=>{const sn=yt.orderIndex??0,bt=mt.orderIndex??0;return sn-bt});Kn(Ze),qi.current=Ze}},[t,b,Fe]);const Oa=we=>{Kn(we),qi.current=we},Pa=()=>rn(!0),Rt=()=>{rn(!1),qi.current.length&&Es(qi.current)},It=Mr,$i=t.reduce((we,Ze)=>we+rt(Ze.id).toNumber(),0);console.log(" Total balance:",$i);const hc=async()=>{if(ie)try{const we=parseFloat(ge)||0;await O(ie,we)}catch(we){console.error("Failed to save budget amount:",we),L("Failed to update budget","error")}finally{he(null),Ee("")}},jo=()=>{R("add"),U(null),te(!0)},un=we=>{W.current&&clearTimeout(W.current),!P&&(R("edit"),U(we),te(!0))},Or=we=>{W.current&&clearTimeout(W.current),B(!0);const Ze=g.findIndex(mt=>mt.id===we.id),yt={...we};E(we.id).catch(console.error),L(`Deleted "${we.name}"`,"neutral",()=>I(yt,Ze)),setTimeout(()=>B(!1),500)},Va=()=>{te(!1),U(null)},ja=()=>{pe(!0)},Gi=async()=>{try{await A(),pe(!1),L(`"${h}" budget cleared`,"neutral",()=>L('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(we){console.error("Error clearing month data:",we),L("Failed to clear month data","error")}},fc=async()=>{try{await C(),H(!1),L("Previous month budget copied","success")}catch(we){console.error("Error copying previous month:",we),L("Failed to copy previous month","error")}},Lo=_();return console.log(" Checking loading screen condition, isInitialLoading:",fe),fe?(console.log(" Showing loading screen"),v.jsx(WN,{message:se?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:se})):(console.log(" Showing main content"),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-30",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center gap-2",children:s?i?v.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[v.jsx(pa,{size:16,className:"animate-spin"}),v.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):o?v.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[v.jsx(pa,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[v.jsx(j4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[v.jsx(P4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:d?"Testing...":i?"Saving...":"Offline"})]})}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:ja,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:v.jsx(pa,{size:22})}),v.jsx(g7,{})]})]}),v.jsx("div",{className:"mt-4",children:v.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Personal Budget"})})]}),v.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[v.jsx(m7,{currentMonth:h,onMonthChange:we=>{H(!1),bs.getState().setCurrentMonth(we)}}),v.jsx(p7,{amount:Lo,totalIncome:g.reduce((we,Ze)=>we+Ze.amount,0),totalAllocated:b.reduce((we,Ze)=>we+Ze.budgetedAmount,0),isLoading:i}),ce&&v.jsx(b7,{currentMonth:h,onCopy:fc,onDismiss:()=>H(!1)}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:jo,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(Xh,{size:20})})]}),g.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):v.jsx("div",{className:"space-y-3",children:v.jsx(um,{initial:!1,mode:"popLayout",children:g.map(we=>v.jsx(Mo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(pb,{onDelete:()=>Or(we),children:v.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>un(we),children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:we.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),v.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",we.amount.toFixed(2)]})]})})},we.id))})})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[v.jsx(Uu,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),v.jsx("button",{onClick:()=>$("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:v.jsx(Xh,{size:20})})]}),Hi.length>0?v.jsx("div",{className:"space-y-3",children:Hi.map(we=>v.jsx(_7,{piggybank:we,balance:rt(we.id),onNavigate:Ze=>$(`/envelope/${Ze}`)},we.id))}):v.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[v.jsx(Uu,{size:48,className:"mx-auto mb-3 opacity-30"}),v.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),v.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),v.jsx("button",{onClick:()=>$("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:v.jsx(Xh,{size:20})})]}),It.length===0?v.jsxs("div",{className:"text-center py-6",children:[v.jsx(Vy,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length>0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),v.jsx("button",{onClick:()=>$("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):v.jsx("div",{ref:xn,children:v.jsx(IP,{axis:"y",values:Mr,onReorder:Oa,className:"space-y-3",layoutScroll:!0,children:It.map(we=>{const yt=b.find(sn=>sn.envelopeId===we.id)?.budgetedAmount||0,mt=rt(we.id);return v.jsx(w7,{env:we,budgetedAmount:yt,remainingBalance:mt,editingEnvelopeId:ie,setEditingEnvelopeId:he,editingAmount:ge,setEditingAmount:Ee,handleBudgetSave:hc,navigate:$,inputRef:Te,dragConstraints:xn,onDragStart:Pa,onDragEnd:Rt,transactions:e,currentMonth:h},we.id)})})})]}),v.jsx("button",{onClick:()=>$("/add-transaction"),className:"fixed bottom-24 right-6 md:bottom-10 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:v.jsx(Xh,{size:28})}),v.jsx(y7,{isVisible:ne,onClose:Va,mode:S,initialIncomeSource:M}),v.jsx(v7,{isVisible:j,onClose:()=>pe(!1),onConfirm:Gi,currentMonth:h,incomeCount:g.length,totalIncome:g.reduce((we,Ze)=>we+Ze.amount,0),allocationCount:b.length,totalAllocated:b.reduce((we,Ze)=>we+Ze.budgetedAmount,0)})]})]}))},ZN=({isVisible:t,onClose:e,mode:n,currentEnvelope:i,initialTransaction:s})=>{const{addTransaction:o,updateTransaction:c,deleteTransaction:d}=Jt(),[h,f]=D.useState(""),[g,b]=D.useState(""),[_,E]=D.useState(new Date().toISOString().split("T")[0]);if(D.useEffect(()=>{if(!t)return;const z=window.setTimeout(()=>{if(n==="edit"&&s){f(s.amount.toString()),b(s.description);try{const L=new Date(s.date);isNaN(L.getTime())?(console.warn("Invalid date in transaction:",s.date),E(new Date().toISOString().split("T")[0])):E(L.toISOString().split("T")[0])}catch(L){console.error("Error parsing transaction date:",L),E(new Date().toISOString().split("T")[0])}}else f(""),b(""),E(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(z)},[t,n,s]),!t)return null;const I=async z=>{z.preventDefault();const L=parseFloat(h);if(isNaN(L)||L<=0){console.log(" Invalid amount:",h);return}console.log(" Saving transaction:",{mode:n,amount:L,note:g,date:_,envelopeId:i.id});try{n==="add"?(console.log(" Adding income transaction"),await o({amount:L,description:g,date:new Date(_).toISOString(),envelopeId:i.id,type:"Income",reconciled:!1})):n==="spend"?(console.log(" Adding expense transaction"),await o({amount:L,description:g,date:new Date(_).toISOString(),envelopeId:i.id,type:"Expense",reconciled:!1})):n==="edit"&&s&&(console.log(" Updating transaction"),await c({...s,amount:L,description:g,date:new Date(_).toISOString()})),console.log(" Transaction saved successfully"),e()}catch($){console.error(" Error saving transaction:",$),alert("Failed to save transaction: "+($ instanceof Error?$.message:"Unknown error"))}},A=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},C=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",O=n==="add"?"text-green-500":"text-red-500";return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:C}),v.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0,children:"Save"})]}),v.jsxs("form",{onSubmit:I,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${O}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:z=>{const L=z.target.value;(L===""||!isNaN(parseFloat(L))&&parseFloat(L)>=0)&&f(L)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${O} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:g,onChange:z=>b(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:_,onChange:z=>{console.log("Date changed to:",z.target.value),E(z.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&v.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:v.jsxs("button",{type:"button",onClick:A,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[v.jsx(NS,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},T7=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:i,transferFunds:s}=Jt(),[o,c]=D.useState(""),[d,h]=D.useState(""),[f,g]=D.useState(""),[b,_]=D.useState(new Date().toISOString().split("T")[0]),E=i.filter(C=>C.id!==n.id);if(D.useEffect(()=>{if(!t)return;const C=window.setTimeout(()=>{c(""),h(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(C)},[t]),!t)return null;const I=C=>{C.preventDefault();const O=parseFloat(d);isNaN(O)||O<=0||!o||(s(n.id,o,O,f,new Date(b)),e())},A=i.find(C=>C.id===o);return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),v.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||!o,children:"Transfer"})]}),v.jsxs("form",{onSubmit:I,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),v.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),v.jsxs("select",{value:o,onChange:C=>c(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),E.map(C=>v.jsx("option",{value:C.id,className:"bg-white dark:bg-zinc-900",children:C.name},C.id))]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:C=>h(C.target.value),onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),v.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:b,onChange:C=>_(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&d&&parseFloat(d)>0&&v.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(d).toFixed(2)]})," from"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},E7=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},S7=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},JN=({transaction:t,envelopeName:e,onReconcile:n,onEdit:i})=>{if(!t)return null;const s=t.type==="Income",o=t.type==="Expense";let c="text-gray-900 dark:text-white";return s&&(c="text-green-600 dark:text-green-400"),o&&(c="text-red-600 dark:text-red-400"),v.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[v.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.description||"No Description"}),t.reconciled&&v.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[v.jsx("span",{children:E7(t.date)}),e&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${c}`,children:[o?"-":s?"+":"",S7(t.amount)]}),n?v.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?v.jsx(tx,{className:"text-green-500",size:20}):v.jsx(ix,{className:"text-gray-400",size:20})}):v.jsx("span",{children:t.reconciled?v.jsx(tx,{className:"text-green-500",size:20}):v.jsx(ix,{className:"text-gray-400",size:20})})]})]})},A7=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),C7=()=>{const{id:t}=xk(),{envelopes:e,transactions:n,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:c,updateTransaction:d,deleteTransaction:h,restoreTransaction:f,getEnvelopeBalance:g}=Jt(),{showToast:b}=dc(),_=kr(),E=Ir(),[I,A]=D.useState(!1),[C,O]=D.useState(!1),[z,L]=D.useState(!1),[$,ne]=D.useState(null);D.useEffect(()=>{e.length===0&&i()},[]);const te=e.find(P=>P.id===t);if(!te)return s?v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Loading envelope..."})}):v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Envelope not found."})});const S=n.filter(P=>P.envelopeId===te.id).sort((P,B)=>new Date(B.date).getTime()-new Date(P.date).getTime()),R=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},M=()=>{t&&(o(t),_(-1))},U=P=>{const B={...P,reconciled:!P.reconciled};d(B)};return v.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[v.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[v.jsx("button",{onClick:()=>{const P=prompt("Rename envelope:",te.name);P&&P.trim()&&t&&c(t,P)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),v.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.name}),v.jsx("button",{onClick:R,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),v.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const P=g(te.id).toNumber();return console.log(`Debug: Envelope ${te.name} Balance:`,P),v.jsx("span",{className:`text-xl font-bold ${P<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:A7(P)})})()]})}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[v.jsx(VD,{className:"w-5 h-5 mr-3"}),"Add Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[v.jsx(OD,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>L(!0),children:[v.jsx(SD,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),v.jsxs("section",{className:"mt-6",children:[v.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:S.length===0?v.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):v.jsx(um,{initial:!1,mode:"popLayout",children:S.map(P=>v.jsx(Mo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(pb,{onDelete:()=>{if(!P.id)return;const B={...P};h(P.id),b("Transaction deleted","neutral",()=>f(B))},children:v.jsx(JN,{transaction:P,onReconcile:()=>U(P),onEdit:()=>ne(P)})})},P.id))})})]}),v.jsx("div",{className:"mt-8",children:v.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${te.name}"? This will delete all transactions.`)&&M()},children:[v.jsx(NS,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(I||C||$)&&v.jsx(ZN,{isVisible:I||C||!!$,onClose:()=>{A(!1),O(!1),ne(null)},mode:I?"add":C?"spend":"edit",currentEnvelope:te,initialTransaction:$}),z&&v.jsx(T7,{isVisible:z,onClose:()=>L(!1),sourceEnvelope:te})]})},N7="1.1.0",R7={version:N7},I7=()=>{const t=kr(),e=D.useRef(null),{envelopes:n,transactions:i,distributionTemplates:s,resetData:o,importData:c,getEnvelopeBalance:d,appSettings:h,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:b}=Jt(),{currentUser:_,deleteAccount:E}=Si(),[I,A]=D.useState(null),[C,O]=D.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[z,L]=D.useState(!1),[$,ne]=D.useState(!1),[te,S]=D.useState(""),[R,M]=D.useState(!1),U=978307200,P=h?.theme??"system";D.useEffect(()=>{h||g().catch(V=>{console.error("Failed to initialize app settings:",V)})},[h,g]);const B=(V,J)=>{A({type:V,text:J}),setTimeout(()=>A(null),3500)},j=D.useMemo(()=>{const V=n.length,J=i.length,ie=s.length,he=n.reduce((rt,Fe)=>rt+d(Fe.id).toNumber(),0),ge=0,Ee=i.reduce((rt,Fe)=>{let rn=0;if(typeof Fe.date=="string"){const xn=Date.parse(Fe.date);rn=Number.isNaN(xn)?0:xn}else typeof Fe.date=="number"&&(rn=Fe.date<2e9?(Fe.date+U)*1e3:Fe.date);return Math.max(rt,rn)},0),Te=ge||Ee?new Date(Math.max(ge,Ee)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:V,transactionCount:J,templateCount:ie,totalBalance:he,lastUpdated:Te}},[n,i,s]),pe=()=>{try{const V={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:h||{theme:"system"},envelopes:n.map(Ee=>({...Ee,currentBalance:d(Ee.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},J=new Blob([JSON.stringify(V,null,2)],{type:"application/json"}),ie=URL.createObjectURL(J),he=document.createElement("a");he.href=ie,he.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ie);const ge=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ge),O(ge),B("success","Backup downloaded successfully.")}catch(V){console.error(V),B("error","Failed to create backup file.")}},ce=()=>{try{const V=["Date","Description","Amount","Type","Envelope","Reconciled"],J=i.map(Te=>{const rt=n.find(xn=>xn.id===Te.envelopeId)?.name||"Unknown",Fe=(Te.description||"").replace(/"/g,'""');let rn="Invalid Date";if(Te.date){if(typeof Te.date=="string")rn=Te.date.split("T")[0];else if(typeof Te.date=="number"){const xn=Te.date<2e9?(Te.date+U)*1e3:Te.date;rn=new Date(xn).toISOString().split("T")[0]}}return[rn,`"${Fe}"`,Te.amount.toFixed(2),Te.type,`"${rt}"`,Te.reconciled?"Yes":"No"].join(",")}),ie=[V.join(","),...J].join(`
`),he=new Blob([ie],{type:"text/csv;charset=utf-8;"}),ge=URL.createObjectURL(he),Ee=document.createElement("a");Ee.href=ge,Ee.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(ge),B("success","CSV export ready to open in Excel/Numbers.")}catch(V){console.error(V),B("error","Failed to export CSV.")}},H=()=>{e.current?.click()},W=V=>{const J=V.target.files?.[0];if(!J)return;const ie=new FileReader;ie.onload=async he=>{try{const ge=JSON.parse(he.target?.result),Ee=await c(ge);if(!Ee.success){B("error",Ee.message);return}if(ge.appSettings?.theme)try{await f({theme:ge.appSettings.theme})}catch(Te){console.error("Failed to update imported settings:",Te)}else if(ge.appSettings?.isDarkMode!==void 0)try{const Te=ge.appSettings.isDarkMode?"dark":"light";await f({theme:Te})}catch(Te){console.error("Failed to update imported settings:",Te)}B("success",`Loaded ${ge.envelopes?.length??0} envelopes, ${ge.transactions?.length??0} transactions, and ${ge.distributionTemplates?.length??0} templates.`)}catch(ge){console.error(ge),B("error","Invalid backup file. Please verify the JSON.")}},ie.readAsText(J),V.target.value=""},fe=async()=>{L(!0);try{B("success","Scanning templates for orphaned references..."),await b(),B("success","Orphaned templates have been cleaned up successfully.")}catch(V){console.error("Template cleanup failed:",V),B("error","Failed to clean up orphaned templates. Check console for details.")}finally{L(!1)}},_e=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),B("success","All data has been permanently deleted."),t("/")}catch(V){console.error("Reset failed:",V),B("error","Failed to delete all data. Some data may remain.")}},se=async()=>{if(!te.trim()){B("error","Please enter your password to confirm account deletion.");return}ne(!0);try{await o(),await E(te)?B("success","Your account has been permanently deleted."):B("error","Failed to delete account. Please try again.")}catch(V){console.error("Account deletion failed:",V),B("error","Failed to delete account. Please try again.")}finally{ne(!1),M(!1),S("")}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[v.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),v.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[I&&v.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${I.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[I.type==="success"?v.jsx(Py,{size:18}):v.jsx(df,{size:18}),I.text]}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(rx,{className:"text-blue-500",size:22}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.envelopeCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.transactionCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.templateCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),v.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.lastUpdated})]})]})]})}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[P==="light"&&v.jsx("span",{className:"text-orange-500 text-lg",children:""}),P==="dark"&&v.jsx("span",{className:"text-purple-500 text-lg",children:""}),P==="system"&&v.jsx("span",{className:"text-gray-500 text-lg",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:P})]}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),v.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(V=>v.jsx("button",{onClick:async()=>{try{await f({theme:V.value})}catch(J){console.error("Failed to update theme setting:",J)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${P===V.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:V.label},V.value))})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[v.jsxs("button",{onClick:pe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(rx,{className:"text-blue-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),v.jsx(mo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:H,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(I4,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),v.jsx(mo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(XD,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),v.jsx(mo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:fe,disabled:z,className:`w-full p-4 flex items-center justify-between transition-colors ${z?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[z?v.jsx(sx,{className:"text-blue-500 animate-spin",size:20}):v.jsx(pa,{className:"text-blue-500",size:20}),v.jsx("span",{className:`font-medium ${z?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:z?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),z?v.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):v.jsx(mo,{className:"text-gray-400",size:18})]}),v.jsx("input",{type:"file",ref:e,onChange:W,accept:".json",className:"hidden"})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[v.jsx("p",{children:"Create regular backups before major changes."}),v.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),v.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),v.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[v.jsxs("button",{onClick:_e,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(df,{className:"text-red-500 group-hover:text-red-600",size:20}),v.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),v.jsx(mo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:()=>M(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(df,{className:"text-red-600 group-hover:text-red-700",size:20}),v.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),v.jsx(mo,{className:"text-gray-400",size:18})]})]}),v.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[v.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),v.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),v.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",R7.version]})]}),R&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:v.jsx(RS,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),v.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:v.jsx(od,{size:20})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[v.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),v.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",v.jsx("span",{className:"font-semibold",children:_?.email})]}),v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),v.jsx("input",{type:"password",value:te,onChange:V=>S(V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:$})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>M(!1),disabled:$,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),v.jsx("button",{onClick:se,disabled:$||!te.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$?v.jsxs(v.Fragment,{children:[v.jsx(sx,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},k7=()=>{const{addEnvelope:t}=Jt(),{setEnvelopeAllocation:e}=bs(),n=kr(),[i]=hD(),[s,o]=D.useState(""),[c,d]=D.useState(""),h=i.get("type")==="piggybank",[f,g]=D.useState(""),[b,_]=D.useState(""),[E,I]=D.useState("#3B82F6"),A=async C=>{if(C.preventDefault(),!s.trim())return;const O=parseFloat(c),z=isNaN(O)?0:O,L=Jt.getState().envelopes,ne=(L.length>0?Math.max(...L.map(R=>R.orderIndex??0)):-1)+1,te={name:s,currentBalance:z,lastUpdated:new Date().toISOString(),createdAt:new Date().toISOString(),isActive:!0,orderIndex:ne};h&&(te.isPiggybank=!0,te.piggybankConfig={targetAmount:f?parseFloat(f):void 0,monthlyContribution:parseFloat(b||"0"),color:E,icon:"piggy-bank"});const S=await t(te);S&&await e(S,0),n("/")};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(zu,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"New Piggybank":"New Envelope"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:v.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:h?v.jsx(Uu,{size:40}):v.jsx(ZD,{size:40})})}),v.jsxs("form",{onSubmit:A,className:"p-6 space-y-6 pb-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:h?"Piggybank Name":"Envelope Name"}),v.jsx("input",{type:"text",id:"name",value:s,onChange:C=>o(C.target.value),placeholder:h?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),h&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"monthly-contribution",value:b,onChange:C=>_(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:h})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"target-amount",value:f,onChange:C=>g(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>v.jsx("button",{type:"button",onClick:()=>I(C.value),className:`w-full aspect-square rounded-lg transition-all ${E===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"balance",value:c,onChange:C=>d(C.target.value),onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!s.trim()||h&&!b,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${s.trim()&&(!h||b)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:h?"Create Piggybank":"Create Envelope"})]})]})]})})]})},D7=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[i,s]=D.useState([]),[o,c]=D.useState({}),[d,h]=D.useState(e),f=I=>{s(A=>A.includes(I)?A.filter(C=>C!==I):[...A,I])},g=(I,A)=>{c(C=>({...C,[I]:A}))};D.useEffect(()=>{const I=Object.values(o).reduce((A,C)=>A+(C||0),0);h(e-I),n(o)},[o,e,n]),D.useEffect(()=>{const I={...o};Object.keys(I).forEach(A=>{i.includes(A)||delete I[A]}),Object.keys(I).length!==Object.keys(o).length&&c(I)},[i,o]);const b=()=>{s([]),c({})},_=Math.abs(d)<.01&&i.length>0,E=i.length>0&&Math.abs(d)>.01;return v.jsxs("div",{className:"space-y-3",children:[i.length>0&&v.jsxs("div",{className:`p-3 rounded-lg ${E?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":_?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),v.jsxs("span",{className:`font-bold text-lg ${E?"text-red-600 dark:text-red-400":_?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",d.toFixed(2)]})]}),E&&v.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:i.length>1?"Split Across Envelopes":"Select Envelope"}),i.length>0&&v.jsx("button",{type:"button",onClick:b,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),v.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(I=>v.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsx("input",{type:"checkbox",checked:i.includes(I.id),onChange:()=>f(I.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),v.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:I.name}),i.includes(I.id)&&v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",min:"0",step:"0.01",value:o[I.id]||"",onChange:A=>g(I.id,parseFloat(A.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},I.id))})]})},M7=()=>{const t=kr(),{envelopes:e,addTransaction:n}=Jt(),[i,s]=D.useState(""),[o,c]=D.useState(""),[d,h]=D.useState(new Date().toISOString().split("T")[0]),[f,g]=D.useState("expense"),[b,_]=D.useState({}),E=Object.keys(b).length>0,I=Object.values(b).reduce(($,ne)=>$+(ne||0),0),A=Math.abs(I-parseFloat(i||"0"))<.01,C=i&&parseFloat(i)>0&&E&&A,O=async $=>{if($.preventDefault(),!C)return;const[ne,te,S]=d.split("-").map(Number),R=new Date(ne,te-1,S,12,0,0);console.log(" Selected date:",d),console.log(" Parsed date:",R.toISOString());try{const M=Object.entries(b).filter(([U,P])=>P>0);for(const[U,P]of M)await n({amount:P,description:o,date:R.toISOString(),envelopeId:U,type:f==="income"?"Income":"Expense",reconciled:!1});t("/")}catch(M){console.error("Error saving transaction:",M),alert("Failed to save transaction: "+(M instanceof Error?M.message:"Unknown error"))}},z=[...e].sort(($,ne)=>{const te=$.orderIndex??0,S=ne.orderIndex??0;return te!==S?te-S:$.name.localeCompare(ne.name)}),L=f==="income"?"text-green-500":"text-red-500";return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[v.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),v.jsx("button",{onClick:O,disabled:!C,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("form",{onSubmit:O,className:"space-y-6",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:v.jsxs("div",{className:"flex",children:[v.jsx("button",{type:"button",onClick:()=>g("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${f==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),v.jsx("button",{type:"button",onClick:()=>g("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${f==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:$=>{const ne=$.target.value;(ne===""||!isNaN(parseFloat(ne))&&parseFloat(ne)>=0)&&s(ne)},onKeyDown:$=>{($.key==="e"||$.key==="E"||$.key==="+"||$.key==="-")&&$.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:o,onChange:$=>c($.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:d,onChange:$=>h($.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:v.jsx(D7,{envelopes:z,transactionAmount:parseFloat(i)||0,onSplitChange:_})})]})})]})},O7=()=>{const t=kr(),{transactions:e,envelopes:n,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=Jt(),{showToast:c}=dc(),{currentMonth:d}=bs(),[h,f]=D.useState(!1),[g,b]=D.useState(""),[_,E]=D.useState("all"),[I,A]=D.useState("All"),[C,O]=D.useState(!1),[z,L]=D.useState("all"),[$,ne]=D.useState(!1),[te,S]=D.useState(()=>{const ce=new Date;return ce.setMonth(ce.getMonth()-1),ce.toISOString().split("T")[0]}),[R,M]=D.useState(()=>new Date().toISOString().split("T")[0]),[U,P]=D.useState(null),B=D.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:$,currentMonth:d,transactionMonths:e.map(W=>({id:W.id,month:W.month,date:W.date}))});let ce=e;return $||(ce=e.filter(W=>W.month===d||!W.month),console.log(" After month filter:",ce.length,"transactions remain")),ce.map(W=>{if(!W)return null;let fe=W.date;if(typeof W.date=="number"){const se=(W.date+978307200)*1e3;fe=new Date(se).toISOString()}else if(!W.date||typeof W.date!="string")return null;return{...W,date:fe}}).filter(Boolean).filter(W=>{if(g){const _e=g.toLowerCase(),se=n.find(ie=>ie.id===W.envelopeId)?.name.toLowerCase()||"",V=W.amount.toFixed(2);if(!(W.description.toLowerCase().includes(_e)||se.includes(_e)||V.includes(_e)))return!1}if(_!=="all"&&W.envelopeId!==_||I!=="All"&&W.type!==I||!W.date||typeof W.date!="string")return!1;const fe=W.date.split("T")[0];return!(z!=="all"&&new Date(fe).getMonth()!==parseInt(z)||C&&!W.reconciled)}).sort((W,fe)=>new Date(fe.date).getTime()-new Date(W.date).getTime())},[e,n,g,_,I,te,R,C,$,d]);console.log(" Final filtered transactions:",{count:B.length,transactions:B.map(ce=>({id:ce.id,description:ce.description,amount:ce.amount,date:ce.date,month:ce.month,type:ce.type}))});const j=U?n.find(ce=>ce.id===U.envelopeId):null,pe=ce=>{const H={...ce,reconciled:!ce.reconciled};i(H)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:v.jsx(zu,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),v.jsx("button",{onClick:()=>f(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:v.jsx(e4,{size:20,className:h?"fill-current":""})})]}),v.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[v.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",d]}),v.jsx("button",{onClick:()=>ne(!$),className:`text-sm px-3 py-1 rounded-md ${$?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:$?"Current Month Only":"All Time"})]}),v.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(g4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),v.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:ce=>b(ce.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),g&&v.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:v.jsx(od,{size:16})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),v.jsxs("select",{value:_,onChange:ce=>E(ce.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((ce,H)=>ce.name.localeCompare(H.name)).map(ce=>v.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),v.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(ce=>v.jsx("button",{onClick:()=>A(ce),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${I===ce?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:ce},ce))}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),v.jsxs("select",{value:z,onChange:ce=>L(ce.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(ce,H)=>H).map(ce=>v.jsx("option",{value:ce,children:new Date(2022,ce).toLocaleString("default",{month:"long"})},ce))]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:te,onChange:ce=>S(ce.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:R,onChange:ce=>M(ce.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),v.jsx("button",{onClick:()=>O(!C),className:`w-11 h-6 rounded-full transition-colors relative ${C?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${C?"translate-x-5":"translate-x-0"}`})})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),v.jsx("button",{onClick:()=>ne(!$),className:`w-11 h-6 rounded-full transition-colors relative ${$?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${$?"translate-x-5":"translate-x-0"}`})})]})]})}),v.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:B.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):v.jsx(um,{initial:!1,mode:"popLayout",children:B.map(ce=>{const H=n.find(W=>W.id===ce.envelopeId);return v.jsx(Mo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(pb,{onDelete:()=>{if(!ce.id)return;const W={...ce};s(ce.id),c("Transaction deleted","neutral",()=>o(W))},children:v.jsx(JN,{transaction:ce,envelopeName:H?.name||"Unknown Envelope",onReconcile:()=>pe(ce),onEdit:()=>{H?P(ce):alert("Cannot edit: Envelope deleted.")}})})},ce.id)})})})}),U&&j&&v.jsx(ZN,{isVisible:!!U,onClose:()=>P(null),mode:"edit",currentEnvelope:j,initialTransaction:U})]})},eR=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],P7=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const i=eR.map(d=>({...d,met:d.regex.test(t)})).filter(d=>d.met).length;let s,o,c;return i<=1?(s="weak",o="text-red-500",c="Weak"):i<=3?(s="medium",o="text-yellow-500",c="Medium"):i===4?(s="strong",o="text-blue-500",c="Strong"):(s="very-strong",o="text-green-500",c="Very Strong"),{score:i,level:s,color:o,label:c}},gb=t=>{const e=eR.map(s=>({...s,met:s.regex.test(t)})),n=P7(t),i=e.every(s=>s.met);return{requirements:e,strength:n,isValid:i,isEmpty:!t.trim()}},V7=({password:t,className:e=""})=>{const{strength:n,isEmpty:i}=gb(t);return i?null:v.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(s=>v.jsx("div",{className:`h-1 flex-1 rounded-full ${s<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},s))})}),v.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},j7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:i}=gb(t);return i?null:v.jsx("div",{className:`space-y-1 ${e}`,children:n.map(s=>v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.met?v.jsx(CD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):v.jsx(od,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),v.jsx("span",{className:s.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:s.label})]},s.id))})},L7=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(""),[s,o]=D.useState(""),[c,d]=D.useState(!1),[h,f]=D.useState(!1),[g,b]=D.useState(!1),[_,E]=D.useState(!1),{login:I,register:A,sendPasswordReset:C,isLoading:O,loginError:z,clearError:L}=Si(),$=gb(n),ne=async S=>{if(S.preventDefault(),L(),t.trim()&&n.trim())if(h){if(!s.trim()||!$.isValid)return;await A(t.trim(),n,s.trim())}else await I(t.trim(),n)},te=async S=>{S.preventDefault(),t.trim()&&await C(t.trim())&&E(!0)};return D.useEffect(()=>{e(""),i(""),o(""),E(!1)},[h,g]),v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?v.jsxs("form",{onSubmit:te,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(I0,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"reset-email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:O,autoComplete:"email"})]})]}),_?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:v.jsx(I0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),v.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",v.jsx("span",{className:"font-medium",children:t})]}),v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[v.jsx(zu,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"submit",disabled:O||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:O?"Sending...":"Send Reset Link"}),v.jsx("div",{className:"mt-4 text-center",children:v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:O,children:[v.jsx(zu,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):v.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Create Account":"Sign In"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:h?"Create a new account to get started":"Sign in to your account"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:O,autoComplete:"username"})]}),h&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),v.jsx("input",{id:"displayName",type:"text",value:s,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:O})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!h&&v.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:O,children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"password",type:c?"text":"password",value:n,onChange:S=>i(S.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${h&&n&&!$.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:O,autoComplete:h?"new-password":"current-password"}),v.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:O,children:c?v.jsx(GD,{className:"h-5 w-5"}):v.jsx(YD,{className:"h-5 w-5"})})]}),h&&n&&v.jsx("div",{className:"mt-2",children:v.jsx(V7,{password:n})}),h&&n&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:v.jsx(j7,{password:n})})]}),z&&v.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[z,z.includes("verify your email")&&v.jsx("div",{className:"mt-3",children:v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),v.jsx("button",{type:"submit",disabled:O||!t.trim()||!n.trim()||h&&!s.trim()||h&&!$.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:O?h?"Creating Account...":"Signing in...":h?"Create Account":"Sign In"}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("button",{type:"button",onClick:()=>{f(!h),b(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:O,children:[v.jsx(D4,{className:"h-4 w-4"}),h?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},lS=()=>{const[t,e]=D.useState(!1),[n,i]=D.useState(!1),{currentUser:s,resendEmailVerification:o,logout:c,loginError:d}=Si();D.useEffect(()=>{s||console.warn("EmailVerificationView: No current user, this should not happen")},[s]);const h=async()=>{e(!0),i(!1);const g=await o();e(!1),g&&(i(!0),setTimeout(()=>i(!1),3e3))},f=async()=>{await c()};return s?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:v.jsx(I0,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.email})]}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(Py,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),v.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[v.jsx("li",{children:"1. Open your email inbox"}),v.jsx("li",{children:"2. Find the email from House Budget"}),v.jsx("li",{children:'3. Click the "Verify Email" link'}),v.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),d&&v.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:d}),n&&v.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),v.jsx("button",{onClick:h,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?v.jsxs(v.Fragment,{children:[v.jsx(pa,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(pa,{className:"h-4 w-4"}),"Resend verification email"]})}),v.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[v.jsx(zu,{className:"h-4 w-4"}),"Back to sign in"]})]})}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},z7=()=>{const{message:t,type:e,isVisible:n,undoAction:i,hideToast:s}=dc(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return v.jsx(um,{children:n&&v.jsx(Mo.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:v.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[v.jsx("div",{className:"flex items-center flex-1 min-w-0",children:v.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),v.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&v.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[v.jsx(N4,{size:14,className:"inline mr-1"}),"Undo"]}),v.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:v.jsx(od,{size:16})})]})]})})})};class fr extends D.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((i,s)=>i!==e.resetKeys?.[s])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[v.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(RS,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[v.jsx(pa,{className:"h-4 w-4"}),"Try Again"]}),v.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[v.jsx(n4,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const U7=()=>{const t=kr(),e=Ir(),n=[{path:"/",label:"Budget",icon:v.jsx(Vy,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:v.jsx(r4,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:v.jsx(CS,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:v.jsx(nx,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:v.jsx(nx,{className:"w-6 h-6"}),enabled:!1}],i=(o,c)=>{c&&o!=="#"&&t(o)},s=o=>o==="/"?e.pathname==="/":e.pathname.startsWith(o);return v.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:v.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((o,c)=>v.jsxs("button",{onClick:()=>i(o.path,o.enabled),disabled:!o.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${o.enabled?s(o.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[v.jsx("div",{className:`transition-transform ${s(o.path)&&o.enabled?"scale-110":""}`,children:o.icon}),v.jsx("span",{className:"text-xs mt-1 font-medium",children:o.label})]},c))})})};function F7(){const[t,e]=D.useState(!0),{appSettings:n}=Jt(),{isAuthenticated:i,isInitialized:s,initializeAuth:o,lastAuthTime:c,offlineGracePeriod:d,currentUser:h}=Si();if(D.useEffect(()=>{const b=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(b)},[]),D.useEffect(()=>o(),[o]),D.useEffect(()=>{const b=document.documentElement,_=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{const I=n?.theme??"system",A=_.matches;I==="dark"||I==="system"&&A?b.classList.add("dark"):b.classList.remove("dark")};if(E(),n?.theme==="system")return _.addEventListener("change",E),()=>_.removeEventListener("change",E)},[n]),t||!s)return v.jsx(WN,{message:"Initializing Personal Budget..."});if(!i)return h?v.jsx(fr,{children:v.jsx(lS,{})}):v.jsx(fr,{children:v.jsx(L7,{})});const g=typeof navigator<"u"&&!navigator.onLine&&i&&c&&Date.now()-c<d;return v.jsxs(fr,{children:[g&&v.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((d-(Date.now()-c))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),v.jsxs(oD,{children:[v.jsxs(jk,{children:[v.jsx(sa,{path:"/",element:v.jsx(fr,{children:v.jsx(x7,{})})}),v.jsx(sa,{path:"/envelope/:id",element:v.jsx(fr,{children:v.jsx(C7,{})})}),v.jsx(sa,{path:"/add-envelope",element:v.jsx(fr,{children:v.jsx(k7,{})})}),v.jsx(sa,{path:"/add-transaction",element:v.jsx(fr,{children:v.jsx(M7,{})})}),v.jsx(sa,{path:"/transactions",element:v.jsx(fr,{children:v.jsx(O7,{})})}),v.jsx(sa,{path:"/settings",element:v.jsx(fr,{children:v.jsx(I7,{})})}),v.jsx(sa,{path:"/verify-email",element:v.jsx(fr,{children:v.jsx(lS,{})})})]}),v.jsx(U7,{})]}),v.jsx(z7,{})]})}$I({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});FI.createRoot(document.getElementById("root")).render(v.jsx(D.StrictMode,{children:v.jsx(F7,{})}));
