function rne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Dl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WT={exports:{}},rm={};var D4;function ine(){if(D4)return rm;D4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return rm.Fragment=e,rm.jsx=n,rm.jsxs=n,rm}var O4;function ane(){return O4||(O4=1,WT.exports=ine()),WT.exports}var m=ane(),YT={exports:{}},ct={};var R4;function sne(){if(R4)return ct;R4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function _(U,X,ne){this.props=U,this.context=X,this.refs=w,this.updater=ne||b}_.prototype.isReactComponent={},_.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=_.prototype;function I(U,X,ne){this.props=U,this.context=X,this.refs=w,this.updater=ne||b}var O=I.prototype=new T;O.constructor=I,x(O,_.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function N(){}var C={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(U,X,ne){var K=ne.ref;return{$$typeof:t,type:U,key:X,ref:K!==void 0?K:null,props:ne}}function j(U,X){return R(U.type,X,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return X[ne]})}var z=/\/+/g;function W(U,X){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):X.toString(36)}function Z(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,X,ne,K,ue){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,G(oe(U._payload),X,ne,K,ue)}}if(oe)return ue=ue(U),oe=K===""?"."+W(U,0):K,D(ue)?(ne="",oe!=null&&(ne=oe.replace(z,"$&/")+"/"),G(ue,X,ne,"",function(ge){return ge})):ue!=null&&(L(ue)&&(ue=j(ue,ne+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),X.push(ue)),1;oe=0;var _e=K===""?".":K+":";if(D(U))for(var se=0;se<U.length;se++)K=U[se],ie=_e+W(K,se),oe+=G(K,X,ne,ie,ue);else if(se=v(U),typeof se=="function")for(U=se.call(U),se=0;!(K=U.next()).done;)K=K.value,ie=_e+W(K,se++),oe+=G(K,X,ne,ie,ue);else if(ie==="object"){if(typeof U.then=="function")return G(Z(U),X,ne,K,ue);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Y(U,X,ne){if(U==null)return U;var K=[],ue=0;return G(U,K,"","",function(ie){return X.call(ne,ie,ue++)}),K}function Q(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var ee=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},te={map:Y,forEach:function(U,X,ne){Y(U,function(){X.apply(this,arguments)},ne)},count:function(U){var X=0;return Y(U,function(){X++}),X},toArray:function(U){return Y(U,function(X){return X})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ct.Activity=h,ct.Children=te,ct.Component=_,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=I,ct.StrictMode=r,ct.Suspense=c,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ct.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},ct.cache=function(U){return function(){return U.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(U,X,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var K=x({},U.props),ue=U.key;if(X!=null)for(ie in X.key!==void 0&&(ue=""+X.key),X)!P.call(X,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&X.ref===void 0||(K[ie]=X[ie]);var ie=arguments.length-2;if(ie===1)K.children=ne;else if(1<ie){for(var oe=Array(ie),_e=0;_e<ie;_e++)oe[_e]=arguments[_e+2];K.children=oe}return R(U.type,ue,K)},ct.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},ct.createElement=function(U,X,ne){var K,ue={},ie=null;if(X!=null)for(K in X.key!==void 0&&(ie=""+X.key),X)P.call(X,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ue[K]=X[K]);var oe=arguments.length-2;if(oe===1)ue.children=ne;else if(1<oe){for(var _e=Array(oe),se=0;se<oe;se++)_e[se]=arguments[se+2];ue.children=_e}if(U&&U.defaultProps)for(K in oe=U.defaultProps,oe)ue[K]===void 0&&(ue[K]=oe[K]);return R(U,ie,ue)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(U){return{$$typeof:o,render:U}},ct.isValidElement=L,ct.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:Q}},ct.memo=function(U,X){return{$$typeof:u,type:U,compare:X===void 0?null:X}},ct.startTransition=function(U){var X=C.T,ne={};C.T=ne;try{var K=U(),ue=C.S;ue!==null&&ue(ne,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(N,ee)}catch(ie){ee(ie)}finally{X!==null&&ne.types!==null&&(X.types=ne.types),C.T=X}},ct.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ct.use=function(U){return C.H.use(U)},ct.useActionState=function(U,X,ne){return C.H.useActionState(U,X,ne)},ct.useCallback=function(U,X){return C.H.useCallback(U,X)},ct.useContext=function(U){return C.H.useContext(U)},ct.useDebugValue=function(){},ct.useDeferredValue=function(U,X){return C.H.useDeferredValue(U,X)},ct.useEffect=function(U,X){return C.H.useEffect(U,X)},ct.useEffectEvent=function(U){return C.H.useEffectEvent(U)},ct.useId=function(){return C.H.useId()},ct.useImperativeHandle=function(U,X,ne){return C.H.useImperativeHandle(U,X,ne)},ct.useInsertionEffect=function(U,X){return C.H.useInsertionEffect(U,X)},ct.useLayoutEffect=function(U,X){return C.H.useLayoutEffect(U,X)},ct.useMemo=function(U,X){return C.H.useMemo(U,X)},ct.useOptimistic=function(U,X){return C.H.useOptimistic(U,X)},ct.useReducer=function(U,X,ne){return C.H.useReducer(U,X,ne)},ct.useRef=function(U){return C.H.useRef(U)},ct.useState=function(U){return C.H.useState(U)},ct.useSyncExternalStore=function(U,X,ne){return C.H.useSyncExternalStore(U,X,ne)},ct.useTransition=function(){return C.H.useTransition()},ct.version="19.2.0",ct}var M4;function Ip(){return M4||(M4=1,YT.exports=sne()),YT.exports}var A=Ip();const Dc=Dl(A),one=rne({__proto__:null,default:Dc},[A]);var XT={exports:{}},im={},QT={exports:{}},ZT={};var j4;function lne(){return j4||(j4=1,(function(t){function e(G,Y){var Q=G.length;G.push(Y);e:for(;0<Q;){var ee=Q-1>>>1,te=G[ee];if(0<i(te,Y))G[ee]=Y,G[Q]=te,Q=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Q=G.pop();if(Q!==Y){G[0]=Q;e:for(var ee=0,te=G.length,U=te>>>1;ee<U;){var X=2*(ee+1)-1,ne=G[X],K=X+1,ue=G[K];if(0>i(ne,Q))K<te&&0>i(ue,ne)?(G[ee]=ue,G[K]=Q,ee=K):(G[ee]=ne,G[X]=Q,ee=X);else if(K<te&&0>i(ue,Q))G[ee]=ue,G[K]=Q,ee=K;else break e}}return Y}function i(G,Y){var Q=G.sortIndex-Y.sortIndex;return Q!==0?Q:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(G){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function D(G){if(x=!1,O(G),!b)if(n(c)!==null)b=!0,N||(N=!0,B());else{var Y=n(u);Y!==null&&Z(D,Y.startTime-G)}}var N=!1,C=-1,P=5,R=-1;function j(){return w?!0:!(t.unstable_now()-R<P)}function L(){if(w=!1,N){var G=t.unstable_now();R=G;var Y=!0;try{e:{b=!1,x&&(x=!1,T(C),C=-1),v=!0;var Q=g;try{t:{for(O(G),h=n(c);h!==null&&!(h.expirationTime>G&&j());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,g=h.priorityLevel;var te=ee(h.expirationTime<=G);if(G=t.unstable_now(),typeof te=="function"){h.callback=te,O(G),Y=!0;break t}h===n(c)&&r(c),O(G)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Z(D,U.startTime-G),Y=!1}}break e}finally{h=null,g=Q,v=!1}Y=void 0}}finally{Y?B():N=!1}}}var B;if(typeof I=="function")B=function(){I(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=L,B=function(){W.postMessage(null)}}else B=function(){_(L,0)};function Z(G,Y){C=_(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Q=g;g=Y;try{return G()}finally{g=Q}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=g;g=G;try{return Y()}finally{g=Q}},t.unstable_scheduleCallback=function(G,Y,Q){var ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,G={id:f++,callback:Y,priorityLevel:G,startTime:Q,expirationTime:te,sortIndex:-1},Q>ee?(G.sortIndex=Q,e(u,G),n(c)===null&&G===n(u)&&(x?(T(C),C=-1):x=!0,Z(D,Q-ee))):(G.sortIndex=te,e(c,G),b||v||(b=!0,N||(N=!0,B()))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var Y=g;return function(){var Q=g;g=Y;try{return G.apply(this,arguments)}finally{g=Q}}}})(ZT)),ZT}var z4;function cne(){return z4||(z4=1,QT.exports=lne()),QT.exports}var JT={exports:{}},ii={};var L4;function une(){if(L4)return ii;L4=1;var t=Ip();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ii.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},ii.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},ii.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ii.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ii.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ii.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ii.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ii.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ii.requestFormReset=function(c){r.d.r(c)},ii.unstable_batchedUpdates=function(c,u){return c(u)},ii.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},ii.useFormStatus=function(){return s.H.useHostTransitionStatus()},ii.version="19.2.0",ii}var V4;function x$(){if(V4)return JT.exports;V4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),JT.exports=une(),JT.exports}var B4;function dne(){if(B4)return im;B4=1;var t=cne(),e=Ip(),n=x$();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var V=!1,q=E.child;q;){if(q===p){V=!0,p=E,y=k;break}if(q===y){V=!0,y=E,p=k;break}q=q.sibling}if(!V){for(q=k.child;q;){if(q===p){V=!0,p=k,y=E;break}if(q===y){V=!0,y=k,p=E;break}q=q.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case O:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case P:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var Z=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ee=[],te=-1;function U(l){return{current:l}}function X(l){0>te||(l.current=ee[te],ee[te]=null,te--)}function ne(l,d){te++,ee[te]=l.current,l.current=d}var K=U(null),ue=U(null),ie=U(null),oe=U(null);function _e(l,d){switch(ne(ie,d),ne(ue,l),ne(K,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?t4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=t4(d),l=n4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(K),ne(K,l)}function se(){X(K),X(ue),X(ie)}function ge(l){l.memoizedState!==null&&ne(oe,l);var d=K.current,p=n4(d,l.type);d!==p&&(ne(ue,l),ne(K,p))}function de(l){ue.current===l&&(X(K),X(ue)),oe.current===l&&(X(oe),Jg._currentValue=Q)}var J,Se;function Ce(l){if(J===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);J=d&&d[1]||"",Se=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+l+Se}var Oe=!1;function ze(l,d){if(!l||Oe)return"";Oe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(we){var be=we}Reflect.construct(l,[],ke)}else{try{ke.call()}catch(we){be=we}l.call(ke.prototype)}}else{try{throw Error()}catch(we){be=we}(ke=l())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(we){if(we&&be&&typeof we.stack=="string")return[we.stack,be.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),V=k[0],q=k[1];if(V&&q){var re=V.split(`
`),ve=q.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ve.length&&!ve[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===ve.length)for(y=re.length-1,E=ve.length-1;1<=y&&0<=E&&re[y]!==ve[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==ve[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==ve[E]){var Te=`
`+re[y].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=y&&0<=E);break}}}finally{Oe=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ce(p):""}function Ve(l,d){switch(l.tag){case 26:case 27:case 5:return Ce(l.type);case 16:return Ce("Lazy");case 13:return l.child!==d&&d!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return ze(l.type,!1);case 11:return ze(l.type.render,!1);case 1:return ze(l.type,!0);case 31:return Ce("Activity");default:return""}}function rt(l){try{var d="",p=null;do d+=Ve(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Be=Object.prototype.hasOwnProperty,nt=t.unstable_scheduleCallback,Bt=t.unstable_cancelCallback,Bn=t.unstable_shouldYield,Tn=t.unstable_requestPaint,bt=t.unstable_now,Ft=t.unstable_getCurrentPriorityLevel,Me=t.unstable_ImmediatePriority,ut=t.unstable_UserBlockingPriority,An=t.unstable_NormalPriority,gr=t.unstable_LowPriority,Fn=t.unstable_IdlePriority,Un=t.log,mr=t.unstable_setDisableYieldValue,Dn=null,at=null;function ln(l){if(typeof Un=="function"&&mr(l),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Dn,l)}catch{}}var mt=Math.clz32?Math.clz32:Ms,Gr=Math.log,Xi=Math.LN2;function Ms(l){return l>>>=0,l===0?32:31-(Gr(l)/Xi|0)|0}var vt=256,dn=262144,rn=4194304;function $n(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Zn(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=$n(y):(V&=q,V!==0?E=$n(V):p||(p=q&~l,p!==0&&(E=$n(p))))):(q=y&~k,q!==0?E=$n(q):V!==0?E=$n(V):p||(p=y&~l,p!==0&&(E=$n(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function vr(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Z_(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uy(){var l=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),l}function js(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function mu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function J_(l,d,p,y,E,k){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,re=l.expirationTimes,ve=l.hiddenUpdates;for(p=V&~p;0<p;){var Te=31-mt(p),ke=1<<Te;q[Te]=0,re[Te]=-1;var be=ve[Te];if(be!==null)for(ve[Te]=null,Te=0;Te<be.length;Te++){var we=be[Te];we!==null&&(we.lane&=-536870913)}p&=~ke}y!==0&&vu(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(V&~d))}function vu(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-mt(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function ig(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-mt(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function ag(l,d){var p=d&-d;return p=(p&42)!==0?1:yu(p),(p&(l.suspendedLanes|d))!==0?0:p}function yu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Do(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function dy(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:T4(l.type))}function rs(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var is=Math.random().toString(36).slice(2),Jn="__reactFiber$"+is,Rr="__reactProps$"+is,zs="__reactContainer$"+is,df="__reactEvents$"+is,eE="__reactListeners$"+is,fy="__reactHandles$"+is,hy="__reactResources$"+is,Ls="__reactMarker$"+is;function ff(l){delete l[Jn],delete l[Rr],delete l[df],delete l[eE],delete l[fy]}function Vs(l){var d=l[Jn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[zs]||p[Jn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=c4(l);l!==null;){if(p=l[Jn])return p;l=c4(l)}return d}l=p,p=l.parentNode}return null}function _a(l){if(l=l[Jn]||l[zs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Qi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Bs(l){var d=l[hy];return d||(d=l[hy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function er(l){l[Ls]=!0}var sg=new Set,og={};function Fs(l,d){Us(l,d),Us(l+"Capture",d)}function Us(l,d){for(og[l]=d,l=0;l<d.length;l++)sg.add(d[l])}var lg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cg={},ug={};function py(l){return Be.call(ug,l)?!0:Be.call(cg,l)?!1:lg.test(l)?ug[l]=!0:(cg[l]=!0,!1)}function hf(l,d,p){if(py(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Zi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function tr(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function Mr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Fl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function dg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,k.call(this,V)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Ut(l){if(!l._valueTracker){var d=Fl(l)?"checked":"value";l._valueTracker=dg(l,d,""+l[d])}}function bu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=Fl(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function $s(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var xu=/[\n"\\]/g;function Ii(l){return l.replace(xu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function pf(l,d,p,y,E,k,V,q){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Mr(d)):l.value!==""+Mr(d)&&(l.value=""+Mr(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?fg(l,V,Mr(d)):p!=null?fg(l,V,Mr(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Mr(q):l.removeAttribute("name")}function gy(l,d,p,y,E,k,V,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){Ut(l);return}p=p!=null?""+Mr(p):"",d=d!=null?""+Mr(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Ut(l)}function fg(l,d,p){d==="number"&&$s(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ul(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Mr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function my(l,d,p){if(d!=null&&(d=""+Mr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Mr(p):""}function $l(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Z(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Mr(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),Ut(l)}function Pi(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var vy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hg(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||vy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function pg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&hg(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&hg(l,k,d[k])}function gf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ql=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mf(l){return ql.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function as(){}var gg=null;function Ea(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Gl=null,qs=null;function wu(l){var d=_a(l);if(d&&(l=d.stateNode)){var p=l[Rr]||null;e:switch(l=d.stateNode,d.type){case"input":if(pf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ii(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[Rr]||null;if(!E)throw Error(r(90));pf(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&bu(y)}break e;case"textarea":my(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Ul(l,!!p.multiple,d,!1)}}}var vf=!1;function Hl(l,d,p){if(vf)return l(d,p);vf=!0;try{var y=l(d);return y}finally{if(vf=!1,(Gl!==null||qs!==null)&&(db(),Gl&&(d=Gl,l=qs,qs=Gl=null,wu(d),l)))for(d=0;d<l.length;d++)wu(l[d])}}function ss(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Rr]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Su=!1;if(Ta)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Su=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Su=!1}var Gs=null,mg=null,_u=null;function vg(){if(_u)return _u;var l,d=mg,p=d.length,y,E="value"in Gs?Gs.value:Gs.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(y=1;y<=V&&d[p-y]===E[k-y];y++);return _u=E.slice(l,1<y?1-y:void 0)}function Eu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Oo(){return!0}function os(){return!1}function Hr(l){function d(p,y,E,k,V){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Oo:os,this.isPropagationStopped=os,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),d}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=Hr(Ro),Kl=h({},Ro,{view:0,detail:0}),yg=Hr(Kl),Wl,yf,Ks,bf=h({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ks&&(Ks&&l.type==="mousemove"?(Wl=l.screenX-Ks.screenX,yf=l.screenY-Ks.screenY):yf=Wl=0,Ks=l),Wl)},movementY:function(l){return"movementY"in l?l.movementY:yf}}),bg=Hr(bf),Tu=h({},bf,{dataTransfer:0}),by=Hr(Tu),xy=h({},Kl,{relatedTarget:0}),Au=Hr(xy),xg=h({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),wy=Hr(xg),xf=h({},Ro,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Sy=Hr(xf),_y=h({},Ro,{data:0}),Ws=Hr(_y),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ky(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Ay[l])?!!d[l]:!1}function Yl(){return ky}var mi=h({},Kl,{key:function(l){if(l.key){var d=Ey[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Eu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ty[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(l){return l.type==="keypress"?Eu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Eu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Cy=Hr(mi),Iy=h({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Hr(Iy),S=h({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),M=Hr(S),F=h({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Hr(F),pe=h({},bf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Hr(pe),Re=h({},Ro,{newState:0,oldState:0}),dt=Hr(Re),qn=[9,13,27,32],jt=Ta&&"CompositionEvent"in window,yn=null;Ta&&"documentMode"in document&&(yn=document.documentMode);var Aa=Ta&&"TextEvent"in window&&!yn,Ys=Ta&&(!jt||yn&&8<yn&&11>=yn),ls=" ",cs=!1;function ku(l,d){switch(l){case"keyup":return qn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Sf=!1;function kee(l,d){switch(l){case"compositionend":return wf(d);case"keypress":return d.which!==32?null:(cs=!0,ls);case"textInput":return l=d.data,l===ls&&cs?null:l;default:return null}}function Cee(l,d){if(Sf)return l==="compositionend"||!jt&&ku(l,d)?(l=vg(),_u=mg=Gs=null,Sf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ys&&d.locale!=="ko"?null:d.data;default:return null}}var Iee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Iee[l.type]:d==="textarea"}function hM(l,d,p,y){Gl?qs?qs.push(y):qs=[y]:Gl=y,d=yb(d,"onChange"),0<d.length&&(p=new Hs("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var wg=null,Sg=null;function Pee(l){Yz(l,0)}function Py(l){var d=Qi(l);if(bu(d))return l}function pM(l,d){if(l==="change")return d}var gM=!1;if(Ta){var tE;if(Ta){var nE="oninput"in document;if(!nE){var mM=document.createElement("div");mM.setAttribute("oninput","return;"),nE=typeof mM.oninput=="function"}tE=nE}else tE=!1;gM=tE&&(!document.documentMode||9<document.documentMode)}function vM(){wg&&(wg.detachEvent("onpropertychange",yM),Sg=wg=null)}function yM(l){if(l.propertyName==="value"&&Py(Sg)){var d=[];hM(d,Sg,l,Ea(l)),Hl(Pee,d)}}function Nee(l,d,p){l==="focusin"?(vM(),wg=d,Sg=p,wg.attachEvent("onpropertychange",yM)):l==="focusout"&&vM()}function Dee(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Py(Sg)}function Oee(l,d){if(l==="click")return Py(d)}function Ree(l,d){if(l==="input"||l==="change")return Py(d)}function Mee(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ji=typeof Object.is=="function"?Object.is:Mee;function _g(l,d){if(Ji(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Be.call(d,E)||!Ji(l[E],d[E]))return!1}return!0}function bM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function xM(l,d){var p=bM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=bM(p)}}function wM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?wM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function SM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=$s(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=$s(l.document)}return d}function rE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var jee=Ta&&"documentMode"in document&&11>=document.documentMode,_f=null,iE=null,Eg=null,aE=!1;function _M(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;aE||_f==null||_f!==$s(y)||(y=_f,"selectionStart"in y&&rE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Eg&&_g(Eg,y)||(Eg=y,y=yb(iE,"onSelect"),0<y.length&&(d=new Hs("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=_f)))}function Cu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ef={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionrun:Cu("Transition","TransitionRun"),transitionstart:Cu("Transition","TransitionStart"),transitioncancel:Cu("Transition","TransitionCancel"),transitionend:Cu("Transition","TransitionEnd")},sE={},EM={};Ta&&(EM=document.createElement("div").style,"AnimationEvent"in window||(delete Ef.animationend.animation,delete Ef.animationiteration.animation,delete Ef.animationstart.animation),"TransitionEvent"in window||delete Ef.transitionend.transition);function Iu(l){if(sE[l])return sE[l];if(!Ef[l])return l;var d=Ef[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in EM)return sE[l]=d[p];return l}var TM=Iu("animationend"),AM=Iu("animationiteration"),kM=Iu("animationstart"),zee=Iu("transitionrun"),Lee=Iu("transitionstart"),Vee=Iu("transitioncancel"),CM=Iu("transitionend"),IM=new Map,oE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oE.push("scrollEnd");function us(l,d){IM.set(l,d),Fs(d,[l])}var Ny=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ka=[],Tf=0,lE=0;function Dy(){for(var l=Tf,d=lE=Tf=0;d<l;){var p=ka[d];ka[d++]=null;var y=ka[d];ka[d++]=null;var E=ka[d];ka[d++]=null;var k=ka[d];if(ka[d++]=null,y!==null&&E!==null){var V=y.pending;V===null?E.next=E:(E.next=V.next,V.next=E),y.pending=E}k!==0&&PM(p,E,k)}}function Oy(l,d,p,y){ka[Tf++]=l,ka[Tf++]=d,ka[Tf++]=p,ka[Tf++]=y,lE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function cE(l,d,p,y){return Oy(l,d,p,y),Ry(l)}function Pu(l,d){return Oy(l,null,null,d),Ry(l)}function PM(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-mt(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Ry(l){if(50<Hg)throw Hg=0,yT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Af={};function Bee(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(l,d,p,y){return new Bee(l,d,p,y)}function uE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function jo(l,d){var p=l.alternate;return p===null?(p=ea(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function NM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function My(l,d,p,y,E,k){var V=0;if(y=l,typeof l=="function")uE(l)&&(V=1);else if(typeof l=="string")V=Gte(l,p,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=ea(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return Nu(p.children,E,k,d);case w:V=8,E|=24;break;case _:return l=ea(12,p,d,E|2),l.elementType=_,l.lanes=k,l;case D:return l=ea(13,p,d,E),l.elementType=D,l.lanes=k,l;case N:return l=ea(19,p,d,E),l.elementType=N,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case T:V=9;break e;case O:V=11;break e;case C:V=14;break e;case P:V=16,y=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=ea(V,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function Nu(l,d,p,y){return l=ea(7,l,y,d),l.lanes=p,l}function dE(l,d,p){return l=ea(6,l,null,d),l.lanes=p,l}function DM(l){var d=ea(18,null,null,0);return d.stateNode=l,d}function fE(l,d,p){return d=ea(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var OM=new WeakMap;function Ca(l,d){if(typeof l=="object"&&l!==null){var p=OM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:rt(d)},OM.set(l,d),d)}return{value:l,source:d,stack:rt(d)}}var kf=[],Cf=0,jy=null,Tg=0,Ia=[],Pa=0,Xl=null,Xs=1,Qs="";function zo(l,d){kf[Cf++]=Tg,kf[Cf++]=jy,jy=l,Tg=d}function RM(l,d,p){Ia[Pa++]=Xs,Ia[Pa++]=Qs,Ia[Pa++]=Xl,Xl=l;var y=Xs;l=Qs;var E=32-mt(y)-1;y&=~(1<<E),p+=1;var k=32-mt(d)+E;if(30<k){var V=E-E%5;k=(y&(1<<V)-1).toString(32),y>>=V,E-=V,Xs=1<<32-mt(d)+E|p<<E|y,Qs=k+l}else Xs=1<<k|p<<E|y,Qs=l}function hE(l){l.return!==null&&(zo(l,1),RM(l,1,0))}function pE(l){for(;l===jy;)jy=kf[--Cf],kf[Cf]=null,Tg=kf[--Cf],kf[Cf]=null;for(;l===Xl;)Xl=Ia[--Pa],Ia[Pa]=null,Qs=Ia[--Pa],Ia[Pa]=null,Xs=Ia[--Pa],Ia[Pa]=null}function MM(l,d){Ia[Pa++]=Xs,Ia[Pa++]=Qs,Ia[Pa++]=Xl,Xs=d.id,Qs=d.overflow,Xl=l}var Kr=null,fn=null,It=!1,Ql=null,Na=!1,gE=Error(r(519));function Zl(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ag(Ca(d,l)),gE}function jM(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Jn]=l,d[Rr]=y,p){case"dialog":St("cancel",d),St("close",d);break;case"iframe":case"object":case"embed":St("load",d);break;case"video":case"audio":for(p=0;p<Wg.length;p++)St(Wg[p],d);break;case"source":St("error",d);break;case"img":case"image":case"link":St("error",d),St("load",d);break;case"details":St("toggle",d);break;case"input":St("invalid",d),gy(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":St("invalid",d);break;case"textarea":St("invalid",d),$l(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||Jz(d.textContent,p)?(y.popover!=null&&(St("beforetoggle",d),St("toggle",d)),y.onScroll!=null&&St("scroll",d),y.onScrollEnd!=null&&St("scrollend",d),y.onClick!=null&&(d.onclick=as),d=!0):d=!1,d||Zl(l,!0)}function zM(l){for(Kr=l.return;Kr;)switch(Kr.tag){case 5:case 31:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:Kr=Kr.return}}function If(l){if(l!==Kr)return!1;if(!It)return zM(l),It=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||OT(l.type,l.memoizedProps)),p=!p),p&&fn&&Zl(l),zM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));fn=l4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));fn=l4(l)}else d===27?(d=fn,fc(l.type)?(l=LT,LT=null,fn=l):fn=d):fn=Kr?Oa(l.stateNode.nextSibling):null;return!0}function Du(){fn=Kr=null,It=!1}function mE(){var l=Ql;return l!==null&&(Ri===null?Ri=l:Ri.push.apply(Ri,l),Ql=null),l}function Ag(l){Ql===null?Ql=[l]:Ql.push(l)}var vE=U(null),Ou=null,Lo=null;function Jl(l,d,p){ne(vE,d._currentValue),d._currentValue=p}function Vo(l){l._currentValue=vE.current,X(vE)}function yE(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function bE(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var V=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var re=0;re<d.length;re++)if(q.context===d[re]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),yE(k.return,p,l),y||(V=null);break e}k=q.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,k=V.alternate,k!==null&&(k.lanes|=p),yE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function Pf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var q=E.type;Ji(E.pendingProps.value,V.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Jg):l=[Jg])}E=E.return}l!==null&&bE(d,l,p,y),d.flags|=262144}function zy(l){for(l=l.firstContext;l!==null;){if(!Ji(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ru(l){Ou=l,Lo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Wr(l){return LM(Ou,l)}function Ly(l,d){return Ou===null&&Ru(l),LM(l,d)}function LM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Lo===null){if(l===null)throw Error(r(308));Lo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Lo=Lo.next=d;return p}var Fee=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},Uee=t.unstable_scheduleCallback,$ee=t.unstable_NormalPriority,nr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xE(){return{controller:new Fee,data:new Map,refCount:0}}function kg(l){l.refCount--,l.refCount===0&&Uee($ee,function(){l.controller.abort()})}var Cg=null,wE=0,Nf=0,Df=null;function qee(l,d){if(Cg===null){var p=Cg=[];wE=0,Nf=ET(),Df={status:"pending",value:void 0,then:function(y){p.push(y)}}}return wE++,d.then(VM,VM),d}function VM(){if(--wE===0&&Cg!==null){Df!==null&&(Df.status="fulfilled");var l=Cg;Cg=null,Nf=0,Df=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Gee(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var BM=G.S;G.S=function(l,d){_z=bt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&qee(l,d),BM!==null&&BM(l,d)};var Mu=U(null);function SE(){var l=Mu.current;return l!==null?l:an.pooledCache}function Vy(l,d){d===null?ne(Mu,Mu.current):ne(Mu,d.pool)}function FM(){var l=SE();return l===null?null:{parent:nr._currentValue,pool:l}}var Of=Error(r(460)),_E=Error(r(474)),By=Error(r(542)),Fy={then:function(){}};function UM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function $M(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(as,as),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,GM(l),l;default:if(typeof d.status=="string")d.then(as,as);else{if(l=an,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,GM(l),l}throw zu=d,Of}}function ju(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(zu=p,Of):p}}var zu=null;function qM(){if(zu===null)throw Error(r(459));var l=zu;return zu=null,l}function GM(l){if(l===Of||l===By)throw Error(r(483))}var Rf=null,Ig=0;function Uy(l){var d=Ig;return Ig+=1,Rf===null&&(Rf=[]),$M(Rf,l,d)}function Pg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function $y(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function HM(l){function d(fe,ce){if(l){var me=fe.deletions;me===null?(fe.deletions=[ce],fe.flags|=16):me.push(ce)}}function p(fe,ce){if(!l)return null;for(;ce!==null;)d(fe,ce),ce=ce.sibling;return null}function y(fe){for(var ce=new Map;fe!==null;)fe.key!==null?ce.set(fe.key,fe):ce.set(fe.index,fe),fe=fe.sibling;return ce}function E(fe,ce){return fe=jo(fe,ce),fe.index=0,fe.sibling=null,fe}function k(fe,ce,me){return fe.index=me,l?(me=fe.alternate,me!==null?(me=me.index,me<ce?(fe.flags|=67108866,ce):me):(fe.flags|=67108866,ce)):(fe.flags|=1048576,ce)}function V(fe){return l&&fe.alternate===null&&(fe.flags|=67108866),fe}function q(fe,ce,me,Ae){return ce===null||ce.tag!==6?(ce=dE(me,fe.mode,Ae),ce.return=fe,ce):(ce=E(ce,me),ce.return=fe,ce)}function re(fe,ce,me,Ae){var Qe=me.type;return Qe===x?Te(fe,ce,me.props.children,Ae,me.key):ce!==null&&(ce.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===P&&ju(Qe)===ce.type)?(ce=E(ce,me.props),Pg(ce,me),ce.return=fe,ce):(ce=My(me.type,me.key,me.props,null,fe.mode,Ae),Pg(ce,me),ce.return=fe,ce)}function ve(fe,ce,me,Ae){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==me.containerInfo||ce.stateNode.implementation!==me.implementation?(ce=fE(me,fe.mode,Ae),ce.return=fe,ce):(ce=E(ce,me.children||[]),ce.return=fe,ce)}function Te(fe,ce,me,Ae,Qe){return ce===null||ce.tag!==7?(ce=Nu(me,fe.mode,Ae,Qe),ce.return=fe,ce):(ce=E(ce,me),ce.return=fe,ce)}function ke(fe,ce,me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=dE(""+ce,fe.mode,me),ce.return=fe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return me=My(ce.type,ce.key,ce.props,null,fe.mode,me),Pg(me,ce),me.return=fe,me;case b:return ce=fE(ce,fe.mode,me),ce.return=fe,ce;case P:return ce=ju(ce),ke(fe,ce,me)}if(Z(ce)||B(ce))return ce=Nu(ce,fe.mode,me,null),ce.return=fe,ce;if(typeof ce.then=="function")return ke(fe,Uy(ce),me);if(ce.$$typeof===I)return ke(fe,Ly(fe,ce),me);$y(fe,ce)}return null}function be(fe,ce,me,Ae){var Qe=ce!==null?ce.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Qe!==null?null:q(fe,ce,""+me,Ae);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return me.key===Qe?re(fe,ce,me,Ae):null;case b:return me.key===Qe?ve(fe,ce,me,Ae):null;case P:return me=ju(me),be(fe,ce,me,Ae)}if(Z(me)||B(me))return Qe!==null?null:Te(fe,ce,me,Ae,null);if(typeof me.then=="function")return be(fe,ce,Uy(me),Ae);if(me.$$typeof===I)return be(fe,ce,Ly(fe,me),Ae);$y(fe,me)}return null}function we(fe,ce,me,Ae,Qe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return fe=fe.get(me)||null,q(ce,fe,""+Ae,Qe);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:return fe=fe.get(Ae.key===null?me:Ae.key)||null,re(ce,fe,Ae,Qe);case b:return fe=fe.get(Ae.key===null?me:Ae.key)||null,ve(ce,fe,Ae,Qe);case P:return Ae=ju(Ae),we(fe,ce,me,Ae,Qe)}if(Z(Ae)||B(Ae))return fe=fe.get(me)||null,Te(ce,fe,Ae,Qe,null);if(typeof Ae.then=="function")return we(fe,ce,me,Uy(Ae),Qe);if(Ae.$$typeof===I)return we(fe,ce,me,Ly(ce,Ae),Qe);$y(ce,Ae)}return null}function $e(fe,ce,me,Ae){for(var Qe=null,Dt=null,He=ce,pt=ce=0,Tt=null;He!==null&&pt<me.length;pt++){He.index>pt?(Tt=He,He=null):Tt=He.sibling;var Ot=be(fe,He,me[pt],Ae);if(Ot===null){He===null&&(He=Tt);break}l&&He&&Ot.alternate===null&&d(fe,He),ce=k(Ot,ce,pt),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot,He=Tt}if(pt===me.length)return p(fe,He),It&&zo(fe,pt),Qe;if(He===null){for(;pt<me.length;pt++)He=ke(fe,me[pt],Ae),He!==null&&(ce=k(He,ce,pt),Dt===null?Qe=He:Dt.sibling=He,Dt=He);return It&&zo(fe,pt),Qe}for(He=y(He);pt<me.length;pt++)Tt=we(He,fe,pt,me[pt],Ae),Tt!==null&&(l&&Tt.alternate!==null&&He.delete(Tt.key===null?pt:Tt.key),ce=k(Tt,ce,pt),Dt===null?Qe=Tt:Dt.sibling=Tt,Dt=Tt);return l&&He.forEach(function(vc){return d(fe,vc)}),It&&zo(fe,pt),Qe}function it(fe,ce,me,Ae){if(me==null)throw Error(r(151));for(var Qe=null,Dt=null,He=ce,pt=ce=0,Tt=null,Ot=me.next();He!==null&&!Ot.done;pt++,Ot=me.next()){He.index>pt?(Tt=He,He=null):Tt=He.sibling;var vc=be(fe,He,Ot.value,Ae);if(vc===null){He===null&&(He=Tt);break}l&&He&&vc.alternate===null&&d(fe,He),ce=k(vc,ce,pt),Dt===null?Qe=vc:Dt.sibling=vc,Dt=vc,He=Tt}if(Ot.done)return p(fe,He),It&&zo(fe,pt),Qe;if(He===null){for(;!Ot.done;pt++,Ot=me.next())Ot=ke(fe,Ot.value,Ae),Ot!==null&&(ce=k(Ot,ce,pt),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot);return It&&zo(fe,pt),Qe}for(He=y(He);!Ot.done;pt++,Ot=me.next())Ot=we(He,fe,pt,Ot.value,Ae),Ot!==null&&(l&&Ot.alternate!==null&&He.delete(Ot.key===null?pt:Ot.key),ce=k(Ot,ce,pt),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot);return l&&He.forEach(function(nne){return d(fe,nne)}),It&&zo(fe,pt),Qe}function Zt(fe,ce,me,Ae){if(typeof me=="object"&&me!==null&&me.type===x&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case v:e:{for(var Qe=me.key;ce!==null;){if(ce.key===Qe){if(Qe=me.type,Qe===x){if(ce.tag===7){p(fe,ce.sibling),Ae=E(ce,me.props.children),Ae.return=fe,fe=Ae;break e}}else if(ce.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===P&&ju(Qe)===ce.type){p(fe,ce.sibling),Ae=E(ce,me.props),Pg(Ae,me),Ae.return=fe,fe=Ae;break e}p(fe,ce);break}else d(fe,ce);ce=ce.sibling}me.type===x?(Ae=Nu(me.props.children,fe.mode,Ae,me.key),Ae.return=fe,fe=Ae):(Ae=My(me.type,me.key,me.props,null,fe.mode,Ae),Pg(Ae,me),Ae.return=fe,fe=Ae)}return V(fe);case b:e:{for(Qe=me.key;ce!==null;){if(ce.key===Qe)if(ce.tag===4&&ce.stateNode.containerInfo===me.containerInfo&&ce.stateNode.implementation===me.implementation){p(fe,ce.sibling),Ae=E(ce,me.children||[]),Ae.return=fe,fe=Ae;break e}else{p(fe,ce);break}else d(fe,ce);ce=ce.sibling}Ae=fE(me,fe.mode,Ae),Ae.return=fe,fe=Ae}return V(fe);case P:return me=ju(me),Zt(fe,ce,me,Ae)}if(Z(me))return $e(fe,ce,me,Ae);if(B(me)){if(Qe=B(me),typeof Qe!="function")throw Error(r(150));return me=Qe.call(me),it(fe,ce,me,Ae)}if(typeof me.then=="function")return Zt(fe,ce,Uy(me),Ae);if(me.$$typeof===I)return Zt(fe,ce,Ly(fe,me),Ae);$y(fe,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ce!==null&&ce.tag===6?(p(fe,ce.sibling),Ae=E(ce,me),Ae.return=fe,fe=Ae):(p(fe,ce),Ae=dE(me,fe.mode,Ae),Ae.return=fe,fe=Ae),V(fe)):p(fe,ce)}return function(fe,ce,me,Ae){try{Ig=0;var Qe=Zt(fe,ce,me,Ae);return Rf=null,Qe}catch(He){if(He===Of||He===By)throw He;var Dt=ea(29,He,null,fe.mode);return Dt.lanes=Ae,Dt.return=fe,Dt}finally{}}}var Lu=HM(!0),KM=HM(!1),ec=!1;function EE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function tc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function nc(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(zt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Ry(l),PM(l,null,p),d}return Oy(l,y,d,p),Ry(l)}function Ng(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,ig(l,p)}}function AE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=V:k=k.next=V,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var kE=!1;function Dg(){if(kE){var l=Df;if(l!==null)throw l}}function Og(l,d,p,y){kE=!1;var E=l.updateQueue;ec=!1;var k=E.firstBaseUpdate,V=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var re=q,ve=re.next;re.next=null,V===null?k=ve:V.next=ve,V=re;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==V&&(q===null?Te.firstBaseUpdate=ve:q.next=ve,Te.lastBaseUpdate=re))}if(k!==null){var ke=E.baseState;V=0,Te=ve=re=null,q=k;do{var be=q.lane&-536870913,we=be!==q.lane;if(we?(Et&be)===be:(y&be)===be){be!==0&&be===Nf&&(kE=!0),Te!==null&&(Te=Te.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var $e=l,it=q;be=d;var Zt=p;switch(it.tag){case 1:if($e=it.payload,typeof $e=="function"){ke=$e.call(Zt,ke,be);break e}ke=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=it.payload,be=typeof $e=="function"?$e.call(Zt,ke,be):$e,be==null)break e;ke=h({},ke,be);break e;case 2:ec=!0}}be=q.callback,be!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[be]:we.push(be))}else we={lane:be,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ve=Te=we,re=ke):Te=Te.next=we,V|=be;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(re=ke),E.baseState=re,E.firstBaseUpdate=ve,E.lastBaseUpdate=Te,k===null&&(E.shared.lanes=0),oc|=V,l.lanes=V,l.memoizedState=ke}}function WM(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function YM(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)WM(p[l],d)}var Mf=U(null),qy=U(0);function XM(l,d){l=Wo,ne(qy,l),ne(Mf,d),Wo=l|d.baseLanes}function CE(){ne(qy,Wo),ne(Mf,Mf.current)}function IE(){Wo=qy.current,X(Mf),X(qy)}var ta=U(null),Da=null;function rc(l){var d=l.alternate;ne(Gn,Gn.current&1),ne(ta,l),Da===null&&(d===null||Mf.current!==null||d.memoizedState!==null)&&(Da=l)}function PE(l){ne(Gn,Gn.current),ne(ta,l),Da===null&&(Da=l)}function QM(l){l.tag===22?(ne(Gn,Gn.current),ne(ta,l),Da===null&&(Da=l)):ic()}function ic(){ne(Gn,Gn.current),ne(ta,ta.current)}function na(l){X(ta),Da===l&&(Da=null),X(Gn)}var Gn=U(0);function Gy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||jT(p)||zT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Bo=0,ft=null,Xt=null,rr=null,Hy=!1,jf=!1,Vu=!1,Ky=0,Rg=0,zf=null,Hee=0;function On(){throw Error(r(321))}function NE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ji(l[p],d[p]))return!1;return!0}function DE(l,d,p,y,E,k){return Bo=k,ft=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?Rj:KE,Vu=!1,k=p(y,E),Vu=!1,jf&&(k=JM(d,p,y,E)),ZM(l),k}function ZM(l){G.H=zg;var d=Xt!==null&&Xt.next!==null;if(Bo=0,rr=Xt=ft=null,Hy=!1,Rg=0,zf=null,d)throw Error(r(300));l===null||ir||(l=l.dependencies,l!==null&&zy(l)&&(ir=!0))}function JM(l,d,p,y){ft=l;var E=0;do{if(jf&&(zf=null),Rg=0,jf=!1,25<=E)throw Error(r(301));if(E+=1,rr=Xt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=Mj,k=d(p,y)}while(jf);return k}function Kee(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?Mg(d):d,l=l.useState()[0],(Xt!==null?Xt.memoizedState:null)!==l&&(ft.flags|=1024),d}function OE(){var l=Ky!==0;return Ky=0,l}function RE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function ME(l){if(Hy){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Hy=!1}Bo=0,rr=Xt=ft=null,jf=!1,Rg=Ky=0,zf=null}function vi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?ft.memoizedState=rr=l:rr=rr.next=l,rr}function Hn(){if(Xt===null){var l=ft.alternate;l=l!==null?l.memoizedState:null}else l=Xt.next;var d=rr===null?ft.memoizedState:rr.next;if(d!==null)rr=d,Xt=l;else{if(l===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Xt=l,l={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},rr===null?ft.memoizedState=rr=l:rr=rr.next=l}return rr}function Wy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mg(l){var d=Rg;return Rg+=1,zf===null&&(zf=[]),l=$M(zf,l,d),d=ft,(rr===null?d.memoizedState:rr.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?Rj:KE),l}function Yy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Mg(l);if(l.$$typeof===I)return Wr(l)}throw Error(r(438,String(l)))}function jE(l){var d=null,p=ft.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=ft.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Wy(),ft.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=j;return d.index++,p}function Fo(l,d){return typeof d=="function"?d(l):d}function Xy(l){var d=Hn();return zE(d,Xt,l)}function zE(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var V=E.next;E.next=k.next,k.next=V}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=V=null,re=null,ve=d,Te=!1;do{var ke=ve.lane&-536870913;if(ke!==ve.lane?(Et&ke)===ke:(Bo&ke)===ke){var be=ve.revertLane;if(be===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),ke===Nf&&(Te=!0);else if((Bo&be)===be){ve=ve.next,be===Nf&&(Te=!0);continue}else ke={lane:0,revertLane:ve.revertLane,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},re===null?(q=re=ke,V=k):re=re.next=ke,ft.lanes|=be,oc|=be;ke=ve.action,Vu&&p(k,ke),k=ve.hasEagerState?ve.eagerState:p(k,ke)}else be={lane:ke,revertLane:ve.revertLane,gesture:ve.gesture,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},re===null?(q=re=be,V=k):re=re.next=be,ft.lanes|=ke,oc|=ke;ve=ve.next}while(ve!==null&&ve!==d);if(re===null?V=k:re.next=q,!Ji(k,l.memoizedState)&&(ir=!0,Te&&(p=Df,p!==null)))throw p;l.memoizedState=k,l.baseState=V,l.baseQueue=re,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function LE(l){var d=Hn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do k=l(k,V.action),V=V.next;while(V!==E);Ji(k,d.memoizedState)||(ir=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function ej(l,d,p){var y=ft,E=Hn(),k=It;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!Ji((Xt||E).memoizedState,p);if(V&&(E.memoizedState=p,ir=!0),E=E.queue,FE(rj.bind(null,y,E,l),[l]),E.getSnapshot!==d||V||rr!==null&&rr.memoizedState.tag&1){if(y.flags|=2048,Lf(9,{destroy:void 0},nj.bind(null,y,E,p,d),null),an===null)throw Error(r(349));k||(Bo&127)!==0||tj(y,d,p)}return p}function tj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ft.updateQueue,d===null?(d=Wy(),ft.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function nj(l,d,p,y){d.value=p,d.getSnapshot=y,ij(d)&&aj(l)}function rj(l,d,p){return p(function(){ij(d)&&aj(l)})}function ij(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ji(l,p)}catch{return!0}}function aj(l){var d=Pu(l,2);d!==null&&Mi(d,l,2)}function VE(l){var d=vi();if(typeof l=="function"){var p=l;if(l=p(),Vu){ln(!0);try{p()}finally{ln(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:l},d}function sj(l,d,p,y){return l.baseState=p,zE(l,Xt,typeof y=="function"?y:Fo)}function Wee(l,d,p,y,E){if(Jy(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){k.listeners.push(V)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,oj(d,k)):(k.next=p.next,d.pending=p.next=k)}}function oj(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,V={};G.T=V;try{var q=p(E,y),re=G.S;re!==null&&re(V,q),lj(l,d,q)}catch(ve){BE(l,d,ve)}finally{k!==null&&V.types!==null&&(k.types=V.types),G.T=k}}else try{k=p(E,y),lj(l,d,k)}catch(ve){BE(l,d,ve)}}function lj(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){cj(l,d,y)},function(y){return BE(l,d,y)}):cj(l,d,p)}function cj(l,d,p){d.status="fulfilled",d.value=p,uj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,oj(l,p)))}function BE(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,uj(d),d=d.next;while(d!==y)}l.action=null}function uj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function dj(l,d){return d}function fj(l,d){if(It){var p=an.formState;if(p!==null){e:{var y=ft;if(It){if(fn){t:{for(var E=fn,k=Na;E.nodeType!==8;){if(!k){E=null;break t}if(E=Oa(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){fn=Oa(E.nextSibling),y=E.data==="F!";break e}}Zl(y)}y=!1}y&&(d=p[0])}}return p=vi(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dj,lastRenderedState:d},p.queue=y,p=Nj.bind(null,ft,y),y.dispatch=p,y=VE(!1),k=HE.bind(null,ft,!1,y.queue),y=vi(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=Wee.bind(null,ft,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function hj(l){var d=Hn();return pj(d,Xt,l)}function pj(l,d,p){if(d=zE(l,d,dj)[0],l=Xy(Fo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Mg(d)}catch(V){throw V===Of?By:V}else y=d;d=Hn();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(ft.flags|=2048,Lf(9,{destroy:void 0},Yee.bind(null,E,p),null)),[y,k,l]}function Yee(l,d){l.action=d}function gj(l){var d=Hn(),p=Xt;if(p!==null)return pj(d,p,l);Hn(),d=d.memoizedState,p=Hn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Lf(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=ft.updateQueue,d===null&&(d=Wy(),ft.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function mj(){return Hn().memoizedState}function Qy(l,d,p,y){var E=vi();ft.flags|=l,E.memoizedState=Lf(1|d,{destroy:void 0},p,y===void 0?null:y)}function Zy(l,d,p,y){var E=Hn();y=y===void 0?null:y;var k=E.memoizedState.inst;Xt!==null&&y!==null&&NE(y,Xt.memoizedState.deps)?E.memoizedState=Lf(d,k,p,y):(ft.flags|=l,E.memoizedState=Lf(1|d,k,p,y))}function vj(l,d){Qy(8390656,8,l,d)}function FE(l,d){Zy(2048,8,l,d)}function Xee(l){ft.flags|=4;var d=ft.updateQueue;if(d===null)d=Wy(),ft.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function yj(l){var d=Hn().memoizedState;return Xee({ref:d,nextImpl:l}),function(){if((zt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function bj(l,d){return Zy(4,2,l,d)}function xj(l,d){return Zy(4,4,l,d)}function wj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Sj(l,d,p){p=p!=null?p.concat([l]):null,Zy(4,4,wj.bind(null,d,l),p)}function UE(){}function _j(l,d){var p=Hn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&NE(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function Ej(l,d){var p=Hn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&NE(d,y[1]))return y[0];if(y=l(),Vu){ln(!0);try{l()}finally{ln(!1)}}return p.memoizedState=[y,d],y}function $E(l,d,p){return p===void 0||(Bo&1073741824)!==0&&(Et&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=Tz(),ft.lanes|=l,oc|=l,p)}function Tj(l,d,p,y){return Ji(p,d)?p:Mf.current!==null?(l=$E(l,p,y),Ji(l,d)||(ir=!0),l):(Bo&42)===0||(Bo&1073741824)!==0&&(Et&261930)===0?(ir=!0,l.memoizedState=p):(l=Tz(),ft.lanes|=l,oc|=l,d)}function Aj(l,d,p,y,E){var k=Y.p;Y.p=k!==0&&8>k?k:8;var V=G.T,q={};G.T=q,HE(l,!1,d,p);try{var re=E(),ve=G.S;if(ve!==null&&ve(q,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Te=Gee(re,y);jg(l,d,Te,aa(l))}else jg(l,d,y,aa(l))}catch(ke){jg(l,d,{then:function(){},status:"rejected",reason:ke},aa())}finally{Y.p=k,V!==null&&q.types!==null&&(V.types=q.types),G.T=V}}function Qee(){}function qE(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=kj(l).queue;Aj(l,E,d,Q,p===null?Qee:function(){return Cj(l),p(y)})}function kj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:Q},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Cj(l){var d=kj(l);d.next===null&&(d=l.alternate.memoizedState),jg(l,d.next.queue,{},aa())}function GE(){return Wr(Jg)}function Ij(){return Hn().memoizedState}function Pj(){return Hn().memoizedState}function Zee(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=aa();l=tc(p);var y=nc(d,l,p);y!==null&&(Mi(y,d,p),Ng(y,d,p)),d={cache:xE()},l.payload=d;return}d=d.return}}function Jee(l,d,p){var y=aa();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Jy(l)?Dj(d,p):(p=cE(l,d,p,y),p!==null&&(Mi(p,l,y),Oj(p,d,y)))}function Nj(l,d,p){var y=aa();jg(l,d,p,y)}function jg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Jy(l))Dj(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var V=d.lastRenderedState,q=k(V,p);if(E.hasEagerState=!0,E.eagerState=q,Ji(q,V))return Oy(l,d,E,0),an===null&&Dy(),!1}catch{}finally{}if(p=cE(l,d,E,y),p!==null)return Mi(p,l,y),Oj(p,d,y),!0}return!1}function HE(l,d,p,y){if(y={lane:2,revertLane:ET(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Jy(l)){if(d)throw Error(r(479))}else d=cE(l,p,y,2),d!==null&&Mi(d,l,2)}function Jy(l){var d=l.alternate;return l===ft||d!==null&&d===ft}function Dj(l,d){jf=Hy=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function Oj(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,ig(l,p)}}var zg={readContext:Wr,use:Yy,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};zg.useEffectEvent=On;var Rj={readContext:Wr,use:Yy,useCallback:function(l,d){return vi().memoizedState=[l,d===void 0?null:d],l},useContext:Wr,useEffect:vj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Qy(4194308,4,wj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Qy(4194308,4,l,d)},useInsertionEffect:function(l,d){Qy(4,2,l,d)},useMemo:function(l,d){var p=vi();d=d===void 0?null:d;var y=l();if(Vu){ln(!0);try{l()}finally{ln(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=vi();if(p!==void 0){var E=p(d);if(Vu){ln(!0);try{p(d)}finally{ln(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Jee.bind(null,ft,l),[y.memoizedState,l]},useRef:function(l){var d=vi();return l={current:l},d.memoizedState=l},useState:function(l){l=VE(l);var d=l.queue,p=Nj.bind(null,ft,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:UE,useDeferredValue:function(l,d){var p=vi();return $E(p,l,d)},useTransition:function(){var l=VE(!1);return l=Aj.bind(null,ft,l.queue,!0,!1),vi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=ft,E=vi();if(It){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),an===null)throw Error(r(349));(Et&127)!==0||tj(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,vj(rj.bind(null,y,k,l),[l]),y.flags|=2048,Lf(9,{destroy:void 0},nj.bind(null,y,k,p,d),null),p},useId:function(){var l=vi(),d=an.identifierPrefix;if(It){var p=Qs,y=Xs;p=(y&~(1<<32-mt(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Ky++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=Hee++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:GE,useFormState:fj,useActionState:fj,useOptimistic:function(l){var d=vi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=HE.bind(null,ft,!0,p),p.dispatch=d,[l,d]},useMemoCache:jE,useCacheRefresh:function(){return vi().memoizedState=Zee.bind(null,ft)},useEffectEvent:function(l){var d=vi(),p={impl:l};return d.memoizedState=p,function(){if((zt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},KE={readContext:Wr,use:Yy,useCallback:_j,useContext:Wr,useEffect:FE,useImperativeHandle:Sj,useInsertionEffect:bj,useLayoutEffect:xj,useMemo:Ej,useReducer:Xy,useRef:mj,useState:function(){return Xy(Fo)},useDebugValue:UE,useDeferredValue:function(l,d){var p=Hn();return Tj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=Xy(Fo)[0],d=Hn().memoizedState;return[typeof l=="boolean"?l:Mg(l),d]},useSyncExternalStore:ej,useId:Ij,useHostTransitionStatus:GE,useFormState:hj,useActionState:hj,useOptimistic:function(l,d){var p=Hn();return sj(p,Xt,l,d)},useMemoCache:jE,useCacheRefresh:Pj};KE.useEffectEvent=yj;var Mj={readContext:Wr,use:Yy,useCallback:_j,useContext:Wr,useEffect:FE,useImperativeHandle:Sj,useInsertionEffect:bj,useLayoutEffect:xj,useMemo:Ej,useReducer:LE,useRef:mj,useState:function(){return LE(Fo)},useDebugValue:UE,useDeferredValue:function(l,d){var p=Hn();return Xt===null?$E(p,l,d):Tj(p,Xt.memoizedState,l,d)},useTransition:function(){var l=LE(Fo)[0],d=Hn().memoizedState;return[typeof l=="boolean"?l:Mg(l),d]},useSyncExternalStore:ej,useId:Ij,useHostTransitionStatus:GE,useFormState:gj,useActionState:gj,useOptimistic:function(l,d){var p=Hn();return Xt!==null?sj(p,Xt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:jE,useCacheRefresh:Pj};Mj.useEffectEvent=yj;function WE(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var YE={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=aa(),E=tc(y);E.payload=d,p!=null&&(E.callback=p),d=nc(l,E,y),d!==null&&(Mi(d,l,y),Ng(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=aa(),E=tc(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=nc(l,E,y),d!==null&&(Mi(d,l,y),Ng(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=aa(),y=tc(p);y.tag=2,d!=null&&(y.callback=d),d=nc(l,y,p),d!==null&&(Mi(d,l,p),Ng(d,l,p))}};function jj(l,d,p,y,E,k,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,V):d.prototype&&d.prototype.isPureReactComponent?!_g(p,y)||!_g(E,k):!0}function zj(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&YE.enqueueReplaceState(d,d.state,null)}function Bu(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Lj(l){Ny(l)}function Vj(l){console.error(l)}function Bj(l){Ny(l)}function eb(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function Fj(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function XE(l,d,p){return p=tc(p),p.tag=3,p.payload={element:null},p.callback=function(){eb(l,d)},p}function Uj(l){return l=tc(l),l.tag=3,l}function $j(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){Fj(d,p,y)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Fj(d,p,y),typeof E!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function ete(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&Pf(d,p,E,!0),p=ta.current,p!==null){switch(p.tag){case 31:case 13:return Da===null?fb():p.alternate===null&&Rn===0&&(Rn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Fy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),wT(l,y,E)),!1;case 22:return p.flags|=65536,y===Fy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),wT(l,y,E)),!1}throw Error(r(435,p.tag))}return wT(l,y,E),fb(),!1}if(It)return d=ta.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==gE&&(l=Error(r(422),{cause:y}),Ag(Ca(l,p)))):(y!==gE&&(d=Error(r(423),{cause:y}),Ag(Ca(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=Ca(y,p),E=XE(l.stateNode,y,E),AE(l,E),Rn!==4&&(Rn=2)),!1;var k=Error(r(520),{cause:y});if(k=Ca(k,p),Gg===null?Gg=[k]:Gg.push(k),Rn!==4&&(Rn=2),d===null)return!0;y=Ca(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=XE(p.stateNode,y,l),AE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(lc===null||!lc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=Uj(E),$j(E,l,p,y),AE(p,E),!1}p=p.return}while(p!==null);return!1}var QE=Error(r(461)),ir=!1;function Yr(l,d,p,y){d.child=l===null?KM(d,null,p,y):Lu(d,l.child,p,y)}function qj(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var V={};for(var q in y)q!=="ref"&&(V[q]=y[q])}else V=y;return Ru(d),y=DE(l,d,p,V,k,E),q=OE(),l!==null&&!ir?(RE(l,d,E),Uo(l,d,E)):(It&&q&&hE(d),d.flags|=1,Yr(l,d,y,E),d.child)}function Gj(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!uE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,Hj(l,d,k,y,E)):(l=My(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!aT(l,E)){var V=k.memoizedProps;if(p=p.compare,p=p!==null?p:_g,p(V,y)&&l.ref===d.ref)return Uo(l,d,E)}return d.flags|=1,l=jo(k,y),l.ref=d.ref,l.return=d,d.child=l}function Hj(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(_g(k,y)&&l.ref===d.ref)if(ir=!1,d.pendingProps=y=k,aT(l,E))(l.flags&131072)!==0&&(ir=!0);else return d.lanes=l.lanes,Uo(l,d,E)}return ZE(l,d,p,y,E)}function Kj(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return Wj(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Vy(d,k!==null?k.cachePool:null),k!==null?XM(d,k):CE(),QM(d);else return y=d.lanes=536870912,Wj(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(Vy(d,k.cachePool),XM(d,k),ic(),d.memoizedState=null):(l!==null&&Vy(d,null),CE(),ic());return Yr(l,d,E,p),d.child}function Lg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Wj(l,d,p,y,E){var k=SE();return k=k===null?null:{parent:nr._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&Vy(d,null),CE(),QM(d),l!==null&&Pf(l,d,y,!0),d.childLanes=E,null}function tb(l,d){return d=rb({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function Yj(l,d,p){return Lu(d,l.child,null,p),l=tb(d,d.pendingProps),l.flags|=2,na(d),d.memoizedState=null,l}function tte(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(It){if(y.mode==="hidden")return l=tb(d,y),d.lanes=536870912,Lg(null,l);if(PE(d),(l=fn)?(l=o4(l,Na),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Xl!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},p=DM(l),p.return=d,d.child=p,Kr=d,fn=null)):l=null,l===null)throw Zl(d);return d.lanes=536870912,null}return tb(d,y)}var k=l.memoizedState;if(k!==null){var V=k.dehydrated;if(PE(d),E)if(d.flags&256)d.flags&=-257,d=Yj(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(ir||Pf(l,d,p,!1),E=(p&l.childLanes)!==0,ir||E){if(y=an,y!==null&&(V=ag(y,p),V!==0&&V!==k.retryLane))throw k.retryLane=V,Pu(l,V),Mi(y,l,V),QE;fb(),d=Yj(l,d,p)}else l=k.treeContext,fn=Oa(V.nextSibling),Kr=d,It=!0,Ql=null,Na=!1,l!==null&&MM(d,l),d=tb(d,y),d.flags|=4096;return d}return l=jo(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function nb(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function ZE(l,d,p,y,E){return Ru(d),p=DE(l,d,p,y,void 0,E),y=OE(),l!==null&&!ir?(RE(l,d,E),Uo(l,d,E)):(It&&y&&hE(d),d.flags|=1,Yr(l,d,p,E),d.child)}function Xj(l,d,p,y,E,k){return Ru(d),d.updateQueue=null,p=JM(d,y,p,E),ZM(l),y=OE(),l!==null&&!ir?(RE(l,d,k),Uo(l,d,k)):(It&&y&&hE(d),d.flags|=1,Yr(l,d,p,k),d.child)}function Qj(l,d,p,y,E){if(Ru(d),d.stateNode===null){var k=Af,V=p.contextType;typeof V=="object"&&V!==null&&(k=Wr(V)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=YE,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},EE(d),V=p.contextType,k.context=typeof V=="object"&&V!==null?Wr(V):Af,k.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(WE(d,p,V,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(V=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),V!==k.state&&YE.enqueueReplaceState(k,k.state,null),Og(d,y,k,E),Dg(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,re=Bu(p,q);k.props=re;var ve=k.context,Te=p.contextType;V=Af,typeof Te=="object"&&Te!==null&&(V=Wr(Te));var ke=p.getDerivedStateFromProps;Te=typeof ke=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||ve!==V)&&zj(d,k,y,V),ec=!1;var be=d.memoizedState;k.state=be,Og(d,y,k,E),Dg(),ve=d.memoizedState,q||be!==ve||ec?(typeof ke=="function"&&(WE(d,p,ke,y),ve=d.memoizedState),(re=ec||jj(d,p,re,y,be,ve,V))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ve),k.props=y,k.state=ve,k.context=V,y=re):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,TE(l,d),V=d.memoizedProps,Te=Bu(p,V),k.props=Te,ke=d.pendingProps,be=k.context,ve=p.contextType,re=Af,typeof ve=="object"&&ve!==null&&(re=Wr(ve)),q=p.getDerivedStateFromProps,(ve=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==ke||be!==re)&&zj(d,k,y,re),ec=!1,be=d.memoizedState,k.state=be,Og(d,y,k,E),Dg();var we=d.memoizedState;V!==ke||be!==we||ec||l!==null&&l.dependencies!==null&&zy(l.dependencies)?(typeof q=="function"&&(WE(d,p,q,y),we=d.memoizedState),(Te=ec||jj(d,p,Te,y,be,we,re)||l!==null&&l.dependencies!==null&&zy(l.dependencies))?(ve||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,re)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=re,y=Te):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,nb(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=Lu(d,l.child,null,E),d.child=Lu(d,null,p,E)):Yr(l,d,p,E),d.memoizedState=k.state,l=d.child):l=Uo(l,d,E),l}function Zj(l,d,p,y){return Du(),d.flags|=256,Yr(l,d,p,y),d.child}var JE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eT(l){return{baseLanes:l,cachePool:FM()}}function tT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ia),l}function Jj(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,V;if((V=k)||(V=l!==null&&l.memoizedState===null?!1:(Gn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(It){if(E?rc(d):ic(),(l=fn)?(l=o4(l,Na),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Xl!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},p=DM(l),p.return=d,d.child=p,Kr=d,fn=null)):l=null,l===null)throw Zl(d);return zT(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(ic(),E=d.mode,q=rb({mode:"hidden",children:q},E),y=Nu(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=eT(p),y.childLanes=tT(l,V,p),d.memoizedState=JE,Lg(null,y)):(rc(d),nT(d,q))}var re=l.memoizedState;if(re!==null&&(q=re.dehydrated,q!==null)){if(k)d.flags&256?(rc(d),d.flags&=-257,d=rT(l,d,p)):d.memoizedState!==null?(ic(),d.child=l.child,d.flags|=128,d=null):(ic(),q=y.fallback,E=d.mode,y=rb({mode:"visible",children:y.children},E),q=Nu(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,Lu(d,l.child,null,p),y=d.child,y.memoizedState=eT(p),y.childLanes=tT(l,V,p),d.memoizedState=JE,d=Lg(null,y));else if(rc(d),zT(q)){if(V=q.nextSibling&&q.nextSibling.dataset,V)var ve=V.dgst;V=ve,y=Error(r(419)),y.stack="",y.digest=V,Ag({value:y,source:null,stack:null}),d=rT(l,d,p)}else if(ir||Pf(l,d,p,!1),V=(p&l.childLanes)!==0,ir||V){if(V=an,V!==null&&(y=ag(V,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,Pu(l,y),Mi(V,l,y),QE;jT(q)||fb(),d=rT(l,d,p)}else jT(q)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,fn=Oa(q.nextSibling),Kr=d,It=!0,Ql=null,Na=!1,l!==null&&MM(d,l),d=nT(d,y.children),d.flags|=4096);return d}return E?(ic(),q=y.fallback,E=d.mode,re=l.child,ve=re.sibling,y=jo(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,ve!==null?q=jo(ve,q):(q=Nu(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,Lg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=eT(p):(E=q.cachePool,E!==null?(re=nr._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=FM(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=tT(l,V,p),d.memoizedState=JE,Lg(l.child,y)):(rc(d),p=l.child,l=p.sibling,p=jo(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function nT(l,d){return d=rb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function rb(l,d){return l=ea(22,l,null,d),l.lanes=0,l}function rT(l,d,p){return Lu(d,l.child,null,p),l=nT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function ez(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),yE(l.return,d,p)}function iT(l,d,p,y,E,k){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=y,V.tail=p,V.tailMode=E,V.treeForkCount=k)}function tz(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var V=Gn.current,q=(V&2)!==0;if(q?(V=V&1|2,d.flags|=128):V&=1,ne(Gn,V),Yr(l,d,y,p),y=It?Tg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ez(l,p,d);else if(l.tag===19)ez(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Gy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),iT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Gy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}iT(d,!0,p,null,k,y);break;case"together":iT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Uo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),oc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Pf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=jo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=jo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function aT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&zy(l)))}function nte(l,d,p){switch(d.tag){case 3:_e(d,d.stateNode.containerInfo),Jl(d,nr,l.memoizedState.cache),Du();break;case 27:case 5:ge(d);break;case 4:_e(d,d.stateNode.containerInfo);break;case 10:Jl(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,PE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(rc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Jj(l,d,p):(rc(d),l=Uo(l,d,p),l!==null?l.sibling:null);rc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(Pf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return tz(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ne(Gn,Gn.current),y)break;return null;case 22:return d.lanes=0,Kj(l,d,p,d.pendingProps);case 24:Jl(d,nr,l.memoizedState.cache)}return Uo(l,d,p)}function nz(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)ir=!0;else{if(!aT(l,p)&&(d.flags&128)===0)return ir=!1,nte(l,d,p);ir=(l.flags&131072)!==0}else ir=!1,It&&(d.flags&1048576)!==0&&RM(d,Tg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=ju(d.elementType),d.type=l,typeof l=="function")uE(l)?(y=Bu(l,y),d.tag=1,d=Qj(null,d,l,y,p)):(d.tag=0,d=ZE(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===O){d.tag=11,d=qj(null,d,l,y,p);break e}else if(E===C){d.tag=14,d=Gj(null,d,l,y,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return ZE(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Bu(y,d.pendingProps),Qj(l,d,y,E,p);case 3:e:{if(_e(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,TE(l,d),Og(d,y,null,p);var V=d.memoizedState;if(y=V.cache,Jl(d,nr,y),y!==k.cache&&bE(d,[nr],p,!0),Dg(),y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=Zj(l,d,y,p);break e}else if(y!==E){E=Ca(Error(r(424)),d),Ag(E),d=Zj(l,d,y,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(fn=Oa(l.firstChild),Kr=d,It=!0,Ql=null,Na=!0,p=KM(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Du(),y===E){d=Uo(l,d,p);break e}Yr(l,d,y,p)}d=d.child}return d;case 26:return nb(l,d),l===null?(p=h4(d.type,null,d.pendingProps,null))?d.memoizedState=p:It||(p=d.type,l=d.pendingProps,y=bb(ie.current).createElement(p),y[Jn]=d,y[Rr]=l,Xr(y,p,l),er(y),d.stateNode=y):d.memoizedState=h4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ge(d),l===null&&It&&(y=d.stateNode=u4(d.type,d.pendingProps,ie.current),Kr=d,Na=!0,E=fn,fc(d.type)?(LT=E,fn=Oa(y.firstChild)):fn=E),Yr(l,d,d.pendingProps.children,p),nb(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&It&&((E=y=fn)&&(y=Dte(y,d.type,d.pendingProps,Na),y!==null?(d.stateNode=y,Kr=d,fn=Oa(y.firstChild),Na=!1,E=!0):E=!1),E||Zl(d)),ge(d),E=d.type,k=d.pendingProps,V=l!==null?l.memoizedProps:null,y=k.children,OT(E,k)?y=null:V!==null&&OT(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=DE(l,d,Kee,null,null,p),Jg._currentValue=E),nb(l,d),Yr(l,d,y,p),d.child;case 6:return l===null&&It&&((l=p=fn)&&(p=Ote(p,d.pendingProps,Na),p!==null?(d.stateNode=p,Kr=d,fn=null,l=!0):l=!1),l||Zl(d)),null;case 13:return Jj(l,d,p);case 4:return _e(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=Lu(d,null,y,p):Yr(l,d,y,p),d.child;case 11:return qj(l,d,d.type,d.pendingProps,p);case 7:return Yr(l,d,d.pendingProps,p),d.child;case 8:return Yr(l,d,d.pendingProps.children,p),d.child;case 12:return Yr(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,Jl(d,d.type,y.value),Yr(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Ru(d),E=Wr(E),y=y(E),d.flags|=1,Yr(l,d,y,p),d.child;case 14:return Gj(l,d,d.type,d.pendingProps,p);case 15:return Hj(l,d,d.type,d.pendingProps,p);case 19:return tz(l,d,p);case 31:return tte(l,d,p);case 22:return Kj(l,d,p,d.pendingProps);case 24:return Ru(d),y=Wr(nr),l===null?(E=SE(),E===null&&(E=an,k=xE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},EE(d),Jl(d,nr,E)):((l.lanes&p)!==0&&(TE(l,d),Og(d,null,null,p),Dg()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),Jl(d,nr,y)):(y=k.cache,Jl(d,nr,y),y!==E.cache&&bE(d,[nr],p,!0))),Yr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function $o(l){l.flags|=4}function sT(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(Iz())l.flags|=8192;else throw zu=Fy,_E}else l.flags&=-16777217}function rz(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!y4(d))if(Iz())l.flags|=8192;else throw zu=Fy,_E}function ib(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?uy():536870912,l.lanes|=d,Uf|=d)}function Vg(l,d){if(!It)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function hn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function rte(l,d,p){var y=d.pendingProps;switch(pE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(d),null;case 1:return hn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),Vo(nr),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(If(d)?$o(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,mE())),hn(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?($o(d),k!==null?(hn(d),rz(d,k)):(hn(d),sT(d,E,null,y,p))):k?k!==l.memoizedState?($o(d),hn(d),rz(d,k)):(hn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&$o(d),hn(d),sT(d,E,l,y,p)),null;case 27:if(de(d),p=ie.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&$o(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return hn(d),null}l=K.current,If(d)?jM(d):(l=u4(E,y,p),d.stateNode=l,$o(d))}return hn(d),null;case 5:if(de(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&$o(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return hn(d),null}if(k=K.current,If(d))jM(d);else{var V=bb(ie.current);switch(k){case 1:k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=V.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?V.createElement("select",{is:y.is}):V.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?V.createElement(E,{is:y.is}):V.createElement(E)}}k[Jn]=d,k[Rr]=y;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)k.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=k;e:switch(Xr(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&$o(d)}}return hn(d),sT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&$o(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ie.current,If(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=Kr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Jn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Jz(l.nodeValue,p)),l||Zl(d,!0)}else l=bb(l).createTextNode(y),l[Jn]=d,d.stateNode=l}return hn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=If(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Jn]=d}else Du(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;hn(d),l=!1}else p=mE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(na(d),d):(na(d),null);if((d.flags&128)!==0)throw Error(r(558))}return hn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=If(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Jn]=d}else Du(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;hn(d),E=!1}else E=mE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(na(d),d):(na(d),null)}return na(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),ib(d,d.updateQueue),hn(d),null);case 4:return se(),l===null&&CT(d.stateNode.containerInfo),hn(d),null;case 10:return Vo(d.type),hn(d),null;case 19:if(X(Gn),y=d.memoizedState,y===null)return hn(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)Vg(y,!1);else{if(Rn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=Gy(l),k!==null){for(d.flags|=128,Vg(y,!1),l=k.updateQueue,d.updateQueue=l,ib(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)NM(p,l),p=p.sibling;return ne(Gn,Gn.current&1|2),It&&zo(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&bt()>cb&&(d.flags|=128,E=!0,Vg(y,!1),d.lanes=4194304)}else{if(!E)if(l=Gy(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,ib(d,l),Vg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!It)return hn(d),null}else 2*bt()-y.renderingStartTime>cb&&p!==536870912&&(d.flags|=128,E=!0,Vg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=bt(),l.sibling=null,p=Gn.current,ne(Gn,E?p&1|2:p&1),It&&zo(d,y.treeForkCount),l):(hn(d),null);case 22:case 23:return na(d),IE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(hn(d),d.subtreeFlags&6&&(d.flags|=8192)):hn(d),p=d.updateQueue,p!==null&&ib(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&X(Mu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Vo(nr),hn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function ite(l,d){switch(pE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Vo(nr),se(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return de(d),null;case 31:if(d.memoizedState!==null){if(na(d),d.alternate===null)throw Error(r(340));Du()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(na(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Du()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Gn),null;case 4:return se(),null;case 10:return Vo(d.type),null;case 22:case 23:return na(d),IE(),l!==null&&X(Mu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Vo(nr),null;case 25:return null;default:return null}}function iz(l,d){switch(pE(d),d.tag){case 3:Vo(nr),se();break;case 26:case 27:case 5:de(d);break;case 4:se();break;case 31:d.memoizedState!==null&&na(d);break;case 13:na(d);break;case 19:X(Gn);break;case 10:Vo(d.type);break;case 22:case 23:na(d),IE(),l!==null&&X(Mu);break;case 24:Vo(nr)}}function Bg(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,V=p.inst;y=k(),V.destroy=y}p=p.next}while(p!==E)}}catch(q){qt(d,d.return,q)}}function ac(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var V=y.inst,q=V.destroy;if(q!==void 0){V.destroy=void 0,E=d;var re=p,ve=q;try{ve()}catch(Te){qt(E,re,Te)}}}y=y.next}while(y!==k)}}catch(Te){qt(d,d.return,Te)}}function az(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{YM(d,p)}catch(y){qt(l,l.return,y)}}}function sz(l,d,p){p.props=Bu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){qt(l,d,y)}}function Fg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){qt(l,d,E)}}function Zs(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){qt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){qt(l,d,E)}else p.current=null}function oz(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){qt(l,l.return,E)}}function oT(l,d,p){try{var y=l.stateNode;Ate(y,l.type,p,d),y[Rr]=d}catch(E){qt(l,l.return,E)}}function lz(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&fc(l.type)||l.tag===4}function lT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||lz(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&fc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function cT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=as));else if(y!==4&&(y===27&&fc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(cT(l,d,p),l=l.sibling;l!==null;)cT(l,d,p),l=l.sibling}function ab(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&fc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(ab(l,d,p),l=l.sibling;l!==null;)ab(l,d,p),l=l.sibling}function cz(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Xr(d,y,p),d[Jn]=l,d[Rr]=p}catch(k){qt(l,l.return,k)}}var qo=!1,ar=!1,uT=!1,uz=typeof WeakSet=="function"?WeakSet:Set,jr=null;function ate(l,d){if(l=l.containerInfo,NT=Ab,l=SM(l),rE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var V=0,q=-1,re=-1,ve=0,Te=0,ke=l,be=null;t:for(;;){for(var we;ke!==p||E!==0&&ke.nodeType!==3||(q=V+E),ke!==k||y!==0&&ke.nodeType!==3||(re=V+y),ke.nodeType===3&&(V+=ke.nodeValue.length),(we=ke.firstChild)!==null;)be=ke,ke=we;for(;;){if(ke===l)break t;if(be===p&&++ve===E&&(q=V),be===k&&++Te===y&&(re=V),(we=ke.nextSibling)!==null)break;ke=be,be=ke.parentNode}ke=we}p=q===-1||re===-1?null:{start:q,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(DT={focusedElem:l,selectionRange:p},Ab=!1,jr=d;jr!==null;)if(d=jr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,jr=l;else for(;jr!==null;){switch(d=jr,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var $e=Bu(p.type,E);l=y.getSnapshotBeforeUpdate($e,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(it){qt(p,p.return,it)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)MT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":MT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,jr=l;break}jr=d.return}}function dz(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ho(l,p),y&4&&Bg(5,p);break;case 1:if(Ho(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){qt(p,p.return,V)}else{var E=Bu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){qt(p,p.return,V)}}y&64&&az(p),y&512&&Fg(p,p.return);break;case 3:if(Ho(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{YM(l,d)}catch(V){qt(p,p.return,V)}}break;case 27:d===null&&y&4&&cz(p);case 26:case 5:Ho(l,p),d===null&&y&4&&oz(p),y&512&&Fg(p,p.return);break;case 12:Ho(l,p);break;case 31:Ho(l,p),y&4&&pz(l,p);break;case 13:Ho(l,p),y&4&&gz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=pte.bind(null,p),Rte(l,p))));break;case 22:if(y=p.memoizedState!==null||qo,!y){d=d!==null&&d.memoizedState!==null||ar,E=qo;var k=ar;qo=y,(ar=d)&&!k?Ko(l,p,(p.subtreeFlags&8772)!==0):Ho(l,p),qo=E,ar=k}break;case 30:break;default:Ho(l,p)}}function fz(l){var d=l.alternate;d!==null&&(l.alternate=null,fz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&ff(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var bn=null,Ni=!1;function Go(l,d,p){for(p=p.child;p!==null;)hz(l,d,p),p=p.sibling}function hz(l,d,p){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Dn,p)}catch{}switch(p.tag){case 26:ar||Zs(p,d),Go(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ar||Zs(p,d);var y=bn,E=Ni;fc(p.type)&&(bn=p.stateNode,Ni=!1),Go(l,d,p),Xg(p.stateNode),bn=y,Ni=E;break;case 5:ar||Zs(p,d);case 6:if(y=bn,E=Ni,bn=null,Go(l,d,p),bn=y,Ni=E,bn!==null)if(Ni)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(p.stateNode)}catch(k){qt(p,d,k)}else try{bn.removeChild(p.stateNode)}catch(k){qt(p,d,k)}break;case 18:bn!==null&&(Ni?(l=bn,a4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Xf(l)):a4(bn,p.stateNode));break;case 4:y=bn,E=Ni,bn=p.stateNode.containerInfo,Ni=!0,Go(l,d,p),bn=y,Ni=E;break;case 0:case 11:case 14:case 15:ac(2,p,d),ar||ac(4,p,d),Go(l,d,p);break;case 1:ar||(Zs(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&sz(p,d,y)),Go(l,d,p);break;case 21:Go(l,d,p);break;case 22:ar=(y=ar)||p.memoizedState!==null,Go(l,d,p),ar=y;break;default:Go(l,d,p)}}function pz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Xf(l)}catch(p){qt(d,d.return,p)}}}function gz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Xf(l)}catch(p){qt(d,d.return,p)}}function ste(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new uz),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new uz),d;default:throw Error(r(435,l.tag))}}function sb(l,d){var p=ste(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=gte.bind(null,l,y);y.then(E,E)}})}function Di(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,V=d,q=V;e:for(;q!==null;){switch(q.tag){case 27:if(fc(q.type)){bn=q.stateNode,Ni=!1;break e}break;case 5:bn=q.stateNode,Ni=!1;break e;case 3:case 4:bn=q.stateNode.containerInfo,Ni=!0;break e}q=q.return}if(bn===null)throw Error(r(160));hz(k,V,E),bn=null,Ni=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)mz(d,l),d=d.sibling}var ds=null;function mz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Di(d,l),Oi(l),y&4&&(ac(3,l,l.return),Bg(3,l),ac(5,l,l.return));break;case 1:Di(d,l),Oi(l),y&512&&(ar||p===null||Zs(p,p.return)),y&64&&qo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=ds;if(Di(d,l),Oi(l),y&512&&(ar||p===null||Zs(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[Ls]||k[Jn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),Xr(k,y,p),k[Jn]=l,er(k),y=k;break e;case"link":var V=m4("link","href",E).get(y+(p.href||""));if(V){for(var q=0;q<V.length;q++)if(k=V[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice(q,1);break t}}k=E.createElement(y),Xr(k,y,p),E.head.appendChild(k);break;case"meta":if(V=m4("meta","content",E).get(y+(p.content||""))){for(q=0;q<V.length;q++)if(k=V[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice(q,1);break t}}k=E.createElement(y),Xr(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Jn]=l,er(k),y=k}l.stateNode=y}else v4(E,l.type,l.stateNode);else l.stateNode=g4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?v4(E,l.type,l.stateNode):g4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&oT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Di(d,l),Oi(l),y&512&&(ar||p===null||Zs(p,p.return)),p!==null&&y&4&&oT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Di(d,l),Oi(l),y&512&&(ar||p===null||Zs(p,p.return)),l.flags&32){E=l.stateNode;try{Pi(E,"")}catch($e){qt(l,l.return,$e)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,oT(l,E,p!==null?p.memoizedProps:E)),y&1024&&(uT=!0);break;case 6:if(Di(d,l),Oi(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch($e){qt(l,l.return,$e)}}break;case 3:if(Sb=null,E=ds,ds=xb(d.containerInfo),Di(d,l),ds=E,Oi(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Xf(d.containerInfo)}catch($e){qt(l,l.return,$e)}uT&&(uT=!1,vz(l));break;case 4:y=ds,ds=xb(l.stateNode.containerInfo),Di(d,l),Oi(l),ds=y;break;case 12:Di(d,l),Oi(l);break;case 31:Di(d,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,sb(l,y)));break;case 13:Di(d,l),Oi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(lb=bt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,sb(l,y)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,ve=qo,Te=ar;if(qo=ve||E,ar=Te||re,Di(d,l),ar=Te,qo=ve,Oi(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||qo||ar||Fu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(k=re.stateNode,E)V=k.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{q=re.stateNode;var ke=re.memoizedProps.style,be=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;q.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch($e){qt(re,re.return,$e)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){qt(re,re.return,$e)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?s4(we,!0):s4(re.stateNode,!1)}catch($e){qt(re,re.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,sb(l,p))));break;case 19:Di(d,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,sb(l,y)));break;case 30:break;case 21:break;default:Di(d,l),Oi(l)}}function Oi(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(lz(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=lT(l);ab(l,k,E);break;case 5:var V=p.stateNode;p.flags&32&&(Pi(V,""),p.flags&=-33);var q=lT(l);ab(l,q,V);break;case 3:case 4:var re=p.stateNode.containerInfo,ve=lT(l);cT(l,ve,re);break;default:throw Error(r(161))}}catch(Te){qt(l,l.return,Te)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function vz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;vz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Ho(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)dz(l,d.alternate,d),d=d.sibling}function Fu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:ac(4,d,d.return),Fu(d);break;case 1:Zs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&sz(d,d.return,p),Fu(d);break;case 27:Xg(d.stateNode);case 26:case 5:Zs(d,d.return),Fu(d);break;case 22:d.memoizedState===null&&Fu(d);break;case 30:Fu(d);break;default:Fu(d)}l=l.sibling}}function Ko(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,V=k.flags;switch(k.tag){case 0:case 11:case 15:Ko(E,k,p),Bg(4,k);break;case 1:if(Ko(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ve){qt(y,y.return,ve)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)WM(re[E],q)}catch(ve){qt(y,y.return,ve)}}p&&V&64&&az(k),Fg(k,k.return);break;case 27:cz(k);case 26:case 5:Ko(E,k,p),p&&y===null&&V&4&&oz(k),Fg(k,k.return);break;case 12:Ko(E,k,p);break;case 31:Ko(E,k,p),p&&V&4&&pz(E,k);break;case 13:Ko(E,k,p),p&&V&4&&gz(E,k);break;case 22:k.memoizedState===null&&Ko(E,k,p),Fg(k,k.return);break;case 30:break;default:Ko(E,k,p)}d=d.sibling}}function dT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&kg(p))}function fT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&kg(l))}function fs(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yz(l,d,p,y),d=d.sibling}function yz(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:fs(l,d,p,y),E&2048&&Bg(9,d);break;case 1:fs(l,d,p,y);break;case 3:fs(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&kg(l)));break;case 12:if(E&2048){fs(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,V=k.id,q=k.onPostCommit;typeof q=="function"&&q(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){qt(d,d.return,re)}}else fs(l,d,p,y);break;case 31:fs(l,d,p,y);break;case 13:fs(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,V=d.alternate,d.memoizedState!==null?k._visibility&2?fs(l,d,p,y):Ug(l,d):k._visibility&2?fs(l,d,p,y):(k._visibility|=2,Vf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&dT(V,d);break;case 24:fs(l,d,p,y),E&2048&&fT(d.alternate,d);break;default:fs(l,d,p,y)}}function Vf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,V=d,q=p,re=y,ve=V.flags;switch(V.tag){case 0:case 11:case 15:Vf(k,V,q,re,E),Bg(8,V);break;case 23:break;case 22:var Te=V.stateNode;V.memoizedState!==null?Te._visibility&2?Vf(k,V,q,re,E):Ug(k,V):(Te._visibility|=2,Vf(k,V,q,re,E)),E&&ve&2048&&dT(V.alternate,V);break;case 24:Vf(k,V,q,re,E),E&&ve&2048&&fT(V.alternate,V);break;default:Vf(k,V,q,re,E)}d=d.sibling}}function Ug(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:Ug(p,y),E&2048&&dT(y.alternate,y);break;case 24:Ug(p,y),E&2048&&fT(y.alternate,y);break;default:Ug(p,y)}d=d.sibling}}var $g=8192;function Bf(l,d,p){if(l.subtreeFlags&$g)for(l=l.child;l!==null;)bz(l,d,p),l=l.sibling}function bz(l,d,p){switch(l.tag){case 26:Bf(l,d,p),l.flags&$g&&l.memoizedState!==null&&Hte(p,ds,l.memoizedState,l.memoizedProps);break;case 5:Bf(l,d,p);break;case 3:case 4:var y=ds;ds=xb(l.stateNode.containerInfo),Bf(l,d,p),ds=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=$g,$g=16777216,Bf(l,d,p),$g=y):Bf(l,d,p));break;default:Bf(l,d,p)}}function xz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function qg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];jr=y,Sz(y,l)}xz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)wz(l),l=l.sibling}function wz(l){switch(l.tag){case 0:case 11:case 15:qg(l),l.flags&2048&&ac(9,l,l.return);break;case 3:qg(l);break;case 12:qg(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,ob(l)):qg(l);break;default:qg(l)}}function ob(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];jr=y,Sz(y,l)}xz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:ac(8,d,d.return),ob(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,ob(d));break;default:ob(d)}l=l.sibling}}function Sz(l,d){for(;jr!==null;){var p=jr;switch(p.tag){case 0:case 11:case 15:ac(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:kg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,jr=y;else e:for(p=l;jr!==null;){y=jr;var E=y.sibling,k=y.return;if(fz(y),y===p){jr=null;break e}if(E!==null){E.return=k,jr=E;break e}jr=k}}}var ote={getCacheForType:function(l){var d=Wr(nr),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Wr(nr).controller.signal}},lte=typeof WeakMap=="function"?WeakMap:Map,zt=0,an=null,wt=null,Et=0,$t=0,ra=null,sc=!1,Ff=!1,hT=!1,Wo=0,Rn=0,oc=0,Uu=0,pT=0,ia=0,Uf=0,Gg=null,Ri=null,gT=!1,lb=0,_z=0,cb=1/0,ub=null,lc=null,yr=0,cc=null,$f=null,Yo=0,mT=0,vT=null,Ez=null,Hg=0,yT=null;function aa(){return(zt&2)!==0&&Et!==0?Et&-Et:G.T!==null?ET():dy()}function Tz(){if(ia===0)if((Et&536870912)===0||It){var l=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),ia=l}else ia=536870912;return l=ta.current,l!==null&&(l.flags|=32),ia}function Mi(l,d,p){(l===an&&($t===2||$t===9)||l.cancelPendingCommit!==null)&&(qf(l,0),uc(l,Et,ia,!1)),mu(l,p),((zt&2)===0||l!==an)&&(l===an&&((zt&2)===0&&(Uu|=p),Rn===4&&uc(l,Et,ia,!1)),Js(l))}function Az(l,d,p){if((zt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||vr(l,d),E=y?dte(l,d):xT(l,d,!0),k=y;do{if(E===0){Ff&&!y&&uc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!cte(p)){E=xT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var q=l;E=Gg;var re=q.current.memoizedState.isDehydrated;if(re&&(qf(q,V).flags|=256),V=xT(q,V,!1),V!==2){if(hT&&!re){q.errorRecoveryDisabledLanes|=k,Uu|=k,E=4;break e}k=Ri,Ri=E,k!==null&&(Ri===null?Ri=k:Ri.push.apply(Ri,k))}E=V}if(k=!1,E!==2)continue}}if(E===1){qf(l,0),uc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:uc(y,d,ia,!sc);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=lb+300-bt(),10<E)){if(uc(y,d,ia,!sc),Zn(y,0,!0)!==0)break e;Yo=d,y.timeoutHandle=r4(kz.bind(null,y,p,Ri,ub,gT,d,ia,Uu,Uf,sc,k,"Throttled",-0,0),E);break e}kz(y,p,Ri,ub,gT,d,ia,Uu,Uf,sc,k,null,-0,0)}}break}while(!0);Js(l)}function kz(l,d,p,y,E,k,V,q,re,ve,Te,ke,be,we){if(l.timeoutHandle=-1,ke=d.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:as},bz(d,k,ke);var $e=(k&62914560)===k?lb-bt():(k&4194048)===k?_z-bt():0;if($e=Kte(ke,$e),$e!==null){Yo=k,l.cancelPendingCommit=$e(Mz.bind(null,l,d,k,p,y,E,V,q,re,Te,ke,null,be,we)),uc(l,k,V,!ve);return}}Mz(l,d,k,p,y,E,V,q,re)}function cte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Ji(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function uc(l,d,p,y){d&=~pT,d&=~Uu,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-mt(E),V=1<<k;y[k]=-1,E&=~V}p!==0&&vu(l,p,d)}function db(){return(zt&6)===0?(Kg(0),!1):!0}function bT(){if(wt!==null){if($t===0)var l=wt.return;else l=wt,Lo=Ou=null,ME(l),Rf=null,Ig=0,l=wt;for(;l!==null;)iz(l.alternate,l),l=l.return;wt=null}}function qf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Ite(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Yo=0,bT(),an=l,wt=p=jo(l.current,null),Et=d,$t=0,ra=null,sc=!1,Ff=vr(l,d),hT=!1,Uf=ia=pT=Uu=oc=Rn=0,Ri=Gg=null,gT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-mt(y),k=1<<E;d|=l[E],y&=~k}return Wo=d,Dy(),p}function Cz(l,d){ft=null,G.H=zg,d===Of||d===By?(d=qM(),$t=3):d===_E?(d=qM(),$t=4):$t=d===QE?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ra=d,wt===null&&(Rn=1,eb(l,Ca(d,l.current)))}function Iz(){var l=ta.current;return l===null?!0:(Et&4194048)===Et?Da===null:(Et&62914560)===Et||(Et&536870912)!==0?l===Da:!1}function Pz(){var l=G.H;return G.H=zg,l===null?zg:l}function Nz(){var l=G.A;return G.A=ote,l}function fb(){Rn=4,sc||(Et&4194048)!==Et&&ta.current!==null||(Ff=!0),(oc&134217727)===0&&(Uu&134217727)===0||an===null||uc(an,Et,ia,!1)}function xT(l,d,p){var y=zt;zt|=2;var E=Pz(),k=Nz();(an!==l||Et!==d)&&(ub=null,qf(l,d)),d=!1;var V=Rn;e:do try{if($t!==0&&wt!==null){var q=wt,re=ra;switch($t){case 8:bT(),V=6;break e;case 3:case 2:case 9:case 6:ta.current===null&&(d=!0);var ve=$t;if($t=0,ra=null,Gf(l,q,re,ve),p&&Ff){V=0;break e}break;default:ve=$t,$t=0,ra=null,Gf(l,q,re,ve)}}ute(),V=Rn;break}catch(Te){Cz(l,Te)}while(!0);return d&&l.shellSuspendCounter++,Lo=Ou=null,zt=y,G.H=E,G.A=k,wt===null&&(an=null,Et=0,Dy()),V}function ute(){for(;wt!==null;)Dz(wt)}function dte(l,d){var p=zt;zt|=2;var y=Pz(),E=Nz();an!==l||Et!==d?(ub=null,cb=bt()+500,qf(l,d)):Ff=vr(l,d);e:do try{if($t!==0&&wt!==null){d=wt;var k=ra;t:switch($t){case 1:$t=0,ra=null,Gf(l,d,k,1);break;case 2:case 9:if(UM(k)){$t=0,ra=null,Oz(d);break}d=function(){$t!==2&&$t!==9||an!==l||($t=7),Js(l)},k.then(d,d);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:UM(k)?($t=0,ra=null,Oz(d)):($t=0,ra=null,Gf(l,d,k,7));break;case 5:var V=null;switch(wt.tag){case 26:V=wt.memoizedState;case 5:case 27:var q=wt;if(V?y4(V):q.stateNode.complete){$t=0,ra=null;var re=q.sibling;if(re!==null)wt=re;else{var ve=q.return;ve!==null?(wt=ve,hb(ve)):wt=null}break t}}$t=0,ra=null,Gf(l,d,k,5);break;case 6:$t=0,ra=null,Gf(l,d,k,6);break;case 8:bT(),Rn=6;break e;default:throw Error(r(462))}}fte();break}catch(Te){Cz(l,Te)}while(!0);return Lo=Ou=null,G.H=y,G.A=E,zt=p,wt!==null?0:(an=null,Et=0,Dy(),Rn)}function fte(){for(;wt!==null&&!Bn();)Dz(wt)}function Dz(l){var d=nz(l.alternate,l,Wo);l.memoizedProps=l.pendingProps,d===null?hb(l):wt=d}function Oz(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=Xj(p,d,d.pendingProps,d.type,void 0,Et);break;case 11:d=Xj(p,d,d.pendingProps,d.type.render,d.ref,Et);break;case 5:ME(d);default:iz(p,d),d=wt=NM(d,Wo),d=nz(p,d,Wo)}l.memoizedProps=l.pendingProps,d===null?hb(l):wt=d}function Gf(l,d,p,y){Lo=Ou=null,ME(d),Rf=null,Ig=0;var E=d.return;try{if(ete(l,E,d,p,Et)){Rn=1,eb(l,Ca(p,l.current)),wt=null;return}}catch(k){if(E!==null)throw wt=E,k;Rn=1,eb(l,Ca(p,l.current)),wt=null;return}d.flags&32768?(It||y===1?l=!0:Ff||(Et&536870912)!==0?l=!1:(sc=l=!0,(y===2||y===9||y===3||y===6)&&(y=ta.current,y!==null&&y.tag===13&&(y.flags|=16384))),Rz(d,l)):hb(d)}function hb(l){var d=l;do{if((d.flags&32768)!==0){Rz(d,sc);return}l=d.return;var p=rte(d.alternate,d,Wo);if(p!==null){wt=p;return}if(d=d.sibling,d!==null){wt=d;return}wt=d=l}while(d!==null);Rn===0&&(Rn=5)}function Rz(l,d){do{var p=ite(l.alternate,l);if(p!==null){p.flags&=32767,wt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){wt=l;return}wt=l=p}while(l!==null);Rn=6,wt=null}function Mz(l,d,p,y,E,k,V,q,re){l.cancelPendingCommit=null;do pb();while(yr!==0);if((zt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=lE,J_(l,p,k,V,q,re),l===an&&(wt=an=null,Et=0),$f=d,cc=l,Yo=p,mT=k,vT=E,Ez=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,mte(An,function(){return Bz(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=Y.p,Y.p=2,V=zt,zt|=4;try{ate(l,d,p)}finally{zt=V,Y.p=E,G.T=y}}yr=1,jz(),zz(),Lz()}}function jz(){if(yr===1){yr=0;var l=cc,d=$f,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=zt;zt|=4;try{mz(d,l);var k=DT,V=SM(l.containerInfo),q=k.focusedElem,re=k.selectionRange;if(V!==q&&q&&q.ownerDocument&&wM(q.ownerDocument.documentElement,q)){if(re!==null&&rE(q)){var ve=re.start,Te=re.end;if(Te===void 0&&(Te=ve),"selectionStart"in q)q.selectionStart=ve,q.selectionEnd=Math.min(Te,q.value.length);else{var ke=q.ownerDocument||document,be=ke&&ke.defaultView||window;if(be.getSelection){var we=be.getSelection(),$e=q.textContent.length,it=Math.min(re.start,$e),Zt=re.end===void 0?it:Math.min(re.end,$e);!we.extend&&it>Zt&&(V=Zt,Zt=it,it=V);var fe=xM(q,it),ce=xM(q,Zt);if(fe&&ce&&(we.rangeCount!==1||we.anchorNode!==fe.node||we.anchorOffset!==fe.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var me=ke.createRange();me.setStart(fe.node,fe.offset),we.removeAllRanges(),it>Zt?(we.addRange(me),we.extend(ce.node,ce.offset)):(me.setEnd(ce.node,ce.offset),we.addRange(me))}}}}for(ke=[],we=q;we=we.parentNode;)we.nodeType===1&&ke.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<ke.length;q++){var Ae=ke[q];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}Ab=!!NT,DT=NT=null}finally{zt=E,Y.p=y,G.T=p}}l.current=d,yr=2}}function zz(){if(yr===2){yr=0;var l=cc,d=$f,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=zt;zt|=4;try{dz(l,d.alternate,d)}finally{zt=E,Y.p=y,G.T=p}}yr=3}}function Lz(){if(yr===4||yr===3){yr=0,Tn();var l=cc,d=$f,p=Yo,y=Ez;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?yr=5:(yr=0,$f=cc=null,Vz(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(lc=null),Do(p),d=d.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Dn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=Y.p,Y.p=2,G.T=null;try{for(var k=l.onRecoverableError,V=0;V<y.length;V++){var q=y[V];k(q.value,{componentStack:q.stack})}}finally{G.T=d,Y.p=E}}(Yo&3)!==0&&pb(),Js(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===yT?Hg++:(Hg=0,yT=l):Hg=0,Kg(0)}}function Vz(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,kg(d)))}function pb(){return jz(),zz(),Lz(),Bz()}function Bz(){if(yr!==5)return!1;var l=cc,d=mT;mT=0;var p=Do(Yo),y=G.T,E=Y.p;try{Y.p=32>p?32:p,G.T=null,p=vT,vT=null;var k=cc,V=Yo;if(yr=0,$f=cc=null,Yo=0,(zt&6)!==0)throw Error(r(331));var q=zt;if(zt|=4,wz(k.current),yz(k,k.current,V,p),zt=q,Kg(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Dn,k)}catch{}return!0}finally{Y.p=E,G.T=y,Vz(l,d)}}function Fz(l,d,p){d=Ca(p,d),d=XE(l.stateNode,d,2),l=nc(l,d,2),l!==null&&(mu(l,2),Js(l))}function qt(l,d,p){if(l.tag===3)Fz(l,l,p);else for(;d!==null;){if(d.tag===3){Fz(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(lc===null||!lc.has(y))){l=Ca(p,l),p=Uj(2),y=nc(d,p,2),y!==null&&($j(p,y,d,l),mu(y,2),Js(y));break}}d=d.return}}function wT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new lte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(hT=!0,E.add(p),l=hte.bind(null,l,d,p),d.then(l,l))}function hte(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,an===l&&(Et&p)===p&&(Rn===4||Rn===3&&(Et&62914560)===Et&&300>bt()-lb?(zt&2)===0&&qf(l,0):pT|=p,Uf===Et&&(Uf=0)),Js(l)}function Uz(l,d){d===0&&(d=uy()),l=Pu(l,d),l!==null&&(mu(l,d),Js(l))}function pte(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),Uz(l,p)}function gte(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),Uz(l,p)}function mte(l,d){return nt(l,d)}var gb=null,Hf=null,ST=!1,mb=!1,_T=!1,dc=0;function Js(l){l!==Hf&&l.next===null&&(Hf===null?gb=Hf=l:Hf=Hf.next=l),mb=!0,ST||(ST=!0,yte())}function Kg(l,d){if(!_T&&mb){_T=!0;do for(var p=!1,y=gb;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var V=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-mt(42|l)+1)-1,k&=E&~(V&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,Hz(y,k))}else k=Et,k=Zn(y,y===an?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||vr(y,k)||(p=!0,Hz(y,k));y=y.next}while(p);_T=!1}}function vte(){$z()}function $z(){mb=ST=!1;var l=0;dc!==0&&Cte()&&(l=dc);for(var d=bt(),p=null,y=gb;y!==null;){var E=y.next,k=qz(y,d);k===0?(y.next=null,p===null?gb=E:p.next=E,E===null&&(Hf=p)):(p=y,(l!==0||(k&3)!==0)&&(mb=!0)),y=E}yr!==0&&yr!==5||Kg(l),dc!==0&&(dc=0)}function qz(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var V=31-mt(k),q=1<<V,re=E[V];re===-1?((q&p)===0||(q&y)!==0)&&(E[V]=Z_(q,d)):re<=d&&(l.expiredLanes|=q),k&=~q}if(d=an,p=Et,p=Zn(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&($t===2||$t===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Bt(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||vr(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Bt(y),Do(p)){case 2:case 8:p=ut;break;case 32:p=An;break;case 268435456:p=Fn;break;default:p=An}return y=Gz.bind(null,l),p=nt(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Bt(y),l.callbackPriority=2,l.callbackNode=null,2}function Gz(l,d){if(yr!==0&&yr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(pb()&&l.callbackNode!==p)return null;var y=Et;return y=Zn(l,l===an?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Az(l,y,d),qz(l,bt()),l.callbackNode!=null&&l.callbackNode===p?Gz.bind(null,l):null)}function Hz(l,d){if(pb())return null;Az(l,d,!0)}function yte(){Pte(function(){(zt&6)!==0?nt(Me,vte):$z()})}function ET(){if(dc===0){var l=Nf;l===0&&(l=vt,vt<<=1,(vt&261888)===0&&(vt=256)),dc=l}return dc}function Kz(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:mf(""+l)}function Wz(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function bte(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=Kz((E[Rr]||null).action),V=y.submitter;V&&(d=(d=V[Rr]||null)?Kz(d.formAction):V.getAttribute("formAction"),d!==null&&(k=d,V=null));var q=new Hs("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(dc!==0){var re=V?Wz(E,V):new FormData(E);qE(p,{pending:!0,data:re,method:E.method,action:k},null,re)}}else typeof k=="function"&&(q.preventDefault(),re=V?Wz(E,V):new FormData(E),qE(p,{pending:!0,data:re,method:E.method,action:k},k,re))},currentTarget:E}]})}}for(var TT=0;TT<oE.length;TT++){var AT=oE[TT],xte=AT.toLowerCase(),wte=AT[0].toUpperCase()+AT.slice(1);us(xte,"on"+wte)}us(TM,"onAnimationEnd"),us(AM,"onAnimationIteration"),us(kM,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(zee,"onTransitionRun"),us(Lee,"onTransitionStart"),us(Vee,"onTransitionCancel"),us(CM,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ste=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wg));function Yz(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var V=y.length-1;0<=V;V--){var q=y[V],re=q.instance,ve=q.currentTarget;if(q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ve;try{k(E)}catch(Te){Ny(Te)}E.currentTarget=null,k=re}else for(V=0;V<y.length;V++){if(q=y[V],re=q.instance,ve=q.currentTarget,q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ve;try{k(E)}catch(Te){Ny(Te)}E.currentTarget=null,k=re}}}}function St(l,d){var p=d[df];p===void 0&&(p=d[df]=new Set);var y=l+"__bubble";p.has(y)||(Xz(d,l,2,!1),p.add(y))}function kT(l,d,p){var y=0;d&&(y|=4),Xz(p,l,y,d)}var vb="_reactListening"+Math.random().toString(36).slice(2);function CT(l){if(!l[vb]){l[vb]=!0,sg.forEach(function(p){p!=="selectionchange"&&(Ste.has(p)||kT(p,!1,l),kT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[vb]||(d[vb]=!0,kT("selectionchange",!1,d))}}function Xz(l,d,p,y){switch(T4(d)){case 2:var E=Xte;break;case 8:E=Qte;break;default:E=$T}p=E.bind(null,d,p,l),E=void 0,!Su||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function IT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var q=y.stateNode.containerInfo;if(q===E)break;if(V===4)for(V=y.return;V!==null;){var re=V.tag;if((re===3||re===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;q!==null;){if(V=Vs(q),V===null)return;if(re=V.tag,re===5||re===6||re===26||re===27){y=k=V;continue e}q=q.parentNode}}y=y.return}Hl(function(){var ve=k,Te=Ea(p),ke=[];e:{var be=IM.get(l);if(be!==void 0){var we=Hs,$e=l;switch(l){case"keypress":if(Eu(p)===0)break e;case"keydown":case"keyup":we=Cy;break;case"focusin":$e="focus",we=Au;break;case"focusout":$e="blur",we=Au;break;case"beforeblur":case"afterblur":we=Au;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=M;break;case TM:case AM:case kM:we=wy;break;case CM:we=H;break;case"scroll":case"scrollend":we=yg;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=Sy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Mo;break;case"toggle":case"beforetoggle":we=dt}var it=(d&4)!==0,Zt=!it&&(l==="scroll"||l==="scrollend"),fe=it?be!==null?be+"Capture":null:be;it=[];for(var ce=ve,me;ce!==null;){var Ae=ce;if(me=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||me===null||fe===null||(Ae=ss(ce,fe),Ae!=null&&it.push(Yg(ce,Ae,me))),Zt)break;ce=ce.return}0<it.length&&(be=new we(be,$e,null,p,Te),ke.push({event:be,listeners:it}))}}if((d&7)===0){e:{if(be=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",be&&p!==gg&&($e=p.relatedTarget||p.fromElement)&&(Vs($e)||$e[zs]))break e;if((we||be)&&(be=Te.window===Te?Te:(be=Te.ownerDocument)?be.defaultView||be.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ve,$e=$e?Vs($e):null,$e!==null&&(Zt=a($e),it=$e.tag,$e!==Zt||it!==5&&it!==27&&it!==6)&&($e=null)):(we=null,$e=ve),we!==$e)){if(it=bg,Ae="onMouseLeave",fe="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(it=Mo,Ae="onPointerLeave",fe="onPointerEnter",ce="pointer"),Zt=we==null?be:Qi(we),me=$e==null?be:Qi($e),be=new it(Ae,ce+"leave",we,p,Te),be.target=Zt,be.relatedTarget=me,Ae=null,Vs(Te)===ve&&(it=new it(fe,ce+"enter",$e,p,Te),it.target=me,it.relatedTarget=Zt,Ae=it),Zt=Ae,we&&$e)t:{for(it=_te,fe=we,ce=$e,me=0,Ae=fe;Ae;Ae=it(Ae))me++;Ae=0;for(var Qe=ce;Qe;Qe=it(Qe))Ae++;for(;0<me-Ae;)fe=it(fe),me--;for(;0<Ae-me;)ce=it(ce),Ae--;for(;me--;){if(fe===ce||ce!==null&&fe===ce.alternate){it=fe;break t}fe=it(fe),ce=it(ce)}it=null}else it=null;we!==null&&Qz(ke,be,we,it,!1),$e!==null&&Zt!==null&&Qz(ke,Zt,$e,it,!0)}}e:{if(be=ve?Qi(ve):window,we=be.nodeName&&be.nodeName.toLowerCase(),we==="select"||we==="input"&&be.type==="file")var Dt=pM;else if(fM(be))if(gM)Dt=Ree;else{Dt=Dee;var He=Nee}else we=be.nodeName,!we||we.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ve&&gf(ve.elementType)&&(Dt=pM):Dt=Oee;if(Dt&&(Dt=Dt(l,ve))){hM(ke,Dt,p,Te);break e}He&&He(l,be,ve),l==="focusout"&&ve&&be.type==="number"&&ve.memoizedProps.value!=null&&fg(be,"number",be.value)}switch(He=ve?Qi(ve):window,l){case"focusin":(fM(He)||He.contentEditable==="true")&&(_f=He,iE=ve,Eg=null);break;case"focusout":Eg=iE=_f=null;break;case"mousedown":aE=!0;break;case"contextmenu":case"mouseup":case"dragend":aE=!1,_M(ke,p,Te);break;case"selectionchange":if(jee)break;case"keydown":case"keyup":_M(ke,p,Te)}var pt;if(jt)e:{switch(l){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else Sf?ku(l,p)&&(Tt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Tt="onCompositionStart");Tt&&(Ys&&p.locale!=="ko"&&(Sf||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Sf&&(pt=vg()):(Gs=Te,mg="value"in Gs?Gs.value:Gs.textContent,Sf=!0)),He=yb(ve,Tt),0<He.length&&(Tt=new Ws(Tt,l,null,p,Te),ke.push({event:Tt,listeners:He}),pt?Tt.data=pt:(pt=wf(p),pt!==null&&(Tt.data=pt)))),(pt=Aa?kee(l,p):Cee(l,p))&&(Tt=yb(ve,"onBeforeInput"),0<Tt.length&&(He=new Ws("onBeforeInput","beforeinput",null,p,Te),ke.push({event:He,listeners:Tt}),He.data=pt)),bte(ke,l,ve,p,Te)}Yz(ke,d)})}function Yg(l,d,p){return{instance:l,listener:d,currentTarget:p}}function yb(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=ss(l,p),E!=null&&y.unshift(Yg(l,E,k)),E=ss(l,d),E!=null&&y.push(Yg(l,E,k))),l.tag===3)return y;l=l.return}return[]}function _te(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Qz(l,d,p,y,E){for(var k=d._reactName,V=[];p!==null&&p!==y;){var q=p,re=q.alternate,ve=q.stateNode;if(q=q.tag,re!==null&&re===y)break;q!==5&&q!==26&&q!==27||ve===null||(re=ve,E?(ve=ss(p,k),ve!=null&&V.unshift(Yg(p,ve,re))):E||(ve=ss(p,k),ve!=null&&V.push(Yg(p,ve,re)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var Ete=/\r\n?/g,Tte=/\u0000|\uFFFD/g;function Zz(l){return(typeof l=="string"?l:""+l).replace(Ete,`
`).replace(Tte,"")}function Jz(l,d){return d=Zz(d),Zz(l)===d}function Qt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Pi(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Pi(l,""+y);break;case"className":Zi(l,"class",y);break;case"tabIndex":Zi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Zi(l,p,y);break;case"style":pg(l,y,k);break;case"data":if(d!=="object"){Zi(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=mf(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Qt(l,d,"name",E.name,E,null),Qt(l,d,"formEncType",E.formEncType,E,null),Qt(l,d,"formMethod",E.formMethod,E,null),Qt(l,d,"formTarget",E.formTarget,E,null)):(Qt(l,d,"encType",E.encType,E,null),Qt(l,d,"method",E.method,E,null),Qt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=mf(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=as);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=mf(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":St("beforetoggle",l),St("toggle",l),hf(l,"popover",y);break;case"xlinkActuate":tr(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":tr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":tr(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":tr(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":tr(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":tr(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":tr(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":tr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":tr(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":hf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=yy.get(p)||p,hf(l,p,y))}}function PT(l,d,p,y,E,k){switch(p){case"style":pg(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Pi(l,y):(typeof y=="number"||typeof y=="bigint")&&Pi(l,""+y);break;case"onScroll":y!=null&&St("scroll",l);break;case"onScrollEnd":y!=null&&St("scrollend",l);break;case"onClick":y!=null&&(l.onclick=as);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!og.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[Rr]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):hf(l,p,y)}}}function Xr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",l),St("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var V=p[k];if(V!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,k,V,p,null)}}E&&Qt(l,d,"srcSet",p.srcSet,p,null),y&&Qt(l,d,"src",p.src,p,null);return;case"input":St("invalid",l);var q=k=V=E=null,re=null,ve=null;for(y in p)if(p.hasOwnProperty(y)){var Te=p[y];if(Te!=null)switch(y){case"name":E=Te;break;case"type":V=Te;break;case"checked":re=Te;break;case"defaultChecked":ve=Te;break;case"value":k=Te;break;case"defaultValue":q=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,d));break;default:Qt(l,d,y,Te,p,null)}}gy(l,k,q,re,ve,V,E,!1);return;case"select":St("invalid",l),y=V=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":V=q;break;case"multiple":y=q;default:Qt(l,d,E,q,p,null)}d=k,p=V,l.multiple=!!y,d!=null?Ul(l,!!y,d,!1):p!=null&&Ul(l,!!y,p,!0);return;case"textarea":St("invalid",l),k=E=y=null;for(V in p)if(p.hasOwnProperty(V)&&(q=p[V],q!=null))switch(V){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Qt(l,d,V,q,p,null)}$l(l,y,E,k);return;case"option":for(re in p)if(p.hasOwnProperty(re)&&(y=p[re],y!=null))switch(re){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Qt(l,d,re,y,p,null)}return;case"dialog":St("beforetoggle",l),St("toggle",l),St("cancel",l),St("close",l);break;case"iframe":case"object":St("load",l);break;case"video":case"audio":for(y=0;y<Wg.length;y++)St(Wg[y],l);break;case"image":St("error",l),St("load",l);break;case"details":St("toggle",l);break;case"embed":case"source":case"link":St("error",l),St("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in p)if(p.hasOwnProperty(ve)&&(y=p[ve],y!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,ve,y,p,null)}return;default:if(gf(d)){for(Te in p)p.hasOwnProperty(Te)&&(y=p[Te],y!==void 0&&PT(l,d,Te,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Qt(l,d,q,y,p,null))}function Ate(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,V=null,q=null,re=null,ve=null,Te=null;for(we in p){var ke=p[we];if(p.hasOwnProperty(we)&&ke!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=ke;default:y.hasOwnProperty(we)||Qt(l,d,we,null,y,ke)}}for(var be in y){var we=y[be];if(ke=p[be],y.hasOwnProperty(be)&&(we!=null||ke!=null))switch(be){case"type":k=we;break;case"name":E=we;break;case"checked":ve=we;break;case"defaultChecked":Te=we;break;case"value":V=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==ke&&Qt(l,d,be,we,y,ke)}}pf(l,V,q,re,ve,Te,k,E);return;case"select":we=V=q=be=null;for(k in p)if(re=p[k],p.hasOwnProperty(k)&&re!=null)switch(k){case"value":break;case"multiple":we=re;default:y.hasOwnProperty(k)||Qt(l,d,k,null,y,re)}for(E in y)if(k=y[E],re=p[E],y.hasOwnProperty(E)&&(k!=null||re!=null))switch(E){case"value":be=k;break;case"defaultValue":q=k;break;case"multiple":V=k;default:k!==re&&Qt(l,d,E,k,y,re)}d=q,p=V,y=we,be!=null?Ul(l,!!p,be,!1):!!y!=!!p&&(d!=null?Ul(l,!!p,d,!0):Ul(l,!!p,p?[]:"",!1));return;case"textarea":we=be=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Qt(l,d,q,null,y,E)}for(V in y)if(E=y[V],k=p[V],y.hasOwnProperty(V)&&(E!=null||k!=null))switch(V){case"value":be=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Qt(l,d,V,E,y,k)}my(l,be,we);return;case"option":for(var $e in p)if(be=p[$e],p.hasOwnProperty($e)&&be!=null&&!y.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:Qt(l,d,$e,null,y,be)}for(re in y)if(be=y[re],we=p[re],y.hasOwnProperty(re)&&be!==we&&(be!=null||we!=null))switch(re){case"selected":l.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:Qt(l,d,re,be,y,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in p)be=p[it],p.hasOwnProperty(it)&&be!=null&&!y.hasOwnProperty(it)&&Qt(l,d,it,null,y,be);for(ve in y)if(be=y[ve],we=p[ve],y.hasOwnProperty(ve)&&be!==we&&(be!=null||we!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:Qt(l,d,ve,be,y,we)}return;default:if(gf(d)){for(var Zt in p)be=p[Zt],p.hasOwnProperty(Zt)&&be!==void 0&&!y.hasOwnProperty(Zt)&&PT(l,d,Zt,void 0,y,be);for(Te in y)be=y[Te],we=p[Te],!y.hasOwnProperty(Te)||be===we||be===void 0&&we===void 0||PT(l,d,Te,be,y,we);return}}for(var fe in p)be=p[fe],p.hasOwnProperty(fe)&&be!=null&&!y.hasOwnProperty(fe)&&Qt(l,d,fe,null,y,be);for(ke in y)be=y[ke],we=p[ke],!y.hasOwnProperty(ke)||be===we||be==null&&we==null||Qt(l,d,ke,be,y,we)}function e4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kte(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,V=E.initiatorType,q=E.duration;if(k&&q&&e4(V)){for(V=0,q=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],ve=re.startTime;if(ve>q)break;var Te=re.transferSize,ke=re.initiatorType;Te&&e4(ke)&&(re=re.responseEnd,V+=Te*(re<q?1:(q-ve)/(re-ve)))}if(--y,d+=8*(k+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var NT=null,DT=null;function bb(l){return l.nodeType===9?l:l.ownerDocument}function t4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function OT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var RT=null;function Cte(){var l=window.event;return l&&l.type==="popstate"?l===RT?!1:(RT=l,!0):(RT=null,!1)}var r4=typeof setTimeout=="function"?setTimeout:void 0,Ite=typeof clearTimeout=="function"?clearTimeout:void 0,i4=typeof Promise=="function"?Promise:void 0,Pte=typeof queueMicrotask=="function"?queueMicrotask:typeof i4<"u"?function(l){return i4.resolve(null).then(l).catch(Nte)}:r4;function Nte(l){setTimeout(function(){throw l})}function fc(l){return l==="head"}function a4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),Xf(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")Xg(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Xg(p);for(var k=p.firstChild;k;){var V=k.nextSibling,q=k.nodeName;k[Ls]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=V}}else p==="body"&&Xg(l.ownerDocument.body);p=E}while(p);Xf(d)}function s4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function MT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":MT(p),ff(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Dte(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ls])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Oa(l.nextSibling),l===null)break}return null}function Ote(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Oa(l.nextSibling),l===null))return null;return l}function o4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Oa(l.nextSibling),l===null))return null;return l}function jT(l){return l.data==="$?"||l.data==="$~"}function zT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Rte(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Oa(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var LT=null;function l4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Oa(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function c4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function u4(l,d,p){switch(d=bb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Xg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);ff(l)}var Ra=new Map,d4=new Set;function xb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Xo=Y.d;Y.d={f:Mte,r:jte,D:zte,C:Lte,L:Vte,m:Bte,X:Ute,S:Fte,M:$te};function Mte(){var l=Xo.f(),d=db();return l||d}function jte(l){var d=_a(l);d!==null&&d.tag===5&&d.type==="form"?Cj(d):Xo.r(l)}var Kf=typeof document>"u"?null:document;function f4(l,d,p){var y=Kf;if(y&&typeof d=="string"&&d){var E=Ii(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),d4.has(E)||(d4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),Xr(d,"link",l),er(d),y.head.appendChild(d)))}}function zte(l){Xo.D(l),f4("dns-prefetch",l,null)}function Lte(l,d){Xo.C(l,d),f4("preconnect",l,d)}function Vte(l,d,p){Xo.L(l,d,p);var y=Kf;if(y&&l&&d){var E='link[rel="preload"][as="'+Ii(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ii(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ii(p.imageSizes)+'"]')):E+='[href="'+Ii(l)+'"]';var k=E;switch(d){case"style":k=Wf(l);break;case"script":k=Yf(l)}Ra.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Ra.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(Qg(k))||d==="script"&&y.querySelector(Zg(k))||(d=y.createElement("link"),Xr(d,"link",l),er(d),y.head.appendChild(d)))}}function Bte(l,d){Xo.m(l,d);var p=Kf;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ii(y)+'"][href="'+Ii(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Yf(l)}if(!Ra.has(k)&&(l=h({rel:"modulepreload",href:l},d),Ra.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Zg(k)))return}y=p.createElement("link"),Xr(y,"link",l),er(y),p.head.appendChild(y)}}}function Fte(l,d,p){Xo.S(l,d,p);var y=Kf;if(y&&l){var E=Bs(y).hoistableStyles,k=Wf(l);d=d||"default";var V=E.get(k);if(!V){var q={loading:0,preload:null};if(V=y.querySelector(Qg(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Ra.get(k))&&VT(l,p);var re=V=y.createElement("link");er(re),Xr(re,"link",l),re._p=new Promise(function(ve,Te){re.onload=ve,re.onerror=Te}),re.addEventListener("load",function(){q.loading|=1}),re.addEventListener("error",function(){q.loading|=2}),q.loading|=4,wb(V,d,y)}V={type:"stylesheet",instance:V,count:1,state:q},E.set(k,V)}}}function Ute(l,d){Xo.X(l,d);var p=Kf;if(p&&l){var y=Bs(p).hoistableScripts,E=Yf(l),k=y.get(E);k||(k=p.querySelector(Zg(E)),k||(l=h({src:l,async:!0},d),(d=Ra.get(E))&&BT(l,d),k=p.createElement("script"),er(k),Xr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function $te(l,d){Xo.M(l,d);var p=Kf;if(p&&l){var y=Bs(p).hoistableScripts,E=Yf(l),k=y.get(E);k||(k=p.querySelector(Zg(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Ra.get(E))&&BT(l,d),k=p.createElement("script"),er(k),Xr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function h4(l,d,p,y){var E=(E=ie.current)?xb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Wf(p.href),p=Bs(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Wf(p.href);var k=Bs(E).hoistableStyles,V=k.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,V),(k=E.querySelector(Qg(l)))&&!k._p&&(V.instance=k,V.state.loading=5),Ra.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ra.set(l,p),k||qte(E,l,p,V.state))),d&&y===null)throw Error(r(528,""));return V}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Yf(p),p=Bs(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Wf(l){return'href="'+Ii(l)+'"'}function Qg(l){return'link[rel="stylesheet"]['+l+"]"}function p4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function qte(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Xr(d,"link",p),er(d),l.head.appendChild(d))}function Yf(l){return'[src="'+Ii(l)+'"]'}function Zg(l){return"script[async]"+l}function g4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ii(p.href)+'"]');if(y)return d.instance=y,er(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),er(y),Xr(y,"style",E),wb(y,p.precedence,l),d.instance=y;case"stylesheet":E=Wf(p.href);var k=l.querySelector(Qg(E));if(k)return d.state.loading|=4,d.instance=k,er(k),k;y=p4(p),(E=Ra.get(E))&&VT(y,E),k=(l.ownerDocument||l).createElement("link"),er(k);var V=k;return V._p=new Promise(function(q,re){V.onload=q,V.onerror=re}),Xr(k,"link",y),d.state.loading|=4,wb(k,p.precedence,l),d.instance=k;case"script":return k=Yf(p.src),(E=l.querySelector(Zg(k)))?(d.instance=E,er(E),E):(y=p,(E=Ra.get(k))&&(y=h({},p),BT(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),er(E),Xr(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,wb(y,p.precedence,l));return d.instance}function wb(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,V=0;V<y.length;V++){var q=y[V];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function VT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function BT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Sb=null;function m4(l,d,p){if(Sb===null){var y=new Map,E=Sb=new Map;E.set(p,y)}else E=Sb,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[Ls]||k[Jn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var V=k.getAttribute(d)||"";V=l+V;var q=y.get(V);q?q.push(k):y.set(V,[k])}}return y}function v4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Gte(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function y4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Hte(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Wf(y.href),k=d.querySelector(Qg(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=_b.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,er(k);return}k=d.ownerDocument||d,y=p4(y),(E=Ra.get(E))&&VT(y,E),k=k.createElement("link"),er(k);var V=k;V._p=new Promise(function(q,re){V.onload=q,V.onerror=re}),Xr(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=_b.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var FT=0;function Kte(l,d){return l.stylesheets&&l.count===0&&Tb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&Tb(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&FT===0&&(FT=62500*kte());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Tb(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>FT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function _b(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Eb=null;function Tb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Eb=new Map,d.forEach(Wte,l),Eb=null,_b.call(l))}function Wte(l,d){if(!(d.state.loading&4)){var p=Eb.get(l);if(p)var y=p.get(null);else{p=new Map,Eb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var V=E[k];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),y=V)}y&&p.set(null,y)}E=d.instance,V=E.getAttribute("data-precedence"),k=p.get(V)||y,k===y&&p.set(null,E),p.set(V,E),this.count++,y=_b.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var Jg={$$typeof:I,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Yte(l,d,p,y,E,k,V,q,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function b4(l,d,p,y,E,k,V,q,re,ve,Te,ke){return l=new Yte(l,d,p,V,re,ve,Te,ke,q),d=1,k===!0&&(d|=24),k=ea(3,null,null,d),l.current=k,k.stateNode=l,d=xE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},EE(k),l}function x4(l){return l?(l=Af,l):Af}function w4(l,d,p,y,E,k){E=x4(E),y.context===null?y.context=E:y.pendingContext=E,y=tc(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=nc(l,y,d),p!==null&&(Mi(p,l,d),Ng(p,l,d))}function S4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function UT(l,d){S4(l,d),(l=l.alternate)&&S4(l,d)}function _4(l){if(l.tag===13||l.tag===31){var d=Pu(l,67108864);d!==null&&Mi(d,l,67108864),UT(l,67108864)}}function E4(l){if(l.tag===13||l.tag===31){var d=aa();d=yu(d);var p=Pu(l,d);p!==null&&Mi(p,l,d),UT(l,d)}}var Ab=!0;function Xte(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=2,$T(l,d,p,y)}finally{Y.p=k,G.T=E}}function Qte(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=8,$T(l,d,p,y)}finally{Y.p=k,G.T=E}}function $T(l,d,p,y){if(Ab){var E=qT(y);if(E===null)IT(l,d,y,kb,p),A4(l,y);else if(Jte(E,l,d,p,y))y.stopPropagation();else if(A4(l,y),d&4&&-1<Zte.indexOf(l)){for(;E!==null;){var k=_a(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var V=$n(k.pendingLanes);if(V!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;V;){var re=1<<31-mt(V);q.entanglements[1]|=re,V&=~re}Js(k),(zt&6)===0&&(cb=bt()+500,Kg(0))}}break;case 31:case 13:q=Pu(k,2),q!==null&&Mi(q,k,2),db(),UT(k,2)}if(k=qT(y),k===null&&IT(l,d,y,kb,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else IT(l,d,y,null,p)}}function qT(l){return l=Ea(l),GT(l)}var kb=null;function GT(l){if(kb=null,l=Vs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return kb=l,null}function T4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ft()){case Me:return 2;case ut:return 8;case An:case gr:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var HT=!1,hc=null,pc=null,gc=null,em=new Map,tm=new Map,mc=[],Zte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A4(l,d){switch(l){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":gc=null;break;case"pointerover":case"pointerout":em.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(d.pointerId)}}function nm(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=_a(d),d!==null&&_4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Jte(l,d,p,y,E){switch(d){case"focusin":return hc=nm(hc,l,d,p,y,E),!0;case"dragenter":return pc=nm(pc,l,d,p,y,E),!0;case"mouseover":return gc=nm(gc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return em.set(k,nm(em.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,tm.set(k,nm(tm.get(k)||null,l,d,p,y,E)),!0}return!1}function k4(l){var d=Vs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,rs(l.priority,function(){E4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,rs(l.priority,function(){E4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Cb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=qT(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);gg=y,p.target.dispatchEvent(y),gg=null}else return d=_a(p),d!==null&&_4(d),l.blockedOn=p,!1;d.shift()}return!0}function C4(l,d,p){Cb(l)&&p.delete(d)}function ene(){HT=!1,hc!==null&&Cb(hc)&&(hc=null),pc!==null&&Cb(pc)&&(pc=null),gc!==null&&Cb(gc)&&(gc=null),em.forEach(C4),tm.forEach(C4)}function Ib(l,d){l.blockedOn===d&&(l.blockedOn=null,HT||(HT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ene)))}var Pb=null;function I4(l){Pb!==l&&(Pb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pb===l&&(Pb=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if(GT(y||p)===null)continue;break}var k=_a(p);k!==null&&(l.splice(d,3),d-=3,qE(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function Xf(l){function d(re){return Ib(re,l)}hc!==null&&Ib(hc,l),pc!==null&&Ib(pc,l),gc!==null&&Ib(gc,l),em.forEach(d),tm.forEach(d);for(var p=0;p<mc.length;p++){var y=mc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<mc.length&&(p=mc[0],p.blockedOn===null);)k4(p),p.blockedOn===null&&mc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],V=E[Rr]||null;if(typeof k=="function")V||I4(p);else if(V){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,V=k[Rr]||null)q=V.formAction;else if(GT(E)!==null)continue}else q=V.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),I4(p)}}}function P4(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function KT(l){this._internalRoot=l}Nb.prototype.render=KT.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=aa();w4(p,y,l,d,null,null)},Nb.prototype.unmount=KT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;w4(l.current,2,null,l,null,null),db(),d[zs]=null}};function Nb(l){this._internalRoot=l}Nb.prototype.unstable_scheduleHydration=function(l){if(l){var d=dy();l={blockedOn:null,target:l,priority:d};for(var p=0;p<mc.length&&d!==0&&d<mc[p].priority;p++);mc.splice(p,0,l),p===0&&k4(l)}};var N4=e.version;if(N4!=="19.2.0")throw Error(r(527,N4,"19.2.0"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var tne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Db=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Db.isDisabled&&Db.supportsFiber)try{Dn=Db.inject(tne),at=Db}catch{}}return im.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=Lj,k=Vj,V=Bj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=b4(l,1,!1,null,null,p,y,null,E,k,V,P4),l[zs]=d.current,CT(l),new KT(d)},im.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=Lj,V=Vj,q=Bj,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=b4(l,1,!0,d,p??null,y,E,re,k,V,q,P4),d.context=x4(null),p=d.current,y=aa(),y=yu(y),E=tc(y),E.callback=null,nc(p,E,y),p=y,d.current.lanes=p,mu(d,p),Js(d),l[zs]=d.current,CT(l),new Nb(d)},im.version="19.2.0",im}var F4;function fne(){if(F4)return XT.exports;F4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),XT.exports=dne(),XT.exports}var hne=fne();const pne="modulepreload",gne=function(t){return"/personal-budget-pwa/"+t},U4={},qh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=gne(u),u in U4)return;U4[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":pne,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function mne(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await qh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const vne=()=>{};var $4={};const w$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},AN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new bne;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xne=function(t){const e=w$(t);return AN.encodeByteArray(e,!0)},S$=function(t){return xne(t).replace(/\./g,"")},_$=function(t){try{return AN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wne=()=>kN().__FIREBASE_DEFAULTS__,Sne=()=>{if(typeof process>"u"||typeof $4>"u")return;const t=$4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_ne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_$(t[1]);return e&&JSON.parse(e)},tS=()=>{try{return vne()||wne()||Sne()||_ne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E$=t=>tS()?.emulatorHosts?.[t],Ene=t=>{const e=E$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},T$=()=>tS()?.config,A$=t=>tS()?.[`_${t}`];class ov{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function au(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CN(t){return(await fetch(t,{credentials:"include"})).ok}const Lm={};function Tne(){const t={prod:[],emulator:[]};for(const e of Object.keys(Lm))Lm[e]?t.emulator.push(e):t.prod.push(e);return t}function Ane(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let q4=!1;function k$(t,e){if(typeof window>"u"||typeof document>"u"||!au(window.location.host)||Lm[t]===e||Lm[t]||q4)return;Lm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=Tne().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{q4=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=Ane(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),T=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const O=u();c(T,_),I.append(T,b,w,O),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function C$(){const t=tS()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cne(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ine(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Pne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nne(){const t=kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I$(){return!C$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P$(){return!C$()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function nS(){try{return typeof indexedDB=="object"}catch{return!1}}function Dne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const One="FirebaseError";class ko extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=One,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pp.prototype.create)}}class Pp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Rne(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new ko(i,o,r)}}function Rne(t,e){return t.replace(Mne,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Mne=/\{\$([^}]+)}/g;function jne(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(G4(a)&&G4(s)){if(!Hc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function G4(t){return t!==null&&typeof t=="object"}function i0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _m(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Em(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zne(t,e){const n=new Lne(t,e);return n.subscribe.bind(n)}class Lne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Vne(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eA),i.error===void 0&&(i.error=eA),i.complete===void 0&&(i.complete=eA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vne(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eA(){}const Bne=1e3,Fne=2,Une=14400*1e3,$ne=.5;function qne(t,e=Bne,n=Fne){const r=e*Math.pow(n,t),i=Math.round($ne*r*(Math.random()-.5)*2);return Math.min(Une,r+i)}function Vt(t){return t&&t._delegate?t._delegate:t}let wo=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Ku="[DEFAULT]";let Gne=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ov;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kne(e))try{this.getOrInitializeService({instanceIdentifier:Ku})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ku){return this.instances.has(e)}getOptions(e=Ku){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hne(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ku){return this.component?this.component.multipleInstances?e:Ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Hne(t){return t===Ku?void 0:t}function Kne(t){return t.instantiationMode==="EAGER"}class Wne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gne(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const Yne={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},Xne=At.INFO,Qne={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Zne=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Qne[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let rS=class{constructor(e){this.name=e,this._logLevel=Xne,this._logHandler=Zne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}};const Jne=(t,e)=>e.some(n=>t instanceof n);let H4,K4;function ere(){return H4||(H4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tre(){return K4||(K4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N$=new WeakMap,VC=new WeakMap,D$=new WeakMap,tA=new WeakMap,IN=new WeakMap;function nre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Vc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&N$.set(n,t)}).catch(()=>{}),IN.set(e,t),e}function rre(t){if(VC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});VC.set(t,e)}let BC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ire(t){BC=t(BC)}function are(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nA(this),e,...n);return D$.set(r,e.sort?e.sort():[e]),Vc(r)}:tre().includes(t)?function(...e){return t.apply(nA(this),e),Vc(N$.get(this))}:function(...e){return Vc(t.apply(nA(this),e))}}function sre(t){return typeof t=="function"?are(t):(t instanceof IDBTransaction&&rre(t),Jne(t,ere())?new Proxy(t,BC):t)}function Vc(t){if(t instanceof IDBRequest)return nre(t);if(tA.has(t))return tA.get(t);const e=sre(t);return e!==t&&(tA.set(t,e),IN.set(e,t)),e}const nA=t=>IN.get(t);function ore(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Vc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Vc(s.result),c.oldVersion,c.newVersion,Vc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const lre=["get","getKey","getAll","getAllKeys","count"],cre=["put","add","delete","clear"],rA=new Map;function W4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rA.get(e))return rA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return rA.set(e,a),a}ire(t=>({...t,get:(e,n,r)=>W4(e,n)||t.get(e,n,r),has:(e,n)=>!!W4(e,n)||t.has(e,n)}));class ure{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dre(t){return t.getComponent()?.type==="VERSION"}const FC="@firebase/app",Y4="0.14.6";const pl=new rS("@firebase/app"),fre="@firebase/app-compat",hre="@firebase/analytics-compat",pre="@firebase/analytics",gre="@firebase/app-check-compat",mre="@firebase/app-check",vre="@firebase/auth",yre="@firebase/auth-compat",bre="@firebase/database",xre="@firebase/data-connect",wre="@firebase/database-compat",Sre="@firebase/functions",_re="@firebase/functions-compat",Ere="@firebase/installations",Tre="@firebase/installations-compat",Are="@firebase/messaging",kre="@firebase/messaging-compat",Cre="@firebase/performance",Ire="@firebase/performance-compat",Pre="@firebase/remote-config",Nre="@firebase/remote-config-compat",Dre="@firebase/storage",Ore="@firebase/storage-compat",Rre="@firebase/firestore",Mre="@firebase/ai",jre="@firebase/firestore-compat",zre="firebase",Lre="12.6.0";const UC="[DEFAULT]",Vre={[FC]:"fire-core",[fre]:"fire-core-compat",[pre]:"fire-analytics",[hre]:"fire-analytics-compat",[mre]:"fire-app-check",[gre]:"fire-app-check-compat",[vre]:"fire-auth",[yre]:"fire-auth-compat",[bre]:"fire-rtdb",[xre]:"fire-data-connect",[wre]:"fire-rtdb-compat",[Sre]:"fire-fn",[_re]:"fire-fn-compat",[Ere]:"fire-iid",[Tre]:"fire-iid-compat",[Are]:"fire-fcm",[kre]:"fire-fcm-compat",[Cre]:"fire-perf",[Ire]:"fire-perf-compat",[Pre]:"fire-rc",[Nre]:"fire-rc-compat",[Dre]:"fire-gcs",[Ore]:"fire-gcs-compat",[Rre]:"fire-fst",[jre]:"fire-fst-compat",[Mre]:"fire-vertex","fire-js":"fire-js",[zre]:"fire-js-all"};const uw=new Map,Bre=new Map,$C=new Map;function X4(t,e){try{t.container.addComponent(e)}catch(n){pl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gl(t){const e=t.name;if($C.has(e))return pl.debug(`There were multiple attempts to register component ${e}.`),!1;$C.set(e,t);for(const n of uw.values())X4(n,t);for(const n of Bre.values())X4(n,t);return!0}function Np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fa(t){return t==null?!1:t.settings!==void 0}const Fre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bc=new Pp("app","Firebase",Fre);class Ure{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bc.create("app-deleted",{appName:this._name})}}const Dp=Lre;function O$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:UC,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Bc.create("bad-app-name",{appName:String(i)});if(n||(n=T$()),!n)throw Bc.create("no-options");const a=uw.get(i);if(a){if(Hc(n,a.options)&&Hc(r,a.config))return a;throw Bc.create("duplicate-app",{appName:i})}const s=new Wne(i);for(const c of $C.values())s.addComponent(c);const o=new Ure(n,r,s);return uw.set(i,o),o}function PN(t=UC){const e=uw.get(t);if(!e&&t===UC&&T$())return O$();if(!e)throw Bc.create("no-app",{appName:t});return e}function Ss(t,e,n){let r=Vre[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pl.warn(s.join(" "));return}gl(new wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const $re="firebase-heartbeat-database",qre=1,lv="firebase-heartbeat-store";let iA=null;function R$(){return iA||(iA=ore($re,qre,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bc.create("idb-open",{originalErrorMessage:t.message})})),iA}async function Gre(t){try{const n=(await R$()).transaction(lv),r=await n.objectStore(lv).get(M$(t));return await n.done,r}catch(e){if(e instanceof ko)pl.warn(e.message);else{const n=Bc.create("idb-get",{originalErrorMessage:e?.message});pl.warn(n.message)}}}async function Q4(t,e){try{const r=(await R$()).transaction(lv,"readwrite");await r.objectStore(lv).put(e,M$(t)),await r.done}catch(n){if(n instanceof ko)pl.warn(n.message);else{const r=Bc.create("idb-set",{originalErrorMessage:n?.message});pl.warn(r.message)}}}function M$(t){return`${t.name}!${t.options.appId}`}const Hre=1024,Kre=30;class Wre{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Z4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Kre){const i=Qre(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z4(),{heartbeatsToSend:n,unsentEntries:r}=Yre(this._heartbeatsCache.heartbeats),i=S$(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return pl.warn(e),""}}}function Z4(){return new Date().toISOString().substring(0,10)}function Yre(t,e=Hre){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),J4(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),J4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nS()?Dne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gre(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Q4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Q4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function J4(t){return S$(JSON.stringify({version:2,heartbeats:t})).length}function Qre(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Zre(t){gl(new wo("platform-logger",e=>new ure(e),"PRIVATE")),gl(new wo("heartbeat",e=>new Wre(e),"PRIVATE")),Ss(FC,Y4,t),Ss(FC,Y4,"esm2020"),Ss("fire-js","")}Zre("");function j$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jre=j$,z$=new Pp("auth","Firebase",j$());const dw=new rS("@firebase/auth");function eie(t,...e){dw.logLevel<=At.WARN&&dw.warn(`Auth (${Dp}): ${t}`,...e)}function Rx(t,...e){dw.logLevel<=At.ERROR&&dw.error(`Auth (${Dp}): ${t}`,...e)}function ks(t,...e){throw NN(t,...e)}function fo(t,...e){return NN(t,...e)}function L$(t,e,n){const r={...Jre(),[e]:n};return new Pp("auth","Firebase",r).create(e,{appName:t.name})}function ol(t){return L$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z$.create(t,...e)}function et(t,e,...n){if(!t)throw NN(e,...n)}function tl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rx(e),new Error(e)}function ml(t,e){t||tl(e)}function qC(){return typeof self<"u"&&self.location?.href||""}function tie(){return eL()==="http:"||eL()==="https:"}function eL(){return typeof self<"u"&&self.location?.protocol||null}function nie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tie()||Ine()||"connection"in navigator)?navigator.onLine:!0}function rie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class a0{constructor(e,n){this.shortDelay=e,this.longDelay=n,ml(n>e,"Short delay should be less than long delay!"),this.isMobile=kne()||Pne()}get(){return nie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function DN(t,e){ml(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class V${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sie=new a0(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Za(t,e,n,r,i={}){return B$(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=i0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return Cne()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&au(t.emulatorConfig.host)&&(u.credentials="include"),V$.fetch()(await F$(t,t.config.apiHost,n,o),u)})}async function B$(t,e,n){t._canInitEmulator=!1;const r={...iie,...e};try{const i=new lie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Ob(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ob(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ob(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ob(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw L$(t,f,u);ks(t,f)}}catch(i){if(i instanceof ko)throw i;ks(t,"network-request-failed",{message:String(i)})}}async function s0(t,e,n,r,i={}){const a=await Za(t,e,n,r,i);return"mfaPendingCredential"in a&&ks(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function F$(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?DN(t.config,i):`${t.config.apiScheme}://${i}`;return aie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function oie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fo(this.auth,"network-request-failed")),sie.get())})}}function Ob(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fo(t,e,r);return i.customData._tokenResponse=n,i}function tL(t){return t!==void 0&&t.enterprise!==void 0}class cie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uie(t,e){return Za(t,"GET","/v2/recaptchaConfig",Ds(t,e))}async function die(t,e){return Za(t,"POST","/v1/accounts:delete",e)}async function fw(t,e){return Za(t,"POST","/v1/accounts:lookup",e)}function Vm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fie(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=ON(r);et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Vm(aA(i.auth_time)),issuedAtTime:Vm(aA(i.iat)),expirationTime:Vm(aA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function aA(t){return Number(t)*1e3}function ON(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rx("JWT malformed, contained fewer than 3 sections"),null;try{const i=_$(n);return i?JSON.parse(i):(Rx("Failed to decode base64 JWT payload"),null)}catch(i){return Rx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nL(t){const e=ON(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ko&&hie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class pie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class GC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vm(this.lastLoginAt),this.creationTime=Vm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hw(t){const e=t.auth,n=await t.getIdToken(),r=await Gh(t,fw(e,{idToken:n}));et(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?U$(i.providerUserInfo):[],s=mie(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new GC(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function gie(t){const e=Vt(t);await hw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function U$(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function vie(t,e){const n=await B$(t,{},async()=>{const r=i0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await F$(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&au(t.emulatorConfig.host)&&(c.credentials="include"),V$.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yie(t,e){return Za(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}class Rh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=nL(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await vie(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Rh;return r&&(et(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(et(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(et(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rh,this.toJSON())}_performRefresh(){return tl("not implemented")}}function yc(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new pie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new GC(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gh(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fie(this,e)}reload(){return gie(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fa(this.auth.app))return Promise.reject(ol(this.auth));const e=await this.getIdToken();return await Gh(this,die(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;et(h&&x,e,"internal-error");const w=Rh.fromJSON(this.name,x);et(typeof h=="string",e,"internal-error"),yc(r,e.name),yc(i,e.name),et(typeof g=="boolean",e,"internal-error"),et(typeof v=="boolean",e,"internal-error"),yc(a,e.name),yc(s,e.name),yc(o,e.name),yc(c,e.name),yc(u,e.name),yc(f,e.name);const _=new xs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(_.providerData=b.map(T=>({...T}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Rh;i.updateFromServerResponse(n);const a=new xs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];et(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?U$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Rh;o.updateFromIdToken(r);const c=new xs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new GC(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const rL=new Map;function nl(t){ml(t instanceof Function,"Expected a class definition");let e=rL.get(t);return e?(ml(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rL.set(t,e),e)}class $${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$$.type="NONE";const iL=$$;function Mx(t,e,n){return`firebase:${t}:${e}:${n}`}class Mh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Mx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Mx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fw(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mh(nl(iL),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||nl(iL);const s=Mx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await fw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await xs._fromGetAccountInfoResponse(e,g,f)}else h=xs._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Mh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Mh(a,e,r))}}function aL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y$(e))return"Blackberry";if(X$(e))return"Webos";if(G$(e))return"Safari";if((e.includes("chrome/")||H$(e))&&!e.includes("edge/"))return"Chrome";if(W$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function q$(t=kr()){return/firefox\//i.test(t)}function G$(t=kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H$(t=kr()){return/crios\//i.test(t)}function K$(t=kr()){return/iemobile/i.test(t)}function W$(t=kr()){return/android/i.test(t)}function Y$(t=kr()){return/blackberry/i.test(t)}function X$(t=kr()){return/webos/i.test(t)}function RN(t=kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bie(t=kr()){return RN(t)&&!!window.navigator?.standalone}function xie(){return Nne()&&document.documentMode===10}function Q$(t=kr()){return RN(t)||W$(t)||X$(t)||Y$(t)||/windows phone/i.test(t)||K$(t)}function Z$(t,e=[]){let n;switch(t){case"Browser":n=aL(kr());break;case"Worker":n=`${aL(kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dp}/${r}`}class wie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Sie(t,e={}){return Za(t,"GET","/v2/passwordPolicy",Ds(t,e))}const _ie=6;class Eie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_ie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Tie{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sL(this),this.idTokenSubscription=new sL(this),this.beforeStateQueue=new wie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nl(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fw(this,{idToken:e}),r=await xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fa(this.app))return Promise.reject(ol(this));const n=e?Vt(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fa(this.app)?Promise.reject(ol(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fa(this.app)?Promise.reject(ol(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sie(this),n=new Eie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nl(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Mh.create(this,[nl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(fa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&eie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function su(t){return Vt(t)}class sL{constructor(e){this.auth=e,this.observer=null,this.addObserver=zne(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let iS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Aie(t){iS=t}function J$(t){return iS.loadJS(t)}function kie(){return iS.recaptchaEnterpriseScript}function Cie(){return iS.gapiScript}function Iie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Pie{constructor(){this.enterprise=new Nie}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Nie{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Die="recaptcha-enterprise",e8="NO_RECAPTCHA";class Oie{constructor(e){this.type=Die,this.auth=su(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{uie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new cie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;tL(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(e8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pie().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&tL(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kie();c.length!==0&&(c+=o),J$(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function oL(t,e,n,r=!1,i=!1){const a=new Oie(t);let s;if(i)s=e8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function pw(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await oL(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await oL(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function Rie(t,e){const n=Np(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Hc(a,e??{}))return i;ks(i,"already-initialized")}return n.initialize({options:e})}function Mie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function jie(t,e,n){const r=su(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=t8(e),{host:s,port:o}=zie(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(Hc(u,r.config.emulator)&&Hc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,au(s)?(CN(`${a}//${s}${c}`),k$("Auth",!0)):Lie()}function t8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zie(t){const e=t8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:lL(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:lL(s)}}}function lL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lie(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class MN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tl("not implemented")}_getIdTokenResponse(e){return tl("not implemented")}_linkToIdToken(e,n){return tl("not implemented")}_getReauthenticationResolver(e){return tl("not implemented")}}async function Vie(t,e){return Za(t,"POST","/v1/accounts:resetPassword",Ds(t,e))}async function Bie(t,e){return Za(t,"POST","/v1/accounts:signUp",e)}async function Fie(t,e){return Za(t,"POST","/v1/accounts:update",Ds(t,e))}async function Uie(t,e){return s0(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}async function n8(t,e){return Za(t,"POST","/v1/accounts:sendOobCode",Ds(t,e))}async function $ie(t,e){return n8(t,e)}async function qie(t,e){return n8(t,e)}async function Gie(t,e){return s0(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function Hie(t,e){return s0(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}class cv extends MN{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new cv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pw(e,n,"signInWithPassword",Uie);case"emailLink":return Gie(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pw(e,r,"signUpPassword",Bie);case"emailLink":return Hie(e,{idToken:n,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jh(t,e){return s0(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}const Kie="http://localhost";class Id extends MN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Id(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Id(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return jh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jh(e,n)}buildRequest(){const e={requestUri:Kie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=i0(n)}return e}}function Wie(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yie(t){const e=_m(Em(t)).link,n=e?_m(Em(e)).deep_link_id:null,r=_m(Em(t)).deep_link_id;return(r?_m(Em(r)).link:null)||r||n||e||t}class jN{constructor(e){const n=_m(Em(e)),r=n.apiKey??null,i=n.oobCode??null,a=Wie(n.mode??null);et(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Yie(e);try{return new jN(n)}catch{return null}}}class Zd{constructor(){this.providerId=Zd.PROVIDER_ID}static credential(e,n){return cv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jN.parseLink(n);return et(r,"argument-error"),cv._fromEmailAndCode(e,r.code,r.tenantId)}}Zd.PROVIDER_ID="password";Zd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class r8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class o0 extends r8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ac extends o0{constructor(){super("facebook.com")}static credential(e){return Id._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ac.PROVIDER_ID="facebook.com";class kc extends o0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Id._fromParams({providerId:kc.PROVIDER_ID,signInMethod:kc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kc.credentialFromTaggedObject(e)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kc.credential(n,r)}catch{return null}}}kc.GOOGLE_SIGN_IN_METHOD="google.com";kc.PROVIDER_ID="google.com";class Cc extends o0{constructor(){super("github.com")}static credential(e){return Id._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cc.credential(e.oauthAccessToken)}catch{return null}}}Cc.GITHUB_SIGN_IN_METHOD="github.com";Cc.PROVIDER_ID="github.com";class Ic extends o0{constructor(){super("twitter.com")}static credential(e,n){return Id._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ic.credential(n,r)}catch{return null}}}Ic.TWITTER_SIGN_IN_METHOD="twitter.com";Ic.PROVIDER_ID="twitter.com";async function Xie(t,e){return s0(t,"POST","/v1/accounts:signUp",Ds(t,e))}class Pd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await xs._fromIdTokenResponse(e,r,i),s=cL(r);return new Pd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cL(r);return new Pd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class gw extends ko{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gw(e,n,r,i)}}function i8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gw._fromErrorAndOperation(t,a,e,r):a})}async function Qie(t,e,n=!1){const r=await Gh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pd._forOperation(t,"link",r)}async function a8(t,e,n=!1){const{auth:r}=t;if(fa(r.app))return Promise.reject(ol(r));const i="reauthenticate";try{const a=await Gh(t,i8(r,i,e,t),n);et(a.idToken,r,"internal-error");const s=ON(a.idToken);et(s,r,"internal-error");const{sub:o}=s;return et(t.uid===o,r,"user-mismatch"),Pd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ks(r,"user-mismatch"),a}}async function s8(t,e,n=!1){if(fa(t.app))return Promise.reject(ol(t));const r="signIn",i=await i8(t,r,e),a=await Pd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Zie(t,e){return s8(su(t),e)}async function Jie(t,e){return a8(Vt(t),e)}function eae(t,e,n){et(n.url?.length>0,t,"invalid-continue-uri"),et(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),et(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(et(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(et(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function zN(t){const e=su(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tae(t,e,n){const r=su(t);await pw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qie)}async function nae(t,e,n){await Vie(Vt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zN(t),r})}async function rae(t,e){await Fie(Vt(t),{oobCode:e})}async function iae(t,e,n){if(fa(t.app))return Promise.reject(ol(t));const r=su(t),s=await pw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xie).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zN(t),c}),o=await Pd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function aae(t,e,n){return fa(t.app)?Promise.reject(ol(t)):Zie(Vt(t),Zd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zN(t),r})}async function uL(t,e){const n=Vt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&eae(n.auth,i,e);const{email:a}=await $ie(n.auth,i);a!==t.email&&await t.reload()}async function sae(t,e){return Za(t,"POST","/v1/accounts:update",e)}async function oae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Vt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Gh(r,sae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function lae(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function cae(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function uae(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function dL(t){return Vt(t).signOut()}async function dae(t){return Vt(t).delete()}const mw="__sak";class o8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mw,"1"),this.storage.removeItem(mw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fae=1e3,hae=10;class l8 extends o8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);xie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}l8.type="LOCAL";const pae=l8;class c8 extends o8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}c8.type="SESSION";const u8=c8;function gae(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class aS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new aS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await gae(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}aS.receivers=[];function LN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class mae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=LN("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ho(){return window}function vae(t){ho().location.href=t}function d8(){return typeof ho().WorkerGlobalScope<"u"&&typeof ho().importScripts=="function"}async function yae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bae(){return navigator?.serviceWorker?.controller||null}function xae(){return d8()?self:null}const f8="firebaseLocalStorageDb",wae=1,vw="firebaseLocalStorage",h8="fbase_key";class l0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sS(t,e){return t.transaction([vw],e?"readwrite":"readonly").objectStore(vw)}function Sae(){const t=indexedDB.deleteDatabase(f8);return new l0(t).toPromise()}function HC(){const t=indexedDB.open(f8,wae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vw,{keyPath:h8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vw)?e(r):(r.close(),await Sae(),e(await HC()))})})}async function fL(t,e,n){const r=sS(t,!0).put({[h8]:e,value:n});return new l0(r).toPromise()}async function _ae(t,e){const n=sS(t,!1).get(e),r=await new l0(n).toPromise();return r===void 0?null:r.value}function hL(t,e){const n=sS(t,!0).delete(e);return new l0(n).toPromise()}const Eae=800,Tae=3;class p8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await HC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Tae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=aS._getInstance(xae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yae(),!this.activeServiceWorker)return;this.sender=new mae(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await HC();return await fL(e,mw,"1"),await hL(e,mw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_ae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=sS(i,!1).getAll();return new l0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Eae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p8.type="LOCAL";const Aae=p8;new a0(3e4,6e4);function kae(t,e){return e?nl(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class VN extends MN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Cae(t){return s8(t.auth,new VN(t),t.bypassAuthState)}function Iae(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),a8(n,new VN(t),t.bypassAuthState)}async function Pae(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),Qie(n,new VN(t),t.bypassAuthState)}class g8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cae;case"linkViaPopup":case"linkViaRedirect":return Pae;case"reauthViaPopup":case"reauthViaRedirect":return Iae;default:ks(this.auth,"internal-error")}}resolve(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nae=new a0(2e3,1e4);class bh extends g8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,bh.currentPopupAction&&bh.currentPopupAction.cancel(),bh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){ml(this.filter.length===1,"Popup operations only handle one event");const e=LN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nae.get())};e()}}bh.currentPopupAction=null;const Dae="pendingRedirect",jx=new Map;class Oae extends g8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jx.get(this.auth._key());if(!e){try{const r=await Rae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jx.set(this.auth._key(),e)}return this.bypassAuthState||jx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rae(t,e){const n=zae(e),r=jae(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Mae(t,e){jx.set(t._key(),e)}function jae(t){return nl(t._redirectPersistence)}function zae(t){return Mx(Dae,t.config.apiKey,t.name)}async function Lae(t,e,n=!1){if(fa(t.app))return Promise.reject(ol(t));const r=su(t),i=kae(r,e),s=await new Oae(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const Vae=600*1e3;class Bae{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fae(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!m8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vae&&this.cachedEventUids.clear(),this.cachedEventUids.has(pL(e))}saveEventToCache(e){this.cachedEventUids.add(pL(e)),this.lastProcessedEventTime=Date.now()}}function pL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Fae(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m8(t);default:return!1}}async function Uae(t,e={}){return Za(t,"GET","/v1/projects",e)}const $ae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qae=/^https?/;async function Gae(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uae(t);for(const n of e)try{if(Hae(n))return}catch{}ks(t,"unauthorized-domain")}function Hae(t){const e=qC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!qae.test(n))return!1;if($ae.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Kae=new a0(3e4,6e4);function gL(){const t=ho().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wae(t){return new Promise((e,n)=>{function r(){gL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gL(),n(fo(t,"network-request-failed"))},timeout:Kae.get()})}if(ho().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ho().gapi?.load)r();else{const i=Iie("iframefcb");return ho()[i]=()=>{gapi.load?r():n(fo(t,"network-request-failed"))},J$(`${Cie()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw zx=null,e})}let zx=null;function Yae(t){return zx=zx||Wae(t),zx}const Xae=new a0(5e3,15e3),Qae="__/auth/iframe",Zae="emulator/auth/iframe",Jae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ese=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tse(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?DN(e,Zae):`https://${t.config.authDomain}/${Qae}`,r={apiKey:e.apiKey,appName:t.name,v:Dp},i=ese.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${i0(r).slice(1)}`}async function nse(t){const e=await Yae(t),n=ho().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:tse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jae,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=fo(t,"network-request-failed"),o=ho().setTimeout(()=>{a(s)},Xae.get());function c(){ho().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const rse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ise=500,ase=600,sse="_blank",ose="http://localhost";class mL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lse(t,e,n,r=ise,i=ase){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...rse,width:r.toString(),height:i.toString(),top:a,left:s},u=kr().toLowerCase();n&&(o=H$(u)?sse:n),q$(u)&&(e=e||ose,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(bie(u)&&o!=="_self")return cse(e||"",o),new mL(null);const h=window.open(e||"",o,f);et(h,t,"popup-blocked");try{h.focus()}catch{}return new mL(h)}function cse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const use="__/auth/handler",dse="emulator/auth/handler",fse=encodeURIComponent("fac");async function vL(t,e,n,r,i,a){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dp,eventId:i};if(e instanceof r8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",jne(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof o0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${fse}=${encodeURIComponent(c)}`:"";return`${hse(t)}?${i0(o).slice(1)}${u}`}function hse({config:t}){return t.emulator?DN(t,dse):`https://${t.authDomain}/${use}`}const sA="webStorageSupport";class pse{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u8,this._completeRedirectFn=Lae,this._overrideRedirectResult=Mae}async _openPopup(e,n,r,i){ml(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await vL(e,n,r,qC(),i);return lse(e,a,LN())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await vL(e,n,r,qC(),i);return vae(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(ml(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await nse(e),r=new Bae(e);return n.register("authEvent",i=>(et(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sA,{type:sA},i=>{const a=i?.[0]?.[sA];a!==void 0&&n(!!a),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gae(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q$()||G$()||RN()}}const gse=pse;var yL="@firebase/auth",bL="1.11.1";class mse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yse(t){gl(new wo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;et(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z$(t)},u=new Tie(r,i,a,c);return Mie(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gl(new wo("auth-internal",e=>{const n=su(e.getProvider("auth").getImmediate());return(r=>new mse(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(yL,bL,vse(t)),Ss(yL,bL,"esm2020")}const bse=300,xse=A$("authIdTokenMaxAge")||bse;let xL=null;const wse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xse)return;const i=n?.token;xL!==i&&(xL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function v8(t=PN()){const e=Np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rie(t,{popupRedirectResolver:gse,persistence:[Aae,pae,u8]}),r=A$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=wse(a.toString());cae(n,s,()=>s(n.currentUser)),lae(n,o=>s(o))}}const i=E$("auth");return i&&jie(n,`http://${i}`),n}function Sse(){return document.getElementsByTagName("head")?.[0]??document}Aie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=fo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Sse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yse("Browser");var wL="popstate";function _se(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=Jd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),KC("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:uv(a))}function r(i,a){Ha(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Tse(e,n,r,t)}function Pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ha(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ese(){return Math.random().toString(36).substring(2,10)}function SL(t,e){return{usr:t.state,key:t.key,idx:e}}function KC(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jd(e):e,state:n,key:e&&e.key||r||Ese()}}function uv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Tse(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),_=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:_})}function g(w,_){o="PUSH";let T=KC(x.location,w,_);n&&n(T,w),u=f()+1;let I=SL(T,u),O=x.createHref(T);try{s.pushState(I,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(O)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,_){o="REPLACE";let T=KC(x.location,w,_);n&&n(T,w),u=f();let I=SL(T,u),O=x.createHref(T);s.replaceState(I,"",O),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return Ase(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(wL,h),c=w,()=>{i.removeEventListener(wL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let _=b(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function Ase(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:uv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function y8(t,e,n="/"){return kse(t,e,n,!1)}function kse(t,e,n,r){let i=typeof e=="string"?Jd(e):e,a=vl(i.pathname||"/",n);if(a==null)return null;let s=b8(t);Cse(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=Vse(a);o=zse(s[c],u,r)}return o}function b8(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Pn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=ll([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(Pn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),b8(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:Mse(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of x8(s.path))a(s,o,!0,c)}),e}function x8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=x8(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Cse(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jse(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Ise=/^:[\w-]+$/,Pse=3,Nse=2,Dse=1,Ose=10,Rse=-2,_L=t=>t==="*";function Mse(t,e){let n=t.split("/"),r=n.length;return n.some(_L)&&(r+=Rse),e&&(r+=Nse),n.filter(i=>!_L(i)).reduce((i,a)=>i+(Ise.test(a)?Pse:a===""?Dse:Ose),r)}function jse(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zse(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=yw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=yw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:ll([a,h.pathname]),pathnameBase:$se(ll([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=ll([a,h.pathnameBase]))}return s}function yw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Lse(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function Lse(t,e=!1,n=!0){Ha(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Vse(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ha(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Bse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Fse(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Jd(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=EL(n.substring(1),"/"):a=EL(n,e)):a=e,{pathname:a,search:qse(r),hash:Gse(i)}}function EL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function oA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Use(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w8(t){let e=Use(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function S8(t,e,n,r=!1){let i;typeof t=="string"?i=Jd(t):(i={...t},Pn(!i.pathname||!i.pathname.includes("?"),oA("?","pathname","search",i)),Pn(!i.pathname||!i.pathname.includes("#"),oA("#","pathname","hash",i)),Pn(!i.search||!i.search.includes("#"),oA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=Fse(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var ll=t=>t.join("/").replace(/\/\/+/g,"/"),$se=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qse=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Hse=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Kse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Wse(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var _8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function E8(t,e){let n=t;if(typeof n!="string"||!Bse.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(_8)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=vl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Ha(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var T8=["POST","PUT","PATCH","DELETE"];new Set(T8);var Yse=["GET",...T8];new Set(Yse);var Op=A.createContext(null);Op.displayName="DataRouter";var oS=A.createContext(null);oS.displayName="DataRouterState";var Xse=A.createContext(!1),A8=A.createContext({isTransitioning:!1});A8.displayName="ViewTransition";var Qse=A.createContext(new Map);Qse.displayName="Fetchers";var Zse=A.createContext(null);Zse.displayName="Await";var Ja=A.createContext(null);Ja.displayName="Navigation";var c0=A.createContext(null);c0.displayName="Location";var Co=A.createContext({outlet:null,matches:[],isDataRoute:!1});Co.displayName="Route";var BN=A.createContext(null);BN.displayName="RouteError";var k8="REACT_ROUTER_ERROR",Jse="REDIRECT",eoe="ROUTE_ERROR_RESPONSE";function toe(t){if(t.startsWith(`${k8}:${Jse}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function noe(t){if(t.startsWith(`${k8}:${eoe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Hse(e.status,e.statusText,e.data)}catch{}}function roe(t,{relative:e}={}){Pn(u0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ja),{hash:i,pathname:a,search:s}=d0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:ll([n,a])),r.createHref({pathname:o,search:s,hash:i})}function u0(){return A.useContext(c0)!=null}function Os(){return Pn(u0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(c0).location}var C8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function I8(t){A.useContext(Ja).static||A.useLayoutEffect(t)}function es(){let{isDataRoute:t}=A.useContext(Co);return t?voe():ioe()}function ioe(){Pn(u0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Op),{basename:e,navigator:n}=A.useContext(Ja),{matches:r}=A.useContext(Co),{pathname:i}=Os(),a=JSON.stringify(w8(r)),s=A.useRef(!1);return I8(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Ha(s.current,C8),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=S8(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ll([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function aoe(){let{matches:t}=A.useContext(Co),e=t[t.length-1];return e?e.params:{}}function d0(t,{relative:e}={}){let{matches:n}=A.useContext(Co),{pathname:r}=Os(),i=JSON.stringify(w8(n));return A.useMemo(()=>S8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function soe(t,e){return P8(t,e)}function P8(t,e,n,r,i){Pn(u0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ja),{matches:s}=A.useContext(Co),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";D8(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Os(),v;if(e){let T=typeof e=="string"?Jd(e):e;Pn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=y8(t,{pathname:x});Ha(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ha(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=doe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:ll([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:ll([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&_?A.createElement(c0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function ooe(){let t=moe(),e=Kse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var loe=A.createElement(ooe,null),N8=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=noe(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Co.Provider,{value:this.props.routeContext},A.createElement(BN.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(coe,{error:t},e):e}};N8.contextType=Xse;var lA=new WeakMap;function coe({children:t,error:e}){let{basename:n}=A.useContext(Ja);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=toe(e.digest);if(r){let i=lA.get(e);if(i)throw i;let a=E8(r.location,n);if(_8&&!lA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw lA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function uoe({routeContext:t,match:e,children:n}){let r=A.useContext(Op);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Co.Provider,{value:t},n)}function doe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);Pn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Wse(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||loe,o&&(c<0&&g===0?(D8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,g+1)),T=()=>{let I;return v?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(uoe,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(N8,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:u}):T()},null)}function FN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function foe(t){let e=A.useContext(Op);return Pn(e,FN(t)),e}function hoe(t){let e=A.useContext(oS);return Pn(e,FN(t)),e}function poe(t){let e=A.useContext(Co);return Pn(e,FN(t)),e}function UN(t){let e=poe(t),n=e.matches[e.matches.length-1];return Pn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function goe(){return UN("useRouteId")}function moe(){let t=A.useContext(BN),e=hoe("useRouteError"),n=UN("useRouteError");return t!==void 0?t:e.errors?.[n]}function voe(){let{router:t}=foe("useNavigate"),e=UN("useNavigate"),n=A.useRef(!1);return I8(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ha(n.current,C8),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var TL={};function D8(t,e,n){!e&&!TL[t]&&(TL[t]=!0,Ha(!1,n))}A.memo(yoe);function yoe({routes:t,future:e,state:n,onError:r}){return P8(t,void 0,n,r,e)}function no(t){Pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function boe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Pn(!u0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=Jd(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=vl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return Ha(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Ja.Provider,{value:c},A.createElement(c0.Provider,{children:e,value:b}))}function xoe({children:t,location:e}){return soe(WC(t),e)}function WC(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,WC(r.props.children,a));return}Pn(r.type===no,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=WC(r.props.children,a)),n.push(s)}),n}var Lx="get",Vx="application/x-www-form-urlencoded";function lS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function woe(t){return lS(t)&&t.tagName.toLowerCase()==="button"}function Soe(t){return lS(t)&&t.tagName.toLowerCase()==="form"}function _oe(t){return lS(t)&&t.tagName.toLowerCase()==="input"}function Eoe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Toe(t,e){return t.button===0&&(!e||e==="_self")&&!Eoe(t)}function YC(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Aoe(t,e){let n=YC(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Rb=null;function koe(){if(Rb===null)try{new FormData(document.createElement("form"),0),Rb=!1}catch{Rb=!0}return Rb}var Coe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cA(t){return t!=null&&!Coe.has(t)?(Ha(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vx}"`),null):t}function Ioe(t,e){let n,r,i,a,s;if(Soe(t)){let o=t.getAttribute("action");r=o?vl(o,e):null,n=t.getAttribute("method")||Lx,i=cA(t.getAttribute("enctype"))||Vx,a=new FormData(t)}else if(woe(t)||_oe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?vl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Lx,i=cA(t.getAttribute("formenctype"))||cA(o.getAttribute("enctype"))||Vx,a=new FormData(o,t),!koe()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(lS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lx,r=null,i=Vx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $N(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Poe(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&vl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Noe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Doe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ooe(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Noe(a,n);return s.links?s.links():[]}return[]}));return zoe(r.flat(1).filter(Doe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function AL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Roe(t,e,{includeHydrateFallback:n}={}){return Moe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Moe(t){return[...new Set(t)]}function joe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function zoe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(joe(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function O8(){let t=A.useContext(Op);return $N(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Loe(){let t=A.useContext(oS);return $N(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qN=A.createContext(void 0);qN.displayName="FrameworkContext";function R8(){let t=A.useContext(qN);return $N(t,"You must render this element inside a <HydratedRouter> element"),t}function Voe(t,e){let n=A.useContext(qN),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=_=>{_.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:am(o,v),onBlur:am(c,b),onMouseEnter:am(u,v),onMouseLeave:am(f,b),onTouchStart:am(h,v)}]:[!1,g,{}]}function am(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Boe({page:t,...e}){let{router:n}=O8(),r=A.useMemo(()=>y8(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(Uoe,{page:t,matches:r,...e}):null}function Foe(t){let{manifest:e,routeModules:n}=R8(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return Ooe(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Uoe({page:t,matches:e,...n}){let r=Os(),{future:i,manifest:a,routeModules:s}=R8(),{basename:o}=O8(),{loaderData:c,matches:u}=Loe(),f=A.useMemo(()=>AL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>AL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(O=>O.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let _=Poe(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&_.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[_.pathname+_.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>Roe(h,a),[h,a]),b=Foe(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function $oe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qoe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qoe&&(window.__reactRouterVersion="7.13.0")}catch{}function Goe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=_se({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(boe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var M8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j8=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Ja),_=typeof u=="string"&&M8.test(u),T=E8(u,x);u=T.to;let I=roe(u,{relative:i}),[O,D,N]=Voe(r,v),C=Yoe(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function P(j){e&&e(j),j.defaultPrevented||C(j)}let R=A.createElement("a",{...v,...N,href:T.absoluteURL||I,onClick:T.isExternal||a?e:P,ref:$oe(b,D),target:c,"data-discover":!_&&n==="render"?"true":void 0});return O&&!_?A.createElement(A.Fragment,null,R,A.createElement(Boe,{page:I})):R});j8.displayName="Link";var Hoe=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=d0(s,{relative:u.relative}),g=Os(),v=A.useContext(oS),{navigator:b,basename:x}=A.useContext(Ja),w=v!=null&&ele(h)&&o===!0,_=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&x&&(I=vl(I,x)||I);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=T===_||!i&&T.startsWith(_)&&T.charAt(O)==="/",N=I!=null&&(I===_||!i&&I.startsWith(_)&&I.charAt(_.length)==="/"),C={isActive:D,isPending:N,isTransitioning:w},P=D?e:void 0,R;typeof r=="function"?R=r(C):R=[r,D?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(C):a;return A.createElement(j8,{...u,"aria-current":P,className:R,ref:f,style:j,to:s,viewTransition:o},typeof c=="function"?c(C):c)});Hoe.displayName="NavLink";var Koe=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Lx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Ja),w=Zoe(),_=Joe(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&M8.test(o),O=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let N=D.nativeEvent.submitter,C=N?.getAttribute("formmethod")||s,P=()=>w(N||D.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>P()):P()};return A.createElement("form",{ref:b,method:T,action:_,onSubmit:r?c:O,...v,"data-discover":!I&&t==="render"?"true":void 0})});Koe.displayName="Form";function Woe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z8(t){let e=A.useContext(Op);return Pn(e,Woe(t)),e}function Yoe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=es(),f=Os(),h=d0(t,{relative:a});return A.useCallback(g=>{if(Toe(g,e)){g.preventDefault();let v=n!==void 0?n:uv(f)===uv(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function L8(t){Ha(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(YC(t)),n=A.useRef(!1),r=Os(),i=A.useMemo(()=>Aoe(r.search,n.current?null:e.current),[r.search]),a=es(),s=A.useCallback((o,c)=>{const u=YC(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Xoe=0,Qoe=()=>`__${String(++Xoe)}__`;function Zoe(){let{router:t}=z8("useSubmit"),{basename:e}=A.useContext(Ja),n=goe(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=Ioe(a,e);if(s.navigate===!1){let g=s.fetcherKey||Qoe();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Joe(t,{relative:e}={}){let{basename:n}=A.useContext(Ja),r=A.useContext(Co);Pn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...d0(t||".",{relative:e})},s=Os();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ll([n,a.pathname])),uv(a)}function ele(t,{relative:e}={}){let n=A.useContext(A8);Pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=z8("useViewTransitionState"),i=d0(t,{relative:e});if(!n.isTransitioning)return!1;let a=vl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=vl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yw(i.pathname,s)!=null||yw(i.pathname,a)!=null}var V8=x$();const tle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nle=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),kL=t=>{const e=nle(t);return e.charAt(0).toUpperCase()+e.slice(1)},B8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),rle=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ile={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ale=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...ile,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:B8("lucide",i),...!a&&!rle(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const Ye=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(ale,{ref:a,iconNode:e,className:B8(`lucide-${tle(kL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=kL(t),n};const sle=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yl=Ye("arrow-left",sle);const ole=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],lle=Ye("arrow-right-left",ole);const cle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ule=Ye("arrow-right",cle);const dle=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],F8=Ye("bug",dle);const fle=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hle=Ye("calendar",fle);const ple=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],bw=Ye("chart-column",ple);const gle=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],U8=Ye("chart-pie",gle);const mle=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$8=Ye("check",mle);const vle=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yle=Ye("chevron-down",vle);const ble=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xle=Ye("chevron-left",ble);const wle=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hs=Ye("chevron-right",wle);const Sle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_le=Ye("circle-alert",Sle);const Ele=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Tle=Ye("circle-arrow-down",Ele);const Ale=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],kle=Ye("circle-arrow-up",Ale);const Cle=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xw=Ye("circle-check-big",Cle);const Ile=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ro=Ye("circle-check",Ile);const Ple=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CL=Ye("circle",Ple);const Nle=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dle=Ye("clock",Nle);const Ole=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Tm=Ye("dollar-sign",Ole);const Rle=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],XC=Ye("download",Rle);const Mle=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],jle=Ye("ellipsis",Mle);const zle=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q8=Ye("eye-off",zle);const Lle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G8=Ye("eye",Lle);const Vle=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ble=Ye("file-text",Vle);const Fle=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ule=Ye("folder",Fle);const $le=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H8=Ye("funnel",$le);const qle=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Hh=Ye("grip-vertical",qle);const Gle=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Hle=Ye("house",Gle);const Kle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],IL=Ye("info",Kle);const Wle=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Yle=Ye("list",Wle);const Xle=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],PL=Ye("loader",Xle);const Qle=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],NL=Ye("lock",Qle);const Zle=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jle=Ye("log-out",Zle);const ece=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QC=Ye("mail",ece);const tce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],DL=Ye("mic",tce);const nce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],rce=Ye("pause",nce);const ice=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ace=Ye("pen",ice);const sce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],ef=Ye("piggy-bank",sce);const oce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tf=Ye("plus",oce);const lce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kh=Ye("refresh-cw",lce);const cce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],uce=Ye("rotate-ccw",cce);const dce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],K8=Ye("search",dce);const fce=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hce=Ye("settings",fce);const pce=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],W8=Ye("skip-forward",pce);const gce=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zh=Ye("sparkles",gce);const mce=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],vce=Ye("tags",mce);const yce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bce=Ye("target",yce);const xce=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],dv=Ye("trash-2",xce);const wce=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Y8=Ye("trash",wce);const Sce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],cd=Ye("trending-up",Sce);const _ce=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yd=Ye("triangle-alert",_ce);const Ece=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Tce=Ye("undo-2",Ece);const Ace=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],kce=Ye("upload",Ace);const Cce=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ice=Ye("user-plus",Cce);const Pce=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nce=Ye("user",Pce);const Dce=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Wh=Ye("wallet",Dce);const Oce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f0=Ye("x",Oce),OL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},Rce=(t=>t?OL(t):OL),Mce=t=>t;function jce(t,e=Mce){const n=Dc.useSyncExternalStore(t.subscribe,Dc.useCallback(()=>e(t.getState()),[t,e]),Dc.useCallback(()=>e(t.getInitialState()),[t,e]));return Dc.useDebugValue(n),n}const RL=t=>{const e=Rce(t),n=r=>jce(e,r);return Object.assign(n,e),n},GN=(t=>t?RL(t):RL),ML={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},fv=new Map,Mb=t=>{const e=fv.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},zce=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=fv.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return fv.set(n.name,i),{type:"tracked",store:t,...i}},Lce=(t,e)=>{if(e===void 0)return;const n=fv.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&fv.delete(t))},Vce=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Bce=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(ML?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=zce(o,u,c);let g=!0;i.setState=((x,w,_)=>{const T=n(x,w);if(!g)return T;const I=_===void 0?{type:s||Vce(new Error().stack)||"anonymous"}:typeof _=="string"?{type:_}:_;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Mb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),Lce(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(..._)=>{(ML?"production":void 0)!=="production"&&_[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(..._)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return uA(x.payload,_=>{if(_.type==="__setState"){if(o===void 0){v(_.state);return}Object.keys(_.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=_.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(_)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Mb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Mb(c.name));case"ROLLBACK":return uA(x.state,_=>{if(o===void 0){v(_),f?.init(i.getState());return}v(_[o]),f?.init(Mb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return uA(x.state,_=>{if(o===void 0){v(_);return}JSON.stringify(i.getState())!==JSON.stringify(_[o])&&v(_[o])});case"IMPORT_STATE":{const{nextLiftedState:_}=x.payload,T=(w=_.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,_);return}case"PAUSE_RECORDING":return g=!g}return}}),b},Fce=Bce,uA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function Uce(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const ZC=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ZC(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ZC(r)(n)}}}},$ce=(t,e)=>(n,r,i)=>{let a={storage:Uce(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let v;const b=()=>{var x,w;if(!u)return;s=!1,o.forEach(T=>{var I;return T((I=r())!=null?I:g)});const _=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return ZC(u.getItem.bind(u))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const I=a.migrate(T.state,T.version);return I instanceof Promise?I.then(O=>[!0,O]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var I;const[O,D]=T;if(v=a.merge(D,(I=r())!=null?I:g),n(v,!0),O)return f()}).then(()=>{_?.(v,void 0),v=r(),s=!0,c.forEach(T=>T(v))}).catch(T=>{_?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),v||g},X8=$ce;var qce="firebase",Gce="12.6.0";Ss(qce,Gce,"app");var jL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fc,Q8;(function(){var t;function e(C,P){function R(){}R.prototype=P.prototype,C.F=P.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(j,L,B){for(var z=Array(arguments.length-2),W=2;W<arguments.length;W++)z[W-2]=arguments[W];return P.prototype[L].apply(j,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,P,R){R||(R=0);const j=Array(16);if(typeof P=="string")for(var L=0;L<16;++L)j[L]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(L=0;L<16;++L)j[L]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=C.g[0],R=C.g[1],L=C.g[2];let B=C.g[3],z;z=P+(B^R&(L^B))+j[0]+3614090360&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[1]+3905402710&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[2]+606105819&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[3]+3250441966&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[4]+4118548399&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[5]+1200080426&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[6]+2821735955&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[7]+4249261313&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[8]+1770035416&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[9]+2336552879&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[10]+4294925233&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[11]+2304563134&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[12]+1804603682&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[13]+4254626195&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[14]+2792965006&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[15]+1236535329&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(L^B&(R^L))+j[1]+4129170786&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[6]+3225465664&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[11]+643717713&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[0]+3921069994&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[5]+3593408605&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[10]+38016083&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[15]+3634488961&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[4]+3889429448&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[9]+568446438&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[14]+3275163606&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[3]+4107603335&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[8]+1163531501&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[13]+2850285829&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[2]+4243563512&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[7]+1735328473&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[12]+2368359562&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(R^L^B)+j[5]+4294588738&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[8]+2272392833&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[11]+1839030562&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[14]+4259657740&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[1]+2763975236&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[4]+1272893353&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[7]+4139469664&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[10]+3200236656&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[13]+681279174&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[0]+3936430074&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[3]+3572445317&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[6]+76029189&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[9]+3654602809&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[12]+3873151461&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[15]+530742520&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[2]+3299628645&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(L^(R|~B))+j[0]+4096336452&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[7]+1126891415&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[14]+2878612391&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[5]+4237533241&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[12]+1700485571&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[3]+2399980690&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[10]+4293915773&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[1]+2240044497&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[8]+1873313359&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[15]+4264355552&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[6]+2734768916&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[13]+1309151649&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[4]+4149444226&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[11]+3174756917&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[2]+718787259&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+P&4294967295,C.g[1]=C.g[1]+(L+(z<<21&4294967295|z>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.v=function(C,P){P===void 0&&(P=C.length);const R=P-this.blockSize,j=this.C;let L=this.h,B=0;for(;B<P;){if(L==0)for(;B<=R;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<P;)if(j[L++]=C.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<P;)if(j[L++]=C[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=P},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var P=1;P<C.length-8;++P)C[P]=0;P=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=P&255,P/=256;for(this.v(C),C=Array(16),P=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)C[P++]=this.g[R]>>>j&255;return C};function a(C,P){var R=o;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=P(C)}function s(C,P){this.h=P;const R=[];let j=!0;for(let L=C.length-1;L>=0;L--){const B=C[L]|0;j&&B==P||(R[L]=B,j=!1)}this.g=R}var o={};function c(C){return-128<=C&&C<128?a(C,function(P){return new s([P|0],P<0?-1:0)}):new s([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return w(u(-C));const P=[];let R=1;for(let j=0;C>=R;j++)P[j]=C/R|0,R*=4294967296;return new s(P,0)}function f(C,P){if(C.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(C.charAt(0)=="-")return w(f(C.substring(1),P));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(P,8));let j=h;for(let B=0;B<C.length;B+=8){var L=Math.min(8,C.length-B);const z=parseInt(C.substring(B,B+L),P);L<8?(L=u(Math.pow(P,L)),j=j.j(L).add(u(z))):(j=j.j(R),j=j.add(u(z)))}return j}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let C=0,P=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);C+=(j>=0?j:4294967296+j)*P,P*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(x(this))return"-"+w(this).toString(C);const P=u(Math.pow(C,6));var R=this;let j="";for(;;){const L=O(R,P).g;R=_(R,L.j(P));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=L,b(R))return B+j;for(;B.length<6;)B="0"+B;j=B+j}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let P=0;P<C.g.length;P++)if(C.g[P]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=_(this,C),x(C)?-1:b(C)?0:1};function w(C){const P=C.g.length,R=[];for(let j=0;j<P;j++)R[j]=~C.g[j];return new s(R,~C.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(C){const P=Math.max(this.g.length,C.g.length),R=[];let j=0;for(let L=0;L<=P;L++){let B=j+(this.i(L)&65535)+(C.i(L)&65535),z=(B>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);j=z>>>16,B&=65535,z&=65535,R[L]=z<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function _(C,P){return C.add(w(P))}t.j=function(C){if(b(this)||b(C))return h;if(x(this))return x(C)?w(this).j(w(C)):w(w(this).j(C));if(x(C))return w(this.j(w(C)));if(this.l(v)<0&&C.l(v)<0)return u(this.m()*C.m());const P=this.g.length+C.g.length,R=[];for(var j=0;j<2*P;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<C.g.length;L++){const B=this.i(j)>>>16,z=this.i(j)&65535,W=C.i(L)>>>16,Z=C.i(L)&65535;R[2*j+2*L]+=z*Z,T(R,2*j+2*L),R[2*j+2*L+1]+=B*Z,T(R,2*j+2*L+1),R[2*j+2*L+1]+=z*W,T(R,2*j+2*L+1),R[2*j+2*L+2]+=B*W,T(R,2*j+2*L+2)}for(C=0;C<P;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=P;C<2*P;C++)R[C]=0;return new s(R,0)};function T(C,P){for(;(C[P]&65535)!=C[P];)C[P+1]+=C[P]>>>16,C[P]&=65535,P++}function I(C,P){this.g=C,this.h=P}function O(C,P){if(b(P))throw Error("division by zero");if(b(C))return new I(h,h);if(x(C))return P=O(w(C),P),new I(w(P.g),w(P.h));if(x(P))return P=O(C,w(P)),new I(w(P.g),P.h);if(C.g.length>30){if(x(C)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var R=g,j=P;j.l(C)<=0;)R=D(R),j=D(j);var L=N(R,1),B=N(j,1);for(j=N(j,2),R=N(R,2);!b(j);){var z=B.add(j);z.l(C)<=0&&(L=L.add(R),B=z),j=N(j,1),R=N(R,1)}return P=_(C,L.j(P)),new I(L,P)}for(L=h;C.l(P)>=0;){for(R=Math.max(1,Math.floor(C.m()/P.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),B=u(R),z=B.j(P);x(z)||z.l(C)>0;)R-=j,B=u(R),z=B.j(P);b(B)&&(B=g),L=L.add(B),C=_(C,z)}return new I(L,C)}t.B=function(C){return O(this,C).h},t.and=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)&C.i(j);return new s(R,this.h&C.h)},t.or=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)|C.i(j);return new s(R,this.h|C.h)},t.xor=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)^C.i(j);return new s(R,this.h^C.h)};function D(C){const P=C.g.length+1,R=[];for(let j=0;j<P;j++)R[j]=C.i(j)<<1|C.i(j-1)>>>31;return new s(R,C.h)}function N(C,P){const R=P>>5;P%=32;const j=C.g.length-R,L=[];for(let B=0;B<j;B++)L[B]=P>0?C.i(B+R)>>>P|C.i(B+R+1)<<32-P:C.i(B+R);return new s(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Q8=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Fc=s}).apply(typeof jL<"u"?jL:typeof self<"u"?self:typeof window<"u"?window:{});var jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Z8,Am,J8,Bx,JC,eq,tq,nq;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof jb=="object"&&jb];for(var M=0;M<S.length;++M){var F=S[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(S,M){if(M)e:{var F=r;S=S.split(".");for(var H=0;H<S.length-1;H++){var pe=S[H];if(!(pe in F))break e;F=F[pe]}S=S[S.length-1],H=F[S],M=M(H),M!=H&&M!=null&&e(F,S,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(M){var F=[],H;for(H in M)Object.prototype.hasOwnProperty.call(M,H)&&F.push([H,M[H]]);return F}});var a=a||{},s=this||self;function o(S){var M=typeof S;return M=="object"&&S!=null||M=="function"}function c(S,M,F){return S.call.apply(S.bind,arguments)}function u(S,M,F){return u=c,u.apply(null,arguments)}function f(S,M){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),S.apply(this,H)}}function h(S,M){function F(){}F.prototype=M.prototype,S.Z=M.prototype,S.prototype=new F,S.prototype.constructor=S,S.Ob=function(H,pe,xe){for(var Re=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Re[dt-2]=arguments[dt];return M.prototype[pe].apply(H,Re)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function v(S){const M=S.length;if(M>0){const F=Array(M);for(let H=0;H<M;H++)F[H]=S[H];return F}return[]}function b(S,M){for(let H=1;H<arguments.length;H++){const pe=arguments[H];var F=typeof pe;if(F=F!="object"?F:pe?Array.isArray(pe)?"array":F:"null",F=="array"||F=="object"&&typeof pe.length=="number"){F=S.length||0;const xe=pe.length||0;S.length=F+xe;for(let Re=0;Re<xe;Re++)S[F+Re]=pe[Re]}else S.push(pe)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(S){s.setTimeout(()=>{throw S},0)}function _(){var S=C;let M=null;return S.g&&(M=S.g,S.g=S.g.next,S.g||(S.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const H=I.get();H.set(M,F),this.h?this.h.next=H:this.g=H,this.h=H}}var I=new x(()=>new O,S=>S.reset());class O{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let D,N=!1,C=new T,P=()=>{const S=Promise.resolve(void 0);D=()=>{S.then(R)}};function R(){for(var S;S=_();){try{S.h.call(S.g)}catch(F){w(F)}var M=I;M.j(S),M.h<100&&(M.h++,S.next=M.g,M.g=S)}N=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(S,M){this.type=S,this.g=this.target=M,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var S=!1,M=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return S})();function z(S){return/^[\s\xa0]*$/.test(S)}function W(S,M){L.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,M)}h(W,L),W.prototype.init=function(S,M){const F=this.type=S.type,H=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=M,M=S.relatedTarget,M||(F=="mouseover"?M=S.fromElement:F=="mouseout"&&(M=S.toElement)),this.relatedTarget=M,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),G=0;function Y(S,M,F,H,pe){this.listener=S,this.proxy=null,this.src=M,this.type=F,this.capture=!!H,this.ha=pe,this.key=++G,this.da=this.fa=!1}function Q(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ee(S,M,F){for(const H in S)M.call(F,S[H],H,S)}function te(S,M){for(const F in S)M.call(void 0,S[F],F,S)}function U(S){const M={};for(const F in S)M[F]=S[F];return M}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(S,M){let F,H;for(let pe=1;pe<arguments.length;pe++){H=arguments[pe];for(F in H)S[F]=H[F];for(let xe=0;xe<X.length;xe++)F=X[xe],Object.prototype.hasOwnProperty.call(H,F)&&(S[F]=H[F])}}function K(S){this.src=S,this.g={},this.h=0}K.prototype.add=function(S,M,F,H,pe){const xe=S.toString();S=this.g[xe],S||(S=this.g[xe]=[],this.h++);const Re=ie(S,M,H,pe);return Re>-1?(M=S[Re],F||(M.fa=!1)):(M=new Y(M,this.src,xe,!!H,pe),M.fa=F,S.push(M)),M};function ue(S,M){const F=M.type;if(F in S.g){var H=S.g[F],pe=Array.prototype.indexOf.call(H,M,void 0),xe;(xe=pe>=0)&&Array.prototype.splice.call(H,pe,1),xe&&(Q(M),S.g[F].length==0&&(delete S.g[F],S.h--))}}function ie(S,M,F,H){for(let pe=0;pe<S.length;++pe){const xe=S[pe];if(!xe.da&&xe.listener==M&&xe.capture==!!F&&xe.ha==H)return pe}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),_e={};function se(S,M,F,H,pe){if(Array.isArray(M)){for(let xe=0;xe<M.length;xe++)se(S,M[xe],F,H,pe);return null}return F=rt(F),S&&S[Z]?S.J(M,F,o(H)?!!H.capture:!1,pe):ge(S,M,F,!1,H,pe)}function ge(S,M,F,H,pe,xe){if(!M)throw Error("Invalid event type");const Re=o(pe)?!!pe.capture:!!pe;let dt=ze(S);if(dt||(S[oe]=dt=new K(S)),F=dt.add(M,F,H,Re,xe),F.proxy)return F;if(H=de(),F.proxy=H,H.src=S,H.listener=F,S.addEventListener)B||(pe=Re),pe===void 0&&(pe=!1),S.addEventListener(M.toString(),H,pe);else if(S.attachEvent)S.attachEvent(Ce(M.toString()),H);else if(S.addListener&&S.removeListener)S.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function de(){function S(F){return M.call(S.src,S.listener,F)}const M=Oe;return S}function J(S,M,F,H,pe){if(Array.isArray(M))for(var xe=0;xe<M.length;xe++)J(S,M[xe],F,H,pe);else H=o(H)?!!H.capture:!!H,F=rt(F),S&&S[Z]?(S=S.i,xe=String(M).toString(),xe in S.g&&(M=S.g[xe],F=ie(M,F,H,pe),F>-1&&(Q(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete S.g[xe],S.h--)))):S&&(S=ze(S))&&(M=S.g[M.toString()],S=-1,M&&(S=ie(M,F,H,pe)),(F=S>-1?M[S]:null)&&Se(F))}function Se(S){if(typeof S!="number"&&S&&!S.da){var M=S.src;if(M&&M[Z])ue(M.i,S);else{var F=S.type,H=S.proxy;M.removeEventListener?M.removeEventListener(F,H,S.capture):M.detachEvent?M.detachEvent(Ce(F),H):M.addListener&&M.removeListener&&M.removeListener(H),(F=ze(M))?(ue(F,S),F.h==0&&(F.src=null,M[oe]=null)):Q(S)}}}function Ce(S){return S in _e?_e[S]:_e[S]="on"+S}function Oe(S,M){if(S.da)S=!0;else{M=new W(M,this);const F=S.listener,H=S.ha||S.src;S.fa&&Se(S),S=F.call(H,M)}return S}function ze(S){return S=S[oe],S instanceof K?S:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function rt(S){return typeof S=="function"?S:(S[Ve]||(S[Ve]=function(M){return S.handleEvent(M)}),S[Ve])}function Be(){j.call(this),this.i=new K(this),this.M=this,this.G=null}h(Be,j),Be.prototype[Z]=!0,Be.prototype.removeEventListener=function(S,M,F,H){J(this,S,M,F,H)};function nt(S,M){var F,H=S.G;if(H)for(F=[];H;H=H.G)F.push(H);if(S=S.M,H=M.type||M,typeof M=="string")M=new L(M,S);else if(M instanceof L)M.target=M.target||S;else{var pe=M;M=new L(H,S),ne(M,pe)}pe=!0;let xe,Re;if(F)for(Re=F.length-1;Re>=0;Re--)xe=M.g=F[Re],pe=Bt(xe,H,!0,M)&&pe;if(xe=M.g=S,pe=Bt(xe,H,!0,M)&&pe,pe=Bt(xe,H,!1,M)&&pe,F)for(Re=0;Re<F.length;Re++)xe=M.g=F[Re],pe=Bt(xe,H,!1,M)&&pe}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var S=this.i;for(const M in S.g){const F=S.g[M];for(let H=0;H<F.length;H++)Q(F[H]);delete S.g[M],S.h--}}this.G=null},Be.prototype.J=function(S,M,F,H){return this.i.add(String(S),M,!1,F,H)},Be.prototype.K=function(S,M,F,H){return this.i.add(String(S),M,!0,F,H)};function Bt(S,M,F,H){if(M=S.i.g[String(M)],!M)return!0;M=M.concat();let pe=!0;for(let xe=0;xe<M.length;++xe){const Re=M[xe];if(Re&&!Re.da&&Re.capture==F){const dt=Re.listener,qn=Re.ha||Re.src;Re.fa&&ue(S.i,Re),pe=dt.call(qn,H)!==!1&&pe}}return pe&&!H.defaultPrevented}function Bn(S,M){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=u(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(S,M||0)}function Tn(S){S.g=Bn(()=>{S.g=null,S.i&&(S.i=!1,Tn(S))},S.l);const M=S.h;S.h=null,S.m.apply(null,M)}class bt extends j{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Tn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(S){j.call(this),this.h=S,this.g={}}h(Ft,j);var Me=[];function ut(S){ee(S.g,function(M,F){this.g.hasOwnProperty(F)&&Se(M)},S),S.g={}}Ft.prototype.N=function(){Ft.Z.N.call(this),ut(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=s.JSON.stringify,gr=s.JSON.parse,Fn=class{stringify(S){return s.JSON.stringify(S,void 0)}parse(S){return s.JSON.parse(S,void 0)}};function Un(){}function mr(){}var Dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){L.call(this,"d")}h(at,L);function ln(){L.call(this,"c")}h(ln,L);var mt={},Gr=null;function Xi(){return Gr=Gr||new Be}mt.Ia="serverreachability";function Ms(S){L.call(this,mt.Ia,S)}h(Ms,L);function vt(S){const M=Xi();nt(M,new Ms(M))}mt.STAT_EVENT="statevent";function dn(S,M){L.call(this,mt.STAT_EVENT,S),this.stat=M}h(dn,L);function rn(S){const M=Xi();nt(M,new dn(M,S))}mt.Ja="timingevent";function $n(S,M){L.call(this,mt.Ja,S),this.size=M}h($n,L);function Zn(S,M){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){S()},M)}function vr(){this.g=!0}vr.prototype.ua=function(){this.g=!1};function Z_(S,M,F,H,pe,xe){S.info(function(){if(S.g)if(xe){var Re="",dt=xe.split("&");for(let jt=0;jt<dt.length;jt++){var qn=dt[jt].split("=");if(qn.length>1){const yn=qn[0];qn=qn[1];const Aa=yn.split("_");Re=Aa.length>=2&&Aa[1]=="type"?Re+(yn+"="+qn+"&"):Re+(yn+"=redacted&")}}}else Re=null;else Re=xe;return"XMLHTTP REQ ("+H+") [attempt "+pe+"]: "+M+`
`+F+`
`+Re})}function uy(S,M,F,H,pe,xe,Re){S.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+pe+"]: "+M+`
`+F+`
`+xe+" "+Re})}function js(S,M,F,H){S.info(function(){return"XMLHTTP TEXT ("+M+"): "+J_(S,F)+(H?" "+H:"")})}function mu(S,M){S.info(function(){return"TIMEOUT: "+M})}vr.prototype.info=function(){};function J_(S,M){if(!S.g)return M;if(!M)return null;try{const xe=JSON.parse(M);if(xe){for(S=0;S<xe.length;S++)if(Array.isArray(xe[S])){var F=xe[S];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var pe=H[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let Re=1;Re<H.length;Re++)H[Re]=""}}}}return An(xe)}catch{return M}}var vu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ig={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ag;function yu(){}h(yu,Un),yu.prototype.g=function(){return new XMLHttpRequest},ag=new yu;function Do(S){return encodeURIComponent(String(S))}function dy(S){var M=1;S=S.split(":");const F=[];for(;M>0&&S.length;)F.push(S.shift()),M--;return S.length&&F.push(S.join(":")),F}function rs(S,M,F,H){this.j=S,this.i=M,this.l=F,this.S=H||1,this.V=new Ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new is}function is(){this.i=null,this.g="",this.h=!1}var Jn={},Rr={};function zs(S,M,F){S.M=1,S.A=bu(tr(M)),S.u=F,S.R=!0,df(S,null)}function df(S,M){S.F=Date.now(),Ls(S),S.B=tr(S.A);var F=S.B,H=S.S;Array.isArray(H)||(H=[String(H)]),gf(F.i,"t",H),S.C=0,F=S.j.L,S.h=new is,S.g=Ay(S.j,F?M:null,!S.u),S.P>0&&(S.O=new bt(u(S.Y,S,S.g),S.P)),M=S.V,F=S.g,H=S.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(Me[0]=pe.toString()),pe=Me);for(let xe=0;xe<pe.length;xe++){const Re=se(F,pe[xe],H||M.handleEvent,!1,M.h||M);if(!Re)break;M.g[Re.key]=Re}M=S.J?U(S.J):{},S.u?(S.v||(S.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,M)):(S.v="GET",S.g.ea(S.B,S.v,null,M)),vt(),Z_(S.i,S.v,S.B,S.l,S.S,S.u)}rs.prototype.ba=function(S){S=S.target;const M=this.O;M&&os(S)==3?M.j():this.Y(S)},rs.prototype.Y=function(S){try{if(S==this.g)e:{const dt=os(this.g),qn=this.g.ya(),jt=this.g.ca();if(!(dt<3)&&(dt!=3||this.g&&(this.h.h||this.g.la()||Hr(this.g)))){this.K||dt!=4||qn==7||(qn==8||jt<=0?vt(3):vt(2)),Vs(this);var M=this.g.ca();this.X=M;var F=eE(this);if(this.o=M==200,uy(this.i,this.v,this.B,this.l,this.S,dt,M),this.o){if(this.U&&!this.L){t:{if(this.g){var H,pe=this.g;if((H=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var xe=H;break t}}xe=null}if(S=xe)js(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bs(this,S);else{this.o=!1,this.m=3,rn(12),Qi(this),_a(this);break e}}if(this.R){S=!0;let yn;for(;!this.K&&this.C<F.length;)if(yn=hy(this,F),yn==Rr){dt==4&&(this.m=4,rn(14),S=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Jn){this.m=4,rn(15),js(this.i,this.l,F,"[Invalid Chunk]"),S=!1;break}else js(this.i,this.l,yn,null),Bs(this,yn);if(fy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.m=1,rn(16),S=!1),this.o=this.o&&S,!S)js(this.i,this.l,F,"[Invalid Chunked Response]"),Qi(this),_a(this);else if(F.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),xg(Re),Re.P=!0,rn(11))}}else js(this.i,this.l,F,null),Bs(this,F);dt==4&&Qi(this),this.o&&!this.K&&(dt==4?Sy(this.j,this):(this.o=!1,Ls(this)))}else Ro(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Qi(this),_a(this)}}}catch{}finally{}};function eE(S){if(!fy(S))return S.g.la();const M=Hr(S.g);if(M==="")return"";let F="";const H=M.length,pe=os(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return Qi(S),_a(S),"";S.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)S.h.h=!0,F+=S.h.i.decode(M[xe],{stream:!(pe&&xe==H-1)});return M.length=0,S.h.g+=F,S.C=0,S.h.g}function fy(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function hy(S,M){var F=S.C,H=M.indexOf(`
`,F);return H==-1?Rr:(F=Number(M.substring(F,H)),isNaN(F)?Jn:(H+=1,H+F>M.length?Rr:(M=M.slice(H,H+F),S.C=H+F,M)))}rs.prototype.cancel=function(){this.K=!0,Qi(this)};function Ls(S){S.T=Date.now()+S.H,ff(S,S.H)}function ff(S,M){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Zn(u(S.aa,S),M)}function Vs(S){S.D&&(s.clearTimeout(S.D),S.D=null)}rs.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(mu(this.i,this.B),this.M!=2&&(vt(),rn(17)),Qi(this),this.m=2,_a(this)):ff(this,this.T-S)};function _a(S){S.j.I==0||S.K||Sy(S.j,S)}function Qi(S){Vs(S);var M=S.O;M&&typeof M.dispose=="function"&&M.dispose(),S.O=null,ut(S.V),S.g&&(M=S.g,S.g=null,M.abort(),M.dispose())}function Bs(S,M){try{var F=S.j;if(F.I!=0&&(F.g==S||Us(F.h,S))){if(!S.L&&Us(F.h,S)&&F.I==3){try{var H=F.Ba.g.parse(M)}catch{H=null}if(Array.isArray(H)&&H.length==3){var pe=H;if(pe[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<S.F)xf(F),Wl(F);else break e;Au(F),rn(18)}}else F.xa=pe[1],0<F.xa-F.K&&pe[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=Zn(u(F.Va,F),6e3));Fs(F.h)<=1&&F.ta&&(F.ta=void 0)}else Ws(F,11)}else if((S.L||F.g==S)&&xf(F),!z(M))for(pe=F.Ba.g.parse(M),M=0;M<pe.length;M++){let jt=pe[M];const yn=jt[0];if(!(yn<=F.K))if(F.K=yn,jt=jt[1],F.I==2)if(jt[0]=="c"){F.M=jt[1],F.ba=jt[2];const Aa=jt[3];Aa!=null&&(F.ka=Aa,F.j.info("VER="+F.ka));const Ys=jt[4];Ys!=null&&(F.za=Ys,F.j.info("SVER="+F.za));const ls=jt[5];ls!=null&&typeof ls=="number"&&ls>0&&(H=1.5*ls,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const cs=S.g;if(cs){const ku=cs.g?cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ku){var xe=H.h;xe.g||ku.indexOf("spdy")==-1&&ku.indexOf("quic")==-1&&ku.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(lg(xe,xe.h),xe.h=null))}if(H.G){const wf=cs.g?cs.g.getResponseHeader("X-HTTP-Session-Id"):null;wf&&(H.wa=wf,Ut(H.J,H.G,wf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-S.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var Re=S;if(H.na=Ty(H,H.L?H.ba:null,H.W),Re.L){cg(H.h,Re);var dt=Re,qn=H.O;qn&&(dt.H=qn),dt.D&&(Vs(dt),Ls(dt)),H.g=Re}else xy(H);F.i.length>0&&Ks(F)}else jt[0]!="stop"&&jt[0]!="close"||Ws(F,7);else F.I==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Ws(F,7):yg(F):jt[0]!="noop"&&F.l&&F.l.qa(jt),F.A=0)}}vt(4)}catch{}}var er=class{constructor(S,M){this.g=S,this.map=M}};function sg(S){this.l=S||10,s.PerformanceNavigationTiming?(S=s.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function og(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Fs(S){return S.h?1:S.g?S.g.size:0}function Us(S,M){return S.h?S.h==M:S.g?S.g.has(M):!1}function lg(S,M){S.g?S.g.add(M):S.h=M}function cg(S,M){S.h&&S.h==M?S.h=null:S.g&&S.g.has(M)&&S.g.delete(M)}sg.prototype.cancel=function(){if(this.i=ug(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ug(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let M=S.i;for(const F of S.g.values())M=M.concat(F.G);return M}return v(S.i)}var py=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hf(S,M){if(S){S=S.split("&");for(let F=0;F<S.length;F++){const H=S[F].indexOf("=");let pe,xe=null;H>=0?(pe=S[F].substring(0,H),xe=S[F].substring(H+1)):pe=S[F],M(pe,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Zi(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;S instanceof Zi?(this.l=S.l,Mr(this,S.j),this.o=S.o,this.g=S.g,Fl(this,S.u),this.h=S.h,dg(this,yy(S.i)),this.m=S.m):S&&(M=String(S).match(py))?(this.l=!1,Mr(this,M[1]||"",!0),this.o=$s(M[2]||""),this.g=$s(M[3]||"",!0),Fl(this,M[4]),this.h=$s(M[5]||"",!0),dg(this,M[6]||"",!0),this.m=$s(M[7]||"")):(this.l=!1,this.i=new $l(null,this.l))}Zi.prototype.toString=function(){const S=[];var M=this.j;M&&S.push(xu(M,pf,!0),":");var F=this.g;return(F||M=="file")&&(S.push("//"),(M=this.o)&&S.push(xu(M,pf,!0),"@"),S.push(Do(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&S.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&S.push("/"),S.push(xu(F,F.charAt(0)=="/"?fg:gy,!0))),(F=this.i.toString())&&S.push("?",F),(F=this.m)&&S.push("#",xu(F,my)),S.join("")},Zi.prototype.resolve=function(S){const M=tr(this);let F=!!S.j;F?Mr(M,S.j):F=!!S.o,F?M.o=S.o:F=!!S.g,F?M.g=S.g:F=S.u!=null;var H=S.h;if(F)Fl(M,S.u);else if(F=!!S.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var pe=M.h.lastIndexOf("/");pe!=-1&&(H=M.h.slice(0,pe+1)+H)}if(pe=H,pe==".."||pe==".")H="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){H=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const xe=[];for(let Re=0;Re<pe.length;){const dt=pe[Re++];dt=="."?H&&Re==pe.length&&xe.push(""):dt==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&Re==pe.length&&xe.push("")):(xe.push(dt),H=!0)}H=xe.join("/")}else H=pe}return F?M.h=H:F=S.i.toString()!=="",F?dg(M,yy(S.i)):F=!!S.m,F&&(M.m=S.m),M};function tr(S){return new Zi(S)}function Mr(S,M,F){S.j=F?$s(M,!0):M,S.j&&(S.j=S.j.replace(/:$/,""))}function Fl(S,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);S.u=M}else S.u=null}function dg(S,M,F){M instanceof $l?(S.i=M,mf(S.i,S.l)):(F||(M=xu(M,Ul)),S.i=new $l(M,S.l))}function Ut(S,M,F){S.i.set(M,F)}function bu(S){return Ut(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function $s(S,M){return S?M?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function xu(S,M,F){return typeof S=="string"?(S=encodeURI(S).replace(M,Ii),F&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Ii(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var pf=/[#\/\?@]/g,gy=/[#\?:]/g,fg=/[#\?]/g,Ul=/[#\?@]/g,my=/#/g;function $l(S,M){this.h=this.g=null,this.i=S||null,this.j=!!M}function Pi(S){S.g||(S.g=new Map,S.h=0,S.i&&hf(S.i,function(M,F){S.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=$l.prototype,t.add=function(S,M){Pi(this),this.i=null,S=ql(this,S);let F=this.g.get(S);return F||this.g.set(S,F=[]),F.push(M),this.h+=1,this};function vy(S,M){Pi(S),M=ql(S,M),S.g.has(M)&&(S.i=null,S.h-=S.g.get(M).length,S.g.delete(M))}function hg(S,M){return Pi(S),M=ql(S,M),S.g.has(M)}t.forEach=function(S,M){Pi(this),this.g.forEach(function(F,H){F.forEach(function(pe){S.call(M,pe,H,this)},this)},this)};function pg(S,M){Pi(S);let F=[];if(typeof M=="string")hg(S,M)&&(F=F.concat(S.g.get(ql(S,M))));else for(S=Array.from(S.g.values()),M=0;M<S.length;M++)F=F.concat(S[M]);return F}t.set=function(S,M){return Pi(this),this.i=null,S=ql(this,S),hg(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[M]),this.h+=1,this},t.get=function(S,M){return S?(S=pg(this,S),S.length>0?String(S[0]):M):M};function gf(S,M,F){vy(S,M),F.length>0&&(S.i=null,S.g.set(ql(S,M),v(F)),S.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],M=Array.from(this.g.keys());for(let H=0;H<M.length;H++){var F=M[H];const pe=Do(F);F=pg(this,F);for(let xe=0;xe<F.length;xe++){let Re=pe;F[xe]!==""&&(Re+="="+Do(F[xe])),S.push(Re)}}return this.i=S.join("&")};function yy(S){const M=new $l;return M.i=S.i,S.g&&(M.g=new Map(S.g),M.h=S.h),M}function ql(S,M){return M=String(M),S.j&&(M=M.toLowerCase()),M}function mf(S,M){M&&!S.j&&(Pi(S),S.i=null,S.g.forEach(function(F,H){const pe=H.toLowerCase();H!=pe&&(vy(this,H),gf(this,pe,F))},S)),S.j=M}function as(S,M){const F=new vr;if(s.Image){const H=new Image;H.onload=f(Ea,F,"TestLoadImage: loaded",!0,M,H),H.onerror=f(Ea,F,"TestLoadImage: error",!1,M,H),H.onabort=f(Ea,F,"TestLoadImage: abort",!1,M,H),H.ontimeout=f(Ea,F,"TestLoadImage: timeout",!1,M,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=S}else M(!1)}function gg(S,M){const F=new vr,H=new AbortController,pe=setTimeout(()=>{H.abort(),Ea(F,"TestPingServer: timeout",!1,M)},1e4);fetch(S,{signal:H.signal}).then(xe=>{clearTimeout(pe),xe.ok?Ea(F,"TestPingServer: ok",!0,M):Ea(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(pe),Ea(F,"TestPingServer: error",!1,M)})}function Ea(S,M,F,H,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),H(F)}catch{}}function Gl(){this.g=new Fn}function qs(S){this.i=S.Sb||null,this.h=S.ab||!1}h(qs,Un),qs.prototype.g=function(){return new wu(this.i,this.h)};function wu(S,M){Be.call(this),this.H=S,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(wu,Be),t=wu.prototype,t.open=function(S,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=M,this.readyState=1,ss(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(M.body=S),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vf(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function vf(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var M=S.value?S.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!S.done}))&&(this.response=this.responseText+=M)}S.done?Hl(this):ss(this),this.readyState==3&&vf(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Hl(this))},t.Na=function(S){this.g&&(this.response=S,Hl(this))},t.ga=function(){this.g&&Hl(this)};function Hl(S){S.readyState=4,S.l=null,S.j=null,S.B=null,ss(S)}t.setRequestHeader=function(S,M){this.A.append(S,M)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,S.push(F[0]+": "+F[1]),F=M.next();return S.join(`\r
`)};function ss(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Ta(S){let M="";return ee(S,function(F,H){M+=H,M+=":",M+=F,M+=`\r
`}),M}function Su(S,M,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=Ta(F),typeof S=="string"?F!=null&&Do(F):Ut(S,M,F))}function Yt(S){Be.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Yt,Be);var Gs=/^https?$/i,mg=["POST","PUT"];t=Yt.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,M,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);M=M?M.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ag.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(S),!0),this.B=!1}catch(xe){_u(this,xe);return}if(S=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var pe in H)F.set(pe,H[pe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),pe=s.FormData&&S instanceof s.FormData,!(Array.prototype.indexOf.call(mg,M,void 0)>=0)||H||pe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Re]of F)this.g.setRequestHeader(xe,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(xe){_u(this,xe)}};function _u(S,M){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=M,S.o=5,vg(S),Oo(S)}function vg(S){S.A||(S.A=!0,nt(S,"complete"),nt(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,nt(this,"complete"),nt(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Eu(this):this.Xa())},t.Xa=function(){Eu(this)};function Eu(S){if(S.h&&typeof a<"u"){if(S.v&&os(S)==4)setTimeout(S.Ca.bind(S),0);else if(nt(S,"readystatechange"),os(S)==4){S.h=!1;try{const xe=S.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var H;if(H=xe===0){let Re=String(S.D).match(py)[1]||null;!Re&&s.self&&s.self.location&&(Re=s.self.location.protocol.slice(0,-1)),H=!Gs.test(Re?Re.toLowerCase():"")}F=H}if(F)nt(S,"complete"),nt(S,"success");else{S.o=6;try{var pe=os(S)>2?S.g.statusText:""}catch{pe=""}S.l=pe+" ["+S.ca()+"]",vg(S)}}finally{Oo(S)}}}}function Oo(S,M){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const F=S.g;S.g=null,M||nt(S,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function os(S){return S.g?S.g.readyState:0}t.ca=function(){try{return os(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var M=this.g.responseText;return S&&M.indexOf(S)==0&&(M=M.substring(S.length)),gr(M)}};function Hr(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ro(S){const M={};S=(S.g&&os(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<S.length;H++){if(z(S[H]))continue;var F=dy(S[H]);const pe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=M[pe]||[];M[pe]=xe,xe.push(F)}te(M,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(S,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[S]||M}function Kl(S){this.za=0,this.i=[],this.j=new vr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,S),this.Za=Hs("retryDelaySeedMs",1e4,S),this.Ta=Hs("forwardChannelMaxRetries",2,S),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new sg(S&&S.concurrentRequestLimit),this.Ba=new Gl,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Kl.prototype,t.ka=8,t.I=1,t.connect=function(S,M,F,H){rn(0),this.W=S,this.H=M||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=Ty(this,null,this.W),Ks(this)};function yg(S){if(yf(S),S.I==3){var M=S.V++,F=tr(S.J);if(Ut(F,"SID",S.M),Ut(F,"RID",M),Ut(F,"TYPE","terminate"),Tu(S,F),M=new rs(S,S.j,M),M.M=2,M.A=bu(tr(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=Ay(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Ls(M)}Ey(S)}function Wl(S){S.g&&(xg(S),S.g.cancel(),S.g=null)}function yf(S){Wl(S),S.v&&(s.clearTimeout(S.v),S.v=null),xf(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&s.clearTimeout(S.m),S.m=null)}function Ks(S){if(!og(S.h)&&!S.m){S.m=!0;var M=S.Ea;D||P(),N||(D(),N=!0),C.add(M,S),S.D=0}}function bf(S,M){return Fs(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=M.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Zn(u(S.Ea,S,M),_y(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const pe=new rs(this,this.j,S);let xe=this.o;if(this.U&&(xe?(xe=U(xe),ne(xe,this.U)):xe=this.U),this.u!==null||this.R||(pe.J=xe,xe=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(M+=H,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=by(this,pe,M),F=tr(this.J),Ut(F,"RID",S),Ut(F,"CVER",22),this.G&&Ut(F,"X-HTTP-Session-Id",this.G),Tu(this,F),xe&&(this.R?M="headers="+Do(Ta(xe))+"&"+M:this.u&&Su(F,this.u,xe)),lg(this.h,pe),this.Ra&&Ut(F,"TYPE","init"),this.S?(Ut(F,"$req",M),Ut(F,"SID","null"),pe.U=!0,zs(pe,F,null)):zs(pe,F,M),this.I=2}}else this.I==3&&(S?bg(this,S):this.i.length==0||og(this.h)||bg(this))};function bg(S,M){var F;M?F=M.l:F=S.V++;const H=tr(S.J);Ut(H,"SID",S.M),Ut(H,"RID",F),Ut(H,"AID",S.K),Tu(S,H),S.u&&S.o&&Su(H,S.u,S.o),F=new rs(S,S.j,F,S.D+1),S.u===null&&(F.J=S.o),M&&(S.i=M.G.concat(S.i)),M=by(S,F,1e3),F.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),lg(S.h,F),zs(F,H,M)}function Tu(S,M){S.H&&ee(S.H,function(F,H){Ut(M,H,F)}),S.l&&ee({},function(F,H){Ut(M,H,F)})}function by(S,M,F){F=Math.min(S.i.length,F);const H=S.l?u(S.l.Ka,S.l,S):null;e:{var pe=S.i;let dt=-1;for(;;){const qn=["count="+F];dt==-1?F>0?(dt=pe[0].g,qn.push("ofs="+dt)):dt=0:qn.push("ofs="+dt);let jt=!0;for(let yn=0;yn<F;yn++){var xe=pe[yn].g;const Aa=pe[yn].map;if(xe-=dt,xe<0)dt=Math.max(0,pe[yn].g-100),jt=!1;else try{xe="req"+xe+"_"||"";try{var Re=Aa instanceof Map?Aa:Object.entries(Aa);for(const[Ys,ls]of Re){let cs=ls;o(ls)&&(cs=An(ls)),qn.push(xe+Ys+"="+encodeURIComponent(cs))}}catch(Ys){throw qn.push(xe+"type="+encodeURIComponent("_badmap")),Ys}}catch{H&&H(Aa)}}if(jt){Re=qn.join("&");break e}}Re=void 0}return S=S.i.splice(0,F),M.G=S,Re}function xy(S){if(!S.g&&!S.v){S.Y=1;var M=S.Da;D||P(),N||(D(),N=!0),C.add(M,S),S.A=0}}function Au(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Zn(u(S.Da,S),_y(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,wy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Zn(u(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Wl(this),wy(this))};function xg(S){S.B!=null&&(s.clearTimeout(S.B),S.B=null)}function wy(S){S.g=new rs(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var M=tr(S.na);Ut(M,"RID","rpc"),Ut(M,"SID",S.M),Ut(M,"AID",S.K),Ut(M,"CI",S.F?"0":"1"),!S.F&&S.ia&&Ut(M,"TO",S.ia),Ut(M,"TYPE","xmlhttp"),Tu(S,M),S.u&&S.o&&Su(M,S.u,S.o),S.O&&(S.g.H=S.O);var F=S.g;S=S.ba,F.M=1,F.A=bu(tr(M)),F.u=null,F.R=!0,df(F,S)}t.Va=function(){this.C!=null&&(this.C=null,Wl(this),Au(this),rn(19))};function xf(S){S.C!=null&&(s.clearTimeout(S.C),S.C=null)}function Sy(S,M){var F=null;if(S.g==M){xf(S),xg(S),S.g=null;var H=2}else if(Us(S.h,M))F=M.G,cg(S.h,M),H=1;else return;if(S.I!=0){if(M.o)if(H==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var pe=S.D;H=Xi(),nt(H,new $n(H,F)),Ks(S)}else xy(S);else if(pe=M.m,pe==3||pe==0&&M.X>0||!(H==1&&bf(S,M)||H==2&&Au(S)))switch(F&&F.length>0&&(M=S.h,M.i=M.i.concat(F)),pe){case 1:Ws(S,5);break;case 4:Ws(S,10);break;case 3:Ws(S,6);break;default:Ws(S,2)}}}function _y(S,M){let F=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(F*=2),F*M}function Ws(S,M){if(S.j.info("Error code "+M),M==2){var F=u(S.bb,S),H=S.Ua;const pe=!H;H=new Zi(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Mr(H,"https"),bu(H),pe?as(H.toString(),F):gg(H.toString(),F)}else rn(2);S.I=0,S.l&&S.l.pa(M),Ey(S),yf(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Ey(S){if(S.I=0,S.ja=[],S.l){const M=ug(S.h);(M.length!=0||S.i.length!=0)&&(b(S.ja,M),b(S.ja,S.i),S.h.i.length=0,v(S.i),S.i.length=0),S.l.oa()}}function Ty(S,M,F){var H=F instanceof Zi?tr(F):new Zi(F);if(H.g!="")M&&(H.g=M+"."+H.g),Fl(H,H.u);else{var pe=s.location;H=pe.protocol,M=M?M+"."+pe.hostname:pe.hostname,pe=+pe.port;const xe=new Zi(null);H&&Mr(xe,H),M&&(xe.g=M),pe&&Fl(xe,pe),F&&(xe.h=F),H=xe}return F=S.G,M=S.wa,F&&M&&Ut(H,F,M),Ut(H,"VER",S.ka),Tu(S,H),H}function Ay(S,M,F){if(M&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=S.Aa&&!S.ma?new Yt(new qs({ab:F})):new Yt(S.ma),M.Fa(S.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ky(){}t=ky.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yl(){}Yl.prototype.g=function(S,M){return new mi(S,M)};function mi(S,M){Be.call(this),this.g=new Kl(M),this.l=S,this.h=M&&M.messageUrlParams||null,S=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(S?S["X-WebChannel-Content-Type"]=M.messageContentType:S={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(S?S["X-WebChannel-Client-Profile"]=M.sa:S={"X-WebChannel-Client-Profile":M.sa}),this.g.U=S,(S=M&&M.Qb)&&!z(S)&&(this.g.u=S),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!z(M)&&(this.g.G=M,S=this.h,S!==null&&M in S&&(S=this.h,M in S&&delete S[M])),this.j=new Mo(this)}h(mi,Be),mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){yg(this.g)},mi.prototype.o=function(S){var M=this.g;if(typeof S=="string"){var F={};F.__data__=S,S=F}else this.v&&(F={},F.__data__=An(S),S=F);M.i.push(new er(M.Ya++,S)),M.I==3&&Ks(M)},mi.prototype.N=function(){this.g.l=null,delete this.j,yg(this.g),delete this.g,mi.Z.N.call(this)};function Cy(S){at.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var M=S.__sm__;if(M){e:{for(const F in M){S=F;break e}S=void 0}(this.i=S)&&(S=this.i,M=M!==null&&S in M?M[S]:void 0),this.data=M}else this.data=S}h(Cy,at);function Iy(){ln.call(this),this.status=1}h(Iy,ln);function Mo(S){this.g=S}h(Mo,ky),Mo.prototype.ra=function(){nt(this.g,"a")},Mo.prototype.qa=function(S){nt(this.g,new Cy(S))},Mo.prototype.pa=function(S){nt(this.g,new Iy)},Mo.prototype.oa=function(){nt(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,nq=function(){return new Yl},tq=function(){return Xi()},eq=mt,JC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,Bx=vu,ig.COMPLETE="complete",J8=ig,mr.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",Be.prototype.listen=Be.prototype.J,Am=mr,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,Z8=Yt}).apply(typeof jb<"u"?jb:typeof self<"u"?self:typeof window<"u"?window:{});const zL="@firebase/firestore",LL="4.9.2";class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Rp="12.3.0";const Nd=new rS("@firebase/firestore");function fh(){return Nd.logLevel}function Pe(t,...e){if(Nd.logLevel<=At.DEBUG){const n=e.map(HN);Nd.debug(`Firestore (${Rp}): ${t}`,...n)}}function Yn(t,...e){if(Nd.logLevel<=At.ERROR){const n=e.map(HN);Nd.error(`Firestore (${Rp}): ${t}`,...n)}}function hv(t,...e){if(Nd.logLevel<=At.WARN){const n=e.map(HN);Nd.warn(`Firestore (${Rp}): ${t}`,...n)}}function HN(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rq(t,r,n)}function rq(t,e,n){let r=`FIRESTORE (${Rp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yn(r),new Error(r)}function We(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||rq(e,i,r)}function Ge(t,e){return t}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends ko{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Hce{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oi.UNAUTHENTICATED)))}shutdown(){}}class Wce{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new po;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new po,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new po)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new Hce(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class Yce{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xce{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Yce(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qce{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=a=>{a.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new VL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class KN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Zce(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function eI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return dA(i)===dA(a)?ot(i,a):dA(i)?1:-1}return ot(t.length,e.length)}const Jce=55296,eue=57343;function dA(t){const e=t.charCodeAt(0);return e>=Jce&&e<=eue}function Yh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function iq(t){return t+"\0"}const BL="__name__";class io{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof io?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=io.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ot(e.length,n.length)}static compareSegments(e,n){const r=io.isNumericId(e),i=io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?io.extractNumericId(e).compare(io.extractNumericId(n)):eI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fc.fromString(e.substring(4,e.length-2))}}class Lt extends io{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const tue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends io{construct(e,n,r){return new Cn(e,n,r)}static isValidIdentifier(e){return tue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BL}static keyField(){return new Cn([BL])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new De(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new De(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new De(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new De(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(Lt.fromString(e))}static fromName(e){return new je(Lt.fromString(e).popFirst(5))}static empty(){return new je(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Lt(e.slice()))}}function aq(t,e,n){if(!n)throw new De(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nue(t,e,n,r){if(e===!0&&r===!0)throw new De(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FL(t){if(!je.isDocumentKey(t))throw new De(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UL(t){if(je.isDocumentKey(t))throw new De(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new De(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cS(t);throw new De(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dr(t,e){const n={typeString:t};return e&&(n.value=e),n}function h0(t,e){if(!sq(t))throw new De(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new De(Ee.INVALID_ARGUMENT,n);return!0}const $L=-62135596800,qL=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*qL);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new De(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new De(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$L)throw new De(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qL}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(h0(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$L;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:dr("string",gt._jsonSchemaVersion),seconds:dr("number"),nanoseconds:dr("number")};class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new gt(0,0))}static max(){return new Ze(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xh=-1;class ww{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function tI(t){return t.fields.find((e=>e.kind===2))}function Wu(t){return t.fields.filter((e=>e.kind!==2))}ww.UNKNOWN_ID=-1;class Fx{constructor(e,n){this.fieldPath=e,this.kind=n}}class pv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new pv(0,ya.min())}}function oq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ya(i,je.empty(),e)}function lq(t){return new ya(t.readTime,t.key,Xh)}class ya{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ya(Ze.min(),je.empty(),Xh)}static max(){return new ya(Ze.max(),je.empty(),Xh)}}function WN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}const cq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ou(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==cq)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,r)=>{n(e)}))}static reject(e){return new he(((n,r)=>{r(e)}))}static waitFor(e){return new he(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next((i=>i?he.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new he(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new he(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const la="SimpleDb";class uS{static open(e,n,r,i){try{return new uS(n,e.transaction(i,r))}catch(a){throw new Bm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new po,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Bm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=YN(r.target.error);this.S.reject(new Bm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Pe(la,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new iue(n)}}class Uc{static delete(e){return Pe(la,"Removing database:",e),td(kN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!nS())return!1;if(Uc.F())return!0;const e=kr(),n=Uc.M(e),r=0<n&&n<10,i=dq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Uc.M(kr())===12.2&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Pe(la,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Bm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new De(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new De(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Bm(e,s))},i.onupgradeneeded=a=>{Pe(la,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Pe(la,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=uS.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),he.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Pe(la,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class rue{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return td(this.U.delete())}}class Bm extends De{constructor(e,n){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lu(t){return t.name==="IndexedDbTransactionError"}class iue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Pe(la,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Pe(la,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),td(r)}add(e){return Pe(la,"ADD",this.store.name,e,e),td(this.store.add(e))}get(e){return td(this.store.get(e)).next((n=>(n===void 0&&(n=null),Pe(la,"GET",this.store.name,e,n),n)))}delete(e){return Pe(la,"DELETE",this.store.name,e),td(this.store.delete(e))}count(){return Pe(la,"COUNT",this.store.name),td(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new he(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((o,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new he(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){Pe(la,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new he(((r,i)=>{n.onerror=a=>{const s=YN(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}H(e,n){const r=[];return new he(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new rue(o),u=n(o.primaryKey,o.value,c);if(u instanceof he){const f=u.catch((h=>(c.done(),he.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>he.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function td(t){return new he(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=YN(r.target.error);n(i)}}))}let GL=!1;function YN(t){const e=Uc.M(kr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GL||(GL=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Fm="IndexBackfiller";class aue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Pe(Fm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Pe(Fm,`Documents written: ${n}`)}catch(n){lu(n)?Pe(Fm,"Ignoring IndexedDB error during index backfill: ",n):await ou(n)}await this.re(6e4)}))}}class sue{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return he.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Pe(Fm,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Pe(Fm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=lq(a);WN(s,r)>0&&(r=s)})),new ya(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Li{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Li.ce=-1;const bd=-1;function dS(t){return t==null}function gv(t){return t===0&&1/t==-1/0}function fq(t){return typeof t=="number"&&Number.isInteger(t)&&!gv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Sw="";function fi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=HL(e)),e=oue(t.get(n),e);return HL(e)}function oue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Sw:n+="";break;default:n+=a}}return n}function HL(t){return t+Sw+""}function oo(t){const e=t.length;if(We(e>=2,64408,{path:t}),e===2)return We(t.charAt(0)===Sw&&t.charAt(1)==="",56145,{path:t}),Lt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(Sw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new Lt(r)}const Yu="remoteDocuments",p0="owner",Qf="owner",mv="mutationQueues",lue="userId",gs="mutations",KL="batchId",ud="userMutationsIndex",WL=["userId","batchId"];function Ux(t,e){return[t,fi(e)]}function hq(t,e,n){return[t,fi(e),n]}const cue={},Qh="documentMutations",_w="remoteDocumentsV14",uue=["prefixPath","collectionGroup","readTime","documentId"],$x="documentKeyIndex",due=["prefixPath","collectionGroup","documentId"],pq="collectionGroupIndex",fue=["collectionGroup","readTime","prefixPath","documentId"],vv="remoteDocumentGlobal",nI="remoteDocumentGlobalKey",Zh="targets",gq="queryTargetsIndex",hue=["canonicalId","targetId"],Jh="targetDocuments",pue=["targetId","path"],XN="documentTargetsIndex",gue=["path","targetId"],Ew="targetGlobalKey",xd="targetGlobal",yv="collectionParents",mue=["collectionId","parent"],ep="clientMetadata",vue="clientId",fS="bundles",yue="bundleId",hS="namedQueries",bue="name",QN="indexConfiguration",xue="indexId",rI="collectionGroupIndex",wue="collectionGroup",Um="indexState",Sue=["indexId","uid"],mq="sequenceNumberIndex",_ue=["uid","sequenceNumber"],$m="indexEntries",Eue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vq="documentKeyIndex",Tue=["indexId","uid","orderedDocumentKey"],pS="documentOverlays",Aue=["userId","collectionPath","documentId"],iI="collectionPathOverlayIndex",kue=["userId","collectionPath","largestBatchId"],yq="collectionGroupOverlayIndex",Cue=["userId","collectionGroup","largestBatchId"],ZN="globals",Iue="name",bq=[mv,gs,Qh,Yu,Zh,p0,xd,Jh,ep,vv,yv,fS,hS],Pue=[...bq,pS],xq=[mv,gs,Qh,_w,Zh,p0,xd,Jh,ep,vv,yv,fS,hS,pS],wq=xq,JN=[...wq,QN,Um,$m],Nue=JN,Sq=[...JN,ZN],Due=Sq;class aI extends uq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Ir(t,e){const n=Ge(t);return Uc.O(n.le,e)}function YL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _q(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class un{constructor(e,n){this.comparator=e,this.root=n||ni.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zb(this.root,e,this.comparator,!1)}getReverseIterator(){return new zb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zb(this.root,e,this.comparator,!0)}}class zb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=a??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ni(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1;ni.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new ni(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XL(this.data.getIterator())}getIteratorFrom(e){return new XL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class XL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zf(t){return t.hasNext()?t.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new Vi([])}unionWith(e){let n=new Kt(Cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Eq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Eq("Invalid base64 string: "+a):a}})(e);return new Xn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const Oue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=Oue.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xl(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}const Tq="server_timestamp",Aq="__type__",kq="__previous_value__",Cq="__local_write_time__";function eD(t){return(t?.mapValue?.fields||{})[Aq]?.stringValue===Tq}function gS(t){const e=t.mapValue.fields[kq];return eD(e)?gS(e):e}function bv(t){const e=bl(t.mapValue.fields[Cq].timestampValue);return new gt(e.seconds,e.nanos)}class Rue{constructor(e,n,r,i,a,s,o,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const Tw="(default)";class Dd{constructor(e,n){this.projectId=e,this.database=n||Tw}static empty(){return new Dd("","")}get isDefaultDatabase(){return this.database===Tw}isEqual(e){return e instanceof Dd&&e.projectId===this.projectId&&e.database===this.database}}const tD="__type__",Iq="__max__",Oc={mapValue:{fields:{__type__:{stringValue:Iq}}}},nD="__vector__",tp="value",qx={nullValue:"NULL_VALUE"};function Kc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eD(t)?4:Pq(t)?9007199254740991:mS(t)?10:11:Fe(28295,{value:t})}function So(t,e){if(t===e)return!0;const n=Kc(t);if(n!==Kc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bv(t).isEqual(bv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=bl(i.timestampValue),o=bl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return xl(i.bytesValue).isEqual(xl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return wn(i.geoPointValue.latitude)===wn(a.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return wn(i.integerValue)===wn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=wn(i.doubleValue),o=wn(a.doubleValue);return s===o?gv(s)===gv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return Yh(t.arrayValue.values||[],e.arrayValue.values||[],So);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(YL(s)!==YL(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!So(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function xv(t,e){return(t.values||[]).find((n=>So(n,e)))!==void 0}function Wc(t,e){if(t===e)return 0;const n=Kc(t),r=Kc(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=wn(a.integerValue||a.doubleValue),c=wn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return QL(t.timestampValue,e.timestampValue);case 4:return QL(bv(t),bv(e));case 5:return eI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=xl(a),c=xl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=ot(o[u],c[u]);if(f!==0)return f}return ot(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=ot(wn(a.latitude),wn(s.latitude));return o!==0?o:ot(wn(a.longitude),wn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ZL(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[tp]?.arrayValue,f=c[tp]?.arrayValue,h=ot(u?.values?.length||0,f?.values?.length||0);return h!==0?h:ZL(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Oc.mapValue&&s===Oc.mapValue)return 0;if(a===Oc.mapValue)return 1;if(s===Oc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=eI(c[h],f[h]);if(g!==0)return g;const v=Wc(o[c[h]],u[f[h]]);if(v!==0)return v}return ot(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function QL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=bl(t),r=bl(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function ZL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Wc(n[i],r[i]);if(a)return a}return ot(n.length,r.length)}function np(t){return sI(t)}function sI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=bl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return xl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return je.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=sI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${sI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function Gx(t){switch(Kc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gS(t);return e?16+Gx(e):16;case 5:return 2*t.stringValue.length;case 6:return xl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Gx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return cu(r.fields,((a,s)=>{i+=a.length+Gx(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function wv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oI(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function JL(t){return!!t&&"nullValue"in t}function e3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hx(t){return!!t&&"mapValue"in t}function mS(t){return(t?.mapValue?.fields||{})[tD]?.stringValue===nD}function qm(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=qm(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qm(t.arrayValue.values[n]);return e}return{...t}}function Pq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Iq}const Nq={mapValue:{fields:{[tD]:{stringValue:nD},[tp]:{arrayValue:{}}}}};function Mue(t){return"nullValue"in t?qx:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?wv(Dd.empty(),je.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?mS(t)?Nq:{mapValue:{}}:Fe(35942,{value:t})}function jue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?wv(Dd.empty(),je.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Nq:"mapValue"in t?mS(t)?{mapValue:{}}:Oc:Fe(61959,{value:t})}function t3(t,e){const n=Wc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function n3(t,e){const n=Wc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qm(n)}setAll(e){let n=Cn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=qm(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Hx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){cu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ui(qm(this.value))}}function Dq(t){const e=[];return cu(t.fields,((n,r)=>{const i=new Cn([n]);if(Hx(r)){const a=Dq(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Vi(e)}class Ln{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ln(e,0,Ze.min(),Ze.min(),Ze.min(),ui.empty(),0)}static newFoundDocument(e,n,r,i){return new Ln(e,1,n,Ze.min(),r,i,0)}static newNoDocument(e,n){return new Ln(e,2,n,Ze.min(),Ze.min(),ui.empty(),0)}static newUnknownDocument(e,n){return new Ln(e,3,n,Ze.min(),Ze.min(),ui.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rp{constructor(e,n){this.position=e,this.inclusive=n}}function r3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=je.comparator(je.fromName(s.referenceValue),n.key):r=Wc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function i3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!So(t.position[n],e.position[n]))return!1;return!0}class _v{constructor(e,n="asc"){this.field=e,this.dir=n}}function zue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Oq{}class Ct extends Oq{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Lue(e,n,r):n==="array-contains"?new Fue(e,r):n==="in"?new Vq(e,r):n==="not-in"?new Uue(e,r):n==="array-contains-any"?new $ue(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Vue(e,r):new Bue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wc(n,this.value)):n!==null&&Kc(this.value)===Kc(n)&&this.matchesComparison(Wc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends Oq{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return ip(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ip(t){return t.op==="and"}function lI(t){return t.op==="or"}function rD(t){return Rq(t)&&ip(t)}function Rq(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function cI(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+np(t.value);if(rD(t))return t.filters.map((e=>cI(e))).join(",");{const e=t.filters.map((n=>cI(n))).join(",");return`${t.op}(${e})`}}function Mq(t,e){return t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&So(r.value,i.value)})(t,e):t instanceof Ht?(function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&Mq(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function jq(t,e){const n=t.filters.concat(e);return Ht.create(n,t.op)}function zq(t){return t instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${np(n.value)}`})(t):t instanceof Ht?(function(n){return n.op.toString()+" {"+n.getFilters().map(zq).join(" ,")+"}"})(t):"Filter"}class Lue extends Ct{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class Vue extends Ct{constructor(e,n){super(e,"in",n),this.keys=Lq("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Bue extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=Lq("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Lq(t,e){return(e.arrayValue?.values||[]).map((n=>je.fromName(n.referenceValue)))}class Fue extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sv(n)&&xv(n.arrayValue,this.value)}}class Vq extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xv(this.value.arrayValue,n)}}class Uue extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(xv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xv(this.value.arrayValue,n)}}class $ue extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xv(this.value.arrayValue,r)))}}class que{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function uI(t,e=null,n=[],r=[],i=null,a=null,s=null){return new que(t,e,n,r,i,a,s)}function Od(t){const e=Ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>cI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),dS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>np(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>np(r))).join(",")),e.Te=n}return e.Te}function g0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mq(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i3(t.startAt,e.startAt)&&i3(t.endAt,e.endAt)}function Aw(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function kw(t,e){return t.filters.filter((n=>n instanceof Ct&&n.field.isEqual(e)))}function a3(t,e,n){let r=qx,i=!0;for(const a of kw(t,e)){let s=qx,o=!0;switch(a.op){case"<":case"<=":s=Mue(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=qx}t3({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];t3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function s3(t,e,n){let r=Oc,i=!0;for(const a of kw(t,e)){let s=Oc,o=!0;switch(a.op){case">=":case">":s=jue(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=Oc}n3({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];n3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Mp{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bq(t,e,n,r,i,a,s,o){return new Mp(t,e,n,r,i,a,s,o)}function m0(t){return new Mp(t)}function o3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fq(t){return t.collectionGroup!==null}function Gm(t){const e=Ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Kt(Cn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new _v(a,r))})),n.has(Cn.keyField().canonicalString())||e.Ie.push(new _v(Cn.keyField(),r))}return e.Ie}function ma(t){const e=Ge(t);return e.Ee||(e.Ee=Gue(e,Gm(t))),e.Ee}function Gue(t,e){if(t.limitType==="F")return uI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new _v(i.field,a)}));const n=t.endAt?new rp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rp(t.startAt.position,t.startAt.inclusive):null;return uI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dI(t,e){const n=t.filters.concat([e]);return new Mp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cw(t,e,n){return new Mp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vS(t,e){return g0(ma(t),ma(e))&&t.limitType===e.limitType}function Uq(t){return`${Od(ma(t))}|lt:${t.limitType}`}function hh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>zq(i))).join(", ")}]`),dS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>np(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>np(i))).join(",")),`Target(${r})`})(ma(t))}; limitType=${t.limitType})`}function v0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Gm(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=r3(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,Gm(r),i)||r.endAt&&!(function(s,o,c){const u=r3(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,Gm(r),i))})(t,e)}function $q(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qq(t){return(e,n)=>{let r=!1;for(const i of Gm(t)){const a=Hue(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Hue(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?Wc(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class Ol{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return _q(this.inner)}size(){return this.innerSize}}const Kue=new un(je.comparator);function pa(){return Kue}const Gq=new un(je.comparator);function km(...t){let e=Gq;for(const n of t)e=e.insert(n.key,n);return e}function Hq(t){let e=Gq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function lo(){return Hm()}function Kq(){return Hm()}function Hm(){return new Ol((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Wue=new un(je.comparator),Yue=new Kt(je.comparator);function yt(...t){let e=Yue;for(const n of t)e=e.add(n);return e}const Xue=new Kt(ot);function iD(){return Xue}function aD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gv(e)?"-0":e}}function Wq(t){return{integerValue:""+t}}function Que(t,e){return fq(e)?Wq(e):aD(t,e)}class yS{constructor(){this._=void 0}}function Zue(t,e,n){return t instanceof Ev?(function(i,a){const s={fields:{[Aq]:{stringValue:Tq},[Cq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&eD(a)&&(a=gS(a)),a&&(s.fields[kq]=a),{mapValue:s}})(n,e):t instanceof Rd?Xq(t,e):t instanceof ap?Qq(t,e):(function(i,a){const s=Yq(i,a),o=l3(s)+l3(i.Ae);return oI(s)&&oI(i.Ae)?Wq(o):aD(i.serializer,o)})(t,e)}function Jue(t,e,n){return t instanceof Rd?Xq(t,e):t instanceof ap?Qq(t,e):n}function Yq(t,e){return t instanceof Tv?(function(r){return oI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ev extends yS{}class Rd extends yS{constructor(e){super(),this.elements=e}}function Xq(t,e){const n=Zq(e);for(const r of t.elements)n.some((i=>So(i,r)))||n.push(r);return{arrayValue:{values:n}}}class ap extends yS{constructor(e){super(),this.elements=e}}function Qq(t,e){let n=Zq(e);for(const r of t.elements)n=n.filter((i=>!So(i,r)));return{arrayValue:{values:n}}}class Tv extends yS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l3(t){return wn(t.integerValue||t.doubleValue)}function Zq(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Jq{constructor(e,n){this.field=e,this.transform=n}}function ede(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Rd&&i instanceof Rd||r instanceof ap&&i instanceof ap?Yh(r.elements,i.elements,So):r instanceof Tv&&i instanceof Tv?So(r.Ae,i.Ae):r instanceof Ev&&i instanceof Ev})(t.transform,e.transform)}class tde{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bS{}function eG(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y0(t.key,Tr.none()):new jp(t.key,t.data,Tr.none());{const n=t.data,r=ui.empty();let i=new Kt(Cn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Rl(t.key,r,new Vi(i.toArray()),Tr.none())}}function nde(t,e,n){t instanceof jp?(function(i,a,s){const o=i.value.clone(),c=u3(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Rl?(function(i,a,s){if(!Kx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=u3(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(tG(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Km(t,e,n,r){return t instanceof jp?(function(a,s,o,c){if(!Kx(a.precondition,s))return o;const u=a.value.clone(),f=d3(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rl?(function(a,s,o,c){if(!Kx(a.precondition,s))return o;const u=d3(a.fieldTransforms,c,s),f=s.data;return f.setAll(tG(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return Kx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function rde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Yq(r.transform,i||null);a!=null&&(n===null&&(n=ui.empty()),n.set(r.field,a))}return n||null}function c3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yh(r,i,((a,s)=>ede(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jp extends bS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rl extends bS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tG(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function u3(t,e,n){const r=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Jue(s,o,n[i]))}return r}function d3(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Zue(a,s,e))}return r}class y0 extends bS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nG extends bS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&nde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Km(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Km(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kq();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=eG(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ze.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),yt())}isEqual(e){return this.batchId===e.batchId&&Yh(this.mutations,e.mutations,((n,r)=>c3(n,r)))&&Yh(this.baseMutations,e.baseMutations,((n,r)=>c3(n,r)))}}class oD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){We(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Wue})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new oD(e,n,r,i)}}class lD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ide{constructor(e,n){this.count=e,this.unchangedNames=n}}var or,Pt;function ade(t){switch(t){case Ee.OK:return Fe(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function rG(t){if(t===void 0)return Yn("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case or.OK:return Ee.OK;case or.CANCELLED:return Ee.CANCELLED;case or.UNKNOWN:return Ee.UNKNOWN;case or.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case or.INTERNAL:return Ee.INTERNAL;case or.UNAVAILABLE:return Ee.UNAVAILABLE;case or.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case or.NOT_FOUND:return Ee.NOT_FOUND;case or.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case or.ABORTED:return Ee.ABORTED;case or.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case or.DATA_LOSS:return Ee.DATA_LOSS;default:return Fe(39323,{code:t})}}(Pt=or||(or={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";function sde(){return new TextEncoder}const ode=new Fc([4294967295,4294967295],0);function f3(t){const e=sde().encode(t),n=new Q8;return n.update(e),new Uint8Array(n.digest())}function h3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Fc([n,r],0),new Fc([i,a],0)]}class cD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cm(`Invalid padding: ${n}`);if(r<0)throw new Cm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Fc.fromNumber(r)));return i.compare(ode)===1&&(i=new Fc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=f3(e),[r,i]=h3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new cD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=f3(e),[r,i]=h3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class b0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,x0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new b0(Ze.min(),i,new un(ot),pa(),yt())}}class x0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new x0(r,n,yt(),yt(),yt())}}class Wx{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class iG{constructor(e,n){this.targetId=e,this.Ce=n}}class aG{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class p3{constructor(){this.ve=0,this.Fe=g3(),this.Me=Xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yt(),n=yt(),r=yt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new x0(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=g3()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lde{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.Je=Lb(),this.He=Lb(),this.Ye=new un(ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Aw(a))if(r===0){const s=new je(a.path);this.et(n,s,Ln.newNoDocument(s,Ze.min()))}else We(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=xl(r).toUint8Array()}catch(c){if(c instanceof Eq)return hv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new cD(s,i,a)}catch(c){return hv(c instanceof Cm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&Aw(o.target)){const c=new je(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ln.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=yt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new b0(e,n,this.Ye,this.je,r);return this.je=pa(),this.Je=Lb(),this.He=Lb(),this.Ye=new un(ot),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new p3,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Kt(ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Kt(ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lb(){return new un(je.comparator)}function g3(){return new un(je.comparator)}const cde={asc:"ASCENDING",desc:"DESCENDING"},ude={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dde={and:"AND",or:"OR"};class fde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fI(t,e){return t.useProto3Json||dS(e)?e:{value:e}}function sp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hde(t,e){return sp(t,e.toTimestamp())}function Ti(t){return We(!!t,49232),Ze.fromTimestamp((function(n){const r=bl(n);return new gt(r.seconds,r.nanos)})(t))}function uD(t,e){return hI(t,e).canonicalString()}function hI(t,e){const n=(function(i){return new Lt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function oG(t){const e=Lt.fromString(t);return We(mG(e),10190,{key:e.toString()}),e}function Iw(t,e){return uD(t.databaseId,e.path)}function wd(t,e){const n=oG(e);if(n.get(1)!==t.databaseId.projectId)throw new De(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new De(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(uG(n))}function lG(t,e){return uD(t.databaseId,e)}function cG(t){const e=oG(t);return e.length===4?Lt.emptyPath():uG(e)}function pI(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uG(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function m3(t,e,n){return{name:Iw(t,e),fields:n.value.mapValue.fields}}function pde(t,e,n){const r=wd(t,e.name),i=Ti(e.updateTime),a=e.createTime?Ti(e.createTime):Ze.min(),s=new ui({mapValue:{fields:e.fields}}),o=Ln.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function gde(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(We(f===void 0||typeof f=="string",58123),Xn.fromBase64String(f||"")):(We(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Xn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Ee.UNKNOWN:rG(u.code);return new De(f,u.message||"")})(s);n=new aG(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wd(t,r.document.name),a=Ti(r.document.updateTime),s=r.document.createTime?Ti(r.document.createTime):Ze.min(),o=new ui({mapValue:{fields:r.document.fields}}),c=Ln.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Wx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wd(t,r.document),a=r.readTime?Ti(r.readTime):Ze.min(),s=Ln.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Wx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wd(t,r.document),a=r.removedTargetIds||[];n=new Wx([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new ide(i,a),o=r.targetId;n=new iG(o,s)}}return n}function Pw(t,e){let n;if(e instanceof jp)n={update:m3(t,e.key,e.value)};else if(e instanceof y0)n={delete:Iw(t,e.key)};else if(e instanceof Rl)n={update:m3(t,e.key,e.data),updateMask:wde(e.fieldMask)};else{if(!(e instanceof nG))return Fe(16599,{Vt:e.type});n={verify:Iw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof Ev)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Rd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ap)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Tv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:hde(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function gI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Tr.updateTime(Ti(a.updateTime)):a.exists!==void 0?Tr.exists(a.exists):Tr.none()})(e.currentDocument):Tr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)We(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new Ev;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Rd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new ap(f)}else"increment"in o?c=new Tv(s,o.increment):Fe(16584,{proto:o});const u=Cn.fromServerFormat(o.fieldPath);return new Jq(u,c)})(t,i))):[];if(e.update){e.update.name;const i=wd(t,e.update.name),a=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Vi(u.map((f=>Cn.fromServerFormat(f))))})(e.updateMask);return new Rl(i,a,s,n,r)}return new jp(i,a,n,r)}if(e.delete){const i=wd(t,e.delete);return new y0(i,n)}if(e.verify){const i=wd(t,e.verify);return new nG(i,n)}return Fe(1463,{proto:e})}function mde(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?Ti(i.updateTime):Ti(a);return s.isEqual(Ze.min())&&(s=Ti(a)),new tde(s,i.transformResults||[])})(n,e)))):[]}function dG(t,e){return{documents:[lG(t,e.path)]}}function fG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lG(t,i);const a=(function(u){if(u.length!==0)return gG(Ht.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:ph(g.field),direction:yde(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=fI(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function hG(t){let e=cG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){We(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=pG(h);return g instanceof Ht&&rD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new _v(gh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,dS(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new rp(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new rp(v,g)})(n.endAt)),Bq(e,i,s,a,o,"F",c,u)}function vde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gh(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gh(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=gh(n.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gh(n.unaryFilter.field);return Ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ct.create(gh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ht.create(n.compositeFilter.filters.map((r=>pG(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function yde(t){return cde[t]}function bde(t){return ude[t]}function xde(t){return dde[t]}function ph(t){return{fieldPath:t.canonicalString()}}function gh(t){return Cn.fromServerFormat(t.fieldPath)}function gG(t){return t instanceof Ct?(function(n){if(n.op==="=="){if(e3(n.value))return{unaryFilter:{field:ph(n.field),op:"IS_NAN"}};if(JL(n.value))return{unaryFilter:{field:ph(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e3(n.value))return{unaryFilter:{field:ph(n.field),op:"IS_NOT_NAN"}};if(JL(n.value))return{unaryFilter:{field:ph(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ph(n.field),op:bde(n.op),value:n.value}}})(t):t instanceof Ht?(function(n){const r=n.getFilters().map((i=>gG(i)));return r.length===1?r[0]:{compositeFilter:{op:xde(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function wde(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function mG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class rl{constructor(e,n,r,i,a=Ze.min(),s=Ze.min(),o=Xn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vG{constructor(e){this.yt=e}}function Sde(t,e){let n;if(e.document)n=pde(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=jd(e.noDocument.readTime);n=Ln.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=je.fromSegments(e.unknownDocument.path),i=jd(e.unknownDocument.version);n=Ln.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new gt(i[0],i[1]);return Ze.fromTimestamp(a)})(e.readTime)),n}function v3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:Iw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:sp(a,s.version.toTimestamp()),createTime:sp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Md(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Md(e.version)}}return r}function Nw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Md(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(t){const e=new gt(t.seconds,t.nanoseconds);return Ze.fromTimestamp(e)}function nd(t,e){const n=(e.baseMutations||[]).map((a=>gI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>gI(t.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new sD(e.batchId,i,n,r)}function Im(t){const e=jd(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?jd(t.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return We(s===1,1966,{count:s}),ma(m0(cG(a.documents[0])))})(t.query):(function(a){return ma(hG(a))})(t.query),new rl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xn.fromBase64String(t.resumeToken))}function yG(t,e){const n=Md(e.snapshotVersion),r=Md(e.lastLimboFreeSnapshotVersion);let i;i=Aw(e.target)?dG(t.yt,e.target):fG(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Od(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bG(t){const e=hG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cw(e,e.limit,"L"):e}function fA(t,e){return new lD(e.largestBatchId,gI(t.yt,e.overlayMutation))}function y3(t,e){const n=e.path.lastSegment();return[t,fi(e.path.popLast()),n]}function b3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Md(r.readTime),documentKey:fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class _de{getBundleMetadata(e,n){return x3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:jd(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return x3(e).put((function(i){return{bundleId:i.id,createTime:Md(Ti(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return w3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:bG(a.bundledQuery),readTime:jd(a.readTime)}})(r)}))}saveNamedQuery(e,n){return w3(e).put((function(i){return{name:i.name,readTime:Md(Ti(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function x3(t){return Ir(t,fS)}function w3(t){return Ir(t,hS)}class xS{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new xS(e,r)}getOverlay(e,n){return sm(e).get(y3(this.userId,n)).next((r=>r?fA(this.serializer,r):null))}getOverlays(e,n){const r=lo();return he.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new lD(n,s);i.push(this.St(e,o))})),he.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(fi(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(sm(e).Z(iI,o))})),he.waitFor(a)}getOverlaysForCollection(e,n,r){const i=lo(),a=fi(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sm(e).J(iI,s).next((o=>{for(const c of o){const u=fA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=lo();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sm(e).ee({index:yq,range:o},((c,u,f)=>{const h=fA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}St(e,n){return sm(e).put((function(i,a,s){const[o,c,u]=y3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Pw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function sm(t){return Ir(t,pS)}class Ede{bt(e){return Ir(e,ZN)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Xn.fromUint8Array(r):Xn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class rd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),gv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=bl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(xl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Pq(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):mS(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=tp,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(wn(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),je.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}rd.Kt=new rd;const Jf=255;function Tde(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function S3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=Tde(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class Ade{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=S3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=S3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Jf),this.sn(255)}_n(){this.an(Jf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Jf?(this.sn(Jf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Jf?(this.an(Jf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kde{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Cde{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class om{constructor(){this.cn=new Ade,this.ln=new kde(this.cn),this.hn=new Cde(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class id{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new id(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Yx(this.En),directionalValue:Yx(this.dn),orderedDocumentKey:Yx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function bc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=_3(t.En,e.En),n!==0?n:(n=_3(t.dn,e.dn),n!==0?n:je.comparator(t.In,e.In)))}function _3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Yx(t){return P$()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function E3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class T3{constructor(e){this.mn=new Kt(((n,r)=>Cn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(We(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=tI(e);if(n!==void 0&&!this.wn(n))return!1;const r=Wu(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.Sn(o,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Kt(Cn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Fx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Fx(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Fx(r.field,r.dir==="asc"?0:1)));return new ww(ww.UNKNOWN_ID,this.collectionId,n,pv.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function xG(t){if(We(t instanceof Ct||t instanceof Ht,20012),t instanceof Ct){if(t instanceof Vq){const n=t.value.arrayValue?.values?.map((r=>Ct.create(t.field,"==",r)))||[];return Ht.create(n,"or")}return t}const e=t.filters.map((n=>xG(n)));return Ht.create(e,t.op)}function Ide(t){if(t.getFilters().length===0)return[];const e=yI(xG(t));return We(wG(e),7391),mI(e)||vI(e)?[e]:e.getFilters()}function mI(t){return t instanceof Ct}function vI(t){return t instanceof Ht&&rD(t)}function wG(t){return mI(t)||vI(t)||(function(n){if(n instanceof Ht&&lI(n)){for(const r of n.getFilters())if(!mI(r)&&!vI(r))return!1;return!0}return!1})(t)}function yI(t){if(We(t instanceof Ct||t instanceof Ht,34018),t instanceof Ct)return t;if(t.filters.length===1)return yI(t.filters[0]);const e=t.filters.map((r=>yI(r)));let n=Ht.create(e,t.op);return n=Dw(n),wG(n)?n:(We(n instanceof Ht,64498),We(ip(n),40251),We(n.filters.length>1,57927),n.filters.reduce(((r,i)=>dD(r,i))))}function dD(t,e){let n;return We(t instanceof Ct||t instanceof Ht,38388),We(e instanceof Ct||e instanceof Ht,25473),n=t instanceof Ct?e instanceof Ct?(function(i,a){return Ht.create([i,a],"and")})(t,e):A3(t,e):e instanceof Ct?A3(e,t):(function(i,a){if(We(i.filters.length>0&&a.filters.length>0,48005),ip(i)&&ip(a))return jq(i,a.getFilters());const s=lI(i)?i:a,o=lI(i)?a:i,c=s.filters.map((u=>dD(u,o)));return Ht.create(c,"or")})(t,e),Dw(n)}function A3(t,e){if(ip(e))return jq(e,t.getFilters());{const n=e.filters.map((r=>dD(t,r)));return Ht.create(n,"or")}}function Dw(t){if(We(t instanceof Ct||t instanceof Ht,11850),t instanceof Ct)return t;const e=t.getFilters();if(e.length===1)return Dw(e[0]);if(Rq(t))return t;const n=e.map((i=>Dw(i))),r=[];return n.forEach((i=>{i instanceof Ct?r.push(i):i instanceof Ht&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ht.create(r,t.op)}class Pde{constructor(){this.Cn=new fD}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(ya.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class fD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(Lt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(Lt.comparator)).toArray()}}const k3="IndexedDbIndexManager",Vb=new Uint8Array(0);class Nde{constructor(e,n){this.databaseId=n,this.vn=new fD,this.Fn=new Ol((r=>Od(r)),((r,i)=>g0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:fi(i)};return C3(e).put(a)}return he.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[iq(n),""],!1,!0);return C3(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(oo(s.parent))}return r}))}addFieldIndex(e,n){const r=lm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=th(e);return a.next((o=>{s.put(b3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=lm(e),i=th(e),a=eh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=lm(e),r=eh(e),i=th(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return he.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new T3(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=eh(e);let i=!0;const a=new Map;return he.forEach(this.Mn(n),(s=>this.xn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=yt();const o=[];return he.forEach(a,((c,u)=>{Pe(k3,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(c)} to execute ${Od(n)}`);const f=(function(I,O){const D=tI(O);if(D===void 0)return null;for(const N of kw(I,D.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null})(u,c),h=(function(I,O){const D=new Map;for(const N of Wu(O))for(const C of kw(I,N.fieldPath))switch(C.op){case"==":case"in":D.set(N.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return D.set(N.fieldPath.canonicalString(),C.value),Array.from(D.values())}return null})(u,c),g=(function(I,O){const D=[];let N=!0;for(const C of Wu(O)){const P=C.kind===0?a3(I,C.fieldPath,I.startAt):s3(I,C.fieldPath,I.startAt);D.push(P.value),N&&(N=P.inclusive)}return new rp(D,N)})(u,c),v=(function(I,O){const D=[];let N=!0;for(const C of Wu(O)){const P=C.kind===0?s3(I,C.fieldPath,I.endAt):a3(I,C.fieldPath,I.endAt);D.push(P.value),N&&(N=P.inclusive)}return new rp(D,N)})(u,c),b=this.On(c,u,g),x=this.On(c,u,v),w=this.Nn(c,u,h),_=this.Bn(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return he.forEach(_,(T=>r.Y(T,n.limit).next((I=>{I.forEach((O=>{const D=je.fromSegments(O.documentKey);s.has(D)||(s=s.add(D),o.push(D))}))}))))})).next((()=>o))}return he.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Ide(Ht.create(e.filters,"and")).map((r=>uI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Ln(n[h/u]):Vb,v=this.kn(e,g,r[h%u],i),b=this.qn(e,g,a[h%u],s),x=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}kn(e,n,r,i){const a=new id(e,je.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new id(e,je.empty(),n,r);return i?a.An():a}xn(e,n){const r=new T3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return he.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Kt(Cn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new om;for(const i of Wu(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);rd.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new om;return rd.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new om;return rd.Kt.Dt(wv(this.databaseId,n),r.Pn((function(a){const s=Wu(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new om);let a=0;for(const s of Wu(e)){const o=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&Sv(o))i=this.Kn(i,s,o);else{const u=c.Pn(s.kind);rd.Kt.Dt(o,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new om;c.seed(o.un()),rd.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof Ct&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=lm(e),i=th(e);return(n?r.J(rI,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return he.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new pv(h.sequenceNumber,new ya(jd(h.readTime),new je(oo(h.documentKey)),h.largestBatchId)):pv.empty(),v=f.fields.map((([b,x])=>new Fx(Cn.fromServerFormat(b),x)));return new ww(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:ot(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=lm(e),a=th(e);return this.Gn(e).next((s=>i.J(rI,IDBKeyRange.bound(n,n)).next((o=>he.forEach(o,(c=>a.put(b3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return he.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?he.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),he.forEach(o,(c=>this.zn(e,i,c).next((u=>{const f=this.jn(a,c);return u.isEqual(f)?he.resolve():this.Jn(e,a,c,u,f)})))))))}))}Hn(e,n,r,i){return eh(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return eh(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=eh(e);let a=new Kt(bc);return i.ee({index:vq,range:IDBKeyRange.only([r.indexId,this.uid,Yx(this.$n(r,n))])},((s,o)=>{a=a.add(new id(r.indexId,n,E3(o.arrayValue),E3(o.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Kt(bc);const i=this.Qn(n,e);if(i==null)return r;const a=tI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Sv(s))for(const o of s.arrayValue.values||[])r=r.add(new id(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new id(n.indexId,e.key,Vb,i));return r}Jn(e,n,r,i,a){Pe(k3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=Zf(v),w=Zf(b);for(;x||w;){let _=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(_=!0)}else x!=null?T=!0:_=!0;_?(h(w),w=Zf(b)):T?(g(x),x=Zf(v)):(x=Zf(v),w=Zf(b))}})(i,a,bc,(o=>{s.push(this.Hn(e,n,r,o))}),(o=>{s.push(this.Yn(e,n,r,o))})),he.waitFor(s)}Gn(e){let n=1;return th(e).ee({index:mq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>bc(s,o))).filter(((s,o,c)=>!o||bc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=bc(s,e),c=bc(s,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,Vb,je.empty()),c=i[s+1].Vn(this.uid,Vb,je.empty());a.push(IDBKeyRange.bound(o,c))}return a}Zn(e,n){return bc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(I3)}getMinOffset(e,n){return he.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Fe(44426))))).next(I3)}}function C3(t){return Ir(t,yv)}function eh(t){return Ir(t,$m)}function lm(t){return Ir(t,QN)}function th(t){return Ir(t,Um)}function I3(t){We(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;WN(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ya(e.readTime,e.documentKey,n)}const P3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SG=41943040;class li{static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function _G(t,e,n){const r=t.store(gs),i=t.store(Qh),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{We(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=hq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return he.waitFor(a).next((()=>u))}function Ow(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(SG,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);class wS{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){We(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new wS(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).ee({index:ud,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=mh(e),s=xc(e);return s.add({}).next((o=>{We(typeof o=="number",49019);const c=new sD(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((T=>Pw(v.yt,T))),_=x.mutations.map((T=>Pw(v.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:_}})(this.serializer,this.userId,c),f=[];let h=new Kt(((g,v)=>ot(g.canonicalString(),v.canonicalString())));for(const g of i){const v=hq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,cue))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),he.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return xc(e).get(n).next((r=>r?(We(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),nd(this.serializer,r)):null))}er(e,n){return this.Xn[n]?he.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return xc(e).ee({index:ud,range:i},((s,o,c)=>{o.userId===this.userId&&(We(o.batchId>=r,47524,{tr:r}),a=nd(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=bd;return xc(e).ee({index:ud,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,bd],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).J(ud,n).next((r=>r.map((i=>nd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ux(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return mh(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=oo(f);if(u===this.userId&&n.path.isEqual(g))return xc(e).get(h).next((v=>{if(!v)throw Fe(61480,{nr:s,batchId:h});We(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(nd(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(ot);const i=[];return n.forEach((a=>{const s=Ux(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=mh(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=oo(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),he.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Ux(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Kt(ot);return mh(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=oo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(xc(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});We(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(nd(this.serializer,s))})))})),he.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return _G(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),he.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return he.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return mh(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=oo(a[1]);i.push(c)}else o.done()})).next((()=>{We(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return EG(e,this.userId,n)}_r(e){return TG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:bd,lastStreamToken:""}))}}function EG(t,e,n){const r=Ux(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return mh(t).ee({range:a,X:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function xc(t){return Ir(t,gs)}function mh(t){return Ir(t,Qh)}function TG(t){return Ir(t,mv)}class zd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zd(0)}static cr(){return new zd(-1)}}class Dde{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new zd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ze.fromTimestamp(new gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>nh(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(We(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return nh(e).ee(((s,o)=>{const c=Im(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>he.waitFor(a))).next((()=>i))}forEachTarget(e,n){return nh(e).ee(((r,i)=>{const a=Im(i);n(a)}))}lr(e){return N3(e).get(Ew).next((n=>(We(n!==null,2888),n)))}hr(e,n){return N3(e).put(Ew,n)}Pr(e,n){return nh(e).put(yG(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Od(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return nh(e).ee({range:i,index:gq},((s,o,c)=>{const u=Im(o);g0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Pc(e);return n.forEach((s=>{const o=fi(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),he.waitFor(i)}removeMatchingKeys(e,n,r){const i=Pc(e);return he.forEach(n,(a=>{const s=fi(a.path);return he.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Pc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Pc(e);let a=yt();return i.ee({range:r,X:!0},((s,o,c)=>{const u=oo(s[1]),f=new je(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=fi(n.path),i=IDBKeyRange.bound([r],[iq(r)],!1,!0);let a=0;return Pc(e).ee({index:XN,X:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return nh(e).get(n).next((r=>r?Im(r):null))}}function nh(t){return Ir(t,Zh)}function N3(t){return Ir(t,xd)}function Pc(t){return Ir(t,Jh)}const D3="LruGarbageCollector",AG=1048576;function O3([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class Ode{constructor(e){this.Ir=e,this.buffer=new Kt(O3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();O3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(D3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lu(n)?Pe(D3,"Ignoring IndexedDB error during garbage collection: ",n):await ou(n)}await this.Vr(3e5)}))}}class Rde{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Li.ce);const r=new Ode(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(P3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P3):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),fh()<=At.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function CG(t,e){return new Rde(t,e)}class Mde{constructor(e,n){this.db=e,this.garbageCollector=CG(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Bb(e,r)}removeReference(e,n,r){return Bb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bb(e,n)}br(e,n){return(function(i,a){let s=!1;return TG(i).te((o=>EG(i,o,a).next((c=>(c&&(s=!0),he.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,o)=>{if(o<=n){const c=this.br(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ze.min()),Pc(e).delete((function(h){return[0,fi(h.path)]})(s)))))}));i.push(c)}})).next((()=>he.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bb(e,n)}Sr(e,n){const r=Pc(e);let i,a=Li.ce;return r.ee({index:XN},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Li.ce&&n(new je(oo(i)),a),a=u,i=c):a=Li.ce})).next((()=>{a!==Li.ce&&n(new je(oo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bb(t,e){return Pc(t).put((function(r,i){return{targetId:0,path:fi(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class IG{constructor(){this.changes=new Ol((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return $u(e).put(r)}removeEntry(e,n,r){return $u(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Nw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Ln.newInvalidDocument(n);return $u(e).ee({index:$x,range:IDBKeyRange.only(cm(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:Ln.newInvalidDocument(n)};return $u(e).ee({index:$x,range:IDBKeyRange.only(cm(n))},((i,a)=>{r={document:this.Cr(n,a),size:Ow(a)}})).next((()=>r))}getEntries(e,n){let r=pa();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=pa(),i=new un(je.comparator);return this.Fr(e,n,((a,s)=>{const o=this.Cr(a,s);r=r.insert(a,o),i=i.insert(a,Ow(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return he.resolve();let i=new Kt(j3);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(cm(i.first()),cm(i.last())),s=i.getIterator();let o=s.getNext();return $u(e).ee({index:$x,range:a},((c,u,f)=>{const h=je.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&j3(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(cm(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Nw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $u(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=pa();for(const h of u){const g=this.Cr(je.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(v0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=pa();const s=M3(n,r),o=M3(n,ya.max());return $u(e).ee({index:pq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Cr(je.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new zde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return R3(e).get(nI).next((n=>(We(!!n,20021),n)))}Dr(e,n){return R3(e).put(nI,n)}Cr(e,n){if(n){const r=Sde(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return Ln.newInvalidDocument(e)}}function PG(t){return new jde(t)}class zde extends IG{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ol((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Kt(((a,s)=>ot(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=v3(this.Nr.serializer,s);i=i.add(a.path.popLast());const u=Ow(c);r+=u-o.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=v3(this.Nr.serializer,s.convertToNoDocument(Ze.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),he.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function R3(t){return Ir(t,vv)}function $u(t){return Ir(t,_w)}function cm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M3(t,e){const n=e.documentKey.path.toArray();return[t,Nw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function j3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=ot(n[a],r[a]),i)return i;return i=ot(n.length,r.length),i||(i=ot(n[n.length-2],r[r.length-2]),i||ot(n[n.length-1],r[r.length-1]))}class Lde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class NG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Km(r.mutation,i,Vi.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,yt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=yt()){const i=lo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=km();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=lo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,yt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=pa();const s=Hm(),o=(function(){return Hm()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Rl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Km(f.mutation,u,f.mutation.getFieldMask(),gt.now())):s.set(u.key,Vi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new Lde(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Hm();let i=new un(((s,o)=>s-o)),a=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Vi.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||yt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=Kq();f.forEach((g=>{if(!a.has(g)){const v=eG(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return he.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fq(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):he.resolve(lo());let o=Xh,c=a;return s.next((u=>he.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?he.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,yt()))).next((f=>({batchId:o,changes:Hq(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next((r=>{let i=km();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=km();return this.indexManager.getCollectionParents(e,a).next((o=>he.forEach(o,(c=>{const u=(function(h,g){return new Mp(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,Ln.newInvalidDocument(f)))}));let o=km();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&Km(f.mutation,u,Vi.empty(),gt.now()),v0(n,u)&&(o=o.insert(c,u))})),o}))}}class Vde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return he.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ti(i.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:bG(i.bundledQuery),readTime:Ti(i.readTime)}})(n)),he.resolve()}}class Bde{constructor(){this.overlays=new un(je.comparator),this.qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lo();return he.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),he.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const i=lo(),a=n.length+1,s=new je(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return he.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new un(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=lo(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=lo(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return he.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lD(n,r));let a=this.qr.get(n);a===void 0&&(a=yt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class Fde{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}class hD{constructor(){this.Qr=new Kt(Vr.$r),this.Ur=new Kt(Vr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Vr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Vr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new je(new Lt([])),r=new Vr(n,e),i=new Vr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new je(new Lt([])),r=new Vr(n,e),i=new Vr(n,e+1);let a=yt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Vr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return je.comparator(e.key,n.key)||ot(e.Yr,n.Yr)}static Kr(e,n){return ot(e.Yr,n.Yr)||je.comparator(e.key,n.key)}}class Ude{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Vr.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new sD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Vr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return he.resolve(s)}lookupMutationBatch(e,n){return he.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?bd:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vr(n,0),i=new Vr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(ot);return n.forEach((i=>{const a=new Vr(i,0),s=new Vr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;je.isDocumentKey(a)||(a=a.child(""));const s=new Vr(new je(a),0);let o=new Kt(ot);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),s),he.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(n.mutations,(i=>{const a=new Vr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Vr(n,0),i=this.Zr.firstAfterOrEqual(r);return he.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class $de{constructor(e){this.ri=e,this.docs=(function(){return new un(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(n))}getEntries(e,n){let r=pa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=pa();const s=n.path,o=new je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||WN(lq(f),r)<=0||(i.has(f.key)||v0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ii(e,n){return he.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new qde(this)}getSize(e){return he.resolve(this.size)}}class qde extends IG{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),he.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Gde{constructor(e){this.persistence=e,this.si=new Ol((n=>Od(n)),g0),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.oi=0,this._i=new hD,this.targetCount=0,this.ai=zd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),he.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Pr(n),he.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),he.waitFor(a).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),he.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this._i.containsKey(n))}}class pD{constructor(e,n){this.ui={},this.overlays={},this.ci=new Li(0),this.li=!1,this.li=!0,this.hi=new Fde,this.referenceDelegate=e(this),this.Pi=new Gde(this),this.indexManager=new Pde,this.remoteDocumentCache=(function(i){return new $de(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vG(n),this.Ii=new Vde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Ude(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new Hde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Hde extends uq{constructor(e){super(),this.currentSequenceNumber=e}}class SS{constructor(e){this.persistence=e,this.Ri=new hD,this.Vi=null}static mi(e){return new SS(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const i=je.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Ze.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rw{constructor(e,n){this.persistence=e,this.pi=new Ol((r=>fi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=CG(this,n)}static mi(e,n){return new Rw(e,n)}Ei(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return he.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?he.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,Ze.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gx(e.data.value)),n}br(e,n,r){return he.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Kde{constructor(e){this.serializer=e}k(e,n,r,i){const a=new uS("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(p0)})(e),(function(c){c.createObjectStore(mv,{keyPath:lue}),c.createObjectStore(gs,{keyPath:KL,autoIncrement:!0}).createIndex(ud,WL,{unique:!0}),c.createObjectStore(Qh)})(e),z3(e),(function(c){c.createObjectStore(Yu)})(e));let s=he.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Jh),c.deleteObjectStore(Zh),c.deleteObjectStore(xd)})(e),z3(e)),s=s.next((()=>(function(c){const u=c.store(xd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return u.put(Ew,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(gs).J().next((h=>{c.deleteObjectStore(gs),c.createObjectStore(gs,{keyPath:KL,autoIncrement:!0}).createIndex(ud,WL,{unique:!0});const g=u.store(gs),v=h.map((b=>g.put(b)));return he.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(ep,{keyPath:vue})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(vv)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(fS,{keyPath:yue})})(e),(function(c){c.createObjectStore(hS,{keyPath:bue})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(pS,{keyPath:Aue});u.createIndex(iI,kue,{unique:!1}),u.createIndex(yq,Cue,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(_w,{keyPath:uue});u.createIndex($x,due),u.createIndex(pq,fue)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Yu)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(QN,{keyPath:xue,autoIncrement:!0}).createIndex(rI,wue,{unique:!1}),c.createObjectStore(Um,{keyPath:Sue}).createIndex(mq,_ue,{unique:!1}),c.createObjectStore($m,{keyPath:Eue}).createIndex(vq,Tue,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Um).clear()})).next((()=>{n.objectStore($m).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(ZN,{keyPath:Iue})})(e)}))),r<18&&i>=18&&P$()&&(s=s.next((()=>{n.objectStore(Um).clear()})).next((()=>{n.objectStore($m).clear()}))),s}wi(e){let n=0;return e.store(Yu).ee(((r,i)=>{n+=Ow(i)})).next((()=>{const r={byteSize:n};return e.store(vv).put(nI,r)}))}yi(e){const n=e.store(mv),r=e.store(gs);return n.J().next((i=>he.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,bd],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ud,s).next((o=>he.forEach(o,(c=>{We(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=nd(this.serializer,c);return _G(e,a.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(Jh),r=e.store(Yu);return e.store(xd).get(Ew).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Lt(s),u=(function(h){return[0,fi(h)]})(c);a.push(n.get(u).next((f=>f?he.resolve():(h=>n.put({targetId:0,path:fi(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>he.waitFor(a)))}))}bi(e,n){e.createObjectStore(yv,{keyPath:mue});const r=n.store(yv),i=new fD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:fi(c)})}};return n.store(Yu).ee({X:!0},((s,o)=>{const c=new Lt(s);return a(c.popLast())})).next((()=>n.store(Qh).ee({X:!0},(([s,o,c],u)=>{const f=oo(o);return a(f.popLast())}))))}Di(e){const n=e.store(Zh);return n.ee(((r,i)=>{const a=Im(i),s=yG(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(Yu),i=[];return r.ee(((a,s)=>{const o=n.store(_w),c=(function(h){return h.document?new je(Lt.fromString(h.document.name).popFirst(5)):h.noDocument?je.fromSegments(h.noDocument.path):h.unknownDocument?je.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>he.waitFor(i)))}Fi(e,n){const r=n.store(gs),i=PG(this.serializer),a=new pD(SS.mi,this.serializer.yt);return r.J().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??yt();nd(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),he.forEach(o,((c,u)=>{const f=new oi(u),h=xS.wt(this.serializer,f),g=a.getIndexManager(f),v=wS.wt(f,this.serializer,g,a.referenceDelegate);return new NG(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new aI(n,Li.ce),c).next()}))}))}}function z3(t){t.createObjectStore(Jh,{keyPath:pue}).createIndex(XN,gue,{unique:!0}),t.createObjectStore(Zh,{keyPath:"targetId"}).createIndex(gq,hue,{unique:!0}),t.createObjectStore(xd)}const wc="IndexedDbPersistence",hA=18e5,pA=5e3,gA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wde="main";class gD{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=o,this.xi=u,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!gD.v())throw new De(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mde(this,i),this.$i=n+Wde,this.serializer=new vG(c),this.Ui=new Uc(this.$i,this.Ni,new Kde(this.serializer)),this.hi=new Ede,this.Pi=new Dde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PG(this.serializer),this.Ii=new _de,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Yn(wc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(Ee.FAILED_PRECONDITION,gA);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Li(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(lu(e))return Pe(wc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe(wc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return um(e).get(Qf).next((n=>he.resolve(this.es(n))))}ts(e){return Fb(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hA)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Ir(n,ep);return r.J().next((i=>{const a=this.ss(i,hA),s=i.filter((o=>a.indexOf(o)===-1));return he.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?he.resolve(!0):um(e).get(Qf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,pA)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new De(Ee.FAILED_PRECONDITION,gA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fb(e).J().next((r=>this.ss(r,pA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Pe(wc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[p0,ep],(e=>{const n=new aI(e,Li.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Fb(e).J().next((n=>this.ss(n,hA).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return wS.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nde(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xS.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Pe(wc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?Due:c===17?Sq:c===16?Nue:c===15?JN:c===14?wq:c===13?xq:c===12?Pue:c===11?bq:void Fe(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(o=>(s=new aI(o,this.ci?this.ci.next():Li.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new De(Ee.FAILED_PRECONDITION,cq);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Is(e){return um(e).get(Qf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,pA)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new De(Ee.FAILED_PRECONDITION,gA)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return um(e).put(Qf,n)}static v(){return Uc.v()}Zi(e){const n=um(e);return n.get(Qf).next((r=>this.es(r)?(Pe(wc,"Releasing primary lease."),n.delete(Qf)):he.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Yn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;I$()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return Pe(wc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Yn(wc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function um(t){return Ir(t,p0)}function Fb(t){return Ir(t,ep)}function DG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class mD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=yt(),i=yt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new mD(e,n.fromCache,r,i)}}class Yde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return I$()?8:dq(kr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Yde;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(fh()<=At.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",hh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(fh()<=At.DEBUG&&Pe("QueryEngine","Query:",hh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(fh()<=At.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",hh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(n))):he.resolve())}ys(e,n){if(o3(n))return he.resolve(null);let r=ma(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Cw(n,null,"F"),r=ma(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=yt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,o);return this.Cs(n,u,s,c.readTime)?this.ys(e,Cw(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,i){return o3(n)||i.isEqual(Ze.min())?he.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?he.resolve(null):(fh()<=At.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hh(n)),this.vs(e,s,n,oq(i,Xh)).next((o=>o)))}))}Ds(e,n){let r=new Kt(qq(e));return n.forEach(((i,a)=>{v0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return fh()<=At.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",hh(n)),this.ps.getDocumentsMatchingQuery(e,n,ya.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const vD="LocalStore",Xde=3e8;class Qde{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new un(ot),this.xs=new Ol((a=>Od(a)),g0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function RG(t,e,n,r){return new Qde(t,e,n,r)}async function MG(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=yt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Zde(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=he.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);We(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=yt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function jG(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Jde(t,e){const n=Ge(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Xn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,_){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Xde?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(g,v,f)&&o.push(n.Pi.updateTargetData(a,v))}));let c=pa(),u=yt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(efe(a,s,e.documentUpdates).next((f=>{c=f.ks,u=f.qs}))),!r.isEqual(Ze.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return he.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function efe(t,e,n){let r=yt(),i=yt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=pa();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Ze.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Pe(vD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function tfe(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Mw(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,he.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new rl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function op(t,e,n){const r=Ge(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!lu(s))throw s;Pe(vD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function bI(t,e,n){const r=Ge(t);let i=Ze.min(),a=yt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ge(c),g=h.xs.get(f);return g!==void 0?he.resolve(h.Ms.get(g)):h.Pi.getTargetData(u,f)})(r,s,ma(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ze.min(),n?a:yt()))).next((o=>(VG(r,$q(e),o),{documents:o,Qs:a})))))}function zG(t,e){const n=Ge(t),r=Ge(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function LG(t,e){const n=Ge(t),r=n.Os.get(e)||Ze.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,oq(r,Xh),Number.MAX_SAFE_INTEGER))).then((i=>(VG(n,e,i),i)))}function VG(t,e,n){let r=t.Os.get(e)||Ze.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}const BG="firestore_clients";function L3(t,e){return`${BG}_${t}_${e}`}const FG="firestore_mutations";function V3(t,e,n){let r=`${FG}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const UG="firestore_targets";function mA(t,e){return`${UG}_${t}_${e}`}const so="SharedClientState";class jw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new De(i.error.code,i.error.message))),s?new jw(e,n,i.state,a):(Yn(so,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wm{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new De(r.error.code,r.error.message))),a?new Wm(e,r.state,i):(Yn(so,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=iD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=fq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new zw(e,a):(Yn(so,`Failed to parse client data for instance '${e}': ${n}`),null)}}class yD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new yD(n.clientId,n.onlineState):(Yn(so,`Failed to parse online state: ${e}`),null)}}class xI{constructor(){this.activeTargetIds=iD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vA{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new un(ot),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=L3(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new xI),this.ro=new RegExp(`^${BG}_${s}_([^_]*)$`),this.io=new RegExp(`^${FG}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${UG}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(L3(this.persistenceKey,r));if(i){const a=zw.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(mA(this.persistenceKey,e));if(i){const a=Wm.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Pe(so,"READ",e,n),n}setItem(e,n){Pe(so,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Pe(so,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Pe(so,"EVENT",n.key,n.newValue),n.key===this.eo)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=Li.ce;if(a!=null)try{const o=JSON.parse(a);We(typeof o=="number",30636,{So:a}),s=o}catch(o){Yn(so,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Li.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new jw(this.currentUser,e,n,r),a=V3(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=V3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=mA(this.persistenceKey,e),a=new Wm(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return zw.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return jw.Ws(new oi(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Wm.Ws(i,n)}uo(e){return yD.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Pe(so,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Fo(s,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=iD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class $G{constructor(){this.Mo=new xI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nfe{Oo(e){}shutdown(){}}const B3="ConnectivityMonitor";class F3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(B3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(B3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ub=null;function wI(){return Ub===null?Ub=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ub++,"0x"+Ub.toString(16)}const yA="RestConnection",rfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ife{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Tw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=wI(),o=this.zo(e,n.toUriEncodedString());Pe(yA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(o),f=au(u);return this.Jo(e,o,c,r,f).then((h=>(Pe(yA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw hv(yA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=rfe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class afe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ai="WebChannelConnection";class sfe extends ife{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=wI();return new Promise(((o,c)=>{const u=new Z8;u.setWithCredentials(!0),u.listenOnce(J8.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Bx.NO_ERROR:const h=u.getResponseJson();Pe(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Bx.TIMEOUT:Pe(ai,`RPC '${e}' ${s} timed out`),c(new De(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Bx.HTTP_ERROR:const g=u.getStatus();if(Pe(ai,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(T)>=0?T:Ee.UNKNOWN})(b.status);c(new De(x,b.message))}else c(new De(Ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new De(Ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Pe(ai,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Pe(ai,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=wI(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nq(),o=tq(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");Pe(ai,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,v=!1;const b=new afe({Yo:w=>{v?Pe(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Pe(ai,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Pe(ai,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,_,T)=>{w.listen(_,(I=>{try{T(I)}catch(O){setTimeout((()=>{throw O}),0)}}))};return x(h,Am.EventType.OPEN,(()=>{v||(Pe(ai,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,Am.EventType.CLOSE,(()=>{v||(v=!0,Pe(ai,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,Am.EventType.ERROR,(w=>{v||(v=!0,hv(ai,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new De(Ee.UNAVAILABLE,"The operation could not be completed")))})),x(h,Am.EventType.MESSAGE,(w=>{if(!v){const _=w.data[0];We(!!_,16349);const T=_,I=T?.error||T[0]?.error;if(I){Pe(ai,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let D=(function(P){const R=or[P];if(R!==void 0)return rG(R)})(O),N=I.message;D===void 0&&(D=Ee.INTERNAL,N="Unknown error status: "+O+" with message "+I.message),v=!0,b.a_(new De(D,N)),h.close()}else Pe(ai,`RPC '${e}' stream ${i} received:`,_),b.u_(_)}})),x(o,eq.STAT_EVENT,(w=>{w.stat===JC.PROXY?Pe(ai,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===JC.NOPROXY&&Pe(ai,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function qG(){return typeof window<"u"?window:null}function Xx(){return typeof document<"u"?document:null}function _S(t){return new fde(t,!0)}class GG{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const U3="PersistentStream";class HG{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GG(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new De(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(U3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Pe(U3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ofe extends HG{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gde(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ze.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ze.min():s.readTime?Ti(s.readTime):Ze.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=Aw(c)?{documents:dG(a,c)}:{query:fG(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=sG(a,s.resumeToken);const u=fI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ze.min())>0){o.readTime=sp(a,s.snapshotVersion.toTimestamp());const u=fI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=vde(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pI(this.serializer),n.removeTarget=e,this.q_(n)}}class lfe extends HG{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=mde(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pI(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Pw(this.serializer,r)))};this.q_(n)}}class cfe{}class ufe extends cfe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new De(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,hI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new De(Ee.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,hI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(Ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dfe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ld="RemoteStore";class ffe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{nf(this)&&(Pe(Ld,"Restarting streams for network reachability change."),await(async function(c){const u=Ge(c);u.Ea.add(4),await w0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ES(u)})(this))}))})),this.Ra=new dfe(r,i)}}async function ES(t){if(nf(t))for(const e of t.da)await e(!0)}async function w0(t){for(const e of t.da)await e(!1)}function TS(t,e){const n=Ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wD(n)?xD(n):Lp(n).O_()&&bD(n,e))}function lp(t,e){const n=Ge(t),r=Lp(n);n.Ia.delete(e),r.O_()&&KG(n,e),n.Ia.size===0&&(r.O_()?r.L_():nf(n)&&n.Ra.set("Unknown"))}function bD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lp(t).Y_(e)}function KG(t,e){t.Va.Ue(e),Lp(t).Z_(e)}function xD(t){t.Va=new lde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Lp(t).start(),t.Ra.ua()}function wD(t){return nf(t)&&!Lp(t).x_()&&t.Ia.size>0}function nf(t){return Ge(t).Ea.size===0}function WG(t){t.Va=void 0}async function hfe(t){t.Ra.set("Online")}async function pfe(t){t.Ia.forEach(((e,n)=>{bD(t,e)}))}async function gfe(t,e){WG(t),wD(t)?(t.Ra.ha(e),xD(t)):t.Ra.set("Unknown")}async function mfe(t,e,n){if(t.Ra.set("Online"),e instanceof aG&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){Pe(Ld,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lw(t,r)}else if(e instanceof Wx?t.Va.Ze(e):e instanceof iG?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ze.min()))try{const r=await jG(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Xn.EMPTY_BYTE_STRING,f.snapshotVersion)),KG(a,c);const h=new rl(f.target,c,u,f.sequenceNumber);bD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Pe(Ld,"Failed to raise snapshot:",r),await Lw(t,r)}}async function Lw(t,e,n){if(!lu(e))throw e;t.Ea.add(1),await w0(t),t.Ra.set("Offline"),n||(n=()=>jG(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Pe(Ld,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ES(t)}))}function YG(t,e){return e().catch((n=>Lw(t,n,e)))}async function zp(t){const e=Ge(t),n=Yc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bd;for(;vfe(e);)try{const i=await tfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,yfe(e,i)}catch(i){await Lw(e,i)}XG(e)&&QG(e)}function vfe(t){return nf(t)&&t.Ta.length<10}function yfe(t,e){t.Ta.push(e);const n=Yc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XG(t){return nf(t)&&!Yc(t).x_()&&t.Ta.length>0}function QG(t){Yc(t).start()}async function bfe(t){Yc(t).ra()}async function xfe(t){const e=Yc(t);for(const n of t.Ta)e.ea(n.mutations)}async function wfe(t,e,n){const r=t.Ta.shift(),i=oD.from(r,e,n);await YG(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await zp(t)}async function Sfe(t,e){e&&Yc(t).X_&&await(async function(r,i){if((function(s){return ade(s)&&s!==Ee.ABORTED})(i.code)){const a=r.Ta.shift();Yc(r).B_(),await YG(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await zp(r)}})(t,e),XG(t)&&QG(t)}async function $3(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Pe(Ld,"RemoteStore received new credentials");const r=nf(n);n.Ea.add(3),await w0(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ES(n)}async function SI(t,e){const n=Ge(t);e?(n.Ea.delete(2),await ES(n)):e||(n.Ea.add(2),await w0(n),n.Ra.set("Unknown"))}function Lp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ge(n);return a.sa(),new ofe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:hfe.bind(null,t),t_:pfe.bind(null,t),r_:gfe.bind(null,t),H_:mfe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),wD(t)?xD(t):t.Ra.set("Unknown")):(await t.ma.stop(),WG(t))}))),t.ma}function Yc(t){return t.fa||(t.fa=(function(n,r,i){const a=Ge(n);return a.sa(),new lfe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bfe.bind(null,t),r_:Sfe.bind(null,t),ta:xfe.bind(null,t),na:wfe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await zp(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(Ld,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class SD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new SD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _D(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),lu(t))return new De(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}class Lh{static emptySet(e){return new Lh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=km(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Lh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class q3{constructor(){this.ga=new un(je.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class cp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new cp(e,n,Lh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class _fe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Efe{constructor(){this.queries=G3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ge(n),a=i.queries;i.queries=G3(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new De(Ee.ABORTED,"Firestore shutting down"))}}function G3(){return new Ol((t=>Uq(t)),vS)}async function ED(t,e){const n=Ge(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new _fe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=_D(s,`Initialization of query '${hh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&AD(n)}async function TD(t,e){const n=Ge(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Tfe(t,e){const n=Ge(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&AD(n)}function Afe(t,e,n){const r=Ge(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function AD(t){t.Ca.forEach((e=>{e.next()}))}var _I,H3;(H3=_I||(_I={})).Ma="default",H3.Cache="cache";class kD{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new cp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=cp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_I.Cache}}class ZG{constructor(e){this.key=e}}class JG{constructor(e){this.key=e}}class kfe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=yt(),this.mutatedKeys=yt(),this.eu=qq(e),this.tu=new Lh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new q3,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=v0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new cp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new q3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=yt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new JG(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new ZG(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=yt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return cp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vp="SyncEngine";class Cfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ife{constructor(e){this.key=e,this.hu=!1}}class Pfe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ol((o=>Uq(o)),vS),this.Iu=new Map,this.Eu=new Set,this.du=new un(je.comparator),this.Au=new Map,this.Ru=new hD,this.Vu={},this.mu=new Map,this.fu=zd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nfe(t,e,n=!0){const r=AS(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await e7(r,e,n,!0),i}async function Dfe(t,e){const n=AS(t);await e7(n,e,!0,!1)}async function e7(t,e,n,r){const i=await Mw(t.localStore,ma(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await CD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&TS(t.remoteStore,i),o}async function CD(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,_,T){let I=w.view.ru(_);I.Cs&&(I=await bI(x.localStore,w.query,!1).then((({documents:C})=>w.view.ru(C,I))));const O=T&&T.targetChanges.get(w.targetId),D=T&&T.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(I,x.isPrimaryClient,O,D);return EI(x,w.targetId,N.au),N.snapshot})(t,h,g,v);const a=await bI(t.localStore,e,!0),s=new kfe(e,a.Qs),o=s.ru(a.documents),c=x0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);EI(t,n,u.au);const f=new Cfe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Ofe(t,e,n){const r=Ge(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!vS(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await op(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lp(r.remoteStore,i.targetId),up(r,i.targetId)})).catch(ou)):(up(r,i.targetId),await op(r.localStore,i.targetId,!0))}async function Rfe(t,e){const n=Ge(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lp(n.remoteStore,r.targetId))}async function Mfe(t,e,n){const r=DD(t);try{const i=await(function(s,o){const c=Ge(s),u=gt.now(),f=o.reduce(((v,b)=>v.add(b.key)),yt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=pa(),x=yt();return c.Ns.getEntries(v,f).next((w=>{b=w,b.forEach(((_,T)=>{T.isValidDocument()||(x=x.add(_))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const _=[];for(const T of o){const I=rde(T,h.get(T.key).overlayedDocument);I!=null&&_.push(new Rl(T.key,I,Dq(I.value.mapValue),Tr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,_,o)})).next((w=>{g=w;const _=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,_)}))})).then((()=>({batchId:g.batchId,changes:Hq(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new un(ot)),u=u.insert(o,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,n),await uu(r,i.changes),await zp(r.remoteStore)}catch(i){const a=_D(i,"Failed to persist write");n.reject(a)}}async function t7(t,e){const n=Ge(t);try{const r=await Jde(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?We(s.hu,14607):i.removedDocuments.size>0&&(We(s.hu,42227),s.hu=!1))})),await uu(n,r,e)}catch(r){await ou(r)}}function K3(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ge(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(u=!0)})),u&&AD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jfe(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new un(je.comparator);s=s.insert(a,Ln.newNoDocument(a,Ze.min()));const o=yt().add(a),c=new b0(Ze.min(),new Map,new un(ot),s,o);await t7(r,c),r.du=r.du.remove(a),r.Au.delete(e),ND(r)}else await op(r.localStore,e,!1).then((()=>up(r,e,n))).catch(ou)}async function zfe(t,e){const n=Ge(t),r=e.batch.batchId;try{const i=await Zde(n.localStore,e);PD(n,r,null),ID(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uu(n,i)}catch(i){await ou(i)}}async function Lfe(t,e,n){const r=Ge(t);try{const i=await(function(s,o){const c=Ge(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(We(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);PD(r,e,n),ID(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uu(r,i)}catch(i){await ou(i)}}function ID(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function PD(t,e,n){const r=Ge(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||n7(t,r)}))}function n7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ND(t))}function EI(t,e,n){for(const r of n)r instanceof ZG?(t.Ru.addReference(r.key,e),Vfe(t,r)):r instanceof JG?(Pe(Vp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||n7(t,r.key)):Fe(19791,{wu:r})}function Vfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Pe(Vp,"New document in limbo: "+n),t.Eu.add(r),ND(t))}function ND(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(Lt.fromString(e)),r=t.fu.next();t.Au.set(r,new Ife(n)),t.du=t.du.insert(n,r),TS(t.remoteStore,new rl(ma(m0(n.path)),r,"TargetPurposeLimboResolution",Li.ce))}}async function uu(t,e,n){const r=Ge(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=mD.As(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,u){const f=Ge(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>he.forEach(u,(g=>he.forEach(g.Es,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>he.forEach(g.ds,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!lu(h))throw h;Pe(vD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.Ms.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function Bfe(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Pe(Vp,"User change. New user:",e.toKey());const r=await MG(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new De(Ee.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uu(n,r.Ls)}}function Ffe(t,e){const n=Ge(t),r=n.Au.get(e);if(r&&r.hu)return yt().add(r.key);{let i=yt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function Ufe(t,e){const n=Ge(t),r=await bI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&EI(n,e.targetId,i.au),i}async function $fe(t,e){const n=Ge(t);return LG(n.localStore,e).then((r=>uu(n,r)))}async function qfe(t,e,n,r){const i=Ge(t),a=await(function(o,c){const u=Ge(o),f=Ge(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):he.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await zp(i.remoteStore):n==="acknowledged"||n==="rejected"?(PD(i,e,r||null),ID(i,e),(function(o,c){Ge(Ge(o).mutationQueue).ir(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{Su:n}),await uu(i,a)):Pe(Vp,"Cannot apply mutation batch with id: "+e)}async function Gfe(t,e){const n=Ge(t);if(AS(n),DD(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await W3(n,r.toArray());n.gu=!0,await SI(n.remoteStore,!0);for(const a of i)TS(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(up(n,s),op(n.localStore,s,!0)))),lp(n.remoteStore,s)})),await i,await W3(n,r),(function(s){const o=Ge(s);o.Au.forEach(((c,u)=>{lp(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new un(je.comparator)})(n),n.gu=!1,await SI(n.remoteStore,!1)}}async function W3(t,e,n){const r=Ge(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await Mw(r.localStore,ma(c[0]));for(const u of c){const f=r.Tu.get(u),h=await Ufe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await zG(r.localStore,s);o=await Mw(r.localStore,u),await CD(r,r7(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(a),i}function r7(t){return Bq(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Hfe(t){return(function(n){return Ge(Ge(n).persistence).Ts()})(Ge(t).localStore)}async function Kfe(t,e,n,r){const i=Ge(t);if(i.gu)return void Pe(Vp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await LG(i.localStore,$q(a[0])),o=b0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xn.EMPTY_BYTE_STRING);await uu(i,s,o);break}case"rejected":await op(i.localStore,e,!0),up(i,e,r);break;default:Fe(64155,n)}}async function Wfe(t,e,n){const r=AS(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Pe(Vp,"Adding an already active target "+i);continue}const a=await zG(r.localStore,i),s=await Mw(r.localStore,a);await CD(r,r7(a),s.targetId,!1,s.resumeToken),TS(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await op(r.localStore,i,!1).then((()=>{lp(r.remoteStore,i),up(r,i)})).catch(ou)}}function AS(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ffe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jfe.bind(null,e),e.Pu.H_=Tfe.bind(null,e.eventManager),e.Pu.yu=Afe.bind(null,e.eventManager),e}function DD(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lfe.bind(null,e),e}class Av{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_S(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RG(this.persistence,new OG,e.initialUser,this.serializer)}Cu(e){return new pD(SS.mi,this.serializer)}Du(e){return new $G}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Av.provider={build:()=>new Av};class Yfe extends Av{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Rw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new pD((r=>Rw.mi(r,n)),this.serializer)}}class i7 extends Av{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await DD(this.xu.syncEngine),await zp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return RG(this.persistence,new OG,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new kG(r,e.asyncQueue,n)}Mu(e,n){const r=new sue(n,this.persistence);return new aue(e.asyncQueue,r)}Cu(e){const n=DG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new gD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qG(),Xx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new $G}}class Xfe extends i7{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof vA&&(this.sharedClientState.syncEngine={Co:qfe.bind(null,n),vo:Kfe.bind(null,n),Fo:Wfe.bind(null,n),Ts:Hfe.bind(null,n),Do:$fe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Gfe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=qG();if(!vA.v(n))throw new De(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class kv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bfe.bind(null,this.syncEngine),await SI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Efe})()}createDatastore(e){const n=_S(e.databaseInfo.databaseId),r=(function(a){return new sfe(a)})(e.databaseInfo);return(function(a,s,o,c){return new ufe(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new ffe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>K3(this.syncEngine,n,0)),(function(){return F3.v()?new F3:new nfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new Pfe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ge(n);Pe(Ld,"RemoteStore shutting down."),r.Ea.add(5),await w0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kv.provider={build:()=>new kv};class OD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Xc="FirestoreClient";class Qfe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=KN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Pe(Xc,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Pe(Xc,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_D(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bA(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(Xc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await MG(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Y3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zfe(t);Pe(Xc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>$3(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>$3(e.remoteStore,i))),t._onlineComponents=e}async function Zfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(Xc,"Using user provided OfflineComponentProvider");try{await bA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;hv("Error using user provided cache. Falling back to memory cache: "+n),await bA(t,new Av)}}else Pe(Xc,"Using default OfflineComponentProvider"),await bA(t,new Yfe(void 0));return t._offlineComponents}async function a7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(Xc,"Using user provided OnlineComponentProvider"),await Y3(t,t._uninitializedComponentsProvider._online)):(Pe(Xc,"Using default OnlineComponentProvider"),await Y3(t,new kv))),t._onlineComponents}function Jfe(t){return a7(t).then((e=>e.syncEngine))}async function Vw(t){const e=await a7(t),n=e.eventManager;return n.onListen=Nfe.bind(null,e.syncEngine),n.onUnlisten=Ofe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rfe.bind(null,e.syncEngine),n}function ehe(t,e,n={}){const r=new po;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new OD({next:g=>{f.Nu(),s.enqueueAndForget((()=>TD(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new De(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new De(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new kD(m0(o.path),f,{includeMetadataChanges:!0,qa:!0});return ED(a,h)})(await Vw(t),t.asyncQueue,e,n,r))),r.promise}function the(t,e,n={}){const r=new po;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new OD({next:g=>{f.Nu(),s.enqueueAndForget((()=>TD(a,h))),g.fromCache&&c.source==="server"?u.reject(new De(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new kD(o,f,{includeMetadataChanges:!0,qa:!0});return ED(a,h)})(await Vw(t),t.asyncQueue,e,n,r))),r.promise}function s7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const X3=new Map;const nhe="firestore.googleapis.com",Q3=!0;class Z3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new De(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nhe,this.ssl=Q3}else this.host=e.host,this.ssl=e.ssl??Q3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AG)throw new De(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new De(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new De(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new De(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RD{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Kce;switch(r.type){case"firstParty":return new Xce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new De(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=X3.get(n);r&&(Pe("ComponentProvider","Removing Datastore"),X3.delete(n),r.terminate())})(this),Promise.resolve()}}class Ml{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class Vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}toJSON(){return{type:Vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(h0(n,Vn._jsonSchema))return new Vn(e,r||null,new je(Lt.fromString(n.referencePath)))}}Vn._jsonSchemaVersion="firestore/documentReference/1.0",Vn._jsonSchema={type:dr("string",Vn._jsonSchemaVersion),referencePath:dr("string")};class $c extends Ml{constructor(e,n,r){super(e,n,m0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new je(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function ei(t,e,...n){if(t=Vt(t),aq("collection","path",e),t instanceof RD){const r=Lt.fromString(e,...n);return UL(r),new $c(t,null,r)}{if(!(t instanceof Vn||t instanceof $c))throw new De(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return UL(r),new $c(t.firestore,null,r)}}function _t(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=KN.newId()),aq("doc","path",e),t instanceof RD){const r=Lt.fromString(e,...n);return FL(r),new Vn(t,null,new je(r))}{if(!(t instanceof Vn||t instanceof $c))throw new De(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return FL(r),new Vn(t.firestore,t instanceof $c?t.converter:null,new je(r))}}const J3="AsyncQueue";class e5{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GG(this,"async_queue_retry"),this._c=()=>{const r=Xx();r&&Pe(J3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new po;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lu(e))throw e;Pe(J3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",t5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=SD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:t5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function n5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class _o extends RD{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new e5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e5(e),this._firestoreClient=void 0,await e}}}function rhe(t,e,n){n||(n=Tw);const r=Np(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Hc(a,e))return i;throw new De(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new De(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AG)throw new De(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&au(e.host)&&CN(e.host),r.initialize({options:e,instanceIdentifier:n})}function S0(t){if(t._terminated)throw new De(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ihe(t),t._firestoreClient}function ihe(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new Rue(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,s7(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Qfe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fa(Xn.fromBase64String(e))}catch(n){throw new De(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fa(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(h0(e,Fa._jsonSchema))return Fa.fromBase64String(e.bytes)}}Fa._jsonSchemaVersion="firestore/bytes/1.0",Fa._jsonSchema={type:dr("string",Fa._jsonSchemaVersion),bytes:dr("string")};class _0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new De(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kS{constructor(e){this._methodName=e}}class go{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new De(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new De(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:go._jsonSchemaVersion}}static fromJSON(e){if(h0(e,go._jsonSchema))return new go(e.latitude,e.longitude)}}go._jsonSchemaVersion="firestore/geoPoint/1.0",go._jsonSchema={type:dr("string",go._jsonSchemaVersion),latitude:dr("number"),longitude:dr("number")};class mo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(h0(e,mo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mo(e.vectorValues);throw new De(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mo._jsonSchemaVersion="firestore/vectorValue/1.0",mo._jsonSchema={type:dr("string",mo._jsonSchemaVersion),vectorValues:dr("object")};const ahe=/^__.*__$/;class she{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new jp(e,this.data,n,this.fieldTransforms)}}class o7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function l7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class CS{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new CS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bw(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(l7(this.Ac)&&ahe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ohe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_S(e)}Cc(e,n,r,i=!1){return new CS({Ac:e,methodName:n,Dc:r,path:Cn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function E0(t){const e=t._freezeSettings(),n=_S(t._databaseId);return new ohe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MD(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);zD("Data must be an object, but it was:",s,r);const o=d7(r,s);let c,u;if(a.merge)c=new Vi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=TI(e,h,n);if(!s.contains(g))throw new De(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);h7(f,g)||f.push(g)}c=new Vi(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new she(new ui(o),c,u)}class T0 extends kS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T0}}function lhe(t,e,n){return new CS({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jD extends kS{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=lhe(this,e,!0),r=this.vc.map((a=>Bp(a,n))),i=new Rd(r);return new Jq(e.path,i)}isEqual(e){return e instanceof jD&&Hc(this.vc,e.vc)}}function c7(t,e,n,r){const i=t.Cc(1,e,n);zD("Data must be an object, but it was:",i,r);const a=[],s=ui.empty();cu(r,((c,u)=>{const f=LD(e,c,n);u=Vt(u);const h=i.yc(f);if(u instanceof T0)a.push(f);else{const g=Bp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Vi(a);return new o7(s,o,i.fieldTransforms)}function u7(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[TI(e,r,n)],c=[i];if(a.length%2!=0)throw new De(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(TI(e,a[g])),c.push(a[g+1]);const u=[],f=ui.empty();for(let g=o.length-1;g>=0;--g)if(!h7(u,o[g])){const v=o[g];let b=c[g];b=Vt(b);const x=s.yc(v);if(b instanceof T0)u.push(v);else{const w=Bp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Vi(u);return new o7(f,h,s.fieldTransforms)}function che(t,e,n,r=!1){return Bp(n,t.Cc(r?4:3,e))}function Bp(t,e){if(f7(t=Vt(t)))return zD("Unsupported field value:",e,t),d7(t,e);if(t instanceof kS)return(function(r,i){if(!l7(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Bp(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Que(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:sp(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sp(i.serializer,a)}}if(r instanceof go)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fa)return{bytesValue:sG(i.serializer,r._byteString)};if(r instanceof Vn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:uD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mo)return(function(s,o){return{mapValue:{fields:{[tD]:{stringValue:nD},[tp]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return aD(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${cS(r)}`)})(t,e)}function d7(t,e){const n={};return _q(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(t,((r,i)=>{const a=Bp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function f7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof go||t instanceof Fa||t instanceof Vn||t instanceof kS||t instanceof mo)}function zD(t,e,n){if(!f7(n)||!sq(n)){const r=cS(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function TI(t,e,n){if((e=Vt(e))instanceof _0)return e._internalPath;if(typeof e=="string")return LD(t,e);throw Bw("Field path arguments must be of type string or ",t,!1,void 0,n)}const uhe=new RegExp("[~\\*/\\[\\]]");function LD(t,e,n){if(e.search(uhe)>=0)throw Bw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _0(...e.split("."))._internalPath}catch{throw Bw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bw(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new De(Ee.INVALID_ARGUMENT,o+t+c)}function h7(t,e){return t.some((n=>n.isEqual(e)))}class p7{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(IS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dhe extends p7{data(){return super.data()}}function IS(t,e){return typeof e=="string"?LD(t,e):e instanceof _0?e._internalPath:e._delegate._internalPath}function g7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new De(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VD{}class BD extends VD{}function Bi(t,e,...n){let r=[];e instanceof VD&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof FD)).length,o=a.filter((c=>c instanceof PS)).length;if(s>1||s>0&&o>0)throw new De(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class PS extends BD{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new PS(e,n,r)}_apply(e){const n=this._parse(e);return m7(e._query,n),new Ml(e.firestore,e.converter,dI(e._query,n))}_parse(e){const n=E0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new De(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){a5(h,f);const b=[];for(const x of h)b.push(i5(c,a,x));g={arrayValue:{values:b}}}else g=i5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||a5(h,f),g=che(o,s,h,f==="in"||f==="not-in");return Ct.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qx(t,e,n){const r=e,i=IS("where",t);return PS._create(i,r,n)}class FD extends VD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new FD(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)m7(s,c),s=dI(s,c)})(e._query,n),new Ml(e.firestore,e.converter,dI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class UD extends BD{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new UD(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new De(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new De(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _v(a,s)})(e._query,this._field,this._direction);return new Ml(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Mp(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function _s(t,e="asc"){const n=e,r=IS("orderBy",t);return UD._create(r,n)}class $D extends BD{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $D(e,n,r)}_apply(e){return new Ml(e.firestore,e.converter,Cw(e._query,this._limit,this._limitType))}}function r5(t){return $D._create("limit",t,"F")}function i5(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new De(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fq(e)&&n.indexOf("/")!==-1)throw new De(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!je.isDocumentKey(r))throw new De(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wv(t,new je(r))}if(n instanceof Vn)return wv(t,n._key);throw new De(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cS(n)}.`)}function a5(t,e){if(!Array.isArray(t)||t.length===0)throw new De(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m7(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new De(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new De(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fhe{convertValue(e,n="none"){switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[tp].arrayValue?.values?.map((r=>wn(r.doubleValue)));return new mo(n)}convertGeoPoint(e){return new go(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bv(e));default:return null}}convertTimestamp(e){const n=bl(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);We(mG(r),9688,{name:e});const i=new Dd(r.get(1),r.get(3)),a=new je(r.popFirst(5));return i.isEqual(n)||Yn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function qD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Pm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sd extends p7{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(IS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sd._jsonSchema={type:dr("string",Sd._jsonSchemaVersion),bundleSource:dr("string","DocumentSnapshot"),bundleName:dr("string"),bundle:dr("string")};class Zx extends Sd{data(e={}){return super.data(e)}}class _d{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Zx(this._firestore,this._userDataWriter,r.key,r,new Pm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new De(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new Zx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new Zx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:hhe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_d._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=KN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hhe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}function xA(t){t=Gi(t,Vn);const e=Gi(t.firestore,_o);return ehe(S0(e),t._key).then((n=>v7(e,t,n)))}_d._jsonSchemaVersion="firestore/querySnapshot/1.0",_d._jsonSchema={type:dr("string",_d._jsonSchemaVersion),bundleSource:dr("string","QuerySnapshot"),bundleName:dr("string"),bundle:dr("string")};class GD extends fhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,n)}}function oa(t){t=Gi(t,Ml);const e=Gi(t.firestore,_o),n=S0(e),r=new GD(e);return g7(t._query),the(n,t._query).then((i=>new _d(e,r,t,i)))}function ca(t,e,n){t=Gi(t,Vn);const r=Gi(t.firestore,_o),i=qD(t.converter,e,n);return A0(r,[MD(E0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tr.none())])}function ao(t,e,n,...r){t=Gi(t,Vn);const i=Gi(t.firestore,_o),a=E0(i);let s;return s=typeof(e=Vt(e))=="string"||e instanceof _0?u7(a,"updateDoc",t._key,e,n,r):c7(a,"updateDoc",t._key,e),A0(i,[s.toMutation(t._key,Tr.exists(!0))])}function da(t){return A0(Gi(t.firestore,_o),[new y0(t._key,Tr.none())])}function NS(t,e){const n=Gi(t.firestore,_o),r=_t(t),i=qD(t.converter,e);return A0(n,[MD(E0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tr.exists(!1))]).then((()=>r))}function Qc(t,...e){t=Vt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||n5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(n5(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof Vn)s=Gi(t.firestore,_o),o=m0(t._key.path),a={next:c=>{e[r]&&e[r](v7(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Gi(t,Ml);s=Gi(c.firestore,_o),o=c._query;const u=new GD(s);a={next:f=>{e[r]&&e[r](new _d(s,u,c,f))},error:e[r+1],complete:e[r+2]},g7(t._query)}return(function(u,f,h,g){const v=new OD(g),b=new kD(f,v,h);return u.asyncQueue.enqueueAndForget((async()=>ED(await Vw(u),b))),()=>{v.Nu(),u.asyncQueue.enqueueAndForget((async()=>TD(await Vw(u),b)))}})(S0(s),o,i,a)}function A0(t,e){return(function(r,i){const a=new po;return r.asyncQueue.enqueueAndForget((async()=>Mfe(await Jfe(r),i,a))),a.promise})(S0(t),e)}function v7(t,e,n){const r=n.docs.get(e._key),i=new GD(t);return new Sd(t,i,e._key,r,new Pm(n.hasPendingWrites,n.fromCache),e.converter)}class phe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=yhe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function ghe(t){return new phe(t)}class mhe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kv.provider,this._offlineComponentProvider={build:n=>new i7(n,e?.cacheSizeBytes,this.forceOwnership)}}}class vhe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kv.provider,this._offlineComponentProvider={build:n=>new Xfe(n,e?.cacheSizeBytes)}}}function yhe(t){return new mhe(t?.forceOwnership)}function bhe(){return new vhe}class xhe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=E0(e)}set(e,n,r){this._verifyNotCommitted();const i=wA(e,this._firestore),a=qD(i.converter,n,r),s=MD(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Tr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=wA(e,this._firestore);let s;return s=typeof(n=Vt(n))=="string"||n instanceof _0?u7(this._dataReader,"WriteBatch.update",a._key,n,r,i):c7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wA(e,this._firestore);return this._mutations=this._mutations.concat(new y0(n._key,Tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wA(t,e){if((t=Vt(t)).firestore!==e)throw new De(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function s5(){return new T0("deleteField")}function whe(...t){return new jD("arrayUnion",t)}function AI(t){return S0(t=Gi(t,_o)),new xhe(t,(e=>A0(t,e)))}(function(e,n=!0){(function(i){Rp=i})(Dp),gl(new wo("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new _o(new Wce(r.getProvider("auth-internal")),new Qce(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new De(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dd(u.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Ss(zL,LL,e),Ss(zL,LL,"esm2020")})();const kI=new Map,y7={activated:!1,tokenObservers:[]},She={initialized:!1,enabled:!1};function Ar(t){return kI.get(t)||{...y7}}function _he(t,e){return kI.set(t,e),kI.get(t)}function DS(){return She}const b7="https://content-firebaseappcheck.googleapis.com/v1",Ehe="exchangeRecaptchaEnterpriseToken",The="exchangeDebugToken",o5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Ahe=1440*60*1e3;class khe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ov,this.pending.promise.catch(n=>{}),await Che(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ov,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Che(t){return new Promise(e=>{setTimeout(e,t)})}const Ihe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fi=new Pp("appCheck","AppCheck",Ihe);function l5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function HD(t){if(!Ar(t).activated)throw Fi.create("use-before-activation",{appName:t.name})}function x7(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=$b(n)+"d:"),r&&(s+=$b(r)+"h:"),s+=$b(i)+"m:"+$b(a)+"s",s}function $b(t){return t===0?"00":t>=10?t.toString():"0"+t}async function KD({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw Fi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw Fi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw Fi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function Phe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${b7}/projects/${n}/apps/${r}:${Ehe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function w7(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${b7}/projects/${n}/apps/${r}:${The}?key=${i}`,body:{debug_token:e}}}const Nhe="firebase-app-check-database",Dhe=1,Cv="firebase-app-check-store",S7="debug-token";let qb=null;function _7(){return qb||(qb=new Promise((t,e)=>{try{const n=indexedDB.open(Nhe,Dhe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Fi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Cv,{keyPath:"compositeKey"})}}}catch(n){e(Fi.create("storage-open",{originalErrorMessage:n?.message}))}}),qb)}function Ohe(t){return T7(A7(t))}function Rhe(t,e){return E7(A7(t),e)}function Mhe(t){return E7(S7,t)}function jhe(){return T7(S7)}async function E7(t,e){const r=(await _7()).transaction(Cv,"readwrite"),a=r.objectStore(Cv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(Fi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function T7(t){const n=(await _7()).transaction(Cv,"readonly"),i=n.objectStore(Cv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(Fi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function A7(t){return`${t.options.appId}-${t.name}`}const Rc=new rS("@firebase/app-check");async function zhe(t){if(nS()){let e;try{e=await Ohe(t)}catch(n){Rc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function SA(t,e){return nS()?Rhe(t,e).catch(n=>{Rc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Lhe(){let t;try{t=await jhe()}catch{}if(t)return t;{const e=crypto.randomUUID();return Mhe(e).catch(n=>Rc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function WD(){return DS().enabled}async function YD(){const t=DS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Vhe(){const t=kN(),e=DS();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new ov;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Lhe())}const Bhe={error:"UNKNOWN_ERROR"};function Fhe(t){return AN.encodeString(JSON.stringify(t),!1)}async function CI(t,e=!1,n=!1){const r=t.app;HD(r);const i=Ar(r);let a=i.token,s;if(a&&!xh(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(xh(u)?a=u:await SA(r,void 0))}if(!e&&a&&xh(a))return{token:a.token};let o=!1;if(WD())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=KD(w7(r,await YD()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await SA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Rc.warn(u.message):n&&Rc.error(u),_A(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await Ar(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Rc.warn(u.message):n&&Rc.error(u),s=u}let c;return a?s?xh(a)?c={token:a.token,internalError:s}:c=_A(s):(c={token:a.token},i.token=a,await SA(r,a)):c=_A(s),o&&I7(r,c),c}async function Uhe(t){const e=t.app;HD(e);const{provider:n}=Ar(e);if(WD()){const r=await YD(),{token:i}=await KD(w7(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function k7(t,e,n,r){const{app:i}=t,a=Ar(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&xh(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),c5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>c5(t))}function C7(t,e){const n=Ar(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function c5(t){const{app:e}=t,n=Ar(e);let r=n.tokenRefresher;r||(r=$he(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $he(t){const{app:e}=t;return new khe(async()=>{const n=Ar(e);let r;if(n.token?r=await CI(t,!0):r=await CI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ar(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},o5.RETRIAL_MIN_WAIT,o5.RETRIAL_MAX_WAIT)}function I7(t,e){const n=Ar(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xh(t){return t.expireTimeMillis-Date.now()>0}function _A(t){return{token:Fhe(Bhe),error:t}}class qhe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ar(this.app);for(const n of e)C7(this.app,n.next);return Promise.resolve()}}function Ghe(t,e){return new qhe(t,e)}function Hhe(t){return{getToken:e=>CI(t,e),getLimitedUseToken:()=>Uhe(t),addTokenListener:e=>k7(t,"INTERNAL",e),removeTokenListener:e=>C7(t.app,e)}}const Khe="@firebase/app-check",Whe="0.11.0",Yhe="https://www.google.com/recaptcha/enterprise.js";function Xhe(t,e){const n=new ov,r=Ar(t);r.reCAPTCHAState={initialized:n};const i=Qhe(t),a=l5(!0);return a?u5(t,e,a,i,n):epe(()=>{const s=l5(!0);if(!s)throw new Error("no recaptcha");u5(t,e,s,i,n)}),n.promise}function u5(t,e,n,r,i){n.ready(()=>{Jhe(t,e,n,r),i.resolve(n)})}function Qhe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Zhe(t){HD(t);const n=await Ar(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=Ar(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Jhe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Ar(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ar(t).reCAPTCHAState.succeeded=!1}}),a=Ar(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function epe(t){const e=document.createElement("script");e.src=Yhe,e.onload=t,document.head.appendChild(e)}class XD{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){npe(this._throttleData);const e=await Zhe(this._app).catch(r=>{throw Fi.create("recaptcha-error")});if(!Ar(this._app).reCAPTCHAState?.succeeded)throw Fi.create("recaptcha-error");let n;try{n=await KD(Phe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=tpe(Number(r.customData?.httpStatus),this._throttleData),Fi.create("initial-throttle",{time:x7(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Np(e,"heartbeat"),Xhe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof XD?this._siteKey===e._siteKey:!1}}function tpe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Ahe,httpStatus:t};{const n=e?e.backoffCount:0,r=qne(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function npe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Fi.create("throttled",{time:x7(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function rpe(t=PN(),e){t=Vt(t);const n=Np(t,"app-check");if(DS().initialized||Vhe(),WD()&&YD().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw Fi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return ipe(t,e.provider,e.isTokenAutoRefreshEnabled),Ar(t).isTokenAutoRefreshEnabled&&k7(r,"INTERNAL",()=>{}),r}function ipe(t,e,n=!1){const r=_he(t,{...y7});r.activated=!0,r.provider=e,r.cachedTokenPromise=zhe(t).then(i=>(i&&xh(i)&&(r.token=i,I7(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Rc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const ape="app-check",d5="app-check-internal";function spe(){gl(new wo(ape,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Ghe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(d5).initialize()})),gl(new wo(d5,t=>{const e=t.getProvider("app-check").getImmediate();return Hhe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ss(Khe,Whe)}spe();const ope={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},QD=O$(ope);rpe(QD,{provider:new XD("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const yi=v8(QD),tt=rhe(QD,{localCache:ghe({tabManager:bhe()})}),$={log:(...t)=>console.log(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t)},f5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Gb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),nn=GN()(X8(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await aae(yi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await dL(yi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Gb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await iae(yi,e,n)).user;await oae(a,{displayName:r}),await uL(a,f5());const s=Gb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await dL(yi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await tae(yi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=yi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await uL(e,f5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=nn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=yi.currentUser;if(!e)return!1;try{await e.reload();const n=yi.currentUser;if(n?.emailVerified){const r=Gb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=yi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Zd.credential(n.email,e);return await Jie(n,r),await dae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await nae(yi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>nn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),uae(yi,async r=>{const i=Date.now(),a=nn.getState(),s=r?Gb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){$.log(" Loading budgetStore to check onboarding...");const v=await qh(()=>Promise.resolve().then(()=>gY),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),P7=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],lpe=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=P7.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},OS=t=>{const e=P7.map(i=>({...i,met:i.regex.test(t)})),n=lpe(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},N7=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=OS(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},D7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=OS(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx($8,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(f0,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},cpe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:_,loginError:T,clearError:I}=nn(),O=OS(n),D=async C=>{if(C.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!O.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},N=async C=>{C.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:N,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(QC,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:_,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(QC,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(yl,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:_||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:_?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:_,children:[m.jsx(yl,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:_,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:_})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:_,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!O.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:_,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:_,children:s?m.jsx(q8,{className:"h-5 w-5"}):m.jsx(G8,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(N7,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(D7,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:_||!t.trim()||!n.trim()||c&&!i.trim()||c&&!O.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:_?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:_,children:[m.jsx(Ice,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},upe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=nn(),x=OS(r);A.useEffect(()=>{b()},[b]);const w=async _=>{if(_.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(xw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(NL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(q8,{className:"h-5 w-5"}):m.jsx(G8,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(N7,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(NL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:_=>s(_.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(D7,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(yl,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},O7=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=nn();A.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(QC,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(xw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(Kh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Kh,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(yl,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},R7=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(Kh,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(Wh,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),ZD=A.createContext({});function RS(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const JD=typeof window<"u",e2=JD?A.useLayoutEffect:A.useEffect,MS=A.createContext(null);function t2(t,e){t.indexOf(e)===-1&&t.push(e)}function n2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const wl=(t,e,n)=>n>e?e:n<t?t:n;let r2=()=>{};const Sl={},M7=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function j7(t){return typeof t=="object"&&t!==null}const z7=t=>/^0[^.\s]+$/u.test(t);function i2(t){let e;return()=>(e===void 0&&(e=t()),e)}const qa=t=>t,dpe=(t,e)=>n=>e(t(n)),k0=(...t)=>t.reduce(dpe),Iv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class a2{constructor(){this.subscriptions=[]}add(e){return t2(this.subscriptions,e),()=>n2(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vo=t=>t*1e3,Ua=t=>t/1e3;function L7(t,e){return e?t*(1e3/e):0}const V7=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fpe=1e-7,hpe=12;function ppe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=V7(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>fpe&&++o<hpe);return s}function C0(t,e,n,r){if(t===e&&n===r)return qa;const i=a=>ppe(a,0,1,t,n);return a=>a===0||a===1?a:V7(i(a),e,r)}const B7=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,F7=t=>e=>1-t(1-e),U7=C0(.33,1.53,.69,.99),s2=F7(U7),$7=B7(s2),q7=t=>(t*=2)<1?.5*s2(t):.5*(2-Math.pow(2,-10*(t-1))),o2=t=>1-Math.sin(Math.acos(t)),G7=F7(o2),H7=B7(o2),gpe=C0(.42,0,1,1),mpe=C0(0,0,.58,1),K7=C0(.42,0,.58,1),vpe=t=>Array.isArray(t)&&typeof t[0]!="number",W7=t=>Array.isArray(t)&&typeof t[0]=="number",ype={linear:qa,easeIn:gpe,easeInOut:K7,easeOut:mpe,circIn:o2,circInOut:H7,circOut:G7,backIn:s2,backInOut:$7,backOut:U7,anticipate:q7},bpe=t=>typeof t=="string",h5=t=>{if(W7(t)){r2(t.length===4);const[e,n,r,i]=t;return C0(e,n,r,i)}else if(bpe(t))return ype[t];return t},Hb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xpe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const wpe=40;function Y7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Hb.reduce((I,O)=>(I[O]=xpe(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const I=Sl.useManualTiming?i.timestamp:performance.now();n=!1,Sl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,wpe),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Hb.reduce((I,O)=>{const D=s[O];return I[O]=(N,C=!1,P=!1)=>(n||w(),D.schedule(N,C,P)),I},{}),cancel:I=>{for(let O=0;O<Hb.length;O++)s[Hb[O]].cancel(I)},state:i,steps:s}}const{schedule:Sn,cancel:Zc,state:Jr,steps:EA}=Y7(typeof requestAnimationFrame<"u"?requestAnimationFrame:qa,!0);let Jx;function Spe(){Jx=void 0}const Ui={now:()=>(Jx===void 0&&Ui.set(Jr.isProcessing||Sl.useManualTiming?Jr.timestamp:performance.now()),Jx),set:t=>{Jx=t,queueMicrotask(Spe)}},X7=t=>e=>typeof e=="string"&&e.startsWith(t),l2=X7("--"),_pe=X7("var(--"),c2=t=>_pe(t)?Epe.test(t.split("/*")[0].trim()):!1,Epe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pv={...Fp,transform:t=>wl(0,1,t)},Kb={...Fp,default:1},Ym=t=>Math.round(t*1e5)/1e5,u2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tpe(t){return t==null}const Ape=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,d2=(t,e)=>n=>!!(typeof n=="string"&&Ape.test(n)&&n.startsWith(t)||e&&!Tpe(n)&&Object.prototype.hasOwnProperty.call(n,e)),Q7=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(u2);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},kpe=t=>wl(0,255,t),TA={...Fp,transform:t=>Math.round(kpe(t))},dd={test:d2("rgb","red"),parse:Q7("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+TA.transform(t)+", "+TA.transform(e)+", "+TA.transform(n)+", "+Ym(Pv.transform(r))+")"};function Cpe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const II={test:d2("#"),parse:Cpe,transform:dd.transform},I0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_c=I0("deg"),yo=I0("%"),st=I0("px"),Ipe=I0("vh"),Ppe=I0("vw"),p5={...yo,parse:t=>yo.parse(t)/100,transform:t=>yo.transform(t*100)},wh={test:d2("hsl","hue"),parse:Q7("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yo.transform(Ym(e))+", "+yo.transform(Ym(n))+", "+Ym(Pv.transform(r))+")"},lr={test:t=>dd.test(t)||II.test(t)||wh.test(t),parse:t=>dd.test(t)?dd.parse(t):wh.test(t)?wh.parse(t):II.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dd.transform(t):wh.transform(t),getAnimatableNone:t=>{const e=lr.parse(t);return e.alpha=0,lr.transform(e)}},Npe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Dpe(t){return isNaN(t)&&typeof t=="string"&&(t.match(u2)?.length||0)+(t.match(Npe)?.length||0)>0}const Z7="number",J7="color",Ope="var",Rpe="var(",g5="${}",Mpe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Mpe,c=>(lr.test(c)?(r.color.push(a),i.push(J7),n.push(lr.parse(c))):c.startsWith(Rpe)?(r.var.push(a),i.push(Ope),n.push(c)):(r.number.push(a),i.push(Z7),n.push(parseFloat(c))),++a,g5)).split(g5);return{values:n,split:o,indexes:r,types:i}}function eH(t){return Nv(t).values}function tH(t){const{split:e,types:n}=Nv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===Z7?a+=Ym(i[s]):o===J7?a+=lr.transform(i[s]):a+=i[s]}return a}}const jpe=t=>typeof t=="number"?0:lr.test(t)?lr.getAnimatableNone(t):t;function zpe(t){const e=eH(t);return tH(t)(e.map(jpe))}const Jc={test:Dpe,parse:eH,createTransformer:tH,getAnimatableNone:zpe};function AA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Lpe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=AA(c,o,t+1/3),a=AA(c,o,t),s=AA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Fw(t,e){return n=>n>0?e:t}const In=(t,e,n)=>t+(e-t)*n,kA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Vpe=[II,dd,wh],Bpe=t=>Vpe.find(e=>e.test(t));function m5(t){const e=Bpe(t);if(!e)return!1;let n=e.parse(t);return e===wh&&(n=Lpe(n)),n}const v5=(t,e)=>{const n=m5(t),r=m5(e);if(!n||!r)return Fw(t,e);const i={...n};return a=>(i.red=kA(n.red,r.red,a),i.green=kA(n.green,r.green,a),i.blue=kA(n.blue,r.blue,a),i.alpha=In(n.alpha,r.alpha,a),dd.transform(i))},PI=new Set(["none","hidden"]);function Fpe(t,e){return PI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Upe(t,e){return n=>In(t,e,n)}function f2(t){return typeof t=="number"?Upe:typeof t=="string"?c2(t)?Fw:lr.test(t)?v5:Gpe:Array.isArray(t)?nH:typeof t=="object"?lr.test(t)?v5:$pe:Fw}function nH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>f2(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function $pe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=f2(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function qpe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Gpe=(t,e)=>{const n=Jc.createTransformer(e),r=Nv(t),i=Nv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?PI.has(t)&&!i.values.length||PI.has(e)&&!r.values.length?Fpe(t,e):k0(nH(qpe(r,i),i.values),n):Fw(t,e)};function rH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?In(t,e,n):f2(t)(t,e)}const Hpe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Sn.update(e,n),stop:()=>Zc(e),now:()=>Jr.isProcessing?Jr.timestamp:Ui.now()}},iH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Uw=2e4;function h2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Uw;)e+=n,r=t.next(e);return e>=Uw?1/0:e}function Kpe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(h2(r),Uw);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Ua(i)}}const Wpe=5;function aH(t,e,n){const r=Math.max(e-Wpe,0);return L7(n-t(r),e-r)}const Mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},CA=.001;function Ype({duration:t=Mn.duration,bounce:e=Mn.bounce,velocity:n=Mn.velocity,mass:r=Mn.mass}){let i,a,s=1-e;s=wl(Mn.minDamping,Mn.maxDamping,s),t=wl(Mn.minDuration,Mn.maxDuration,Ua(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=NI(u,s),b=Math.exp(-h);return CA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=NI(Math.pow(u,2),s);return(-i(u)+CA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-CA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Qpe(i,a,o);if(t=vo(t),isNaN(c))return{stiffness:Mn.stiffness,damping:Mn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Xpe=12;function Qpe(t,e,n){let r=n;for(let i=1;i<Xpe;i++)r=r-t(r)/e(r);return r}function NI(t,e){return t*Math.sqrt(1-e*e)}const Zpe=["duration","bounce"],Jpe=["stiffness","damping","mass"];function y5(t,e){return e.some(n=>t[n]!==void 0)}function ege(t){let e={velocity:Mn.velocity,stiffness:Mn.stiffness,damping:Mn.damping,mass:Mn.mass,isResolvedFromDuration:!1,...t};if(!y5(t,Jpe)&&y5(t,Zpe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*wl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mn.mass,stiffness:i,damping:a}}else{const n=Ype(t);e={...e,...n,mass:Mn.mass},e.isResolvedFromDuration=!0}return e}function $w(t=Mn.visualDuration,e=Mn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=ege({...n,velocity:-Ua(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,_=Ua(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Mn.restSpeed.granular:Mn.restSpeed.default),i||(i=T?Mn.restDelta.granular:Mn.restDelta.default);let I;if(x<1){const D=NI(_,x);I=N=>{const C=Math.exp(-x*_*N);return s-C*((b+x*_*w)/D*Math.sin(D*N)+w*Math.cos(D*N))}}else if(x===1)I=D=>s-Math.exp(-_*D)*(w+(b+_*w)*D);else{const D=_*Math.sqrt(x*x-1);I=N=>{const C=Math.exp(-x*_*N),P=Math.min(D*N,300);return s-C*((b+x*_*w)*Math.sinh(P)+D*w*Math.cosh(P))/D}}const O={calculatedDuration:v&&h||null,next:D=>{const N=I(D);if(v)o.done=D>=h;else{let C=D===0?b:0;x<1&&(C=D===0?vo(b):aH(I,D,N));const P=Math.abs(C)<=r,R=Math.abs(s-N)<=i;o.done=P&&R}return o.value=o.done?s:N,o},toString:()=>{const D=Math.min(h2(O),Uw),N=iH(C=>O.next(D*C).value,D,30);return D+"ms "+N},toTransition:()=>{}};return O}$w.applyToOptions=t=>{const e=Kpe(t,100,$w);return t.ease=e.ease,t.duration=vo(e.duration),t.type="keyframes",t};function DI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=P=>o!==void 0&&P<o||c!==void 0&&P>c,b=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let x=n*e;const w=h+x,_=s===void 0?w:s(w);_!==w&&(x=_-h);const T=P=>-x*Math.exp(-P/r),I=P=>_+T(P),O=P=>{const R=T(P),j=I(P);g.done=Math.abs(R)<=u,g.value=g.done?_:j};let D,N;const C=P=>{v(g.value)&&(D=P,N=$w({keyframes:[g.value,b(g.value)],velocity:aH(I,P,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return C(0),{calculatedDuration:null,next:P=>{let R=!1;return!N&&D===void 0&&(R=!0,O(P),C(P)),D!==void 0&&P>=D?N.next(P-D):(!R&&O(P),g)}}}function tge(t,e,n){const r=[],i=n||Sl.mix||rH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||qa:e;o=k0(c,o)}r.push(o)}return r}function nge(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(r2(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tge(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Iv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(wl(t[0],t[a-1],f)):u}function rge(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Iv(0,e,r);t.push(In(n,1,i))}}function ige(t){const e=[0];return rge(e,t.length-1),e}function age(t,e){return t.map(n=>n*e)}function sge(t,e){return t.map(()=>e||K7).splice(0,t.length-1)}function Xm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=vpe(r)?r.map(h5):h5(r),a={done:!1,value:e[0]},s=age(n&&n.length===e.length?n:ige(e),t),o=nge(s,e,{ease:Array.isArray(i)?i:sge(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const oge=t=>t!==null;function p2(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(oge),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const lge={decay:DI,inertia:DI,tween:Xm,keyframes:Xm,spring:$w};function sH(t){typeof t.type=="string"&&(t.type=lge[t.type])}class g2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const cge=t=>t/100;class m2 extends g2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Ui.now()&&this.tick(Ui.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;sH(e);const{type:n=Xm,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Xm;c!==Xm&&typeof o[0]!="number"&&(this.mixKeyframes=k0(cge,rH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=h2(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,O=r;if(h){const P=Math.min(this.currentTime,i)/o;let R=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(g==="reverse"?(j=1-j,v&&(j-=v/o)):g==="mirror"&&(O=s)),I=wl(0,1,j)*o}const D=T?{done:!1,value:f[0]}:O.next(I);a&&(D.value=a(D.value));let{done:N}=D;!T&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&b!==DI&&(D.value=p2(f,this.options,w,this.speed)),x&&x(D.value),C&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Ua(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ua(e)}get time(){return Ua(this.currentTime)}set time(e){e=vo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ui.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ua(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Hpe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ui.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function uge(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fd=t=>t*180/Math.PI,OI=t=>{const e=fd(Math.atan2(t[1],t[0]));return RI(e)},dge={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:OI,rotateZ:OI,skewX:t=>fd(Math.atan(t[1])),skewY:t=>fd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},RI=t=>(t=t%360,t<0&&(t+=360),t),b5=OI,x5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),w5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fge={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:x5,scaleY:w5,scale:t=>(x5(t)+w5(t))/2,rotateX:t=>RI(fd(Math.atan2(t[6],t[5]))),rotateY:t=>RI(fd(Math.atan2(-t[2],t[0]))),rotateZ:b5,rotate:b5,skewX:t=>fd(Math.atan(t[4])),skewY:t=>fd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function MI(t){return t.includes("scale")?1:0}function jI(t,e){if(!t||t==="none")return MI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=fge,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dge,i=o}if(!i)return MI(e);const a=r[e],s=i[1].split(",").map(pge);return typeof a=="function"?a(s):s[a]}const hge=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return jI(n,e)};function pge(t){return parseFloat(t.trim())}const Up=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$p=new Set(Up),S5=t=>t===Fp||t===st,gge=new Set(["x","y","z"]),mge=Up.filter(t=>!gge.has(t));function vge(t){const e=[];return mge.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ed={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jI(e,"x"),y:(t,{transform:e})=>jI(e,"y")};Ed.translateX=Ed.x;Ed.translateY=Ed.y;const Td=new Set;let zI=!1,LI=!1,VI=!1;function oH(){if(LI){const t=Array.from(Td).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=vge(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}LI=!1,zI=!1,Td.forEach(t=>t.complete(VI)),Td.clear()}function lH(){Td.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(LI=!0)})}function yge(){VI=!0,lH(),oH(),VI=!1}class v2{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Td.add(this),zI||(zI=!0,Sn.read(lH),Sn.resolveKeyframes(oH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}uge(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Td.delete(this)}cancel(){this.state==="scheduled"&&(Td.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bge=t=>t.startsWith("--");function xge(t,e,n){bge(e)?t.style.setProperty(e,n):t.style[e]=n}const wge=i2(()=>window.ScrollTimeline!==void 0),Sge={};function _ge(t,e){const n=i2(t);return()=>Sge[e]??n()}const cH=_ge(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Nm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,_5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nm([0,.65,.55,1]),circOut:Nm([.55,0,1,.45]),backIn:Nm([.31,.01,.66,-.59]),backOut:Nm([.33,1.53,.69,.99])};function uH(t,e){if(t)return typeof t=="function"?cH()?iH(t,e):"ease-out":W7(t)?Nm(t):Array.isArray(t)?t.map(n=>uH(n,e)||_5.easeOut):_5[t]}function Ege(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=uH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function dH(t){return typeof t=="function"&&"applyToOptions"in t}function Tge({type:t,...e}){return dH(t)&&cH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Age extends g2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,r2(typeof e.type!="string");const u=Tge(e);this.animation=Ege(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=p2(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):xge(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ua(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ua(e)}get time(){return Ua(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&wge()?(this.animation.timeline=e,qa):n(this)}}const fH={anticipate:q7,backInOut:$7,circInOut:H7};function kge(t){return t in fH}function Cge(t){typeof t.ease=="string"&&kge(t.ease)&&(t.ease=fH[t.ease])}const E5=10;class Ige extends Age{constructor(e){Cge(e),sH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new m2({...s,autoplay:!1}),c=vo(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-E5).value,o.sample(c).value,E5),o.stop()}}const T5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jc.test(t)||t==="0")&&!t.startsWith("url("));function Pge(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Nge(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=T5(i,e),o=T5(a,e);return!s||!o?!1:Pge(t)||(n==="spring"||dH(n))&&r}function BI(t){t.duration=0,t.type="keyframes"}const Dge=new Set(["opacity","clipPath","filter","transform"]),Oge=i2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rge(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Oge()&&n&&Dge.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Mge=40;class jge extends g2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ui.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||v2;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=Ui.now(),Nge(e,a,s,o)||((Sl.instantAnimations||!c)&&f?.(p2(e,r,n)),e[0]=e[e.length-1],BI(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Mge?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&Rge(g)?new Ige({...g,element:g.motionValue.owner.current}):new m2(g);v.finished.then(()=>this.notifyFinished()).catch(qa),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),yge()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const zge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Lge(t){const e=zge.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function hH(t,e,n=1){const[r,i]=Lge(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return M7(s)?parseFloat(s):s}return c2(i)?hH(i,e,n+1):i}function y2(t,e){return t?.[e]??t?.default??t}const pH=new Set(["width","height","top","left","right","bottom",...Up]),Vge={test:t=>t==="auto",parse:t=>t},gH=t=>e=>e.test(t),mH=[Fp,st,yo,_c,Ppe,Ipe,Vge],A5=t=>mH.find(gH(t));function Bge(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||z7(t):!0}const Fge=new Set(["brightness","contrast","saturate","opacity"]);function Uge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(u2)||[];if(!r)return t;const i=n.replace(r,"");let a=Fge.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const $ge=/\b([a-z-]*)\(.*?\)/gu,FI={...Jc,getAnimatableNone:t=>{const e=t.match($ge);return e?e.map(Uge).join(" "):t}},k5={...Fp,transform:Math.round},qge={rotate:_c,rotateX:_c,rotateY:_c,rotateZ:_c,scale:Kb,scaleX:Kb,scaleY:Kb,scaleZ:Kb,skew:_c,skewX:_c,skewY:_c,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:Pv,originX:p5,originY:p5,originZ:st},b2={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...qge,zIndex:k5,fillOpacity:Pv,strokeOpacity:Pv,numOctaves:k5},Gge={...b2,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:FI,WebkitFilter:FI},vH=t=>Gge[t];function yH(t,e){let n=vH(t);return n!==FI&&(n=Jc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Hge=new Set(["auto","none","0"]);function Kge(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Hge.has(a)&&Nv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=yH(n,i)}class Wge extends v2{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),c2(u))){const f=hH(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!pH.has(r)||e.length!==2)return;const[i,a]=e,s=A5(i),o=A5(a);if(s!==o)if(S5(s)&&S5(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Ed[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Bge(e[i]))&&r.push(i);r.length&&Kge(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ed[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Ed[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Yge(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const bH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xH(t){return j7(t)&&"offsetHeight"in t}const C5=30,Xge=t=>!isNaN(parseFloat(t));class Qge{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Ui.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ui.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Xge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new a2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Sn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>C5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,C5);return L7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dp(t,e){return new Qge(t,e)}const{schedule:x2}=Y7(queueMicrotask,!1),ps={x:!1,y:!1};function wH(){return ps.x||ps.y}function Zge(t){return t==="x"||t==="y"?ps[t]?null:(ps[t]=!0,()=>{ps[t]=!1}):ps.x||ps.y?null:(ps.x=ps.y=!0,()=>{ps.x=ps.y=!1})}function SH(t,e){const n=Yge(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function I5(t){return!(t.pointerType==="touch"||wH())}function Jge(t,e,n={}){const[r,i,a]=SH(t,n),s=o=>{if(!I5(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const f=h=>{I5(h)&&(u(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const _H=(t,e)=>e?t===e?!0:_H(t,e.parentElement):!1,w2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,eme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tme(t){return eme.has(t.tagName)||t.tabIndex!==-1}const ew=new WeakSet;function P5(t){return e=>{e.key==="Enter"&&t(e)}}function IA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nme=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=P5(()=>{if(ew.has(n))return;IA(n,"down");const i=P5(()=>{IA(n,"up")}),a=()=>IA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function N5(t){return w2(t)&&!wH()}function rme(t,e,n={}){const[r,i,a]=SH(t,n),s=o=>{const c=o.currentTarget;if(!N5(o))return;ew.add(c);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),ew.has(c)&&ew.delete(c),N5(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||_H(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),xH(o)&&(o.addEventListener("focus",u=>nme(u,i)),!tme(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function EH(t){return j7(t)&&"ownerSVGElement"in t}function ime(t){return EH(t)&&t.tagName==="svg"}const di=t=>!!(t&&t.getVelocity),ame=[...mH,lr,Jc],sme=t=>ame.find(gH(t)),S2=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function D5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ome(...t){return e=>{let n=!1;const r=t.map(i=>{const a=D5(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():D5(t[i],null)}}}}function lme(...t){return A.useCallback(ome(...t),t)}class cme extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=xH(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ume({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(S2),c=lme(a,t?.ref);return A.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:g,right:v}=s.current;if(e||!a.current||!u||!f)return;const b=n==="left"?`left: ${g}`:`right: ${v}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),m.jsx(cme,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const dme=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const u=RS(fme),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:v=>{u.set(v,!0);for(const b of u.values())if(!b)return;r&&r()},register:v=>(u.set(v,!1),()=>u.delete(v))}),[n,u,r]);return a&&h&&(g={...g}),A.useMemo(()=>{u.forEach((v,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=m.jsx(ume,{isPresent:n,anchorX:o,root:c,children:t})),m.jsx(MS.Provider,{value:g,children:t})};function fme(){return new Map}function TH(t=!0){const e=A.useContext(MS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const Wb=t=>t.key||"";function O5(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const Cr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[u,f]=TH(s),h=A.useMemo(()=>O5(t),[t]),g=s&&!u?[]:h.map(Wb),v=A.useRef(!0),b=A.useRef(h),x=RS(()=>new Map),[w,_]=A.useState(h),[T,I]=A.useState(h);e2(()=>{v.current=!1,b.current=h;for(let N=0;N<T.length;N++){const C=Wb(T[N]);g.includes(C)?x.delete(C):x.get(C)!==!0&&x.set(C,!1)}},[T,g.length,g.join("-")]);const O=[];if(h!==w){let N=[...h];for(let C=0;C<T.length;C++){const P=T[C],R=Wb(P);g.includes(R)||(N.splice(C,0,P),O.push(P))}return a==="wait"&&O.length&&(N=O),I(O5(N)),_(h),null}const{forceRender:D}=A.useContext(ZD);return m.jsx(m.Fragment,{children:T.map(N=>{const C=Wb(N),P=s&&!u?!1:h===T||g.includes(C),R=()=>{if(x.has(C))x.set(C,!0);else return;let j=!0;x.forEach(L=>{L||(j=!1)}),j&&(D?.(),I(b.current),s&&f?.(),r&&r())};return m.jsx(dme,{isPresent:P,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:P?void 0:R,anchorX:o,children:N},C)})})},AH=A.createContext({strict:!1}),R5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fp={};for(const t in R5)fp[t]={isEnabled:e=>R5[t].some(n=>!!e[n])};function hme(t){for(const e in t)fp[e]={...fp[e],...t[e]}}const pme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qw(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pme.has(t)}let kH=t=>!qw(t);function gme(t){typeof t=="function"&&(kH=e=>e.startsWith("on")?!qw(e):t(e))}try{gme(require("@emotion/is-prop-valid").default)}catch{}function mme(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(kH(i)||n===!0&&qw(i)||!e&&!qw(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const jS=A.createContext({});function zS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Dv(t){return typeof t=="string"||Array.isArray(t)}const _2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],E2=["initial",..._2];function LS(t){return zS(t.animate)||E2.some(e=>Dv(t[e]))}function CH(t){return!!(LS(t)||t.variants)}function vme(t,e){if(LS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Dv(n)?n:void 0,animate:Dv(r)?r:void 0}}return t.inherit!==!1?e:{}}function yme(t){const{initial:e,animate:n}=vme(t,A.useContext(jS));return A.useMemo(()=>({initial:e,animate:n}),[M5(e),M5(n)])}function M5(t){return Array.isArray(t)?t.join(" "):t}const Ov={};function bme(t){for(const e in t)Ov[e]=t[e],l2(e)&&(Ov[e].isCSSVariable=!0)}function IH(t,{layout:e,layoutId:n}){return $p.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ov[t]||t==="opacity")}const xme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wme=Up.length;function Sme(t,e,n){let r="",i=!0;for(let a=0;a<wme;a++){const s=Up[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=bH(o,b2[s]);if(!c){i=!1;const f=xme[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function T2(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if($p.has(c)){s=!0;continue}else if(l2(c)){i[c]=u;continue}else{const f=bH(u,b2[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=Sme(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const A2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function PH(t,e,n){for(const r in e)!di(e[r])&&!IH(r,n)&&(t[r]=e[r])}function _me({transformTemplate:t},e){return A.useMemo(()=>{const n=A2();return T2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Eme(t,e){const n=t.style||{},r={};return PH(r,n,t),Object.assign(r,_me(t,e)),r}function Tme(t,e){const n={},r=Eme(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ame={offset:"stroke-dashoffset",array:"stroke-dasharray"},kme={offset:"strokeDashoffset",array:"strokeDasharray"};function Cme(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Ame:kme;t[a.offset]=st.transform(-r);const s=st.transform(e),o=st.transform(n);t[a.array]=`${s} ${o}`}function NH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(T2(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Cme(h,i,a,s,!1)}const DH=()=>({...A2(),attrs:{}}),OH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Ime(t,e,n,r){const i=A.useMemo(()=>{const a=DH();return NH(a,e,OH(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};PH(a,t.style,t),i.style={...a,...i.style}}return i}const Pme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k2(t){return typeof t!="string"||t.includes("-")?!1:!!(Pme.indexOf(t)>-1||/[A-Z]/u.test(t))}function Nme(t,e,n,{latestValues:r},i,a=!1){const o=(k2(t)?Ime:Tme)(e,r,i,t),c=mme(e,typeof t=="string",a),u=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>di(f)?f.get():f,[f]);return A.createElement(t,{...u,children:h})}function j5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function C2(t,e,n,r){if(typeof e=="function"){const[i,a]=j5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=j5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function tw(t){return di(t)?t.get():t}function Dme({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Ome(n,r,i,t),renderState:e()}}function Ome(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=tw(a[g]);let{initial:s,animate:o}=t;const c=LS(t),u=CH(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!zS(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=C2(t,g[v]);if(b){const{transitionEnd:x,transition:w,..._}=b;for(const T in _){let I=_[T];if(Array.isArray(I)){const O=f?I.length-1:0;I=I[O]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const RH=t=>(e,n)=>{const r=A.useContext(jS),i=A.useContext(MS),a=()=>Dme(t,e,r,i);return n?a():RS(a)};function I2(t,e,n){const{style:r}=t,i={};for(const a in r)(di(r[a])||e.style&&di(e.style[a])||IH(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Rme=RH({scrapeMotionValuesFromProps:I2,createRenderState:A2});function MH(t,e,n){const r=I2(t,e,n);for(const i in t)if(di(t[i])||di(e[i])){const a=Up.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Mme=RH({scrapeMotionValuesFromProps:MH,createRenderState:DH}),jme=Symbol.for("motionComponentSymbol");function Sh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zme(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Sh(n)&&(n.current=r))},[e])}const P2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Lme="framerAppearId",jH="data-"+P2(Lme),zH=A.createContext({});function Vme(t,e,n,r,i){const{visualElement:a}=A.useContext(jS),s=A.useContext(AH),o=A.useContext(MS),c=A.useContext(S2).reducedMotion,u=A.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,h=A.useContext(zH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Bme(u.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const v=n[jH],b=A.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return e2(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),b.current=!1),f.enteringChildren=void 0)}),f}function Bme(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Sh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function LH(t){if(t)return t.options.allowProjection!==!1?t.projection:LH(t.parent)}function PA(t,{forwardMotionProps:e=!1}={},n,r){n&&hme(n);const i=k2(t)?Mme:Rme;function a(o,c){let u;const f={...A.useContext(S2),...o,layoutId:Fme(o)},{isStatic:h}=f,g=yme(o),v=i(o,h);if(!h&&JD){Ume();const b=$me(f);u=b.MeasureLayout,g.visualElement=Vme(t,v,f,r,b.ProjectionNode)}return m.jsxs(jS.Provider,{value:g,children:[u&&g.visualElement?m.jsx(u,{visualElement:g.visualElement,...f}):null,Nme(t,o,zme(v,g.visualElement,c),v,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[jme]=t,s}function Fme({layoutId:t}){const e=A.useContext(ZD).id;return e&&t!==void 0?e+"-"+t:t}function Ume(t,e){A.useContext(AH).strict}function $me(t){const{drag:e,layout:n}=fp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function qme(t,e){if(typeof Proxy>"u")return PA;const n=new Map,r=(a,s)=>PA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,PA(s,void 0,t,e)),n.get(s))})}function VH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Gme({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hme(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function NA(t){return t===void 0||t===1}function UI({scale:t,scaleX:e,scaleY:n}){return!NA(t)||!NA(e)||!NA(n)}function Xu(t){return UI(t)||BH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BH(t){return z5(t.x)||z5(t.y)}function z5(t){return t&&t!=="0%"}function Gw(t,e,n){const r=t-n,i=e*r;return n+i}function L5(t,e,n,r,i){return i!==void 0&&(t=Gw(t,i,r)),Gw(t,n,r)+e}function $I(t,e=0,n=1,r,i){t.min=L5(t.min,e,n,r,i),t.max=L5(t.max,e,n,r,i)}function FH(t,{x:e,y:n}){$I(t.x,e.translate,e.scale,e.originPoint),$I(t.y,n.translate,n.scale,n.originPoint)}const V5=.999999999999,B5=1.0000000000001;function Kme(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Eh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,FH(t,s)),r&&Xu(a.latestValues)&&Eh(t,a.latestValues))}e.x<B5&&e.x>V5&&(e.x=1),e.y<B5&&e.y>V5&&(e.y=1)}function _h(t,e){t.min=t.min+e,t.max=t.max+e}function F5(t,e,n,r,i=.5){const a=In(t.min,t.max,i);$I(t,e,n,a,r)}function Eh(t,e){F5(t.x,e.x,e.scaleX,e.scale,e.originX),F5(t.y,e.y,e.scaleY,e.scale,e.originY)}function UH(t,e){return VH(Hme(t.getBoundingClientRect(),e))}function Wme(t,e,n){const r=UH(t,n),{scroll:i}=e;return i&&(_h(r.x,i.offset.x),_h(r.y,i.offset.y)),r}const U5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Th=()=>({x:U5(),y:U5()}),$5=()=>({min:0,max:0}),Wn=()=>({x:$5(),y:$5()}),qI={current:null},$H={current:!1};function Yme(){if($H.current=!0,!!JD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qI.current=t.matches;t.addEventListener("change",e),e()}else qI.current=!1}const Xme=new WeakMap;function Qme(t,e,n){for(const r in e){const i=e[r],a=n[r];if(di(i))t.addValue(r,i);else if(di(a))t.addValue(r,dp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,dp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const q5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Zme{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=v2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ui.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Sn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=LS(n),this.isVariantNode=CH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const v=h[g];c[g]!==void 0&&di(v)&&v.set(c[g])}}mount(e){this.current=e,Xme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$H.current||Yme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qI.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zc(this.notifyUpdate),Zc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=$p.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Sn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fp){const n=fp[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<q5.length;r++){const i=q5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Qme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=dp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(M7(r)||z7(r))?r=parseFloat(r):!sme(r)&&Jc.test(n)&&(r=yH(e,n)),this.setBaseTarget(e,di(r)?r.get():r)),di(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=C2(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!di(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new a2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){x2.render(this.render)}}class qH extends Zme{constructor(){super(...arguments),this.KeyframeResolver=Wge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;di(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function GH(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function Jme(t){return window.getComputedStyle(t)}class eve extends qH{constructor(){super(...arguments),this.type="html",this.renderInstance=GH}readValueFromInstance(e,n){if($p.has(n))return this.projection?.isProjecting?MI(n):hge(e,n);{const r=Jme(e),i=(l2(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return UH(e,n)}build(e,n,r){T2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return I2(e,n,r)}}const HH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tve(t,e,n,r){GH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(HH.has(i)?i:P2(i),e.attrs[i])}class nve extends qH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if($p.has(n)){const r=vH(n);return r&&r.default||0}return n=HH.has(n)?n:P2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return MH(e,n,r)}build(e,n,r){NH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){tve(e,n,r,i)}mount(e){this.isSVGTag=OH(e.tagName),super.mount(e)}}const rve=(t,e)=>k2(t)?new nve(e):new eve(e,{allowProjection:t!==A.Fragment});function Vh(t,e,n){const r=t.getProps();return C2(r,e,n!==void 0?n:r.custom,t)}const GI=t=>Array.isArray(t);function ive(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,dp(n))}function ave(t){return GI(t)?t[t.length-1]||0:t}function N2(t,e){const n=Vh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=ave(a[s]);ive(t,s,o)}}function sve(t){return!!(di(t)&&t.add)}function HI(t,e){const n=t.getValue("willChange");if(sve(n))return n.add(e);if(!n&&Sl.WillChange){const r=new Sl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function KH(t){return t.props[jH]}const ove=t=>t!==null;function lve(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ove),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const cve={type:"spring",stiffness:500,damping:25,restSpeed:10},uve=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dve={type:"keyframes",duration:.8},fve={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hve=(t,{keyframes:e})=>e.length>2?dve:$p.has(t)?t.startsWith("scale")?uve(e[1]):cve:fve;function pve({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const D2=(t,e,n,r={},i,a)=>s=>{const o=y2(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-vo(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};pve(o)||Object.assign(f,hve(t,f)),f.duration&&(f.duration=vo(f.duration)),f.repeatDelay&&(f.repeatDelay=vo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(BI(f),f.delay===0&&(h=!0)),(Sl.instantAnimations||Sl.skipAnimations)&&(h=!0,BI(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=lve(f.keyframes,o);if(g!==void 0){Sn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new m2(f):new jge(f)};function gve({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function WH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||u&&gve(u,f))continue;const v={delay:n,...y2(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const _=KH(t);if(_){const T=window.MotionHandoffAnimation(_,f,Sn);T!==null&&(v.startTime=T,x=!0)}}HI(t,f),h.start(D2(f,h,g,t.shouldReduceMotion&&pH.has(f)?{type:!1}:v,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{Sn.update(()=>{s&&N2(t,s)})}),c}function YH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function KI(t,e,n={}){const r=Vh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(WH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return mve(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function mve(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(KI(c,e,{...s,delay:n+(typeof r=="function"?0:r)+YH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function XH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>KI(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=KI(t,e,n);else{const i=typeof e=="function"?Vh(t,e,n.custom):e;r=Promise.all(WH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function QH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const vve=E2.length;function ZH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ZH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vve;n++){const r=E2[n],i=t.props[r];(Dv(i)||i===!1)&&(e[r]=i)}return e}const yve=[..._2].reverse(),bve=_2.length;function xve(t){return e=>Promise.all(e.map(({animation:n,options:r})=>XH(t,n,r)))}function wve(t){let e=xve(t),n=G5(),r=!0;const i=c=>(u,f)=>{const h=Vh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=ZH(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<bve;w++){const _=yve[w],T=n[_],I=u[_]!==void 0?u[_]:f[_],O=Dv(I),D=_===c?T.isActive:null;D===!1&&(b=w);let N=I===f[_]&&I!==u[_]&&O;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...v},!T.isActive&&D===null||!I&&!T.prevProp||zS(I)||typeof I=="boolean")continue;const C=Sve(T.prevProp,I);let P=C||_===c&&T.isActive&&!N&&O||w>b&&O,R=!1;const j=Array.isArray(I)?I:[I];let L=j.reduce(i(_),{});D===!1&&(L={});const{prevResolvedValues:B={}}=T,z={...B,...L},W=Y=>{P=!0,g.has(Y)&&(R=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const Q=t.getValue(Y);Q&&(Q.liveStyle=!1)};for(const Y in z){const Q=L[Y],ee=B[Y];if(v.hasOwnProperty(Y))continue;let te=!1;GI(Q)&&GI(ee)?te=!QH(Q,ee):te=Q!==ee,te?Q!=null?W(Y):g.add(Y):Q!==void 0&&g.has(Y)?W(Y):T.protectedKeys[Y]=!0}T.prevProp=I,T.prevResolvedValues=L,T.isActive&&(v={...v,...L}),r&&t.blockInitialAnimation&&(P=!1);const Z=N&&C;P&&(!Z||R)&&h.push(...j.map(Y=>{const Q={type:_};if(typeof Y=="string"&&r&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,te=Vh(ee,Y);if(ee.enteringChildren&&te){const{delayChildren:U}=te.transition||{};Q.delay=YH(ee.enteringChildren,t,U)}}return{animation:Y,options:Q}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const _=Vh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(w.transition=_.transition)}g.forEach(_=>{const T=t.getBaseTarget(_),I=t.getValue(_);I&&(I.liveStyle=!0),w[_]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=G5()}}}function Sve(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QH(e,t):!1}function qu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function G5(){return{animate:qu(!0),whileInView:qu(),whileHover:qu(),whileTap:qu(),whileDrag:qu(),whileFocus:qu(),exit:qu()}}class du{constructor(e){this.isMounted=!1,this.node=e}update(){}}class _ve extends du{constructor(e){super(e),e.animationState||(e.animationState=wve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Eve=0;class Tve extends du{constructor(){super(...arguments),this.id=Eve++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Ave={animation:{Feature:_ve},exit:{Feature:Tve}};function Rv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function P0(t){return{point:{x:t.pageX,y:t.pageY}}}const kve=t=>e=>w2(e)&&t(e,P0(e));function Qm(t,e,n,r){return Rv(t,e,kve(n),r)}const JH=1e-4,Cve=1-JH,Ive=1+JH,eK=.01,Pve=0-eK,Nve=0+eK;function Si(t){return t.max-t.min}function Dve(t,e,n){return Math.abs(t-e)<=n}function H5(t,e,n,r=.5){t.origin=r,t.originPoint=In(e.min,e.max,t.origin),t.scale=Si(n)/Si(e),t.translate=In(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Cve&&t.scale<=Ive||isNaN(t.scale))&&(t.scale=1),(t.translate>=Pve&&t.translate<=Nve||isNaN(t.translate))&&(t.translate=0)}function Zm(t,e,n,r){H5(t.x,e.x,n.x,r?r.originX:void 0),H5(t.y,e.y,n.y,r?r.originY:void 0)}function K5(t,e,n){t.min=n.min+e.min,t.max=t.min+Si(e)}function Ove(t,e,n){K5(t.x,e.x,n.x),K5(t.y,e.y,n.y)}function W5(t,e,n){t.min=e.min-n.min,t.max=t.min+Si(e)}function Jm(t,e,n){W5(t.x,e.x,n.x),W5(t.y,e.y,n.y)}function Ba(t){return[t("x"),t("y")]}const tK=({current:t})=>t?t.ownerDocument.defaultView:null,Y5=(t,e)=>Math.abs(t-e);function Rve(t,e){const n=Y5(t.x,e.x),r=Y5(t.y,e.y);return Math.sqrt(n**2+r**2)}class nK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=OA(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=Rve(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:x}=g,{timestamp:w}=Jr;this.history.push({...x,timestamp:w});const{onStart:_,onMove:T}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=DA(v,this.transformPagePoint),Sn.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=OA(g.type==="pointercancel"?this.lastMoveEventInfo:DA(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,_),x&&x(g,_)},!w2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=P0(e),c=DA(o,this.transformPagePoint),{point:u}=c,{timestamp:f}=Jr;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,OA(c,this.history)),this.removeListeners=k0(Qm(this.contextWindow,"pointermove",this.handlePointerMove),Qm(this.contextWindow,"pointerup",this.handlePointerUp),Qm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zc(this.updatePoint)}}function DA(t,e){return e?{point:e(t.point)}:t}function X5(t,e){return{x:t.x-e.x,y:t.y-e.y}}function OA({point:t},e){return{point:t,delta:X5(t,rK(e)),offset:X5(t,Mve(e)),velocity:jve(e,.1)}}function Mve(t){return t[0]}function rK(t){return t[t.length-1]}function jve(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=rK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vo(e)));)n--;if(!r)return{x:0,y:0};const a=Ua(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function zve(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?In(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?In(n,t,r.max):Math.min(t,n)),t}function Q5(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Lve(t,{top:e,left:n,bottom:r,right:i}){return{x:Q5(t.x,n,i),y:Q5(t.y,e,r)}}function Z5(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Vve(t,e){return{x:Z5(t.x,e.x),y:Z5(t.y,e.y)}}function Bve(t,e){let n=.5;const r=Si(t),i=Si(e);return i>r?n=Iv(e.min,e.max-r,t.min):r>i&&(n=Iv(t.min,t.max-i,e.min)),wl(0,1,n)}function Fve(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const WI=.35;function Uve(t=WI){return t===!1?t=0:t===!0&&(t=WI),{x:J5(t,"left","right"),y:J5(t,"top","bottom")}}function J5(t,e,n){return{min:eV(t,e),max:eV(t,n)}}function eV(t,e){return typeof t=="number"?t:t[e]||0}const $ve=new WeakMap;class qve{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(P0(h).point)},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zge(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ba(_=>{let T=this.getAxisMotionValue(_).get()||0;if(yo.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const O=I.layout.layoutBox[_];O&&(T=Si(O)*(parseFloat(T)/100))}}this.originPoint[_]=T}),x&&Sn.postRender(()=>x(h,g)),HI(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=g;if(b&&this.currentDirection===null){this.currentDirection=Gve(_),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ba(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new nK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:tK(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Sn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Yb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=zve(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Sh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Lve(r.layoutBox,e):this.constraints=!1,this.elastic=Uve(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ba(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Fve(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Wme(r,i.root,this.visualElement.getTransformPagePoint());let s=Vve(i.layout.layoutBox,a);if(n){const o=n(Gme(s));this.hasMutatedConstraints=!!o,o&&(s=VH(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Ba(f=>{if(!Yb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return HI(this.visualElement,e),r.start(D2(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ba(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ba(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ba(n=>{const{drag:r}=this.getProps();if(!Yb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-In(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Sh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ba(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=Bve({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ba(s=>{if(!Yb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(In(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;$ve.set(this.visualElement,this);const e=this.visualElement.current,n=Qm(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Sh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Sn.read(r);const s=Rv(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ba(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=WI,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Yb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Gve(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Hve extends du{constructor(e){super(e),this.removeGroupControls=qa,this.removeListeners=qa,this.controls=new qve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qa}unmount(){this.removeGroupControls(),this.removeListeners()}}const tV=t=>(e,n)=>{t&&Sn.postRender(()=>t(e,n))};class Kve extends du{constructor(){super(...arguments),this.removePointerDownListener=qa}onPointerDown(e){this.session=new nK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:tV(e),onStart:tV(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Sn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Qm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(st.test(t))t=parseFloat(t);else return t;const n=nV(t,e.target.x),r=nV(t,e.target.y);return`${n}% ${r}%`}},Wve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jc.parse(t);if(i.length>5)return r;const a=Jc.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=In(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let RA=!1;class Yve extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;bme(Xve),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),RA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),nw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,RA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Sn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),x2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;RA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iK(t){const[e,n]=TH(),r=A.useContext(ZD);return m.jsx(Yve,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(zH),isPresent:e,safeToRemove:n})}const Xve={borderRadius:{...dm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dm,borderTopRightRadius:dm,borderBottomLeftRadius:dm,borderBottomRightRadius:dm,boxShadow:Wve};function Qve(t,e,n){const r=di(t)?t:dp(t);return r.start(D2("",r,e,n)),r.animation}const Zve=(t,e)=>t.depth-e.depth;class Jve{constructor(){this.children=[],this.isDirty=!1}add(e){t2(this.children,e),this.isDirty=!0}remove(e){n2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zve),this.isDirty=!1,this.children.forEach(e)}}function e0e(t,e){const n=Ui.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Zc(r),t(a-e))};return Sn.setup(r,!0),()=>Zc(r)}const aK=["TopLeft","TopRight","BottomLeft","BottomRight"],t0e=aK.length,rV=t=>typeof t=="string"?parseFloat(t):t,iV=t=>typeof t=="number"||st.test(t);function n0e(t,e,n,r,i,a){i?(t.opacity=In(0,n.opacity??1,r0e(r)),t.opacityExit=In(e.opacity??1,0,i0e(r))):a&&(t.opacity=In(e.opacity??1,n.opacity??1,r));for(let s=0;s<t0e;s++){const o=`border${aK[s]}Radius`;let c=aV(e,o),u=aV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||iV(c)===iV(u)?(t[o]=Math.max(In(rV(c),rV(u),r),0),(yo.test(u)||yo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=In(e.rotate||0,n.rotate||0,r))}function aV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r0e=sK(0,.5,G7),i0e=sK(.5,.95,qa);function sK(t,e,n){return r=>r<t?0:r>e?1:n(Iv(t,e,r))}function sV(t,e){t.min=e.min,t.max=e.max}function Ma(t,e){sV(t.x,e.x),sV(t.y,e.y)}function oV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lV(t,e,n,r,i){return t-=e,t=Gw(t,1/n,r),i!==void 0&&(t=Gw(t,1/i,r)),t}function a0e(t,e=0,n=1,r=.5,i,a=t,s=t){if(yo.test(e)&&(e=parseFloat(e),e=In(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=In(a.min,a.max,r);t===a&&(o-=e),t.min=lV(t.min,e,n,o,i),t.max=lV(t.max,e,n,o,i)}function cV(t,e,[n,r,i],a,s){a0e(t,e[n],e[r],e[i],e.scale,a,s)}const s0e=["x","scaleX","originX"],o0e=["y","scaleY","originY"];function uV(t,e,n,r){cV(t.x,e,s0e,n?n.x:void 0,r?r.x:void 0),cV(t.y,e,o0e,n?n.y:void 0,r?r.y:void 0)}function dV(t){return t.translate===0&&t.scale===1}function oK(t){return dV(t.x)&&dV(t.y)}function fV(t,e){return t.min===e.min&&t.max===e.max}function l0e(t,e){return fV(t.x,e.x)&&fV(t.y,e.y)}function hV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lK(t,e){return hV(t.x,e.x)&&hV(t.y,e.y)}function pV(t){return Si(t.x)/Si(t.y)}function gV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class c0e{constructor(){this.members=[]}add(e){t2(this.members,e),e.scheduleRender()}remove(e){if(n2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function u0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const MA=["","X","Y","Z"],d0e=1e3;let f0e=0;function jA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function cK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Sn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&cK(r)}function uK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=f0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(g0e),this.nodes.forEach(b0e),this.nodes.forEach(x0e),this.nodes.forEach(m0e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jve)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new a2),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=EH(s)&&!ime(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;Sn.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=e0e(g,250),nw.hasAnimatedSinceResize&&(nw.hasAnimatedSinceResize=!1,this.nodes.forEach(yV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||T0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),_=!this.targetLayout||!lK(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...y2(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||yV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(w0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(y0e),this.nodes.forEach(h0e),this.nodes.forEach(p0e)):this.nodes.forEach(vV),this.clearAllSnapshots();const o=Ui.now();Jr.delta=wl(0,1e3/60,o-Jr.timestamp),Jr.timestamp=o,Jr.isProcessing=!0,EA.update.process(Jr),EA.preRender.process(Jr),EA.render.process(Jr),Jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,x2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(v0e),this.sharedNodes.forEach(S0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Si(this.snapshot.measuredBox.x)&&!Si(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!oK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Xu(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),A0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Wn();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(k0e))){const{scroll:u}=this.root;u&&(_h(o.x,u.offset.x),_h(o.y,u.offset.y))}return o}removeElementScroll(s){const o=Wn();if(Ma(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ma(o,s),_h(o.x,f.offset.x),_h(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=Wn();Ma(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Eh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Xu(f.latestValues)&&Eh(c,f.latestValues)}return Xu(this.latestValues)&&Eh(c,this.latestValues),c}removeTransform(s){const o=Wn();Ma(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Xu(u.latestValues))continue;UI(u.latestValues)&&u.updateSnapshot();const f=Wn(),h=u.measurePageBox();Ma(f,h),uV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Xu(this.latestValues)&&uV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Jr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wn(),this.relativeTargetOrigin=Wn(),Jm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wn(),this.targetWithTransforms=Wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ove(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ma(this.target,this.layout.layoutBox),FH(this.target,this.targetDelta)):Ma(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wn(),this.relativeTargetOrigin=Wn(),Jm(this.relativeTargetOrigin,this.target,g.target),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||UI(this.parent.latestValues)||BH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Jr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Ma(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Kme(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Wn());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oV(this.prevProjectionDelta.x,this.projectionDelta.x),oV(this.prevProjectionDelta.y,this.projectionDelta.y)),Zm(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!gV(this.projectionDelta.x,this.prevProjectionDelta.x)||!gV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Th(),this.projectionDelta=Th(),this.projectionDeltaWithTransform=Th()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Th();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Wn(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),_=!w||w.members.length<=1,T=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(E0e));this.animationProgress=0;let I;this.mixTargetDelta=O=>{const D=O/1e3;bV(h.x,s.x,D),bV(h.y,s.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_0e(this.relativeTarget,this.relativeTargetOrigin,g,D),I&&l0e(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Wn()),Ma(I,this.relativeTarget)),x&&(this.animationValues=f,n0e(f,u,this.latestValues,D,T,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Zc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Sn.update(()=>{nw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dp(0)),this.currentAnimation=Qve(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&dK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Wn();const h=Si(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=Si(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Ma(o,c),Eh(o,f),Zm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new c0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&jA("z",s,u,this.animationValues);for(let f=0;f<MA.length;f++)jA(`rotate${MA[f]}`,s,u,this.animationValues),jA(`skew${MA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=tw(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=tw(o?.pointerEvents)||""),this.hasProjected&&!Xu(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=u0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Ov){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:_}=Ov[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let O=0;O<I;O++)s[w[O]]=T}else _?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?tw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(mV),this.root.sharedNodes.clear()}}}function h0e(t){t.updateLayout()}function p0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Ba(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=Si(h);h.min=n[f].min,h.max=h.min+g}):dK(i,e.layoutBox,n)&&Ba(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=Si(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Th();Zm(s,n,e.layoutBox);const o=Th();a?Zm(o,t.applyTransform(r,!0),e.measuredBox):Zm(o,n,e.layoutBox);const c=!oK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=Wn();Jm(v,e.layoutBox,h.layoutBox);const b=Wn();Jm(b,n,g.layoutBox),lK(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function g0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function m0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function v0e(t){t.clearSnapshot()}function mV(t){t.clearMeasurements()}function vV(t){t.isLayoutDirty=!1}function y0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function b0e(t){t.resolveTargetDelta()}function x0e(t){t.calcProjection()}function w0e(t){t.resetSkewAndRotation()}function S0e(t){t.removeLeadSnapshot()}function bV(t,e,n){t.translate=In(e.translate,0,n),t.scale=In(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xV(t,e,n,r){t.min=In(e.min,n.min,r),t.max=In(e.max,n.max,r)}function _0e(t,e,n,r){xV(t.x,e.x,n.x,r),xV(t.y,e.y,n.y,r)}function E0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const T0e={duration:.45,ease:[.4,0,.1,1]},wV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),SV=wV("applewebkit/")&&!wV("chrome/")?Math.round:qa;function _V(t){t.min=SV(t.min),t.max=SV(t.max)}function A0e(t){_V(t.x),_V(t.y)}function dK(t,e,n){return t==="position"||t==="preserve-aspect"&&!Dve(pV(e),pV(n),.2)}function k0e(t){return t!==t.root&&t.scroll?.wasRoot}const C0e=uK({attachResizeListener:(t,e)=>Rv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zA={current:void 0},fK=uK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zA.current){const t=new C0e({});t.mount(window),t.setOptions({layoutScroll:!0}),zA.current=t}return zA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),I0e={pan:{Feature:Kve},drag:{Feature:Hve,ProjectionNode:fK,MeasureLayout:iK}};function EV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Sn.postRender(()=>a(e,P0(e)))}class P0e extends du{mount(){const{current:e}=this.node;e&&(this.unmount=Jge(e,(n,r)=>(EV(this.node,r,"Start"),i=>EV(this.node,i,"End"))))}unmount(){}}class N0e extends du{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=k0(Rv(this.node.current,"focus",()=>this.onFocus()),Rv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Sn.postRender(()=>a(e,P0(e)))}class D0e extends du{mount(){const{current:e}=this.node;e&&(this.unmount=rme(e,(n,r)=>(TV(this.node,r,"Start"),(i,{success:a})=>TV(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const YI=new WeakMap,LA=new WeakMap,O0e=t=>{const e=YI.get(t.target);e&&e(t)},R0e=t=>{t.forEach(O0e)};function M0e({root:t,...e}){const n=t||document;LA.has(n)||LA.set(n,{});const r=LA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(R0e,{root:t,...e})),r[i]}function j0e(t,e,n){const r=M0e(e);return YI.set(t,n),r.observe(t),()=>{YI.delete(t),r.unobserve(t)}}const z0e={some:0,all:1};class L0e extends du{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:z0e[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return j0e(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(V0e(e,n))&&this.startObserver()}unmount(){}}function V0e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const B0e={inView:{Feature:L0e},tap:{Feature:D0e},focus:{Feature:N0e},hover:{Feature:P0e}},F0e={layout:{ProjectionNode:fK,MeasureLayout:iK}},U0e={...Ave,...B0e,...I0e,...F0e},kt=qme(U0e,rve);function $0e(t){t.values.forEach(e=>e.stop())}function XI(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&N2(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{XI(a,e)})})}function q0e(t,e){if(Array.isArray(e))return XI(t,e);if(typeof e=="string")return XI(t,[e]);N2(t,e)}function G0e(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(XH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{q0e(r,n)})},stop(){t.forEach(n=>{$0e(n)})},mount(){return()=>{e.stop()}}};return e}function H0e(){const t=RS(G0e);return e2(t.mount,[]),t}const K0e=H0e,fu=GN((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),fm=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=fu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(Cr,{children:n&&m.jsx(kt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(Tce,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(f0,{size:14})})]})]})})})};class sa extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(yd,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(Kh,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(Hle,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const W0e=({onAddTransaction:t})=>{const e=es(),n=Os(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(bw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(cd,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:m.jsx(U8,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(Wh,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Yle,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(tf,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(jle,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(hce,{className:"w-6 h-6"})})]})})};function Y0e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function X0e(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function cl(t,e){return function(n){n&&(t[e]=n)}}function hK(t,e,n){return function(r){r&&(t[e][n]=r)}}function AV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Q0e(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var Z0e="function",J0e="object",eye="string",tye="number",O2="undefined",pK=typeof window!==O2,nye=typeof document!==O2&&document,rye=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ur=1e-7,Xb={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function iye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Hw(t,e,n,r){return(t*r+e*n)/(n+r)}function VS(t){return typeof t===O2}function Cs(t){return t&&typeof t===J0e}function pr(t){return Array.isArray(t)}function Hi(t){return typeof t===eye}function hp(t){return typeof t===tye}function R2(t){return typeof t===Z0e}function aye(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function gK(t,e,n,r,i){var a=M2(t,e,n);return a?n:sye(t,e,n+1,r,i)}function M2(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function sye(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!M2(t,e,u))return{value:u};var h=u,g=Ki(i,function(v){var b=v.open;return b===f});if(g&&(h=gK(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function j2(t,e){var n=Hi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?rye:u,h=f.map(function(C){var P=C.open,R=C.close;return P===R?P:P+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(C){return C&&C!=="undefined"}),x=b.length,w=[],_=[];function T(){return _.length?(w.push(_.join("")),_=[],!0):!1}for(var I=function(C){var P=b[C].trim(),R=C,j=Ki(f,function(z){var W=z.open;return W===P}),L=Ki(f,function(z){var W=z.close;return W===P});if(j){if(R=gK(j,b,C,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(C,R+1).join("")),C=R,a)?(O=C,"break"):(O=C,"continue")}else if(L&&!M2(L,b,C)){var B=iye(f);return B.splice(f.indexOf(L),1),{value:j2(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(aye(P,i)&&!s)return T(),a?(O=C,"break"):(O=C,"continue");R===-1&&(R=x-1),_.push(b.slice(C,R+1).join("")),C=R,O=C},O,D=0;D<x;++D){var N=I(D);if(D=O,typeof N=="object")return N.value;if(N==="break")break}return _.length&&w.push(_.join("")),w}function eu(t){return j2(t,"")}function hd(t){return j2(t,",")}function mK(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function N0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function oye(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function rw(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Mv(){return Date.now?Date.now():new Date().getTime()}function _l(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Ki(t,e,n){var r=_l(t,e);return r>-1?t[r]:n}var vK=(function(){var t=Mv(),e=pK&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Mv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),lye=(function(){var t=pK&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function El(t){return Object.keys(t)}function cye(t){var e=El(t);return e.map(function(n){return t[n]})}function en(t,e){var n=N0(t),r=n.value,i=n.unit;if(Cs(e)){var a=e[i];if(a){if(R2(a))return a(r);if(Xb[i])return Xb[i](r,a)}}else if(i==="%")return r*e/100;return Xb[i]?Xb[i](r):r}function QI(t,e,n){return Math.max(e,Math.min(t,n))}function kV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],ur),lt(e[0]/r,ur)],[lt(e[1]*r,ur),lt(e[1],ur)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=lt(o,ur);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function yK(t,e,n,r){if(!r)return t.map(function(v,b){return QI(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=kV(t,e,!1,s),c=o[0],u=o[1],f=kV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function uye(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function ZI(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Qn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function dye(t){return[0,1].map(function(e){return ZI(t.map(function(n){return n[e]}))})}function CV(t){var e=dye(t),n=Qn(e,t[0]),r=Qn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ul(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function IV(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function fye(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function bK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function xK(t,e){t.indexOf(e)===-1&&t.push(e)}function _r(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function wK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function SK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Qr(t,e,n,r){t.addEventListener(e,n,r)}function br(t,e,n,r){t.removeEventListener(e,n,r)}function qp(t){return t?.ownerDocument||nye}function z2(t){return qp(t).documentElement}function hu(t){return qp(t).body}function qc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function _K(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Gp(t){return Cs(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var hye=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),pye=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),gye=typeof Map=="function",mye=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function vye(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new mye;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var yye=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=vye(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function D0(t,e,n){var r=gye?Map:n?pye:hye,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,_=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var O=h.get(T);typeof O>"u"?(++_,s.push(I)):b[O]=_}),u.forEach(function(T,I){var O=f.get(T);typeof O>"u"?(a.push(I),++w):(o.push([O,I]),_=b[I]||0,g.push([O-_,I-w]),v.push(I===O),O!==I&&x.push([O,I]))}),s.reverse(),new yye(t,e,a,s,x,o,g,v)}var bye=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=D0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),JI=function(t,e){return JI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},JI(t,e)};function O0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var co=function(){return co=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},co.apply(this,arguments)};function EK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function PV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function NV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function TK(t){var e=[];return t.forEach(function(n){e=e.concat(pr(n)?TK(n):n)}),e}function VA(t,e){if(!e)return t;for(var n in e)VS(t[n])&&(t[n]=e[n]);return t}function Kw(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function DV(t){var e=t.className,n=EK(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function OV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function BS(t){if(!t)return null;var e=t.b;return Gp(e)?e:BS(t.c)}function AK(t){var e=t.parentNode;e&&e.removeChild(t)}function kK(t){t.forEach(function(e){e()})}function xye(){return this.constructor(this.props,this.context)}var L2=0,FS=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=cye(r).filter(function(b){return b.$_req}),f=TK(u.map(function(b){return b.$_subs})),h=Ki(f,function(b){return b.d===c});if(o.b&&!Hi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){R0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Hi(i)||(o.ps=i.props,o.ref=i.ref),V2(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function CK(){return Object.__CROACT_CURRENT_INSTNACE__}function wye(){return L2}function Sye(t){L2=t}function V2(t){return Object.__CROACT_CURRENT_INSTNACE__=t,L2=0,t}var B2=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=co(co({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=R0(a.c,[a],[a.o],i,a._cs,co(co({},this.state),this.$_state),r);s&&(n&&i.push(n),kK(i),V2(null))},t})(),IK=(function(t){O0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Kw(this.props,r)||Kw(this.state,i)},e})(B2);function PK(t){var e=function(n){e.current=n};return e.current=t,e}function _ye(t){return t._fr=!0,t}function Eye(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new B2(e,n),a.constructor=t,t._fr?(r.fr=PK(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=xye),a.$_p=r,a}var Tye=(function(t){O0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,VA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(VA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=VA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=Eye(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var _=co(co({},i),v.$_cs);R0(c,c._ps,w?[w]:[],r,_),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(FS);function Aye(t,e,n){var r=F2(DV(t),DV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function kye(t,e,n){var r=F2(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function F2(t,e){var n=El(t),r=El(e),i=D0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function Cye(t,e,n){var r=n.style,i=F2(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=rw(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=rw(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=rw(c,"-");r.removeProperty(h)}}function Iye(t){return t.replace(/^on/g,"").toLowerCase()}var Pye=(function(t){O0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=Iye(r);i?(br(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Qr(o,c,s[r]))},n.s=function(r){return Kw(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=BS(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=qp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}R0(o,o._ps,u.children,r,i);var x=o.b,w=OV(a),_=w[0],T=w[1],I=OV(u),O=I[0],D=I[1];return Aye(_,O,x),kye(T,D,o),Cye(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)br(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||AK(a)},e})(FS);function jv(t){if(!t||Gp(t))return t;var e=t.$_p._ps;return e.length?jv(e[0].b):null}function NK(t){if(t){if(t.b&&Gp(t.b))return t;var e=t._ps;return e.length?NK(e[0]):null}}function Es(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=EK(i,["key","ref"]);return{type:t,key:a,ref:s,props:co(co({},o),{children:bK(n).filter(function(c){return c!=null&&c!==!1})})}}var DK=(function(t){O0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(FS),Nye=(function(t){O0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=BS(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||qp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){AK(this.b)},e})(FS);function Dye(t,e,n){var r=n.map(function(c){return Hi(c)?null:c.key}),i=NV(e.map(function(c){return c.k})),a=NV(r),s=D0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=jv(h.b),v=jv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,RV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Hi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,RV(f,r[u],u,t)),!0):(h.i=u,!1)});return PV(PV([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Oye(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=jv(n[i].b);if(a)return a}return null}function RV(t,e,n,r){var i=r.d+1;if(Hi(t)||hp(t))return new Nye("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?Pye:Tye;return new s(a,i,e,n,r,t.ref,t.props)}function R0(t,e,n,r,i,a,s){var o=Dye(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=NK(h);g&&(g._sel=!0)}),t._hyd=null;var f=BS(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=jv(g.b);if(v&&f!==v&&!v.parentNode){var b=Oye(t,g);f.insertBefore(v,b)}}),u.length>0}function Rye(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new DK(e));var a=[];return R0(n,n._ps,t?[t]:[],a,r,void 0,void 0),kK(a),V2(null),i||(e.__CROACT__=n),n}function MV(t,e,n){return!n&&t&&(n=new DK(e.parentElement),n._hyd=[e],n._sel=!0),Rye(t,e,n),n}function OK(t){var e=CK(),n=e._hs||(e._hs=[]),r=wye(),i=n[r];if(Sye(r+1),i){if(!Kw(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Mye(t,e){var n=OK({func:t,deps:e});return n.value}function jye(t){return Mye(function(){return PK(t)},[])}function RK(t,e,n){var r=CK(),i=OK({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function zye(t,e,n){RK(function(){t?.(e())},n,!0)}function U2(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function MK(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function jK(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function $2(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Lye(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Vye(t,e){var n=$2("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function eP(t){return t.replace(/_/g,".")}function Dm(t,e){var n=null,r="-1";return U2(t,function(i){var a=$2("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Vye(i.versionTest.toLowerCase(),e)||r),r=eP(r),!0)}),{preset:n,version:r}}function Qb(t,e){var n={brand:"",version:"-1"};return U2(t,function(r){var i=zK(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function zK(t,e){return MK(t,function(n){var r=n.brand;return $2(""+e.test,r.toLowerCase())})}var LK=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],VK=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],tP=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],BK=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],FK=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function UK(t){return!!Dm(BK,t).preset}function Bye(t){var e=jK(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:UK(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Dm(LK,e),s=a.preset,o=a.version,c=Dm(FK,e),u=c.preset,f=c.version,h=Dm(VK,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Dm(tP,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Fye(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Qb(BK,n).brand||UK(jK())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&U2(tP,function(g){return zK(n,g)});var c=Qb(VK,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=Qb(tP,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=MK(FK,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=Qb(LK,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=eP(o.version),s.version=eP(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function Uye(t){return Lye()?Fye():Bye(t)}function $ye(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function qye(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function Gye(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function $K(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Eo(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=gn(e),i=0;i<e;++i){var a=e*i+i;if(!lt(n[a],ur)){for(var s=i+1;s<e;++s)if(n[e*i+s]){qye(n,r,i,s,e);break}}if(!lt(n[a],ur))return[];Gye(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!lt(u,ur)||i===s||$ye(n,r,o,i,e,-u)}}return r}function Hye(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function qK(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Kye(t,e){for(var n=gn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Vd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Is(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=gn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Ww(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=gn(t);return e.forEach(function(i){r=tn(r,i,t)}),r}function tn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Nt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Je(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Wye(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function GK(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function pi(t,e,n){n===void 0&&(n=e.length);var r=tn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function Yye(t,e){return tn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Xye(t,e){return tn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Qye(t,e){return tn(t,j0(e,4))}function Zb(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return tn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function M0(t,e){return pi(j0(e,3),Vd(t,3))}function BA(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return tn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function jV(t,e){return tn(t,e,4)}function j0(t,e){var n=Math.cos(t),r=Math.sin(t),i=gn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function gn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function q2(t,e){for(var n=gn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Bd(t,e){for(var n=gn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function G2(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],_=i[1],T=a[0],I=a[1],O=s[0],D=s[1],N=o[0],C=o[1],P=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-_*c,-T*f,-I*f,-O*g,-D*g,-N*b,-C*b,-w*u,-_*u,-T*h,-I*h,-O*v,-D*v,-N*x,-C*x],R=Eo(P,8);if(!R.length)return[];var j=tn(R,[w,_,T,I,O,D,N,C],8);return j[8]=1,Is(Hye(j),3,4)}var ev=function(){return ev=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ev.apply(this,arguments)};function Zye(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zv(t,e){return e===void 0&&(e=0),vh(pp(t,e))}function Jye(t,e){var n=pi(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function vh(t){var e=Zye();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function pp(t,e){e===void 0&&(e=0);var n=pr(t)?t:eu(t);return n.map(function(r){var i=mK(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Cs(e)?ev(ev({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=hd(s).map(function(z,W){return W===0&&"x%"in f?f["%"]=e["x%"]:W===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],en(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=BA,u=[g,b,w]}else if(a==="translateY"){var _=Cs(e)?ev({"%":e["y%"]},e):{"%":e},b=en(s,_);o=BA,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=BA,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=hd(s).map(function(z){return parseFloat(z)}),I=T[0],O=T[1],D=O===void 0?I:O,N=T[2],C=N===void 0?1:N;o=Zb,u=[I,D,C]}else if(a==="scaleX"){var I=parseFloat(s);o=Zb,u=[I,1,1]}else if(a==="scaleY"){var D=parseFloat(s);o=Zb,u=[1,D,1]}else if(a==="scaleZ"){var C=parseFloat(s);o=Zb,u=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var P=N0(s),R=P.unit,j=P.value,L=R==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Qye):a==="rotateX"?o=Yye:a==="rotateY"&&(o=Xye),u=L}else if(a==="matrix3d")o=jV,u=hd(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var B=hd(s).map(function(z){return parseFloat(z)});o=jV,u=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var nP=function(t,e){return nP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},nP(t,e)};function ebe(t,e){nP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var HK=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),KK=(function(t){ebe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,HK)||this}return e})(bye);function tbe(t,e){return D0(t,e,HK)}var rP=function(){return rP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rP.apply(this,arguments)};function nbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var US=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Cs(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Cs(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=_l(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,nbe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(rP({listener:r},i))},t})();var iP=function(t,e){return iP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},iP(t,e)};function rbe(t,e){iP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ah=function(){return Ah=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ah.apply(this,arguments)};function ibe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function zV(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Jb(t){if(t){if(Hi(t))return document.querySelector(t)}else return null;if(R2(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var abe=(function(t){rbe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Jb(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Ah(Ah({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?ibe:s;return o({container:Jb(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Mv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:Jb(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Ah(Ah({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?zV:i,s=Jb(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=zV(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(US);function sbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function ji(t){return lt(t,ur)}function obe(t,e){return t.every(function(n,r){return ji(n-e[r])===0})}function lbe(t,e){return!ji(t[0]-e[0])&&!ji(t[1]-e[1])}function WK(t){return t.length<3?0:Math.abs(uye(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function LV(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Fd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Fd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function aP(t,e,n){var r=t[0],i=t[1],a=Fd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=Yw(c[0],c[1]),f=sP(e),h=[];if(f.forEach(function(b){var x=Yw(b[0],b[1]),w=b[0];if(obe(u,x))h.push({pos:t,line:b,type:"line"});else{var _=YK(H2(u,x),[c,b]);_.forEach(function(T){b.some(function(I){return lbe(I,T)})?h.push({pos:T,line:b,type:"point"}):ji(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Ki(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,_=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Ki(_,function(D){return D[1]!==i}),I=v[x[0]],O=T[1]>i?1:-1;I?I!==O&&++g:v[x[0]]=O}}}),g%2===1}function Yw(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ur&&(s=0),Math.abs(o)<ur&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function H2(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(_){return[_[0],_[1]]})}function YK(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(ji(a-t[1][0])){if(!ji(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(ji(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(ji(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=ji(g-b[0][0])&&0<=ji(b[0][1]-g)&&0<=ji(v-b[1][0])&&0<=ji(b[1][1]-v)})})),r.map(function(h){return[ji(h[0]),ji(h[1])]})}function sP(t){return sbe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function cbe(t,e){var n=t.slice(),r=e.slice();CV(n)===-1&&n.reverse(),CV(r)===-1&&r.reverse();var i=sP(n),a=sP(r),s=i.map(function(f){return Yw(f[0],f[1])}),o=a.map(function(f){return Yw(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=H2(f,b),_=YK(w,[g,a[x]]);v.push.apply(v,_.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return ul(g[0],b.pos)-ul(g[0],x.pos)}),c.push.apply(c,v),aP(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(aP(f[1],n)){var g=!1,v=_l(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=_l(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function ube(t,e){var n=cbe(t,e);return n.map(function(r){var i=r.pos;return i})}function dbe(t,e){var n=ube(t,e);return WK(n)}var oP=function(t,e){return oP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},oP(t,e)};function fbe(t,e){oP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sr=function(){return sr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sr.apply(this,arguments)};function hbe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function FA(t){return hbe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function pbe(t){return t.touches&&t.touches.length>=2}function ex(t){return t?t.touches?mbe(t.touches):[XK(t)]:[]}function gbe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function VV(t,e,n){var r=n.length,i=tv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=tv(e,r),f=u.clientX,h=u.clientY,g=tv(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,_=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:_,distY:T}}function UA(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mbe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(XK(t[r]));return n}function XK(t){return{clientX:t.clientX,clientY:t.clientY}}function tv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var $A=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),FA(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),FA(e)-FA(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=VV(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=VV([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=tv(e,this.length),i=tv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),UA(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),UA(e)/UA(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),BV=["textarea","input"],vbe=(function(t){fbe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,_=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,O=x.preventDefault,D=x.checkInput,N=x.dragFocusedInput,C=x.preventClickEventOnDragStart,P=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,z=g.target;if(z){var W=z.tagName.toLowerCase(),Z=BV.indexOf(W)>-1,G=z.isContentEditable;if(Z||G){if(D||!N&&B===z)return!1;if(B&&(B===z||G&&B.isContentEditable&&B.contains(z)))if(N)z.blur();else return!1}else if((O||g.type==="touchstart")&&B){var Y=B.tagName.toLowerCase();(B.isContentEditable||BV.indexOf(Y)>-1)&&B.blur()}(C||P||R)&&Qr(i._window,"click",i._onClick,!0)}i.clientStores=[new $A(ex(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Mv()-i.prevTime<200,i._isMouseEvent=gbe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var Q=i._preventMouseEvent||i.emit("dragStart",sr(sr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));Q===!1&&i.stop(),i._isMouseEvent&&i.flag&&O&&g.preventDefault()}if(!i.flag)return!1;var ee=0;if(L?(i._attchDragEvent(),j&&_&&(ee=setTimeout(function(){Qr(w,"touchstart",i.onDragStart,{passive:!1})}))):j&&_&&br(w,"touchstart",i.onDragStart),i.flag&&pbe(g)){if(clearTimeout(ee),L&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=ex(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var _=i._preventMouseEvent||i.emit("drag",sr(sr({},w),{isScroll:!!v,inputEvent:g}));if(_===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,_=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,I=i.isDrag;(w||_||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!_&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&br(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var O=g?.touches?ex(g):[],D=O.length;D===0||!i.options.keepDragging?i.flag=!1:i._addStore(new $A(O));var N=i._getPosition(),C=Mv(),P=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||P?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",sr({data:i.data,datas:i.data,isDouble:P,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},N)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){br(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=_K(s)?s:qc(s),i.options=sr({checkInput:!1,container:s&&!("document"in s)?qc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Qr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Qr(g,"mousedown",i.onDragStart),Qr(g,"mousemove",i._passCallback)}),Qr(c,"contextmenu",i._onContextMenu)),f&&Qr(qc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Qr(g,"touchstart",i.onDragStart,h),Qr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),sr(sr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),br(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){br(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){br(a,"mousedown",n.onDragStart)}),br(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){br(a,"touchstart",n.onDragStart)}),br(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new $A(ex(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",sr(sr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",sr(sr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",sr(sr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),sr(sr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return sr(sr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Qr(r,"dragover",this.onDrag,i),Qr(n,"dragend",this.onDragEnd)),this._useMouse&&(Qr(r,"mousemove",this.onDrag),Qr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Qr(r,"touchmove",this.onDrag,i),Qr(n,"touchend",this.onDragEnd,i),Qr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(br(r,"dragover",this.onDrag),br(n,"dragend",this.onDragEnd)),this._useMouse&&(br(r,"mousemove",this.onDrag),br(n,"mouseup",this.onDragEnd)),this._useTouch&&(br(r,"touchstart",this.onDragStart),br(r,"touchmove",this.onDrag),br(n,"touchend",this.onDragEnd),br(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(US);function ybe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var bbe=ybe;function xbe(t){return bbe(t).toString(36)}function wbe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Sbe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?hd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function _be(t,e,n,r,i){var a=qp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Sbe(t,e,n),(i||a.head||a.body).appendChild(s),s}function Ebe(t){var e="rCS"+xbe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=wbe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=_be(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var lP=function(){return lP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lP.apply(this,arguments)};function Tbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function QK(t,e){var n=Ebe(e),r=n.className;return _ye(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Tbe(i,["className","cspNonce"]),u=jye();return zye(a,function(){return u.current},[]),RK(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Es(t,lP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var cP=function(t,e){return cP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},cP(t,e)};function z0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)};function Abe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kbe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Cbe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Ne(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function L0(t,e){return ae({events:[],props:[],name:t},e)}var Ibe=["n","w","s","e"],K2=["n","w","s","e","nw","ne","sw","se"];function Pbe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Nbe(t){var e=Pbe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Hp=Uye(),ZK=Hp.browser.webkit,JK=ZK&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),eW=Hp.browser.name,tW=parseInt(Hp.browser.version,10),Dbe=eW==="chrome",Obe=Hp.browser.chromium,Rbe=parseInt(Hp.browser.chromiumVersion,10)||0,Mbe=Dbe&&tW>=109||Obe&&Rbe>=109,jbe=eW==="firefox",zbe=parseInt(Hp.browser.webkitVersion,10)>=612||tW>=15,W2="moveable-",Lbe=K2.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),Vbe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Lbe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Nbe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(JK?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Bbe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],uP=1e-4,Ai=1e-7,tx=1e-9,dP=Math.pow(10,10),FV=-dP,Fbe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Y2={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},nW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},rW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function V0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ae(ae({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var gp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ae(ae({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Bh(t,e,n,r){var i=t.length===16,a=i?4:3,s=af(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],_=le(o[3],2),T=_[0],I=_[1],O=le(kn(t,e,a),2),D=O[0],N=O[1],C=Math.min(u,g,x,T),P=Math.min(f,v,w,I),R=Math.max(u,g,x,T),j=Math.max(f,v,w,I);u=u-C||0,g=g-C||0,x=x-C||0,T=T-C||0,f=f-P||0,v=v-P||0,w=w-P||0,I=I-P||0,D=D-C||0,N=N-P||0;var L=t[0],B=t[a+1],z=xi(L*B);return{left:C,top:P,right:R,bottom:j,origin:[D,N],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[T,I],direction:z}}function iW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(Je(yp(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(Io({datas:i,distX:b,distY:x}),2),_=w[0],T=w[1];return[_,T]}function rf(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=Eo(i,v),n.inverseBeforeMatrix=Eo(a,v),n.absoluteOrigin=Vd(Nt([o,c],u),v),n.startDragBeforeDist=pi(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=pi(n.inverseMatrix,n.absoluteOrigin,v)}function Ube(t){return Bh(t.datas.beforeTransform,[50,50],100,100).direction}function $S(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=_l(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Ki(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=pwe(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ne(Ne([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function qS(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function $be(t){var e=t.datas,n=t.distX,r=t.distY,i=le(sW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=aW(e,Kye([a,s],4));return pi(o,Vd([0,0,0],4),4)}function aW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?tn(o,e,4):tn(e,o,4),u=tn(Eo(n?a:r,4),c,4),f=tn(u,Eo(n?s:i,4),4);return f}function sW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return Je(pi(i,Nt(o,[n,r]),c),s)}function Io(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return Je(pi(e?a:s,Nt(f,[r,i]),h),e?c:u)}function qbe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return Je(pi(a,Nt(o,[r,i]),u),c)}function Gbe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=N0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function oW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Hbe(t,e){return oW(e).map(function(n){return t[n]})}function qA(t,e){var n=(e+1)/2;return[Hw(t[0][0],t[1][0],n,1-n),Hw(t[0][1],t[1][1],n,1-n)]}function Er(t,e){var n=qA([t[0],t[1]],e[0]),r=qA([t[2],t[3]],e[0]);return qA([n,r],e[1])}function Kbe(t,e,n,r,i,a){var s=af(e,n,r,i),o=Er(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function B0(t,e,n,r){return tn(t,rv(e,r,n),r)}function Wbe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Hi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Is(zv(n),4,o):c=Is(tn(tn(u,zv([n]),4),f,4),4,o)}else c=n;return B0(a,c,i,o)}function Ybe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return B0(r,tn(s||a,q2(e,o),o),n,o)}function GS(t,e){var n=Kp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=pr(r)?r:eu(r),fP(t,e,i)},setTransformIndex:function(r){fP(t,e,r)}}}function HS(t,e,n){var r=Kp(e),i=r.startTransforms;fP(t,e,_l(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function fP(t,e,n){var r=Kp(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=pp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function X2(t,e){var n=Kp(t);n.nextTransforms=eu(e)}function Kp(t){return t.originalDatas.beforeRenderable}function Xw(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function nx(t){return(Xw(t)||[]).join(" ")}function rx(t){return Kp(t).nextStyle}function lW(t,e,n,r,i){X2(i,e);var a=bi.drag(t,V0(i,t.state,n,r)),s=a?a.transform:e;return ae(ae({transform:e,drag:a},_i({transform:s},i)),{afterTransform:s})}function Q2(t,e,n,r,i,a){var s=Wbe(t.state,i,e,a),o=Zbe(t,n,r,s);return o}function cW(t,e,n,r,i,a,s){var o=Q2(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=Je(r,o);return Je(b,[g,v])}function Xbe(t,e,n,r,i,a,s){var o=cW(t,e,n,r,i,a,s);return o}function Qbe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Zbe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return kn(r,u,c)}function Jbe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return cW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function exe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,_=f?4:3,T=Gbe(i,e,n,h,g,c),I=s?v:0,O=s?b:0,D=B0(u,w,T,_),N=Kbe(r,D,e,n,_,x);return Je(N,[I,O])}function txe(t,e){return Er(Wa(t.state),e)}function nxe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function rxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function ixe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function uW(t,e,n){for(var r=t,i=[],a=z2(t)||hu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=Vv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Wi(r),_=w("position"),T=RW(r),I=_==="fixed",O=ixe(w),D=Wye(twe(T)),N=void 0,C=!1,P=!1,R=0,j=0,L=0,B=0,z={hasTransform:!1,fixedContainer:null};I&&(v=!0,z=swe(r),b=z.fixedContainer);var W=D.length;!c&&(W===16||O.length)&&(c=!0,u=4,yP(i),g&&(g=Is(g,3,4))),c&&W===9&&(D=Is(D,3,4));var Z=awe(r,t),G=Z.tagName,Y=Z.hasOffset,Q=Z.isSVG,ee=Z.origin,te=Z.targetOrigin,U=Z.offset,X=le(U,2),ne=X[0],K=X[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:owe(r,u)}),i.push({type:"offset",target:r,matrix:gn(u)}));var ue=parseFloat(w("zoom"))||1;if(I)N=z.fixedContainer,C=!0;else{var ie=Vv(r,e,!1,!0,w),oe=ie.offsetZoom;if(N=ie.offsetParent,C=ie.isEnd,P=ie.isStatic,x*=oe,(ie.isCustomElement||oe!==1)&&P)ne-=N.offsetLeft,K-=N.offsetTop;else if(jbe||Mbe){var _e=ie.parentSlotElement;if(_e){for(var se=N,ge=0,de=0;se&&rxe(se);)ge+=se.offsetLeft,de+=se.offsetTop,se=se.offsetParent;ne-=ge,K-=de}}}if(ZK&&!zbe&&Y&&!Q&&P&&(_==="relative"||_==="static")&&(ne-=N.offsetLeft,K-=N.offsetTop,s=s||C),I)Y&&z.hasTransform&&(L=N.clientLeft,B=N.clientTop);else if(Y&&b!==N&&(R=N.clientLeft,j=N.clientTop),Y&&N===a){var J=MW(r,!1);ne+=J[0],K+=J[1]}if(i.push({type:"target",target:r,matrix:rv(D,u,ee)}),O.length&&(i.push({type:"offset",target:r,matrix:gn(u)}),i.push({type:"target",target:r,matrix:rv(zv(O),u,ee)})),Y){var Se=r===t,Ce=Se?0:r.scrollLeft,Oe=Se?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Bd([ne-Ce+R-L,K-Oe+j-B],u)})}else i.push({type:"offset",target:r,origin:ee});if(ue!==1&&i.push({type:"zoom",target:r,matrix:rv(q2([ue,ue],u),u,[0,0])}),g||(g=D),f||(f=ee),h||(h=te),o||I)break;r=N,s=C,(!n||r===a)&&(o=s)}return g||(g=gn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var ad=null,sd=null,kh=null;function mp(t){t?(window.Map&&(ad=new Map,sd=new Map),kh=[]):(ad=null,kh=null,sd=null)}function axe(t){var e=sd?.get(t);if(e)return e;var n=iv(t,!0);return sd&&sd.set(t,n),n}function sxe(t,e){if(kh){var n=Ki(kh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=uW(t,e,!0);return kh&&kh.push([[t,e],r]),r}function Wi(t){var e=ad?.get(t);if(!e){var n=qc(t).getComputedStyle(t);if(!ad)return function(a){return n[a]};e={style:n,cached:{}},ad.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Ts(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ae(ae({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function GA(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=Ts(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var _=g[w],T=_.state,I=T.gestos,O=x;if(o)O=new gp(s).dragStart(r,x),v.push(O);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;O=V0(x,T,r,u,a,s),v.push(O)}var D=e[n](_,ae(ae({},O),{parentFlag:!0}));return c&&(I[s]=null),D});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function dl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=Ts(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,ae(ae({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function Qw(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Wa(e.state),o=Er(s,i),c=le(pi(j0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function dW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Ud(t.props,e).zoom,u=nv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=xi(o);return n.map(function(b){var x=b.data,w=b.classNames,_=b.dir,T=Y2[_];if(!T||!f[_])return null;g[_]=!0;var I=(lt(u,15)+v*nW[_]+720)%180,O={};return El(x).forEach(function(D){O["data-".concat(D)]=x[D]}),r.createElement("div",ae({className:Xe.apply(void 0,Ne(["control","direction",_,e],le(w),!1)),"data-rotation":I,"data-direction":_},O,{key:"direction-".concat(_),style:t1.apply(void 0,Ne([s,c],le(T.map(function(D){return a[D]})),!1))}))})}function fW(t,e,n,r){var i=Ud(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?K2:s;return Ne(Ne([],le(o?mW(t,r,n,c):[]),!1),le(dW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Lv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Qn(n,r),u=e?lt(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Xe.apply(void 0,Ne(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Rm(n,r,i,c)})}function hW(t,e,n,r,i){var a=n===!0?Ibe:n;return a.map(function(s,o){var c=le(Y2[s],2),u=c[0],f=c[1];if(f!=null)return Lv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function pW(t){return function(e,n){var r=Ud(e.props,t).edge;return r&&(r===!0||r.length)?Ne(Ne([],le(hW(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(oxe(e,t,n)),!1):gW(e,t,n)}}function gW(t,e,n){return fW(t,K2,e,n)}function oxe(t,e,n){return fW(t,["nw","ne","sw","se"],e,n)}function mW(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=xi(c),g=o/Math.PI*180;return(r||El(u)).map(function(v){var b=Y2[v];if(!b)return null;var x=(lt(g,15)+h*nW[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Xe.apply(void 0,Ne([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:t1.apply(void 0,Ne([o,f],le(b.map(function(_){return s[_]})),!1))})})}function Z2(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:UV(b,e,!0),horizontal:UV(b,n,!1)}}function KS(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,_=w===void 0?-1/0:w,T=v.top,I=T===void 0?-1/0:T,O=v.right,D=O===void 0?x?-1/0:1/0:O,N=v.bottom,C=N===void 0?x?-1/0:1/0:N;return x&&(D=a+h-u-D,C=i+g-f-C),{left:_+u-s,right:D+u-s,top:I+f-o,bottom:C+f-o}}function lxe(t,e,n){var r=KS(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(Je(n,e),2),g=h[0],v=h[1];Ie(g)<Ai&&(g=0),Ie(v)<Ai&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},_={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:_};if(g===0)b?o<f&&(_.pos=o,_.offset=f-o):a>f&&(_.pos=a,_.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=v/g,I=n[1]-T*u,O=0,D=0,N=!1;x&&s<=u?(O=T*s+I,D=s,N=!0):!x&&u<=i&&(O=T*i+I,D=i,N=!0),N&&(O<a||O>o)&&(N=!1),N||(b&&o<=f?(O=o,D=(O-I)/T,N=!0):!b&&f<=a&&(O=a,D=(O-I)/T,N=!0)),N&&(w.isBound=!0,w.pos=D,w.offset=u-D,_.isBound=!0,_.pos=O,_.offset=f-O)}return{vertical:w,horizontal:_}}function UV(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ne([],le(e),!1)),s=Math.max.apply(Math,Ne([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ie(u.offset)-Ie(c.offset)})}function $V(t,e,n){var r=n?t.map(function(i){return M0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ie(i[0]-e.left)>.1||i[0]>e.right&&Ie(i[0]-e.right)>.1||i[1]<e.top&&Ie(i[1]-e.top)>.1||i[1]>e.bottom&&Ie(i[1]-e.bottom)>.1})}function cxe(t,e,n){var r=Ka(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ie(a-t[n?0:1])-Ie(s-t[n?0:1])}).map(function(a){return Qn([0,0],n?[a,e]:[e,a])})}function uxe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=KS(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!$V(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(_){var T=le(_,2),I=T[0],O=T[1];n.forEach(function(D){var N=Qn([0,0],D);w.push.apply(w,Ne([],le(cxe(D,I,O).map(function(C){return a+C-N}).filter(function(C){return!$V(e,x,C)}).map(function(C){return lt(C*180/Math.PI,Ai)})),!1))})}),w}var dxe=["left","right","center"],fxe=["top","bottom","middle"],qV={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},tu={start:"left",end:"right",center:"center"},nu={start:"top",end:"bottom",center:"middle"};function Ch(){return{left:!1,top:!1,right:!1,bottom:!1}}function Wp(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function J2(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function hxe(t,e){var n=J2(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function eO(t,e){var n=hxe(t,e),r=fxe.filter(function(a){return a in n}),i=dxe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function pxe(t,e,n){var r=kn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function gxe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ur&&(i=0),Math.abs(a)<ur&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return lt(u,ur)})}var vW="snapRotationThreshold",yW="snapRotationDegrees",bW="snapHorizontalThreshold",xW="snapVerticalThreshold";function WS(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=aB(s,c[bW],5),h=aB(a,c[xW],5);return wW(t.state.guidelines,e,n,r,i,f,h,u)}function wW(t,e,n,r,i,a,s,o){return{vertical:HV(t,"vertical",e,s*o[0],r),horizontal:HV(t,"horizontal",n,a*o[1],i)}}function mxe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(Je(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=n1(f),h=n1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=WS(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),_=w.vertical,T=w.horizontal;_.posInfos.filter(function(G){var Y=G.pos;return v?Y>=o:Y<=o}),T.posInfos.filter(function(G){var Y=G.pos;return g?Y>=c:Y<=c}),_.isSnap=_.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=hP(_),O=I.isSnap,D=I.guideline,N=hP(T),C=N.isSnap,P=N.guideline,R=C?P.pos[1]:0,j=O?D.pos[0]:0;if(f===0)C&&(x.isSnap=!0,x.pos=P.pos[1],x.offset=a-x.pos);else if(h===0)O&&(b.isSnap=!0,b.pos=j,b.offset=i-j);else{var L=h/f,B=n[1]-L*i,z=0,W=0,Z=!1;O?(W=j,z=L*W+B,Z=!0):C&&(z=R,W=(z-B)/L,Z=!0),Z&&(b.isSnap=!0,b.pos=W,b.offset=i-W,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function Mc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function GV(t,e,n,r){var i=eO(t.props.snapDirections,e),a=WS(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Mc(c)}),i.horizontalNames.map(function(c){return Mc(c)}),n,r),s=Mc(i.horizontalNames[a.horizontal.index]),o=Mc(i.verticalNames[a.vertical.index]);return{vertical:ae(ae({},a.vertical),{direction:o}),horizontal:ae(ae({},a.horizontal),{direction:s})}}function hP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function HV(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,_=h-w[c];return{offset:_,dist:Ie(_),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,_=x.dist,T=w.type;return!(T!==e||_>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function vxe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ne([],le(Hbe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return Er(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=WS(t,o,c,a.map(function(g){return Mc(g[0])}),a.map(function(g){return Mc(g[1])}),r,i),f=Mc(a.map(function(g){return g[0]})[u.vertical.index]),h=Mc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ae(ae({},u.vertical),{direction:f}),horizontal:ae(ae({},u.horizontal),{direction:h})}}function SW(t,e){var n=Ie(t.offset),r=Ie(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ai?1:r<Ai?-1:n-r}function Zw(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return SW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function yxe(t,e,n){var r=[];if(n)Ie(e[0])!==1||Ie(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ie(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ie(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function _W(t,e){var n=ZI([e[0][0],e[1][0]]),r=ZI([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function tO(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ie(a)<Ai&&(a=0),Ie(s)<Ai&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function EW(t,e,n,r){return r===void 0&&(r=Ai),t.every(function(i){var a=tO(i,e),s=a<=0;return s===n||Ie(a)<=r})}function KV(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function bxe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(EW([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=jc(n,s,v,i),_=jc(n,s,x,i),T=jc(n,s,g,a),I=jc(n,s,b,a),O=w.isBound&&_.isBound,D=w.isBound||_.isBound,N=T.isBound&&I.isBound,C=T.isBound||I.isBound,P=vp(w.offset,_.offset),R=vp(T.offset,I.offset),j=[0,0],L=!1,B=!1;return Ie(R)<Ie(P)?(j=[P,0],L=D,B=O):(j=[0,R],L=C,B=N),{isAllBound:B,isVerticalBound:D,isHorizontalBound:C,isBound:L,offset:j}}function jc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=n1(h[1]-f[1]),v=n1(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var O=(f[1]-u[1])/w+u[0];return KV(O,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=Ie(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var _=w*(f[0]-u[0])+u[1];return KV(_,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=Ie(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function TW(t,e,n){return e.map(function(r){var i=bxe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Io({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function xxe(t,e,n){var r,i=nO(t,e,[0,0],!1).map(function(g){return ae(ae({},g),{multiple:g.multiple.map(function(v){return Ie(v)*2})})}),a=TW(t,i,n),s=Zw(a,0),o=Zw(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(qbe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function wxe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function nO(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=af(a,100,100,s?4:3),c=Er(o,[0,0]);return wxe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[Er(o,g),Er(o,v)],x=gxe(b),w=_W(c,b),_=w.vertical,T=w.horizontal,I=tO(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:_,horizontalSign:T,lineConstants:x,line:[Er(e,g),Er(e,v)]}})}function WV(t,e,n,r){var i=r?t.map(function(a){return M0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=tO(n,a)<=0;return!EW(e,a,s)})}function Sxe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ie(n[0]);if(!a)return Ie(n[1]);var s=a/i;return Ie((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function _xe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function Exe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=Er(n,[0,0]);if(!WV(n,x,w,0))return[];var _=[],T=x.map(function(I){return[Ka(I),Qn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var O=Qn([0,0],_xe(I)),D=Sxe(I);_.push.apply(_,Ne([],le(T.filter(function(N){var C=le(N,1),P=C[0];return P&&D<=P}).map(function(N){var C=le(N,2),P=C[0],R=C[1],j=Math.acos(P?D/P:0),L=R+j,B=R-j;return[s+L-O,s+B-O]}).reduce(function(N,C){return N.push.apply(N,Ne([],le(C),!1)),N},[]).filter(function(N){return!WV(e,x,w,N)}).map(function(N){return lt(N*180/Math.PI,Ai)})),!1))}),_}function Txe(t){var e=t.props.innerBounds,n=Ch();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=Er(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],_=[[f,h+v],[f+g,h+v]],T=nO(t,c,[0,0],!1),I=[],O=[];return T.forEach(function(D){var N=D.line,C=D.lineConstants,P=_W(u,N),R=P.horizontal,j=P.vertical,L=jc(N,C,x,j,1,!0),B=jc(N,C,_,j,1,!0),z=jc(N,C,b,R,1,!0),W=jc(N,C,w,R,1,!0);L.isBound&&!n.top&&(I.push(h),n.top=!0),B.isBound&&!n.bottom&&(I.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(O.push(f),n.left=!0),W.isBound&&!n.right&&(O.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:O}}function Axe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ie(i)<ur&&(i=0),Ie(a)<ur&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function pP(t,e,n,r,i){var a=Axe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=ul(t,e),o=ul(a,t),c=ul(a,e),u=o>s||c>s,f=le(Io({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function Jw(t,e){return t.isBound?t.offset:e.isSnap?hP(e).offset:0}function kxe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],_=-x,T=-w;if(t&&s&&o){_=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&v?I.push([0,w],[x,0]):g?I.push([x,0]):v&&I.push([0,w]),I.length){I.sort(function(C,P){return Ka(Je([s,o],C))-Ka(Je([s,o],P))});var O=I[0];if(O[0]&&Ie(s)>ur)_=-O[0],T=o*Ie(s+_)/Ie(s)-o;else if(O[1]&&Ie(o)>ur){var D=o;T=-O[1],_=s*Ie(o+T)/Ie(D)-s}if(t&&f&&u)if(Ie(_)>ur&&Ie(_)<Ie(x)){var N=Ie(x)/Ie(_);_*=N,T*=N}else if(Ie(T)>ur&&Ie(T)<Ie(w)){var N=Ie(w)/Ie(T);_*=N,T*=N}else _=vp(-x,_),T=vp(-w,T)}}else _=s||u?-x:0,T=o||f?-w:0;return[_,T]}function Cxe(t,e,n,r,i,a){if(!Wp(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=aO(a.absolutePoses,[e,n]),o=Ga(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(W){return W[1]}),vertical:s.map(function(W){return W[0]})},v=J2(t.props.snapDirections),b=eO(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=YS(t,i,b,g),w=x.vertical,_=x.horizontal,T=xxe(t,s,a),I=T.vertical,O=T.horizontal,D=w.isSnap,N=_.isSnap,C=w.isBound||I.isBound,P=_.isBound||O.isBound,R=vp(w.offset,I.offset),j=vp(_.offset,O.offset),L=le(kxe(r,[e,n],[C,P],[D,N],[R,j]),2),B=L[0],z=L[1];return[{isBound:C,isSnap:D,offset:B},{isBound:P,isSnap:N,offset:z}]}function YS(t,e,n,r){r===void 0&&(r=n);var i=Z2(KS(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:WS(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=Jw(a[0],c),h=Jw(s[0],u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function YV(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=Z2(e,n,r),c=o.horizontal,u=o.vertical,f=wW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=Jw(c[0],h),b=Jw(u[0],g),x=Ie(v),w=Ie(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function Ixe(t,e,n,r){var i=Qn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function Pxe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=Er(e,c),h=Er(e,u),g=r?Nxe(t,f,h,i):YS(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,_=g.vertical,T=_.offset,I=_.isBound,O=_.isSnap,D=Je(u,c);if(!T&&!b)return{isBound:I||x,isSnap:O||w,sign:D,offset:[0,0]};var N=Ixe(f,h,g,r);if(!N)return{sign:D,isBound:!1,isSnap:!1,offset:[0,0]};var C=N==="vertical",P=[0,0];return!r&&Ie(u[0])===1&&Ie(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?P=Io({datas:a,distX:-T,distY:-b}):P=pP(f,h,-(C?T:b),C,a).offset,P=P.map(function(R,j){return R*(D[j]?2/D[j]:0)}),{sign:D,isBound:C?I:x,isSnap:C?O:w,offset:P}})}function XV(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Nxe(t,e,n,r){var i=lxe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:mxe(t,e,n),c=o.horizontal,u=o.vertical,f=XV(a,c),h=XV(s,u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function Dxe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,_=u.right,T=_===void 0?1/0:_,I=u.bottom,O=I===void 0?1/0:I;g.forEach(function(D){var N=D[0]!==a[0],C=D[1]!==a[1],P=Er(e,D),R=Qn(r,P)*360/Math.PI;if(C){var j=P.slice();(Ie(R-360)<2||Ie(R-180)<2)&&(j[1]=r[1]);var L=pP(r,j,(r[1]<P[1]?O:w)-P[1],!1,i),B=le(L.offset,2),z=B[1],W=L.isOutside;isNaN(z)||(h=c+(W?1:-1)*Ie(z))}if(N){var j=P.slice();(Ie(R-90)<2||Ie(R-270)<2)&&(j[0]=r[0]);var Z=pP(r,j,(r[0]<P[0]?T:b)-P[0],!0,i),G=le(Z.offset,1),Y=G[0],Q=Z.isOutside;isNaN(Y)||(f=o+(Q?1:-1)*Ie(Y))}})}return{maxWidth:f,maxHeight:h}}var bi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ka(u),h=Qn(u,[0,0]);return[e.createElement("div",{className:Xe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],rf(t,e),HS(t,e,"translate"),Qxe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ht(t,e,ae({set:function(f){n.startValue=f}},GS(t,e))),u=r||Le(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){$S(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var _=t.props,T=_.parentMoveable,I=u?0:_.throttleDrag||f||0,O=r?0:_.throttleDragRotate||0,D=0,N=!1,C=!1,P=!1,R=!1;if(!r&&O>0&&(h||g)){var j=_.startDragRotate||0,L=lt(j+Qn([0,0],[h,g])*180/Math.PI,O)-j,B=g*Math.abs(Math.cos((L-90)/180*Math.PI)),z=h*Math.abs(Math.cos(L/180*Math.PI)),W=Ka([z,B]);D=L*Math.PI/180,h=W*Math.cos(D),g=W*Math.sin(D)}if(!a&&!r&&!i){var Z=le(Cxe(t,h,g,O,!o&&c||s,n),2),G=Z[0],Y=Z[1];N=G.isSnap,C=G.isBound,P=Y.isSnap,R=Y.isBound;var Q=G.offset,ee=Y.offset;h+=Q,g+=ee}var te=Nt(sW({datas:n,distX:h,distY:g}),w),U=Nt($be({datas:n,distX:h,distY:g}),w);IV(U,Ai),IV(te,Ai),O||(!N&&!C&&(U[0]=lt(U[0],I),te[0]=lt(te[0],I)),!P&&!R&&(U[1]=lt(U[1],I),te[1]=lt(te[1],I)));var X=Je(te,w),ne=Je(U,w),K=Je(ne,b),ue=Je(X,x);n.prevDist=ne,n.prevBeforeDist=X,n.passDelta=K,n.passDist=ne;var ie=n.left+X[0],oe=n.top+X[1],_e=n.right-X[0],se=n.bottom-X[1],ge=qS(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(ne[0],"px, ").concat(ne[1],"px)"));if(X2(e,ge),t.state.dragInfo.dist=r?[0,0]:ne,!(!r&&!T&&K.every(function(Oe){return!Oe})&&ue.some(function(Oe){return!Oe}))){var de=t.state,J=de.width,Se=de.height,Ce=ht(t,e,ae({transform:ge,dist:ne,delta:K,translate:U,beforeDist:X,beforeDelta:ue,beforeTranslate:te,left:ie,top:oe,right:_e,bottom:se,width:J,height:Se,isPinch:a},_i({transform:ge},e)));return!r&&Le(t,"onDrag",Ce),Ce}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ae(ae({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ba(t,e,{});return!n&&Le(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=GA(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ae(ae({},o),{targets:t.props.targets,events:f}),g=Le(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ae(ae({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=GA(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ae({targets:t.props.targets,events:a},r);return Le(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=GA(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Le(t,"onDragGroupEnd",ba(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function AW(t,e){var n=Er(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Oxe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=kn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function kW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Qbe(e,i,a),c=kn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var QV=lO("resizable"),gP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:pW("resizable"),dragControlCondition:QV,viewClassName:oO("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=BW(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&rf(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var _=t.props.transformOrigin||"% %";c.transformOrigin=Hi(_)?_.split(" "):_,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Wa(t.state);function I(R){var j=AW(c.startPositions,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function O(R){var j=kW(t.state,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function D(R){c.minSize=[en("".concat(R[0]),0)||0,en("".concat(R[1]),0)||0]}function N(R){var j=[R[0]||1/0,R[1]||1/0];(!hp(j[0])||isFinite(j[0]))&&(j[0]=en("".concat(j[0]),0)||1/0),(!hp(j[1])||isFinite(j[1]))&&(j[1]=en("".concat(j[1]),0)||1/0),c.maxSize=j}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=O,c.setMin=D,c.setMax=N;var C=ht(t,e,{direction:h,startRatio:c.ratio,set:function(R){var j=le(R,2),L=j[0],B=j[1];c.startWidth=L,c.startHeight=B},setMin:D,setMax:N,setRatio:T,setFixedDirection:I,setFixedPosition:O,setOrigin:function(R){c.transformOrigin=R},dragStart:bi.dragStart(t,new gp().dragStart([0,0],e))}),P=f||Le(t,"onResizeStart",C);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,P!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,_=r.startHeight,T=r.prevWidth,I=r.prevHeight,O=r.minSize,D=r.maxSize,N=r.ratio,C=r.startOffsetWidth,P=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var j=t.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,z=j?4:3,W=zv(Xw(e)),Z=Math.sqrt(W.length);z!==Z&&(W=Is(W,Z,z));var G=B0(L,W,B,z),Y=af(G,C,P,z);r.startPositions=Y,r.nextTargetMatrix=W,r.nextAllMatrix=G}var Q=Ud(t.props,"resizable"),ee=Q.resizeFormat,te=Q.throttleResize,U=te===void 0?i?0:1:te,X=Q.parentMoveable,ne=Q.keepRatioFinally,K=r.direction,ue=K,ie=0,oe=0;!K[0]&&!K[1]&&(ue=[1,1]);var _e=N&&(s??Q.keepRatio)||!1;function se(){var bt=r.fixedDirection,Ft=HW(ue,_e,r,e);ie=Ft.distWidth,oe=Ft.distHeight;var Me=ue[0]-bt[0]||_e?Math.max(C+ie,Ai):C,ut=ue[1]-bt[1]||_e?Math.max(P+oe,Ai):P;return _e&&C&&P&&(R?ut=Me/N:Me=ut*N),[Me,ut]}var ge=le(se(),2),de=ge[0],J=ge[1];g||(r.setFixedDirection(r.fixedDirection),Le(t,"onBeforeResize",ht(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(bt){var Ft;return r.setFixedDirection(bt),Ft=le(se(),2),de=Ft[0],J=Ft[1],[de,J]},setFixedPosition:function(bt){var Ft;return r.setFixedPosition(bt),Ft=le(se(),2),de=Ft[0],J=Ft[1],[de,J]},boundingWidth:de,boundingHeight:J,setSize:function(bt){var Ft;Ft=le(bt,2),de=Ft[0],J=Ft[1]}},!0)));var Se=o;o||(!i&&a?Se=txe(t,[0,0]):Se=r.fixedPosition);var Ce=[0,0];a||(Ce=Yxe(t,de,J,K,Se,!u&&f,r)),c&&(!c[0]&&(Ce[0]=0),!c[1]&&(Ce[1]=0));function Oe(){var bt;ee&&(bt=le(ee([de,J]),2),de=bt[0],J=bt[1]),de=lt(de,U),J=lt(J,U)}if(_e){ue[0]&&ue[1]&&Ce[0]&&Ce[1]&&(Ie(Ce[0])>Ie(Ce[1])?Ce[1]=0:Ce[0]=0);var ze=!Ce[0]&&!Ce[1];ze&&Oe(),ue[0]&&!ue[1]||Ce[0]&&!Ce[1]||ze&&R?(de+=Ce[0],J=de/N):(!ue[0]&&ue[1]||!Ce[0]&&Ce[1]||ze&&!R)&&(J+=Ce[1],de=J*N)}else de+=Ce[0],J+=Ce[1],de=Math.max(0,de),J=Math.max(0,J);n=le(yK([de,J],O,D,_e?N:!1),2),de=n[0],J=n[1],Oe(),_e&&(h||ne)&&(R?J=de/N:de=J*N),ie=de-C,oe=J-P;var Ve=[ie-T,oe-I];r.prevWidth=ie,r.prevHeight=oe;var rt=exe(t,de,J,Se,x,r);if(!(!X&&Ve.every(function(bt){return!bt})&&rt.every(function(bt){return!bt}))){var Be=bi.drag(t,V0(e,t.state,rt,!!a,!1,"draggable")),nt=Be.transform,Bt=w+ie,Bn=_+oe,Tn=ht(t,e,ae({width:Bt,height:Bn,offsetWidth:Math.round(de),offsetHeight:Math.round(J),startRatio:N,boundingWidth:de,boundingHeight:J,direction:K,dist:[ie,oe],delta:Ve,isPinch:!!a,drag:Be},UW({style:{width:"".concat(Bt,"px"),height:"".concat(Bn,"px")},transform:nt},Be,e)));return!g&&Le(t,"onResize",Tn),Tn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Ie(h)>3,b=Ie(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ba(t,e,{});return!r&&Le(t,"onResizeEnd",i),i}},dragGroupControlCondition:QV,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ae(ae({},e),{isGroup:!0}));if(!r)return!1;var i=Ts(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,_=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(_?w[0]/_:0),O=s*(T?w[1]/T:0);v[0]=Math.max(v[0],I),v[1]=Math.max(v[1],O)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,_=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(_?w[0]/_:0),O=s*(T?w[1]/T:0);v[0]=Math.min(v[0],I),v[1]=Math.min(v[1],O)})}var u=dl(t,this,"dragControlStart",e,function(v,b){return Qw(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),Qw(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ae(ae({},r),{targets:t.props.targets,events:u.map(function(v){return ae(ae({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Le(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Ud(t.props,"resizable");QS(t,"onBeforeResize",function(v){Le(t,"onBeforeResizeGroup",ht(t,e,ae(ae({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,ae(ae({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=dl(t,this,"dragControl",e,function(v,b){var x=le(pi(j0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],_=x[1];return ae(ae({},b),{parentDist:null,parentScale:u,dragClient:Nt(f,[w,_]),parentKeepRatio:c})}),g=ae({targets:r.targets,events:h},i);return Le(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=dl(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Le(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function HA(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=kn(t.state.rootMatrix,Je([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Nt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Qn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ul(f,[n,r])}function iw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function KA(t,e,n,r){return iw(Qn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function WA(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=Wxe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=lt(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function CW(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(pr(t))return t.map(function(w){return CW(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=LW(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function mP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(_r(n,Xe("rotation-control"))||t.props.rotateAroundControls&&_r(n,Xe("around-control"))||_r(n,Xe("control"))&&_r(n,Xe("rotatable")))return!0;var r=t.props.rotationTarget;return r?cO(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Rxe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Mxe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Rxe],viewClassName:function(t){return t.isDragging("rotatable")?Xe("view-rotation-dragging"):""},render:function(t,e){var n=Ud(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=CW(i,f,h),v=[];if(g.forEach(function(_,T){var I=le(_,2),O=I[0],D=I[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:Xe("rotation"),style:{transform:"translate(-50%) translate(".concat(O[0],"px, ").concat(O[1],"px) rotate(").concat(D,"rad)")}},e.createElement("div",{className:Xe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Xe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=El(c||{}),x={};b.forEach(function(_){c[_].forEach(function(T){x[T]=_})});var w=[];pr(s)&&(w=s.map(function(_){var T=x[_];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:_}})),v.push.apply(v,Ne([],le(dW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,Ne([],le(mW(t,e)),!1)),v},dragControlCondition:mP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,_=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,O=h.targetMatrix,D=h.allMatrix,N=h.width,C=h.height;if(!f&&!g)return!1;var P=t.getRect();i.rect=P,i.transform=_,i.left=v,i.top=b;var R=function(ue){var ie=kW(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedPosition(ue)},j=function(ue){var ie=Oxe(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedDirection(ue)},L=a,B=s;if(f||u||c){var z=o||0;i.beforeInfo={origin:P.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=ae(ae({},i.beforeInfo),{origin:P.origin}),i.absoluteInfo=ae(ae({},i.beforeInfo),{origin:P.origin,startValue:z})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Z=W.getAttribute("data-direction")||"",G=Fbe[Z];if(G){i.isControl=!0,i.isAroundControl=_r(W,Xe("around-control")),i.controlDirection=G;var Y=W.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var Q=uwe(h.rootMatrix,h.renderPoses,T);n=le(Er(Q,G),2),L=n[0],B=n[1]}}i.beforeInfo={origin:P.beforeOrigin},i.afterInfo={origin:P.origin},i.absoluteInfo={origin:P.origin,startValue:P.rotation};var ee=R;R=function(ue){var ie=h.is3d?4:3,oe=le(Nt(qK(O,ie),ue),2),_e=oe[0],se=oe[1],ge=pi(I,Vd([_e,se],ie)),de=pi(D,Vd([ue[0],ue[1]],ie));ee(ue);var J=h.posDelta;i.beforeInfo.origin=Je(ge,J),i.afterInfo.origin=Je(de,J),i.absoluteInfo.origin=Je(de,J),HA(t,i.beforeInfo,L,B,T),HA(t,i.afterInfo,L,B,T),HA(t,i.absoluteInfo,L,B,T)},j=function(ue){var ie=Er([[0,0],[N,0],[0,C],[N,C]],ue);R(ie)}}i.startClientX=L,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},HS(t,e,"rotate");var te=!1,U=!1;if(i.isControl&&i.resolveAble){var X=i.resolveAble;X==="resizable"&&(U=gP.dragControlStart(t,ae(ae({},new gp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(te=bi.dragStart(t,new gp().dragStart([0,0],e))),R(dwe(t));var ne=ht(t,e,ae(ae({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:j,setFixedPosition:R},GS(t,e)),{dragStart:te,resizeStart:U})),K=Le(t,"onRotateStart",ne);return i.isRotate=K!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?ne:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,_=a.isRotate,T=a.startValue,I=a.rect,O=a.startClientX,D=a.startClientY;if(_){$S(t,e,"rotate");var N=Ube(e),C=v*N,P=t.props.parentMoveable,R=0,j,L,B=0,z,W,Z=0,G,Y,Q=180/Math.PI*T,ee=w.startValue,te=!1,U=O+s,X=D+o;if(!u&&"parentDist"in e){var ne=e.parentDist;j=ne,z=ne,G=ne}else f||u?(j=iw(c,v,b),z=iw(c,C,x),G=iw(c,C,w)):(j=KA(U,X,v,b),z=KA(U,X,C,x),G=KA(U,X,C,w),te=!0);if(L=Q+j,W=Q+z,Y=ee+G,Le(t,"onBeforeRotate",ht(t,e,{beforeRotation:L,rotation:W,absoluteRotation:Y,setRotation:function(Se){z=Se-Q,j=z,G=z}},!0)),n=le(WA(t,I,b,j,Q,te),3),R=n[0],j=n[1],L=n[2],r=le(WA(t,I,x,z,Q,te),3),B=r[0],z=r[1],W=r[2],i=le(WA(t,I,w,G,ee,te),3),Z=i[0],G=i[1],Y=i[2],!(!Z&&!B&&!R&&!P&&!g)){var K=qS(a,"rotate(".concat(W,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=Q2(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=Jbe(t,z,a),ie=Je(Nt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=lW(t,K,ie,f,e),_e=oe,se=ul([U,X],w.startAbsoluteOrigin)-w.startDist,ge=void 0;if(a.resolveAble==="resizable"){var de=gP.dragControl(t,ae(ae({},V0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:se}));de&&(ge=de,_e=UW(_e,de,e))}var J=ht(t,e,ae(ae({delta:B,dist:z,rotate:W,rotation:W,beforeDist:j,beforeDelta:R,beforeRotate:L,beforeRotation:L,absoluteDist:G,absoluteDelta:Z,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:ge},oe),_e));return Le(t,"onRotate",J),J}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ba(t,e,{});return Le(t,"onRotateEnd",r),r}},dragGroupControlCondition:mP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=dl(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,_=Nt(Je([b,x],[i,a]),Je(w,s));return g.datas.startGroupClient=_,g.datas.groupClient=_,ae(ae({},g),{parentRotate:0})}),u=ae(ae({},o),{targets:t.props.targets,events:c}),f=Le(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){QS(t,"onBeforeRotate",function(u){Le(t,"onBeforeRotateGroup",ht(t,e,ae(ae({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=dl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(M0(h,s*i),2),w=x[0],_=x[1],T=[w-v,_-b];return f.datas.groupClient=[w,_],ae(ae({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ae({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Le(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=dl(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Le(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function jxe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function rO(t,e){return jxe(ae(ae({},t),{classNames:Ne([Xe("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function ZV(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,rO({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Xe("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function JV(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?tu:nu,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,_=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return rO({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Xe("bold"),_]:[Xe("normal"),_],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Om(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(D,N){return D}:b,w=u.zoom,_=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),O=v?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Xe("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},rO({direction:e,classNames:[Xe(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Xe("size-value","gap"),style:{transform:"translate".concat(_,"(-50%) scale(").concat(w,")")}},O>0?x(O,e):""))}function zxe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?tu:nu,o=n[s.start],c=n[s.end];return $W(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,_=v.elementRect.rect;if(_[s.end]<o)f.push(v);else if(c<_[s.start])h.push(v);else if(_[s.start]<=o&&c<=_[s.end]&&r){var T=v.pos,I={element:w,rect:ae(ae({},_),(b={},b[s.end]=_[s.start],b))},O={element:w,rect:ae(ae({},_),(x={},x[s.start]=_[s.end],x))},D=[0,0],N=[0,0];D[i]=T[i],D[a]=T[a],N[i]=T[i],N[a]=T[a]+v.size,f.push({type:t,pos:D,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:N,size:0,elementRect:O,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Lxe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=zxe(o,c,r,a),g=u?nu:tu,v=u?tu:nu,b=r[g.start],x=r[g.end];h.forEach(function(w){var _=w.total,T=w.start,I=w.end,O=w.inner,D=n[f]+_[0].pos[f]-r[v.start],N=r;T.forEach(function(C){var P=C.elementRect.rect,R=N[g.start]-P[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.start]-b-R,j[f]=D,s.push(Om(t,o,"dashed",s.length,R,j,C.className,i))}N=P}),N=r,I.forEach(function(C){var P=C.elementRect.rect,R=P[g.start]-N[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.end]-b,j[f]=D,s.push(Om(t,o,"dashed",s.length,R,j,C.className,i))}N=P}),O.forEach(function(C){var P=C.elementRect.rect,R=b-P[g.start],j=P[g.end]-x,L=[0,0],B=[0,0];L[u]=n[u]-R,L[f]=D,B[u]=n[u]+x-b,B[f]=D,s.push(Om(t,o,"dashed",s.length,R,L,C.className,i)),s.push(Om(t,o,"dashed",s.length,j,B,C.className,i))})})}),s}function Vxe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?nu:tu,h=c?tu:nu,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var _=w.gap,T=w.gapRects,I=Math.max.apply(Math,Ne([b],le(T.map(function(N){var C=N.rect;return C[h.start]})),!1)),O=Math.min.apply(Math,Ne([x],le(T.map(function(N){var C=N.rect;return C[h.end]})),!1)),D=(I+O)/2;I===O||D===(b+x)/2||T.forEach(function(N){var C=N.rect,P=N.className,R=[n[0],n[1]];if(C[f.end]<g)R[c]+=C[f.end]-g;else if(v<C[f.start])R[c]+=C[f.start]-g-_;else return;R[u]+=D-b,a.push(Om(t,c?"vertical":"horizontal","gap",a.length,_,R,P,i))})})}),a}function vP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,_=v.horizontalGuidelines,T=v.snapThreshold,I=T===void 0?5:T,O=v.maxSnapElementGuidelineDistance,D=O===void 0?1/0:O,N=v.isDisplayGridGuidelines,C=Ga(Wa(t.state)),P=C.top,R=C.left,j=C.bottom,L=C.right,B={top:P,left:R,bottom:j,right:L,center:(R+L)/2,middle:(P+j)/2},z=$xe(t),W=Ne([],le(z),!1),Z=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ee){return ee*I});x&&W.push.apply(W,Ne([],le(Bxe(t,B,Z)),!1));var G=ae({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Ne([],le(Uxe(t,s?c:f,s?o:u,h,g,G,N)),!1)),a){var Y=i.left,Q=i.top;G.left+=Y,G.top+=Q,G.right+=Y,G.bottom+=Q}return W.push.apply(W,Ne([],le(PW(_||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),W=W.filter(function(ee){var te=ee.element,U=ee.elementRect,X=ee.type;if(!te||!U)return!0;var ne=U.rect;return IW(B,ne,X,D)}),W}function Bxe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",tu,nu],["horizontal",nu,tu]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],_=e[v.center],T=e[b.start],I=e[b.end],O={left:n[0],top:n[1]};function D(P){var R=P.rect,j=O[v.start];return R[v.end]<x+j?x-R[v.end]:w-j<R[v.start]?R[v.start]-w:-1}var N=c.filter(function(P){var R=P.rect;return R[b.start]>I||R[b.end]<T?!1:D(P)>0}).sort(function(P,R){return D(P)-D(R)}),C=[];N.forEach(function(P){N.forEach(function(R){if(P!==R){var j=P.rect,L=R.rect,B=j[b.start],z=j[b.end],W=L[b.start],Z=L[b.end];B>Z||W>z||C.push([P,R])}})}),C.forEach(function(P){var R=le(P,2),j=R[0],L=R[1],B=j.rect,z=L.rect,W=B[v.start],Z=B[v.end],G=z[v.start],Y=z[v.end],Q=O[v.start],ee=0,te=0,U=!1,X=!1,ne=!1;if(Z<=x&&w<=G){if(X=!0,ee=(G-Z-(w-x))/2,te=Z+ee+(w-x)/2,Ie(te-_)>Q)return}else if(Z<G&&Y<x+Q){if(U=!0,ee=G-Z,te=Y+ee,Ie(te-x)>Q)return}else if(Z<G&&w-Q<W){if(ne=!0,ee=G-Z,te=W-ee,Ie(te-w)>Q)return}else return;ee&&IW(e,z,g,a)&&(ee>o||u.push({type:g,pos:g==="vertical"?[te,0]:[0,te],element:L.element,size:0,className:L.className,isStart:U,isCenter:X,isEnd:ne,gap:ee,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),u}function Fxe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),_=w.children,T=v.direction;if(_){var I=T.map(function(D,N){var C=N===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},P=C.snapSize,R=C.posName,j=C.sizeName,L=C.clientOffset;if(!P)return{dir:D,multiple:1,snapSize:P,snapOffset:0};var B=w[j],z=w[R],W=bK(_.map(function(U){return[U[R]-z,U[j],B-U[j]-U[R]+z]})).filter(function(U){return U}).sort(function(U,X){return U-X}),Z=W[0],G=W.map(function(U){return lt(U/Z,.1)*P}),Y=1,Q=lt(B/Z,.1);for(Y=1;Y<=10&&!G.every(function(U){return U*Y%1===0});++Y);var ee=(-D+1)/2,te=Hw(z-L,z-L+B,ee,1-ee);return{multiple:Q*Y,dir:D,snapSize:P,snapOffset:Math.round(te/P)}}),O=I.map(function(D){return D.multiple||1});o.snapThresholdInfo.multiples=O,o.snapThresholdInfo.offset=I.map(function(D){return D.snapOffset}),I.forEach(function(D,N){D.snapSize})}}else o.snapThresholdInfo=null}function Uxe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];Fxe(t,r,i,a);var _=c.snapThresholdInfo,T=f,I=g;if(_&&(f*=_.multiples[0]||1,g*=_.multiples[1]||1,w=_.offset),g){for(var O=function(N){v.push({type:"horizontal",pos:[b,lt(w[1]*I+N-i+x,.1)],className:Xe("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},D=0;D<=n*2;D+=g)O(D);for(var D=-g;D>=-n;D-=g)O(D)}if(f){for(var O=function(C){v.push({type:"vertical",pos:[lt(w[0]*T+C-r+b,.1),x],className:Xe("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},D=0;D<=e*2;D+=f)O(D);for(var D=-f;D>=-e;D-=f)O(D)}return v}function IW(t,e,n,r){return n==="horizontal"?Ie(t.right-e.left)<=r||Ie(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ie(t.bottom-e.top)<=r||Ie(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function $xe(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Cs(g)&&"element"in g?ae(ae({},g),{element:bo(g.element,!0)}):{element:bo(g,!0)}}).filter(function(g){return g.element}),s=tbe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),qxe(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=J2(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,_=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,O=g.bottom,D=O===void 0?f.bottom:O,N=g.center,C=N===void 0?f.center:N,P=g.middle,R=P===void 0?f.middle:P,j=g.className,L=g.rect,B=eO({top:x,right:I,left:_,bottom:D,center:C,middle:R},L),z=B.horizontal,W=B.vertical,Z=B.horizontalNames,G=B.verticalNames,Y=L.top,Q=L.left,ee=L.right-Q,te=L.bottom-Y,U=[ee,te];W.forEach(function(X,ne){h.push({type:"vertical",element:v,pos:[lt(X,.1),Y],size:te,sizes:U,className:j,elementRect:g,elementDirection:qV[G[ne]]||G[ne],direction:""})}),z.forEach(function(X,ne){h.push({type:"horizontal",element:v,pos:[Q,lt(X,.1)],size:ee,sizes:U,className:j,elementRect:g,elementDirection:qV[Z[ne]]||Z[ne],direction:""})})}),h}function eB(t,e){return t?t.map(function(n){var r=Cs(n)?n:{pos:n},i=r.pos;return hp(i)?r:ae(ae({},r),{pos:en(i,e)})}):[]}function PW(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return eB(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,lt(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),eB(e,g).forEach(function(b){o.push({type:"vertical",pos:[lt(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function qxe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(pxe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,_=x.top-h-v,T=_+x.height,I=w+x.width,O=le(yp(a,[w,_],c),2),D=O[0],N=O[1],C=le(yp(a,[I,T],c),2),P=C[0],R=C[1];return ae(ae({},b),{rect:{left:D,right:P,top:N,bottom:R,center:(D+P)/2,middle:(N+R)/2}})})}function ix(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=bo(r,!0);if(s){var o=iv(s),c=sB(e,[o.left-i.left,o.top-i.top]),u=sB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=lt(c[0],1e-5),a.top=lt(c[1],1e-5),a.right=lt(u[0],1e-5),a.bottom=lt(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=vP(t),e.enableSnap=!0,!0}function NW(t,e,n,r,i,a){var s=af(t,e,n,a?4:3),o=Er(s,r);return aO(s,Je(i,o))}function tB(t){return t?t/Ie(t):0}function Gxe(t,e,n,r,i,a){var s=a.fixedDirection,o=yxe(n,s,r),c=nO(t,e,n,r),u=Ne(Ne([],le(Pxe(t,e,o,r,i,a)),!1),le(TW(t,c,a)),!1),f=Zw(u,0),h=Zw(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Hxe(t,e,n,r,i,a,s,o,c){var u=Er(e,s),f=YS(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(lt(g,uP)||lt(h,uP)){var v=le(Io({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),_=Math.min(a||1/0,r+s[1]*x);return[w-n,_-r]}return[0,0]}function DW(t,e,n,r,i,a,s,o){for(var c=Wa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=Gxe(t,v,i,u,s,o),x=b.width,w=b.height,_=x.isBound,T=w.isBound,I=x.offset,O=w.offset;if(g===1&&(_||(I=0),T||(O=0)),g===0&&s&&!_&&!T)return[0,0];if(u){var D=Ie(I)*(n?1/n:1),N=Ie(O)*(r?1/r:1),C=_&&T?D<N:T||!_&&D<N;C?I=n*O/r:O=r*I/n}f+=I,h+=O}if(!u&&i[0]&&i[1]){var P=Dxe(t,c,i,a,o),R=P.maxWidth,j=P.maxHeight,L=le(Hxe(t,e(f,h).map(function(W){return W.map(function(Z){return lt(Z,uP)})}),n+f,r+h,R,j,i,s,o),2),I=L[0],O=L[1];f+=I,h+=O}return[f,h]}function nv(t){return t<0&&(t=t%360+360),t%=360,t}function Kxe(t,e){e=nv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ie(t-r)<Ie(t-i)?r:i}function YA(t,e){t=nv(t),e=nv(e);var n=nv(t-e);return Math.min(n,360-n)}function Wxe(t,e,n,r){var i,a=t.props,s=(i=a[vW])!==null&&i!==void 0?i:5,o=a[yW];if(Wp(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(O){return Je(O,g)}),x=b.map(function(O){return M0(O,v)}),w=Ne(Ne([],le(uxe(t,b,x,g,n)),!1),le(Exe(t,b,x,g,n)),!1);w.sort(function(O,D){return Ie(O-n)-Ie(D-n)});var _=w.length>0;if(_)return{isSnap:_,dist:_?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(O,D){return YA(O,r)-YA(D,r)}),I=T[0];if(YA(I,r)<=s)return{isSnap:!0,dist:n+Kxe(r,I)-r}}return{isSnap:!1,dist:n}}function Yxe(t,e,n,r,i,a,s){if(!Wp(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return DW(t,function(g,v){return NW(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function Xxe(t,e,n,r,i){if(!Wp(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=DW(t,function(h,g){return NW(Ybe(i,Nt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Qxe(t,e){e.absolutePoses=Wa(t.state)}function nB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Ki(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ae(ae({},r),{direction:i.direction})})}function rB(t,e,n,r,i,a){var s=Z2(KS(t,a),e,n),o=s.vertical,c=s.horizontal,u=Ch();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Txe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){_l(r,function(x){var w=x.type,_=x.pos;return w==="bounds"&&_===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){_l(i,function(x){var w=x.type,_=x.pos;return w==="bounds"&&_===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Zxe=lO("",["resizable","scalable"]),Jxe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",vW,yW,bW,xW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!Wp(t,""))return Ph(t,"boundMap",Ch(),function(K){return JSON.stringify(K)}),Ph(t,"innerBoundMap",Ch(),function(K){return JSON.stringify(K)}),[];n.guidelines=vP(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Wa(t.state),w=[],_=[],T=[],I=[],O=[],D=Ga(x),N=D.width,C=D.height,P=D.top,R=D.left,j=D.bottom,L=D.right,B={left:R,right:L,top:P,bottom:j,center:(R+L)/2,middle:(P+j)/2},z=b.length>0,W=z?Ga(b):{};if(!u.request){if(u.direction&&O.push(vxe(t,x,u.direction,h,h)),u.snap){var Z=Ga(x);u.center&&(Z.middle=(Z.top+Z.bottom)/2,Z.center=(Z.left+Z.right)/2),O.push(GV(t,Z,h,h))}z&&(u.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),O.push(GV(t,W,h,h))),O.forEach(function(K){var ue=K.vertical.posInfos,ie=K.horizontal.posInfos;w.push.apply(w,Ne([],le(ue.filter(function(oe){var _e=oe.guidelineInfos;return _e.some(function(se){var ge=se.guideline;return!ge.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),_.push.apply(_,Ne([],le(ie.filter(function(oe){var _e=oe.guidelineInfos;return _e.some(function(se){var ge=se.guideline;return!ge.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,Ne([],le(nB(ue)),!1)),I.push.apply(I,Ne([],le(nB(ie)),!1))})}var G=rB(t,[R,L],[P,j],w,_),Y=G.boundMap,Q=G.innerBoundMap;z&&rB(t,[W.left,W.right],[W.top,W.bottom],w,_,u.externalBounds);var ee=Ne(Ne([],le(T),!1),le(I),!1),te=ee.filter(function(K){return K.element&&!K.gapRects}),U=ee.filter(function(K){return K.gapRects}).sort(function(K,ue){return K.gap-ue.gap});Le(t,"onSnap",{guidelines:ee.filter(function(K){var ue=K.element;return!ue}),elements:te,gaps:U},!0);var X=Ph(t,"boundMap",Y,function(K){return JSON.stringify(K)},Ch()),ne=Ph(t,"innerBoundMap",Q,function(K){return JSON.stringify(K)},Ch());return(Y===X||Q===ne)&&Le(t,"onBound",{bounds:Y,innerBounds:Q},!0),Ne(Ne(Ne(Ne(Ne(Ne([],le(Lxe(t,te,[g,v],B,e)),!1),le(Vxe(t,U,[g,v],B,e)),!1),le(JV(t,"horizontal",I,[i,r],B,e)),!1),le(JV(t,"vertical",T,[i,r],B,e)),!1),le(ZV(t,"horizontal",_,g,r,N,0,e)),!1),le(ZV(t,"vertical",w,v,i,C,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ix(t)},drag:function(t){var e=t.state;ix(t)||(e.guidelines=vP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Zxe(t,e)||mP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return _r(e.inputEvent.target,Xe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,ix(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ix(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function ewe(t,e){return[t[0]*e[0],t[1]*e[1]]}function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y0e.apply(void 0,Ne([W2],le(t),!1))}function OW(t){t()}function twe(t){return!t||t==="none"?[1,0,0,1,0,0]:Cs(t)?t:zv(t)}function rv(t,e,n){return Ww(e,Bd(n,e),t,Bd(n.map(function(r){return-r}),e))}function nwe(t,e,n){if(e==="%"){var r=iO(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function rwe(t){var e=iwe(sO(t,":before"));return e.map(function(n,r){var i=N0(n),a=i.value,s=i.unit;return a*nwe(t,s,r===0)})}function e1(t){return t?t.split(" "):["0","0"]}function iwe(t){return e1(t.transformOrigin)}function RW(t){var e=Wi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Vv(t,e,n,r,i){var a,s,o=z2(t)||hu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,_=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=Wi(u),O=u.tagName.toLowerCase(),D=RW(u),N=I("willChange"),C=parseFloat(I("zoom"))||1;if(x=I("position"),r&&C!==1){w=C;break}if(!n&&r&&_!==1&&T&&T!=="absolute"||O==="svg"||O==="foreignobject"||x!=="static"||D&&D!=="none"||N==="transform")break;var P=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;P&&(c=!0,f=R);var j=R;if(j&&j.nodeType===11){u=j.host,v=!0,x=Wi(u)("position");break}u=j,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function awe(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Wi(t),o=VS(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=JK?rwe(t):e1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(lwe(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=e1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function MW(t,e){var n=Wi(t),r=Wi(hu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function yP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Is(n,3,4))})}function swe(t){for(var e=t.parentElement,n=!1,r=hu(t);e;){var i=sO(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function XS(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(GK(t,!e).join(","),")")}function iO(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function owe(t,e){var n,r=iO(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,_=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*_/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*_}var I=q2(b,e);return n=le(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],rv(I,e,v)}function lwe(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Wi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=iO(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function kn(t,e,n){return pi(t,Vd(e,n),n)}function af(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return kn(t,i,r)})}function Ga(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Ne([],le(e),!1)),i=Math.min.apply(Math,Ne([],le(n),!1)),a=Math.max.apply(Math,Ne([],le(e),!1)),s=Math.max.apply(Math,Ne([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function iB(t,e,n,r){var i=af(t,e,n,r);return Ga(i)}function cwe(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=zW(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===hu(n)&&(v=MW(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],_=b.width,T=b.height,I=Ww(r,i,c),O=iB(I,f,h,r),D=O.left,N=O.top,C=O.width,P=O.height,R=kn(I,o,r),j=Je(R,[D,N]),L=[x+j[0]*_/C,w+j[1]*T/P],B=[0,0],z=0;++z<10;){var W=Eo(i,r);a=le(Je(kn(W,L,r),kn(W,R,r)),2),B[0]=a[0],B[1]=a[1];var Z=Ww(r,i,Bd(B,r),c),G=iB(Z,f,h,r),Y=G.left,Q=G.top,ee=Y-x,te=Q-w;if(Ie(ee)<2&&Ie(te)<2)break;L[0]-=ee,L[1]-=te}return B.map(function(U){return Math.round(U)})}function uwe(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return kn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ka(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function jW(t,e){return Ka([e[0]-t[0],e[1]-t[1]])}function Rm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Qn(t,e));var i=jW(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function t1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Ud(t,e){var n=t[e];return Cs(n)?ae(ae({},t),n):t}function zW(t){var e=t&&!VS(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,_=1/0,T=0,I=0,O=!1;if(t)if(!e&&t.ownerSVGElement){var D=t.getBBox();O=!0,n=D.width,r=D.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var N=Wi(t),C=t.style,P=N("boxSizing")==="border-box",R=parseFloat(N("borderLeftWidth"))||0,j=parseFloat(N("borderRightWidth"))||0,L=parseFloat(N("borderTopWidth"))||0,B=parseFloat(N("borderBottomWidth"))||0,z=parseFloat(N("paddingLeft"))||0,W=parseFloat(N("paddingRight"))||0,Z=parseFloat(N("paddingTop"))||0,G=parseFloat(N("paddingBottom"))||0,Y=z+W,Q=Z+G,ee=R+j,te=L+B,U=Y+ee,X=Q+te,ne=N("position"),K=0,ue=0;if("clientLeft"in t){var ie=null;if(ne==="absolute"){var oe=Vv(t,hu(t));ie=oe.offsetParent}else ie=t.parentElement;if(ie){var _e=Wi(ie);K=parseFloat(_e("width")),ue=parseFloat(_e("height"))}}f=Math.max(Y,en(N("minWidth"),K)||0),h=Math.max(Q,en(N("minHeight"),ue)||0),b=en(N("maxWidth"),K),x=en(N("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=en(C.width,0)||0,I=en(C.height,0)||0,s=parseFloat(N("width"))||0,o=parseFloat(N("height"))||0,c=Ie(s-T)<1?QI(f,T||s,b):s,u=Ie(o-I)<1?QI(h,I||o,x):o,n=c,r=u,i=c,a=u,P?(w=b,_=x,g=f,v=h,c=n-U,u=r-X):(w=b+U,_=x+X,g=f+U,v=h+X,n=c+U,r=u+X),i=c+Y,a=u+Q}return{svg:O,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:_}}function LW(t,e){return Qn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function ax(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function VW(t,e){var n=t===hu(t)||t===z2(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Wi(t)("overflow")!=="visible",ae(ae({},e),r)}function XA(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?VW(n,f):f}function iv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?VW(t,o):o}function dwe(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?uO(r,a,s):c}function BW(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=FW(a,r)}return i}function FW(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function aO(t,e){return[Nt(e,t[0]),Nt(e,t[1]),Nt(e,t[2]),Nt(e,t[3])]}function Wa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return aO([r,i,a,s],[e,n])}function bP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Ih(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&bP(t,e),r?.unset(),t[n]=null}function _i(t,e){if(e){var n=Kp(e);n.nextStyle=ae(ae({},n.nextStyle),t)}return{style:t,cssText:El(t).map(function(r){return"".concat(rw(r,"-"),": ").concat(t[r],";")}).join("")}}function UW(t,e,n){var r=e.afterTransform||e.transform;return ae(ae({},_i(ae(ae(ae({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ht(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ae(ae({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ba(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ae(ae({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function QS(t,e,n){t._emitter.on(e,n)}function Le(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function sO(t,e){return qc(t).getComputedStyle(t,e)}function sx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function xP(t,e){return t===e||t==null&&e==null}function aB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!VS(i))return i}return t[n]}function $W(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function fwe(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function qW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function vp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ie(r)-Ie(n)}),t[0]}function yp(t,e,n){return pi(Eo(t,n),Vd(e,n),n)}function hwe(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(yp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function ja(t,e,n,r){if(!n[0]&&!n[1])return e;var i=kn(t,[tB(n[0]||1),0],r),a=kn(t,[0,tB(n[1]||1)],r),s=kn(t,[n[0]/Ka(i),n[1]/Ka(a)],r);return Nt(e,s)}function ms(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function n1(t){return Ie(t)<=Ai?0:t}function oO(t){return function(e){if(!e.isDragging(t))return"";var n=nxe(e,t),r=n.deg;return r?Xe("view-control-rotation".concat(r)):""}}function lO(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return _r(i,Xe("direction"))&&(!t||_r(i,Xe(t)))}}function pwe(t,e,n){var r,i=pp(t,{"x%":function(D){return D/100*e.offsetWidth},"y%":function(D){return D/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:pp([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=vh(f),_=vh(h),T=vh(v),I=vh(b),O=tn(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:_,targetFunctionMatrix:vh(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:O,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function gwe(t){return!t||!Cs(t)||Gp(t)?!1:pr(t)||"length"in t}function bo(t,e){return t?Gp(t)?t:Hi(t)?e?document.querySelector(t):t:R2(t)?t():_K(t)?t:"current"in t?t.current:t:null}function cO(t,e){if(!t)return[];var n=gwe(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Hi(i)&&e?Ne(Ne([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(pr(i)?r.push(cO(i,e)):r.push(bo(i,e)),r)},[])}function mwe(t,e,n){var r=Qn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function sB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Eo(n,i);return r||(a=Is(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Jye(a,e)}function GW(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Qn([0,0],e),h=Qn([0,0],r),g=Ka(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),_=Math.atan2(b,x);w<0&&(w+=Math.PI*2),_<0&&(_+=Math.PI*2);var T=0;Ie(w-_)<Math.PI/2||Ie(w-_)>Math.PI/2*3||(_+=Math.PI),T=w-_,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=Ka([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(_)-b,u=I*Math.cos(_)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function HW(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,_=[0,1].map(function(C){return Ie(t[C]-w[C])}),T=[0,1].map(function(C){var P=_[C];return P!==0&&(P=2/P),P});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(hp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var I=s*_[0],O=o*_[1],D=Ka([I,O]);c=v/D*I*T[0],u=v/D*O*T[1]}else{var N=Io({datas:n,distX:f,distY:h});N=T.map(function(C,P){return N[P]*C}),i=le(GW([s,o],N,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function wP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=wP(r||""),s=wP(i||""),o=ae(ae({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function uO(t,e,n){var r=wP(t,!0),i=r.x,a=r.y;return[en(i,e)||0,en(a,n)||0]}function vwe(t,e,n){var r=t.map(function(a){return Je(a,e)}),i=r.map(function(a){return M0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Nt(a,e)})}}function KW(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=pr(n),s=pr(i);return a&&s?KW(n,i):!a&&!s?n===i:!1})}function Ph(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function xi(t){return t>=0?1:-1}function Ie(t){return Math.abs(t)}function QA(t,e){return fye(t).map(function(n){return e(n)})}function WW(t){return hp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var ywe=L0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=ht(t,e,{});r&&(g.targets=r);var v=Le(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ae(ae({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=ht(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Le(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,ae(ae({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=ba(t,e,{isDrag:r});a&&(c.targets=a),Le(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ae(ae({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ae(ae({},e),{targets:t.props.targets}))}}),oB=lO("scalable"),bwe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:pW("scalable"),dragControlCondition:oB,viewClassName:oO("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=BW(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||rf(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];HS(t,e,"scale"),n.isWidth=x;function w(N){n.ratio=N&&isFinite(N)?N:0}n.startPositions=Wa(t.state);function _(N){var C=AW(n.startPositions,N);n.fixedDirection=C.fixedDirection,n.fixedPosition=C.fixedPosition,n.fixedOffset=C.fixedOffset}n.setFixedDirection=_,w(ul(g,v)/ul(v,b)),_([-s[0],-s[1]]);var T=function(N){n.minScaleSize=N},I=function(N){n.maxScaleSize=N};T([-1/0,-1/0]),I([1/0,1/0]);var O=ht(t,e,ae(ae({direction:s,set:function(N){n.startValue=N},setRatio:w,setFixedDirection:_,setMinScaleSize:T,setMaxScaleSize:I},GS(t,e)),{dragStart:bi.dragStart(t,new gp().dragStart([0,0],e))})),D=Le(t,"onScaleStart",O);return n.startFixedDirection=n.fixedDirection,D!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?O:!1},dragControl:function(t,e){$S(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,_=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,O=T.parentMoveable,D=h;!h[0]&&!h[1]&&(D=[1,1]);var N=_&&(r??T.keepRatio)||!1,C=t.state,P=[x[0],x[1]];function R(){var de=HW(D,N,n,e),J=de.distWidth,Se=de.distHeight,Ce=g?(g+J)/g:1,Oe=v?(v+Se)/v:1;x[0]||(P[0]=J/g),x[1]||(P[1]=Se/v);var ze=(D[0]||N?Ce:1)*P[0],Ve=(D[1]||N?Oe:1)*P[1];return ze===0&&(ze=xi(f[0])*tx),Ve===0&&(Ve=xi(f[1])*tx),[ze,Ve]}var j=R();if(!a&&t.props.groupable){var L=C.snapRenderInfo||{},B=L.direction;pr(B)&&(B[0]||B[1])&&(C.snapRenderInfo={direction:h,request:e.isRequest})}Le(t,"onBeforeScale",ht(t,e,{scale:j,setFixedDirection:function(de){return n.setFixedDirection(de),j=R(),j},startFixedDirection:n.startFixedDirection,setScale:function(de){j=de}},!0));var z=[j[0]/P[0],j[1]/P[1]],W=s,Z=[0,0],G=xi(z[0]*z[1]),Y=!s&&!i&&a;if(Y||u?W=Q2(t,n.targetAllTransform,[0,0],[0,0],n):s||(W=n.fixedPosition),a||(Z=Xxe(t,z,h,!c&&o,n)),N){D[0]&&D[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0]*g)>Math.abs(Z[1]*v)?Z[1]=0:Z[0]=0);var Q=!Z[0]&&!Z[1];if(Q&&(w?z[0]=lt(z[0]*P[0],I)/P[0]:z[1]=lt(z[1]*P[1],I)/P[1]),D[0]&&!D[1]||Z[0]&&!Z[1]||Q&&w){z[0]+=Z[0];var ee=g*z[0]*P[0]/_;z[1]=xi(G*z[0])*Ie(ee/v/P[1])}else if(!D[0]&&D[1]||!Z[0]&&Z[1]||Q&&!w){z[1]+=Z[1];var te=v*z[1]*P[1]*_;z[0]=xi(G*z[1])*Ie(te/g/P[0])}}else z[0]+=Z[0],z[1]+=Z[1],Z[0]||(z[0]=lt(z[0]*P[0],I)/P[0]),Z[1]||(z[1]=lt(z[1]*P[1],I)/P[1]);z[0]===0&&(z[0]=xi(f[0])*tx),z[1]===0&&(z[1]=xi(f[1])*tx),j=ewe(z,[P[0],P[1]]);var U=[g,v],X=[g*j[0],v*j[1]];X=yK(X,n.minScaleSize,n.maxScaleSize,N?_:!1),j=QA(2,function(de){return U[de]?X[de]/U[de]:X[de]}),z=QA(2,function(de){return j[de]/P[de]});var ne=QA(2,function(de){return f[de]?z[de]/f[de]:z[de]}),K="scale(".concat(z.join(", "),")"),ue="scale(".concat(j.join(", "),")"),ie=qS(n,ue,K),oe=!x[0]||!x[1],_e=Xbe(t,oe?ue:K,n.fixedDirection,W,n.fixedOffset,n,oe),se=Y?_e:Je(_e,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=_e,j[0]===f[0]&&j[1]===f[1]&&se.every(function(de){return!de})&&!O&&!Y)return!1;var ge=ht(t,e,ae({offsetWidth:g,offsetHeight:v,direction:h,scale:j,dist:z,delta:ne,isPinch:!!a},lW(t,ie,se,a,e)));return Le(t,"onScale",ge),ge},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ba(t,e,{});return Le(t,"onScaleEnd",r),r},dragGroupControlCondition:oB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Ts(t,"resizable",e);n.moveableScale=t.scale;var a=dl(t,this,"dragControlStart",e,function(u,f){return Qw(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),Qw(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ae(ae({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Le(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){QS(t,"onBeforeScale",function(f){Le(t,"onBeforeScaleGroup",ht(t,e,ae(ae({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=dl(t,this,"dragControl",e,function(f,h){var g=le(pi(j0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return ae(ae({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Nt(o,[v,b])})}),u=ae({targets:t.props.targets,events:c},r);return Le(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=dl(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Le(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Sc(t,e){return t.map(function(n,r){return Hw(n,e[r],1,2)})}function lB(t,e,n){var r=Qn(t,e),i=Qn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function xwe(t,e){var n=lB(t[0],t[1],t[2]),r=lB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var wwe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:oO("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Sc(c,u),v=Sc(u,c),b=Sc(c,f),x=Sc(f,c),w=Sc(f,h),_=Sc(h,f),T=Sc(u,h),I=Sc(h,u);return Ne([e.createElement("div",{className:Xe("line"),key:"middeLine1",style:Rm(g,w,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine2",style:Rm(v,_,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine3",style:Rm(b,T,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine4",style:Rm(x,I,s)})],le(gW(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return _r(n,Xe("direction"))&&_r(n,Xe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=FW(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Is(h,3,4),n.targetInverseMatrix=$K(Eo(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return Je(T,c)}),n.nextPoses=n.poses.map(function(T){var I=le(T,2),O=I[0],D=I[1];return pi(n.warpTargetMatrix,[O,D,0,1],4)}),n.startValue=gn(4),n.prevMatrix=gn(4),n.absolutePoses=Wa(o),n.posIndexes=oW(s),rf(t,e),HS(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=ht(t,e,ae({set:function(T){n.startValue=T}},GS(t,e))),_=Le(t,"onWarpStart",w);return _!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if($S(t,e,"matrix3d"),Wp(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=YS(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var _=Io({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Nt(T[R],_)}),!Bbe.every(function(R){return xwe(R.map(function(j){return f[j]}),R.map(function(j){return T[j]}))}))return!1;var I=G2(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var O=tn(s,I,4),D=aW(n,O,!0),N=tn(Eo(o,4),D,4);n.prevMatrix=D;var C=tn(u,D,4),P=qS(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return X2(e,P),Le(t,"onWarp",ht(t,e,ae({delta:N,matrix:C,dist:D,multiply:tn,transform:P},_i({transform:P},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Le(t,"onWarpEnd",ba(t,e,{})),r):!1}},Swe=Xe("area-pieces"),ox=Xe("area-piece"),YW=Xe("avoid"),_we=Xe("view-dragging");function ZA(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;SK(e,YW),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function cB(t){return t.createElement("div",{key:"area_pieces",className:Swe},t.createElement("div",{className:ox}),t.createElement("div",{className:ox}),t.createElement("div",{className:ox}),t.createElement("div",{className:ox}))}var XW={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Xe("area","pass"):Xe("area");if(a)return[e.createElement("div",{key:"area",ref:cl(t,"areaElement"),className:h}),cB(e)];if(!r||!i)return[];var g=G2([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?XS(g,!0):"none";return[e.createElement("div",{key:"area",ref:cl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),cB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Ga(u),x=b.left,w=b.top,_=b.width,T=b.height,I=h?4:3,O=le(yp(f,[r-g,i-v],I),2),D=O[0],N=O[1];D-=x,N-=w;var C=[{left:x,top:w,width:_,height:N-10},{left:x,top:w,width:D-10,height:T},{left:x,top:w+N+10,width:_,height:T-N-10},{left:x+D+10,top:w,width:_-D-10,height:T}],P=[].slice.call(s.nextElementSibling.children);C.forEach(function(R,j){P[j].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),wK(s,YW),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,ZA(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||ZA(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){ZA(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&vK(function(){e.disableNativeEvent=!1})}},Ewe=L0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var _=le(uO(i,b,x),2),T=_[0],I=_[1],O=h?4:3,D=kn(f,[T,I],O);w=t1(c,r,Je(D,[g,v]))}else w=t1(c,r,o);return[e.createElement("div",{className:Xe("control","origin"),style:w,key:"beforeOrigin"})]}});function Twe(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Awe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new abe,o=bo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=ht(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Le(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ae({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?Twe:f,g=r.scrollOptions;return n.drag(e,ae({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},QW={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},kwe=L0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=WW(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,_){var T=le(w,2),I=T[0],O=T[1],D=b[I],N=b[O],C=u[I],P=u[O],R=G2([0,0],[100,0],[0,100],[100,100],D,N,C,P);if(R.length)return e.createElement("div",{key:"padding".concat(_),className:Xe("padding"),style:{transform:XS(R,!0)}})})}}),uB=["nw","ne","se","sw"];function lx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Cwe=[1,2,5,6],Iwe=[0,3,4,7],od=[1,-1,-1,1],ld=[1,1,-1,-1];function dO(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(ms(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(ms(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function ZW(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function JW(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,_=w>0,T=le(v,4),I=T[0],O=I===void 0?"0px":I,D=T[1],N=D===void 0?O:D,C=T[2],P=C===void 0?O:C,R=T[3],j=R===void 0?N:R,L=le(b,4),B=L[0],z=B===void 0?O:B,W=L[1],Z=W===void 0?_?z:N:W,G=L[2],Y=G===void 0?_?z:P:G,Q=L[3],ee=Q===void 0?_?Z:j:Q,te=[O,N,P,j].map(function(ie){return en(ie,e)}),U=[z,Z,Y,ee].map(function(ie){return en(ie,n)}),X=te.slice(),ne=U.slice();o=le(lx([X[0],X[1]],e),2),X[0]=o[0],X[1]=o[1],c=le(lx([X[3],X[2]],e),2),X[3]=c[0],X[2]=c[1],u=le(lx([ne[0],ne[3]],n),2),ne[0]=u[0],ne[3]=u[1],f=le(lx([ne[1],ne[2]],n),2),ne[1]=f[0],ne[2]=f[1];var K=s?X:X.slice(0,Math.max(a[0],x)),ue=s?ne:ne.slice(0,Math.max(a[1],w));return Ne(Ne([],le(K.map(function(ie,oe){var _e=uB[oe];return{virtual:oe>=x,horizontal:od[oe],vertical:0,pos:[r+ie,i+(ld[oe]===-1?n:0)],sub:!0,raw:te[oe],direction:_e}})),!1),le(ue.map(function(ie,oe){var _e=uB[oe];return{virtual:oe>=w,horizontal:0,vertical:ld[oe],pos:[r+(od[oe]===-1?e:0),i+ie],sub:!0,raw:U[oe],direction:_e}})),!1)}function Pwe(t,e,n,r,i){i===void 0&&(i=e.length);var a=ZW(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function Nwe(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=ZW(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=od[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=ld[x]===1?f:c,_=0;if(r===x?_=a:x===0?_=u+b:od[x]===-1&&(_=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:od[x],vertical:0,pos:[_,w]}),e.splice(n+x,0,[_,w]),x===0)break}else if(i>-1){var T=ld[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var I=[u+T,f];t.push({horizontal:od[0],vertical:0,pos:I}),e.push(I)}for(var O=v[0],x=v[1];x<=i;++x){var _=od[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:ld[x]===1?w=e[n+O][1]:ld[x]===-1&&(w=c-(e[n+O][1]-f)),t.push({horizontal:0,vertical:ld[x],pos:[_,w]}),e.push([_,w]),x===0)break}}}function Dwe(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var Owe=[[0,-1,"n"],[1,0,"e"]],Rwe=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function fO(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(N){return"".concat(ms(N[0],a,r)," ").concat(ms(N[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(N){return"".concat(N,"px")});var w=[g,a-v,s-x,b].map(function(N,C){return ms(N,C%2?a:s,r)});if(n.length>8){var _=le(Je(n[4],n[0]),2),T=_[0],I=_[1];w.push.apply(w,Ne(["round"],le(dO(u.slice(8).map(function(N,C){return ae(ae({},N),{pos:n[C]})}),r,T,I,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var O=n[0],D=ms(Ie(n[1][1]-O[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[D]:[ms(Ie(n[2][0]-O[0]),a,r),D];return w.push("at",ms(O[0],a,r),ms(O[1],s,r)),w}}function r1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return Rwe.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ie(u),horizontal:Ie(c),direction:f,pos:[h,g]}})}function eY(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ie(e[1]-e[0]),Ie(n[1]-n[0])]}function dB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=Wi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var _=mK(b),T=_.prefix,I=T===void 0?b:T,O=_.value,D=O===void 0?"":O,N=I==="circle",C=" ";if(I==="polygon"){var P=hd(D||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var R=P.map(function(Bt){var Bn=le(Bt.split(" "),2),Tn=Bn[0],bt=Bn[1];return{vertical:1,horizontal:1,pos:[en(Tn,e),en(bt,n)]}}),j=Fd(R.map(function(Bt){return Bt.pos}));return{type:I,clipText:b,poses:R,splitter:C,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(N||I==="ellipse"){var L="",B="",z=0,W=0,P=eu(D);if(N){var Z="";a=le(P,4),s=a[0],Z=s===void 0?"50%":s,o=a[2],L=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,z=en(Z,Math.sqrt((e*e+n*n)/2)),W=z}else{var G="",Y="";u=le(P,5),f=u[0],G=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],L=g===void 0?"50%":g,v=u[4],B=v===void 0?"50%":v,z=en(G,e),W=en(Y,n)}var Q=[en(L,e),en(B,n)],R=Ne([{vertical:1,horizontal:1,pos:Q,direction:"nesw"}],le(Owe.slice(0,N?1:2).map(function(Tn){return{vertical:Ie(Tn[1]),horizontal:Tn[0],direction:Tn[2],sub:!0,pos:[Q[0]+Tn[0]*z,Q[1]+Tn[1]*W]}})),!1);return{type:I,clipText:b,radiusX:z,radiusY:W,left:Q[0]-z,top:Q[1]-W,right:Q[0]+z,bottom:Q[1]+W,poses:R,splitter:C}}else if(I==="inset"){var P=eu(D||"0 0 0 0"),ee=P.indexOf("round"),te=(ee>-1?P.slice(0,ee):P).length,U=P.slice(te+1),X=le(P.slice(0,te),4),ne=X[0],K=X[1],ue=K===void 0?ne:K,ie=X[2],oe=ie===void 0?ne:ie,_e=X[3],se=_e===void 0?ue:_e,ge=le([ne,oe].map(function(Tn){return en(Tn,n)}),2),de=ge[0],J=ge[1],Se=le([se,ue].map(function(Tn){return en(Tn,e)}),2),Ce=Se[0],Oe=Se[1],ze=e-Oe,Ve=n-J,rt=JW(U,ze-Ce,Ve-de,Ce,de),R=Ne(Ne([],le(r1(de,ze,Ve,Ce)),!1),le(rt),!1);return{type:"inset",clipText:b,poses:R,top:de,left:Ce,right:ze,bottom:Ve,radius:U,splitter:C}}else if(I==="rect"){var P=hd(D||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));C=",";var Be=le(P.map(function(Me){var ut=N0(Me).value;return ut}),4),nt=Be[0],Oe=Be[1],J=Be[2],Ce=Be[3],R=r1(nt,Oe,J,Ce);return{type:"rect",clipText:b,poses:R,top:nt,right:Oe,bottom:J,left:Ce,values:P,splitter:C}}}}}function Mwe(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(z){return z==="w"||z==="e"}),h=u.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(eY(t),2),x=b[0],w=b[1],_=x&&w?x/w:0;if(_&&i){var T=(e+4)%8,I=t[T].pos,O=[0,0];s.indexOf("w")>-1?O[0]=-1:s.indexOf("e")>-1&&(O[0]=1),s.indexOf("n")>-1?O[1]=-1:s.indexOf("s")>-1&&(O[1]=1);var D=GW([x,w],n,_,O,!0),N=x+D[0],C=w+D[1],P=I[1],R=I[1],j=I[0],L=I[0];O[0]===-1?j=L-N:O[0]===1?L=j+N:(j=j-N/2,L=L+N/2),O[1]===-1?P=R-C:(O[1]===1||(P=R-C/2),R=P+C);var B=r1(P,L,R,j);t.forEach(function(z,W){c[W][0]=B[W].pos[0]-z.pos[0],c[W][1]=B[W].pos[1]-z.pos[1]})}else t.forEach(function(z,W){var Z=z.direction;Z&&(Z.indexOf(g)>-1&&(c[W][0]=n[0]),Z.indexOf(v)>-1&&(c[W][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(z){var W=z==="n"||z==="s";t.forEach(function(Z,G){var Y=Z.direction,Q=Z.horizontal,ee=Z.vertical;!Y||Y.indexOf(z)===-1||(c[G]=[W||!Q?0:n[0],!W||!ee?0:n[1]])})}):c[e]=n;return c}function jwe(t,e){var n=le(iW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=Cwe.indexOf(o),b=Iwe.indexOf(o),x=f.length;if(Nwe(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=fO(t,s,g),_="".concat(u,"(").concat(w.join(h),")");Le(t,"onClip",ht(t,e,ae({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:_,distX:0,distY:0},_i({clipPath:_},e))))}function zwe(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(Pwe(o,u,i,8,f),f===o.length))return}else return;var h=fO(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Le(t,"onClip",ht(t,e,ae({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},_i({clipPath:g},e))))}var Lwe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,_=c.pos2,T=c.pos3,I=c.pos4,O=c.clipPathState,D=c.snapBoundInfos,N=c.rotation;if(!u||o)return[];var C=dB(u,f,h,i||"inset",O||r);if(!C)return[];var P=v?4:3,R=C.type,j=C.poses,L=j.map(function(Oe){var ze=kn(g,Oe.pos,P);return[ze[0]-b,ze[1]-x]}),B=[],z=[],W=R==="rect",Z=R==="inset",G=R==="polygon";if(W||Z||G){var Y=Z?L.slice(0,8):L;z=Y.map(function(Oe,ze){var Ve=ze===0?Y[Y.length-1]:Y[ze-1],rt=Qn(Ve,Oe),Be=jW(Ve,Oe);return e.createElement("div",{key:"clipLine".concat(ze),className:Xe("line","clip-line","snap-control"),"data-clip-index":ze,style:{width:"".concat(Be,"px"),transform:"translate(".concat(Ve[0],"px, ").concat(Ve[1],"px) rotate(").concat(rt,"rad) scaleY(").concat(s,")")}})})}if(B=L.map(function(Oe,ze){return e.createElement("div",{key:"clipControl".concat(ze),className:Xe("control","clip-control","snap-control"),"data-clip-index":ze,style:{transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})}),Z&&B.push.apply(B,Ne([],le(L.slice(8).map(function(Oe,ze){return e.createElement("div",{key:"clipRadiusControl".concat(ze),className:Xe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ze,style:{transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var Q=C.left,ee=C.top,te=C.radiusX,U=C.radiusY,X=le(Je(kn(g,[Q,ee],P),kn(g,[0,0],P)),2),ne=X[0],K=X[1],ue="none";if(!a){for(var ie=Math.max(10,te/5,U/5),oe=[],_e=0;_e<=ie;++_e){var se=Math.PI*2/ie*_e;oe.push([te+(te-s)*Math.cos(se),U+(U-s)*Math.sin(se)])}oe.push([te,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([te*2+2,U*2+2]),oe.push([te*2+2,-2]),oe.push([te,-2]),ue="polygon(".concat(oe.map(function(Oe){return"".concat(Oe[0],"px ").concat(Oe[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Xe("clip-ellipse","snap-control"),style:{width:"".concat(te*2,"px"),height:"".concat(U*2,"px"),clipPath:ue,transform:"translate(".concat(-b+ne,"px, ").concat(-x+K,"px) ").concat(XS(g))}}))}if(a){var ge=Ga(Ne([w,_,T,I],le(L),!1)),de=ge.width,J=ge.height,Se=ge.left,Ce=ge.top;if(G||W||Z){var oe=Z?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:Xe("clip-area","snap-control"),style:{width:"".concat(de,"px"),height:"".concat(J,"px"),transform:"translate(".concat(Se,"px, ").concat(Ce,"px)"),clipPath:"polygon(".concat(oe.map(function(ze){return"".concat(ze[0]-Se,"px ").concat(ze[1]-Ce,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(Oe){var ze=D[Oe],Ve=Oe==="horizontal";ze.isSnap&&z.push.apply(z,Ne([],le(ze.snap.posInfos.map(function(rt,Be){var nt=rt.pos,Bt=Je(kn(g,Ve?[0,nt]:[nt,0],P),[b,x]),Bn=Je(kn(g,Ve?[f,nt]:[nt,h],P),[b,x]);return Lv(e,"",Bt,Bn,s,"clip".concat(Oe,"snap").concat(Be),"guideline")})),!1)),ze.isBound&&z.push.apply(z,Ne([],le(ze.bounds.map(function(rt,Be){var nt=rt.pos,Bt=Je(kn(g,Ve?[0,nt]:[nt,0],P),[b,x]),Bn=Je(kn(g,Ve?[f,nt]:[nt,h],P),[b,x]);return Lv(e,"",Bt,Bn,s,"clip".concat(Oe,"bounds").concat(Be),"guideline","bounds","bold")})),!1))}),Ne(Ne([],le(B),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ae(ae({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=dB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Le(t,"onClipStart",ht(t,e,{clipType:b,clipStyle:v,poses:x.map(function(_){return _.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,rf(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Ud(t.props,"clippable"),x=b.keepRatio,w=0,_=0,T=s.draggable,I=Io(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],_=n[1]):(r=le(I,2),w=r[0],_=r[1]);var O=[w,_],D=t.state,N=D.width,C=D.height,P=!h&&!u&&!f,R=v.type,j=v.poses,L=v.splitter,B=j.map(function(vt){return vt.pos});P&&(w=-w,_=-_);var z=!u||j[g].direction==="nesw",W=R==="inset"||R==="rect",Z=j.map(function(){return[0,0]});if(u&&!z){var G=j[g],Y=G.horizontal,Q=G.vertical,ee=[w*Ie(Y),_*Ie(Q)];Z=Mwe(j,g,ee,W,x)}else z&&(Z=B.map(function(){return[w,_]}));var te=B.map(function(vt,dn){return Nt(vt,Z[dn])}),U=Ne([],le(te),!1);D.snapBoundInfos=null;var X=v.type==="circle",ne=v.type==="ellipse";if(X||ne){var K=Ga(te),ue=Ie(K.bottom-K.top),ie=Ie(ne?K.right-K.left:ue),oe=te[0][1]+ue,_e=te[0][0]-ie,se=te[0][0]+ie;X&&(U.push([se,K.bottom]),Z.push([1,0])),U.push([K.left,oe]),Z.push([0,1]),U.push([_e,K.bottom]),Z.push([1,0])}var ge=PW((b.clipHorizontalGuidelines||[]).map(function(vt){return en("".concat(vt),C)}),(b.clipVerticalGuidelines||[]).map(function(vt){return en("".concat(vt),N)}),N,C),de=[],J=[];if(X||ne)de=[U[4][0],U[2][0]],J=[U[1][1],U[3][1]];else if(W){var Se=[U[0],U[2],U[4],U[6]],Ce=[Z[0],Z[2],Z[4],Z[6]];de=Se.filter(function(vt,dn){return Ce[dn][0]}).map(function(vt){return vt[0]}),J=Se.filter(function(vt,dn){return Ce[dn][1]}).map(function(vt){return vt[1]})}else de=U.filter(function(vt,dn){return Z[dn][0]}).map(function(vt){return vt[0]}),J=U.filter(function(vt,dn){return Z[dn][1]}).map(function(vt){return vt[1]});var Oe=[0,0],ze=YV(ge,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},de,J,5,5),Ve=ze.horizontal,rt=ze.vertical,Be=Ve.offset,nt=rt.offset;if(Ve.isBound&&(Oe[1]+=Be),rt.isBound&&(Oe[0]+=nt),(ne||X)&&Z[0][0]===0&&Z[0][1]===0){var K=Ga(te),Bt=K.bottom-K.top,Bn=ne?K.right-K.left:Bt,Tn=rt.isBound?Ie(nt):rt.snapIndex===0?-nt:nt,bt=Ve.isBound?Ie(Be):Ve.snapIndex===0?-Be:Be;Bn-=Tn,Bt-=bt,X&&(Bt=SW(rt,Ve)>0?Bt:Bn,Bn=Bt);var Ft=U[0];U[1][1]=Ft[1]-Bt,U[2][0]=Ft[0]+Bn,U[3][1]=Ft[1]+Bt,U[4][0]=Ft[0]-Bn}else if(W&&x&&u){var Me=le(eY(j),2),ut=Me[0],An=Me[1],gr=ut&&An?ut/An:0,Fn=j[g],Un=Fn.direction||"",mr=U[1][1],oe=U[5][1],_e=U[7][0],se=U[3][0];Ie(Be)<=Ie(nt)?Be=xi(Be)*Ie(nt)/gr:nt=xi(nt)*Ie(Be)*gr,Un.indexOf("w")>-1?_e-=nt:Un.indexOf("e")>-1?se-=nt:(_e+=nt/2,se-=nt/2),Un.indexOf("n")>-1?mr-=Be:Un.indexOf("s")>-1?oe-=Be:(mr+=Be/2,oe-=Be/2);var Dn=r1(mr,se,oe,_e);U.forEach(function($n,Zn){var vr;vr=le(Dn[Zn].pos,2),$n[0]=vr[0],$n[1]=vr[1]})}else U.forEach(function(vt,dn){var rn=Z[dn];rn[0]&&(vt[0]-=nt),rn[1]&&(vt[1]-=Be)});var at=fO(t,v,te),ln="".concat(R,"(").concat(at.join(L),")");if(D.clipPathState=ln,X||ne)de=[U[4][0],U[2][0]],J=[U[1][1],U[3][1]];else if(W){var Se=[U[0],U[2],U[4],U[6]];de=Se.map(function(dn){return dn[0]}),J=Se.map(function(dn){return dn[1]})}else de=U.map(function(vt){return vt[0]}),J=U.map(function(vt){return vt[1]});if(D.snapBoundInfos=YV(ge,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},de,J,1,1),T){var mt=D.is3d,Gr=D.allMatrix,Xi=mt?4:3,Ms=Oe;o&&(Ms=[O[0]+Oe[0]-I[0],O[1]+Oe[1]-I[1]]),T.deltaOffset=tn(Gr,[Ms[0],Ms[1],0,0],Xi)}return Le(t,"onClip",ht(t,e,ae({clipEventType:"changed",clipType:R,poses:te,clipStyle:ln,clipStyles:at,distX:w,distY:_},_i((i={},i[R==="rect"?"clip":"clipPath"]=ln,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Le(t,"onClipEnd",ba(t,e,{})),i&&(o?zwe(t,e):a&&jwe(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Vwe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":_r(e.inputEvent.target,Xe("origin"))},dragControlStart:function(t,e){var n=e.datas;rf(t,e);var r=ht(t,e,{dragStart:bi.dragStart(t,new gp().dragStart([0,0],e))}),i=Le(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(Io(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,_=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(_=T)}var I=Nt(n.startOrigin,_),O=Nt(n.startTargetOrigin,_),D=Je(_,n.prevOrigin),N=B0(h,g,I,w),C=t.getRect(),P=Ga(af(N,u,f,w)),R=[C.left-P.left,C.top-P.top];n.prevOrigin=_;var j=[ms(O[0],u,x),ms(O[1],f,x)].join(" "),L=bi.drag(t,V0(e,t.state,R,!!r)),B=ht(t,e,ae(ae({width:u,height:f,origin:I,dist:_,delta:D,transformOrigin:j,drag:L},_i({transformOrigin:j,transform:L.transform},e)),{afterTransform:L.transform}));return Le(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Le(t,"onDragOriginEnd",ba(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Bwe(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Fwe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Fwe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Uwe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function fB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=eu(t),JW(a,e,n,0,0,r,i)}function hB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=dO(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=Dwe(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=ht(t,e,ae({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},_i({borderRadius:x},e)));return Le(t,"onRound",w),w}function pB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=sO(s).borderRadius,r.borderRadius=i))}return i}var $we={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Xe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,_=h.roundPadding,T=_===void 0?0:_,I=h.isDisplayShadowRoundControls,O=h.groupable;if(!r)return null;var D=f||pB(t),N=o?4:3,C=fB(D,i,a,v,!0);if(!C)return null;var P=0,R=0,j=O?[0,0]:[c,u];return C.map(function(L,B){var z=L.horizontal,W=L.vertical,Z=L.direction||"",G=Ne([],le(L.pos),!1);R+=Math.abs(z),P+=Math.abs(W),z&&Z.indexOf("n")>-1&&(G[1]-=T),W&&Z.indexOf("w")>-1&&(G[0]-=T),z&&Z.indexOf("s")>-1&&(G[1]+=T),W&&Z.indexOf("e")>-1&&(G[0]+=T);var Y=Je(kn(s,G,N),j),Q=I&&I!=="horizontal",ee=L.vertical?P<=x[1]&&(Q||!L.virtual):R<=x[0]&&(I||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Xe("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:ee?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=ht(t,e,{}),g=Le(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,rf(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,_=t.state,T=_.width,I=_.height;r.isRound=!0,r.prevDist=[0,0];var O=pB(t),D=fB(O||"",T,I,w,!0)||[];return r.controlPoses=D,_.borderRadiusState=dO(D,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(Io(e),2),s=a[0],o=a[1],c=[s,o],u=Je(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,_=x.horizontal,T=r.map(function(O){var D=O.horizontal,N=O.vertical,C=[D*_*c[0],N*w*c[1]];if(D){if(h[0]===1)return C;if(h[0]<4&&D!==_)return C}else{if(h[1]===0)return C[1]=N*_*c[0]/v*b,C;if(w){if(h[1]===1)return C;if(h[1]<4&&N!==w)return C}}return[0,0]});T[i]=c;var I=r.map(function(O,D){return ae(ae({},O),{pos:Nt(O.pos,T[D])})});return i<4?I.slice(0,i+1).forEach(function(O){O.virtual=!1}):I.slice(4,i+1).forEach(function(O){O.virtual=!1}),n.prevDist=[s,o],hB(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(_){var T=_.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))Uwe(u,s);else if(o&&(g===!0||g==="line")){var v=le(iW(t,e),2),b=v[0],x=v[1];Bwe(u,c,b,x)}f!==u.filter(function(_){var T=_.virtual;return T}).length&&hB(t,e,[0,0],[0,0],u)}var w=ba(t,e,{});return Le(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Le(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),_i({borderRadius:n.borderRadius},o))})},n);return Le(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Ts(t,"roundable",e);QS(t,"onRound",function(o){var c=ae({targets:t.props.targets,events:i.map(function(u,f){return ae(ae(ae({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),_i({borderRadius:o.borderRadius},u))})},o);Le(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ae({targets:t.props.targets,events:i.map(function(o,c){var u;return ae(ae({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Le(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function qwe(t,e){var n=e?4:3,r=gn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var tY={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(GK(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=qwe(o,r)?[]:eu(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ht(t,e,{setTransform:function(n){e.datas.startTransforms=pr(n)?n:eu(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ht(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Le(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Le(t,"onBeforeRender",ht(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Le(t,"onBeforeRenderEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Le(t,"onBeforeRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Le(t,"onBeforeRenderGroup",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Le(t,"onBeforeRenderGroupEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},nY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Le(t,"onRenderStart",ht(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Le(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Le(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Le(t,"onRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Le(t,"onRenderGroup",ht(t,e,ae(ae({isPinch:!!e.isPinch,targets:t.props.targets,transform:nx(e),transformObject:{}},_i(rx(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Le(t,"onRenderGroupEnd",ht(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:nx(e)},_i(rx(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return pp(Xw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,ae({isPinch:!!e.isPinch,transformObject:n,transform:nx(e)},_i(rx(e))))},fillDragEndParams:function(t,e){var n={};return pp(Xw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:nx(e)},_i(rx(e))))}};function av(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=Ne([],le(e),!1);if(h){var b=a.requestAble;v.some(function(B){return B.name===b})||v.push.apply(v,Ne([],le(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!v.length||v.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var _=!1,T=function(){var B;_=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var O=a.datas,D=g?"controlGesto":"targetGesto",N=t[D],C=function(B,z,W){if(!(z in B)||N!==t[D])return!1;var Z=B.name,G=O[Z]||(O[Z]={});if(o&&(G.isEventStart=!W||!B[W]||B[W](t,a)),!G.isEventStart)return!1;var Y=B[z](t,ae(ae({},a),{stop:T,datas:G,originalDatas:O,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(G.isEventStart=!1),Y};I&&v.forEach(function(B){B.unset&&B.unset(t)}),C(tY,"drag".concat(r).concat(i));var P=0,R=0;n.forEach(function(B){if(_)return!1;var z="".concat(B).concat(r).concat(i),W="".concat(B).concat(r,"Condition");i===""&&!h&&hwe(t.state,a);var Z=v.filter(function(Q){return Q[z]});Z=Z.filter(function(Q,ee){return Q.name&&Z.indexOf(Q)===ee});var G=Z.filter(function(Q){return C(Q,z,W)}),Y=G.length;_&&++P,Y&&++R,!_&&o&&Z.length&&!Y&&(P+=Z.filter(function(Q){var ee=Q.name,te=O[ee];return te.isEventStart?Q.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&C(nY,"drag".concat(r).concat(i));var j=N!==t[D]||P===n.length;if((c||_||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),v.forEach(function(B){B.unset&&B.unset(t)})),o&&!j&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!o&&R&&!s||c){var L=t.props.flushSync||OW;L(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&av(t,e,n,r,i+"After",a),!0}function hO(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||_r(a,"moveable-area")||_r(a,"moveable-padding")||_r(a,"moveable-edgeDraggable")}}function rY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=hO(t);return aY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function iY(t,e){var n=t.controlBox,r=[];r.push(n);var i=hO(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return aY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function aY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,_=s.preventWheelClick,T=_===void 0?!0:_,I=s.dragContainer,O=bo(I,!0),D={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:O||qc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(P){return t.controlBox.contains(P.target)},checkInput:a?h:!1,dragFocusedInput:g},N=new vbe(e,D),C=r==="Control";return["drag","pinch"].forEach(function(P){["Start","","End"].forEach(function(R){N.on("".concat(P).concat(R),function(j){var L,B=j.eventType,z=P==="drag"&&j.isPinch;if(i[B]&&!i[B](j)){j.stop();return}if(!z){var W=P==="drag"?[P]:["drag",P],Z=Ne([],le(t[n]),!1),G=av(t,Z,W,r,R,j);G?(t.props.stopPropagation||R==="Start"&&C)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),N}var Gwe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function Hwe(t,e,n,r){var i;n===void 0&&(n=e);var a=uW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=sxe(h,n),x=b.matrixes,w=b.is3d,_=b.offsetContainer,T=b.zoom,I=r,O=4,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,N=c,C=gn(O),P=gn(O),R=gn(O),j=gn(O),L=s.length,B=x.map(function(ee){return ae(ae({},ee),{matrix:ee.matrix?Ne([],le(ee.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(N=Is(N,3,4),yP(s)),!w&&I&&yP(B),B.forEach(function(ee){P=tn(P,ee.matrix,O)});var z=n||hu(t),W=((i=B[0])===null||i===void 0?void 0:i.target)||Vv(z,z,!0).offsetParent,Z=B.slice(1).reduce(function(ee,te){return tn(ee,te.matrix,O)},gn(O));s.forEach(function(ee,te){if(L-2===te&&(R=C.slice()),L-1===te&&(j=C.slice()),!ee.matrix){var U=s[te+1],X=cwe(ee,U,W,O,tn(Z,C,O));ee.matrix=Bd(X,O)}C=tn(C,ee.matrix,O)});var G=!D&&o;N||(N=gn(G?4:3));var Y=XS(D&&N.length===16?Is(N,4,3):N,G),Q=P;return P=$K(P,O,O),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:P,originalRootMatrix:Q,beforeMatrix:R,offsetMatrix:j,allMatrix:C,targetMatrix:N,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:_}}function Kwe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=zW(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=Hwe(t,e,n,r),f=Bh(u.allMatrix,u.transformOrigin,i,a);o=ae(ae({},u),f);var h=Bh(u.allMatrix,[50,50],100,100);s=LW([h.pos1,h.pos2],h.direction)}var g=4;return ae(ae(ae({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:gn(g),rootMatrix:gn(g),beforeMatrix:gn(g),offsetMatrix:gn(g),allMatrix:gn(g),targetMatrix:gn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function SP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=ax(),u=ax(),f=ax(),h=ax(),g=[0,0],v={},b=Kwe(e,n,i,!0);if(e){var x=Wi(e);a.forEach(function(B){v[B]=x(B)});var w=b.is3d?4:3,_=Bh(b.offsetMatrix,Nt(b.transformOrigin,qK(b.targetMatrix,w)),b.width,b.height);s=_.direction,o=Nt(_.origin,[_.left-b.left,_.top-b.top]),h=iv(b.offsetRootContainer);var T=Vv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Bh(tn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),O=Bh(b.originalRootMatrix,e1(Wi(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=XA(I,h),f=XA(O,h,T,!0),t){var D=I.left,N=I.top;u=XA({left:D,top:N,bottom:N,right:N},h)}}else{c=iv(e),f=axe(T),t&&(u=iv(t));var C=f.left,P=f.top,R=f.clientLeft,j=f.clientTop,L=[c.left-C,c.top-P];g=Je(yp(b.rootMatrix,L,4),[R+b.left,j+b.top])}}return ae({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function gB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Fd([e,n,r,i]),s=[a.minX,a.minY],o=Je(t.origin,s);return e=Je(e,s),n=Je(n,s),r=Je(r,s),i=Je(i,s),ae(ae({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var bp=(function(t){z0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ae({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},SP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new US,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}lye(n._observerId),n._observerId=vK(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],_=r.left,T=r.top,I=r.target,O=r.direction,D=r.hasFixed,N=r.offsetDelta,C=n.targets,P=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Z){R["data-able-".concat(Z.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=C&&C.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[_-x,T-w];!h&&n.useAccuratePosition&&(z[0]+=N[0],z[1]+=N[1]);var W={position:D?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(W["--moveable-line-padding"]=g),v&&(W["--moveable-control-padding"]=v),Es(f,ae({cspNonce:c,ref:cl(this,"controlBox"),className:"".concat(Xe("control-box",O===-1?"reverse":"",P?"dragging":"")," ").concat(j," ").concat(a)},R,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Ih(this,!1),Ih(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Ki(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(W2)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&hO(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Gp(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ae({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=LV([a,s,c,o],u),_=dbe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=WK(w);return!_||!T?0:Math.min(100,_/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?aP([n,r],LV([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&mp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=SP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=gB(a.persistData);for(var b in v)g[b]=v[b]}s&&mp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Wa(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ga(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],_=Nt(w,n.origin),T=Nt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:_,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&bP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&bP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return mwe(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Ki(c,function(_){return _.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Ne([],le(o[v]),!1),w={request:function(_){return av(a,x,["drag"],b,"",ae(ae({},h.request(_)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return av(a,x,["drag"],b,"End",ae(ae({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return av(a,x,["drag"],b,"Start",ae(ae({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var _=WW(i||{}),T=_.left,I=_.top,O=_.bottom,D=_.right,N=c?4:3,C=[];x?C=s:this.controlBox&&r.groupable?C=a:C=Nt(a,[v,b]);var P=Ww(N,Bd(C.map(function(W){return-W}),N),o,Bd(s,N)),R=ja(P,u,[-T,-I],N),j=ja(P,f,[D,-I],N),L=ja(P,h,[-T,O],N),B=ja(P,g,[D,O],N);n.renderPoses=[R,j,L,B],n.renderLines=[[R,j],[j,B],[B,L],[L,R]];{var z=w/2;n.renderLines=[[ja(P,u,[-T-z,-I],N),ja(P,f,[D+z,-I],N)],[ja(P,f,[D,-I-z],N),ja(P,g,[D,O+z],N)],[ja(P,g,[D+z,O],N),ja(P,h,[-T-z,O],N)],[ja(P,h,[-T,O+z],N),ja(P,u,[-T,-I-z],N)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!xP(o,r),f=u||!xP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=QK(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=gB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=sx(s,[o,c],a),h=sx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Es};return this.renderState={},fwe(qW(sx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],le(r),!1),le(o),!1)},Ne([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Ih(this,!1),this.updateState({gestos:{}})),r||Ih(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=rY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=iY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=bo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Es};return c.renderLines.map(function(f,h){return Lv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=El(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=sx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new Gwe(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=bo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=bo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ne(Ne([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?_we:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=$W(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=D0(a,i),o=s.removed,c=s.added;o.forEach(function(u){SK(r,a[u])}),c.forEach(function(u){wK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Xe("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=qc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=qc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=Cbe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:OW,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(IK),pO={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Ph(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=Ph(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ne(Ne([],le(i.map(function(b,x){return e.createElement(bp,{key:"moveable"+x,ref:hK(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(qW(f.map(function(b,x){var w=b.pos1,_=b.pos2,T=b.pos3,I=b.pos4,O=[w,_,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(D,N){var C=le(D,2),P=C[0],R=C[1];return Lv(e,"",Je(O[P],g),Je(O[R],g),u,"group-rect-".concat(x,"-").concat(N))})}))),!1)}},Wwe=L0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Le(t,"onClick",ht(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=_l(i,function(c){return c.contains(r)}),o=a>-1),Le(t,"onClickGroup",ht(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function rh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ae(ae({},t),{datas:e})}var Ywe=L0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?hW(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&_r(i,Xe("direction"))&&_r(i,Xe("edge"))&&_r(i,Xe("edgeDraggable"))},dragStart:function(t,e){return bi.dragStart(t,rh(e))},drag:function(t,e){return bi.drag(t,rh(e))},dragEnd:function(t,e){return bi.dragEnd(t,rh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&_r(i,Xe("direction"))&&_r(i,Xe("line"))},dragGroupStart:function(t,e){return bi.dragGroupStart(t,rh(e))},dragGroup:function(t,e){return bi.dragGroup(t,rh(e))},dragGroupEnd:function(t,e){return bi.dragGroupEnd(t,rh(e))},unset:function(t){return bi.unset(t)}}),sY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},gO=[tY,QW,Jxe,ywe,bi,Ywe,gP,bwe,wwe,Mxe,Awe,kwe,Ewe,Vwe,Lwe,$we,pO,sY,Wwe,XW,nY],Xwe=gO.reduce(function(t,e){return(e.events||[]).forEach(function(n){xK(t,n)}),t},[]),Qwe=gO.reduce(function(t,e){return(e.props||[]).forEach(function(n){xK(t,n)}),t},[]);function mB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function cx(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function vB(t,e){return Math.max.apply(Math,Ne([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function yB(t,e){return Math.min.apply(Math,Ne([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Zwe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=lt(e,Ai);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[dP,FV],w=[[0,0],[0,0]],_=[dP,FV],T=[[0,0],[0,0]];t.forEach(function(ne){ne.forEach(function(K){var ue=mB([-v,1,0],K),ie=mB([-b,1,0],K);x[0]>ue&&(w[0]=K,x[0]=ue),x[1]<ue&&(w[1]=K,x[1]=ue),_[0]>ie&&(T[0]=K,_[0]=ie),_[1]<ie&&(T[1]=K,_[1]=ie)})});var I=le(w,2),O=I[0],D=I[1],N=le(T,2),C=N[0],P=N[1],R=[-v,1,cx([-v,1],O)],j=[-v,1,cx([-v,1],D)],L=[-b,1,cx([-b,1],C)],B=[-b,1,cx([-b,1],P)];n=le([[R,L],[R,B],[j,L],[j,B]].map(function(ne){var K=le(ne,2),ue=K[0],ie=K[1];return H2(ue,ie)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=_[1]-_[0],f=x[1]-x[0]}else{var z=yB(t,0),W=yB(t,1),Z=vB(t,0),G=vB(t,1);if(a=[z,W],s=[Z,W],o=[z,G],c=[Z,G],u=Z-z,f=G-W,h%180){var Y=[o,a,c,s];r=le(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-W,f=Z-z}}if(h%360>180){var Y=[c,o,s,a];i=le(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var Q=Fd([a,s,o,c]),ee=Q.minX,te=Q.minY,U=Q.maxX,X=Q.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ee,minY:te,maxX:U,maxY:X,rotation:e}}function oY(t,e){var n=e.map(function(r){if(pr(r)){var i=oY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Ki(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&pr(n[0])?n[0]:n}var Jwe=(function(t){z0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new KK,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;mp(!0),this.moveables.forEach(function(_e){_e.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(_e){return{finded:!1,manager:_e}}),h=this.props.targetGroups||[],g=oY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,Ne([],le(f.filter(function(_e){var se=_e.finded;return!se}).map(function(_e){var se=_e.manager;return se})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var _=(a=o.persistData)===null||a===void 0?void 0:a.rotation;_!=null&&(w=_)}function T(_e,se,ge){var de=_e.map(function(rt){if(pr(rt)){var Be=T(rt,se),nt=[Be.pos1,Be.pos2,Be.pos3,Be.pos4];return b.push(Be),{poses:nt,rotation:Be.rotation}}else return{poses:Wa(rt.state),rotation:rt.getRotation()}}),J=de.map(function(rt){var Be=rt.rotation;return Be}),Se=0,Ce=J[0],Oe=J.every(function(rt){return Math.abs(Ce-rt)<.1});x?Se=!v&&Oe?Ce:w:Se=!v&&!ge&&Oe?Ce:se;var ze=de.map(function(rt){var Be=rt.poses;return Be}),Ve=Zwe(ze,Se);return Ve}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var O=this.transformOrigin,D=this.rotation,N=this.scale,C=I.width,P=I.height,R=I.minX,j=I.minY,L=vwe([[0,0],[C,0],[0,P],[C,P]],uO(O,C,P),this.rotation/180*Math.PI),B=Fd(L.result),z=B.minX,W=B.minY,Z=" rotate(".concat(D,"deg)")+" scale(".concat(xi(N[0]),", ").concat(xi(N[1]),")"),G="translate(".concat(-z,"px, ").concat(-W,"px)").concat(Z);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(O,";")+"width:".concat(C,"px;height:").concat(P,"px;")+"transform: ".concat(G),s.width=C,s.height=P;var Y=this.getContainer(),Q=SP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ee=[Q.left,Q.top],te=le(Wa(Q),4),U=te[0],X=te[1],ne=te[2],K=te[3],ue=Fd([U,X,ne,K]),ie=[ue.minX,ue.minY],oe=xi(N[0]*N[1]);Q.pos1=Je(U,ie),Q.pos2=Je(X,ie),Q.pos3=Je(ne,ie),Q.pos4=Je(K,ie),Q.left=R-Q.left+ie[0],Q.top=j-Q.top+ie[1],Q.origin=Je(Nt(ee,Q.origin),ie),Q.beforeOrigin=Je(Nt(ee,Q.beforeOrigin),ie),Q.originalBeforeOrigin=Nt(ee,Q.originalBeforeOrigin),Q.transformOrigin=Je(Nt(ee,Q.transformOrigin),ie),u.style.transform="translate(".concat(-z-ie[0],"px, ").concat(-W-ie[1],"px)")+Z,mp(),this.updateState(ae(ae({},Q),{posDelta:ie,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Ne([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ne(Ne([],le(this.props.ables),!1),[pO],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=bo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Ih(this,!1),Ih(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=rY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=iY(this,"GroupControl")));var g=!xP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!KW(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ae(ae({},bp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(bp),e1e=(function(t){z0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Es(s,{cspNonce:a,ref:cl(this,"controlBox"),className:Xe("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return Es(bp,ae({key:"moveable"+v,ref:hK(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),mp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),mp()},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ae(ae({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Ki(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ne([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(bp);function lY(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,Ne([],le(e[r]),!1));return}pr(r)?n.push.apply(n,Ne([],le(lY(r,e)),!1)):n.push(r)}}),n}function cY(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,Ne([],le(e[r]),!1));return}pr(r)?n.push(cY(r,e)):n.push(r)}}),n}function uY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?pr(n)&&pr(i)?uY(n,i):!0:!1})}var t1e=(function(t){z0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new KK,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=El(n).join(`
`);this.defaultStyled=QK("div",X0e(W2,Vbe+i))},e.getTotalAbles=function(){return Ne([QW,pO,sY,XW],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Abe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=lY(u,f),g=h.length>1,v=r.getTotalAbles(),b=Ne(Ne([],le(v),!1),le(a||[]),!1),x=ae(ae(ae({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,_=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Es(e1e,ae({key:"individual-group",ref:cl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=cY(u,f);if(_&&!_.props.groupable&&!_.props.individualGroupable){var O=_.props.target;O&&h.indexOf(O)>-1&&(w=ae({},_.state))}return Es(Jwe,ae({key:"group",ref:cl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var D=h[0];if(_&&(_.props.groupable||_.props.individualGroupable)){var N=_.moveables||[],C=Ki(N,function(P){return P.props.target===D});C&&(w=ae({},C.state))}return Es(bp,ae({key:"single",ref:cl(this,"moveable")},x,{target:D,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=cO(this.props.target||this.props.targets),a=typeof document<"u",s=uY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Hi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else pr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,kbe([Q0e(rW)],e.prototype,"moveable",void 0),e})(IK),n1e=(function(t){z0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=gO,e})(t1e),_P=function(t,e){return _P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_P(t,e)};function mO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_P(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Bv=function(){return Bv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bv.apply(this,arguments)};function r1e(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var i1e=(function(t){mO(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Es(n1e,Bv({ref:cl(this,"moveable")},this.state))},e})(B2),a1e=Qwe,s1e=rW,o1e=Xwe,l1e=(function(t){mO(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Bv({},i),o={};o1e.forEach(function(f){o[oye("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=qp(r).createElement("div"),r.appendChild(c)),a.containerProvider=MV(Es(i1e,Bv({ref:cl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return pr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;MV(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=r1e([AV(s1e,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),AV(a1e,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(US),dY=(function(t){mO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(l1e),zc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(zc||{}),Mm=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Mm||{});const c1e=["mousedown","mousemove","mouseup","mouseleave","mouseout"],u1e=["touchstart","touchmove","touchend","touchcancel"],d1e=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function f1e(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function h1e(t){var e;return c1e.includes((e=t?.nativeEvent)==null?void 0:e.type)}function fY(t){var e;return u1e.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function p1e(t){const{nativeEvent:e}=t;return e?d1e.includes(e?.type)||"pointerId"in e:!1}function JA(t){return h1e(t)||fY(t)||p1e(t)}function bB(t){var e;const n=fY(t)?(e=t?.touches)==null?void 0:e[0]:t;return f1e(n)?{x:n.pageX,y:n.pageY}:null}function g1e(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function vO(t,{threshold:e=400,captureEvent:n=!1,detect:r=zc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),_=A.useCallback(D=>N=>{g.current||JA(N)&&(s!==void 0&&!s(N)||(n&&N.persist(),o?.(N,{context:D}),w.current=bB(N),g.current=!0,v.current=N.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(N,{context:D}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(D=>(N,C)=>{JA(N)&&g.current&&(w.current=null,n&&N.persist(),h.current?u?.(N,{context:D}):g.current&&f?.(N,{context:D,reason:C??Mm.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(D=>N=>{if(JA(N)&&(c?.(N,{context:D}),i!==!1&&w.current)){const C=bB(N);if(C){const P=i===!0?25:i,R={x:Math.abs(C.x-w.current.x),y:Math.abs(C.y-w.current.y)};(R.x>P||R.y>P)&&T(D)(N,Mm.CancelledByMovement)}}},[T,i,c]),O=A.useCallback(D=>{if(t===null)return{};switch(r){case zc.Mouse:{const N={onMouseDown:_(D),onMouseMove:I(D),onMouseUp:T(D)};return a&&(N.onMouseLeave=C=>{T(D)(C,Mm.CancelledOutsideElement)}),N}case zc.Touch:return{onTouchStart:_(D),onTouchMove:I(D),onTouchEnd:T(D)};case zc.Pointer:{const N={onPointerDown:_(D),onPointerMove:I(D),onPointerUp:T(D)};return a&&(N.onPointerLeave=C=>T(D)(C,Mm.CancelledOutsideElement)),N}}},[t,T,a,r,I,_]);return A.useEffect(()=>{function D(N){const C=g1e(N);T()(C)}return window.addEventListener("mouseup",D),window.addEventListener("touchend",D),window.addEventListener("pointerup",D),()=>{window.removeEventListener("mouseup",D),window.removeEventListener("touchend",D),window.removeEventListener("pointerup",D)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),O}const hY=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},i1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Qu=t=>i1(t).toISOString(),m1e=t=>{const e=i1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},v1e=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Fh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Qu(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||m1e(r),description:e.description||"",merchant:e.merchant||void 0,type:v1e(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},ux=t=>ei(tt,"users",t,"transactions"),y1e={subscribeToTransactions:(t,e)=>{const n=Bi(ux(t),_s("date","desc"));return Qc(n,i=>{const a=i.docs.map(s=>Fh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Bi(ux(t),Qx("month","==",e),_s("date","desc"));return Qc(r,i=>{const a=i.docs.map(s=>Fh({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Bi(ux(t),_s("date","desc")),r=(await oa(e)).docs.map(i=>Fh({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await NS(ux(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=_t(tt,"users",t,"transactions",e);return await ao(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=_t(tt,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await da(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},ek=t=>ei(tt,"users",t,"envelopes"),b1e={subscribeToEnvelopes:(t,e)=>{const n=Bi(ek(t),_s("orderIndex","asc"));return Qc(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=ek(t),i=(await oa(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await NS(ek(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=_t(tt,"users",t,"envelopes",e.id);return await ca(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=_t(tt,"users",t,"envelopes",e);return await ao(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=_t(tt,"users",t,"envelopes",e);await da(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},tk=t=>ei(tt,"users",t,"distributionTemplates"),x1e={subscribeToDistributionTemplates:(t,e)=>{const n=Bi(tk(t),_s("lastUsed","desc"));return Qc(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Bi(tk(t),_s("lastUsed","desc"));return(await oa(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await NS(tk(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=_t(tt,"users",t,"distributionTemplates",e.id);return await ca(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=_t(tt,"users",t,"distributionTemplates",e);return await ao(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=_t(tt,"users",t,"distributionTemplates",e);await da(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},nk=t=>ei(tt,"users",t,"appSettings"),pY={subscribeToAppSettings:(t,e)=>{const n=Bi(nk(t),r5(1));return Qc(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Bi(nk(t),r5(1)),n=await oa(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await NS(nk(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=_t(tt,"users",t,"appSettings",e.id);return await ca(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=_t(tt,"users",t,"appSettings",e);return await ca(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=_t(tt,"users",t,"appSettings",e);await da(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},xB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:pY},Symbol.toStringTag,{value:"Module"}));class il{static instance;constructor(){}static getInstance(){return il.instance||(il.instance=new il),il.instance}createId(){return _t(ei(tt,"temp")).id}async createCategory(e){const n=_t(tt,`users/${e.userId}/categories`,e.id);return await ca(n,e),e}async getCategories(e){const n=Bi(ei(tt,`users/${e}/categories`),_s("orderIndex","asc"));return(await oa(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=_t(tt,`users/${e}/categories`,n.id);await ca(r,n,{merge:!0})}async deleteCategory(e,n){const r=_t(tt,`users/${e}/categories`,n);await da(r)}async reorderCategories(e,n){const r=AI(tt);n.forEach((i,a)=>{const s=_t(tt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=AI(tt);i.slice(s,s+a).forEach(u=>{const f=_t(tt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Bi(ei(tt,`users/${e}/categories`),_s("orderIndex","asc"));return Qc(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}il.getInstance();class ws{static instance;static getInstance(){return ws.instance||(ws.instance=new ws),ws.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=_t(tt,"users",e,s,f);i.push({ref:h,data:u})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=AI(tt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=ei(tt,"users",e,"envelopes"),a=(await oa(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=ei(tt,"users",e,"transactions"),r=Bi(n,_s("date","desc")),a=(await oa(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Fh(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=ei(tt,"users",e,"transactions"),i=Bi(r,Qx("month","==",n),_s("date","desc")),s=(await oa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Fh(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=ei(tt,"users",e,"transactions"),i=Bi(r,Qx("envelopeId","==",n),_s("date","desc")),s=(await oa(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Fh(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=ei(tt,"users",e.userId,"envelopes"),r=_t(n),i=gt.now(),a={...e,createdAt:i,lastUpdated:i};ca(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:Qu(i),lastUpdated:Qu(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=_t(tt,"users",e,"envelopes",n.id);ca(r,{...n,lastUpdated:gt.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=_t(tt,"users",e,"envelopes",n),i=Bi(ei(tt,"users",e,"transactions"),Qx("envelopeId","==",n)),s=(await oa(i)).docs.map(o=>da(o.ref));await Promise.all([da(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=_t(tt,"users",e,"envelopes",i.id);return ca(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=ei(tt,"users",e.userId,"transactions"),r=_t(n),i=gt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};ca(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=_t(tt,"users",e,"transactions",n.id);ca(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=_t(tt,"users",e,"transactions",n);da(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=_t(tt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};ao(n,{incomeSources:whe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?ca(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:Qu(r),updatedAt:Qu(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=_t(tt,"users",e,"monthlyBudgets",r);xA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:gt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});ao(a,{incomeSources:u,updatedAt:gt.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=_t(tt,"users",e,"monthlyBudgets",r);xA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);ao(i,{incomeSources:c,updatedAt:gt.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=_t(tt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};ao(n,i).catch(s=>{s.code==="not-found"?ca(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:Qu(r),updatedAt:Qu(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=_t(tt,"users",e,"monthlyBudgets",r),s={updatedAt:gt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),ao(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=_t(tt,"users",e,"monthlyBudgets",r);ao(i,{[`allocations.${n}`]:s5(),updatedAt:gt.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=_t(tt,"users",e,"monthlyBudgets",n),i=await xA(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=ei(tt,"users",e,"envelopeAllocations"),s=await oa(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>da(_t(tt,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=ei(tt,"users",e,"monthlyBudgets"),f=await oa(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let _=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=s5(),_=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),_&&(w.updatedAt=gt.now(),await ao(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>da(_t(tt,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=_t(tt,"users",e,"monthlyBudgets",n);return Qc(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=ei(tt,"users",e,r),a=await oa(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>da(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const yO=ws.getInstance(),w1e=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),S1e=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),wB=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=b1e.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(w1e),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),_=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:_})}),i={},a=g=>{i[g]||(i[g]=y1e.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(_=>_.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=il.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(S1e),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=x1e.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=pY.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=yO.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},_1e=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),wB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),wB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=yO.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Gu=ws.getInstance(),dx=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},E1e=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=dx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Gu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=dx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Gu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=dx();await Gu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=dx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Gu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=nn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await Gu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=nn.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await Gu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=nn.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await Gu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),ih=ws.getInstance(),ah=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},T1e=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=ah(),i={...n,userId:r.id},a=await ih.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=ah();await ih.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=ah();await ih.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=ah();await ih.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=ah(),o={...a,name:r};await ih.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=ah(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await ih.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),sh=ws.getInstance(),oh=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},A1e=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=oh();$.log(" Adding income source:",{month:n,source:r});const a=await sh.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await sh.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await sh.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=oh();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if($.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=oh(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=oh(),i=e().currentMonth,a=await sh.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=oh(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await sh.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=oh();await sh.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),lh=il.getInstance(),fx=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},k1e=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=nn.getState();if(!n)return;const r=await lh.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=fx(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=lh.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await lh.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=fx(),i={...n,updatedAt:new Date().toISOString()};await lh.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=fx();await lh.deleteCategory(r.id,n),t(i=>({categories:i.categories.filter(a=>a.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=fx(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await lh.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),C1e=ws.getInstance(),Hu=()=>nn.getState().currentUser?.id||"",I1e=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Hu();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await C1e.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Hu();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Hu();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Hu();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Hu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Hu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Hu();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),P1e=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=nn.getState();if(a){const{AppSettingsService:s}=await qh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>xB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=nn.getState();if(r){const{AppSettingsService:a}=await qh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>xB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),hm=ws.getInstance(),rk=il.getInstance(),SB=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},N1e=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([hm.getEnvelopes(r.id),rk.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),hm.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await rk.deduplicateCategories(r.id)>0&&(c=await rk.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await hm.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=SB(),{monthlyBudgetService:i}=await qh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-CphouEWC.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=nn.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await hm.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=SB();return $.log(" Starting Time Machine Restore for user:",r.id),await hm.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),D1e=()=>nn.getState().currentUser?.id||"",xt=GN()(Fce(X8((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...E1e({set:t,get:e}),...T1e({set:t,get:e}),...A1e({set:t,get:e}),...k1e({set:t,get:e}),...I1e({set:t,get:e}),...P1e({set:t,get:e}),...N1e({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));_1e({useBudgetStore:xt,useAuthStore:nn,getCurrentUserId:D1e});const gY=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:xt},Symbol.toStringTag,{value:"Module"})),_B=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},O1e=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=xt(),{currentUser:s}=nn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=xt(),{showToast:b}=fu(),[x,w]=A.useState(!1),_=A.useRef(null),[T,I]=A.useState(!1),O=!T||r||v,[D,N]=A.useState([]),C=A.useRef([]),[P,R]=A.useState([]),j=A.useRef([]),L=A.useCallback(ne=>t.find(ie=>ie.id===ne)?.isPiggybank?xt.getState().getEnvelopeBalance(ne):xt.getState().getEnvelopeBalance(ne,o),[t,o]);A.useEffect(()=>{const ne=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const ue=_B(K.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ie=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ie}catch(ue){return $.error(` Error processing piggybank ${K.name}:`,ue,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,ue)=>{const ie=K.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});R(ne),j.current=ne},[t,o]);const B=P,z=D;A.useEffect(()=>(_.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{_.current&&clearTimeout(_.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),_.current&&clearTimeout(_.current))},[T,r,v]),A.useEffect(()=>{const ne=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ie=(u[o]||[]).some(_e=>_e.envelopeId===K.id),oe=e.some(_e=>_e.envelopeId===K.id&&(_e.month===o||_e.date.startsWith(o)));return ie||oe}).sort((K,ue)=>{const ie=K.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});N(ne),C.current=ne},[t,u,o,e]);const W=(c[o]||[]).reduce((ne,K)=>ne+K.amount,0),Z=(u[o]||[]).filter(ne=>z.some(K=>K.id===ne.envelopeId)||B.some(K=>K.id===ne.envelopeId)).reduce((ne,K)=>ne+K.budgetedAmount,0),G=W-Z,Y=A.useCallback(async ne=>{if(!ne.length)return;const K=ne.map(ue=>ue.id);try{await a(K)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),Q=A.useCallback(async ne=>{await Y(ne)},[Y]),ee=A.useCallback(ne=>{f(o,ne.id).catch($.error),b(`Deleted "${ne.name}"`,"neutral")},[f,o,b]),te=A.useCallback(async ne=>{try{const K=ne||o;$.log(" Copying to month:",K),await g(K),b("Previous month budget copied","success")}catch(K){$.error("Error copying previous month:",K),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await xt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(ne){$.error("Error clearing month data:",ne),b("Failed to clear month data","error")}},[s,o,b]),X=A.useCallback(async(ne,K)=>{try{await h(ne,K),setTimeout(()=>{const ue=xt.getState(),ie=ue.currentMonth,oe=ue.incomeSources[ie]||[],_e=ue.allocations[ie]||[],se=new Set(ue.envelopes.filter(Se=>{if(Se.isPiggybank){if(!Se.isActive)return!1;if(Se.createdAt){const Ce=_B(Se.createdAt);if(!Ce)return!1;const Oe=`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}`;return ie>=Oe}return!0}return Se.isActive!==!1}).map(Se=>Se.id)),ge=_e.filter(Se=>se.has(Se.envelopeId)),de=oe.reduce((Se,Ce)=>Se+Ce.amount,0),J=ge.reduce((Se,Ce)=>Se+Ce.budgetedAmount,0);de-J<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(de-J)<.005&&de>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:B,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:O,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:Q,deleteIncomeSource:ee,clearMonthData:U,copyFromPreviousMonth:te,setEnvelopeAllocation:X,localOrderRef:C,setLocalEnvelopes:N,localPiggybankOrderRef:j,setLocalPiggybanks:R}},R1e=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,_=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let O="text-gray-900 dark:text-white",D="bg-green-500",N="Left to Budget",C=x>0?Math.min(I,100):0,P=!0;return x===0?(N="Add income to start budgeting",C=0,P=!1,O="text-gray-500 dark:text-zinc-500"):_?(O="text-green-600 dark:text-emerald-400",D="bg-green-500",N="Perfect! Every dollar has a job ",C=100,P=!1):T&&(O="text-red-600 dark:text-red-400",D="bg-red-500",N="You're not in Congress! Try again.",C=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${O}`,children:N}),P&&m.jsxs("span",{className:`text-sm font-bold truncate ${O}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${D}`,style:{width:`${C}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(xle,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(hs,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},ZS=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=K0e(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(dv,{className:"text-white w-6 h-6"})}),m.jsx(kt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},M1e=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=xt(),{showToast:o}=fu(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(Cr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(kt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},j1e=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(hle,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(zh,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},z1e="/personal-budget-pwa/icon-512.png",ik="/personal-budget-pwa/images/budget-balanced.png",hx=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],L1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(tf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),V1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(tf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),B1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),F1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(ef,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),U1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),$1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),eo=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],q1e=()=>{const[t,e]=A.useState(eo),n=Dc.useRef(0);return A.useEffect(()=>{const r=[()=>e([eo[1],eo[0],eo[2],eo[3]]),()=>e([eo[3],eo[1],eo[0],eo[2]]),()=>e(eo)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(Cr,{mode:"popLayout",children:t.map(r=>m.jsxs(kt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(Hh,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},G1e=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[u,f]=A.useState(hx),[h,g]=A.useState(!1),{addCategory:v}=xt(),b=j=>{f(L=>L.includes(j)?L.filter(B=>B!==j):[...L,j])},x=async()=>{for(let j=0;j<u.length;j++)await v({name:u[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let j=0;j<hx.length;j++)await v({name:hx[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const j=2e3,L=20,B=j/L,z=2500/L;let W=0;const Z=setInterval(()=>{W++;const G=Math.max(0,2500-z*W);c(G),W>=L&&(clearInterval(Z),setTimeout(()=>{let Y=0;const Q=10,ee=200,te=500/Q,U=setInterval(()=>{Y++;const X=-(te*Y);c(X),Y>=Q&&clearInterval(U)},ee)},1e3))},B);return()=>clearInterval(Z)}},[a,r]);const T=(j=>{const[L,B]=j.split("-");return new Date(parseInt(L),parseInt(B)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),I=[{icon:zh,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Tm,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Wh,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:vce,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:hx.map(j=>m.jsxs("button",{onClick:()=>b(j),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(j)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(j)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(j)&&m.jsx(ro,{size:12,className:"text-white"})}),j]},j))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:Tm,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(L1e,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(tf,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:Wh,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(V1e,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:Hh,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(Hh,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(q1e,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:cd,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(B1e,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(j=>j+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(uce,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(kt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(kt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:ef,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(F1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(bce,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Tm,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(cd,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:bw,title:"Analytics: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Analytics"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx(U1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(U8,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(bw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Analytics"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:cd,title:"Analytics: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx($1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Tm,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(cd,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:ik,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Analytics"].map((j,L)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:L+1})}),m.jsx("span",{className:"text-sm",children:j})]},L))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],O=I[r],D=O.useCustomIcon?ik:O.icon,N=r===I.length-1,C=r===0,P={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=P[O.color]||P.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(Cr,{children:h&&m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(kt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(Cr,{mode:"wait",children:m.jsxs(kt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(W8,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:O.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:O.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:z1e,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):O.useCustomIcon?m.jsx("img",{src:ik,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof D=="string"?null:m.jsx(D,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:O.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:I.map((j,L)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L===r?`w-8 ${R.button}`:L<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},L))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",I.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!C&&m.jsxs("button",{onClick:()=>i(j=>j-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(yl,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(N)x();else{if(O.title.includes("Choose Categories")&&u.length===0)return;i(j=>j+1)}},disabled:O.title.includes("Choose Categories")&&u.length===0,className:`${C?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:N?m.jsxs(m.Fragment,{children:[m.jsx(zh,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(ule,{className:"w-5 h-5"})]})})]})]},r)})]})})},H1e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o})=>{const c=A.useRef(null),[u,f]=A.useState(!1),h=vO(R=>{hY(),o(R,t.id)},{threshold:500,cancelOnMovement:25,detect:zc.Touch}),g=t.piggybankConfig?.targetAmount,v=t.piggybankConfig?.monthlyContribution??0,b=t.piggybankConfig?.color||"#3B82F6",x=t.piggybankConfig?.paused||!1,w=e,_=(R,j=1)=>{const L=R.replace("#",""),B=parseInt(L,16),z=B>>16&255,W=B>>8&255,Z=B&255;return`rgba(${z}, ${W}, ${Z}, ${j})`},T=`linear-gradient(135deg, ${_(b,.14)} 0%, ${_(b,.05)} 100%)`,I=_(b,.4),O=g&&g>0?Math.min(w/g*100,100):0,D=g&&w>=g;A.useEffect(()=>{a&&a!==t.id&&f(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(f(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&u){const R=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(R)}},[a,u]);const N=R=>{if(u||i){R.preventDefault(),R.stopPropagation();return}n(t.id)},C=a===t.id,P=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:R=>o(R,t.id),children:m.jsx(Hh,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${b}20`},children:m.jsx(ef,{size:12,style:{color:b}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(cd,{size:10,style:{color:b}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",v.toFixed(2),"/mo"]}),x&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(rce,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"text-right flex-shrink-0",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",w.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",g?.toFixed(0)||"0"]})]})]}),g&&g>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:b}})}),D&&!g&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(kt.div,{...h(),layout:!C,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:R=>{r&&r(R),c.current=R},onClick:N,style:{background:T,borderColor:I,boxShadow:C?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:C?50:1,scale:C?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:P})},pm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},K1e=12,W1e=(t,e,n)=>Math.min(Math.max(t,e),n),Y1e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f})=>{const h=!!t.isPiggybank,g=t.piggybankConfig?.color||"#3B82F6",v=h?`linear-gradient(135deg, ${pm(g,.18)} 0%, ${pm(g,.08)} 100%)`:void 0,b=h?pm(g,.5):void 0,[x,w]=A.useState(!1),_=vO(L=>{hY(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:zc.Touch}),T=i.filter(L=>L.envelopeId===t.id&&L.month===a),I=T.filter(L=>L.type==="Expense"),O=T.filter(L=>L.type==="Income"),D=I.reduce((L,B)=>L+(B.amount||0),0),N=O.reduce((L,B)=>L+(B.amount||0),0),C=N>0?Math.max(0,D/N*100):0,P=L=>{if(x||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&w(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(w(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&x){const L=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(L)}},[c,x]);const R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:m.jsx(Hh,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[h&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:pm(g,.4),backgroundColor:pm(g,.15),color:g},children:m.jsx(ef,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"text-red-500":C>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"bg-red-500":C>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-C,2)}%`}})})})]})]}),j=c===t.id;return m.jsx(kt.div,{..._(),layout:!j,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:P,style:{boxShadow:j?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:v,borderColor:b,cursor:j?"grabbing":"pointer",zIndex:j?50:1,scale:j?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${h?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:R})},EB=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1})=>{if(e.length===0&&t.id==="uncategorized")return null;const[u,f]=A.useState(e),h=A.useRef(e),[g,v]=A.useState(!1),[b,x]=A.useState(null),w=A.useRef(!1),_=A.useRef(null),T=A.useRef({}),I=A.useRef({}),O=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{g||(f(e),h.current=e)},[e,g]);const D=A.useCallback((C,P)=>{const R=I.current[P];if(R){w.current=!0;const j=C.nativeEvent||C;R.dragStart(j)}},[]),N=A.useCallback(C=>P=>{P?T.current[C]=P:delete T.current[C]},[]);return A.useEffect(()=>{const C=()=>{Object.values(I.current).forEach(j=>j?.destroy()),I.current={}};if(!u.length)return;const P=()=>{u.forEach(j=>{const L=T.current[j.id];if(!L||!_.current)return;const B=new dY(_.current,{target:L,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});B.on("dragStart",W=>{if(!w.current){W.stop();return}const Z=W.inputEvent.target;if(Z.closest(".js-budget-target")||Z.tagName==="INPUT"){W.stop();return}const G=h.current.findIndex(ee=>ee.id===j.id),Y=W.target,Q=Y.getBoundingClientRect();x(j.id),O.current={activeId:j.id,startIndex:G,currentIndex:G,itemHeight:Q.height+K1e},Y.style.transition="none",Y.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",Y.style.zIndex="20",v(!0)});let z=null;B.on("drag",W=>{const Z=W.target;z!==null&&cancelAnimationFrame(z),z=requestAnimationFrame(()=>{const G=O.current;if(G.activeId!==j.id)return;const Y=W.beforeTranslate[1];Z.style.transform=`translateY(${Y}px)`,Z.style.transition="none";const{itemHeight:Q,startIndex:ee}=G,te=Math.round(Y/Q),U=W1e(ee+te,0,h.current.length-1);U!==G.currentIndex&&(G.currentIndex=U,h.current.forEach((X,ne)=>{if(X.id===j.id)return;const K=T.current[X.id];if(!K)return;let ue=0;ee<U&&ne>ee&&ne<=U?ue=-Q:ee>U&&ne>=U&&ne<ee&&(ue=Q),K.style.transform=ue?`translateY(${ue}px)`:"",K.style.transition="transform 0.2s ease"})),z=null})}),B.on("dragEnd",W=>{z!==null&&(cancelAnimationFrame(z),z=null);const Z=W.target,{startIndex:G,currentIndex:Y}=O.current;if(Z.style.transform="",Z.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Z.style.boxShadow="",h.current.forEach(Q=>{const ee=T.current[Q.id];ee&&(ee.style.transform="",ee.style.transition="")}),G!==Y){const Q=[...h.current],[ee]=Q.splice(G,1);Q.splice(Y,0,ee),h.current=Q,f(Q),o(Q.map(te=>te.id))}setTimeout(()=>{Z.style.zIndex="",x(null),v(!1),w.current=!1},300)}),B.on("click",()=>{const W=window.event?.target;W&&(W.closest(".js-budget-target")||W.tagName==="INPUT")||a(`/envelope/${j.id}`)}),I.current[j.id]=B})},R=window.setTimeout(P,80);return()=>{clearTimeout(R),C()}},[u,a,o]),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(tf,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:_,className:"space-y-2 relative",children:u.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(Cr,{initial:!1,children:u.map(C=>{const R=(n[r]||[]).find(L=>L.envelopeId===C.id)?.budgetedAmount||0,j=s(C.id);return C.isPiggybank?m.jsx(H1e,{piggybank:C,balance:j,onNavigate:L=>a(`/envelope/${L}`),setMoveableRef:N(C.id),isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:D},C.id):m.jsx(Y1e,{env:C,budgetedAmount:R,remainingBalance:j,navigate:a,transactions:i,currentMonth:r,setMoveableRef:N,isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:D},C.id)})})})]})},X1e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=O1e(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:_,fetchCategories:T,envelopes:I,reorderEnvelopes:O,startGuidedTutorial:D}=xt(),N=es(),[C,P]=A.useState(!1),[R,j]=A.useState("add"),[L,B]=A.useState(null),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),Y=A.useRef(null),Q=A.useRef(null),[ee,te]=A.useState(0);A.useEffect(()=>{_.length===0&&T()},[_.length,T]);const U=A.useMemo(()=>{const ge={},de=[];return _.forEach(Se=>ge[Se.id]=[]),[...t,...e].sort((Se,Ce)=>(Se.orderIndex??0)-(Ce.orderIndex??0)).forEach(Se=>{Se.categoryId&&ge[Se.categoryId]?ge[Se.categoryId].push(Se):de.push(Se)}),{groups:ge,uncategorized:de}},[_,t,e]),X=A.useCallback(async ge=>{const de=[...I.map(Oe=>Oe.id)],J=new Set(ge),Se=[];let Ce=0;de.forEach(Oe=>{J.has(Oe)?Se.push(ge[Ce++]):Se.push(Oe)}),await O(Se)},[I,O]);A.useLayoutEffect(()=>{if(b)return;const ge=Q.current;if(!ge)return;const de=()=>te(ge.getBoundingClientRect().height);de();const J=new ResizeObserver(()=>de());return J.observe(ge),window.addEventListener("resize",de),()=>{window.removeEventListener("resize",de),J.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const ge=setTimeout(()=>{if(b)return;if(x){v(!1);const Se=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ce=Object.keys(n).some(Oe=>(n[Oe]||[]).length>0)||Object.keys(a).some(Oe=>(a[Oe]||[]).length>0);G(!!(Se&&Ce));return}const de=(n[i]||[]).length===0&&(a[i]||[]).length===0,J=Object.keys(n).some(Se=>(n[Se]||[]).length>0)||Object.keys(a).some(Se=>(a[Se]||[]).length>0);de?J?(G(!0),v(!1)):(v(!0),G(!1)):(G(!1),v(!1))},500);return()=>clearTimeout(ge)}},[c,o,i,n,a,x]);const ne=()=>{j("add"),B(null),P(!0)},K=ge=>{Y.current&&clearTimeout(Y.current),!z&&(j("edit"),B(ge),P(!0))},ue=ge=>{Y.current&&clearTimeout(Y.current),W(!0),h(ge),setTimeout(()=>W(!1),500)},ie=()=>{P(!1),B(null)},oe=async()=>{G(!1);const{copyPreviousMonthAllocations:ge}=xt.getState();await ge(i)},_e=()=>{w(),v(!1),D()},se=()=>{w(),v(!1),D()};return c?m.jsx(R7,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Q,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(R1e,{currentMonth:i,onMonthChange:ge=>{G(!1),g(ge)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((ge,de)=>ge+de.amount,0),totalAllocated:(a[i]||[]).filter(ge=>t.some(de=>de.id===ge.envelopeId)||e.some(de=>de.id===ge.envelopeId)).reduce((ge,de)=>ge+de.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,ee+16)},children:[b?m.jsx(G1e,{currentMonth:i,onComplete:_e,onSkip:se}):Z?m.jsx(j1e,{currentMonth:i,onCopy:oe}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:ne,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(tf,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(Cr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(ge=>m.jsx(kt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(ZS,{onDelete:()=>ue(ge),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>K(ge),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:ge.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",ge.amount.toFixed(2)]})]})})},ge.id))})})]}),_.map((ge,de)=>m.jsx(EB,{category:ge,envelopes:U.groups[ge.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:N,getEnvelopeBalance:f,onReorderGlobal:X,isFirstCategory:de===0},ge.id)),U.uncategorized.length>0&&m.jsx(EB,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:U.uncategorized,allocations:a,currentMonth:i,transactions:s,navigate:N,getEnvelopeBalance:f,onReorderGlobal:X}),_.length===0&&U.uncategorized.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(Wh,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>N("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(M1e,{isVisible:C,onClose:ie,mode:R,initialIncomeSource:L})]})]})]})},Q1e=[],mY=({selectedCard:t,onCardSelect:e,initialCards:n=Q1e,disabled:r=!1,isUserSelected:i=!1})=>{const a=xt(te=>te.appSettings),s=xt(te=>te.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[_,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,O]=A.useState(null),[D,N]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const C=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const P=te=>{r||(te.id==="add-new"?g(!0):(c(te),e?.(te),f(!1)))},R=()=>{r||f(!u)},j=te=>{r||w(te)},L=async()=>{if(x&&!r){const te=v.filter(U=>U.id!==x.id);if(b(te),C?.id===x.id){const U=te.length>0?te[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:te})}catch(U){$.error("Failed to delete card from app settings:",U),b(v),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},z=async()=>{if(r)return;const te=!["Cash","Venmo"].includes(_.network);if(te&&(_.last4.length!==4||!/^\d{4}$/.test(_.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!_.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:_.name.trim(),network:_.network,last4:te?_.last4:void 0,color:_.color},X=[...v,U];b(X),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:X})}catch(ne){$.error("Failed to save card to app settings:",ne),b(v),c(C),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},W=(te,U)=>{r||(O(U),te.dataTransfer.effectAllowed="move")},Z=(te,U)=>{r||!I||(te.preventDefault(),te.dataTransfer.dropEffect="move",N(U))},G=()=>{N(null)},Y=async(te,U)=>{if(r||!I)return;te.preventDefault(),N(null);const X=v.findIndex(K=>K.id===I.id);if(X===-1||X===U)return;const ne=[...v];ne.splice(X,1),ne.splice(U,0,I),b(ne),O(null);try{await s({paymentSources:ne})}catch(K){$.error("Failed to reorder cards:",K),b(v),alert("Failed to reorder cards. Please try again.")}},Q=()=>{O(null),N(null)},ee=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:C.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:C.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(C.network)?C.network==="Cash"?"$$$":"@":` ${C.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(C.network)?C.network:`(...${C.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(Cr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((te,U)=>{const X=C.id===te.id,ne=te.id==="add-new",K=["Cash","Venmo"].includes(te.network);return m.jsx(kt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(ZS,{onDelete:()=>!ne&&!r&&j(te),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${X?"selected":""} ${ne?"add-new-card":""} ${I?.id===te.id?"dragging":""} ${D===U?"drag-over":""}`,onClick:()=>P(te),draggable:!ne&&!r,onDragStart:ne?void 0:ue=>W(ue,te),onDragOver:ne?void 0:ue=>Z(ue,U),onDragLeave:ne?void 0:G,onDrop:ne?void 0:ue=>Y(ue,U),onDragEnd:ne?void 0:Q,style:{backgroundColor:ne?"#f3f4f6":te.color,color:ne?"#374151":te.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-U,opacity:I?.id===te.id?.5:1,transform:D===U?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:ne?"":te.network}),X&&!ne&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:te.name}),m.jsx("div",{className:"card-number",children:ne?"":K?te.network==="Cash"?"$$$":"@":` ${te.last4}`})]}),ne&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},te.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:_.name,onChange:te=>T({..._,name:te.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:_.network,onChange:te=>T({..._,network:te.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(_.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:_.last4,onChange:te=>T({..._,last4:te.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ee.map(te=>m.jsx("button",{type:"button",onClick:()=>T({..._,color:te}),className:`w-full h-10 rounded-lg border-2 transition-all ${_.color===te?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:te}},te))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:_.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:_.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(_.network)?_.network==="Cash"?"$$$":"@":` ${_.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},vY=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=xt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(N=>N.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const D=[],N=[],C={};return i.forEach(P=>{C[P.id]=[]}),t.forEach(P=>{P.categoryId&&C[P.categoryId]?C[P.categoryId].push(P):N.push(P)}),i.sort((P,R)=>(P.orderIndex??0)-(R.orderIndex??0)).forEach(P=>{C[P.id].length>0&&D.push({name:P.name,id:P.id,envelopes:C[P.id]})}),N.length>0&&D.push({name:"Other",id:"uncategorized",envelopes:N}),D},[t,i]),x=D=>{s(N=>N.includes(D)?N.filter(C=>C!==D):[...N,D])},w=(D,N)=>{h(C=>({...C,[D]:N}))},_=Dc.useRef(a.length);A.useEffect(()=>{if(a.length===1){const D=a[0];h({[D]:e})}else if(a.length>1&&_.current<=1){const D={};a.forEach(N=>{D[N]=0}),h(D)}_.current=a.length},[a.length,a,e]),A.useEffect(()=>{const D=Object.values(f).reduce((N,C)=>N+(C||0),0);v(e-D),n(f)},[f,e,n]),A.useEffect(()=>{const D={...f};Object.keys(D).forEach(N=>{a.includes(N)||delete D[N]}),Object.keys(D).length!==Object.keys(f).length&&h(D)},[a,f]),A.useEffect(()=>{const D=u.current;if(!D)return;const N=()=>{const{scrollTop:C,scrollHeight:P,clientHeight:R}=D;C===0?D.scrollTop=1:C+R>=P&&(D.scrollTop=P-R-1)};return D.addEventListener("touchstart",N,{passive:!0}),()=>D.removeEventListener("touchstart",N)},[]);const T=()=>{s([]),h({})},I=Math.abs(g)<.01&&a.length>0,O=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${O?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":I?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${O?"text-red-600 dark:text-red-400":I?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),O&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(D=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:D.name})}),D.envelopes.map(N=>{const C=a.includes(N.id);return m.jsxs("div",{onClick:()=>x(N.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${C?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${C?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:C&&m.jsx($8,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${C?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:N.name}),C&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:P=>P.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[N.id]||"",onChange:P=>w(N.id,parseFloat(P.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},N.id)})]},D.id))})]})},yY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=xt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,_]=A.useState(new Date().toISOString().split("T")[0]),[T,I]=A.useState(null),[O,D]=A.useState(null),[N,C]=A.useState({}),P=a?[...a].filter(z=>z.isActive!==!1).sort((z,W)=>{const Z=z.orderIndex??0,G=W.orderIndex??0;return Z!==G?Z-G:z.name.localeCompare(W.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const z=a.find(W=>W.id===i.envelopeId);D(z||r),C({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?($.warn("Invalid date in transaction:",i.date),_(new Date().toISOString().split("T")[0])):_(z.toISOString().split("T")[0])}catch(z){$.error("Error parsing transaction date:",z),_(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),_(new Date().toISOString().split("T")[0]),D(r),C({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const W=parseFloat(f);if(isNaN(W)||W<=0){$.log(" Invalid amount:",f);return}const Z=n==="edit"&&Object.keys(N).length>0;$.log(" Saving transaction:",{mode:n,amount:W,note:b,date:w,splitAmounts:N,paymentMethod:T});try{const G=new Date(w),Y=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(Y!==u){const Q=`This transaction date (${Y}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(Q))return}n==="add"?($.log(" Adding income transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Z?await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(N)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,paymentMethod:T||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",B=n==="add"?"text-green-500":"text-red-500";return m.jsx(Cr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(kt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const W=z.target.value.replace(/\D/g,"");if(!W){h("");return}const G=(parseInt(W,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(mY,{selectedCard:T,onCardSelect:I}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(yd,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{$.log("Date changed to:",z.target.value),_(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(vY,{envelopes:P,transactionAmount:parseFloat(f)||0,onSplitChange:C,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(Y8,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},Z1e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=xt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const _=parseFloat(o);isNaN(_)||_<=0||!a||(i(n.id,a,_,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(Cr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(kt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const _=w.target.value.replace(/\D/g,"");if(!_){c("");return}const I=(parseInt(_,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},J1e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,_]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async O=>{if(O.preventDefault(),!(!i.trim()||!c)){_(!0);try{const D={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(D.piggybankConfig.targetAmount=parseFloat(s)),r&&(D.id=r.id,D.currentBalance=r.currentBalance,D.lastUpdated=new Date().toISOString(),D.isActive=r.isActive,D.orderIndex=r.orderIndex,D.userId=r.userId),await n(D),e()}catch(D){$.error("Error saving piggybank:",D),alert("Failed to save piggybank")}finally{_(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(Cr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(kt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(ef,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(f0,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:O=>a(O.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:O=>{const D=O.target.value.replace(/\D/g,"");if(!D){u("");return}const C=(parseInt(D,10)/100).toFixed(2);u(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:O=>{const D=O.target.value.replace(/\D/g,"");if(!D){o("");return}const C=(parseInt(D,10)/100).toFixed(2);o(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:O=>x(O.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(O=>m.jsx("button",{type:"button",onClick:()=>h(O.value),className:`w-full aspect-square rounded-lg transition-all ${f===O.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:O.value},title:O.label},O.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},eSe=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},tSe=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},bY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:eSe(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",tSe(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(ro,{className:"text-green-500",size:20}):m.jsx(CL,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(ro,{className:"text-green-500",size:20}):m.jsx(CL,{className:"text-gray-400",size:20})})]})]})},ak=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),nSe=()=>{const{id:t}=aoe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:_}=xt(),{showToast:T}=fu(),I=es(),O=Os(),[D,N]=A.useState(!1),[C,P]=A.useState(!1),[R,j]=A.useState(!1),[L,B]=A.useState(null),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),[Y,Q]=A.useState(""),ee=A.useRef(null),te=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(J=>J.id===t);A.useEffect(()=>{U?.isPiggybank&&U.id&&_(U.id)},[U?.isPiggybank,U?.id,_]);const X=async J=>{if(U)try{const Se={...U,...J,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Se),T("Piggybank updated successfully","success"),W(!1)}catch(Se){$.error("Failed to update piggybank:",Se),T("Failed to update piggybank","error")}},ne=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(J=>J.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Z&&(Q(ne.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[Z,ne]);const K=J=>{const Se=(v[h]||[]).reduce((Ve,rt)=>Ve+rt.amount,0),Ce=g[h]||[];let ze=Ce.map(Ve=>U&&Ve.envelopeId===U.id&&J!==void 0?{...Ve,budgetedAmount:J}:Ve).filter(Ve=>{const rt=e.find(Be=>Be.id===Ve.envelopeId);return rt?rt.isActive!==!1:!1}).reduce((Ve,rt)=>Ve+rt.budgetedAmount,0);return J!==void 0&&U&&(Ce.some(rt=>rt.envelopeId===U.id)||(ze+=J)),Se-ze},ie=Z?K(parseFloat(Y)||0):K(),oe=async()=>{if(!U||te.current)return;const J=parseFloat(Y);if(isNaN(J)||J<0){T("Please enter a valid positive number","error");return}te.current=!0;try{U.isPiggybank?await x(U.id,J):await b(U.id,J),G(!1)}catch(Se){$.error("Failed to save budget:",Se),T("Failed to update budget","error")}finally{te.current=!1}};if(!U)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});if(U.isPiggybank){const J=n.filter(Se=>Se.envelopeId===U.id);$.log(" Piggybank:",U.name),$.log(" Created at:",U.createdAt),$.log(" Transactions:",J.map(Se=>({date:Se.date,description:Se.description,amount:Se.amount})))}const _e=n.filter(J=>J.envelopeId===U.id).filter(J=>{if(J.description==="Budgeted"||J.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Se=i1(U.createdAt).toISOString().split("T")[0];return i1(J.date).toISOString().split("T")[0]>=Se}return J.month===h||!J.month}).sort((J,Se)=>new Date(Se.date).getTime()-new Date(J.date).getTime()),se=()=>{O.state?.fromGlobalFAB?I("/"):I(-1)},ge=()=>{t&&(a(t),I(-1))},de=J=>{const Se={...J,reconciled:!J.reconciled};o(Se)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(U.isPiggybank)W(!0);else{const J=prompt("Rename envelope:",U.name);J&&J.trim()&&t&&s(t,J)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),m.jsx("button",{onClick:se,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const J=U.isPiggybank?f(U.id):f(U.id,h);return $.log(`Debug: Envelope ${U.name} Balance:`,J),m.jsx("span",{className:`text-xl font-bold ${J<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:ak(J)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Z?m.jsx("form",{onSubmit:J=>{J.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ee,type:"number",step:"0.01",value:Y,onChange:J=>Q(J.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:ak(ne)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ie<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ie===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:ak(ie)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>N(!0),children:[m.jsx(kle,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[m.jsx(Tle,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[m.jsx(lle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:_e.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(Cr,{initial:!1,mode:"popLayout",children:_e.map(J=>m.jsx(kt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(ZS,{disabled:J.isAutomatic,onDelete:()=>{if(!J.id)return;const Se={...J};c(J.id),T("Transaction deleted","neutral",()=>u(Se))},children:m.jsx(bY,{transaction:J,onReconcile:()=>de(J),onEdit:()=>{J.isAutomatic||B(J)}})})},J.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const J=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(J)&&ge()},children:[m.jsx(Y8,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(yY,{isVisible:D||C||!!L,onClose:()=>{N(!1),P(!1),B(null)},mode:D?"add":C?"spend":"edit",currentEnvelope:U,initialTransaction:L}),m.jsx(Z1e,{isVisible:R,onClose:()=>j(!1),sourceEnvelope:U}),m.jsx(J1e,{isOpen:z,onClose:()=>W(!1),onSave:X,existingPiggybank:U})]})},rSe=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[_,T]=w.split("-");return new Date(parseInt(_),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(Cr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(kt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},zi={DEBUG:0,INFO:1,WARN:2,ERROR:3};class iSe{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===zi.ERROR?"error":e.level===zi.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(zi.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(zi.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(zi.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(zi.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const xr=new iSe,aSe=({isOpen:t,onClose:e})=>{const[n,r]=A.useState([]),[i,a]=A.useState({level:void 0,source:"",search:""}),[s,o]=A.useState(!1),[c,u]=A.useState(!0);A.useEffect(()=>xr.subscribe(T=>{r(T),c&&setTimeout(()=>{const I=document.getElementById("log-container");I&&(I.scrollTop=I.scrollHeight)},100)}),[c]);const f=A.useMemo(()=>xr.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=A.useMemo(()=>{const _=new Set;return n.forEach(T=>_.add(T.source)),Array.from(_).sort()},[n]),g=A.useMemo(()=>xr.getStats(),[n]),v=_=>new Date(_).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=_=>{switch(_){case zi.DEBUG:return{icon:F8,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case zi.INFO:return{icon:IL,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case zi.WARN:return{icon:yd,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case zi.ERROR:return{icon:_le,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:IL,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{xr.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{xr.clearLogs()};return t?m.jsx(Cr,{children:m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(kt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800",onClick:_=>_.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(Dle,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>u(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(XC,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(dv,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx(f0,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(H8,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(yle,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(Cr,{children:s&&m.jsxs(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:_=>a(T=>({...T,level:_.target.value?Number(_.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:zi.DEBUG,children:"Debug"}),m.jsx("option",{value:zi.INFO,children:"Info"}),m.jsx("option",{value:zi.WARN,children:"Warning"}),m.jsx("option",{value:zi.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:_=>a(T=>({...T,source:_.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(_=>m.jsx("option",{value:_,children:_},_))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(K8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:_=>a(T=>({...T,search:_.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(_=>{const T=b(_.level),I=T.icon;return m.jsxs(kt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${T.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(I,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${T.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(_.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:_.source}),_.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${_.userId}`,children:m.jsx(Nce,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:_.message}),_.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(_.data,null,2)})})]})]},_.id)})})]})})}):null},sSe=()=>{const t=es(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:_}=xt(),{deleteAccount:T,currentUser:I,logout:O}=nn(),[D,N]=A.useState(null),[C,P]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,j]=A.useState(!1),[L,B]=A.useState(""),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),[Y,Q]=A.useState(null),[ee,te]=A.useState(!1),[U,X]=A.useState(!1),[ne,K]=A.useState(!1),[ue,ie]=A.useState(null),oe=()=>{const Me=window.setTimeout(()=>{K(!0),xr.info("Settings","Log viewer opened via long press")},500);ie(Me)},_e=()=>{ue&&(clearTimeout(ue),ie(null))},se=()=>{K(!0),xr.info("Settings","Log viewer opened via double click")},ge=978307200,de=c?.theme??"system",J=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Me=>{xr.error("Settings","Failed to initialize app settings",{error:Me})})},[f,c]);const Se=(Me,ut)=>{N({type:Me,text:ut}),setTimeout(()=>N(null),3500)},Ce=A.useMemo(()=>{const Me=n.length,ut=r.length,An=v?g[v]||[]:[],gr=Object.values(h).reduce((ln,mt)=>ln+mt.length,0),Fn=An.length,Un=n.reduce((ln,mt)=>{const Gr=mt.isPiggybank?o(mt.id):o(mt.id,v);return ln+(typeof Gr=="number"?Gr:0)},0),mr=0,Dn=r.reduce((ln,mt)=>{let Gr=0;if(typeof mt.date=="string"){const Xi=Date.parse(mt.date);Gr=Number.isNaN(Xi)?0:Xi}else typeof mt.date=="number"&&(Gr=mt.date<2e9?(mt.date+ge)*1e3:mt.date);return Math.max(ln,Gr)},0),at=mr||Dn?new Date(Math.max(mr,Dn)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Me,transactionCount:ut,incomeSourceCount:gr,allocationCount:Fn,totalBalance:Un,lastUpdated:at}},[n,r,h,g,v]),Oe=()=>{try{xr.info("Settings","Creating backup...");const Me={appVersion:"1.9.6",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Un=>({...Un,currentBalance:(()=>{const mr=Un.isPiggybank?o(Un.id):o(Un.id,v);return typeof mr=="number"?mr:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},ut=new Blob([JSON.stringify(Me,null,2)],{type:"application/json"}),An=URL.createObjectURL(ut),gr=document.createElement("a");gr.href=An,gr.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(gr),gr.click(),document.body.removeChild(gr),URL.revokeObjectURL(An);const Fn=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Fn),P(Fn),Q({success:!0,message:"Backup downloaded successfully."})}catch(Me){xr.error("Settings","Backup creation failed",{error:Me}),Q({success:!1,message:"Failed to create backup file.",onRetry:Oe})}},ze=()=>{G(!0),Q(null);try{const Me=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],ut=r.filter(at=>at.description!=="Budgeted"&&at.description!=="Piggybank Contribution"),An=new Set,gr=[];for(const at of ut){let ln,mt,Gr;if(at.splitGroupId&&!An.has(at.splitGroupId)){An.add(at.splitGroupId);const $n=ut.filter(Zn=>Zn.splitGroupId===at.splitGroupId);ln=$n.reduce((Zn,vr)=>Zn+vr.amount,0),mt=$n.map(Zn=>n.find(vr=>vr.id===Zn.envelopeId)?.name||"Unknown").join(", "),Gr=$n.every(Zn=>Zn.reconciled)}else{if(at.splitGroupId&&An.has(at.splitGroupId))continue;ln=at.amount,mt=n.find($n=>$n.id===at.envelopeId)?.name||"Unknown",Gr=at.reconciled}const Xi=(at.merchant||"").replace(/"/g,'""'),Ms=(at.description||"").replace(/"/g,'""');let vt="";at.paymentMethod&&(vt=`${at.paymentMethod.name} (...${at.paymentMethod.last4})`);const dn=vt.replace(/"/g,'""');let rn="Invalid Date";if(at.date){if(typeof at.date=="string")rn=at.date.split("T")[0];else if(typeof at.date=="number"){const $n=at.date<2e9?(at.date+ge)*1e3:at.date;rn=new Date($n).toISOString().split("T")[0]}}gr.push([rn,`"${Xi}"`,`"${dn}"`,`"${Ms}"`,ln.toFixed(2),at.type,`"${mt}"`,Gr?"Yes":"No"].join(","))}const Fn=[Me.join(","),...gr].join(`
`),Un=new Blob([Fn],{type:"text/csv;charset=utf-8;"}),mr=URL.createObjectURL(Un),Dn=document.createElement("a");Dn.href=mr,Dn.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Dn),Dn.click(),document.body.removeChild(Dn),URL.revokeObjectURL(mr),Q({success:!0,message:"Transactions CSV exported successfully."})}catch(Me){xr.error("Settings","CSV export failed",{error:Me}),Q({success:!1,message:"Failed to export CSV. Please try again.",onRetry:ze})}finally{G(!1)}},Ve=()=>{e.current?.click()},rt=Me=>{const ut=Me.target.files?.[0];if(!ut)return;const An=new FileReader;An.onload=async gr=>{try{const Fn=JSON.parse(gr.target?.result),Un=await s(Fn);if(!Un.success){Se("error",Un.message);return}if(Fn.appSettings?.theme)try{await u({theme:Fn.appSettings.theme})}catch(mr){xr.error("Settings","Failed to update imported settings",{error:mr})}Se("success",`Loaded ${Fn.envelopes?.length??0} envelopes, ${Fn.transactions?.length??0} transactions.`)}catch(Fn){xr.error("Settings","Import failed",{error:Fn}),Se("error","Invalid backup file. Please verify the JSON.")}},An.readAsText(ut),Me.target.value=""},Be=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),Se("success","All data has been permanently deleted."),t("/")}catch(Me){xr.error("Settings","Reset failed",{error:Me}),Se("error","Failed to delete all data. Some data may remain.")}},nt=async()=>{if(!L.trim()){Se("error","Please enter your password to confirm account deletion.");return}j(!0);try{await a(),await T(L)?Se("success","Your account has been permanently deleted."):Se("error","Failed to delete account. Please try again.")}catch(Me){xr.error("Settings","Account deletion failed",{error:Me}),Se("error","Failed to delete account. Please try again.")}finally{j(!1),W(!1),B("")}},Bt=async()=>{if(!I){Se("error","You must be logged in to clean up data.");return}te(!0);try{const Me=await yO.cleanupOrphanedData(I.id),ut=Me.orphanedAllocationsDeleted+Me.orphanedTransactionsDeleted;ut>0?Se("success",`Cleaned ${ut} orphaned items: ${Me.orphanedAllocationsDeleted} allocations and ${Me.orphanedTransactionsDeleted} transactions.`):Se("success","No orphaned data found. Your database is already clean!")}catch(Me){xr.error("Settings","Cleanup failed",{error:Me}),Se("error","Failed to clean up orphaned data. Please try again.")}finally{te(!1)}},Bn=()=>{X(!0)},Tn=async()=>{X(!1),await b(v),Se("success","Month data has been reset.")},bt=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),O(),t("/")}catch(Me){xr.error("Settings","Logout failed",{error:Me})}},Ft=I?.displayName?.charAt(0)?.toUpperCase()||I?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[D&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${D.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[D.type==="success"?m.jsx(xw,{size:18}):m.jsx(dv,{size:18}),D.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ft}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:I?.displayName||I?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:I?.email}),m.jsxs("button",{onClick:bt,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Jle,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(XC,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Ce.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Ce.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Ce.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Ce.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[de==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),de==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),de==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:de})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Me=>m.jsx("button",{onClick:async()=>{try{await u({theme:Me.value})}catch(ut){xr.error("Settings","Failed to update theme setting",{error:ut})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${de===Me.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Me.label},Me.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:J})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Me=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:Me.value})}catch(ut){xr.error("Settings","Failed to update font size setting",{error:ut})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${J===Me.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:Me.sizeClass,children:Me.label})},Me.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(zh,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{_(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(zh,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:Oe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(XC,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ve,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(kce,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:ze,disabled:Z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Z?m.jsx(PL,{className:"text-blue-500 animate-spin",size:20}):m.jsx(Ble,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Z?"Preparing CSV":"Export Transactions (CSV)"})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:rt,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:Bn,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Kh,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Bt,disabled:ee,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[ee?m.jsx(PL,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(zh,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ee?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Be,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(dv,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>W(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(yd,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(hs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),Se("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Me=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Me}),Se("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(Kh,{size:20})})]}):m.jsx("button",{onClick:async()=>{const Me=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Me}),Se("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:oe,onMouseUp:_e,onMouseLeave:_e,onDoubleClick:se,title:"Long press or double-click to view logs",children:["Version ","1.9.6"," (PWA)"]})}),Y&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Y.success?m.jsx(xw,{className:"text-green-500",size:24}):m.jsx(yd,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Y.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Y.message}),m.jsxs("div",{className:"flex gap-2",children:[Y.onRetry&&m.jsx("button",{onClick:()=>{Q(null),Y.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>Q(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(rSe,{isVisible:U,onClose:()=>X(!1),onConfirm:Tn,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((Me,ut)=>Me+ut.amount,0),allocationCount:(g[v]||[]).filter(Me=>n.some(ut=>ut.id===Me.envelopeId)).length,totalAllocated:(g[v]||[]).filter(Me=>n.some(ut=>ut.id===Me.envelopeId)).reduce((Me,ut)=>Me+ut.budgetedAmount,0),transactionCount:r.filter(Me=>Me.month===v).length,totalTransactionAmount:r.filter(Me=>Me.month===v).reduce((Me,ut)=>Me+ut.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(yd,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:L,onChange:Me=>B(Me.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{W(!1),B("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:nt,disabled:R||!L.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(aSe,{isOpen:ne,onClose:()=>K(!1)})]})]})},oSe=()=>{const t=es(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=xt(),{showToast:s}=fu(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),_=A.useRef(e),[T,I]=A.useState(!1),[O,D]=A.useState(null),N=A.useRef(!1),C=A.useRef(null),P=A.useRef({}),R=A.useRef({}),j=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),_.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const L=A.useCallback((ee,te)=>{$.log(" Long press triggered for category:",te);const U=R.current[te];if(U){$.log(" Moveable instance found, starting drag"),N.current=!0;const X=ee.nativeEvent||ee;U.dragStart(X)}else $.log(" No moveable instance found for:",te)},[]),B=A.useCallback(ee=>te=>{te?P.current[ee]=te:delete P.current[ee]},[]),z=async ee=>{if(ee.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(te){$.error(te),s("Failed to add category","error")}},W=async ee=>{if(!v.trim())return;const te=e.find(U=>U.id===ee);if(te)try{await r({...te,name:v.trim()}),g(null),s("Category updated","success")}catch(U){$.error(U),s("Failed to update category","error")}},Z=async ee=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ee),s("Category deleted","success")}catch(te){$.error(te),s("Failed to delete category","error")}},G=8,Y=(ee,te,U)=>Math.max(te,Math.min(U,ee)),Q=A.useCallback(async ee=>{if(!ee.length)return;const te=ee.map(U=>U.id);try{await a(te)}catch(U){$.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ee=()=>{Object.values(R.current).forEach(X=>X?.destroy()),R.current={}};if(!x.length)return;const te=()=>{x.forEach(X=>{const ne=P.current[X.id];if(!ne||!C.current)return;const K=new dY(C.current,{target:ne,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ie=>{if($.log(" Moveable dragStart event",{isManualDrag:N.current,categoryId:X.id}),!N.current){$.log(" Stopping drag - not manual"),ie.stop();return}const oe=ie.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),ie.stop();return}$.log(" Drag starting for category:",X.id);const _e=_.current.findIndex(de=>de.id===X.id),se=ie.target,ge=se.getBoundingClientRect();D(X.id),j.current={activeId:X.id,startIndex:_e,currentIndex:_e,itemHeight:ge.height+G},se.style.transition="none",se.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",se.style.zIndex="20",I(!0)});let ue=null;K.on("drag",ie=>{const oe=ie.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const _e=j.current;if(_e.activeId!==X.id)return;const se=ie.beforeTranslate[1];oe.style.transform=`translateY(${se}px)`,oe.style.transition="none";const{itemHeight:ge,startIndex:de}=_e,J=Math.round(se/ge),Se=Y(de+J,0,_.current.length-1);Se!==_e.currentIndex&&(_e.currentIndex=Se,_.current.forEach((Ce,Oe)=>{if(Ce.id===X.id)return;const ze=P.current[Ce.id];if(!ze)return;let Ve=0;de<Se&&Oe>de&&Oe<=Se?Ve=-ge:de>Se&&Oe>=Se&&Oe<de&&(Ve=ge),ze.style.transform=Ve?`translateY(${Ve}px)`:"",ze.style.transition="transform 0.2s ease"})),ue=null})}),K.on("dragEnd",ie=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ie.target,{startIndex:_e,currentIndex:se}=j.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",_.current.forEach(ge=>{const de=P.current[ge.id];de&&(de.style.transform="",de.style.transition="")}),_e!==se){const ge=[..._.current],[de]=ge.splice(_e,1);ge.splice(se,0,de),_.current=ge,w(ge),Q(ge)}setTimeout(()=>{oe.style.zIndex="",D(null),I(!1),N.current=!1},300)}),R.current[X.id]=K})},U=window.setTimeout(te,80);return()=>{clearTimeout(U),ee()}},[x,Q]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(yl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:ee=>f(ee.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(tf,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:C,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ee=>{const te=vO(X=>{L(X,ee.id)},{threshold:500,cancelOnMovement:25,detect:zc.Touch}),U=O===ee.id;return m.jsx("div",{...te(),ref:B(ee.id),style:{cursor:U?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:h===ee.id?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:v,onChange:X=>b(X.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>W(ee.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>g(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:X=>L(X,ee.id),children:m.jsx(Hh,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ee.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{g(ee.id),b(ee.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(ace,{size:18})}),m.jsx("button",{onClick:()=>Z(ee.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(dv,{size:18})})]})]})},ee.id)}),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},lSe=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=xt(),{showToast:a}=fu(),s=es(),[o]=L8();Dc.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||""),[b,x]=A.useState(""),[w,_]=A.useState(""),[T,I]=A.useState("#3B82F6"),[O,D]=A.useState(!1),N=async C=>{if(C.preventDefault(),!c.trim()||O)return;D(!0);const P=xt.getState().envelopes,j=(P.length>0?Math.max(...P.map(W=>W.orderIndex??0)):-1)+1,L=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:j,categoryId:g||void 0};if(f){B.isPiggybank=!0;const W={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(W.targetAmount=parseFloat(b)),B.piggybankConfig=W}t(B).then(W=>{if(W){const Z=f?parseFloat(w||"0"):0;e(W,Z).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(W=>{$.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),D(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(yl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(ef,{size:40}):m.jsx(Ule,{size:40})})}),m.jsxs("form",{onSubmit:N,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsxs("select",{id:"category",value:g,onChange:C=>v(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[m.jsx("option",{value:"",children:"Uncategorized"}),r.map(C=>m.jsx("option",{value:C.id,children:C.name},C.id))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:C=>u(C.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:C=>_(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:C=>x(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>m.jsx("button",{type:"button",onClick:()=>I(C.value),className:`w-full aspect-square rounded-lg transition-all ${T===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||O,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!O?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:O?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const cSe="type.googleapis.com/google.protobuf.Int64Value",uSe="type.googleapis.com/google.protobuf.UInt64Value";function xY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function a1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>a1(e));if(typeof t=="function"||typeof t=="object")return xY(t,e=>a1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case cSe:case uSe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xp(e)):typeof t=="function"||typeof t=="object"?xY(t,e=>xp(e)):t}const bO="functions";const TB={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $i extends ko{constructor(e,n,r){super(`${bO}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,$i.prototype)}}function dSe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function s1(t,e){let n=dSe(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!TB[s])return new $i("internal","internal");n=TB[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=xp(i))}}catch{}return n==="ok"?null:new $i(n,r,i)}class fSe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,fa(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const EP="us-central1",hSe=/^data: (.*?)(?:\n|$)/;function pSe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new $i("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class gSe{constructor(e,n,r,i,a=EP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new fSe(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=EP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function mSe(t,e,n){const r=au(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(CN(t.emulatorOrigin+"/backends"),k$("Functions",!0))}function vSe(t,e,n){const r=i=>bSe(t,e,i,{});return r.stream=(i,a)=>wSe(t,e,i,a),r}function wY(t){return t.emulatorOrigin&&au(t.emulatorOrigin)?"include":void 0}async function ySe(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:wY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function SY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function bSe(t,e,n,r){const i=t._url(e);return xSe(t,i,n,r)}async function xSe(t,e,n,r){n=a1(n);const i={data:n},a=await SY(t,r),s=r.timeout||7e4,o=pSe(s),c=await Promise.race([ySe(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new $i("cancelled","Firebase Functions instance was deleted.");const u=s1(c.status,c.json);if(u)throw u;if(!c.json)throw new $i("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new $i("internal","Response is missing data field.");return{data:xp(f)}}function wSe(t,e,n,r){const i=t._url(e);return SSe(t,i,n,r||{})}async function SSe(t,e,n,r){n=a1(n);const i={data:n},a=await SY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:wY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new $i("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=s1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new $i("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=_Se(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function _Se(t,e,n,r){const i=(s,o)=>{const c=s.match(hSe);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(xp(f.result));return}if("message"in f){o.enqueue(xp(f.message));return}if("error"in f){const h=s1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof $i){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new $i("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new $i("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof $i?u:s1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const AB="@firebase/functions",kB="0.13.1";const ESe="auth-internal",TSe="app-check-internal",ASe="messaging-internal";function kSe(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(ESe),s=n.getProvider(ASe),o=n.getProvider(TSe);return new gSe(i,a,s,o,r)};gl(new wo(bO,e,"PUBLIC").setMultipleInstances(!0)),Ss(AB,kB,t),Ss(AB,kB,"esm2020")}function CSe(t=PN(),e=EP){const r=Np(Vt(t),bO).getImmediate({identifier:e}),i=Ene("functions");return i&&ISe(r,...i),r}function ISe(t,e,n){mSe(Vt(t),e,n)}function PSe(t,e,n){return vSe(Vt(t),e)}kSe();function _Y(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),_=b.split(/\s+/);for(const T of _)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const O=Math.min(I.length,T.length)/Math.max(I.length,T.length);O>=.6&&(!f||O>f.score)&&(f={envelope:v,score:O})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function NSe(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=v8().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=CSe(),u=(await PSe(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),_Y(t,e)}}function DSe(t,e){return $.log(" Siri: Parsing locally with regex:",t),_Y(t,e)}function OSe(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function TP(t,e){const n=OSe(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),DSe(n,e)):($.log(" Siri: Online  attempting AI parsing"),NSe(n,e))}function RSe(){const[t,e]=L8(),{envelopes:n}=xt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),TP(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,TP]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const EY=({onClose:t,onSaved:e})=>{const n=es(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=xt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=RSe(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),_e=sessionStorage.getItem("siriQuery");if(oe&&_e)try{const se=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",se),se.amount!==null&&v(se.amount.toFixed(2)),se.merchant&&x(se.merchant),se.description&&_(se.description),se.type&&R(se.type==="Income"?"income":"expense"),se.envelopeId&&Y(se.envelopeId),se.paymentMethodName&&s?.paymentSources?.length){const ge=se.paymentMethodName.toLowerCase(),de=s.paymentSources.find(J=>{const Se=J.name.toLowerCase();return Se===ge||Se.includes(ge)||ge.includes(Se)});de&&(z(de),Z(!1))}I(!0),D(_e),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(se){$.error(" Siri: Failed to parse stored data:",se)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,_]=A.useState(""),[T,I]=A.useState(!1),[O,D]=A.useState(null),[N,C]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[P,R]=A.useState("expense"),[j,L]=A.useState({}),[B,z]=A.useState(null),[W,Z]=A.useState(!1),[G,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&_(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),_e=s.paymentSources.find(se=>{const ge=se.name.toLowerCase();return ge===oe||ge.includes(oe)||oe.includes(ge)});_e&&(z(_e),Z(!1))}I(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const Q=()=>{if(t){t();return}n("/")},ee=oe=>{z(oe),B&&Z(!0)},te=Object.keys(j).length>0,U=Object.values(j).reduce((oe,_e)=>oe+(_e||0),0),X=Math.abs(U-parseFloat(g||"0"))<.01,ne=g&&parseFloat(g)>0&&te&&X,K=async oe=>{if(oe.preventDefault(),!ne)return;const[_e,se,ge]=N.split("-").map(Number),de=new Date(_e,se-1,ge,12,0,0);$.log(" Selected date:",N),$.log(" Parsed date:",de.toISOString());try{const[J,Se]=N.split("-").map(Number),Ce=`${J}-${Se.toString().padStart(2,"0")}`;if(Ce!==a){const Ve=`This transaction date (${Ce}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Ve))return}const Oe=Object.entries(j).filter(([Ve,rt])=>rt>0),ze=Oe.length>1?crypto.randomUUID():void 0;Promise.all(Oe.map(([Ve,rt])=>i({amount:rt,description:w,merchant:b||void 0,date:de.toISOString(),envelopeId:Ve,type:P==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:ze}).catch(Be=>$.error("Failed to create transaction:",Be)))).catch(Ve=>$.error("Failed to create transactions:",Ve)),e&&e(),t?t():n("/")}catch(J){$.error("Error saving transaction:",J),alert("Failed to save transaction: "+(J instanceof Error?J.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,_e)=>{const se=oe.orderIndex??0,ge=_e.orderIndex??0;return se!==ge?se-ge:oe.name.localeCompare(_e.name)}),ie=P==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:Q,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:K,disabled:!ne,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(DL,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||O)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(DL,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||O,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),I(!1),D(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:K,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ie}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const _e=oe.target.value.replace(/\D/g,"");if(!_e){v("");return}const ge=(parseInt(_e,10)/100).toFixed(2);v(ge)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ie} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(mY,{selectedCard:B,onCardSelect:ee,isUserSelected:W}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>_(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,_e]=N.split("-").map(Number);return`${oe}-${_e.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(yd,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:N,onChange:oe=>C(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(vY,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:L,initialSelectedEnvelopeId:G})})]})})]})},MSe=()=>{const t=es(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=xt(),{showToast:h}=fu(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,_]=A.useState("all"),[T,I]=A.useState("All"),[O,D]=A.useState(!1),[N,C]=A.useState("all"),[P,R]=A.useState(!1),[j,L]=A.useState("all"),[B,z]=A.useState(!1),[W,Z]=A.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-1),K.toISOString().split("T")[0]}),[G,Y]=A.useState(()=>new Date().toISOString().split("T")[0]),[Q,ee]=A.useState(null),te=A.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:P,currentMonth:s,transactionMonths:e.map(ie=>({id:ie.id,month:ie.month,date:ie.date,description:ie.description}))});let K=e;return P||(K=e.filter(ie=>ie.month===s||!ie.month),$.log(" After month filter:",{remaining:K.length,currentMonth:s,filteredTransactions:K.map(ie=>({id:ie.id,description:ie.description,month:ie.month,matchesCurrentMonth:ie.month===s}))})),K.map(ie=>{if(!ie)return null;let oe=ie.date;if(typeof ie.date=="number"){const se=(ie.date+978307200)*1e3;oe=new Date(se).toISOString()}else if(!ie.date||typeof ie.date!="string")return null;return{...ie,date:oe}}).filter(Boolean).filter(ie=>{if(ie.description==="Budgeted"||ie.description==="Piggybank Contribution")return!1;if(b){const _e=b.toLowerCase(),se=n.find(J=>J.id===ie.envelopeId)?.name.toLowerCase()||"",ge=ie.amount.toFixed(2);if(!(ie.description.toLowerCase().includes(_e)||se.includes(_e)||ge.includes(_e)))return!1}if(w!=="all"&&ie.envelopeId!==w||T!=="All"&&ie.type!==T||j!=="all"&&(!ie.paymentMethod||ie.paymentMethod.id!==j)||!ie.date||typeof ie.date!="string")return!1;const oe=ie.date.split("T")[0];return!(B&&(oe<W||oe>G)||N!=="all"&&new Date(oe).getMonth()!==parseInt(N)||O&&!ie.reconciled)}).sort((ie,oe)=>new Date(oe.date).getTime()-new Date(ie.date).getTime())},[e,n,b,w,T,j,W,G,O,P,s,B]);$.log(" Final filtered transactions:",{count:te.length,transactions:te.map(K=>({id:K.id,description:K.description,amount:K.amount,date:K.date,month:K.month,type:K.type}))});const U=A.useMemo(()=>{const K=[],ue=new Set;for(const ie of te)if(ie.splitGroupId&&!ue.has(ie.splitGroupId)){ue.add(ie.splitGroupId);const oe=te.filter(ge=>ge.splitGroupId===ie.splitGroupId),_e=oe.reduce((ge,de)=>ge+de.amount,0),se=oe.map(ge=>n.find(de=>de.id===ge.envelopeId)?.name||"Unknown").join(", ");K.push({key:`split-${ie.splitGroupId}`,transaction:ie,totalAmount:_e,envelopeNames:se,splitTransactions:oe,isSplitGroup:!0})}else{if(ie.splitGroupId&&ue.has(ie.splitGroupId))continue;{const oe=n.find(_e=>_e.id===ie.envelopeId)?.name||"Unknown Envelope";K.push({key:ie.id,transaction:ie,totalAmount:ie.amount,envelopeNames:oe,splitTransactions:[ie],isSplitGroup:!1})}}return K},[te,n]),X=Q?n.find(K=>K.id===Q.envelopeId):null,ne=K=>{const ue={...K,reconciled:!K.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(yl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(H8,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const K=!P;R(K),K&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${P?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":P?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(K8,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:K=>x(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(f0,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:j,onChange:K=>L(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:K=>_(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((K,ue)=>K.name.localeCompare(ue.name)).map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(K=>m.jsx("button",{onClick:()=>I(K),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===K?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:K},K))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:N,onChange:K=>C(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(K,ue)=>ue).map(K=>m.jsx("option",{value:K,children:new Date(2022,K).toLocaleString("default",{month:"long"})},K))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!B),className:`w-9 h-5 rounded-full transition-colors relative ${B?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${B?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${B?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:W,onChange:K=>Z(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:K=>Y(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>D(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(Cr,{initial:!1,mode:"popLayout",children:U.map(K=>{const ue=K.transaction;return m.jsx(kt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(ZS,{disabled:ue.isAutomatic,onDelete:()=>{const ie=K.splitTransactions.map(oe=>({...oe}));for(const oe of K.splitTransactions)oe.id&&i(oe.id);h(K.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ie)a(oe)})},children:m.jsx(bY,{transaction:{...ue,amount:K.totalAmount},envelopeName:K.envelopeNames,onReconcile:()=>{for(const ie of K.splitTransactions)ne(ie)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ee(ue):alert("Cannot edit: Envelope deleted.")}})})},K.key)})})})}),m.jsx(yY,{isVisible:!!Q&&!!X,onClose:()=>ee(null),mode:"edit",currentEnvelope:X||{},initialTransaction:Q,envelopes:n})]})};function TY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=TY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=TY(t))&&(r&&(r+=" "),r+=e);return r}var jSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function xO(t){if(typeof t!="string")return!1;var e=jSe;return e.includes(t)}var zSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],LSe=new Set(zSe);function AY(t){return typeof t!="string"?!1:LSe.has(t)}function kY(t){return typeof t=="string"&&t.startsWith("data-")}function Ps(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(AY(n)||kY(n))&&(e[n]=t[n]);return e}function Fv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ps(e)}return typeof t=="object"&&!Array.isArray(t)?Ps(t):null}function xa(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(AY(n)||kY(n)||xO(n))&&(e[n]=t[n]);return e}var VSe=["children","width","height","viewBox","className","style","title","desc"];function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AP.apply(null,arguments)}function BSe(t,e){if(t==null)return{};var n,r,i=FSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function FSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CY=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=BSe(t,VSe),h=a||{width:r,height:i,x:0,y:0},g=Wt("recharts-surface",s);return A.createElement("svg",AP({},xa(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),USe=["children","className"];function kP(){return kP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kP.apply(null,arguments)}function $Se(t,e){if(t==null)return{};var n,r,i=qSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gi=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=$Se(t,USe),a=Wt("recharts-layer",r);return A.createElement("g",kP({className:a},xa(i),{ref:e}),n)}),GSe=A.createContext(null);function cn(t){return function(){return t}}const IY=Math.cos,o1=Math.sin,Rs=Math.sqrt,l1=Math.PI,JS=2*l1,CP=Math.PI,IP=2*CP,Zu=1e-6,HSe=IP-Zu;function PY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function KSe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return PY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class WSe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PY:KSe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Zu)if(!(Math.abs(h*c-u*f)>Zu)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,_=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((CP-Math.acos((x+g-w)/(2*_*T)))/2),O=I/T,D=I/_;Math.abs(O-1)>Zu&&this._append`L${e+O*f},${n+O*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+D*c},${this._y1=n+D*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Zu||Math.abs(this._y1-f)>Zu)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%IP+IP),g>HSe?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>Zu&&this._append`A${r},${r},0,${+(g>=CP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new WSe(e)}function SO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function NY(t){this._context=t}NY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function e_(t){return new NY(t)}function DY(t){return t[0]}function OY(t){return t[1]}function RY(t,e){var n=cn(!0),r=null,i=e_,a=null,s=wO(o);t=typeof t=="function"?t:t===void 0?DY:cn(t),e=typeof e=="function"?e:e===void 0?OY:cn(e);function o(c){var u,f=(c=SO(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:cn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:cn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:cn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function px(t,e,n){var r=null,i=cn(!0),a=null,s=e_,o=null,c=wO(u);t=typeof t=="function"?t:t===void 0?DY:cn(+t),e=typeof e=="function"?e:cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?OY:cn(+n);function u(h){var g,v,b,x=(h=SO(h)).length,w,_=!1,T,I=new Array(x),O=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===_)if(_=!_)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(I[b],O[b]);o.lineEnd(),o.areaEnd()}_&&(I[g]=+t(w,g,h),O[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):O[g]))}if(T)return o=null,T+""||null}function f(){return RY().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:cn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:cn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:cn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:cn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:cn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:cn(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:cn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class MY{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function YSe(t){return new MY(t,!0)}function XSe(t){return new MY(t,!1)}const _O={draw(t,e){const n=Rs(e/l1);t.moveTo(n,0),t.arc(0,0,n,0,JS)}},QSe={draw(t,e){const n=Rs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},jY=Rs(1/3),ZSe=jY*2,JSe={draw(t,e){const n=Rs(e/ZSe),r=n*jY;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},e_e={draw(t,e){const n=Rs(e),r=-n/2;t.rect(r,r,n,n)}},t_e=.8908130915292852,zY=o1(l1/10)/o1(7*l1/10),n_e=o1(JS/10)*zY,r_e=-IY(JS/10)*zY,i_e={draw(t,e){const n=Rs(e*t_e),r=n_e*n,i=r_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=JS*a/5,o=IY(s),c=o1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},sk=Rs(3),a_e={draw(t,e){const n=-Rs(e/(sk*3));t.moveTo(0,n*2),t.lineTo(-sk*n,-n),t.lineTo(sk*n,-n),t.closePath()}},za=-.5,La=Rs(3)/2,PP=1/Rs(12),s_e=(PP/2+1)*3,o_e={draw(t,e){const n=Rs(e/s_e),r=n/2,i=n*PP,a=r,s=n*PP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(za*r-La*i,La*r+za*i),t.lineTo(za*a-La*s,La*a+za*s),t.lineTo(za*o-La*c,La*o+za*c),t.lineTo(za*r+La*i,za*i-La*r),t.lineTo(za*a+La*s,za*s-La*a),t.lineTo(za*o+La*c,za*c-La*o),t.closePath()}};function l_e(t,e){let n=null,r=wO(i);t=typeof t=="function"?t:cn(t||_O),e=typeof e=="function"?e:cn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:cn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:cn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function c1(){}function u1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function LY(t){this._context=t}LY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function c_e(t){return new LY(t)}function VY(t){this._context=t}VY.prototype={areaStart:c1,areaEnd:c1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:u1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u_e(t){return new VY(t)}function BY(t){this._context=t}BY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:u1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function d_e(t){return new BY(t)}function FY(t){this._context=t}FY.prototype={areaStart:c1,areaEnd:c1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function f_e(t){return new FY(t)}function CB(t){return t<0?-1:1}function IB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(CB(a)+CB(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function PB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ok(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function d1(t){this._context=t}d1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ok(this,this._t0,PB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ok(this,PB(this,n=IB(this,t,e)),n);break;default:ok(this,this._t0,n=IB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function UY(t){this._context=new $Y(t)}(UY.prototype=Object.create(d1.prototype)).point=function(t,e){d1.prototype.point.call(this,e,t)};function $Y(t){this._context=t}$Y.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function h_e(t){return new d1(t)}function p_e(t){return new UY(t)}function qY(t){this._context=t}qY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=NB(t),i=NB(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function NB(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function g_e(t){return new qY(t)}function t_(t,e){this._context=t,this._t=e}t_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function m_e(t){return new t_(t,.5)}function v_e(t){return new t_(t,0)}function y_e(t){return new t_(t,1)}function $d(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function NP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function b_e(t,e){return t[e]}function x_e(t){const e=[];return e.key=t,e}function w_e(){var t=cn([]),e=NP,n=$d,r=b_e;function i(a){var s=Array.from(t.apply(this,arguments),x_e),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=SO(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:cn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:cn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?NP:typeof a=="function"?a:cn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??$d,i):n},i}function S_e(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}$d(t,e)}}function __e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}$d(t,e)}}function E_e(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,_=x[r-1][1]||0;v+=w-_}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,$d(t,e)}}var lk={},ck={},DB;function T_e(){return DB||(DB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(ck)),ck}var uk={},OB;function GY(){return OB||(OB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(uk)),uk}var dk={},RB;function EO(){return RB||(RB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(dk)),dk}var fk={},hk={},MB;function A_e(){return MB||(MB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(hk)),hk}var jB;function TO(){return jB||(jB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A_e(),n=EO();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(fk)),fk}var zB;function AO(){return zB||(zB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T_e(),n=GY(),r=EO(),i=TO();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(lk)),lk}var pk,LB;function k_e(){return LB||(LB=1,pk=AO().get),pk}var C_e=k_e();const qd=Dl(C_e);var I_e=4;function Lc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I_e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function jn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Lc(o)+a:i+a},"")}var Fr=t=>t===0?0:t>0?1:-1,wa=t=>typeof t=="number"&&t!=+t,Tl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ke=t=>(typeof t=="number"||t instanceof Number)&&!wa(t),Ya=t=>Ke(t)||typeof t=="string",P_e=0,Uv=t=>{var e=++P_e;return"".concat(t||"").concat(e)},hi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ke(e)&&typeof e!="string")return r;var a;if(Tl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return wa(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},HY=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function wr(t,e,n){return Ke(t)&&Ke(e)?Lc(t+n*(e-t)):e}function N_e(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):qd(r,e))===n)}var $r=t=>t===null||typeof t>"u",F0=t=>$r(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function D_e(t){return t!=null}function U0(){}var O_e=["type","size","sizeType"];function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DP.apply(null,arguments)}function VB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(n),!0).forEach(function(r){R_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R_e(t,e,n){return(e=M_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M_e(t){var e=j_e(t,"string");return typeof e=="symbol"?e:e+""}function j_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z_e(t,e){if(t==null)return{};var n,r,i=L_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KY={symbolCircle:_O,symbolCross:QSe,symbolDiamond:JSe,symbolSquare:e_e,symbolStar:i_e,symbolTriangle:a_e,symbolWye:o_e},V_e=Math.PI/180,B_e=t=>{var e="symbol".concat(F0(t));return KY[e]||_O},F_e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*V_e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},U_e=(t,e)=>{KY["symbol".concat(F0(t))]=e},WY=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=z_e(t,O_e),a=BB(BB({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=B_e(s),v=l_e().type(g).size(F_e(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=xa(a);return Ke(u)&&Ke(f)&&Ke(n)?A.createElement("path",DP({},h,{className:Wt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};WY.registerSymbol=U_e;var YY=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,$_e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{xO(i)&&(r[i]=(a=>n[i](n,a)))}),r},q_e=(t,e,n)=>r=>(t(e,n,r),null),n_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];xO(i)&&typeof a=="function"&&(r||(r={}),r[i]=q_e(a,e,n))}),r};function FB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(n),!0).forEach(function(r){H_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H_e(t,e,n){return(e=K_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K_e(t){var e=W_e(t,"string");return typeof e=="symbol"?e:e+""}function W_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ri(t,e){var n=G_e({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var gk={},mk={},UB;function Y_e(){return UB||(UB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(mk)),mk}var vk={},$B;function XY(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(vk)),vk}var yk={},bk={},xk={},qB;function X_e(){return qB||(qB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(xk)),xk}var GB;function kO(){return GB||(GB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X_e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(bk)),bk}var wk={},HB;function Q_e(){return HB||(HB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(wk)),wk}var KB;function Z_e(){return KB||(KB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kO(),n=Q_e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(yk)),yk}var Sk={},_k={},WB;function J_e(){return WB||(WB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AO();function n(r){return function(i){return e.get(i,r)}}t.property=n})(_k)),_k}var Ek={},Tk={},Ak={},kk={},YB;function QY(){return YB||(YB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(kk)),kk}var Ck={},XB;function ZY(){return XB||(XB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Ck)),Ck}var Ik={},QB;function JY(){return QB||(QB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Ik)),Ik}var ZB;function eEe(){return ZB||(ZB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QY(),n=ZY(),r=JY();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,_,T,I){const O=g(b,x,w,_,T,I);return O!==void 0?!!O:a(b,x,v,I)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let _=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let O=!1;if(g(I,w,x,f,h,v)&&(O=!0),O){b.add(T),_=!0;break}}if(!_)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Ak)),Ak}var JB;function eX(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eEe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Tk)),Tk}var Pk={},Nk={},Dk={},e6;function tEe(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Dk)),Dk}var Ok={},t6;function tX(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Ok)),Ok}var Rk={},n6;function nX(){return n6||(n6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",_="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",O="[object BigUint64Array]",D="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",P="[object BigInt64Array]",R="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=N,t.int32ArrayTag=C,t.int8ArrayTag=D,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=_})(Rk)),Rk}var Mk={},r6;function nEe(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Mk)),Mk}var i6;function rX(){return i6||(i6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tEe(),n=tX(),r=nX(),i=ZY(),a=nEe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let _=0;_<f.length;_++)w[_]=o(f[_],_,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[_,T]of f)w.set(_,o(T,_,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const _ of f)w.add(o(_,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let _=0;_<f.length;_++)w[_]=o(f[_],_,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const _=x[w],T=Object.getOwnPropertyDescriptor(f,_);(T==null||T.writable)&&(f[_]=o(h[_],_,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Nk)),Nk}var a6;function rEe(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rX();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Pk)),Pk}var s6;function iEe(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eX(),n=rEe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Ek)),Ek}var jk={},zk={},Lk={},o6;function aEe(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rX(),n=nX();function r(i,a){return e.cloneDeepWith(i,(s,o,c,u)=>{const f=a?.(s,o,c,u);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(Lk)),Lk}var l6;function sEe(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aEe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(zk)),zk}var Vk={},Bk={},c6;function iX(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Bk)),Bk}var Fk={},u6;function oEe(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tX();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Fk)),Fk}var d6;function lEe(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GY(),n=iX(),r=oEe(),i=TO();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(Vk)),Vk}var f6;function cEe(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eX(),n=EO(),r=sEe(),i=AO(),a=lEe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(jk)),jk}var h6;function uEe(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XY(),n=J_e(),r=iEe(),i=cEe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(Sk)),Sk}var p6;function dEe(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Y_e(),n=XY(),r=Z_e(),i=uEe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(gk)),gk}var Uk,g6;function fEe(){return g6||(g6=1,Uk=dEe().uniqBy),Uk}var hEe=fEe();const m6=Dl(hEe);function pEe(t,e,n){return e===!0?m6(t,n):typeof e=="function"?m6(t,e):t}var $k={exports:{}},qk={},Gk={exports:{}},Hk={};var v6;function gEe(){if(v6)return Hk;v6=1;var t=Ip();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Hk.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Hk}var y6;function mEe(){return y6||(y6=1,Gk.exports=gEe()),Gk.exports}var b6;function vEe(){if(b6)return qk;b6=1;var t=Ip(),e=mEe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return qk.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function _(N){if(!T){if(T=!0,I=N,N=g(N),v!==void 0&&x.hasValue){var C=x.value;if(v(C,N))return O=C}return O=N}if(C=O,r(I,N))return C;var P=g(N);return v!==void 0&&v(C,P)?(I=N,C):(I=N,O=P)}var T=!1,I,O,D=h===void 0?null:h;return[function(){return _(f())},D===null?void 0:function(){return _(D())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},qk}var x6;function yEe(){return x6||(x6=1,$k.exports=vEe()),$k.exports}var bEe=yEe(),CO=A.createContext(null),xEe=t=>t,vn=()=>{var t=A.useContext(CO);return t?t.store.dispatch:xEe},aw=()=>{},wEe=()=>aw,SEe=(t,e)=>t===e;function qe(t){var e=A.useContext(CO);return bEe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:wEe,e?e.store.getState:aw,e?e.store.getState:aw,e?t:aw,SEe)}function _Ee(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function EEe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function TEe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var w6=t=>Array.isArray(t)?t:[t];function AEe(t){const e=Array.isArray(t[0])?t[0]:t;return TEe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function kEe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var CEe=class{constructor(t){this.value=t}deref(){return this.value}},IEe=typeof WeakRef<"u"?WeakRef:CEe,PEe=0,S6=1;function gx(){return{s:PEe,v:void 0,o:null,p:null}}function aX(t,e={}){let n=gx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=gx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=gx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===S6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new IEe(f):f}return u.s=S6,u.v=f,f}return s.clearCache=()=>{n=gx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function NEe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),_Ee(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=aX,argsMemoizeOptions:b=[]}=f,x=w6(g),w=w6(b),_=AEe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=v(function(){s++;const D=kEe(_,arguments);return o=T.apply(null,D),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:_,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var ye=NEe(aX),DEe=Object.assign((t,e=ye)=>{EEe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>DEe}),Kk={},Wk={},Yk={},_6;function OEe(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(Yk)),Yk}var Xk={},Qk={},E6;function sX(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Qk)),Qk}var T6;function REe(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(Xk)),Xk}var A6;function MEe(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OEe(),n=REe(),r=TO();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(Wk)),Wk}var Zk={},k6;function jEe(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(Zk)),Zk}var Jk={},C6;function oX(){return C6||(C6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iX(),n=kO(),r=QY(),i=JY();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(Jk)),Jk}var I6;function zEe(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MEe(),n=jEe(),r=oX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(Kk)),Kk}var eC,P6;function LEe(){return P6||(P6=1,eC=zEe().sortBy),eC}var VEe=LEe();const r_=Dl(VEe);var lX=t=>t.legend.settings,BEe=t=>t.legend.size,FEe=t=>t.legend.payload;ye([FEe,lX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?r_(r,n):r});var mx=1;function UEe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>mx||Math.abs(s.left-e.left)>mx||Math.abs(s.top-e.top)>mx||Math.abs(s.width-e.width)>mx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $Ee=typeof Symbol=="function"&&Symbol.observable||"@@observable",N6=$Ee,tC=()=>Math.random().toString(36).substring(7).split("").join("."),qEe={INIT:`@@redux/INIT${tC()}`,REPLACE:`@@redux/REPLACE${tC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tC()}`},f1=qEe;function IO(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function cX(t,e,n){if(typeof t!="function")throw new Error(Zr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zr(1));return n(cX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,_)=>{s.set(_,w)}))}function f(){if(c)throw new Error(Zr(3));return i}function h(w){if(typeof w!="function")throw new Error(Zr(4));if(c)throw new Error(Zr(5));let _=!0;u();const T=o++;return s.set(T,w),function(){if(_){if(c)throw new Error(Zr(6));_=!1,u(),s.delete(T),a=null}}}function g(w){if(!IO(w))throw new Error(Zr(7));if(typeof w.type>"u")throw new Error(Zr(8));if(typeof w.type!="string")throw new Error(Zr(17));if(c)throw new Error(Zr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error(Zr(10));r=w,g({type:f1.REPLACE})}function b(){const w=h;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Zr(11));function T(){const O=_;O.next&&O.next(f())}return T(),{unsubscribe:w(T)}},[N6](){return this}}}return g({type:f1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[N6]:b}}function GEe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:f1.INIT})>"u")throw new Error(Zr(12));if(typeof n(void 0,{type:f1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zr(13))})}function uX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{GEe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(Zr(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function h1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function HEe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Zr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=h1(...o)(i.dispatch),{...i,dispatch:a}}}function dX(t){return IO(t)&&"type"in t&&typeof t.type=="string"}var fX=Symbol.for("immer-nothing"),D6=Symbol.for("immer-draftable"),ki=Symbol.for("immer-state");function vs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ga=Object,wp=ga.getPrototypeOf,p1="constructor",i_="prototype",OP="configurable",g1="enumerable",sw="writable",$v="value",Al=t=>!!t&&!!t[ki];function Ns(t){return t?hX(t)||s_(t)||!!t[D6]||!!t[p1]?.[D6]||o_(t)||l_(t):!1}var KEe=ga[i_][p1].toString(),O6=new WeakMap;function hX(t){if(!t||!PO(t))return!1;const e=wp(t);if(e===null||e===ga[i_])return!0;const n=ga.hasOwnProperty.call(e,p1)&&e[p1];if(n===Object)return!0;if(!yh(n))return!1;let r=O6.get(n);return r===void 0&&(r=Function.toString.call(n),O6.set(n,r)),r===KEe}function a_(t,e,n=!0){$0(t)===0?(n?Reflect.ownKeys(t):ga.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function $0(t){const e=t[ki];return e?e.type_:s_(t)?1:o_(t)?2:l_(t)?3:0}var R6=(t,e,n=$0(t))=>n===2?t.has(e):ga[i_].hasOwnProperty.call(t,e),RP=(t,e,n=$0(t))=>n===2?t.get(e):t[e],m1=(t,e,n,r=$0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function WEe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var s_=Array.isArray,o_=t=>t instanceof Map,l_=t=>t instanceof Set,PO=t=>typeof t=="object",yh=t=>typeof t=="function",nC=t=>typeof t=="boolean";function YEe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Zo=t=>t.copy_||t.base_,NO=t=>t.modified_?t.copy_:t.base_;function MP(t,e){if(o_(t))return new Map(t);if(l_(t))return new Set(t);if(s_(t))return Array[i_].slice.call(t);const n=hX(t);if(e===!0||e==="class_only"&&!n){const r=ga.getOwnPropertyDescriptors(t);delete r[ki];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[sw]===!1&&(o[sw]=!0,o[OP]=!0),(o.get||o.set)&&(r[s]={[OP]:!0,[sw]:!0,[g1]:o[g1],[$v]:t[s]})}return ga.create(wp(t),r)}else{const r=wp(t);if(r!==null&&n)return{...t};const i=ga.create(r);return ga.assign(i,t)}}function DO(t,e=!1){return c_(t)||Al(t)||!Ns(t)||($0(t)>1&&ga.defineProperties(t,{set:vx,add:vx,clear:vx,delete:vx}),ga.freeze(t),e&&a_(t,(n,r)=>{DO(r,!0)},!1)),t}function XEe(){vs(2)}var vx={[$v]:XEe};function c_(t){return t===null||!PO(t)?!0:ga.isFrozen(t)}var v1="MapSet",jP="Patches",M6="ArrayMethods",pX={};function Gd(t){const e=pX[t];return e||vs(0,t),e}var j6=t=>!!pX[t],qv,gX=()=>qv,QEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:j6(v1)?Gd(v1):void 0,arrayMethodsPlugin_:j6(M6)?Gd(M6):void 0});function z6(t,e){e&&(t.patchPlugin_=Gd(jP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zP(t){LP(t),t.drafts_.forEach(ZEe),t.drafts_=null}function LP(t){t===qv&&(qv=t.parent_)}var L6=t=>qv=QEe(qv,t);function ZEe(t){const e=t[ki];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function V6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[ki].modified_&&(zP(e),vs(4)),Ns(t)&&(t=B6(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[ki].base_,t,e)}else t=B6(e,n);return JEe(e,t,!0),zP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==fX?t:void 0}function B6(t,e){if(c_(e))return e;const n=e[ki];if(!n)return y1(e,t.handledSet_,t);if(!u_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);yX(n,t)}return n.copy_}function JEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&DO(e,n)}function mX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var u_=(t,e)=>t.scope_===e,eTe=[];function vX(t,e,n,r){const i=Zo(t),a=t.type_;if(r!==void 0&&RP(i,r,a)===e){m1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;a_(i,(c,u)=>{if(Al(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??eTe;for(const o of s)m1(i,o,n,a)}function tTe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!u_(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=NO(a);vX(t,a.draft_??a,s,n),yX(a,i)})}function yX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}mX(t)}}function nTe(t,e,n){const{scope_:r}=t;if(Al(n)){const i=n[ki];u_(i,r)&&i.callbacks_.push(function(){ow(t);const s=NO(i);vX(t,n,s,e)})}else Ns(n)&&t.callbacks_.push(function(){const a=Zo(t);t.type_===3?a.has(n)&&y1(n,r.handledSet_,r):RP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&y1(RP(t.copy_,e,t.type_),r.handledSet_,r)})}function y1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Al(t)||e.has(t)||!Ns(t)||c_(t)||(e.add(t),a_(t,(r,i)=>{if(Al(i)){const a=i[ki];if(u_(a,n)){const s=NO(a);m1(t,r,s,t.type_),mX(a)}}else Ns(i)&&y1(i,e,n)})),t}function rTe(t,e){const n=s_(t),r={type_:n?1:0,scope_:e?e.scope_:gX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=b1;n&&(i=[r],a=Gv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var b1={get(t,e){if(e===ki)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Zo(t);if(!R6(i,e,t.type_))return iTe(t,i,e);const a=i[e];if(t.finalized_||!Ns(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&YEe(e))return a;if(a===rC(t.base_,e)){ow(t);const s=t.type_===1?+e:e,o=BP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Zo(t)},ownKeys(t){return Reflect.ownKeys(Zo(t))},set(t,e,n){const r=bX(Zo(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=rC(Zo(t),e),a=i?.[ki];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(WEe(n,i)&&(n!==void 0||R6(t.base_,e,t.type_)))return!0;ow(t),VP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),nTe(t,e,n)),!0},deleteProperty(t,e){return ow(t),rC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),VP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Zo(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[sw]:!0,[OP]:t.type_!==1||e!=="length",[g1]:r[g1],[$v]:n[e]}},defineProperty(){vs(11)},getPrototypeOf(t){return wp(t.base_)},setPrototypeOf(){vs(12)}},Gv={};for(let t in b1){let e=b1[t];Gv[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Gv.deleteProperty=function(t,e){return Gv.set.call(this,t,e,void 0)};Gv.set=function(t,e,n){return b1.set.call(this,t[0],e,n,t[0])};function rC(t,e){const n=t[ki];return(n?Zo(n):t)[e]}function iTe(t,e,n){const r=bX(e,n);return r?$v in r?r[$v]:r.get?.call(t.draft_):void 0}function bX(t,e){if(!(e in t))return;let n=wp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=wp(n)}}function VP(t){t.modified_||(t.modified_=!0,t.parent_&&VP(t.parent_))}function ow(t){t.copy_||(t.assigned_=new Map,t.copy_=MP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(yh(n)&&!yh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}yh(r)||vs(6),i!==void 0&&!yh(i)&&vs(7);let a;if(Ns(n)){const s=L6(this),o=BP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?zP(s):LP(s)}return z6(s,i),V6(a,s)}else if(!n||!PO(n)){if(a=r(n),a===void 0&&(a=n),a===fX&&(a=void 0),this.autoFreeze_&&DO(a,!0),i){const s=[],o=[];Gd(jP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else vs(1,n)},this.produceWithPatches=(n,r)=>{if(yh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},nC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),nC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),nC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ns(e)||vs(8),Al(e)&&(e=As(e));const n=L6(this),r=BP(n,e,void 0);return r[ki].isManual_=!0,LP(n),r}finishDraft(e,n){const r=e&&e[ki];(!r||!r.isManual_)&&vs(9);const{scope_:i}=r;return z6(i,n),V6(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Gd(jP).applyPatches_;return Al(e)?i(e,n):this.produce(e,a=>i(a,n))}};function BP(t,e,n,r){const[i,a]=o_(e)?Gd(v1).proxyMap_(e,n):l_(e)?Gd(v1).proxySet_(e,n):rTe(e,n);return(n?.scope_??gX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?tTe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function As(t){return Al(t)||vs(10,t),xX(t)}function xX(t){if(!Ns(t)||c_(t))return t;const e=t[ki];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=MP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=MP(t,!0);return a_(n,(i,a)=>{m1(n,i,xX(a))},r),e&&(e.finalized_=!1),n}var sTe=new aTe,wX=sTe.produce;function SX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var oTe=SX(),lTe=SX,cTe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?h1:h1.apply(null,arguments)};function Xa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(va(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>dX(r)&&r.type===t,n}var _X=class jm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,jm.prototype)}static get[Symbol.species](){return jm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new jm(...e[0].concat(this)):new jm(...e.concat(this))}};function F6(t){return Ns(t)?wX(t,()=>{}):t}function yx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function uTe(t){return typeof t=="boolean"}var dTe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new _X;return n&&(uTe(n)?s.push(oTe):s.push(lTe(n.extraArgument))),s},EX="RTK_autoBatch",xn=()=>t=>({payload:t,meta:{[EX]:!0}}),U6=t=>e=>{setTimeout(e,t)},TX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:U6(10):t.type==="callback"?t.queueNotification:U6(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[EX],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},fTe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new _X(t);return r&&i.push(TX(typeof r=="object"?r:void 0)),i};function hTe(t){const e=dTe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(IO(n))o=uX(n);else throw new Error(va(1));let c;typeof r=="function"?c=r(e):c=e();let u=h1;i&&(u=cTe({trace:!1,...typeof i=="object"&&i}));const f=HEe(...c),h=fTe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return cX(o,a,v)}function AX(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(va(28));if(o in e)throw new Error(va(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function pTe(t){return typeof t=="function"}function gTe(t,e){let[n,r,i]=AX(e),a;if(pTe(t))a=()=>F6(t());else{const o=F6(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Al(f)){const v=h(f,c);return v===void 0?f:v}else{if(Ns(f))return wX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var mTe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vTe=(t=21)=>{let e="",n=t;for(;n--;)e+=mTe[Math.random()*64|0];return e},yTe=Symbol.for("rtk-slice-createasyncthunk");function bTe(t,e){return`${t}/${e}`}function xTe({creators:t}={}){const e=t?.asyncThunk?.[yTe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(va(11));const s=(typeof r.reducers=="function"?r.reducers(STe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,O){const D=typeof I=="string"?I:I.type;if(!D)throw new Error(va(12));if(D in c.sliceCaseReducersByType)throw new Error(va(13));return c.sliceCaseReducersByType[D]=O,u},addMatcher(I,O){return c.sliceMatchers.push({matcher:I,reducer:O}),u},exposeAction(I,O){return c.actionCreators[I]=O,u},exposeCaseReducer(I,O){return c.sliceCaseReducersByName[I]=O,u}};o.forEach(I=>{const O=s[I],D={reducerName:I,type:bTe(i,I),createNotation:typeof r.reducers=="function"};ETe(O)?ATe(D,O,u,e):_Te(D,O,u)});function f(){const[I={},O=[],D=void 0]=typeof r.extraReducers=="function"?AX(r.extraReducers):[r.extraReducers],N={...I,...c.sliceCaseReducersByType};return gTe(r.initialState,C=>{for(let P in N)C.addCase(P,N[P]);for(let P of c.sliceMatchers)C.addMatcher(P.matcher,P.reducer);for(let P of O)C.addMatcher(P.matcher,P.reducer);D&&C.addDefaultCase(D)})}const h=I=>I,g=new Map,v=new WeakMap;let b;function x(I,O){return b||(b=f()),b(I,O)}function w(){return b||(b=f()),b.getInitialState()}function _(I,O=!1){function D(C){let P=C[I];return typeof P>"u"&&O&&(P=yx(v,D,w)),P}function N(C=h){const P=yx(g,O,()=>new WeakMap);return yx(P,C,()=>{const R={};for(const[j,L]of Object.entries(r.selectors??{}))R[j]=wTe(L,C,()=>yx(v,C,w),O);return R})}return{reducerPath:I,getSelectors:N,get selectors(){return N(D)},selectSlice:D}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,..._(a),injectInto(I,{reducerPath:O,...D}={}){const N=O??a;return I.inject({reducerPath:N,reducer:x},D),{...T,..._(N,!0)}}};return T}}function wTe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Yi=xTe();function STe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function _Te({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!TTe(r))throw new Error(va(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Xa(t,s):Xa(t))}function ETe(t){return t._reducerDefinitionType==="asyncThunk"}function TTe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ATe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(va(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||bx,pending:o||bx,rejected:c||bx,settled:u||bx})}function bx(){}var kTe="task",kX="listener",CX="completed",OO="cancelled",CTe=`task-${OO}`,ITe=`task-${CX}`,FP=`${kX}-${OO}`,PTe=`${kX}-${CX}`,d_=class{constructor(t){this.code=t,this.message=`${kTe} ${OO} (reason: ${t})`}name="TaskAbortError";message},RO=(t,e)=>{if(typeof t!="function")throw new TypeError(va(32))},x1=()=>{},IX=(t,e=x1)=>(t.catch(e),t),PX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ad=t=>{if(t.aborted)throw new d_(t.reason)};function NX(t,e){let n=x1;return new Promise((r,i)=>{const a=()=>i(new d_(t.reason));if(t.aborted){a();return}n=PX(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=x1})}var NTe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof d_?"cancelled":"rejected",error:n}}finally{e?.()}},w1=t=>e=>IX(NX(t,e).then(n=>(Ad(t),n))),DX=t=>{const e=w1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Uh}=Object,$6={},f_="listenerMiddleware",DTe=(t,e)=>{const n=r=>PX(t,()=>r.abort(t.reason));return(r,i)=>{RO(r);const a=new AbortController;n(a);const s=NTe(async()=>{Ad(t),Ad(a.signal);const o=await r({pause:w1(a.signal),delay:DX(a.signal),signal:a.signal});return Ad(a.signal),o},()=>a.abort(ITe));return i?.autoJoin&&e.push(s.catch(x1)),{result:w1(t)(s),cancel(){a.abort(CTe)}}}},OTe=(t,e)=>{const n=async(r,i)=>{Ad(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await NX(e,Promise.race(o));return Ad(e),c}finally{a()}};return(r,i)=>IX(n(r,i))},OX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Xa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(va(21));return RO(a),{predicate:i,type:e,effect:a}},RX=Uh(t=>{const{type:e,predicate:n,effect:r}=OX(t);return{id:vTe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(va(22))}}},{withTypes:()=>RX}),q6=(t,e)=>{const{type:n,effect:r,predicate:i}=OX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},UP=t=>{t.pending.forEach(e=>{e.abort(FP)})},RTe=(t,e)=>()=>{for(const n of e.keys())UP(n);t.clear()},G6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},MX=Uh(Xa(`${f_}/add`),{withTypes:()=>MX}),MTe=Xa(`${f_}/removeAll`),jX=Uh(Xa(`${f_}/remove`),{withTypes:()=>jX}),jTe=(...t)=>{console.error(`${f_}/error`,...t)},q0=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=jTe}=t;RO(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&UP(v)}),c=v=>{const b=q6(e,v)??RX(v);return o(b)};Uh(c,{withTypes:()=>c});const u=v=>{const b=q6(e,v);return b&&(b.unsubscribe(),v.cancelActive&&UP(b)),!!b};Uh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const _=new AbortController,T=OTe(c,_.signal),I=[];try{v.pending.add(_),r(v),await Promise.resolve(v.effect(b,Uh({},x,{getOriginalState:w,condition:(O,D)=>T(O,D).then(Boolean),take:T,delay:DX(_.signal),pause:w1(_.signal),extra:a,signal:_.signal,fork:DTe(_.signal,I),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((O,D,N)=>{O!==_&&(O.abort(FP),N.delete(O))})},cancel:()=>{_.abort(FP),v.pending.delete(_)},throwIfCancelled:()=>{Ad(_.signal)}})))}catch(O){O instanceof d_||G6(s,O,{raisedBy:"effect"})}finally{await Promise.all(I),_.abort(PTe),i(v),v.pending.delete(_)}},h=RTe(e,n);return{middleware:v=>b=>x=>{if(!dX(x))return b(x);if(MX.match(x))return c(x.payload);if(MTe.match(x)){h();return}if(jX.match(x))return u(x.payload);let w=v.getState();const _=()=>{if(w===$6)throw new Error(va(23));return w};let T;try{if(T=b(x),e.size>0){const I=v.getState(),O=Array.from(e.values());for(const D of O){let N=!1;try{N=D.predicate(x,I,w)}catch(C){N=!1,G6(s,C,{raisedBy:"predicate"})}N&&f(D,x,v,_)}}}finally{w=$6}return T},startListening:c,stopListening:u,clearListeners:h}};function va(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zTe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},zX=Yi({name:"chartLayout",initialState:zTe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:LTe,setLayout:VTe,setChartSize:BTe,setScale:FTe}=zX.actions,UTe=zX.reducer;function LX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function sn(t){return Number.isFinite(t)}function To(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function H6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(n),!0).forEach(function(r){$Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Te(t,e,n){return(e=qTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qTe(t){var e=GTe(t,"string");return typeof e=="symbol"?e:e+""}function GTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mn(t,e,n){return $r(t)||$r(e)?n:Ya(e)?qd(t,e,n):typeof e=="function"?e(t):n}var HTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Ke(t[a]))return Nh(Nh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Ke(t[s]))return Nh(Nh({},t),{},{[s]:t[s]+(i||0)})}return t},sf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",VX=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},BX=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Fr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((_,T)=>{var I=r?r.indexOf(_):_;return{coordinate:s(I)+x,value:_,offset:x,index:T}});return w.filter(_=>!wa(_.coordinate))}return c&&u?u.map((_,T)=>({coordinate:s(_)+x,value:_,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((_,T)=>({coordinate:s(_)+x,value:_,offset:x,index:T})):s.domain().map((_,T)=>({coordinate:s(_)+x,value:r?r[_]:_,index:T,offset:x}))},K6=1e-4,KTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-K6,a=Math.max(r[0],r[1])+K6,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},WTe=(t,e)=>{if(!e||e.length!==2||!Ke(e[0])||!Ke(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ke(t[0])||t[0]<n)&&(i[0]=n),(!Ke(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},YTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=wa(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},XTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=wa(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},QTe={sign:YTe,expand:S_e,none:$d,silhouette:__e,wiggle:E_e,positive:XTe},ZTe=(t,e,n)=>{var r,i=(r=QTe[n])!==null&&r!==void 0?r:$d,a=w_e().keys(e).value((o,c)=>Number(mn(o,c,0))).order(NP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=mn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&Ke(h[0])&&Ke(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function JTe(t){return t==null?void 0:String(t)}var W6=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=mn(a,e.dataKey,e.scale.domain()[s]);return $r(o)?null:e.scale(o)-i/2+r},eAe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},tAe=t=>{var e=t.flat(2).filter(Ke);return[Math.min(...e),Math.max(...e)]},nAe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],rAe=(t,e,n)=>{if(t!=null)return nAe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=LX(u,e,n),h=tAe(f);return!sn(h[0])||!sn(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},Y6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=r_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function Q6(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Nh(Nh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function h_(t,e){if(t)return String(t);if(typeof e=="string")return e}var iAe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},aAe=(t,e)=>e==="centric"?t.angle:t.radius,jl=t=>t.layout.width,zl=t=>t.layout.height,sAe=t=>t.layout.scale,FX=t=>t.layout.margin,p_=ye(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),g_=ye(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),UX="data-recharts-item-index",$X="data-recharts-item-id",G0=60;function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(r){oAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oAe(t,e,n){return(e=lAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lAe(t){var e=cAe(t,"string");return typeof e=="symbol"?e:e+""}function cAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uAe=t=>t.brush.height;function dAe(t){var e=g_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:G0;return n+i}return n},0)}function fAe(t){var e=g_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:G0;return n+i}return n},0)}function hAe(t){var e=p_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function pAe(t){var e=p_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Pr=ye([jl,zl,FX,uAe,dAe,fAe,hAe,pAe,lX,BEe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=xx(xx({},h),f),v=g.bottom;g.bottom+=r,g=HTe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return xx(xx({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),gAe=ye(Pr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),MO=ye(jl,zl,(t,e)=>({x:0,y:0,width:t,height:e})),mAe=A.createContext(null),Ci=()=>A.useContext(mAe)!=null,m_=t=>t.brush,v_=ye([m_,Pr,FX],(t,e,n)=>({height:t.height,x:Ke(t.x)?t.x:e.left,y:Ke(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ke(t.width)?t.width:e.width})),iC={},aC={},sC={},J6;function vAe(){return J6||(J6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},_=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;v(),c&&I&&f()};return _.schedule=v,_.cancel=x,_.flush=w,i?.addEventListener("abort",x,{once:!0}),_}t.debounce=e})(sC)),sC}var eF;function yAe(){return eF||(eF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vAe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(aC)),aC}var tF;function bAe(){return tF||(tF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yAe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(iC)),iC}var oC,nF;function xAe(){return nF||(nF=1,oC=bAe().throttle),oC}var wAe=xAe();const SAe=Dl(wAe);var _1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},qX=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=Tl(r)?t:Number(r),c=Tl(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},_Ae={width:0,height:0,overflow:"visible"},EAe={width:0,overflowX:"visible"},TAe={height:0,overflowY:"visible"},AAe={},kAe=t=>{var{width:e,height:n}=t,r=Tl(e),i=Tl(n);return r&&i?_Ae:r?EAe:i?TAe:AAe};function CAe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$P.apply(null,arguments)}function rF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rF(Object(n),!0).forEach(function(r){IAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IAe(t,e,n){return(e=PAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PAe(t){var e=NAe(t,"string");return typeof e=="symbol"?e:e+""}function NAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GX=A.createContext({width:-1,height:-1});function DAe(t){return To(t.width)&&To(t.height)}function HX(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return DAe(i)?A.createElement(GX.Provider,{value:i},e):null}var jO=()=>A.useContext(GX),OAe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[_,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((P,R)=>{T(j=>{var L=Math.round(P),B=Math.round(R);return j.containerWidth===L&&j.containerHeight===B?j:{containerWidth:L,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return U0;var P=B=>{var z,{width:W,height:Z}=B[0].contentRect;I(W,Z),(z=w.current)===null||z===void 0||z.call(w,W,Z)};f>0&&(P=SAe(P,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(P),{width:j,height:L}=x.current.getBoundingClientRect();return I(j,L),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:O,containerHeight:D}=_;_1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:C}=qX(O,D,{width:i,height:a,aspect:n,maxHeight:c});return _1(N!=null&&N>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Wt("recharts-responsive-container",g),style:iF(iF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:kAe({width:i,height:a})},A.createElement(HX,{width:N,height:C},u)))}),y_=A.forwardRef((t,e)=>{var n=jO();if(To(n.width)&&To(n.height))return t.children;var{width:r,height:i}=CAe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=qX(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ke(a)&&Ke(s)?A.createElement(HX,{width:a,height:s},t.children):A.createElement(OAe,$P({},t,{width:r,height:i,ref:e}))});function KX(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var H0=()=>{var t,e=Ci(),n=qe(gAe),r=qe(v_),i=(t=qe(m_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},RAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},WX=()=>{var t;return(t=qe(Pr))!==null&&t!==void 0?t:RAe},YX=()=>qe(jl),XX=()=>qe(zl),Mt=t=>t.layout.layoutType,K0=()=>qe(Mt),MAe=()=>{var t=K0();return t!==void 0},b_=t=>{var e=vn(),n=Ci(),{width:r,height:i}=t,a=jO(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&To(s)&&To(o)&&e(BTe({width:s,height:o}))},[e,n,s,o]),null},QX=Symbol.for("immer-nothing"),aF=Symbol.for("immer-draftable"),Sa=Symbol.for("immer-state");function ys(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Hv=Object.getPrototypeOf;function Sp(t){return!!t&&!!t[Sa]}function Hd(t){return t?ZX(t)||Array.isArray(t)||!!t[aF]||!!t.constructor?.[aF]||W0(t)||w_(t):!1}var jAe=Object.prototype.constructor.toString(),sF=new WeakMap;function ZX(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=sF.get(n);return r===void 0&&(r=Function.toString.call(n),sF.set(n,r)),r===jAe}function E1(t,e,n=!0){x_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function x_(t){const e=t[Sa];return e?e.type_:Array.isArray(t)?1:W0(t)?2:w_(t)?3:0}function qP(t,e){return x_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function JX(t,e,n){const r=x_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function zAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function W0(t){return t instanceof Map}function w_(t){return t instanceof Set}function Ju(t){return t.copy_||t.base_}function GP(t,e){if(W0(t))return new Map(t);if(w_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=ZX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Sa];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Hv(t),r)}else{const r=Hv(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function zO(t,e=!1){return S_(t)||Sp(t)||!Hd(t)||(x_(t)>1&&Object.defineProperties(t,{set:wx,add:wx,clear:wx,delete:wx}),Object.freeze(t),e&&Object.values(t).forEach(n=>zO(n,!0))),t}function LAe(){ys(2)}var wx={value:LAe};function S_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var VAe={};function Kd(t){const e=VAe[t];return e||ys(0,t),e}var Kv;function eQ(){return Kv}function BAe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oF(t,e){e&&(Kd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function HP(t){KP(t),t.drafts_.forEach(FAe),t.drafts_=null}function KP(t){t===Kv&&(Kv=t.parent_)}function lF(t){return Kv=BAe(Kv,t)}function FAe(t){const e=t[Sa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Sa].modified_&&(HP(e),ys(4)),Hd(t)&&(t=T1(e,t),e.parent_||A1(e,t)),e.patches_&&Kd("Patches").generateReplacementPatches_(n[Sa].base_,t,e.patches_,e.inversePatches_)):t=T1(e,n,[]),HP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==QX?t:void 0}function T1(t,e,n){if(S_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Sa];if(!i)return E1(e,(a,s)=>uF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return A1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),E1(s,(c,u)=>uF(t,i,a,c,u,n,o),r),A1(t,a,!1),n&&t.patches_&&Kd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function uF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=S_(i);if(!(o&&!s)){if(Sp(i)){const c=a&&e&&e.type_!==3&&!qP(e.assigned_,r)?a.concat(r):void 0,u=T1(t,i,c);if(JX(n,r,u),Sp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Hd(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;T1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(W0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&A1(t,i)}}}function A1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zO(e,n)}function UAe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:eQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=LO;n&&(i=[r],a=Wv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var LO={get(t,e){if(e===Sa)return t;const n=Ju(t);if(!qP(n,e))return $Ae(t,n,e);const r=n[e];return t.finalized_||!Hd(r)?r:r===lC(t.base_,e)?(cC(t),t.copy_[e]=YP(r,t)):r},has(t,e){return e in Ju(t)},ownKeys(t){return Reflect.ownKeys(Ju(t))},set(t,e,n){const r=tQ(Ju(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=lC(Ju(t),e),a=i?.[Sa];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(zAe(n,i)&&(n!==void 0||qP(t.base_,e)))return!0;cC(t),WP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return lC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,cC(t),WP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ju(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ys(11)},getPrototypeOf(t){return Hv(t.base_)},setPrototypeOf(){ys(12)}},Wv={};E1(LO,(t,e)=>{Wv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Wv.deleteProperty=function(t,e){return Wv.set.call(this,t,e,void 0)};Wv.set=function(t,e,n){return LO.set.call(this,t[0],e,n,t[0])};function lC(t,e){const n=t[Sa];return(n?Ju(n):t)[e]}function $Ae(t,e,n){const r=tQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function tQ(t,e){if(!(e in t))return;let n=Hv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Hv(n)}}function WP(t){t.modified_||(t.modified_=!0,t.parent_&&WP(t.parent_))}function cC(t){t.copy_||(t.copy_=GP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qAe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&ys(6),r!==void 0&&typeof r!="function"&&ys(7);let i;if(Hd(e)){const a=lF(this),s=YP(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?HP(a):KP(a)}return oF(a,r),cF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===QX&&(i=void 0),this.autoFreeze_&&zO(i,!0),r){const a=[],s=[];Kd("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else ys(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Hd(t)||ys(8),Sp(t)&&(t=GAe(t));const e=lF(this),n=YP(t,void 0);return n[Sa].isManual_=!0,KP(e),n}finishDraft(t,e){const n=t&&t[Sa];(!n||!n.isManual_)&&ys(9);const{scope_:r}=n;return oF(r,e),cF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Kd("Patches").applyPatches_;return Sp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function YP(t,e){const n=W0(t)?Kd("MapSet").proxyMap_(t,e):w_(t)?Kd("MapSet").proxySet_(t,e):UAe(t,e);return(e?e.scope_:eQ()).drafts_.push(n),n}function GAe(t){return Sp(t)||ys(10,t),nQ(t)}function nQ(t){if(!Hd(t)||S_(t))return t;const e=t[Sa];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=GP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=GP(t,!0);return E1(n,(i,a)=>{JX(n,i,nQ(a))},r),e&&(e.finalized_=!1),n}var HAe=new qAe;HAe.produce;var KAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},rQ=Yi({name:"legend",initialState:KAe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:xn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:xn()},removeLegendPayload:{reducer(t,e){var n=As(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:xn()}}}),{setLegendSize:R3e,setLegendSettings:M3e,addLegendPayload:iQ,replaceLegendPayload:aQ,removeLegendPayload:sQ}=rQ.actions,WAe=rQ.reducer;function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XP.apply(null,arguments)}function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){YAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YAe(t,e,n){return(e=XAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XAe(t){var e=QAe(t,"string");return typeof e=="symbol"?e:e+""}function QAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZAe(t){return Array.isArray(t)&&Ya(t[0])&&Ya(t[1])?t.join(" ~ "):t}var JAe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,v=()=>{if(a&&a.length){var D={padding:0,margin:0},N=(o?r_(a,o):a).map((C,P)=>{if(C.type==="none")return null;var R=C.formatter||s||ZAe,{value:j,name:L}=C,B=j,z=L;if(R){var W=R(j,L,C,P,a);if(Array.isArray(W))[B,z]=W;else if(W!=null)B=W;else return null}var Z=uC({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:Z},Ya(z)?A.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Ya(z)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},N)}return null},b=uC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=uC({margin:0},i),w=!$r(f),_=w?f:"",T=Wt("recharts-default-tooltip",c),I=Wt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(_=h(f,a));var O=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",XP({className:T,style:b},O),A.createElement("p",{className:I,style:x},A.isValidElement(_)?_:"".concat(_)),v())},gm="recharts-tooltip-wrapper",eke={visibility:"hidden"};function tke(t){var{coordinate:e,translateX:n,translateY:r}=t;return Wt(gm,{["".concat(gm,"-right")]:Ke(n)&&e&&Ke(e.x)&&n>=e.x,["".concat(gm,"-left")]:Ke(n)&&e&&Ke(e.x)&&n<e.x,["".concat(gm,"-bottom")]:Ke(r)&&e&&Ke(e.y)&&r>=e.y,["".concat(gm,"-top")]:Ke(r)&&e&&Ke(e.y)&&r<e.y})}function fF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&Ke(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function nke(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function rke(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=fF({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=fF({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=nke({translateX:f,translateY:h,useTranslate3d:o})):u=eke,{cssProperties:u,cssClasses:tke({translateX:f,translateY:h,coordinate:n})}}function hF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(n),!0).forEach(function(r){QP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QP(t,e,n){return(e=ike(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ike(t){var e=ake(t,"string");return typeof e=="symbol"?e:e+""}function ake(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ske extends A.PureComponent{constructor(){super(...arguments),QP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),QP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:_}=this.props,{cssClasses:T,cssProperties:I}=rke({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),O=_?{}:Sx(Sx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),D=Sx(Sx({},O),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:D,ref:w},a)}}var oQ=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZP.apply(null,arguments)}function pF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pF(Object(n),!0).forEach(function(r){oke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oke(t,e,n){return(e=lke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lke(t){var e=cke(t,"string");return typeof e=="symbol"?e:e+""}function cke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mF={curveBasisClosed:u_e,curveBasisOpen:d_e,curveBasis:c_e,curveBumpX:YSe,curveBumpY:XSe,curveLinearClosed:f_e,curveLinear:e_,curveMonotoneX:h_e,curveMonotoneY:p_e,curveNatural:g_e,curveStep:m_e,curveStepAfter:y_e,curveStepBefore:v_e},k1=t=>sn(t.x)&&sn(t.y),vF=t=>t.base!=null&&k1(t.base)&&k1(t),mm=t=>t.x,vm=t=>t.y,uke=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(F0(t));return(n==="curveMonotone"||n==="curveBump")&&e?mF["".concat(n).concat(e==="vertical"?"Y":"X")]:mF[n]||e_},dke=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=uke(e,i),o=a?n.filter(k1):n,c;if(Array.isArray(r)){var u=n.map((v,b)=>gF(gF({},v),{},{base:r[b]}));i==="vertical"?c=px().y(vm).x1(mm).x0(v=>v.base.x):c=px().x(mm).y1(vm).y0(v=>v.base.y);var f=c.defined(vF).curve(s),h=a?u.filter(vF):u;return f(h)}i==="vertical"&&Ke(r)?c=px().y(vm).x1(mm).x0(r):Ke(r)?c=px().x(mm).y1(vm).y0(r):c=RY().x(mm).y(vm);var g=c.defined(k1).curve(s);return g(o)},VO=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=K0();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?dke(s):r;return A.createElement("path",ZP({},Ps(t),$_e(t),{className:Wt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},fke=["x","y","top","left","width","height","className"];function JP(){return JP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JP.apply(null,arguments)}function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){pke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pke(t,e,n){return(e=gke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gke(t){var e=mke(t,"string");return typeof e=="symbol"?e:e+""}function mke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vke(t,e){if(t==null)return{};var n,r,i=yke(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bke=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),xke=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=vke(t,fke),u=hke({x:e,y:n,top:r,left:i,width:a,height:s},c);return!Ke(e)||!Ke(n)||!Ke(a)||!Ke(s)||!Ke(r)||!Ke(i)?null:A.createElement("path",JP({},xa(u),{className:Wt("recharts-cross",o),d:bke(e,n,a,s,r,i)}))};function wke(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function bF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bF(Object(n),!0).forEach(function(r){Ske(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ske(t,e,n){return(e=_ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ke(t){var e=Eke(t,"string");return typeof e=="symbol"?e:e+""}function Eke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tke=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),lQ=(t,e,n)=>t.map(r=>"".concat(Tke(r)," ").concat(e,"ms ").concat(n)).join(","),Ake=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Yv=(t,e)=>Object.keys(e).reduce((n,r)=>xF(xF({},n),{},{[r]:t(r,e[r])}),{});function wF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(n),!0).forEach(function(r){kke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kke(t,e,n){return(e=Cke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cke(t){var e=Ike(t,"string");return typeof e=="symbol"?e:e+""}function Ike(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C1=(t,e,n)=>t+(e-t)*n,eN=t=>{var{from:e,to:n}=t;return e!==n},cQ=(t,e,n)=>{var r=Yv((i,a)=>{if(eN(a)){var[s,o]=t(a.from,a.to,a.velocity);return Sr(Sr({},a),{},{from:s,velocity:o})}return a},e);return n<1?Yv((i,a)=>eN(a)&&r[i]!=null?Sr(Sr({},a),{},{velocity:C1(a.velocity,r[i].velocity,n),from:C1(a.from,r[i].from,n)}):a,e):cQ(t,r,n-1)};function Pke(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>Sr(Sr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>Yv((g,v)=>v.from,o),u=()=>!Object.values(o).filter(eN).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=cQ(n,o,b),i(Sr(Sr(Sr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function Nke(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:Sr(Sr({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=Yv((x,w)=>C1(...w,n(g)),c);if(a(Sr(Sr(Sr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=Yv((x,w)=>C1(...w,n(1)),c);a(Sr(Sr(Sr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const Dke=(t,e,n,r,i,a)=>{var s=Ake(t,e);return n==null?()=>(i(Sr(Sr({},t),e)),()=>{}):n.isStepper===!0?Pke(t,e,n,s,i,a):Nke(t,e,n,r,s,i,a)};var I1=1e-4,uQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],dQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),SF=(t,e)=>n=>{var r=uQ(t,e);return dQ(r,n)},Oke=(t,e)=>n=>{var r=uQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return dQ(i,n)},Rke=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Mke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Rke(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},jke=(t,e,n,r)=>{var i=SF(t,n),a=SF(e,r),s=Oke(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<I1||b<I1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},_F=function(){return jke(...Mke(...arguments))},zke=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<I1&&Math.abs(h)<I1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},Lke=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _F(t);case"spring":return zke();default:if(t.split("(")[0]==="cubic-bezier")return _F(t)}return typeof t=="function"?t:null};function Vke(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class Bke{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Fke(){return Vke(new Bke)}var Uke=A.createContext(Fke);function $ke(t,e){var n=A.useContext(Uke);return A.useMemo(()=>e??n(t),[t,e,n])}var qke=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),__={isSsr:qke()},Gke={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EF={t:0},dC={t:1};function E_(t){var e=ri(t,Gke),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!__.isSsr:n,h=$ke(e.animationId,e.animationManager),[g,v]=A.useState(f?EF:dC),b=A.useRef(null);return A.useEffect(()=>{f||v(dC)},[f]),A.useEffect(()=>{if(!f||!r)return U0;var x=Dke(EF,dC,Lke(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function T_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Uv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Uv(e),r.current=t),n.current}var Hke=["radius"],Kke=["radius"],TF,AF,kF,CF,IF,PF,NF,DF,OF,RF;function MF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(n),!0).forEach(function(r){Wke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wke(t,e,n){return(e=Yke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yke(t){var e=Xke(t,"string");return typeof e=="symbol"?e:e+""}function Xke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P1.apply(null,arguments)}function zF(t,e){if(t==null)return{};var n,r,i=Qke(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function to(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var LF=(t,e,n,r,i)=>{var a=Lc(n),s=Lc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],v=0,b=4;v<b;v++)g[v]=i[v]>o?o:i[v];h=jn(TF||(TF=to(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=jn(AF||(AF=to(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=jn(kF||(kF=to(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=jn(CF||(CF=to(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=jn(IF||(IF=to(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=jn(PF||(PF=to(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=jn(NF||(NF=to(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=jn(DF||(DF=to(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=jn(OF||(OF=to(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+u*x,e,t+n-u*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-u*x,e+r,t+u*x,e+r,x,x,f,t,e+r-c*x)}else h=jn(RF||(RF=to(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},VF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fQ=t=>{var e=ri(t,VF),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),_=A.useRef(c),T=A.useRef(a),I=A.useRef(s),O=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),D=T_(O,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var N=Wt("recharts-rectangle",f);if(!x){var C=xa(e),{radius:P}=C,R=zF(C,Hke);return A.createElement("path",P1({},R,{x:Lc(a),y:Lc(s),width:Lc(o),height:Lc(c),radius:typeof u=="number"?u:void 0,className:N,d:LF(a,s,o,c,u)}))}var j=w.current,L=_.current,B=T.current,z=I.current,W="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),G=lQ(["strokeDasharray"],g,typeof h=="string"?h:VF.animationEasing);return A.createElement(E_,{animationId:D,key:D,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},Y=>{var Q=wr(j,o,Y),ee=wr(L,c,Y),te=wr(B,a,Y),U=wr(z,s,Y);n.current&&(w.current=Q,_.current=ee,T.current=te,I.current=U);var X;b?Y>0?X={transition:G,strokeDasharray:Z}:X={strokeDasharray:W}:X={strokeDasharray:Z};var ne=xa(e),{radius:K}=ne,ue=zF(ne,Kke);return A.createElement("path",P1({},ue,{radius:typeof u=="number"?u:void 0,className:N,d:LF(te,U,Q,ee,u),ref:n,style:jF(jF({},X),e.style)}))})};function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){Zke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zke(t,e,n){return(e=Jke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jke(t){var e=eCe(t,"string");return typeof e=="symbol"?e:e+""}function eCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N1=Math.PI/180,tCe=t=>t*180/Math.PI,fr=(t,e,n,r)=>({x:t+Math.cos(-N1*r)*n,y:e+Math.sin(-N1*r)*n}),hQ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},nCe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},rCe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=nCe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:tCe(c),angleInRadian:c}},iCe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},aCe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},sCe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=rCe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=iCe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?FF(FF({},e),{},{radius:i,angle:aCe(f,e)}):null};function pQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=fr(e,n,r,i),o=fr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var UF,$F,qF,GF,HF,KF,WF;function tN(){return tN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tN.apply(null,arguments)}function pd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var oCe=(t,e)=>{var n=Fr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},_x=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/N1,h=c?i:i+a*f,g=fr(e,n,u,h),v=fr(e,n,r,h),b=c?i-a*f:i,x=fr(e,n,u*Math.cos(f*N1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},gQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=oCe(a,s),c=a+o,u=fr(e,n,i,a),f=fr(e,n,i,c),h=jn(UF||(UF=pd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=fr(e,n,r,a),v=fr(e,n,r,c);h+=jn($F||($F=pd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=jn(qF||(qF=pd(["L ",","," Z"])),e,n);return h},lCe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Fr(u-c),{circleTangency:h,lineTangency:g,theta:v}=_x({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=_x({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),_=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(_<0)return s?jn(GF||(GF=pd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):gQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=jn(HF||(HF=pd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(_>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:O,theta:D}=_x({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:N,lineTangency:C,theta:P}=_x({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-D-P;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=jn(KF||(KF=pd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,a,a,+(f<0),N.x,N.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),O.x,O.y)}else T+=jn(WF||(WF=pd(["L",",","Z"])),e,n);return T},cCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mQ=t=>{var e=ri(t,cCe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Wt("recharts-sector",h),v=a-i,b=hi(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=lCe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=gQ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",tN({},xa(e),{className:g,d:x}))};function uCe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(YY(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=fr(r,i,a,o),u=fr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return pQ(e)}}var fC={},hC={},pC={},YF;function dCe(){return YF||(YF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(pC)),pC}var XF;function fCe(){return XF||(XF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dCe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(hC)),hC}var QF;function hCe(){return QF||(QF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oX(),n=fCe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(fC)),fC}var gC,ZF;function pCe(){return ZF||(ZF=1,gC=hCe().range),gC}var gCe=pCe();const vQ=Dl(gCe);function Gc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BO(t){let e,n,r;t.length!==2?(e=Gc,n=(o,c)=>Gc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Gc||t===mCe?t:vCe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function vCe(){return 0}function yQ(t){return t===null?NaN:+t}function*yCe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const bCe=BO(Gc),Y0=bCe.right;BO(yQ).center;class JF extends Map{constructor(e,n=SCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(eU(this,e))}has(e){return super.has(eU(this,e))}set(e,n){return super.set(xCe(this,e),n)}delete(e){return super.delete(wCe(this,e))}}function eU({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function wCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function SCe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function _Ce(t=Gc){if(t===Gc)return bQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function bQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ECe=Math.sqrt(50),TCe=Math.sqrt(10),ACe=Math.sqrt(2);function D1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=ECe?10:a>=TCe?5:a>=ACe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?D1(t,e,n*2):[o,c,u]}function nN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?D1(e,t,n):D1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function rN(t,e,n){return e=+e,t=+t,n=+n,D1(t,e,n)[2]}function iN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?rN(e,t,n):rN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function tU(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function nU(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function xQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?bQ:_Ce(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));xQ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(ym(t,n,e),i(t[r],a)>0&&ym(t,n,r);s<o;){for(ym(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?ym(t,n,o):(++o,ym(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function ym(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function kCe(t,e,n){if(t=Float64Array.from(yCe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return nU(t);if(e>=1)return tU(t);var r,i=(r-1)*e,a=Math.floor(i),s=tU(xQ(t,a).subarray(0,a+1)),o=nU(t.subarray(a+1));return s+(o-s)*(i-a)}}function CCe(t,e,n=yQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function ICe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ts(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ll(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const aN=Symbol("implicit");function FO(){var t=new JF,e=[],n=[],r=aN;function i(a){let s=t.get(a);if(s===void 0){if(r!==aN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new JF;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return FO(e,n).unknown(r)},ts.apply(i,arguments),i}function UO(){var t=FO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=ICe(g).map(function(_){return b+a*_});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return UO(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},ts.apply(h(),arguments)}function wQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wQ(e())},t}function PCe(){return wQ(UO.apply(null,arguments).paddingInner(1))}function $O(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function SQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function X0(){}var Xv=.7,O1=1/Xv,$h="\\s*([+-]?\\d+)\\s*",Qv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NCe=/^#([0-9a-f]{3,8})$/,DCe=new RegExp(`^rgb\\(${$h},${$h},${$h}\\)$`),OCe=new RegExp(`^rgb\\(${xo},${xo},${xo}\\)$`),RCe=new RegExp(`^rgba\\(${$h},${$h},${$h},${Qv}\\)$`),MCe=new RegExp(`^rgba\\(${xo},${xo},${xo},${Qv}\\)$`),jCe=new RegExp(`^hsl\\(${Qv},${xo},${xo}\\)$`),zCe=new RegExp(`^hsla\\(${Qv},${xo},${xo},${Qv}\\)$`),rU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$O(X0,Zv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:iU,formatHex:iU,formatHex8:LCe,formatHsl:VCe,formatRgb:aU,toString:aU});function iU(){return this.rgb().formatHex()}function LCe(){return this.rgb().formatHex8()}function VCe(){return _Q(this).formatHsl()}function aU(){return this.rgb().formatRgb()}function Zv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=NCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sU(e):n===3?new qi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ex(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ex(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=DCe.exec(t))?new qi(e[1],e[2],e[3],1):(e=OCe.exec(t))?new qi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=RCe.exec(t))?Ex(e[1],e[2],e[3],e[4]):(e=MCe.exec(t))?Ex(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jCe.exec(t))?cU(e[1],e[2]/100,e[3]/100,1):(e=zCe.exec(t))?cU(e[1],e[2]/100,e[3]/100,e[4]):rU.hasOwnProperty(t)?sU(rU[t]):t==="transparent"?new qi(NaN,NaN,NaN,0):null}function sU(t){return new qi(t>>16&255,t>>8&255,t&255,1)}function Ex(t,e,n,r){return r<=0&&(t=e=n=NaN),new qi(t,e,n,r)}function BCe(t){return t instanceof X0||(t=Zv(t)),t?(t=t.rgb(),new qi(t.r,t.g,t.b,t.opacity)):new qi}function sN(t,e,n,r){return arguments.length===1?BCe(t):new qi(t,e,n,r??1)}function qi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}$O(qi,sN,SQ(X0,{brighter(t){return t=t==null?O1:Math.pow(O1,t),new qi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xv:Math.pow(Xv,t),new qi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qi(kd(this.r),kd(this.g),kd(this.b),R1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oU,formatHex:oU,formatHex8:FCe,formatRgb:lU,toString:lU}));function oU(){return`#${gd(this.r)}${gd(this.g)}${gd(this.b)}`}function FCe(){return`#${gd(this.r)}${gd(this.g)}${gd(this.b)}${gd((isNaN(this.opacity)?1:this.opacity)*255)}`}function lU(){const t=R1(this.opacity);return`${t===1?"rgb(":"rgba("}${kd(this.r)}, ${kd(this.g)}, ${kd(this.b)}${t===1?")":`, ${t})`}`}function R1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gd(t){return t=kd(t),(t<16?"0":"")+t.toString(16)}function cU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bs(t,e,n,r)}function _Q(t){if(t instanceof bs)return new bs(t.h,t.s,t.l,t.opacity);if(t instanceof X0||(t=Zv(t)),!t)return new bs;if(t instanceof bs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new bs(s,o,c,t.opacity)}function UCe(t,e,n,r){return arguments.length===1?_Q(t):new bs(t,e,n,r??1)}function bs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$O(bs,UCe,SQ(X0,{brighter(t){return t=t==null?O1:Math.pow(O1,t),new bs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xv:Math.pow(Xv,t),new bs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qi(mC(t>=240?t-240:t+120,i,r),mC(t,i,r),mC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new bs(uU(this.h),Tx(this.s),Tx(this.l),R1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=R1(this.opacity);return`${t===1?"hsl(":"hsla("}${uU(this.h)}, ${Tx(this.s)*100}%, ${Tx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uU(t){return t=(t||0)%360,t<0?t+360:t}function Tx(t){return Math.max(0,Math.min(1,t||0))}function mC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const qO=t=>()=>t;function $Ce(t,e){return function(n){return t+n*e}}function qCe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function GCe(t){return(t=+t)==1?EQ:function(e,n){return n-e?qCe(e,n,t):qO(isNaN(e)?n:e)}}function EQ(t,e){var n=e-t;return n?$Ce(t,n):qO(isNaN(t)?e:t)}const dU=(function t(e){var n=GCe(e);function r(i,a){var s=n((i=sN(i)).r,(a=sN(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=EQ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function HCe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function KCe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function WCe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Yp(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function YCe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function M1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function XCe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Yp(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var oN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vC=new RegExp(oN.source,"g");function QCe(t){return function(){return t}}function ZCe(t){return function(e){return t(e)+""}}function JCe(t,e){var n=oN.lastIndex=vC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=oN.exec(t))&&(i=vC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:M1(r,i)})),n=vC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?ZCe(c[0].x):QCe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Yp(t,e){var n=typeof e,r;return e==null||n==="boolean"?qO(e):(n==="number"?M1:n==="string"?(r=Zv(e))?(e=r,dU):JCe:e instanceof Zv?dU:e instanceof Date?YCe:KCe(e)?HCe:Array.isArray(e)?WCe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?XCe:M1)(t,e)}function GO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function eIe(t,e){e===void 0&&(e=t,t=Yp);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function tIe(t){return function(){return t}}function j1(t){return+t}var fU=[0,1];function Ei(t){return t}function lN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tIe(isNaN(e)?NaN:.5)}function nIe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function rIe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=lN(i,r),a=n(s,a)):(r=lN(r,i),a=n(a,s)),function(o){return a(r(o))}}function iIe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=lN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Y0(t,o,1,r)-1;return a[c](i[c](o))}}function Q0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function A_(){var t=fU,e=fU,n=Yp,r,i,a,s=Ei,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Ei&&(s=nIe(t[0],t[g-1])),o=g>2?iIe:rIe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),M1)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,j1),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=GO,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Ei,f()):s!==Ei},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function HO(){return A_()(Ei,Ei)}function aIe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function z1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _p(t){return t=z1(Math.abs(t)),t?t[1]:NaN}function sIe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function oIe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lIe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(t){if(!(e=lIe.exec(t)))throw new Error("invalid format: "+t);var e;return new KO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Jv.prototype=KO.prototype;function KO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cIe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var TQ;function uIe(t,e){var n=z1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(TQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+z1(t,Math.max(0,e+a-1))[0]}function hU(t,e){var n=z1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:aIe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hU(t*100,e),r:hU,s:uIe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gU(t){return t}var mU=Array.prototype.map,vU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dIe(t){var e=t.grouping===void 0||t.thousands===void 0?gU:sIe(mU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?gU:oIe(mU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Jv(h);var g=h.fill,v=h.align,b=h.sign,x=h.symbol,w=h.zero,_=h.width,T=h.comma,I=h.precision,O=h.trim,D=h.type;D==="n"?(T=!0,D="g"):pU[D]||(I===void 0&&(I=12),O=!0,D="g"),(w||g==="0"&&v==="=")&&(w=!0,g="0",v="=");var N=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",C=x==="$"?r:/[%p]/.test(D)?s:"",P=pU[D],R=/[defgprs%]/.test(D);I=I===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function j(L){var B=N,z=C,W,Z,G;if(D==="c")z=P(L)+z,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:P(Math.abs(L),I),O&&(L=cIe(L)),Y&&+L==0&&b!=="+"&&(Y=!1),B=(Y?b==="("?b:o:b==="-"||b==="("?"":b)+B,z=(D==="s"?vU[8+TQ/3]:"")+z+(Y&&b==="("?")":""),R){for(W=-1,Z=L.length;++W<Z;)if(G=L.charCodeAt(W),48>G||G>57){z=(G===46?i+L.slice(W+1):L.slice(W))+z,L=L.slice(0,W);break}}}T&&!w&&(L=e(L,1/0));var Q=B.length+L.length+z.length,ee=Q<_?new Array(_-Q+1).join(g):"";switch(T&&w&&(L=e(ee+L,ee.length?_-z.length:1/0),ee=""),v){case"<":L=B+L+z+ee;break;case"=":L=B+ee+L+z;break;case"^":L=ee.slice(0,Q=ee.length>>1)+B+L+z+ee.slice(Q);break;default:L=ee+B+L+z;break}return a(L)}return j.toString=function(){return h+""},j}function f(h,g){var v=u((h=Jv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(_p(g)/3)))*3,x=Math.pow(10,-b),w=vU[8+b/3];return function(_){return v(x*_)+w}}return{format:u,formatPrefix:f}}var Ax,WO,AQ;fIe({thousands:",",grouping:[3],currency:["$",""]});function fIe(t){return Ax=dIe(t),WO=Ax.format,AQ=Ax.formatPrefix,Ax}function hIe(t){return Math.max(0,-_p(Math.abs(t)))}function pIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_p(e)/3)))*3-_p(Math.abs(t)))}function gIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_p(e)-_p(t))+1}function kQ(t,e,n,r){var i=iN(t,e,n),a;switch(r=Jv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=pIe(i,s))&&(r.precision=a),AQ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=gIe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=hIe(i))&&(r.precision=a-(r.type==="%")*2);break}}return WO(r)}function pu(t){var e=t.domain;return t.ticks=function(n){var r=e();return nN(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return kQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=rN(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function CQ(){var t=HO();return t.copy=function(){return Q0(t,CQ())},ts.apply(t,arguments),pu(t)}function IQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,j1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return IQ(t).unknown(e)},t=arguments.length?Array.from(t,j1):[0,1],pu(n)}function PQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function yU(t){return Math.log(t)}function bU(t){return Math.exp(t)}function mIe(t){return-Math.log(-t)}function vIe(t){return-Math.exp(-t)}function yIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bIe(t){return t===10?yIe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function xIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function xU(t){return(e,n)=>-t(-e,n)}function YO(t){const e=t(yU,bU),n=e.domain;let r=10,i,a;function s(){return i=xIe(r),a=bIe(r),n()[0]<0?(i=xU(i),a=xU(a),t(mIe,vIe)):t(yU,bU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let _=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;_.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;_.push(x)}_.length*2<w&&(_=nN(u,f,w))}else _=nN(g,v,Math.min(v-g,w)).map(a);return h?_.reverse():_},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Jv(c)).precision==null&&(c.trim=!0),c=WO(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(PQ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function NQ(){const t=YO(A_()).domain([1,10]);return t.copy=()=>Q0(t,NQ()).base(t.base()),ts.apply(t,arguments),t}function wU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function SU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function XO(t){var e=1,n=t(wU(e),SU(e));return n.constant=function(r){return arguments.length?t(wU(e=+r),SU(e)):e},pu(n)}function DQ(){var t=XO(A_());return t.copy=function(){return Q0(t,DQ()).constant(t.constant())},ts.apply(t,arguments)}function _U(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wIe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function SIe(t){return t<0?-t*t:t*t}function QO(t){var e=t(Ei,Ei),n=1;function r(){return n===1?t(Ei,Ei):n===.5?t(wIe,SIe):t(_U(n),_U(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},pu(e)}function ZO(){var t=QO(A_());return t.copy=function(){return Q0(t,ZO()).exponent(t.exponent())},ts.apply(t,arguments),t}function _Ie(){return ZO.apply(null,arguments).exponent(.5)}function EU(t){return Math.sign(t)*t*t}function EIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function OQ(){var t=HO(),e=[0,1],n=!1,r;function i(a){var s=EIe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(EU(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,j1)).map(EU)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return OQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ts.apply(i,arguments),pu(i)}function RQ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=CCe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Y0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Gc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return RQ().domain(t).range(e).unknown(r)},ts.apply(a,arguments)}function MQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Y0(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return MQ().domain([t,e]).range(i).unknown(a)},ts.apply(pu(s),arguments)}function jQ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Y0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return jQ().domain(t).range(e).unknown(n)},ts.apply(i,arguments)}const yC=new Date,bC=new Date;function Nr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Nr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(yC.setTime(+a),bC.setTime(+s),t(yC),t(bC),Math.floor(n(yC,bC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const L1=Nr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);L1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):L1);L1.range;const al=1e3,$a=al*60,sl=$a*60,kl=sl*24,JO=kl*7,TU=kl*30,xC=kl*365,md=Nr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*al)},(t,e)=>(e-t)/al,t=>t.getUTCSeconds());md.range;const eR=Nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*al)},(t,e)=>{t.setTime(+t+e*$a)},(t,e)=>(e-t)/$a,t=>t.getMinutes());eR.range;const tR=Nr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*$a)},(t,e)=>(e-t)/$a,t=>t.getUTCMinutes());tR.range;const nR=Nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*al-t.getMinutes()*$a)},(t,e)=>{t.setTime(+t+e*sl)},(t,e)=>(e-t)/sl,t=>t.getHours());nR.range;const rR=Nr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*sl)},(t,e)=>(e-t)/sl,t=>t.getUTCHours());rR.range;const Z0=Nr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$a)/kl,t=>t.getDate()-1);Z0.range;const k_=Nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kl,t=>t.getUTCDate()-1);k_.range;const zQ=Nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kl,t=>Math.floor(t/kl));zQ.range;function of(t){return Nr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$a)/JO)}const C_=of(0),V1=of(1),TIe=of(2),AIe=of(3),Ep=of(4),kIe=of(5),CIe=of(6);C_.range;V1.range;TIe.range;AIe.range;Ep.range;kIe.range;CIe.range;function lf(t){return Nr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/JO)}const I_=lf(0),B1=lf(1),IIe=lf(2),PIe=lf(3),Tp=lf(4),NIe=lf(5),DIe=lf(6);I_.range;B1.range;IIe.range;PIe.range;Tp.range;NIe.range;DIe.range;const iR=Nr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());iR.range;const aR=Nr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());aR.range;const Cl=Nr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Cl.range;const Il=Nr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Il.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Il.range;function LQ(t,e,n,r,i,a){const s=[[md,1,al],[md,5,5*al],[md,15,15*al],[md,30,30*al],[a,1,$a],[a,5,5*$a],[a,15,15*$a],[a,30,30*$a],[i,1,sl],[i,3,3*sl],[i,6,6*sl],[i,12,12*sl],[r,1,kl],[r,2,2*kl],[n,1,JO],[e,1,TU],[e,3,3*TU],[t,1,xC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=BO(([,,w])=>w).right(s,g);if(v===s.length)return t.every(iN(u/xC,f/xC,h));if(v===0)return L1.every(Math.max(iN(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[OIe,RIe]=LQ(Il,aR,I_,zQ,rR,tR),[MIe,jIe]=LQ(Cl,iR,C_,Z0,nR,eR);function wC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function SC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function zIe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=xm(i),f=wm(i),h=xm(a),g=wm(a),v=xm(s),b=wm(s),x=xm(o),w=wm(o),_=xm(c),T=wm(c),I={a:Y,A:Q,b:ee,B:te,c:null,d:NU,e:NU,f:sPe,g:mPe,G:yPe,H:rPe,I:iPe,j:aPe,L:VQ,m:oPe,M:lPe,p:U,q:X,Q:RU,s:MU,S:cPe,u:uPe,U:dPe,V:fPe,w:hPe,W:pPe,x:null,X:null,y:gPe,Y:vPe,Z:bPe,"%":OU},O={a:ne,A:K,b:ue,B:ie,c:null,d:DU,e:DU,f:_Pe,g:OPe,G:MPe,H:xPe,I:wPe,j:SPe,L:FQ,m:EPe,M:TPe,p:oe,q:_e,Q:RU,s:MU,S:APe,u:kPe,U:CPe,V:IPe,w:PPe,W:NPe,x:null,X:null,y:DPe,Y:RPe,Z:jPe,"%":OU},D={a:j,A:L,b:B,B:z,c:W,d:IU,e:IU,f:JIe,g:CU,G:kU,H:PU,I:PU,j:YIe,L:ZIe,m:WIe,M:XIe,p:R,q:KIe,Q:tPe,s:nPe,S:QIe,u:UIe,U:$Ie,V:qIe,w:FIe,W:GIe,x:Z,X:G,y:CU,Y:kU,Z:HIe,"%":ePe};I.x=N(n,I),I.X=N(r,I),I.c=N(e,I),O.x=N(n,O),O.X=N(r,O),O.c=N(e,O);function N(se,ge){return function(de){var J=[],Se=-1,Ce=0,Oe=se.length,ze,Ve,rt;for(de instanceof Date||(de=new Date(+de));++Se<Oe;)se.charCodeAt(Se)===37&&(J.push(se.slice(Ce,Se)),(Ve=AU[ze=se.charAt(++Se)])!=null?ze=se.charAt(++Se):Ve=ze==="e"?" ":"0",(rt=ge[ze])&&(ze=rt(de,Ve)),J.push(ze),Ce=Se+1);return J.push(se.slice(Ce,Se)),J.join("")}}function C(se,ge){return function(de){var J=bm(1900,void 0,1),Se=P(J,se,de+="",0),Ce,Oe;if(Se!=de.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ge&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(Ce=SC(bm(J.y,0,1)),Oe=Ce.getUTCDay(),Ce=Oe>4||Oe===0?B1.ceil(Ce):B1(Ce),Ce=k_.offset(Ce,(J.V-1)*7),J.y=Ce.getUTCFullYear(),J.m=Ce.getUTCMonth(),J.d=Ce.getUTCDate()+(J.w+6)%7):(Ce=wC(bm(J.y,0,1)),Oe=Ce.getDay(),Ce=Oe>4||Oe===0?V1.ceil(Ce):V1(Ce),Ce=Z0.offset(Ce,(J.V-1)*7),J.y=Ce.getFullYear(),J.m=Ce.getMonth(),J.d=Ce.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Oe="Z"in J?SC(bm(J.y,0,1)).getUTCDay():wC(bm(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Oe+5)%7:J.w+J.U*7-(Oe+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,SC(J)):wC(J)}}function P(se,ge,de,J){for(var Se=0,Ce=ge.length,Oe=de.length,ze,Ve;Se<Ce;){if(J>=Oe)return-1;if(ze=ge.charCodeAt(Se++),ze===37){if(ze=ge.charAt(Se++),Ve=D[ze in AU?ge.charAt(Se++):ze],!Ve||(J=Ve(se,de,J))<0)return-1}else if(ze!=de.charCodeAt(J++))return-1}return J}function R(se,ge,de){var J=u.exec(ge.slice(de));return J?(se.p=f.get(J[0].toLowerCase()),de+J[0].length):-1}function j(se,ge,de){var J=v.exec(ge.slice(de));return J?(se.w=b.get(J[0].toLowerCase()),de+J[0].length):-1}function L(se,ge,de){var J=h.exec(ge.slice(de));return J?(se.w=g.get(J[0].toLowerCase()),de+J[0].length):-1}function B(se,ge,de){var J=_.exec(ge.slice(de));return J?(se.m=T.get(J[0].toLowerCase()),de+J[0].length):-1}function z(se,ge,de){var J=x.exec(ge.slice(de));return J?(se.m=w.get(J[0].toLowerCase()),de+J[0].length):-1}function W(se,ge,de){return P(se,e,ge,de)}function Z(se,ge,de){return P(se,n,ge,de)}function G(se,ge,de){return P(se,r,ge,de)}function Y(se){return s[se.getDay()]}function Q(se){return a[se.getDay()]}function ee(se){return c[se.getMonth()]}function te(se){return o[se.getMonth()]}function U(se){return i[+(se.getHours()>=12)]}function X(se){return 1+~~(se.getMonth()/3)}function ne(se){return s[se.getUTCDay()]}function K(se){return a[se.getUTCDay()]}function ue(se){return c[se.getUTCMonth()]}function ie(se){return o[se.getUTCMonth()]}function oe(se){return i[+(se.getUTCHours()>=12)]}function _e(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ge=N(se+="",I);return ge.toString=function(){return se},ge},parse:function(se){var ge=C(se+="",!1);return ge.toString=function(){return se},ge},utcFormat:function(se){var ge=N(se+="",O);return ge.toString=function(){return se},ge},utcParse:function(se){var ge=C(se+="",!0);return ge.toString=function(){return se},ge}}}var AU={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,LIe=/^%/,VIe=/[\\^$*+?|[\]().{}]/g;function Rt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function BIe(t){return t.replace(VIe,"\\$&")}function xm(t){return new RegExp("^(?:"+t.map(BIe).join("|")+")","i")}function wm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function FIe(t,e,n){var r=qr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function UIe(t,e,n){var r=qr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $Ie(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function qIe(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function GIe(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function kU(t,e,n){var r=qr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function CU(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function HIe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function KIe(t,e,n){var r=qr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function WIe(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function IU(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function YIe(t,e,n){var r=qr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function PU(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function XIe(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function QIe(t,e,n){var r=qr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ZIe(t,e,n){var r=qr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function JIe(t,e,n){var r=qr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ePe(t,e,n){var r=LIe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function tPe(t,e,n){var r=qr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function nPe(t,e,n){var r=qr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function NU(t,e){return Rt(t.getDate(),e,2)}function rPe(t,e){return Rt(t.getHours(),e,2)}function iPe(t,e){return Rt(t.getHours()%12||12,e,2)}function aPe(t,e){return Rt(1+Z0.count(Cl(t),t),e,3)}function VQ(t,e){return Rt(t.getMilliseconds(),e,3)}function sPe(t,e){return VQ(t,e)+"000"}function oPe(t,e){return Rt(t.getMonth()+1,e,2)}function lPe(t,e){return Rt(t.getMinutes(),e,2)}function cPe(t,e){return Rt(t.getSeconds(),e,2)}function uPe(t){var e=t.getDay();return e===0?7:e}function dPe(t,e){return Rt(C_.count(Cl(t)-1,t),e,2)}function BQ(t){var e=t.getDay();return e>=4||e===0?Ep(t):Ep.ceil(t)}function fPe(t,e){return t=BQ(t),Rt(Ep.count(Cl(t),t)+(Cl(t).getDay()===4),e,2)}function hPe(t){return t.getDay()}function pPe(t,e){return Rt(V1.count(Cl(t)-1,t),e,2)}function gPe(t,e){return Rt(t.getFullYear()%100,e,2)}function mPe(t,e){return t=BQ(t),Rt(t.getFullYear()%100,e,2)}function vPe(t,e){return Rt(t.getFullYear()%1e4,e,4)}function yPe(t,e){var n=t.getDay();return t=n>=4||n===0?Ep(t):Ep.ceil(t),Rt(t.getFullYear()%1e4,e,4)}function bPe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Rt(e/60|0,"0",2)+Rt(e%60,"0",2)}function DU(t,e){return Rt(t.getUTCDate(),e,2)}function xPe(t,e){return Rt(t.getUTCHours(),e,2)}function wPe(t,e){return Rt(t.getUTCHours()%12||12,e,2)}function SPe(t,e){return Rt(1+k_.count(Il(t),t),e,3)}function FQ(t,e){return Rt(t.getUTCMilliseconds(),e,3)}function _Pe(t,e){return FQ(t,e)+"000"}function EPe(t,e){return Rt(t.getUTCMonth()+1,e,2)}function TPe(t,e){return Rt(t.getUTCMinutes(),e,2)}function APe(t,e){return Rt(t.getUTCSeconds(),e,2)}function kPe(t){var e=t.getUTCDay();return e===0?7:e}function CPe(t,e){return Rt(I_.count(Il(t)-1,t),e,2)}function UQ(t){var e=t.getUTCDay();return e>=4||e===0?Tp(t):Tp.ceil(t)}function IPe(t,e){return t=UQ(t),Rt(Tp.count(Il(t),t)+(Il(t).getUTCDay()===4),e,2)}function PPe(t){return t.getUTCDay()}function NPe(t,e){return Rt(B1.count(Il(t)-1,t),e,2)}function DPe(t,e){return Rt(t.getUTCFullYear()%100,e,2)}function OPe(t,e){return t=UQ(t),Rt(t.getUTCFullYear()%100,e,2)}function RPe(t,e){return Rt(t.getUTCFullYear()%1e4,e,4)}function MPe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Tp(t):Tp.ceil(t),Rt(t.getUTCFullYear()%1e4,e,4)}function jPe(){return"+0000"}function OU(){return"%"}function RU(t){return+t}function MU(t){return Math.floor(+t/1e3)}var ch,$Q,qQ;zPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zPe(t){return ch=zIe(t),$Q=ch.format,ch.parse,qQ=ch.utcFormat,ch.utcParse,ch}function LPe(t){return new Date(t)}function VPe(t){return t instanceof Date?+t:+new Date(+t)}function sR(t,e,n,r,i,a,s,o,c,u){var f=HO(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),_=u("%a %d"),T=u("%b %d"),I=u("%B"),O=u("%Y");function D(N){return(c(N)<N?v:o(N)<N?b:s(N)<N?x:a(N)<N?w:r(N)<N?i(N)<N?_:T:n(N)<N?I:O)(N)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?g(Array.from(N,VPe)):g().map(LPe)},f.ticks=function(N){var C=g();return t(C[0],C[C.length-1],N??10)},f.tickFormat=function(N,C){return C==null?D:u(C)},f.nice=function(N){var C=g();return(!N||typeof N.range!="function")&&(N=e(C[0],C[C.length-1],N??10)),N?g(PQ(C,N)):f},f.copy=function(){return Q0(f,sR(t,e,n,r,i,a,s,o,c,u))},f}function BPe(){return ts.apply(sR(MIe,jIe,Cl,iR,C_,Z0,nR,eR,md,$Q).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FPe(){return ts.apply(sR(OIe,RIe,Il,aR,I_,k_,rR,tR,md,qQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function P_(){var t=0,e=1,n,r,i,a,s=Ei,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(Yp),u.rangeRound=f(GO),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function gu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function GQ(){var t=pu(P_()(Ei));return t.copy=function(){return gu(t,GQ())},Ll.apply(t,arguments)}function HQ(){var t=YO(P_()).domain([1,10]);return t.copy=function(){return gu(t,HQ()).base(t.base())},Ll.apply(t,arguments)}function KQ(){var t=XO(P_());return t.copy=function(){return gu(t,KQ()).constant(t.constant())},Ll.apply(t,arguments)}function oR(){var t=QO(P_());return t.copy=function(){return gu(t,oR()).exponent(t.exponent())},Ll.apply(t,arguments)}function UPe(){return oR.apply(null,arguments).exponent(.5)}function WQ(){var t=[],e=Ei;function n(r){if(r!=null&&!isNaN(r=+r))return e((Y0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Gc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>kCe(t,a/r))},n.copy=function(){return WQ(e).domain(t)},Ll.apply(n,arguments)}function N_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Ei,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var _,T,I;return arguments.length?([_,T,I]=w,u=eIe(x,[_,T,I]),v):[u(0),u(.5),u(1)]}}return v.range=b(Yp),v.rangeRound=b(GO),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function YQ(){var t=pu(N_()(Ei));return t.copy=function(){return gu(t,YQ())},Ll.apply(t,arguments)}function XQ(){var t=YO(N_()).domain([.1,1,10]);return t.copy=function(){return gu(t,XQ()).base(t.base())},Ll.apply(t,arguments)}function QQ(){var t=XO(N_());return t.copy=function(){return gu(t,QQ()).constant(t.constant())},Ll.apply(t,arguments)}function lR(){var t=QO(N_());return t.copy=function(){return gu(t,lR()).exponent(t.exponent())},Ll.apply(t,arguments)}function $Pe(){return lR.apply(null,arguments).exponent(.5)}const zm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:UO,scaleDiverging:YQ,scaleDivergingLog:XQ,scaleDivergingPow:lR,scaleDivergingSqrt:$Pe,scaleDivergingSymlog:QQ,scaleIdentity:IQ,scaleImplicit:aN,scaleLinear:CQ,scaleLog:NQ,scaleOrdinal:FO,scalePoint:PCe,scalePow:ZO,scaleQuantile:RQ,scaleQuantize:MQ,scaleRadial:OQ,scaleSequential:GQ,scaleSequentialLog:HQ,scaleSequentialPow:oR,scaleSequentialQuantile:WQ,scaleSequentialSqrt:UPe,scaleSequentialSymlog:KQ,scaleSqrt:_Ie,scaleSymlog:DQ,scaleThreshold:jQ,scaleTime:BPe,scaleUtc:FPe,tickFormat:kQ},Symbol.toStringTag,{value:"Module"}));var Vl=t=>t.chartData,D_=ye([Vl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ZQ=(t,e,n,r)=>r?D_(t):Vl(t),qPe=(t,e,n)=>n?D_(t):Vl(t);function ru(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(sn(e)&&sn(n))return!0}return!1}function jU(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function JQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(sn(n))i=n;else if(typeof n=="function")return;if(sn(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(ru(s))return s}}function GPe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(ru(r))return jU(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Ke(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&Y6.test(i)){var c=Y6.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(Ke(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&X6.test(a)){var f=X6.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(ru(g))return e==null?g:jU(g,e,n)}}}var Xp=1e9,HPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uR,_n=!0,Qa="[DecimalError] ",Cd=Qa+"Invalid argument: ",cR=Qa+"Exponent out of range: ",Qp=Math.floor,ed=Math.pow,KPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ha,Br=1e7,pn=7,eZ=9007199254740991,F1=Qp(eZ/pn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*pn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return fl(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return on(fl(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return hr(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ha))throw Error(Qa+"NaN");if(n.s<1)throw Error(Qa+(n.s?"NaN":"-Infinity"));return n.eq(ha)?new r(0):(_n=!1,e=fl(e0(n,a),e0(t,a),a),_n=!0,on(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rZ(e,t):tZ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qa+"NaN");return n.s?(_n=!1,e=fl(n,t,0,1).times(t),_n=!0,n.minus(e)):on(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return nZ(this)};Ue.naturalLogarithm=Ue.ln=function(){return e0(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tZ(e,t):rZ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Cd+t);if(e=hr(i)+1,r=i.d.length-1,n=r*pn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Qa+"NaN")}for(t=hr(o),_n=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=uo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Qp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(fl(o,a,s+2)).times(.5),uo(a.d).slice(0,s)===(e=uo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(on(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return _n=!0,on(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Br|0,e=o/Br|0;a[i]=(a[i]+e)%Br|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,_n?on(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ao(t,0,Xp),e===void 0?e=r.rounding:Ao(e,0,8),on(n,t+hr(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Wd(r,!0):(Ao(t,0,Xp),e===void 0?e=i.rounding:Ao(e,0,8),r=on(new i(r),t+1,e),n=Wd(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Wd(i):(Ao(t,0,Xp),e===void 0?e=a.rounding:Ao(e,0,8),r=on(new a(i),t+hr(i)+1,e),n=Wd(r.abs(),!1,t+hr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return on(new e(t),hr(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(ha);if(o=new c(o),!o.s){if(t.s<1)throw Error(Qa+"Infinity");return o}if(o.eq(ha))return o;if(r=c.precision,t.eq(ha))return on(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=eZ){for(i=new c(ha),e=Math.ceil(r/pn+4),_n=!1;n%2&&(i=i.times(o),LU(i.d,e)),n=Qp(n/2),n!==0;)o=o.times(o),LU(o.d,e);return _n=!0,t.s<0?new c(ha).div(i):on(i,r)}}else if(a<0)throw Error(Qa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,_n=!1,i=t.times(e0(o,r+u)),_n=!0,i=nZ(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=hr(i),r=Wd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ao(t,1,Xp),e===void 0?e=a.rounding:Ao(e,0,8),i=on(new a(i),t,e),n=hr(i),r=Wd(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ao(t,1,Xp),e===void 0?e=r.rounding:Ao(e,0,8)),on(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=hr(t),n=t.constructor;return Wd(t,e<=n.toExpNeg||e>=n.toExpPos)};function tZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),_n?on(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/pn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Br|0,c[a]%=Br;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,_n?on(e,h):e}function Ao(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Cd+t)}function uo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=pn-r.length,n&&(a+=Ec(n)),a+=r;s=t[e],r=s+"",n=pn-r.length,n&&(a+=Ec(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var fl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Br|0,s=a/Br|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Br+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,_,T,I,O,D,N,C,P,R=r.constructor,j=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Qa+"Division by zero");for(c=r.e-i.e,C=B.length,D=L.length,v=new R(j),b=v.d=[],u=0;B[u]==(L[u]||0);)++u;if(B[u]>(L[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(hr(r)-hr(i))+1:T=a,T<0)return new R(0);if(T=T/pn+2|0,u=0,C==1)for(f=0,B=B[0],T++;(u<D||f)&&T--;u++)I=f*Br+(L[u]||0),b[u]=I/B|0,f=I%B|0;else{for(f=Br/(B[0]+1)|0,f>1&&(B=t(B,f),L=t(L,f),C=B.length,D=L.length),O=C,x=L.slice(0,C),w=x.length;w<C;)x[w++]=0;P=B.slice(),P.unshift(0),N=B[0],B[1]>=Br/2&&++N;do f=0,o=e(B,x,C,w),o<0?(_=x[0],C!=w&&(_=_*Br+(x[1]||0)),f=_/N|0,f>1?(f>=Br&&(f=Br-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,C<g?P:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,C,w),o<1&&(f++,n(x,C<w?P:B,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=L[O]||0:(x=[L[O]],w=1);while((O++<D||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,on(v,s?a+hr(v)+1:a)}})();function nZ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(hr(t)>16)throw Error(cR+hr(t));if(!t.s)return new f(ha);for(_n=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(ed(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(ha),f.precision=o;;){if(i=on(i.times(t),o),n=n.times(++c),s=a.plus(fl(i,n,o)),uo(s.d).slice(0,o)===uo(a.d).slice(0,o)){for(;u--;)a=on(a.times(a),o);return f.precision=h,e==null?(_n=!0,on(a,h)):a}a=s}}function hr(t){for(var e=t.e*pn,n=t.d[0];n>=10;n/=10)e++;return e}function _C(t,e,n){if(e>t.LN10.sd())throw _n=!0,n&&(t.precision=n),Error(Qa+"LN10 precision limit exceeded");return on(new t(t.LN10),e)}function Ec(t){for(var e="";t--;)e+="0";return e}function e0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Qa+(v.s?"NaN":"-Infinity"));if(v.eq(ha))return new x(0);if(e==null?(_n=!1,u=w):u=e,v.eq(10))return e==null&&(_n=!0),_C(x,u);if(u+=g,x.precision=u,n=uo(b),r=n.charAt(0),a=hr(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=uo(v.d),r=n.charAt(0),h++;a=hr(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=_C(x,u+2,w).times(a+""),v=e0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(_n=!0,on(v,w)):v;for(o=s=v=fl(v.minus(ha),v.plus(ha),u),f=on(v.times(v),u),i=3;;){if(s=on(s.times(f),u),c=o.plus(fl(s,new x(i),u)),uo(c.d).slice(0,u)===uo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(_C(x,u+2,w).times(a+""))),o=fl(o,new x(h),u),x.precision=w,e==null?(_n=!0,on(o,w)):o;o=c,i+=2}}function zU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Qp(n/pn),t.d=[],r=(n+1)%pn,n<0&&(r+=pn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=pn;r<i;)t.d.push(+e.slice(r,r+=pn));e=e.slice(r),r=pn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),_n&&(t.e>F1||t.e<-F1))throw Error(cR+n)}else t.s=0,t.e=0,t.d=[0];return t}function on(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=pn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/pn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=pn,i=r-pn+s}if(n!==void 0&&(a=ed(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/ed(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=hr(t),h.length=1,e=e-a-1,h[0]=ed(10,(pn-e%pn)%pn),t.e=Qp(-e/pn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=ed(10,pn-r),h[f]=i>0?(u/ed(10,s-i)%ed(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Br&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Br)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(_n&&(t.e>F1||t.e<-F1))throw Error(cR+hr(t));return t}function rZ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),_n?on(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/pn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Br-1;--c[a],c[i]+=Br}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,_n?on(e,v):e):new g(0)}function Wd(t,e,n){var r,i=hr(t),a=uo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ec(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ec(-i-1)+a,n&&(r=n-s)>0&&(a+=Ec(r))):i>=s?(a+=Ec(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ec(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ec(r))),t.s<0?"-"+a:a}function LU(t,e){if(t.length>e)return t.length=e,!0}function iZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Cd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return zU(s,a.toString())}else if(typeof a!="string")throw Error(Cd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,KPe.test(a))zU(s,a);else throw Error(Cd+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iZ,i.config=i.set=WPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function WPe(t){if(!t||typeof t!="object")throw Error(Qa+"Object expected");var e,n,r,i=["precision",1,Xp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Qp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Cd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Cd+n+": "+r);return this}var uR=iZ(HPe);ha=new uR(1);const Gt=uR;var YPe=t=>t,aZ={},sZ=t=>t===aZ,VU=t=>function e(){return arguments.length===0||arguments.length===1&&sZ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},oZ=(t,e)=>t===1?e:VU(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==aZ).length;return a>=t?e(...r):oZ(t-a,VU(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>sZ(f)?o.shift():f);return e(...u,...o)}))}),XPe=t=>oZ(t.length,t),cN=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},QPe=XPe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),ZPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return YPe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function lZ(t){var e;return t===0?e=1:e=Math.floor(new Gt(t).abs().log(10).toNumber())+1,e}function cZ(t,e,n){for(var r=new Gt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var uZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},dZ=(t,e,n)=>{if(t.lte(0))return new Gt(0);var r=lZ(t.toNumber()),i=new Gt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Gt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Gt(c.toNumber()):new Gt(Math.ceil(c.toNumber()))},JPe=(t,e,n)=>{var r=new Gt(1),i=new Gt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Gt(10).pow(lZ(t)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Gt(Math.floor(t)))}else t===0?i=new Gt(Math.floor((e-1)/2)):n||(i=new Gt(Math.floor(t)));var s=Math.floor((e-1)/2),o=ZPe(QPe(c=>i.add(new Gt(c-s).mul(r)).toNumber()),cN);return o(0,e)},fZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var s=dZ(new Gt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Gt(0):(o=new Gt(e).add(n).div(2),o=o.sub(new Gt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Gt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?fZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Gt(c).mul(s)),tickMax:o.add(new Gt(u).mul(s))})},eNe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=uZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...cN(0,i-1).map(()=>1/0)]:[...cN(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return JPe(o,i,a);var{step:f,tickMin:h,tickMax:g}=fZ(o,c,s,a,0),v=cZ(h,g.add(new Gt(.1).mul(f)),f);return n>r?v.reverse():v},tNe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=uZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=dZ(new Gt(o).sub(s).div(c-1),a,0),f=[...cZ(new Gt(s),new Gt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},hZ=t=>t.rootProps.maxBarSize,nNe=t=>t.rootProps.barGap,pZ=t=>t.rootProps.barCategoryGap,rNe=t=>t.rootProps.barSize,J0=t=>t.rootProps.stackOffset,gZ=t=>t.rootProps.reverseStackOrder,dR=t=>t.options.chartName,fR=t=>t.rootProps.syncId,mZ=t=>t.rootProps.syncMethod,hR=t=>t.options.eventEmitter,Ur={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Jo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ua={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},O_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},iNe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jo.angleAxisId,includeHidden:!1,name:void 0,reversed:Jo.reversed,scale:Jo.scale,tick:Jo.tick,tickCount:void 0,ticks:void 0,type:Jo.type,unit:void 0},aNe={allowDataOverflow:ua.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ua.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ua.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ua.scale,tick:ua.tick,tickCount:ua.tickCount,ticks:void 0,type:ua.type,unit:void 0},sNe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jo.scale,tick:Jo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oNe={allowDataOverflow:ua.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ua.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ua.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ua.scale,tick:ua.tick,tickCount:ua.tickCount,ticks:void 0,type:"category",unit:void 0},pR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?sNe:iNe,gR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?oNe:aNe,R_=t=>t.polarOptions,mR=ye([jl,zl,Pr],hQ),vZ=ye([R_,mR],(t,e)=>{if(t!=null)return hi(t.innerRadius,e,0)}),yZ=ye([R_,mR],(t,e)=>{if(t!=null)return hi(t.outerRadius,e,e*.8)}),lNe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},bZ=ye([R_],lNe);ye([pR,bZ],O_);var xZ=ye([mR,vZ,yZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ye([gR,xZ],O_);var wZ=ye([Mt,R_,vZ,yZ,jl,zl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:hi(s,i,i/2),cy:hi(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),En=(t,e)=>e,ey=(t,e,n)=>n;function vR(t){return t?.id}function SZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=vR(o);u.forEach((h,g)=>{var v=a==null||i?g:String(mn(h,a,null)),b=mn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function M_(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var j_=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function z_(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function cNe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Dr=t=>{var e=Mt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Zp=t=>t.tooltip.settings.axisId;function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){uNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uNe(t,e,n){return(e=dNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dNe(t){var e=fNe(t,"string");return typeof e=="symbol"?e:e+""}function fNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uN=[0,"auto"],zr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_Z=(t,e)=>t.cartesianAxis.xAxis[e],Po=(t,e)=>{var n=_Z(t,e);return n??zr},Lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:uN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:G0},EZ=(t,e)=>t.cartesianAxis.yAxis[e],No=(t,e)=>{var n=EZ(t,e);return n??Lr},hNe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},yR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??hNe},Nn=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return No(t,n);case"zAxis":return yR(t,n);case"angleAxis":return pR(t,n);case"radiusAxis":return gR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},pNe=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return No(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ty=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return No(t,n);case"angleAxis":return pR(t,n);case"radiusAxis":return gR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},TZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function bR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var xR=t=>t.graphicalItems.cartesianItems,gNe=ye([En,ey],bR),wR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),ny=ye([xR,Nn,gNe],wR,{memoizeOptions:{resultEqualityCheck:z_}}),AZ=ye([ny],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(M_)),kZ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),mNe=ye([ny],kZ),SR=t=>t.map(e=>e.data).filter(Boolean).flat(1),vNe=ye([ny],SR,{memoizeOptions:{resultEqualityCheck:z_}}),_R=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},ER=ye([vNe,ZQ],_R),TR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:mn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:mn(i,r)}))):t.map(r=>({value:r})),L_=ye([ER,Nn,ny],TR);function CZ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function lw(t){if(Ya(t)||t instanceof Date){var e=Number(t);if(sn(e))return e}}function FU(t){if(Array.isArray(t)){var e=[lw(t[0]),lw(t[1])];return ru(e)?e:void 0}var n=lw(t);if(n!=null)return[n,n]}function Pl(t){return t.map(lw).filter(D_e)}function yNe(t,e,n){return!n||typeof e!="number"||wa(e)?[]:n.length?Pl(n.flatMap(r=>{var i=mn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!sn(a)||!sn(s)))return[e-a,e+s]})):[]}var Or=t=>{var e=Dr(t),n=Zp(t);return ty(t,e,n)},ry=ye([Or],t=>t?.dataKey),bNe=ye([AZ,ZQ,Or],SZ),IZ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(vR);return[o,{stackedData:ZTe(t,f,n),graphicalItems:u}]}))},dN=ye([bNe,AZ,J0,gZ],IZ),PZ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=rAe(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},xNe=ye([Nn],t=>t.allowDataOverflow),AR=t=>{var e;if(t==null||!("domain"in t))return uN;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Pl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:uN},kR=ye([Nn],AR),CR=ye([kR,xNe],JQ),wNe=ye([dN,Vl,En,CR],PZ,{memoizeOptions:{resultEqualityCheck:j_}}),V_=t=>t.errorBars,SNe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>CZ(n,r)),$1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},IR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(_=>CZ(i,_)),g=mn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=yNe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=FU(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=FU(mn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),sn(a)&&sn(s))return[a,s]},_Ne=ye([ER,Nn,mNe,V_,En],IR,{memoizeOptions:{resultEqualityCheck:j_}});function ENe(t){var{value:e}=t;if(Ya(e)||e instanceof Date)return e}var TNe=(t,e,n)=>{var r=t.map(ENe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&HY(r))?vQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},NZ=t=>t.referenceElements.dots,Jp=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),ANe=ye([NZ,En,ey],Jp),DZ=t=>t.referenceElements.areas,kNe=ye([DZ,En,ey],Jp),OZ=t=>t.referenceElements.lines,CNe=ye([OZ,En,ey],Jp),RZ=(t,e)=>{if(t!=null){var n=Pl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},INe=ye(ANe,En,RZ),MZ=(t,e)=>{if(t!=null){var n=Pl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},PNe=ye([kNe,En],MZ);function NNe(t){var e;if(t.x!=null)return Pl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Pl(n)}function DNe(t){var e;if(t.y!=null)return Pl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Pl(n)}var jZ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?NNe(r):DNe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ONe=ye([CNe,En],jZ),RNe=ye(INe,ONe,PNe,(t,e,n)=>$1(t,n,e)),PR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?$1(r,a,i):$1(a,i);return GPe(e,u,t.allowDataOverflow)},MNe=ye([Nn,kR,CR,wNe,_Ne,RNe,Mt,En],PR,{memoizeOptions:{resultEqualityCheck:j_}}),jNe=[0,1],NR=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=sf(e,a);if(u&&o==null){var f;return vQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?TNe(r,t,u):i==="expand"?jNe:s}},DR=ye([Nn,Mt,ER,L_,J0,En,MNe],NR),zZ=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(F0(a));return o in zm?o:"point"}}},eg=ye([Nn,Mt,TZ,dR,En],zZ);function zNe(t){if(t!=null){if(t in zm)return zm[t]();var e="scale".concat(F0(t));if(e in zm)return zm[e]()}}function OR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=zNe(e);if(i!=null){var a=i.domain(n).range(r);return KTe(a),a}}}var RR=(t,e,n)=>{var r=AR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ru(t))return eNe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ru(t))return tNe(t,e.tickCount,e.allowDecimals)}},MR=ye([DR,ty,eg],RR),jR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&ru(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},LNe=ye([Nn,DR,MR,En],jR),VNe=ye(L_,Nn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Pl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),LZ=ye(VNe,Mt,pZ,Pr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!sn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=hi(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),BNe=(t,e,n)=>{var r=Po(t,e);return r==null||typeof r.padding!="string"?0:LZ(t,"xAxis",e,n,r.padding)},FNe=(t,e,n)=>{var r=No(t,e);return r==null||typeof r.padding!="string"?0:LZ(t,"yAxis",e,n,r.padding)},UNe=ye(Po,BNe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),$Ne=ye(No,FNe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),qNe=ye([Pr,UNe,v_,m_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),GNe=ye([Pr,Mt,$Ne,v_,m_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),iy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return qNe(t,n,r);case"yAxis":return GNe(t,n,r);case"zAxis":return(i=yR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return bZ(t);case"radiusAxis":return xZ(t,n);default:return}},VZ=ye([Nn,iy],O_),Ap=ye([Nn,eg,LNe,VZ],OR);ye([ny,V_,En],SNe);function BZ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var B_=(t,e)=>e,F_=(t,e,n)=>n,HNe=ye(p_,B_,F_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(BZ)),KNe=ye(g_,B_,F_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(BZ)),FZ=(t,e)=>({width:t.width,height:e.height}),WNe=(t,e)=>{var n=typeof e.width=="number"?e.width:G0;return{width:n,height:t.height}},UZ=ye(Pr,Po,FZ),YNe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},XNe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},QNe=ye(zl,Pr,HNe,B_,F_,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=FZ(e,o);s==null&&(s=YNe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),ZNe=ye(jl,Pr,KNe,B_,F_,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=WNe(e,o);s==null&&(s=XNe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),JNe=(t,e)=>{var n=Po(t,e);if(n!=null)return QNe(t,n.orientation,n.mirror)},eDe=ye([Pr,Po,JNe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),tDe=(t,e)=>{var n=No(t,e);if(n!=null)return ZNe(t,n.orientation,n.mirror)},nDe=ye([Pr,No,tDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),$Z=ye(Pr,No,(t,e)=>{var n=typeof e.width=="number"?e.width:G0;return{width:n,height:t.height}}),UU=(t,e,n)=>{switch(e){case"xAxis":return UZ(t,n).width;case"yAxis":return $Z(t,n).height;default:return}},qZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=sf(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&HY(c))return c}},zR=ye([Mt,L_,Nn,En],qZ),GZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=sf(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},LR=ye([Mt,L_,ty,En],GZ),$U=ye([Mt,pNe,eg,Ap,zR,LR,iy,MR,En],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=sf(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),rDe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=sf(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Fr(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((_,T)=>{var I=s?s.indexOf(_):_;return{index:T,coordinate:r(I)+b,value:_,offset:b}});return w.filter(_=>sn(_.coordinate))}return u&&o?o.map((_,T)=>({coordinate:r(_)+b,value:_,index:T,offset:b})).filter(_=>sn(_.coordinate)):r.ticks?r.ticks(g).map(_=>({coordinate:r(_)+b,value:_,offset:b})):r.domain().map((_,T)=>({coordinate:r(_)+b,value:s?s[_]:_,index:T,offset:b}))}},HZ=ye([Mt,ty,eg,Ap,MR,iy,zR,LR,En],rDe),iDe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=sf(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Fr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},kp=ye([Mt,ty,Ap,iy,zR,LR,En],iDe),Cp=ye(Nn,Ap,(t,e)=>{if(!(t==null||e==null))return U1(U1({},t),{},{scale:e})}),aDe=ye([Nn,eg,DR,VZ],OR);ye((t,e,n)=>yR(t,n),aDe,(t,e)=>{if(!(t==null||e==null))return U1(U1({},t),{},{scale:e})});var sDe=ye([Mt,p_,g_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),KZ=t=>t.options.defaultTooltipEventType,WZ=t=>t.options.validateTooltipEventTypes;function YZ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function VR(t,e){var n=KZ(t),r=WZ(t);return YZ(e,n,r)}function oDe(t){return qe(e=>VR(e,t))}var XZ=(t,e)=>{var n,r=Number(e);if(!(wa(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},lDe=t=>t.tooltip.settings,Nc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cDe={itemInteraction:{click:Nc,hover:Nc},axisInteraction:{click:Nc,hover:Nc},keyboardInteraction:Nc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},QZ=Yi({name:"tooltip",initialState:cDe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:xn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:xn()},removeTooltipEntrySettings:{reducer(t,e){var n=As(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:xn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:uDe,replaceTooltipEntrySettings:dDe,removeTooltipEntrySettings:fDe,setTooltipSettingsState:hDe,setActiveMouseOverItemIndex:ZZ,mouseLeaveItem:pDe,mouseLeaveChart:JZ,setActiveClickItemIndex:gDe,setMouseOverAxisIndex:eJ,setMouseClickAxisIndex:mDe,setSyncInteraction:fN,setKeyboardInteraction:hN}=QZ.actions,vDe=QZ.reducer;function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){yDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yDe(t,e,n){return(e=bDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bDe(t){var e=xDe(t,"string");return typeof e=="symbol"?e:e+""}function xDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wDe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function SDe(t){return t.index!=null}var tJ=(t,e,n,r)=>{if(e==null)return Nc;var i=wDe(t,e,n);if(i==null)return Nc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(SDe(i)){if(a)return kx(kx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return kx(kx({},Nc),{},{coordinate:i.coordinate})};function _De(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function EDe(t,e){var n=_De(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function TDe(t,e,n){if(n==null||e==null)return!0;var r=mn(t,e);return r==null||!ru(n)?!0:EDe(r,n)}var BR=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!sn(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||TDe(u,n,r)?String(c):null},nJ=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},rJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},ay=t=>t.options.tooltipPayloadSearcher,tg=t=>t.tooltip;function GU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(n),!0).forEach(function(r){ADe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ADe(t,e,n){return(e=kDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kDe(t){var e=CDe(t,"string");return typeof e=="symbol"?e:e+""}function CDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IDe(t,e){return t??e}var iJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,_=IDe(x,o),T=Array.isArray(_)?LX(_,u,f):_,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,O=w?.nameKey,D;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?D=N_e(T,r,i):D=a(T,e,c,O),Array.isArray(D))D.forEach(C=>{var P=HU(HU({},w),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});g.push(Q6({tooltipEntrySettings:P,dataKey:C.dataKey,payload:C.payload,value:mn(C.payload,C.dataKey),name:C.name}))});else{var N;g.push(Q6({tooltipEntrySettings:w,dataKey:I,payload:D,value:mn(D,I),name:(N=mn(D,O))!==null&&N!==void 0?N:w?.name}))}return g},h)}},FR=ye([Or,Mt,TZ,dR,Dr],zZ),PDe=ye([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),NDe=ye([Dr,Zp],bR),ng=ye([PDe,Or,NDe],wR,{memoizeOptions:{resultEqualityCheck:z_}}),DDe=ye([ng],t=>t.filter(M_)),ODe=ye([ng],SR,{memoizeOptions:{resultEqualityCheck:z_}}),rg=ye([ODe,Vl],_R),RDe=ye([DDe,Vl,Or],SZ),UR=ye([rg,Or,ng],TR),aJ=ye([Or],AR),MDe=ye([Or],t=>t.allowDataOverflow),sJ=ye([aJ,MDe],JQ),jDe=ye([ng],t=>t.filter(M_)),zDe=ye([RDe,jDe,J0,gZ],IZ),LDe=ye([zDe,Vl,Dr,sJ],PZ),VDe=ye([ng],kZ),BDe=ye([rg,Or,VDe,V_,Dr],IR,{memoizeOptions:{resultEqualityCheck:j_}}),FDe=ye([NZ,Dr,Zp],Jp),UDe=ye([FDe,Dr],RZ),$De=ye([DZ,Dr,Zp],Jp),qDe=ye([$De,Dr],MZ),GDe=ye([OZ,Dr,Zp],Jp),HDe=ye([GDe,Dr],jZ),KDe=ye([UDe,HDe,qDe],$1),WDe=ye([Or,aJ,sJ,LDe,BDe,KDe,Mt,Dr],PR),sy=ye([Or,Mt,rg,UR,J0,Dr,WDe],NR),YDe=ye([sy,Or,FR],RR),XDe=ye([Or,sy,YDe,Dr],jR),oJ=t=>{var e=Dr(t),n=Zp(t),r=!1;return iy(t,e,n,r)},lJ=ye([Or,oJ],O_),cJ=ye([Or,FR,XDe,lJ],OR),QDe=ye([Mt,UR,Or,Dr],qZ),ZDe=ye([Mt,UR,Or,Dr],GZ),JDe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=sf(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Fr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>({coordinate:r(g)+h,value:g,index:v,offset:h})):r.domain().map((g,v)=>({coordinate:r(g)+h,value:a?a[g]:g,index:v,offset:h}))}}},Bl=ye([Mt,Or,FR,cJ,oJ,QDe,ZDe,Dr],JDe),$R=ye([KZ,WZ,lDe],(t,e,n)=>YZ(n.shared,t,e)),uJ=t=>t.tooltip.settings.trigger,qR=t=>t.tooltip.settings.defaultIndex,oy=ye([tg,$R,uJ,qR],tJ),Yd=ye([oy,rg,ry,sy],BR),dJ=ye([Bl,Yd],XZ),GR=ye([oy],t=>{if(t)return t.dataKey}),e2e=ye([oy],t=>{if(t)return t.graphicalItemId}),fJ=ye([tg,$R,uJ,qR],rJ),t2e=ye([jl,zl,Mt,Pr,Bl,qR,fJ,ay],nJ),n2e=ye([oy,t2e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),r2e=ye([oy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),i2e=ye([fJ,Yd,Vl,ry,dJ,ay,$R],iJ);ye([i2e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function KU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(n),!0).forEach(function(r){a2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a2e(t,e,n){return(e=s2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s2e(t){var e=o2e(t,"string");return typeof e=="symbol"?e:e+""}function o2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l2e=()=>qe(Or),c2e=()=>{var t=l2e(),e=qe(Bl),n=qe(cJ);return S1(!t||!n?void 0:WU(WU({},t),{},{scale:n}),e)};function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){u2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u2e(t,e,n){return(e=d2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d2e(t){var e=f2e(t,"string");return typeof e=="symbol"?e:e+""}function f2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h2e=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},p2e=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return uh(uh(uh({},r),fr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return uh(uh(uh({},r),fr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function g2e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var hJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Fr(b-v)!==Fr(x-b)){var _=[];if(Fr(x-b)===Fr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];_[0]=Math.min(T,(T+v)/2),_[1]=Math.max(T,(T+v)/2)}else{w=v;var I=x+i[1]-i[0];_[0]=Math.min(b,(I+b)/2),_[1]=Math.max(b,(I+b)/2)}var O=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>O[0]&&t<=O[1]||t>=_[0]&&t<=_[1]){var D;return(D=n[o])===null||D===void 0?void 0:D.index}}else{var N=Math.min(v,x),C=Math.max(v,x);if(t>(N+b)/2&&t<=(C+b)/2){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}}else if(e)for(var R=0;R<s;R++){var j=e[R];if(j!=null){var L=e[R+1],B=e[R-1];if(R===0&&L!=null&&t<=(j.coordinate+L.coordinate)/2||R===s-1&&B!=null&&t>(j.coordinate+B.coordinate)/2||R>0&&R<s-1&&B!=null&&L!=null&&t>(j.coordinate+B.coordinate)/2&&t<=(j.coordinate+L.coordinate)/2)return j.index}}return-1},m2e=()=>qe(dR),HR=(t,e)=>e,pJ=(t,e,n)=>n,KR=(t,e,n,r)=>r,v2e=ye(Bl,t=>r_(t,e=>e.coordinate)),WR=ye([tg,HR,pJ,KR],tJ),YR=ye([WR,rg,ry,sy],BR),y2e=(t,e,n)=>{if(e!=null){var r=tg(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},gJ=ye([tg,HR,pJ,KR],rJ),q1=ye([jl,zl,Mt,Pr,Bl,KR,gJ,ay],nJ),b2e=ye([WR,q1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),mJ=ye([Bl,YR],XZ),x2e=ye([gJ,YR,Vl,ry,mJ,ay,HR],iJ),w2e=ye([WR,YR],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),S2e=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&g2e(t,s)){var o=iAe(t,e),c=hJ(o,a,i,n,r),u=h2e(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},_2e=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=sCe(t,n);if(o){var c=aAe(o,e),u=hJ(c,s,a,r,i),f=p2e(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},E2e=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?S2e(t,e,r,i,a,s,o):_2e(t,e,n,r,i,a,s)},T2e=ye(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),A2e=ye(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ur)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:cNe}});function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(r){k2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k2e(t,e,n){return(e=C2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C2e(t){var e=I2e(t,"string");return typeof e=="symbol"?e:e+""}function I2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P2e={},N2e={zIndexMap:Object.values(Ur).reduce((t,e)=>QU(QU({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),P2e)},D2e=new Set(Object.values(Ur));function O2e(t){return D2e.has(t)}var vJ=Yi({name:"zIndex",initialState:N2e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:xn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!O2e(n)&&delete t.zIndexMap[n])},prepare:xn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:xn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:xn()}}}),{registerZIndexPortal:R2e,unregisterZIndexPortal:M2e,registerZIndexPortalElement:j2e,unregisterZIndexPortalElement:z2e}=vJ.actions,L2e=vJ.reducer;function ns(t){var{zIndex:e,children:n}=t,r=MAe(),i=r&&e!==void 0&&e!==0,a=Ci(),s=vn();A.useLayoutEffect(()=>i?(s(R2e({zIndex:e})),()=>{s(M2e({zIndex:e}))}):U0,[s,e,i]);var o=qe(c=>T2e(c,e,a));return i?o?V8.createPortal(n,o):null:n}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(null,arguments)}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(r){V2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e,n){return(e=B2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B2e(t){var e=F2e(t,"string");return typeof e=="symbol"?e:e+""}function F2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U2e(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function $2e(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=xke,w=Ur.cursorLine;else if(f==="BarChart")b=wke(o,h,a,s),x=fQ,w=Ur.cursorRectangle;else if(o==="radial"&&YY(h)){var{cx:_,cy:T,radius:I,startAngle:O,endAngle:D}=pQ(h);b={cx:_,cy:T,startAngle:O,endAngle:D,innerRadius:I,outerRadius:I},x=mQ,w=Ur.cursorLine}else b={points:uCe(o,h,a)},x=VO,w=Ur.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,C=Cx(Cx(Cx(Cx({stroke:"#ccc",pointerEvents:"none"},a),b),Fv(c)),{},{payload:g,payloadIndex:v,className:Wt("recharts-tooltip-cursor",N)});return A.createElement(ns,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(U2e,{cursor:c,cursorComp:x,cursorProps:C}))}function q2e(t){var e=c2e(),n=WX(),r=K0(),i=m2e();return e==null||n==null||r==null||i==null?null:A.createElement($2e,pN({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var yJ=A.createContext(null),G2e=()=>A.useContext(yJ),EC={exports:{}},JU;function H2e(){return JU||(JU=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],_=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(I=1,T=new Array(_-1);I<_;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var O=w.length,D;for(I=0;I<O;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),_){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(D=1,T=new Array(_-1);D<_;D++)T[D-1]=arguments[D];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],_=b.length;x<_;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(EC)),EC.exports}var K2e=H2e();const W2e=Dl(K2e);var t0=new W2e,gN="recharts.syncEvent.tooltip",e9="recharts.syncEvent.brush";function bJ(t,e){if(e){var n=Number.parseInt(e,10);if(!wa(n))return t?.[n]}}var Y2e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},xJ=Yi({name:"options",initialState:Y2e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),X2e=xJ.reducer,{createEventEmitter:Q2e}=xJ.actions;function Z2e(t){return t.tooltip.syncInteraction}var J2e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},wJ=Yi({name:"chartData",initialState:J2e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:t9,setDataStartEndIndexes:eOe,setComputedData:j3e}=wJ.actions,tOe=wJ.reducer,nOe=["x","y"];function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){rOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rOe(t,e,n){return(e=iOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iOe(t){var e=aOe(t,"string");return typeof e=="symbol"?e:e+""}function aOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sOe(t,e){if(t==null)return{};var n,r,i=oOe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lOe(){var t=qe(fR),e=qe(hR),n=vn(),r=qe(mZ),i=qe(Bl),a=K0(),s=H0(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return U0;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=sOe(v,nOe),{x:_,y:T,width:I,height:O}=f.payload.sourceViewBox,D=dh(dh({},w),{},{x:s.x+(I?(b-_)/I:0)*s.width,y:s.y+(O?(x-T)/O:0)*s.height});n(dh(dh({},f),{},{payload:dh(dh({},f.payload),{},{coordinate:D})}))}else n(f);return}if(i!=null){var N;if(typeof r=="function"){var C={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=r(i,C);N=i[P]}else r==="value"&&(N=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(N==null||f.payload.active===!1||R==null||s==null){n(fN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:L}=R,B=Math.min(j,s.x+s.width),z=Math.min(L,s.y+s.height),W={x:a==="horizontal"?N.coordinate:B,y:a==="horizontal"?z:N.coordinate},Z=fN({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(N.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Z)}}};return t0.on(gN,c),()=>{t0.off(gN,c)}},[o,n,e,t,r,i,a,s])}function cOe(){var t=qe(fR),e=qe(hR),n=vn();A.useEffect(()=>{if(t==null)return U0;var r=(i,a,s)=>{e!==s&&t===i&&n(eOe(a))};return t0.on(e9,r),()=>{t0.off(e9,r)}},[n,e,t])}function uOe(){var t=vn();A.useEffect(()=>{t(Q2e())},[t]),lOe(),cOe()}function dOe(t,e,n,r,i,a){var s=qe(v=>y2e(v,t,e)),o=qe(hR),c=qe(fR),u=qe(mZ),f=qe(Z2e),h=f?.active,g=H0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=fN({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});t0.emit(gN,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function r9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r9(Object(n),!0).forEach(function(r){fOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fOe(t,e,n){return(e=hOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hOe(t){var e=pOe(t,"string");return typeof e=="symbol"?e:e+""}function pOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gOe(t){return t.dataKey}function mOe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(JAe,e)}var a9=[],vOe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function U_(t){var e,n,r=ri(t,vOe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:_,shared:T,trigger:I,defaultIndex:O,portal:D,axisId:N}=r,C=vn(),P=typeof O=="number"?String(O):O;A.useEffect(()=>{C(hDe({shared:T,trigger:I,axisId:N,active:i,defaultIndex:P}))},[C,T,I,N,i,P]);var R=H0(),j=oQ(),L=oDe(T),{activeIndex:B,isActive:z}=(e=qe(oe=>w2e(oe,L,I,P)))!==null&&e!==void 0?e:{},W=qe(oe=>x2e(oe,L,I,P)),Z=qe(oe=>mJ(oe,L,I,P)),G=qe(oe=>b2e(oe,L,I,P)),Y=W,Q=G2e(),ee=(n=i??z)!==null&&n!==void 0?n:!1,[te,U]=UEe([Y,ee]),X=L==="axis"?Z:void 0;dOe(L,I,G,X,B,ee);var ne=D??Q;if(ne==null||R==null||L==null)return null;var K=Y??a9;ee||(K=a9),u&&K.length&&(K=pEe(K.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,gOe));var ue=K.length>0,ie=A.createElement(ske,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ee,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:te,innerRef:U,hasPortalFromProps:!!D},mOe(c,i9(i9({},r),{},{payload:K,label:X,active:ee,activeIndex:B,coordinate:G,accessibilityLayer:j})));return A.createElement(A.Fragment,null,V8.createPortal(ie,ne),ee&&A.createElement(q2e,{cursor:_,tooltipEventType:L,coordinate:G,payload:K,index:B}))}var ly=t=>null;ly.displayName="Cell";function yOe(t,e,n){return(e=bOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bOe(t){var e=xOe(t,"string");return typeof e=="symbol"?e:e+""}function xOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class wOe{constructor(e){yOe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function s9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SOe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(r){_Oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Oe(t,e,n){return(e=EOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EOe(t){var e=TOe(t,"string");return typeof e=="symbol"?e:e+""}function TOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AOe={cacheSize:2e3,enableCache:!0},SJ=SOe({},AOe),o9=new wOe(SJ.cacheSize),kOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},l9="recharts_measurement_span";function COe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var c9=(t,e)=>{try{var n=document.getElementById(l9);n||(n=document.createElement("span"),n.setAttribute("id",l9),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,kOe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},sv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||__.isSsr)return{width:0,height:0};if(!SJ.enableCache)return c9(e,n);var r=COe(e,n),i=o9.get(r);if(i)return i;var a=c9(e,n);return o9.set(r,a),a},_J;function IOe(t,e,n){return(e=POe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function POe(t){var e=NOe(t,"string");return typeof e=="symbol"?e:e+""}function NOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ROe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},MOe=["cm","mm","pt","pc","in","Q","px"];function jOe(t){return MOe.includes(t)}var Dh="NaN";function zOe(t,e){return t*ROe[e]}class ti{static parse(e){var n,[,r,i]=(n=OOe.exec(e))!==null&&n!==void 0?n:[];return r==null?ti.NaN:new ti(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,wa(e)&&(this.unit=""),n!==""&&!DOe.test(n)&&(this.num=NaN,this.unit=""),jOe(n)&&(this.num=zOe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return wa(this.num)}}_J=ti;IOe(ti,"NaN",new _J(NaN,""));function EJ(t){if(t==null||t.includes(Dh))return Dh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=u9.exec(e))!==null&&n!==void 0?n:[],s=ti.parse(r??""),o=ti.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Dh;e=e.replace(u9,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=d9.exec(e))!==null&&u!==void 0?u:[],v=ti.parse(f??""),b=ti.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return Dh;e=e.replace(d9,x.toString())}return e}var f9=/\(([^()]*)\)/;function LOe(t){for(var e=t,n;(n=f9.exec(e))!=null;){var[,r]=n;e=e.replace(f9,EJ(r))}return e}function VOe(t){var e=t.replace(/\s+/g,"");return e=LOe(e),e=EJ(e),e}function BOe(t){try{return VOe(t)}catch{return Dh}}function TC(t){var e=BOe(t.slice(5,-1));return e===Dh?"":e}var FOe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],UOe=["dx","dy","angle","className","breakAll"];function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mN.apply(null,arguments)}function h9(t,e){if(t==null)return{};var n,r,i=$Oe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $Oe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TJ=/[ \f\n\r\t\v\u2028\u2029]+/,AJ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];$r(e)||(n?i=e.toString().split(""):i=e.toString().split(TJ));var a=i.map(o=>({word:o,width:sv(o,r).width})),s=n?0:sv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function qOe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var kJ=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),CJ=t=>t.reduce((e,n)=>e.width>n.width?e:n),GOe="",p9=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=AJ({breakAll:n,style:r,children:c+GOe});if(!u)return[!1,[]];var f=kJ(u.wordsWithComputedWidth,a,s,o),h=f.length>i||CJ(f).width>Number(a);return[h,f]},HOe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=Ke(a),f=String(s),h=kJ(e,r,n,i);if(!u||i)return h;var g=h.length>a||CJ(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var _=Math.floor((v+b)/2),T=_-1,[I,O]=p9(f,T,c,o,a,r,n,i),[D]=p9(f,_,c,o,a,r,n,i);if(!I&&!D&&(v=_+1),I&&D&&(b=_-1),!I&&D){w=O;break}x++}return w||h},g9=t=>{var e=$r(t)?[]:t.toString().split(TJ);return[{words:e,width:void 0}]},KOe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!__.isSsr){var o,c,u=AJ({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return g9(r);return HOe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return g9(r)},IJ="#808080",WOe={angle:0,breakAll:!1,capHeight:"0.71em",fill:IJ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$_=A.forwardRef((t,e)=>{var n=ri(t,WOe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=h9(n,FOe),g=A.useMemo(()=>KOe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:_}=h,T=h9(h,UOe);if(!Ya(r)||!Ya(i)||g.length===0)return null;var I=Number(r)+(Ke(v)?v:0),O=Number(i)+(Ke(b)?b:0);if(!sn(I)||!sn(O))return null;var D;switch(f){case"start":D=TC("calc(".concat(s,")"));break;case"middle":D=TC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:D=TC("calc(".concat(g.length-1," * -").concat(a,")"));break}var N=[];if(c){var C=g[0].width,{width:P}=h;N.push("scale(".concat(Ke(P)&&Ke(C)?P/C:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(I,", ").concat(O,")")),N.length&&(T.transform=N.join(" ")),A.createElement("text",mN({},xa(T),{ref:e,x:I,y:O,className:Wt("recharts-text",w),textAnchor:u,fill:o.includes("url")?IJ:o}),g.map((R,j)=>{var L=R.words.join(_?"":" ");return A.createElement("tspan",{x:I,dy:j===0?D:a,key:"".concat(L,"-").concat(j)},L)}))});$_.displayName="Text";var YOe=["labelRef"],XOe=["content"];function m9(t,e){if(t==null)return{};var n,r,i=QOe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function v9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v9(Object(n),!0).forEach(function(r){ZOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZOe(t,e,n){return(e=JOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JOe(t){var e=eRe(t,"string");return typeof e=="symbol"?e:e+""}function eRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},el.apply(null,arguments)}var PJ=A.createContext(null),NJ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(PJ.Provider,{value:c},o)},DJ=()=>{var t=A.useContext(PJ),e=H0();return t||KX(e)},tRe=A.createContext(null),nRe=()=>{var t=A.useContext(tRe),e=qe(wZ);return t||e},rRe=t=>{var{value:e,formatter:n}=t,r=$r(t.children)?e:t.children;return typeof n=="function"?n(r):r},XR=t=>t!=null&&typeof t=="function",iRe=(t,e)=>{var n=Fr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},aRe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=iRe(h,g),w=x>=0?1:-1,_,T;switch(e){case"insideStart":_=h+w*a,T=v;break;case"insideEnd":_=g-w*a,T=!v;break;case"end":_=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=fr(o,c,b,_),O=fr(o,c,b,_+(T?1:-1)*359),D="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(O.x,",").concat(O.y),N=$r(t.id)?Uv("recharts-radial-line-"):t.id;return A.createElement("text",el({},r,{dominantBaseline:"central",className:Wt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:N,d:D})),A.createElement("textPath",{xlinkHref:"#".concat(N)},n))},sRe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=fr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=fr(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},vN=t=>"cx"in t&&Ke(t.cx),oRe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!vN(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,v=(h+g)/2,b=(c+u)/2,x=h+c/2,w=f>=0?1:-1,_=w*r,T=w>0?"end":"start",I=w>0?"start":"end",O=c>=0?1:-1,D=O*r,N=O>0?"end":"start",C=O>0?"start":"end";if(i==="top"){var P={x:h+c/2,y:o-_,textAnchor:"middle",verticalAnchor:T};return Kn(Kn({},P),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:g+u/2,y:o+f+_,textAnchor:"middle",verticalAnchor:I};return Kn(Kn({},R),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var j={x:v-D,y:o+f/2,textAnchor:N,verticalAnchor:"middle"};return Kn(Kn({},j),a?{width:Math.max(j.x-a.x,0),height:f}:{})}if(i==="right"){var L={x:v+b+D,y:o+f/2,textAnchor:C,verticalAnchor:"middle"};return Kn(Kn({},L),a?{width:Math.max(a.x+a.width-L.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?Kn({x:v+D,y:o+f/2,textAnchor:C,verticalAnchor:"middle"},B):i==="insideRight"?Kn({x:v+b-D,y:o+f/2,textAnchor:N,verticalAnchor:"middle"},B):i==="insideTop"?Kn({x:h+c/2,y:o+_,textAnchor:"middle",verticalAnchor:I},B):i==="insideBottom"?Kn({x:g+u/2,y:o+f-_,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?Kn({x:h+D,y:o+_,textAnchor:C,verticalAnchor:I},B):i==="insideTopRight"?Kn({x:h+c-D,y:o+_,textAnchor:N,verticalAnchor:I},B):i==="insideBottomLeft"?Kn({x:g+D,y:o+f-_,textAnchor:C,verticalAnchor:T},B):i==="insideBottomRight"?Kn({x:g+u-D,y:o+f-_,textAnchor:N,verticalAnchor:T},B):i&&typeof i=="object"&&(Ke(i.x)||Tl(i.x))&&(Ke(i.y)||Tl(i.y))?Kn({x:s+hi(i.x,b),y:o+hi(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Kn({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},lRe={angle:0,offset:5,zIndex:Ur.label,position:"middle",textBreakAll:!1};function Tc(t){var e=ri(t,lRe),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=nRe(),h=DJ(),g=r==="center"?h:f??h,v,b,x;if(n==null?v=g:vN(n)?v=n:v=KX(n),!v||$r(i)&&$r(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=Kn(Kn({},e),{},{viewBox:v});if(A.isValidElement(s)){var{labelRef:_}=w,T=m9(w,YOe);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:I}=w,O=m9(w,XOe);if(b=A.createElement(s,O),A.isValidElement(b))return b}else b=rRe(e);var D=xa(e);if(vN(v)){if(r==="insideStart"||r==="insideEnd"||r==="end")return aRe(e,r,b,D,v);x=sRe(v,e.offset,e.position)}else x=oRe(e,v);return A.createElement(ns,{zIndex:e.zIndex},A.createElement($_,el({ref:u,className:Wt("recharts-label",o)},D,x,{textAnchor:qOe(D.textAnchor)?D.textAnchor:x.textAnchor,breakAll:c}),b))}Tc.displayName="Label";var cRe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Tc,el({key:"label-implicit"},r)):Ya(t)?A.createElement(Tc,el({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Tc?A.cloneElement(t,Kn({key:"label-implicit"},r)):A.createElement(Tc,el({key:"label-implicit",content:t},r)):XR(t)?A.createElement(Tc,el({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Tc,el({},t,{key:"label-implicit"},r)):null};function OJ(t){var{label:e,labelRef:n}=t,r=DJ();return cRe(e,r,n)||null}var AC={},kC={},y9;function uRe(){return y9||(y9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(kC)),kC}var CC={},b9;function dRe(){return b9||(b9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(CC)),CC}var x9;function fRe(){return x9||(x9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uRe(),n=dRe(),r=kO();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(AC)),AC}var IC,w9;function hRe(){return w9||(w9=1,IC=fRe().last),IC}var pRe=hRe();const gRe=Dl(pRe);var mRe=["valueAccessor"],vRe=["dataKey","clockWise","id","textBreakAll","zIndex"];function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(null,arguments)}function S9(t,e){if(t==null)return{};var n,r,i=yRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bRe=t=>Array.isArray(t.value)?gRe(t.value):t.value,RJ=A.createContext(void 0),xRe=RJ.Provider,MJ=A.createContext(void 0),wRe=MJ.Provider;function SRe(){return A.useContext(RJ)}function _Re(){return A.useContext(MJ)}function cw(t){var{valueAccessor:e=bRe}=t,n=S9(t,mRe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=S9(n,vRe),u=SRe(),f=_Re(),h=u||f;return!h||!h.length?null:A.createElement(ns,{zIndex:o??Ur.label},A.createElement(gi,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=$r(r)?e(g,v):mn(g&&g.payload,r),w=$r(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(Tc,G1({key:"label-".concat(v)},xa(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}cw.displayName="LabelList";function jJ(t){var{label:e}=t;return e?e===!0?A.createElement(cw,{key:"labelList-implicit"}):A.isValidElement(e)||XR(e)?A.createElement(cw,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(cw,G1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var zJ=t=>t.graphicalItems.polarItems,ERe=ye([En,ey],bR),q_=ye([zJ,Nn,ERe],wR),TRe=ye([q_],SR),G_=ye([TRe,D_],_R),ARe=ye([G_,Nn,q_],TR);ye([G_,Nn,q_],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=mn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:mn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var _9=()=>{},kRe=ye([G_,Nn,q_,V_,En],IR),CRe=ye([Nn,kR,CR,_9,kRe,_9,Mt,En],PR),LJ=ye([Nn,Mt,G_,ARe,J0,En,CRe],NR),IRe=ye([LJ,Nn,eg],RR);ye([Nn,LJ,IRe,En],jR);var PRe={radiusAxis:{},angleAxis:{}},VJ=Yi({name:"polarAxis",initialState:PRe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:z3e,removeRadiusAxis:L3e,addAngleAxis:V3e,removeAngleAxis:B3e}=VJ.actions,NRe=VJ.reducer;function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){DRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DRe(t,e,n){return(e=ORe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ORe(t){var e=RRe(t,"string");return typeof e=="symbol"?e:e+""}function RRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MRe=(t,e)=>e,QR=ye([zJ,MRe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),jRe=[],ZR=(t,e,n)=>n?.length===0?jRe:n,BJ=ye([D_,QR,ZR],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>T9(T9({},e.presentationProps),a.props))),i!=null)return i}}),zRe=ye([BJ,QR,ZR],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=mn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:h_(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),LRe=ye([BJ,QR,ZR,Pr],(t,e,n,r)=>{if(!(e==null||t==null))return UMe({offset:r,pieSettings:e,displayedData:t,cells:n})}),PC={exports:{}},Jt={};var A9;function VRe(){if(A9)return Jt;A9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Jt.ContextConsumer=a,Jt.ContextProvider=s,Jt.Element=t,Jt.ForwardRef=o,Jt.Fragment=n,Jt.Lazy=h,Jt.Memo=f,Jt.Portal=e,Jt.Profiler=i,Jt.StrictMode=r,Jt.Suspense=c,Jt.SuspenseList=u,Jt.isContextConsumer=function(x){return b(x)===a},Jt.isContextProvider=function(x){return b(x)===s},Jt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Jt.isForwardRef=function(x){return b(x)===o},Jt.isFragment=function(x){return b(x)===n},Jt.isLazy=function(x){return b(x)===h},Jt.isMemo=function(x){return b(x)===f},Jt.isPortal=function(x){return b(x)===e},Jt.isProfiler=function(x){return b(x)===i},Jt.isStrictMode=function(x){return b(x)===r},Jt.isSuspense=function(x){return b(x)===c},Jt.isSuspenseList=function(x){return b(x)===u},Jt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Jt.typeOf=b,Jt}var k9;function BRe(){return k9||(k9=1,PC.exports=VRe()),PC.exports}var FRe=BRe(),C9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",I9=null,NC=null,FJ=t=>{if(t===I9&&Array.isArray(NC))return NC;var e=[];return A.Children.forEach(t,n=>{$r(n)||(FRe.isFragment(n)?e=e.concat(FJ(n.props.children)):e.push(n))}),NC=e,I9=t,e};function JR(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>C9(i)):r=[C9(e)],FJ(t).forEach(i=>{var a=qd(i,"type.displayName")||qd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var DC={},P9;function URe(){return P9||(P9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(DC)),DC}var OC,N9;function $Re(){return N9||(N9=1,OC=URe().isPlainObject),OC}var qRe=$Re();const GRe=Dl(qRe);var D9,O9,R9,M9,j9;function z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(n),!0).forEach(function(r){HRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HRe(t,e,n){return(e=KRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KRe(t){var e=WRe(t,"string");return typeof e=="symbol"?e:e+""}function WRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H1(){return H1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H1.apply(null,arguments)}function Sm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var V9=(t,e,n,r,i)=>{var a=n-r,s;return s=jn(D9||(D9=Sm(["M ",",",""])),t,e),s+=jn(O9||(O9=Sm(["L ",",",""])),t+n,e),s+=jn(R9||(R9=Sm(["L ",",",""])),t+n-a/2,e+i),s+=jn(M9||(M9=Sm(["L ",",",""])),t+n-a/2-r,e+i),s+=jn(j9||(j9=Sm(["L ",","," Z"])),t,e),s},YRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XRe=t=>{var e=ri(t,YRe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),_=A.useRef(s),T=A.useRef(n),I=A.useRef(r),O=T_(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var W=g.current.getTotalLength();W&&b(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var D=Wt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",H1({},xa(e),{className:D,d:V9(n,r,i,a,s)})));var N=x.current,C=w.current,P=_.current,R=T.current,j=I.current,L="0px ".concat(v===-1?1:v,"px"),B="".concat(v,"px 0px"),z=lQ(["strokeDasharray"],u,c);return A.createElement(E_,{animationId:O,key:O,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},W=>{var Z=wr(N,i,W),G=wr(C,a,W),Y=wr(P,s,W),Q=wr(R,n,W),ee=wr(j,r,W);g.current&&(x.current=Z,w.current=G,_.current=Y,T.current=Q,I.current=ee);var te=W>0?{transition:z,strokeDasharray:B}:{strokeDasharray:L};return A.createElement("path",H1({},xa(e),{className:D,d:V9(Q,ee,Z,G,Y),ref:g,style:L9(L9({},te),e.style)}))})},QRe=["option","shapeType","activeClassName"];function ZRe(t,e){if(t==null)return{};var n,r,i=JRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){eMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eMe(t,e,n){return(e=tMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tMe(t){var e=nMe(t,"string");return typeof e=="symbol"?e:e+""}function nMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rMe(t,e){return K1(K1({},e),t)}function iMe(t,e){return t==="symbols"}function F9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(fQ,n);case"trapezoid":return A.createElement(XRe,n);case"sector":return A.createElement(mQ,n);case"symbols":if(iMe(e))return A.createElement(WY,n);break;case"curve":return A.createElement(VO,n);default:return null}}function aMe(t){return A.isValidElement(t)?t.props:t}function UJ(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=ZRe(t,QRe),a;if(A.isValidElement(e))a=A.cloneElement(e,K1(K1({},i),aMe(e)));else if(typeof e=="function")a=e(i,i.index);else if(GRe(e)&&typeof e!="boolean"){var s=rMe(e,i);a=A.createElement(F9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(F9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(gi,{className:r},a):a}var eM=(t,e,n)=>{var r=vn();return(i,a)=>s=>{t?.(i,a,s),r(ZZ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},tM=t=>{var e=vn();return(n,r)=>i=>{t?.(n,r,i),e(pDe())}},nM=(t,e,n)=>{var r=vn();return(i,a)=>s=>{t?.(i,a,s),r(gDe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function $J(t){var{tooltipEntrySettings:e}=t,n=vn(),r=Ci(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(uDe(e)):i.current!==e&&n(dDe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(fDe(i.current)),i.current=null)},[n]),null}function sMe(t){var{legendPayload:e}=t,n=vn(),r=Ci(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(iQ(e)):i.current!==e&&n(aQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(sQ(i.current)),i.current=null)},[n]),null}function oMe(t){var{legendPayload:e}=t,n=vn(),r=qe(Mt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(iQ(e)):i.current!==e&&n(aQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(sQ(i.current)),i.current=null)},[n]),null}var RC,lMe=()=>{var[t]=A.useState(()=>Uv("uid-"));return t},cMe=(RC=one.useId)!==null&&RC!==void 0?RC:lMe;function uMe(t,e){var n=cMe();return e||(t?"".concat(t,"-").concat(n):n)}var dMe=A.createContext(void 0),qJ=t=>{var{id:e,type:n,children:r}=t,i=uMe("recharts-".concat(n),e);return A.createElement(dMe.Provider,{value:i},r(i))},fMe={cartesianItems:[],polarItems:[]},GJ=Yi({name:"graphicalItems",initialState:fMe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:xn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=As(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:xn()},removeCartesianGraphicalItem:{reducer(t,e){var n=As(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:xn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:xn()},removePolarGraphicalItem:{reducer(t,e){var n=As(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:xn()}}}),{addCartesianGraphicalItem:hMe,replaceCartesianGraphicalItem:pMe,removeCartesianGraphicalItem:gMe,addPolarGraphicalItem:mMe,removePolarGraphicalItem:vMe}=GJ.actions,yMe=GJ.reducer,bMe=t=>{var e=vn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(hMe(t)):n.current!==t&&e(pMe({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(gMe(n.current)),n.current=null)},[e]),null},xMe=A.memo(bMe);function wMe(t){var e=vn();return A.useLayoutEffect(()=>(e(mMe(t)),()=>{e(vMe(t))}),[e,t]),null}var SMe=["key"],_Me=["onMouseEnter","onClick","onMouseLeave"],EMe=["id"],TMe=["id"];function U9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(n),!0).forEach(function(r){AMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AMe(t,e,n){return(e=kMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kMe(t){var e=CMe(t,"string");return typeof e=="symbol"?e:e+""}function CMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iu.apply(null,arguments)}function H_(t,e){if(t==null)return{};var n,r,i=IMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PMe(t){var e=A.useMemo(()=>JR(t.children,ly),[t.children]),n=qe(r=>zRe(r,t.id,e));return n==null?null:A.createElement(oMe,{legendPayload:n})}var NMe=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:h_(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement($J,{tooltipEntrySettings:h})}),DMe=(t,e)=>t>e?"start":t<e?"end":"middle",OMe=(t,e,n)=>hi(typeof e=="function"?e(t):e,n,n*.8),RMe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=hQ(a,s),c=i+hi(t.cx,a,a/2),u=r+hi(t.cy,s,s/2),f=hi(t.innerRadius,o,0),h=OMe(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},MMe=(t,e)=>{var n=Fr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function jMe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var zMe=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Wt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=H_(e,SMe);return A.createElement(VO,iu({},i,{type:"linear",className:n}))},LMe=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Wt("recharts-pie-label-text",jMe(t));return A.createElement($_,iu({},e,{alignmentBaseline:"middle",className:i}),r)};function VMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Ps(n),c=Fv(i),u=Fv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=fr(g.cx,g.cy,g.outerRadius+f,b),w=zn(zn(zn(zn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:DMe(x.x,g.cx)},x),_=zn(zn(zn(zn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[fr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(ns,{zIndex:Ur.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(gi,null,a&&zMe(a,_),LMe(i,w,mn(g,s))))});return A.createElement(gi,{className:"recharts-pie-labels"},h)}function BMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(jJ,{label:i}):A.createElement(VMe,{sectors:e,props:n,showLabels:r})}function FMe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(Yd),c=qe(GR),u=qe(e2e),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=H_(i,_Me),b=eM(f,i.dataKey,s),x=tM(g),w=nM(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((_,T)=>{if(_?.startAngle===0&&_?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,O=String(T)===o&&(c==null||i.dataKey===c)&&I,D=o?r:null,N=n&&O?n:D,C=zn(zn({},_),{},{stroke:_.stroke,tabIndex:-1,[UX]:T,[$X]:s});return A.createElement(gi,iu({key:"sector-".concat(_?.startAngle,"-").concat(_?.endAngle,"-").concat(_.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},n_(v,_,T),{onMouseEnter:b(_,T),onMouseLeave:x(_,T),onClick:w(_,T)}),A.createElement(UJ,iu({option:a??N,index:T,shapeType:"sector",isActive:O},C)))}))}function UMe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=MMe(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(N=>mn(N,u,0)!==0).length,_=(b>=360?w:w-1)*x,T=b-w*g-_,I=r.reduce((N,C)=>{var P=mn(C,u,0);return N+(Ke(P)?P:0)},0),O;if(I>0){var D;O=r.map((N,C)=>{var P=mn(N,u,0),R=mn(N,f,C),j=RMe(n,a,N),L=(Ke(P)?P:0)/I,B,z=zn(zn({},N),i&&i[C]&&i[C].props);C?B=D.endAngle+Fr(v)*x*(P!==0?1:0):B=o;var W=B+Fr(v)*((P!==0?g:0)+L*T),Z=(B+W)/2,G=(j.innerRadius+j.outerRadius)/2,Y=[{name:R,value:P,payload:z,dataKey:u,type:h,graphicalItemId:n.id}],Q=fr(j.cx,j.cy,G,Z);return D=zn(zn(zn(zn({},n.presentationProps),{},{percent:L,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:Y,midAngle:Z,middleRadius:G,tooltipPosition:Q},z),j),{},{value:P,dataKey:u,startAngle:B,endAngle:W,payload:z,paddingAngle:Fr(v)*x}),D})}return O}function $Me(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(wRe,{value:e?i:void 0},r)}function qMe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=T_(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),_=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement($Me,{showLabels:!x,sectors:i},A.createElement(E_,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:_,key:v},I=>{var O=[],D=i&&i[0],N=D?.startAngle;return i?.forEach((C,P)=>{var R=b&&b[P],j=P>0?qd(C,"paddingAngle",0):0;if(R){var L=wr(R.endAngle-R.startAngle,C.endAngle-C.startAngle,I),B=zn(zn({},C),{},{startAngle:N+j,endAngle:N+L+j});O.push(B),N=B.endAngle}else{var{endAngle:z,startAngle:W}=C,Z=wr(0,z-W,I),G=zn(zn({},C),{},{startAngle:N+j,endAngle:N+Z+j});O.push(G),N=G.endAngle}}),n.current=O,A.createElement(gi,null,A.createElement(FMe,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(BMe,{showLabels:!x,sectors:i,props:e}),e.children)}var GMe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ur.area};function HMe(t){var{id:e}=t,n=H_(t,EMe),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>JR(t.children,ly),[t.children]),o=qe(f=>LRe(f,e,s)),c=A.useRef(null),u=Wt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(gi,{tabIndex:a,className:u})):A.createElement(ns,{zIndex:t.zIndex},A.createElement(NMe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(gi,{tabIndex:a,className:u},A.createElement(qMe,{props:zn(zn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function HJ(t){var e=ri(t,GMe),{id:n}=e,r=H_(e,TMe),i=Ps(r);return A.createElement(qJ,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(wMe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(PMe,iu({},r,{id:a})),A.createElement(HMe,iu({},r,{id:a}))))}HJ.displayName="Pie";function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(r){KMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KMe(t,e,n){return(e=WMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WMe(t){var e=YMe(t,"string");return typeof e=="symbol"?e:e+""}function YMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KJ=0,XMe={xAxis:{},yAxis:{},zAxis:{}},WJ=Yi({name:"cartesianAxis",initialState:XMe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:xn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:xn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:xn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:xn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:xn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:xn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:xn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:xn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:xn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=q9(q9({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:QMe,replaceXAxis:ZMe,removeXAxis:JMe,addYAxis:eje,replaceYAxis:tje,removeYAxis:nje,addZAxis:F3e,replaceZAxis:U3e,removeZAxis:$3e,updateYAxisWidth:rje}=WJ.actions,ije=WJ.reducer,aje=ye([Pr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),sje=ye([aje,jl,zl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),YJ=()=>qe(sje),G9=(t,e,n)=>{var r=n??t;if(!$r(r))return hi(r,e,0)},oje=(t,e,n)=>{var r={},i=t.filter(M_),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),r),o=Object.entries(s).map(u=>{var[f,h]=u,g=h.map(b=>b.dataKey),v=G9(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:v}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=G9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function H9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H9(Object(n),!0).forEach(function(r){lje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lje(t,e,n){return(e=cje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cje(t){var e=uje(t,"string");return typeof e=="symbol"?e:e+""}function uje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dje(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=hi(t,n,0,!0),o,c=[];if(sn(r[0].barSize)){var u=!1,f=n/a,h=r.reduce((_,T)=>_+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(u=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,v={offset:g-s,size:0};o=r.reduce((_,T)=>{var I,O={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v.offset+v.size+s,size:u?f:(I=T.barSize)!==null&&I!==void 0?I:0}},D=[..._,O];return v=D[D.length-1].position,D},c)}else{var b=hi(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=sn(i)?Math.min(x,i):x;o=r.reduce((_,T,I)=>[..._,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*I+(x-w)/2,size:w}}],c)}return o}}var fje=(t,e,n,r,i,a,s)=>{var o=$r(s)?e:s,c=dje(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>Ix(Ix({},u),{},{position:Ix(Ix({},u.position),{},{offset:u.position.offset-i/2})}))),c},hje=(t,e)=>{var n=vR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function pje(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&sn(t.zIndex)?t.zIndex:e}var XJ=t=>{var{chartData:e}=t,n=vn(),r=Ci();return A.useEffect(()=>r?()=>{}:(n(t9(e)),()=>{n(t9(void 0))}),[e,n,r]),null},K9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},QJ=Yi({name:"brush",initialState:K9,reducers:{setBrushSettings(t,e){return e.payload==null?K9:e.payload}}}),{setBrushSettings:q3e}=QJ.actions,gje=QJ.reducer;function W9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(n),!0).forEach(function(r){ZJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZJ(t,e,n){return(e=mje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mje(t){var e=vje(t,"string");return typeof e=="symbol"?e:e+""}function vje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yje=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},bje=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return yje({x:e,y:n},{x:r,y:i})};class K_{static create(e){return new K_(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}ZJ(K_,"EPS",1e-4);var xje=t=>{var e=Object.keys(t).reduce((n,r)=>Px(Px({},n),{},{[r]:K_.create(t[r])}),{});return Px(Px({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function wje(t){return(t%180+180)%180}var Sje=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=wje(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},_je={dots:[],areas:[],lines:[]},JJ=Yi({name:"referenceElements",initialState:_je,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=As(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=As(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=As(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:G3e,removeDot:H3e,addArea:K3e,removeArea:W3e,addLine:Eje,removeLine:Tje}=JJ.actions,Aje=JJ.reducer,eee=A.createContext(void 0),kje=t=>{var{children:e}=t,[n]=A.useState("".concat(Uv("recharts"),"-clip")),r=YJ();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(eee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},Cje=()=>A.useContext(eee);function Y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y9(Object(n),!0).forEach(function(r){Ije(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ije(t,e,n){return(e=Pje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pje(t){var e=Nje(t,"string");return typeof e=="symbol"?e:e+""}function Nje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W1.apply(null,arguments)}var Dje=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!sn(e.x1)||!sn(e.y1)||!sn(e.x2)||!sn(e.y2))return null;n=A.createElement("line",W1({},e,{className:"recharts-reference-line-line"}))}return n},Oje=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(wa(c)||e==="discard"&&!i.y.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},Rje=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(wa(c)||e==="discard"&&!i.x.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},Mje=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},jje=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:u}=a,f=Ya(s),h=Ya(o);return h?Oje(o,u,n,i,t,e):f?Rje(s,u,n,r,t,e):c!=null&&c.length===2?Mje(c,u,n,t):null};function zje(t){var e=vn();return A.useEffect(()=>(e(Eje(t)),()=>{e(Tje(t))})),null}function Lje(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ci(),o=Cje(),c=qe(N=>Po(N,e)),u=qe(N=>No(N,n)),f=qe(N=>Ap(N,"xAxis",e,s)),h=qe(N=>Ap(N,"yAxis",n,s)),g=H0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=xje({x:f,y:h}),b=jje(v,g,t.position,c.orientation,u.orientation,t);if(!b)return null;var[{x,y:w},{x:_,y:T}]=b,I=a==="hidden"?"url(#".concat(o,")"):void 0,O=X9(X9({clipPath:I},xa(t)),{},{x1:x,y1:w,x2:_,y2:T}),D=bje({x1:x,y1:w,x2:_,y2:T});return A.createElement(ns,{zIndex:t.zIndex},A.createElement(gi,{className:Wt("recharts-reference-line",i)},Dje(r,O),A.createElement(NJ,W1({},D,{lowerWidth:D.width,upperWidth:D.width}),A.createElement(OJ,{label:t.label}),t.children)))}var Vje={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Ur.line};function rM(t){var e=ri(t,Vje);return A.createElement(A.Fragment,null,A.createElement(zje,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(Lje,e))}rM.displayName="ReferenceLine";function tee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Bje(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Sje(r,n)}function Fje(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function n0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Uje(t,e){return tee(t,e+1)}function $je(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:tee(r,u)};var x=c,w,_=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||n0(t,T,_,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(_()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function qje(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var T=r[b],I=b,O,D=()=>(O===void 0&&(O=n(T,I)),O),N=T.coordinate,C=b===f||n0(t,N,D,h,c);if(!C)return g=!1,1;C&&(h=N+t*(D()/2+i))},b=f;b<s&&!v();b+=u);if(g){for(var x=[],w=f;w<s;w+=u)x.push(r[w]);return x}}return[]}function Q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(n),!0).forEach(function(r){Gje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gje(t,e,n){return(e=Hje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hje(t){var e=Kje(t,"string");return typeof e=="symbol"?e:e+""}function Kje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wje(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g],b,x=()=>(b===void 0&&(b=n(v,g)),b);if(g===s-1){var w=t*(v.coordinate+t*x()/2-c);a[g]=v=si(si({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else a[g]=v=si(si({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var _=n0(t,v.tickCoord,x,o,c);_&&(c=v.tickCoord-t*(x()/2+i),a[g]=si(si({},v),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function Yje(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=si(si({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=n0(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=si(si({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var I=s[T],O,D=()=>(O===void 0&&(O=n(I,T)),O);if(T===0){var N=t*(I.coordinate-t*D()/2-c);s[T]=I=si(si({},I),{},{tickCoord:N<0?I.coordinate-N*t:I.coordinate})}else s[T]=I=si(si({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var C=n0(t,I.tickCoord,D,c,u);C&&(c=I.tickCoord+t*(D()/2+i),s[T]=si(si({},I),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function iM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(Ke(c)||__.isSsr){var g;return(g=Uje(i,Ke(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?sv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(I,O)=>{var D=typeof u=="function"?u(I.value,O):I.value;return b==="width"?Bje(sv(D,{fontSize:e,letterSpacing:n}),x,h):sv(D,{fontSize:e,letterSpacing:n})[b]},_=i.length>=2?Fr(i[1].coordinate-i[0].coordinate):1,T=Fje(a,_,b);return c==="equidistantPreserveStart"?$je(_,T,w,i,s):c==="equidistantPreserveEnd"?qje(_,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=Yje(_,T,w,i,s,c==="preserveStartEnd"):v=Wje(_,T,w,i,s),v.filter(I=>I.isShow))}var Xje=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},Qje=["axisLine","width","height","className","hide","ticks","axisType"];function Zje(t,e){if(t==null)return{};var n,r,i=Jje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xd.apply(null,arguments)}function Z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z9(Object(n),!0).forEach(function(r){eze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eze(t,e,n){return(e=tze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tze(t){var e=nze(t,"string");return typeof e=="symbol"?e:e+""}function nze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ur.axis};function rze(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=cr(cr(cr({},c),Ps(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=cr(cr({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=cr(cr({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",Xd({},u,{className:Wt("recharts-cartesian-axis-line",qd(o,"className"))}))}function ize(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,_=Ke(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=_;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=_;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=_;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=_;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function aze(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function sze(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function oze(t){var{option:e,tickProps:n,value:r}=t,i,a=Wt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,cr(cr({},n),{},{className:a}));else if(typeof e=="function")i=e(cr(cr({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Wt(s,e?.className)),i=A.createElement($_,Xd({},n,{className:s}),r)}return i}var lze=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:_,fontSize:T,letterSpacing:I,getTicksConfig:O,events:D,axisType:N}=t,C=iM(cr(cr({},O),{},{ticks:n}),T,I),P=aze(f,h),R=sze(f,h),j=Ps(O),L=Fv(r),B={};typeof i=="object"&&(B=i);var z=cr(cr({},j),{},{fill:"none"},B),W=C.map(Y=>cr({entry:Y},ize(Y,g,v,b,x,f,w,h,_))),Z=W.map(Y=>{var{entry:Q,line:ee}=Y;return A.createElement(gi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&A.createElement("line",Xd({},z,ee,{className:Wt("recharts-cartesian-axis-tick-line",qd(i,"className"))})))}),G=W.map((Y,Q)=>{var{entry:ee,tick:te}=Y,U=cr(cr(cr(cr({textAnchor:P,verticalAnchor:R},j),{},{stroke:"none",fill:a},L),te),{},{index:Q,payload:ee,visibleTicksCount:C.length,tickFormatter:s,padding:c},u);return A.createElement(gi,Xd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},n_(D,ee,Q)),r&&A.createElement(oze,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(ee.value,Q):ee.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},G.length>0&&A.createElement(ns,{zIndex:Ur.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:e},G)),Z.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},Z))}),cze=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=Zje(t,Qje),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return Xje({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var _=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=_;var T=_[0];if(T){var I=window.getComputedStyle(T),O=I.fontSize,D=I.letterSpacing;(O!==f||D!==g)&&(h(O),v(D))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(ns,{zIndex:t.zIndex},A.createElement(gi,{className:Wt("recharts-cartesian-axis",a)},A.createElement(rze,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ps(t)}),A.createElement(lze,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(NJ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(OJ,{label:t.label,labelRef:t.labelRef}),t.children)))}),aM=A.forwardRef((t,e)=>{var n=ri(t,hl);return A.createElement(cze,Xd({},n,{ref:e}))});aM.displayName="CartesianAxis";var uze=["x1","y1","x2","y2","key"],dze=["offset"],fze=["xAxisId","yAxisId"],hze=["xAxisId","yAxisId"];function J9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(n),!0).forEach(function(r){pze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pze(t,e,n){return(e=gze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gze(t){var e=mze(t,"string");return typeof e=="symbol"?e:e+""}function mze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(null,arguments)}function Y1(t,e){if(t==null)return{};var n,r,i=vze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yze=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function nee(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=Y1(n,uze),h=(i=Ps(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=Y1(h,dze);r=A.createElement("line",vd({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function bze(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=Y1(t,fze),c=i.map((u,f)=>{var h=ci(ci({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(nee,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function xze(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=Y1(t,hze),c=i.map((u,f)=>{var h=ci(ci({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(nee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function wze(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=!u[g+1],b=v?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Sze(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=!u[g+1],b=v?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var _ze=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return VX(iM(ci(ci(ci({},hl),n),{},{ticks:BX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Eze=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return VX(iM(ci(ci(ci({},hl),n),{},{ticks:BX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Tze={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ur.grid};function W_(t){var e=YX(),n=XX(),r=WX(),i=ci(ci({},ri(t,Tze)),{},{x:Ke(t.x)?t.x:r.left,y:Ke(t.y)?t.y:r.top,width:Ke(t.width)?t.width:r.width,height:Ke(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=Ci(),x=qe(R=>$U(R,"xAxis",a,b)),w=qe(R=>$U(R,"yAxis",s,b));if(!To(u)||!To(f)||!Ke(o)||!Ke(c))return null;var _=i.verticalCoordinatesGenerator||_ze,T=i.horizontalCoordinatesGenerator||Eze,{horizontalPoints:I,verticalPoints:O}=i;if((!I||!I.length)&&typeof T=="function"){var D=g&&g.length,N=T({yAxis:w?ci(ci({},w),{},{ticks:D?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},D?!0:h);_1(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(I=N)}if((!O||!O.length)&&typeof _=="function"){var C=v&&v.length,P=_({xAxis:x?ci(ci({},x),{},{ticks:C?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},C?!0:h);_1(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(O=P)}return A.createElement(ns,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(yze,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(wze,vd({},i,{horizontalPoints:I})),A.createElement(Sze,vd({},i,{verticalPoints:O})),A.createElement(bze,vd({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(xze,vd({},i,{offset:r,verticalPoints:O,xAxis:x,yAxis:w}))))}W_.displayName="CartesianGrid";var Aze={},ree=Yi({name:"errorBars",initialState:Aze,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Y3e,replaceErrorBar:X3e,removeErrorBar:Q3e}=ree.actions,kze=ree.reducer,Cze=["children"];function Ize(t,e){if(t==null)return{};var n,r,i=Pze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nze={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Dze=A.createContext(Nze);function Oze(t){var{children:e}=t,n=Ize(t,Cze);return A.createElement(Dze.Provider,{value:n},e)}function iee(t,e){var n,r,i=qe(u=>Po(u,t)),a=qe(u=>No(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:zr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Lr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function Rze(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=YJ(),{needClipX:a,needClipY:s,needClip:o}=iee(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var MC={exports:{}},jC={};var e$;function Mze(){if(e$)return jC;e$=1;var t=Ip();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return jC.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(D){if(!_){if(_=!0,T=D,D=h(D),g!==void 0&&b.hasValue){var N=b.value;if(g(N,D))return I=N}return I=D}if(N=I,n(T,D))return N;var C=h(D);return g!==void 0&&g(N,C)?(T=D,N):(T=D,I=C)}var _=!1,T,I,O=f===void 0?null:f;return[function(){return w(u())},O===null?void 0:function(){return w(O())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},jC}var t$;function jze(){return t$||(t$=1,MC.exports=Mze()),MC.exports}jze();function zze(t){t()}function Lze(){let t=null,e=null;return{clear(){t=null,e=null},notify(){zze(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var n$={notify(){},get:()=>[]};function Vze(t,e){let n,r=n$,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let _=!1;return()=>{_||(_=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=Lze())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=n$)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var Bze=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fze=Bze(),Uze=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$ze=Uze(),qze=()=>Fze||$ze?A.useLayoutEffect:A.useEffect,Gze=qze();function r$(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Hze(t,e){if(r$(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!r$(t[n[i]],e[n[i]]))return!1;return!0}var Kze=Symbol.for("react-redux-context"),Wze=typeof globalThis<"u"?globalThis:{};function Yze(){if(!A.createContext)return{};const t=Wze[Kze]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var Xze=Yze();function Qze(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=Vze(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);Gze(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||Xze;return A.createElement(o.Provider,{value:a},e)}var Zze=Qze,Jze=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function e4e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function sM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Jze.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Hze(t[r],e[r]))return!1}else if(!e4e(t[r],e[r]))return!1;return!0}function cf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:KJ}function uf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:KJ}var t4e="Invariant failed";function n4e(t,e){throw new Error(t4e)}function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(null,arguments)}function X1(t){return A.createElement(UJ,yN({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var r4e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ke(e))return e;var a=Ke(r)||$r(r);return a?e(r,i):(a||n4e(),n)}},i4e=(t,e,n)=>n,a4e=(t,e)=>e,cy=ye([xR,a4e],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),s4e=ye([cy],t=>t?.maxBarSize),o4e=(t,e,n,r)=>r,l4e=ye([Mt,xR,cf,uf,i4e],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),c4e=(t,e,n)=>{var r=Mt(t),i=cf(t,e),a=uf(t,e);if(!(i==null||a==null))return r==="horizontal"?dN(t,"yAxis",a,n):dN(t,"xAxis",i,n)},u4e=(t,e)=>{var n=Mt(t),r=cf(t,e),i=uf(t,e);if(!(r==null||i==null))return n==="horizontal"?UU(t,"xAxis",r):UU(t,"yAxis",i)},d4e=ye([l4e,rNe,u4e],oje),f4e=(t,e,n)=>{var r,i,a=cy(t,e);if(a!=null){var s=cf(t,e),o=uf(t,e);if(!(s==null||o==null)){var c=Mt(t),u=hZ(t),{maxBarSize:f}=a,h=$r(f)?u:f,g,v;return c==="horizontal"?(g=Cp(t,"xAxis",s,n),v=kp(t,"xAxis",s,n)):(g=Cp(t,"yAxis",o,n),v=kp(t,"yAxis",o,n)),(r=(i=S1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},aee=(t,e,n)=>{var r=Mt(t),i=cf(t,e),a=uf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Cp(t,"xAxis",i,n),o=kp(t,"xAxis",i,n)):(s=Cp(t,"yAxis",a,n),o=kp(t,"yAxis",a,n)),S1(s,o)}},h4e=ye([d4e,hZ,nNe,pZ,f4e,aee,s4e],fje),p4e=(t,e,n)=>{var r=cf(t,e);if(r!=null)return Cp(t,"xAxis",r,n)},g4e=(t,e,n)=>{var r=uf(t,e);if(r!=null)return Cp(t,"yAxis",r,n)},m4e=(t,e,n)=>{var r=cf(t,e);if(r!=null)return kp(t,"xAxis",r,n)},v4e=(t,e,n)=>{var r=uf(t,e);if(r!=null)return kp(t,"yAxis",r,n)},y4e=ye([h4e,cy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),b4e=ye([c4e,cy],hje),x4e=ye([Pr,MO,p4e,g4e,m4e,v4e,y4e,Mt,qPe,aee,b4e,cy,o4e],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,_;if(w!=null&&w.length>0?_=w:_=v?.slice(b,x+1),_!=null)return Y4e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:_,offset:t,cells:g,dataStartIndex:b})}}),w4e=["index"];function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bN.apply(null,arguments)}function S4e(t,e){if(t==null)return{};var n,r,i=_4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var see=A.createContext(void 0),E4e=t=>{var e=A.useContext(see);if(e!=null)return e.stackId;if(t!=null)return JTe(t)},T4e=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),A4e=t=>{var e=A.useContext(see);if(e!=null){var{stackId:n}=e;return"url(#".concat(T4e(n,t),")")}},k4e=t=>{var{index:e}=t,n=S4e(t,w4e),r=A4e(e);return A.createElement(gi,bN({className:"recharts-bar-stack-layer",clipPath:r},n))},C4e=["onMouseEnter","onMouseLeave","onClick"],I4e=["value","background","tooltipPosition"],P4e=["id"],N4e=["onMouseEnter","onClick","onMouseLeave"];function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(null,arguments)}function i$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(n),!0).forEach(function(r){D4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D4e(t,e,n){return(e=O4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O4e(t){var e=R4e(t,"string");return typeof e=="symbol"?e:e+""}function R4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q1(t,e){if(t==null)return{};var n,r,i=M4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var j4e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:h_(n,e),payload:t}]},z4e=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:h_(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement($J,{tooltipEntrySettings:f})});function L4e(t){var e=qe(Yd),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=Q1(a,C4e),f=eM(s,r,a.id),h=tM(o),g=nM(c,r,a.id);if(!i||n==null)return null;var v=Fv(i);return A.createElement(ns,{zIndex:pje(i,Ur.barBackground)},n.map((b,x)=>{var{value:w,background:_,tooltipPosition:T}=b,I=Q1(b,I4e);if(!_)return null;var O=f(b,x),D=h(b,x),N=g(b,x),C=wi(wi(wi(wi(wi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},_),v),n_(u,b,x)),{},{onMouseEnter:O,onMouseLeave:D,onClick:N,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(X1,Nl({key:"background-bar-".concat(x)},C))}))}function V4e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return wi(wi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(xRe,{value:e?i:void 0},n)}function B4e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(Yd),c=qe(GR),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(ns,{zIndex:Ur.activeBar},A.createElement(X1,Nl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))):A.createElement(X1,Nl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function F4e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(X1,Nl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function U4e(t){var e,{data:n,props:r}=t,i=(e=Ps(r))!==null&&e!==void 0?e:{},{id:a}=i,s=Q1(i,P4e),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=Q1(r,N4e),b=eM(f,c,a),x=tM(g),w=nM(h,c,a);return n?A.createElement(A.Fragment,null,n.map((_,T)=>A.createElement(k4e,Nl({index:T,key:"rectangle-".concat(_?.x,"-").concat(_?.y,"-").concat(_?.value,"-").concat(T),className:"recharts-bar-rectangle"},n_(v,_,T),{onMouseEnter:b(_,T),onMouseLeave:x(_,T),onClick:w(_,T)}),u?A.createElement(B4e,{shape:o,activeBar:u,baseProps:s,entry:_,index:T,dataKey:c}):A.createElement(F4e,{shape:o,baseProps:s,entry:_,index:T,dataKey:c})))):null}function $4e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=T_(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),_=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(V4e,{showLabels:x,rects:r},A.createElement(E_,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:_,key:g},T=>{var I=T===1?r:r?.map((O,D)=>{var N=h&&h[D];if(N)return wi(wi({},O),{},{x:wr(N.x,O.x,T),y:wr(N.y,O.y,T),width:wr(N.width,O.width,T),height:wr(N.height,O.height,T)});if(i==="horizontal"){var C=wr(0,O.height,T),P=wr(O.stackedBarStart,O.y,T);return wi(wi({},O),{},{y:P,height:C})}var R=wr(0,O.width,T),j=wr(O.stackedBarStart,O.x,T);return wi(wi({},O),{},{width:R,x:j})});return T>0&&(n.current=I??null),I==null?null:A.createElement(gi,null,A.createElement(U4e,{props:e,data:I}))}),A.createElement(jJ,{label:e.label}),e.children)}function q4e(t){var e=A.useRef(null);return A.createElement($4e,{previousRectanglesRef:e,props:t})}var oee=0,G4e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:mn(t,e)}};class H4e extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Wt("recharts-bar",i),h=u;return A.createElement(gi,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(Rze,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(gi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(L4e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(q4e,this.props)))}}var K4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:oee,xAxisId:0,yAxisId:0,zIndex:Ur.bar};function W4e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=iee(e,n),g=K0(),v=Ci(),b=JR(t.children,ly),x=qe(T=>x4e(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,_=x?.[0];return _==null||_.height==null||_.width==null?w=0:w=g==="vertical"?_.height/2:_.width/2,A.createElement(Oze,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:G4e,errorBarOffset:w},A.createElement(H4e,Nl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function Y4e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,_=f?w.scale.domain():null,T=eAe({numericAxis:w}),I=w.scale(T);return h.map((O,D)=>{var N,C,P,R,j,L;if(f){var B=f[D+x];if(B==null)return null;N=WTe(B,_)}else N=mn(O,n),Array.isArray(N)||(N=[T,N]);var z=r4e(r,oee)(N[1],D);if(e==="horizontal"){var W,[Z,G]=[o.scale(N[0]),o.scale(N[1])];C=W6({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:O,index:D}),P=(W=G??Z)!==null&&W!==void 0?W:void 0,R=i.size;var Y=Z-G;if(j=wa(Y)?0:Y,L={x:C,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(j)<Math.abs(z)){var Q=Fr(j||z)*(Math.abs(z)-Math.abs(j));P-=Q,j+=Q}}else{var[ee,te]=[s.scale(N[0]),s.scale(N[1])];if(C=ee,P=W6({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:O,index:D}),R=te-ee,j=i.size,L={x:g.left,y:P,width:g.width,height:j},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var U=Fr(R||z)*(Math.abs(z)-Math.abs(R));R+=U}}if(C==null||P==null||R==null||j==null)return null;var X=wi(wi({},O),{},{stackedBarStart:I,x:C,y:P,width:R,height:j,value:f?N:N[1],payload:O,background:L,tooltipPosition:{x:C+R/2,y:P+j/2},parentViewBox:b},v&&v[D]&&v[D].props);return X}).filter(Boolean)}function X4e(t){var e=ri(t,K4e),n=E4e(e.stackId),r=Ci();return A.createElement(qJ,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(sMe,{legendPayload:j4e(e)}),A.createElement(z4e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(xMe,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(ns,{zIndex:e.zIndex},A.createElement(W4e,Nl({},e,{id:i})))))}var r0=A.memo(X4e,sM);r0.displayName="Bar";var Q4e=["domain","range"],Z4e=["domain","range"];function a$(t,e){if(t==null)return{};var n,r,i=J4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function J4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function s$(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function lee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=a$(t,Q4e),{domain:a,range:s}=e,o=a$(e,Z4e);return!s$(n,a)||!s$(r,s)?!1:sM(i,o)}var eLe=["dangerouslySetInnerHTML","ticks","scale"],tLe=["id","scale"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(null,arguments)}function o$(t,e){if(t==null)return{};var n,r,i=nLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rLe(t){var e=vn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(QMe(t)):n.current!==t&&e(ZMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(JMe(n.current)),n.current=null)},[e]),null}var iLe=t=>{var{xAxisId:e,className:n}=t,r=qe(MO),i=Ci(),a="xAxis",s=qe(_=>HZ(_,a,e,i)),o=qe(_=>UZ(_,e)),c=qe(_=>eDe(_,e)),u=qe(_=>_Z(_,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=o$(t,eLe),{id:b,scale:x}=u,w=o$(u,tLe);return A.createElement(aM,xN({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Wt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},aLe={allowDataOverflow:zr.allowDataOverflow,allowDecimals:zr.allowDecimals,allowDuplicatedCategory:zr.allowDuplicatedCategory,angle:zr.angle,axisLine:hl.axisLine,height:zr.height,hide:!1,includeHidden:zr.includeHidden,interval:zr.interval,minTickGap:zr.minTickGap,mirror:zr.mirror,orientation:zr.orientation,padding:zr.padding,reversed:zr.reversed,scale:zr.scale,tick:zr.tick,tickCount:zr.tickCount,tickLine:hl.tickLine,tickSize:hl.tickSize,type:zr.type,xAxisId:0},sLe=t=>{var e=ri(t,aLe);return A.createElement(A.Fragment,null,A.createElement(rLe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(iLe,e))},Y_=A.memo(sLe,lee);Y_.displayName="XAxis";var oLe=["dangerouslySetInnerHTML","ticks","scale"],lLe=["id","scale"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(null,arguments)}function l$(t,e){if(t==null)return{};var n,r,i=cLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uLe(t){var e=vn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(eje(t)):n.current!==t&&e(tje({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(nje(n.current)),n.current=null)},[e]),null}var dLe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(MO),c=Ci(),u=vn(),f="yAxis",h=qe(N=>$Z(N,e)),g=qe(N=>nDe(N,e)),v=qe(N=>HZ(N,f,e,c)),b=qe(N=>EZ(N,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||XR(i)||A.isValidElement(i)||b==null)){var N=a.current;if(N){var C=N.getCalculatedWidth();Math.round(h.width)!==Math.round(C)&&u(rje({id:e,width:C}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:_}=t,T=l$(t,oLe),{id:I,scale:O}=b,D=l$(b,lLe);return A.createElement(aM,wN({},T,D,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Wt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))},fLe={allowDataOverflow:Lr.allowDataOverflow,allowDecimals:Lr.allowDecimals,allowDuplicatedCategory:Lr.allowDuplicatedCategory,angle:Lr.angle,axisLine:hl.axisLine,hide:!1,includeHidden:Lr.includeHidden,interval:Lr.interval,minTickGap:Lr.minTickGap,mirror:Lr.mirror,orientation:Lr.orientation,padding:Lr.padding,reversed:Lr.reversed,scale:Lr.scale,tick:Lr.tick,tickCount:Lr.tickCount,tickLine:hl.tickLine,tickSize:hl.tickSize,type:Lr.type,width:Lr.width,yAxisId:0},hLe=t=>{var e=ri(t,fLe);return A.createElement(A.Fragment,null,A.createElement(uLe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(dLe,e))},X_=A.memo(hLe,lee);X_.displayName="YAxis";var pLe=(t,e)=>e,oM=ye([pLe,Mt,wZ,Dr,lJ,Bl,v2e,Pr],E2e),lM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},cee=Xa("mouseClick"),uee=q0();uee.startListening({actionCreator:cee,effect:(t,e)=>{var n=t.payload,r=oM(e.getState(),lM(n));r?.activeIndex!=null&&e.dispatch(mDe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var SN=Xa("mouseMove"),dee=q0(),Nx=null;dee.startListening({actionCreator:SN,effect:(t,e)=>{var n=t.payload;Nx!==null&&cancelAnimationFrame(Nx);var r=lM(n);Nx=requestAnimationFrame(()=>{var i=e.getState(),a=VR(i,i.tooltip.settings.shared);if(a==="axis"){var s=oM(i,r);s?.activeIndex!=null?e.dispatch(eJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(JZ())}Nx=null})}});function gLe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var c$={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},fee=Yi({name:"rootProps",initialState:c$,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:c$.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),mLe=fee.reducer,{updateOptions:vLe}=fee.actions,hee=Yi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:yLe}=hee.actions,bLe=hee.reducer,pee=Xa("keyDown"),gee=Xa("focus"),cM=q0();cM.startListening({actionCreator:pee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=BR(i,rg(n),ry(n),sy(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Bl(n);if(a==="Enter"){var u=q1(n,"axis","hover",String(i.index));e.dispatch(hN({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=sDe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=q1(n,"axis","hover",String(v));e.dispatch(hN({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});cM.startListening({actionCreator:gee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=q1(n,"axis","hover",String(a));e.dispatch(hN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Va=Xa("externalEvent"),mee=q0(),zC=new Map;mee.startListening({actionCreator:Va,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=zC.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:n2e(o),activeDataKey:GR(o),activeIndex:Yd(o),activeLabel:dJ(o),activeTooltipIndex:Yd(o),isTooltipActive:r2e(o)};n(c,r)}finally{zC.delete(i)}});zC.set(i,s)}}});var xLe=ye([tg],t=>t.tooltipItemPayloads),wLe=ye([xLe,ay,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),vee=Xa("touchMove"),yee=q0();yee.startListening({actionCreator:vee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=VR(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=oM(r,lM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(eJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(UX),h=(o=u.getAttribute($X))!==null&&o!==void 0?o:void 0,g=ng(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=wLe(r,f,h);e.dispatch(ZZ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var SLe=uX({brush:gje,cartesianAxis:ije,chartData:tOe,errorBars:kze,graphicalItems:yMe,layout:UTe,legend:WAe,options:X2e,polarAxis:NRe,polarOptions:bLe,referenceElements:Aje,rootProps:mLe,tooltip:vDe,zIndex:L2e}),_Le=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return hTe({reducer:SLe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([uee.middleware,dee.middleware,cM.middleware,mee.middleware,yee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(TX({type:"raf"}))},devTools:{serialize:{replacer:gLe},name:"recharts-".concat(n)}})};function bee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ci(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=_Le(e,r));var s=CO;return A.createElement(Zze,{context:s,store:a.current},n)}function ELe(t){var{layout:e,margin:n}=t,r=vn(),i=Ci();return A.useEffect(()=>{i||(r(VTe(e)),r(LTe(n)))},[r,i,e,n]),null}var xee=A.memo(ELe,sM);function wee(t){var e=vn();return A.useEffect(()=>{e(vLe(t))},[e,t]),null}function u$(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=vn();return A.useLayoutEffect(()=>(r.current&&i(j2e({zIndex:e,element:r.current,isPanorama:n})),()=>{i(z2e({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function d$(t){var{children:e,isPanorama:n}=t,r=qe(A2e);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(u$,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(u$,{key:s,zIndex:s,isPanorama:n})))}var TLe=["children"];function ALe(t,e){if(t==null)return{};var n,r,i=kLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Z1(){return Z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z1.apply(null,arguments)}var CLe={width:"100%",height:"100%",display:"block"},ILe=A.forwardRef((t,e)=>{var n=YX(),r=XX(),i=oQ();if(!To(n)||!To(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(CY,Z1({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:CLe,ref:e}),a)}),PLe=t=>{var{children:e}=t,n=qe(v_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(CY,{width:r,height:i,x:s,y:a},e)},f$=A.forwardRef((t,e)=>{var{children:n}=t,r=ALe(t,TLe),i=Ci();return i?A.createElement(PLe,null,A.createElement(d$,{isPanorama:!0},n)):A.createElement(ILe,Z1({ref:e},r),A.createElement(d$,{isPanorama:!1},n))});function NLe(){var t=vn(),[e,n]=A.useState(null),r=qe(sAe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;sn(a)&&a!==r&&t(FTe(a))}},[e,t,r]),n}function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DLe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(r){OLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OLe(t,e,n){return(e=RLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RLe(t){var e=MLe(t,"string");return typeof e=="symbol"?e:e+""}function MLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qd(){return Qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qd.apply(null,arguments)}var jLe=()=>(uOe(),null);function J1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var zLe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:J1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:J1((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(b_,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Qd({ref:c},t)))}),LLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:J1(n),containerHeight:J1(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(b_,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Qd({ref:o},t)))}),VLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(b_,{width:n,height:r}),A.createElement("div",Qd({ref:e},t)))}),BLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return Tl(n)||Tl(r)?A.createElement(LLe,Qd({},t,{ref:e})):A.createElement(VLe,Qd({},t,{ref:e}))});function FLe(t){return t===!0?zLe:BLe}var ULe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:_,responsive:T,dispatchTouchEvents:I=!0}=t,O=A.useRef(null),D=vn(),[N,C]=A.useState(null),[P,R]=A.useState(null),j=NLe(),L=jO(),B=L?.width>0?L.width:_,z=L?.height>0?L.height:i,W=A.useCallback(se=>{j(se),typeof e=="function"&&e(se),C(se),R(se),se!=null&&(O.current=se)},[j,e,C,R]),Z=A.useCallback(se=>{D(cee(se)),D(Va({handler:a,reactEvent:se}))},[D,a]),G=A.useCallback(se=>{D(SN(se)),D(Va({handler:u,reactEvent:se}))},[D,u]),Y=A.useCallback(se=>{D(JZ()),D(Va({handler:f,reactEvent:se}))},[D,f]),Q=A.useCallback(se=>{D(SN(se)),D(Va({handler:h,reactEvent:se}))},[D,h]),ee=A.useCallback(()=>{D(gee())},[D]),te=A.useCallback(se=>{D(pee(se.key))},[D]),U=A.useCallback(se=>{D(Va({handler:s,reactEvent:se}))},[D,s]),X=A.useCallback(se=>{D(Va({handler:o,reactEvent:se}))},[D,o]),ne=A.useCallback(se=>{D(Va({handler:c,reactEvent:se}))},[D,c]),K=A.useCallback(se=>{D(Va({handler:g,reactEvent:se}))},[D,g]),ue=A.useCallback(se=>{D(Va({handler:x,reactEvent:se}))},[D,x]),ie=A.useCallback(se=>{I&&D(vee(se)),D(Va({handler:b,reactEvent:se}))},[D,I,b]),oe=A.useCallback(se=>{D(Va({handler:v,reactEvent:se}))},[D,v]),_e=FLe(T);return A.createElement(yJ.Provider,{value:N},A.createElement(GSe.Provider,{value:P},A.createElement(_e,{width:B??w?.width,height:z??w?.height,className:Wt("recharts-wrapper",r),style:DLe({position:"relative",cursor:"default",width:B,height:z},w),onClick:Z,onContextMenu:U,onDoubleClick:X,onFocus:ee,onKeyDown:te,onMouseDown:ne,onMouseEnter:G,onMouseLeave:Y,onMouseMove:Q,onMouseUp:K,onTouchEnd:oe,onTouchMove:ie,onTouchStart:ue,ref:W},A.createElement(jLe,null),n)))}),$Le=["width","height","responsive","children","className","style","compact","title","desc"];function qLe(t,e){if(t==null)return{};var n,r,i=GLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var See=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=qLe(t,$Le),g=Ps(h);return c?A.createElement(A.Fragment,null,A.createElement(b_,{width:n,height:r}),A.createElement(f$,{otherAttributes:g,title:u,desc:f},a)):A.createElement(ULe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(f$,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(kje,null,a)))});function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_N.apply(null,arguments)}var HLe={top:5,right:5,bottom:5,left:5},KLe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:HLe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},WLe=A.forwardRef(function(e,n){var r,i=ri(e.categoricalChartProps,KLe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(bee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(XJ,{chartData:u.data}),A.createElement(xee,{layout:i.layout,margin:i.margin}),A.createElement(wee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(See,_N({},i,{ref:n})))}),YLe=["axis","item"],uM=A.forwardRef((t,e)=>A.createElement(WLe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:YLe,tooltipPayloadSearcher:bJ,categoricalChartProps:t,ref:e}));function XLe(t){var e=vn();return A.useEffect(()=>{e(yLe(t))},[e,t]),null}var QLe=["layout"];function EN(){return EN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EN.apply(null,arguments)}function ZLe(t,e){if(t==null)return{};var n,r,i=JLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var e3e={top:5,right:5,bottom:5,left:5},_ee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:e3e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},t3e=A.forwardRef(function(e,n){var r,i=ri(e.categoricalChartProps,_ee),{layout:a}=i,s=ZLe(i,QLe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(bee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(XJ,{chartData:i.data}),A.createElement(xee,{layout:a,margin:i.margin}),A.createElement(wee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(XLe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(See,EN({},s,{ref:n})))});function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(r){n3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n3e(t,e,n){return(e=r3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r3e(t){var e=i3e(t,"string");return typeof e=="symbol"?e:e+""}function i3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a3e=["item"],s3e=g$(g$({},_ee),{},{layout:"centric",startAngle:0,endAngle:360}),o3e=A.forwardRef((t,e)=>{var n=ri(t,s3e);return A.createElement(t3e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:a3e,tooltipPayloadSearcher:bJ,categoricalChartProps:n,ref:e})});const m$=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],v$=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function Eee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const l3e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Dx(t){const e=parseInt(t.split("-")[1],10);return l3e[e-1]||t}function c3e(t){const e={};return t.forEach((n,r)=>{e[n.id]=m$[r%m$.length]}),e.uncategorized="#9CA3AF",e}function u3e(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=v$[i%v$.length]}),e}function d3e(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=xt(),s=A.useMemo(()=>Eee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>c3e(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x.uncategorized="Uncategorized",x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};f.forEach(T=>{const I=o[T.envelopeId]||"uncategorized";x[I]=(x[I]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,I])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(I*100)/100})).sort((T,I)=>I.amount-T.amount),_=w.reduce((T,I)=>T+I.amount,0);return{items:w,total:Math.round(_*100)/100}},[f,o,u,c]),g=A.useMemo(()=>{const x=new Set,w={};s.forEach(N=>{w[N]={}}),f.forEach(N=>{const C=o[N.envelopeId]||"uncategorized",P=N.month;w[P]&&(w[P][C]=(w[P][C]||0)+Math.abs(N.amount),x.add(C))});const _=[...x],T={};_.forEach(N=>{T[N]=c[N]||"#9CA3AF"});const I=s.map(N=>{const C={month:N,monthLabel:Dx(N)};return _.forEach(P=>{C[P]=Math.round((w[N][P]||0)*100)/100}),C}),O=I.map(N=>_.reduce((C,P)=>C+(N[P]||0),0)),D=O.length>0?Math.round(O.reduce((N,C)=>N+C,0)/O.length):0;return{data:I,categoryKeys:_,colorMap:T,average:D}},[s,f,o,c]),v=A.useMemo(()=>{const x=[],w={};s.forEach(N=>{w[N]={}}),s.forEach(N=>{(i[N]||[]).forEach(P=>{x.push(P.name),w[N][P.name]=(w[N][P.name]||0)+P.amount})});const _=[...new Set(x)],T=u3e(_),I=s.map(N=>{const C={month:N,monthLabel:Dx(N)};return _.forEach(P=>{C[P]=Math.round((w[N][P]||0)*100)/100}),C}),O=I.map(N=>_.reduce((C,P)=>C+(N[P]||0),0)),D=O.length>0?Math.round(O.reduce((N,C)=>N+C,0)/O.length):0;return{data:I,sourceKeys:_,colorMap:T,average:D}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((P,R)=>P+R.amount,0),O=f.filter(P=>P.month===w).reduce((P,R)=>P+Math.abs(R.amount),0),D=Math.max(0,T-O);if(T<=0)return{month:w,monthLabel:Dx(w),savingsPercent:0,spendingPercent:100};const N=Math.min(100,Math.round(D/T*1e3)/10),C=Math.round((100-N)*10)/10;return{month:w,monthLabel:Dx(w),savingsPercent:N,spendingPercent:C}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:v,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const f3e=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],h3e=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function p3e(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const dM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),eS=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),Tee=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:eS(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:eS(i)})]})]})},g3e=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},m3e=()=>{const t=es(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=xt(),s=xt(b=>b.fetchMonthData),o=A.useMemo(()=>p3e(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=Eee(r,a),x=xt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const I=x.incomeSources[T]!==void 0,O=x.loadedTransactionMonths.includes(T);return!I||!O});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(I){console.error(`Failed to fetch data for month ${T}:`,I),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=d3e(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(yl,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:f3e.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[h3e.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(v3e,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(y3e,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(b3e,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(x3e,{data:g.data})]})]})},v3e=({items:t,total:e})=>t.length===0?m.jsx(Q_,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(y_,{width:"100%",height:280,children:m.jsxs(o3e,{children:[m.jsx(HJ,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>m.jsx(ly,{fill:n.color},r))}),m.jsx(U_,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),m.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[eS(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:dM(e)})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:eS(n.amount)})]})]},n.categoryId)})})]})]}),y3e=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(Q_,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(y_,{width:"100%",height:300,children:m.jsxs(uM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(W_,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(Y_,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(X_,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(U_,{cursor:!1,content:a=>m.jsx(Tee,{...a,colorMap:n,nameMap:r})}),m.jsx(rM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${dM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(r0,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(Aee,{keys:e,colorMap:n,nameMap:r})]}),b3e=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(Q_,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(y_,{width:"100%",height:300,children:m.jsxs(uM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(W_,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(Y_,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(X_,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(U_,{cursor:!1,content:a=>m.jsx(Tee,{...a,colorMap:n,nameMap:i})}),m.jsx(rM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${dM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(r0,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(Aee,{keys:e,colorMap:n,nameMap:i})]})},x3e=({data:t})=>{if(t.length===0)return m.jsx(Q_,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(y_,{width:"100%",height:300,children:m.jsxs(uM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(W_,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(Y_,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(X_,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(U_,{content:g3e}),m.jsx(r0,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(r0,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},Aee=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),Q_=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(bw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),Qo=({children:t})=>m.jsx(kt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),w3e=()=>{const t=Os();return m.jsx(Cr,{mode:"wait",children:m.jsxs(xoe,{location:t,children:[m.jsx(no,{path:"/",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(X1e,{})})})}),m.jsx(no,{path:"/envelope/:id",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(nSe,{})})})}),m.jsx(no,{path:"/add-envelope",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(lSe,{})})})}),m.jsx(no,{path:"/add-transaction",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(EY,{})})})}),m.jsx(no,{path:"/transactions",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(MSe,{})})})}),m.jsx(no,{path:"/settings",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(sSe,{})})})}),m.jsx(no,{path:"/settings/categories",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(oSe,{})})})}),m.jsx(no,{path:"/verify-email",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(O7,{})})})}),m.jsx(no,{path:"/analytics",element:m.jsx(Qo,{children:m.jsx(sa,{children:m.jsx(m3e,{})})})})]},t.pathname)})},S3e=()=>{const t=es(),{envelopes:e,appSettings:n}=xt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=_t(tt,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=Qc(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await da(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await da(a);const f=await TP(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null};let Oh=[],y$=!1;const LC=(t,e)=>{Oh=[{timestamp:new Date().toLocaleTimeString(),message:t,type:e},...Oh].slice(0,100)};if(!y$&&typeof window<"u"){y$=!0;const t=console.log,e=console.warn,n=console.error,r=i=>i.map(a=>{if(typeof a=="object"&&a!==null)try{return JSON.stringify(a,null,2)}catch{return String(a)}return String(a)}).join(" ");console.log=(...i)=>{t(...i),LC(r(i),"log")},console.warn=(...i)=>{e(...i),LC(r(i),"warn")},console.error=(...i)=>{n(...i),LC(r(i),"error")}}const _3e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]);A.useEffect(()=>{r([...Oh])},[t]),A.useEffect(()=>{t&&(console.log(" Debug Console: Opened and ready to capture logs"),console.warn(" Debug Console: Test warning message"),console.error(" Debug Console: Test error message"))},[t]);const i=()=>{Oh=[],r([])};return t?m.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm",onClick:()=>e(!1),children:m.jsxs("div",{className:"h-full flex flex-col",onClick:a=>a.stopPropagation(),children:[" ",m.jsx("div",{className:"bg-gray-900 text-white p-4 flex items-center",children:m.jsx("h3",{className:"text-lg font-semibold",children:"Debug Console"})}),m.jsx("div",{className:"flex-1 overflow-y-auto p-2 pb-20",children:n.length===0?m.jsx("div",{className:"text-gray-400 text-center mt-8",children:"No logs yet"}):m.jsx("div",{className:"space-y-1",children:n.map((a,s)=>m.jsxs("div",{className:`text-xs font-mono p-2 rounded ${a.type==="error"?"bg-red-900/50 text-red-200":a.type==="warn"?"bg-yellow-900/50 text-yellow-200":"bg-gray-800 text-gray-200"}`,children:[m.jsx("div",{className:"opacity-60",children:a.timestamp}),m.jsx("div",{className:"break-words",children:a.message})]},s))})}),m.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 p-4 flex gap-2",children:[m.jsx("button",{onClick:()=>{console.log(" Manual test log - this should appear in debug console"),console.warn(" Manual test warning"),r([...Oh])},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded text-sm",children:"Test Log"}),m.jsx("button",{onClick:()=>r([...Oh]),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded text-sm",children:"Refresh"}),m.jsx("button",{onClick:i,className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded text-sm",children:"Clear"}),m.jsx("button",{onClick:()=>e(!1),className:"flex-1 bg-red-600 text-white px-4 py-2 rounded text-sm",children:"Close"})]})]})}):m.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-20 right-4 z-[9999] bg-blue-500 text-white p-2 rounded-full shadow-lg border-2 border-white",style:{width:"48px",height:"48px"},title:"Debug Console",children:m.jsx(F8,{className:"w-6 h-6"})})},TN=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:Tm,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:Wh,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:cd,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:ef,color:"pink",encouragement:"You did it! Your budget is set up!"}],Ox=TN.length,b$={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function E3e(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const T3e=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(kt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},A3e=()=>{const t=xt(P=>P.guidedTutorialStep),e=xt(P=>P.skipGuidedTutorial),n=xt(P=>P.advanceGuidedTutorial),r=xt(P=>P.incomeSources),i=xt(P=>P.currentMonth),a=xt(P=>P.envelopes),s=xt(P=>P.allocations),o=A.useMemo(()=>a.filter(P=>P.isPiggybank),[a]),c=E3e(),[u,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,_=w!==null&&w>=0&&w<Ox,T=_?TN[w]:null,I=!c&&!h&&!v,O=A.useCallback(()=>{if(!T){f(null);return}const P=document.getElementById(T.targetId);f(P?P.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{O();const P=setInterval(O,500);return window.addEventListener("resize",O),window.addEventListener("scroll",O,!0),()=>{clearInterval(P),window.removeEventListener("resize",O),window.removeEventListener("scroll",O,!0)}},[O]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!_||!T)return null;const D=b$[T.color]||b$.blue,N=T.icon,C=(w+1)/Ox*100;return m.jsxs(m.Fragment,{children:[I&&m.jsx(T3e,{targetRect:u,visible:!0}),m.jsxs(Cr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${D.bg} border ${D.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(C),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(kt.div,{className:`h-full rounded-full ${D.progressBg}`,initial:{width:`${w/Ox*100}%`},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:TN.map((P,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?D.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},P.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${D.bg} p-2 rounded-xl border ${D.border} flex-shrink-0`,children:m.jsx(N,{className:`w-6 h-6 ${D.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(W8,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(kt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(kt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(ro,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<Ox-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(Cr,{children:h&&m.jsx(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(kt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(C),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function k3e(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=xt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=nn(),{showToast:b}=fu();if(A.useEffect(()=>{const _=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(_)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),I=T.get("mode"),O=T.get("oobCode");if(I==="resetPassword"&&O){$.log(" Processing password reset from URL"),a(O);return}if(I==="verifyEmail"&&O){$.log(" Processing email verification from URL");try{await rae(yi,O),$.log(" Email verification successful");const D=window.location.pathname;if(window.history.replaceState({},document.title,D),yi.currentUser){await yi.currentUser.reload(),$.log(" User reloaded after verification");const N=await qh(()=>Promise.resolve().then(()=>gY),void 0).then(C=>C.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await N.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await yi.signOut()},2e3)}catch(D){$.error(" Email verification failed:",D),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const _=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{const O=s?.theme??"system",D=T.matches;O==="dark"||O==="system"&&D?_.classList.add("dark"):_.classList.remove("dark")};if(I(),s?.theme==="system")return T.addEventListener("change",I),()=>T.removeEventListener("change",I)},[s]),A.useEffect(()=>{const _=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":_.style.fontSize="75%";break;case"small":_.style.fontSize="87.5%";break;case"large":_.style.fontSize="112.5%";break;case"extra-large":_.style.fontSize="125%";break;default:_.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(R7,{message:"Initializing Personal Budget..."}),m.jsx(fm,{})]});if(i)return m.jsxs(sa,{children:[m.jsx(upe,{oobCode:i,onSuccess:()=>{a(null);const _=window.location.pathname;window.history.replaceState({},document.title,_)},onCancel:()=>{a(null);const _=window.location.pathname;window.history.replaceState({},document.title,_)}}),m.jsx(fm,{})]});if(!c)return v?m.jsxs(sa,{children:[m.jsx(O7,{}),m.jsx(fm,{})]}):m.jsxs(sa,{children:[m.jsx(cpe,{}),m.jsx(fm,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(sa,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(Goe,{children:[m.jsx(S3e,{}),m.jsx(w3e,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(EY,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(A3e,{}),!o&&m.jsx(W0e,{onAddTransaction:()=>r(!0)})]}),m.jsx(fm,{}),m.jsx(_3e,{})]})]})}mne({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});hne.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(k3e,{})}));export{gt as T,tt as a,whe as b,s5 as c,_t as d,ei as e,oa as f,xA as g,da as h,$ as l,Qc as o,Bi as q,ca as s,Qu as t,ao as u,Qx as w};
