(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Uj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l1={exports:{}},qf={};var WC;function Gj(){if(WC)return qf;WC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return qf.Fragment=e,qf.jsx=n,qf.jsxs=n,qf}var QC;function qj(){return QC||(QC=1,l1.exports=Gj()),l1.exports}var x=qj(),c1={exports:{}},it={};var ZC;function Hj(){if(ZC)return it;ZC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function A(B,Q,K){this.props=B,this.context=Q,this.refs=S,this.updater=K||_}A.prototype.isReactComponent={},A.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=A.prototype;function R(B,Q,K){this.props=B,this.context=Q,this.refs=S,this.updater=K||_}var P=R.prototype=new D;P.constructor=R,E(P,A.prototype),P.isPureReactComponent=!0;var z=Array.isArray;function M(){}var T={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(B,Q,K){var ne=K.ref;return{$$typeof:t,type:B,key:Q,ref:ne!==void 0?ne:null,props:K}}function O(B,Q){return k(B.type,Q,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function F(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(K){return Q[K]})}var j=/\/+/g;function X(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):Q.toString(36)}function $(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(M,M):(B.status="pending",B.then(function(Q){B.status==="pending"&&(B.status="fulfilled",B.value=Q)},function(Q){B.status==="pending"&&(B.status="rejected",B.reason=Q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function H(B,Q,K,ne,ue){var de=typeof B;(de==="undefined"||de==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(de){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case t:case e:ge=!0;break;case h:return ge=B._init,H(ge(B._payload),Q,K,ne,ue)}}if(ge)return ue=ue(B),ge=ne===""?"."+X(B,0):ne,z(ue)?(K="",ge!=null&&(K=ge.replace(j,"$&/")+"/"),H(ue,Q,K,"",function(Ye){return Ye})):ue!=null&&(L(ue)&&(ue=O(ue,K+(ue.key==null||B&&B.key===ue.key?"":(""+ue.key).replace(j,"$&/")+"/")+ge)),Q.push(ue)),1;ge=0;var Te=ne===""?".":ne+":";if(z(B))for(var De=0;De<B.length;De++)ne=B[De],de=Te+X(ne,De),ge+=H(ne,Q,K,de,ue);else if(De=b(B),typeof De=="function")for(B=De.call(B),De=0;!(ne=B.next()).done;)ne=ne.value,de=Te+X(ne,De++),ge+=H(ne,Q,K,de,ue);else if(de==="object"){if(typeof B.then=="function")return H($(B),Q,K,ne,ue);throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Y(B,Q,K){if(B==null)return B;var ne=[],ue=0;return H(B,ne,"","",function(de){return Q.call(K,de,ue++)}),ne}function te(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(K){(B._status===0||B._status===-1)&&(B._status=1,B._result=K)},function(K){(B._status===0||B._status===-1)&&(B._status=2,B._result=K)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var ce=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},pe={map:Y,forEach:function(B,Q,K){Y(B,function(){Q.apply(this,arguments)},K)},count:function(B){var Q=0;return Y(B,function(){Q++}),Q},toArray:function(B){return Y(B,function(Q){return Q})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return it.Activity=p,it.Children=pe,it.Component=A,it.Fragment=n,it.Profiler=i,it.PureComponent=R,it.StrictMode=r,it.Suspense=u,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,it.__COMPILER_RUNTIME={__proto__:null,c:function(B){return T.H.useMemoCache(B)}},it.cache=function(B){return function(){return B.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(B,Q,K){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ne=E({},B.props),ue=B.key;if(Q!=null)for(de in Q.key!==void 0&&(ue=""+Q.key),Q)!C.call(Q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Q.ref===void 0||(ne[de]=Q[de]);var de=arguments.length-2;if(de===1)ne.children=K;else if(1<de){for(var ge=Array(de),Te=0;Te<de;Te++)ge[Te]=arguments[Te+2];ne.children=ge}return k(B.type,ue,ne)},it.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},it.createElement=function(B,Q,K){var ne,ue={},de=null;if(Q!=null)for(ne in Q.key!==void 0&&(de=""+Q.key),Q)C.call(Q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ue[ne]=Q[ne]);var ge=arguments.length-2;if(ge===1)ue.children=K;else if(1<ge){for(var Te=Array(ge),De=0;De<ge;De++)Te[De]=arguments[De+2];ue.children=Te}if(B&&B.defaultProps)for(ne in ge=B.defaultProps,ge)ue[ne]===void 0&&(ue[ne]=ge[ne]);return k(B,de,ue)},it.createRef=function(){return{current:null}},it.forwardRef=function(B){return{$$typeof:c,render:B}},it.isValidElement=L,it.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:te}},it.memo=function(B,Q){return{$$typeof:d,type:B,compare:Q===void 0?null:Q}},it.startTransition=function(B){var Q=T.T,K={};T.T=K;try{var ne=B(),ue=T.S;ue!==null&&ue(K,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(M,ce)}catch(de){ce(de)}finally{Q!==null&&K.types!==null&&(Q.types=K.types),T.T=Q}},it.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},it.use=function(B){return T.H.use(B)},it.useActionState=function(B,Q,K){return T.H.useActionState(B,Q,K)},it.useCallback=function(B,Q){return T.H.useCallback(B,Q)},it.useContext=function(B){return T.H.useContext(B)},it.useDebugValue=function(){},it.useDeferredValue=function(B,Q){return T.H.useDeferredValue(B,Q)},it.useEffect=function(B,Q){return T.H.useEffect(B,Q)},it.useEffectEvent=function(B){return T.H.useEffectEvent(B)},it.useId=function(){return T.H.useId()},it.useImperativeHandle=function(B,Q,K){return T.H.useImperativeHandle(B,Q,K)},it.useInsertionEffect=function(B,Q){return T.H.useInsertionEffect(B,Q)},it.useLayoutEffect=function(B,Q){return T.H.useLayoutEffect(B,Q)},it.useMemo=function(B,Q){return T.H.useMemo(B,Q)},it.useOptimistic=function(B,Q){return T.H.useOptimistic(B,Q)},it.useReducer=function(B,Q,K){return T.H.useReducer(B,Q,K)},it.useRef=function(B){return T.H.useRef(B)},it.useState=function(B){return T.H.useState(B)},it.useSyncExternalStore=function(B,Q,K){return T.H.useSyncExternalStore(B,Q,K)},it.useTransition=function(){return T.H.useTransition()},it.version="19.2.0",it}var JC;function K_(){return JC||(JC=1,c1.exports=Hj()),c1.exports}var q=K_();const gm=Uj(q);var u1={exports:{}},Hf={},d1={exports:{}},f1={};var eI;function $j(){return eI||(eI=1,(function(t){function e(H,Y){var te=H.length;H.push(Y);e:for(;0<te;){var ce=te-1>>>1,pe=H[ce];if(0<i(pe,Y))H[ce]=Y,H[te]=pe,te=ce;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],te=H.pop();if(te!==Y){H[0]=te;e:for(var ce=0,pe=H.length,B=pe>>>1;ce<B;){var Q=2*(ce+1)-1,K=H[Q],ne=Q+1,ue=H[ne];if(0>i(K,te))ne<pe&&0>i(ue,K)?(H[ce]=ue,H[ne]=te,ce=ne):(H[ce]=K,H[Q]=te,ce=Q);else if(ne<pe&&0>i(ue,te))H[ce]=ue,H[ne]=te,ce=ne;else break e}}return Y}function i(H,Y){var te=H.sortIndex-Y.sortIndex;return te!==0?te:H.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,p=null,m=3,b=!1,_=!1,E=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=H)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function z(H){if(E=!1,P(H),!_)if(n(u)!==null)_=!0,M||(M=!0,F());else{var Y=n(d);Y!==null&&$(z,Y.startTime-H)}}var M=!1,T=-1,C=5,k=-1;function O(){return S?!0:!(t.unstable_now()-k<C)}function L(){if(S=!1,M){var H=t.unstable_now();k=H;var Y=!0;try{e:{_=!1,E&&(E=!1,D(T),T=-1),b=!0;var te=m;try{t:{for(P(H),p=n(u);p!==null&&!(p.expirationTime>H&&O());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,m=p.priorityLevel;var pe=ce(p.expirationTime<=H);if(H=t.unstable_now(),typeof pe=="function"){p.callback=pe,P(H),Y=!0;break t}p===n(u)&&r(u),P(H)}else r(u);p=n(u)}if(p!==null)Y=!0;else{var B=n(d);B!==null&&$(z,B.startTime-H),Y=!1}}break e}finally{p=null,m=te,b=!1}Y=void 0}}finally{Y?F():M=!1}}}var F;if(typeof R=="function")F=function(){R(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,X=j.port2;j.port1.onmessage=L,F=function(){X.postMessage(null)}}else F=function(){A(L,0)};function $(H,Y){T=A(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var te=m;m=Y;try{return H()}finally{m=te}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=m;m=H;try{return Y()}finally{m=te}},t.unstable_scheduleCallback=function(H,Y,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=te+pe,H={id:h++,callback:Y,priorityLevel:H,startTime:te,expirationTime:pe,sortIndex:-1},te>ce?(H.sortIndex=te,e(d,H),n(u)===null&&H===n(d)&&(E?(D(T),T=-1):E=!0,$(z,te-ce))):(H.sortIndex=pe,e(u,H),_||b||(_=!0,M||(M=!0,F()))),H},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(H){var Y=m;return function(){var te=m;m=Y;try{return H.apply(this,arguments)}finally{m=te}}}})(f1)),f1}var tI;function Yj(){return tI||(tI=1,d1.exports=$j()),d1.exports}var h1={exports:{}},_r={};var nI;function Kj(){if(nI)return _r;nI=1;var t=K_();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return _r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_r.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},_r.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},_r.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},_r.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},_r.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},_r.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},_r.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},_r.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},_r.requestFormReset=function(u){r.d.r(u)},_r.unstable_batchedUpdates=function(u,d){return u(d)},_r.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},_r.useFormStatus=function(){return o.H.useHostTransitionStatus()},_r.version="19.2.0",_r}var rI;function Xj(){if(rI)return h1.exports;rI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h1.exports=Kj(),h1.exports}var iI;function Wj(){if(iI)return Hf;iI=1;var t=Yj(),e=K_(),n=Xj();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,g=l;;){var y=f.return;if(y===null)break;var w=y.alternate;if(w===null){if(g=y.return,g!==null){f=g;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===f)return u(y),s;if(w===g)return u(y),l;w=w.sibling}throw Error(r(188))}if(f.return!==g.return)f=y,g=w;else{for(var N=!1,U=y.child;U;){if(U===f){N=!0,f=y,g=w;break}if(U===g){N=!0,g=y,f=w;break}U=U.sibling}if(!N){for(U=w.child;U;){if(U===f){N=!0,f=w,g=y;break}if(U===g){N=!0,g=w,f=y;break}U=U.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case M:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case R:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case P:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return l=s.displayName||null,l!==null?l:X(s.type)||"Memo";case C:l=s._payload,s=s._init;try{return X(s(l))}catch{}}return null}var $=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ce=[],pe=-1;function B(s){return{current:s}}function Q(s){0>pe||(s.current=ce[pe],ce[pe]=null,pe--)}function K(s,l){pe++,ce[pe]=s.current,s.current=l}var ne=B(null),ue=B(null),de=B(null),ge=B(null);function Te(s,l){switch(K(de,l),K(ue,s),K(ne,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?bC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=bC(l),s=xC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(ne),K(ne,s)}function De(){Q(ne),Q(ue),Q(de)}function Ye(s){s.memoizedState!==null&&K(ge,s);var l=ne.current,f=xC(l,s.type);l!==f&&(K(ue,s),K(ne,f))}function we(s){ue.current===s&&(Q(ne),Q(ue)),ge.current===s&&(Q(ge),Bf._currentValue=te)}var Ie,ut;function je(s){if(Ie===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ie=l&&l[1]||"",ut=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+s+ut}var $e=!1;function We(s,l){if(!s||$e)return"";$e=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(he){var le=he}Reflect.construct(s,[],be)}else{try{be.call()}catch(he){le=he}s.call(be.prototype)}}else{try{throw Error()}catch(he){le=he}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(he){if(he&&le&&typeof he.stack=="string")return[he.stack,le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),N=w[0],U=w[1];if(N&&U){var W=N.split(`
`),oe=U.split(`
`);for(y=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;y<oe.length&&!oe[y].includes("DetermineComponentFrameRoot");)y++;if(g===W.length||y===oe.length)for(g=W.length-1,y=oe.length-1;1<=g&&0<=y&&W[g]!==oe[y];)y--;for(;1<=g&&0<=y;g--,y--)if(W[g]!==oe[y]){if(g!==1||y!==1)do if(g--,y--,0>y||W[g]!==oe[y]){var ve=`
`+W[g].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=g&&0<=y);break}}}finally{$e=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?je(f):""}function gt(s,l){switch(s.tag){case 26:case 27:case 5:return je(s.type);case 16:return je("Lazy");case 13:return s.child!==l&&l!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return We(s.type,!1);case 11:return We(s.type.render,!1);case 1:return We(s.type,!0);case 31:return je("Activity");default:return""}}function wt(s){try{var l="",f=null;do l+=gt(s,f),f=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Me=Object.prototype.hasOwnProperty,Fe=t.unstable_scheduleCallback,Pt=t.unstable_cancelCallback,mn=t.unstable_shouldYield,Xt=t.unstable_requestPaint,pt=t.unstable_now,At=t.unstable_getCurrentPriorityLevel,Bt=t.unstable_ImmediatePriority,or=t.unstable_UserBlockingPriority,Ur=t.unstable_NormalPriority,ss=t.unstable_LowPriority,Ws=t.unstable_IdlePriority,wi=t.log,yr=t.unstable_setDisableYieldValue,kr=null,vn=null;function tr(s){if(typeof wi=="function"&&yr(s),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(kr,s)}catch{}}var Wt=Math.clz32?Math.clz32:ma,Qs=Math.log,ga=Math.LN2;function ma(s){return s>>>=0,s===0?32:31-(Qs(s)/ga|0)|0}var dt=256,Qt=262144,Zt=4194304;function Re(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ue(s,l,f){var g=s.pendingLanes;if(g===0)return 0;var y=0,w=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?y=Re(g):(N&=U,N!==0?y=Re(N):f||(f=U&~s,f!==0&&(y=Re(f))))):(U=g&~w,U!==0?y=Re(U):N!==0?y=Re(N):f||(f=g&~s,f!==0&&(y=Re(f)))),y===0?0:l!==0&&l!==y&&(l&w)===0&&(w=y&-y,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:y}function Nt(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function nn(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(){var s=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),s}function br(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function xr(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ct(s,l,f,g,y,w){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var U=s.entanglements,W=s.expirationTimes,oe=s.hiddenUpdates;for(f=N&~f;0<f;){var ve=31-Wt(f),be=1<<ve;U[ve]=0,W[ve]=-1;var le=oe[ve];if(le!==null)for(oe[ve]=null,ve=0;ve<le.length;ve++){var he=le[ve];he!==null&&(he.lane&=-536870913)}f&=~be}g!==0&&Dn(s,g,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(N&~l))}function Dn(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-Wt(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|f&261930}function Rn(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var g=31-Wt(f),y=1<<g;y&l|s[g]&l&&(s[g]|=l),f&=~y}}function nr(s,l){var f=l&-l;return f=(f&42)!==0?1:qr(f),(f&(s.suspendedLanes|l))!==0?0:f}function qr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Hn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function kn(){var s=Y.p;return s!==0?s:(s=window.event,s===void 0?32:GC(s.type))}function $n(s,l){var f=Y.p;try{return Y.p=s,l()}finally{Y.p=f}}var rr=Math.random().toString(36).slice(2),cn="__reactFiber$"+rr,un="__reactProps$"+rr,Hr="__reactContainer$"+rr,Ki="__reactEvents$"+rr,py="__reactListeners$"+rr,Kp="__reactHandles$"+rr,Xp="__reactResources$"+rr,va="__reactMarker$"+rr;function zc(s){delete s[cn],delete s[un],delete s[Ki],delete s[py],delete s[Kp]}function ya(s){var l=s[cn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Hr]||f[cn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=CC(s);s!==null;){if(f=s[cn])return f;s=CC(s)}return l}s=f,f=s.parentNode}return null}function Ei(s){if(s=s[cn]||s[Hr]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function oi(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ba(s){var l=s[Xp];return l||(l=s[Xp]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(s){s[va]=!0}var $d=new Set,Yd={};function xa(s,l){_a(s,l),_a(s+"Capture",l)}function _a(s,l){for(Yd[s]=l,s=0;s<l.length;s++)$d.add(l[s])}var Kd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Wd={};function Wp(s){return Me.call(Wd,s)?!0:Me.call(Xd,s)?!1:Kd.test(s)?Wd[s]=!0:(Xd[s]=!0,!1)}function Lc(s,l,f){if(Wp(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function li(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Mn(s,l,f,g){if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+g)}}function ir(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Zs(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qd(s,l,f){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var y=g.get,w=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(N){f=""+N,w.call(this,N)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ot(s){if(!s._valueTracker){var l=Zs(s)?"checked":"value";s._valueTracker=Qd(s,l,""+s[l])}}function bl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return s&&(g=Zs(s)?s.checked?"true":"false":s.value),s=g,s!==f?(l.setValue(s),!0):!1}function wa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xl=/[\n"\\]/g;function $r(s){return s.replace(xl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Bc(s,l,f,g,y,w,N,U){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+ir(l)):s.value!==""+ir(l)&&(s.value=""+ir(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?Zd(s,N,ir(l)):f!=null?Zd(s,N,ir(f)):g!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+ir(U):s.removeAttribute("name")}function Qp(s,l,f,g,y,w,N,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Ot(s);return}f=f!=null?""+ir(f):"",l=l!=null?""+ir(l):f,U||l===s.value||(s.value=l),s.defaultValue=l}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=U?s.checked:!!g,s.defaultChecked=!!g,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),Ot(s)}function Zd(s,l,f){l==="number"&&wa(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Js(s,l,f,g){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&g&&(s[f].defaultSelected=!0)}else{for(f=""+ir(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,g&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Zp(s,l,f){if(l!=null&&(l=""+ir(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+ir(f):""}function eo(s,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if($(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=ir(l),s.defaultValue=f,g=s.textContent,g===f&&g!==""&&g!==null&&(s.value=g),Ot(s)}function Yr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Jp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(s,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,f):typeof f!="number"||f===0||Jp.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function ef(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var y in l)g=l[y],l.hasOwnProperty(y)&&f[y]!==g&&Jd(s,y,g)}else for(var w in l)l.hasOwnProperty(w)&&Jd(s,w,l[w])}function Fc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),to=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uc(s){return to.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Xi(){}var tf=null;function Si(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var no=null,Ea=null;function _l(s){var l=Ei(s);if(l&&(s=l.stateNode)){var f=s[un]||null;e:switch(s=l.stateNode,l.type){case"input":if(Bc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+$r(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==s&&g.form===s.form){var y=g[un]||null;if(!y)throw Error(r(90));Bc(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===s.form&&bl(g)}break e;case"textarea":Zp(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Js(s,!!f.multiple,l,!1)}}}var Gc=!1;function ro(s,l,f){if(Gc)return s(l,f);Gc=!0;try{var g=s(l);return g}finally{if(Gc=!1,(no!==null||Ea!==null)&&(Yg(),no&&(l=no,s=Ea,Ea=no=null,_l(l),s)))for(l=0;l<s.length;l++)_l(s[l])}}function Wi(s,l){var f=s.stateNode;if(f===null)return null;var g=f[un]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wl=!1;if(Ti)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){wl=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{wl=!1}var Sa=null,nf=null,El=null;function rf(){if(El)return El;var s,l=nf,f=l.length,g,y="value"in Sa?Sa.value:Sa.textContent,w=y.length;for(s=0;s<f&&l[s]===y[s];s++);var N=f-s;for(g=1;g<=N&&l[f-g]===y[w-g];g++);return El=y.slice(s,1<g?1-g:void 0)}function Sl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function os(){return!0}function Qi(){return!1}function lr(s){function l(f,g,y,w,N){this._reactName=f,this._targetInst=y,this.type=g,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(f=s[U],this[U]=f?f(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?os:Qi,this.isPropagationStopped=Qi,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),l}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=lr(ls),io=p({},ls,{view:0,detail:0}),af=lr(io),ao,qc,Aa,Hc=p({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Aa&&(Aa&&s.type==="mousemove"?(ao=s.screenX-Aa.screenX,qc=s.screenY-Aa.screenY):qc=ao=0,Aa=s),ao)},movementY:function(s){return"movementY"in s?s.movementY:qc}}),sf=lr(Hc),Tl=p({},Hc,{dataTransfer:0}),tg=lr(Tl),ng=p({},io,{relatedTarget:0}),Al=lr(ng),of=p({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),rg=lr(of),$c=p({},ls,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ig=lr($c),ag=p({},ls,{data:0}),Ca=lr(ag),sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cg(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=lg[s])?!!l[s]:!1}function so(){return cg}var Nr=p({},io,{key:function(s){if(s.key){var l=sg[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Sl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?og[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(s){return s.type==="keypress"?Sl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Sl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ug=lr(Nr),dg=p({},Hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cs=lr(dg),v=p({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),I=lr(v),V=p({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=lr(V),ae=p({},Hc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fe=lr(ae),Ce=p({},ls,{newState:0,oldState:0}),at=lr(Ce),Sn=[9,13,27,32],Dt=Ti&&"CompositionEvent"in window,rn=null;Ti&&"documentMode"in document&&(rn=document.documentMode);var Ai=Ti&&"TextEvent"in window&&!rn,Ia=Ti&&(!Dt||rn&&8<rn&&11>=rn),Zi=" ",Ji=!1;function Cl(s,l){switch(s){case"keyup":return Sn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Kc=!1;function f5(s,l){switch(s){case"compositionend":return Yc(l);case"keypress":return l.which!==32?null:(Ji=!0,Zi);case"textInput":return s=l.data,s===Zi&&Ji?null:s;default:return null}}function h5(s,l){if(Kc)return s==="compositionend"||!Dt&&Cl(s,l)?(s=rf(),El=nf=Sa=null,Kc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ia&&l.locale!=="ko"?null:l.data;default:return null}}var p5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!p5[s.type]:l==="textarea"}function kS(s,l,f,g){no?Ea?Ea.push(g):Ea=[g]:no=g,l=em(l,"onChange"),0<l.length&&(f=new Ta("onChange","change",null,f,g),s.push({event:f,listeners:l}))}var lf=null,cf=null;function g5(s){hC(s,0)}function fg(s){var l=oi(s);if(bl(l))return s}function NS(s,l){if(s==="change")return l}var MS=!1;if(Ti){var gy;if(Ti){var my="oninput"in document;if(!my){var PS=document.createElement("div");PS.setAttribute("oninput","return;"),my=typeof PS.oninput=="function"}gy=my}else gy=!1;MS=gy&&(!document.documentMode||9<document.documentMode)}function OS(){lf&&(lf.detachEvent("onpropertychange",VS),cf=lf=null)}function VS(s){if(s.propertyName==="value"&&fg(cf)){var l=[];kS(l,cf,s,Si(s)),ro(g5,l)}}function m5(s,l,f){s==="focusin"?(OS(),lf=l,cf=f,lf.attachEvent("onpropertychange",VS)):s==="focusout"&&OS()}function v5(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fg(cf)}function y5(s,l){if(s==="click")return fg(l)}function b5(s,l){if(s==="input"||s==="change")return fg(l)}function x5(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ci=typeof Object.is=="function"?Object.is:x5;function uf(s,l){if(ci(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var y=f[g];if(!Me.call(l,y)||!ci(s[y],l[y]))return!1}return!0}function jS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function zS(s,l){var f=jS(s);s=0;for(var g;f;){if(f.nodeType===3){if(g=s+f.textContent.length,s<=l&&g>=l)return{node:f,offset:l-s};s=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=jS(f)}}function LS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?LS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function BS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=wa(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=wa(s.document)}return l}function vy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var _5=Ti&&"documentMode"in document&&11>=document.documentMode,Xc=null,yy=null,df=null,by=!1;function FS(s,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;by||Xc==null||Xc!==wa(g)||(g=Xc,"selectionStart"in g&&vy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),df&&uf(df,g)||(df=g,g=em(yy,"onSelect"),0<g.length&&(l=new Ta("onSelect","select",null,l,f),s.push({event:l,listeners:g}),l.target=Xc)))}function Il(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Wc={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionrun:Il("Transition","TransitionRun"),transitionstart:Il("Transition","TransitionStart"),transitioncancel:Il("Transition","TransitionCancel"),transitionend:Il("Transition","TransitionEnd")},xy={},US={};Ti&&(US=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function Dl(s){if(xy[s])return xy[s];if(!Wc[s])return s;var l=Wc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in US)return xy[s]=l[f];return s}var GS=Dl("animationend"),qS=Dl("animationiteration"),HS=Dl("animationstart"),w5=Dl("transitionrun"),E5=Dl("transitionstart"),S5=Dl("transitioncancel"),$S=Dl("transitionend"),YS=new Map,_y="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_y.push("scrollEnd");function ea(s,l){YS.set(s,l),xa(l,[s])}var hg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ci=[],Qc=0,wy=0;function pg(){for(var s=Qc,l=wy=Qc=0;l<s;){var f=Ci[l];Ci[l++]=null;var g=Ci[l];Ci[l++]=null;var y=Ci[l];Ci[l++]=null;var w=Ci[l];if(Ci[l++]=null,g!==null&&y!==null){var N=g.pending;N===null?y.next=y:(y.next=N.next,N.next=y),g.pending=y}w!==0&&KS(f,y,w)}}function gg(s,l,f,g){Ci[Qc++]=s,Ci[Qc++]=l,Ci[Qc++]=f,Ci[Qc++]=g,wy|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Ey(s,l,f,g){return gg(s,l,f,g),mg(s)}function Rl(s,l){return gg(s,null,null,l),mg(s)}function KS(s,l,f){s.lanes|=f;var g=s.alternate;g!==null&&(g.lanes|=f);for(var y=!1,w=s.return;w!==null;)w.childLanes|=f,g=w.alternate,g!==null&&(g.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&l!==null&&(y=31-Wt(f),s=w.hiddenUpdates,g=s[y],g===null?s[y]=[l]:g.push(l),l.lane=f|536870912),w):null}function mg(s){if(50<Mf)throw Mf=0,Nb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Zc={};function T5(s,l,f,g){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(s,l,f,g){return new T5(s,l,f,g)}function Sy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function us(s,l){var f=s.alternate;return f===null?(f=ui(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function XS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function vg(s,l,f,g,y,w){var N=0;if(g=s,typeof s=="function")Sy(s)&&(N=1);else if(typeof s=="string")N=Rj(s,f,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ui(31,f,l,y),s.elementType=k,s.lanes=w,s;case E:return kl(f.children,y,w,l);case S:N=8,y|=24;break;case A:return s=ui(12,f,l,y|2),s.elementType=A,s.lanes=w,s;case z:return s=ui(13,f,l,y),s.elementType=z,s.lanes=w,s;case M:return s=ui(19,f,l,y),s.elementType=M,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case D:N=9;break e;case P:N=11;break e;case T:N=14;break e;case C:N=16,g=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=ui(N,f,l,y),l.elementType=s,l.type=g,l.lanes=w,l}function kl(s,l,f,g){return s=ui(7,s,g,l),s.lanes=f,s}function Ty(s,l,f){return s=ui(6,s,null,l),s.lanes=f,s}function WS(s){var l=ui(18,null,null,0);return l.stateNode=s,l}function Ay(s,l,f){return l=ui(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var QS=new WeakMap;function Ii(s,l){if(typeof s=="object"&&s!==null){var f=QS.get(s);return f!==void 0?f:(l={value:s,source:l,stack:wt(l)},QS.set(s,l),l)}return{value:s,source:l,stack:wt(l)}}var Jc=[],eu=0,yg=null,ff=0,Di=[],Ri=0,oo=null,Da=1,Ra="";function ds(s,l){Jc[eu++]=ff,Jc[eu++]=yg,yg=s,ff=l}function ZS(s,l,f){Di[Ri++]=Da,Di[Ri++]=Ra,Di[Ri++]=oo,oo=s;var g=Da;s=Ra;var y=32-Wt(g)-1;g&=~(1<<y),f+=1;var w=32-Wt(l)+y;if(30<w){var N=y-y%5;w=(g&(1<<N)-1).toString(32),g>>=N,y-=N,Da=1<<32-Wt(l)+y|f<<y|g,Ra=w+s}else Da=1<<w|f<<y|g,Ra=s}function Cy(s){s.return!==null&&(ds(s,1),ZS(s,1,0))}function Iy(s){for(;s===yg;)yg=Jc[--eu],Jc[eu]=null,ff=Jc[--eu],Jc[eu]=null;for(;s===oo;)oo=Di[--Ri],Di[Ri]=null,Ra=Di[--Ri],Di[Ri]=null,Da=Di[--Ri],Di[Ri]=null}function JS(s,l){Di[Ri++]=Da,Di[Ri++]=Ra,Di[Ri++]=oo,Da=l.id,Ra=l.overflow,oo=s}var cr=null,Jt=null,Et=!1,lo=null,ki=!1,Dy=Error(r(519));function co(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hf(Ii(l,s)),Dy}function eT(s){var l=s.stateNode,f=s.type,g=s.memoizedProps;switch(l[cn]=s,l[un]=g,f){case"dialog":vt("cancel",l),vt("close",l);break;case"iframe":case"object":case"embed":vt("load",l);break;case"video":case"audio":for(f=0;f<Of.length;f++)vt(Of[f],l);break;case"source":vt("error",l);break;case"img":case"image":case"link":vt("error",l),vt("load",l);break;case"details":vt("toggle",l);break;case"input":vt("invalid",l),Qp(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":vt("invalid",l);break;case"textarea":vt("invalid",l),eo(l,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||vC(l.textContent,f)?(g.popover!=null&&(vt("beforetoggle",l),vt("toggle",l)),g.onScroll!=null&&vt("scroll",l),g.onScrollEnd!=null&&vt("scrollend",l),g.onClick!=null&&(l.onclick=Xi),l=!0):l=!1,l||co(s,!0)}function tT(s){for(cr=s.return;cr;)switch(cr.tag){case 5:case 31:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:cr=cr.return}}function tu(s){if(s!==cr)return!1;if(!Et)return tT(s),Et=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Yb(s.type,s.memoizedProps)),f=!f),f&&Jt&&co(s),tT(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Jt=AC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Jt=AC(s)}else l===27?(l=Jt,So(s.type)?(s=Zb,Zb=null,Jt=s):Jt=l):Jt=cr?Mi(s.stateNode.nextSibling):null;return!0}function Nl(){Jt=cr=null,Et=!1}function Ry(){var s=lo;return s!==null&&(Qr===null?Qr=s:Qr.push.apply(Qr,s),lo=null),s}function hf(s){lo===null?lo=[s]:lo.push(s)}var ky=B(null),Ml=null,fs=null;function uo(s,l,f){K(ky,l._currentValue),l._currentValue=f}function hs(s){s._currentValue=ky.current,Q(ky)}function Ny(s,l,f){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===f)break;s=s.return}}function My(s,l,f,g){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var N=y.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=y;for(var W=0;W<l.length;W++)if(U.context===l[W]){w.lanes|=f,U=w.alternate,U!==null&&(U.lanes|=f),Ny(w.return,f,s),g||(N=null);break e}w=U.next}}else if(y.tag===18){if(N=y.return,N===null)throw Error(r(341));N.lanes|=f,w=N.alternate,w!==null&&(w.lanes|=f),Ny(N,f,s),N=null}else N=y.child;if(N!==null)N.return=y;else for(N=y;N!==null;){if(N===s){N=null;break}if(y=N.sibling,y!==null){y.return=N.return,N=y;break}N=N.return}y=N}}function nu(s,l,f,g){s=null;for(var y=l,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var N=y.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var U=y.type;ci(y.pendingProps.value,N.value)||(s!==null?s.push(U):s=[U])}}else if(y===ge.current){if(N=y.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Bf):s=[Bf])}y=y.return}s!==null&&My(l,s,f,g),l.flags|=262144}function bg(s){for(s=s.firstContext;s!==null;){if(!ci(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Pl(s){Ml=s,fs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ur(s){return nT(Ml,s)}function xg(s,l){return Ml===null&&Pl(s),nT(s,l)}function nT(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},fs===null){if(s===null)throw Error(r(308));fs=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else fs=fs.next=l;return f}var A5=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},C5=t.unstable_scheduleCallback,I5=t.unstable_NormalPriority,Pn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Py(){return{controller:new A5,data:new Map,refCount:0}}function pf(s){s.refCount--,s.refCount===0&&C5(I5,function(){s.controller.abort()})}var gf=null,Oy=0,ru=0,iu=null;function D5(s,l){if(gf===null){var f=gf=[];Oy=0,ru=zb(),iu={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Oy++,l.then(rT,rT),l}function rT(){if(--Oy===0&&gf!==null){iu!==null&&(iu.status="fulfilled");var s=gf;gf=null,ru=0,iu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function R5(s,l){var f=[],g={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(g.status="rejected",g.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),g}var iT=H.S;H.S=function(s,l){FA=pt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&D5(s,l),iT!==null&&iT(s,l)};var Ol=B(null);function Vy(){var s=Ol.current;return s!==null?s:Yt.pooledCache}function _g(s,l){l===null?K(Ol,Ol.current):K(Ol,l.pool)}function aT(){var s=Vy();return s===null?null:{parent:Pn._currentValue,pool:s}}var au=Error(r(460)),jy=Error(r(474)),wg=Error(r(542)),Eg={then:function(){}};function sT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function oT(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Xi,Xi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,cT(s),s;default:if(typeof l.status=="string")l.then(Xi,Xi);else{if(s=Yt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=g}},function(g){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,cT(s),s}throw jl=l,au}}function Vl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(jl=f,au):f}}var jl=null;function lT(){if(jl===null)throw Error(r(459));var s=jl;return jl=null,s}function cT(s){if(s===au||s===wg)throw Error(r(483))}var su=null,mf=0;function Sg(s){var l=mf;return mf+=1,su===null&&(su=[]),oT(su,s,l)}function vf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Tg(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function uT(s){function l(re,ee){if(s){var se=re.deletions;se===null?(re.deletions=[ee],re.flags|=16):se.push(ee)}}function f(re,ee){if(!s)return null;for(;ee!==null;)l(re,ee),ee=ee.sibling;return null}function g(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function y(re,ee){return re=us(re,ee),re.index=0,re.sibling=null,re}function w(re,ee,se){return re.index=se,s?(se=re.alternate,se!==null?(se=se.index,se<ee?(re.flags|=67108866,ee):se):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function N(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function U(re,ee,se,ye){return ee===null||ee.tag!==6?(ee=Ty(se,re.mode,ye),ee.return=re,ee):(ee=y(ee,se),ee.return=re,ee)}function W(re,ee,se,ye){var Ge=se.type;return Ge===E?ve(re,ee,se.props.children,ye,se.key):ee!==null&&(ee.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===C&&Vl(Ge)===ee.type)?(ee=y(ee,se.props),vf(ee,se),ee.return=re,ee):(ee=vg(se.type,se.key,se.props,null,re.mode,ye),vf(ee,se),ee.return=re,ee)}function oe(re,ee,se,ye){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Ay(se,re.mode,ye),ee.return=re,ee):(ee=y(ee,se.children||[]),ee.return=re,ee)}function ve(re,ee,se,ye,Ge){return ee===null||ee.tag!==7?(ee=kl(se,re.mode,ye,Ge),ee.return=re,ee):(ee=y(ee,se),ee.return=re,ee)}function be(re,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Ty(""+ee,re.mode,se),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return se=vg(ee.type,ee.key,ee.props,null,re.mode,se),vf(se,ee),se.return=re,se;case _:return ee=Ay(ee,re.mode,se),ee.return=re,ee;case C:return ee=Vl(ee),be(re,ee,se)}if($(ee)||F(ee))return ee=kl(ee,re.mode,se,null),ee.return=re,ee;if(typeof ee.then=="function")return be(re,Sg(ee),se);if(ee.$$typeof===R)return be(re,xg(re,ee),se);Tg(re,ee)}return null}function le(re,ee,se,ye){var Ge=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ge!==null?null:U(re,ee,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Ge?W(re,ee,se,ye):null;case _:return se.key===Ge?oe(re,ee,se,ye):null;case C:return se=Vl(se),le(re,ee,se,ye)}if($(se)||F(se))return Ge!==null?null:ve(re,ee,se,ye,null);if(typeof se.then=="function")return le(re,ee,Sg(se),ye);if(se.$$typeof===R)return le(re,ee,xg(re,se),ye);Tg(re,se)}return null}function he(re,ee,se,ye,Ge){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(se)||null,U(ee,re,""+ye,Ge);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return re=re.get(ye.key===null?se:ye.key)||null,W(ee,re,ye,Ge);case _:return re=re.get(ye.key===null?se:ye.key)||null,oe(ee,re,ye,Ge);case C:return ye=Vl(ye),he(re,ee,se,ye,Ge)}if($(ye)||F(ye))return re=re.get(se)||null,ve(ee,re,ye,Ge,null);if(typeof ye.then=="function")return he(re,ee,se,Sg(ye),Ge);if(ye.$$typeof===R)return he(re,ee,se,xg(ee,ye),Ge);Tg(ee,ye)}return null}function Pe(re,ee,se,ye){for(var Ge=null,Ct=null,Ve=ee,lt=ee=0,bt=null;Ve!==null&&lt<se.length;lt++){Ve.index>lt?(bt=Ve,Ve=null):bt=Ve.sibling;var It=le(re,Ve,se[lt],ye);if(It===null){Ve===null&&(Ve=bt);break}s&&Ve&&It.alternate===null&&l(re,Ve),ee=w(It,ee,lt),Ct===null?Ge=It:Ct.sibling=It,Ct=It,Ve=bt}if(lt===se.length)return f(re,Ve),Et&&ds(re,lt),Ge;if(Ve===null){for(;lt<se.length;lt++)Ve=be(re,se[lt],ye),Ve!==null&&(ee=w(Ve,ee,lt),Ct===null?Ge=Ve:Ct.sibling=Ve,Ct=Ve);return Et&&ds(re,lt),Ge}for(Ve=g(Ve);lt<se.length;lt++)bt=he(Ve,re,lt,se[lt],ye),bt!==null&&(s&&bt.alternate!==null&&Ve.delete(bt.key===null?lt:bt.key),ee=w(bt,ee,lt),Ct===null?Ge=bt:Ct.sibling=bt,Ct=bt);return s&&Ve.forEach(function(Do){return l(re,Do)}),Et&&ds(re,lt),Ge}function Ke(re,ee,se,ye){if(se==null)throw Error(r(151));for(var Ge=null,Ct=null,Ve=ee,lt=ee=0,bt=null,It=se.next();Ve!==null&&!It.done;lt++,It=se.next()){Ve.index>lt?(bt=Ve,Ve=null):bt=Ve.sibling;var Do=le(re,Ve,It.value,ye);if(Do===null){Ve===null&&(Ve=bt);break}s&&Ve&&Do.alternate===null&&l(re,Ve),ee=w(Do,ee,lt),Ct===null?Ge=Do:Ct.sibling=Do,Ct=Do,Ve=bt}if(It.done)return f(re,Ve),Et&&ds(re,lt),Ge;if(Ve===null){for(;!It.done;lt++,It=se.next())It=be(re,It.value,ye),It!==null&&(ee=w(It,ee,lt),Ct===null?Ge=It:Ct.sibling=It,Ct=It);return Et&&ds(re,lt),Ge}for(Ve=g(Ve);!It.done;lt++,It=se.next())It=he(Ve,re,lt,It.value,ye),It!==null&&(s&&It.alternate!==null&&Ve.delete(It.key===null?lt:It.key),ee=w(It,ee,lt),Ct===null?Ge=It:Ct.sibling=It,Ct=It);return s&&Ve.forEach(function(Fj){return l(re,Fj)}),Et&&ds(re,lt),Ge}function qt(re,ee,se,ye){if(typeof se=="object"&&se!==null&&se.type===E&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Ge=se.key;ee!==null;){if(ee.key===Ge){if(Ge=se.type,Ge===E){if(ee.tag===7){f(re,ee.sibling),ye=y(ee,se.props.children),ye.return=re,re=ye;break e}}else if(ee.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===C&&Vl(Ge)===ee.type){f(re,ee.sibling),ye=y(ee,se.props),vf(ye,se),ye.return=re,re=ye;break e}f(re,ee);break}else l(re,ee);ee=ee.sibling}se.type===E?(ye=kl(se.props.children,re.mode,ye,se.key),ye.return=re,re=ye):(ye=vg(se.type,se.key,se.props,null,re.mode,ye),vf(ye,se),ye.return=re,re=ye)}return N(re);case _:e:{for(Ge=se.key;ee!==null;){if(ee.key===Ge)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){f(re,ee.sibling),ye=y(ee,se.children||[]),ye.return=re,re=ye;break e}else{f(re,ee);break}else l(re,ee);ee=ee.sibling}ye=Ay(se,re.mode,ye),ye.return=re,re=ye}return N(re);case C:return se=Vl(se),qt(re,ee,se,ye)}if($(se))return Pe(re,ee,se,ye);if(F(se)){if(Ge=F(se),typeof Ge!="function")throw Error(r(150));return se=Ge.call(se),Ke(re,ee,se,ye)}if(typeof se.then=="function")return qt(re,ee,Sg(se),ye);if(se.$$typeof===R)return qt(re,ee,xg(re,se),ye);Tg(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(f(re,ee.sibling),ye=y(ee,se),ye.return=re,re=ye):(f(re,ee),ye=Ty(se,re.mode,ye),ye.return=re,re=ye),N(re)):f(re,ee)}return function(re,ee,se,ye){try{mf=0;var Ge=qt(re,ee,se,ye);return su=null,Ge}catch(Ve){if(Ve===au||Ve===wg)throw Ve;var Ct=ui(29,Ve,null,re.mode);return Ct.lanes=ye,Ct.return=re,Ct}finally{}}}var zl=uT(!0),dT=uT(!1),fo=!1;function zy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ly(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ho(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function po(s,l,f){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Rt&2)!==0){var y=g.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),g.pending=l,l=mg(s),KS(s,null,f),l}return gg(s,g,l,f),mg(s)}function yf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,Rn(s,f)}}function By(s,l){var f=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var y=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?y=w=N:w=w.next=N,f=f.next}while(f!==null);w===null?y=w=l:w=w.next=l}else y=w=l;f={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Fy=!1;function bf(){if(Fy){var s=iu;if(s!==null)throw s}}function xf(s,l,f,g){Fy=!1;var y=s.updateQueue;fo=!1;var w=y.firstBaseUpdate,N=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var W=U,oe=W.next;W.next=null,N===null?w=oe:N.next=oe,N=W;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,U=ve.lastBaseUpdate,U!==N&&(U===null?ve.firstBaseUpdate=oe:U.next=oe,ve.lastBaseUpdate=W))}if(w!==null){var be=y.baseState;N=0,ve=oe=W=null,U=w;do{var le=U.lane&-536870913,he=le!==U.lane;if(he?(yt&le)===le:(g&le)===le){le!==0&&le===ru&&(Fy=!0),ve!==null&&(ve=ve.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Pe=s,Ke=U;le=l;var qt=f;switch(Ke.tag){case 1:if(Pe=Ke.payload,typeof Pe=="function"){be=Pe.call(qt,be,le);break e}be=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ke.payload,le=typeof Pe=="function"?Pe.call(qt,be,le):Pe,le==null)break e;be=p({},be,le);break e;case 2:fo=!0}}le=U.callback,le!==null&&(s.flags|=64,he&&(s.flags|=8192),he=y.callbacks,he===null?y.callbacks=[le]:he.push(le))}else he={lane:le,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ve===null?(oe=ve=he,W=be):ve=ve.next=he,N|=le;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;he=U,U=he.next,he.next=null,y.lastBaseUpdate=he,y.shared.pending=null}}while(!0);ve===null&&(W=be),y.baseState=W,y.firstBaseUpdate=oe,y.lastBaseUpdate=ve,w===null&&(y.shared.lanes=0),bo|=N,s.lanes=N,s.memoizedState=be}}function fT(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function hT(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)fT(f[s],l)}var ou=B(null),Ag=B(0);function pT(s,l){s=ws,K(Ag,s),K(ou,l),ws=s|l.baseLanes}function Uy(){K(Ag,ws),K(ou,ou.current)}function Gy(){ws=Ag.current,Q(ou),Q(Ag)}var di=B(null),Ni=null;function go(s){var l=s.alternate;K(Tn,Tn.current&1),K(di,s),Ni===null&&(l===null||ou.current!==null||l.memoizedState!==null)&&(Ni=s)}function qy(s){K(Tn,Tn.current),K(di,s),Ni===null&&(Ni=s)}function gT(s){s.tag===22?(K(Tn,Tn.current),K(di,s),Ni===null&&(Ni=s)):mo()}function mo(){K(Tn,Tn.current),K(di,di.current)}function fi(s){Q(di),Ni===s&&(Ni=null),Q(Tn)}var Tn=B(0);function Cg(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Wb(f)||Qb(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ps=0,st=null,Ut=null,On=null,Ig=!1,lu=!1,Ll=!1,Dg=0,_f=0,cu=null,k5=0;function yn(){throw Error(r(321))}function Hy(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!ci(s[f],l[f]))return!1;return!0}function $y(s,l,f,g,y,w){return ps=w,st=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?ZT:ob,Ll=!1,w=f(g,y),Ll=!1,lu&&(w=vT(l,f,g,y)),mT(s),w}function mT(s){H.H=Sf;var l=Ut!==null&&Ut.next!==null;if(ps=0,On=Ut=st=null,Ig=!1,_f=0,cu=null,l)throw Error(r(300));s===null||Vn||(s=s.dependencies,s!==null&&bg(s)&&(Vn=!0))}function vT(s,l,f,g){st=s;var y=0;do{if(lu&&(cu=null),_f=0,lu=!1,25<=y)throw Error(r(301));if(y+=1,On=Ut=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}H.H=JT,w=l(f,g)}while(lu);return w}function N5(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?wf(l):l,s=s.useState()[0],(Ut!==null?Ut.memoizedState:null)!==s&&(st.flags|=1024),l}function Yy(){var s=Dg!==0;return Dg=0,s}function Ky(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Xy(s){if(Ig){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ig=!1}ps=0,On=Ut=st=null,lu=!1,_f=Dg=0,cu=null}function Mr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?st.memoizedState=On=s:On=On.next=s,On}function An(){if(Ut===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var l=On===null?st.memoizedState:On.next;if(l!==null)On=l,Ut=s;else{if(s===null)throw st.alternate===null?Error(r(467)):Error(r(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},On===null?st.memoizedState=On=s:On=On.next=s}return On}function Rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wf(s){var l=_f;return _f+=1,cu===null&&(cu=[]),s=oT(cu,s,l),l=st,(On===null?l.memoizedState:On.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?ZT:ob),s}function kg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wf(s);if(s.$$typeof===R)return ur(s)}throw Error(r(438,String(s)))}function Wy(s){var l=null,f=st.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=st.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Rg(),st.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),g=0;g<s;g++)f[g]=O;return l.index++,f}function gs(s,l){return typeof l=="function"?l(s):l}function Ng(s){var l=An();return Qy(l,Ut,s)}function Qy(s,l,f){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var y=s.baseQueue,w=g.pending;if(w!==null){if(y!==null){var N=y.next;y.next=w.next,w.next=N}l.baseQueue=y=w,g.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{l=y.next;var U=N=null,W=null,oe=l,ve=!1;do{var be=oe.lane&-536870913;if(be!==oe.lane?(yt&be)===be:(ps&be)===be){var le=oe.revertLane;if(le===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),be===ru&&(ve=!0);else if((ps&le)===le){oe=oe.next,le===ru&&(ve=!0);continue}else be={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(U=W=be,N=w):W=W.next=be,st.lanes|=le,bo|=le;be=oe.action,Ll&&f(w,be),w=oe.hasEagerState?oe.eagerState:f(w,be)}else le={lane:be,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(U=W=le,N=w):W=W.next=le,st.lanes|=be,bo|=be;oe=oe.next}while(oe!==null&&oe!==l);if(W===null?N=w:W.next=U,!ci(w,s.memoizedState)&&(Vn=!0,ve&&(f=iu,f!==null)))throw f;s.memoizedState=w,s.baseState=N,s.baseQueue=W,g.lastRenderedState=w}return y===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Zy(s){var l=An(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var g=f.dispatch,y=f.pending,w=l.memoizedState;if(y!==null){f.pending=null;var N=y=y.next;do w=s(w,N.action),N=N.next;while(N!==y);ci(w,l.memoizedState)||(Vn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,g]}function yT(s,l,f){var g=st,y=An(),w=Et;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!ci((Ut||y).memoizedState,f);if(N&&(y.memoizedState=f,Vn=!0),y=y.queue,tb(_T.bind(null,g,y,s),[s]),y.getSnapshot!==l||N||On!==null&&On.memoizedState.tag&1){if(g.flags|=2048,uu(9,{destroy:void 0},xT.bind(null,g,y,f,l),null),Yt===null)throw Error(r(349));w||(ps&127)!==0||bT(g,l,f)}return f}function bT(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=st.updateQueue,l===null?(l=Rg(),st.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function xT(s,l,f,g){l.value=f,l.getSnapshot=g,wT(l)&&ET(s)}function _T(s,l,f){return f(function(){wT(l)&&ET(s)})}function wT(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!ci(s,f)}catch{return!0}}function ET(s){var l=Rl(s,2);l!==null&&Zr(l,s,2)}function Jy(s){var l=Mr();if(typeof s=="function"){var f=s;if(s=f(),Ll){tr(!0);try{f()}finally{tr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:s},l}function ST(s,l,f,g){return s.baseState=f,Qy(s,Ut,typeof g=="function"?g:gs)}function M5(s,l,f,g,y){if(Og(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};H.T!==null?f(!0):w.isTransition=!1,g(w),f=l.pending,f===null?(w.next=l.pending=w,TT(l,w)):(w.next=f.next,l.pending=f.next=w)}}function TT(s,l){var f=l.action,g=l.payload,y=s.state;if(l.isTransition){var w=H.T,N={};H.T=N;try{var U=f(y,g),W=H.S;W!==null&&W(N,U),AT(s,l,U)}catch(oe){eb(s,l,oe)}finally{w!==null&&N.types!==null&&(w.types=N.types),H.T=w}}else try{w=f(y,g),AT(s,l,w)}catch(oe){eb(s,l,oe)}}function AT(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){CT(s,l,g)},function(g){return eb(s,l,g)}):CT(s,l,f)}function CT(s,l,f){l.status="fulfilled",l.value=f,IT(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,TT(s,f)))}function eb(s,l,f){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,IT(l),l=l.next;while(l!==g)}s.action=null}function IT(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function DT(s,l){return l}function RT(s,l){if(Et){var f=Yt.formState;if(f!==null){e:{var g=st;if(Et){if(Jt){t:{for(var y=Jt,w=ki;y.nodeType!==8;){if(!w){y=null;break t}if(y=Mi(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Jt=Mi(y.nextSibling),g=y.data==="F!";break e}}co(g)}g=!1}g&&(l=f[0])}}return f=Mr(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DT,lastRenderedState:l},f.queue=g,f=XT.bind(null,st,g),g.dispatch=f,g=Jy(!1),w=sb.bind(null,st,!1,g.queue),g=Mr(),y={state:l,dispatch:null,action:s,pending:null},g.queue=y,f=M5.bind(null,st,y,w,f),y.dispatch=f,g.memoizedState=s,[l,f,!1]}function kT(s){var l=An();return NT(l,Ut,s)}function NT(s,l,f){if(l=Qy(s,l,DT)[0],s=Ng(gs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=wf(l)}catch(N){throw N===au?wg:N}else g=l;l=An();var y=l.queue,w=y.dispatch;return f!==l.memoizedState&&(st.flags|=2048,uu(9,{destroy:void 0},P5.bind(null,y,f),null)),[g,w,s]}function P5(s,l){s.action=l}function MT(s){var l=An(),f=Ut;if(f!==null)return NT(l,f,s);An(),l=l.memoizedState,f=An();var g=f.queue.dispatch;return f.memoizedState=s,[l,g,!1]}function uu(s,l,f,g){return s={tag:s,create:f,deps:g,inst:l,next:null},l=st.updateQueue,l===null&&(l=Rg(),st.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(g=f.next,f.next=s,s.next=g,l.lastEffect=s),s}function PT(){return An().memoizedState}function Mg(s,l,f,g){var y=Mr();st.flags|=s,y.memoizedState=uu(1|l,{destroy:void 0},f,g===void 0?null:g)}function Pg(s,l,f,g){var y=An();g=g===void 0?null:g;var w=y.memoizedState.inst;Ut!==null&&g!==null&&Hy(g,Ut.memoizedState.deps)?y.memoizedState=uu(l,w,f,g):(st.flags|=s,y.memoizedState=uu(1|l,w,f,g))}function OT(s,l){Mg(8390656,8,s,l)}function tb(s,l){Pg(2048,8,s,l)}function O5(s){st.flags|=4;var l=st.updateQueue;if(l===null)l=Rg(),st.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function VT(s){var l=An().memoizedState;return O5({ref:l,nextImpl:s}),function(){if((Rt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function jT(s,l){return Pg(4,2,s,l)}function zT(s,l){return Pg(4,4,s,l)}function LT(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function BT(s,l,f){f=f!=null?f.concat([s]):null,Pg(4,4,LT.bind(null,l,s),f)}function nb(){}function FT(s,l){var f=An();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&Hy(l,g[1])?g[0]:(f.memoizedState=[s,l],s)}function UT(s,l){var f=An();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&Hy(l,g[1]))return g[0];if(g=s(),Ll){tr(!0);try{s()}finally{tr(!1)}}return f.memoizedState=[g,l],g}function rb(s,l,f){return f===void 0||(ps&1073741824)!==0&&(yt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=GA(),st.lanes|=s,bo|=s,f)}function GT(s,l,f,g){return ci(f,l)?f:ou.current!==null?(s=rb(s,f,g),ci(s,l)||(Vn=!0),s):(ps&42)===0||(ps&1073741824)!==0&&(yt&261930)===0?(Vn=!0,s.memoizedState=f):(s=GA(),st.lanes|=s,bo|=s,l)}function qT(s,l,f,g,y){var w=Y.p;Y.p=w!==0&&8>w?w:8;var N=H.T,U={};H.T=U,sb(s,!1,l,f);try{var W=y(),oe=H.S;if(oe!==null&&oe(U,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ve=R5(W,g);Ef(s,l,ve,gi(s))}else Ef(s,l,g,gi(s))}catch(be){Ef(s,l,{then:function(){},status:"rejected",reason:be},gi())}finally{Y.p=w,N!==null&&U.types!==null&&(N.types=U.types),H.T=N}}function V5(){}function ib(s,l,f,g){if(s.tag!==5)throw Error(r(476));var y=HT(s).queue;qT(s,y,l,te,f===null?V5:function(){return $T(s),f(g)})}function HT(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:te},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function $T(s){var l=HT(s);l.next===null&&(l=s.alternate.memoizedState),Ef(s,l.next.queue,{},gi())}function ab(){return ur(Bf)}function YT(){return An().memoizedState}function KT(){return An().memoizedState}function j5(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=gi();s=ho(f);var g=po(l,s,f);g!==null&&(Zr(g,l,f),yf(g,l,f)),l={cache:Py()},s.payload=l;return}l=l.return}}function z5(s,l,f){var g=gi();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Og(s)?WT(l,f):(f=Ey(s,l,f,g),f!==null&&(Zr(f,s,g),QT(f,l,g)))}function XT(s,l,f){var g=gi();Ef(s,l,f,g)}function Ef(s,l,f,g){var y={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Og(s))WT(l,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var N=l.lastRenderedState,U=w(N,f);if(y.hasEagerState=!0,y.eagerState=U,ci(U,N))return gg(s,l,y,0),Yt===null&&pg(),!1}catch{}finally{}if(f=Ey(s,l,y,g),f!==null)return Zr(f,s,g),QT(f,l,g),!0}return!1}function sb(s,l,f,g){if(g={lane:2,revertLane:zb(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Og(s)){if(l)throw Error(r(479))}else l=Ey(s,f,g,2),l!==null&&Zr(l,s,2)}function Og(s){var l=s.alternate;return s===st||l!==null&&l===st}function WT(s,l){lu=Ig=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function QT(s,l,f){if((f&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,Rn(s,f)}}var Sf={readContext:ur,use:kg,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};Sf.useEffectEvent=yn;var ZT={readContext:ur,use:kg,useCallback:function(s,l){return Mr().memoizedState=[s,l===void 0?null:l],s},useContext:ur,useEffect:OT,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Mg(4194308,4,LT.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Mg(4194308,4,s,l)},useInsertionEffect:function(s,l){Mg(4,2,s,l)},useMemo:function(s,l){var f=Mr();l=l===void 0?null:l;var g=s();if(Ll){tr(!0);try{s()}finally{tr(!1)}}return f.memoizedState=[g,l],g},useReducer:function(s,l,f){var g=Mr();if(f!==void 0){var y=f(l);if(Ll){tr(!0);try{f(l)}finally{tr(!1)}}}else y=l;return g.memoizedState=g.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},g.queue=s,s=s.dispatch=z5.bind(null,st,s),[g.memoizedState,s]},useRef:function(s){var l=Mr();return s={current:s},l.memoizedState=s},useState:function(s){s=Jy(s);var l=s.queue,f=XT.bind(null,st,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:nb,useDeferredValue:function(s,l){var f=Mr();return rb(f,s,l)},useTransition:function(){var s=Jy(!1);return s=qT.bind(null,st,s.queue,!0,!1),Mr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var g=st,y=Mr();if(Et){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Yt===null)throw Error(r(349));(yt&127)!==0||bT(g,l,f)}y.memoizedState=f;var w={value:f,getSnapshot:l};return y.queue=w,OT(_T.bind(null,g,w,s),[s]),g.flags|=2048,uu(9,{destroy:void 0},xT.bind(null,g,w,f,l),null),f},useId:function(){var s=Mr(),l=Yt.identifierPrefix;if(Et){var f=Ra,g=Da;f=(g&~(1<<32-Wt(g)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Dg++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=k5++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:ab,useFormState:RT,useActionState:RT,useOptimistic:function(s){var l=Mr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=sb.bind(null,st,!0,f),f.dispatch=l,[s,l]},useMemoCache:Wy,useCacheRefresh:function(){return Mr().memoizedState=j5.bind(null,st)},useEffectEvent:function(s){var l=Mr(),f={impl:s};return l.memoizedState=f,function(){if((Rt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},ob={readContext:ur,use:kg,useCallback:FT,useContext:ur,useEffect:tb,useImperativeHandle:BT,useInsertionEffect:jT,useLayoutEffect:zT,useMemo:UT,useReducer:Ng,useRef:PT,useState:function(){return Ng(gs)},useDebugValue:nb,useDeferredValue:function(s,l){var f=An();return GT(f,Ut.memoizedState,s,l)},useTransition:function(){var s=Ng(gs)[0],l=An().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:yT,useId:YT,useHostTransitionStatus:ab,useFormState:kT,useActionState:kT,useOptimistic:function(s,l){var f=An();return ST(f,Ut,s,l)},useMemoCache:Wy,useCacheRefresh:KT};ob.useEffectEvent=VT;var JT={readContext:ur,use:kg,useCallback:FT,useContext:ur,useEffect:tb,useImperativeHandle:BT,useInsertionEffect:jT,useLayoutEffect:zT,useMemo:UT,useReducer:Zy,useRef:PT,useState:function(){return Zy(gs)},useDebugValue:nb,useDeferredValue:function(s,l){var f=An();return Ut===null?rb(f,s,l):GT(f,Ut.memoizedState,s,l)},useTransition:function(){var s=Zy(gs)[0],l=An().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:yT,useId:YT,useHostTransitionStatus:ab,useFormState:MT,useActionState:MT,useOptimistic:function(s,l){var f=An();return Ut!==null?ST(f,Ut,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Wy,useCacheRefresh:KT};JT.useEffectEvent=VT;function lb(s,l,f,g){l=s.memoizedState,f=f(g,l),f=f==null?l:p({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var cb={enqueueSetState:function(s,l,f){s=s._reactInternals;var g=gi(),y=ho(g);y.payload=l,f!=null&&(y.callback=f),l=po(s,y,g),l!==null&&(Zr(l,s,g),yf(l,s,g))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var g=gi(),y=ho(g);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=po(s,y,g),l!==null&&(Zr(l,s,g),yf(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=gi(),g=ho(f);g.tag=2,l!=null&&(g.callback=l),l=po(s,g,f),l!==null&&(Zr(l,s,f),yf(l,s,f))}};function eA(s,l,f,g,y,w,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,w,N):l.prototype&&l.prototype.isPureReactComponent?!uf(f,g)||!uf(y,w):!0}function tA(s,l,f,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==s&&cb.enqueueReplaceState(l,l.state,null)}function Bl(s,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(s=s.defaultProps){f===l&&(f=p({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function nA(s){hg(s)}function rA(s){console.error(s)}function iA(s){hg(s)}function Vg(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function aA(s,l,f){try{var g=s.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ub(s,l,f){return f=ho(f),f.tag=3,f.payload={element:null},f.callback=function(){Vg(s,l)},f}function sA(s){return s=ho(s),s.tag=3,s}function oA(s,l,f,g){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var w=g.value;s.payload=function(){return y(w)},s.callback=function(){aA(l,f,g)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){aA(l,f,g),typeof y!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function L5(s,l,f,g,y){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&nu(l,f,y,!0),f=di.current,f!==null){switch(f.tag){case 31:case 13:return Ni===null?Kg():f.alternate===null&&bn===0&&(bn=3),f.flags&=-257,f.flags|=65536,f.lanes=y,g===Eg?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),Ob(s,g,y)),!1;case 22:return f.flags|=65536,g===Eg?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),Ob(s,g,y)),!1}throw Error(r(435,f.tag))}return Ob(s,g,y),Kg(),!1}if(Et)return l=di.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,g!==Dy&&(s=Error(r(422),{cause:g}),hf(Ii(s,f)))):(g!==Dy&&(l=Error(r(423),{cause:g}),hf(Ii(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,g=Ii(g,f),y=ub(s.stateNode,g,y),By(s,y),bn!==4&&(bn=2)),!1;var w=Error(r(520),{cause:g});if(w=Ii(w,f),Nf===null?Nf=[w]:Nf.push(w),bn!==4&&(bn=2),l===null)return!0;g=Ii(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=ub(f.stateNode,g,s),By(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(xo===null||!xo.has(w))))return f.flags|=65536,y&=-y,f.lanes|=y,y=sA(y),oA(y,s,f,g),By(f,y),!1}f=f.return}while(f!==null);return!1}var db=Error(r(461)),Vn=!1;function dr(s,l,f,g){l.child=s===null?dT(l,null,f,g):zl(l,s.child,f,g)}function lA(s,l,f,g,y){f=f.render;var w=l.ref;if("ref"in g){var N={};for(var U in g)U!=="ref"&&(N[U]=g[U])}else N=g;return Pl(l),g=$y(s,l,f,N,w,y),U=Yy(),s!==null&&!Vn?(Ky(s,l,y),ms(s,l,y)):(Et&&U&&Cy(l),l.flags|=1,dr(s,l,g,y),l.child)}function cA(s,l,f,g,y){if(s===null){var w=f.type;return typeof w=="function"&&!Sy(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,uA(s,l,w,g,y)):(s=vg(f.type,null,g,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!bb(s,y)){var N=w.memoizedProps;if(f=f.compare,f=f!==null?f:uf,f(N,g)&&s.ref===l.ref)return ms(s,l,y)}return l.flags|=1,s=us(w,g),s.ref=l.ref,s.return=l,l.child=s}function uA(s,l,f,g,y){if(s!==null){var w=s.memoizedProps;if(uf(w,g)&&s.ref===l.ref)if(Vn=!1,l.pendingProps=g=w,bb(s,y))(s.flags&131072)!==0&&(Vn=!0);else return l.lanes=s.lanes,ms(s,l,y)}return fb(s,l,f,g,y)}function dA(s,l,f,g){var y=g.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,s!==null){for(g=l.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;g=y&~w}else g=0,l.child=null;return fA(s,l,w,f,g)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&_g(l,w!==null?w.cachePool:null),w!==null?pT(l,w):Uy(),gT(l);else return g=l.lanes=536870912,fA(s,l,w!==null?w.baseLanes|f:f,f,g)}else w!==null?(_g(l,w.cachePool),pT(l,w),mo(),l.memoizedState=null):(s!==null&&_g(l,null),Uy(),mo());return dr(s,l,y,f),l.child}function Tf(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function fA(s,l,f,g,y){var w=Vy();return w=w===null?null:{parent:Pn._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},s!==null&&_g(l,null),Uy(),gT(l),s!==null&&nu(s,l,g,!0),l.childLanes=y,null}function jg(s,l){return l=Lg({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function hA(s,l,f){return zl(l,s.child,null,f),s=jg(l,l.pendingProps),s.flags|=2,fi(l),l.memoizedState=null,s}function B5(s,l,f){var g=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Et){if(g.mode==="hidden")return s=jg(l,g),l.lanes=536870912,Tf(null,s);if(qy(l),(s=Jt)?(s=TC(s,ki),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Da,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},f=WS(s),f.return=l,l.child=f,cr=l,Jt=null)):s=null,s===null)throw co(l);return l.lanes=536870912,null}return jg(l,g)}var w=s.memoizedState;if(w!==null){var N=w.dehydrated;if(qy(l),y)if(l.flags&256)l.flags&=-257,l=hA(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Vn||nu(s,l,f,!1),y=(f&s.childLanes)!==0,Vn||y){if(g=Yt,g!==null&&(N=nr(g,f),N!==0&&N!==w.retryLane))throw w.retryLane=N,Rl(s,N),Zr(g,s,N),db;Kg(),l=hA(s,l,f)}else s=w.treeContext,Jt=Mi(N.nextSibling),cr=l,Et=!0,lo=null,ki=!1,s!==null&&JS(l,s),l=jg(l,g),l.flags|=4096;return l}return s=us(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function zg(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function fb(s,l,f,g,y){return Pl(l),f=$y(s,l,f,g,void 0,y),g=Yy(),s!==null&&!Vn?(Ky(s,l,y),ms(s,l,y)):(Et&&g&&Cy(l),l.flags|=1,dr(s,l,f,y),l.child)}function pA(s,l,f,g,y,w){return Pl(l),l.updateQueue=null,f=vT(l,g,f,y),mT(s),g=Yy(),s!==null&&!Vn?(Ky(s,l,w),ms(s,l,w)):(Et&&g&&Cy(l),l.flags|=1,dr(s,l,f,w),l.child)}function gA(s,l,f,g,y){if(Pl(l),l.stateNode===null){var w=Zc,N=f.contextType;typeof N=="object"&&N!==null&&(w=ur(N)),w=new f(g,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=cb,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=g,w.state=l.memoizedState,w.refs={},zy(l),N=f.contextType,w.context=typeof N=="object"&&N!==null?ur(N):Zc,w.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(lb(l,f,N,g),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&cb.enqueueReplaceState(w,w.state,null),xf(l,g,w,y),bf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){w=l.stateNode;var U=l.memoizedProps,W=Bl(f,U);w.props=W;var oe=w.context,ve=f.contextType;N=Zc,typeof ve=="object"&&ve!==null&&(N=ur(ve));var be=f.getDerivedStateFromProps;ve=typeof be=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=l.pendingProps!==U,ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||oe!==N)&&tA(l,w,g,N),fo=!1;var le=l.memoizedState;w.state=le,xf(l,g,w,y),bf(),oe=l.memoizedState,U||le!==oe||fo?(typeof be=="function"&&(lb(l,f,be,g),oe=l.memoizedState),(W=fo||eA(l,f,W,g,le,oe,N))?(ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=oe),w.props=g,w.state=oe,w.context=N,g=W):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{w=l.stateNode,Ly(s,l),N=l.memoizedProps,ve=Bl(f,N),w.props=ve,be=l.pendingProps,le=w.context,oe=f.contextType,W=Zc,typeof oe=="object"&&oe!==null&&(W=ur(oe)),U=f.getDerivedStateFromProps,(oe=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==be||le!==W)&&tA(l,w,g,W),fo=!1,le=l.memoizedState,w.state=le,xf(l,g,w,y),bf();var he=l.memoizedState;N!==be||le!==he||fo||s!==null&&s.dependencies!==null&&bg(s.dependencies)?(typeof U=="function"&&(lb(l,f,U,g),he=l.memoizedState),(ve=fo||eA(l,f,ve,g,le,he,W)||s!==null&&s.dependencies!==null&&bg(s.dependencies))?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,he,W),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,he,W)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=he),w.props=g,w.state=he,w.context=W,g=ve):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),g=!1)}return w=g,zg(s,l),g=(l.flags&128)!==0,w||g?(w=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&g?(l.child=zl(l,s.child,null,y),l.child=zl(l,null,f,y)):dr(s,l,f,y),l.memoizedState=w.state,s=l.child):s=ms(s,l,y),s}function mA(s,l,f,g){return Nl(),l.flags|=256,dr(s,l,f,g),l.child}var hb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pb(s){return{baseLanes:s,cachePool:aT()}}function gb(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=pi),s}function vA(s,l,f){var g=l.pendingProps,y=!1,w=(l.flags&128)!==0,N;if((N=w)||(N=s!==null&&s.memoizedState===null?!1:(Tn.current&2)!==0),N&&(y=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(Et){if(y?go(l):mo(),(s=Jt)?(s=TC(s,ki),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Da,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},f=WS(s),f.return=l,l.child=f,cr=l,Jt=null)):s=null,s===null)throw co(l);return Qb(s)?l.lanes=32:l.lanes=536870912,null}var U=g.children;return g=g.fallback,y?(mo(),y=l.mode,U=Lg({mode:"hidden",children:U},y),g=kl(g,y,f,null),U.return=l,g.return=l,U.sibling=g,l.child=U,g=l.child,g.memoizedState=pb(f),g.childLanes=gb(s,N,f),l.memoizedState=hb,Tf(null,g)):(go(l),mb(l,U))}var W=s.memoizedState;if(W!==null&&(U=W.dehydrated,U!==null)){if(w)l.flags&256?(go(l),l.flags&=-257,l=vb(s,l,f)):l.memoizedState!==null?(mo(),l.child=s.child,l.flags|=128,l=null):(mo(),U=g.fallback,y=l.mode,g=Lg({mode:"visible",children:g.children},y),U=kl(U,y,f,null),U.flags|=2,g.return=l,U.return=l,g.sibling=U,l.child=g,zl(l,s.child,null,f),g=l.child,g.memoizedState=pb(f),g.childLanes=gb(s,N,f),l.memoizedState=hb,l=Tf(null,g));else if(go(l),Qb(U)){if(N=U.nextSibling&&U.nextSibling.dataset,N)var oe=N.dgst;N=oe,g=Error(r(419)),g.stack="",g.digest=N,hf({value:g,source:null,stack:null}),l=vb(s,l,f)}else if(Vn||nu(s,l,f,!1),N=(f&s.childLanes)!==0,Vn||N){if(N=Yt,N!==null&&(g=nr(N,f),g!==0&&g!==W.retryLane))throw W.retryLane=g,Rl(s,g),Zr(N,s,g),db;Wb(U)||Kg(),l=vb(s,l,f)}else Wb(U)?(l.flags|=192,l.child=s.child,l=null):(s=W.treeContext,Jt=Mi(U.nextSibling),cr=l,Et=!0,lo=null,ki=!1,s!==null&&JS(l,s),l=mb(l,g.children),l.flags|=4096);return l}return y?(mo(),U=g.fallback,y=l.mode,W=s.child,oe=W.sibling,g=us(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,oe!==null?U=us(oe,U):(U=kl(U,y,f,null),U.flags|=2),U.return=l,g.return=l,g.sibling=U,l.child=g,Tf(null,g),g=l.child,U=s.child.memoizedState,U===null?U=pb(f):(y=U.cachePool,y!==null?(W=Pn._currentValue,y=y.parent!==W?{parent:W,pool:W}:y):y=aT(),U={baseLanes:U.baseLanes|f,cachePool:y}),g.memoizedState=U,g.childLanes=gb(s,N,f),l.memoizedState=hb,Tf(s.child,g)):(go(l),f=s.child,s=f.sibling,f=us(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function mb(s,l){return l=Lg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Lg(s,l){return s=ui(22,s,null,l),s.lanes=0,s}function vb(s,l,f){return zl(l,s.child,null,f),s=mb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function yA(s,l,f){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Ny(s.return,l,f)}function yb(s,l,f,g,y,w){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:y,treeForkCount:w}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=f,N.tailMode=y,N.treeForkCount=w)}function bA(s,l,f){var g=l.pendingProps,y=g.revealOrder,w=g.tail;g=g.children;var N=Tn.current,U=(N&2)!==0;if(U?(N=N&1|2,l.flags|=128):N&=1,K(Tn,N),dr(s,l,g,f),g=Et?ff:0,!U&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yA(s,f,l);else if(s.tag===19)yA(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Cg(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),yb(l,!1,y,f,w,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Cg(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}yb(l,!0,f,null,w,g);break;case"together":yb(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function ms(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),bo|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(nu(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=us(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=us(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function bb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&bg(s)))}function F5(s,l,f){switch(l.tag){case 3:Te(l,l.stateNode.containerInfo),uo(l,Pn,s.memoizedState.cache),Nl();break;case 27:case 5:Ye(l);break;case 4:Te(l,l.stateNode.containerInfo);break;case 10:uo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,qy(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(go(l),l.flags|=128,null):(f&l.child.childLanes)!==0?vA(s,l,f):(go(l),s=ms(s,l,f),s!==null?s.sibling:null);go(l);break;case 19:var y=(s.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(nu(s,l,f,!1),g=(f&l.childLanes)!==0),y){if(g)return bA(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),K(Tn,Tn.current),g)break;return null;case 22:return l.lanes=0,dA(s,l,f,l.pendingProps);case 24:uo(l,Pn,s.memoizedState.cache)}return ms(s,l,f)}function xA(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Vn=!0;else{if(!bb(s,f)&&(l.flags&128)===0)return Vn=!1,F5(s,l,f);Vn=(s.flags&131072)!==0}else Vn=!1,Et&&(l.flags&1048576)!==0&&ZS(l,ff,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(s=Vl(l.elementType),l.type=s,typeof s=="function")Sy(s)?(g=Bl(s,g),l.tag=1,l=gA(null,l,s,g,f)):(l.tag=0,l=fb(null,l,s,g,f));else{if(s!=null){var y=s.$$typeof;if(y===P){l.tag=11,l=lA(null,l,s,g,f);break e}else if(y===T){l.tag=14,l=cA(null,l,s,g,f);break e}}throw l=X(s)||s,Error(r(306,l,""))}}return l;case 0:return fb(s,l,l.type,l.pendingProps,f);case 1:return g=l.type,y=Bl(g,l.pendingProps),gA(s,l,g,y,f);case 3:e:{if(Te(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var w=l.memoizedState;y=w.element,Ly(s,l),xf(l,g,null,f);var N=l.memoizedState;if(g=N.cache,uo(l,Pn,g),g!==w.cache&&My(l,[Pn],f,!0),bf(),g=N.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=mA(s,l,g,f);break e}else if(g!==y){y=Ii(Error(r(424)),l),hf(y),l=mA(s,l,g,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Jt=Mi(s.firstChild),cr=l,Et=!0,lo=null,ki=!0,f=dT(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Nl(),g===y){l=ms(s,l,f);break e}dr(s,l,g,f)}l=l.child}return l;case 26:return zg(s,l),s===null?(f=kC(l.type,null,l.pendingProps,null))?l.memoizedState=f:Et||(f=l.type,s=l.pendingProps,g=tm(de.current).createElement(f),g[cn]=l,g[un]=s,fr(g,f,s),Nn(g),l.stateNode=g):l.memoizedState=kC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ye(l),s===null&&Et&&(g=l.stateNode=IC(l.type,l.pendingProps,de.current),cr=l,ki=!0,y=Jt,So(l.type)?(Zb=y,Jt=Mi(g.firstChild)):Jt=y),dr(s,l,l.pendingProps.children,f),zg(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Et&&((y=g=Jt)&&(g=vj(g,l.type,l.pendingProps,ki),g!==null?(l.stateNode=g,cr=l,Jt=Mi(g.firstChild),ki=!1,y=!0):y=!1),y||co(l)),Ye(l),y=l.type,w=l.pendingProps,N=s!==null?s.memoizedProps:null,g=w.children,Yb(y,w)?g=null:N!==null&&Yb(y,N)&&(l.flags|=32),l.memoizedState!==null&&(y=$y(s,l,N5,null,null,f),Bf._currentValue=y),zg(s,l),dr(s,l,g,f),l.child;case 6:return s===null&&Et&&((s=f=Jt)&&(f=yj(f,l.pendingProps,ki),f!==null?(l.stateNode=f,cr=l,Jt=null,s=!0):s=!1),s||co(l)),null;case 13:return vA(s,l,f);case 4:return Te(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=zl(l,null,g,f):dr(s,l,g,f),l.child;case 11:return lA(s,l,l.type,l.pendingProps,f);case 7:return dr(s,l,l.pendingProps,f),l.child;case 8:return dr(s,l,l.pendingProps.children,f),l.child;case 12:return dr(s,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,uo(l,l.type,g.value),dr(s,l,g.children,f),l.child;case 9:return y=l.type._context,g=l.pendingProps.children,Pl(l),y=ur(y),g=g(y),l.flags|=1,dr(s,l,g,f),l.child;case 14:return cA(s,l,l.type,l.pendingProps,f);case 15:return uA(s,l,l.type,l.pendingProps,f);case 19:return bA(s,l,f);case 31:return B5(s,l,f);case 22:return dA(s,l,f,l.pendingProps);case 24:return Pl(l),g=ur(Pn),s===null?(y=Vy(),y===null&&(y=Yt,w=Py(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=f),y=w),l.memoizedState={parent:g,cache:y},zy(l),uo(l,Pn,y)):((s.lanes&f)!==0&&(Ly(s,l),xf(l,null,null,f),bf()),y=s.memoizedState,w=l.memoizedState,y.parent!==g?(y={parent:g,cache:g},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),uo(l,Pn,g)):(g=w.cache,uo(l,Pn,g),g!==y.cache&&My(l,[Pn],f,!0))),dr(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function vs(s){s.flags|=4}function xb(s,l,f,g,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(YA())s.flags|=8192;else throw jl=Eg,jy}else s.flags&=-16777217}function _A(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!VC(l))if(YA())s.flags|=8192;else throw jl=Eg,jy}function Bg(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Gr():536870912,s.lanes|=l,pu|=l)}function Af(s,l){if(!Et)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function en(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,g=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags&65011712,g|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=g,s.childLanes=f,l}function U5(s,l,f){var g=l.pendingProps;switch(Iy(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(l),null;case 1:return en(l),null;case 3:return f=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),hs(Pn),De(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(tu(l)?vs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ry())),en(l),null;case 26:var y=l.type,w=l.memoizedState;return s===null?(vs(l),w!==null?(en(l),_A(l,w)):(en(l),xb(l,y,null,g,f))):w?w!==s.memoizedState?(vs(l),en(l),_A(l,w)):(en(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&vs(l),en(l),xb(l,y,s,g,f)),null;case 27:if(we(l),f=de.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return en(l),null}s=ne.current,tu(l)?eT(l):(s=IC(y,g,f),l.stateNode=s,vs(l))}return en(l),null;case 5:if(we(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return en(l),null}if(w=ne.current,tu(l))eT(l);else{var N=tm(de.current);switch(w){case 1:w=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=N.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?N.createElement("select",{is:g.is}):N.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?N.createElement(y,{is:g.is}):N.createElement(y)}}w[cn]=l,w[un]=g;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)w.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=w;e:switch(fr(w,y,g),y){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&vs(l)}}return en(l),xb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=de.current,tu(l)){if(s=l.stateNode,f=l.memoizedProps,g=null,y=cr,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}s[cn]=l,s=!!(s.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||vC(s.nodeValue,f)),s||co(l,!0)}else s=tm(s).createTextNode(g),s[cn]=l,l.stateNode=s}return en(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(g=tu(l),f!==null){if(s===null){if(!g)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[cn]=l}else Nl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;en(l),s=!1}else f=Ry(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(fi(l),l):(fi(l),null);if((l.flags&128)!==0)throw Error(r(558))}return en(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=tu(l),g!==null&&g.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[cn]=l}else Nl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;en(l),y=!1}else y=Ry(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(fi(l),l):(fi(l),null)}return fi(l),(l.flags&128)!==0?(l.lanes=f,l):(f=g!==null,s=s!==null&&s.memoizedState!==null,f&&(g=l.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==y&&(g.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Bg(l,l.updateQueue),en(l),null);case 4:return De(),s===null&&Ub(l.stateNode.containerInfo),en(l),null;case 10:return hs(l.type),en(l),null;case 19:if(Q(Tn),g=l.memoizedState,g===null)return en(l),null;if(y=(l.flags&128)!==0,w=g.rendering,w===null)if(y)Af(g,!1);else{if(bn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Cg(s),w!==null){for(l.flags|=128,Af(g,!1),s=w.updateQueue,l.updateQueue=s,Bg(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)XS(f,s),f=f.sibling;return K(Tn,Tn.current&1|2),Et&&ds(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&pt()>Hg&&(l.flags|=128,y=!0,Af(g,!1),l.lanes=4194304)}else{if(!y)if(s=Cg(w),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Bg(l,s),Af(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Et)return en(l),null}else 2*pt()-g.renderingStartTime>Hg&&f!==536870912&&(l.flags|=128,y=!0,Af(g,!1),l.lanes=4194304);g.isBackwards?(w.sibling=l.child,l.child=w):(s=g.last,s!==null?s.sibling=w:l.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=pt(),s.sibling=null,f=Tn.current,K(Tn,y?f&1|2:f&1),Et&&ds(l,g.treeForkCount),s):(en(l),null);case 22:case 23:return fi(l),Gy(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(en(l),l.subtreeFlags&6&&(l.flags|=8192)):en(l),f=l.updateQueue,f!==null&&Bg(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),s!==null&&Q(Ol),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),hs(Pn),en(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function G5(s,l){switch(Iy(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return hs(Pn),De(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return we(l),null;case 31:if(l.memoizedState!==null){if(fi(l),l.alternate===null)throw Error(r(340));Nl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(fi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Nl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Q(Tn),null;case 4:return De(),null;case 10:return hs(l.type),null;case 22:case 23:return fi(l),Gy(),s!==null&&Q(Ol),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return hs(Pn),null;case 25:return null;default:return null}}function wA(s,l){switch(Iy(l),l.tag){case 3:hs(Pn),De();break;case 26:case 27:case 5:we(l);break;case 4:De();break;case 31:l.memoizedState!==null&&fi(l);break;case 13:fi(l);break;case 19:Q(Tn);break;case 10:hs(l.type);break;case 22:case 23:fi(l),Gy(),s!==null&&Q(Ol);break;case 24:hs(Pn)}}function Cf(s,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&s)===s){g=void 0;var w=f.create,N=f.inst;g=w(),N.destroy=g}f=f.next}while(f!==y)}}catch(U){jt(l,l.return,U)}}function vo(s,l,f){try{var g=l.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var w=y.next;g=w;do{if((g.tag&s)===s){var N=g.inst,U=N.destroy;if(U!==void 0){N.destroy=void 0,y=l;var W=f,oe=U;try{oe()}catch(ve){jt(y,W,ve)}}}g=g.next}while(g!==w)}}catch(ve){jt(l,l.return,ve)}}function EA(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{hT(l,f)}catch(g){jt(s,s.return,g)}}}function SA(s,l,f){f.props=Bl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(g){jt(s,l,g)}}function If(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof f=="function"?s.refCleanup=f(g):f.current=g}}catch(y){jt(s,l,y)}}function ka(s,l){var f=s.ref,g=s.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(y){jt(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){jt(s,l,y)}else f.current=null}function TA(s){var l=s.type,f=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(y){jt(s,s.return,y)}}function _b(s,l,f){try{var g=s.stateNode;dj(g,s.type,f,l),g[un]=l}catch(y){jt(s,s.return,y)}}function AA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&So(s.type)||s.tag===4}function wb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||AA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&So(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Eb(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Xi));else if(g!==4&&(g===27&&So(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(Eb(s,l,f),s=s.sibling;s!==null;)Eb(s,l,f),s=s.sibling}function Fg(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(g!==4&&(g===27&&So(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Fg(s,l,f),s=s.sibling;s!==null;)Fg(s,l,f),s=s.sibling}function CA(s){var l=s.stateNode,f=s.memoizedProps;try{for(var g=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);fr(l,g,f),l[cn]=s,l[un]=f}catch(w){jt(s,s.return,w)}}var ys=!1,jn=!1,Sb=!1,IA=typeof WeakSet=="function"?WeakSet:Set,ar=null;function q5(s,l){if(s=s.containerInfo,Hb=lm,s=BS(s),vy(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var y=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var N=0,U=-1,W=-1,oe=0,ve=0,be=s,le=null;t:for(;;){for(var he;be!==f||y!==0&&be.nodeType!==3||(U=N+y),be!==w||g!==0&&be.nodeType!==3||(W=N+g),be.nodeType===3&&(N+=be.nodeValue.length),(he=be.firstChild)!==null;)le=be,be=he;for(;;){if(be===s)break t;if(le===f&&++oe===y&&(U=N),le===w&&++ve===g&&(W=N),(he=be.nextSibling)!==null)break;be=le,le=be.parentNode}be=he}f=U===-1||W===-1?null:{start:U,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for($b={focusedElem:s,selectionRange:f},lm=!1,ar=l;ar!==null;)if(l=ar,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ar=s;else for(;ar!==null;){switch(l=ar,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,y=w.memoizedProps,w=w.memoizedState,g=f.stateNode;try{var Pe=Bl(f.type,y);s=g.getSnapshotBeforeUpdate(Pe,w),g.__reactInternalSnapshotBeforeUpdate=s}catch(Ke){jt(f,f.return,Ke)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Xb(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,ar=s;break}ar=l.return}}function DA(s,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:xs(s,f),g&4&&Cf(5,f);break;case 1:if(xs(s,f),g&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){jt(f,f.return,N)}else{var y=Bl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){jt(f,f.return,N)}}g&64&&EA(f),g&512&&If(f,f.return);break;case 3:if(xs(s,f),g&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{hT(s,l)}catch(N){jt(f,f.return,N)}}break;case 27:l===null&&g&4&&CA(f);case 26:case 5:xs(s,f),l===null&&g&4&&TA(f),g&512&&If(f,f.return);break;case 12:xs(s,f);break;case 31:xs(s,f),g&4&&NA(s,f);break;case 13:xs(s,f),g&4&&MA(s,f),g&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=J5.bind(null,f),bj(s,f))));break;case 22:if(g=f.memoizedState!==null||ys,!g){l=l!==null&&l.memoizedState!==null||jn,y=ys;var w=jn;ys=g,(jn=l)&&!w?_s(s,f,(f.subtreeFlags&8772)!==0):xs(s,f),ys=y,jn=w}break;case 30:break;default:xs(s,f)}}function RA(s){var l=s.alternate;l!==null&&(s.alternate=null,RA(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&zc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var an=null,Kr=!1;function bs(s,l,f){for(f=f.child;f!==null;)kA(s,l,f),f=f.sibling}function kA(s,l,f){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(kr,f)}catch{}switch(f.tag){case 26:jn||ka(f,l),bs(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:jn||ka(f,l);var g=an,y=Kr;So(f.type)&&(an=f.stateNode,Kr=!1),bs(s,l,f),jf(f.stateNode),an=g,Kr=y;break;case 5:jn||ka(f,l);case 6:if(g=an,y=Kr,an=null,bs(s,l,f),an=g,Kr=y,an!==null)if(Kr)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(f.stateNode)}catch(w){jt(f,l,w)}else try{an.removeChild(f.stateNode)}catch(w){jt(f,l,w)}break;case 18:an!==null&&(Kr?(s=an,EC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),wu(s)):EC(an,f.stateNode));break;case 4:g=an,y=Kr,an=f.stateNode.containerInfo,Kr=!0,bs(s,l,f),an=g,Kr=y;break;case 0:case 11:case 14:case 15:vo(2,f,l),jn||vo(4,f,l),bs(s,l,f);break;case 1:jn||(ka(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&SA(f,l,g)),bs(s,l,f);break;case 21:bs(s,l,f);break;case 22:jn=(g=jn)||f.memoizedState!==null,bs(s,l,f),jn=g;break;default:bs(s,l,f)}}function NA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{wu(s)}catch(f){jt(l,l.return,f)}}}function MA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{wu(s)}catch(f){jt(l,l.return,f)}}function H5(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new IA),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new IA),l;default:throw Error(r(435,s.tag))}}function Ug(s,l){var f=H5(s);l.forEach(function(g){if(!f.has(g)){f.add(g);var y=ej.bind(null,s,g);g.then(y,y)}})}function Xr(s,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var y=f[g],w=s,N=l,U=N;e:for(;U!==null;){switch(U.tag){case 27:if(So(U.type)){an=U.stateNode,Kr=!1;break e}break;case 5:an=U.stateNode,Kr=!1;break e;case 3:case 4:an=U.stateNode.containerInfo,Kr=!0;break e}U=U.return}if(an===null)throw Error(r(160));kA(w,N,y),an=null,Kr=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)PA(l,s),l=l.sibling}var ta=null;function PA(s,l){var f=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xr(l,s),Wr(s),g&4&&(vo(3,s,s.return),Cf(3,s),vo(5,s,s.return));break;case 1:Xr(l,s),Wr(s),g&512&&(jn||f===null||ka(f,f.return)),g&64&&ys&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var y=ta;if(Xr(l,s),Wr(s),g&512&&(jn||f===null||ka(f,f.return)),g&4){var w=f!==null?f.memoizedState:null;if(g=s.memoizedState,f===null)if(g===null)if(s.stateNode===null){e:{g=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":w=y.getElementsByTagName("title")[0],(!w||w[va]||w[cn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(g),y.head.insertBefore(w,y.querySelector("head > title"))),fr(w,g,f),w[cn]=s,Nn(w),g=w;break e;case"link":var N=PC("link","href",y).get(g+(f.href||""));if(N){for(var U=0;U<N.length;U++)if(w=N[U],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(U,1);break t}}w=y.createElement(g),fr(w,g,f),y.head.appendChild(w);break;case"meta":if(N=PC("meta","content",y).get(g+(f.content||""))){for(U=0;U<N.length;U++)if(w=N[U],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(U,1);break t}}w=y.createElement(g),fr(w,g,f),y.head.appendChild(w);break;default:throw Error(r(468,g))}w[cn]=s,Nn(w),g=w}s.stateNode=g}else OC(y,s.type,s.stateNode);else s.stateNode=MC(y,g,s.memoizedProps);else w!==g?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,g===null?OC(y,s.type,s.stateNode):MC(y,g,s.memoizedProps)):g===null&&s.stateNode!==null&&_b(s,s.memoizedProps,f.memoizedProps)}break;case 27:Xr(l,s),Wr(s),g&512&&(jn||f===null||ka(f,f.return)),f!==null&&g&4&&_b(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Xr(l,s),Wr(s),g&512&&(jn||f===null||ka(f,f.return)),s.flags&32){y=s.stateNode;try{Yr(y,"")}catch(Pe){jt(s,s.return,Pe)}}g&4&&s.stateNode!=null&&(y=s.memoizedProps,_b(s,y,f!==null?f.memoizedProps:y)),g&1024&&(Sb=!0);break;case 6:if(Xr(l,s),Wr(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,f=s.stateNode;try{f.nodeValue=g}catch(Pe){jt(s,s.return,Pe)}}break;case 3:if(im=null,y=ta,ta=nm(l.containerInfo),Xr(l,s),ta=y,Wr(s),g&4&&f!==null&&f.memoizedState.isDehydrated)try{wu(l.containerInfo)}catch(Pe){jt(s,s.return,Pe)}Sb&&(Sb=!1,OA(s));break;case 4:g=ta,ta=nm(s.stateNode.containerInfo),Xr(l,s),Wr(s),ta=g;break;case 12:Xr(l,s),Wr(s);break;case 31:Xr(l,s),Wr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Ug(s,g)));break;case 13:Xr(l,s),Wr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(qg=pt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Ug(s,g)));break;case 22:y=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,oe=ys,ve=jn;if(ys=oe||y,jn=ve||W,Xr(l,s),jn=ve,ys=oe,Wr(s),g&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||W||ys||jn||Fl(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){W=f=l;try{if(w=W.stateNode,y)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{U=W.stateNode;var be=W.memoizedProps.style,le=be!=null&&be.hasOwnProperty("display")?be.display:null;U.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Pe){jt(W,W.return,Pe)}}}else if(l.tag===6){if(f===null){W=l;try{W.stateNode.nodeValue=y?"":W.memoizedProps}catch(Pe){jt(W,W.return,Pe)}}}else if(l.tag===18){if(f===null){W=l;try{var he=W.stateNode;y?SC(he,!0):SC(W.stateNode,!1)}catch(Pe){jt(W,W.return,Pe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Ug(s,f))));break;case 19:Xr(l,s),Wr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Ug(s,g)));break;case 30:break;case 21:break;default:Xr(l,s),Wr(s)}}function Wr(s){var l=s.flags;if(l&2){try{for(var f,g=s.return;g!==null;){if(AA(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,w=wb(s);Fg(s,w,y);break;case 5:var N=f.stateNode;f.flags&32&&(Yr(N,""),f.flags&=-33);var U=wb(s);Fg(s,U,N);break;case 3:case 4:var W=f.stateNode.containerInfo,oe=wb(s);Eb(s,oe,W);break;default:throw Error(r(161))}}catch(ve){jt(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function OA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;OA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function xs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)DA(s,l.alternate,l),l=l.sibling}function Fl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:vo(4,l,l.return),Fl(l);break;case 1:ka(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&SA(l,l.return,f),Fl(l);break;case 27:jf(l.stateNode);case 26:case 5:ka(l,l.return),Fl(l);break;case 22:l.memoizedState===null&&Fl(l);break;case 30:Fl(l);break;default:Fl(l)}s=s.sibling}}function _s(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,y=s,w=l,N=w.flags;switch(w.tag){case 0:case 11:case 15:_s(y,w,f),Cf(4,w);break;case 1:if(_s(y,w,f),g=w,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(oe){jt(g,g.return,oe)}if(g=w,y=g.updateQueue,y!==null){var U=g.stateNode;try{var W=y.shared.hiddenCallbacks;if(W!==null)for(y.shared.hiddenCallbacks=null,y=0;y<W.length;y++)fT(W[y],U)}catch(oe){jt(g,g.return,oe)}}f&&N&64&&EA(w),If(w,w.return);break;case 27:CA(w);case 26:case 5:_s(y,w,f),f&&g===null&&N&4&&TA(w),If(w,w.return);break;case 12:_s(y,w,f);break;case 31:_s(y,w,f),f&&N&4&&NA(y,w);break;case 13:_s(y,w,f),f&&N&4&&MA(y,w);break;case 22:w.memoizedState===null&&_s(y,w,f),If(w,w.return);break;case 30:break;default:_s(y,w,f)}l=l.sibling}}function Tb(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&pf(f))}function Ab(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s))}function na(s,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)VA(s,l,f,g),l=l.sibling}function VA(s,l,f,g){var y=l.flags;switch(l.tag){case 0:case 11:case 15:na(s,l,f,g),y&2048&&Cf(9,l);break;case 1:na(s,l,f,g);break;case 3:na(s,l,f,g),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s)));break;case 12:if(y&2048){na(s,l,f,g),s=l.stateNode;try{var w=l.memoizedProps,N=w.id,U=w.onPostCommit;typeof U=="function"&&U(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){jt(l,l.return,W)}}else na(s,l,f,g);break;case 31:na(s,l,f,g);break;case 13:na(s,l,f,g);break;case 23:break;case 22:w=l.stateNode,N=l.alternate,l.memoizedState!==null?w._visibility&2?na(s,l,f,g):Df(s,l):w._visibility&2?na(s,l,f,g):(w._visibility|=2,du(s,l,f,g,(l.subtreeFlags&10256)!==0||!1)),y&2048&&Tb(N,l);break;case 24:na(s,l,f,g),y&2048&&Ab(l.alternate,l);break;default:na(s,l,f,g)}}function du(s,l,f,g,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,N=l,U=f,W=g,oe=N.flags;switch(N.tag){case 0:case 11:case 15:du(w,N,U,W,y),Cf(8,N);break;case 23:break;case 22:var ve=N.stateNode;N.memoizedState!==null?ve._visibility&2?du(w,N,U,W,y):Df(w,N):(ve._visibility|=2,du(w,N,U,W,y)),y&&oe&2048&&Tb(N.alternate,N);break;case 24:du(w,N,U,W,y),y&&oe&2048&&Ab(N.alternate,N);break;default:du(w,N,U,W,y)}l=l.sibling}}function Df(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,g=l,y=g.flags;switch(g.tag){case 22:Df(f,g),y&2048&&Tb(g.alternate,g);break;case 24:Df(f,g),y&2048&&Ab(g.alternate,g);break;default:Df(f,g)}l=l.sibling}}var Rf=8192;function fu(s,l,f){if(s.subtreeFlags&Rf)for(s=s.child;s!==null;)jA(s,l,f),s=s.sibling}function jA(s,l,f){switch(s.tag){case 26:fu(s,l,f),s.flags&Rf&&s.memoizedState!==null&&kj(f,ta,s.memoizedState,s.memoizedProps);break;case 5:fu(s,l,f);break;case 3:case 4:var g=ta;ta=nm(s.stateNode.containerInfo),fu(s,l,f),ta=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=Rf,Rf=16777216,fu(s,l,f),Rf=g):fu(s,l,f));break;default:fu(s,l,f)}}function zA(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function kf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];ar=g,BA(g,s)}zA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)LA(s),s=s.sibling}function LA(s){switch(s.tag){case 0:case 11:case 15:kf(s),s.flags&2048&&vo(9,s,s.return);break;case 3:kf(s);break;case 12:kf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Gg(s)):kf(s);break;default:kf(s)}}function Gg(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];ar=g,BA(g,s)}zA(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:vo(8,l,l.return),Gg(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Gg(l));break;default:Gg(l)}s=s.sibling}}function BA(s,l){for(;ar!==null;){var f=ar;switch(f.tag){case 0:case 11:case 15:vo(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:pf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,ar=g;else e:for(f=s;ar!==null;){g=ar;var y=g.sibling,w=g.return;if(RA(g),g===f){ar=null;break e}if(y!==null){y.return=w,ar=y;break e}ar=w}}}var $5={getCacheForType:function(s){var l=ur(Pn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return ur(Pn).controller.signal}},Y5=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Yt=null,mt=null,yt=0,Vt=0,hi=null,yo=!1,hu=!1,Cb=!1,ws=0,bn=0,bo=0,Ul=0,Ib=0,pi=0,pu=0,Nf=null,Qr=null,Db=!1,qg=0,FA=0,Hg=1/0,$g=null,xo=null,Yn=0,_o=null,gu=null,Es=0,Rb=0,kb=null,UA=null,Mf=0,Nb=null;function gi(){return(Rt&2)!==0&&yt!==0?yt&-yt:H.T!==null?zb():kn()}function GA(){if(pi===0)if((yt&536870912)===0||Et){var s=Qt;Qt<<=1,(Qt&3932160)===0&&(Qt=262144),pi=s}else pi=536870912;return s=di.current,s!==null&&(s.flags|=32),pi}function Zr(s,l,f){(s===Yt&&(Vt===2||Vt===9)||s.cancelPendingCommit!==null)&&(mu(s,0),wo(s,yt,pi,!1)),xr(s,f),((Rt&2)===0||s!==Yt)&&(s===Yt&&((Rt&2)===0&&(Ul|=f),bn===4&&wo(s,yt,pi,!1)),Na(s))}function qA(s,l,f){if((Rt&6)!==0)throw Error(r(327));var g=!f&&(l&127)===0&&(l&s.expiredLanes)===0||Nt(s,l),y=g?W5(s,l):Pb(s,l,!0),w=g;do{if(y===0){hu&&!g&&wo(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!K5(f)){y=Pb(s,l,!1),w=!1;continue}if(y===2){if(w=l,s.errorRecoveryDisabledLanes&w)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var U=s;y=Nf;var W=U.current.memoizedState.isDehydrated;if(W&&(mu(U,N).flags|=256),N=Pb(U,N,!1),N!==2){if(Cb&&!W){U.errorRecoveryDisabledLanes|=w,Ul|=w,y=4;break e}w=Qr,Qr=y,w!==null&&(Qr===null?Qr=w:Qr.push.apply(Qr,w))}y=N}if(w=!1,y!==2)continue}}if(y===1){mu(s,0),wo(s,l,0,!0);break}e:{switch(g=s,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:wo(g,l,pi,!yo);break e;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=qg+300-pt(),10<y)){if(wo(g,l,pi,!yo),Ue(g,0,!0)!==0)break e;Es=l,g.timeoutHandle=_C(HA.bind(null,g,f,Qr,$g,Db,l,pi,Ul,pu,yo,w,"Throttled",-0,0),y);break e}HA(g,f,Qr,$g,Db,l,pi,Ul,pu,yo,w,null,-0,0)}}break}while(!0);Na(s)}function HA(s,l,f,g,y,w,N,U,W,oe,ve,be,le,he){if(s.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},jA(l,w,be);var Pe=(w&62914560)===w?qg-pt():(w&4194048)===w?FA-pt():0;if(Pe=Nj(be,Pe),Pe!==null){Es=w,s.cancelPendingCommit=Pe(JA.bind(null,s,l,w,f,g,y,N,U,W,ve,be,null,le,he)),wo(s,w,N,!oe);return}}JA(s,l,w,f,g,y,N,U,W)}function K5(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var y=f[g],w=y.getSnapshot;y=y.value;try{if(!ci(w(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function wo(s,l,f,g){l&=~Ib,l&=~Ul,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var y=l;0<y;){var w=31-Wt(y),N=1<<w;g[w]=-1,y&=~N}f!==0&&Dn(s,f,l)}function Yg(){return(Rt&6)===0?(Pf(0),!1):!0}function Mb(){if(mt!==null){if(Vt===0)var s=mt.return;else s=mt,fs=Ml=null,Xy(s),su=null,mf=0,s=mt;for(;s!==null;)wA(s.alternate,s),s=s.return;mt=null}}function mu(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,pj(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Es=0,Mb(),Yt=s,mt=f=us(s.current,null),yt=l,Vt=0,hi=null,yo=!1,hu=Nt(s,l),Cb=!1,pu=pi=Ib=Ul=bo=bn=0,Qr=Nf=null,Db=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var y=31-Wt(g),w=1<<y;l|=s[y],g&=~w}return ws=l,pg(),f}function $A(s,l){st=null,H.H=Sf,l===au||l===wg?(l=lT(),Vt=3):l===jy?(l=lT(),Vt=4):Vt=l===db?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,hi=l,mt===null&&(bn=1,Vg(s,Ii(l,s.current)))}function YA(){var s=di.current;return s===null?!0:(yt&4194048)===yt?Ni===null:(yt&62914560)===yt||(yt&536870912)!==0?s===Ni:!1}function KA(){var s=H.H;return H.H=Sf,s===null?Sf:s}function XA(){var s=H.A;return H.A=$5,s}function Kg(){bn=4,yo||(yt&4194048)!==yt&&di.current!==null||(hu=!0),(bo&134217727)===0&&(Ul&134217727)===0||Yt===null||wo(Yt,yt,pi,!1)}function Pb(s,l,f){var g=Rt;Rt|=2;var y=KA(),w=XA();(Yt!==s||yt!==l)&&($g=null,mu(s,l)),l=!1;var N=bn;e:do try{if(Vt!==0&&mt!==null){var U=mt,W=hi;switch(Vt){case 8:Mb(),N=6;break e;case 3:case 2:case 9:case 6:di.current===null&&(l=!0);var oe=Vt;if(Vt=0,hi=null,vu(s,U,W,oe),f&&hu){N=0;break e}break;default:oe=Vt,Vt=0,hi=null,vu(s,U,W,oe)}}X5(),N=bn;break}catch(ve){$A(s,ve)}while(!0);return l&&s.shellSuspendCounter++,fs=Ml=null,Rt=g,H.H=y,H.A=w,mt===null&&(Yt=null,yt=0,pg()),N}function X5(){for(;mt!==null;)WA(mt)}function W5(s,l){var f=Rt;Rt|=2;var g=KA(),y=XA();Yt!==s||yt!==l?($g=null,Hg=pt()+500,mu(s,l)):hu=Nt(s,l);e:do try{if(Vt!==0&&mt!==null){l=mt;var w=hi;t:switch(Vt){case 1:Vt=0,hi=null,vu(s,l,w,1);break;case 2:case 9:if(sT(w)){Vt=0,hi=null,QA(l);break}l=function(){Vt!==2&&Vt!==9||Yt!==s||(Vt=7),Na(s)},w.then(l,l);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:sT(w)?(Vt=0,hi=null,QA(l)):(Vt=0,hi=null,vu(s,l,w,7));break;case 5:var N=null;switch(mt.tag){case 26:N=mt.memoizedState;case 5:case 27:var U=mt;if(N?VC(N):U.stateNode.complete){Vt=0,hi=null;var W=U.sibling;if(W!==null)mt=W;else{var oe=U.return;oe!==null?(mt=oe,Xg(oe)):mt=null}break t}}Vt=0,hi=null,vu(s,l,w,5);break;case 6:Vt=0,hi=null,vu(s,l,w,6);break;case 8:Mb(),bn=6;break e;default:throw Error(r(462))}}Q5();break}catch(ve){$A(s,ve)}while(!0);return fs=Ml=null,H.H=g,H.A=y,Rt=f,mt!==null?0:(Yt=null,yt=0,pg(),bn)}function Q5(){for(;mt!==null&&!mn();)WA(mt)}function WA(s){var l=xA(s.alternate,s,ws);s.memoizedProps=s.pendingProps,l===null?Xg(s):mt=l}function QA(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=pA(f,l,l.pendingProps,l.type,void 0,yt);break;case 11:l=pA(f,l,l.pendingProps,l.type.render,l.ref,yt);break;case 5:Xy(l);default:wA(f,l),l=mt=XS(l,ws),l=xA(f,l,ws)}s.memoizedProps=s.pendingProps,l===null?Xg(s):mt=l}function vu(s,l,f,g){fs=Ml=null,Xy(l),su=null,mf=0;var y=l.return;try{if(L5(s,y,l,f,yt)){bn=1,Vg(s,Ii(f,s.current)),mt=null;return}}catch(w){if(y!==null)throw mt=y,w;bn=1,Vg(s,Ii(f,s.current)),mt=null;return}l.flags&32768?(Et||g===1?s=!0:hu||(yt&536870912)!==0?s=!1:(yo=s=!0,(g===2||g===9||g===3||g===6)&&(g=di.current,g!==null&&g.tag===13&&(g.flags|=16384))),ZA(l,s)):Xg(l)}function Xg(s){var l=s;do{if((l.flags&32768)!==0){ZA(l,yo);return}s=l.return;var f=U5(l.alternate,l,ws);if(f!==null){mt=f;return}if(l=l.sibling,l!==null){mt=l;return}mt=l=s}while(l!==null);bn===0&&(bn=5)}function ZA(s,l){do{var f=G5(s.alternate,s);if(f!==null){f.flags&=32767,mt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){mt=s;return}mt=s=f}while(s!==null);bn=6,mt=null}function JA(s,l,f,g,y,w,N,U,W){s.cancelPendingCommit=null;do Wg();while(Yn!==0);if((Rt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=wy,ct(s,f,w,N,U,W),s===Yt&&(mt=Yt=null,yt=0),gu=l,_o=s,Es=f,Rb=w,kb=y,UA=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,tj(Ur,function(){return iC(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,y=Y.p,Y.p=2,N=Rt,Rt|=4;try{q5(s,l,f)}finally{Rt=N,Y.p=y,H.T=g}}Yn=1,eC(),tC(),nC()}}function eC(){if(Yn===1){Yn=0;var s=_o,l=gu,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=Y.p;Y.p=2;var y=Rt;Rt|=4;try{PA(l,s);var w=$b,N=BS(s.containerInfo),U=w.focusedElem,W=w.selectionRange;if(N!==U&&U&&U.ownerDocument&&LS(U.ownerDocument.documentElement,U)){if(W!==null&&vy(U)){var oe=W.start,ve=W.end;if(ve===void 0&&(ve=oe),"selectionStart"in U)U.selectionStart=oe,U.selectionEnd=Math.min(ve,U.value.length);else{var be=U.ownerDocument||document,le=be&&be.defaultView||window;if(le.getSelection){var he=le.getSelection(),Pe=U.textContent.length,Ke=Math.min(W.start,Pe),qt=W.end===void 0?Ke:Math.min(W.end,Pe);!he.extend&&Ke>qt&&(N=qt,qt=Ke,Ke=N);var re=zS(U,Ke),ee=zS(U,qt);if(re&&ee&&(he.rangeCount!==1||he.anchorNode!==re.node||he.anchorOffset!==re.offset||he.focusNode!==ee.node||he.focusOffset!==ee.offset)){var se=be.createRange();se.setStart(re.node,re.offset),he.removeAllRanges(),Ke>qt?(he.addRange(se),he.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),he.addRange(se))}}}}for(be=[],he=U;he=he.parentNode;)he.nodeType===1&&be.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<be.length;U++){var ye=be[U];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}lm=!!Hb,$b=Hb=null}finally{Rt=y,Y.p=g,H.T=f}}s.current=l,Yn=2}}function tC(){if(Yn===2){Yn=0;var s=_o,l=gu,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=Y.p;Y.p=2;var y=Rt;Rt|=4;try{DA(s,l.alternate,l)}finally{Rt=y,Y.p=g,H.T=f}}Yn=3}}function nC(){if(Yn===4||Yn===3){Yn=0,Xt();var s=_o,l=gu,f=Es,g=UA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Yn=5:(Yn=0,gu=_o=null,rC(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(xo=null),Hn(f),l=l.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(kr,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=H.T,y=Y.p,Y.p=2,H.T=null;try{for(var w=s.onRecoverableError,N=0;N<g.length;N++){var U=g[N];w(U.value,{componentStack:U.stack})}}finally{H.T=l,Y.p=y}}(Es&3)!==0&&Wg(),Na(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===Nb?Mf++:(Mf=0,Nb=s):Mf=0,Pf(0)}}function rC(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,pf(l)))}function Wg(){return eC(),tC(),nC(),iC()}function iC(){if(Yn!==5)return!1;var s=_o,l=Rb;Rb=0;var f=Hn(Es),g=H.T,y=Y.p;try{Y.p=32>f?32:f,H.T=null,f=kb,kb=null;var w=_o,N=Es;if(Yn=0,gu=_o=null,Es=0,(Rt&6)!==0)throw Error(r(331));var U=Rt;if(Rt|=4,LA(w.current),VA(w,w.current,N,f),Rt=U,Pf(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(kr,w)}catch{}return!0}finally{Y.p=y,H.T=g,rC(s,l)}}function aC(s,l,f){l=Ii(f,l),l=ub(s.stateNode,l,2),s=po(s,l,2),s!==null&&(xr(s,2),Na(s))}function jt(s,l,f){if(s.tag===3)aC(s,s,f);else for(;l!==null;){if(l.tag===3){aC(l,s,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xo===null||!xo.has(g))){s=Ii(f,s),f=sA(2),g=po(l,f,2),g!==null&&(oA(f,g,l,s),xr(g,2),Na(g));break}}l=l.return}}function Ob(s,l,f){var g=s.pingCache;if(g===null){g=s.pingCache=new Y5;var y=new Set;g.set(l,y)}else y=g.get(l),y===void 0&&(y=new Set,g.set(l,y));y.has(f)||(Cb=!0,y.add(f),s=Z5.bind(null,s,l,f),l.then(s,s))}function Z5(s,l,f){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Yt===s&&(yt&f)===f&&(bn===4||bn===3&&(yt&62914560)===yt&&300>pt()-qg?(Rt&2)===0&&mu(s,0):Ib|=f,pu===yt&&(pu=0)),Na(s)}function sC(s,l){l===0&&(l=Gr()),s=Rl(s,l),s!==null&&(xr(s,l),Na(s))}function J5(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),sC(s,f)}function ej(s,l){var f=0;switch(s.tag){case 31:case 13:var g=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),sC(s,f)}function tj(s,l){return Fe(s,l)}var Qg=null,yu=null,Vb=!1,Zg=!1,jb=!1,Eo=0;function Na(s){s!==yu&&s.next===null&&(yu===null?Qg=yu=s:yu=yu.next=s),Zg=!0,Vb||(Vb=!0,rj())}function Pf(s,l){if(!jb&&Zg){jb=!0;do for(var f=!1,g=Qg;g!==null;){if(s!==0){var y=g.pendingLanes;if(y===0)var w=0;else{var N=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-Wt(42|s)+1)-1,w&=y&~(N&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,uC(g,w))}else w=yt,w=Ue(g,g===Yt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||Nt(g,w)||(f=!0,uC(g,w));g=g.next}while(f);jb=!1}}function nj(){oC()}function oC(){Zg=Vb=!1;var s=0;Eo!==0&&hj()&&(s=Eo);for(var l=pt(),f=null,g=Qg;g!==null;){var y=g.next,w=lC(g,l);w===0?(g.next=null,f===null?Qg=y:f.next=y,y===null&&(yu=f)):(f=g,(s!==0||(w&3)!==0)&&(Zg=!0)),g=y}Yn!==0&&Yn!==5||Pf(s),Eo!==0&&(Eo=0)}function lC(s,l){for(var f=s.suspendedLanes,g=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var N=31-Wt(w),U=1<<N,W=y[N];W===-1?((U&f)===0||(U&g)!==0)&&(y[N]=nn(U,l)):W<=l&&(s.expiredLanes|=U),w&=~U}if(l=Yt,f=yt,f=Ue(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,f===0||s===l&&(Vt===2||Vt===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Pt(g),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Nt(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(g!==null&&Pt(g),Hn(f)){case 2:case 8:f=or;break;case 32:f=Ur;break;case 268435456:f=Ws;break;default:f=Ur}return g=cC.bind(null,s),f=Fe(f,g),s.callbackPriority=l,s.callbackNode=f,l}return g!==null&&g!==null&&Pt(g),s.callbackPriority=2,s.callbackNode=null,2}function cC(s,l){if(Yn!==0&&Yn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Wg()&&s.callbackNode!==f)return null;var g=yt;return g=Ue(s,s===Yt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(qA(s,g,l),lC(s,pt()),s.callbackNode!=null&&s.callbackNode===f?cC.bind(null,s):null)}function uC(s,l){if(Wg())return null;qA(s,l,!0)}function rj(){gj(function(){(Rt&6)!==0?Fe(Bt,nj):oC()})}function zb(){if(Eo===0){var s=ru;s===0&&(s=dt,dt<<=1,(dt&261888)===0&&(dt=256)),Eo=s}return Eo}function dC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Uc(""+s)}function fC(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function ij(s,l,f,g,y){if(l==="submit"&&f&&f.stateNode===y){var w=dC((y[un]||null).action),N=g.submitter;N&&(l=(l=N[un]||null)?dC(l.formAction):N.getAttribute("formAction"),l!==null&&(w=l,N=null));var U=new Ta("action","action",null,g,y);s.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Eo!==0){var W=N?fC(y,N):new FormData(y);ib(f,{pending:!0,data:W,method:y.method,action:w},null,W)}}else typeof w=="function"&&(U.preventDefault(),W=N?fC(y,N):new FormData(y),ib(f,{pending:!0,data:W,method:y.method,action:w},w,W))},currentTarget:y}]})}}for(var Lb=0;Lb<_y.length;Lb++){var Bb=_y[Lb],aj=Bb.toLowerCase(),sj=Bb[0].toUpperCase()+Bb.slice(1);ea(aj,"on"+sj)}ea(GS,"onAnimationEnd"),ea(qS,"onAnimationIteration"),ea(HS,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(w5,"onTransitionRun"),ea(E5,"onTransitionStart"),ea(S5,"onTransitionCancel"),ea($S,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Of));function hC(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var g=s[f],y=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var N=g.length-1;0<=N;N--){var U=g[N],W=U.instance,oe=U.currentTarget;if(U=U.listener,W!==w&&y.isPropagationStopped())break e;w=U,y.currentTarget=oe;try{w(y)}catch(ve){hg(ve)}y.currentTarget=null,w=W}else for(N=0;N<g.length;N++){if(U=g[N],W=U.instance,oe=U.currentTarget,U=U.listener,W!==w&&y.isPropagationStopped())break e;w=U,y.currentTarget=oe;try{w(y)}catch(ve){hg(ve)}y.currentTarget=null,w=W}}}}function vt(s,l){var f=l[Ki];f===void 0&&(f=l[Ki]=new Set);var g=s+"__bubble";f.has(g)||(pC(l,s,2,!1),f.add(g))}function Fb(s,l,f){var g=0;l&&(g|=4),pC(f,s,g,l)}var Jg="_reactListening"+Math.random().toString(36).slice(2);function Ub(s){if(!s[Jg]){s[Jg]=!0,$d.forEach(function(f){f!=="selectionchange"&&(oj.has(f)||Fb(f,!1,s),Fb(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Jg]||(l[Jg]=!0,Fb("selectionchange",!1,l))}}function pC(s,l,f,g){switch(GC(l)){case 2:var y=Oj;break;case 8:y=Vj;break;default:y=r1}f=y.bind(null,l,f,s),y=void 0,!wl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),g?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function Gb(s,l,f,g,y){var w=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var U=g.stateNode.containerInfo;if(U===y)break;if(N===4)for(N=g.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===y)return;N=N.return}for(;U!==null;){if(N=ya(U),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){g=w=N;continue e}U=U.parentNode}}g=g.return}ro(function(){var oe=w,ve=Si(f),be=[];e:{var le=YS.get(s);if(le!==void 0){var he=Ta,Pe=s;switch(s){case"keypress":if(Sl(f)===0)break e;case"keydown":case"keyup":he=ug;break;case"focusin":Pe="focus",he=Al;break;case"focusout":Pe="blur",he=Al;break;case"beforeblur":case"afterblur":he=Al;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=tg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=I;break;case GS:case qS:case HS:he=rg;break;case $S:he=G;break;case"scroll":case"scrollend":he=af;break;case"wheel":he=fe;break;case"copy":case"cut":case"paste":he=ig;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=cs;break;case"toggle":case"beforetoggle":he=at}var Ke=(l&4)!==0,qt=!Ke&&(s==="scroll"||s==="scrollend"),re=Ke?le!==null?le+"Capture":null:le;Ke=[];for(var ee=oe,se;ee!==null;){var ye=ee;if(se=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||se===null||re===null||(ye=Wi(ee,re),ye!=null&&Ke.push(Vf(ee,ye,se))),qt)break;ee=ee.return}0<Ke.length&&(le=new he(le,Pe,null,f,ve),be.push({event:le,listeners:Ke}))}}if((l&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",le&&f!==tf&&(Pe=f.relatedTarget||f.fromElement)&&(ya(Pe)||Pe[Hr]))break e;if((he||le)&&(le=ve.window===ve?ve:(le=ve.ownerDocument)?le.defaultView||le.parentWindow:window,he?(Pe=f.relatedTarget||f.toElement,he=oe,Pe=Pe?ya(Pe):null,Pe!==null&&(qt=a(Pe),Ke=Pe.tag,Pe!==qt||Ke!==5&&Ke!==27&&Ke!==6)&&(Pe=null)):(he=null,Pe=oe),he!==Pe)){if(Ke=sf,ye="onMouseLeave",re="onMouseEnter",ee="mouse",(s==="pointerout"||s==="pointerover")&&(Ke=cs,ye="onPointerLeave",re="onPointerEnter",ee="pointer"),qt=he==null?le:oi(he),se=Pe==null?le:oi(Pe),le=new Ke(ye,ee+"leave",he,f,ve),le.target=qt,le.relatedTarget=se,ye=null,ya(ve)===oe&&(Ke=new Ke(re,ee+"enter",Pe,f,ve),Ke.target=se,Ke.relatedTarget=qt,ye=Ke),qt=ye,he&&Pe)t:{for(Ke=lj,re=he,ee=Pe,se=0,ye=re;ye;ye=Ke(ye))se++;ye=0;for(var Ge=ee;Ge;Ge=Ke(Ge))ye++;for(;0<se-ye;)re=Ke(re),se--;for(;0<ye-se;)ee=Ke(ee),ye--;for(;se--;){if(re===ee||ee!==null&&re===ee.alternate){Ke=re;break t}re=Ke(re),ee=Ke(ee)}Ke=null}else Ke=null;he!==null&&gC(be,le,he,Ke,!1),Pe!==null&&qt!==null&&gC(be,qt,Pe,Ke,!0)}}e:{if(le=oe?oi(oe):window,he=le.nodeName&&le.nodeName.toLowerCase(),he==="select"||he==="input"&&le.type==="file")var Ct=NS;else if(RS(le))if(MS)Ct=b5;else{Ct=v5;var Ve=m5}else he=le.nodeName,!he||he.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&Fc(oe.elementType)&&(Ct=NS):Ct=y5;if(Ct&&(Ct=Ct(s,oe))){kS(be,Ct,f,ve);break e}Ve&&Ve(s,le,oe),s==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Zd(le,"number",le.value)}switch(Ve=oe?oi(oe):window,s){case"focusin":(RS(Ve)||Ve.contentEditable==="true")&&(Xc=Ve,yy=oe,df=null);break;case"focusout":df=yy=Xc=null;break;case"mousedown":by=!0;break;case"contextmenu":case"mouseup":case"dragend":by=!1,FS(be,f,ve);break;case"selectionchange":if(_5)break;case"keydown":case"keyup":FS(be,f,ve)}var lt;if(Dt)e:{switch(s){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else Kc?Cl(s,f)&&(bt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(bt="onCompositionStart");bt&&(Ia&&f.locale!=="ko"&&(Kc||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Kc&&(lt=rf()):(Sa=ve,nf="value"in Sa?Sa.value:Sa.textContent,Kc=!0)),Ve=em(oe,bt),0<Ve.length&&(bt=new Ca(bt,s,null,f,ve),be.push({event:bt,listeners:Ve}),lt?bt.data=lt:(lt=Yc(f),lt!==null&&(bt.data=lt)))),(lt=Ai?f5(s,f):h5(s,f))&&(bt=em(oe,"onBeforeInput"),0<bt.length&&(Ve=new Ca("onBeforeInput","beforeinput",null,f,ve),be.push({event:Ve,listeners:bt}),Ve.data=lt)),ij(be,s,oe,f,ve)}hC(be,l)})}function Vf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function em(s,l){for(var f=l+"Capture",g=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Wi(s,f),y!=null&&g.unshift(Vf(s,y,w)),y=Wi(s,l),y!=null&&g.push(Vf(s,y,w))),s.tag===3)return g;s=s.return}return[]}function lj(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gC(s,l,f,g,y){for(var w=l._reactName,N=[];f!==null&&f!==g;){var U=f,W=U.alternate,oe=U.stateNode;if(U=U.tag,W!==null&&W===g)break;U!==5&&U!==26&&U!==27||oe===null||(W=oe,y?(oe=Wi(f,w),oe!=null&&N.unshift(Vf(f,oe,W))):y||(oe=Wi(f,w),oe!=null&&N.push(Vf(f,oe,W)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var cj=/\r\n?/g,uj=/\u0000|\uFFFD/g;function mC(s){return(typeof s=="string"?s:""+s).replace(cj,`
`).replace(uj,"")}function vC(s,l){return l=mC(l),mC(s)===l}function Gt(s,l,f,g,y,w){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Yr(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Yr(s,""+g);break;case"className":li(s,"class",g);break;case"tabIndex":li(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":li(s,f,g);break;case"style":ef(s,g,w);break;case"data":if(l!=="object"){li(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=Uc(""+g),s.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&Gt(s,l,"name",y.name,y,null),Gt(s,l,"formEncType",y.formEncType,y,null),Gt(s,l,"formMethod",y.formMethod,y,null),Gt(s,l,"formTarget",y.formTarget,y,null)):(Gt(s,l,"encType",y.encType,y,null),Gt(s,l,"method",y.method,y,null),Gt(s,l,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=Uc(""+g),s.setAttribute(f,g);break;case"onClick":g!=null&&(s.onclick=Xi);break;case"onScroll":g!=null&&vt("scroll",s);break;case"onScrollEnd":g!=null&&vt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}f=Uc(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""+g):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":g===!0?s.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,g):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(f,g):s.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(f):s.setAttribute(f,g);break;case"popover":vt("beforetoggle",s),vt("toggle",s),Lc(s,"popover",g);break;case"xlinkActuate":Mn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Mn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Mn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Mn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Mn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Mn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Lc(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=eg.get(f)||f,Lc(s,f,g))}}function qb(s,l,f,g,y,w){switch(f){case"style":ef(s,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof g=="string"?Yr(s,g):(typeof g=="number"||typeof g=="bigint")&&Yr(s,""+g);break;case"onScroll":g!=null&&vt("scroll",s);break;case"onScrollEnd":g!=null&&vt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),w=s[un]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,y),typeof g=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,g,y);break e}f in s?s[f]=g:g===!0?s.setAttribute(f,""):Lc(s,f,g)}}}function fr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",s),vt("load",s);var g=!1,y=!1,w;for(w in f)if(f.hasOwnProperty(w)){var N=f[w];if(N!=null)switch(w){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Gt(s,l,w,N,f,null)}}y&&Gt(s,l,"srcSet",f.srcSet,f,null),g&&Gt(s,l,"src",f.src,f,null);return;case"input":vt("invalid",s);var U=w=N=y=null,W=null,oe=null;for(g in f)if(f.hasOwnProperty(g)){var ve=f[g];if(ve!=null)switch(g){case"name":y=ve;break;case"type":N=ve;break;case"checked":W=ve;break;case"defaultChecked":oe=ve;break;case"value":w=ve;break;case"defaultValue":U=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:Gt(s,l,g,ve,f,null)}}Qp(s,w,U,W,oe,N,y,!1);return;case"select":vt("invalid",s),g=N=w=null;for(y in f)if(f.hasOwnProperty(y)&&(U=f[y],U!=null))switch(y){case"value":w=U;break;case"defaultValue":N=U;break;case"multiple":g=U;default:Gt(s,l,y,U,f,null)}l=w,f=N,s.multiple=!!g,l!=null?Js(s,!!g,l,!1):f!=null&&Js(s,!!g,f,!0);return;case"textarea":vt("invalid",s),w=y=g=null;for(N in f)if(f.hasOwnProperty(N)&&(U=f[N],U!=null))switch(N){case"value":g=U;break;case"defaultValue":y=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Gt(s,l,N,U,f,null)}eo(s,g,y,w);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(g=f[W],g!=null))switch(W){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Gt(s,l,W,g,f,null)}return;case"dialog":vt("beforetoggle",s),vt("toggle",s),vt("cancel",s),vt("close",s);break;case"iframe":case"object":vt("load",s);break;case"video":case"audio":for(g=0;g<Of.length;g++)vt(Of[g],s);break;case"image":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"embed":case"source":case"link":vt("error",s),vt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in f)if(f.hasOwnProperty(oe)&&(g=f[oe],g!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Gt(s,l,oe,g,f,null)}return;default:if(Fc(l)){for(ve in f)f.hasOwnProperty(ve)&&(g=f[ve],g!==void 0&&qb(s,l,ve,g,f,void 0));return}}for(U in f)f.hasOwnProperty(U)&&(g=f[U],g!=null&&Gt(s,l,U,g,f,null))}function dj(s,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,N=null,U=null,W=null,oe=null,ve=null;for(he in f){var be=f[he];if(f.hasOwnProperty(he)&&be!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":W=be;default:g.hasOwnProperty(he)||Gt(s,l,he,null,g,be)}}for(var le in g){var he=g[le];if(be=f[le],g.hasOwnProperty(le)&&(he!=null||be!=null))switch(le){case"type":w=he;break;case"name":y=he;break;case"checked":oe=he;break;case"defaultChecked":ve=he;break;case"value":N=he;break;case"defaultValue":U=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:he!==be&&Gt(s,l,le,he,g,be)}}Bc(s,N,U,W,oe,ve,w,y);return;case"select":he=N=U=le=null;for(w in f)if(W=f[w],f.hasOwnProperty(w)&&W!=null)switch(w){case"value":break;case"multiple":he=W;default:g.hasOwnProperty(w)||Gt(s,l,w,null,g,W)}for(y in g)if(w=g[y],W=f[y],g.hasOwnProperty(y)&&(w!=null||W!=null))switch(y){case"value":le=w;break;case"defaultValue":U=w;break;case"multiple":N=w;default:w!==W&&Gt(s,l,y,w,g,W)}l=U,f=N,g=he,le!=null?Js(s,!!f,le,!1):!!g!=!!f&&(l!=null?Js(s,!!f,l,!0):Js(s,!!f,f?[]:"",!1));return;case"textarea":he=le=null;for(U in f)if(y=f[U],f.hasOwnProperty(U)&&y!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Gt(s,l,U,null,g,y)}for(N in g)if(y=g[N],w=f[N],g.hasOwnProperty(N)&&(y!=null||w!=null))switch(N){case"value":le=y;break;case"defaultValue":he=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&Gt(s,l,N,y,g,w)}Zp(s,le,he);return;case"option":for(var Pe in f)if(le=f[Pe],f.hasOwnProperty(Pe)&&le!=null&&!g.hasOwnProperty(Pe))switch(Pe){case"selected":s.selected=!1;break;default:Gt(s,l,Pe,null,g,le)}for(W in g)if(le=g[W],he=f[W],g.hasOwnProperty(W)&&le!==he&&(le!=null||he!=null))switch(W){case"selected":s.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Gt(s,l,W,le,g,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in f)le=f[Ke],f.hasOwnProperty(Ke)&&le!=null&&!g.hasOwnProperty(Ke)&&Gt(s,l,Ke,null,g,le);for(oe in g)if(le=g[oe],he=f[oe],g.hasOwnProperty(oe)&&le!==he&&(le!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:Gt(s,l,oe,le,g,he)}return;default:if(Fc(l)){for(var qt in f)le=f[qt],f.hasOwnProperty(qt)&&le!==void 0&&!g.hasOwnProperty(qt)&&qb(s,l,qt,void 0,g,le);for(ve in g)le=g[ve],he=f[ve],!g.hasOwnProperty(ve)||le===he||le===void 0&&he===void 0||qb(s,l,ve,le,g,he);return}}for(var re in f)le=f[re],f.hasOwnProperty(re)&&le!=null&&!g.hasOwnProperty(re)&&Gt(s,l,re,null,g,le);for(be in g)le=g[be],he=f[be],!g.hasOwnProperty(be)||le===he||le==null&&he==null||Gt(s,l,be,le,g,he)}function yC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fj(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var y=f[g],w=y.transferSize,N=y.initiatorType,U=y.duration;if(w&&U&&yC(N)){for(N=0,U=y.responseEnd,g+=1;g<f.length;g++){var W=f[g],oe=W.startTime;if(oe>U)break;var ve=W.transferSize,be=W.initiatorType;ve&&yC(be)&&(W=W.responseEnd,N+=ve*(W<U?1:(U-oe)/(W-oe)))}if(--g,l+=8*(w+N)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hb=null,$b=null;function tm(s){return s.nodeType===9?s:s.ownerDocument}function bC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Yb(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Kb=null;function hj(){var s=window.event;return s&&s.type==="popstate"?s===Kb?!1:(Kb=s,!0):(Kb=null,!1)}var _C=typeof setTimeout=="function"?setTimeout:void 0,pj=typeof clearTimeout=="function"?clearTimeout:void 0,wC=typeof Promise=="function"?Promise:void 0,gj=typeof queueMicrotask=="function"?queueMicrotask:typeof wC<"u"?function(s){return wC.resolve(null).then(s).catch(mj)}:_C;function mj(s){setTimeout(function(){throw s})}function So(s){return s==="head"}function EC(s,l){var f=l,g=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(g===0){s.removeChild(y),wu(l);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")jf(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,jf(f);for(var w=f.firstChild;w;){var N=w.nextSibling,U=w.nodeName;w[va]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=N}}else f==="body"&&jf(s.ownerDocument.body);f=y}while(f);wu(l)}function SC(s,l){var f=s;s=0;do{var g=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=g}while(f)}function Xb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Xb(f),zc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function vj(s,l,f,g){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[va])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Mi(s.nextSibling),s===null)break}return null}function yj(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Mi(s.nextSibling),s===null))return null;return s}function TC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Mi(s.nextSibling),s===null))return null;return s}function Wb(s){return s.data==="$?"||s.data==="$~"}function Qb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function bj(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Mi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Zb=null;function AC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Mi(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function CC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function IC(s,l,f){switch(l=tm(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function jf(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);zc(s)}var Pi=new Map,DC=new Set;function nm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ss=Y.d;Y.d={f:xj,r:_j,D:wj,C:Ej,L:Sj,m:Tj,X:Cj,S:Aj,M:Ij};function xj(){var s=Ss.f(),l=Yg();return s||l}function _j(s){var l=Ei(s);l!==null&&l.tag===5&&l.type==="form"?$T(l):Ss.r(s)}var bu=typeof document>"u"?null:document;function RC(s,l,f){var g=bu;if(g&&typeof l=="string"&&l){var y=$r(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),DC.has(y)||(DC.add(y),s={rel:s,crossOrigin:f,href:l},g.querySelector(y)===null&&(l=g.createElement("link"),fr(l,"link",s),Nn(l),g.head.appendChild(l)))}}function wj(s){Ss.D(s),RC("dns-prefetch",s,null)}function Ej(s,l){Ss.C(s,l),RC("preconnect",s,l)}function Sj(s,l,f){Ss.L(s,l,f);var g=bu;if(g&&s&&l){var y='link[rel="preload"][as="'+$r(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+$r(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+$r(f.imageSizes)+'"]')):y+='[href="'+$r(s)+'"]';var w=y;switch(l){case"style":w=xu(s);break;case"script":w=_u(s)}Pi.has(w)||(s=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Pi.set(w,s),g.querySelector(y)!==null||l==="style"&&g.querySelector(zf(w))||l==="script"&&g.querySelector(Lf(w))||(l=g.createElement("link"),fr(l,"link",s),Nn(l),g.head.appendChild(l)))}}function Tj(s,l){Ss.m(s,l);var f=bu;if(f&&s){var g=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+$r(g)+'"][href="'+$r(s)+'"]',w=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=_u(s)}if(!Pi.has(w)&&(s=p({rel:"modulepreload",href:s},l),Pi.set(w,s),f.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Lf(w)))return}g=f.createElement("link"),fr(g,"link",s),Nn(g),f.head.appendChild(g)}}}function Aj(s,l,f){Ss.S(s,l,f);var g=bu;if(g&&s){var y=ba(g).hoistableStyles,w=xu(s);l=l||"default";var N=y.get(w);if(!N){var U={loading:0,preload:null};if(N=g.querySelector(zf(w)))U.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Pi.get(w))&&Jb(s,f);var W=N=g.createElement("link");Nn(W),fr(W,"link",s),W._p=new Promise(function(oe,ve){W.onload=oe,W.onerror=ve}),W.addEventListener("load",function(){U.loading|=1}),W.addEventListener("error",function(){U.loading|=2}),U.loading|=4,rm(N,l,g)}N={type:"stylesheet",instance:N,count:1,state:U},y.set(w,N)}}}function Cj(s,l){Ss.X(s,l);var f=bu;if(f&&s){var g=ba(f).hoistableScripts,y=_u(s),w=g.get(y);w||(w=f.querySelector(Lf(y)),w||(s=p({src:s,async:!0},l),(l=Pi.get(y))&&e1(s,l),w=f.createElement("script"),Nn(w),fr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(y,w))}}function Ij(s,l){Ss.M(s,l);var f=bu;if(f&&s){var g=ba(f).hoistableScripts,y=_u(s),w=g.get(y);w||(w=f.querySelector(Lf(y)),w||(s=p({src:s,async:!0,type:"module"},l),(l=Pi.get(y))&&e1(s,l),w=f.createElement("script"),Nn(w),fr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(y,w))}}function kC(s,l,f,g){var y=(y=de.current)?nm(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=xu(f.href),f=ba(y).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=xu(f.href);var w=ba(y).hoistableStyles,N=w.get(s);if(N||(y=y.ownerDocument||y,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,N),(w=y.querySelector(zf(s)))&&!w._p&&(N.instance=w,N.state.loading=5),Pi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Pi.set(s,f),w||Dj(y,s,f,N.state))),l&&g===null)throw Error(r(528,""));return N}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=_u(f),f=ba(y).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function xu(s){return'href="'+$r(s)+'"'}function zf(s){return'link[rel="stylesheet"]['+s+"]"}function NC(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function Dj(s,l,f,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),fr(l,"link",f),Nn(l),s.head.appendChild(l))}function _u(s){return'[src="'+$r(s)+'"]'}function Lf(s){return"script[async]"+s}function MC(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+$r(f.href)+'"]');if(g)return l.instance=g,Nn(g),g;var y=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Nn(g),fr(g,"style",y),rm(g,f.precedence,s),l.instance=g;case"stylesheet":y=xu(f.href);var w=s.querySelector(zf(y));if(w)return l.state.loading|=4,l.instance=w,Nn(w),w;g=NC(f),(y=Pi.get(y))&&Jb(g,y),w=(s.ownerDocument||s).createElement("link"),Nn(w);var N=w;return N._p=new Promise(function(U,W){N.onload=U,N.onerror=W}),fr(w,"link",g),l.state.loading|=4,rm(w,f.precedence,s),l.instance=w;case"script":return w=_u(f.src),(y=s.querySelector(Lf(w)))?(l.instance=y,Nn(y),y):(g=f,(y=Pi.get(w))&&(g=p({},f),e1(g,y)),s=s.ownerDocument||s,y=s.createElement("script"),Nn(y),fr(y,"link",g),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,rm(g,f.precedence,s));return l.instance}function rm(s,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,w=y,N=0;N<g.length;N++){var U=g[N];if(U.dataset.precedence===l)w=U;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Jb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function e1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var im=null;function PC(s,l,f){if(im===null){var g=new Map,y=im=new Map;y.set(f,g)}else y=im,g=y.get(f),g||(g=new Map,y.set(f,g));if(g.has(s))return g;for(g.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var w=f[y];if(!(w[va]||w[cn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(l)||"";N=s+N;var U=g.get(N);U?U.push(w):g.set(N,[w])}}return g}function OC(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function Rj(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function VC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function kj(s,l,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=xu(g.href),w=l.querySelector(zf(y));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=am.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=w,Nn(w);return}w=l.ownerDocument||l,g=NC(g),(y=Pi.get(y))&&Jb(g,y),w=w.createElement("link"),Nn(w);var N=w;N._p=new Promise(function(U,W){N.onload=U,N.onerror=W}),fr(w,"link",g),f.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=am.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var t1=0;function Nj(s,l){return s.stylesheets&&s.count===0&&om(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var g=setTimeout(function(){if(s.stylesheets&&om(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&t1===0&&(t1=62500*fj());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&om(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>t1?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(y)}}:null}function am(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var sm=null;function om(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,sm=new Map,l.forEach(Mj,s),sm=null,am.call(s))}function Mj(s,l){if(!(l.state.loading&4)){var f=sm.get(s);if(f)var g=f.get(null);else{f=new Map,sm.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var N=y[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),g=N)}g&&f.set(null,g)}y=l.instance,N=y.getAttribute("data-precedence"),w=f.get(N)||g,w===g&&f.set(null,y),f.set(N,y),this.count++,g=am.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Bf={$$typeof:R,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Pj(s,l,f,g,y,w,N,U,W){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.hiddenUpdates=br(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function jC(s,l,f,g,y,w,N,U,W,oe,ve,be){return s=new Pj(s,l,f,N,W,oe,ve,be,U),l=1,w===!0&&(l|=24),w=ui(3,null,null,l),s.current=w,w.stateNode=s,l=Py(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:g,isDehydrated:f,cache:l},zy(w),s}function zC(s){return s?(s=Zc,s):Zc}function LC(s,l,f,g,y,w){y=zC(y),g.context===null?g.context=y:g.pendingContext=y,g=ho(l),g.payload={element:f},w=w===void 0?null:w,w!==null&&(g.callback=w),f=po(s,g,l),f!==null&&(Zr(f,s,l),yf(f,s,l))}function BC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function n1(s,l){BC(s,l),(s=s.alternate)&&BC(s,l)}function FC(s){if(s.tag===13||s.tag===31){var l=Rl(s,67108864);l!==null&&Zr(l,s,67108864),n1(s,67108864)}}function UC(s){if(s.tag===13||s.tag===31){var l=gi();l=qr(l);var f=Rl(s,l);f!==null&&Zr(f,s,l),n1(s,l)}}var lm=!0;function Oj(s,l,f,g){var y=H.T;H.T=null;var w=Y.p;try{Y.p=2,r1(s,l,f,g)}finally{Y.p=w,H.T=y}}function Vj(s,l,f,g){var y=H.T;H.T=null;var w=Y.p;try{Y.p=8,r1(s,l,f,g)}finally{Y.p=w,H.T=y}}function r1(s,l,f,g){if(lm){var y=i1(g);if(y===null)Gb(s,l,g,cm,f),qC(s,g);else if(zj(y,s,l,f,g))g.stopPropagation();else if(qC(s,g),l&4&&-1<jj.indexOf(s)){for(;y!==null;){var w=Ei(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=Re(w.pendingLanes);if(N!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;N;){var W=1<<31-Wt(N);U.entanglements[1]|=W,N&=~W}Na(w),(Rt&6)===0&&(Hg=pt()+500,Pf(0))}}break;case 31:case 13:U=Rl(w,2),U!==null&&Zr(U,w,2),Yg(),n1(w,2)}if(w=i1(g),w===null&&Gb(s,l,g,cm,f),w===y)break;y=w}y!==null&&g.stopPropagation()}else Gb(s,l,g,null,f)}}function i1(s){return s=Si(s),a1(s)}var cm=null;function a1(s){if(cm=null,s=ya(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return cm=s,null}function GC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case Bt:return 2;case or:return 8;case Ur:case ss:return 32;case Ws:return 268435456;default:return 32}default:return 32}}var s1=!1,To=null,Ao=null,Co=null,Ff=new Map,Uf=new Map,Io=[],jj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qC(s,l){switch(s){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Ff.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(l.pointerId)}}function Gf(s,l,f,g,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[y]},l!==null&&(l=Ei(l),l!==null&&FC(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function zj(s,l,f,g,y){switch(l){case"focusin":return To=Gf(To,s,l,f,g,y),!0;case"dragenter":return Ao=Gf(Ao,s,l,f,g,y),!0;case"mouseover":return Co=Gf(Co,s,l,f,g,y),!0;case"pointerover":var w=y.pointerId;return Ff.set(w,Gf(Ff.get(w)||null,s,l,f,g,y)),!0;case"gotpointercapture":return w=y.pointerId,Uf.set(w,Gf(Uf.get(w)||null,s,l,f,g,y)),!0}return!1}function HC(s){var l=ya(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,$n(s.priority,function(){UC(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,$n(s.priority,function(){UC(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function um(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=i1(s.nativeEvent);if(f===null){f=s.nativeEvent;var g=new f.constructor(f.type,f);tf=g,f.target.dispatchEvent(g),tf=null}else return l=Ei(f),l!==null&&FC(l),s.blockedOn=f,!1;l.shift()}return!0}function $C(s,l,f){um(s)&&f.delete(l)}function Lj(){s1=!1,To!==null&&um(To)&&(To=null),Ao!==null&&um(Ao)&&(Ao=null),Co!==null&&um(Co)&&(Co=null),Ff.forEach($C),Uf.forEach($C)}function dm(s,l){s.blockedOn===l&&(s.blockedOn=null,s1||(s1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lj)))}var fm=null;function YC(s){fm!==s&&(fm=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fm===s&&(fm=null);for(var l=0;l<s.length;l+=3){var f=s[l],g=s[l+1],y=s[l+2];if(typeof g!="function"){if(a1(g||f)===null)continue;break}var w=Ei(f);w!==null&&(s.splice(l,3),l-=3,ib(w,{pending:!0,data:y,method:f.method,action:g},g,y))}}))}function wu(s){function l(W){return dm(W,s)}To!==null&&dm(To,s),Ao!==null&&dm(Ao,s),Co!==null&&dm(Co,s),Ff.forEach(l),Uf.forEach(l);for(var f=0;f<Io.length;f++){var g=Io[f];g.blockedOn===s&&(g.blockedOn=null)}for(;0<Io.length&&(f=Io[0],f.blockedOn===null);)HC(f),f.blockedOn===null&&Io.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var y=f[g],w=f[g+1],N=y[un]||null;if(typeof w=="function")N||YC(f);else if(N){var U=null;if(w&&w.hasAttribute("formAction")){if(y=w,N=w[un]||null)U=N.formAction;else if(a1(y)!==null)continue}else U=N.action;typeof U=="function"?f[g+1]=U:(f.splice(g,3),g-=3),YC(f)}}}function KC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(N){return y=N})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function o1(s){this._internalRoot=s}hm.prototype.render=o1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=gi();LC(f,g,s,l,null,null)},hm.prototype.unmount=o1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;LC(s.current,2,null,s,null,null),Yg(),l[Hr]=null}};function hm(s){this._internalRoot=s}hm.prototype.unstable_scheduleHydration=function(s){if(s){var l=kn();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Io.length&&l!==0&&l<Io[f].priority;f++);Io.splice(f,0,s),f===0&&HC(s)}};var XC=e.version;if(XC!=="19.2.0")throw Error(r(527,XC,"19.2.0"));Y.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Bj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{kr=pm.inject(Bj),vn=pm}catch{}}return Hf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,g="",y=nA,w=rA,N=iA;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=jC(s,1,!1,null,null,f,g,null,y,w,N,KC),s[Hr]=l.current,Ub(s),new o1(l)},Hf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var g=!1,y="",w=nA,N=rA,U=iA,W=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(U=f.onRecoverableError),f.formState!==void 0&&(W=f.formState)),l=jC(s,1,!0,l,f??null,g,y,W,w,N,U,KC),l.context=zC(null),f=l.current,g=gi(),g=qr(g),y=ho(g),y.callback=null,po(f,y,g),f=g,l.current.lanes=f,xr(l,f),Na(l),s[Hr]=l.current,Ub(s),new hm(l)},Hf.version="19.2.0",Hf}var aI;function Qj(){if(aI)return u1.exports;aI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),u1.exports=Wj(),u1.exports}var Zj=Qj();const Jj="modulepreload",e6=function(t){return"/personal-budget-pwa/"+t},sI={},t6=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(h=>{if(h=e6(h),h in sI)return;sI[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Jj,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((_,E)=>{b.addEventListener("load",_),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function n6(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const d=async(p=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await t6(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(p=>{o?.(p)}),!c)return;c.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),c.addEventListener("installed",p=>{p.isUpdate||r?.()}),c.register({immediate:e}).then(p=>{a?a("/personal-budget-pwa/sw.js",p):i?.(p)}).catch(p=>{o?.(p)})}}return u=h(),d}var oI="popstate";function r6(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Nc(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),dx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Nh(a))}function r(i,a){bi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return a6(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function i6(){return Math.random().toString(36).substring(2,10)}function lI(t,e){return{usr:t.state,key:t.key,idx:e}}function dx(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Nc(e):e,state:n,key:e&&e.key||r||i6()}}function Nh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function a6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){c="POP";let S=h(),A=S==null?null:S-d;d=S,u&&u({action:c,location:E.location,delta:A})}function m(S,A){c="PUSH";let D=dx(E.location,S,A);n&&n(D,S),d=h()+1;let R=lI(D,d),P=E.createHref(D);try{o.pushState(R,"",P)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(P)}a&&u&&u({action:c,location:E.location,delta:1})}function b(S,A){c="REPLACE";let D=dx(E.location,S,A);n&&n(D,S),d=h();let R=lI(D,d),P=E.createHref(D);o.replaceState(R,"",P),a&&u&&u({action:c,location:E.location,delta:0})}function _(S){return s6(S)}let E={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(oI,p),u=S,()=>{i.removeEventListener(oI,p),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let A=_(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:b,go(S){return o.go(S)}};return E}function s6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Nh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function jk(t,e,n="/"){return o6(t,e,n,!1)}function o6(t,e,n,r){let i=typeof e=="string"?Nc(e):e,a=Vs(i.pathname||"/",n);if(a==null)return null;let o=zk(t);l6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=b6(a);c=v6(o[u],d,r)}return c}function zk(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;pn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=ks([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(pn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),zk(o.children,e,m,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:g6(p,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of Lk(o.path))a(o,c,!0,u)}),e}function Lk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Lk(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function l6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var c6=/^:[\w-]+$/,u6=3,d6=2,f6=1,h6=10,p6=-2,cI=t=>t==="*";function g6(t,e){let n=t.split("/"),r=n.length;return n.some(cI)&&(r+=p6),e&&(r+=d6),n.filter(i=>!cI(i)).reduce((i,a)=>i+(c6.test(a)?u6:a===""?f6:h6),r)}function m6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function v6(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=yv({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=yv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ks([a,p.pathname]),pathnameBase:S6(ks([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=ks([a,p.pathnameBase]))}return o}function yv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=y6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[m];return p&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function y6(t,e=!1,n=!0){bi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function b6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var x6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_6=t=>x6.test(t);function w6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Nc(t):t,a;if(n)if(_6(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),bi(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=uI(n.substring(1),"/"):a=uI(n,e)}else a=e;return{pathname:a,search:T6(r),hash:A6(i)}}function uI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function p1(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bk(t){let e=E6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Fk(t,e,n,r=!1){let i;typeof t=="string"?i=Nc(t):(i={...t},pn(!i.pathname||!i.pathname.includes("?"),p1("?","pathname","search",i)),pn(!i.pathname||!i.pathname.includes("#"),p1("#","pathname","hash",i)),pn(!i.search||!i.search.includes("#"),p1("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=w6(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var ks=t=>t.join("/").replace(/\/\/+/g,"/"),S6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function C6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Uk=["POST","PUT","PATCH","DELETE"];new Set(Uk);var I6=["GET",...Uk];new Set(I6);var Dd=q.createContext(null);Dd.displayName="DataRouter";var h0=q.createContext(null);h0.displayName="DataRouterState";q.createContext(!1);var Gk=q.createContext({isTransitioning:!1});Gk.displayName="ViewTransition";var D6=q.createContext(new Map);D6.displayName="Fetchers";var R6=q.createContext(null);R6.displayName="Await";var es=q.createContext(null);es.displayName="Navigation";var hp=q.createContext(null);hp.displayName="Location";var ts=q.createContext({outlet:null,matches:[],isDataRoute:!1});ts.displayName="Route";var X_=q.createContext(null);X_.displayName="RouteError";function k6(t,{relative:e}={}){pn(pp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(es),{hash:i,pathname:a,search:o}=gp(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:ks([n,a])),r.createHref({pathname:c,search:o,hash:i})}function pp(){return q.useContext(hp)!=null}function ns(){return pn(pp(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(hp).location}var qk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hk(t){q.useContext(es).static||q.useLayoutEffect(t)}function rs(){let{isDataRoute:t}=q.useContext(ts);return t?H6():N6()}function N6(){pn(pp(),"useNavigate() may be used only in the context of a <Router> component.");let t=q.useContext(Dd),{basename:e,navigator:n}=q.useContext(es),{matches:r}=q.useContext(ts),{pathname:i}=ns(),a=JSON.stringify(Bk(r)),o=q.useRef(!1);return Hk(()=>{o.current=!0}),q.useCallback((u,d={})=>{if(bi(o.current,qk),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Fk(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ks([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}q.createContext(null);function M6(){let{matches:t}=q.useContext(ts),e=t[t.length-1];return e?e.params:{}}function gp(t,{relative:e}={}){let{matches:n}=q.useContext(ts),{pathname:r}=ns(),i=JSON.stringify(Bk(n));return q.useMemo(()=>Fk(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function P6(t,e){return $k(t,e)}function $k(t,e,n,r,i){pn(pp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(es),{matches:o}=q.useContext(ts),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let D=p&&p.path||"";Yk(d,!p||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let m=ns(),b;if(e){let D=typeof e=="string"?Nc(e):e;pn(h==="/"||D.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=m;let _=b.pathname||"/",E=_;if(h!=="/"){let D=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=jk(t,{pathname:E});bi(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),bi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=L6(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:ks([h,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:ks([h,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,n,r,i);return e&&A?q.createElement(hp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function O6(){let t=q6(),e=C6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,o)}var V6=q.createElement(O6,null),j6=class extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?q.createElement(ts.Provider,{value:this.props.routeContext},q.createElement(X_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z6({routeContext:t,match:e,children:n}){let r=q.useContext(Dd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(ts.Provider,{value:t},n)}function L6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);pn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:b}=n,_=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,p)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:p})}:void 0;return a.reduceRight((h,p,m)=>{let b,_=!1,E=null,S=null;n&&(b=o&&p.route.id?o[p.route.id]:void 0,E=p.route.errorElement||V6,c&&(u<0&&m===0?(Yk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===m&&(_=!0,S=p.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,m+1)),D=()=>{let R;return b?R=E:_?R=S:p.route.Component?R=q.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,q.createElement(z6,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?q.createElement(j6,{location:n.location,revalidation:n.revalidation,component:E,error:b,children:D(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:d}):D()},null)}function W_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B6(t){let e=q.useContext(Dd);return pn(e,W_(t)),e}function F6(t){let e=q.useContext(h0);return pn(e,W_(t)),e}function U6(t){let e=q.useContext(ts);return pn(e,W_(t)),e}function Q_(t){let e=U6(t),n=e.matches[e.matches.length-1];return pn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function G6(){return Q_("useRouteId")}function q6(){let t=q.useContext(X_),e=F6("useRouteError"),n=Q_("useRouteError");return t!==void 0?t:e.errors?.[n]}function H6(){let{router:t}=B6("useNavigate"),e=Q_("useNavigate"),n=q.useRef(!1);return Hk(()=>{n.current=!0}),q.useCallback(async(i,a={})=>{bi(n.current,qk),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var dI={};function Yk(t,e,n){!e&&!dI[t]&&(dI[t]=!0,bi(!1,n))}q.memo($6);function $6({routes:t,future:e,state:n,unstable_onError:r}){return $k(t,void 0,n,r,e)}function jo(t){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y6({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){pn(!pp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Nc(n));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=n,b=q.useMemo(()=>{let _=Vs(u,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:r}},[o,u,d,h,p,m,r]);return bi(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:q.createElement(es.Provider,{value:c},q.createElement(hp.Provider,{children:e,value:b}))}function K6({children:t,location:e}){return P6(fx(t),e)}function fx(t,e=[]){let n=[];return q.Children.forEach(t,(r,i)=>{if(!q.isValidElement(r))return;let a=[...e,i];if(r.type===q.Fragment){n.push.apply(n,fx(r.props.children,a));return}pn(r.type===jo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fx(r.props.children,a)),n.push(o)}),n}var Hm="get",$m="application/x-www-form-urlencoded";function p0(t){return t!=null&&typeof t.tagName=="string"}function X6(t){return p0(t)&&t.tagName.toLowerCase()==="button"}function W6(t){return p0(t)&&t.tagName.toLowerCase()==="form"}function Q6(t){return p0(t)&&t.tagName.toLowerCase()==="input"}function Z6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J6(t,e){return t.button===0&&(!e||e==="_self")&&!Z6(t)}function hx(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function ez(t,e){let n=hx(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var mm=null;function tz(){if(mm===null)try{new FormData(document.createElement("form"),0),mm=!1}catch{mm=!0}return mm}var nz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function g1(t){return t!=null&&!nz.has(t)?(bi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$m}"`),null):t}function rz(t,e){let n,r,i,a,o;if(W6(t)){let c=t.getAttribute("action");r=c?Vs(c,e):null,n=t.getAttribute("method")||Hm,i=g1(t.getAttribute("enctype"))||$m,a=new FormData(t)}else if(X6(t)||Q6(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Vs(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Hm,i=g1(t.getAttribute("formenctype"))||g1(c.getAttribute("enctype"))||$m,a=new FormData(c,t),!tz()){let{name:d,type:h,value:p}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,p)}}else{if(p0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hm,r=null,i=$m,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function iz(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Vs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function az(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oz(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await az(a,n);return o.links?o.links():[]}return[]}));return dz(r.flat(1).filter(sz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function fI(t,e,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function lz(t,e,{includeHydrateFallback:n}={}){return cz(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function cz(t){return[...new Set(t)]}function uz(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function dz(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(uz(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function Kk(){let t=q.useContext(Dd);return Z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function fz(){let t=q.useContext(h0);return Z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var J_=q.createContext(void 0);J_.displayName="FrameworkContext";function Xk(){let t=q.useContext(J_);return Z_(t,"You must render this element inside a <HydratedRouter> element"),t}function hz(t,e){let n=q.useContext(J_),[r,i]=q.useState(!1),[a,o]=q.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,m=q.useRef(null);q.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=A=>{A.forEach(D=>{o(D.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),q.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:$f(c,b),onBlur:$f(u,_),onMouseEnter:$f(d,b),onMouseLeave:$f(h,_),onTouchStart:$f(p,b)}]:[!1,m,{}]}function $f(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function pz({page:t,...e}){let{router:n}=Kk(),r=q.useMemo(()=>jk(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?q.createElement(mz,{page:t,matches:r,...e}):null}function gz(t){let{manifest:e,routeModules:n}=Xk(),[r,i]=q.useState([]);return q.useEffect(()=>{let a=!1;return oz(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function mz({page:t,matches:e,...n}){let r=ns(),{manifest:i,routeModules:a}=Xk(),{basename:o}=Kk(),{loaderData:c,matches:u}=fz(),d=q.useMemo(()=>fI(t,e,u,i,r,"data"),[t,e,u,i,r]),h=q.useMemo(()=>fI(t,e,u,i,r,"assets"),[t,e,u,i,r]),p=q.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(A=>{let D=i.routes[A.route.id];!D||!D.hasLoader||(!d.some(R=>R.route.id===A.route.id)&&A.route.id in c&&a[A.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:_.add(A.route.id))}),_.size===0)return[];let S=iz(t,o,"data");return E&&_.size>0&&S.searchParams.set("_routes",e.filter(A=>_.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,d,e,t,a]),m=q.useMemo(()=>lz(h,i),[h,i]),b=gz(h);return q.createElement(q.Fragment,null,p.map(_=>q.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>q.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),b.map(({key:_,link:E})=>q.createElement("link",{key:_,nonce:n.nonce,...E})))}function vz(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Wk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wk&&(window.__reactRouterVersion="7.9.6")}catch{}function yz({basename:t,children:e,window:n}){let r=q.useRef();r.current==null&&(r.current=r6({window:n,v5Compat:!0}));let i=r.current,[a,o]=q.useState({action:i.action,location:i.location}),c=q.useCallback(u=>{q.startTransition(()=>o(u))},[o]);return q.useLayoutEffect(()=>i.listen(c),[i,c]),q.createElement(Y6,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Qk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zk=q.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...m},b){let{basename:_}=q.useContext(es),E=typeof d=="string"&&Qk.test(d),S,A=!1;if(typeof d=="string"&&E&&(S=d,Wk))try{let k=new URL(window.location.href),O=d.startsWith("//")?new URL(k.protocol+d):new URL(d),L=Vs(O.pathname,_);O.origin===k.origin&&L!=null?d=L+O.search+O.hash:A=!0}catch{bi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=k6(d,{relative:i}),[R,P,z]=hz(r,m),M=wz(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function T(k){e&&e(k),k.defaultPrevented||M(k)}let C=q.createElement("a",{...m,...z,href:S||D,onClick:A||a?e:T,ref:vz(b,P),target:u,"data-discover":!E&&n==="render"?"true":void 0});return R&&!E?q.createElement(q.Fragment,null,C,q.createElement(pz,{page:D})):C});Zk.displayName="Link";var bz=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let p=gp(o,{relative:d.relative}),m=ns(),b=q.useContext(h0),{navigator:_,basename:E}=q.useContext(es),S=b!=null&&Iz(p)&&c===!0,A=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,D=m.pathname,R=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(D=D.toLowerCase(),R=R?R.toLowerCase():null,A=A.toLowerCase()),R&&E&&(R=Vs(R,E)||R);const P=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let z=D===A||!i&&D.startsWith(A)&&D.charAt(P)==="/",M=R!=null&&(R===A||!i&&R.startsWith(A)&&R.charAt(A.length)==="/"),T={isActive:z,isPending:M,isTransitioning:S},C=z?e:void 0,k;typeof r=="function"?k=r(T):k=[r,z?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(T):a;return q.createElement(Zk,{...d,"aria-current":C,className:k,ref:h,style:O,to:o,viewTransition:c},typeof u=="function"?u(T):u)});bz.displayName="NavLink";var xz=q.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Hm,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...m},b)=>{let _=Az(),E=Cz(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&Qk.test(c),D=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let P=R.nativeEvent.submitter,z=P?.getAttribute("formmethod")||o;_(P||R.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p})};return q.createElement("form",{ref:b,method:S,action:E,onSubmit:r?u:D,...m,"data-discover":!A&&t==="render"?"true":void 0})});xz.displayName="Form";function _z(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jk(t){let e=q.useContext(Dd);return pn(e,_z(t)),e}function wz(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=rs(),u=ns(),d=gp(t,{relative:a});return q.useCallback(h=>{if(J6(h,e)){h.preventDefault();let p=n!==void 0?n:Nh(u)===Nh(d);c(t,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,n,r,e,t,i,a,o])}function Ez(t){bi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=q.useRef(hx(t)),n=q.useRef(!1),r=ns(),i=q.useMemo(()=>ez(r.search,n.current?null:e.current),[r.search]),a=rs(),o=q.useCallback((c,u)=>{const d=hx(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Sz=0,Tz=()=>`__${String(++Sz)}__`;function Az(){let{router:t}=Jk("useSubmit"),{basename:e}=q.useContext(es),n=G6();return q.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=rz(r,e);if(i.navigate===!1){let h=i.fetcherKey||Tz();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Cz(t,{relative:e}={}){let{basename:n}=q.useContext(es),r=q.useContext(ts);pn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...gp(t||".",{relative:e})},o=ns();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ks([n,a.pathname])),Nh(a)}function Iz(t,{relative:e}={}){let n=q.useContext(Gk);pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Jk("useViewTransitionState"),i=gp(t,{relative:e});if(!n.isTransitioning)return!1;let a=Vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yv(i.pathname,o)!=null||yv(i.pathname,a)!=null}const Dz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),hI=t=>{const e=Rz(t);return e.charAt(0).toUpperCase()+e.slice(1)},eN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),kz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Nz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mz=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>q.createElement("svg",{ref:u,...Nz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eN("lucide",i),...!a&&!kz(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>q.createElement(d,h)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=q.forwardRef(({className:r,...i},a)=>q.createElement(Mz,{ref:a,iconNode:e,className:eN(`lucide-${Dz(hI(t))}`,`lucide-${t}`,r),...i}));return n.displayName=hI(t),n};const Pz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mh=Je("arrow-left",Pz);const Oz=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Vz=Je("arrow-right-left",Oz);const jz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zz=Je("check",jz);const Lz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tN=Je("chevron-down",Lz);const Bz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fz=Je("chevron-left",Bz);const Uz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ru=Je("chevron-right",Uz);const Gz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qz=Je("chevron-up",Gz);const Hz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],$z=Je("circle-arrow-down",Hz);const Yz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Kz=Je("circle-arrow-up",Yz);const Xz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bv=Je("circle-check-big",Xz);const Wz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pI=Je("circle-check",Wz);const Qz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],vm=Je("circle-plus",Qz);const Zz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gI=Je("circle-question-mark",Zz);const Jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mI=Je("circle",Jz);const eL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tL=Je("copy",eL);const nL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vI=Je("download",nL);const rL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],iL=Je("eye-off",rL);const aL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sL=Je("eye",aL);const oL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],lL=Je("file-text",oL);const cL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],uL=Je("folder-plus",cL);const dL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fL=Je("funnel",dL);const hL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],pL=Je("house",hL);const gL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],mL=Je("list",gL);const vL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yL=Je("loader-circle",vL);const bL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],yI=Je("loader",bL);const xL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],_L=Je("lock-open",xL);const wL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],EL=Je("lock",wL);const SL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],TL=Je("log-out",SL);const AL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],px=Je("mail",AL);const CL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],IL=Je("pause",CL);const DL=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ph=Je("piggy-bank",DL);const RL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oc=Je("refresh-cw",RL);const kL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],NL=Je("search",kL);const ML=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nN=Je("settings",ML);const PL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],OL=Je("target",PL);const VL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ym=Je("trash-2",VL);const jL=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rN=Je("trash",jL);const zL=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],LL=Je("trending-down",zL);const BL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],FL=Je("trending-up",BL);const UL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oh=Je("triangle-alert",UL);const GL=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],qL=Je("undo-2",GL);const HL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$L=Je("upload",HL);const YL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KL=Je("user-plus",YL);const XL=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ew=Je("wallet",XL);const WL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],QL=Je("wifi-off",WL);const ZL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],JL=Je("wifi",ZL);const e9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mp=Je("x",e9),tw=q.createContext({});function g0(t){const e=q.useRef(null);return e.current===null&&(e.current=t()),e.current}const nw=typeof window<"u",rw=nw?q.useLayoutEffect:q.useEffect,m0=q.createContext(null);function iw(t,e){t.indexOf(e)===-1&&t.push(e)}function aw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const js=(t,e,n)=>n>e?e:n<t?t:n;let sw=()=>{};const zs={},iN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function aN(t){return typeof t=="object"&&t!==null}const sN=t=>/^0[^.\s]+$/u.test(t);function ow(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ui=t=>t,t9=(t,e)=>n=>e(t(n)),vp=(...t)=>t.reduce(t9),Vh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class lw{constructor(){this.subscriptions=[]}add(e){return iw(this.subscriptions,e),()=>aw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ua=t=>t*1e3,Bi=t=>t/1e3;function oN(t,e){return e?t*(1e3/e):0}const lN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,n9=1e-7,r9=12;function i9(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=lN(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>n9&&++c<r9);return o}function yp(t,e,n,r){if(t===e&&n===r)return Ui;const i=a=>i9(a,0,1,t,n);return a=>a===0||a===1?a:lN(i(a),e,r)}const cN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uN=t=>e=>1-t(1-e),dN=yp(.33,1.53,.69,.99),cw=uN(dN),fN=cN(cw),hN=t=>(t*=2)<1?.5*cw(t):.5*(2-Math.pow(2,-10*(t-1))),uw=t=>1-Math.sin(Math.acos(t)),pN=uN(uw),gN=cN(uw),a9=yp(.42,0,1,1),s9=yp(0,0,.58,1),mN=yp(.42,0,.58,1),o9=t=>Array.isArray(t)&&typeof t[0]!="number",vN=t=>Array.isArray(t)&&typeof t[0]=="number",l9={linear:Ui,easeIn:a9,easeInOut:mN,easeOut:s9,circIn:uw,circInOut:gN,circOut:pN,backIn:cw,backInOut:fN,backOut:dN,anticipate:hN},c9=t=>typeof t=="string",bI=t=>{if(vN(t)){sw(t.length===4);const[e,n,r,i]=t;return yp(e,n,r,i)}else if(c9(t))return l9[t];return t},ym=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function u9(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(c)}const d={schedule:(h,p=!1,m=!1)=>{const _=m&&i?n:r;return p&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const d9=40;function yN(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=ym.reduce((R,P)=>(R[P]=u9(a),R),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:b,postRender:_}=o,E=()=>{const R=zs.useManualTiming?i.timestamp:performance.now();n=!1,zs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,d9),1)),i.timestamp=R,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),b.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},S=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:ym.reduce((R,P)=>{const z=o[P];return R[P]=(M,T=!1,C=!1)=>(n||S(),z.schedule(M,T,C)),R},{}),cancel:R=>{for(let P=0;P<ym.length;P++)o[ym[P]].cancel(R)},state:i,steps:o}}const{schedule:on,cancel:rl,state:pr,steps:m1}=yN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ui,!0);let Km;function f9(){Km=void 0}const ti={now:()=>(Km===void 0&&ti.set(pr.isProcessing||zs.useManualTiming?pr.timestamp:performance.now()),Km),set:t=>{Km=t,queueMicrotask(f9)}},bN=t=>e=>typeof e=="string"&&e.startsWith(t),dw=bN("--"),h9=bN("var(--"),fw=t=>h9(t)?p9.test(t.split("/*")[0].trim()):!1,p9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jh={...Rd,transform:t=>js(0,1,t)},bm={...Rd,default:1},dh=t=>Math.round(t*1e5)/1e5,hw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function g9(t){return t==null}const m9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pw=(t,e)=>n=>!!(typeof n=="string"&&m9.test(n)&&n.startsWith(t)||e&&!g9(n)&&Object.prototype.hasOwnProperty.call(n,e)),xN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(hw);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},v9=t=>js(0,255,t),v1={...Rd,transform:t=>Math.round(v9(t))},rc={test:pw("rgb","red"),parse:xN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+v1.transform(t)+", "+v1.transform(e)+", "+v1.transform(n)+", "+dh(jh.transform(r))+")"};function y9(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gx={test:pw("#"),parse:y9,transform:rc.transform},bp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zo=bp("deg"),Ga=bp("%"),Ze=bp("px"),b9=bp("vh"),x9=bp("vw"),xI={...Ga,parse:t=>Ga.parse(t)/100,transform:t=>Ga.transform(t*100)},zu={test:pw("hsl","hue"),parse:xN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ga.transform(dh(e))+", "+Ga.transform(dh(n))+", "+dh(jh.transform(r))+")"},Bn={test:t=>rc.test(t)||gx.test(t)||zu.test(t),parse:t=>rc.test(t)?rc.parse(t):zu.test(t)?zu.parse(t):gx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rc.transform(t):zu.transform(t),getAnimatableNone:t=>{const e=Bn.parse(t);return e.alpha=0,Bn.transform(e)}},_9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function w9(t){return isNaN(t)&&typeof t=="string"&&(t.match(hw)?.length||0)+(t.match(_9)?.length||0)>0}const _N="number",wN="color",E9="var",S9="var(",_I="${}",T9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(T9,u=>(Bn.test(u)?(r.color.push(a),i.push(wN),n.push(Bn.parse(u))):u.startsWith(S9)?(r.var.push(a),i.push(E9),n.push(u)):(r.number.push(a),i.push(_N),n.push(parseFloat(u))),++a,_I)).split(_I);return{values:n,split:c,indexes:r,types:i}}function EN(t){return zh(t).values}function SN(t){const{split:e,types:n}=zh(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===_N?a+=dh(i[o]):c===wN?a+=Bn.transform(i[o]):a+=i[o]}return a}}const A9=t=>typeof t=="number"?0:Bn.test(t)?Bn.getAnimatableNone(t):t;function C9(t){const e=EN(t);return SN(t)(e.map(A9))}const il={test:w9,parse:EN,createTransformer:SN,getAnimatableNone:C9};function y1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function I9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=y1(u,c,t+1/3),a=y1(u,c,t),o=y1(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function xv(t,e){return n=>n>0?e:t}const fn=(t,e,n)=>t+(e-t)*n,b1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},D9=[gx,rc,zu],R9=t=>D9.find(e=>e.test(t));function wI(t){const e=R9(t);if(!e)return!1;let n=e.parse(t);return e===zu&&(n=I9(n)),n}const EI=(t,e)=>{const n=wI(t),r=wI(e);if(!n||!r)return xv(t,e);const i={...n};return a=>(i.red=b1(n.red,r.red,a),i.green=b1(n.green,r.green,a),i.blue=b1(n.blue,r.blue,a),i.alpha=fn(n.alpha,r.alpha,a),rc.transform(i))},mx=new Set(["none","hidden"]);function k9(t,e){return mx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function N9(t,e){return n=>fn(t,e,n)}function gw(t){return typeof t=="number"?N9:typeof t=="string"?fw(t)?xv:Bn.test(t)?EI:O9:Array.isArray(t)?TN:typeof t=="object"?Bn.test(t)?EI:M9:xv}function TN(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>gw(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function M9(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=gw(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function P9(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const O9=(t,e)=>{const n=il.createTransformer(e),r=zh(t),i=zh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?mx.has(t)&&!i.values.length||mx.has(e)&&!r.values.length?k9(t,e):vp(TN(P9(r,i),i.values),n):xv(t,e)};function AN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):gw(t)(t,e)}const V9=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>on.update(e,n),stop:()=>rl(e),now:()=>pr.isProcessing?pr.timestamp:ti.now()}},CN=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},_v=2e4;function mw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<_v;)e+=n,r=t.next(e);return e>=_v?1/0:e}function j9(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(mw(r),_v);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Bi(i)}}const z9=5;function IN(t,e,n){const r=Math.max(e-z9,0);return oN(n-t(r),e-r)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},x1=.001;function L9({duration:t=xn.duration,bounce:e=xn.bounce,velocity:n=xn.velocity,mass:r=xn.mass}){let i,a,o=1-e;o=js(xn.minDamping,xn.maxDamping,o),t=js(xn.minDuration,xn.maxDuration,Bi(t)),o<1?(i=d=>{const h=d*o,p=h*t,m=h-n,b=vx(d,o),_=Math.exp(-p);return x1-m/b*_},a=d=>{const p=d*o*t,m=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-p),E=vx(Math.pow(d,2),o);return(-i(d)+x1>0?-1:1)*((m-b)*_)/E}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-x1+h*p},a=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const c=5/t,u=F9(i,a,c);if(t=Ua(t),isNaN(u))return{stiffness:xn.stiffness,damping:xn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const B9=12;function F9(t,e,n){let r=n;for(let i=1;i<B9;i++)r=r-t(r)/e(r);return r}function vx(t,e){return t*Math.sqrt(1-e*e)}const U9=["duration","bounce"],G9=["stiffness","damping","mass"];function SI(t,e){return e.some(n=>t[n]!==void 0)}function q9(t){let e={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...t};if(!SI(t,G9)&&SI(t,U9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*js(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:xn.mass,stiffness:i,damping:a}}else{const n=L9(t);e={...e,...n,mass:xn.mass},e.isResolvedFromDuration=!0}return e}function wv(t=xn.visualDuration,e=xn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:b}=q9({...n,velocity:-Bi(n.velocity||0)}),_=m||0,E=d/(2*Math.sqrt(u*h)),S=o-a,A=Bi(Math.sqrt(u/h)),D=Math.abs(S)<5;r||(r=D?xn.restSpeed.granular:xn.restSpeed.default),i||(i=D?xn.restDelta.granular:xn.restDelta.default);let R;if(E<1){const z=vx(A,E);R=M=>{const T=Math.exp(-E*A*M);return o-T*((_+E*A*S)/z*Math.sin(z*M)+S*Math.cos(z*M))}}else if(E===1)R=z=>o-Math.exp(-A*z)*(S+(_+A*S)*z);else{const z=A*Math.sqrt(E*E-1);R=M=>{const T=Math.exp(-E*A*M),C=Math.min(z*M,300);return o-T*((_+E*A*S)*Math.sinh(C)+z*S*Math.cosh(C))/z}}const P={calculatedDuration:b&&p||null,next:z=>{const M=R(z);if(b)c.done=z>=p;else{let T=z===0?_:0;E<1&&(T=z===0?Ua(_):IN(R,z,M));const C=Math.abs(T)<=r,k=Math.abs(o-M)<=i;c.done=C&&k}return c.value=c.done?o:M,c},toString:()=>{const z=Math.min(mw(P),_v),M=CN(T=>P.next(z*T).value,z,30);return z+"ms "+M},toTransition:()=>{}};return P}wv.applyToOptions=t=>{const e=j9(t,100,wv);return t.ease=e.ease,t.duration=Ua(e.duration),t.type="keyframes",t};function yx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},b=C=>c!==void 0&&C<c||u!==void 0&&C>u,_=C=>c===void 0?u:u===void 0||Math.abs(c-C)<Math.abs(u-C)?c:u;let E=n*e;const S=p+E,A=o===void 0?S:o(S);A!==S&&(E=A-p);const D=C=>-E*Math.exp(-C/r),R=C=>A+D(C),P=C=>{const k=D(C),O=R(C);m.done=Math.abs(k)<=d,m.value=m.done?A:O};let z,M;const T=C=>{b(m.value)&&(z=C,M=wv({keyframes:[m.value,_(m.value)],velocity:IN(R,C,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return T(0),{calculatedDuration:null,next:C=>{let k=!1;return!M&&z===void 0&&(k=!0,P(C),T(C)),z!==void 0&&C>=z?M.next(C-z):(!k&&P(C),m)}}}function H9(t,e,n){const r=[],i=n||zs.mix||AN,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ui:e;c=vp(u,c)}r.push(c)}return r}function $9(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(sw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=H9(e,r,i),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=Vh(t[p],t[p+1],h);return c[p](m)};return n?h=>d(js(t[0],t[a-1],h)):d}function Y9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vh(0,e,r);t.push(fn(n,1,i))}}function K9(t){const e=[0];return Y9(e,t.length-1),e}function X9(t,e){return t.map(n=>n*e)}function W9(t,e){return t.map(()=>e||mN).splice(0,t.length-1)}function fh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=o9(r)?r.map(bI):bI(r),a={done:!1,value:e[0]},o=X9(n&&n.length===e.length?n:K9(e),t),c=$9(o,e,{ease:Array.isArray(i)?i:W9(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const Q9=t=>t!==null;function vw(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Q9),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const Z9={decay:yx,inertia:yx,tween:fh,keyframes:fh,spring:wv};function DN(t){typeof t.type=="string"&&(t.type=Z9[t.type])}class yw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const J9=t=>t/100;class bw extends yw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ti.now()&&this.tick(ti.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DN(e);const{type:n=fh,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||fh;u!==fh&&typeof c[0]!="number"&&(this.mixKeyframes=vp(J9,AN(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=mw(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:b,type:_,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const A=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?A<0:A>i;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,P=r;if(p){const C=Math.min(this.currentTime,i)/c;let k=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?(O=1-O,b&&(O-=b/c)):m==="mirror"&&(P=o)),R=js(0,1,O)*c}const z=D?{done:!1,value:h[0]}:P.next(R);a&&(z.value=a(z.value));let{done:M}=z;!D&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return T&&_!==yx&&(z.value=vw(h,this.options,S,this.speed)),E&&E(z.value),T&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return Bi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bi(e)}get time(){return Bi(this.currentTime)}set time(e){e=Ua(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ti.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Bi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=V9,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ti.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function eB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ic=t=>t*180/Math.PI,bx=t=>{const e=ic(Math.atan2(t[1],t[0]));return xx(e)},tB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bx,rotateZ:bx,skewX:t=>ic(Math.atan(t[1])),skewY:t=>ic(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xx=t=>(t=t%360,t<0&&(t+=360),t),TI=bx,AI=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),CI=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),nB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AI,scaleY:CI,scale:t=>(AI(t)+CI(t))/2,rotateX:t=>xx(ic(Math.atan2(t[6],t[5]))),rotateY:t=>xx(ic(Math.atan2(-t[2],t[0]))),rotateZ:TI,rotate:TI,skewX:t=>ic(Math.atan(t[4])),skewY:t=>ic(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _x(t){return t.includes("scale")?1:0}function wx(t,e){if(!t||t==="none")return _x(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=nB,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tB,i=c}if(!i)return _x(e);const a=r[e],o=i[1].split(",").map(iB);return typeof a=="function"?a(o):o[a]}const rB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return wx(n,e)};function iB(t){return parseFloat(t.trim())}const kd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nd=new Set(kd),II=t=>t===Rd||t===Ze,aB=new Set(["x","y","z"]),sB=kd.filter(t=>!aB.has(t));function oB(t){const e=[];return sB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const lc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>wx(e,"x"),y:(t,{transform:e})=>wx(e,"y")};lc.translateX=lc.x;lc.translateY=lc.y;const cc=new Set;let Ex=!1,Sx=!1,Tx=!1;function RN(){if(Sx){const t=Array.from(cc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=oB(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Sx=!1,Ex=!1,cc.forEach(t=>t.complete(Tx)),cc.clear()}function kN(){cc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Sx=!0)})}function lB(){Tx=!0,kN(),RN(),Tx=!1}class xw{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(cc.add(this),Ex||(Ex=!0,on.read(kN),on.resolveKeyframes(RN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}eB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),cc.delete(this)}cancel(){this.state==="scheduled"&&(cc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cB=t=>t.startsWith("--");function uB(t,e,n){cB(e)?t.style.setProperty(e,n):t.style[e]=n}const dB=ow(()=>window.ScrollTimeline!==void 0),fB={};function hB(t,e){const n=ow(t);return()=>fB[e]??n()}const NN=hB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,DI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function MN(t,e){if(t)return typeof t=="function"?NN()?CN(t,e):"ease-out":vN(t)?eh(t):Array.isArray(t)?t.map(n=>MN(n,e)||DI.easeOut):DI[t]}function pB(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const p=MN(c,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function PN(t){return typeof t=="function"&&"applyToOptions"in t}function gB({type:t,...e}){return PN(t)&&NN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mB extends yw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,sw(typeof e.type!="string");const d=gB(e);this.animation=pB(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=vw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):uB(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Bi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bi(e)}get time(){return Bi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ua(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&dB()?(this.animation.timeline=e,Ui):n(this)}}const ON={anticipate:hN,backInOut:fN,circInOut:gN};function vB(t){return t in ON}function yB(t){typeof t.ease=="string"&&vB(t.ease)&&(t.ease=ON[t.ease])}const RI=10;class bB extends mB{constructor(e){yB(e),DN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new bw({...o,autoplay:!1}),u=Ua(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-RI).value,c.sample(u).value,RI),c.stop()}}const kI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(il.test(t)||t==="0")&&!t.startsWith("url("));function xB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _B(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=kI(i,e),c=kI(a,e);return!o||!c?!1:xB(t)||(n==="spring"||PN(n))&&r}function Ax(t){t.duration=0,t.type="keyframes"}const wB=new Set(["opacity","clipPath","filter","transform"]),EB=ow(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function SB(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return EB()&&n&&wB.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const TB=40;class AB extends yw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ti.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...p},b=h?.KeyframeResolver||xw;this.keyframeResolver=new b(c,(_,E,S)=>this.onKeyframesResolved(_,E,m,!S),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=ti.now(),_B(e,a,o,c)||((zs.instantAnimations||!u)&&h?.(vw(e,r,n)),e[0]=e[e.length-1],Ax(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>TB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&SB(m)?new bB({...m,element:m.motionValue.owner.current}):new bw(m);b.finished.then(()=>this.notifyFinished()).catch(Ui),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),lB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const CB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IB(t){const e=CB.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function VN(t,e,n=1){const[r,i]=IB(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return iN(o)?parseFloat(o):o}return fw(i)?VN(i,e,n+1):i}function _w(t,e){return t?.[e]??t?.default??t}const jN=new Set(["width","height","top","left","right","bottom",...kd]),DB={test:t=>t==="auto",parse:t=>t},zN=t=>e=>e.test(t),LN=[Rd,Ze,Ga,zo,x9,b9,DB],NI=t=>LN.find(zN(t));function RB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sN(t):!0}const kB=new Set(["brightness","contrast","saturate","opacity"]);function NB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(hw)||[];if(!r)return t;const i=n.replace(r,"");let a=kB.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const MB=/\b([a-z-]*)\(.*?\)/gu,Cx={...il,getAnimatableNone:t=>{const e=t.match(MB);return e?e.map(NB).join(" "):t}},MI={...Rd,transform:Math.round},PB={rotate:zo,rotateX:zo,rotateY:zo,rotateZ:zo,scale:bm,scaleX:bm,scaleY:bm,scaleZ:bm,skew:zo,skewX:zo,skewY:zo,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:jh,originX:xI,originY:xI,originZ:Ze},ww={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...PB,zIndex:MI,fillOpacity:jh,strokeOpacity:jh,numOctaves:MI},OB={...ww,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:Cx,WebkitFilter:Cx},BN=t=>OB[t];function FN(t,e){let n=BN(t);return n!==Cx&&(n=il),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VB=new Set(["auto","none","0"]);function jB(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!VB.has(a)&&zh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=FN(n,i)}class zB extends xw{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),fw(d))){const h=VN(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!jN.has(r)||e.length!==2)return;const[i,a]=e,o=NI(i),c=NI(a);if(o!==c)if(II(o)&&II(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else lc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||RB(e[i]))&&r.push(i);r.length&&jB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=lc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function LB(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const UN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function GN(t){return aN(t)&&"offsetHeight"in t}const PI=30,BB=t=>!isNaN(parseFloat(t));class FB{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=ti.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ti.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=BB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lw);const r=this.events[e].add(n);return e==="change"?()=>{r(),on.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ti.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PI);return oN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nd(t,e){return new FB(t,e)}const{schedule:Ew}=yN(queueMicrotask,!1),ra={x:!1,y:!1};function qN(){return ra.x||ra.y}function UB(t){return t==="x"||t==="y"?ra[t]?null:(ra[t]=!0,()=>{ra[t]=!1}):ra.x||ra.y?null:(ra.x=ra.y=!0,()=>{ra.x=ra.y=!1})}function HN(t,e){const n=LB(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function OI(t){return!(t.pointerType==="touch"||qN())}function GB(t,e,n={}){const[r,i,a]=HN(t,n),o=c=>{if(!OI(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=p=>{OI(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const $N=(t,e)=>e?t===e?!0:$N(t,e.parentElement):!1,Sw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HB(t){return qB.has(t.tagName)||t.tabIndex!==-1}const Xm=new WeakSet;function VI(t){return e=>{e.key==="Enter"&&t(e)}}function _1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $B=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=VI(()=>{if(Xm.has(n))return;_1(n,"down");const i=VI(()=>{_1(n,"up")}),a=()=>_1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function jI(t){return Sw(t)&&!qN()}function YB(t,e,n={}){const[r,i,a]=HN(t,n),o=c=>{const u=c.currentTarget;if(!jI(c))return;Xm.add(u);const d=e(u,c),h=(b,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Xm.has(u)&&Xm.delete(u),jI(b)&&typeof d=="function"&&d(b,{success:_})},p=b=>{h(b,u===window||u===document||n.useGlobalTarget||$N(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),GN(c)&&(c.addEventListener("focus",d=>$B(d,i)),!HB(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function YN(t){return aN(t)&&"ownerSVGElement"in t}function KB(t){return YN(t)&&t.tagName==="svg"}const Ar=t=>!!(t&&t.getVelocity),XB=[...LN,Bn,il],WB=t=>XB.find(zN(t)),Tw=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function zI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function QB(...t){return e=>{let n=!1;const r=t.map(i=>{const a=zI(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():zI(t[i],null)}}}}function ZB(...t){return q.useCallback(QB(...t),t)}class JB extends q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=GN(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function eF({children:t,isPresent:e,anchorX:n,root:r}){const i=q.useId(),a=q.useRef(null),o=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=q.useContext(Tw),u=ZB(a,t?.ref);return q.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:b}=o.current;if(e||!a.current||!d||!h)return;const _=n==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const S=r??document.head;return S.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(E)&&S.removeChild(E)}},[e]),x.jsx(JB,{isPresent:e,childRef:a,sizeRef:o,children:q.cloneElement(t,{ref:u})})}const tF=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=g0(nF),h=q.useId();let p=!0,m=q.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const _ of d.values())if(!_)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return a&&p&&(m={...m}),q.useMemo(()=>{d.forEach((b,_)=>d.set(_,!1))},[n]),q.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=x.jsx(eF,{isPresent:n,anchorX:c,root:u,children:t})),x.jsx(m0.Provider,{value:m,children:t})};function nF(){return new Map}function KN(t=!0){const e=q.useContext(m0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=q.useId();q.useEffect(()=>{if(t)return i(a)},[t]);const o=q.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const xm=t=>t.key||"";function LI(t){const e=[];return q.Children.forEach(t,n=>{q.isValidElement(n)&&e.push(n)}),e}const Lh=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=KN(o),p=q.useMemo(()=>LI(t),[t]),m=o&&!d?[]:p.map(xm),b=q.useRef(!0),_=q.useRef(p),E=g0(()=>new Map),[S,A]=q.useState(p),[D,R]=q.useState(p);rw(()=>{b.current=!1,_.current=p;for(let M=0;M<D.length;M++){const T=xm(D[M]);m.includes(T)?E.delete(T):E.get(T)!==!0&&E.set(T,!1)}},[D,m.length,m.join("-")]);const P=[];if(p!==S){let M=[...p];for(let T=0;T<D.length;T++){const C=D[T],k=xm(C);m.includes(k)||(M.splice(T,0,C),P.push(C))}return a==="wait"&&P.length&&(M=P),R(LI(M)),A(p),null}const{forceRender:z}=q.useContext(tw);return x.jsx(x.Fragment,{children:D.map(M=>{const T=xm(M),C=o&&!d?!1:p===D||m.includes(T),k=()=>{if(E.has(T))E.set(T,!0);else return;let O=!0;E.forEach(L=>{L||(O=!1)}),O&&(z?.(),R(_.current),o&&h?.(),r&&r())};return x.jsx(tF,{isPresent:C,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:C?void 0:k,anchorX:c,children:M},T)})})},XN=q.createContext({strict:!1}),BI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rd={};for(const t in BI)rd[t]={isEnabled:e=>BI[t].some(n=>!!e[n])};function rF(t){for(const e in t)rd[e]={...rd[e],...t[e]}}const iF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ev(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iF.has(t)}let WN=t=>!Ev(t);function aF(t){typeof t=="function"&&(WN=e=>e.startsWith("on")?!Ev(e):t(e))}try{aF(require("@emotion/is-prop-valid").default)}catch{}function sF(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(WN(i)||n===!0&&Ev(i)||!e&&!Ev(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const v0=q.createContext({});function y0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Bh(t){return typeof t=="string"||Array.isArray(t)}const Aw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cw=["initial",...Aw];function b0(t){return y0(t.animate)||Cw.some(e=>Bh(t[e]))}function QN(t){return!!(b0(t)||t.variants)}function oF(t,e){if(b0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Bh(n)?n:void 0,animate:Bh(r)?r:void 0}}return t.inherit!==!1?e:{}}function lF(t){const{initial:e,animate:n}=oF(t,q.useContext(v0));return q.useMemo(()=>({initial:e,animate:n}),[FI(e),FI(n)])}function FI(t){return Array.isArray(t)?t.join(" "):t}const Fh={};function cF(t){for(const e in t)Fh[e]=t[e],dw(e)&&(Fh[e].isCSSVariable=!0)}function ZN(t,{layout:e,layoutId:n}){return Nd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fh[t]||t==="opacity")}const uF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dF=kd.length;function fF(t,e,n){let r="",i=!0;for(let a=0;a<dF;a++){const o=kd[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=UN(c,ww[o]);if(!u){i=!1;const h=uF[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Iw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(Nd.has(u)){o=!0;continue}else if(dw(u)){i[u]=d;continue}else{const h=UN(d,ww[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=fF(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JN(t,e,n){for(const r in e)!Ar(e[r])&&!ZN(r,n)&&(t[r]=e[r])}function hF({transformTemplate:t},e){return q.useMemo(()=>{const n=Dw();return Iw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function pF(t,e){const n=t.style||{},r={};return JN(r,n,t),Object.assign(r,hF(t,e)),r}function gF(t,e){const n={},r=pF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const mF={offset:"stroke-dashoffset",array:"stroke-dasharray"},vF={offset:"strokeDashoffset",array:"strokeDasharray"};function yF(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?mF:vF;t[a.offset]=Ze.transform(-r);const o=Ze.transform(e),c=Ze.transform(n);t[a.array]=`${o} ${c}`}function eM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Iw(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&yF(p,i,a,o,!1)}const tM=()=>({...Dw(),attrs:{}}),nM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function bF(t,e,n,r){const i=q.useMemo(()=>{const a=tM();return eM(a,e,nM(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};JN(a,t.style,t),i.style={...a,...i.style}}return i}const xF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rw(t){return typeof t!="string"||t.includes("-")?!1:!!(xF.indexOf(t)>-1||/[A-Z]/u.test(t))}function _F(t,e,n,{latestValues:r},i,a=!1){const c=(Rw(t)?bF:gF)(e,r,i,t),u=sF(e,typeof t=="string",a),d=t!==q.Fragment?{...u,...c,ref:n}:{},{children:h}=e,p=q.useMemo(()=>Ar(h)?h.get():h,[h]);return q.createElement(t,{...d,children:p})}function UI(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function kw(t,e,n,r){if(typeof e=="function"){const[i,a]=UI(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=UI(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Wm(t){return Ar(t)?t.get():t}function wF({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:EF(n,r,i,t),renderState:e()}}function EF(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=Wm(a[m]);let{initial:o,animate:c}=t;const u=b0(t),d=QN(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?c:o;if(p&&typeof p!="boolean"&&!y0(p)){const m=Array.isArray(p)?p:[p];for(let b=0;b<m.length;b++){const _=kw(t,m[b]);if(_){const{transitionEnd:E,transition:S,...A}=_;for(const D in A){let R=A[D];if(Array.isArray(R)){const P=h?R.length-1:0;R=R[P]}R!==null&&(i[D]=R)}for(const D in E)i[D]=E[D]}}}return i}const rM=t=>(e,n)=>{const r=q.useContext(v0),i=q.useContext(m0),a=()=>wF(t,e,r,i);return n?a():g0(a)};function Nw(t,e,n){const{style:r}=t,i={};for(const a in r)(Ar(r[a])||e.style&&Ar(e.style[a])||ZN(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const SF=rM({scrapeMotionValuesFromProps:Nw,createRenderState:Dw});function iM(t,e,n){const r=Nw(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const a=kd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const TF=rM({scrapeMotionValuesFromProps:iM,createRenderState:tM}),AF=Symbol.for("motionComponentSymbol");function Lu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CF(t,e,n){return q.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Lu(n)&&(n.current=r))},[e])}const Mw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IF="framerAppearId",aM="data-"+Mw(IF),sM=q.createContext({});function DF(t,e,n,r,i){const{visualElement:a}=q.useContext(v0),o=q.useContext(XN),c=q.useContext(m0),u=q.useContext(Tw).reducedMotion,d=q.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=q.useContext(sM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&RF(d.current,n,i,p);const m=q.useRef(!1);q.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const b=n[aM],_=q.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return rw(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),q.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),h.enteringChildren=void 0)}),h}function RF(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oM(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Lu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function oM(t){if(t)return t.options.allowProjection!==!1?t.projection:oM(t.parent)}function w1(t,{forwardMotionProps:e=!1}={},n,r){n&&rF(n);const i=Rw(t)?TF:SF;function a(c,u){let d;const h={...q.useContext(Tw),...c,layoutId:kF(c)},{isStatic:p}=h,m=lF(c),b=i(c,p);if(!p&&nw){NF();const _=MF(h);d=_.MeasureLayout,m.visualElement=DF(t,b,h,r,_.ProjectionNode)}return x.jsxs(v0.Provider,{value:m,children:[d&&m.visualElement?x.jsx(d,{visualElement:m.visualElement,...h}):null,_F(t,c,CF(b,m.visualElement,u),b,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=q.forwardRef(a);return o[AF]=t,o}function kF({layoutId:t}){const e=q.useContext(tw).id;return e&&t!==void 0?e+"-"+t:t}function NF(t,e){q.useContext(XN).strict}function MF(t){const{drag:e,layout:n}=rd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function PF(t,e){if(typeof Proxy>"u")return w1;const n=new Map,r=(a,o)=>w1(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,w1(o,void 0,t,e)),n.get(o))})}function lM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function OF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function E1(t){return t===void 0||t===1}function Ix({scale:t,scaleX:e,scaleY:n}){return!E1(t)||!E1(e)||!E1(n)}function Hl(t){return Ix(t)||cM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function cM(t){return GI(t.x)||GI(t.y)}function GI(t){return t&&t!=="0%"}function Sv(t,e,n){const r=t-n,i=e*r;return n+i}function qI(t,e,n,r,i){return i!==void 0&&(t=Sv(t,i,r)),Sv(t,n,r)+e}function Dx(t,e=0,n=1,r,i){t.min=qI(t.min,e,n,r,i),t.max=qI(t.max,e,n,r,i)}function uM(t,{x:e,y:n}){Dx(t.x,e.translate,e.scale,e.originPoint),Dx(t.y,n.translate,n.scale,n.originPoint)}const HI=.999999999999,$I=1.0000000000001;function jF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,uM(t,o)),r&&Hl(a.latestValues)&&Fu(t,a.latestValues))}e.x<$I&&e.x>HI&&(e.x=1),e.y<$I&&e.y>HI&&(e.y=1)}function Bu(t,e){t.min=t.min+e,t.max=t.max+e}function YI(t,e,n,r,i=.5){const a=fn(t.min,t.max,i);Dx(t,e,n,a,r)}function Fu(t,e){YI(t.x,e.x,e.scaleX,e.scale,e.originX),YI(t.y,e.y,e.scaleY,e.scale,e.originY)}function dM(t,e){return lM(VF(t.getBoundingClientRect(),e))}function zF(t,e,n){const r=dM(t,n),{scroll:i}=e;return i&&(Bu(r.x,i.offset.x),Bu(r.y,i.offset.y)),r}const KI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uu=()=>({x:KI(),y:KI()}),XI=()=>({min:0,max:0}),Cn=()=>({x:XI(),y:XI()}),Rx={current:null},fM={current:!1};function LF(){if(fM.current=!0,!!nw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rx.current=t.matches;t.addEventListener("change",e),e()}else Rx.current=!1}const BF=new WeakMap;function FF(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(a))t.addValue(r,nd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,nd(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const WI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UF{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ti.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,on.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=b0(n),this.isVariantNode=QN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const b=p[m];u[m]!==void 0&&Ar(b)&&b.set(u[m])}}mount(e){this.current=e,BF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fM.current||LF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rx.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),rl(this.notifyUpdate),rl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Nd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&on.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rd){const n=rd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<WI.length;r++){const i=WI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=FF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=nd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(iN(r)||sN(r))?r=parseFloat(r):!WB(r)&&il.test(n)&&(r=FN(e,n)),this.setBaseTarget(e,Ar(r)?r.get():r)),Ar(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=kw(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ar(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Ew.render(this.render)}}class hM extends UF{constructor(){super(...arguments),this.KeyframeResolver=zB}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pM(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function GF(t){return window.getComputedStyle(t)}class qF extends hM{constructor(){super(...arguments),this.type="html",this.renderInstance=pM}readValueFromInstance(e,n){if(Nd.has(n))return this.projection?.isProjecting?_x(n):rB(e,n);{const r=GF(e),i=(dw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dM(e,n)}build(e,n,r){Iw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Nw(e,n,r)}}const gM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HF(t,e,n,r){pM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(gM.has(i)?i:Mw(i),e.attrs[i])}class $F extends hM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Nd.has(n)){const r=BN(n);return r&&r.default||0}return n=gM.has(n)?n:Mw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return iM(e,n,r)}build(e,n,r){eM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){HF(e,n,r,i)}mount(e){this.isSVGTag=nM(e.tagName),super.mount(e)}}const YF=(t,e)=>Rw(t)?new $F(e):new qF(e,{allowProjection:t!==q.Fragment});function Wu(t,e,n){const r=t.getProps();return kw(r,e,n!==void 0?n:r.custom,t)}const kx=t=>Array.isArray(t);function KF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,nd(n))}function XF(t){return kx(t)?t[t.length-1]||0:t}function Pw(t,e){const n=Wu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=XF(a[o]);KF(t,o,c)}}function WF(t){return!!(Ar(t)&&t.add)}function Nx(t,e){const n=t.getValue("willChange");if(WF(n))return n.add(e);if(!n&&zs.WillChange){const r=new zs.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function mM(t){return t.props[aM]}const QF=t=>t!==null;function ZF(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(QF),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const JF={type:"spring",stiffness:500,damping:25,restSpeed:10},e8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),t8={type:"keyframes",duration:.8},n8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r8=(t,{keyframes:e})=>e.length>2?t8:Nd.has(t)?t.startsWith("scale")?e8(e[1]):JF:n8;function i8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Ow=(t,e,n,r={},i,a)=>o=>{const c=_w(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ua(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};i8(c)||Object.assign(h,r8(t,h)),h.duration&&(h.duration=Ua(h.duration)),h.repeatDelay&&(h.repeatDelay=Ua(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Ax(h),h.delay===0&&(p=!0)),(zs.instantAnimations||zs.skipAnimations)&&(p=!0,Ax(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,p&&!a&&e.get()!==void 0){const m=ZF(h.keyframes,c);if(m!==void 0){on.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new bw(h):new AB(h)};function a8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function vM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const p=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||d&&a8(d,h))continue;const b={delay:n,..._w(a||{},h)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===_&&!b.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const A=mM(t);if(A){const D=window.MotionHandoffAnimation(A,h,on);D!==null&&(b.startTime=D,E=!0)}}Nx(t,h),p.start(Ow(h,p,m,t.shouldReduceMotion&&jN.has(h)?{type:!1}:b,t,E));const S=p.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{on.update(()=>{o&&Pw(t,o)})}),u}function yM(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function Mx(t,e,n={}){const r=Wu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(vM(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return s8(t,e,u,d,h,p,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function s8(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Mx(u,e,{...o,delay:n+(typeof r=="function"?0:r)+yM(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function bM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Mx(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Mx(t,e,n);else{const i=typeof e=="function"?Wu(t,e,n.custom):e;r=Promise.all(vM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function xM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const o8=Cw.length;function _M(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_M(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<o8;n++){const r=Cw[n],i=t.props[r];(Bh(i)||i===!1)&&(e[r]=i)}return e}const l8=[...Aw].reverse(),c8=Aw.length;function u8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bM(t,n,r)))}function d8(t){let e=u8(t),n=QI(),r=!0;const i=u=>(d,h)=>{const p=Wu(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:b,..._}=p;d={...d,..._,...b}}return d};function a(u){e=u(t)}function o(u){const{props:d}=t,h=_M(t.parent)||{},p=[],m=new Set;let b={},_=1/0;for(let S=0;S<c8;S++){const A=l8[S],D=n[A],R=d[A]!==void 0?d[A]:h[A],P=Bh(R),z=A===u?D.isActive:null;z===!1&&(_=S);let M=R===h[A]&&R!==d[A]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),D.protectedKeys={...b},!D.isActive&&z===null||!R&&!D.prevProp||y0(R)||typeof R=="boolean")continue;const T=f8(D.prevProp,R);let C=T||A===u&&D.isActive&&!M&&P||S>_&&P,k=!1;const O=Array.isArray(R)?R:[R];let L=O.reduce(i(A),{});z===!1&&(L={});const{prevResolvedValues:F={}}=D,j={...F,...L},X=Y=>{C=!0,m.has(Y)&&(k=!0,m.delete(Y)),D.needsAnimating[Y]=!0;const te=t.getValue(Y);te&&(te.liveStyle=!1)};for(const Y in j){const te=L[Y],ce=F[Y];if(b.hasOwnProperty(Y))continue;let pe=!1;kx(te)&&kx(ce)?pe=!xM(te,ce):pe=te!==ce,pe?te!=null?X(Y):m.add(Y):te!==void 0&&m.has(Y)?X(Y):D.protectedKeys[Y]=!0}D.prevProp=R,D.prevResolvedValues=L,D.isActive&&(b={...b,...L}),r&&t.blockInitialAnimation&&(C=!1);const $=M&&T;C&&(!$||k)&&p.push(...O.map(Y=>{const te={type:A};if(typeof Y=="string"&&r&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:ce}=t,pe=Wu(ce,Y);if(ce.enteringChildren&&pe){const{delayChildren:B}=pe.transition||{};te.delay=yM(ce.enteringChildren,t,B)}}return{animation:Y,options:te}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const A=Wu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);A&&A.transition&&(S.transition=A.transition)}m.forEach(A=>{const D=t.getBaseTarget(A),R=t.getValue(A);R&&(R.liveStyle=!0),S[A]=D??null}),p.push({animation:S})}let E=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(p):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=QI()}}}function f8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xM(e,t):!1}function Gl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function QI(){return{animate:Gl(!0),whileInView:Gl(),whileHover:Gl(),whileTap:Gl(),whileDrag:Gl(),whileFocus:Gl(),exit:Gl()}}class hl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class h8 extends hl{constructor(e){super(e),e.animationState||(e.animationState=d8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();y0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let p8=0;class g8 extends hl{constructor(){super(...arguments),this.id=p8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const m8={animation:{Feature:h8},exit:{Feature:g8}};function Uh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function xp(t){return{point:{x:t.pageX,y:t.pageY}}}const v8=t=>e=>Sw(e)&&t(e,xp(e));function hh(t,e,n,r){return Uh(t,e,v8(n),r)}const wM=1e-4,y8=1-wM,b8=1+wM,EM=.01,x8=0-EM,_8=0+EM;function jr(t){return t.max-t.min}function w8(t,e,n){return Math.abs(t-e)<=n}function ZI(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=jr(n)/jr(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=y8&&t.scale<=b8||isNaN(t.scale))&&(t.scale=1),(t.translate>=x8&&t.translate<=_8||isNaN(t.translate))&&(t.translate=0)}function ph(t,e,n,r){ZI(t.x,e.x,n.x,r?r.originX:void 0),ZI(t.y,e.y,n.y,r?r.originY:void 0)}function JI(t,e,n){t.min=n.min+e.min,t.max=t.min+jr(e)}function E8(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function e2(t,e,n){t.min=e.min-n.min,t.max=t.min+jr(e)}function gh(t,e,n){e2(t.x,e.x,n.x),e2(t.y,e.y,n.y)}function ji(t){return[t("x"),t("y")]}const SM=({current:t})=>t?t.ownerDocument.defaultView:null,t2=(t,e)=>Math.abs(t-e);function S8(t,e){const n=t2(t.x,e.x),r=t2(t.y,e.y);return Math.sqrt(n**2+r**2)}class TM{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=T1(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=S8(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:E}=m,{timestamp:S}=pr;this.history.push({...E,timestamp:S});const{onStart:A,onMove:D}=this.handlers;b||(A&&A(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=S1(b,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=T1(m.type==="pointercancel"?this.lastMoveEventInfo:S1(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,A),E&&E(m,A)},!Sw(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=xp(e),u=S1(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=pr;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,T1(u,this.history)),this.removeListeners=vp(hh(this.contextWindow,"pointermove",this.handlePointerMove),hh(this.contextWindow,"pointerup",this.handlePointerUp),hh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rl(this.updatePoint)}}function S1(t,e){return e?{point:e(t.point)}:t}function n2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function T1({point:t},e){return{point:t,delta:n2(t,AM(e)),offset:n2(t,T8(e)),velocity:A8(e,.1)}}function T8(t){return t[0]}function AM(t){return t[t.length-1]}function A8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=AM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ua(e)));)n--;if(!r)return{x:0,y:0};const a=Bi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function C8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function r2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I8(t,{top:e,left:n,bottom:r,right:i}){return{x:r2(t.x,n,i),y:r2(t.y,e,r)}}function i2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function D8(t,e){return{x:i2(t.x,e.x),y:i2(t.y,e.y)}}function R8(t,e){let n=.5;const r=jr(t),i=jr(e);return i>r?n=Vh(e.min,e.max-r,t.min):r>i&&(n=Vh(t.min,t.max-i,e.min)),js(0,1,n)}function k8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Px=.35;function N8(t=Px){return t===!1?t=0:t===!0&&(t=Px),{x:a2(t,"left","right"),y:a2(t,"top","bottom")}}function a2(t,e,n){return{min:s2(t,e),max:s2(t,n)}}function s2(t,e){return typeof t=="number"?t:t[e]||0}const M8=new WeakMap;class P8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xp(p).point)},o=(p,m)=>{const{drag:b,dragPropagation:_,onDragStart:E}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UB(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ji(A=>{let D=this.getAxisMotionValue(A).get()||0;if(Ga.test(D)){const{projection:R}=this.visualElement;if(R&&R.layout){const P=R.layout.layoutBox[A];P&&(D=jr(P)*(parseFloat(D)/100))}}this.originPoint[A]=D}),E&&on.postRender(()=>E(p,m)),Nx(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:E,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:A}=m;if(_&&this.currentDirection===null){this.currentDirection=O8(A),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,A),this.updateAxis("y",m.point,A),this.visualElement.render(),S&&S(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ji(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new TM(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:SM(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&on.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!_m(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=C8(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Lu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=I8(r.layoutBox,e):this.constraints=!1,this.elastic=N8(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ji(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=k8(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Lu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=zF(r,i.root,this.visualElement.getTransformPagePoint());let o=D8(i.layout.layoutBox,a);if(n){const c=n(OF(o));this.hasMutatedConstraints=!!c,c&&(o=lM(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=ji(h=>{if(!_m(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Nx(this.visualElement,e),r.start(Ow(e,r,0,n,this.visualElement,!1))}stopAnimation(){ji(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ji(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ji(n=>{const{drag:r}=this.getProps();if(!_m(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-fn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Lu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ji(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=R8({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ji(o=>{if(!_m(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(fn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;M8.set(this.visualElement,this);const e=this.visualElement.current,n=hh(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Lu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(r);const o=Uh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ji(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Px,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function _m(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function O8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class V8 extends hl{constructor(e){super(e),this.removeGroupControls=Ui,this.removeListeners=Ui,this.controls=new P8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ui}unmount(){this.removeGroupControls(),this.removeListeners()}}const o2=t=>(e,n)=>{t&&on.postRender(()=>t(e,n))};class j8 extends hl{constructor(){super(...arguments),this.removePointerDownListener=Ui}onPointerDown(e){this.session=new TM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:o2(e),onStart:o2(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&on.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=hh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function l2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const n=l2(t,e.target.x),r=l2(t,e.target.y);return`${n}% ${r}%`}},z8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=il.parse(t);if(i.length>5)return r;const a=il.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=fn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let A1=!1;class L8 extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;cF(B8),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),A1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Qm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,A1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||on.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ew.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;A1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CM(t){const[e,n]=KN(),r=q.useContext(tw);return x.jsx(L8,{...t,layoutGroup:r,switchLayoutGroup:q.useContext(sM),isPresent:e,safeToRemove:n})}const B8={borderRadius:{...Yf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yf,borderTopRightRadius:Yf,borderBottomLeftRadius:Yf,borderBottomRightRadius:Yf,boxShadow:z8};function F8(t,e,n){const r=Ar(t)?t:nd(t);return r.start(Ow("",r,e,n)),r.animation}const U8=(t,e)=>t.depth-e.depth;class G8{constructor(){this.children=[],this.isDirty=!1}add(e){iw(this.children,e),this.isDirty=!0}remove(e){aw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U8),this.isDirty=!1,this.children.forEach(e)}}function q8(t,e){const n=ti.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(rl(r),t(a-e))};return on.setup(r,!0),()=>rl(r)}const IM=["TopLeft","TopRight","BottomLeft","BottomRight"],H8=IM.length,c2=t=>typeof t=="string"?parseFloat(t):t,u2=t=>typeof t=="number"||Ze.test(t);function $8(t,e,n,r,i,a){i?(t.opacity=fn(0,n.opacity??1,Y8(r)),t.opacityExit=fn(e.opacity??1,0,K8(r))):a&&(t.opacity=fn(e.opacity??1,n.opacity??1,r));for(let o=0;o<H8;o++){const c=`border${IM[o]}Radius`;let u=d2(e,c),d=d2(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||u2(u)===u2(d)?(t[c]=Math.max(fn(c2(u),c2(d),r),0),(Ga.test(d)||Ga.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function d2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Y8=DM(0,.5,pN),K8=DM(.5,.95,Ui);function DM(t,e,n){return r=>r<t?0:r>e?1:n(Vh(t,e,r))}function f2(t,e){t.min=e.min,t.max=e.max}function Oi(t,e){f2(t.x,e.x),f2(t.y,e.y)}function h2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function p2(t,e,n,r,i){return t-=e,t=Sv(t,1/n,r),i!==void 0&&(t=Sv(t,1/i,r)),t}function X8(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ga.test(e)&&(e=parseFloat(e),e=fn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=fn(a.min,a.max,r);t===a&&(c-=e),t.min=p2(t.min,e,n,c,i),t.max=p2(t.max,e,n,c,i)}function g2(t,e,[n,r,i],a,o){X8(t,e[n],e[r],e[i],e.scale,a,o)}const W8=["x","scaleX","originX"],Q8=["y","scaleY","originY"];function m2(t,e,n,r){g2(t.x,e,W8,n?n.x:void 0,r?r.x:void 0),g2(t.y,e,Q8,n?n.y:void 0,r?r.y:void 0)}function v2(t){return t.translate===0&&t.scale===1}function RM(t){return v2(t.x)&&v2(t.y)}function y2(t,e){return t.min===e.min&&t.max===e.max}function Z8(t,e){return y2(t.x,e.x)&&y2(t.y,e.y)}function b2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kM(t,e){return b2(t.x,e.x)&&b2(t.y,e.y)}function x2(t){return jr(t.x)/jr(t.y)}function _2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class J8{constructor(){this.members=[]}add(e){iw(this.members,e),e.scheduleRender()}remove(e){if(aw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eU(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:b,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const C1=["","X","Y","Z"],tU=1e3;let nU=0;function I1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function NM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=mM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&NM(r)}function MM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=nU++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aU),this.nodes.forEach(cU),this.nodes.forEach(uU),this.nodes.forEach(sU)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new G8)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lw),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YN(o)&&!KB(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;on.read(()=>{p=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,h&&h(),h=q8(m,250),Qm.hasAnimatedSinceResize&&(Qm.hasAnimatedSinceResize=!1,this.nodes.forEach(S2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||gU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=d.getProps(),A=!this.targetLayout||!kM(this.targetLayout,b),D=!p&&m;if(this.options.layoutRoot||this.resumeFrom||D||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={..._w(_,"layout"),onPlay:E,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(h,D)}else p||S2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(E2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lU),this.nodes.forEach(rU),this.nodes.forEach(iU)):this.nodes.forEach(E2),this.clearAllSnapshots();const c=ti.now();pr.delta=js(0,1e3/60,c-pr.timestamp),pr.timestamp=c,pr.isProcessing=!0,m1.update.process(pr),m1.preRender.process(pr),m1.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ew.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(oU),this.sharedNodes.forEach(fU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jr(this.snapshot.measuredBox.x)&&!jr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RM(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Hl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),mU(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Cn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vU))){const{scroll:d}=this.root;d&&(Bu(c.x,d.offset.x),Bu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=Cn();if(Oi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Oi(c,o),Bu(c.x,h.offset.x),Bu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=Cn();Oi(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Fu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Hl(h.latestValues)&&Fu(u,h.latestValues)}return Hl(this.latestValues)&&Fu(u,this.latestValues),u}removeTransform(o){const c=Cn();Oi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Hl(d.latestValues))continue;Ix(d.latestValues)&&d.updateSnapshot();const h=Cn(),p=d.measurePageBox();Oi(h,p),m2(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Hl(this.latestValues)&&m2(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),gh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),E8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oi(this.target,this.layout.layoutBox),uM(this.target,this.targetDelta)):Oi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),gh(this.relativeTargetOrigin,this.target,m.target),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ix(this.parent.latestValues)||cM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Oi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;jF(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Cn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(h2(this.prevProjectionDelta.x,this.projectionDelta.x),h2(this.prevProjectionDelta.y,this.projectionDelta.y)),ph(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!_2(this.projectionDelta.x,this.prevProjectionDelta.x)||!_2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uu(),this.projectionDelta=Uu(),this.projectionDeltaWithTransform=Uu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=Uu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=Cn(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=b!==_,S=this.getStack(),A=!S||S.members.length<=1,D=!!(E&&!A&&this.options.crossfade===!0&&!this.path.some(pU));this.animationProgress=0;let R;this.mixTargetDelta=P=>{const z=P/1e3;T2(p.x,o.x,z),T2(p.y,o.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hU(this.relativeTarget,this.relativeTargetOrigin,m,z),R&&Z8(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Cn()),Oi(R,this.relativeTarget)),E&&(this.animationValues=h,$8(h,d,this.latestValues,z,D,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(rl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{Qm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nd(0)),this.currentAnimation=F8(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&PM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Cn();const p=jr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=jr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Oi(c,u),Fu(c,h),ph(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new J8),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&I1("z",o,d,this.animationValues);for(let h=0;h<C1.length;h++)I1(`rotate${C1[h]}`,o,d,this.animationValues),I1(`skew${C1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wm(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wm(c?.pointerEvents)||""),this.hasProjected&&!Hl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=eU(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Fh){if(h[_]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:A}=Fh[_],D=p==="none"?h[_]:E(h[_],d);if(S){const R=S.length;for(let P=0;P<R;P++)o[S[P]]=D}else A?this.options.visualElement.renderState.vars[_]=D:o[_]=D}this.options.layoutId&&(o.pointerEvents=d===this?Wm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(w2),this.root.sharedNodes.clear()}}}function rU(t){t.updateLayout()}function iU(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?ji(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=jr(p);p.min=n[h].min,p.max=p.min+m}):PM(i,e.layoutBox,n)&&ji(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=jr(n[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=Uu();ph(o,n,e.layoutBox);const c=Uu();a?ph(c,t.applyTransform(r,!0),e.measuredBox):ph(c,n,e.layoutBox);const u=!RM(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const b=Cn();gh(b,e.layoutBox,p.layoutBox);const _=Cn();gh(_,n,m.layoutBox),kM(b,_)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function aU(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function sU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function oU(t){t.clearSnapshot()}function w2(t){t.clearMeasurements()}function E2(t){t.isLayoutDirty=!1}function lU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function S2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cU(t){t.resolveTargetDelta()}function uU(t){t.calcProjection()}function dU(t){t.resetSkewAndRotation()}function fU(t){t.removeLeadSnapshot()}function T2(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function A2(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function hU(t,e,n,r){A2(t.x,e.x,n.x,r),A2(t.y,e.y,n.y,r)}function pU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gU={duration:.45,ease:[.4,0,.1,1]},C2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),I2=C2("applewebkit/")&&!C2("chrome/")?Math.round:Ui;function D2(t){t.min=I2(t.min),t.max=I2(t.max)}function mU(t){D2(t.x),D2(t.y)}function PM(t,e,n){return t==="position"||t==="preserve-aspect"&&!w8(x2(e),x2(n),.2)}function vU(t){return t!==t.root&&t.scroll?.wasRoot}const yU=MM({attachResizeListener:(t,e)=>Uh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),D1={current:void 0},OM=MM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!D1.current){const t=new yU({});t.mount(window),t.setOptions({layoutScroll:!0}),D1.current=t}return D1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bU={pan:{Feature:j8},drag:{Feature:V8,ProjectionNode:OM,MeasureLayout:CM}};function R2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&on.postRender(()=>a(e,xp(e)))}class xU extends hl{mount(){const{current:e}=this.node;e&&(this.unmount=GB(e,(n,r)=>(R2(this.node,r,"Start"),i=>R2(this.node,i,"End"))))}unmount(){}}class _U extends hl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vp(Uh(this.node.current,"focus",()=>this.onFocus()),Uh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function k2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&on.postRender(()=>a(e,xp(e)))}class wU extends hl{mount(){const{current:e}=this.node;e&&(this.unmount=YB(e,(n,r)=>(k2(this.node,r,"Start"),(i,{success:a})=>k2(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ox=new WeakMap,R1=new WeakMap,EU=t=>{const e=Ox.get(t.target);e&&e(t)},SU=t=>{t.forEach(EU)};function TU({root:t,...e}){const n=t||document;R1.has(n)||R1.set(n,{});const r=R1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(SU,{root:t,...e})),r[i]}function AU(t,e,n){const r=TU(e);return Ox.set(t,n),r.observe(t),()=>{Ox.delete(t),r.unobserve(t)}}const CU={some:0,all:1};class IU extends hl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CU[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return AU(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DU(e,n))&&this.startObserver()}unmount(){}}function DU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const RU={inView:{Feature:IU},tap:{Feature:wU},focus:{Feature:_U},hover:{Feature:xU}},kU={layout:{ProjectionNode:OM,MeasureLayout:CM}},NU={...m8,...RU,...bU,...kU},Md=PF(NU,YF);function MU(t){t.values.forEach(e=>e.stop())}function Vx(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&Pw(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Vx(a,e)})})}function PU(t,e){if(Array.isArray(e))return Vx(t,e);if(typeof e=="string")return Vx(t,[e]);Pw(t,e)}function OU(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(bM(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{PU(r,n)})},stop(){t.forEach(n=>{MU(n)})},mount(){return()=>{e.stop()}}};return e}function VU(){const t=g0(OU);return rw(t.mount,[]),t}const jU=VU;function zU(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function LU(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Ns(t,e){return function(n){n&&(t[e]=n)}}function VM(t,e,n){return function(r){r&&(t[e][n]=r)}}function N2(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function BU(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var FU="function",UU="object",GU="string",qU="number",Vw="undefined",jM=typeof window!==Vw,HU=typeof document!==Vw&&document,$U=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Fn=1e-7,wm={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function YU(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Tv(t,e,n,r){return(t*r+e*n)/(n+r)}function x0(t){return typeof t===Vw}function da(t){return t&&typeof t===UU}function Gn(t){return Array.isArray(t)}function ri(t){return typeof t===GU}function id(t){return typeof t===qU}function jw(t){return typeof t===FU}function KU(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function zM(t,e,n,r,i){var a=zw(t,e,n);return a?n:XU(t,e,n+1,r,i)}function zw(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function XU(t,e,n,r,i){for(var a=function(d){var h=e[d].trim();if(h===t.close&&!zw(t,e,d))return{value:d};var p=d,m=ii(i,function(b){var _=b.open;return _===h});if(m&&(p=zM(m,e,d,r,i)),p===-1)return o=d,"break";d=p,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Lw(t,e){var n=ri(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?$U:d,p=h.map(function(T){var C=T.open,k=T.close;return C===k?C:C+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+p+"|\\s+)",b=new RegExp(m,"g"),_=t.split(b).filter(function(T){return T&&T!=="undefined"}),E=_.length,S=[],A=[];function D(){return A.length?(S.push(A.join("")),A=[],!0):!1}for(var R=function(T){var C=_[T].trim(),k=T,O=ii(h,function(j){var X=j.open;return X===C}),L=ii(h,function(j){var X=j.close;return X===C});if(O){if(k=zM(O,_,T,E,h),k!==-1&&u)return D()&&a||(S.push(_.slice(T,k+1).join("")),T=k,a)?(P=T,"break"):(P=T,"continue")}else if(L&&!zw(L,_,T)){var F=YU(h);return F.splice(h.indexOf(L),1),{value:Lw(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:F})}}else if(KU(C,i)&&!o)return D(),a?(P=T,"break"):(P=T,"continue");k===-1&&(k=E-1),A.push(_.slice(T,k+1).join("")),T=k,P=T},P,z=0;z<E;++z){var M=R(z);if(z=P,typeof M=="object")return M.value;if(M==="break")break}return A.length&&S.push(A.join("")),S}function al(t){return Lw(t,"")}function ac(t){return Lw(t,",")}function LM(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function _p(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function WU(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Zm(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Gh(){return Date.now?Date.now():new Date().getTime()}function Ls(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function ii(t,e,n){var r=Ls(t,e);return r>-1?t[r]:n}var BM=(function(){var t=Gh(),e=jM&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Gh(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),QU=(function(){var t=jM&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Bs(t){return Object.keys(t)}function ZU(t){var e=Bs(t);return e.map(function(n){return t[n]})}function Ht(t,e){var n=_p(t),r=n.value,i=n.unit;if(da(e)){var a=e[i];if(a){if(jw(a))return a(r);if(wm[i])return wm[i](r,a)}}else if(i==="%")return r*e/100;return wm[i]?wm[i](r):r}function jx(t,e,n){return Math.max(e,Math.min(t,n))}function M2(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[nt(e[0],Fn),nt(e[0]/r,Fn)],[nt(e[1]*r,Fn),nt(e[1],Fn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=nt(c,Fn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function FM(t,e,n,r){if(!r)return t.map(function(b,_){return jx(b,e[_],n[_])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=M2(t,e,!1,o),u=c[0],d=c[1],h=M2(t,n,!0,o),p=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>p||a>m)&&(i=p,a=m),[i,a]}function JU(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function zx(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function In(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function e7(t){return[0,1].map(function(e){return zx(t.map(function(n){return n[e]}))})}function P2(t){var e=e7(t),n=In(e,t[0]),r=In(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Ms(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function nt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function O2(t,e){return t.forEach(function(n,r){t[r]=nt(t[r],e)}),t}function t7(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function UM(t){return t.reduce(function(e,n){return e.concat(n)},[])}function GM(t,e){t.indexOf(e)===-1&&t.push(e)}function Wn(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function qM(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function HM(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function hr(t,e,n,r){t.addEventListener(e,n,r)}function Kn(t,e,n,r){t.removeEventListener(e,n,r)}function Pd(t){return t?.ownerDocument||HU}function Bw(t){return Pd(t).documentElement}function pl(t){return Pd(t).body}function Wo(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function $M(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Od(t){return da(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var n7=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),r7=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),i7=typeof Map=="function",a7=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function s7(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new a7;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var p=u.getIndex();return[h,p]})}var o7=(function(){function t(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=s7(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],p=d[1];if(c!==u)return i.push([h,p]),!0}),this.cachePureChanged=i},t})();function wp(t,e,n){var r=i7?Map:n?r7:n7,i=n||function(D){return D},a=[],o=[],c=[],u=t.map(i),d=e.map(i),h=new r,p=new r,m=[],b=[],_={},E=[],S=0,A=0;return u.forEach(function(D,R){h.set(D,R)}),d.forEach(function(D,R){p.set(D,R)}),u.forEach(function(D,R){var P=p.get(D);typeof P>"u"?(++A,o.push(R)):_[P]=A}),d.forEach(function(D,R){var P=h.get(D);typeof P>"u"?(a.push(R),++S):(c.push([P,R]),A=_[R]||0,m.push([P-A,R-S]),b.push(R===P),P!==R&&E.push([P,R]))}),o.reverse(),new o7(t,e,a,o,E,c,m,b)}var l7=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=wp(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Lx=function(t,e){return Lx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Lx(t,e)};function Ep(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Lx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ja=function(){return ja=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ja.apply(this,arguments)};function YM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function V2(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function j2(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function KM(t){var e=[];return t.forEach(function(n){e=e.concat(Gn(n)?KM(n):n)}),e}function k1(t,e){if(!e)return t;for(var n in e)x0(t[n])&&(t[n]=e[n]);return t}function Av(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function z2(t){var e=t.className,n=YM(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function L2(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function _0(t){if(!t)return null;var e=t.b;return Od(e)?e:_0(t.c)}function XM(t){var e=t.parentNode;e&&e.removeChild(t)}function WM(t){t.forEach(function(e){e()})}function c7(){return this.constructor(this.props,this.context)}var Fw=0,w0=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,d=ZU(r).filter(function(_){return _.$_req}),h=KM(d.map(function(_){return _.$_subs})),p=ii(h,function(_){return _.d===u});if(c.b&&!ri(i)&&!o&&!c.s(i.props,a)&&!p){var m=h.reduce(function(_,E){var S=E.d;return _[0]?_[0].d===S&&_.push(E):S>u&&_.push(E),_},[]);return m.forEach(function(_){Sp(_,_._ps,[_.o],n,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return ri(i)||(c.ps=i.props,c.ref=i.ref),Uw(this),c.r(n,r,c.b?b:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function QM(){return Object.__CROACT_CURRENT_INSTNACE__}function u7(){return Fw}function d7(t){Fw=t}function Uw(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Fw=0,t}var Gw=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=ja(ja({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=Sp(a.c,[a],[a.o],i,a._cs,ja(ja({},this.state),this.$_state),r);o&&(n&&i.push(n),WM(i),Uw(null))},t})(),ZM=(function(t){Ep(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Av(this.props,r)||Av(this.state,i)},e})(Gw);function JM(t){var e=function(n){e.current=n};return e.current=t,e}function f7(t){return t._fr=!0,t}function h7(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new Gw(e,n),a.constructor=t,t._fr?(r.fr=JM(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=c7),a.$_p=r,a}var p7=(function(t){Ep(e,t);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=t.call(this,r,i,a,o,c,u,k1(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(k1(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=k1(u.ps,u.t.defaultProps);var h=u.ps,p=!u.b,m=d.contextType,b=u.b,_=m?.get(u);u._cs=i,p?(b=h7(d,h,_,u),u.b=b):(b.props=h,b.context=_);var E=b.state;u._usefs=[],u._uefs=[];var S=b.render();((c=(o=S?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(S.props.children=u.ps.children);var A=ja(ja({},i),b.$_cs);Sp(u,u._ps,S?[S]:[],r,A),p?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,E)}),r.push(function(){u._usefs.forEach(function(D){D()}),p?u.md():u.ud(),u._defs=u._uefs.map(function(D){return D()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(w0);function g7(t,e,n){var r=qw(z2(t),z2(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function m7(t,e,n){var r=qw(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function qw(t,e){var n=Bs(t),r=Bs(e),i=wp(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=t[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],p=[t[h],e[h]];t[h]!==e[h]&&(c[h]=p)}),{added:a,removed:o,changed:c}}function v7(t,e,n){var r=n.style,i=qw(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=Zm(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=Zm(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var p=Zm(u,"-");r.removeProperty(p)}}function y7(t){return t.replace(/^on/g,"").toLowerCase()}var b7=(function(t){Ep(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=y7(r);i?(Kn(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,p;(p=(h=a.ps)[r])===null||p===void 0||p.call(h,d)},hr(c,u,o[r]))},n.s=function(r){return Av(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=_0(c.c),p=!1;c._svg||c.t==="svg"?p=!0:p=h&&h.ownerSVGElement,c._svg=p;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Pd(h);p?m=_.createElementNS("http://www.w3.org/2000/svg",b):m=_.createElement(b)}c.b=m}Sp(c,c._ps,d.children,r,i);var E=c.b,S=L2(a),A=S[0],D=S[1],R=L2(d),P=R[0],z=R[1];return g7(A,P,E),m7(D,z,c),v7(a.style||{},d.style||{},E),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Kn(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||XM(a)},e})(w0);function qh(t){if(!t||Od(t))return t;var e=t.$_p._ps;return e.length?qh(e[0].b):null}function eP(t){if(t){if(t.b&&Od(t.b))return t;var e=t._ps;return e.length?eP(e[0]):null}}function la(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=YM(i,["key","ref"]);return{type:t,key:a,ref:o,props:ja(ja({},c),{children:UM(n).filter(function(u){return u!=null&&u!==!1})})}}var tP=(function(t){Ep(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(w0),x7=(function(t){Ep(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=_0(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Pd(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){XM(this.b)},e})(w0);function _7(t,e,n){var r=n.map(function(u){return ri(u)?null:u.key}),i=j2(e.map(function(u){return u.k})),a=j2(r),o=wp(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],p=e.splice(d,1)[0];e.splice(h,0,p);var m=qh(p.b),b=qh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){e.splice(u,0,B2(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],p=e[d],m=ri(h)?"text_".concat(h):h.type;return m!==p.t?(p.un(),e.splice(d,1,B2(h,r[d],d,t)),!0):(p.i=d,!1)});return V2(V2([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function w7(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=qh(n[i].b);if(a)return a}return null}function B2(t,e,n,r){var i=r.d+1;if(ri(t)||id(t))return new x7("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?b7:p7;return new o(a,i,e,n,r,t.ref,t.props)}function Sp(t,e,n,r,i,a,o){var c=_7(t,e,n),u=t._hyd,d=e.filter(function(p,m){return p._hyd=u,p.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(p){var m=eP(p);m&&(m._sel=!0)}),t._hyd=null;var h=_0(t);return h&&c.reverse().forEach(function(p){var m=e[p],b=qh(m.b);if(b&&h!==b&&!b.parentNode){var _=w7(t,m);h.insertBefore(b,_)}}),d.length>0}function E7(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new tP(e));var a=[];return Sp(n,n._ps,t?[t]:[],a,r,void 0,void 0),WM(a),Uw(null),i||(e.__CROACT__=n),n}function F2(t,e,n){return!n&&t&&(n=new tP(e.parentElement),n._hyd=[e],n._sel=!0),E7(t,e,n),n}function nP(t){var e=QM(),n=e._hs||(e._hs=[]),r=u7(),i=n[r];if(d7(r+1),i){if(!Av(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function S7(t,e){var n=nP({func:t,deps:e});return n.value}function T7(t){return S7(function(){return JM(t)},[])}function rP(t,e,n){var r=QM(),i=nP({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function A7(t,e,n){rP(function(){t?.(e())},n,!0)}function Hw(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function iP(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function aP(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function $w(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function C7(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function I7(t,e){var n=$w("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Bx(t){return t.replace(/_/g,".")}function th(t,e){var n=null,r="-1";return Hw(t,function(i){var a=$w("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=I7(i.versionTest.toLowerCase(),e)||r),r=Bx(r),!0)}),{preset:n,version:r}}function Em(t,e){var n={brand:"",version:"-1"};return Hw(t,function(r){var i=sP(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function sP(t,e){return iP(t,function(n){var r=n.brand;return $w(""+e.test,r.toLowerCase())})}var oP=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],lP=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Fx=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],cP=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],uP=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function dP(t){return!!th(cP,t).preset}function D7(t){var e=aP(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:dP(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=th(oP,e),o=a.preset,c=a.version,u=th(uP,e),d=u.preset,h=u.version,p=th(lP,e);if(r.chromium=!!p.preset,r.chromiumVersion=p.version,!r.chromium){var m=th(Fx,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function R7(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Em(cP,n).brand||dP(aP())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Hw(Fx,function(m){return sP(n,m)});var u=Em(lP,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=Em(Fx,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=iP(uP,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var p=Em(oP,n);o.name=p.brand||o.name,o.version=p.brand&&t?t.uaFullVersion:p.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=Bx(c.version),o.version=Bx(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function k7(t){return C7()?R7():D7(t)}function N7(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function M7(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],d=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=d}}function P7(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function fP(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Wa(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=tn(e),i=0;i<e;++i){var a=e*i+i;if(!nt(n[a],Fn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){M7(n,r,i,o,e);break}}if(!nt(n[a],Fn))return[];P7(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=n[u];!nt(d,Fn)||i===o||N7(n,r,c,i,e,-d)}}return r}function O7(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function hP(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function V7(t,e){for(var n=tn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function mc(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function fa(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=tn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Cv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=tn(t);return e.forEach(function(i){r=$t(r,i,t)}),r}function $t(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function Tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function qe(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function j7(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function pP(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Dr(t,e,n){n===void 0&&(n=e.length);var r=$t(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function z7(t,e){return $t(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function L7(t,e){return $t(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function B7(t,e){return $t(t,Ap(e,4))}function Sm(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return $t(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function Tp(t,e){return Dr(Ap(e,3),mc(t,3))}function N1(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return $t(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function U2(t,e){return $t(t,e,4)}function Ap(t,e){var n=Math.cos(t),r=Math.sin(t),i=tn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function tn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Yw(t,e){for(var n=tn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function vc(t,e){for(var n=tn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Kw(t,e,n,r,i,a,o,c){var u=t[0],d=t[1],h=e[0],p=e[1],m=n[0],b=n[1],_=r[0],E=r[1],S=i[0],A=i[1],D=a[0],R=a[1],P=o[0],z=o[1],M=c[0],T=c[1],C=[u,0,h,0,m,0,_,0,d,0,p,0,b,0,E,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,p,0,b,0,E,0,1,0,1,0,1,0,1,-S*u,-A*u,-D*h,-R*h,-P*m,-z*m,-M*_,-T*_,-S*d,-A*d,-D*p,-R*p,-P*b,-z*b,-M*E,-T*E],k=Wa(C,8);if(!k.length)return[];var O=$t(k,[S,A,D,R,P,z,M,T],8);return O[8]=1,fa(O7(O),3,4)}var mh=function(){return mh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mh.apply(this,arguments)};function F7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Hh(t,e){return e===void 0&&(e=0),ku(ad(t,e))}function U7(t,e){var n=Dr(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function ku(t){var e=F7();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function ad(t,e){e===void 0&&(e=0);var n=Gn(t)?t:al(t);return n.map(function(r){var i=LM(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=da(e)?mh(mh({},e),{"o%":e["%"]}):{"%":e,"o%":e},p=ac(o).map(function(j,X){return X===0&&"x%"in h?h["%"]=e["x%"]:X===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Ht(j,h)}),m=p[0],b=p[1],_=b===void 0?0:b,E=p[2],S=E===void 0?0:E;c=N1,d=[m,_,S]}else if(a==="translateY"){var A=da(e)?mh({"%":e["y%"]},e):{"%":e},_=Ht(o,A);c=N1,d=[0,_,0]}else if(a==="translateZ"){var S=parseFloat(o);c=N1,d=[0,0,S]}else if(a==="scale"||a==="scale3d"){var D=ac(o).map(function(j){return parseFloat(j)}),R=D[0],P=D[1],z=P===void 0?R:P,M=D[2],T=M===void 0?1:M;c=Sm,d=[R,z,T]}else if(a==="scaleX"){var R=parseFloat(o);c=Sm,d=[R,1,1]}else if(a==="scaleY"){var z=parseFloat(o);c=Sm,d=[1,z,1]}else if(a==="scaleZ"){var T=parseFloat(o);c=Sm,d=[1,1,T]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=_p(o),k=C.unit,O=C.value,L=k==="rad"?O:O*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=B7):a==="rotateX"?c=z7:a==="rotateY"&&(c=L7),d=L}else if(a==="matrix3d")c=U2,d=ac(o).map(function(j){return parseFloat(j)});else if(a==="matrix"){var F=ac(o).map(function(j){return parseFloat(j)});c=U2,d=[F[0],F[1],0,0,F[2],F[3],0,0,0,0,1,0,F[4],F[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var Ux=function(t,e){return Ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ux(t,e)};function G7(t,e){Ux(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var gP=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),mP=(function(t){G7(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,gP)||this}return e})(l7);function q7(t,e){return wp(t,e,gP)}var Gx=function(){return Gx=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gx.apply(this,arguments)};function H7(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var E0=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(da(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(da(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Ls(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,H7(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(Gx({listener:r},i))},t})();var qx=function(t,e){return qx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},qx(t,e)};function $7(t,e){qx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Gu=function(){return Gu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gu.apply(this,arguments)};function Y7(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function G2(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Tm(t){if(t){if(ri(t))return document.querySelector(t)}else return null;if(jw(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var K7=(function(t){$7(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Tm(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,p=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(p[1]>h.top||o<p[1])&&(m[1]=-1):h.top+h.height<o+u&&(p[1]<h.top+h.height||o>p[1])&&(m[1]=1),h.left>a-u?(p[0]>h.left||a<p[0])&&(m[0]=-1):h.left+h.width<a+u&&(p[0]<h.left+h.width||a>p[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(Gu(Gu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,p=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],_=m[1]-o[1],E=c||[b?Math.abs(b)/b:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!b&&!_?!1:(this.emit("move",{offsetX:E[0]?b:0,offsetY:E[1]?_:0,inputEvent:h}),d&&p&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?Y7:o;return c({container:Tm(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,p=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Gh(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var E={container:Tm(o),direction:c,inputEvent:p};return(a=r.requestScroll)===null||a===void 0||a.call(r,E),this.emit("scroll",E),this._isWait=!1,d||this.checkScroll(Gu(Gu({},r),{prevScrollPos:_,direction:c,inputEvent:p}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?G2:i,o=Tm(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=G2(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(E0);function X7(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Jr(t){return nt(t,Fn)}function W7(t,e){return t.every(function(n,r){return Jr(n-e[r])===0})}function Q7(t,e){return!Jr(t[0]-e[0])&&!Jr(t[1]-e[1])}function vP(t){return t.length<3?0:Math.abs(JU(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function q2(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=yc(t),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,p=n/(d-c),m=r/(h-u);return t.map(function(b){return[i+(b[0]-c)*p,a+(b[1]-u)*m]})}function yc(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Hx(t,e,n){var r=t[0],i=t[1],a=yc(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=Iv(u[0],u[1]),h=$x(e),p=[];if(h.forEach(function(_){var E=Iv(_[0],_[1]),S=_[0];if(W7(d,E))p.push({pos:t,line:_,type:"line"});else{var A=yP(Xw(d,E),[u,_]);A.forEach(function(D){_.some(function(R){return Q7(R,D)})?p.push({pos:D,line:_,type:"point"}):Jr(S[1]-i)!==0&&p.push({pos:D,line:_,type:"intersection"})})}}),ii(p,function(_){return _[0]===r}))return!0;var m=0,b={};return p.forEach(function(_){var E=_.pos,S=_.type,A=_.line;if(!(E[0]>r))if(S==="intersection")++m;else{if(S==="line")return;if(S==="point"){var D=ii(A,function(z){return z[1]!==i}),R=b[E[0]],P=D[1]>i?1:-1;R?R!==P&&++m:b[E[0]]=P}}}),m%2===1}function Iv(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<Fn&&(o=0),Math.abs(c)<Fn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function Xw(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var p=-i/r,m=-c/o;return p!==m?[]:[[-1/0,p],[1/0,p]]}else if(d){var b=-i/n,_=-c/a;return b!==_?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var E=-i/r,S=-(o*E+c)/a;h=[[S,E]]}else if(a===0){var E=-c/o,S=-(r*E+i)/n;h=[[S,E]]}else if(r===0){var S=-i/n,E=-(a*S+c)/o;h=[[S,E]]}else if(o===0){var S=-c/a,E=-(n*S+i)/r;h=[[S,E]]}else{var S=(r*c-o*i)/(o*n-r*a),E=-(n*S+i)/r;h=[[S,E]]}return h.map(function(A){return[A[0],A[1]]})}function yP(t,e){var n=e.map(function(p){return[0,1].map(function(m){return[Math.min(p[0][m],p[1][m]),Math.max(p[0][m],p[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Jr(a-t[1][0])){if(!Jr(o-t[1][1])){var d=Math.max.apply(Math,n.map(function(p){return p[0][0]})),h=Math.min.apply(Math,n.map(function(p){return p[0][1]}));if(Jr(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(p){return p[1][0]})),u=Math.min.apply(Math,n.map(function(p){return p[1][1]}));if(Jr(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(p){var m=p[0],b=p[1];return n.every(function(_){return 0<=Jr(m-_[0][0])&&0<=Jr(_[0][1]-m)&&0<=Jr(b-_[1][0])&&0<=Jr(_[1][1]-b)})})),r.map(function(p){return[Jr(p[0]),Jr(p[1])]})}function $x(t){return X7(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Z7(t,e){var n=t.slice(),r=e.slice();P2(n)===-1&&n.reverse(),P2(r)===-1&&r.reverse();var i=$x(n),a=$x(r),o=i.map(function(h){return Iv(h[0],h[1])}),c=a.map(function(h){return Iv(h[0],h[1])}),u=[];o.forEach(function(h,p){var m=i[p],b=[];c.forEach(function(_,E){var S=Xw(h,_),A=yP(S,[m,a[E]]);b.push.apply(b,A.map(function(D){return{index1:p,index2:E,pos:D,type:"intersection"}}))}),b.sort(function(_,E){return Ms(m[0],_.pos)-Ms(m[0],E.pos)}),u.push.apply(u,b),Hx(m[1],r)&&u.push({index1:p,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,p){if(Hx(h[1],n)){var m=!1,b=Ls(u,function(_){var E=_.index2;return E===p?(m=!0,!1):!!m});b===-1&&(m=!1,b=Ls(u,function(_){var E=_.index1,S=_.index2;return E===-1&&S+1===p?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:p,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:p,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var p=h.pos,m=p[0]+"x"+p[1];return d[m]?!1:(d[m]=!0,!0)})}function J7(t,e){var n=Z7(t,e);return n.map(function(r){var i=r.pos;return i})}function eG(t,e){var n=J7(t,e);return vP(n)}var Yx=function(t,e){return Yx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Yx(t,e)};function tG(t,e){Yx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zn=function(){return zn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zn.apply(this,arguments)};function nG(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function M1(t){return nG([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function rG(t){return t.touches&&t.touches.length>=2}function Am(t){return t?t.touches?aG(t.touches):[bP(t)]:[]}function iG(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function H2(t,e,n){var r=n.length,i=vh(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=vh(e,r),h=d.clientX,p=d.clientY,m=vh(n,r),b=m.clientX,_=m.clientY,E=a-h,S=o-p,A=a-b,D=o-_;return{clientX:c,clientY:u,deltaX:E,deltaY:S,distX:A,distY:D}}function P1(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function aG(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(bP(t[r]));return n}function bP(t){return{clientX:t.clientX,clientY:t.clientY}}function vh(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var O1=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),M1(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),M1(e)-M1(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=H2(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=H2([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=vh(e,this.length),i=vh(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),P1(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),P1(e)/P1(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),$2=["textarea","input"],sG=(function(t){tG(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var E=i.options,S=E.container,A=E.pinchOutside,D=E.preventWheelClick,R=E.preventRightClick,P=E.preventDefault,z=E.checkInput,M=E.dragFocusedInput,T=E.preventClickEventOnDragStart,C=E.preventClickEventOnDrag,k=E.preventClickEventByCondition,O=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,D&&(m.which===2||m.button===1)||R&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var F=i._window.document.activeElement,j=m.target;if(j){var X=j.tagName.toLowerCase(),$=$2.indexOf(X)>-1,H=j.isContentEditable;if($||H){if(z||!M&&F===j)return!1;if(F&&(F===j||H&&F.isContentEditable&&F.contains(j)))if(M)j.blur();else return!1}else if((P||m.type==="touchstart")&&F){var Y=F.tagName.toLowerCase();(F.isContentEditable||$2.indexOf(Y)>-1)&&F.blur()}(T||C||k)&&hr(i._window,"click",i._onClick,!0)}i.clientStores=[new O1(Am(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Gh()-i.prevTime<200,i._isMouseEvent=iG(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var te=i._preventMouseEvent||i.emit("dragStart",zn(zn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));te===!1&&i.stop(),i._isMouseEvent&&i.flag&&P&&m.preventDefault()}if(!i.flag)return!1;var ce=0;if(L?(i._attchDragEvent(),O&&A&&(ce=setTimeout(function(){hr(S,"touchstart",i.onDragStart,{passive:!1})}))):O&&A&&Kn(S,"touchstart",i.onDragStart),i.flag&&rG(m)){if(clearTimeout(ce),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var E=Am(m),S=i.moveClients(E,m,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var A=i._preventMouseEvent||i.emit("drag",zn(zn({},S),{isScroll:!!b,inputEvent:m}));if(A===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,E)}i.getCurrentStore().getPosition(E,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,_=b.pinchOutside,E=b.container,S=b.preventClickEventOnDrag,A=b.preventClickEventOnDragStart,D=b.preventClickEventByCondition,R=i.isDrag;(S||A||D)&&requestAnimationFrame(function(){i._allowClickEvent()}),!D&&!A&&S&&!R&&i._allowClickEvent(),i._useTouch&&_&&Kn(E,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var P=m?.touches?Am(m):[],z=P.length;z===0||!i.options.keepDragging?i.flag=!1:i._addStore(new O1(P));var M=i._getPosition(),T=Gh(),C=!R&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=R||C?0:T,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",zn({data:i.data,datas:i.data,isDouble:C,isDrag:R,isClick:!R,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},M)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Kn(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=$M(o)?o:Wo(o),i.options=zn({checkInput:!1,container:o&&!("document"in o)?Wo(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){hr(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){hr(m,"mousedown",i.onDragStart),hr(m,"mousemove",i._passCallback)}),hr(u,"contextmenu",i._onContextMenu)),h&&hr(Wo(),"blur",i.onBlur),i._useTouch){var p={passive:!1};a.forEach(function(m){hr(m,"touchstart",i.onDragStart,p),hr(m,"touchmove",i._passCallback,p)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),zn(zn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Kn(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Kn(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Kn(a,"mousedown",n.onDragStart)}),Kn(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Kn(a,"touchstart",n.onDragStart)}),Kn(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new O1(Am(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",zn(zn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",zn(zn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",zn(zn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),zn(zn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var p=h.getPosition();return d.distX+=p.distX,d.distY+=p.distY,d},a),c=o.distX,u=o.distY;return zn(zn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(hr(r,"dragover",this.onDrag,i),hr(n,"dragend",this.onDragEnd)),this._useMouse&&(hr(r,"mousemove",this.onDrag),hr(n,"mouseup",this.onDragEnd)),this._useTouch&&(hr(r,"touchmove",this.onDrag,i),hr(n,"touchend",this.onDragEnd,i),hr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Kn(r,"dragover",this.onDrag),Kn(n,"dragend",this.onDragEnd)),this._useMouse&&(Kn(r,"mousemove",this.onDrag),Kn(n,"mouseup",this.onDragEnd)),this._useTouch&&(Kn(r,"touchstart",this.onDragStart),Kn(r,"touchmove",this.onDrag),Kn(n,"touchend",this.onDragEnd),Kn(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(E0);function oG(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var lG=oG;function cG(t){return lG(t).toString(36)}function uG(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function dG(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?ac(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function fG(t,e,n,r,i){var a=Pd(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=dG(t,e,n),(i||a.head||a.body).appendChild(o),o}function hG(t){var e="rCS"+cG(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=uG(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=fG(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Kx=function(){return Kx=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kx.apply(this,arguments)};function pG(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xP(t,e){var n=hG(e),r=n.className;return f7(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=pG(i,["className","cspNonce"]),d=T7();return A7(a,function(){return d.current},[]),rP(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),la(t,Kx({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var Xx=function(t,e){return Xx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Xx(t,e)};function Cp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Xx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Z=function(){return Z=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Z.apply(this,arguments)};function gG(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mG(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function vG(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Se(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Ip(t,e){return Z({events:[],props:[],name:t},e)}var yG=["n","w","s","e"],Ww=["n","w","s","e","nw","ne","sw","se"];function bG(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function xG(t){var e=bG(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Vd=k7(),_P=Vd.browser.webkit,wP=_P&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),EP=Vd.browser.name,SP=parseInt(Vd.browser.version,10),_G=EP==="chrome",wG=Vd.browser.chromium,EG=parseInt(Vd.browser.chromiumVersion,10)||0,SG=_G&&SP>=109||wG&&EG>=109,TG=EP==="firefox",AG=parseInt(Vd.browser.webkitVersion,10)>=612||SP>=15,Qw="moveable-",CG=Ww.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),IG=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(CG,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(xG(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(wP?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),DG=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Wx=1e-4,Fr=1e-7,Cm=1e-9,Qx=Math.pow(10,10),Y2=-Qx,RG={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Zw={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},TP={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},AP=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Dp(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return Z(Z({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var sd=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),Z(Z({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Qu(t,e,n,r){var i=t.length===16,a=i?4:3,o=Pc(t,n,r,a),c=J(o,4),u=J(c[0],2),d=u[0],h=u[1],p=J(c[1],2),m=p[0],b=p[1],_=J(c[2],2),E=_[0],S=_[1],A=J(c[3],2),D=A[0],R=A[1],P=J(dn(t,e,a),2),z=P[0],M=P[1],T=Math.min(d,m,E,D),C=Math.min(h,b,S,R),k=Math.max(d,m,E,D),O=Math.max(h,b,S,R);d=d-T||0,m=m-T||0,E=E-T||0,D=D-T||0,h=h-C||0,b=b-C||0,S=S-C||0,R=R-C||0,z=z-T||0,M=M-C||0;var L=t[0],F=t[a+1],j=Or(L*F);return{left:T,top:C,right:k,bottom:O,origin:[z,M],pos1:[d,h],pos2:[m,b],pos3:[E,S],pos4:[D,R],direction:j}}function CP(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,p=o.top,m=u?4:3,b=J(qe(cd(c,[n-h,r-p],m),d),2),_=b[0],E=b[1],S=J(is({datas:i,distX:_,distY:E}),2),A=S[0],D=S[1];return[A,D]}function Mc(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,p=r.targetMatrix,m=r.transformOrigin,b=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=p,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=Wa(i,b),n.inverseBeforeMatrix=Wa(a,b),n.absoluteOrigin=mc(Tt([c,u],d),b),n.startDragBeforeDist=Dr(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=Dr(n.inverseMatrix,n.absoluteOrigin,b)}function kG(t){return Qu(t.datas.beforeTransform,[50,50],100,100).direction}function S0(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=Ls(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):ii(u,function(b){return b.index===a&&b.functionName===n})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=rH(o,t.state,d),p=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,p.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Se(Se([],J(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function T0(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function NG(t){var e=t.datas,n=t.distX,r=t.distY,i=J(DP({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=IP(e,V7([a,o],4));return Dr(c,mc([0,0,0],4),4)}function IP(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?$t(c,e,4):$t(e,c,4),d=$t(Wa(n?a:r,4),u,4),h=$t(d,Wa(n?o:i,4),4);return h}function DP(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return qe(Dr(i,Tt(c,[n,r]),u),o)}function is(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,p=c?4:3;return qe(Dr(e?a:o,Tt(h,[r,i]),p),e?u:d)}function MG(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return qe(Dr(a,Tt(c,[r,i]),d),u)}function PG(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=_p(o),d=u.value,h=u.unit,p=c?i:r,m=c?n:e;if(o==="%"||isNaN(d)){var b=p?a[c]/p:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function RP(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function OG(t,e){return RP(e).map(function(n){return t[n]})}function V1(t,e){var n=(e+1)/2;return[Tv(t[0][0],t[1][0],n,1-n),Tv(t[0][1],t[1][1],n,1-n)]}function Qn(t,e){var n=V1([t[0],t[1]],e[0]),r=V1([t[2],t[3]],e[0]);return V1([n,r],e[1])}function VG(t,e,n,r,i,a){var o=Pc(e,n,r,i),c=Qn(o,a),u=t[0]-c[0],d=t[1]-c[1];return[u,d]}function Rp(t,e,n,r){return $t(t,bh(e,r,n),r)}function jG(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if(ri(n)){var d=e.beforeTransform,h=e.afterTransform;r?u=fa(Hh(n),4,c):u=fa($t($t(d,Hh([n]),4),h,4),4,c)}else u=n;return Rp(a,u,i,c)}function zG(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return Rp(r,$t(o||a,Yw(e,c),c),n,c)}function A0(t,e){var n=jd(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Gn(r)?r:al(r),Zx(t,e,i)},setTransformIndex:function(r){Zx(t,e,r)}}}function C0(t,e,n){var r=jd(e),i=r.startTransforms;Zx(t,e,Ls(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function Zx(t,e,n){var r=jd(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=ad([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function Jw(t,e){var n=jd(t);n.nextTransforms=al(e)}function jd(t){return t.originalDatas.beforeRenderable}function Dv(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Im(t){return(Dv(t)||[]).join(" ")}function Dm(t){return jd(t).nextStyle}function kP(t,e,n,r,i){Jw(i,e);var a=Pr.drag(t,Dp(i,t.state,n,r)),o=a?a.transform:e;return Z(Z({transform:e,drag:a},zr({transform:o},i)),{afterTransform:o})}function eE(t,e,n,r,i,a){var o=jG(t.state,i,e,a),c=FG(t,n,r,o);return c}function NP(t,e,n,r,i,a,o){var c=eE(t,e,n,i,a,o),u=t.state,d=u.left,h=u.top,p=t.props.groupable,m=p?d:0,b=p?h:0,_=qe(r,c);return qe(_,[m,b])}function LG(t,e,n,r,i,a,o){var c=NP(t,e,n,r,i,a,o);return c}function BG(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function FG(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return dn(r,d,u)}function UG(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return NP(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function GG(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,p=c.width,m=c.height,b=c.left,_=c.top,E=a.fixedDirection,S=a.nextTargetMatrix||c.targetMatrix,A=h?4:3,D=PG(i,e,n,p,m,u),R=o?b:0,P=o?_:0,z=Rp(d,S,D,A),M=VG(r,z,e,n,A,E);return qe(M,[R,P])}function qG(t,e){return Qn(Yi(t.state),e)}function HG(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function $G(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function YG(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function MP(t,e,n){for(var r=t,i=[],a=Bw(t)||pl(t),o=!n&&t===e||t===a,c=o,u=!1,d=3,h,p,m,b=!1,_=Yh(e,e,!0).offsetParent,E=1;r&&!c;){c=o;var S=ai(r),A=S("position"),D=rO(r),R=A==="fixed",P=YG(S),z=j7(qq(D)),M=void 0,T=!1,C=!1,k=0,O=0,L=0,F=0,j={hasTransform:!1,fixedContainer:null};R&&(b=!0,j=Xq(r),_=j.fixedContainer);var X=z.length;!u&&(X===16||P.length)&&(u=!0,d=4,i_(i),m&&(m=fa(m,3,4))),u&&X===9&&(z=fa(z,3,4));var $=Kq(r,t),H=$.tagName,Y=$.hasOffset,te=$.isSVG,ce=$.origin,pe=$.targetOrigin,B=$.offset,Q=J(B,2),K=Q[0],ne=Q[1];H==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:Wq(r,d)}),i.push({type:"offset",target:r,matrix:tn(d)}));var ue=parseFloat(S("zoom"))||1;if(R)M=j.fixedContainer,T=!0;else{var de=Yh(r,e,!1,!0,S),ge=de.offsetZoom;if(M=de.offsetParent,T=de.isEnd,C=de.isStatic,E*=ge,(de.isCustomElement||ge!==1)&&C)K-=M.offsetLeft,ne-=M.offsetTop;else if(TG||SG){var Te=de.parentSlotElement;if(Te){for(var De=M,Ye=0,we=0;De&&$G(De);)Ye+=De.offsetLeft,we+=De.offsetTop,De=De.offsetParent;K-=Ye,ne-=we}}}if(_P&&!AG&&Y&&!te&&C&&(A==="relative"||A==="static")&&(K-=M.offsetLeft,ne-=M.offsetTop,o=o||T),R)Y&&j.hasTransform&&(L=M.clientLeft,F=M.clientTop);else if(Y&&_!==M&&(k=M.clientLeft,O=M.clientTop),Y&&M===a){var Ie=iO(r,!1);K+=Ie[0],ne+=Ie[1]}if(i.push({type:"target",target:r,matrix:bh(z,d,ce)}),P.length&&(i.push({type:"offset",target:r,matrix:tn(d)}),i.push({type:"target",target:r,matrix:bh(Hh(P),d,ce)})),Y){var ut=r===t,je=ut?0:r.scrollLeft,$e=ut?0:r.scrollTop;i.push({type:"offset",target:r,matrix:vc([K-je+k-L,ne-$e+O-F],d)})}else i.push({type:"offset",target:r,origin:ce});if(ue!==1&&i.push({type:"zoom",target:r,matrix:bh(Yw([ue,ue],d),d,[0,0])}),m||(m=z),h||(h=ce),p||(p=pe),c||R)break;r=M,o=T,(!n||r===a)&&(c=o)}return m||(m=tn(d)),h||(h=[0,0]),p||(p=[0,0]),{zoom:E,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:p,is3d:u,hasFixed:b}}var Xl=null,Wl=null,qu=null;function od(t){t?(window.Map&&(Xl=new Map,Wl=new Map),qu=[]):(Xl=null,qu=null,Wl=null)}function KG(t){var e=Wl?.get(t);if(e)return e;var n=xh(t,!0);return Wl&&Wl.set(t,n),n}function XG(t,e){if(qu){var n=ii(qu,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=MP(t,e,!0);return qu&&qu.push([[t,e],r]),r}function ai(t){var e=Xl?.get(t);if(!e){var n=Wo(t).getComputedStyle(t);if(!Xl)return function(a){return n[a]};e={style:n,cached:{}},Xl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function ca(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},Z(Z({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function j1(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,p=ca(t,e.name,i),m=t.moveables,b=[],_=p.map(function(E,S){var A=m[S],D=A.state,R=D.gestos,P=E;if(c)P=new sd(o).dragStart(r,E),b.push(P);else{if(R[o]||(R[o]=h.childGestos[S]),!R[o])return;P=Dp(E,D,r,d,a,o),b.push(P)}var z=e[n](A,Z(Z({},P),{parentFlag:!0}));return u&&(R[o]=null),z});return c&&(h.childGestos=m.map(function(E){return E.state.gestos[o]})),{eventParams:_,childEvents:b}}function Ps(t,e,n,r,i,a){i===void 0&&(i=function(h,p){return p});var o=!!n.match(/End$/g),c=ca(t,e.name,r),u=t.moveables,d=c.map(function(h,p){var m=u[p],b=h;b=i(m,h);var _=e[n](m,Z(Z({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function Rv(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Yi(e.state),c=Qn(o,i),u=J(Dr(Ap(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function PP(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=bc(t.props,e).zoom,d=yh(o/Math.PI*180),h={},p=t.renderState;p.renderDirectionMap||(p.renderDirectionMap={});var m=p.renderDirectionMap;n.forEach(function(_){var E=_.dir;h[E]=!0});var b=Or(c);return n.map(function(_){var E=_.data,S=_.classNames,A=_.dir,D=Zw[A];if(!D||!h[A])return null;m[A]=!0;var R=(nt(d,15)+b*TP[A]+720)%180,P={};return Bs(E).forEach(function(z){P["data-".concat(z)]=E[z]}),r.createElement("div",Z({className:Le.apply(void 0,Se(["control","direction",A,e],J(S),!1)),"data-rotation":R,"data-direction":A},P,{key:"direction-".concat(A),style:Pv.apply(void 0,Se([o,u],J(D.map(function(z){return a[z]})),!1))}))})}function OP(t,e,n,r){var i=bc(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?Ww:o;return Se(Se([],J(c?LP(t,r,n,u):[]),!1),J(PP(t,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function $h(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=In(n,r),d=e?nt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Le.apply(void 0,Se(["line","direction",e?"edge":"",e],J(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:rh(n,r,i,u)})}function VP(t,e,n,r,i){var a=n===!0?yG:n;return a.map(function(o,c){var u=J(Zw[o],2),d=u[0],h=u[1];if(h!=null)return $h(t,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function jP(t){return function(e,n){var r=bc(e.props,t).edge;return r&&(r===!0||r.length)?Se(Se([],J(VP(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),J(WG(e,t,n)),!1):zP(e,t,n)}}function zP(t,e,n){return OP(t,Ww,e,n)}function WG(t,e,n){return OP(t,["nw","ne","sw","se"],e,n)}function LP(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=t.props.zoom,p=Or(u),m=c/Math.PI*180;return(r||Bs(d)).map(function(b){var _=Zw[b];if(!_)return null;var E=(nt(m,15)+p*TP[b]+720)%180,S=["around-control"];return n&&S.push("direction",n),e.createElement("div",{className:Le.apply(void 0,Se([],J(S),!1)),"data-rotation":E,"data-direction":b,key:"direction-around-".concat(b),style:Pv.apply(void 0,Se([c,h],J(_.map(function(A){return o[A]})),!1))})})}function tE(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,p=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,_={position:a,left:c,top:d,right:p,bottom:b};return{vertical:K2(_,e,!0),horizontal:K2(_,n,!1)}}function I0(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,p=u.right,m=u.bottom,b=e||t.props.bounds||{},_=b.position||"client",E=_==="css",S=b.left,A=S===void 0?-1/0:S,D=b.top,R=D===void 0?-1/0:D,P=b.right,z=P===void 0?E?-1/0:1/0:P,M=b.bottom,T=M===void 0?E?-1/0:1/0:M;return E&&(z=a+p-d-z,T=i+m-h-T),{left:A+d-o,right:z+d-o,top:R+h-c,bottom:T+h-c}}function QG(t,e,n){var r=I0(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=J(n,2),d=u[0],h=u[1],p=J(qe(n,e),2),m=p[0],b=p[1];xe(m)<Fr&&(m=0),xe(b)<Fr&&(b=0);var _=b>0,E=m>0,S={isBound:!1,offset:0,pos:0},A={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:S,horizontal:A};if(m===0)_?c<h&&(A.pos=c,A.offset=h-c):a>h&&(A.pos=a,A.offset=h-a);else if(b===0)E?o<d&&(S.pos=o,S.offset=d-o):i>d&&(S.pos=i,S.offset=d-i);else{var D=b/m,R=n[1]-D*d,P=0,z=0,M=!1;E&&o<=d?(P=D*o+R,z=o,M=!0):!E&&d<=i&&(P=D*i+R,z=i,M=!0),M&&(P<a||P>c)&&(M=!1),M||(_&&c<=h?(P=c,z=(P-R)/D,M=!0):!_&&h<=a&&(P=a,z=(P-R)/D,M=!0)),M&&(S.isBound=!0,S.pos=z,S.offset=d-z,A.isBound=!0,A.pos=P,A.offset=h-P)}return{vertical:S,horizontal:A}}function K2(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Se([],J(e),!1)),o=Math.max.apply(Math,Se([],J(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return xe(d.offset)-xe(u.offset)})}function X2(t,e,n){var r=n?t.map(function(i){return Tp(i,n)}):t;return r.some(function(i){return i[0]<e.left&&xe(i[0]-e.left)>.1||i[0]>e.right&&xe(i[0]-e.right)>.1||i[1]<e.top&&xe(i[1]-e.top)>.1||i[1]>e.bottom&&xe(i[1]-e.bottom)>.1})}function ZG(t,e,n){var r=$i(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return xe(a-t[n?0:1])-xe(o-t[n?0:1])}).map(function(a){return In([0,0],n?[a,e]:[e,a])})}function JG(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=I0(t),c=o.left,u=o.top,d=o.right,h=o.bottom,p=c-r[0],m=d-r[0],b=u-r[1],_=h-r[1],E={left:p,top:b,right:m,bottom:_};if(!X2(n,E,0))return[];var S=[];return[[p,0],[m,0],[b,1],[_,1]].forEach(function(A){var D=J(A,2),R=D[0],P=D[1];n.forEach(function(z){var M=In([0,0],z);S.push.apply(S,Se([],J(ZG(z,R,P).map(function(T){return a+T-M}).filter(function(T){return!X2(e,E,T)}).map(function(T){return nt(T*180/Math.PI,Fr)})),!1))})}),S}var eq=["left","right","center"],tq=["top","bottom","middle"],W2={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},sl={start:"left",end:"right",center:"center"},ol={start:"top",end:"bottom",center:"middle"};function Hu(){return{left:!1,top:!1,right:!1,bottom:!1}}function zd(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=t.state,p=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||p&&p.length||o&&o.length||c&&c.length)}function nE(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function nq(t,e){var n=nE(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function rE(t,e){var n=nq(t,e),r=tq.filter(function(a){return a in n}),i=eq.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function rq(t,e,n){var r=dn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function iq(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Fn&&(i=0),Math.abs(a)<Fn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return nt(d,Fn)})}var BP="snapRotationThreshold",FP="snapRotationDegrees",UP="snapHorizontalThreshold",GP="snapVerticalThreshold";function D0(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,d=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=dD(o,u[UP],5),p=dD(a,u[GP],5);return qP(t.state.guidelines,e,n,r,i,h,p,d)}function qP(t,e,n,r,i,a,o,c){return{vertical:Z2(t,"vertical",e,o*c[0],r),horizontal:Z2(t,"horizontal",n,a*c[1],i)}}function aq(t,e,n){var r=J(n,2),i=r[0],a=r[1],o=J(e,2),c=o[0],u=o[1],d=J(qe(n,e),2),h=d[0],p=d[1],m=p>0,b=h>0;h=Ov(h),p=Ov(p);var _={isSnap:!1,offset:0,pos:0},E={isSnap:!1,offset:0,pos:0};if(h===0&&p===0)return{vertical:_,horizontal:E};var S=D0(t,h?[i]:[],p?[a]:[],[],[],void 0,void 0),A=S.vertical,D=S.horizontal;A.posInfos.filter(function(H){var Y=H.pos;return b?Y>=c:Y<=c}),D.posInfos.filter(function(H){var Y=H.pos;return m?Y>=u:Y<=u}),A.isSnap=A.posInfos.length>0,D.isSnap=D.posInfos.length>0;var R=Jx(A),P=R.isSnap,z=R.guideline,M=Jx(D),T=M.isSnap,C=M.guideline,k=T?C.pos[1]:0,O=P?z.pos[0]:0;if(h===0)T&&(E.isSnap=!0,E.pos=C.pos[1],E.offset=a-E.pos);else if(p===0)P&&(_.isSnap=!0,_.pos=O,_.offset=i-O);else{var L=p/h,F=n[1]-L*i,j=0,X=0,$=!1;P?(X=O,j=L*X+F,$=!0):T&&(j=k,X=(j-F)/L,$=!0),$&&(_.isSnap=!0,_.pos=X,_.offset=i-X,E.isSnap=!0,E.pos=j,E.offset=a-j)}return{vertical:_,horizontal:E}}function $o(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function Q2(t,e,n,r){var i=rE(t.props.snapDirections,e),a=D0(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return $o(u)}),i.horizontalNames.map(function(u){return $o(u)}),n,r),o=$o(i.horizontalNames[a.horizontal.index]),c=$o(i.verticalNames[a.vertical.index]);return{vertical:Z(Z({},a.vertical),{direction:c}),horizontal:Z(Z({},a.horizontal),{direction:o})}}function Jx(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function Z2(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=n.map(function(p,m){var b=i[m]||"",_=t.map(function(E){var S=E.pos,A=p-S[u];return{offset:A,dist:xe(A),guideline:E,direction:b}}).filter(function(E){var S=E.guideline,A=E.dist,D=S.type;return!(D!==e||A>r)}).sort(function(E,S){return E.dist-S.dist});return{pos:p,index:m,guidelineInfos:_,direction:b}}).filter(function(p){return p.guidelineInfos.length>0}).sort(function(p,m){return p.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function sq(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,_){var E=_[b+1]||_[0];a.push(m),a.push([(m[0]+E[0])/2,(m[1]+E[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Se([],J(OG([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Qn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=D0(t,c,u,a.map(function(m){return $o(m[0])}),a.map(function(m){return $o(m[1])}),r,i),h=$o(a.map(function(m){return m[0]})[d.vertical.index]),p=$o(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:Z(Z({},d.vertical),{direction:h}),horizontal:Z(Z({},d.horizontal),{direction:p})}}function HP(t,e){var n=xe(t.offset),r=xe(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Fr?1:r<Fr?-1:n-r}function kv(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return HP({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function oq(t,e,n){var r=[];if(n)xe(e[0])!==1||xe(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=xe(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=xe(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function $P(t,e){var n=zx([e[0][0],e[1][0]]),r=zx([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function iE(t,e){var n=J(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];xe(a)<Fr&&(a=0),xe(o)<Fr&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var d=o/a;c=d*(t[0]-r[0])+r[1],u=t[1]}return c-u}function YP(t,e,n,r){return r===void 0&&(r=Fr),t.every(function(i){var a=iE(i,e),o=a<=0;return o===n||xe(a)<=r})}function J2(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function lq(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,p=c.height,m=[[u,d],[u,d+p]],b=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+p]],E=[[u,d+p],[u+h,d+p]];if(YP([[u,d],[u+h,d],[u,d+p],[u+h,d+p]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=Yo(n,o,b,i),A=Yo(n,o,E,i),D=Yo(n,o,m,a),R=Yo(n,o,_,a),P=S.isBound&&A.isBound,z=S.isBound||A.isBound,M=D.isBound&&R.isBound,T=D.isBound||R.isBound,C=ld(S.offset,A.offset),k=ld(D.offset,R.offset),O=[0,0],L=!1,F=!1;return xe(k)<xe(C)?(O=[C,0],L=z,F=P):(O=[0,k],L=T,F=M),{isAllBound:F,isVerticalBound:z,isHorizontalBound:T,isBound:L,offset:O}}function Yo(t,e,n,r,i,a){var o=J(e,2),c=o[0],u=o[1],d=t[0],h=n[0],p=n[1],m=Ov(p[1]-h[1]),b=Ov(p[0]-h[0]),_=u,E=c,S=-c/u;if(b){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(E){var P=(h[1]-d[1])/S+d[0];return J2(P,h[0],p[0],r,i)}else{var D=h[1]-d[1],R=xe(D)<=(i||0);return{isBound:R,offset:R?D:0}}}}else{if(a&&!E)return{isBound:!1,offset:0};if(_){var A=S*(h[0]-d[0])+d[1];return J2(A,h[1],p[1],r,i)}else{var D=h[0]-d[0],R=xe(D)<=(i||0);return{isBound:R,offset:R?D:0}}}return{isBound:!1,offset:0}}function KP(t,e,n){return e.map(function(r){var i=lq(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=is({datas:n,distX:o[0],distY:o[1]}).map(function(p,m){return p*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function cq(t,e,n){var r,i=aE(t,e,[0,0],!1).map(function(m){return Z(Z({},m),{multiple:m.multiple.map(function(b){return xe(b)*2})})}),a=KP(t,i,n),o=kv(a,0),c=kv(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,p=o.isHorizontalBound||c.isHorizontalBound;return(h||p)&&(r=J(MG({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:p,offset:d}}}function uq(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function aE(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=Pc(a,100,100,o?4:3),u=Qn(c,[0,0]);return uq(n,r).map(function(d){var h=J(d,3),p=h[0],m=h[1],b=h[2],_=[Qn(c,m),Qn(c,b)],E=iq(_),S=$P(u,_),A=S.vertical,D=S.horizontal,R=iE(u,_)<=0;return{multiple:p,centerSign:R,verticalSign:A,horizontalSign:D,lineConstants:E,line:[Qn(e,m),Qn(e,b)]}})}function eD(t,e,n,r){var i=r?t.map(function(a){return Tp(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=iE(n,a)<=0;return!YP(e,a,o)})}function dq(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return xe(n[0]);if(!a)return xe(n[1]);var o=a/i;return xe((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function fq(t){var e=J(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function hq(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,p=c-r[0],m=c+d-r[0],b=u-r[1],_=u+h-r[1],E=[[p,b],[m,b],[p,_],[m,_]],S=Qn(n,[0,0]);if(!eD(n,E,S,0))return[];var A=[],D=E.map(function(R){return[$i(R),In([0,0],R)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(R){var P=In([0,0],fq(R)),z=dq(R);A.push.apply(A,Se([],J(D.filter(function(M){var T=J(M,1),C=T[0];return C&&z<=C}).map(function(M){var T=J(M,2),C=T[0],k=T[1],O=Math.acos(C?z/C:0),L=k+O,F=k-O;return[o+L-P,o+F-P]}).reduce(function(M,T){return M.push.apply(M,Se([],J(T),!1)),M},[]).filter(function(M){return!eD(e,E,S,M)}).map(function(M){return nt(M*180/Math.PI,Fr)})),!1))}),A}function pq(t){var e=t.props.innerBounds,n=Hu();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Qn(u,[0,0]),h=e.left,p=e.top,m=e.width,b=e.height,_=[[h,p],[h,p+b]],E=[[h,p],[h+m,p]],S=[[h+m,p],[h+m,p+b]],A=[[h,p+b],[h+m,p+b]],D=aE(t,u,[0,0],!1),R=[],P=[];return D.forEach(function(z){var M=z.line,T=z.lineConstants,C=$P(d,M),k=C.horizontal,O=C.vertical,L=Yo(M,T,E,O,1,!0),F=Yo(M,T,A,O,1,!0),j=Yo(M,T,_,k,1,!0),X=Yo(M,T,S,k,1,!0);L.isBound&&!n.top&&(R.push(p),n.top=!0),F.isBound&&!n.bottom&&(R.push(p+b),n.bottom=!0),j.isBound&&!n.left&&(P.push(h),n.left=!0),X.isBound&&!n.right&&(P.push(h+m),n.right=!0)}),{boundMap:n,horizontal:R,vertical:P}}function gq(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(xe(i)<Fn&&(i=0),xe(a)<Fn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var d=(e[1]+n-c)/o;return[d-e[0],n]}}function e_(t,e,n,r,i){var a=gq(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=Ms(t,e),c=Ms(a,t),u=Ms(a,e),d=c>o||u>o,h=J(is({datas:i,distX:a[0],distY:a[1]}),2),p=h[0],m=h[1];return{offset:[p,m],isOutside:d}}function Nv(t,e){return t.isBound?t.offset:e.isSnap?Jx(e).offset:0}function mq(t,e,n,r,i){var a=J(e,2),o=a[0],c=a[1],u=J(n,2),d=u[0],h=u[1],p=J(r,2),m=p[0],b=p[1],_=J(i,2),E=_[0],S=_[1],A=-E,D=-S;if(t&&o&&c){A=0,D=0;var R=[];if(d&&h?R.push([0,S],[E,0]):d?R.push([E,0]):h?R.push([0,S]):m&&b?R.push([0,S],[E,0]):m?R.push([E,0]):b&&R.push([0,S]),R.length){R.sort(function(T,C){return $i(qe([o,c],T))-$i(qe([o,c],C))});var P=R[0];if(P[0]&&xe(o)>Fn)A=-P[0],D=c*xe(o+A)/xe(o)-c;else if(P[1]&&xe(c)>Fn){var z=c;D=-P[1],A=o*xe(c+D)/xe(z)-o}if(t&&h&&d)if(xe(A)>Fn&&xe(A)<xe(E)){var M=xe(E)/xe(A);A*=M,D*=M}else if(xe(D)>Fn&&xe(D)<xe(S)){var M=xe(S)/xe(D);A*=M,D*=M}else A=ld(-E,A),D=ld(-S,D)}}else A=o||d?-E:0,D=c||h?-S:0;return[A,D]}function vq(t,e,n,r,i,a){if(!zd(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=lE(a.absolutePoses,[e,n]),c=Gi(o),u=c.left,d=c.right,h=c.top,p=c.bottom,m={horizontal:o.map(function(X){return X[1]}),vertical:o.map(function(X){return X[0]})},b=nE(t.props.snapDirections),_=rE(b,{left:u,right:d,top:h,bottom:p,center:(u+d)/2,middle:(h+p)/2}),E=R0(t,i,_,m),S=E.vertical,A=E.horizontal,D=cq(t,o,a),R=D.vertical,P=D.horizontal,z=S.isSnap,M=A.isSnap,T=S.isBound||R.isBound,C=A.isBound||P.isBound,k=ld(S.offset,R.offset),O=ld(A.offset,P.offset),L=J(mq(r,[e,n],[T,C],[z,M],[k,O]),2),F=L[0],j=L[1];return[{isBound:T,isSnap:z,offset:F},{isBound:C,isSnap:M,offset:j}]}function R0(t,e,n,r){r===void 0&&(r=n);var i=tE(I0(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:D0(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=Nv(a[0],u),p=Nv(o[0],d),m=xe(h),b=xe(p);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:b,bounds:o,snap:d}}}function tD(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=tE(e,n,r),u=c.horizontal,d=c.vertical,h=qP(t,n,r,[],[],i,a,o),p=h.horizontal,m=h.vertical,b=Nv(u[0],p),_=Nv(d[0],m),E=xe(b),S=xe(_);return{horizontal:{isBound:u[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:b,dist:E,bounds:u,snap:p},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:S,bounds:d,snap:m}}}function yq(t,e,n,r){var i=In(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,p=d.isSnap,m=d.dist,b=i%180,_=b<3||b>177,E=b>87&&b<93;return m<u&&(o||c&&!E&&(!r||!_))?"vertical":h||p&&!_&&(!r||!E)?"horizontal":""}function bq(t,e,n,r,i,a){return n.map(function(o){var c=J(o,2),u=c[0],d=c[1],h=Qn(e,u),p=Qn(e,d),m=r?xq(t,h,p,i):R0(t,i,{vertical:[p[0]],horizontal:[p[1]]}),b=m.horizontal,_=b.offset,E=b.isBound,S=b.isSnap,A=m.vertical,D=A.offset,R=A.isBound,P=A.isSnap,z=qe(d,u);if(!D&&!_)return{isBound:R||E,isSnap:P||S,sign:z,offset:[0,0]};var M=yq(h,p,m,r);if(!M)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var T=M==="vertical",C=[0,0];return!r&&xe(d[0])===1&&xe(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?C=is({datas:a,distX:-D,distY:-_}):C=e_(h,p,-(T?D:_),T,a).offset,C=C.map(function(k,O){return k*(z[O]?2/z[O]:0)}),{sign:z,isBound:T?R:E,isSnap:T?P:S,offset:C}})}function nD(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function xq(t,e,n,r){var i=QG(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:aq(t,e,n),u=c.horizontal,d=c.vertical,h=nD(a,u),p=nD(o,d),m=xe(h),b=xe(p);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:p,dist:b}}}function _q(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,d=t.props.bounds,h=1/0,p=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],b=d.left,_=b===void 0?-1/0:b,E=d.top,S=E===void 0?-1/0:E,A=d.right,D=A===void 0?1/0:A,R=d.bottom,P=R===void 0?1/0:R;m.forEach(function(z){var M=z[0]!==a[0],T=z[1]!==a[1],C=Qn(e,z),k=In(r,C)*360/Math.PI;if(T){var O=C.slice();(xe(k-360)<2||xe(k-180)<2)&&(O[1]=r[1]);var L=e_(r,O,(r[1]<C[1]?P:S)-C[1],!1,i),F=J(L.offset,2),j=F[1],X=L.isOutside;isNaN(j)||(p=u+(X?1:-1)*xe(j))}if(M){var O=C.slice();(xe(k-90)<2||xe(k-270)<2)&&(O[0]=r[0]);var $=e_(r,O,(r[0]<C[0]?D:_)-C[0],!0,i),H=J($.offset,1),Y=H[0],te=$.isOutside;isNaN(Y)||(h=c+(te?1:-1)*xe(Y))}})}return{maxWidth:h,maxHeight:p}}var Pr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=$i(d),p=In(d,[0,0]);return[e.createElement("div",{className:Le("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],Mc(t,e),C0(t,e,"translate"),Bq(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ot(t,e,Z({set:function(h){n.startValue=h}},A0(t,e))),d=r||Ne(t,"onDragStart",u);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){S0(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,p=e.distX,m=e.distY,b=n.isDrag,_=n.prevDist,E=n.prevBeforeDist,S=n.startValue;if(b){o&&(p+=o[0],m+=o[1]);var A=t.props,D=A.parentMoveable,R=d?0:A.throttleDrag||h||0,P=r?0:A.throttleDragRotate||0,z=0,M=!1,T=!1,C=!1,k=!1;if(!r&&P>0&&(p||m)){var O=A.startDragRotate||0,L=nt(O+In([0,0],[p,m])*180/Math.PI,P)-O,F=m*Math.abs(Math.cos((L-90)/180*Math.PI)),j=p*Math.abs(Math.cos(L/180*Math.PI)),X=$i([j,F]);z=L*Math.PI/180,p=X*Math.cos(z),m=X*Math.sin(z)}if(!a&&!r&&!i){var $=J(vq(t,p,m,P,!c&&u||o,n),2),H=$[0],Y=$[1];M=H.isSnap,T=H.isBound,C=Y.isSnap,k=Y.isBound;var te=H.offset,ce=Y.offset;p+=te,m+=ce}var pe=Tt(DP({datas:n,distX:p,distY:m}),S),B=Tt(NG({datas:n,distX:p,distY:m}),S);O2(B,Fr),O2(pe,Fr),P||(!M&&!T&&(B[0]=nt(B[0],R),pe[0]=nt(pe[0],R)),!C&&!k&&(B[1]=nt(B[1],R),pe[1]=nt(pe[1],R)));var Q=qe(pe,S),K=qe(B,S),ne=qe(K,_),ue=qe(Q,E);n.prevDist=K,n.prevBeforeDist=Q,n.passDelta=ne,n.passDist=K;var de=n.left+Q[0],ge=n.top+Q[1],Te=n.right-Q[0],De=n.bottom-Q[1],Ye=T0(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(K[0],"px, ").concat(K[1],"px)"));if(Jw(e,Ye),t.state.dragInfo.dist=r?[0,0]:K,!(!r&&!D&&ne.every(function($e){return!$e})&&ue.some(function($e){return!$e}))){var we=t.state,Ie=we.width,ut=we.height,je=ot(t,e,Z({transform:Ye,dist:K,delta:ne,translate:B,beforeDist:Q,beforeDelta:ue,beforeTranslate:pe,left:de,top:ge,right:Te,bottom:De,width:Ie,height:ut,isPinch:a},zr({transform:Ye},e)));return!r&&Ne(t,"onDrag",je),je}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,Z(Z({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=xi(t,e,{});return!n&&Ne(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=j1(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,p=Z(Z({},c),{targets:t.props.targets,events:h}),m=Ne(t,"onDragGroupStart",p);i.isDrag=m!==!1;var b=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,Z(Z({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=j1(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=Z({targets:t.props.targets,events:a},r);return Ne(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=j1(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ne(t,"onDragGroupEnd",xi(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function XP(t,e){var n=Qn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function wq(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=dn(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function WP(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=BG(e,i,a),u=dn(n,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var rD=dE("resizable"),t_={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:jP("resizable"),dragControlCondition:rD,viewClassName:uE("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,p=cO(o,i,r,u),m=t.state,b=m.target,_=m.width,E=m.height,S=m.gestos;if(!p||!b||S.resizable)return!1;S.resizable=c||t.controlGesto,!i&&Mc(t,e),u.datas={},u.direction=p,u.startOffsetWidth=_,u.startOffsetHeight=E,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var A=t.props.transformOrigin||"% %";u.transformOrigin=ri(A)?A.split(" "):A,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!p[0]&&!p[1]||p[0]||!p[1];function D(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Yi(t.state);function R(k){var O=XP(u.startPositions,k);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function P(k){var O=WP(t.state,k);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function z(k){u.minSize=[Ht("".concat(k[0]),0)||0,Ht("".concat(k[1]),0)||0]}function M(k){var O=[k[0]||1/0,k[1]||1/0];(!id(O[0])||isFinite(O[0]))&&(O[0]=Ht("".concat(O[0]),0)||1/0),(!id(O[1])||isFinite(O[1]))&&(O[1]=Ht("".concat(O[1]),0)||1/0),u.maxSize=O}D(_/E),R(d||[-p[0],-p[1]]),u.setFixedDirection=R,u.setFixedPosition=P,u.setMin=z,u.setMax=M;var T=ot(t,e,{direction:p,startRatio:u.ratio,set:function(k){var O=J(k,2),L=O[0],F=O[1];u.startWidth=L,u.startHeight=F},setMin:z,setMax:M,setRatio:D,setFixedDirection:R,setFixedPosition:P,setOrigin:function(k){u.transformOrigin=k},dragStart:Pr.dragStart(t,new sd().dragStart([0,0],e))}),C=h||Ne(t,"onResizeStart",T);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,C!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:p}),u.isResize?T:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,p=e.isGroup,m=e.parentEvent,b=e.resolveMatrix,_=r.isResize,E=r.transformOrigin,S=r.startWidth,A=r.startHeight,D=r.prevWidth,R=r.prevHeight,P=r.minSize,z=r.maxSize,M=r.ratio,T=r.startOffsetWidth,C=r.startOffsetHeight,k=r.isWidth;if(!_)return;if(b){var O=t.state.is3d,L=r.startOffsetMatrix,F=r.startTransformOrigin,j=O?4:3,X=Hh(Dv(e)),$=Math.sqrt(X.length);j!==$&&(X=fa(X,$,j));var H=Rp(L,X,F,j),Y=Pc(H,T,C,j);r.startPositions=Y,r.nextTargetMatrix=X,r.nextAllMatrix=H}var te=bc(t.props,"resizable"),ce=te.resizeFormat,pe=te.throttleResize,B=pe===void 0?i?0:1:pe,Q=te.parentMoveable,K=te.keepRatioFinally,ne=r.direction,ue=ne,de=0,ge=0;!ne[0]&&!ne[1]&&(ue=[1,1]);var Te=M&&(o??te.keepRatio)||!1;function De(){var pt=r.fixedDirection,At=gO(ue,Te,r,e);de=At.distWidth,ge=At.distHeight;var Bt=ue[0]-pt[0]||Te?Math.max(T+de,Fr):T,or=ue[1]-pt[1]||Te?Math.max(C+ge,Fr):C;return Te&&T&&C&&(k?or=Bt/M:Bt=or*M),[Bt,or]}var Ye=J(De(),2),we=Ye[0],Ie=Ye[1];m||(r.setFixedDirection(r.fixedDirection),Ne(t,"onBeforeResize",ot(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(pt){var At;return r.setFixedDirection(pt),At=J(De(),2),we=At[0],Ie=At[1],[we,Ie]},setFixedPosition:function(pt){var At;return r.setFixedPosition(pt),At=J(De(),2),we=At[0],Ie=At[1],[we,Ie]},boundingWidth:we,boundingHeight:Ie,setSize:function(pt){var At;At=J(pt,2),we=At[0],Ie=At[1]}},!0)));var ut=c;c||(!i&&a?ut=qG(t,[0,0]):ut=r.fixedPosition);var je=[0,0];a||(je=zq(t,we,Ie,ne,ut,!d&&h,r)),u&&(!u[0]&&(je[0]=0),!u[1]&&(je[1]=0));function $e(){var pt;ce&&(pt=J(ce([we,Ie]),2),we=pt[0],Ie=pt[1]),we=nt(we,B),Ie=nt(Ie,B)}if(Te){ue[0]&&ue[1]&&je[0]&&je[1]&&(xe(je[0])>xe(je[1])?je[1]=0:je[0]=0);var We=!je[0]&&!je[1];We&&$e(),ue[0]&&!ue[1]||je[0]&&!je[1]||We&&k?(we+=je[0],Ie=we/M):(!ue[0]&&ue[1]||!je[0]&&je[1]||We&&!k)&&(Ie+=je[1],we=Ie*M)}else we+=je[0],Ie+=je[1],we=Math.max(0,we),Ie=Math.max(0,Ie);n=J(FM([we,Ie],P,z,Te?M:!1),2),we=n[0],Ie=n[1],$e(),Te&&(p||K)&&(k?Ie=we/M:we=Ie*M),de=we-T,ge=Ie-C;var gt=[de-D,ge-R];r.prevWidth=de,r.prevHeight=ge;var wt=GG(t,we,Ie,ut,E,r);if(!(!Q&&gt.every(function(pt){return!pt})&&wt.every(function(pt){return!pt}))){var Me=Pr.drag(t,Dp(e,t.state,wt,!!a,!1,"draggable")),Fe=Me.transform,Pt=S+de,mn=A+ge,Xt=ot(t,e,Z({width:Pt,height:mn,offsetWidth:Math.round(we),offsetHeight:Math.round(Ie),startRatio:M,boundingWidth:we,boundingHeight:Ie,direction:ne,dist:[de,ge],delta:gt,isPinch:!!a,drag:Me},dO({style:{width:"".concat(Pt,"px"),height:"".concat(mn,"px")},transform:Fe},Me,e)));return!m&&Ne(t,"onResize",Xt),Xt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,d=u.width,h=u.height,p=d-(i+o),m=h-(a+c),b=xe(p)>3,_=xe(m)>3;if(b&&(n.startWidth+=p,n.startOffsetWidth+=p,n.prevWidth+=p),_&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),b||_)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=xi(t,e,{});return!r&&Ne(t,"onResizeEnd",i),i}},dragGroupControlCondition:rD,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Z(Z({},e),{isGroup:!0}));if(!r)return!1;var i=ca(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var b=n.minSize;i.forEach(function(_){var E=_.datas,S=E.minSize,A=E.startOffsetWidth,D=E.startOffsetHeight,R=a*(A?S[0]/A:0),P=o*(D?S[1]/D:0);b[0]=Math.max(b[0],R),b[1]=Math.max(b[1],P)})}function u(){var b=n.maxSize;i.forEach(function(_){var E=_.datas,S=E.maxSize,A=E.startOffsetWidth,D=E.startOffsetHeight,R=a*(A?S[0]/A:0),P=o*(D?S[1]/D:0);b[0]=Math.min(b[0],R),b[1]=Math.min(b[1],P)})}var d=Ps(t,this,"dragControlStart",e,function(b,_){return Rv(t,b,n,_)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(_,E){_.setFixedDirection(b),Rv(t,_.moveable,n,i[E])})};n.setFixedDirection=h;var p=Z(Z({},r),{targets:t.props.targets,events:d.map(function(b){return Z(Z({},b),{setMin:function(_){b.setMin(_),c()},setMax:function(_){b.setMax(_),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=Ne(t,"onResizeGroupStart",p);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=bc(t.props,"resizable");N0(t,"onBeforeResize",function(b){Ne(t,"onBeforeResizeGroup",ot(t,e,Z(Z({},b),{targets:r.targets}),!0))});var i=this.dragControl(t,Z(Z({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,p=Ps(t,this,"dragControl",e,function(b,_){var E=J(Dr(Ap(t.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),S=E[0],A=E[1];return Z(Z({},_),{parentDist:null,parentScale:d,dragClient:Tt(h,[S,A]),parentKeepRatio:u})}),m=Z({targets:r.targets,events:p},i);return Ne(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Ps(t,this,"dragControlEnd",e),a=xi(t,e,{targets:t.props.targets,events:i});return Ne(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function z1(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,d=dn(t.state.rootMatrix,qe([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=Tt([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=In(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Ms(h,[n,r])}function Jm(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function L1(t,e,n,r){return Jm(In(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function B1(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var p=jq(t,e,r,i+r);h=p.isSnap,d=i+p.dist}h||(d=nt(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function QP(t,e,n){var r=J(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Gn(t))return t.map(function(S){return QP(S,[i,a,o,c],n)[0]});var u=J((t||"top").split("-"),2),d=u[0],h=u[1],p=[i,a];d==="left"?p=[o,i]:d==="right"?p=[a,c]:d==="bottom"&&(p=[c,o]);var m=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2],b=oO(p,n);if(h){var _=h==="top"||h==="left",E=d==="bottom"||d==="left";m=p[_&&!E||!_&&E?0:1]}return[[m,b]]}function n_(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Wn(n,Le("rotation-control"))||t.props.rotateAroundControls&&Wn(n,Le("around-control"))||Wn(n,Le("control"))&&Wn(n,Le("rotatable")))return!0;var r=t.props.rotationTarget;return r?fE(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Eq=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Sq={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Eq],viewClassName:function(t){return t.isDragging("rotatable")?Le("view-rotation-dragging"):""},render:function(t,e){var n=bc(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=t.getState(),h=d.renderPoses,p=d.direction;if(!r)return null;var m=QP(i,h,p),b=[];if(m.forEach(function(A,D){var R=J(A,2),P=R[0],z=R[1];b.push(e.createElement("div",{key:"rotation".concat(D),className:Le("rotation"),style:{transform:"translate(-50%) translate(".concat(P[0],"px, ").concat(P[1],"px) rotate(").concat(z,"rad)")}},e.createElement("div",{className:Le("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Le("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=Bs(u||{}),E={};_.forEach(function(A){u[A].forEach(function(D){E[D]=A})});var S=[];Gn(o)&&(S=o.map(function(A){var D=E[A];return{data:D?{resolve:D}:{},classNames:D?["move"]:[],dir:A}})),b.push.apply(b,Se([],J(PP(t,"rotatable",S,e)),!1))}return c&&b.push.apply(b,Se([],J(LP(t,e)),!1)),b},dragControlCondition:n_,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,p=t.state,m=p.target,b=p.left,_=p.top,E=p.direction,S=p.beforeDirection,A=p.targetTransform,D=p.moveableClientRect,R=p.offsetMatrix,P=p.targetMatrix,z=p.allMatrix,M=p.width,T=p.height;if(!h&&!m)return!1;var C=t.getRect();i.rect=C,i.transform=A,i.left=b,i.top=_;var k=function(ue){var de=WP(t.state,ue);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,B&&B.setFixedPosition(ue)},O=function(ue){var de=wq(t.state,ue);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,B&&B.setFixedDirection(ue)},L=a,F=o;if(h||d||u){var j=c||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:j,defaultDeg:j,prevSnapDeg:0,startDist:0},i.afterInfo=Z(Z({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=Z(Z({},i.beforeInfo),{origin:C.origin,startValue:j})}else{var X=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(X){var $=X.getAttribute("data-direction")||"",H=RG[$];if(H){i.isControl=!0,i.isAroundControl=Wn(X,Le("around-control")),i.controlDirection=H;var Y=X.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var te=Jq(p.rootMatrix,p.renderPoses,D);n=J(Qn(te,H),2),L=n[0],F=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var ce=k;k=function(ue){var de=p.is3d?4:3,ge=J(Tt(hP(P,de),ue),2),Te=ge[0],De=ge[1],Ye=Dr(R,mc([Te,De],de)),we=Dr(z,mc([ue[0],ue[1]],de));ce(ue);var Ie=p.posDelta;i.beforeInfo.origin=qe(Ye,Ie),i.afterInfo.origin=qe(we,Ie),i.absoluteInfo.origin=qe(we,Ie),z1(t,i.beforeInfo,L,F,D),z1(t,i.afterInfo,L,F,D),z1(t,i.absoluteInfo,L,F,D)},O=function(ue){var de=Qn([[0,0],[M,0],[0,T],[M,T]],ue);k(de)}}i.startClientX=L,i.startClientY=F,i.direction=E,i.beforeDirection=S,i.startValue=0,i.datas={},C0(t,e,"rotate");var pe=!1,B=!1;if(i.isControl&&i.resolveAble){var Q=i.resolveAble;Q==="resizable"&&(B=t_.dragControlStart(t,Z(Z({},new sd("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}B||(pe=Pr.dragStart(t,new sd().dragStart([0,0],e))),k(eH(t));var K=ot(t,e,Z(Z({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:O,setFixedPosition:k},A0(t,e)),{dragStart:pe,resizeStart:B})),ne=Ne(t,"onRotateStart",K);return i.isRotate=ne!==!1,p.snapRenderInfo={request:e.isRequest},i.isRotate?K:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,p=e.groupDelta,m=e.resolveMatrix,b=a.beforeDirection,_=a.beforeInfo,E=a.afterInfo,S=a.absoluteInfo,A=a.isRotate,D=a.startValue,R=a.rect,P=a.startClientX,z=a.startClientY;if(A){S0(t,e,"rotate");var M=kG(e),T=b*M,C=t.props.parentMoveable,k=0,O,L,F=0,j,X,$=0,H,Y,te=180/Math.PI*D,ce=S.startValue,pe=!1,B=P+o,Q=z+c;if(!d&&"parentDist"in e){var K=e.parentDist;O=K,j=K,H=K}else h||d?(O=Jm(u,b,_),j=Jm(u,T,E),H=Jm(u,T,S)):(O=L1(B,Q,b,_),j=L1(B,Q,T,E),H=L1(B,Q,T,S),pe=!0);if(L=te+O,X=te+j,Y=ce+H,Ne(t,"onBeforeRotate",ot(t,e,{beforeRotation:L,rotation:X,absoluteRotation:Y,setRotation:function(ut){j=ut-te,O=j,H=j}},!0)),n=J(B1(t,R,_,O,te,pe),3),k=n[0],O=n[1],L=n[2],r=J(B1(t,R,E,j,te,pe),3),F=r[0],j=r[1],X=r[2],i=J(B1(t,R,S,H,ce,pe),3),$=i[0],H=i[1],Y=i[2],!(!$&&!F&&!k&&!C&&!m)){var ne=T0(a,"rotate(".concat(X,"deg)"),"rotate(".concat(j,"deg)"));m&&(a.fixedPosition=eE(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=UG(t,j,a),de=qe(Tt(p||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var ge=kP(t,ne,de,h,e),Te=ge,De=Ms([B,Q],S.startAbsoluteOrigin)-S.startDist,Ye=void 0;if(a.resolveAble==="resizable"){var we=t_.dragControl(t,Z(Z({},Dp(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:De}));we&&(Ye=we,Te=dO(Te,we,e))}var Ie=ot(t,e,Z(Z({delta:F,dist:j,rotate:X,rotation:X,beforeDist:O,beforeDelta:k,beforeRotate:L,beforeRotation:L,absoluteDist:H,absoluteDelta:$,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!h,resize:Ye},ge),Te));return Ne(t,"onRotate",Ie),Ie}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=xi(t,e,{});return Ne(t,"onRotateEnd",r),r}},dragGroupControlCondition:n_,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=Ps(t,this,"dragControlStart",e,function(p,m){var b=p.state,_=b.left,E=b.top,S=b.beforeOrigin,A=Tt(qe([_,E],[i,a]),qe(S,o));return m.datas.startGroupClient=A,m.datas.groupClient=A,Z(Z({},m),{parentRotate:0})}),d=Z(Z({},c),{targets:t.props.targets,events:u}),h=Ne(t,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){N0(t,"onBeforeRotate",function(d){Ne(t,"onBeforeRotateGroup",ot(t,e,Z(Z({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=Ps(t,this,"dragControl",e,function(d,h){var p=h.datas.startGroupClient,m=J(h.datas.groupClient,2),b=m[0],_=m[1],E=J(Tp(p,o*i),2),S=E[0],A=E[1],D=[S-b,A-_];return h.datas.groupClient=[S,A],Z(Z({},h),{parentRotate:a,groupDelta:D})});t.rotation=i*r.beforeRotation;var u=Z({targets:t.props.targets,events:c,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return Ne(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Ps(t,this,"dragControlEnd",e),a=xi(t,e,{targets:t.props.targets,events:i});return Ne(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Tq(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function sE(t,e){return Tq(Z(Z({},t),{classNames:Se([Le("line","guideline",t.direction)],J(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(nt(n,.1),"px")})}),e)}function iD(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(d,h){var p=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,sE({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Le("target","bold",p)],posValue:b,sizeValue:a,zoom:u,direction:e},c)})}function aD(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?sl:ol,h=i[d.start],p=i[d.end];return n.filter(function(m){var b=m.hide,_=m.elementRect;if(b)return!1;if(u&&_){var E=_.rect;if(E[d.start]<=h&&p<=E[d.end])return!1}return!0}).map(function(m,b){var _=m.pos,E=m.size,S=m.element,A=m.className,D=[-r[0]+_[0],-r[1]+_[1]];return sE({key:"".concat(e,"-default-guideline-").concat(b),classNames:S?[Le("bold"),A]:[Le("normal"),A],direction:e,posValue:D,sizeValue:E,zoom:c},a)})}function nh(t,e,n,r,i,a,o,c){var u,d=t.props,h=d.snapDigit,p=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,_=d.snapDistFormat,E=_===void 0?function(z,M){return z}:_,S=d.zoom,A=e==="horizontal"?"X":"Y",D=e==="vertical"?"height":"width",R=Math.abs(i),P=b?parseFloat(R.toFixed(p)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Le("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[D]="".concat(R,"px"),u)},sE({direction:e,classNames:[Le(n),o],size:"100%",posValue:[0,0],sizeValue:R,zoom:S},c),c.createElement("div",{className:Le("size-value","gap"),style:{transform:"translate".concat(A,"(-50%) scale(").concat(S,")")}},P>0?E(P,e):""))}function Aq(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?sl:ol,c=n[o.start],u=n[o.end];return fO(e,function(d){return d.pos[i]}).map(function(d){var h=[],p=[],m=[];return d.forEach(function(b){var _,E,S=b.element,A=b.elementRect.rect;if(A[o.end]<c)h.push(b);else if(u<A[o.start])p.push(b);else if(A[o.start]<=c&&u<=A[o.end]&&r){var D=b.pos,R={element:S,rect:Z(Z({},A),(_={},_[o.end]=A[o.start],_))},P={element:S,rect:Z(Z({},A),(E={},E[o.start]=A[o.end],E))},z=[0,0],M=[0,0];z[i]=D[i],z[a]=D[a],M[i]=D[i],M[a]=D[a]+b.size,h.push({type:t,pos:z,size:0,elementRect:R,direction:"",elementDirection:"end"}),p.push({type:t,pos:M,size:0,elementRect:P,direction:"",elementDirection:"start"})}}),h.sort(function(b,_){return _.pos[a]-b.pos[a]}),p.sort(function(b,_){return b.pos[a]-_.pos[a]}),{total:d,start:h,end:p,inner:m}})}function Cq(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(S){return S.type===c}),d=c==="vertical"?1:0,h=d?0:1,p=Aq(c,u,r,a),m=d?ol:sl,b=d?sl:ol,_=r[m.start],E=r[m.end];p.forEach(function(S){var A=S.total,D=S.start,R=S.end,P=S.inner,z=n[h]+A[0].pos[h]-r[b.start],M=r;D.forEach(function(T){var C=T.elementRect.rect,k=M[m.start]-C[m.end];if(k>0){var O=[0,0];O[d]=n[d]+M[m.start]-_-k,O[h]=z,o.push(nh(t,c,"dashed",o.length,k,O,T.className,i))}M=C}),M=r,R.forEach(function(T){var C=T.elementRect.rect,k=C[m.start]-M[m.end];if(k>0){var O=[0,0];O[d]=n[d]+M[m.end]-_,O[h]=z,o.push(nh(t,c,"dashed",o.length,k,O,T.className,i))}M=C}),P.forEach(function(T){var C=T.elementRect.rect,k=_-C[m.start],O=C[m.end]-E,L=[0,0],F=[0,0];L[d]=n[d]-k,L[h]=z,F[d]=n[d]+E-_,F[h]=z,o.push(nh(t,c,"dashed",o.length,k,L,T.className,i)),o.push(nh(t,c,"dashed",o.length,O,F,T.className,i))})})}),o}function Iq(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(S){return S.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?ol:sl,p=u?sl:ol,m=r[h.start],b=r[h.end],_=r[p.start],E=r[p.end];c.forEach(function(S){var A=S.gap,D=S.gapRects,R=Math.max.apply(Math,Se([_],J(D.map(function(M){var T=M.rect;return T[p.start]})),!1)),P=Math.min.apply(Math,Se([E],J(D.map(function(M){var T=M.rect;return T[p.end]})),!1)),z=(R+P)/2;R===P||z===(_+E)/2||D.forEach(function(M){var T=M.rect,C=M.className,k=[n[0],n[1]];if(T[h.end]<m)k[u]+=T[h.end]-m;else if(b<T[h.start])k[u]+=T[h.start]-m-A;else return;k[d]+=z-_,a.push(nh(t,u?"vertical":"horizontal","gap",a.length,A,k,C,i))})})}),a}function r_(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,p=i.clientLeft,m=i.clientTop,b=t.props,_=b.snapGap,E=_===void 0?!0:_,S=b.verticalGuidelines,A=b.horizontalGuidelines,D=b.snapThreshold,R=D===void 0?5:D,P=b.maxSnapElementGuidelineDistance,z=P===void 0?1/0:P,M=b.isDisplayGridGuidelines,T=Gi(Yi(t.state)),C=T.top,k=T.left,O=T.bottom,L=T.right,F={top:C,left:k,bottom:O,right:L,center:(k+L)/2,middle:(C+O)/2},j=Nq(t),X=Se([],J(j),!1),$=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ce){return ce*R});E&&X.push.apply(X,Se([],J(Dq(t,F,$)),!1));var H=Z({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(X.push.apply(X,Se([],J(kq(t,o?u:h,o?c:d,p,m,H,M)),!1)),a){var Y=i.left,te=i.top;H.left+=Y,H.top+=te,H.right+=Y,H.bottom+=te}return X.push.apply(X,Se([],J(JP(A||!1,S||!1,o?u:h,o?c:d,p,m,H)),!1)),X=X.filter(function(ce){var pe=ce.element,B=ce.elementRect,Q=ce.type;if(!pe||!B)return!0;var K=B.rect;return ZP(F,K,Q,z)}),X}function Dq(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,d=[];return[["vertical",sl,ol],["horizontal",ol,sl]].forEach(function(h){var p=J(h,3),m=p[0],b=p[1],_=p[2],E=e[b.start],S=e[b.end],A=e[b.center],D=e[_.start],R=e[_.end],P={left:n[0],top:n[1]};function z(C){var k=C.rect,O=P[b.start];return k[b.end]<E+O?E-k[b.end]:S-O<k[b.start]?k[b.start]-S:-1}var M=u.filter(function(C){var k=C.rect;return k[_.start]>R||k[_.end]<D?!1:z(C)>0}).sort(function(C,k){return z(C)-z(k)}),T=[];M.forEach(function(C){M.forEach(function(k){if(C!==k){var O=C.rect,L=k.rect,F=O[_.start],j=O[_.end],X=L[_.start],$=L[_.end];F>$||X>j||T.push([C,k])}})}),T.forEach(function(C){var k=J(C,2),O=k[0],L=k[1],F=O.rect,j=L.rect,X=F[b.start],$=F[b.end],H=j[b.start],Y=j[b.end],te=P[b.start],ce=0,pe=0,B=!1,Q=!1,K=!1;if($<=E&&S<=H){if(Q=!0,ce=(H-$-(S-E))/2,pe=$+ce+(S-E)/2,xe(pe-A)>te)return}else if($<H&&Y<E+te){if(B=!0,ce=H-$,pe=Y+ce,xe(pe-E)>te)return}else if($<H&&S-te<X){if(K=!0,ce=H-$,pe=X-ce,xe(pe-S)>te)return}else return;ce&&ZP(e,j,m,a)&&(ce>c||d.push({type:m,pos:m==="vertical"?[pe,0]:[0,pe],element:L.element,size:0,className:L.className,isStart:B,isCenter:Q,isEnd:K,gap:ce,hide:!0,gapRects:[O,L],direction:"",elementDirection:""}))})}),d}function Rq(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,p=o.snapGridHeight,m=p===void 0?0:p,b=c.snapRenderInfo,_=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),E=t.moveables;if(u&&E&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=t.getRect(),A=S.children,D=b.direction;if(A){var R=D.map(function(z,M){var T=M===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},C=T.snapSize,k=T.posName,O=T.sizeName,L=T.clientOffset;if(!C)return{dir:z,multiple:1,snapSize:C,snapOffset:0};var F=S[O],j=S[k],X=UM(A.map(function(B){return[B[k]-j,B[O],F-B[O]-B[k]+j]})).filter(function(B){return B}).sort(function(B,Q){return B-Q}),$=X[0],H=X.map(function(B){return nt(B/$,.1)*C}),Y=1,te=nt(F/$,.1);for(Y=1;Y<=10&&!H.every(function(B){return B*Y%1===0});++Y);var ce=(-z+1)/2,pe=Tv(j-L,j-L+F,ce,1-ce);return{multiple:te*Y,dir:z,snapSize:C,snapOffset:Math.round(pe/C)}}),P=R.map(function(z){return z.multiple||1});c.snapThresholdInfo.multiples=P,c.snapThresholdInfo.offset=R.map(function(z){return z.snapOffset}),R.forEach(function(z,M){z.snapSize})}}else c.snapThresholdInfo=null}function kq(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,d=c.snapGridWidth,h=d===void 0?0:d,p=c.snapGridHeight,m=p===void 0?0:p,b=[],_=a.left,E=a.top,S=[0,0];Rq(t,r,i,a);var A=u.snapThresholdInfo,D=h,R=m;if(A&&(h*=A.multiples[0]||1,m*=A.multiples[1]||1,S=A.offset),m){for(var P=function(M){b.push({type:"horizontal",pos:[_,nt(S[1]*R+M-i+E,.1)],className:Le("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},z=0;z<=n*2;z+=m)P(z);for(var z=-m;z>=-n;z-=m)P(z)}if(h){for(var P=function(T){b.push({type:"vertical",pos:[nt(S[0]*D+T-r+_,.1),E],className:Le("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},z=0;z<=e*2;z+=h)P(z);for(var z=-h;z>=-e;z-=h)P(z)}return b}function ZP(t,e,n,r){return n==="horizontal"?xe(t.right-e.left)<=r||xe(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?xe(t.bottom-e.top)<=r||xe(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Nq(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return da(m)&&"element"in m?Z(Z({},m),{element:qa(m.element,!0)}):{element:qa(m,!0)}}).filter(function(m){return m.element}),o=q7(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=J(m,2),_=b[0],E=b[1];d[E]=i[_]}),Mq(t,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),e.elementRects=d;var h=nE(t.props.elementSnapDirections),p=[];return d.forEach(function(m){var b=m.element,_=m.top,E=_===void 0?h.top:_,S=m.left,A=S===void 0?h.left:S,D=m.right,R=D===void 0?h.right:D,P=m.bottom,z=P===void 0?h.bottom:P,M=m.center,T=M===void 0?h.center:M,C=m.middle,k=C===void 0?h.middle:C,O=m.className,L=m.rect,F=rE({top:E,right:R,left:A,bottom:z,center:T,middle:k},L),j=F.horizontal,X=F.vertical,$=F.horizontalNames,H=F.verticalNames,Y=L.top,te=L.left,ce=L.right-te,pe=L.bottom-Y,B=[ce,pe];X.forEach(function(Q,K){p.push({type:"vertical",element:b,pos:[nt(Q,.1),Y],size:pe,sizes:B,className:O,elementRect:m,elementDirection:W2[H[K]]||H[K],direction:""})}),j.forEach(function(Q,K){p.push({type:"horizontal",element:b,pos:[te,nt(Q,.1)],size:ce,sizes:B,className:O,elementRect:m,elementDirection:W2[$[K]]||$[K],direction:""})})}),p}function sD(t,e){return t?t.map(function(n){var r=da(n)?n:{pos:n},i=r.pos;return id(i)?r:Z(Z({},r),{pos:Ht(i,e)})}):[]}function JP(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,p=o.right,m=n+p-u,b=r+h-d;return sD(t,b).forEach(function(_){c.push({type:"horizontal",pos:[u,nt(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),sD(e,m).forEach(function(_){c.push({type:"vertical",pos:[nt(_.pos-i+u,.1),d],size:b,className:_.className,direction:""})}),c}function Mq(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=J(rq(a,i,u),2),h=d[0],p=d[1],m=n?0:c[0],b=n?0:c[1];return e.map(function(_){var E=_.element.getBoundingClientRect(),S=E.left-h-m,A=E.top-p-b,D=A+E.height,R=S+E.width,P=J(cd(a,[S,A],u),2),z=P[0],M=P[1],T=J(cd(a,[R,D],u),2),C=T[0],k=T[1];return Z(Z({},_),{rect:{left:z,right:C,top:M,bottom:k,center:(z+C)/2,middle:(M+k)/2}})})}function Rm(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=qa(r,!0);if(o){var c=xh(o),u=fD(e,[c.left-i.left,c.top-i.top]),d=fD(e,[c.right-i.right,c.bottom-i.bottom]);a.left=nt(u[0],1e-5),a.top=nt(u[1],1e-5),a.right=nt(d[0],1e-5),a.bottom=nt(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=r_(t),e.enableSnap=!0,!0}function eO(t,e,n,r,i,a){var o=Pc(t,e,n,a?4:3),c=Qn(o,r);return lE(o,qe(i,c))}function oD(t){return t?t/xe(t):0}function Pq(t,e,n,r,i,a){var o=a.fixedDirection,c=oq(n,o,r),u=aE(t,e,n,r),d=Se(Se([],J(bq(t,e,c,r,i,a)),!1),J(KP(t,u,a)),!1),h=kv(d,0),p=kv(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function Oq(t,e,n,r,i,a,o,c,u){var d=Qn(e,o),h=R0(t,c,{vertical:[d[0]],horizontal:[d[1]]}),p=h.horizontal.offset,m=h.vertical.offset;if(nt(m,Wx)||nt(p,Wx)){var b=J(is({datas:u,distX:-m,distY:-p}),2),_=b[0],E=b[1],S=Math.min(i||1/0,n+o[0]*_),A=Math.min(a||1/0,r+o[1]*E);return[S-n,A-r]}return[0,0]}function tO(t,e,n,r,i,a,o,c){for(var u=Yi(t.state),d=t.props.keepRatio,h=0,p=0,m=0;m<2;++m){var b=e(h,p),_=Pq(t,b,i,d,o,c),E=_.width,S=_.height,A=E.isBound,D=S.isBound,R=E.offset,P=S.offset;if(m===1&&(A||(R=0),D||(P=0)),m===0&&o&&!A&&!D)return[0,0];if(d){var z=xe(R)*(n?1/n:1),M=xe(P)*(r?1/r:1),T=A&&D?z<M:D||!A&&z<M;T?R=n*P/r:P=r*R/n}h+=R,p+=P}if(!d&&i[0]&&i[1]){var C=_q(t,u,i,a,c),k=C.maxWidth,O=C.maxHeight,L=J(Oq(t,e(h,p).map(function(X){return X.map(function($){return nt($,Wx)})}),n+h,r+p,k,O,i,o,c),2),R=L[0],P=L[1];h+=R,p+=P}return[h,p]}function yh(t){return t<0&&(t=t%360+360),t%=360,t}function Vq(t,e){e=yh(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return xe(t-r)<xe(t-i)?r:i}function F1(t,e){t=yh(t),e=yh(e);var n=yh(t-e);return Math.min(n,360-n)}function jq(t,e,n,r){var i,a=t.props,o=(i=a[BP])!==null&&i!==void 0?i:5,c=a[FP];if(zd(t,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,p=e.pos4,m=e.origin,b=n*Math.PI/180,_=[u,d,h,p].map(function(P){return qe(P,m)}),E=_.map(function(P){return Tp(P,b)}),S=Se(Se([],J(JG(t,_,E,m,n)),!1),J(hq(t,_,E,m,n)),!1);S.sort(function(P,z){return xe(P-n)-xe(z-n)});var A=S.length>0;if(A)return{isSnap:A,dist:A?S[0]:n}}if(c?.length&&o){var D=c.slice().sort(function(P,z){return F1(P,r)-F1(z,r)}),R=D[0];if(F1(R,r)<=o)return{isSnap:!0,dist:n+Vq(r,R)-r}}return{isSnap:!1,dist:n}}function zq(t,e,n,r,i,a,o){if(!zd(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=t.state,h=d.allMatrix,p=d.is3d;return tO(t,function(m,b){return eO(u||h,e+m,n+b,c,i,p)},e,n,r,i,a,o)}function Lq(t,e,n,r,i){if(!zd(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=tO(t,function(p,m){return eO(zG(i,Tt(e,[p/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function Bq(t,e){e.absolutePoses=Yi(t.state)}function lD(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;ii(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return Z(Z({},r),{direction:i.direction})})}function cD(t,e,n,r,i,a){var o=tE(I0(t,a),e,n),c=o.vertical,u=o.horizontal,d=Hu();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=pq(t),p=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(_){Ls(r,function(E){var S=E.type,A=E.pos;return S==="bounds"&&A===_})>=0||r.push({type:"bounds",pos:_})}),b.forEach(function(_){Ls(i,function(E){var S=E.type,A=E.pos;return S==="bounds"&&A===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:p}}var Fq=dE("",["resizable","scalable"]),Uq={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",BP,FP,UP,GP,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=t.props.snapRenderThreshold,p=h===void 0?1:h;if(!d||!d.render||!zd(t,""))return Yu(t,"boundMap",Hu(),function(ne){return JSON.stringify(ne)}),Yu(t,"innerBoundMap",Hu(),function(ne){return JSON.stringify(ne)}),[];n.guidelines=r_(t);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],E=Yi(t.state),S=[],A=[],D=[],R=[],P=[],z=Gi(E),M=z.width,T=z.height,C=z.top,k=z.left,O=z.bottom,L=z.right,F={left:k,right:L,top:C,bottom:O,center:(k+L)/2,middle:(C+O)/2},j=_.length>0,X=j?Gi(_):{};if(!d.request){if(d.direction&&P.push(sq(t,E,d.direction,p,p)),d.snap){var $=Gi(E);d.center&&($.middle=($.top+$.bottom)/2,$.center=($.left+$.right)/2),P.push(Q2(t,$,p,p))}j&&(d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),P.push(Q2(t,X,p,p))),P.forEach(function(ne){var ue=ne.vertical.posInfos,de=ne.horizontal.posInfos;S.push.apply(S,Se([],J(ue.filter(function(ge){var Te=ge.guidelineInfos;return Te.some(function(De){var Ye=De.guideline;return!Ye.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),A.push.apply(A,Se([],J(de.filter(function(ge){var Te=ge.guidelineInfos;return Te.some(function(De){var Ye=De.guideline;return!Ye.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),D.push.apply(D,Se([],J(lD(ue)),!1)),R.push.apply(R,Se([],J(lD(de)),!1))})}var H=cD(t,[k,L],[C,O],S,A),Y=H.boundMap,te=H.innerBoundMap;j&&cD(t,[X.left,X.right],[X.top,X.bottom],S,A,d.externalBounds);var ce=Se(Se([],J(D),!1),J(R),!1),pe=ce.filter(function(ne){return ne.element&&!ne.gapRects}),B=ce.filter(function(ne){return ne.gapRects}).sort(function(ne,ue){return ne.gap-ue.gap});Ne(t,"onSnap",{guidelines:ce.filter(function(ne){var ue=ne.element;return!ue}),elements:pe,gaps:B},!0);var Q=Yu(t,"boundMap",Y,function(ne){return JSON.stringify(ne)},Hu()),K=Yu(t,"innerBoundMap",te,function(ne){return JSON.stringify(ne)},Hu());return(Y===Q||te===K)&&Ne(t,"onBound",{bounds:Y,innerBounds:te},!0),Se(Se(Se(Se(Se(Se([],J(Cq(t,pe,[m,b],F,e)),!1),J(Iq(t,B,[m,b],F,e)),!1),J(aD(t,"horizontal",R,[i,r],F,e)),!1),J(aD(t,"vertical",D,[i,r],F,e)),!1),J(iD(t,"horizontal",A,m,r,M,0,e)),!1),J(iD(t,"vertical",S,b,i,T,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Rm(t)},drag:function(t){var e=t.state;Rm(t)||(e.guidelines=r_(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Fq(t,e)||n_(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Wn(e.inputEvent.target,Le("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Rm(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Rm(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Gq(t,e){return[t[0]*e[0],t[1]*e[1]]}function Le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zU.apply(void 0,Se([Qw],J(t),!1))}function nO(t){t()}function qq(t){return!t||t==="none"?[1,0,0,1,0,0]:da(t)?t:Hh(t)}function bh(t,e,n){return Cv(e,vc(n,e),t,vc(n.map(function(r){return-r}),e))}function Hq(t,e,n){if(e==="%"){var r=oE(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function $q(t){var e=Yq(cE(t,":before"));return e.map(function(n,r){var i=_p(n),a=i.value,o=i.unit;return a*Hq(t,o,r===0)})}function Mv(t){return t?t.split(" "):["0","0"]}function Yq(t){return Mv(t.transformOrigin)}function rO(t){var e=ai(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(p){return h[p]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function Yh(t,e,n,r,i){var a,o,c=Bw(t)||pl(t),u=!1,d,h;if(!t||n)d=t;else{var p=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;p?(u=!0,h=m,d=p):d=m}for(var b=!1,_=t===e||d===e,E="relative",S=1,A=parseFloat(i?.("zoom"))||1,D=i?.("position");d&&d!==c;){e===d&&(_=!0);var R=ai(d),P=d.tagName.toLowerCase(),z=rO(d),M=R("willChange"),T=parseFloat(R("zoom"))||1;if(E=R("position"),r&&T!==1){S=T;break}if(!n&&r&&A!==1&&D&&D!=="absolute"||P==="svg"||P==="foreignobject"||E!=="static"||z&&z!=="none"||M==="transform")break;var C=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;C&&(u=!0,h=k);var O=k;if(O&&O.nodeType===11){d=O.host,b=!0,E=ai(d)("position");break}d=O,E="relative"}return{offsetZoom:S,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:E==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function Kq(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=ai(t),c=x0(i),u=!c,d,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(d=wP?$q(t):Mv(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=J(Qq(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=Mv(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function iO(t,e){var n=ai(t),r=ai(pl(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function i_(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=fa(n,3,4))})}function Xq(t){for(var e=t.parentElement,n=!1,r=pl(t);e;){var i=cE(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function k0(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(pP(t,!e).join(","),")")}function oE(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Wq(t,e){var n,r=oE(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=t.preserveAspectRatio.baseVal,p=h.align,m=h.meetOrSlice,b=[0,0],_=[u,d],E=[0,0];if(p!==1){var S=(p-2)%3,A=Math.floor((p-2)/3);b[0]=i*S/2,b[1]=a*A/2;var D=m===2?Math.max(d,u):Math.min(u,d);_[0]=D,_[1]=D,E[0]=(o-i)/2*S,E[1]=(c-a)/2*A}var R=Yw(_,e);return n=J(E,2),R[e*(e-1)]=n[0],R[e*(e-1)+1]=n[1],bh(R,e,b)}function Qq(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=ai(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=oE(t.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,p=d-c.y,m=a?e[0]:e[0]-h,b=a?e[1]:e[1]-p;return[h,p,m,b]}function dn(t,e,n){return Dr(t,mc(e,n),n)}function Pc(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return dn(t,i,r)})}function Gi(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,Se([],J(e),!1)),i=Math.min.apply(Math,Se([],J(n),!1)),a=Math.max.apply(Math,Se([],J(e),!1)),o=Math.max.apply(Math,Se([],J(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function uD(t,e,n,r){var i=Pc(t,e,n,r);return Gi(i)}function Zq(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,d=sO(o),h=d.offsetWidth,p=d.offsetHeight,m=n.getBoundingClientRect(),b=[0,0];n===pl(n)&&(b=iO(o,!0));for(var _=o.getBoundingClientRect(),E=_.left-m.left+n.scrollLeft-(n.clientLeft||0)+b[0],S=_.top-m.top+n.scrollTop-(n.clientTop||0)+b[1],A=_.width,D=_.height,R=Cv(r,i,u),P=uD(R,h,p,r),z=P.left,M=P.top,T=P.width,C=P.height,k=dn(R,c,r),O=qe(k,[z,M]),L=[E+O[0]*A/T,S+O[1]*D/C],F=[0,0],j=0;++j<10;){var X=Wa(i,r);a=J(qe(dn(X,L,r),dn(X,k,r)),2),F[0]=a[0],F[1]=a[1];var $=Cv(r,i,vc(F,r),u),H=uD($,h,p,r),Y=H.left,te=H.top,ce=Y-E,pe=te-S;if(xe(ce)<2&&xe(pe)<2)break;L[0]-=ce,L[1]-=pe}return F.map(function(B){return Math.round(B)})}function Jq(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return dn(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function $i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function aO(t,e){return $i([e[0]-t[0],e[1]-t[1]])}function rh(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=In(t,e));var i=aO(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Pv(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function bc(t,e){var n=t[e];return da(n)?Z(Z({},t),n):t}function sO(t){var e=t&&!x0(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,p=0,m=0,b=0,_=1/0,E=1/0,S=1/0,A=1/0,D=0,R=0,P=!1;if(t)if(!e&&t.ownerSVGElement){var z=t.getBBox();P=!0,n=z.width,r=z.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var M=ai(t),T=t.style,C=M("boxSizing")==="border-box",k=parseFloat(M("borderLeftWidth"))||0,O=parseFloat(M("borderRightWidth"))||0,L=parseFloat(M("borderTopWidth"))||0,F=parseFloat(M("borderBottomWidth"))||0,j=parseFloat(M("paddingLeft"))||0,X=parseFloat(M("paddingRight"))||0,$=parseFloat(M("paddingTop"))||0,H=parseFloat(M("paddingBottom"))||0,Y=j+X,te=$+H,ce=k+O,pe=L+F,B=Y+ce,Q=te+pe,K=M("position"),ne=0,ue=0;if("clientLeft"in t){var de=null;if(K==="absolute"){var ge=Yh(t,pl(t));de=ge.offsetParent}else de=t.parentElement;if(de){var Te=ai(de);ne=parseFloat(Te("width")),ue=parseFloat(Te("height"))}}h=Math.max(Y,Ht(M("minWidth"),ne)||0),p=Math.max(te,Ht(M("minHeight"),ue)||0),_=Ht(M("maxWidth"),ne),E=Ht(M("maxHeight"),ue),isNaN(_)&&(_=1/0),isNaN(E)&&(E=1/0),D=Ht(T.width,0)||0,R=Ht(T.height,0)||0,o=parseFloat(M("width"))||0,c=parseFloat(M("height"))||0,u=xe(o-D)<1?jx(h,D||o,_):o,d=xe(c-R)<1?jx(p,R||c,E):c,n=u,r=d,i=u,a=d,C?(S=_,A=E,m=h,b=p,u=n-B,d=r-Q):(S=_+B,A=E+Q,m=h+B,b=p+Q,n=u+B,r=d+Q),i=u+Y,a=d+te}return{svg:P,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:D,inlineCSSHeight:R,cssWidth:o,cssHeight:c,minWidth:h,minHeight:p,maxWidth:_,maxHeight:E,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:S,maxOffsetHeight:A}}function oO(t,e){return In(e>0?t[0]:t[1],e>0?t[1]:t[0])}function km(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function lO(t,e){var n=t===pl(t)||t===Bw(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=ai(t)("overflow")!=="visible",Z(Z({},e),r)}function U1(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?lO(n,h):h}function xh(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?lO(t,c):c}function eH(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?hE(r,a,o):u}function cO(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=uO(a,r)}return i}function uO(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function lE(t,e){return[Tt(e,t[0]),Tt(e,t[1]),Tt(e,t[2]),Tt(e,t[3])]}function Yi(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return lE([r,i,a,o],[e,n])}function a_(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function $u(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&a_(t,e),r?.unset(),t[n]=null}function zr(t,e){if(e){var n=jd(e);n.nextStyle=Z(Z({},n.nextStyle),t)}return{style:t,cssText:Bs(t).map(function(r){return"".concat(Zm(r,"-"),": ").concat(t[r],";")}).join("")}}function dO(t,e,n){var r=e.afterTransform||e.transform;return Z(Z({},zr(Z(Z(Z({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ot(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=Z(Z({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function xi(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Z(Z({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function N0(t,e,n){t._emitter.on(e,n)}function Ne(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function cE(t,e){return Wo(t).getComputedStyle(t,e)}function Nm(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function s_(t,e){return t===e||t==null&&e==null}function dD(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!x0(i))return i}return t[n]}function fO(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function tH(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function hO(t){return t.reduce(function(e,n){return e.concat(n)},[])}function ld(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return xe(r)-xe(n)}),t[0]}function cd(t,e,n){return Dr(Wa(t,n),mc(e,n),n)}function nH(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=J(cd(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Vi(t,e,n,r){if(!n[0]&&!n[1])return e;var i=dn(t,[oD(n[0]||1),0],r),a=dn(t,[0,oD(n[1]||1)],r),o=dn(t,[n[0]/$i(i),n[1]/$i(a)],r);return Tt(e,o)}function ia(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Ov(t){return xe(t)<=Fr?0:t}function uE(t){return function(e){if(!e.isDragging(t))return"";var n=HG(e,t),r=n.deg;return r?Le("view-control-rotation".concat(r)):""}}function dE(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Wn(i,Le("direction"))&&(!t||Wn(i,Le(t)))}}function rH(t,e,n){var r,i=ad(t,{"x%":function(z){return z/100*e.offsetWidth},"y%":function(z){return z/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),p=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:ad([""])[0],b=n<0?[]:i.slice(n),_=n<0?[]:i.slice(n+1),E=m?[m]:[],S=ku(h),A=ku(p),D=ku(b),R=ku(_),P=$t(S,D,4);return{transforms:t,beforeFunctionMatrix:S,beforeFunctionMatrix2:A,targetFunctionMatrix:ku(E),afterFunctionMatrix:D,afterFunctionMatrix2:R,allFunctionMatrix:P,beforeFunctions:h,beforeFunctions2:p,targetFunction:E[0],afterFunctions:b,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function iH(t){return!t||!da(t)||Od(t)?!1:Gn(t)||"length"in t}function qa(t,e){return t?Od(t)?t:ri(t)?e?document.querySelector(t):t:jw(t)?t():$M(t)?t:"current"in t?t.current:t:null}function fE(t,e){if(!t)return[];var n=iH(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return ri(i)&&e?Se(Se([],J(r),!1),J([].slice.call(document.querySelectorAll(i))),!1):(Gn(i)?r.push(fE(i,e)):r.push(qa(i,e)),r)},[])}function aH(t,e,n){var r=In(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function fD(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Wa(n,i);return r||(a=fa(a,3,4)),a[12]=0,a[13]=0,a[14]=0,U7(a,e)}function pO(t,e,n,r,i){var a=J(t,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=In([0,0],e),p=In([0,0],r),m=$i(e),b=Math.cos(h-p)*m;if(!r[0])d=b,u=d*n;else if(!r[1])u=b,d=u/n;else{var _=r[0]*o,E=r[1]*c,S=Math.atan2(_+e[0],E+e[1]),A=Math.atan2(_,E);S<0&&(S+=Math.PI*2),A<0&&(A+=Math.PI*2);var D=0;xe(S-A)<Math.PI/2||xe(S-A)>Math.PI/2*3||(A+=Math.PI),D=S-A,D>Math.PI*2?D-=Math.PI*2:D>Math.PI?D=2*Math.PI-D:D<-Math.PI&&(D=-2*Math.PI-D);var R=$i([_+e[0],E+e[1]])*Math.cos(D);u=R*Math.sin(A)-_,d=R*Math.cos(A)-E,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function gO(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,p=r.distY,m=r.pinchScale,b=r.parentDistance,_=r.parentDist,E=r.parentScale,S=n.fixedDirection,A=[0,1].map(function(T){return xe(t[T]-S[T])}),D=[0,1].map(function(T){var C=A[T];return C!==0&&(C=2/C),C});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(id(m))u=(m-1)*o,d=(m-1)*c;else if(E)u=(E[0]-1)*o,d=(E[1]-1)*c;else if(b){var R=o*A[0],P=c*A[1],z=$i([R,P]);u=b/z*R*D[0],d=b/z*P*D[1]}else{var M=is({datas:n,distX:h,distY:p});M=D.map(function(T,C){return M[C]*T}),i=J(pO([o,c],M,a,t,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function o_(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=J(t.split(" "),2),r=n[0],i=n[1],a=o_(r||""),o=o_(i||""),c=Z(Z({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function hE(t,e,n){var r=o_(t,!0),i=r.x,a=r.y;return[Ht(i,e)||0,Ht(a,n)||0]}function sH(t,e,n){var r=t.map(function(a){return qe(a,e)}),i=r.map(function(a){return Tp(a,n)});return{prev:r,next:i,result:i.map(function(a){return Tt(a,e)})}}function mO(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Gn(n),o=Gn(i);return a&&o?mO(n,i):!a&&!o?n===i:!1})}function Yu(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function Or(t){return t>=0?1:-1}function xe(t){return Math.abs(t)}function G1(t,e){return t7(t).map(function(n){return e(n)})}function vO(t){return id(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var oH=Ip("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),p=(c===!0?t.controlAbles:u.filter(function(E){return c.indexOf(E.name)>-1})).filter(function(E){return E.canPinch&&E[h]}),m=ot(t,e,{});r&&(m.targets=r);var b=Ne(t,d,m);n.isPinch=b!==!1,n.ables=p;var _=n.isPinch;return _?(p.forEach(function(E){if(a[E.name]=a[E.name]||{},!!E[h]){var S=Z(Z({},e),{datas:a[E.name],parentRotate:i,isPinch:!0});E[h](t,S)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var d=i*(1-1/r),h=ot(t,e,{});c&&(h.targets=c);var p="onPinch".concat(c?"Group":"");Ne(t,p,h);var m=n.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[b]&&_[b](t,Z(Z({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=xi(t,e,{isDrag:r});a&&(u.targets=a),Ne(t,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(p){p[h]&&p[h](t,Z(Z({},e),{isDrag:r,datas:o[p.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Z(Z({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Z(Z({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Z(Z({},e),{targets:t.props.targets}))}}),hD=dE("scalable"),lH={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:jP("scalable"),dragControlCondition:hD,viewClassName:uE("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=cO(a,r,i,n),c=t.state,u=c.width,d=c.height,h=c.targetTransform,p=c.target,m=c.pos1,b=c.pos2,_=c.pos4;if(!o||!p)return!1;r||Mc(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var E=!o[0]&&!o[1]||o[0]||!o[1];C0(t,e,"scale"),n.isWidth=E;function S(M){n.ratio=M&&isFinite(M)?M:0}n.startPositions=Yi(t.state);function A(M){var T=XP(n.startPositions,M);n.fixedDirection=T.fixedDirection,n.fixedPosition=T.fixedPosition,n.fixedOffset=T.fixedOffset}n.setFixedDirection=A,S(Ms(m,b)/Ms(b,_)),A([-o[0],-o[1]]);var D=function(M){n.minScaleSize=M},R=function(M){n.maxScaleSize=M};D([-1/0,-1/0]),R([1/0,1/0]);var P=ot(t,e,Z(Z({direction:o,set:function(M){n.startValue=M},setRatio:S,setFixedDirection:A,setMinScaleSize:D,setMaxScaleSize:R},A0(t,e)),{dragStart:Pr.dragStart(t,new sd().dragStart([0,0],e))})),z=Ne(t,"onScaleStart",P);return n.startFixedDirection=n.fixedDirection,z!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?P:!1},dragControl:function(t,e){S0(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=n.prevDist,p=n.direction,m=n.startOffsetWidth,b=n.startOffsetHeight,_=n.isScale,E=n.startValue,S=n.isWidth,A=n.ratio;if(!_)return!1;var D=t.props,R=D.throttleScale,P=D.parentMoveable,z=p;!p[0]&&!p[1]&&(z=[1,1]);var M=A&&(r??D.keepRatio)||!1,T=t.state,C=[E[0],E[1]];function k(){var we=gO(z,M,n,e),Ie=we.distWidth,ut=we.distHeight,je=m?(m+Ie)/m:1,$e=b?(b+ut)/b:1;E[0]||(C[0]=Ie/m),E[1]||(C[1]=ut/b);var We=(z[0]||M?je:1)*C[0],gt=(z[1]||M?$e:1)*C[1];return We===0&&(We=Or(h[0])*Cm),gt===0&&(gt=Or(h[1])*Cm),[We,gt]}var O=k();if(!a&&t.props.groupable){var L=T.snapRenderInfo||{},F=L.direction;Gn(F)&&(F[0]||F[1])&&(T.snapRenderInfo={direction:p,request:e.isRequest})}Ne(t,"onBeforeScale",ot(t,e,{scale:O,setFixedDirection:function(we){return n.setFixedDirection(we),O=k(),O},startFixedDirection:n.startFixedDirection,setScale:function(we){O=we}},!0));var j=[O[0]/C[0],O[1]/C[1]],X=o,$=[0,0],H=Or(j[0]*j[1]),Y=!o&&!i&&a;if(Y||d?X=eE(t,n.targetAllTransform,[0,0],[0,0],n):o||(X=n.fixedPosition),a||($=Lq(t,j,p,!u&&c,n)),M){z[0]&&z[1]&&$[0]&&$[1]&&(Math.abs($[0]*m)>Math.abs($[1]*b)?$[1]=0:$[0]=0);var te=!$[0]&&!$[1];if(te&&(S?j[0]=nt(j[0]*C[0],R)/C[0]:j[1]=nt(j[1]*C[1],R)/C[1]),z[0]&&!z[1]||$[0]&&!$[1]||te&&S){j[0]+=$[0];var ce=m*j[0]*C[0]/A;j[1]=Or(H*j[0])*xe(ce/b/C[1])}else if(!z[0]&&z[1]||!$[0]&&$[1]||te&&!S){j[1]+=$[1];var pe=b*j[1]*C[1]*A;j[0]=Or(H*j[1])*xe(pe/m/C[0])}}else j[0]+=$[0],j[1]+=$[1],$[0]||(j[0]=nt(j[0]*C[0],R)/C[0]),$[1]||(j[1]=nt(j[1]*C[1],R)/C[1]);j[0]===0&&(j[0]=Or(h[0])*Cm),j[1]===0&&(j[1]=Or(h[1])*Cm),O=Gq(j,[C[0],C[1]]);var B=[m,b],Q=[m*O[0],b*O[1]];Q=FM(Q,n.minScaleSize,n.maxScaleSize,M?A:!1),O=G1(2,function(we){return B[we]?Q[we]/B[we]:Q[we]}),j=G1(2,function(we){return O[we]/C[we]});var K=G1(2,function(we){return h[we]?j[we]/h[we]:j[we]}),ne="scale(".concat(j.join(", "),")"),ue="scale(".concat(O.join(", "),")"),de=T0(n,ue,ne),ge=!E[0]||!E[1],Te=LG(t,ge?ue:ne,n.fixedDirection,X,n.fixedOffset,n,ge),De=Y?Te:qe(Te,n.prevInverseDist||[0,0]);if(n.prevDist=j,n.prevInverseDist=Te,O[0]===h[0]&&O[1]===h[1]&&De.every(function(we){return!we})&&!P&&!Y)return!1;var Ye=ot(t,e,Z({offsetWidth:m,offsetHeight:b,direction:p,scale:O,dist:j,delta:K,isPinch:!!a},kP(t,de,De,a,e)));return Ne(t,"onScale",Ye),Ye},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=xi(t,e,{});return Ne(t,"onScaleEnd",r),r},dragGroupControlCondition:hD,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=ca(t,"resizable",e);n.moveableScale=t.scale;var a=Ps(t,this,"dragControlStart",e,function(d,h){return Rv(t,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,p){h.setFixedDirection(d),Rv(t,h.moveable,n,i[p])})};n.setFixedDirection=o;var c=Z(Z({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=Ne(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){N0(t,"onBeforeScale",function(h){Ne(t,"onBeforeScaleGroup",ot(t,e,Z(Z({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=Ps(t,this,"dragControl",e,function(h,p){var m=J(Dr(Ap(t.rotation/180*Math.PI,3),[p.datas.originalX*i[0],p.datas.originalY*i[1],1],3),2),b=m[0],_=m[1];return Z(Z({},p),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Tt(c,[b,_])})}),d=Z({targets:t.props.targets,events:u},r);return Ne(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Ps(t,this,"dragControlEnd",e),a=xi(t,e,{targets:t.props.targets,events:i});return Ne(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Ro(t,e){return t.map(function(n,r){return Tv(n,e[r],1,2)})}function pD(t,e,n){var r=In(t,e),i=In(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function cH(t,e){var n=pD(t[0],t[1],t[2]),r=pD(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var uH={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:uE("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,d=c.pos2,h=c.pos3,p=c.pos4,m=Ro(u,d),b=Ro(d,u),_=Ro(u,h),E=Ro(h,u),S=Ro(h,p),A=Ro(p,h),D=Ro(d,p),R=Ro(p,d);return Se([e.createElement("div",{className:Le("line"),key:"middeLine1",style:rh(m,S,o)}),e.createElement("div",{className:Le("line"),key:"middeLine2",style:rh(b,A,o)}),e.createElement("div",{className:Le("line"),key:"middeLine3",style:rh(_,D,o)}),e.createElement("div",{className:Le("line"),key:"middeLine4",style:rh(E,R,o)})],J(zP(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Wn(n,Le("direction"))&&Wn(n,Le("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=uO(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,p=c.targetMatrix,m=c.width,b=c.height,_=c.left,E=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?p:fa(p,3,4),n.targetInverseMatrix=fP(Wa(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=_,n.top=E,n.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(D){return qe(D,u)}),n.nextPoses=n.poses.map(function(D){var R=J(D,2),P=R[0],z=R[1];return Dr(n.warpTargetMatrix,[P,z,0,1],4)}),n.startValue=tn(4),n.prevMatrix=tn(4),n.absolutePoses=Yi(c),n.posIndexes=RP(o),Mc(t,e),C0(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var S=ot(t,e,Z({set:function(D){n.startValue=D}},A0(t,e))),A=Ne(t,"onWarpStart",S);return A!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,p=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(S0(t,e,"matrix3d"),zd(t,"warpable")){var b=p.map(function(k){return m[k]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var _=R0(t,r,{horizontal:b.map(function(k){return k[1]+a}),vertical:b.map(function(k){return k[0]+i})}),E=_.horizontal,S=_.vertical;a-=E.offset,i-=S.offset}var A=is({datas:n,distX:i,distY:a},!0),D=n.nextPoses.slice();if(p.forEach(function(k){D[k]=Tt(D[k],A)}),!DG.every(function(k){return cH(k.map(function(O){return h[O]}),k.map(function(O){return D[O]}))}))return!1;var R=Kw(h[0],h[2],h[1],h[3],D[0],D[2],D[1],D[3]);if(!R.length)return!1;var P=$t(o,R,4),z=IP(n,P,!0),M=$t(Wa(c,4),z,4);n.prevMatrix=z;var T=$t(d,z,4),C=T0(n,"matrix3d(".concat(T.join(", "),")"),"matrix3d(".concat(z.join(", "),")"));return Jw(e,C),Ne(t,"onWarp",ot(t,e,Z({delta:M,matrix:T,dist:z,multiply:$t,transform:C},zr({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ne(t,"onWarpEnd",xi(t,e,{})),r):!1}},dH=Le("area-pieces"),Mm=Le("area-piece"),yO=Le("avoid"),fH=Le("view-dragging");function q1(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;HM(e,yO),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function gD(t){return t.createElement("div",{key:"area_pieces",className:dH},t.createElement("div",{className:Mm}),t.createElement("div",{className:Mm}),t.createElement("div",{className:Mm}),t.createElement("div",{className:Mm}))}var bO={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,d=c.height,h=c.renderPoses,p=o?Le("area","pass"):Le("area");if(a)return[e.createElement("div",{key:"area",ref:Ns(t,"areaElement"),className:p}),gD(e)];if(!r||!i)return[];var m=Kw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?k0(m,!0):"none";return[e.createElement("div",{key:"area",ref:Ns(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),gD(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,p=c.is3d,m=u.left,b=u.top,_=Gi(d),E=_.left,S=_.top,A=_.width,D=_.height,R=p?4:3,P=J(cd(h,[r-m,i-b],R),2),z=P[0],M=P[1];z-=E,M-=S;var T=[{left:E,top:S,width:A,height:M-10},{left:E,top:S,width:z-10,height:D},{left:E,top:S+M+10,width:A,height:D-M-10},{left:E+z+10,top:S,width:A-z-10,height:D}],C=[].slice.call(o.nextElementSibling.children);T.forEach(function(k,O){C[O].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),qM(o,yO),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,q1(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||q1(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){q1(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&BM(function(){e.disableNativeEvent=!1})}},hH=Ip("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,p=o.is3d,m=o.left,b=o.top,_=o.offsetWidth,E=o.offsetHeight,S;if(!a&&d&&i){var A=J(hE(i,_,E),2),D=A[0],R=A[1],P=p?4:3,z=dn(h,[D,R],P);S=Pv(u,r,qe(z,[m,b]))}else S=Pv(u,r,c);return[e.createElement("div",{className:Le("control","origin"),style:S,key:"beforeOrigin"})]}});function pH(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var gH={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new K7,c=qa(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var p=h.container,m=h.direction,b=ot(t,e,{scrollContainer:p,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(b.targets=d),Ne(t,_,b)}).on("move",function(h){var p=h.offsetX,m=h.offsetY,b=h.inputEvent;t[u].scrollBy(p,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var p=h.next;p(t[u].getCurrentEvent())}),o.dragStart(e,Z({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,p=h===void 0?pH:h,m=r.scrollOptions;return n.drag(e,Z({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return p({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Z(Z({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Z(Z({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Z(Z({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Z(Z({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Z(Z({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,Z(Z({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Z(Z({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},xO={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},mH=Ip("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=vO(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),d=u.renderPoses,h=u.pos1,p=u.pos2,m=u.pos3,b=u.pos4,_=[h,p,m,b],E=[];return i>0&&E.push([0,2]),a>0&&E.push([0,1]),o>0&&E.push([1,3]),c>0&&E.push([2,3]),E.map(function(S,A){var D=J(S,2),R=D[0],P=D[1],z=_[R],M=_[P],T=d[R],C=d[P],k=Kw([0,0],[100,0],[0,100],[100,100],z,M,T,C);if(k.length)return e.createElement("div",{key:"padding".concat(A),className:Le("padding"),style:{transform:k0(k,!0)}})})}}),mD=["nw","ne","se","sw"];function Pm(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var vH=[1,2,5,6],yH=[0,3,4,7],Ql=[1,-1,-1,1],Zl=[1,1,-1,-1];function pE(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=t.filter(function(m){return!m.virtual}),p=h.map(function(m){var b=m.horizontal,_=m.vertical,E=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var S=Math.max(0,_===1?E[1]-a:c-E[1]);return u.push(ia(S,r,e)),S}else{var S=Math.max(0,b===1?E[0]-i:o-E[0]);return u.push(ia(S,n,e)),S}});return{radiusPoses:h,styles:u,raws:p}}function _O(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function wO(t,e,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var p=t.indexOf("/"),m=(p>-1?t.slice(0,p):t).length,b=t.slice(0,m),_=t.slice(m+1),E=b.length,S=_.length,A=S>0,D=J(b,4),R=D[0],P=R===void 0?"0px":R,z=D[1],M=z===void 0?P:z,T=D[2],C=T===void 0?P:T,k=D[3],O=k===void 0?M:k,L=J(_,4),F=L[0],j=F===void 0?P:F,X=L[1],$=X===void 0?A?j:M:X,H=L[2],Y=H===void 0?A?j:C:H,te=L[3],ce=te===void 0?A?$:O:te,pe=[P,M,C,O].map(function(de){return Ht(de,e)}),B=[j,$,Y,ce].map(function(de){return Ht(de,n)}),Q=pe.slice(),K=B.slice();c=J(Pm([Q[0],Q[1]],e),2),Q[0]=c[0],Q[1]=c[1],u=J(Pm([Q[3],Q[2]],e),2),Q[3]=u[0],Q[2]=u[1],d=J(Pm([K[0],K[3]],n),2),K[0]=d[0],K[3]=d[1],h=J(Pm([K[1],K[2]],n),2),K[1]=h[0],K[2]=h[1];var ne=o?Q:Q.slice(0,Math.max(a[0],E)),ue=o?K:K.slice(0,Math.max(a[1],S));return Se(Se([],J(ne.map(function(de,ge){var Te=mD[ge];return{virtual:ge>=E,horizontal:Ql[ge],vertical:0,pos:[r+de,i+(Zl[ge]===-1?n:0)],sub:!0,raw:pe[ge],direction:Te}})),!1),J(ue.map(function(de,ge){var Te=mD[ge];return{virtual:ge>=S,horizontal:0,vertical:Zl[ge],pos:[r+(Ql[ge]===-1?e:0),i+de],sub:!0,raw:B[ge],direction:Te}})),!1)}function bH(t,e,n,r,i){i===void 0&&(i=e.length);var a=_O(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;t.splice(n,d),e.splice(n,d)}function xH(t,e,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var p=_O(t.slice(n)),m=p.horizontalRange,b=p.verticalRange;if(r>-1)for(var _=Ql[r]===1?a-d:c-a,E=m[1];E<=r;++E){var S=Zl[E]===1?h:u,A=0;if(r===E?A=a:E===0?A=d+_:Ql[E]===-1&&(A=c-(e[n][0]-d)),t.splice(n+E,0,{horizontal:Ql[E],vertical:0,pos:[A,S]}),e.splice(n+E,0,[A,S]),E===0)break}else if(i>-1){var D=Zl[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var R=[d+D,h];t.push({horizontal:Ql[0],vertical:0,pos:R}),e.push(R)}for(var P=b[0],E=b[1];E<=i;++E){var A=Ql[E]===1?d:c,S=0;if(i===E?S=o:E===0?S=h+D:Zl[E]===1?S=e[n+P][1]:Zl[E]===-1&&(S=u-(e[n+P][1]-h)),t.push({horizontal:0,vertical:Zl[E],pos:[A,S]}),e.push([A,S]),E===0)break}}}function _H(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var wH=[[0,-1,"n"],[1,0,"e"]],EH=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function gE(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",p=u==="circle";if(u==="polygon")return n.map(function(M){return"".concat(ia(M[0],a,r)," ").concat(ia(M[1],o,r))});if(h||u==="inset"){var m=n[1][1],b=n[3][0],_=n[7][0],E=n[5][1];if(h)return[m,b,E,_].map(function(M){return"".concat(M,"px")});var S=[m,a-b,o-E,_].map(function(M,T){return ia(M,T%2?a:o,r)});if(n.length>8){var A=J(qe(n[4],n[0]),2),D=A[0],R=A[1];S.push.apply(S,Se(["round"],J(pE(d.slice(8).map(function(M,T){return Z(Z({},M),{pos:n[T]})}),r,D,R,_,m,b,E).styles),!1))}return S}else if(p||u==="ellipse"){var P=n[0],z=ia(xe(n[1][1]-P[1]),p?Math.sqrt((a*a+o*o)/2):o,r),S=p?[z]:[ia(xe(n[2][0]-P[0]),a,r),z];return S.push("at",ia(P[0],a,r),ia(P[1],o,r)),S}}function Vv(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return EH.map(function(o){var c=J(o,3),u=c[0],d=c[1],h=c[2],p=i[u+1],m=a[d+1];return{vertical:xe(d),horizontal:xe(u),direction:h,pos:[p,m]}})}function EO(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[xe(e[1]-e[0]),xe(n[1]-n[0])]}function vD(t,e,n,r,i){var a,o,c,u,d,h,p,m,b;if(t){var _=i;if(!_){var E=ai(t),S=E("clipPath");_=S!=="none"?S:E("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var A=LM(_),D=A.prefix,R=D===void 0?_:D,P=A.value,z=P===void 0?"":P,M=R==="circle",T=" ";if(R==="polygon"){var C=ac(z||"0% 0%, 100% 0%, 100% 100%, 0% 100%");T=",";var k=C.map(function(Pt){var mn=J(Pt.split(" "),2),Xt=mn[0],pt=mn[1];return{vertical:1,horizontal:1,pos:[Ht(Xt,e),Ht(pt,n)]}}),O=yc(k.map(function(Pt){return Pt.pos}));return{type:R,clipText:_,poses:k,splitter:T,left:O.minX,right:O.maxX,top:O.minY,bottom:O.maxY}}else if(M||R==="ellipse"){var L="",F="",j=0,X=0,C=al(z);if(M){var $="";a=J(C,4),o=a[0],$=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],F=u===void 0?"50%":u,j=Ht($,Math.sqrt((e*e+n*n)/2)),X=j}else{var H="",Y="";d=J(C,5),h=d[0],H=h===void 0?"50%":h,p=d[1],Y=p===void 0?"50%":p,m=d[3],L=m===void 0?"50%":m,b=d[4],F=b===void 0?"50%":b,j=Ht(H,e),X=Ht(Y,n)}var te=[Ht(L,e),Ht(F,n)],k=Se([{vertical:1,horizontal:1,pos:te,direction:"nesw"}],J(wH.slice(0,M?1:2).map(function(Xt){return{vertical:xe(Xt[1]),horizontal:Xt[0],direction:Xt[2],sub:!0,pos:[te[0]+Xt[0]*j,te[1]+Xt[1]*X]}})),!1);return{type:R,clipText:_,radiusX:j,radiusY:X,left:te[0]-j,top:te[1]-X,right:te[0]+j,bottom:te[1]+X,poses:k,splitter:T}}else if(R==="inset"){var C=al(z||"0 0 0 0"),ce=C.indexOf("round"),pe=(ce>-1?C.slice(0,ce):C).length,B=C.slice(pe+1),Q=J(C.slice(0,pe),4),K=Q[0],ne=Q[1],ue=ne===void 0?K:ne,de=Q[2],ge=de===void 0?K:de,Te=Q[3],De=Te===void 0?ue:Te,Ye=J([K,ge].map(function(Xt){return Ht(Xt,n)}),2),we=Ye[0],Ie=Ye[1],ut=J([De,ue].map(function(Xt){return Ht(Xt,e)}),2),je=ut[0],$e=ut[1],We=e-$e,gt=n-Ie,wt=wO(B,We-je,gt-we,je,we),k=Se(Se([],J(Vv(we,We,gt,je)),!1),J(wt),!1);return{type:"inset",clipText:_,poses:k,top:we,left:je,right:We,bottom:gt,radius:B,splitter:T}}else if(R==="rect"){var C=ac(z||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));T=",";var Me=J(C.map(function(Bt){var or=_p(Bt).value;return or}),4),Fe=Me[0],$e=Me[1],Ie=Me[2],je=Me[3],k=Vv(Fe,$e,Ie,je);return{type:"rect",clipText:_,poses:k,top:Fe,right:$e,bottom:Ie,left:je,values:C,splitter:T}}}}}function SH(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(j){return j==="w"||j==="e"}),p=d.filter(function(j){return j==="n"||j==="s"}),m=h[0],b=p[0];u[e]=n;var _=J(EO(t),2),E=_[0],S=_[1],A=E&&S?E/S:0;if(A&&i){var D=(e+4)%8,R=t[D].pos,P=[0,0];o.indexOf("w")>-1?P[0]=-1:o.indexOf("e")>-1&&(P[0]=1),o.indexOf("n")>-1?P[1]=-1:o.indexOf("s")>-1&&(P[1]=1);var z=pO([E,S],n,A,P,!0),M=E+z[0],T=S+z[1],C=R[1],k=R[1],O=R[0],L=R[0];P[0]===-1?O=L-M:P[0]===1?L=O+M:(O=O-M/2,L=L+M/2),P[1]===-1?C=k-T:(P[1]===1||(C=k-T/2),k=C+T);var F=Vv(C,L,k,O);t.forEach(function(j,X){u[X][0]=F[X].pos[0]-j.pos[0],u[X][1]=F[X].pos[1]-j.pos[1]})}else t.forEach(function(j,X){var $=j.direction;$&&($.indexOf(m)>-1&&(u[X][0]=n[0]),$.indexOf(b)>-1&&(u[X][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),b&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(j){var X=j==="n"||j==="s";t.forEach(function($,H){var Y=$.direction,te=$.horizontal,ce=$.vertical;!Y||Y.indexOf(j)===-1||(u[H]=[X||!te?0:n[0],!X||!ce?0:n[1]])})}):u[e]=n;return u}function TH(t,e){var n=J(CP(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,p=u.splitter,m=h.map(function(D){return D.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=vH.indexOf(c),_=yH.indexOf(c),E=h.length;if(xH(h,m,8,b,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),E===h.length)return}else return;var S=gE(t,o,m),A="".concat(d,"(").concat(S.join(p),")");Ne(t,"onClip",ot(t,e,Z({clipEventType:"added",clipType:d,poses:m,clipStyles:S,clipStyle:A,distX:0,distY:0},zr({clipPath:A},e))))}function AH(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(bH(c,d,i,8,h),h===c.length))return}else return;var p=gE(t,r,d),m="".concat(o,"(").concat(p.join(u),")");Ne(t,"onClip",ot(t,e,Z({clipEventType:"removed",clipType:o,poses:d,clipStyles:p,clipStyle:m,distX:0,distY:0},zr({clipPath:m},e))))}var CH={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),d=u.target,h=u.width,p=u.height,m=u.allMatrix,b=u.is3d,_=u.left,E=u.top,S=u.pos1,A=u.pos2,D=u.pos3,R=u.pos4,P=u.clipPathState,z=u.snapBoundInfos,M=u.rotation;if(!d||c)return[];var T=vD(d,h,p,i||"inset",P||r);if(!T)return[];var C=b?4:3,k=T.type,O=T.poses,L=O.map(function($e){var We=dn(m,$e.pos,C);return[We[0]-_,We[1]-E]}),F=[],j=[],X=k==="rect",$=k==="inset",H=k==="polygon";if(X||$||H){var Y=$?L.slice(0,8):L;j=Y.map(function($e,We){var gt=We===0?Y[Y.length-1]:Y[We-1],wt=In(gt,$e),Me=aO(gt,$e);return e.createElement("div",{key:"clipLine".concat(We),className:Le("line","clip-line","snap-control"),"data-clip-index":We,style:{width:"".concat(Me,"px"),transform:"translate(".concat(gt[0],"px, ").concat(gt[1],"px) rotate(").concat(wt,"rad) scaleY(").concat(o,")")}})})}if(F=L.map(function($e,We){return e.createElement("div",{key:"clipControl".concat(We),className:Le("control","clip-control","snap-control"),"data-clip-index":We,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),$&&F.push.apply(F,Se([],J(L.slice(8).map(function($e,We){return e.createElement("div",{key:"clipRadiusControl".concat(We),className:Le("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+We,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var te=T.left,ce=T.top,pe=T.radiusX,B=T.radiusY,Q=J(qe(dn(m,[te,ce],C),dn(m,[0,0],C)),2),K=Q[0],ne=Q[1],ue="none";if(!a){for(var de=Math.max(10,pe/5,B/5),ge=[],Te=0;Te<=de;++Te){var De=Math.PI*2/de*Te;ge.push([pe+(pe-o)*Math.cos(De),B+(B-o)*Math.sin(De)])}ge.push([pe,-2]),ge.push([-2,-2]),ge.push([-2,B*2+2]),ge.push([pe*2+2,B*2+2]),ge.push([pe*2+2,-2]),ge.push([pe,-2]),ue="polygon(".concat(ge.map(function($e){return"".concat($e[0],"px ").concat($e[1],"px")}).join(", "),")")}F.push(e.createElement("div",{key:"clipEllipse",className:Le("clip-ellipse","snap-control"),style:{width:"".concat(pe*2,"px"),height:"".concat(B*2,"px"),clipPath:ue,transform:"translate(".concat(-_+K,"px, ").concat(-E+ne,"px) ").concat(k0(m))}}))}if(a){var Ye=Gi(Se([S,A,D,R],J(L),!1)),we=Ye.width,Ie=Ye.height,ut=Ye.left,je=Ye.top;if(H||X||$){var ge=$?L.slice(0,8):L;F.push(e.createElement("div",{key:"clipArea",className:Le("clip-area","snap-control"),style:{width:"".concat(we,"px"),height:"".concat(Ie,"px"),transform:"translate(".concat(ut,"px, ").concat(je,"px)"),clipPath:"polygon(".concat(ge.map(function(We){return"".concat(We[0]-ut,"px ").concat(We[1]-je,"px")}).join(", "),")")}}))}}return z&&["vertical","horizontal"].forEach(function($e){var We=z[$e],gt=$e==="horizontal";We.isSnap&&j.push.apply(j,Se([],J(We.snap.posInfos.map(function(wt,Me){var Fe=wt.pos,Pt=qe(dn(m,gt?[0,Fe]:[Fe,0],C),[_,E]),mn=qe(dn(m,gt?[h,Fe]:[Fe,p],C),[_,E]);return $h(e,"",Pt,mn,o,"clip".concat($e,"snap").concat(Me),"guideline")})),!1)),We.isBound&&j.push.apply(j,Se([],J(We.bounds.map(function(wt,Me){var Fe=wt.pos,Pt=qe(dn(m,gt?[0,Fe]:[Fe,0],C),[_,E]),mn=qe(dn(m,gt?[h,Fe]:[Fe,p],C),[_,E]);return $h(e,"",Pt,mn,o,"clip".concat($e,"bounds").concat(Me),"guideline","bounds","bold")})),!1))}),Se(Se([],J(F),!1),J(j),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Z(Z({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",p=e.datas,m=vD(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,_=m.type,E=m.poses,S=Ne(t,"onClipStart",ot(t,e,{clipType:_,clipStyle:b,poses:E.map(function(A){return A.pos})}));return S===!1?(p.isClipStart=!1,!1):(p.isControl=h&&h.indexOf("clip-control")>-1,p.isLine=h.indexOf("clip-line")>-1,p.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,p.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,p.clipPath=m,p.isClipStart=!0,n.clipPathState=b,Mc(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,p=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var _=bc(t.props,"clippable"),E=_.keepRatio,S=0,A=0,D=o.draggable,R=is(e);c&&D?(n=J(D.prevBeforeDist,2),S=n[0],A=n[1]):(r=J(R,2),S=r[0],A=r[1]);var P=[S,A],z=t.state,M=z.width,T=z.height,C=!p&&!d&&!h,k=b.type,O=b.poses,L=b.splitter,F=O.map(function(dt){return dt.pos});C&&(S=-S,A=-A);var j=!d||O[m].direction==="nesw",X=k==="inset"||k==="rect",$=O.map(function(){return[0,0]});if(d&&!j){var H=O[m],Y=H.horizontal,te=H.vertical,ce=[S*xe(Y),A*xe(te)];$=SH(O,m,ce,X,E)}else j&&($=F.map(function(){return[S,A]}));var pe=F.map(function(dt,Qt){return Tt(dt,$[Qt])}),B=Se([],J(pe),!1);z.snapBoundInfos=null;var Q=b.type==="circle",K=b.type==="ellipse";if(Q||K){var ne=Gi(pe),ue=xe(ne.bottom-ne.top),de=xe(K?ne.right-ne.left:ue),ge=pe[0][1]+ue,Te=pe[0][0]-de,De=pe[0][0]+de;Q&&(B.push([De,ne.bottom]),$.push([1,0])),B.push([ne.left,ge]),$.push([0,1]),B.push([Te,ne.bottom]),$.push([1,0])}var Ye=JP((_.clipHorizontalGuidelines||[]).map(function(dt){return Ht("".concat(dt),T)}),(_.clipVerticalGuidelines||[]).map(function(dt){return Ht("".concat(dt),M)}),M,T),we=[],Ie=[];if(Q||K)we=[B[4][0],B[2][0]],Ie=[B[1][1],B[3][1]];else if(X){var ut=[B[0],B[2],B[4],B[6]],je=[$[0],$[2],$[4],$[6]];we=ut.filter(function(dt,Qt){return je[Qt][0]}).map(function(dt){return dt[0]}),Ie=ut.filter(function(dt,Qt){return je[Qt][1]}).map(function(dt){return dt[1]})}else we=B.filter(function(dt,Qt){return $[Qt][0]}).map(function(dt){return dt[0]}),Ie=B.filter(function(dt,Qt){return $[Qt][1]}).map(function(dt){return dt[1]});var $e=[0,0],We=tD(Ye,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:T},we,Ie,5,5),gt=We.horizontal,wt=We.vertical,Me=gt.offset,Fe=wt.offset;if(gt.isBound&&($e[1]+=Me),wt.isBound&&($e[0]+=Fe),(K||Q)&&$[0][0]===0&&$[0][1]===0){var ne=Gi(pe),Pt=ne.bottom-ne.top,mn=K?ne.right-ne.left:Pt,Xt=wt.isBound?xe(Fe):wt.snapIndex===0?-Fe:Fe,pt=gt.isBound?xe(Me):gt.snapIndex===0?-Me:Me;mn-=Xt,Pt-=pt,Q&&(Pt=HP(wt,gt)>0?Pt:mn,mn=Pt);var At=B[0];B[1][1]=At[1]-Pt,B[2][0]=At[0]+mn,B[3][1]=At[1]+Pt,B[4][0]=At[0]-mn}else if(X&&E&&d){var Bt=J(EO(O),2),or=Bt[0],Ur=Bt[1],ss=or&&Ur?or/Ur:0,Ws=O[m],wi=Ws.direction||"",yr=B[1][1],ge=B[5][1],Te=B[7][0],De=B[3][0];xe(Me)<=xe(Fe)?Me=Or(Me)*xe(Fe)/ss:Fe=Or(Fe)*xe(Me)*ss,wi.indexOf("w")>-1?Te-=Fe:wi.indexOf("e")>-1?De-=Fe:(Te+=Fe/2,De-=Fe/2),wi.indexOf("n")>-1?yr-=Me:wi.indexOf("s")>-1?ge-=Me:(yr+=Me/2,ge-=Me/2);var kr=Vv(yr,De,ge,Te);B.forEach(function(Re,Ue){var Nt;Nt=J(kr[Ue].pos,2),Re[0]=Nt[0],Re[1]=Nt[1]})}else B.forEach(function(dt,Qt){var Zt=$[Qt];Zt[0]&&(dt[0]-=Fe),Zt[1]&&(dt[1]-=Me)});var vn=gE(t,b,pe),tr="".concat(k,"(").concat(vn.join(L),")");if(z.clipPathState=tr,Q||K)we=[B[4][0],B[2][0]],Ie=[B[1][1],B[3][1]];else if(X){var ut=[B[0],B[2],B[4],B[6]];we=ut.map(function(Qt){return Qt[0]}),Ie=ut.map(function(Qt){return Qt[1]})}else we=B.map(function(dt){return dt[0]}),Ie=B.map(function(dt){return dt[1]});if(z.snapBoundInfos=tD(Ye,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:T},we,Ie,1,1),D){var Wt=z.is3d,Qs=z.allMatrix,ga=Wt?4:3,ma=$e;c&&(ma=[P[0]+$e[0]-R[0],P[1]+$e[1]-R[1]]),D.deltaOffset=$t(Qs,[ma[0],ma[1],0,0],ga)}return Ne(t,"onClip",ot(t,e,Z({clipEventType:"changed",clipType:k,poses:pe,clipStyle:tr,clipStyles:vn,distX:S,distY:A},zr((i={},i[k==="rect"?"clip":"clipPath"]=tr,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Ne(t,"onClipEnd",xi(t,e,{})),i&&(c?AH(t,e):a&&TH(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},IH={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Wn(e.inputEvent.target,Le("origin"))},dragControlStart:function(t,e){var n=e.datas;Mc(t,e);var r=ot(t,e,{dragStart:Pr.dragStart(t,new sd().dragStart([0,0],e))}),i=Ne(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=J(is(e),2),o=a[0],c=a[1],u=t.state,d=u.width,h=u.height,p=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,_=t.props.originRelative,E=_===void 0?!0:_,S=b?4:3,A=[o,c];if(i){var D=e.distOrigin;(D[0]||D[1])&&(A=D)}var R=Tt(n.startOrigin,A),P=Tt(n.startTargetOrigin,A),z=qe(A,n.prevOrigin),M=Rp(p,m,R,S),T=t.getRect(),C=Gi(Pc(M,d,h,S)),k=[T.left-C.left,T.top-C.top];n.prevOrigin=A;var O=[ia(P[0],d,E),ia(P[1],h,E)].join(" "),L=Pr.drag(t,Dp(e,t.state,k,!!r)),F=ot(t,e,Z(Z({width:d,height:h,origin:R,dist:A,delta:z,transformOrigin:O,drag:L},zr({transformOrigin:O,transform:L.transform},e)),{afterTransform:L.transform}));return Ne(t,"onDragOrigin",F),F},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ne(t,"onDragOriginEnd",xi(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function DH(t,e,n,r){var i=t.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=t.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];RH(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function RH(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function kH(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function yD(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=al(t),wO(a,e,n,0,0,r,i)}function bD(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=pE(i,t.props.roundRelative,o,c),d=u.raws,h=u.styles,p=u.radiusPoses,m=_H(p,d),b=m.horizontals,_=m.verticals,E=h.join(" ");a.borderRadiusState=E;var S=ot(t,e,Z({horizontals:b,verticals:_,borderRadius:E,width:o,height:c,delta:r,dist:n},zr({borderRadius:E},e)));return Ne(t,"onRound",S),S}function xD(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=cE(o).borderRadius,r.borderRadius=i))}return i}var NH={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Le("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,p=t.props,m=p.minRoundControls,b=m===void 0?[0,0]:m,_=p.maxRoundControls,E=_===void 0?[4,4]:_,S=p.zoom,A=p.roundPadding,D=A===void 0?0:A,R=p.isDisplayShadowRoundControls,P=p.groupable;if(!r)return null;var z=h||xD(t),M=c?4:3,T=yD(z,i,a,b,!0);if(!T)return null;var C=0,k=0,O=P?[0,0]:[u,d];return T.map(function(L,F){var j=L.horizontal,X=L.vertical,$=L.direction||"",H=Se([],J(L.pos),!1);k+=Math.abs(j),C+=Math.abs(X),j&&$.indexOf("n")>-1&&(H[1]-=D),X&&$.indexOf("w")>-1&&(H[0]-=D),j&&$.indexOf("s")>-1&&(H[1]+=D),X&&$.indexOf("e")>-1&&(H[0]+=D);var Y=qe(dn(o,H,M),O),te=R&&R!=="horizontal",ce=L.vertical?C<=E[1]&&(te||!L.virtual):k<=E[0]&&(R||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(F),className:Le("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":F,style:{display:ce?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var p=ot(t,e,{}),m=Ne(t,"onRoundStart",p);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,Mc(t,e);var b=t.props,_=b.roundRelative,E=b.minRoundControls,S=E===void 0?[0,0]:E,A=t.state,D=A.width,R=A.height;r.isRound=!0,r.prevDist=[0,0];var P=xD(t),z=yD(P||"",D,R,S,!0)||[];return r.controlPoses=z,A.borderRadiusState=pE(z,_,D,R).styles.join(" "),p},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=J(is(e),2),o=a[0],c=a[1],u=[o,c],d=qe(u,n.prevDist),h=t.props.maxRoundControls,p=h===void 0?[4,4]:h,m=t.state,b=m.width,_=m.height,E=r[i],S=E.vertical,A=E.horizontal,D=r.map(function(P){var z=P.horizontal,M=P.vertical,T=[z*A*u[0],M*S*u[1]];if(z){if(p[0]===1)return T;if(p[0]<4&&z!==A)return T}else{if(p[1]===0)return T[1]=M*A*u[0]/b*_,T;if(S){if(p[1]===1)return T;if(p[1]<4&&M!==S)return T}}return[0,0]});D[i]=u;var R=r.map(function(P,z){return Z(Z({},P),{pos:Tt(P.pos,D[z])})});return i<4?R.slice(0,i+1).forEach(function(P){P.virtual=!1}):R.slice(4,i+1).forEach(function(P){P.virtual=!1}),n.prevDist=[o,c],bD(t,e,u,d,R)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(A){var D=A.virtual;return D}).length,p=t.props.roundClickable,m=p===void 0?!0:p;if(i&&m){if(a&&(m===!0||m==="control"))kH(d,o);else if(c&&(m===!0||m==="line")){var b=J(CP(t,e),2),_=b[0],E=b[1];DH(d,u,_,E)}h!==d.filter(function(A){var D=A.virtual;return D}).length&&bD(t,e,[0,0],[0,0],d)}var S=xi(t,e,{});return Ne(t,"onRoundEnd",S),n.borderRadiusState="",S},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ca(t,"roundable",e),o=Z({targets:t.props.targets,events:a.map(function(c,u){return Z(Z({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return Ne(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ca(t,"roundable",e),o=Z({targets:t.props.targets,events:a.map(function(c,u){return Z(Z(Z({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),zr({borderRadius:n.borderRadius},c))})},n);return Ne(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=ca(t,"roundable",e);N0(t,"onRound",function(c){var u=Z({targets:t.props.targets,events:i.map(function(d,h){return Z(Z(Z({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),zr({borderRadius:c.borderRadius},d))})},c);Ne(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=Z({targets:t.props.targets,events:i.map(function(c,u){var d;return Z(Z({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Ne(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function MH(t,e){var n=e?4:3,r=tn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var SO={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(pP(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=MH(c,r)?[]:al(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ot(t,e,{setTransform:function(n){e.datas.startTransforms=Gn(n)?n:al(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ot(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ne(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ne(t,"onBeforeRender",ot(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ne(t,"onBeforeRenderEnd",ot(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ca(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});Ne(t,"onBeforeRenderGroupStart",ot(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ca(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});Ne(t,"onBeforeRenderGroup",ot(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ne(t,"onBeforeRenderGroupEnd",ot(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},TO={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ne(t,"onRenderStart",ot(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ne(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ne(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ne(t,"onRenderGroupStart",ot(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ca(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});Ne(t,"onRenderGroup",ot(t,e,Z(Z({isPinch:!!e.isPinch,targets:t.props.targets,transform:Im(e),transformObject:{}},zr(Dm(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=ca(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});Ne(t,"onRenderGroupEnd",ot(t,e,Z({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Im(e)},zr(Dm(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return ad(Dv(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ot(t,e,Z({isPinch:!!e.isPinch,transformObject:n,transform:Im(e)},zr(Dm(e))))},fillDragEndParams:function(t,e){var n={};return ad(Dv(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ot(t,e,Z({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Im(e)},zr(Dm(e))))}};function _h(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=t.state.target,p=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!p&&t.areaElement===a.inputEvent.target)return!1;var b=Se([],J(e),!1);if(p){var _=a.requestAble;b.some(function(F){return F.name===_})||b.push.apply(b,Se([],J(t.props.ables.filter(function(F){return F.name===_})),!1))}if(!b.length||b.every(function(F){return F.dragRelation}))return!1;var E=a.inputEvent,S;u&&E&&(S=document.elementFromPoint(a.clientX,a.clientY)||E.target);var A=!1,D=function(){var F;A=!0,(F=a.stop)===null||F===void 0||F.call(a)},R=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());R&&t.updateRect(i,!0,!1);var P=a.datas,z=m?"controlGesto":"targetGesto",M=t[z],T=function(F,j,X){if(!(j in F)||M!==t[z])return!1;var $=F.name,H=P[$]||(P[$]={});if(c&&(H.isEventStart=!X||!F[X]||F[X](t,a)),!H.isEventStart)return!1;var Y=F[j](t,Z(Z({},a),{stop:D,datas:H,originalDatas:P,inputTarget:S}));return t._emitter.off(),c&&Y===!1&&(H.isEventStart=!1),Y};R&&b.forEach(function(F){F.unset&&F.unset(t)}),T(SO,"drag".concat(r).concat(i));var C=0,k=0;n.forEach(function(F){if(A)return!1;var j="".concat(F).concat(r).concat(i),X="".concat(F).concat(r,"Condition");i===""&&!p&&nH(t.state,a);var $=b.filter(function(te){return te[j]});$=$.filter(function(te,ce){return te.name&&$.indexOf(te)===ce});var H=$.filter(function(te){return T(te,j,X)}),Y=H.length;A&&++C,Y&&++k,!A&&c&&$.length&&!Y&&(C+=$.filter(function(te){var ce=te.name,pe=P[ce];return pe.isEventStart?te.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&T(TO,"drag".concat(r).concat(i));var O=M!==t[z]||C===n.length;if((u||A||O)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(F){F.state.gestos={}}),b.forEach(function(F){F.unset&&F.unset(t)})),c&&!O&&!p&&k&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||O)return!1;if(!c&&k&&!o||u){var L=t.props.flushSync||nO;L(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&_h(t,e,n,r,i+"After",a),!0}function mE(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||Wn(a,"moveable-area")||Wn(a,"moveable-padding")||Wn(a,"moveable-edgeDraggable")}}function AO(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=mE(t);return IO(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function CO(t,e){var n=t.controlBox,r=[];r.push(n);var i=mE(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return IO(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function IO(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,p=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,_=b===void 0?!0:b,E=o.preventRightClick,S=E===void 0?!0:E,A=o.preventWheelClick,D=A===void 0?!0:A,R=o.dragContainer,P=qa(R,!0),z={preventDefault:_,preventRightClick:S,preventWheelClick:D,container:P||Wo(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?p:!1,dragFocusedInput:m},M=new sG(e,z),T=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(k){M.on("".concat(C).concat(k),function(O){var L,F=O.eventType,j=C==="drag"&&O.isPinch;if(i[F]&&!i[F](O)){O.stop();return}if(!j){var X=C==="drag"?[C]:["drag",C],$=Se([],J(t[n]),!1),H=_h(t,$,X,r,k,O);H?(t.props.stopPropagation||k==="Start"&&T)&&((L=O?.inputEvent)===null||L===void 0||L.stopPropagation()):O.stop()}})})}),M}var PH=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function OH(t,e,n,r){var i;n===void 0&&(n=e);var a=MP(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,p=a.offsetContainer,m=a.hasFixed,b=a.zoom,_=XG(p,n),E=_.matrixes,S=_.is3d,A=_.offsetContainer,D=_.zoom,R=r,P=4,z=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,M=u,T=tn(P),C=tn(P),k=tn(P),O=tn(P),L=o.length,F=E.map(function(ce){return Z(Z({},ce),{matrix:ce.matrix?Se([],J(ce.matrix),!1):void 0})}).reverse();o.reverse(),!c&&R&&(M=fa(M,3,4),i_(o)),!S&&R&&i_(F),F.forEach(function(ce){C=$t(C,ce.matrix,P)});var j=n||pl(t),X=((i=F[0])===null||i===void 0?void 0:i.target)||Yh(j,j,!0).offsetParent,$=F.slice(1).reduce(function(ce,pe){return $t(ce,pe.matrix,P)},tn(P));o.forEach(function(ce,pe){if(L-2===pe&&(k=T.slice()),L-1===pe&&(O=T.slice()),!ce.matrix){var B=o[pe+1],Q=Zq(ce,B,X,P,$t($,T,P));ce.matrix=vc(Q,P)}T=$t(T,ce.matrix,P)});var H=!z&&c;M||(M=tn(H?4:3));var Y=k0(z&&M.length===16?fa(M,4,3):M,H),te=C;return C=fP(C,P,P),{hasZoom:b!==1||D!==1,hasFixed:m,matrixes:o,rootMatrix:C,originalRootMatrix:te,beforeMatrix:k,offsetMatrix:O,allMatrix:T,targetMatrix:M,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:h,is3d:R,offsetContainer:p,offsetRootContainer:A}}function VH(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=sO(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var d=OH(t,e,n,r),h=Qu(d.allMatrix,d.transformOrigin,i,a);c=Z(Z({},d),h);var p=Qu(d.allMatrix,[50,50],100,100);o=oO([p.pos1,p.pos2],p.direction)}var m=4;return Z(Z(Z({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:tn(m),rootMatrix:tn(m),beforeMatrix:tn(m),offsetMatrix:tn(m),allMatrix:tn(m),targetMatrix:tn(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function l_(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=km(),d=km(),h=km(),p=km(),m=[0,0],b={},_=VH(e,n,i,!0);if(e){var E=ai(e);a.forEach(function(F){b[F]=E(F)});var S=_.is3d?4:3,A=Qu(_.offsetMatrix,Tt(_.transformOrigin,hP(_.targetMatrix,S)),_.width,_.height);o=A.direction,c=Tt(A.origin,[A.left-_.left,A.top-_.top]),p=xh(_.offsetRootContainer);var D=Yh(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var R=Qu($t(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),P=Qu(_.originalRootMatrix,Mv(ai(D)("transformOrigin")).map(function(F){return parseFloat(F)}),D.offsetWidth,D.offsetHeight);if(u=U1(R,p),h=U1(P,p,D,!0),t){var z=R.left,M=R.top;d=U1({left:z,top:M,bottom:M,right:M},p)}}else{u=xh(e),h=KG(D),t&&(d=xh(t));var T=h.left,C=h.top,k=h.clientLeft,O=h.clientTop,L=[u.left-T,u.top-C];m=qe(cd(_.rootMatrix,L,4),[k+_.left,O+_.top])}}return Z({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:p,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:b,offsetDelta:m},_)}function _D(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=yc([e,n,r,i]),o=[a.minX,a.minY],c=qe(t.origin,o);return e=qe(e,o),n=qe(n,o),r=qe(r,o),i=qe(i,o),Z(Z({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var ud=(function(t){Cp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=Z({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},l_(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new E0,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}QU(n._observerId),n._observerId=BM(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,p=n.groupable,m=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=J(i||[0,0],2),E=_[0],S=_[1],A=r.left,D=r.top,R=r.target,P=r.direction,z=r.hasFixed,M=r.offsetDelta,T=n.targets,C=this.isDragging(),k={};this.getEnabledAbles().forEach(function($){k["data-able-".concat($.name.toLowerCase())]=!0});var O=this._getAbleClassName(),L=T&&T.length&&(R||p)||o||!this._hasFirstTarget&&this.state.isPersisted,F=this.controlBox||this.props.firstRenderState||this.props.persistData,j=[A-E,D-S];!p&&n.useAccuratePosition&&(j[0]+=M[0],j[1]+=M[1]);var X={position:z?"fixed":"absolute",display:L?"block":"none",visibility:F?"visible":"hidden",transform:"translate3d(".concat(j[0],"px, ").concat(j[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(X["--moveable-line-padding"]=m),b&&(X["--moveable-control-padding"]=b),la(h,Z({cspNonce:u,ref:Ns(this,"controlBox"),className:"".concat(Le("control-box",P===-1?"reverse":"",C?"dragging":"")," ").concat(O," ").concat(a)},k,{onClick:this._onPreventClick,style:X}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),$u(this,!1),$u(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return ii(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(Qw)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&mE(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Od(n)){var p=n.getBoundingClientRect();h={left:p.left,top:p.top,width:p.width,height:p.height}}else h=Z({width:0,height:0},n);var m=h.left,b=h.top,_=h.width,E=h.height,S=q2([a,o,u,c],d),A=eG(S,[[m,b],[m+_,b],[m+_,b+E],[m,b+E]]),D=vP(S);return!A||!D?0:Math.min(100,A/D*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?Hx([n,r],q2([o,c,d,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&od(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),p=c?c._rootContainer:this._rootContainer,m=l_(this.controlBox,d,h,h,p||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=_D(a.persistData);for(var _ in b)m[_]=b[_]}o&&od(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Yi(this.state),i=J(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=Gi(r),h=n.width,p=n.height,m=d.width,b=d.height,_=d.left,E=d.top,S=[n.left,n.top],A=Tt(S,n.origin),D=Tt(S,n.beforeOrigin),R=n.transformOrigin;return{width:m,height:b,left:_,top:E,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:p,beforeOrigin:D,origin:A,transformOrigin:R,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&a_(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&a_(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return aH(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=ii(u,function(A){return A.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var p=h.request(a),m=i||r.isInstant,b=p.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(p.isControl?"Control":""),E=Se([],J(c[b]),!1),S={request:function(A){return _h(a,E,["drag"],_,"",Z(Z({},p.request(A)),{requestAble:n,isRequest:!0}),m),S},requestEnd:function(){return _h(a,E,["drag"],_,"End",Z(Z({},p.requestEnd()),{requestAble:n,isRequest:!0}),m),S}};return _h(a,E,["drag"],_,"Start",Z(Z({},p.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,p=n.pos3,m=n.pos4,b=n.left,_=n.top,E=n.isPersisted,S=r.zoom||1;if(!i&&S<=1){n.renderPoses=[d,h,p,m],n.renderLines=[[d,h],[h,m],[m,p],[p,d]];return}var A=vO(i||{}),D=A.left,R=A.top,P=A.bottom,z=A.right,M=u?4:3,T=[];E?T=o:this.controlBox&&r.groupable?T=a:T=Tt(a,[b,_]);var C=Cv(M,vc(T.map(function(X){return-X}),M),c,vc(o,M)),k=Vi(C,d,[-D,-R],M),O=Vi(C,h,[z,-R],M),L=Vi(C,p,[-D,P],M),F=Vi(C,m,[z,P],M);n.renderPoses=[k,O,L,F],n.renderLines=[[k,O],[O,F],[F,L],[L,k]];{var j=S/2;n.renderLines=[[Vi(C,d,[-D-j,-R],M),Vi(C,h,[z+j,-R],M)],[Vi(C,h,[z,-R-j],M),Vi(C,m,[z,P+j],M)],[Vi(C,m,[z+j,P],M),Vi(C,p,[-D-j,P],M)],[Vi(C,p,[-D,P+j],M),Vi(C,d,[-D,-R-j],M)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!s_(c,r),h=d||!s_(u,i);if(h){var p=i||this.controlBox;p&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&p&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=xP(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=_D(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=Nm(o,[c,u],a),p=Nm(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=p},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:la};return this.renderState={},tH(hO(Nm(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Se(Se([],J(r),!1),J(c),!1)},Se([],J(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&($u(this,!1),this.updateState({gestos:{}})),r||$u(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=AO(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=CO(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=qa(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:la};return u.renderLines.map(function(h,p){return $h(d,"",h[0],h[1],i,"render-line-".concat(p))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Bs(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var p=Nm(d,[h]),m=p.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new PH(i,n,h),a[h]=b),b.setAbles(p)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=qa(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=qa(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Se(Se([],J(this._getAbleViewClassNames()),!1),[this.isDragging()?fH:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=fO(n.filter(Boolean),function(d){return d}).map(function(d){var h=J(d,1),p=h[0];return p}),a=this._viewClassNames,o=wp(a,i),c=o.removed,u=o.added;c.forEach(function(d){HM(r,a[d])}),u.forEach(function(d){qM(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,p,m,b=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((p=c[b])===null||p===void 0)&&p.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Le("".concat(b).concat(n,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=Wo(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=Wo(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,p;try{for(var m=vG(d),b=m.next();!b.done;b=m.next()){var _=b.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(E){h={error:E}}finally{try{b&&!b.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:nO,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(ZM),vE={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=t.renderGroupRects,p=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=p.map(function(){return null}):p=[];var m=Yu(t,"parentPosition",[o,c],function(_){return _.join(",")}),b=Yu(t,"requestStyles",t.getRequestChildStyles(),function(_){return _.join(",")});return t.moveables=t.moveables.slice(0,i.length),Se(Se([],J(i.map(function(_,E){return e.createElement(ud,{key:"moveable"+E,ref:VM(t,"moveables",E),target:_,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:p[E],zoom:d})})),!1),J(hO(h.map(function(_,E){var S=_.pos1,A=_.pos2,D=_.pos3,R=_.pos4,P=[S,A,D,R];return[[0,1],[1,3],[3,2],[2,0]].map(function(z,M){var T=J(z,2),C=T[0],k=T[1];return $h(e,"",qe(P[C],m),qe(P[k],m),d,"group-rect-".concat(E,"-").concat(M))})}))),!1)}},jH=Ip("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);Ne(t,"onClick",ot(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Ls(i,function(u){return u.contains(r)}),c=a>-1),Ne(t,"onClickGroup",ot(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Eu(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Z(Z({},t),{datas:e})}var zH=Ip("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?VP(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wn(i,Le("direction"))&&Wn(i,Le("edge"))&&Wn(i,Le("edgeDraggable"))},dragStart:function(t,e){return Pr.dragStart(t,Eu(e))},drag:function(t,e){return Pr.drag(t,Eu(e))},dragEnd:function(t,e){return Pr.dragEnd(t,Eu(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wn(i,Le("direction"))&&Wn(i,Le("line"))},dragGroupStart:function(t,e){return Pr.dragGroupStart(t,Eu(e))},dragGroup:function(t,e){return Pr.dragGroup(t,Eu(e))},dragGroupEnd:function(t,e){return Pr.dragGroupEnd(t,Eu(e))},unset:function(t){return Pr.unset(t)}}),DO={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},yE=[SO,xO,Uq,oH,Pr,zH,t_,lH,uH,Sq,gH,mH,hH,IH,CH,NH,vE,DO,jH,bO,TO],LH=yE.reduce(function(t,e){return(e.events||[]).forEach(function(n){GM(t,n)}),t},[]),BH=yE.reduce(function(t,e){return(e.props||[]).forEach(function(n){GM(t,n)}),t},[]);function wD(t,e){var n=J(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Om(t,e){var n=J(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function ED(t,e){return Math.max.apply(Math,Se([],J(t.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function SD(t,e){return Math.min.apply(Math,Se([],J(t.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function FH(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var p=nt(e,Fr);if(p%90){var m=p/180*Math.PI,b=Math.tan(m),_=-1/b,E=[Qx,Y2],S=[[0,0],[0,0]],A=[Qx,Y2],D=[[0,0],[0,0]];t.forEach(function(K){K.forEach(function(ne){var ue=wD([-b,1,0],ne),de=wD([-_,1,0],ne);E[0]>ue&&(S[0]=ne,E[0]=ue),E[1]<ue&&(S[1]=ne,E[1]=ue),A[0]>de&&(D[0]=ne,A[0]=de),A[1]<de&&(D[1]=ne,A[1]=de)})});var R=J(S,2),P=R[0],z=R[1],M=J(D,2),T=M[0],C=M[1],k=[-b,1,Om([-b,1],P)],O=[-b,1,Om([-b,1],z)],L=[-_,1,Om([-_,1],T)],F=[-_,1,Om([-_,1],C)];n=J([[k,L],[k,F],[O,L],[O,F]].map(function(K){var ne=J(K,2),ue=ne[0],de=ne[1];return Xw(ue,de)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=A[1]-A[0],h=E[1]-E[0]}else{var j=SD(t,0),X=SD(t,1),$=ED(t,0),H=ED(t,1);if(a=[j,X],o=[$,X],c=[j,H],u=[$,H],d=$-j,h=H-X,p%180){var Y=[c,a,u,o];r=J(Y,4),a=r[0],o=r[1],c=r[2],u=r[3],d=H-X,h=$-j}}if(p%360>180){var Y=[u,c,o,a];i=J(Y,4),a=i[0],o=i[1],c=i[2],u=i[3]}var te=yc([a,o,c,u]),ce=te.minX,pe=te.minY,B=te.maxX,Q=te.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:ce,minY:pe,maxX:B,maxY:Q,rotation:e}}function RO(t,e){var n=e.map(function(r){if(Gn(r)){var i=RO(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=ii(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Gn(n[0])?n[0]:n}var UH=(function(t){Cp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new mP,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;od(!0),this.moveables.forEach(function(Te){Te.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(Te){return{finded:!1,manager:Te}}),p=this.props.targetGroups||[],m=RO(h,p),b=c.useDefaultGroupRotate;m.push.apply(m,Se([],J(h.filter(function(Te){var De=Te.finded;return!De}).map(function(Te){var De=Te.manager;return De})),!1));var _=[],E=!r||n!==""&&c.updateGroup,S=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var A=(a=c.persistData)===null||a===void 0?void 0:a.rotation;A!=null&&(S=A)}function D(Te,De,Ye){var we=Te.map(function(wt){if(Gn(wt)){var Me=D(wt,De),Fe=[Me.pos1,Me.pos2,Me.pos3,Me.pos4];return _.push(Me),{poses:Fe,rotation:Me.rotation}}else return{poses:Yi(wt.state),rotation:wt.getRotation()}}),Ie=we.map(function(wt){var Me=wt.rotation;return Me}),ut=0,je=Ie[0],$e=Ie.every(function(wt){return Math.abs(je-wt)<.1});E?ut=!b&&$e?je:S:ut=!b&&!Ye&&$e?je:De;var We=we.map(function(wt){var Me=wt.poses;return Me}),gt=FH(We,ut);return gt}var R=D(m,this.rotation,!0);E&&(this.rotation=R.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=p,this.renderGroupRects=_;var P=this.transformOrigin,z=this.rotation,M=this.scale,T=R.width,C=R.height,k=R.minX,O=R.minY,L=sH([[0,0],[T,0],[0,C],[T,C]],hE(P,T,C),this.rotation/180*Math.PI),F=yc(L.result),j=F.minX,X=F.minY,$=" rotate(".concat(z,"deg)")+" scale(".concat(Or(M[0]),", ").concat(Or(M[1]),")"),H="translate(".concat(-j,"px, ").concat(-X,"px)").concat($);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(O,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(P,";")+"width:".concat(T,"px;height:").concat(C,"px;")+"transform: ".concat(H),o.width=T,o.height=C;var Y=this.getContainer(),te=l_(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ce=[te.left,te.top],pe=J(Yi(te),4),B=pe[0],Q=pe[1],K=pe[2],ne=pe[3],ue=yc([B,Q,K,ne]),de=[ue.minX,ue.minY],ge=Or(M[0]*M[1]);te.pos1=qe(B,de),te.pos2=qe(Q,de),te.pos3=qe(K,de),te.pos4=qe(ne,de),te.left=k-te.left+de[0],te.top=O-te.top+de[1],te.origin=qe(Tt(ce,te.origin),de),te.beforeOrigin=qe(Tt(ce,te.beforeOrigin),de),te.originalBeforeOrigin=Tt(ce,te.originalBeforeOrigin),te.transformOrigin=qe(Tt(ce,te.transformOrigin),de),d.style.transform="translate(".concat(-j-de[0],"px, ").concat(-X-de[1],"px)")+$,od(),this.updateState(Z(Z({},te),{posDelta:de,direction:ge,beforeDirection:ge}),i)},e.prototype.getRect=function(){return Z(Z({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Se(Se([],J(r),!1),J(c),!1)},[]);return n},e.prototype.getMoveables=function(){return Se([],J(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Se(Se([],J(this.props.ables),!1),[vE],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=qa(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,p=u.length||h.length;(p||this._prevOriginalDragTarget!==this._originalDragTarget)&&($u(this,!1),$u(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=AO(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=CO(this,"GroupControl")));var m=!s_(n.container,r.container);m&&(n.container=r.container),(m||p||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!mO(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},e.prototype._updateObserver=function(){},e.defaultProps=Z(Z({},ud.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(ud),GH=(function(t){Cp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,p=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&p.length?u=p.map(function(){return null}):h||(p=[]),la(o,{cspNonce:a,ref:Ns(this,"controlBox"),className:Le("control-box")},u.map(function(m,b){var _,E,S=(E=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,b))!==null&&E!==void 0?E:{};return la(ud,Z({key:"moveable"+b,ref:VM(n,"moveables",b)},i,S,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:p[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),od(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),od()},e.prototype.getRect=function(){return Z(Z({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,Z(Z({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=ii(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Se([],J(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(ud);function kO(t,e){var n=[];return t.forEach(function(r){if(r){if(ri(r)){e[r]&&n.push.apply(n,Se([],J(e[r]),!1));return}Gn(r)?n.push.apply(n,Se([],J(kO(r,e)),!1)):n.push(r)}}),n}function NO(t,e){var n=[];return t.forEach(function(r){if(r){if(ri(r)){e[r]&&n.push.apply(n,Se([],J(e[r]),!1));return}Gn(r)?n.push(NO(r,e)):n.push(r)}}),n}function MO(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Gn(n)&&Gn(i)?MO(n,i):!0:!1})}var qH=(function(t){Cp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new mP,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=Bs(n).join(`
`);this.defaultStyled=xP("div",LU(Qw,IG+i))},e.getTotalAbles=function(){return Se([xO,vE,DO,bO],J(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=gG(i,["ables","props"]),u=J(this._updateRefs(!0),2),d=u[0],h=u[1],p=kO(d,h),m=p.length>1,b=r.getTotalAbles(),_=Se(Se([],J(b),!1),J(a||[]),!1),E=Z(Z(Z({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=p;var S=null,A=this.moveable,D=c.persistData;if(D?.children&&(m=!0),c.individualGroupable)return la(GH,Z({key:"individual-group",ref:Ns(this,"moveable")},E,{target:null,targets:p}));if(m){var R=NO(d,h);if(A&&!A.props.groupable&&!A.props.individualGroupable){var P=A.props.target;P&&p.indexOf(P)>-1&&(S=Z({},A.state))}return la(UH,Z({key:"group",ref:Ns(this,"moveable")},E,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:p,targetGroups:R,firstRenderState:S}))}else{var z=p[0];if(A&&(A.props.groupable||A.props.individualGroupable)){var M=A.moveables||[],T=ii(M,function(C){return C.props.target===z});T&&(S=Z({},T.state))}return la(ud,Z({key:"single",ref:Ns(this,"moveable")},E,{target:z,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=fE(this.props.target||this.props.targets),a=typeof document<"u",o=MO(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(ri(h)){var p=c[h];p?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Gn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=J(this._updateRefs(),3),h=d[0],p=d[1],m=d[2];this.refTargets=h,this.selectorMap=p,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,mG([BU(AP)],e.prototype,"moveable",void 0),e})(ZM),HH=(function(t){Cp(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=yE,e})(qH),c_=function(t,e){return c_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},c_(t,e)};function bE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Kh=function(){return Kh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kh.apply(this,arguments)};function $H(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var YH=(function(t){bE(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return la(HH,Kh({ref:Ns(this,"moveable")},this.state))},e})(Gw),KH=BH,XH=AP,WH=LH,QH=(function(t){bE(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Kh({},i),c={};WH.forEach(function(h){c[WU("on ".concat(h))]=function(p){return a.trigger(h,p)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Pd(r).createElement("div"),r.appendChild(u)),a.containerProvider=F2(la(YH,Kh({ref:Ns(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Gn(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;F2(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=$H([N2(XH,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),N2(KH,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(E0),ZH=(function(t){bE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QH);const TD=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(b=>b(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},JH=(t=>t?TD(t):TD),e$=t=>t;function t$(t,e=e$){const n=gm.useSyncExternalStore(t.subscribe,gm.useCallback(()=>e(t.getState()),[t,e]),gm.useCallback(()=>e(t.getInitialState()),[t,e]));return gm.useDebugValue(n),n}const AD=t=>{const e=JH(t),n=r=>t$(e,r);return Object.assign(n,e),n},M0=(t=>t?AD(t):AD);function n$(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const u_=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return u_(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return u_(r)(n)}}}},r$=(t,e)=>(n,r,i)=>{let a={storage:n$(()=>localStorage),partialize:E=>E,version:0,merge:(E,S)=>({...S,...E}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...E)},r,i);const h=()=>{const E=a.partialize({...r()});return d.setItem(a.name,{state:E,version:a.version})},p=i.setState;i.setState=(E,S)=>(p(E,S),h());const m=t((...E)=>(n(...E),h()),r,i);i.getInitialState=()=>m;let b;const _=()=>{var E,S;if(!d)return;o=!1,c.forEach(D=>{var R;return D((R=r())!=null?R:m)});const A=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(E=r())!=null?E:m))||void 0;return u_(d.getItem.bind(d))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const R=a.migrate(D.state,D.version);return R instanceof Promise?R.then(P=>[!0,P]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var R;const[P,z]=D;if(b=a.merge(z,(R=r())!=null?R:m),n(b,!0),P)return h()}).then(()=>{A?.(b,void 0),b=r(),o=!0,u.forEach(D=>D(b))}).catch(D=>{A?.(void 0,D)})};return i.persist={setOptions:E=>{a={...a,...E},E.storage&&(d=E.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(u.add(E),()=>{u.delete(E)})},a.skipHydration||_(),b||m},xE=r$;var Ku=9e15,gl=1e9,d_="0123456789abcdef",jv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",zv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f_={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ku,maxE:Ku,crypto:!1},PO,Cs,et=!0,P0="[DecimalError] ",ll=P0+"Invalid argument: ",OO=P0+"Precision limit exceeded",VO=P0+"crypto unavailable",jO="[object Decimal]",Rr=Math.floor,Xn=Math.pow,i$=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,a$=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,s$=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zO=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ua=1e7,Xe=7,o$=9007199254740991,l$=jv.length-1,h_=zv.length-1,_e={toStringTag:jO};_e.absoluteValue=_e.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Be(t)};_e.ceil=function(){return Be(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(ll+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};_e.comparedTo=_e.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,d=t.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};_e.cosine=_e.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=c$(r,GO(r,n)),r.precision=t,r.rounding=e,Be(Cs==2||Cs==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};_e.cubeRoot=_e.cbrt=function(){var t,e,n,r,i,a,o,c,u,d,h=this,p=h.constructor;if(!h.isFinite()||h.isZero())return new p(h);for(et=!1,a=h.s*Xn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=vr(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Xn(n,1/3),t=Rr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new p(n),r.s=h.s):r=new p(a.toString()),o=(t=p.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Kt(d.plus(h).times(c),d.plus(u),o+2,1),vr(c.d).slice(0,o)===(n=vr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Be(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Be(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return et=!0,Be(r,t,p.rounding,e)};_e.decimalPlaces=_e.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Rr(this.e/Xe))*Xe,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};_e.dividedBy=_e.div=function(t){return Kt(this,new this.constructor(t))};_e.dividedToIntegerBy=_e.divToInt=function(t){var e=this,n=e.constructor;return Be(Kt(e,new n(t),0,1,1),n.precision,n.rounding)};_e.equals=_e.eq=function(t){return this.cmp(t)===0};_e.floor=function(){return Be(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(t){return this.cmp(t)>0};_e.greaterThanOrEqualTo=_e.gte=function(t){var e=this.cmp(t);return e==1||e===0};_e.hyperbolicCosine=_e.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/V0(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=dd(o,1,a.times(e),new o(1),!0);for(var u,d=t,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Be(a,o.precision=n,o.rounding=r,!0)};_e.hyperbolicSine=_e.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=dd(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/V0(5,t)),i=dd(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=n,Be(i,e,n,!0)};_e.hyperbolicTangent=_e.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Kt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};_e.inverseCosine=_e.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?za(e,r,i):new e(0):new e(NaN):t.isZero()?za(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};_e.inverseHyperbolicCosine=_e.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,et=!1,n=n.times(n).minus(1).sqrt().plus(n),et=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};_e.inverseHyperbolicSine=_e.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,et=!1,n=n.times(n).plus(1).sqrt().plus(n),et=!0,r.precision=t,r.rounding=e,n.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Be(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Kt(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};_e.inverseSine=_e.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=za(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};_e.inverseTangent=_e.atan=function(){var t,e,n,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&p+4<=h_)return o=za(h,p+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(p+4<=h_)return o=za(h,p+4,m).times(.5),o.s=d.s,o}for(h.precision=c=p+10,h.rounding=1,n=Math.min(28,c/Xe+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(et=!1,e=Math.ceil(c/Xe),r=1,u=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),et=!0,Be(o,h.precision=p,h.rounding=m,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&Rr(this.e/Xe)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(t){return this.cmp(t)<0};_e.lessThanOrEqualTo=_e.lte=function(t){return this.cmp(t)<1};_e.logarithm=_e.log=function(t){var e,n,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding,b=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(et=!1,c=p+b,o=Ko(d,c),r=e?Lv(h,c+10):Ko(t,c),u=Kt(o,r,c,1),Xh(u.d,i=p,m))do if(c+=10,o=Ko(d,c),r=e?Lv(h,c+10):Ko(t,c),u=Kt(o,r,c,1),!a){+vr(u.d).slice(i+1,i+15)+1==1e14&&(u=Be(u,p+1,0));break}while(Xh(u.d,i+=10,m));return et=!0,Be(u,p,m)};_e.minus=_e.sub=function(t){var e,n,r,i,a,o,c,u,d,h,p,m,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d?t.s=-t.s:t=new _(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(d=b.d,m=t.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new _(b);else return new _(u===3?-0:0);return et?Be(t,c,u):t}if(n=Rr(t.e/Xe),h=Rr(b.e/Xe),d=d.slice(),a=h-n,a){for(p=a<0,p?(e=d,a=-a,o=m.length):(e=m,n=h,o=d.length),r=Math.max(Math.ceil(c/Xe),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,p=r<o,p&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){p=d[r]<m[r];break}a=0}for(p&&(e=d,d=m,m=e,t.s=-t.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=ua-1;--d[i],d[r]+=ua}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=O0(d,n),et?Be(t,c,u):t):new _(u===3?-0:0)};_e.modulo=_e.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Be(new r(n),r.precision,r.rounding):(et=!1,r.modulo==9?(e=Kt(n,t.abs(),0,3,1),e.s*=t.s):e=Kt(n,t,0,r.modulo,1),e=e.times(t),et=!0,n.minus(e))};_e.naturalExponential=_e.exp=function(){return p_(this)};_e.naturalLogarithm=_e.ln=function(){return Ko(this)};_e.negated=_e.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Be(t)};_e.plus=_e.add=function(t){var e,n,r,i,a,o,c,u,d,h,p=this,m=p.constructor;if(t=new m(t),!p.d||!t.d)return!p.s||!t.s?t=new m(NaN):p.d||(t=new m(t.d||p.s===t.s?p:NaN)),t;if(p.s!=t.s)return t.s=-t.s,p.minus(t);if(d=p.d,h=t.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(t=new m(p)),et?Be(t,c,u):t;if(a=Rr(p.e/Xe),r=Rr(t.e/Xe),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/Xe),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/ua|0,d[i]%=ua;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=O0(d,r),et?Be(t,c,u):t};_e.precision=_e.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ll+t);return n.d?(e=LO(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};_e.round=function(){var t=this,e=t.constructor;return Be(new e(t),t.e+1,e.rounding)};_e.sine=_e.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=d$(r,GO(r,n)),r.precision=t,r.rounding=e,Be(Cs>2?n.neg():n,t,e,!0)):new r(NaN)};_e.squareRoot=_e.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(et=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=vr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=Rr((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(Kt(o,a,n+2,1)).times(.5),vr(a.d).slice(0,n)===(e=vr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Be(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Be(r,u+1,1),t=!r.times(r).eq(o));break}return et=!0,Be(r,u,h.rounding,t)};_e.tangent=_e.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Kt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Be(Cs==2||Cs==4?n.neg():n,t,e,!0)):new r(NaN)};_e.times=_e.mul=function(t){var e,n,r,i,a,o,c,u,d,h=this,p=h.constructor,m=h.d,b=(t=new p(t)).d;if(t.s*=h.s,!m||!m[0]||!b||!b[0])return new p(!t.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?t.s/0:t.s*0);for(n=Rr(h.e/Xe)+Rr(t.e/Xe),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+e,a[i--]=c%ua|0,e=c/ua|0;a[i]=(a[i]+e)%ua|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=O0(a,n),et?Be(t,p.precision,p.rounding):t};_e.toBinary=function(t,e){return _E(this,2,t,e)};_e.toDecimalPlaces=_e.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(si(t,0,gl),e===void 0?e=r.rounding:si(e,0,8),Be(n,t+n.e+1,e))};_e.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qa(r,!0):(si(t,0,gl),e===void 0?e=i.rounding:si(e,0,8),r=Be(new i(r),t+1,e),n=Qa(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};_e.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Qa(i):(si(t,0,gl),e===void 0?e=a.rounding:si(e,0,8),r=Be(new a(i),t+i.e+1,e),n=Qa(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};_e.toFraction=function(t){var e,n,r,i,a,o,c,u,d,h,p,m,b=this,_=b.d,E=b.constructor;if(!_)return new E(b);if(d=n=new E(1),r=u=new E(0),e=new E(r),a=e.e=LO(_)-b.e-1,o=a%Xe,e.d[0]=Xn(10,o<0?Xe+o:o),t==null)t=a>0?e:d;else{if(c=new E(t),!c.isInt()||c.lt(d))throw Error(ll+c);t=c.gt(e)?a>0?e:d:c}for(et=!1,c=new E(vr(_)),h=E.precision,E.precision=a=_.length*Xe*2;p=Kt(c,e,0,1,1),i=n.plus(p.times(r)),i.cmp(t)!=1;)n=r,r=i,i=d,d=u.plus(p.times(i)),u=i,i=e,e=c.minus(p.times(i)),c=i;return i=Kt(t.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=b.s,m=Kt(d,r,a,1).minus(b).abs().cmp(Kt(u,n,a,1).minus(b).abs())<1?[d,r]:[u,n],E.precision=h,et=!0,m};_e.toHexadecimal=_e.toHex=function(t,e){return _E(this,16,t,e)};_e.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:si(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(et=!1,n=Kt(n,t,0,e,1).times(t),et=!0,Be(n)):(t.s=n.s,n=t),n};_e.toNumber=function(){return+this};_e.toOctal=function(t,e){return _E(this,8,t,e)};_e.toPower=_e.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Xn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return Be(c,r,a);if(e=Rr(t.e/Xe),e>=t.d.length-1&&(n=d<0?-d:d)<=o$)return i=BO(u,c,n,r),t.s<0?new u(1).div(i):Be(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Xn(+c,d),e=n==0||!isFinite(n)?Rr(d*(Math.log("0."+vr(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(et=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=p_(t.times(Ko(c,r+n)),r),i.d&&(i=Be(i,r+5,1),Xh(i.d,r,a)&&(e=r+10,i=Be(p_(t.times(Ko(c,e+n)),e),e+5,1),+vr(i.d).slice(r+1,r+15)+1==1e14&&(i=Be(i,r+1,0)))),i.s=o,et=!0,u.rounding=a,Be(i,r,a))};_e.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qa(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(si(t,1,gl),e===void 0?e=i.rounding:si(e,0,8),r=Be(new i(r),t,e),n=Qa(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};_e.toSignificantDigits=_e.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(si(t,1,gl),e===void 0?e=r.rounding:si(e,0,8)),Be(new r(n),t,e)};_e.toString=function(){var t=this,e=t.constructor,n=Qa(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};_e.truncated=_e.trunc=function(){return Be(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var t=this,e=t.constructor,n=Qa(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function vr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Xe-r.length,n&&(a+=Lo(n)),a+=r;o=t[e],r=o+"",n=Xe-r.length,n&&(a+=Lo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function si(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ll+t)}function Xh(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Xe,i=0):(i=Math.ceil((e+1)/Xe),e%=Xe),a=Xn(10,Xe-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Xn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Xn(10,e-3)-1,o}function ev(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=d_.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function c$(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/V0(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=dd(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Kt=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,p,m,b,_,E,S,A,D,R,P,z,M,T,C,k,O,L,F,j=r.constructor,X=r.s==i.s?1:-1,$=r.d,H=i.d;if(!$||!$[0]||!H||!H[0])return new j(!r.s||!i.s||($?H&&$[0]==H[0]:!H)?NaN:$&&$[0]==0||!H?X*0:X/0);for(u?(b=1,h=r.e-i.e):(u=ua,b=Xe,h=Rr(r.e/b)-Rr(i.e/b)),L=H.length,k=$.length,A=new j(X),D=A.d=[],p=0;H[p]==($[p]||0);p++);if(H[p]>($[p]||0)&&h--,a==null?(M=a=j.precision,o=j.rounding):c?M=a+(r.e-i.e)+1:M=a,M<0)D.push(1),_=!0;else{if(M=M/b+2|0,p=0,L==1){for(m=0,H=H[0],M++;(p<k||m)&&M--;p++)T=m*u+($[p]||0),D[p]=T/H|0,m=T%H|0;_=m||p<k}else{for(m=u/(H[0]+1)|0,m>1&&(H=t(H,m,u),$=t($,m,u),L=H.length,k=$.length),C=L,R=$.slice(0,L),P=R.length;P<L;)R[P++]=0;F=H.slice(),F.unshift(0),O=H[0],H[1]>=u/2&&++O;do m=0,d=e(H,R,L,P),d<0?(z=R[0],L!=P&&(z=z*u+(R[1]||0)),m=z/O|0,m>1?(m>=u&&(m=u-1),E=t(H,m,u),S=E.length,P=R.length,d=e(E,R,S,P),d==1&&(m--,n(E,L<S?F:H,S,u))):(m==0&&(d=m=1),E=H.slice()),S=E.length,S<P&&E.unshift(0),n(R,E,P,u),d==-1&&(P=R.length,d=e(H,R,L,P),d<1&&(m++,n(R,L<P?F:H,P,u))),P=R.length):d===0&&(m++,R=[0]),D[p++]=m,d&&R[0]?R[P++]=$[C]||0:(R=[$[C]],P=1);while((C++<k||R[0]!==void 0)&&M--);_=R[0]!==void 0}D[0]||D.shift()}if(b==1)A.e=h,PO=_;else{for(p=1,m=D[0];m>=10;m/=10)p++;A.e=p+h*b-1,Be(A,c?a+A.e+1:a,o,_)}return A}})();function Be(t,e,n,r){var i,a,o,c,u,d,h,p,m,b=t.constructor;e:if(e!=null){if(p=t.d,!p)return t;for(i=1,c=p[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=Xe,o=e,h=p[m=0],u=h/Xn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/Xe),c=p.length,m>=c)if(r){for(;c++<=m;)p.push(0);h=u=0,i=1,a%=Xe,o=a-Xe+1}else break e;else{for(h=c=p[m],i=1;c>=10;c/=10)i++;a%=Xe,o=a-Xe+i,u=o<0?0:h/Xn(10,i-o-1)%10|0}if(r=r||e<0||p[m+1]!==void 0||(o<0?h:h%Xn(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Xn(10,i-o):0:p[m-1])%10&1||n==(t.s<0?8:7)),e<1||!p[0])return p.length=0,d?(e-=t.e+1,p[0]=Xn(10,(Xe-e%Xe)%Xe),t.e=-e||0):p[0]=t.e=0,t;if(a==0?(p.length=m,c=1,m--):(p.length=m+1,c=Xn(10,Xe-a),p[m]=o>0?(h/Xn(10,i-o)%Xn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=p[0];o>=10;o/=10)a++;for(o=p[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,p[0]==ua&&(p[0]=1));break}else{if(p[m]+=c,p[m]!=ua)break;p[m--]=0,c=1}for(a=p.length;p[--a]===0;)p.pop()}return et&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function Qa(t,e,n){if(!t.isFinite())return UO(t);var r,i=t.e,a=vr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Lo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Lo(-i-1)+a,n&&(r=n-o)>0&&(a+=Lo(r))):i>=o?(a+=Lo(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Lo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Lo(r))),a}function O0(t,e){var n=t[0];for(e*=Xe;n>=10;n/=10)e++;return e}function Lv(t,e,n){if(e>l$)throw et=!0,n&&(t.precision=n),Error(OO);return Be(new t(jv),e,1,!0)}function za(t,e,n){if(e>h_)throw Error(OO);return Be(new t(zv),e,n,!0)}function LO(t){var e=t.length-1,n=e*Xe+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Lo(t){for(var e="";t--;)e+="0";return e}function BO(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/Xe+4);for(et=!1;;){if(n%2&&(a=a.times(e),ID(a.d,o)&&(i=!0)),n=Rr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),ID(e.d,o)}return et=!0,a}function CD(t){return t.d[t.d.length-1]&1}function FO(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function p_(t,e){var n,r,i,a,o,c,u,d=0,h=0,p=0,m=t.constructor,b=m.rounding,_=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(et=!1,u=_):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),p+=5;for(r=Math.log(Xn(2,p))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=Be(a.times(t),u,1),n=n.times(++h),c=o.plus(Kt(a,n,u,1)),vr(c.d).slice(0,u)===vr(o.d).slice(0,u)){for(i=p;i--;)o=Be(o.times(o),u,1);if(e==null)if(d<3&&Xh(o.d,u-r,b,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return Be(o,m.precision=_,b,et=!0);else return m.precision=_,o}o=c}}function Ko(t,e){var n,r,i,a,o,c,u,d,h,p,m,b=1,_=10,E=t,S=E.d,A=E.constructor,D=A.rounding,R=A.precision;if(E.s<0||!S||!S[0]||!E.e&&S[0]==1&&S.length==1)return new A(S&&!S[0]?-1/0:E.s!=1?NaN:S?0:E);if(e==null?(et=!1,h=R):h=e,A.precision=h+=_,n=vr(S),r=n.charAt(0),Math.abs(a=E.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=vr(E.d),r=n.charAt(0),b++;a=E.e,r>1?(E=new A("0."+n),a++):E=new A(r+"."+n.slice(1))}else return d=Lv(A,h+2,R).times(a+""),E=Ko(new A(r+"."+n.slice(1)),h-_).plus(d),A.precision=R,e==null?Be(E,R,D,et=!0):E;for(p=E,u=o=E=Kt(E.minus(1),E.plus(1),h,1),m=Be(E.times(E),h,1),i=3;;){if(o=Be(o.times(m),h,1),d=u.plus(Kt(o,new A(i),h,1)),vr(d.d).slice(0,h)===vr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(Lv(A,h+2,R).times(a+""))),u=Kt(u,new A(b),h,1),e==null)if(Xh(u.d,h-_,D,c))A.precision=h+=_,d=o=E=Kt(p.minus(1),p.plus(1),h,1),m=Be(E.times(E),h,1),i=c=1;else return Be(u,A.precision=R,D,et=!0);else return A.precision=R,u;u=d,i+=2}}function UO(t){return String(t.s*t.s/0)}function tv(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Xe,n<0&&(r+=Xe),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Xe;r<i;)t.d.push(+e.slice(r,r+=Xe));e=e.slice(r),r=Xe-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),et&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function u$(t,e){var n,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),zO.test(e))return tv(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(a$.test(e))n=16,e=e.toLowerCase();else if(i$.test(e))n=2;else if(s$.test(e))n=8;else throw Error(ll+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=BO(r,new r(n),a,a*2)),d=ev(e,n,ua),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(t.s*0):(t.e=O0(d,h),t.d=d,et=!1,o&&(t=Kt(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Xn(2,u):ei.pow(2,u))),et=!0,t)}function d$(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:dd(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/V0(5,n)),e=dd(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function dd(t,e,n,r,i){var a,o,c,u,d=t.precision,h=Math.ceil(d/Xe);for(et=!1,u=n.times(n),c=new t(r);;){if(o=Kt(c.times(u),new t(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Kt(o.times(u),new t(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return et=!0,o.d.length=h+1,o}function V0(t,e){for(var n=t;--e;)n*=t;return n}function GO(t,e){var n,r=e.s<0,i=za(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Cs=r?4:1,e;if(n=e.divToInt(i),n.isZero())Cs=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return Cs=CD(n)?r?2:3:r?4:1,e;Cs=CD(n)?r?1:4:r?3:2}return e.minus(i).abs()}function _E(t,e,n,r){var i,a,o,c,u,d,h,p,m,b=t.constructor,_=n!==void 0;if(_?(si(n,1,gl),r===void 0?r=b.rounding:si(r,0,8)):(n=b.precision,r=b.rounding),!t.isFinite())h=UO(t);else{for(h=Qa(t),o=h.indexOf("."),_?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=ev(Qa(m),10,i),m.e=m.d.length),p=ev(h,10,i),a=u=p.length;p[--u]==0;)p.pop();if(!p[0])h=_?"0p+0":"0";else{if(o<0?a--:(t=new b(t),t.d=p,t.e=a,t=Kt(t,m,n,r,0,i),p=t.d,a=t.e,d=PO),o=p[n],c=i/2,d=d||p[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&p[n-1]&1||r===(t.s<0?8:7)),p.length=n,d)for(;++p[--n]>i-1;)p[n]=0,n||(++a,p.unshift(1));for(u=p.length;!p[u-1];--u);for(o=0,h="";o<u;o++)h+=d_.charAt(p[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(p=ev(h,i,e),u=p.length;!p[u-1];--u);for(o=1,h="1.";o<u;o++)h+=d_.charAt(p[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function ID(t,e){if(t.length>e)return t.length=e,!0}function f$(t){return new this(t).abs()}function h$(t){return new this(t).acos()}function p$(t){return new this(t).acosh()}function g$(t,e){return new this(t).plus(e)}function m$(t){return new this(t).asin()}function v$(t){return new this(t).asinh()}function y$(t){return new this(t).atan()}function b$(t){return new this(t).atanh()}function x$(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=za(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?za(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=za(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Kt(t,e,a,1)),e=za(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Kt(t,e,a,1)),n}function _$(t){return new this(t).cbrt()}function w$(t){return Be(t=new this(t),t.e+1,2)}function E$(t,e,n){return new this(t).clamp(e,n)}function S$(t){if(!t||typeof t!="object")throw Error(P0+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,gl,"rounding",0,8,"toExpNeg",-Ku,0,"toExpPos",0,Ku,"maxE",0,Ku,"minE",-Ku,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=f_[n]),(r=t[n])!==void 0)if(Rr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(ll+n+": "+r);if(n="crypto",i&&(this[n]=f_[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(VO);else this[n]=!1;else throw Error(ll+n+": "+r);return this}function T$(t){return new this(t).cos()}function A$(t){return new this(t).cosh()}function qO(t){var e,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,DD(a)){d.s=a.s,et?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;et?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return tv(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),zO.test(a)?tv(d,a):u$(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,tv(d,a.toString());throw Error(ll+a)}if(i.prototype=_e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=S$,i.clone=qO,i.isDecimal=DD,i.abs=f$,i.acos=h$,i.acosh=p$,i.add=g$,i.asin=m$,i.asinh=v$,i.atan=y$,i.atanh=b$,i.atan2=x$,i.cbrt=_$,i.ceil=w$,i.clamp=E$,i.cos=T$,i.cosh=A$,i.div=C$,i.exp=I$,i.floor=D$,i.hypot=R$,i.ln=k$,i.log=N$,i.log10=P$,i.log2=M$,i.max=O$,i.min=V$,i.mod=j$,i.mul=z$,i.pow=L$,i.random=B$,i.round=F$,i.sign=U$,i.sin=G$,i.sinh=q$,i.sqrt=H$,i.sub=$$,i.sum=Y$,i.tan=K$,i.tanh=X$,i.trunc=W$,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function C$(t,e){return new this(t).div(e)}function I$(t){return new this(t).exp()}function D$(t){return Be(t=new this(t),t.e+1,3)}function R$(){var t,e,n=new this(0);for(et=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return et=!0,new this(1/0);n=e}return et=!0,n.sqrt()}function DD(t){return t instanceof ei||t&&t.toStringTag===jO||!1}function k$(t){return new this(t).ln()}function N$(t,e){return new this(t).log(e)}function M$(t){return new this(t).log(2)}function P$(t){return new this(t).log(10)}function O$(){return FO(this,arguments,-1)}function V$(){return FO(this,arguments,1)}function j$(t,e){return new this(t).mod(e)}function z$(t,e){return new this(t).mul(e)}function L$(t,e){return new this(t).pow(e)}function B$(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:si(t,1,gl),r=Math.ceil(t/Xe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(VO);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=Xe,r&&t&&(i=Xn(10,Xe-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=Xe)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<Xe&&(n-=Xe-r)}return o.e=n,o.d=c,o}function F$(t){return Be(t=new this(t),t.e+1,this.rounding)}function U$(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function G$(t){return new this(t).sin()}function q$(t){return new this(t).sinh()}function H$(t){return new this(t).sqrt()}function $$(t,e){return new this(t).sub(e)}function Y$(){var t=0,e=arguments,n=new this(e[t]);for(et=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return et=!0,Be(n,this.precision,this.rounding)}function K$(t){return new this(t).tan()}function X$(t){return new this(t).tanh()}function W$(t){return Be(t=new this(t),t.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var ei=_e.constructor=qO(f_);jv=new ei(jv);zv=new ei(zv);const Q$=()=>{};var RD={};const HO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Z$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},$O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,p=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(n[h],n[p],n[m],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new J$;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eY=function(t){const e=HO(t);return $O.encodeByteArray(e,!0)},Bv=function(t){return eY(t).replace(/\./g,"")},YO=function(t){try{return $O.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tY=()=>KO().__FIREBASE_DEFAULTS__,nY=()=>{if(typeof process>"u"||typeof RD>"u")return;const t=RD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rY=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YO(t[1]);return e&&JSON.parse(e)},j0=()=>{try{return Q$()||tY()||nY()||rY()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XO=t=>j0()?.emulatorHosts?.[t],iY=t=>{const e=XO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},WO=()=>j0()?.config,QO=t=>j0()?.[`_${t}`];class aY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ld(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZO(t){return(await fetch(t,{credentials:"include"})).ok}function sY(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bv(JSON.stringify(n)),Bv(JSON.stringify(o)),""].join(".")}const wh={};function oY(){const t={prod:[],emulator:[]};for(const e of Object.keys(wh))wh[e]?t.emulator.push(e):t.prod.push(e);return t}function lY(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kD=!1;function JO(t,e){if(typeof window>"u"||typeof document>"u"||!Ld(window.location.host)||wh[t]===e||wh[t]||kD)return;wh[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=oY().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{kD=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=lY(r),b=n("text"),_=document.getElementById(b)||document.createElement("span"),E=n("learnmore"),S=document.getElementById(E)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;c(R),h(S,E);const P=d();u(D,A),R.append(D,_,S,P),document.body.appendChild(R)}a?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function e4(){const t=j0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dY(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fY(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hY(){const t=Jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t4(){return!e4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n4(){return!e4()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function r4(){try{return typeof indexedDB=="object"}catch{return!1}}function pY(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const gY="FirebaseError";class Hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gY,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kp.prototype.create)}}class kp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?mY(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Hs(i,c,r)}}function mY(t,e){return t.replace(vY,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vY=/\{\$([^}]+)}/g;function yY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(ND(a)&&ND(o)){if(!xc(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ND(t){return t!==null&&typeof t=="object"}function Np(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ih(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bY(t,e){const n=new xY(t,e);return n.subscribe.bind(n)}class xY{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_Y(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=H1),i.error===void 0&&(i.error=H1),i.complete===void 0&&(i.complete=H1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _Y(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function H1(){}function gn(t){return t&&t._delegate?t._delegate:t}class _c{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $l="[DEFAULT]";class wY{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aY;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SY(e))try{this.getOrInitializeService({instanceIdentifier:$l})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=$l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$l){return this.instances.has(e)}getOptions(e=$l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EY(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$l){return this.component?this.component.multipleInstances?e:$l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EY(t){return t===$l?void 0:t}function SY(t){return t.instantiationMode==="EAGER"}class TY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wY(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xt||(xt={}));const AY={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},CY=xt.INFO,IY={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},DY=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=IY[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=CY,this._logHandler=DY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const RY=(t,e)=>e.some(n=>t instanceof n);let MD,PD;function kY(){return MD||(MD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NY(){return PD||(PD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i4=new WeakMap,g_=new WeakMap,a4=new WeakMap,$1=new WeakMap,EE=new WeakMap;function MY(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Qo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i4.set(n,t)}).catch(()=>{}),EE.set(e,t),e}function PY(t){if(g_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});g_.set(t,e)}let m_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return g_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||a4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OY(t){m_=t(m_)}function VY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Y1(this),e,...n);return a4.set(r,e.sort?e.sort():[e]),Qo(r)}:NY().includes(t)?function(...e){return t.apply(Y1(this),e),Qo(i4.get(this))}:function(...e){return Qo(t.apply(Y1(this),e))}}function jY(t){return typeof t=="function"?VY(t):(t instanceof IDBTransaction&&PY(t),RY(t,kY())?new Proxy(t,m_):t)}function Qo(t){if(t instanceof IDBRequest)return MY(t);if($1.has(t))return $1.get(t);const e=jY(t);return e!==t&&($1.set(t,e),EE.set(e,t)),e}const Y1=t=>EE.get(t);function zY(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Qo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qo(o.result),u.oldVersion,u.newVersion,Qo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const LY=["get","getKey","getAll","getAllKeys","count"],BY=["put","add","delete","clear"],K1=new Map;function OD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(K1.get(e))return K1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LY.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return K1.set(e,a),a}OY(t=>({...t,get:(e,n,r)=>OD(e,n)||t.get(e,n,r),has:(e,n)=>!!OD(e,n)||t.has(e,n)}));class FY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UY(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UY(t){return t.getComponent()?.type==="VERSION"}const v_="@firebase/app",VD="0.14.6";const Fs=new wE("@firebase/app"),GY="@firebase/app-compat",qY="@firebase/analytics-compat",HY="@firebase/analytics",$Y="@firebase/app-check-compat",YY="@firebase/app-check",KY="@firebase/auth",XY="@firebase/auth-compat",WY="@firebase/database",QY="@firebase/data-connect",ZY="@firebase/database-compat",JY="@firebase/functions",eK="@firebase/functions-compat",tK="@firebase/installations",nK="@firebase/installations-compat",rK="@firebase/messaging",iK="@firebase/messaging-compat",aK="@firebase/performance",sK="@firebase/performance-compat",oK="@firebase/remote-config",lK="@firebase/remote-config-compat",cK="@firebase/storage",uK="@firebase/storage-compat",dK="@firebase/firestore",fK="@firebase/ai",hK="@firebase/firestore-compat",pK="firebase",gK="12.6.0";const y_="[DEFAULT]",mK={[v_]:"fire-core",[GY]:"fire-core-compat",[HY]:"fire-analytics",[qY]:"fire-analytics-compat",[YY]:"fire-app-check",[$Y]:"fire-app-check-compat",[KY]:"fire-auth",[XY]:"fire-auth-compat",[WY]:"fire-rtdb",[QY]:"fire-data-connect",[ZY]:"fire-rtdb-compat",[JY]:"fire-fn",[eK]:"fire-fn-compat",[tK]:"fire-iid",[nK]:"fire-iid-compat",[rK]:"fire-fcm",[iK]:"fire-fcm-compat",[aK]:"fire-perf",[sK]:"fire-perf-compat",[oK]:"fire-rc",[lK]:"fire-rc-compat",[cK]:"fire-gcs",[uK]:"fire-gcs-compat",[dK]:"fire-fst",[hK]:"fire-fst-compat",[fK]:"fire-vertex","fire-js":"fire-js",[pK]:"fire-js-all"};const Fv=new Map,vK=new Map,b_=new Map;function jD(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fd(t){const e=t.name;if(b_.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;b_.set(e,t);for(const n of Fv.values())jD(n,t);for(const n of vK.values())jD(n,t);return!0}function SE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zi(t){return t==null?!1:t.settings!==void 0}const yK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new kp("app","Firebase",yK);class bK{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _c("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}const Bd=gK;function s4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:y_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Zo.create("bad-app-name",{appName:String(i)});if(n||(n=WO()),!n)throw Zo.create("no-options");const a=Fv.get(i);if(a){if(xc(n,a.options)&&xc(r,a.config))return a;throw Zo.create("duplicate-app",{appName:i})}const o=new TY(i);for(const u of b_.values())o.addComponent(u);const c=new bK(n,r,o);return Fv.set(i,c),c}function o4(t=y_){const e=Fv.get(t);if(!e&&t===y_&&WO())return s4();if(!e)throw Zo.create("no-app",{appName:t});return e}function Jo(t,e,n){let r=mK[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(o.join(" "));return}fd(new _c(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const xK="firebase-heartbeat-database",_K=1,Wh="firebase-heartbeat-store";let X1=null;function l4(){return X1||(X1=zY(xK,_K,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zo.create("idb-open",{originalErrorMessage:t.message})})),X1}async function wK(t){try{const n=(await l4()).transaction(Wh),r=await n.objectStore(Wh).get(c4(t));return await n.done,r}catch(e){if(e instanceof Hs)Fs.warn(e.message);else{const n=Zo.create("idb-get",{originalErrorMessage:e?.message});Fs.warn(n.message)}}}async function zD(t,e){try{const r=(await l4()).transaction(Wh,"readwrite");await r.objectStore(Wh).put(e,c4(t)),await r.done}catch(n){if(n instanceof Hs)Fs.warn(n.message);else{const r=Zo.create("idb-set",{originalErrorMessage:n?.message});Fs.warn(r.message)}}}function c4(t){return`${t.name}!${t.options.appId}`}const EK=1024,SK=30;class TK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>SK){const i=IK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LD(),{heartbeatsToSend:n,unsentEntries:r}=AK(this._heartbeatsCache.heartbeats),i=Bv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Fs.warn(e),""}}}function LD(){return new Date().toISOString().substring(0,10)}function AK(t,e=EK){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),BD(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),BD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r4()?pY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wK(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BD(t){return Bv(JSON.stringify({version:2,heartbeats:t})).length}function IK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function DK(t){fd(new _c("platform-logger",e=>new FY(e),"PRIVATE")),fd(new _c("heartbeat",e=>new TK(e),"PRIVATE")),Jo(v_,VD,t),Jo(v_,VD,"esm2020"),Jo("fire-js","")}DK("");function u4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RK=u4,d4=new kp("auth","Firebase",u4());const Uv=new wE("@firebase/auth");function kK(t,...e){Uv.logLevel<=xt.WARN&&Uv.warn(`Auth (${Bd}): ${t}`,...e)}function nv(t,...e){Uv.logLevel<=xt.ERROR&&Uv.error(`Auth (${Bd}): ${t}`,...e)}function ha(t,...e){throw TE(t,...e)}function Ha(t,...e){return TE(t,...e)}function f4(t,e,n){const r={...RK(),[e]:n};return new kp("auth","Firebase",r).create(e,{appName:t.name})}function Os(t){return f4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d4.create(t,...e)}function Qe(t,e,...n){if(!t)throw TE(e,...n)}function Is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nv(e),new Error(e)}function Us(t,e){t||Is(e)}function x_(){return typeof self<"u"&&self.location?.href||""}function NK(){return FD()==="http:"||FD()==="https:"}function FD(){return typeof self<"u"&&self.location?.protocol||null}function MK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NK()||dY()||"connection"in navigator)?navigator.onLine:!0}function PK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Mp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Us(n>e,"Short delay should be less than long delay!"),this.isMobile=cY()||fY()}get(){return MK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function AE(t,e){Us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class h4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const VK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jK=new Mp(3e4,6e4);function $s(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function as(t,e,n,r,i={}){return p4(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Np({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return uY()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ld(t.emulatorConfig.host)&&(d.credentials="include"),h4.fetch()(await g4(t,t.config.apiHost,n,c),d)})}async function p4(t,e,n){t._canInitEmulator=!1;const r={...OK,...e};try{const i=new LK(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Vm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vm(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw f4(t,h,d);ha(t,h)}}catch(i){if(i instanceof Hs)throw i;ha(t,"network-request-failed",{message:String(i)})}}async function Pp(t,e,n,r,i={}){const a=await as(t,e,n,r,i);return"mfaPendingCredential"in a&&ha(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function g4(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?AE(t.config,i):`${t.config.apiScheme}://${i}`;return VK.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function zK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ha(this.auth,"network-request-failed")),jK.get())})}}function Vm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ha(t,e,r);return i.customData._tokenResponse=n,i}function UD(t){return t!==void 0&&t.enterprise!==void 0}class BK{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FK(t,e){return as(t,"GET","/v2/recaptchaConfig",$s(t,e))}async function UK(t,e){return as(t,"POST","/v1/accounts:delete",e)}async function Gv(t,e){return as(t,"POST","/v1/accounts:lookup",e)}function Eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GK(t,e=!1){const n=gn(t),r=await n.getIdToken(e),i=CE(r);Qe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Eh(W1(i.auth_time)),issuedAtTime:Eh(W1(i.iat)),expirationTime:Eh(W1(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function W1(t){return Number(t)*1e3}function CE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nv("JWT malformed, contained fewer than 3 sections"),null;try{const i=YO(n);return i?JSON.parse(i):(nv("Failed to decode base64 JWT payload"),null)}catch(i){return nv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GD(t){const e=CE(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hs&&qK(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class HK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class __{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eh(this.lastLoginAt),this.creationTime=Eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qv(t){const e=t.auth,n=await t.getIdToken(),r=await hd(t,Gv(e,{idToken:n}));Qe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?m4(i.providerUserInfo):[],o=YK(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new __(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function $K(t){const e=gn(t);await qv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function m4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function KK(t,e){const n=await p4(t,{},async()=>{const r=Np({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await g4(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Ld(t.emulatorConfig.host)&&(u.credentials="include"),h4.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XK(t,e){return as(t,"POST","/v2/accounts:revokeToken",$s(t,e))}class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=GD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await KK(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Zu;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Qe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return Is("not implemented")}}function ko(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sa{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new HK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new __(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hd(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GK(this,e)}reload(){return $K(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zi(this.auth.app))return Promise.reject(Os(this.auth));const e=await this.getIdToken();return await hd(this,UK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:b,providerData:_,stsTokenManager:E}=n;Qe(p&&E,e,"internal-error");const S=Zu.fromJSON(this.name,E);Qe(typeof p=="string",e,"internal-error"),ko(r,e.name),ko(i,e.name),Qe(typeof m=="boolean",e,"internal-error"),Qe(typeof b=="boolean",e,"internal-error"),ko(a,e.name),ko(o,e.name),ko(c,e.name),ko(u,e.name),ko(d,e.name),ko(h,e.name);const A=new sa({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(A.providerData=_.map(D=>({...D}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Zu;i.updateFromServerResponse(n);const a=new sa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Qe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?m4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new Zu;c.updateFromIdToken(r);const u=new sa({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new __(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const qD=new Map;function Ds(t){Us(t instanceof Function,"Expected a class definition");let e=qD.get(t);return e?(Us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qD.set(t,e),e)}class v4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}v4.type="NONE";const HD=v4;function rv(t,e,n){return`firebase:${t}:${e}:${n}`}class Ju{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=rv(this.userKey,i.apiKey,a),this.fullPersistenceKey=rv("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gv(this.auth,{idToken:e}).catch(()=>{});return n?sa._fromGetAccountInfoResponse(this.auth,n,e):null}return sa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ju(Ds(HD),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Ds(HD);const o=rv(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await Gv(e,{idToken:h}).catch(()=>{});if(!m)break;p=await sa._fromGetAccountInfoResponse(e,m,h)}else p=sa._fromJSON(e,h);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ju(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ju(a,e,r))}}function $D(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(E4(e))return"Blackberry";if(S4(e))return"Webos";if(b4(e))return"Safari";if((e.includes("chrome/")||x4(e))&&!e.includes("edge/"))return"Chrome";if(w4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function y4(t=Jn()){return/firefox\//i.test(t)}function b4(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x4(t=Jn()){return/crios\//i.test(t)}function _4(t=Jn()){return/iemobile/i.test(t)}function w4(t=Jn()){return/android/i.test(t)}function E4(t=Jn()){return/blackberry/i.test(t)}function S4(t=Jn()){return/webos/i.test(t)}function IE(t=Jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WK(t=Jn()){return IE(t)&&!!window.navigator?.standalone}function QK(){return hY()&&document.documentMode===10}function T4(t=Jn()){return IE(t)||w4(t)||S4(t)||E4(t)||/windows phone/i.test(t)||_4(t)}function A4(t,e=[]){let n;switch(t){case"Browser":n=$D(Jn());break;case"Worker":n=`${$D(Jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bd}/${r}`}class ZK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JK(t,e={}){return as(t,"GET","/v2/passwordPolicy",$s(t,e))}const eX=6;class tX{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class nX{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YD(this),this.idTokenSubscription=new YD(this),this.beforeStateQueue=new ZK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ju.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gv(this,{idToken:e}),r=await sa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qv(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zi(this.app))return Promise.reject(Os(this));const n=e?gn(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zi(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zi(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JK(this),n=new tX(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XK(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Ju.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kK(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ml(t){return gn(t)}class YD{constructor(e){this.auth=e,this.observer=null,this.addObserver=bY(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let z0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rX(t){z0=t}function C4(t){return z0.loadJS(t)}function iX(){return z0.recaptchaEnterpriseScript}function aX(){return z0.gapiScript}function sX(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class oX{constructor(){this.enterprise=new lX}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lX{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cX="recaptcha-enterprise",I4="NO_RECAPTCHA";class uX{constructor(e){this.type=cX,this.auth=ml(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{FK(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new BK(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;UD(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(I4)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oX().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&UD(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iX();u.length!==0&&(u+=c),C4(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function KD(t,e,n,r=!1,i=!1){const a=new uX(t);let o;if(i)o=I4;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Hv(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await KD(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await KD(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function dX(t,e){const n=SE(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(xc(a,e??{}))return i;ha(i,"already-initialized")}return n.initialize({options:e})}function fX(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ds);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function hX(t,e,n){const r=ml(t);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=D4(e),{host:o,port:c}=pX(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(xc(d,r.config.emulator)&&xc(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ld(o)?(ZO(`${a}//${o}${u}`),JO("Auth",!0)):gX()}function D4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pX(t){const e=D4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:XD(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:XD(o)}}}function XD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gX(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class DE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,n){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function mX(t,e){return as(t,"POST","/v1/accounts:signUp",e)}async function vX(t,e){return Pp(t,"POST","/v1/accounts:signInWithPassword",$s(t,e))}async function R4(t,e){return as(t,"POST","/v1/accounts:sendOobCode",$s(t,e))}async function yX(t,e){return R4(t,e)}async function bX(t,e){return R4(t,e)}async function xX(t,e){return Pp(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}async function _X(t,e){return Pp(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}class Qh extends DE{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Qh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hv(e,n,"signInWithPassword",vX);case"emailLink":return xX(e,{email:this._email,oobCode:this._password});default:ha(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hv(e,r,"signUpPassword",mX);case"emailLink":return _X(e,{idToken:n,email:this._email,oobCode:this._password});default:ha(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ed(t,e){return Pp(t,"POST","/v1/accounts:signInWithIdp",$s(t,e))}const wX="http://localhost";class wc extends DE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ha("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new wc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ed(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ed(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ed(e,n)}buildRequest(){const e={requestUri:wX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Np(n)}return e}}function EX(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SX(t){const e=ih(ah(t)).link,n=e?ih(ah(e)).deep_link_id:null,r=ih(ah(t)).deep_link_id;return(r?ih(ah(r)).link:null)||r||n||e||t}class RE{constructor(e){const n=ih(ah(e)),r=n.apiKey??null,i=n.oobCode??null,a=EX(n.mode??null);Qe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=SX(e);try{return new RE(n)}catch{return null}}}class Oc{constructor(){this.providerId=Oc.PROVIDER_ID}static credential(e,n){return Qh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=RE.parseLink(n);return Qe(r,"argument-error"),Qh._fromEmailAndCode(e,r.code,r.tenantId)}}Oc.PROVIDER_ID="password";Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class k4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Op extends k4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bo extends Op{constructor(){super("facebook.com")}static credential(e){return wc._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";class Fo extends Op{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wc._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fo.credential(n,r)}catch{return null}}}Fo.GOOGLE_SIGN_IN_METHOD="google.com";Fo.PROVIDER_ID="google.com";class Uo extends Op{constructor(){super("github.com")}static credential(e){return wc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";class Go extends Op{constructor(){super("twitter.com")}static credential(e,n){return wc._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Go.credential(n,r)}catch{return null}}}Go.TWITTER_SIGN_IN_METHOD="twitter.com";Go.PROVIDER_ID="twitter.com";async function TX(t,e){return Pp(t,"POST","/v1/accounts:signUp",$s(t,e))}class Ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await sa._fromIdTokenResponse(e,r,i),o=WD(r);return new Ec({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=WD(r);return new Ec({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function WD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class $v extends Hs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$v.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $v(e,n,r,i)}}function N4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$v._fromErrorAndOperation(t,a,e,r):a})}async function AX(t,e,n=!1){const r=await hd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ec._forOperation(t,"link",r)}async function M4(t,e,n=!1){const{auth:r}=t;if(zi(r.app))return Promise.reject(Os(r));const i="reauthenticate";try{const a=await hd(t,N4(r,i,e,t),n);Qe(a.idToken,r,"internal-error");const o=CE(a.idToken);Qe(o,r,"internal-error");const{sub:c}=o;return Qe(t.uid===c,r,"user-mismatch"),Ec._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ha(r,"user-mismatch"),a}}async function P4(t,e,n=!1){if(zi(t.app))return Promise.reject(Os(t));const r="signIn",i=await N4(t,r,e),a=await Ec._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function CX(t,e){return P4(ml(t),e)}async function IX(t,e){return M4(gn(t),e)}async function O4(t){const e=ml(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DX(t,e,n){const r=ml(t);await Hv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bX)}async function RX(t,e,n){if(zi(t.app))return Promise.reject(Os(t));const r=ml(t),o=await Hv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TX).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&O4(t),u}),c=await Ec._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function kX(t,e,n){return zi(t.app)?Promise.reject(Os(t)):CX(gn(t),Oc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&O4(t),r})}async function QD(t,e){const n=gn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await yX(n.auth,i);a!==t.email&&await t.reload()}async function NX(t,e){return as(t,"POST","/v1/accounts:update",e)}async function MX(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=gn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await hd(r,NX(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function PX(t,e,n,r){return gn(t).onIdTokenChanged(e,n,r)}function OX(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function VX(t,e,n,r){return gn(t).onAuthStateChanged(e,n,r)}function ZD(t){return gn(t).signOut()}async function jX(t){return gn(t).delete()}const Yv="__sak";class V4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yv,"1"),this.storage.removeItem(Yv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zX=1e3,LX=10;class j4 extends V4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);QK()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j4.type="LOCAL";const BX=j4;class z4 extends V4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z4.type="SESSION";const L4=z4;function FX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class L0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new L0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await FX(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}L0.receivers=[];function kE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class UX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=kE("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function $a(){return window}function GX(t){$a().location.href=t}function B4(){return typeof $a().WorkerGlobalScope<"u"&&typeof $a().importScripts=="function"}async function qX(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HX(){return navigator?.serviceWorker?.controller||null}function $X(){return B4()?self:null}const F4="firebaseLocalStorageDb",YX=1,Kv="firebaseLocalStorage",U4="fbase_key";class Vp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function B0(t,e){return t.transaction([Kv],e?"readwrite":"readonly").objectStore(Kv)}function KX(){const t=indexedDB.deleteDatabase(F4);return new Vp(t).toPromise()}function w_(){const t=indexedDB.open(F4,YX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kv,{keyPath:U4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kv)?e(r):(r.close(),await KX(),e(await w_()))})})}async function JD(t,e,n){const r=B0(t,!0).put({[U4]:e,value:n});return new Vp(r).toPromise()}async function XX(t,e){const n=B0(t,!1).get(e),r=await new Vp(n).toPromise();return r===void 0?null:r.value}function eR(t,e){const n=B0(t,!0).delete(e);return new Vp(n).toPromise()}const WX=800,QX=3;class G4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=L0._getInstance($X()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qX(),!this.activeServiceWorker)return;this.sender=new UX(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w_();return await JD(e,Yv,"1"),await eR(e,Yv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=B0(i,!1).getAll();return new Vp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G4.type="LOCAL";const ZX=G4;new Mp(3e4,6e4);function JX(t,e){return e?Ds(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class NE extends DE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ed(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ed(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ed(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eW(t){return P4(t.auth,new NE(t),t.bypassAuthState)}function tW(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),M4(n,new NE(t),t.bypassAuthState)}async function nW(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),AX(n,new NE(t),t.bypassAuthState)}class q4{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eW;case"linkViaPopup":case"linkViaRedirect":return nW;case"reauthViaPopup":case"reauthViaRedirect":return tW;default:ha(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rW=new Mp(2e3,1e4);class Xu extends q4{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Xu.currentPopupAction&&Xu.currentPopupAction.cancel(),Xu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=kE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ha(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ha(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ha(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rW.get())};e()}}Xu.currentPopupAction=null;const iW="pendingRedirect",iv=new Map;class aW extends q4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=iv.get(this.auth._key());if(!e){try{const r=await sW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}iv.set(this.auth._key(),e)}return this.bypassAuthState||iv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sW(t,e){const n=cW(e),r=lW(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function oW(t,e){iv.set(t._key(),e)}function lW(t){return Ds(t._redirectPersistence)}function cW(t){return rv(iW,t.config.apiKey,t.name)}async function uW(t,e,n=!1){if(zi(t.app))return Promise.reject(Os(t));const r=ml(t),i=JX(r,e),o=await new aW(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const dW=600*1e3;class fW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!H4(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ha(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dW&&this.cachedEventUids.clear(),this.cachedEventUids.has(tR(e))}saveEventToCache(e){this.cachedEventUids.add(tR(e)),this.lastProcessedEventTime=Date.now()}}function tR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H4({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H4(t);default:return!1}}async function pW(t,e={}){return as(t,"GET","/v1/projects",e)}const gW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mW=/^https?/;async function vW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pW(t);for(const n of e)try{if(yW(n))return}catch{}ha(t,"unauthorized-domain")}function yW(t){const e=x_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mW.test(n))return!1;if(gW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bW=new Mp(3e4,6e4);function nR(){const t=$a().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xW(t){return new Promise((e,n)=>{function r(){nR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nR(),n(Ha(t,"network-request-failed"))},timeout:bW.get()})}if($a().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($a().gapi?.load)r();else{const i=sX("iframefcb");return $a()[i]=()=>{gapi.load?r():n(Ha(t,"network-request-failed"))},C4(`${aX()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw av=null,e})}let av=null;function _W(t){return av=av||xW(t),av}const wW=new Mp(5e3,15e3),EW="__/auth/iframe",SW="emulator/auth/iframe",TW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CW(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?AE(e,SW):`https://${t.config.authDomain}/${EW}`,r={apiKey:e.apiKey,appName:t.name,v:Bd},i=AW.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Np(r).slice(1)}`}async function IW(t){const e=await _W(t),n=$a().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:CW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TW,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ha(t,"network-request-failed"),c=$a().setTimeout(()=>{a(o)},wW.get());function u(){$a().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const DW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RW=500,kW=600,NW="_blank",MW="http://localhost";class rR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PW(t,e,n,r=RW,i=kW){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...DW,width:r.toString(),height:i.toString(),top:a,left:o},d=Jn().toLowerCase();n&&(c=x4(d)?NW:n),y4(d)&&(e=e||MW,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,_])=>`${m}${b}=${_},`,"");if(WK(d)&&c!=="_self")return OW(e||"",c),new rR(null);const p=window.open(e||"",c,h);Qe(p,t,"popup-blocked");try{p.focus()}catch{}return new rR(p)}function OW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const VW="__/auth/handler",jW="emulator/auth/handler",zW=encodeURIComponent("fac");async function iR(t,e,n,r,i,a){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bd,eventId:i};if(e instanceof k4){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yY(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Op){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${zW}=${encodeURIComponent(u)}`:"";return`${LW(t)}?${Np(c).slice(1)}${d}`}function LW({config:t}){return t.emulator?AE(t,jW):`https://${t.authDomain}/${VW}`}const Q1="webStorageSupport";class BW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L4,this._completeRedirectFn=uW,this._overrideRedirectResult=oW}async _openPopup(e,n,r,i){Us(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await iR(e,n,r,x_(),i);return PW(e,a,kE())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await iR(e,n,r,x_(),i);return GX(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Us(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IW(e),r=new fW(e);return n.register("authEvent",i=>(Qe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Q1,{type:Q1},i=>{const a=i?.[0]?.[Q1];a!==void 0&&n(!!a),ha(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T4()||b4()||IE()}}const FW=BW;var aR="@firebase/auth",sR="1.11.1";class UW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function GW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qW(t){fd(new _c("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Qe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A4(t)},d=new nX(r,i,a,u);return fX(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fd(new _c("auth-internal",e=>{const n=ml(e.getProvider("auth").getImmediate());return(r=>new UW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jo(aR,sR,GW(t)),Jo(aR,sR,"esm2020")}const HW=300,$W=QO("authIdTokenMaxAge")||HW;let oR=null;const YW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$W)return;const i=n?.token;oR!==i&&(oR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KW(t=o4()){const e=SE(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dX(t,{popupRedirectResolver:FW,persistence:[ZX,BX,L4]}),r=QO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=YW(a.toString());OX(n,o,()=>o(n.currentUser)),PX(n,c=>o(c))}}const i=XO("auth");return i&&hX(n,`http://${i}`),n}function XW(){return document.getElementsByTagName("head")?.[0]??document}rX({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ha("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",XW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qW("Browser");var WW="firebase",QW="12.6.0";Jo(WW,QW,"app");var lR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var el,$4;(function(){var t;function e(T,C){function k(){}k.prototype=C.prototype,T.F=C.prototype,T.prototype=new k,T.prototype.constructor=T,T.D=function(O,L,F){for(var j=Array(arguments.length-2),X=2;X<arguments.length;X++)j[X-2]=arguments[X];return C.prototype[L].apply(O,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,k){k||(k=0);const O=Array(16);if(typeof C=="string")for(var L=0;L<16;++L)O[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;L<16;++L)O[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=T.g[0],k=T.g[1],L=T.g[2];let F=T.g[3],j;j=C+(F^k&(L^F))+O[0]+3614090360&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+O[1]+3905402710&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+O[2]+606105819&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+O[3]+3250441966&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+O[4]+4118548399&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+O[5]+1200080426&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+O[6]+2821735955&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+O[7]+4249261313&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+O[8]+1770035416&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+O[9]+2336552879&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+O[10]+4294925233&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+O[11]+2304563134&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+O[12]+1804603682&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+O[13]+4254626195&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+O[14]+2792965006&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+O[15]+1236535329&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(L^F&(k^L))+O[1]+4129170786&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+O[6]+3225465664&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+O[11]+643717713&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+O[0]+3921069994&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+O[5]+3593408605&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+O[10]+38016083&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+O[15]+3634488961&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+O[4]+3889429448&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+O[9]+568446438&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+O[14]+3275163606&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+O[3]+4107603335&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+O[8]+1163531501&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+O[13]+2850285829&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+O[2]+4243563512&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+O[7]+1735328473&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+O[12]+2368359562&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(k^L^F)+O[5]+4294588738&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+O[8]+2272392833&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+O[11]+1839030562&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+O[14]+4259657740&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+O[1]+2763975236&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+O[4]+1272893353&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+O[7]+4139469664&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+O[10]+3200236656&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+O[13]+681279174&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+O[0]+3936430074&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+O[3]+3572445317&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+O[6]+76029189&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+O[9]+3654602809&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+O[12]+3873151461&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+O[15]+530742520&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+O[2]+3299628645&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(L^(k|~F))+O[0]+4096336452&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+O[7]+1126891415&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+O[14]+2878612391&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+O[5]+4237533241&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+O[12]+1700485571&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+O[3]+2399980690&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+O[10]+4293915773&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+O[1]+2240044497&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+O[8]+1873313359&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+O[15]+4264355552&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+O[6]+2734768916&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+O[13]+1309151649&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+O[4]+4149444226&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+O[11]+3174756917&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+O[2]+718787259&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+O[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,T.g[2]=T.g[2]+L&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.v=function(T,C){C===void 0&&(C=T.length);const k=C-this.blockSize,O=this.C;let L=this.h,F=0;for(;F<C;){if(L==0)for(;F<=k;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<C;)if(O[L++]=T.charCodeAt(F++),L==this.blockSize){i(this,O),L=0;break}}else for(;F<C;)if(O[L++]=T[F++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=C},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var k=T.length-8;k<T.length;++k)T[k]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)T[C++]=this.g[k]>>>O&255;return T};function a(T,C){var k=c;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=C(T)}function o(T,C){this.h=C;const k=[];let O=!0;for(let L=T.length-1;L>=0;L--){const F=T[L]|0;O&&F==C||(k[L]=F,O=!1)}this.g=k}var c={};function u(T){return-128<=T&&T<128?a(T,function(C){return new o([C|0],C<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return S(d(-T));const C=[];let k=1;for(let O=0;T>=k;O++)C[O]=T/k|0,k*=4294967296;return new o(C,0)}function h(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return S(h(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(C,8));let O=p;for(let F=0;F<T.length;F+=8){var L=Math.min(8,T.length-F);const j=parseInt(T.substring(F,F+L),C);L<8?(L=d(Math.pow(C,L)),O=O.j(L).add(d(j))):(O=O.j(k),O=O.add(d(j)))}return O}var p=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-S(this).m();let T=0,C=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);T+=(O>=0?O:4294967296+O)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(E(this))return"-"+S(this).toString(T);const C=d(Math.pow(T,6));var k=this;let O="";for(;;){const L=P(k,C).g;k=A(k,L.j(C));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(T);if(k=L,_(k))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function E(T){return T.h==-1}t.l=function(T){return T=A(this,T),E(T)?-1:_(T)?0:1};function S(T){const C=T.g.length,k=[];for(let O=0;O<C;O++)k[O]=~T.g[O];return new o(k,~T.h).add(m)}t.abs=function(){return E(this)?S(this):this},t.add=function(T){const C=Math.max(this.g.length,T.g.length),k=[];let O=0;for(let L=0;L<=C;L++){let F=O+(this.i(L)&65535)+(T.i(L)&65535),j=(F>>>16)+(this.i(L)>>>16)+(T.i(L)>>>16);O=j>>>16,F&=65535,j&=65535,k[L]=j<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function A(T,C){return T.add(S(C))}t.j=function(T){if(_(this)||_(T))return p;if(E(this))return E(T)?S(this).j(S(T)):S(S(this).j(T));if(E(T))return S(this.j(S(T)));if(this.l(b)<0&&T.l(b)<0)return d(this.m()*T.m());const C=this.g.length+T.g.length,k=[];for(var O=0;O<2*C;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<T.g.length;L++){const F=this.i(O)>>>16,j=this.i(O)&65535,X=T.i(L)>>>16,$=T.i(L)&65535;k[2*O+2*L]+=j*$,D(k,2*O+2*L),k[2*O+2*L+1]+=F*$,D(k,2*O+2*L+1),k[2*O+2*L+1]+=j*X,D(k,2*O+2*L+1),k[2*O+2*L+2]+=F*X,D(k,2*O+2*L+2)}for(T=0;T<C;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=C;T<2*C;T++)k[T]=0;return new o(k,0)};function D(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function R(T,C){this.g=T,this.h=C}function P(T,C){if(_(C))throw Error("division by zero");if(_(T))return new R(p,p);if(E(T))return C=P(S(T),C),new R(S(C.g),S(C.h));if(E(C))return C=P(T,S(C)),new R(S(C.g),C.h);if(T.g.length>30){if(E(T)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var k=m,O=C;O.l(T)<=0;)k=z(k),O=z(O);var L=M(k,1),F=M(O,1);for(O=M(O,2),k=M(k,2);!_(O);){var j=F.add(O);j.l(T)<=0&&(L=L.add(k),F=j),O=M(O,1),k=M(k,1)}return C=A(T,L.j(C)),new R(L,C)}for(L=p;T.l(C)>=0;){for(k=Math.max(1,Math.floor(T.m()/C.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=d(k),j=F.j(C);E(j)||j.l(T)>0;)k-=O,F=d(k),j=F.j(C);_(F)&&(F=m),L=L.add(F),T=A(T,j)}return new R(L,T)}t.B=function(T){return P(this,T).h},t.and=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let O=0;O<C;O++)k[O]=this.i(O)&T.i(O);return new o(k,this.h&T.h)},t.or=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let O=0;O<C;O++)k[O]=this.i(O)|T.i(O);return new o(k,this.h|T.h)},t.xor=function(T){const C=Math.max(this.g.length,T.g.length),k=[];for(let O=0;O<C;O++)k[O]=this.i(O)^T.i(O);return new o(k,this.h^T.h)};function z(T){const C=T.g.length+1,k=[];for(let O=0;O<C;O++)k[O]=T.i(O)<<1|T.i(O-1)>>>31;return new o(k,T.h)}function M(T,C){const k=C>>5;C%=32;const O=T.g.length-k,L=[];for(let F=0;F<O;F++)L[F]=C>0?T.i(F+k)>>>C|T.i(F+k+1)<<32-C:T.i(F+k);return new o(L,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,el=o}).apply(typeof lR<"u"?lR:typeof self<"u"?self:typeof window<"u"?window:{});var jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Y4,sh,K4,sv,E_,X4,W4,Q4;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof jm=="object"&&jm];for(var I=0;I<v.length;++I){var V=v[I];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(v,I){if(I)e:{var V=r;v=v.split(".");for(var G=0;G<v.length-1;G++){var ae=v[G];if(!(ae in V))break e;V=V[ae]}v=v[v.length-1],G=V[v],I=I(G),I!=G&&I!=null&&e(V,v,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(I){var V=[],G;for(G in I)Object.prototype.hasOwnProperty.call(I,G)&&V.push([G,I[G]]);return V}});var a=a||{},o=this||self;function c(v){var I=typeof v;return I=="object"&&v!=null||I=="function"}function u(v,I,V){return v.call.apply(v.bind,arguments)}function d(v,I,V){return d=u,d.apply(null,arguments)}function h(v,I){var V=Array.prototype.slice.call(arguments,1);return function(){var G=V.slice();return G.push.apply(G,arguments),v.apply(this,G)}}function p(v,I){function V(){}V.prototype=I.prototype,v.Z=I.prototype,v.prototype=new V,v.prototype.constructor=v,v.Ob=function(G,ae,fe){for(var Ce=Array(arguments.length-2),at=2;at<arguments.length;at++)Ce[at-2]=arguments[at];return I.prototype[ae].apply(G,Ce)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const I=v.length;if(I>0){const V=Array(I);for(let G=0;G<I;G++)V[G]=v[G];return V}return[]}function _(v,I){for(let G=1;G<arguments.length;G++){const ae=arguments[G];var V=typeof ae;if(V=V!="object"?V:ae?Array.isArray(ae)?"array":V:"null",V=="array"||V=="object"&&typeof ae.length=="number"){V=v.length||0;const fe=ae.length||0;v.length=V+fe;for(let Ce=0;Ce<fe;Ce++)v[V+Ce]=ae[Ce]}else v.push(ae)}}class E{constructor(I,V){this.i=I,this.j=V,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function S(v){o.setTimeout(()=>{throw v},0)}function A(){var v=T;let I=null;return v.g&&(I=v.g,v.g=v.g.next,v.g||(v.h=null),I.next=null),I}class D{constructor(){this.h=this.g=null}add(I,V){const G=R.get();G.set(I,V),this.h?this.h.next=G:this.g=G,this.h=G}}var R=new E(()=>new P,v=>v.reset());class P{constructor(){this.next=this.g=this.h=null}set(I,V){this.h=I,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let z,M=!1,T=new D,C=()=>{const v=Promise.resolve(void 0);z=()=>{v.then(k)}};function k(){for(var v;v=A();){try{v.h.call(v.g)}catch(V){S(V)}var I=R;I.j(v),I.h<100&&(I.h++,v.next=I.g,I.g=v)}M=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,I){this.type=v,this.g=this.target=I,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,I=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};o.addEventListener("test",V,I),o.removeEventListener("test",V,I)}catch{}return v})();function j(v){return/^[\s\xa0]*$/.test(v)}function X(v,I){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,I)}p(X,L),X.prototype.init=function(v,I){const V=this.type=v.type,G=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=I,I=v.relatedTarget,I||(V=="mouseover"?I=v.fromElement:V=="mouseout"&&(I=v.toElement)),this.relatedTarget=I,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),H=0;function Y(v,I,V,G,ae){this.listener=v,this.proxy=null,this.src=I,this.type=V,this.capture=!!G,this.ha=ae,this.key=++H,this.da=this.fa=!1}function te(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ce(v,I,V){for(const G in v)I.call(V,v[G],G,v)}function pe(v,I){for(const V in v)I.call(void 0,v[V],V,v)}function B(v){const I={};for(const V in v)I[V]=v[V];return I}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(v,I){let V,G;for(let ae=1;ae<arguments.length;ae++){G=arguments[ae];for(V in G)v[V]=G[V];for(let fe=0;fe<Q.length;fe++)V=Q[fe],Object.prototype.hasOwnProperty.call(G,V)&&(v[V]=G[V])}}function ne(v){this.src=v,this.g={},this.h=0}ne.prototype.add=function(v,I,V,G,ae){const fe=v.toString();v=this.g[fe],v||(v=this.g[fe]=[],this.h++);const Ce=de(v,I,G,ae);return Ce>-1?(I=v[Ce],V||(I.fa=!1)):(I=new Y(I,this.src,fe,!!G,ae),I.fa=V,v.push(I)),I};function ue(v,I){const V=I.type;if(V in v.g){var G=v.g[V],ae=Array.prototype.indexOf.call(G,I,void 0),fe;(fe=ae>=0)&&Array.prototype.splice.call(G,ae,1),fe&&(te(I),v.g[V].length==0&&(delete v.g[V],v.h--))}}function de(v,I,V,G){for(let ae=0;ae<v.length;++ae){const fe=v[ae];if(!fe.da&&fe.listener==I&&fe.capture==!!V&&fe.ha==G)return ae}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Te={};function De(v,I,V,G,ae){if(Array.isArray(I)){for(let fe=0;fe<I.length;fe++)De(v,I[fe],V,G,ae);return null}return V=wt(V),v&&v[$]?v.J(I,V,c(G)?!!G.capture:!1,ae):Ye(v,I,V,!1,G,ae)}function Ye(v,I,V,G,ae,fe){if(!I)throw Error("Invalid event type");const Ce=c(ae)?!!ae.capture:!!ae;let at=We(v);if(at||(v[ge]=at=new ne(v)),V=at.add(I,V,G,Ce,fe),V.proxy)return V;if(G=we(),V.proxy=G,G.src=v,G.listener=V,v.addEventListener)F||(ae=Ce),ae===void 0&&(ae=!1),v.addEventListener(I.toString(),G,ae);else if(v.attachEvent)v.attachEvent(je(I.toString()),G);else if(v.addListener&&v.removeListener)v.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return V}function we(){function v(V){return I.call(v.src,v.listener,V)}const I=$e;return v}function Ie(v,I,V,G,ae){if(Array.isArray(I))for(var fe=0;fe<I.length;fe++)Ie(v,I[fe],V,G,ae);else G=c(G)?!!G.capture:!!G,V=wt(V),v&&v[$]?(v=v.i,fe=String(I).toString(),fe in v.g&&(I=v.g[fe],V=de(I,V,G,ae),V>-1&&(te(I[V]),Array.prototype.splice.call(I,V,1),I.length==0&&(delete v.g[fe],v.h--)))):v&&(v=We(v))&&(I=v.g[I.toString()],v=-1,I&&(v=de(I,V,G,ae)),(V=v>-1?I[v]:null)&&ut(V))}function ut(v){if(typeof v!="number"&&v&&!v.da){var I=v.src;if(I&&I[$])ue(I.i,v);else{var V=v.type,G=v.proxy;I.removeEventListener?I.removeEventListener(V,G,v.capture):I.detachEvent?I.detachEvent(je(V),G):I.addListener&&I.removeListener&&I.removeListener(G),(V=We(I))?(ue(V,v),V.h==0&&(V.src=null,I[ge]=null)):te(v)}}}function je(v){return v in Te?Te[v]:Te[v]="on"+v}function $e(v,I){if(v.da)v=!0;else{I=new X(I,this);const V=v.listener,G=v.ha||v.src;v.fa&&ut(v),v=V.call(G,I)}return v}function We(v){return v=v[ge],v instanceof ne?v:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function wt(v){return typeof v=="function"?v:(v[gt]||(v[gt]=function(I){return v.handleEvent(I)}),v[gt])}function Me(){O.call(this),this.i=new ne(this),this.M=this,this.G=null}p(Me,O),Me.prototype[$]=!0,Me.prototype.removeEventListener=function(v,I,V,G){Ie(this,v,I,V,G)};function Fe(v,I){var V,G=v.G;if(G)for(V=[];G;G=G.G)V.push(G);if(v=v.M,G=I.type||I,typeof I=="string")I=new L(I,v);else if(I instanceof L)I.target=I.target||v;else{var ae=I;I=new L(G,v),K(I,ae)}ae=!0;let fe,Ce;if(V)for(Ce=V.length-1;Ce>=0;Ce--)fe=I.g=V[Ce],ae=Pt(fe,G,!0,I)&&ae;if(fe=I.g=v,ae=Pt(fe,G,!0,I)&&ae,ae=Pt(fe,G,!1,I)&&ae,V)for(Ce=0;Ce<V.length;Ce++)fe=I.g=V[Ce],ae=Pt(fe,G,!1,I)&&ae}Me.prototype.N=function(){if(Me.Z.N.call(this),this.i){var v=this.i;for(const I in v.g){const V=v.g[I];for(let G=0;G<V.length;G++)te(V[G]);delete v.g[I],v.h--}}this.G=null},Me.prototype.J=function(v,I,V,G){return this.i.add(String(v),I,!1,V,G)},Me.prototype.K=function(v,I,V,G){return this.i.add(String(v),I,!0,V,G)};function Pt(v,I,V,G){if(I=v.i.g[String(I)],!I)return!0;I=I.concat();let ae=!0;for(let fe=0;fe<I.length;++fe){const Ce=I[fe];if(Ce&&!Ce.da&&Ce.capture==V){const at=Ce.listener,Sn=Ce.ha||Ce.src;Ce.fa&&ue(v.i,Ce),ae=at.call(Sn,G)!==!1&&ae}}return ae&&!G.defaultPrevented}function mn(v,I){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:o.setTimeout(v,I||0)}function Xt(v){v.g=mn(()=>{v.g=null,v.i&&(v.i=!1,Xt(v))},v.l);const I=v.h;v.h=null,v.m.apply(null,I)}class pt extends O{constructor(I,V){super(),this.m=I,this.l=V,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Xt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(v){O.call(this),this.h=v,this.g={}}p(At,O);var Bt=[];function or(v){ce(v.g,function(I,V){this.g.hasOwnProperty(V)&&ut(I)},v),v.g={}}At.prototype.N=function(){At.Z.N.call(this),or(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ur=o.JSON.stringify,ss=o.JSON.parse,Ws=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function wi(){}function yr(){}var kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){L.call(this,"d")}p(vn,L);function tr(){L.call(this,"c")}p(tr,L);var Wt={},Qs=null;function ga(){return Qs=Qs||new Me}Wt.Ia="serverreachability";function ma(v){L.call(this,Wt.Ia,v)}p(ma,L);function dt(v){const I=ga();Fe(I,new ma(I))}Wt.STAT_EVENT="statevent";function Qt(v,I){L.call(this,Wt.STAT_EVENT,v),this.stat=I}p(Qt,L);function Zt(v){const I=ga();Fe(I,new Qt(I,v))}Wt.Ja="timingevent";function Re(v,I){L.call(this,Wt.Ja,v),this.size=I}p(Re,L);function Ue(v,I){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},I)}function Nt(){this.g=!0}Nt.prototype.ua=function(){this.g=!1};function nn(v,I,V,G,ae,fe){v.info(function(){if(v.g)if(fe){var Ce="",at=fe.split("&");for(let Dt=0;Dt<at.length;Dt++){var Sn=at[Dt].split("=");if(Sn.length>1){const rn=Sn[0];Sn=Sn[1];const Ai=rn.split("_");Ce=Ai.length>=2&&Ai[1]=="type"?Ce+(rn+"="+Sn+"&"):Ce+(rn+"=redacted&")}}}else Ce=null;else Ce=fe;return"XMLHTTP REQ ("+G+") [attempt "+ae+"]: "+I+`
`+V+`
`+Ce})}function Gr(v,I,V,G,ae,fe,Ce){v.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ae+"]: "+I+`
`+V+`
`+fe+" "+Ce})}function br(v,I,V,G){v.info(function(){return"XMLHTTP TEXT ("+I+"): "+ct(v,V)+(G?" "+G:"")})}function xr(v,I){v.info(function(){return"TIMEOUT: "+I})}Nt.prototype.info=function(){};function ct(v,I){if(!v.g)return I;if(!I)return null;try{const fe=JSON.parse(I);if(fe){for(v=0;v<fe.length;v++)if(Array.isArray(fe[v])){var V=fe[v];if(!(V.length<2)){var G=V[1];if(Array.isArray(G)&&!(G.length<1)){var ae=G[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Ce=1;Ce<G.length;Ce++)G[Ce]=""}}}}return Ur(fe)}catch{return I}}var Dn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nr;function qr(){}p(qr,wi),qr.prototype.g=function(){return new XMLHttpRequest},nr=new qr;function Hn(v){return encodeURIComponent(String(v))}function kn(v){var I=1;v=v.split(":");const V=[];for(;I>0&&v.length;)V.push(v.shift()),I--;return v.length&&V.push(v.join(":")),V}function $n(v,I,V,G){this.j=v,this.i=I,this.l=V,this.S=G||1,this.V=new At(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rr}function rr(){this.i=null,this.g="",this.h=!1}var cn={},un={};function Hr(v,I,V){v.M=1,v.A=bl(Mn(I)),v.u=V,v.R=!0,Ki(v,null)}function Ki(v,I){v.F=Date.now(),va(v),v.B=Mn(v.A);var V=v.B,G=v.S;Array.isArray(G)||(G=[String(G)]),Fc(V.i,"t",G),v.C=0,V=v.j.L,v.h=new rr,v.g=lg(v.j,V?I:null,!v.u),v.P>0&&(v.O=new pt(d(v.Y,v,v.g),v.P)),I=v.V,V=v.g,G=v.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Bt[0]=ae.toString()),ae=Bt);for(let fe=0;fe<ae.length;fe++){const Ce=De(V,ae[fe],G||I.handleEvent,!1,I.h||I);if(!Ce)break;I.g[Ce.key]=Ce}I=v.J?B(v.J):{},v.u?(v.v||(v.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,I)):(v.v="GET",v.g.ea(v.B,v.v,null,I)),dt(),nn(v.i,v.v,v.B,v.l,v.S,v.u)}$n.prototype.ba=function(v){v=v.target;const I=this.O;I&&Qi(v)==3?I.j():this.Y(v)},$n.prototype.Y=function(v){try{if(v==this.g)e:{const at=Qi(this.g),Sn=this.g.ya(),Dt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||lr(this.g)))){this.K||at!=4||Sn==7||(Sn==8||Dt<=0?dt(3):dt(2)),ya(this);var I=this.g.ca();this.X=I;var V=py(this);if(this.o=I==200,Gr(this.i,this.v,this.B,this.l,this.S,at,I),this.o){if(this.U&&!this.L){t:{if(this.g){var G,ae=this.g;if((G=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(G)){var fe=G;break t}}fe=null}if(v=fe)br(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ba(this,v);else{this.o=!1,this.m=3,Zt(12),oi(this),Ei(this);break e}}if(this.R){v=!0;let rn;for(;!this.K&&this.C<V.length;)if(rn=Xp(this,V),rn==un){at==4&&(this.m=4,Zt(14),v=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==cn){this.m=4,Zt(15),br(this.i,this.l,V,"[Invalid Chunk]"),v=!1;break}else br(this.i,this.l,rn,null),ba(this,rn);if(Kp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||V.length!=0||this.h.h||(this.m=1,Zt(16),v=!1),this.o=this.o&&v,!v)br(this.i,this.l,V,"[Invalid Chunked Response]"),oi(this),Ei(this);else if(V.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),of(Ce),Ce.P=!0,Zt(11))}}else br(this.i,this.l,V,null),ba(this,V);at==4&&oi(this),this.o&&!this.K&&(at==4?ig(this.j,this):(this.o=!1,va(this)))}else ls(this.g),I==400&&V.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),oi(this),Ei(this)}}}catch{}finally{}};function py(v){if(!Kp(v))return v.g.la();const I=lr(v.g);if(I==="")return"";let V="";const G=I.length,ae=Qi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return oi(v),Ei(v),"";v.h.i=new o.TextDecoder}for(let fe=0;fe<G;fe++)v.h.h=!0,V+=v.h.i.decode(I[fe],{stream:!(ae&&fe==G-1)});return I.length=0,v.h.g+=V,v.C=0,v.h.g}function Kp(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Xp(v,I){var V=v.C,G=I.indexOf(`
`,V);return G==-1?un:(V=Number(I.substring(V,G)),isNaN(V)?cn:(G+=1,G+V>I.length?un:(I=I.slice(G,G+V),v.C=G+V,I)))}$n.prototype.cancel=function(){this.K=!0,oi(this)};function va(v){v.T=Date.now()+v.H,zc(v,v.H)}function zc(v,I){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Ue(d(v.aa,v),I)}function ya(v){v.D&&(o.clearTimeout(v.D),v.D=null)}$n.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(xr(this.i,this.B),this.M!=2&&(dt(),Zt(17)),oi(this),this.m=2,Ei(this)):zc(this,this.T-v)};function Ei(v){v.j.I==0||v.K||ig(v.j,v)}function oi(v){ya(v);var I=v.O;I&&typeof I.dispose=="function"&&I.dispose(),v.O=null,or(v.V),v.g&&(I=v.g,v.g=null,I.abort(),I.dispose())}function ba(v,I){try{var V=v.j;if(V.I!=0&&(V.g==v||_a(V.h,v))){if(!v.L&&_a(V.h,v)&&V.I==3){try{var G=V.Ba.g.parse(I)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ae=G;if(ae[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<v.F)$c(V),ao(V);else break e;Al(V),Zt(18)}}else V.xa=ae[1],0<V.xa-V.K&&ae[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=Ue(d(V.Va,V),6e3));xa(V.h)<=1&&V.ta&&(V.ta=void 0)}else Ca(V,11)}else if((v.L||V.g==v)&&$c(V),!j(I))for(ae=V.Ba.g.parse(I),I=0;I<ae.length;I++){let Dt=ae[I];const rn=Dt[0];if(!(rn<=V.K))if(V.K=rn,Dt=Dt[1],V.I==2)if(Dt[0]=="c"){V.M=Dt[1],V.ba=Dt[2];const Ai=Dt[3];Ai!=null&&(V.ka=Ai,V.j.info("VER="+V.ka));const Ia=Dt[4];Ia!=null&&(V.za=Ia,V.j.info("SVER="+V.za));const Zi=Dt[5];Zi!=null&&typeof Zi=="number"&&Zi>0&&(G=1.5*Zi,V.O=G,V.j.info("backChannelRequestTimeoutMs_="+G)),G=V;const Ji=v.g;if(Ji){const Cl=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cl){var fe=G.h;fe.g||Cl.indexOf("spdy")==-1&&Cl.indexOf("quic")==-1&&Cl.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(Kd(fe,fe.h),fe.h=null))}if(G.G){const Yc=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Yc&&(G.wa=Yc,Ot(G.J,G.G,Yc))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-v.F,V.j.info("Handshake RTT: "+V.T+"ms")),G=V;var Ce=v;if(G.na=og(G,G.L?G.ba:null,G.W),Ce.L){Xd(G.h,Ce);var at=Ce,Sn=G.O;Sn&&(at.H=Sn),at.D&&(ya(at),va(at)),G.g=Ce}else ng(G);V.i.length>0&&Aa(V)}else Dt[0]!="stop"&&Dt[0]!="close"||Ca(V,7);else V.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Ca(V,7):af(V):Dt[0]!="noop"&&V.l&&V.l.qa(Dt),V.A=0)}}dt(4)}catch{}}var Nn=class{constructor(v,I){this.g=v,this.map=I}};function $d(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function xa(v){return v.h?1:v.g?v.g.size:0}function _a(v,I){return v.h?v.h==I:v.g?v.g.has(I):!1}function Kd(v,I){v.g?v.g.add(I):v.h=I}function Xd(v,I){v.h&&v.h==I?v.h=null:v.g&&v.g.has(I)&&v.g.delete(I)}$d.prototype.cancel=function(){if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let I=v.i;for(const V of v.g.values())I=I.concat(V.G);return I}return b(v.i)}var Wp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lc(v,I){if(v){v=v.split("&");for(let V=0;V<v.length;V++){const G=v[V].indexOf("=");let ae,fe=null;G>=0?(ae=v[V].substring(0,G),fe=v[V].substring(G+1)):ae=v[V],I(ae,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function li(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;v instanceof li?(this.l=v.l,ir(this,v.j),this.o=v.o,this.g=v.g,Zs(this,v.u),this.h=v.h,Qd(this,eg(v.i)),this.m=v.m):v&&(I=String(v).match(Wp))?(this.l=!1,ir(this,I[1]||"",!0),this.o=wa(I[2]||""),this.g=wa(I[3]||"",!0),Zs(this,I[4]),this.h=wa(I[5]||"",!0),Qd(this,I[6]||"",!0),this.m=wa(I[7]||"")):(this.l=!1,this.i=new eo(null,this.l))}li.prototype.toString=function(){const v=[];var I=this.j;I&&v.push(xl(I,Bc,!0),":");var V=this.g;return(V||I=="file")&&(v.push("//"),(I=this.o)&&v.push(xl(I,Bc,!0),"@"),v.push(Hn(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&v.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(xl(V,V.charAt(0)=="/"?Zd:Qp,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",xl(V,Zp)),v.join("")},li.prototype.resolve=function(v){const I=Mn(this);let V=!!v.j;V?ir(I,v.j):V=!!v.o,V?I.o=v.o:V=!!v.g,V?I.g=v.g:V=v.u!=null;var G=v.h;if(V)Zs(I,v.u);else if(V=!!v.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var ae=I.h.lastIndexOf("/");ae!=-1&&(G=I.h.slice(0,ae+1)+G)}if(ae=G,ae==".."||ae==".")G="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){G=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const fe=[];for(let Ce=0;Ce<ae.length;){const at=ae[Ce++];at=="."?G&&Ce==ae.length&&fe.push(""):at==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),G&&Ce==ae.length&&fe.push("")):(fe.push(at),G=!0)}G=fe.join("/")}else G=ae}return V?I.h=G:V=v.i.toString()!=="",V?Qd(I,eg(v.i)):V=!!v.m,V&&(I.m=v.m),I};function Mn(v){return new li(v)}function ir(v,I,V){v.j=V?wa(I,!0):I,v.j&&(v.j=v.j.replace(/:$/,""))}function Zs(v,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);v.u=I}else v.u=null}function Qd(v,I,V){I instanceof eo?(v.i=I,Uc(v.i,v.l)):(V||(I=xl(I,Js)),v.i=new eo(I,v.l))}function Ot(v,I,V){v.i.set(I,V)}function bl(v){return Ot(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function wa(v,I){return v?I?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function xl(v,I,V){return typeof v=="string"?(v=encodeURI(v).replace(I,$r),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function $r(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Bc=/[#\/\?@]/g,Qp=/[#\?:]/g,Zd=/[#\?]/g,Js=/[#\?@]/g,Zp=/#/g;function eo(v,I){this.h=this.g=null,this.i=v||null,this.j=!!I}function Yr(v){v.g||(v.g=new Map,v.h=0,v.i&&Lc(v.i,function(I,V){v.add(decodeURIComponent(I.replace(/\+/g," ")),V)}))}t=eo.prototype,t.add=function(v,I){Yr(this),this.i=null,v=to(this,v);let V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(I),this.h+=1,this};function Jp(v,I){Yr(v),I=to(v,I),v.g.has(I)&&(v.i=null,v.h-=v.g.get(I).length,v.g.delete(I))}function Jd(v,I){return Yr(v),I=to(v,I),v.g.has(I)}t.forEach=function(v,I){Yr(this),this.g.forEach(function(V,G){V.forEach(function(ae){v.call(I,ae,G,this)},this)},this)};function ef(v,I){Yr(v);let V=[];if(typeof I=="string")Jd(v,I)&&(V=V.concat(v.g.get(to(v,I))));else for(v=Array.from(v.g.values()),I=0;I<v.length;I++)V=V.concat(v[I]);return V}t.set=function(v,I){return Yr(this),this.i=null,v=to(this,v),Jd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[I]),this.h+=1,this},t.get=function(v,I){return v?(v=ef(this,v),v.length>0?String(v[0]):I):I};function Fc(v,I,V){Jp(v,I),V.length>0&&(v.i=null,v.g.set(to(v,I),b(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],I=Array.from(this.g.keys());for(let G=0;G<I.length;G++){var V=I[G];const ae=Hn(V);V=ef(this,V);for(let fe=0;fe<V.length;fe++){let Ce=ae;V[fe]!==""&&(Ce+="="+Hn(V[fe])),v.push(Ce)}}return this.i=v.join("&")};function eg(v){const I=new eo;return I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),I}function to(v,I){return I=String(I),v.j&&(I=I.toLowerCase()),I}function Uc(v,I){I&&!v.j&&(Yr(v),v.i=null,v.g.forEach(function(V,G){const ae=G.toLowerCase();G!=ae&&(Jp(this,G),Fc(this,ae,V))},v)),v.j=I}function Xi(v,I){const V=new Nt;if(o.Image){const G=new Image;G.onload=h(Si,V,"TestLoadImage: loaded",!0,I,G),G.onerror=h(Si,V,"TestLoadImage: error",!1,I,G),G.onabort=h(Si,V,"TestLoadImage: abort",!1,I,G),G.ontimeout=h(Si,V,"TestLoadImage: timeout",!1,I,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=v}else I(!1)}function tf(v,I){const V=new Nt,G=new AbortController,ae=setTimeout(()=>{G.abort(),Si(V,"TestPingServer: timeout",!1,I)},1e4);fetch(v,{signal:G.signal}).then(fe=>{clearTimeout(ae),fe.ok?Si(V,"TestPingServer: ok",!0,I):Si(V,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ae),Si(V,"TestPingServer: error",!1,I)})}function Si(v,I,V,G,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),G(V)}catch{}}function no(){this.g=new Ws}function Ea(v){this.i=v.Sb||null,this.h=v.ab||!1}p(Ea,wi),Ea.prototype.g=function(){return new _l(this.i,this.h)};function _l(v,I){Me.call(this),this.H=v,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_l,Me),t=_l.prototype,t.open=function(v,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=I,this.readyState=1,Wi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(I.body=v),(this.H||o).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var I=v.value?v.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!v.done}))&&(this.response=this.responseText+=I)}v.done?ro(this):Wi(this),this.readyState==3&&Gc(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,ro(this))},t.Na=function(v){this.g&&(this.response=v,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}t.setRequestHeader=function(v,I){this.A.append(v,I)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],I=this.h.entries();for(var V=I.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=I.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ti(v){let I="";return ce(v,function(V,G){I+=G,I+=":",I+=V,I+=`\r
`}),I}function wl(v,I,V){e:{for(G in V){var G=!1;break e}G=!0}G||(V=Ti(V),typeof v=="string"?V!=null&&Hn(V):Ot(v,I,V))}function Ft(v){Me.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ft,Me);var Sa=/^https?$/i,nf=["POST","PUT"];t=Ft.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,I,V,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);I=I?I.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nr.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(I,String(v),!0),this.B=!1}catch(fe){El(this,fe);return}if(v=V||"",V=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ae in G)V.set(ae,G[ae]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const fe of G.keys())V.set(fe,G.get(fe));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(V.keys()).find(fe=>fe.toLowerCase()=="content-type"),ae=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(nf,I,void 0)>=0)||G||ae||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Ce]of V)this.g.setRequestHeader(fe,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(fe){El(this,fe)}};function El(v,I){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=I,v.o=5,rf(v),os(v)}function rf(v){v.A||(v.A=!0,Fe(v,"complete"),Fe(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Fe(this,"complete"),Fe(this,"abort"),os(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),Ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sl(this):this.Xa())},t.Xa=function(){Sl(this)};function Sl(v){if(v.h&&typeof a<"u"){if(v.v&&Qi(v)==4)setTimeout(v.Ca.bind(v),0);else if(Fe(v,"readystatechange"),Qi(v)==4){v.h=!1;try{const fe=v.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var V;if(!(V=I)){var G;if(G=fe===0){let Ce=String(v.D).match(Wp)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),G=!Sa.test(Ce?Ce.toLowerCase():"")}V=G}if(V)Fe(v,"complete"),Fe(v,"success");else{v.o=6;try{var ae=Qi(v)>2?v.g.statusText:""}catch{ae=""}v.l=ae+" ["+v.ca()+"]",rf(v)}}finally{os(v)}}}}function os(v,I){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const V=v.g;v.g=null,I||Fe(v,"ready");try{V.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var I=this.g.responseText;return v&&I.indexOf(v)==0&&(I=I.substring(v.length)),ss(I)}};function lr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(v){const I={};v=(v.g&&Qi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<v.length;G++){if(j(v[G]))continue;var V=kn(v[G]);const ae=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const fe=I[ae]||[];I[ae]=fe,fe.push(V)}pe(I,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(v,I,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||I}function io(v){this.za=0,this.i=[],this.j=new Nt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ta("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ta("baseRetryDelayMs",5e3,v),this.Za=Ta("retryDelaySeedMs",1e4,v),this.Ta=Ta("forwardChannelMaxRetries",2,v),this.va=Ta("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new $d(v&&v.concurrentRequestLimit),this.Ba=new no,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=io.prototype,t.ka=8,t.I=1,t.connect=function(v,I,V,G){Zt(0),this.W=v,this.H=I||{},V&&G!==void 0&&(this.H.OSID=V,this.H.OAID=G),this.F=this.X,this.J=og(this,null,this.W),Aa(this)};function af(v){if(qc(v),v.I==3){var I=v.V++,V=Mn(v.J);if(Ot(V,"SID",v.M),Ot(V,"RID",I),Ot(V,"TYPE","terminate"),Tl(v,V),I=new $n(v,v.j,I),I.M=2,I.A=bl(Mn(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(I.A.toString(),"")}catch{}!V&&o.Image&&(new Image().src=I.A,V=!0),V||(I.g=lg(I.j,null),I.g.ea(I.A)),I.F=Date.now(),va(I)}sg(v)}function ao(v){v.g&&(of(v),v.g.cancel(),v.g=null)}function qc(v){ao(v),v.v&&(o.clearTimeout(v.v),v.v=null),$c(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function Aa(v){if(!Yd(v.h)&&!v.m){v.m=!0;var I=v.Ea;z||C(),M||(z(),M=!0),T.add(I,v),v.D=0}}function Hc(v,I){return xa(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=I.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Ue(d(v.Ea,v,I),ag(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ae=new $n(this,this.j,v);let fe=this.o;if(this.U&&(fe?(fe=B(fe),K(fe,this.U)):fe=this.U),this.u!==null||this.R||(ae.J=fe,fe=null),this.S)e:{for(var I=0,V=0;V<this.i.length;V++){t:{var G=this.i[V];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(I+=G,I>4096){I=V;break e}if(I===4096||V===this.i.length-1){I=V+1;break e}}I=1e3}else I=1e3;I=tg(this,ae,I),V=Mn(this.J),Ot(V,"RID",v),Ot(V,"CVER",22),this.G&&Ot(V,"X-HTTP-Session-Id",this.G),Tl(this,V),fe&&(this.R?I="headers="+Hn(Ti(fe))+"&"+I:this.u&&wl(V,this.u,fe)),Kd(this.h,ae),this.Ra&&Ot(V,"TYPE","init"),this.S?(Ot(V,"$req",I),Ot(V,"SID","null"),ae.U=!0,Hr(ae,V,null)):Hr(ae,V,I),this.I=2}}else this.I==3&&(v?sf(this,v):this.i.length==0||Yd(this.h)||sf(this))};function sf(v,I){var V;I?V=I.l:V=v.V++;const G=Mn(v.J);Ot(G,"SID",v.M),Ot(G,"RID",V),Ot(G,"AID",v.K),Tl(v,G),v.u&&v.o&&wl(G,v.u,v.o),V=new $n(v,v.j,V,v.D+1),v.u===null&&(V.J=v.o),I&&(v.i=I.G.concat(v.i)),I=tg(v,V,1e3),V.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Kd(v.h,V),Hr(V,G,I)}function Tl(v,I){v.H&&ce(v.H,function(V,G){Ot(I,G,V)}),v.l&&ce({},function(V,G){Ot(I,G,V)})}function tg(v,I,V){V=Math.min(v.i.length,V);const G=v.l?d(v.l.Ka,v.l,v):null;e:{var ae=v.i;let at=-1;for(;;){const Sn=["count="+V];at==-1?V>0?(at=ae[0].g,Sn.push("ofs="+at)):at=0:Sn.push("ofs="+at);let Dt=!0;for(let rn=0;rn<V;rn++){var fe=ae[rn].g;const Ai=ae[rn].map;if(fe-=at,fe<0)at=Math.max(0,ae[rn].g-100),Dt=!1;else try{fe="req"+fe+"_"||"";try{var Ce=Ai instanceof Map?Ai:Object.entries(Ai);for(const[Ia,Zi]of Ce){let Ji=Zi;c(Zi)&&(Ji=Ur(Zi)),Sn.push(fe+Ia+"="+encodeURIComponent(Ji))}}catch(Ia){throw Sn.push(fe+"type="+encodeURIComponent("_badmap")),Ia}}catch{G&&G(Ai)}}if(Dt){Ce=Sn.join("&");break e}}Ce=void 0}return v=v.i.splice(0,V),I.G=v,Ce}function ng(v){if(!v.g&&!v.v){v.Y=1;var I=v.Da;z||C(),M||(z(),M=!0),T.add(I,v),v.A=0}}function Al(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Ue(d(v.Da,v),ag(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,rg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Ue(d(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),ao(this),rg(this))};function of(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function rg(v){v.g=new $n(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var I=Mn(v.na);Ot(I,"RID","rpc"),Ot(I,"SID",v.M),Ot(I,"AID",v.K),Ot(I,"CI",v.F?"0":"1"),!v.F&&v.ia&&Ot(I,"TO",v.ia),Ot(I,"TYPE","xmlhttp"),Tl(v,I),v.u&&v.o&&wl(I,v.u,v.o),v.O&&(v.g.H=v.O);var V=v.g;v=v.ba,V.M=1,V.A=bl(Mn(I)),V.u=null,V.R=!0,Ki(V,v)}t.Va=function(){this.C!=null&&(this.C=null,ao(this),Al(this),Zt(19))};function $c(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function ig(v,I){var V=null;if(v.g==I){$c(v),of(v),v.g=null;var G=2}else if(_a(v.h,I))V=I.G,Xd(v.h,I),G=1;else return;if(v.I!=0){if(I.o)if(G==1){V=I.u?I.u.length:0,I=Date.now()-I.F;var ae=v.D;G=ga(),Fe(G,new Re(G,V)),Aa(v)}else ng(v);else if(ae=I.m,ae==3||ae==0&&I.X>0||!(G==1&&Hc(v,I)||G==2&&Al(v)))switch(V&&V.length>0&&(I=v.h,I.i=I.i.concat(V)),ae){case 1:Ca(v,5);break;case 4:Ca(v,10);break;case 3:Ca(v,6);break;default:Ca(v,2)}}}function ag(v,I){let V=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(V*=2),V*I}function Ca(v,I){if(v.j.info("Error code "+I),I==2){var V=d(v.bb,v),G=v.Ua;const ae=!G;G=new li(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ir(G,"https"),bl(G),ae?Xi(G.toString(),V):tf(G.toString(),V)}else Zt(2);v.I=0,v.l&&v.l.pa(I),sg(v),qc(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function sg(v){if(v.I=0,v.ja=[],v.l){const I=Wd(v.h);(I.length!=0||v.i.length!=0)&&(_(v.ja,I),_(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function og(v,I,V){var G=V instanceof li?Mn(V):new li(V);if(G.g!="")I&&(G.g=I+"."+G.g),Zs(G,G.u);else{var ae=o.location;G=ae.protocol,I=I?I+"."+ae.hostname:ae.hostname,ae=+ae.port;const fe=new li(null);G&&ir(fe,G),I&&(fe.g=I),ae&&Zs(fe,ae),V&&(fe.h=V),G=fe}return V=v.G,I=v.wa,V&&I&&Ot(G,V,I),Ot(G,"VER",v.ka),Tl(v,G),G}function lg(v,I,V){if(I&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=v.Aa&&!v.ma?new Ft(new Ea({ab:V})):new Ft(v.ma),I.Fa(v.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cg(){}t=cg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function so(){}so.prototype.g=function(v,I){return new Nr(v,I)};function Nr(v,I){Me.call(this),this.g=new io(I),this.l=v,this.h=I&&I.messageUrlParams||null,v=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(v?v["X-WebChannel-Content-Type"]=I.messageContentType:v={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(v?v["X-WebChannel-Client-Profile"]=I.sa:v={"X-WebChannel-Client-Profile":I.sa}),this.g.U=v,(v=I&&I.Qb)&&!j(v)&&(this.g.u=v),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!j(I)&&(this.g.G=I,v=this.h,v!==null&&I in v&&(v=this.h,I in v&&delete v[I])),this.j=new cs(this)}p(Nr,Me),Nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){af(this.g)},Nr.prototype.o=function(v){var I=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.v&&(V={},V.__data__=Ur(v),v=V);I.i.push(new Nn(I.Ya++,v)),I.I==3&&Aa(I)},Nr.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,Nr.Z.N.call(this)};function ug(v){vn.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var I=v.__sm__;if(I){e:{for(const V in I){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,I=I!==null&&v in I?I[v]:void 0),this.data=I}else this.data=v}p(ug,vn);function dg(){tr.call(this),this.status=1}p(dg,tr);function cs(v){this.g=v}p(cs,cg),cs.prototype.ra=function(){Fe(this.g,"a")},cs.prototype.qa=function(v){Fe(this.g,new ug(v))},cs.prototype.pa=function(v){Fe(this.g,new dg)},cs.prototype.oa=function(){Fe(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,Q4=function(){return new so},W4=function(){return ga()},X4=Wt,E_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dn.NO_ERROR=0,Dn.TIMEOUT=8,Dn.HTTP_ERROR=6,sv=Dn,Rn.COMPLETE="complete",K4=Rn,yr.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",Me.prototype.listen=Me.prototype.J,sh=yr,Ft.prototype.listenOnce=Ft.prototype.K,Ft.prototype.getLastError=Ft.prototype.Ha,Ft.prototype.getLastErrorCode=Ft.prototype.ya,Ft.prototype.getStatus=Ft.prototype.ca,Ft.prototype.getResponseJson=Ft.prototype.La,Ft.prototype.getResponseText=Ft.prototype.la,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Fa,Y4=Ft}).apply(typeof jm<"u"?jm:typeof self<"u"?self:typeof window<"u"?window:{});const cR="@firebase/firestore",uR="4.9.2";class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let Fd="12.3.0";const Sc=new wE("@firebase/firestore");function Nu(){return Sc.logLevel}function Ee(t,...e){if(Sc.logLevel<=xt.DEBUG){const n=e.map(ME);Sc.debug(`Firestore (${Fd}): ${t}`,...n)}}function Vr(t,...e){if(Sc.logLevel<=xt.ERROR){const n=e.map(ME);Sc.error(`Firestore (${Fd}): ${t}`,...n)}}function Tc(t,...e){if(Sc.logLevel<=xt.WARN){const n=e.map(ME);Sc.warn(`Firestore (${Fd}): ${t}`,...n)}}function ME(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Z4(t,r,n)}function Z4(t,e,n){let r=`FIRESTORE (${Fd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vr(r),new Error(r)}function ze(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Z4(e,i,r)}function rt(t,e){return t}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ya{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class J4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(gr.UNAUTHENTICATED)))}shutdown(){}}class JW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eQ{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Ya;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ya,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ya)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new J4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new gr(e)}}class tQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tQ(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(gr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rQ{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function iQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class PE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=iQ(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function S_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return Z1(i)===Z1(a)?tt(i,a):Z1(i)?1:-1}return tt(t.length,e.length)}const aQ=55296,sQ=57343;function Z1(t){const e=t.charCodeAt(0);return e>=aQ&&e<=sQ}function pd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function e3(t){return t+"\0"}const fR="__name__";class Pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Pa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return tt(e.length,n.length)}static compareSegments(e,n){const r=Pa.isNumericId(e),i=Pa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Pa.extractNumericId(e).compare(Pa.extractNumericId(n)):S_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return el.fromString(e.substring(4,e.length-2))}}class kt extends Pa{construct(e,n,r){return new kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new kt(n)}static emptyPath(){return new kt([])}}const oQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Pa{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return oQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fR}static keyField(){return new hn([fR])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ae(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ae(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ae(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ae(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(kt.fromString(e))}static fromName(e){return new ke(kt.fromString(e).popFirst(5))}static empty(){return new ke(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new kt(e.slice()))}}function t3(t,e,n){if(!n)throw new Ae(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lQ(t,e,n,r){if(e===!0&&r===!0)throw new Ae(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hR(t){if(!ke.isDocumentKey(t))throw new Ae(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pR(t){if(ke.isDocumentKey(t))throw new Ae(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function n3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function F0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function Lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=F0(t);throw new Ae(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Un(t,e){const n={typeString:t};return e&&(n.value=e),n}function jp(t,e){if(!n3(t))throw new Ae(me.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ae(me.INVALID_ARGUMENT,n);return!0}const gR=-62135596800,mR=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mR);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gR)throw new Ae(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mR}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jp(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Un("string",ft._jsonSchemaVersion),seconds:Un("number"),nanoseconds:Un("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new ft(0,0))}static max(){return new He(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zh=-1;class Xv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function T_(t){return t.fields.find((e=>e.kind===2))}function Yl(t){return t.fields.filter((e=>e.kind!==2))}Xv.UNKNOWN_ID=-1;class ov{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jh(0,_i.min())}}function cQ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new _i(i,ke.empty(),e)}function r3(t){return new _i(t.readTime,t.key,Zh)}class _i{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _i(He.min(),ke.empty(),Zh)}static max(){return new _i(He.max(),ke.empty(),Zh)}}function OE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}const i3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vc(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==i3)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,r)=>{n(e)}))}static reject(e){return new ie(((n,r)=>{r(e)}))}static waitFor(e){return new ie(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next((i=>i?ie.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new ie(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new ie(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const vi="SimpleDb";class U0{static open(e,n,r,i){try{return new U0(n,e.transaction(i,r))}catch(a){throw new Sh(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ya,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Sh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=VE(r.target.error);this.S.reject(new Sh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ee(vi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new dQ(n)}}class tl{static delete(e){return Ee(vi,"Removing database:",e),Jl(KO().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!r4())return!1;if(tl.F())return!0;const e=Jn(),n=tl.M(e),r=0<n&&n<10,i=s3(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,tl.M(Jn())===12.2&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ee(vi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;n(o)},i.onblocked=()=>{r(new Sh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new Ae(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Ae(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Sh(e,o))},i.onupgradeneeded=a=>{Ee(vi,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.N.k(o,i.transaction,a.oldVersion,this.version).next((()=>{Ee(vi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=U0.open(this.db,e,a?"readonly":"readwrite",r),u=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),ie.reject(d)))).toPromise();return u.catch((()=>{})),await c.D,u}catch(c){const u=c,d=u.name!=="FirebaseError"&&o<3;if(Ee(vi,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function s3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class uQ{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Jl(this.U.delete())}}class Sh extends Ae{constructor(e,n){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function vl(t){return t.name==="IndexedDbTransactionError"}class dQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ee(vi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ee(vi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jl(r)}add(e){return Ee(vi,"ADD",this.store.name,e,e),Jl(this.store.add(e))}get(e){return Jl(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ee(vi,"GET",this.store.name,e,n),n)))}delete(e){return Ee(vi,"DELETE",this.store.name,e),Jl(this.store.delete(e))}count(){return Ee(vi,"COUNT",this.store.name),Jl(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new ie(((o,c)=>{a.onerror=u=>{c(u.target.error)},a.onsuccess=u=>{o(u.target.result)}}))}{const a=this.cursor(r),o=[];return this.H(a,((c,u)=>{o.push(u)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new ie(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){Ee(vi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,o,c)=>c.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new ie(((r,i)=>{n.onerror=a=>{const o=VE(a.target.error);i(o)},n.onsuccess=a=>{const o=a.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():r()})):r()}}))}H(e,n){const r=[];return new ie(((i,a)=>{e.onerror=o=>{a(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const u=new uQ(c),d=n(c.primaryKey,c.value,u);if(d instanceof ie){const h=d.catch((p=>(u.done(),ie.reject(p))));r.push(h)}u.isDone?i():u.G===null?c.continue():c.continue(u.G)}})).next((()=>ie.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Jl(t){return new ie(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=VE(r.target.error);n(i)}}))}let vR=!1;function VE(t){const e=tl.M(Jn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vR||(vR=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Th="IndexBackfiller";class fQ{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ee(Th,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ee(Th,`Documents written: ${n}`)}catch(n){vl(n)?Ee(Th,"Ignoring IndexedDB error during index backfill: ",n):await Vc(n)}await this.re(6e4)}))}}class hQ{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return ie.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return Ee(Th,`Processing collection: ${o}`),this.oe(e,o,i).next((c=>{i-=c,r.add(o)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,a))).next((c=>(Ee(Th,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const o=r3(a);OE(o,r)>0&&(r=o)})),new _i(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Fi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fi.ce=-1;const uc=-1;function G0(t){return t==null}function ep(t){return t===0&&1/t==-1/0}function pQ(t){return typeof t=="number"&&Number.isInteger(t)&&!ep(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Wv="";function Ir(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yR(e)),e=gQ(t.get(n),e);return yR(e)}function gQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Wv:n+="";break;default:n+=a}}return n}function yR(t){return t+Wv+""}function La(t){const e=t.length;if(ze(e>=2,64408,{path:t}),e===2)return ze(t.charAt(0)===Wv&&t.charAt(1)==="",56145,{path:t}),kt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const o=t.indexOf(Wv,a);switch((o<0||o>n)&&Oe(50515,{path:t}),t.charAt(o+1)){case"":const c=t.substring(a,o);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=t.substring(a,o),i+="\0";break;case"":i+=t.substring(a,o+1);break;default:Oe(61167,{path:t})}a=o+2}return new kt(r)}const Kl="remoteDocuments",zp="owner",Su="owner",tp="mutationQueues",mQ="userId",aa="mutations",bR="batchId",sc="userMutationsIndex",xR=["userId","batchId"];function lv(t,e){return[t,Ir(e)]}function o3(t,e,n){return[t,Ir(e),n]}const vQ={},gd="documentMutations",Qv="remoteDocumentsV14",yQ=["prefixPath","collectionGroup","readTime","documentId"],cv="documentKeyIndex",bQ=["prefixPath","collectionGroup","documentId"],l3="collectionGroupIndex",xQ=["collectionGroup","readTime","prefixPath","documentId"],np="remoteDocumentGlobal",A_="remoteDocumentGlobalKey",md="targets",c3="queryTargetsIndex",_Q=["canonicalId","targetId"],vd="targetDocuments",wQ=["targetId","path"],jE="documentTargetsIndex",EQ=["path","targetId"],Zv="targetGlobalKey",dc="targetGlobal",rp="collectionParents",SQ=["collectionId","parent"],yd="clientMetadata",TQ="clientId",q0="bundles",AQ="bundleId",H0="namedQueries",CQ="name",zE="indexConfiguration",IQ="indexId",C_="collectionGroupIndex",DQ="collectionGroup",Ah="indexState",RQ=["indexId","uid"],u3="sequenceNumberIndex",kQ=["uid","sequenceNumber"],Ch="indexEntries",NQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],d3="documentKeyIndex",MQ=["indexId","uid","orderedDocumentKey"],$0="documentOverlays",PQ=["userId","collectionPath","documentId"],I_="collectionPathOverlayIndex",OQ=["userId","collectionPath","largestBatchId"],f3="collectionGroupOverlayIndex",VQ=["userId","collectionGroup","largestBatchId"],LE="globals",jQ="name",h3=[tp,aa,gd,Kl,md,zp,dc,vd,yd,np,rp,q0,H0],zQ=[...h3,$0],p3=[tp,aa,gd,Qv,md,zp,dc,vd,yd,np,rp,q0,H0,$0],g3=p3,BE=[...g3,zE,Ah,Ch],LQ=BE,m3=[...BE,LE],BQ=m3;class D_ extends a3{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function er(t,e){const n=rt(t);return tl.O(n.le,e)}function _R(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function v3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zm(this.root,e,this.comparator,!1)}getReverseIterator(){return new zm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zm(this.root,e,this.comparator,!0)}}class zm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=a??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new mr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lt{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wR(this.data.getIterator())}getIteratorFrom(e){return new wR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class wR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tu(t){return t.hasNext()?t.getNext():void 0}class ni{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new Lt(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class y3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new y3("Invalid base64 string: "+a):a}})(e);return new qn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const FQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=FQ.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?qn.fromBase64String(t):qn.fromUint8Array(t)}const b3="server_timestamp",x3="__type__",_3="__previous_value__",w3="__local_write_time__";function FE(t){return(t?.mapValue?.fields||{})[x3]?.stringValue===b3}function Y0(t){const e=t.mapValue.fields[_3];return FE(e)?Y0(e):e}function ip(t){const e=Gs(t.mapValue.fields[w3].timestampValue);return new ft(e.seconds,e.nanos)}class UQ{constructor(e,n,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Jv="(default)";class Ac{constructor(e,n){this.projectId=e,this.database=n||Jv}static empty(){return new Ac("","")}get isDefaultDatabase(){return this.database===Jv}isEqual(e){return e instanceof Ac&&e.projectId===this.projectId&&e.database===this.database}}const UE="__type__",E3="__max__",Xo={mapValue:{fields:{__type__:{stringValue:E3}}}},GE="__vector__",bd="value",uv={nullValue:"NULL_VALUE"};function cl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?FE(t)?4:S3(t)?9007199254740991:K0(t)?10:11:Oe(28295,{value:t})}function Za(t,e){if(t===e)return!0;const n=cl(t);if(n!==cl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ip(t).isEqual(ip(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Gs(i.timestampValue),c=Gs(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return qs(i.bytesValue).isEqual(qs(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return sn(i.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return sn(i.integerValue)===sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=sn(i.doubleValue),c=sn(a.doubleValue);return o===c?ep(o)===ep(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return pd(t.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(_R(o)!==_R(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Za(o[u],c[u])))return!1;return!0})(t,e);default:return Oe(52216,{left:t})}}function ap(t,e){return(t.values||[]).find((n=>Za(n,e)))!==void 0}function ul(t,e){if(t===e)return 0;const n=cl(t),r=cl(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=sn(a.integerValue||a.doubleValue),u=sn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return ER(t.timestampValue,e.timestampValue);case 4:return ER(ip(t),ip(e));case 5:return S_(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=qs(a),u=qs(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=tt(c[d],u[d]);if(h!==0)return h}return tt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=tt(sn(a.latitude),sn(o.latitude));return c!==0?c:tt(sn(a.longitude),sn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return SR(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[bd]?.arrayValue,h=u[bd]?.arrayValue,p=tt(d?.values?.length||0,h?.values?.length||0);return p!==0?p:SR(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Xo.mapValue&&o===Xo.mapValue)return 0;if(a===Xo.mapValue)return 1;if(o===Xo.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=S_(u[p],h[p]);if(m!==0)return m;const b=ul(c[u[p]],d[h[p]]);if(b!==0)return b}return tt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function ER(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=Gs(t),r=Gs(e),i=tt(n.seconds,r.seconds);return i!==0?i:tt(n.nanos,r.nanos)}function SR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ul(n[i],r[i]);if(a)return a}return tt(n.length,r.length)}function xd(t){return R_(t)}function R_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Gs(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=R_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${R_(n.fields[o])}`;return i+"}"})(t.mapValue):Oe(61005,{value:t})}function dv(t){switch(cl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Y0(t);return e?16+dv(e):16;case 5:return 2*t.stringValue.length;case 6:return qs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+dv(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return yl(r.fields,((a,o)=>{i+=a.length+dv(o)})),i})(t.mapValue);default:throw Oe(13486,{value:t})}}function sp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k_(t){return!!t&&"integerValue"in t}function op(t){return!!t&&"arrayValue"in t}function TR(t){return!!t&&"nullValue"in t}function AR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fv(t){return!!t&&"mapValue"in t}function K0(t){return(t?.mapValue?.fields||{})[UE]?.stringValue===GE}function Ih(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ih(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ih(t.arrayValue.values[n]);return e}return{...t}}function S3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===E3}const T3={mapValue:{fields:{[UE]:{stringValue:GE},[bd]:{arrayValue:{}}}}};function GQ(t){return"nullValue"in t?uv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?sp(Ac.empty(),ke.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?K0(t)?T3:{mapValue:{}}:Oe(35942,{value:t})}function qQ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?sp(Ac.empty(),ke.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?T3:"mapValue"in t?K0(t)?{mapValue:{}}:Xo:Oe(61959,{value:t})}function CR(t,e){const n=ul(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function IR(t,e){const n=ul(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ih(n)}setAll(e){let n=hn.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Ih(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());fv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yl(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Tr(Ih(this.value))}}function A3(t){const e=[];return yl(t.fields,((n,r)=>{const i=new hn([n]);if(fv(r)){const a=A3(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ni(e)}class wn{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,He.min(),He.min(),He.min(),Tr.empty(),0)}static newFoundDocument(e,n,r,i){return new wn(e,1,n,He.min(),r,i,0)}static newNoDocument(e,n){return new wn(e,2,n,He.min(),He.min(),Tr.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,He.min(),He.min(),Tr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,n){this.position=e,this.inclusive=n}}function DR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=ke.comparator(ke.fromName(o.referenceValue),n.key):r=ul(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function RR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Za(t.position[n],e.position[n]))return!1;return!0}class lp{constructor(e,n="asc"){this.field=e,this.dir=n}}function HQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class C3{}class _t extends C3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $Q(e,n,r):n==="array-contains"?new XQ(e,r):n==="in"?new M3(e,r):n==="not-in"?new WQ(e,r):n==="array-contains-any"?new QQ(e,r):new _t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YQ(e,r):new KQ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ul(n,this.value)):n!==null&&cl(this.value)===cl(n)&&this.matchesComparison(ul(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zt extends C3{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zt(e,n)}matches(e){return wd(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wd(t){return t.op==="and"}function N_(t){return t.op==="or"}function qE(t){return I3(t)&&wd(t)}function I3(t){for(const e of t.filters)if(e instanceof zt)return!1;return!0}function M_(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+xd(t.value);if(qE(t))return t.filters.map((e=>M_(e))).join(",");{const e=t.filters.map((n=>M_(n))).join(",");return`${t.op}(${e})`}}function D3(t,e){return t instanceof _t?(function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&Za(r.value,i.value)})(t,e):t instanceof zt?(function(r,i){return i instanceof zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&D3(o,i.filters[c])),!0):!1})(t,e):void Oe(19439)}function R3(t,e){const n=t.filters.concat(e);return zt.create(n,t.op)}function k3(t){return t instanceof _t?(function(n){return`${n.field.canonicalString()} ${n.op} ${xd(n.value)}`})(t):t instanceof zt?(function(n){return n.op.toString()+" {"+n.getFilters().map(k3).join(" ,")+"}"})(t):"Filter"}class $Q extends _t{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class YQ extends _t{constructor(e,n){super(e,"in",n),this.keys=N3("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class KQ extends _t{constructor(e,n){super(e,"not-in",n),this.keys=N3("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function N3(t,e){return(e.arrayValue?.values||[]).map((n=>ke.fromName(n.referenceValue)))}class XQ extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return op(n)&&ap(n.arrayValue,this.value)}}class M3 extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ap(this.value.arrayValue,n)}}class WQ extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ap(this.value.arrayValue,n)}}class QQ extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!op(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ap(this.value.arrayValue,r)))}}class ZQ{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function P_(t,e=null,n=[],r=[],i=null,a=null,o=null){return new ZQ(t,e,n,r,i,a,o)}function Cc(t){const e=rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>M_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),G0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>xd(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>xd(r))).join(",")),e.Te=n}return e.Te}function Lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!RR(t.startAt,e.startAt)&&RR(t.endAt,e.endAt)}function e0(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function t0(t,e){return t.filters.filter((n=>n instanceof _t&&n.field.isEqual(e)))}function kR(t,e,n){let r=uv,i=!0;for(const a of t0(t,e)){let o=uv,c=!0;switch(a.op){case"<":case"<=":o=GQ(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,c=!1;break;case"!=":case"not-in":o=uv}CR({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];CR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function NR(t,e,n){let r=Xo,i=!0;for(const a of t0(t,e)){let o=Xo,c=!0;switch(a.op){case">=":case">":o=qQ(a.value),c=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,c=!1;break;case"!=":case"not-in":o=Xo}IR({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];IR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class Ud{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JQ(t,e,n,r,i,a,o,c){return new Ud(t,e,n,r,i,a,o,c)}function Bp(t){return new Ud(t)}function MR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function P3(t){return t.collectionGroup!==null}function Dh(t){const e=rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Lt(hn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lp(a,r))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new lp(hn.keyField(),r))}return e.Ie}function qi(t){const e=rt(t);return e.Ee||(e.Ee=eZ(e,Dh(t))),e.Ee}function eZ(t,e){if(t.limitType==="F")return P_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new lp(i.field,a)}));const n=t.endAt?new _d(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _d(t.startAt.position,t.startAt.inclusive):null;return P_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function O_(t,e){const n=t.filters.concat([e]);return new Ud(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function n0(t,e,n){return new Ud(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function X0(t,e){return Lp(qi(t),qi(e))&&t.limitType===e.limitType}function O3(t){return`${Cc(qi(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>k3(i))).join(", ")}]`),G0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>xd(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>xd(i))).join(",")),`Target(${r})`})(qi(t))}; limitType=${t.limitType})`}function Fp(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ke.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Dh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=DR(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Dh(r),i)||r.endAt&&!(function(o,c,u){const d=DR(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Dh(r),i))})(t,e)}function tZ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function V3(t){return(e,n)=>{let r=!1;for(const i of Dh(t)){const a=nZ(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function nZ(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?ul(u,d):Oe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:t.dir})}}class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return v3(this.inner)}size(){return this.innerSize}}const rZ=new ln(ke.comparator);function yi(){return rZ}const j3=new ln(ke.comparator);function oh(...t){let e=j3;for(const n of t)e=e.insert(n.key,n);return e}function z3(t){let e=j3;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ba(){return Rh()}function L3(){return Rh()}function Rh(){return new Ys((t=>t.toString()),((t,e)=>t.isEqual(e)))}const iZ=new ln(ke.comparator),aZ=new Lt(ke.comparator);function ht(...t){let e=aZ;for(const n of t)e=e.add(n);return e}const sZ=new Lt(tt);function oZ(){return sZ}function HE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ep(e)?"-0":e}}function B3(t){return{integerValue:""+t}}function lZ(t,e){return pQ(e)?B3(e):HE(t,e)}class W0{constructor(){this._=void 0}}function cZ(t,e,n){return t instanceof cp?(function(i,a){const o={fields:{[x3]:{stringValue:b3},[w3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&FE(a)&&(a=Y0(a)),a&&(o.fields[_3]=a),{mapValue:o}})(n,e):t instanceof Ed?U3(t,e):t instanceof Sd?G3(t,e):(function(i,a){const o=F3(i,a),c=PR(o)+PR(i.Ae);return k_(o)&&k_(i.Ae)?B3(c):HE(i.serializer,c)})(t,e)}function uZ(t,e,n){return t instanceof Ed?U3(t,e):t instanceof Sd?G3(t,e):n}function F3(t,e){return t instanceof up?(function(r){return k_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cp extends W0{}class Ed extends W0{constructor(e){super(),this.elements=e}}function U3(t,e){const n=q3(e);for(const r of t.elements)n.some((i=>Za(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Sd extends W0{constructor(e){super(),this.elements=e}}function G3(t,e){let n=q3(e);for(const r of t.elements)n=n.filter((i=>!Za(i,r)));return{arrayValue:{values:n}}}class up extends W0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function PR(t){return sn(t.integerValue||t.doubleValue)}function q3(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class dZ{constructor(e,n){this.field=e,this.transform=n}}function fZ(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ed&&i instanceof Ed||r instanceof Sd&&i instanceof Sd?pd(r.elements,i.elements,Za):r instanceof up&&i instanceof up?Za(r.Ae,i.Ae):r instanceof cp&&i instanceof cp})(t.transform,e.transform)}class hZ{constructor(e,n){this.version=e,this.transformResults=n}}class Cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Q0{}function H3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Z0(t.key,Cr.none()):new Gd(t.key,t.data,Cr.none());{const n=t.data,r=Tr.empty();let i=new Lt(hn.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Ks(t.key,r,new ni(i.toArray()),Cr.none())}}function pZ(t,e,n){t instanceof Gd?(function(i,a,o){const c=i.value.clone(),u=VR(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Ks?(function(i,a,o){if(!hv(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=VR(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll($3(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function kh(t,e,n,r){return t instanceof Gd?(function(a,o,c,u){if(!hv(a.precondition,o))return c;const d=a.value.clone(),h=jR(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ks?(function(a,o,c,u){if(!hv(a.precondition,o))return c;const d=jR(a.fieldTransforms,u,o),h=o.data;return h.setAll($3(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(a,o,c){return hv(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function gZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=F3(r.transform,i||null);a!=null&&(n===null&&(n=Tr.empty()),n.set(r.field,a))}return n||null}function OR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pd(r,i,((a,o)=>fZ(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gd extends Q0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ks extends Q0{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $3(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function VR(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,uZ(o,c,n[i]))}return r}function jR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,cZ(a,o,e))}return r}class Z0 extends Q0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y3 extends Q0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $E{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&pZ(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L3();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=H3(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ht())}isEqual(e){return this.batchId===e.batchId&&pd(this.mutations,e.mutations,((n,r)=>OR(n,r)))&&pd(this.baseMutations,e.baseMutations,((n,r)=>OR(n,r)))}}class YE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return iZ})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new YE(e,n,r,i)}}class KE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,St;function vZ(t){switch(t){case me.OK:return Oe(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function K3(t){if(t===void 0)return Vr("GRPC error has no .code"),me.UNKNOWN;switch(t){case Ln.OK:return me.OK;case Ln.CANCELLED:return me.CANCELLED;case Ln.UNKNOWN:return me.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return me.INTERNAL;case Ln.UNAVAILABLE:return me.UNAVAILABLE;case Ln.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Ln.NOT_FOUND:return me.NOT_FOUND;case Ln.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Ln.ABORTED:return me.ABORTED;case Ln.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Ln.DATA_LOSS:return me.DATA_LOSS;default:return Oe(39323,{code:t})}}(St=Ln||(Ln={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";function yZ(){return new TextEncoder}const bZ=new el([4294967295,4294967295],0);function zR(t){const e=yZ().encode(t),n=new $4;return n.update(e),new Uint8Array(n.digest())}function LR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new el([n,r],0),new el([i,a],0)]}class XE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lh(`Invalid padding: ${n}`);if(r<0)throw new lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=el.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(el.fromNumber(r)));return i.compare(bZ)===1&&(i=new el([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zR(e),[r,i]=LR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new XE(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=zR(e),[r,i]=LR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class J0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Up.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new J0(He.min(),i,new ln(tt),yi(),ht())}}class Up{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Up(r,n,ht(),ht(),ht())}}class pv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class X3{constructor(e,n){this.targetId=e,this.Ce=n}}class W3{constructor(e,n,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class BR{constructor(){this.ve=0,this.Fe=FR(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),n=ht(),r=ht();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Oe(38017,{changeType:a})}})),new Up(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=FR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xZ{constructor(e){this.Ge=e,this.ze=new Map,this.je=yi(),this.Je=Lm(),this.He=Lm(),this.Ye=new ln(tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(e0(a))if(r===0){const o=new ke(a.path);this.et(n,o,wn.newNoDocument(o,He.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=qs(r).toUint8Array()}catch(u){if(u instanceof y3)return Tc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new XE(o,i,a)}catch(u){return Tc(u instanceof lh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&e0(c.target)){const u=new ke(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,wn.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=ht();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new J0(e,n,this.Ye,this.je,r);return this.je=yi(),this.Je=Lm(),this.He=Lm(),this.Ye=new ln(tt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new BR,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Lt(tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Lt(tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new BR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lm(){return new ln(ke.comparator)}function FR(){return new ln(ke.comparator)}const _Z={asc:"ASCENDING",desc:"DESCENDING"},wZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EZ={and:"AND",or:"OR"};class SZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function V_(t,e){return t.useProto3Json||G0(e)?e:{value:e}}function Td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TZ(t,e){return Td(t,e.toTimestamp())}function Br(t){return ze(!!t,49232),He.fromTimestamp((function(n){const r=Gs(n);return new ft(r.seconds,r.nanos)})(t))}function WE(t,e){return j_(t,e).canonicalString()}function j_(t,e){const n=(function(i){return new kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Z3(t){const e=kt.fromString(t);return ze(oV(e),10190,{key:e.toString()}),e}function r0(t,e){return WE(t.databaseId,e.path)}function fc(t,e){const n=Z3(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(tV(n))}function J3(t,e){return WE(t.databaseId,e)}function eV(t){const e=Z3(t);return e.length===4?kt.emptyPath():tV(e)}function z_(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tV(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function UR(t,e,n){return{name:r0(t,e),fields:n.value.mapValue.fields}}function AZ(t,e,n){const r=fc(t,e.name),i=Br(e.updateTime),a=e.createTime?Br(e.createTime):He.min(),o=new Tr({mapValue:{fields:e.fields}}),c=wn.newFoundDocument(r,i,a,o);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function CZ(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Oe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(ze(h===void 0||typeof h=="string",58123),qn.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),qn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?me.UNKNOWN:K3(d.code);return new Ae(h,d.message||"")})(o);n=new W3(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fc(t,r.document.name),a=Br(r.document.updateTime),o=r.document.createTime?Br(r.document.createTime):He.min(),c=new Tr({mapValue:{fields:r.document.fields}}),u=wn.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new pv(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fc(t,r.document),a=r.readTime?Br(r.readTime):He.min(),o=wn.newNoDocument(i,a),c=r.removedTargetIds||[];n=new pv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fc(t,r.document),a=r.removedTargetIds||[];n=new pv([],a,i,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new mZ(i,a),c=r.targetId;n=new X3(c,o)}}return n}function i0(t,e){let n;if(e instanceof Gd)n={update:UR(t,e.key,e.value)};else if(e instanceof Z0)n={delete:r0(t,e.key)};else if(e instanceof Ks)n={update:UR(t,e.key,e.data),updateMask:MZ(e.fieldMask)};else{if(!(e instanceof Y3))return Oe(16599,{Vt:e.type});n={verify:r0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof cp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ed)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof up)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Oe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:TZ(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe(27497)})(t,e.precondition)),n}function L_(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Cr.updateTime(Br(a.updateTime)):a.exists!==void 0?Cr.exists(a.exists):Cr.none()})(e.currentDocument):Cr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,c){let u=null;if("setToServerValue"in c)ze(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new cp;else if("appendMissingElements"in c){const h=c.appendMissingElements.values||[];u=new Ed(h)}else if("removeAllFromArray"in c){const h=c.removeAllFromArray.values||[];u=new Sd(h)}else"increment"in c?u=new up(o,c.increment):Oe(16584,{proto:c});const d=hn.fromServerFormat(c.fieldPath);return new dZ(d,u)})(t,i))):[];if(e.update){e.update.name;const i=fc(t,e.update.name),a=new Tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(u){const d=u.fieldPaths||[];return new ni(d.map((h=>hn.fromServerFormat(h))))})(e.updateMask);return new Ks(i,a,o,n,r)}return new Gd(i,a,n,r)}if(e.delete){const i=fc(t,e.delete);return new Z0(i,n)}if(e.verify){const i=fc(t,e.verify);return new Y3(i,n)}return Oe(1463,{proto:e})}function IZ(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Br(i.updateTime):Br(a);return o.isEqual(He.min())&&(o=Br(a)),new hZ(o,i.transformResults||[])})(n,e)))):[]}function nV(t,e){return{documents:[J3(t,e.path)]}}function rV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=J3(t,i);const a=(function(d){if(d.length!==0)return sV(zt.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Pu(m.field),direction:RZ(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=V_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function iV(t){let e=eV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(p){const m=aV(p);return m instanceof zt&&qE(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(_){return new lp(Ou(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,G0(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){const m=!!p.before,b=p.values||[];return new _d(b,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(p){const m=!p.before,b=p.values||[];return new _d(b,m)})(n.endAt)),JQ(e,i,o,a,c,"F",u,d)}function DZ(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aV(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ou(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ou(n.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ou(n.unaryFilter.field);return _t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ou(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return _t.create(Ou(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return zt.create(n.compositeFilter.filters.map((r=>aV(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(n.compositeFilter.op))})(t):Oe(30097,{filter:t})}function RZ(t){return _Z[t]}function kZ(t){return wZ[t]}function NZ(t){return EZ[t]}function Pu(t){return{fieldPath:t.canonicalString()}}function Ou(t){return hn.fromServerFormat(t.fieldPath)}function sV(t){return t instanceof _t?(function(n){if(n.op==="=="){if(AR(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NAN"}};if(TR(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(AR(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NAN"}};if(TR(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(n.field),op:kZ(n.op),value:n.value}}})(t):t instanceof zt?(function(n){const r=n.getFilters().map((i=>sV(i)));return r.length===1?r[0]:{compositeFilter:{op:NZ(n.op),filters:r}}})(t):Oe(54877,{filter:t})}function MZ(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function oV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Rs{constructor(e,n,r,i,a=He.min(),o=He.min(),c=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lV{constructor(e){this.yt=e}}function PZ(t,e){let n;if(e.document)n=AZ(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ke.fromSegments(e.noDocument.path),i=Dc(e.noDocument.readTime);n=wn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe(56709);{const r=ke.fromSegments(e.unknownDocument.path),i=Dc(e.unknownDocument.version);n=wn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new ft(i[0],i[1]);return He.fromTimestamp(a)})(e.readTime)),n}function GR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:a0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,o){return{name:r0(a,o.key),fields:o.data.value.mapValue.fields,updateTime:Td(a,o.version.toTimestamp()),createTime:Td(a,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ic(e.version)};else{if(!e.isUnknownDocument())return Oe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ic(e.version)}}return r}function a0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ic(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dc(t){const e=new ft(t.seconds,t.nanoseconds);return He.fromTimestamp(e)}function ec(t,e){const n=(e.baseMutations||[]).map((a=>L_(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const o=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>L_(t.yt,a))),i=ft.fromMillis(e.localWriteTimeMs);return new $E(e.batchId,i,n,r)}function ch(t){const e=Dc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Dc(t.lastLimboFreeSnapshotVersion):He.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const o=a.documents.length;return ze(o===1,1966,{count:o}),qi(Bp(eV(a.documents[0])))})(t.query):(function(a){return qi(iV(a))})(t.query),new Rs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qn.fromBase64String(t.resumeToken))}function cV(t,e){const n=Ic(e.snapshotVersion),r=Ic(e.lastLimboFreeSnapshotVersion);let i;i=e0(e.target)?nV(t.yt,e.target):rV(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cc(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uV(t){const e=iV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n0(e,e.limit,"L"):e}function J1(t,e){return new KE(e.largestBatchId,L_(t.yt,e.overlayMutation))}function qR(t,e){const n=e.path.lastSegment();return[t,Ir(e.path.popLast()),n]}function HR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ic(r.readTime),documentKey:Ir(r.documentKey.path),largestBatchId:r.largestBatchId}}class OZ{getBundleMetadata(e,n){return $R(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Dc(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return $R(e).put((function(i){return{bundleId:i.id,createTime:Ic(Br(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return YR(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:uV(a.bundledQuery),readTime:Dc(a.readTime)}})(r)}))}saveNamedQuery(e,n){return YR(e).put((function(i){return{name:i.name,readTime:Ic(Br(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function $R(t){return er(t,q0)}function YR(t){return er(t,H0)}class ey{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new ey(e,r)}getOverlay(e,n){return Kf(e).get(qR(this.userId,n)).next((r=>r?J1(this.serializer,r):null))}getOverlays(e,n){const r=Ba();return ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,o)=>{const c=new KE(n,o);i.push(this.St(e,c))})),ie.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(Ir(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(Kf(e).Z(I_,c))})),ie.waitFor(a)}getOverlaysForCollection(e,n,r){const i=Ba(),a=Ir(n),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).J(I_,o).next((c=>{for(const u of c){const d=J1(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=Ba();let o;const c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kf(e).ee({index:f3,range:c},((u,d,h)=>{const p=J1(this.serializer,d);a.size()<i||p.largestBatchId===o?(a.set(p.getKey(),p),o=p.largestBatchId):h.done()})).next((()=>a))}St(e,n){return Kf(e).put((function(i,a,o){const[c,u,d]=qR(a,o.mutation.key);return{userId:a,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:i0(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function Kf(t){return er(t,$0)}class VZ{bt(e){return er(e,LE)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?qn.fromUint8Array(r):qn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class tc{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(sn(e.integerValue));else if("doubleValue"in e){const r=sn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ep(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Gs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(qs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?S3(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):K0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Oe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=bd,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(sn(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),ke.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}tc.Kt=new tc;const Au=255;function jZ(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function KR(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=jZ(255&r[a]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class zZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=KR(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=KR(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Au),this.sn(255)}_n(){this.an(Au),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Au?(this.sn(Au),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Au?(this.an(Au),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class LZ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class BZ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xf{constructor(){this.cn=new zZ,this.ln=new LZ(this.cn),this.hn=new BZ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class nc{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new nc(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:gv(this.En),directionalValue:gv(this.dn),orderedDocumentKey:gv(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function No(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=XR(t.En,e.En),n!==0?n:(n=XR(t.dn,e.dn),n!==0?n:ke.comparator(t.In,e.In)))}function XR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function gv(t){return n4()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function WR(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class QR{constructor(e){this.mn=new Lt(((n,r)=>hn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ze(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=T_(e);if(n!==void 0&&!this.wn(n))return!1;const r=Yl(e);let i=new Set,a=0,o=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const u=r[a];if(!this.Sn(c,u)||!this.bn(this.fn[o++],u))return!1}++a}for(;a<r.length;++a){const c=r[a];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Lt(hn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ov(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ov(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ov(r.field,r.dir==="asc"?0:1)));return new Xv(Xv.UNKNOWN_ID,this.collectionId,n,Jh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function dV(t){if(ze(t instanceof _t||t instanceof zt,20012),t instanceof _t){if(t instanceof M3){const n=t.value.arrayValue?.values?.map((r=>_t.create(t.field,"==",r)))||[];return zt.create(n,"or")}return t}const e=t.filters.map((n=>dV(n)));return zt.create(e,t.op)}function FZ(t){if(t.getFilters().length===0)return[];const e=U_(dV(t));return ze(fV(e),7391),B_(e)||F_(e)?[e]:e.getFilters()}function B_(t){return t instanceof _t}function F_(t){return t instanceof zt&&qE(t)}function fV(t){return B_(t)||F_(t)||(function(n){if(n instanceof zt&&N_(n)){for(const r of n.getFilters())if(!B_(r)&&!F_(r))return!1;return!0}return!1})(t)}function U_(t){if(ze(t instanceof _t||t instanceof zt,34018),t instanceof _t)return t;if(t.filters.length===1)return U_(t.filters[0]);const e=t.filters.map((r=>U_(r)));let n=zt.create(e,t.op);return n=s0(n),fV(n)?n:(ze(n instanceof zt,64498),ze(wd(n),40251),ze(n.filters.length>1,57927),n.filters.reduce(((r,i)=>QE(r,i))))}function QE(t,e){let n;return ze(t instanceof _t||t instanceof zt,38388),ze(e instanceof _t||e instanceof zt,25473),n=t instanceof _t?e instanceof _t?(function(i,a){return zt.create([i,a],"and")})(t,e):ZR(t,e):e instanceof _t?ZR(e,t):(function(i,a){if(ze(i.filters.length>0&&a.filters.length>0,48005),wd(i)&&wd(a))return R3(i,a.getFilters());const o=N_(i)?i:a,c=N_(i)?a:i,u=o.filters.map((d=>QE(d,c)));return zt.create(u,"or")})(t,e),s0(n)}function ZR(t,e){if(wd(e))return R3(e,t.getFilters());{const n=e.filters.map((r=>QE(t,r)));return zt.create(n,"or")}}function s0(t){if(ze(t instanceof _t||t instanceof zt,11850),t instanceof _t)return t;const e=t.getFilters();if(e.length===1)return s0(e[0]);if(I3(t))return t;const n=e.map((i=>s0(i))),r=[];return n.forEach((i=>{i instanceof _t?r.push(i):i instanceof zt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:zt.create(r,t.op)}class UZ{constructor(){this.Cn=new ZE}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(_i.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class ZE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Lt(kt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lt(kt.comparator)).toArray()}}const JR="IndexedDbIndexManager",Bm=new Uint8Array(0);class GZ{constructor(e,n){this.databaseId=n,this.vn=new ZE,this.Fn=new Ys((r=>Cc(r)),((r,i)=>Lp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:Ir(i)};return ek(e).put(a)}return ie.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[e3(n),""],!1,!0);return ek(e).J(i).next((a=>{for(const o of a){if(o.collectionId!==n)break;r.push(La(o.parent))}return r}))}addFieldIndex(e,n){const r=Wf(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const o=Iu(e);return a.next((c=>{o.put(HR(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Wf(e),i=Iu(e),a=Cu(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Wf(e),r=Cu(e),i=Iu(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return ie.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new QR(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Cu(e);let i=!0;const a=new Map;return ie.forEach(this.Mn(n),(o=>this.xn(e,o).next((c=>{i&&(i=!!c),a.set(o,c)})))).next((()=>{if(i){let o=ht();const c=[];return ie.forEach(a,((u,d)=>{Ee(JR,`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(u)} to execute ${Cc(n)}`);const h=(function(R,P){const z=T_(P);if(z===void 0)return null;for(const M of t0(R,z.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null})(d,u),p=(function(R,P){const z=new Map;for(const M of Yl(P))for(const T of t0(R,M.fieldPath))switch(T.op){case"==":case"in":z.set(M.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return z.set(M.fieldPath.canonicalString(),T.value),Array.from(z.values())}return null})(d,u),m=(function(R,P){const z=[];let M=!0;for(const T of Yl(P)){const C=T.kind===0?kR(R,T.fieldPath,R.startAt):NR(R,T.fieldPath,R.startAt);z.push(C.value),M&&(M=C.inclusive)}return new _d(z,M)})(d,u),b=(function(R,P){const z=[];let M=!0;for(const T of Yl(P)){const C=T.kind===0?NR(R,T.fieldPath,R.endAt):kR(R,T.fieldPath,R.endAt);z.push(C.value),M&&(M=C.inclusive)}return new _d(z,M)})(d,u),_=this.On(u,d,m),E=this.On(u,d,b),S=this.Nn(u,d,p),A=this.Bn(u.indexId,h,_,m.inclusive,E,b.inclusive,S);return ie.forEach(A,(D=>r.Y(D,n.limit).next((R=>{R.forEach((P=>{const z=ke.fromSegments(P.documentKey);o.has(z)||(o=o.add(z),c.push(z))}))}))))})).next((()=>c))}return ie.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=FZ(zt.create(e.filters,"and")).map((r=>P_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,o,c){const u=(n!=null?n.length:1)*Math.max(r.length,a.length),d=u/(n!=null?n.length:1),h=[];for(let p=0;p<u;++p){const m=n?this.Ln(n[p/d]):Bm,b=this.kn(e,m,r[p%d],i),_=this.qn(e,m,a[p%d],o),E=c.map((S=>this.kn(e,m,S,!0)));h.push(...this.createRange(b,_,E))}return h}kn(e,n,r,i){const a=new nc(e,ke.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new nc(e,ke.empty(),n,r);return i?a.An():a}xn(e,n){const r=new QR(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let o=null;for(const c of a)r.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return ie.forEach(i,(a=>this.xn(e,a).next((o=>{o?r!==0&&o.fields.length<(function(u){let d=new Lt(hn.comparator),h=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:d=d.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(h?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new Xf;for(const i of Yl(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const o=r.Pn(i.kind);tc.Kt.Dt(a,o)}return r.un()}Ln(e){const n=new Xf;return tc.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Xf;return tc.Kt.Dt(sp(this.databaseId,n),r.Pn((function(a){const o=Yl(a);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Xf);let a=0;for(const o of Yl(e)){const c=r[a++];for(const u of i)if(this.Un(n,o.fieldPath)&&op(c))i=this.Kn(i,o,c);else{const d=u.Pn(o.kind);tc.Kt.Dt(c,d)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const o of r.arrayValue.values||[])for(const c of i){const u=new Xf;u.seed(c.un()),tc.Kt.Dt(o,u.Pn(n.kind)),a.push(u)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof _t&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Wf(e),i=Iu(e);return(n?r.J(C_,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const o=[];return ie.forEach(a,(c=>i.get([c.indexId,this.uid]).next((u=>{o.push((function(h,p){const m=p?new Jh(p.sequenceNumber,new _i(Dc(p.readTime),new ke(La(p.documentKey)),p.largestBatchId)):Jh.empty(),b=h.fields.map((([_,E])=>new ov(hn.fromServerFormat(_),E)));return new Xv(h.indexId,h.collectionGroup,b,m)})(c,u))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:tt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Wf(e),a=Iu(e);return this.Gn(e).next((o=>i.J(C_,IDBKeyRange.bound(n,n)).next((c=>ie.forEach(c,(u=>a.put(HR(u.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return ie.forEach(n,((i,a)=>{const o=r.get(i.collectionGroup);return(o?ie.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),ie.forEach(c,(u=>this.zn(e,i,u).next((d=>{const h=this.jn(a,u);return d.isEqual(h)?ie.resolve():this.Jn(e,a,u,d,h)})))))))}))}Hn(e,n,r,i){return Cu(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Cu(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Cu(e);let a=new Lt(No);return i.ee({index:d3,range:IDBKeyRange.only([r.indexId,this.uid,gv(this.$n(r,n))])},((o,c)=>{a=a.add(new nc(r.indexId,n,WR(c.arrayValue),WR(c.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Lt(No);const i=this.Qn(n,e);if(i==null)return r;const a=T_(n);if(a!=null){const o=e.data.field(a.fieldPath);if(op(o))for(const c of o.arrayValue.values||[])r=r.add(new nc(n.indexId,e.key,this.Ln(c),i))}else r=r.add(new nc(n.indexId,e.key,Bm,i));return r}Jn(e,n,r,i,a){Ee(JR,"Updating index entries for document '%s'",n.key);const o=[];return(function(u,d,h,p,m){const b=u.getIterator(),_=d.getIterator();let E=Tu(b),S=Tu(_);for(;E||S;){let A=!1,D=!1;if(E&&S){const R=h(E,S);R<0?D=!0:R>0&&(A=!0)}else E!=null?D=!0:A=!0;A?(p(S),S=Tu(_)):D?(m(E),E=Tu(b)):(E=Tu(b),S=Tu(_))}})(i,a,No,(c=>{o.push(this.Hn(e,n,r,c))}),(c=>{o.push(this.Yn(e,n,r,c))})),ie.waitFor(o)}Gn(e){let n=1;return Iu(e).ee({index:u3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,c)=>No(o,c))).filter(((o,c,u)=>!c||No(o,u[c-1])!==0));const i=[];i.push(e);for(const o of r){const c=No(o,e),u=No(o,n);if(c===0)i[0]=e.An();else if(c>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(n);const a=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const c=i[o].Vn(this.uid,Bm,ke.empty()),u=i[o+1].Vn(this.uid,Bm,ke.empty());a.push(IDBKeyRange.bound(c,u))}return a}Zn(e,n){return No(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tk)}getMinOffset(e,n){return ie.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Oe(44426))))).next(tk)}}function ek(t){return er(t,rp)}function Cu(t){return er(t,Ch)}function Wf(t){return er(t,zE)}function Iu(t){return er(t,Ah)}function tk(t){ze(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;OE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _i(e.readTime,e.documentKey,n)}const nk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hV=41943040;class Sr{static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function pV(t,e,n){const r=t.store(aa),i=t.store(gd),a=[],o=IDBKeyRange.only(n.batchId);let c=0;const u=r.ee({range:o},((h,p,m)=>(c++,m.delete())));a.push(u.next((()=>{ze(c===1,47070,{batchId:n.batchId})})));const d=[];for(const h of n.mutations){const p=o3(e,h.key.path,n.batchId);a.push(i.delete(p)),d.push(h.key)}return ie.waitFor(a).next((()=>d))}function o0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe(14731);e=t.noDocument}return JSON.stringify(e).length}Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(hV,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);class ty{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ze(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new ty(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).ee({index:sc,range:r},((i,a,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=Vu(e),o=Mo(e);return o.add({}).next((c=>{ze(typeof c=="number",49019);const u=new $E(c,n,r,i),d=(function(b,_,E){const S=E.baseMutations.map((D=>i0(b.yt,D))),A=E.mutations.map((D=>i0(b.yt,D)));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:S,mutations:A}})(this.serializer,this.userId,u),h=[];let p=new Lt(((m,b)=>tt(m.canonicalString(),b.canonicalString())));for(const m of i){const b=o3(this.userId,m.key.path,c);p=p.add(m.key.path.popLast()),h.push(o.put(d)),h.push(a.put(b,vQ))}return p.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),ie.waitFor(h).next((()=>u))}))}lookupMutationBatch(e,n){return Mo(e).get(n).next((r=>r?(ze(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ec(this.serializer,r)):null))}er(e,n){return this.Xn[n]?ie.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Mo(e).ee({index:sc,range:i},((o,c,u)=>{c.userId===this.userId&&(ze(c.batchId>=r,47524,{tr:r}),a=ec(this.serializer,c)),u.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=uc;return Mo(e).ee({index:sc,range:n,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,uc],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).J(sc,n).next((r=>r.map((i=>ec(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Vu(e).ee({range:i},((o,c,u)=>{const[d,h,p]=o,m=La(h);if(d===this.userId&&n.path.isEqual(m))return Mo(e).get(p).next((b=>{if(!b)throw Oe(61480,{nr:o,batchId:p});ze(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:p}),a.push(ec(this.serializer,b))}));u.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(tt);const i=[];return n.forEach((a=>{const o=lv(this.userId,a.path),c=IDBKeyRange.lowerBound(o),u=Vu(e).ee({range:c},((d,h,p)=>{const[m,b,_]=d,E=La(b);m===this.userId&&a.path.isEqual(E)?r=r.add(_):p.done()}));i.push(u)})),ie.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=lv(this.userId,r),o=IDBKeyRange.lowerBound(a);let c=new Lt(tt);return Vu(e).ee({range:o},((u,d,h)=>{const[p,m,b]=u,_=La(m);p===this.userId&&r.isPrefixOf(_)?_.length===i&&(c=c.add(b)):h.done()})).next((()=>this.rr(e,c)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Mo(e).get(a).next((o=>{if(o===null)throw Oe(35274,{batchId:a});ze(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:a}),r.push(ec(this.serializer,o))})))})),ie.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return pV(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return ie.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Vu(e).ee({range:r},((a,o,c)=>{if(a[0]===this.userId){const u=La(a[1]);i.push(u)}else c.done()})).next((()=>{ze(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return gV(e,this.userId,n)}_r(e){return mV(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:uc,lastStreamToken:""}))}}function gV(t,e,n){const r=lv(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return Vu(t).ee({range:a,X:!0},((c,u,d)=>{const[h,p,m]=c;h===e&&p===i&&(o=!0),d.done()})).next((()=>o))}function Mo(t){return er(t,aa)}function Vu(t){return er(t,gd)}function mV(t){return er(t,tp)}class Rc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rc(0)}static cr(){return new Rc(-1)}}class qZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Rc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>He.fromTimestamp(new ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Du(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(ze(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Du(e).ee(((o,c)=>{const u=ch(c);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,a.push(this.removeTargetData(e,u)))})).next((()=>ie.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Du(e).ee(((r,i)=>{const a=ch(i);n(a)}))}lr(e){return rk(e).get(Zv).next((n=>(ze(n!==null,2888),n)))}hr(e,n){return rk(e).put(Zv,n)}Pr(e,n){return Du(e).put(cV(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Cc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Du(e).ee({range:i,index:c3},((o,c,u)=>{const d=ch(c);Lp(n,d.target)&&(a=d,u.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=qo(e);return n.forEach((o=>{const c=Ir(o.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))})),ie.waitFor(i)}removeMatchingKeys(e,n,r){const i=qo(e);return ie.forEach(n,(a=>{const o=Ir(a.path);return ie.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=qo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qo(e);let a=ht();return i.ee({range:r,X:!0},((o,c,u)=>{const d=La(o[1]),h=new ke(d);a=a.add(h)})).next((()=>a))}containsKey(e,n){const r=Ir(n.path),i=IDBKeyRange.bound([r],[e3(r)],!1,!0);let a=0;return qo(e).ee({index:jE,X:!0,range:i},(([o,c],u,d)=>{o!==0&&(a++,d.done())})).next((()=>a>0))}At(e,n){return Du(e).get(n).next((r=>r?ch(r):null))}}function Du(t){return er(t,md)}function rk(t){return er(t,dc)}function qo(t){return er(t,vd)}const ik="LruGarbageCollector",HZ=1048576;function ak([t,e],[n,r]){const i=tt(t,n);return i===0?tt(e,r):i}class $Z{constructor(e){this.Ir=e,this.buffer=new Lt(ak),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ak(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(ik,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vl(n)?Ee(ik,"Ignoring IndexedDB error during garbage collection: ",n):await Vc(n)}await this.Vr(3e5)}))}}class YZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Fi.ce);const r=new $Z(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(nk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),Nu()<=xt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function yV(t,e){return new YZ(t,e)}class KZ{constructor(e,n){this.db=e,this.garbageCollector=yV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Fm(e,r)}removeReference(e,n,r){return Fm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Fm(e,n)}br(e,n){return(function(i,a){let o=!1;return mV(i).te((c=>gV(i,c,a).next((u=>(u&&(o=!0),ie.resolve(!u)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((o,c)=>{if(c<=n){const u=this.br(e,o).next((d=>{if(!d)return a++,r.getEntry(e,o).next((()=>(r.removeEntry(o,He.min()),qo(e).delete((function(p){return[0,Ir(p.path)]})(o)))))}));i.push(u)}})).next((()=>ie.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Fm(e,n)}Sr(e,n){const r=qo(e);let i,a=Fi.ce;return r.ee({index:jE},(([o,c],{path:u,sequenceNumber:d})=>{o===0?(a!==Fi.ce&&n(new ke(La(i)),a),a=d,i=u):a=Fi.ce})).next((()=>{a!==Fi.ce&&n(new ke(La(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fm(t,e){return qo(t).put((function(r,i){return{targetId:0,path:Ir(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class bV{constructor(){this.changes=new Ys((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ql(e).put(r)}removeEntry(e,n,r){return ql(e).delete((function(a,o){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],a0(o),c[c.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=wn.newInvalidDocument(n);return ql(e).ee({index:cv,range:IDBKeyRange.only(Qf(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:wn.newInvalidDocument(n)};return ql(e).ee({index:cv,range:IDBKeyRange.only(Qf(n))},((i,a)=>{r={document:this.Cr(n,a),size:o0(a)}})).next((()=>r))}getEntries(e,n){let r=yi();return this.Fr(e,n,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=yi(),i=new ln(ke.comparator);return this.Fr(e,n,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c),i=i.insert(a,o0(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return ie.resolve();let i=new Lt(lk);n.forEach((u=>i=i.add(u)));const a=IDBKeyRange.bound(Qf(i.first()),Qf(i.last())),o=i.getIterator();let c=o.getNext();return ql(e).ee({index:cv,range:a},((u,d,h)=>{const p=ke.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&lk(c,p)<0;)r(c,null),c=o.getNext();c&&c.isEqual(p)&&(r(c,d),c=o.hasNext()?o.getNext():null),c?h.j(Qf(c)):h.done()})).next((()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const o=n.path,c=[o.popLast().toArray(),o.lastSegment(),a0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ql(e).J(IDBKeyRange.bound(c,u,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let h=yi();for(const p of d){const m=this.Cr(ke.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Fp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,n,r,i){let a=yi();const o=ok(n,r),c=ok(n,_i.max());return ql(e).ee({index:l3,range:IDBKeyRange.bound(o,c,!0)},((u,d,h)=>{const p=this.Cr(ke.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(p.key,p),a.size===i&&h.done()})).next((()=>a))}newChangeBuffer(e){return new WZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return sk(e).get(A_).next((n=>(ze(!!n,20021),n)))}Dr(e,n){return sk(e).put(A_,n)}Cr(e,n){if(n){const r=PZ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(He.min())))return r}return wn.newInvalidDocument(e)}}function xV(t){return new XZ(t)}class WZ extends bV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ys((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Lt(((a,o)=>tt(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const c=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,c.readTime)),o.isValidDocument()){const u=GR(this.Nr.serializer,o);i=i.add(a.path.popLast());const d=o0(u);r+=d-c.size,n.push(this.Nr.addEntry(e,a,u))}else if(r-=c.size,this.trackRemovals){const u=GR(this.Nr.serializer,o.convertToNoDocument(He.min()));n.push(this.Nr.addEntry(e,a,u))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),ie.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,o)=>{this.Br.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function sk(t){return er(t,np)}function ql(t){return er(t,Qv)}function Qf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ok(t,e){const n=e.documentKey.path.toArray();return[t,a0(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=tt(n[a],r[a]),i)return i;return i=tt(n.length,r.length),i||(i=tt(n[n.length-2],r[r.length-2]),i||tt(n[n.length-1],r[r.length-1]))}class QZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _V{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&kh(r.mutation,i,ni.empty(),ft.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ht()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ht()){const i=Ba();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=oh();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Ba();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ht())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=yi();const o=Rh(),c=(function(){return Rh()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ks)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),kh(h.mutation,d,h.mutation.getFieldMask(),ft.now())):o.set(d.key,ni.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new QZ(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Rh();let i=new ln(((o,c)=>o-c)),a=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||ni.empty();h=c.applyToLocalView(d,h),r.set(u,h);const p=(i.get(c.batchId)||ht()).add(u);i=i.insert(c.batchId,p)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,p=L3();h.forEach((m=>{if(!a.has(m)){const b=H3(n.get(m),r.get(m));b!==null&&p.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return ie.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return ke.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):P3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ie.resolve(Ba());let c=Zh,u=a;return o.next((d=>ie.forEach(d,((h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(h)?ie.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,ht()))).next((h=>({batchId:c,changes:z3(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((r=>{let i=oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=oh();return this.indexManager.getCollectionParents(e,a).next((c=>ie.forEach(c,(u=>{const d=(function(p,m){return new Ud(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,wn.newInvalidDocument(h)))}));let c=oh();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&kh(h.mutation,d,ni.empty(),ft.now()),Fp(n,d)&&(c=c.insert(u,d))})),c}))}}class ZZ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Br(i.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:uV(i.bundledQuery),readTime:Br(i.readTime)}})(n)),ie.resolve()}}class JZ{constructor(){this.overlays=new ln(ke.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ba();return ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=Ba(),a=n.length+1,o=new ke(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Ba(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Ba(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return ie.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KE(n,r));let a=this.qr.get(n);a===void 0&&(a=ht(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class eJ{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}class JE{constructor(){this.Qr=new Lt(sr.$r),this.Ur=new Lt(sr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new sr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new sr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ke(new kt([])),r=new sr(n,e),i=new sr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ke(new kt([])),r=new sr(n,e),i=new sr(n,e+1);let a=ht();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new sr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ke.comparator(e.key,n.key)||tt(e.Yr,n.Yr)}static Kr(e,n){return tt(e.Yr,n.Yr)||ke.comparator(e.key,n.key)}}class tJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(sr.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $E(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new sr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?uc:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),i=new sr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(tt);return n.forEach((i=>{const a=new sr(i,0),o=new sr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ke.isDocumentKey(a)||(a=a.child(""));const o=new sr(new ke(a),0);let c=new Lt(tt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),ie.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(n.mutations,(i=>{const a=new sr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new sr(n,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nJ{constructor(e){this.ri=e,this.docs=(function(){return new ln(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=yi();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():wn.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=yi();const o=n.path,c=new ke(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||OE(r3(h),r)<=0||(i.has(h.key)||Fp(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Oe(9500)}ii(e,n){return ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new rJ(this)}getSize(e){return ie.resolve(this.size)}}class rJ extends bV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class iJ{constructor(e){this.persistence=e,this.si=new Ys((n=>Cc(n)),Lp),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new JE,this.targetCount=0,this.ai=Rc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),ie.waitFor(a).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}class eS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fi(0),this.li=!1,this.li=!0,this.hi=new eJ,this.referenceDelegate=e(this),this.Pi=new iJ(this),this.indexManager=new UZ,this.remoteDocumentCache=(function(i){return new nJ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new lV(n),this.Ii=new ZZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tJ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new aJ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class aJ extends a3{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new JE,this.Vi=null}static mi(e){return new ny(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=ke.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,He.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class l0{constructor(e,n){this.persistence=e,this.pi=new Ys((r=>Ir(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=yV(this,n)}static mi(e,n){return new l0(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ie.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dv(e.data.value)),n}br(e,n,r){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sJ{constructor(e){this.serializer=e}k(e,n,r,i){const a=new U0("createOrUpgrade",n);r<1&&i>=1&&((function(u){u.createObjectStore(zp)})(e),(function(u){u.createObjectStore(tp,{keyPath:mQ}),u.createObjectStore(aa,{keyPath:bR,autoIncrement:!0}).createIndex(sc,xR,{unique:!0}),u.createObjectStore(gd)})(e),ck(e),(function(u){u.createObjectStore(Kl)})(e));let o=ie.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(vd),u.deleteObjectStore(md),u.deleteObjectStore(dc)})(e),ck(e)),o=o.next((()=>(function(u){const d=u.store(dc),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:He.min().toTimestamp(),targetCount:0};return d.put(Zv,h)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(u,d){return d.store(aa).J().next((p=>{u.deleteObjectStore(aa),u.createObjectStore(aa,{keyPath:bR,autoIncrement:!0}).createIndex(sc,xR,{unique:!0});const m=d.store(aa),b=p.map((_=>m.put(_)));return ie.waitFor(b)}))})(e,a)))),o=o.next((()=>{(function(u){u.createObjectStore(yd,{keyPath:TQ})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(a)))),r<6&&i>=6&&(o=o.next((()=>((function(u){u.createObjectStore(np)})(e),this.wi(a))))),r<7&&i>=7&&(o=o.next((()=>this.Si(a)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(u){u.createObjectStore(q0,{keyPath:AQ})})(e),(function(u){u.createObjectStore(H0,{keyPath:CQ})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(u){const d=u.createObjectStore($0,{keyPath:PQ});d.createIndex(I_,OQ,{unique:!1}),d.createIndex(f3,VQ,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(u){const d=u.createObjectStore(Qv,{keyPath:yQ});d.createIndex(cv,bQ),d.createIndex(l3,xQ)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Kl)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(o=o.next((()=>(function(u){u.createObjectStore(zE,{keyPath:IQ,autoIncrement:!0}).createIndex(C_,DQ,{unique:!1}),u.createObjectStore(Ah,{keyPath:RQ}).createIndex(u3,kQ,{unique:!1}),u.createObjectStore(Ch,{keyPath:NQ}).createIndex(d3,MQ,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(Ah).clear()})).next((()=>{n.objectStore(Ch).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(u){u.createObjectStore(LE,{keyPath:jQ})})(e)}))),r<18&&i>=18&&n4()&&(o=o.next((()=>{n.objectStore(Ah).clear()})).next((()=>{n.objectStore(Ch).clear()}))),o}wi(e){let n=0;return e.store(Kl).ee(((r,i)=>{n+=o0(i)})).next((()=>{const r={byteSize:n};return e.store(np).put(A_,r)}))}yi(e){const n=e.store(tp),r=e.store(aa);return n.J().next((i=>ie.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,uc],[a.userId,a.lastAcknowledgedBatchId]);return r.J(sc,o).next((c=>ie.forEach(c,(u=>{ze(u.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=ec(this.serializer,u);return pV(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const n=e.store(vd),r=e.store(Kl);return e.store(dc).get(Zv).next((i=>{const a=[];return r.ee(((o,c)=>{const u=new kt(o),d=(function(p){return[0,Ir(p)]})(u);a.push(n.get(d).next((h=>h?ie.resolve():(p=>n.put({targetId:0,path:Ir(p),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>ie.waitFor(a)))}))}bi(e,n){e.createObjectStore(rp,{keyPath:SQ});const r=n.store(rp),i=new ZE,a=o=>{if(i.add(o)){const c=o.lastSegment(),u=o.popLast();return r.put({collectionId:c,parent:Ir(u)})}};return n.store(Kl).ee({X:!0},((o,c)=>{const u=new kt(o);return a(u.popLast())})).next((()=>n.store(gd).ee({X:!0},(([o,c,u],d)=>{const h=La(c);return a(h.popLast())}))))}Di(e){const n=e.store(md);return n.ee(((r,i)=>{const a=ch(i),o=cV(this.serializer,a);return n.put(o)}))}Ci(e,n){const r=n.store(Kl),i=[];return r.ee(((a,o)=>{const c=n.store(Qv),u=(function(p){return p.document?new ke(kt.fromString(p.document.name).popFirst(5)):p.noDocument?ke.fromSegments(p.noDocument.path):p.unknownDocument?ke.fromSegments(p.unknownDocument.path):Oe(36783)})(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(d))})).next((()=>ie.waitFor(i)))}Fi(e,n){const r=n.store(aa),i=xV(this.serializer),a=new eS(ny.mi,this.serializer.yt);return r.J().next((o=>{const c=new Map;return o.forEach((u=>{let d=c.get(u.userId)??ht();ec(this.serializer,u).keys().forEach((h=>d=d.add(h))),c.set(u.userId,d)})),ie.forEach(c,((u,d)=>{const h=new gr(d),p=ey.wt(this.serializer,h),m=a.getIndexManager(h),b=ty.wt(h,this.serializer,m,a.referenceDelegate);return new _V(i,b,p,m).recalculateAndSaveOverlaysForDocumentKeys(new D_(n,Fi.ce),u).next()}))}))}}function ck(t){t.createObjectStore(vd,{keyPath:wQ}).createIndex(jE,EQ,{unique:!0}),t.createObjectStore(md,{keyPath:"targetId"}).createIndex(c3,_Q,{unique:!0}),t.createObjectStore(dc)}const Po="IndexedDbPersistence",ex=18e5,tx=5e3,nx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oJ="main";class tS{constructor(e,n,r,i,a,o,c,u,d,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=o,this.document=c,this.xi=d,this.Oi=h,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!tS.v())throw new Ae(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KZ(this,i),this.$i=n+oJ,this.serializer=new lV(u),this.Ui=new tl(this.$i,this.Ni,new sJ(this.serializer)),this.hi=new VZ,this.Pi=new qZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xV(this.serializer),this.Ii=new OZ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Vr(Po,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(me.FAILED_PRECONDITION,nx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Fi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Um(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(vl(e))return Ee(Po,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee(Po,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Zf(e).get(Su).next((n=>ie.resolve(this.es(n))))}ts(e){return Um(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ex)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=er(n,yd);return r.J().next((i=>{const a=this.ss(i,ex),o=i.filter((c=>a.indexOf(c)===-1));return ie.forEach(o,(c=>r.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ie.resolve(!0):Zf(e).get(Su).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,tx)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Ae(me.FAILED_PRECONDITION,nx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Um(e).J().next((r=>this.ss(r,tx).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||o&&c)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ee(Po,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[zp,yd],(e=>{const n=new D_(e,Fi.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Um(e).J().next((n=>this.ss(n,ex).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return ty.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GZ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ey.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ee(Po,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(u){return u===18?BQ:u===17?m3:u===16?LQ:u===15?BE:u===14?g3:u===13?p3:u===12?zQ:u===11?h3:void Oe(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,a,(c=>(o=new D_(c,this.ci?this.ci.next():Fi.ce),n==="readwrite-primary"?this.Hi(o).next((u=>!!u||this.Yi(o))).next((u=>{if(!u)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ae(me.FAILED_PRECONDITION,i3);return r(o)})).next((u=>this.Xi(o).next((()=>u)))):this.Is(o).next((()=>r(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Is(e){return Zf(e).get(Su).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,tx)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ae(me.FAILED_PRECONDITION,nx)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put(Su,n)}static v(){return tl.v()}Zi(e){const n=Zf(e);return n.get(Su).next((r=>this.es(r)?(Ee(Po,"Releasing primary lease."),n.delete(Su)):ie.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Vr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;t4()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return Ee(Po,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Vr(Po,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(t){return er(t,zp)}function Um(t){return er(t,yd)}function lJ(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class nS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ht(),i=ht();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new nS(e,n.fromCache,r,i)}}class cJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return t4()?8:s3(Jn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new cJ;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Nu()<=xt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Nu()<=xt.DEBUG&&Ee("QueryEngine","Query:",Mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Nu()<=xt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(n))):ie.resolve())}ys(e,n){if(MR(n))return ie.resolve(null);let r=qi(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=n0(n,null,"F"),r=qi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ht(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,n0(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return MR(n)||i.isEqual(He.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?ie.resolve(null):(Nu()<=xt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(n)),this.vs(e,o,n,cQ(i,Zh)).next((c=>c)))}))}Ds(e,n){let r=new Lt(V3(e));return n.forEach(((i,a)=>{Fp(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Nu()<=xt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Mu(n)),this.ps.getDocumentsMatchingQuery(e,n,_i.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const rS="LocalStore",uJ=3e8;class dJ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(tt),this.xs=new Ys((a=>Cc(a)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _V(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function EV(t,e,n,r){return new dJ(t,e,n,r)}async function SV(t,e){const n=rt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ht();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function fJ(t,e){const n=rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const p=d.batch,m=p.keys();let b=ie.resolve();return m.forEach((_=>{b=b.next((()=>h.getEntry(u,_))).next((E=>{const S=d.docVersions.get(_);ze(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,p)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ht();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function TV(t){const e=rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function hJ(t,e){const n=rt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,p)=>{const m=i.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,p))));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(qn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(E,S,A){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=uJ?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(m,b,h)&&c.push(n.Pi.updateTargetData(a,b))}));let u=yi(),d=ht();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(pJ(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(He.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((p=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return ie.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function pJ(t,e,n){let r=ht(),i=ht();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=yi();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(He.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ee(rS,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function gJ(t,e){const n=rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=uc),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mJ(t,e){const n=rt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,ie.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function G_(t,e,n){const r=rt(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!vl(o))throw o;Ee(rS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function uk(t,e,n){const r=rt(t);let i=He.min(),a=ht();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const p=rt(u),m=p.xs.get(h);return m!==void 0?ie.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)})(r,o,qi(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:He.min(),n?a:ht()))).next((c=>(vJ(r,tZ(e),c),{documents:c,Qs:a})))))}function vJ(t,e,n){let r=t.Os.get(e)||He.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class dk{constructor(){this.activeTargetIds=oZ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AV{constructor(){this.Mo=new dk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yJ{Oo(e){}shutdown(){}}const fk="ConnectivityMonitor";class hk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(fk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(fk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gm=null;function q_(){return Gm===null?Gm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gm++,"0x"+Gm.toString(16)}const rx="RestConnection",bJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xJ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Jv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=q_(),c=this.zo(e,n.toUriEncodedString());Ee(rx,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=Ld(d);return this.Jo(e,c,u,r,h).then((p=>(Ee(rx,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Tc(rx,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=bJ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class _J{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const wr="WebChannelConnection";class wJ extends xJ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=q_();return new Promise(((c,u)=>{const d=new Y4;d.setWithCredentials(!0),d.listenOnce(K4.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case sv.NO_ERROR:const p=d.getResponseJson();Ee(wr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case sv.TIMEOUT:Ee(wr,`RPC '${e}' ${o} timed out`),u(new Ae(me.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const m=d.getStatus();if(Ee(wr,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const E=(function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(D)>=0?D:me.UNKNOWN})(_.status);u(new Ae(E,_.message))}else u(new Ae(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ae(me.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ee(wr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Ee(wr,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=q_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Q4(),c=W4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Ee(wr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);this.I_(p);let m=!1,b=!1;const _=new _J({Yo:S=>{b?Ee(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Ee(wr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Ee(wr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),E=(S,A,D)=>{S.listen(A,(R=>{try{D(R)}catch(P){setTimeout((()=>{throw P}),0)}}))};return E(p,sh.EventType.OPEN,(()=>{b||(Ee(wr,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),E(p,sh.EventType.CLOSE,(()=>{b||(b=!0,Ee(wr,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))})),E(p,sh.EventType.ERROR,(S=>{b||(b=!0,Tc(wr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Ae(me.UNAVAILABLE,"The operation could not be completed")))})),E(p,sh.EventType.MESSAGE,(S=>{if(!b){const A=S.data[0];ze(!!A,16349);const D=A,R=D?.error||D[0]?.error;if(R){Ee(wr,`RPC '${e}' stream ${i} received error:`,R);const P=R.status;let z=(function(C){const k=Ln[C];if(k!==void 0)return K3(k)})(P),M=R.message;z===void 0&&(z=me.INTERNAL,M="Unknown error status: "+P+" with message "+R.message),b=!0,_.a_(new Ae(z,M)),p.close()}else Ee(wr,`RPC '${e}' stream ${i} received:`,A),_.u_(A)}})),E(c,X4.STAT_EVENT,(S=>{S.stat===E_.PROXY?Ee(wr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===E_.NOPROXY&&Ee(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function EJ(){return typeof window<"u"?window:null}function mv(){return typeof document<"u"?document:null}function ry(t){return new SZ(t,!0)}class CV{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const pk="PersistentStream";class IV{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ae(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(pk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ee(pk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SJ extends IV{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CZ(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?Br(o.readTime):He.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=z_(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=e0(u)?{documents:nV(a,u)}:{query:rV(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Q3(a,o.resumeToken);const d=V_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(He.min())>0){c.readTime=Td(a,o.snapshotVersion.toTimestamp());const d=V_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=DZ(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=z_(this.serializer),n.removeTarget=e,this.q_(n)}}class TJ extends IV{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IZ(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=z_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>i0(this.serializer,r)))};this.q_(n)}}class AJ{}class CJ extends AJ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ae(me.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,j_(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(me.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,j_(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(me.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vr(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const kc="RemoteStore";class DJ{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{jc(this)&&(Ee(kc,"Restarting streams for network reachability change."),await(async function(u){const d=rt(u);d.Ea.add(4),await Gp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await iy(d)})(this))}))})),this.Ra=new IJ(r,i)}}async function iy(t){if(jc(t))for(const e of t.da)await e(!0)}async function Gp(t){for(const e of t.da)await e(!1)}function DV(t,e){const n=rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),oS(n)?sS(n):qd(n).O_()&&aS(n,e))}function iS(t,e){const n=rt(t),r=qd(n);n.Ia.delete(e),r.O_()&&RV(n,e),n.Ia.size===0&&(r.O_()?r.L_():jc(n)&&n.Ra.set("Unknown"))}function aS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qd(t).Y_(e)}function RV(t,e){t.Va.Ue(e),qd(t).Z_(e)}function sS(t){t.Va=new xZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qd(t).start(),t.Ra.ua()}function oS(t){return jc(t)&&!qd(t).x_()&&t.Ia.size>0}function jc(t){return rt(t).Ea.size===0}function kV(t){t.Va=void 0}async function RJ(t){t.Ra.set("Online")}async function kJ(t){t.Ia.forEach(((e,n)=>{aS(t,e)}))}async function NJ(t,e){kV(t),oS(t)?(t.Ra.ha(e),sS(t)):t.Ra.set("Unknown")}async function MJ(t,e,n){if(t.Ra.set("Online"),e instanceof W3&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Ee(kc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await c0(t,r)}else if(e instanceof pv?t.Va.Ze(e):e instanceof X3?t.Va.st(e):t.Va.tt(e),!n.isEqual(He.min()))try{const r=await TV(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(qn.EMPTY_BYTE_STRING,h.snapshotVersion)),RV(a,u);const p=new Rs(h.target,u,d,h.sequenceNumber);aS(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Ee(kc,"Failed to raise snapshot:",r),await c0(t,r)}}async function c0(t,e,n){if(!vl(e))throw e;t.Ea.add(1),await Gp(t),t.Ra.set("Offline"),n||(n=()=>TV(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(kc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await iy(t)}))}function NV(t,e){return e().catch((n=>c0(t,n,e)))}async function qp(t){const e=rt(t),n=dl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uc;for(;PJ(e);)try{const i=await gJ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,OJ(e,i)}catch(i){await c0(e,i)}MV(e)&&PV(e)}function PJ(t){return jc(t)&&t.Ta.length<10}function OJ(t,e){t.Ta.push(e);const n=dl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function MV(t){return jc(t)&&!dl(t).x_()&&t.Ta.length>0}function PV(t){dl(t).start()}async function VJ(t){dl(t).ra()}async function jJ(t){const e=dl(t);for(const n of t.Ta)e.ea(n.mutations)}async function zJ(t,e,n){const r=t.Ta.shift(),i=YE.from(r,e,n);await NV(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await qp(t)}async function LJ(t,e){e&&dl(t).X_&&await(async function(r,i){if((function(o){return vZ(o)&&o!==me.ABORTED})(i.code)){const a=r.Ta.shift();dl(r).B_(),await NV(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await qp(r)}})(t,e),MV(t)&&PV(t)}async function gk(t,e){const n=rt(t);n.asyncQueue.verifyOperationInProgress(),Ee(kc,"RemoteStore received new credentials");const r=jc(n);n.Ea.add(3),await Gp(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await iy(n)}async function BJ(t,e){const n=rt(t);e?(n.Ea.delete(2),await iy(n)):e||(n.Ea.add(2),await Gp(n),n.Ra.set("Unknown"))}function qd(t){return t.ma||(t.ma=(function(n,r,i){const a=rt(n);return a.sa(),new SJ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:RJ.bind(null,t),t_:kJ.bind(null,t),r_:NJ.bind(null,t),H_:MJ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),oS(t)?sS(t):t.Ra.set("Unknown")):(await t.ma.stop(),kV(t))}))),t.ma}function dl(t){return t.fa||(t.fa=(function(n,r,i){const a=rt(n);return a.sa(),new TJ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:VJ.bind(null,t),r_:LJ.bind(null,t),ta:jJ.bind(null,t),na:zJ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await qp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ee(kc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class lS{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new lS(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cS(t,e){if(Vr("AsyncQueue",`${e}: ${t}`),vl(t))return new Ae(me.UNAVAILABLE,`${e}: ${t}`);throw t}class td{static emptySet(e){return new td(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=oh(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof td)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new td;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class mk{constructor(){this.ga=new ln(ke.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ad{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ad(e,n,td.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&X0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class FJ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UJ{constructor(){this.queries=vk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=rt(n),a=i.queries;i.queries=vk(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ae(me.ABORTED,"Firestore shutting down"))}}function vk(){return new Ys((t=>O3(t)),X0)}async function uS(t,e){const n=rt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new FJ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=cS(o,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&fS(n)}async function dS(t,e){const n=rt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GJ(t,e){const n=rt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&fS(n)}function qJ(t,e,n){const r=rt(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function fS(t){t.Ca.forEach((e=>{e.next()}))}var H_,yk;(yk=H_||(H_={})).Ma="default",yk.Cache="cache";class hS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==H_.Cache}}class OV{constructor(e){this.key=e}}class VV{constructor(e){this.key=e}}class HJ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=V3(e),this.tu=new td(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new mk,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const m=i.get(h),b=Fp(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;m&&b?m.data.isEqual(b.data)?_!==E&&(r.track({type:3,doc:b}),S=!0):this.su(m,b)||(r.track({type:2,doc:b}),S=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),S=!0):m&&!b&&(r.track({type:1,doc:m}),S=!0,(u||d)&&(c=!0)),S&&(b?(o=o.add(b),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,p)=>(function(b,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:S})}};return E(b)-E(_)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ad(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new VV(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new OV(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ht();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ad.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pS="SyncEngine";class $J{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YJ{constructor(e){this.key=e,this.hu=!1}}class KJ{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ys((c=>O3(c)),X0),this.Iu=new Map,this.Eu=new Set,this.du=new ln(ke.comparator),this.Au=new Map,this.Ru=new JE,this.Vu={},this.mu=new Map,this.fu=Rc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XJ(t,e,n=!0){const r=UV(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await jV(r,e,n,!0),i}async function WJ(t,e){const n=UV(t);await jV(n,e,!0,!1)}async function jV(t,e,n,r){const i=await mJ(t.localStore,qi(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await QJ(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&DV(t.remoteStore,i),c}async function QJ(t,e,n,r,i){t.pu=(p,m,b)=>(async function(E,S,A,D){let R=S.view.ru(A);R.Cs&&(R=await uk(E.localStore,S.query,!1).then((({documents:T})=>S.view.ru(T,R))));const P=D&&D.targetChanges.get(S.targetId),z=D&&D.targetMismatches.get(S.targetId)!=null,M=S.view.applyChanges(R,E.isPrimaryClient,P,z);return xk(E,S.targetId,M.au),M.snapshot})(t,p,m,b);const a=await uk(t.localStore,e,!0),o=new HJ(e,a.Qs),c=o.ru(a.documents),u=Up.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);xk(t,n,d.au);const h=new $J(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function ZJ(t,e,n){const r=rt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!X0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await G_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&iS(r.remoteStore,i.targetId),$_(r,i.targetId)})).catch(Vc)):($_(r,i.targetId),await G_(r.localStore,i.targetId,!0))}async function JJ(t,e){const n=rt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iS(n.remoteStore,r.targetId))}async function eee(t,e,n){const r=GV(t);try{const i=await(function(o,c){const u=rt(o),d=ft.now(),h=c.reduce(((b,_)=>b.add(_.key)),ht());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=yi(),E=ht();return u.Ns.getEntries(b,h).next((S=>{_=S,_.forEach(((A,D)=>{D.isValidDocument()||(E=E.add(A))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((S=>{p=S;const A=[];for(const D of c){const R=gZ(D,p.get(D.key).overlayedDocument);R!=null&&A.push(new Ks(D.key,R,A3(R.value.mapValue),Cr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,A,c)})).next((S=>{m=S;const A=S.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(b,S.batchId,A)}))})).then((()=>({batchId:m.batchId,changes:z3(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new ln(tt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await Hp(r,i.changes),await qp(r.remoteStore)}catch(i){const a=cS(i,"Failed to persist write");n.reject(a)}}async function zV(t,e){const n=rt(t);try{const r=await hJ(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ze(o.hu,14607):i.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))})),await Hp(n,r,e)}catch(r){await Vc(r)}}function bk(t,e,n){const r=rt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=rt(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,p)=>{for(const m of p.Sa)m.va(c)&&(d=!0)})),d&&fS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tee(t,e,n){const r=rt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ln(ke.comparator);o=o.insert(a,wn.newNoDocument(a,He.min()));const c=ht().add(a),u=new J0(He.min(),new Map,new ln(tt),o,c);await zV(r,u),r.du=r.du.remove(a),r.Au.delete(e),gS(r)}else await G_(r.localStore,e,!1).then((()=>$_(r,e,n))).catch(Vc)}async function nee(t,e){const n=rt(t),r=e.batch.batchId;try{const i=await fJ(n.localStore,e);BV(n,r,null),LV(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hp(n,i)}catch(i){await Vc(i)}}async function ree(t,e,n){const r=rt(t);try{const i=await(function(o,c){const u=rt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((p=>(ze(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);BV(r,e,n),LV(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hp(r,i)}catch(i){await Vc(i)}}function LV(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function BV(t,e,n){const r=rt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||FV(t,r)}))}function FV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(iS(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),gS(t))}function xk(t,e,n){for(const r of n)r instanceof OV?(t.Ru.addReference(r.key,e),iee(t,r)):r instanceof VV?(Ee(pS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||FV(t,r.key)):Oe(19791,{wu:r})}function iee(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ee(pS,"New document in limbo: "+n),t.Eu.add(r),gS(t))}function gS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ke(kt.fromString(e)),r=t.fu.next();t.Au.set(r,new YJ(n)),t.du=t.du.insert(n,r),DV(t.remoteStore,new Rs(qi(Bp(n.path)),r,"TargetPurposeLimboResolution",Fi.ce))}}async function Hp(t,e,n){const r=rt(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=nS.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=rt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>ie.forEach(d,(m=>ie.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b))).next((()=>ie.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))))))}catch(p){if(!vl(p))throw p;Ee(rS,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const b=h.Ms.get(m),_=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,E)}}})(r.localStore,a))}async function aee(t,e){const n=rt(t);if(!n.currentUser.isEqual(e)){Ee(pS,"User change. New user:",e.toKey());const r=await SV(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ae(me.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hp(n,r.Ls)}}function see(t,e){const n=rt(t),r=n.Au.get(e);if(r&&r.hu)return ht().add(r.key);{let i=ht();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function UV(t){const e=rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=see.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tee.bind(null,e),e.Pu.H_=GJ.bind(null,e.eventManager),e.Pu.yu=qJ.bind(null,e.eventManager),e}function GV(t){const e=rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ree.bind(null,e),e}class dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ry(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return EV(this.persistence,new wV,e.initialUser,this.serializer)}Cu(e){return new eS(ny.mi,this.serializer)}Du(e){return new AV}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dp.provider={build:()=>new dp};class oee extends dp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof l0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new eS((r=>l0.mi(r,n)),this.serializer)}}class lee extends dp{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await GV(this.xu.syncEngine),await qp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return EV(this.persistence,new wV,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new vV(r,e.asyncQueue,n)}Mu(e,n){const r=new hQ(n,this.persistence);return new fQ(e.asyncQueue,r)}Cu(e){const n=lJ(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new tS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EJ(),mv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new AV}}class u0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aee.bind(null,this.syncEngine),await BJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UJ})()}createDatastore(e){const n=ry(e.databaseInfo.databaseId),r=(function(a){return new wJ(a)})(e.databaseInfo);return(function(a,o,c,u){return new CJ(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new DJ(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>bk(this.syncEngine,n,0)),(function(){return hk.v()?new hk:new yJ})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,h){const p=new KJ(i,a,o,c,u,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=rt(n);Ee(kc,"RemoteStore shutting down."),r.Ea.add(5),await Gp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}u0.provider={build:()=>new u0};class mS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const fl="FirestoreClient";class cee{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=PE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Ee(fl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Ee(fl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ix(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(fl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await SV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function _k(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uee(t);Ee(fl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>gk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>gk(e.remoteStore,i))),t._onlineComponents=e}async function uee(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(fl,"Using user provided OfflineComponentProvider");try{await ix(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===me.FAILED_PRECONDITION||i.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Tc("Error using user provided cache. Falling back to memory cache: "+n),await ix(t,new dp)}}else Ee(fl,"Using default OfflineComponentProvider"),await ix(t,new oee(void 0));return t._offlineComponents}async function qV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(fl,"Using user provided OnlineComponentProvider"),await _k(t,t._uninitializedComponentsProvider._online)):(Ee(fl,"Using default OnlineComponentProvider"),await _k(t,new u0))),t._onlineComponents}function dee(t){return qV(t).then((e=>e.syncEngine))}async function d0(t){const e=await qV(t),n=e.eventManager;return n.onListen=XJ.bind(null,e.syncEngine),n.onUnlisten=ZJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JJ.bind(null,e.syncEngine),n}function fee(t,e,n={}){const r=new Ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new mS({next:m=>{h.Nu(),o.enqueueAndForget((()=>dS(a,p)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new Ae(me.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new Ae(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new hS(Bp(c.path),h,{includeMetadataChanges:!0,qa:!0});return uS(a,p)})(await d0(t),t.asyncQueue,e,n,r))),r.promise}function hee(t,e,n={}){const r=new Ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new mS({next:m=>{h.Nu(),o.enqueueAndForget((()=>dS(a,p))),m.fromCache&&u.source==="server"?d.reject(new Ae(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new hS(c,h,{includeMetadataChanges:!0,qa:!0});return uS(a,p)})(await d0(t),t.asyncQueue,e,n,r))),r.promise}function HV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const wk=new Map;const $V="firestore.googleapis.com",Ek=!0;class Sk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$V,this.ssl=Ek}else this.host=e.host,this.ssl=e.ssl??Ek;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HZ)throw new Ae(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ay{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZW;switch(r.type){case"firstParty":return new nQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=wk.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),wk.delete(n),r.terminate())})(this),Promise.resolve()}}function pee(t,e,n,r={}){t=Lr(t,ay);const i=Ld(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(ZO(`https://${c}`),JO("Firestore",!0)),a.host!==$V&&a.host!==c&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!xc(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=gr.MOCK_USER;else{d=sY(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ae(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new gr(p)}t._authCredentials=new JW(new J4(d,h))}}class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(jp(n,En._jsonSchema))return new En(e,r||null,new ke(kt.fromString(n.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:Un("string",En._jsonSchemaVersion),referencePath:Un("string")};class nl extends Xs{constructor(e,n,r){super(e,n,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ke(e))}withConverter(e){return new nl(this.firestore,e,this._path)}}function Oa(t,e,...n){if(t=gn(t),t3("collection","path",e),t instanceof ay){const r=kt.fromString(e,...n);return pR(r),new nl(t,null,r)}{if(!(t instanceof En||t instanceof nl))throw new Ae(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return pR(r),new nl(t.firestore,null,r)}}function _n(t,e,...n){if(t=gn(t),arguments.length===1&&(e=PE.newId()),t3("doc","path",e),t instanceof ay){const r=kt.fromString(e,...n);return hR(r),new En(t,null,new ke(r))}{if(!(t instanceof En||t instanceof nl))throw new Ae(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return hR(r),new En(t.firestore,t instanceof nl?t.converter:null,new ke(r))}}const Tk="AsyncQueue";class Ak{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CV(this,"async_queue_retry"),this._c=()=>{const r=mv();r&&Ee(Tk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=mv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ya;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vl(e))throw e;Ee(Tk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Vr("INTERNAL UNHANDLED ERROR: ",Ck(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=lS.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Oe(47125,{Pc:Ck(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ck(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function Ik(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ja extends ay{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ak,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ak(e),this._firestoreClient=void 0,await e}}}function gee(t,e){const n=typeof t=="object"?t:o4(),r=typeof t=="string"?t:Jv,i=SE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=iY("firestore");a&&pee(i,...a)}return i}function sy(t){if(t._terminated)throw new Ae(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YV(t),t._firestoreClient}function YV(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new UQ(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,HV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}function mee(t,e){Tc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return vee(t,u0.provider,{build:r=>new lee(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function vee(t,e,n){if((t=Lr(t,Ja))._firestoreClient||t._terminated)throw new Ae(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ae(me.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},YV(t)}class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(qn.fromBase64String(e))}catch(n){throw new Ae(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jp(e,Li._jsonSchema))return Li.fromBase64String(e.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:Un("string",Li._jsonSchemaVersion),bytes:Un("string")};class oy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vS{constructor(e){this._methodName=e}}class Ka{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ka._jsonSchemaVersion}}static fromJSON(e){if(jp(e,Ka._jsonSchema))return new Ka(e.latitude,e.longitude)}}Ka._jsonSchemaVersion="firestore/geoPoint/1.0",Ka._jsonSchema={type:Un("string",Ka._jsonSchemaVersion),latitude:Un("number"),longitude:Un("number")};class Xa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jp(e,Xa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xa(e.vectorValues);throw new Ae(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xa._jsonSchemaVersion="firestore/vectorValue/1.0",Xa._jsonSchema={type:Un("string",Xa._jsonSchemaVersion),vectorValues:Un("object")};const yee=/^__.*__$/;class bee{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gd(e,this.data,n,this.fieldTransforms)}}class KV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:t})}}class yS{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return f0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XV(this.Ac)&&yee.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xee{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ry(e)}Cc(e,n,r,i=!1){return new yS({Ac:e,methodName:n,Dc:r,path:hn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ly(t){const e=t._freezeSettings(),n=ry(t._databaseId);return new xee(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WV(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);bS("Data must be an object, but it was:",o,r);const c=QV(r,o);let u,d;if(a.merge)u=new ni(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const m=Y_(e,p,n);if(!o.contains(m))throw new Ae(me.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);JV(h,m)||h.push(m)}u=new ni(h),d=o.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,d=o.fieldTransforms;return new bee(new Tr(c),u,d)}class cy extends vS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cy}}function _ee(t,e,n,r){const i=t.Cc(1,e,n);bS("Data must be an object, but it was:",i,r);const a=[],o=Tr.empty();yl(r,((u,d)=>{const h=xS(e,u,n);d=gn(d);const p=i.yc(h);if(d instanceof cy)a.push(h);else{const m=$p(d,p);m!=null&&(a.push(h),o.set(h,m))}}));const c=new ni(a);return new KV(o,c,i.fieldTransforms)}function wee(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[Y_(e,r,n)],u=[i];if(a.length%2!=0)throw new Ae(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(Y_(e,a[m])),u.push(a[m+1]);const d=[],h=Tr.empty();for(let m=c.length-1;m>=0;--m)if(!JV(d,c[m])){const b=c[m];let _=u[m];_=gn(_);const E=o.yc(b);if(_ instanceof cy)d.push(b);else{const S=$p(_,E);S!=null&&(d.push(b),h.set(b,S))}}const p=new ni(d);return new KV(h,p,o.fieldTransforms)}function Eee(t,e,n,r=!1){return $p(n,t.Cc(r?4:3,e))}function $p(t,e){if(ZV(t=gn(t)))return bS("Unsupported field value:",e,t),QV(t,e);if(t instanceof vS)return(function(r,i){if(!XV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=$p(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ft.fromDate(r);return{timestampValue:Td(i.serializer,a)}}if(r instanceof ft){const a=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Td(i.serializer,a)}}if(r instanceof Ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:Q3(i.serializer,r._byteString)};if(r instanceof En){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:WE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xa)return(function(o,c){return{mapValue:{fields:{[UE]:{stringValue:GE},[bd]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return HE(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${F0(r)}`)})(t,e)}function QV(t,e){const n={};return v3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(t,((r,i)=>{const a=$p(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function ZV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Ka||t instanceof Li||t instanceof En||t instanceof vS||t instanceof Xa)}function bS(t,e,n){if(!ZV(n)||!n3(n)){const r=F0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Y_(t,e,n){if((e=gn(e))instanceof oy)return e._internalPath;if(typeof e=="string")return xS(t,e);throw f0("Field path arguments must be of type string or ",t,!1,void 0,n)}const See=new RegExp("[~\\*/\\[\\]]");function xS(t,e,n){if(e.search(See)>=0)throw f0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oy(...e.split("."))._internalPath}catch{throw f0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function f0(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ae(me.INVALID_ARGUMENT,c+t+u)}function JV(t,e){return t.some((n=>n.isEqual(e)))}class e5{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tee extends e5{data(){return super.data()}}function uy(t,e){return typeof e=="string"?xS(t,e):e instanceof oy?e._internalPath:e._delegate._internalPath}function t5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _S{}class wS extends _S{}function oa(t,e,...n){let r=[];e instanceof _S&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof ES)).length,c=a.filter((u=>u instanceof dy)).length;if(o>1||o>0&&c>0)throw new Ae(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class dy extends wS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dy(e,n,r)}_apply(e){const n=this._parse(e);return n5(e._query,n),new Xs(e.firestore,e.converter,O_(e._query,n))}_parse(e){const n=ly(e.firestore);return(function(a,o,c,u,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ae(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kk(p,h);const _=[];for(const E of p)_.push(Rk(u,a,E));m={arrayValue:{values:_}}}else m=Rk(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kk(p,h),m=Eee(c,o,p,h==="in"||h==="not-in");return _t.create(d,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oo(t,e,n){const r=e,i=uy("where",t);return dy._create(i,r,n)}class ES extends _S{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ES(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)n5(o,u),o=O_(o,u)})(e._query,n),new Xs(e.firestore,e.converter,O_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class SS extends wS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new SS(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Ae(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lp(a,o)})(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Ud(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function fp(t,e="asc"){const n=e,r=uy("orderBy",t);return SS._create(r,n)}class TS extends wS{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new TS(e,n,r)}_apply(e){return new Xs(e.firestore,e.converter,n0(e._query,this._limit,this._limitType))}}function Dk(t){return TS._create("limit",t,"F")}function Rk(t,e,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new Ae(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P3(e)&&n.indexOf("/")!==-1)throw new Ae(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(kt.fromString(n));if(!ke.isDocumentKey(r))throw new Ae(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sp(t,new ke(r))}if(n instanceof En)return sp(t,n._key);throw new Ae(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${F0(n)}.`)}function kk(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n5(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Aee{convertValue(e,n="none"){switch(cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yl(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[bd].arrayValue?.values?.map((r=>sn(r.doubleValue)));return new Xa(n)}convertGeoPoint(e){return new Ka(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Y0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const n=Gs(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kt.fromString(e);ze(oV(r),9688,{name:e});const i=new Ac(r.get(1),r.get(3)),a=new ke(r.popFirst(5));return i.isEqual(n)||Vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function r5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hc extends e5{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",hc._jsonSchema={type:Un("string",hc._jsonSchemaVersion),bundleSource:Un("string","DocumentSnapshot"),bundleName:Un("string"),bundle:Un("string")};class vv extends hc{data(e={}){return super.data(e)}}class pc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vv(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new vv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new vv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:Cee(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=PE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Cee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}function Iee(t){t=Lr(t,En);const e=Lr(t.firestore,Ja);return fee(sy(e),t._key).then((n=>i5(e,t,n)))}pc._jsonSchemaVersion="firestore/querySnapshot/1.0",pc._jsonSchema={type:Un("string",pc._jsonSchemaVersion),bundleSource:Un("string","QuerySnapshot"),bundleName:Un("string"),bundle:Un("string")};class AS extends Aee{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function Cd(t){t=Lr(t,Xs);const e=Lr(t.firestore,Ja),n=sy(e),r=new AS(e);return t5(t._query),hee(n,t._query).then((i=>new pc(e,r,t,i)))}function Ho(t,e,n){t=Lr(t,En);const r=Lr(t.firestore,Ja),i=r5(t.converter,e,n);return hy(r,[WV(ly(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cr.none())])}function Yp(t,e,n,...r){t=Lr(t,En);const i=Lr(t.firestore,Ja),a=ly(i);let o;return o=typeof(e=gn(e))=="string"||e instanceof oy?wee(a,"updateDoc",t._key,e,n,r):_ee(a,"updateDoc",t._key,e),hy(i,[o.toMutation(t._key,Cr.exists(!0))])}function Id(t){return hy(Lr(t.firestore,Ja),[new Z0(t._key,Cr.none())])}function fy(t,e){const n=Lr(t.firestore,Ja),r=_n(t),i=r5(t.converter,e);return hy(n,[WV(ly(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cr.exists(!1))]).then((()=>r))}function gc(t,...e){t=gn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ik(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ik(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof En)o=Lr(t.firestore,Ja),c=Bp(t._key.path),a={next:u=>{e[r]&&e[r](i5(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Lr(t,Xs);o=Lr(u.firestore,Ja),c=u._query;const d=new AS(o);a={next:h=>{e[r]&&e[r](new pc(o,d,u,h))},error:e[r+1],complete:e[r+2]},t5(t._query)}return(function(d,h,p,m){const b=new mS(m),_=new hS(h,b,p);return d.asyncQueue.enqueueAndForget((async()=>uS(await d0(d),_))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>dS(await d0(d),_)))}})(sy(o),c,i,a)}function hy(t,e){return(function(r,i){const a=new Ya;return r.asyncQueue.enqueueAndForget((async()=>eee(await dee(r),i,a))),a.promise})(sy(t),e)}function i5(t,e,n){const r=n.docs.get(e._key),i=new AS(t);return new hc(t,i,e._key,r,new uh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Fd=i})(Bd),fd(new _c("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Ja(new eQ(r.getProvider("auth-internal")),new rQ(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ae(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Jo(cR,uR,e),Jo(cR,uR,"esm2020")})();const Dee={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},a5=s4(Dee),Vo=KW(a5),Mt=gee(a5);mee(Mt).catch(t=>{t.code==="failed-precondition"?console.warn(" Offline persistence failed: Multiple tabs open"):t.code==="unimplemented"?console.warn(" Offline persistence not available in this browser"):console.error(" Failed to enable offline persistence:",t)});const ax=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Hi=M0()(xE(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await kX(Vo,e,n)).user;if(!i.emailVerified)return await ZD(Vo),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=ax(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await RX(Vo,e,n)).user;await MX(a,{displayName:r}),await QD(a);const o=ax(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await ZD(Vo),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await DX(Vo,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Vo.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await QD(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Hi.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=Vo.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Oc.credential(n.email,e);return await IX(n,r),await jX(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Hi.getState().isInitialized?()=>{}:(t({isInitialized:!1}),VX(Vo,r=>{const i=Date.now(),a=Hi.getState(),o=r?ax(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,p=r&&h||!!d,m=r?o:d?a.currentUser:null;t({currentUser:m,isAuthenticated:p,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),Ree=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,s5=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},CS=t=>{const e=t.date?.toDate?.()?t.date.toDate().toISOString():t.date,n=new Date(e),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return{id:t.id,date:e,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",merchant:t.merchant||void 0,envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:Ree(t.type),transferId:t.transferId??void 0,userId:t.userId,month:r,isAutomatic:t.isAutomatic??void 0}},kee=(t,e)=>{const n={id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:ft.fromDate(new Date(t.date)),description:t.description,merchant:t.merchant||null,reconciled:t.reconciled??!1,type:s5(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(n.isAutomatic=!0),n},Nee=t=>{const e={envelopeId:t.envelopeId,amount:t.amount.toString(),date:ft.fromDate(new Date(t.date)),description:t.description,merchant:t.merchant||null,reconciled:t.reconciled??!1,type:s5(t.type),transferId:t.transferId??null};return t.isAutomatic===!0&&(e.isAutomatic=!0),e},sx=t=>Oa(Mt,"users",t,"transactions"),Fa={subscribeToTransactions:(t,e)=>{const n=oa(sx(t),fp("date","desc"));return gc(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=oa(sx(t),fp("date","desc")),r=(await Cd(e)).docs.map(i=>{const a={id:i.id,...i.data()};return CS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await fy(sx(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=_n(Mt,"users",t,"transactions",e);return await Yp(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=_n(Mt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Id(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},ox=t=>Oa(Mt,"users",t,"envelopes"),Va={subscribeToEnvelopes:(t,e)=>{const n=oa(ox(t),fp("orderIndex","asc"));return gc(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=ox(t),i=(await Cd(e)).docs.map((a,o)=>({id:a.id,...a.data(),orderIndex:a.data().orderIndex??o})).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await fy(ox(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=_n(Mt,"users",t,"envelopes",e.id);return await Ho(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=_n(Mt,"users",t,"envelopes",e);return await Yp(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=_n(Mt,"users",t,"envelopes",e);await Id(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},Nk=t=>{const e={...t},n=e;if(Object.keys(e).forEach(r=>{e[r]===void 0&&delete n[r]}),e.piggybankConfig){const r={...e.piggybankConfig},i=r;Object.keys(r).forEach(a=>{r[a]===void 0&&delete i[a]}),e.piggybankConfig=r}return e},Mee=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>{const i=a=>({id:a.id,date:a.date?.toDate?.()?a.date.toDate().toISOString():a.date,amount:parseFloat(a.amount)||0,description:a.description||"",envelopeId:a.envelopeId||"",reconciled:a.reconciled||!1,type:a.type==="income"?"Income":a.type==="expense"?"Expense":"Transfer",transferId:a.transferId||void 0,userId:a.userId||void 0});return{createEnvelope:async a=>{const o=a.currentBalance&&a.currentBalance>0,c=o?{...a,currentBalance:0,orderIndex:a.orderIndex??0}:{...a,orderIndex:a.orderIndex??0},u=`temp-${Date.now()}-${Math.random()}`,d={...c,id:u};if(t(h=>({envelopes:[...h.envelopes,d],isLoading:!0})),o){console.log(` Creating initial deposit transaction locally first: ${d.name} (tempId: ${u})`);try{await e().addTransaction({description:"Initial Deposit",amount:a.currentBalance,envelopeId:u,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(u);console.log(` Test balance for temp envelope ${u}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h=n(),p={...c,id:"",userId:h},m=await Va.createEnvelope(p);console.log(" Firebase envelope creation successful:",m);const b={id:m.id,name:m.name,currentBalance:m.currentBalance,lastUpdated:m.lastUpdated,isActive:m.isActive??!0,orderIndex:m.orderIndex??0,userId:m.userId,createdAt:m.createdAt,isPiggybank:m.isPiggybank,piggybankConfig:m.piggybankConfig};if(t(_=>({envelopes:_.envelopes.map(E=>E.id===u?b:E),isLoading:!1,pendingSync:!1})),o){console.log(` Updating transactions from temp envelope ID ${u} to real ID ${m.id}`),console.log(" Transactions before update:",e().transactions.map(E=>({id:E.id,envelopeId:E.envelopeId,description:E.description}))),t(E=>({transactions:E.transactions.map(S=>S.envelopeId===u?{...S,envelopeId:m.id}:S)})),console.log(" Transactions after envelopeId update:",e().transactions.map(E=>({id:E.id,envelopeId:E.envelopeId,description:E.description})));const _=e().transactions.filter(E=>E.envelopeId===m.id&&E.id&&E.id.startsWith("temp-"));console.log(` Found ${_.length} transactions to sync for envelope ${m.id}:`,_.map(E=>({id:E.id,envelopeId:E.envelopeId})));for(const E of _)try{console.log(" Syncing transaction:",E);const S={...E,amount:E.amount.toString(),type:E.type.toLowerCase(),date:ft.fromDate(new Date(E.date))},A=await Fa.addTransaction(S);console.log(" Transaction synced:",A);const D=i(A);console.log(` Replacing temp transaction ${E.id} with Firebase transaction ${A.id}`),t(R=>({transactions:R.transactions.map(P=>P.id===E.id?D:P)}))}catch(S){console.error(` Failed to sync transaction ${E.id}:`,S)}console.log(" Final transactions after sync:",e().transactions.map(E=>({id:E.id,envelopeId:E.envelopeId,description:E.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${m.id}`)}return m}catch(h){if(console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:r(h)}),r(h))return console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null}),d;throw console.log(" Real error - removing temp envelope"),t(p=>({envelopes:p.envelopes.filter(m=>m.id!==u),transactions:p.transactions.filter(m=>m.envelopeId!==u),error:h.message,isLoading:!1})),h}return d},addToEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await e().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Income",reconciled:!1})},spendFromEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await e().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Expense",reconciled:!1})},transferFunds:async(a,o,c,u,d)=>{console.log(`Transferring ${c} from ${a} to ${o} with note: ${u}`);const h=d?typeof d=="string"?d:d.toISOString():new Date().toISOString(),p=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(m=>m.id===o)?.name||"envelope"}`,amount:c,envelopeId:a,date:h,type:"Expense",transferId:p,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(m=>m.id===a)?.name||"envelope"}`,amount:c,envelopeId:o,date:h,type:"Income",transferId:p,reconciled:!1})},deleteEnvelope:async a=>{const o=e().transactions.filter(c=>c.envelopeId===a);t(c=>({envelopes:c.envelopes.filter(u=>u.id!==a),transactions:c.transactions.filter(u=>u.envelopeId!==a),isLoading:!0}));try{const c=n();await Va.deleteEnvelope(c,a);for(const u of o)u.id&&!u.id.startsWith("temp-")&&await Fa.deleteTransaction(c,u.id);await e().removeEnvelopeFromTemplates(a),t({isLoading:!1})}catch(c){if(console.error("Delete Envelope Failed:",c),r(c))t({isLoading:!1,pendingSync:!0,error:null});else{const u=e().envelopes.find(d=>d.id===a);t(u?d=>({envelopes:[...d.envelopes,u],transactions:[...d.transactions,...o],error:c.message,isLoading:!1}):{error:c.message,isLoading:!1})}}},reorderEnvelopes:async a=>{if(!a.length)return;const o=e(),c=new Map;a.forEach((p,m)=>{c.set(p,m)});const u=o.envelopes,d=u.map(p=>{if(!c.has(p.id))return p;const m=c.get(p.id);return p.orderIndex===m?p:{...p,orderIndex:m}}),h=d.filter((p,m)=>p!==u[m]);if(h.length){t({envelopes:d,isLoading:!0});try{const p=n();await Promise.all(h.map(m=>{const b=Nk(m);return Va.saveEnvelope(p,b)})),t({isLoading:!1})}catch(p){if(console.error("Reorder envelopes failed:",p),r(p))t({isLoading:!1,pendingSync:!0,error:null});else throw t({envelopes:u,isLoading:!1,error:p?.message??"Failed to reorder envelopes"}),p}}},updateEnvelope:async a=>{const o=Nk(a);t(c=>({envelopes:c.envelopes.map(u=>u.id===o.id?o:u),isLoading:!0}));try{const c=n();await Va.saveEnvelope(c,o),t({isLoading:!1})}catch(c){console.error("Update Envelope Failed:",c),r(c)?t({isLoading:!1,pendingSync:!0,error:null}):t({error:c.message,isLoading:!1})}},renameEnvelope:async(a,o)=>{t(c=>({envelopes:c.envelopes.map(u=>u.id===a?{...u,name:o}:u),isLoading:!0}));try{t({isLoading:!1})}catch(c){console.error("Rename Envelope Failed:",c),t({error:c.message,isLoading:!1})}}}},lx=t=>Oa(Mt,"users",t,"distributionTemplates"),mi={subscribeToDistributionTemplates:(t,e)=>{const n=oa(lx(t),fp("lastUsed","desc"));return gc(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=oa(lx(t),fp("lastUsed","desc"));return(await Cd(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await fy(lx(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=_n(Mt,"users",t,"distributionTemplates",e.id);return await Ho(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=_n(Mt,"users",t,"distributionTemplates",e);return await Yp(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=_n(Mt,"users",t,"distributionTemplates",e);await Id(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Pee=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>({saveTemplate:async(i,a,o)=>{console.log(" saveTemplate called with:",{name:i,distributions:a,note:o});try{const c=n(),u={id:`temp-${Date.now()}`,userId:c,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const d=mi.createDistributionTemplate(u),h=new Promise((m,b)=>setTimeout(()=>b(new Error("Firebase timeout - likely offline")),5e3)),p=await Promise.race([d,h]);console.log(" Firebase template save succeeded (online mode):",p),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",p),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(d){throw console.log(" Firebase template save failed or timed out:",d.message),d}}catch(c){console.error(" Failed to save template to Firebase, saving locally:",c),console.log(" Error details:",{name:c?.name||"Unknown",message:c?.message||"Unknown",code:c?.code||"Unknown",isNetworkError:r(c)});const u=n(),d={id:`local-${Date.now()}`,userId:u,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Saving template locally (offline):",d),t(h=>({distributionTemplates:[...h.distributionTemplates,d],pendingSync:!0})),console.log(" Template saved locally as fallback:",d),console.log(" Store now has templates:",e().distributionTemplates.length)}},updateTemplate:async i=>{try{const a=n();await mi.updateDistributionTemplate(a,i.id,{name:i.name,note:i.note,distributions:i.distributions,lastUsed:i.lastUsed}),t(o=>({distributionTemplates:o.distributionTemplates.map(c=>c.id===i.id?i:c)})),console.log(" Template updated in Firebase:",i.id)}catch(a){throw console.error(" Failed to update template in Firebase:",a),a}},deleteTemplate:async i=>{try{const a=n();await mi.deleteDistributionTemplate(a,i),t(o=>({distributionTemplates:o.distributionTemplates.filter(c=>c.id!==i)})),console.log(" Template deleted from Firebase:",i)}catch(a){throw console.error(" Failed to delete template from Firebase:",a),a}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const i=e().distributionTemplates,a=e().envelopes,o=new Set(a.map(u=>u.id));let c=0;for(const u of i){const d={...u.distributions},h={};for(const[p,m]of Object.entries(u.distributions))o.has(p)&&(h[p]=m);if(Object.keys(h).length===0){console.log(` Deleting orphaned template: ${u.name}`);const p=n();await mi.deleteDistributionTemplate(p,u.id),c++}else if(JSON.stringify(h)!==JSON.stringify(d)){console.log(` Updating template ${u.name} - removed orphaned envelope references`);const p=n();await mi.updateDistributionTemplate(p,u.id,{distributions:h}),c++}}c>0?console.log(` Cleaned up ${c} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(i,a)=>{console.log(` Updating template references: ${i}  ${a}`);const o=e().distributionTemplates;let c=0;for(const u of o)if(u.distributions[i]!==void 0){const d={...u.distributions};d[a]=d[i],delete d[i],console.log(` Updating template: ${u.name}`);const h=n();await mi.updateDistributionTemplate(h,u.id,{distributions:d}),c++}c>0&&console.log(` Updated ${c} templates with new envelope reference`)},removeEnvelopeFromTemplates:async i=>{console.log(` Removing envelope ${i} from all templates`);const a=e().distributionTemplates;let o=0,c=0;for(const u of a)if(u.distributions[i]!==void 0){const d={...u.distributions};if(delete d[i],Object.keys(d).length===0){console.log(` Deleting template ${u.name} - no envelopes left`);const h=n();await mi.deleteDistributionTemplate(h,u.id),c++}else{console.log(` Removing envelope from template: ${u.name}`);const h=n();await mi.updateDistributionTemplate(h,u.id,{distributions:d}),o++}}(o>0||c>0)&&console.log(` Updated ${o} templates, deleted ${c} empty templates`)}}),cx=t=>Oa(Mt,"users",t,"appSettings"),As={subscribeToAppSettings:(t,e)=>{const n=oa(cx(t),Dk(1));return gc(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=oa(cx(t),Dk(1)),n=await Cd(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await fy(cx(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=_n(Mt,"users",t,"appSettings",e.id);return await Ho(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=_n(Mt,"users",t,"appSettings",e);return await Yp(r,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=_n(Mt,"users",t,"appSettings",e);await Id(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},o5=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async r=>{const i=e();if(!i.appSettings){try{await o5({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const a=e();if(a.appSettings){const o={...a.appSettings,...r};t({appSettings:o});const c=n();await As.updateAppSettings(c,a.appSettings.id,r),console.log(" App settings updated successfully")}}catch(a){console.error(" Failed to initialize/update settings:",a)}return}try{t(o=>({appSettings:{...o.appSettings,...r}}));const a=n();await As.updateAppSettings(a,i.appSettings.id,r),console.log(" App settings updated successfully")}catch(a){throw console.error(" Failed to update app settings:",a),t(o=>({appSettings:o.appSettings})),a}},initializeAppSettings:async()=>{try{const i={userId:n(),theme:"system",enableMoveableReorder:!1},a=await As.createAppSettings(i);t({appSettings:a}),console.log(" App settings initialized successfully")}catch(r){console.error(" Failed to initialize app settings:",r);const i=n();t({appSettings:{id:"local-settings",userId:i,theme:"system",enableMoveableReorder:!1}})}}});class Er{static instance;static getInstance(){return Er.instance||(Er.instance=new Er),Er.instance}async getMonthlyBudget(e,n){try{const r=_n(Mt,"monthlyBudgets",`${e}_${n}`),i=await Iee(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:a.createdAt.toDate().toISOString(),updatedAt:a.updatedAt.toDate().toISOString()}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const n=ft.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await Ho(_n(Mt,"monthlyBudgets",r),i),{...e,id:r,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const r=oa(Oa(Mt,"incomeSources"),Oo("userId","==",e),Oo("month","==",n));return(await Cd(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(e){try{const n=ft.now(),r=_n(Oa(Mt,"incomeSources")),i={id:r.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await Ho(r,i),{...e,frequency:e.frequency||"monthly",id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const r=oa(Oa(Mt,"envelopeAllocations"),Oo("userId","==",e),Oo("month","==",n));return(await Cd(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(e){try{const n=ft.now(),r=_n(Oa(Mt,"envelopeAllocations")),i={id:r.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await Ho(r,i),{...e,id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,r){try{const i=await this.getIncomeSources(e,n);for(const d of i)await this.createIncomeSource({...d,month:r});const a=await this.getEnvelopeAllocations(e,n);for(const d of a)await this.createEnvelopeAllocation({...d,month:r});const o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:e,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e){try{const n=_n(Mt,"incomeSources",e);await Id(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(e,n){try{const r=_n(Mt,"incomeSources",e),i={...n,updatedAt:ft.now()};await Ho(r,i,{merge:!0})}catch(r){throw console.error("Error updating income source:",r),r}}async deleteEnvelopeAllocation(e){try{const n=_n(Mt,"envelopeAllocations",e);await Id(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(e,n){try{const r=_n(Mt,"envelopeAllocations",e),i={...n,updatedAt:ft.now()};await Ho(r,i,{merge:!0})}catch(r){throw console.error("Error updating envelope allocation:",r),r}}async clearMonthData(e,n){try{const[r,i]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),a=r.map(c=>this.deleteIncomeSource(c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,n){try{const r=await this.getIncomeSources(e,n),i=await this.getEnvelopeAllocations(e,n),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,n,r){const i=_n(Mt,"monthlyBudgets",`${e}_${n}`);return gc(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(e,n,r){const i=oa(Oa(Mt,"incomeSources"),Oo("userId","==",e),Oo("month","==",n));return gc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const d=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return d-h});r(o)})}subscribeToEnvelopeAllocations(e,n,r){const i=oa(Oa(Mt,"envelopeAllocations"),Oo("userId","==",e),Oo("month","==",n));return gc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const Oee=t=>t?{id:t.id,userId:t.userId,month:t.month,totalIncome:parseFloat(t.totalIncome),availableToBudget:parseFloat(t.availableToBudget),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}:null,Vee=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),jee=t=>({id:t.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:parseFloat(t.budgetedAmount),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),ux=(t,e,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const r=Er.getInstance(),i=r.subscribeToMonthlyBudget(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Monthly budget updated",c?"found":"null");const d=Oee(c);t.setState({monthlyBudget:d})}}),a=r.subscribeToIncomeSources(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){const d=c.map(Vee),h=new Set,p=d.filter(m=>h.has(m.id)?!1:(h.add(m.id),!0));t.setState({incomeSources:p})}}),o=r.subscribeToEnvelopeAllocations(e,n,c=>{const u=t.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Envelope allocations updated",c.length);const d=c.map(jee);t.setState({envelopeAllocations:d})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:i,incomeSources:a,envelopeAllocations:o},console.log(" Monthly budget real-time subscriptions active for month:",n)},Mk=()=>{if(window.__monthlyBudgetUnsubscribers){const t=window.__monthlyBudgetUnsubscribers;t.monthlyBudget&&t.monthlyBudget(),t.incomeSources&&t.incomeSources(),t.envelopeAllocations&&t.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},zee=t=>{const{useMonthlyBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});let o=null;e.subscribe(u=>{if(o!==null&&u.currentMonth!==o){console.log(" Month changed from",o,"to",u.currentMonth),Mk();const d=n.getState();d.isAuthenticated&&d.currentUser&&ux(e,r(),u.currentMonth)}o=u.currentMonth});const c=n.getState();if(c.isAuthenticated&&c.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const u=e.getState().currentMonth;ux(e,r(),u)}n.subscribe(u=>{if(u.isAuthenticated&&u.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const d=e.getState().currentMonth;ux(e,r(),d)}else!u.isAuthenticated&&!u.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),Mk(),e.getState().handleUserLogout())})},Lee=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},Ts=()=>{const t=Hi.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},Bee=Ts,Fee=async(t,e,n)=>{const{transactions:r,addTransaction:i,deleteTransaction:a}=Zn.getState(),o="Monthly Budget Allocation",[c,u]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:t,budgetedAmount:e,month:n,totalTransactions:r.length});const d=r.filter(p=>{if(p.envelopeId!==t||p.description!==o)return!1;try{let m;if(typeof p.date=="string")m=new Date(p.date);else if(p.date?.toDate&&typeof p.date.toDate=="function")m=p.date.toDate();else return!1;return m.getFullYear()===c&&m.getMonth()+1===u}catch{return!1}});console.log(" Found existing transactions:",d.length);for(const p of d)console.log(" Deleting old allocation transaction:",p.id,"amount:",p.amount),await a(p.id);const h=new ei(e.toString()||"0");if(h.gt(0)){console.log(" Creating new allocation transaction with amount",h.toNumber());const p=new Date(c,u-1,2).toISOString();await i({description:o,amount:h.toNumber(),envelopeId:t,date:p,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},pa=M0()(xE((t,e)=>({currentMonth:Lee(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{t({currentMonth:n,isLoading:!0}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{const n=Ts(),r=e().currentMonth,i=e();i.incomeSources.length>0||i.envelopeAllocations.length>0?console.log(" Using cached monthly budget data, fetching updates in background..."):(console.log(" No cached monthly budget data, fetching from Firebase..."),t({isLoading:!0,error:null}));try{const o=Er.getInstance(),c=new Promise((m,b)=>{setTimeout(()=>b(new Error("Firebase query timeout")),5e3)}),u=Promise.all([o.getMonthlyBudget(n,r),o.getIncomeSources(n,r),o.getEnvelopeAllocations(n,r)]),[d,h,p]=await Promise.race([u,c]);t({monthlyBudget:d,incomeSources:h,envelopeAllocations:p,isLoading:!1}),console.log(" Monthly budget data fetched from Firebase"),await e().processMonthlyPiggybankContributions(r)}catch(o){console.error(" Firebase fetch failed:",o);const c=e();c.incomeSources.length>0||c.envelopeAllocations.length>0?(console.log(" Using cached monthly budget data due to fetch error (likely offline)"),t({isLoading:!1,error:null})):(console.error(" No cached monthly budget data available"),t({error:o instanceof Error?o.message:"Failed to fetch monthly data",isLoading:!1}))}}catch(n){console.error(" Critical error in fetchMonthlyData:",n),t({isLoading:!1,error:"Failed to load budget data"})}},createIncomeSource:async n=>{try{const r=Ts(),i=e().currentMonth,a=Er.getInstance();await a.createIncomeSource({...n,userId:r,month:i});const o=await a.getIncomeSources(r,i);t({incomeSources:o})}catch(r){throw console.error("Error creating income source:",r),r}},updateIncomeSource:async(n,r)=>{try{const i={updatedAt:ft.now()};r.name!==void 0&&(i.name=r.name),r.amount!==void 0&&(i.amount=r.amount.toString()),r.frequency!==void 0&&(i.frequency=r.frequency),r.category!==void 0&&(i.category=r.category);const a=_n(Mt,"incomeSources",n);await Yp(a,i);const o=Er.getInstance(),c=Ts(),u=e().currentMonth,d=await o.getIncomeSources(c,u);t({incomeSources:d})}catch(i){throw console.error("Error updating income source:",i),i}},deleteIncomeSource:async n=>{t(i=>({incomeSources:i.incomeSources.filter(a=>a.id!==n)})),Er.getInstance().deleteIncomeSource(n).catch(i=>{console.error("Error deleting income source from Firebase:",i)})},restoreIncomeSource:async(n,r)=>{try{t(i=>{const a=[...i.incomeSources];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{incomeSources:a}}),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring income source:",i),i}},createEnvelopeAllocation:async n=>{try{const r=Ts(),i=e().currentMonth,a=Er.getInstance();await a.createEnvelopeAllocation({...n,userId:r,month:i});const o=await a.getEnvelopeAllocations(r,i);t({envelopeAllocations:o})}catch(r){throw console.error("Error creating envelope allocation:",r),r}},updateEnvelopeAllocation:async(n,r)=>{try{const i=Ts(),a=e().currentMonth,o=Er.getInstance(),c={};r.envelopeId!==void 0&&(c.envelopeId=r.envelopeId),r.budgetedAmount!==void 0&&(c.budgetedAmount=r.budgetedAmount.toString()),await o.updateEnvelopeAllocation(n,c);const u=await o.getEnvelopeAllocations(i,a);t({envelopeAllocations:u})}catch(i){throw console.error("Error updating envelope allocation:",i),i}},deleteEnvelopeAllocation:async n=>{t(i=>({envelopeAllocations:i.envelopeAllocations.filter(a=>a.id!==n)})),Er.getInstance().deleteEnvelopeAllocation(n).catch(i=>{console.error("Error deleting envelope allocation from Firebase:",i)})},restoreEnvelopeAllocation:async(n,r)=>{try{t(i=>{const a=[...i.envelopeAllocations];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{envelopeAllocations:a}}),await e().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring envelope allocation:",i),i}},setEnvelopeAllocation:async(n,r)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:r});const i=e().envelopeAllocations.find(o=>o.envelopeId===n);console.log(" Existing allocation:",i),i?(console.log(" Updating existing allocation..."),await e().updateEnvelopeAllocation(i.id,{budgetedAmount:r}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const a=e().currentMonth;await Fee(n,r,a),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await e().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(i){throw console.error(" Error setting envelope allocation:",i),console.error("Error details:",i instanceof Error?i.message:i),i}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=Ts(),r=e().currentMonth,[i,a]=r.split("-").map(Number);let o=i,c=a-1;c<1&&(o=i-1,c=12);const u=`${o}-${c.toString().padStart(2,"0")}`,d=Er.getInstance(),[h,p]=await Promise.all([d.getIncomeSources(n,u),d.getEnvelopeAllocations(n,u)]);for(const m of h)await e().createIncomeSource({name:m.name,amount:m.amount});for(const m of p)await e().setEnvelopeAllocation(m.envelopeId,m.budgetedAmount);await e().processMonthlyPiggybankContributions(r),await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},processMonthlyPiggybankContributions:async n=>{try{console.log(" Processing piggybank contributions for month:",n);const{envelopes:r,transactions:i,addTransaction:a}=Zn.getState(),o=new Date,c=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(n>c){console.log(`Skipping piggybank contributions for ${n} - future month beyond ${c}`);return}const u=r.filter(p=>p.isPiggybank&&p.isActive);if(console.log(`Found ${u.length} active piggybanks`),u.length===0){console.log("No piggybanks to process");return}const[d,h]=n.split("-").map(Number);for(const p of u){const m=p.piggybankConfig?.monthlyContribution||0;if(p.piggybankConfig?.paused||!1){console.log(`Skipping ${p.name} - contributions paused`);continue}if(m<=0){console.log(`Skipping ${p.name} - no contribution set`);continue}if(p.createdAt){const S=new Date(p.createdAt),A=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;if(n<A){console.log(`Skipping ${p.name} - month ${n} is before creation month ${A}`);continue}}if(i.find(S=>S.envelopeId===p.id&&S.isAutomatic===!0&&S.month===n&&S.type==="Income")){console.log(`Auto-contribution already exists for ${p.name} in ${n}`);continue}console.log(`Creating auto-contribution for ${p.name}: $${m}`);const E=new Date(d,h-1,1,12,0,0);await a({amount:m,description:`Monthly contribution to ${p.name}`,date:E.toISOString(),envelopeId:p.id,type:"Income",reconciled:!1,isAutomatic:!0}),console.log(` Created auto-contribution for ${p.name}`)}await e().refreshAvailableToBudget()}catch(r){throw console.error("Error processing piggybank contributions:",r),r}},calculateAvailableToBudget:()=>{const n=e(),r=n.incomeSources.reduce((a,o)=>a+o.amount,0),i=n.envelopeAllocations.reduce((a,o)=>a+o.budgetedAmount,0);return r-i},refreshAvailableToBudget:async()=>{try{const n=e(),r=Ts(),i=n.currentMonth,a=n.incomeSources.reduce((h,p)=>h+p.amount,0),o=n.envelopeAllocations.reduce((h,p)=>h+p.budgetedAmount,0),c=a-o,u=Er.getInstance(),d=n.monthlyBudget;if(d){const h={...d,availableToBudget:c,totalIncome:a};await u.createOrUpdateMonthlyBudget(h),t({monthlyBudget:h})}else{const h=await u.createOrUpdateMonthlyBudget({userId:r,month:i,totalIncome:a,availableToBudget:c});t({monthlyBudget:h})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,r)=>{t({incomeSources:n,envelopeAllocations:r,isLoading:!1})},clearMonthData:async()=>{try{const n=Ts(),r=e().currentMonth,i=Er.getInstance(),{transactions:a,deleteTransaction:o}=Zn.getState(),c="Monthly Budget Allocation",[u,d]=r.split("-").map(Number),h=a.filter(p=>{if(p.description!==c)return!1;try{const m=new Date(p.date);return m.getFullYear()===u&&m.getMonth()+1===d}catch{return!1}});for(const p of h)await o(p.id);await i.clearMonthData(n,r),t({incomeSources:[],envelopeAllocations:[]}),await e().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{t({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",version:1,partialize:t=>({incomeSources:t.incomeSources,envelopeAllocations:t.envelopeAllocations,monthlyBudget:t.monthlyBudget})}));zee({useMonthlyBudgetStore:pa,useAuthStore:Hi,getCurrentUserId:Bee});const Uee=({set:t,get:e,getCurrentUserId:n,isNetworkError:r})=>({addTransaction:async i=>{const a=`temp-${Date.now()}-${Math.random()}`,o=n(),c=new Date(i.date),u=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;console.log(" Month calculation in addTransaction:",{originalDate:i.date,dateObj:c,calculatedMonth:u,currentMonth:pa.getState().currentMonth});const d={...i,id:a,userId:o,month:u};if(t(h=>({transactions:[...h.transactions,d],isLoading:!0})),i.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${i.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const h=kee(d,o),p=await Fa.addTransaction(h);console.log(` Replacing temp transaction ${a} with Firebase transaction:`,p);const m=CS(p);t(b=>({transactions:b.transactions.map(_=>_.id===a?m:_),isLoading:!1,pendingSync:!1}))}catch(h){console.error("Add Transaction Failed:",h),r(h)?t({isLoading:!1,pendingSync:!0,error:null}):t(p=>({transactions:p.transactions.filter(m=>m.id!==a),error:h.message,isLoading:!1}))}},deleteTransaction:async i=>{const a=e().transactions.find(c=>c.id===i);if(!a)return;const o=[i];if(a.transferId){const c=e().transactions.find(u=>u.transferId===a.transferId&&u.id!==i);c&&c.id&&o.push(c.id)}t(c=>({transactions:c.transactions.filter(u=>u.id&&!o.includes(u.id)),isLoading:!0}));try{const c=n(),u=o.filter(d=>!d.startsWith("temp-"));for(const d of u)console.log(` About to delete transaction ID: ${d}`),await Fa.deleteTransaction(c,d),console.log(` Deleted transaction ID: ${d}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(c){if(console.error("Delete Transaction Failed:",c),r(c))t({isLoading:!1,pendingSync:!0,error:null});else{const u=o.map(d=>e().transactions.find(h=>h.id===d)||a).filter(Boolean);t(d=>({transactions:[...d.transactions,...u],error:c.message,isLoading:!1}))}}},updateTransaction:async i=>{console.log(" updateTransaction called:",i),t(a=>({transactions:a.transactions.map(o=>o.id===i.id?i:o),isLoading:!0}));try{const a=n(),o=Fa.updateTransaction(a,i.id,Nee(i)),c=new Promise((u,d)=>setTimeout(()=>d(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([o,c]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(a){console.error("Update Transaction Failed:",a),console.log(" Error details:",{name:a?.name||"Unknown",message:a?.message||"Unknown",code:a?.code||"Unknown",isNetworkError:r(a)}),r(a)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:a.message,isLoading:!1})}},restoreTransaction:async i=>{t(a=>({transactions:[...a.transactions,i],isLoading:!0}));try{t({isLoading:!1})}catch(a){console.error("Restore Transaction Failed:",a),t({error:a.message,isLoading:!1})}}}),Gee=({set:t,get:e,getCurrentUserId:n,isNetworkError:r,loadFallbackData:i,checkOnlineStatus:a,clearUserData:o})=>{const c=async()=>{try{const E=e(),S=n();if(E.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",S),E.envelopes.length>0||E.transactions.length>0?console.log(" Using cached envelope data, fetching updates in background..."):(console.log(" No cached envelope data, fetching from Firebase..."),t({isLoading:!0,error:null}));try{const D=new Promise((O,L)=>{setTimeout(()=>L(new Error("Firebase query timeout")),5e3)}),R=Promise.all([Va.getAllEnvelopes(S).catch(O=>(console.error(" Failed to fetch envelopes:",O),[])),Fa.getAllTransactions(S).catch(O=>(console.error(" Failed to fetch transactions:",O),[])),mi.getAllDistributionTemplates(S).catch(O=>(console.error(" Failed to fetch templates:",O),[])),As.getAppSettings(S).catch(O=>(console.error(" Failed to fetch settings:",O),null))]);let P,z,M,T;[P,z,M,T]=await Promise.race([R,D]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:P?.length||0,transactions:z?.length||0,templates:M?.length||0,settings:T?"found":"null"}),e().markOnlineFromFirebaseSuccess();const C=(P?.length||0)>0||(z?.length||0)>0||(M?.length||0)>0;let k=null;C||(console.log(" No data from Firebase, loading fallback data..."),k=await i(),k&&(console.log(" Using fallback data for initialization"),P=k.envelopes||[],z=k.transactions||[],M=k.distributionTemplates||[],T=k.appSettings||null)),t(O=>{const L=K=>K.map(ne=>({...ne,date:ne.date&&typeof ne.date=="object"&&ne.date.toDate?ne.date.toDate().toISOString():ne.date,type:ne.type==="income"?"Income":ne.type==="expense"?"Expense":ne.type==="transfer"?"Transfer":ne.type,amount:typeof ne.amount=="string"?parseFloat(ne.amount):ne.amount})),F=K=>({id:K.id,name:K.name,currentBalance:K.currentBalance||0,lastUpdated:K.lastUpdated,isActive:K.isActive??!0,orderIndex:K.orderIndex??0,createdAt:K.createdAt,isPiggybank:K.isPiggybank,piggybankConfig:K.piggybankConfig}),j=P.filter(K=>!("orderIndex"in K));j.length>0&&(console.log(` Migrating ${j.length} envelopes to add orderIndex...`),j.forEach((K,ne)=>{const ue=ne,de=n();Va.saveEnvelope(de,{...K,orderIndex:ue}).then(()=>console.log(` Migrated envelope ${K.name} with orderIndex ${ue}`)).catch(ge=>console.warn(`Failed to migrate envelope ${K.id}:`,ge))}));const X=P.map(F),$=new Set([...O.envelopes.map(K=>K.id),...P.map(K=>K.id)]),H=O.envelopes.filter(K=>K.id&&!P.some(ne=>ne.id===K.id)&&!K.id.startsWith("temp-")),Y=O.transactions.filter(K=>K.id&&!z.some(ne=>ne.id===K.id)&&(!K.id.startsWith("temp-")||$.has(K.envelopeId)));let te,ce=[];navigator.onLine?(te=M,console.log(` Online mode: Using Firebase templates only (${te.length} templates)`)):(ce=O.distributionTemplates.filter(K=>K.id&&!M.some(ne=>ne.id===K.id)),te=M.concat(ce),console.log(` Offline mode: Merged ${M.length} Firebase + ${ce.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",O.envelopes.map(K=>({id:K.id,name:K.name}))),console.log("  Firebase envelopes:",P.map(K=>({id:K.id,name:K.name}))),console.log("  Store transactions:",O.transactions.map(K=>({id:K.id,envelopeId:K.envelopeId,description:K.description}))),console.log("  Firebase transactions:",z.map(K=>({id:K.id,envelopeId:K.envelopeId,description:K.description}))),console.log("  Store templates:",O.distributionTemplates.map(K=>({id:K.id,name:K.name}))),console.log("  Firebase templates:",M.map(K=>({id:K.id,name:K.name}))),console.log("  Local-only envelopes:",H.map(K=>({id:K.id,name:K.name}))),console.log("  Local-only transactions:",Y.map(K=>({id:K.id,envelopeId:K.envelopeId,description:K.description}))),console.log("  Local-only templates:",ce.map(K=>({id:K.id,name:K.name}))),console.log("  Total merged templates:",te.length,te.map(K=>({id:K.id,name:K.name})));const pe=X.concat(H),B=L(z).concat(Y);let Q=T;if(T&&"isDarkMode"in T&&!("theme"in T)){const K=T;if(Q={...K,theme:K.isDarkMode?"dark":"light"},delete Q.isDarkMode,Q&&Q.id){const ne=n();As.updateAppSettings(ne,Q.id,{theme:Q.theme}).catch(ue=>console.warn("Failed to migrate app settings:",ue))}}return{envelopes:pe,transactions:B,distributionTemplates:te,appSettings:Q,isLoading:!1,pendingSync:!1}})}catch(D){console.error(" Firebase fetch failed:",D);const R=e(),P=R.envelopes.length>0||R.transactions.length>0;D.message==="Firebase query timeout"||r(D)?P?(console.log(" Using cached envelope data due to timeout/network error (likely offline)"),t({isLoading:!1,pendingSync:!0})):(console.error(" No cached envelope data available"),t({isLoading:!1,pendingSync:!0,error:"Unable to load data. Please check your connection."})):t({error:D.message,isLoading:!1})}}catch(E){console.error(" Critical error in fetchData:",E),t({isLoading:!1,error:"Failed to load envelope data"})}},u=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(S){console.error("Firebase reset during sync failed:",S)}return}t({pendingSync:!0});try{await e().fetchData()}catch(S){console.error("Manual sync failed:",S)}},d=async()=>{const E=await a();t({isOnline:E})},h=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},p=()=>{o()},m=async E=>{try{if(!E.envelopes||!E.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const S=n();console.log(` Importing data for user: ${S}`),console.log(" Clearing existing Firebase data before import..."),await b(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const A=E.envelopes.map(T=>({id:T.id||`imported-${Date.now()}-${Math.random()}`,name:T.name,currentBalance:T.currentBalance||T.budget||0,lastUpdated:new Date().toISOString(),isActive:T.isActive??!0,orderIndex:T.orderIndex??0,userId:S})),D=E.transactions.map(T=>({...T,id:T.id||`imported-${Date.now()}-${Math.random()}`,userId:S,date:T.date,amount:typeof T.amount=="number"?T.amount:parseFloat(T.amount)||0,type:T.type,reconciled:T.reconciled??!1})),R=(E.distributionTemplates||[]).map(T=>({...T,id:T.id||`imported-${Date.now()}-${Math.random()}`,userId:S})),P=E.appSettings?{...E.appSettings,id:E.appSettings.id||`settings-${S}`,userId:S}:null;console.log(` Importing: ${A.length} envelopes, ${D.length} transactions, ${R.length} templates`),t({envelopes:A,transactions:D,distributionTemplates:R,appSettings:P,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const T of A)try{await Va.saveEnvelope(S,T),console.log(` Synced envelope: ${T.name}`)}catch(C){console.error(` Failed to sync envelope ${T.name}:`,C)}for(const T of D)try{const C={...T,amount:T.amount.toString(),type:T.type.toLowerCase(),date:ft.fromDate(new Date(T.date))};await Fa.addTransaction(C),console.log(` Synced transaction: ${T.description}`)}catch(C){console.error(` Failed to sync transaction ${T.description}:`,C)}for(const T of R)try{await mi.createDistributionTemplate(T),console.log(` Synced template: ${T.name}`)}catch(C){console.error(` Failed to sync template ${T.name}:`,C)}if(P)try{await As.createAppSettings(P),console.log(" Synced app settings")}catch(T){console.error(" Failed to sync app settings:",T)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(T){console.error(" Error syncing to Firebase:",T),t({pendingSync:!0})}const z=R.length,M=P?"Settings imported.":"";return{success:!0,message:`Imported and synced ${A.length} envelopes, ${D.length} transactions${z>0?`, ${z} templates`:""} to Firebase.${M?` ${M}`:""}`}}catch(S){return console.error("Import failed:",S),{success:!1,message:"Failed to import data. Check file format."}}},b=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const E=n();console.log(" Querying Firebase for all data to delete...");const[S,A,D,R]=await Promise.all([Va.getAllEnvelopes(E).catch(T=>(console.error(" Failed to fetch envelopes for reset:",T),[])),Fa.getAllTransactions(E).catch(T=>(console.error(" Failed to fetch transactions for reset:",T),[])),mi.getAllDistributionTemplates(E).catch(T=>(console.error(" Failed to fetch templates for reset:",T),[])),As.getAppSettings(E).catch(T=>(console.error(" Failed to fetch settings for reset:",T),null))]);console.log(` Found in Firebase: ${S.length} envelopes, ${A.length} transactions, ${D.length} templates`);let P=0;for(const T of S)if(T.id)try{await Va.deleteEnvelope(E,T.id),P++,console.log(` Deleted envelope: ${T.name||T.id}`)}catch(C){console.error(` Failed to delete envelope ${T.id}:`,C)}let z=0;for(const T of A)if(T.id)try{await Fa.deleteTransaction(E,T.id),z++,console.log(` Deleted transaction: ${T.id}`)}catch(C){console.error(` Failed to delete transaction ${T.id}:`,C)}let M=0;for(const T of D)if(T.id)try{await mi.deleteDistributionTemplate(E,T.id),M++,console.log(` Deleted template: ${T.name||T.id}`)}catch(C){console.error(` Failed to delete template ${T.id}:`,C)}if(R?.id)try{await As.deleteAppSettings(E,R.id),console.log(" Deleted app settings")}catch(T){console.error(" Failed to delete app settings:",T)}console.log(` Firebase reset complete: Deleted ${P} envelopes, ${z} transactions, ${M} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(E){throw console.error(" Error during Firebase reset:",E),t({isLoading:!1,pendingSync:!0}),E}};return{fetchData:c,syncData:u,updateOnlineStatus:d,markOnlineFromFirebaseSuccess:h,handleUserLogout:p,importData:m,performFirebaseReset:b,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(S){console.error(" Firebase reset failed, will retry on next sync:",S),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},qee=t=>CS(t),Hee=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig}),$ee=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),Pk=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=Va.subscribeToEnvelopes(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Envelopes updated",o.length);const u=o.map(Hee);t.setState({envelopes:u})}}),r=Fa.subscribeToTransactions(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Transactions updated",o.length);const u=o.map(qee);t.setState({transactions:u})}}),i=mi.subscribeToDistributionTemplates(e,o=>{const c=t.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Templates updated from Firebase",o.length),console.log(" Firebase templates:",o.map(d=>({id:d.id,name:d.name})));const u=o.map($ee);console.log(" Setting store templates to:",u.map(d=>({id:d.id,name:d.name}))),t.setState({distributionTemplates:u})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),a=As.subscribeToAppSettings(e,o=>{const c=t.getState();c.isOnline&&!c.pendingSync&&!c.resetPending&&(console.log(" Real-time sync: Settings updated",o?"found":"null"),t.setState({appSettings:o}))});window.__firebaseUnsubscribers={envelopes:n,transactions:r,templates:i,settings:a},console.log(" Real-time subscriptions active - cross-device sync enabled")},Yee=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const c=e.getState();c.isOnline&&(c.pendingSync||c.resetPending)&&(console.log(" Auto-syncing pending operations..."),c.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const c=e.getState();if(!c.isOnline&&!c.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(c.pendingSync||c.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(u){console.log(" Periodic retry failed:",u),e.setState({testingConnectivity:!1})}}else c.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(c=>{!c.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=n.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),Pk(e,r())),n.subscribe(c=>{if(c.isAuthenticated&&c.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),Pk(e,r());else if(!c.isAuthenticated&&!c.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.envelopes&&u.envelopes(),u.transactions&&u.transactions(),u.templates&&u.templates(),u.settings&&u.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},Kee=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},ju=()=>{const{currentUser:t}=Hi.getState();if(!t)throw new Error("No authenticated user found");return t.id},Xee=()=>{console.log(" Clearing user data on logout"),Zn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},Ok=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,r={})=>{try{const i=new AbortController,a=setTimeout(()=>i.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:i.signal,...r}),clearTimeout(a),!0}catch(i){return console.log(` Connectivity test failed for ${n}:`,i instanceof Error?i.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),r=n.filter(a=>a.status==="fulfilled"&&a.value===!0).length,i=n.length;return r>0?(console.log(` Connectivity confirmed (${r}/${i} tests passed)`),!0):(console.log(` All connectivity tests failed (${i} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},qm=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",r=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||r==="undefined"&&n==="undefined")},Zn=M0()(xE((t,e)=>{const n=Mee({set:t,get:e,getCurrentUserId:ju,isNetworkError:qm}),r=Pee({set:t,get:e,getCurrentUserId:ju,isNetworkError:qm}),i=o5({set:t,get:e,getCurrentUserId:ju}),a=Uee({set:t,get:e,getCurrentUserId:ju,isNetworkError:qm}),o=Gee({set:t,get:e,getCurrentUserId:ju,isNetworkError:qm,loadFallbackData:Kee,checkOnlineStatus:Ok,clearUserData:Xee});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addEnvelope:async c=>(await n.createEnvelope(c)).id,updateEnvelope:n.updateEnvelope,reorderEnvelopes:n.reorderEnvelopes,deleteEnvelope:n.deleteEnvelope,renameEnvelope:n.renameEnvelope,transferFunds:n.transferFunds,addTransaction:a.addTransaction,updateTransaction:a.updateTransaction,deleteTransaction:a.deleteTransaction,restoreTransaction:a.restoreTransaction,addDistributionTemplate:r.saveTemplate,updateDistributionTemplate:r.updateTemplate,deleteDistributionTemplate:r.deleteTemplate,removeEnvelopeFromTemplates:r.removeEnvelopeFromTemplates,cleanupOrphanedTemplates:r.cleanupOrphanedTemplates,updateAppSettings:i.updateAppSettings,initializeAppSettings:i.initializeAppSettings,fetchData:o.fetchData,syncData:o.syncData,updateOnlineStatus:o.updateOnlineStatus,markOnlineFromFirebaseSuccess:o.markOnlineFromFirebaseSuccess,handleUserLogout:o.handleUserLogout,importData:o.importData,performFirebaseReset:o.performFirebaseReset,resetData:o.resetData,getEnvelopeBalance:c=>{const u=e();if(!u.envelopes.find(S=>S.id===c))return console.log(` getEnvelopeBalance: Envelope ${c} not found`),new ei(0);const h=u.transactions.filter(S=>S.envelopeId===c),p=h.filter(S=>S.type==="Expense"),m=h.filter(S=>S.type==="Income"),b=p.reduce((S,A)=>S.plus(new ei(A.amount||0)),new ei(0));return m.reduce((S,A)=>S.plus(new ei(A.amount||0)),new ei(0)).minus(b)},getTransactionsForMonth:c=>e().transactions.filter(d=>d.month===c),resetAllData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},testConnectivity:async()=>{console.log(" Testing connectivity"),await Ok()}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));Yee({useEnvelopeStore:Zn,useAuthStore:Hi,getCurrentUserId:ju});const Wee=({currentMonth:t,onMonthChange:e})=>{const[n,r]=t.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=n,h=r-1;h<1&&(d=n-1,h=12);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},c=()=>{let d=n,h=r+1;h>12&&(d=n+1,h=1);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return x.jsx("div",{className:"py-1.5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:x.jsx(Fz,{size:20})}),x.jsx("div",{className:"flex-1 text-center",children:x.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",n]})}),x.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:x.jsx(Ru,{size:20})})]})})},Qee=({amount:t,totalIncome:e,totalAllocated:n,isLoading:r=!1,variant:i="default"})=>{const a=e>0?n/e*100:0,o=t>0,c=Math.abs(t)<.01,u=t<0,d=c?100:Math.min(a,100),h=u?"bg-red-500":"bg-green-500",p=c,m=u,b=o,E=p?{icon:bv,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:m?{icon:LL,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:OL,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?x.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),x.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),x.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):x.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${E.bgColor} ${E.borderColor}`,children:[x.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex-shrink-0 text-center",children:[x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),x.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]})]}),i==="header"&&x.jsx("div",{className:"flex-1 flex justify-center items-center",children:c?x.jsx("img",{src:"/personal-budget-pwa/images/budget-balanced.png",alt:"Budget Balanced",className:"w-6 h-6"}):u?x.jsx("div",{className:"text-center",children:x.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):x.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:x.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${h}`,style:{width:`${d}%`}})})}),x.jsx("div",{className:"flex-shrink-0 text-center",children:o?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),x.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",t.toFixed(2)]})]}):c?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),x.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),x.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(t).toFixed(2)]})]})})]}),i!=="header"&&!p&&e>0&&x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx("span",{children:"Allocated"}),x.jsxs("span",{children:[a.toFixed(0),"% of income"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:x.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${m?"bg-red-500":b?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})}),x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[x.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),x.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),i!=="header"&&x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:x.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},Zee=()=>{const[t,e]=q.useState(!1),n=q.useRef(null),{currentUser:r,logout:i}=Hi(),{handleUserLogout:a}=Zn(),o=rs();q.useEffect(()=>{const d=h=>{n.current&&!n.current.contains(h.target)&&e(!1)};if(t)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[t]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return x.jsxs("div",{className:"relative",ref:n,children:[x.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[x.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),x.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),x.jsx(tN,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[x.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),x.jsxs("div",{className:"py-1",children:[x.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[x.jsx(nN,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),x.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[x.jsx(TL,{size:18}),"Log Out"]})]})]})]})},IS=({children:t,onDelete:e,threshold:n=-100})=>{const r=jU(),[i,a]=q.useState(!1),o=q.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const p=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),p<n||p<-50&&m<-500){const b=e();b===!1?r.start({x:0}):b instanceof Promise&&b.then(_=>{_===!1&&r.start({x:0})})}else r.start({x:0})};return x.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[x.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:x.jsx(Ym,{className:"text-white w-6 h-6"})}),x.jsx(Md.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:t})]})},l5=({message:t="Loading your budget...",showTimeout:e=!1})=>x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[x.jsx("div",{className:"mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx(oc,{size:48,className:"text-blue-500 animate-spin"}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx(ew,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),x.jsxs("div",{className:"text-center space-y-3",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),x.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),x.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),x.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),x.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),x.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),x.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&x.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:x.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),x.jsx("div",{className:"mt-8 w-full max-w-md",children:x.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),Hd=M0((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),Jee=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{createIncomeSource:i,updateIncomeSource:a}=pa(),{showToast:o}=Hd(),[c,u]=q.useState(""),[d,h]=q.useState(""),[p,m]=q.useState(!1);q.useEffect(()=>{if(!t)return;const _=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(_)},[t,n,r]);const b=async _=>{if(_.preventDefault(),!c.trim()||!d||parseFloat(d)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i({name:c.trim(),amount:parseFloat(d)}),o(`Added "${c.trim()}" as income source`,"success");else if(n==="edit"){if(!r){o("Error: No income source to edit","error");return}await a(r.id,{name:c.trim(),amount:parseFloat(d)}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(E){console.error("Error saving income source:",E),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return t?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),x.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),x.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),x.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),x.jsx("input",{type:"number",value:d,onChange:_=>h(_.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:p||!c.trim()||!d||parseFloat(d)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},ete=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[d,h]=q.useState(""),[p,m]=q.useState("confirm"),b=S=>{const[A,D]=S.split("-");return new Date(parseInt(A),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{p==="confirm"?m("type"):p==="type"&&d==="START FRESH"&&n()},E=()=>{m("confirm"),h(""),e()};return t?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[x.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),x.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),x.jsx("div",{className:"p-6 space-y-4",children:p==="confirm"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-start",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"ml-3",children:[x.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),x.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:x.jsxs("ul",{className:"space-y-1",children:[x.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),x.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),x.jsx("div",{className:"ml-3",children:x.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[x.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"text-center",children:[x.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",x.jsx("strong",{children:"START FRESH"})," to confirm:"]}),x.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),x.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{type:"button",onClick:E,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),x.jsx("button",{type:"button",onClick:_,disabled:u||p==="type"&&d!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":p==="confirm"?"Continue":"Start Fresh"})]})]})}):null},tte=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(tL,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),x.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(t)," to get started with ",i(t),"?"]}),x.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),x.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:x.jsx(mp,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"mt-4 flex space-x-3",children:[x.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),x.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},nte=({piggybank:t,balance:e,onNavigate:n})=>{const r=Zn(X=>X.updateEnvelope),i=Zn(X=>X.transactions),a=Zn(X=>X.updateTransaction),o=pa(X=>X.currentMonth),c=pa(X=>X.processMonthlyPiggybankContributions),u=Hd(X=>X.showToast),d=t.piggybankConfig?.targetAmount,h=t.piggybankConfig?.monthlyContribution||0,p=t.piggybankConfig?.color||"#3B82F6",m=t.piggybankConfig?.paused||!1,b=e.toNumber(),_=(X,$=1)=>{const H=X.replace("#",""),Y=parseInt(H,16),te=Y>>16&255,ce=Y>>8&255,pe=Y&255;return`rgba(${te}, ${ce}, ${pe}, ${$})`},E=`linear-gradient(135deg, ${_(p,.14)} 0%, ${_(p,.05)} 100%)`,S=_(p,.4),[A,D]=q.useState(!1),[R,P]=q.useState(h?h.toFixed(2):"0.00"),[z,M]=q.useState(!1),T=q.useRef(null),C=d&&d>0?Math.min(b/d*100,100):0,k=d&&b>=d;q.useEffect(()=>{A||P(h?h.toFixed(2):"0.00")},[h,A]);const O=X=>{X.stopPropagation(),!z&&(P(h?h.toFixed(2):"0.00"),D(!0),requestAnimationFrame(()=>{T.current?.focus(),T.current?.select()}))},L=()=>{D(!1),P(h?h.toFixed(2):"0.00")},F=async()=>{if(!A||z)return;const X=parseFloat(R);if(Number.isNaN(X)||X<0){u("Enter a valid contribution amount","error");return}if(X===h){D(!1);return}M(!0);try{const $={...t,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:X,targetAmount:t.piggybankConfig?.targetAmount,color:t.piggybankConfig?.color,icon:t.piggybankConfig?.icon,paused:t.piggybankConfig?.paused}};await r($);const H=i.find(Y=>Y.envelopeId===t.id&&Y.isAutomatic===!0&&Y.month===o&&Y.type==="Income");H&&H.id?H.amount!==X&&await a({...H,amount:X}):X>0&&!m&&await c(o),u("Monthly contribution updated","success"),P(X.toFixed(2)),D(!1)}catch($){console.error("Failed to update piggybank contribution",$),u("Failed to update contribution","error")}finally{M(!1)}},j=X=>{X.key==="Enter"?(X.preventDefault(),F()):X.key==="Escape"&&(X.preventDefault(),L())};return x.jsxs("div",{onClick:()=>n(t.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:E,borderColor:S},children:[x.jsxs("div",{className:"flex items-start justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${p}20`},children:x.jsx(Ph,{size:20,style:{color:p}})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),k&&x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",b.toFixed(2)]}),d&&x.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",d.toFixed(2)]})]})]}),d&&d>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C}%`,backgroundColor:p}})}),x.jsxs("div",{className:"flex justify-between items-center mt-1",children:[x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[C.toFixed(0),"% complete"]}),x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(d-b).toFixed(2)," to go"]}),x.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:_(p,.15),color:p},children:"Piggybank"})]})]}),x.jsx("div",{className:"mt-2",children:m?x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx(IL,{size:14,className:"text-orange-500"}),x.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[x.jsx(FL,{size:14,style:{color:p}}),A?x.jsxs("form",{onSubmit:X=>{X.preventDefault(),F()},className:"flex items-center gap-2",children:[x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{ref:T,type:"number",min:"0",step:"0.01",value:R,onChange:X=>P(X.target.value),onBlur:F,onKeyDown:j,disabled:z,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),z&&x.jsx(yL,{size:16,className:"animate-spin text-gray-400"})]}):x.jsxs("button",{type:"button",onClick:O,className:"font-medium text-gray-900 dark:text-white hover:underline focus:outline-none",children:["$",h.toFixed(2),"/month"]})]})})]})},Jf=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},rte=12,ite=(t,e,n)=>Math.min(Math.max(t,e),n),ate=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:p,setMoveableRef:m,isReorderingActive:b,activelyDraggingId:_,onItemDragStart:E,onMoveUp:S,onMoveDown:A,isFirst:D,isLast:R,isReorderUnlocked:P})=>{const z=!!t.isPiggybank,M=t.piggybankConfig?.color||"#3B82F6",T=z?`linear-gradient(135deg, ${Jf(M,.18)} 0%, ${Jf(M,.08)} 100%)`:void 0,C=z?Jf(M,.5):void 0,k=q.useRef(null),[O,L]=q.useState(!1),F=h.filter(B=>B.envelopeId===t.id&&B.month===p),j=F.filter(B=>B.type==="Expense"),X=F.filter(B=>B.type==="Income"),$=j.reduce((B,Q)=>B+(Q.amount||0),0),H=X.reduce((B,Q)=>B+(Q.amount||0),0),Y=Math.max(0,$/H*100),te=B=>{if(O||b){B.preventDefault(),B.stopPropagation();return}if(r===t.id){B.preventDefault(),B.stopPropagation();return}u(`/envelope/${t.id}`)};q.useEffect(()=>{_&&_!==t.id&&L(!1)},[_,t.id]),q.useEffect(()=>{_===t.id&&(L(!0),E(t.id))},[_,t.id,E]),q.useEffect(()=>{if(!_&&O){const B=setTimeout(()=>{L(!1)},300);return()=>clearTimeout(B)}},[_,O]);const ce=x.jsxs("div",{className:"flex items-center gap-2 w-full",children:[P&&x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("button",{onClick:B=>{B.stopPropagation(),S()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:x.jsx(qz,{size:18})}),x.jsx("button",{onClick:B=>{B.stopPropagation(),A()},disabled:R,className:`p-1 rounded transition-colors ${R?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:x.jsx(tN,{size:18})})]}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[z&&x.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:Jf(M,.4),backgroundColor:Jf(M,.15),color:M},children:x.jsx(Ph,{size:16})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),z&&x.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:M},children:"Piggybank"})]})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"flex items-center space-x-4",onPointerDown:B=>B.stopPropagation(),children:r===t.id?x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),x.jsx("form",{onSubmit:B=>{B.preventDefault(),c()},children:x.jsx("input",{ref:d,type:"number",value:a,onChange:B=>o(B.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):x.jsxs("div",{onClick:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},onTouchEnd:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),x.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),x.jsxs("div",{className:"text-right",children:[x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),x.jsxs("span",{className:`font-bold ${n.toNumber()<0||100-Y<=5?"text-red-500":Y>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",n.toNumber().toFixed(2)]})]})]}),e>0&&x.jsx("div",{className:"mt-3",onClick:B=>B.stopPropagation(),children:x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[x.jsx("span",{children:"Budget Used"}),x.jsxs("span",{children:[Y.toFixed(0),"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:x.jsx("div",{className:`h-full transition-all duration-300 ease-out ${n.toNumber()<0||100-Y<=5?"bg-red-500":Y>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-Y,2)}%`}})})]})})]})]}),pe=_===t.id;return x.jsx(Md.div,{layout:!pe,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:B=>{m(t.id)(B),k.current=B},onClick:te,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:T,borderColor:C,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${z?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:ce})},ste=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=Zn(),d=q.useCallback(Re=>Ue=>{Ue?Me.current[Re]=Ue:delete Me.current[Re]},[]),{currentMonth:h,fetchMonthlyData:p,incomeSources:m,envelopeAllocations:b,calculateAvailableToBudget:_,deleteIncomeSource:E,restoreIncomeSource:S,clearMonthData:A,copyFromPreviousMonth:D,setEnvelopeAllocation:R,isLoading:P}=pa(),{showToast:z}=Hd(),M=rs(),T=q.useCallback(async Re=>{if(!Re.length)return;const Ue=Re.map(Nt=>Nt.id);try{await u(Ue)}catch(Nt){console.error("Failed to persist envelope order:",Nt),z("Failed to save envelope order","error")}},[u,z]),[C,k]=q.useState(!1),[O,L]=q.useState("add"),[F,j]=q.useState(null),[X,$]=q.useState(!1),[H,Y]=q.useState(!1),[te,ce]=q.useState(!1),pe=q.useRef(null),[B,Q]=q.useState(!1),K=q.useRef(null),[ne,ue]=q.useState(!1),de=!ne||r||P,[ge,Te]=q.useState(null),[De,Ye]=q.useState(""),we=q.useRef(null),[Ie,ut]=q.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");q.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",Ie.toString())},[Ie]);const je=Re=>{const Ue=e.filter(ct=>ct.envelopeId===Re&&ct.month===h),Nt=Ue.filter(ct=>ct.type==="Expense"),nn=Ue.filter(ct=>ct.type==="Income"),Gr=Nt.reduce((ct,Dn)=>ct.plus(new ei(Dn.amount||0)),new ei(0));return nn.reduce((ct,Dn)=>ct.plus(new ei(Dn.amount||0)),new ei(0)).minus(Gr)};q.useEffect(()=>(console.log(" Starting initial data load"),K.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),Q(!0)},8e3),console.log(" Fetching data in parallel..."),Promise.all([n().then(()=>console.log(" Envelope data fetched")),p().then(()=>console.log(" Monthly budget data fetched"))]).then(()=>{console.log(" Data load complete"),ue(!0),Q(!1)}).catch(Re=>{console.error(" Error loading initial data:",Re),ue(!0),Q(!1)}),()=>{K.current&&clearTimeout(K.current)}),[]),q.useEffect(()=>{if(!P&&!de){const Re=m.length===0&&b.length===0;ce(Re)}},[P,de,m,b,h]),q.useEffect(()=>{ge&&we.current&&(we.current.focus(),we.current.select())},[ge]);const[$e,We]=q.useState(!1),gt=q.useRef(null),wt=q.useRef(0),Me=q.useRef({}),Fe=q.useRef({}),[Pt,mn]=q.useState(null),Xt=q.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[pt,At]=q.useState([]),Bt=q.useRef([]),or=t.filter(Re=>Re.isPiggybank===!0&&Re.isActive);q.useEffect(()=>{if(!$e){const Re=t.filter(Ue=>!Ue.isPiggybank&&Ue.isActive!==!1&&b.some(Nt=>Nt.envelopeId===Ue.id)).sort((Ue,Nt)=>{const nn=Ue.orderIndex??0,Gr=Nt.orderIndex??0;return nn-Gr});At(Re),Bt.current=Re}},[t,b,$e]);const Ur=q.useCallback(()=>We(!0),[]),ss=q.useCallback(()=>{We(!1),Bt.current.length&&T(Bt.current)},[T]),Ws=q.useCallback(Re=>{},[]),wi=q.useCallback(Re=>{ge!==Re&&M(`/envelope/${Re}`)},[ge,M]),yr=pt;q.useEffect(()=>{const Re=()=>{Object.values(Fe.current).forEach(nn=>nn?.destroy()),Fe.current={}};if(!yr.length)return;const Ue=()=>{Ie&&yr.forEach(nn=>{const Gr=Me.current[nn.id];if(!Gr)return;const br=Fe.current[nn.id];if(br){br.target=Gr;return}const xr=new ZH(gt.current,{target:Gr,draggable:Ie,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});xr.on("dragStart",Dn=>{const Rn=Bt.current.findIndex(kn=>kn.id===nn.id),nr=Dn.target,Hn=nr.getBoundingClientRect().height+rte;mn(nn.id),Xt.current={activeId:nn.id,startIndex:Rn,currentIndex:Rn,itemHeight:Hn},nr&&(nr.style.transition="none",nr.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",nr.style.zIndex="20"),Ur()});let ct=null;xr.on("drag",Dn=>{const Rn=Dn.target;ct!==null&&cancelAnimationFrame(ct),ct=requestAnimationFrame(()=>{const nr=Xt.current;if(nr.activeId!==nn.id)return;const qr=Dn.beforeTranslate[1];Rn.style.transform=`translateY(${qr}px)`,Rn.style.transition="none";const{itemHeight:Hn,startIndex:kn}=nr;if(!Hn)return;const $n=Math.round(qr/Hn),rr=ite(kn+$n,0,Bt.current.length-1);rr!==nr.currentIndex&&(nr.currentIndex=rr,Bt.current.forEach((cn,un)=>{if(cn.id===nn.id)return;const Hr=Me.current[cn.id];if(!Hr)return;let Ki=0;kn<rr?un>kn&&un<=rr&&(Ki=-Hn):kn>rr&&un>=rr&&un<kn&&(Ki=Hn),Hr.style.transform=Ki?`translateY(${Ki}px)`:"",Hr.style.transition="transform 0.2s ease"})),ct=null})}),xr.on("dragEnd",Dn=>{ct!==null&&(cancelAnimationFrame(ct),ct=null);const Rn=Dn.target,nr=Xt.current,{startIndex:qr,currentIndex:Hn}=nr;if(Rn.style.transform="",Rn.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Rn.style.boxShadow="",Bt.current.forEach(kn=>{if(kn.id===nn.id)return;const $n=Me.current[kn.id];$n&&($n.style.transform="",$n.style.transition="")}),qr!==Hn){const kn=[...Bt.current],[$n]=kn.splice(qr,1);kn.splice(Hn,0,$n),Bt.current=kn,At(kn)}setTimeout(()=>{Rn.style.zIndex="",Rn.style.transition="",mn(null)},300),Xt.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},wt.current=Date.now(),ss()}),xr.on("click",Dn=>{const Rn=Dn.inputEvent.target;Rn.closest(".js-budget-target")||Rn.tagName==="INPUT"||wi(nn.id)}),Fe.current[nn.id]=xr})},Nt=window.setTimeout(Ue,80);return()=>{clearTimeout(Nt),Re()}},[yr,Ur,ss,wi,Ie]);const kr=t.reduce((Re,Ue)=>Re+je(Ue.id).toNumber(),0);console.log(" Total balance:",kr);const vn=async()=>{if(ge)try{const Re=parseFloat(De)||0;await R(ge,Re)}catch(Re){console.error("Failed to save budget amount:",Re),z("Failed to update budget","error")}finally{Te(null),Ye("")}},tr=()=>{L("add"),j(null),k(!0)},Wt=Re=>{pe.current&&clearTimeout(pe.current),!X&&(L("edit"),j(Re),k(!0))},Qs=Re=>{pe.current&&clearTimeout(pe.current),$(!0);const Ue=m.findIndex(nn=>nn.id===Re.id),Nt={...Re};E(Re.id).catch(console.error),z(`Deleted "${Re.name}"`,"neutral",()=>S(Nt,Ue)),setTimeout(()=>$(!1),500)},ga=()=>{k(!1),j(null)},ma=()=>{Y(!0)},dt=async()=>{try{await A(),Y(!1),z(`"${h}" budget cleared`,"neutral",()=>z('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(Re){console.error("Error clearing month data:",Re),z("Failed to clear month data","error")}},Qt=async()=>{try{await D(),ce(!1),z("Previous month budget copied","success")}catch(Re){console.error("Error copying previous month:",Re),z("Failed to copy previous month","error")}},Zt=_();return console.log(" Checking loading screen condition, isInitialLoading:",de),de?(console.log(" Showing loading screen"),x.jsx(l5,{message:B?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:B})):(console.log(" Showing main content"),x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[x.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("div",{className:"flex items-center gap-2",children:i?r?x.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[x.jsx(oc,{size:16,className:"animate-spin"}),x.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):a?x.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[x.jsx(oc,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):x.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[x.jsx(JL,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):x.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[x.jsx(QL,{size:16}),x.jsx("span",{className:"text-sm font-medium",children:c?"Testing...":r?"Saving...":"Offline"})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>ut(!Ie),className:`transition-colors ${Ie?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:Ie?"Lock envelope order":"Unlock to reorder envelopes",children:Ie?x.jsx(_L,{size:22}):x.jsx(EL,{size:22})}),x.jsx("button",{onClick:ma,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:x.jsx(oc,{size:22})}),x.jsx(Zee,{})]})]}),x.jsx(Qee,{amount:Zt,totalIncome:m.reduce((Re,Ue)=>Re+Ue.amount,0),totalAllocated:b.reduce((Re,Ue)=>Re+Ue.budgetedAmount,0),isLoading:r,variant:"header"}),x.jsx(Wee,{currentMonth:h,onMonthChange:Re=>{ce(!1),pa.getState().setCurrentMonth(Re)}})]}),x.jsxs("div",{className:"pt-40 p-4 max-w-md mx-auto space-y-6",children:[te&&x.jsx(tte,{currentMonth:h,onCopy:Qt,onDismiss:()=>ce(!1)}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),x.jsx("button",{onClick:tr,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:x.jsx(vm,{size:20})})]}),m.length===0?x.jsx("div",{className:"text-center py-6",children:x.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):x.jsx("div",{className:"space-y-3",children:x.jsx(Lh,{initial:!1,mode:"popLayout",children:m.map(Re=>x.jsx(Md.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(IS,{onDelete:()=>Qs(Re),children:x.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Wt(Re),children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Re.name}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),x.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Re.amount.toFixed(2)]})]})})},Re.id))})})]}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[x.jsx(Ph,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),x.jsx("button",{onClick:()=>M("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:x.jsx(vm,{size:20})})]}),or.length>0?x.jsx("div",{className:"space-y-3",children:or.map(Re=>x.jsx(nte,{piggybank:Re,balance:je(Re.id),onNavigate:Ue=>M(`/envelope/${Ue}`)},Re.id))}):x.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[x.jsx(Ph,{size:48,className:"mx-auto mb-3 opacity-30"}),x.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),x.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),x.jsx("button",{onClick:()=>M("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:x.jsx(vm,{size:20})})]}),yr.length===0?x.jsxs("div",{className:"text-center py-6",children:[x.jsx(ew,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),x.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length>0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),x.jsx("button",{onClick:()=>M("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):x.jsx("div",{ref:gt,children:x.jsx(Lh,{initial:!1,children:x.jsx("div",{className:"space-y-3",children:yr.map((Re,Ue)=>{const nn=b.find(ct=>ct.envelopeId===Re.id)?.budgetedAmount||0,Gr=je(Re.id),br=()=>{if(Ue===0)return;const ct=[...Bt.current];[ct[Ue-1],ct[Ue]]=[ct[Ue],ct[Ue-1]],Bt.current=ct,At(ct),T(ct)},xr=()=>{if(Ue===yr.length-1)return;const ct=[...Bt.current];[ct[Ue],ct[Ue+1]]=[ct[Ue+1],ct[Ue]],Bt.current=ct,At(ct),T(ct)};return x.jsx(ate,{env:Re,budgetedAmount:nn,remainingBalance:Gr,editingEnvelopeId:ge,setEditingEnvelopeId:Te,editingAmount:De,setEditingAmount:Ye,handleBudgetSave:vn,navigate:M,inputRef:we,transactions:e,currentMonth:h,setMoveableRef:d,isReorderingActive:$e,activelyDraggingId:Pt,onItemDragStart:Ws,onMoveUp:br,onMoveDown:xr,isFirst:Ue===0,isLast:Ue===yr.length-1,isReorderUnlocked:Ie},Re.id)})})})})]}),x.jsx("button",{onClick:()=>M("/add-transaction"),className:"fixed bottom-24 right-6 md:bottom-10 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:x.jsx(vm,{size:28})}),x.jsx(Jee,{isVisible:C,onClose:ga,mode:O,initialIncomeSource:F}),x.jsx(ete,{isVisible:H,onClose:()=>Y(!1),onConfirm:dt,currentMonth:h,incomeCount:m.length,totalIncome:m.reduce((Re,Ue)=>Re+Ue.amount,0),allocationCount:b.length,totalAllocated:b.reduce((Re,Ue)=>Re+Ue.budgetedAmount,0)})]})]})]}))},c5=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c}=Zn(),{currentMonth:u}=pa(),[d,h]=q.useState(""),[p,m]=q.useState(""),[b,_]=q.useState(""),[E,S]=q.useState(new Date().toISOString().split("T")[0]);if(q.useEffect(()=>{if(!t)return;const z=window.setTimeout(()=>{if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description);try{const M=new Date(i.date);isNaN(M.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(M.toISOString().split("T")[0])}catch(M){console.error("Error parsing transaction date:",M),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),S(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(z)},[t,n,i]),!t)return null;const A=async z=>{z.preventDefault();const M=parseFloat(d);if(isNaN(M)||M<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:n,amount:M,note:b,date:E,envelopeId:r.id});try{const T=new Date(E),C=`${T.getFullYear()}-${(T.getMonth()+1).toString().padStart(2,"0")}`;if(C!==u){const k=`This transaction date (${C}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(k))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:M,description:b,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:M,description:b,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:M,description:b,merchant:p||void 0,date:new Date(E).toISOString()})),console.log(" Transaction saved successfully"),e()}catch(T){console.error(" Error saving transaction:",T),alert("Failed to save transaction: "+(T instanceof Error?T.message:"Unknown error"))}},D=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},R=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",P=n==="add"?"text-green-500":"text-red-500";return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),x.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:R}),x.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0,children:"Save"})]}),x.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${P}`,children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:z=>{const M=z.target.value;(M===""||!isNaN(parseFloat(M))&&parseFloat(M)>=0)&&h(M)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${P} placeholder-gray-700`})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),x.jsx("input",{type:"text",value:p,onChange:z=>m(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),x.jsx("input",{type:"text",value:b,onChange:z=>_(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(E);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?x.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[x.jsx(Oh,{size:14}),x.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),x.jsx("input",{type:"date",value:E,onChange:z=>{console.log("Date changed to:",z.target.value),S(z.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&x.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:x.jsxs("button",{type:"button",onClick:D,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[x.jsx(rN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},ote=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=Zn(),[a,o]=q.useState(""),[c,u]=q.useState(""),[d,h]=q.useState(""),[p,m]=q.useState(new Date().toISOString().split("T")[0]),b=r.filter(S=>S.id!==n.id);if(q.useEffect(()=>{if(!t)return;const S=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(S)},[t]),!t)return null;const _=S=>{S.preventDefault();const A=parseFloat(c);isNaN(A)||A<=0||!a||(i(n.id,a,A,d,new Date(p)),e())},E=r.find(S=>S.id===a);return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[x.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),x.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),x.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),x.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),x.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),x.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[x.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(S=>x.jsx("option",{value:S.id,className:"bg-white dark:bg-zinc-900",children:S.name},S.id))]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),x.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),x.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),E&&c&&parseFloat(c)>0&&x.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",x.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:E.name})]})]})]})})},lte=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},cte=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},u5=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),x.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[x.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&x.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&x.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),x.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[x.jsx("span",{children:lte(t.date)}),e&&x.jsxs(x.Fragment,{children:[x.jsx("span",{children:""}),x.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",cte(t.amount)]}),n?x.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?x.jsx(pI,{className:"text-green-500",size:20}):x.jsx(mI,{className:"text-gray-400",size:20})}):x.jsx("span",{children:t.reconciled?x.jsx(pI,{className:"text-green-500",size:20}):x.jsx(mI,{className:"text-gray-400",size:20})})]})]})},ute=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),dte=()=>{const{id:t}=M6(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h}=Zn(),{showToast:p}=Hd(),m=rs(),b=ns(),[_,E]=q.useState(!1),[S,A]=q.useState(!1),[D,R]=q.useState(!1),[P,z]=q.useState(null);q.useEffect(()=>{e.length===0&&r()},[]);const M=e.find(L=>L.id===t);if(!M)return i?x.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:x.jsx("p",{children:"Loading envelope..."})}):x.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:x.jsx("p",{children:"Envelope not found."})});const T=n.filter(L=>L.envelopeId===M.id).sort((L,F)=>new Date(F.date).getTime()-new Date(L.date).getTime()),C=()=>{b.state?.fromGlobalFAB?m("/"):m(-1)},k=()=>{t&&(a(t),m(-1))},O=L=>{const F={...L,reconciled:!L.reconciled};c(F)};return x.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[x.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[x.jsx("button",{onClick:()=>{const L=prompt("Rename envelope:",M.name);L&&L.trim()&&t&&o(t,L)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),x.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:M.name}),x.jsx("button",{onClick:C,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),x.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const L=h(M.id).toNumber();return console.log(`Debug: Envelope ${M.name} Balance:`,L),x.jsx("span",{className:`text-xl font-bold ${L<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:ute(L)})})()]})}),x.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>E(!0),children:[x.jsx(Kz,{className:"w-5 h-5 mr-3"}),"Add Money"]}),x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[x.jsx($z,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),x.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>R(!0),children:[x.jsx(Vz,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),x.jsxs("section",{className:"mt-6",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:T.length===0?x.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):x.jsx(Lh,{initial:!1,mode:"popLayout",children:T.map(L=>x.jsx(Md.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(IS,{onDelete:()=>{if(!L.id)return;const F={...L};u(L.id),p("Transaction deleted","neutral",()=>d(F))},children:x.jsx(u5,{transaction:L,onReconcile:()=>O(L),onEdit:()=>z(L)})})},L.id))})})]}),x.jsx("div",{className:"mt-8",children:x.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${M.name}"? This will delete all transactions.`)&&k()},children:[x.jsx(rN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(_||S||P)&&x.jsx(c5,{isVisible:_||S||!!P,onClose:()=>{E(!1),A(!1),z(null)},mode:_?"add":S?"spend":"edit",currentEnvelope:M,initialTransaction:P}),D&&x.jsx(ote,{isVisible:D,onClose:()=>R(!1),sourceEnvelope:M})]})},fte="1.1.0",hte={version:fte},pte=()=>{const t=rs(),e=q.useRef(null),{envelopes:n,transactions:r,distributionTemplates:i,resetData:a,importData:o,getEnvelopeBalance:c,appSettings:u,updateAppSettings:d,initializeAppSettings:h}=Zn(),{currentUser:p,deleteAccount:m}=Hi(),[b,_]=q.useState(null),[E,S]=q.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[A,D]=q.useState(!1),[R,P]=q.useState(""),[z,M]=q.useState(!1),[T,C]=q.useState(!1),[k,O]=q.useState(null),L=978307200,F=u?.theme??"system";q.useEffect(()=>{u||h().catch(B=>{console.error("Failed to initialize app settings:",B)})},[u,h]);const j=(B,Q)=>{_({type:B,text:Q}),setTimeout(()=>_(null),3500)},X=q.useMemo(()=>{const B=n.length,Q=r.length,K=i.length,ne=n.reduce((Te,De)=>Te+c(De.id).toNumber(),0),ue=0,de=r.reduce((Te,De)=>{let Ye=0;if(typeof De.date=="string"){const we=Date.parse(De.date);Ye=Number.isNaN(we)?0:we}else typeof De.date=="number"&&(Ye=De.date<2e9?(De.date+L)*1e3:De.date);return Math.max(Te,Ye)},0),ge=ue||de?new Date(Math.max(ue,de)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:B,transactionCount:Q,templateCount:K,totalBalance:ne,lastUpdated:ge}},[n,r,i]),$=()=>{try{const B={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:u||{theme:"system"},envelopes:n.map(de=>({...de,currentBalance:c(de.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:r,distributionTemplates:i},Q=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),K=URL.createObjectURL(Q),ne=document.createElement("a");ne.href=K,ne.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(K);const ue=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ue),S(ue),O({success:!0,message:"Backup downloaded successfully."})}catch(B){console.error(B),O({success:!1,message:"Failed to create backup file.",onRetry:$})}},H=()=>{C(!0),O(null);try{const B=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],Q=r.map(ge=>{const Te=n.find(Ie=>Ie.id===ge.envelopeId)?.name||"Unknown",De=(ge.merchant||"").replace(/"/g,'""'),Ye=(ge.description||"").replace(/"/g,'""');let we="Invalid Date";if(ge.date){if(typeof ge.date=="string")we=ge.date.split("T")[0];else if(typeof ge.date=="number"){const Ie=ge.date<2e9?(ge.date+L)*1e3:ge.date;we=new Date(Ie).toISOString().split("T")[0]}}return[we,`"${De}"`,`"${Ye}"`,ge.amount.toFixed(2),ge.type,`"${Te}"`,ge.reconciled?"Yes":"No"].join(",")}),K=[B.join(","),...Q].join(`
`),ne=new Blob([K],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(ne),de=document.createElement("a");de.href=ue,de.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(ue),O({success:!0,message:"Transactions CSV exported successfully."})}catch(B){console.error(B),O({success:!1,message:"Failed to export CSV. Please try again.",onRetry:H})}finally{C(!1)}},Y=()=>{e.current?.click()},te=B=>{const Q=B.target.files?.[0];if(!Q)return;const K=new FileReader;K.onload=async ne=>{try{const ue=JSON.parse(ne.target?.result),de=await o(ue);if(!de.success){j("error",de.message);return}if(ue.appSettings?.theme)try{await d({theme:ue.appSettings.theme})}catch(ge){console.error("Failed to update imported settings:",ge)}else if(ue.appSettings?.isDarkMode!==void 0)try{const ge=ue.appSettings.isDarkMode?"dark":"light";await d({theme:ge})}catch(ge){console.error("Failed to update imported settings:",ge)}j("success",`Loaded ${ue.envelopes?.length??0} envelopes, ${ue.transactions?.length??0} transactions, and ${ue.distributionTemplates?.length??0} templates.`)}catch(ue){console.error(ue),j("error","Invalid backup file. Please verify the JSON.")}},K.readAsText(Q),B.target.value=""},ce=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await a(),j("success","All data has been permanently deleted."),t("/")}catch(B){console.error("Reset failed:",B),j("error","Failed to delete all data. Some data may remain.")}},pe=async()=>{if(!R.trim()){j("error","Please enter your password to confirm account deletion.");return}D(!0);try{await a(),await m(R)?j("success","Your account has been permanently deleted."):j("error","Failed to delete account. Please try again.")}catch(B){console.error("Account deletion failed:",B),j("error","Failed to delete account. Please try again.")}finally{D(!1),M(!1),P("")}};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[x.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),x.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[b&&x.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${b.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[b.type==="success"?x.jsx(bv,{size:18}):x.jsx(Ym,{size:18}),b.text]}),x.jsx("section",{children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(vI,{className:"text-blue-500",size:22}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),x.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.envelopeCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.transactionCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:X.templateCount})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:X.lastUpdated})]})]})]})}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[F==="light"&&x.jsx("span",{className:"text-orange-500 text-lg",children:""}),F==="dark"&&x.jsx("span",{className:"text-purple-500 text-lg",children:""}),F==="system"&&x.jsx("span",{className:"text-gray-500 text-lg",children:""}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),x.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:F})]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),x.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(B=>x.jsx("button",{onClick:async()=>{try{await d({theme:B.value})}catch(Q){console.error("Failed to update theme setting:",Q)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${F===B.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:B.label},B.value))})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[x.jsxs("button",{onClick:$,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(vI,{className:"text-blue-500",size:20}),x.jsxs("div",{className:"flex flex-col items-start",children:[x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),x.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",E]})]})]}),x.jsx(Ru,{className:"text-gray-400",size:18})]}),x.jsxs("button",{onClick:Y,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx($L,{className:"text-blue-500",size:20}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),x.jsx(Ru,{className:"text-gray-400",size:18})]}),x.jsx("div",{className:"p-4",children:x.jsxs("button",{onClick:H,disabled:T,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[T?x.jsx(yI,{className:"text-blue-500 animate-spin",size:20}):x.jsx(lL,{className:"text-blue-500",size:20}),x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:T?"Preparing CSV":"Export Transactions (CSV)"})]}),x.jsx(Ru,{className:"text-gray-400",size:18})]})}),x.jsx("input",{type:"file",ref:e,onChange:te,accept:".json",className:"hidden"})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[x.jsx("p",{children:"Create regular backups before major changes."}),x.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),x.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),x.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[x.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Ym,{className:"text-red-500 group-hover:text-red-600",size:20}),x.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),x.jsx(Ru,{className:"text-gray-400",size:18})]}),x.jsxs("button",{onClick:()=>M(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Ym,{className:"text-red-600 group-hover:text-red-700",size:20}),x.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),x.jsx(Ru,{className:"text-gray-400",size:18})]})]}),x.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[x.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),x.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),x.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",hte.version]})]}),z&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:x.jsx(Oh,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),x.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:x.jsx(mp,{size:20})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[x.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),x.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",x.jsx("span",{className:"font-semibold",children:p?.email})]}),x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),x.jsx("input",{type:"password",value:R,onChange:B=>P(B.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:A})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>M(!1),disabled:A,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),x.jsx("button",{onClick:pe,disabled:A||!R.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?x.jsxs(x.Fragment,{children:[x.jsx(yI,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})}),k&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-sm w-full p-6 shadow-xl text-center",children:[x.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${k.success?"bg-green-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:k.success?x.jsx(bv,{className:"w-6 h-6 text-green-600 dark:text-emerald-400"}):x.jsx(Oh,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:k.success?"Success":"Error"}),x.jsx("p",{className:"text-gray-600 dark:text-zinc-400 mb-6",children:k.message}),x.jsx("div",{className:"flex gap-3 justify-center",children:k.success?x.jsx("button",{onClick:()=>O(null),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Okay"}):x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),k.onRetry&&x.jsx("button",{onClick:()=>{const B=k.onRetry;O(null),B&&B()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Re-try"})]})})]})})]})},gte=()=>{const{addEnvelope:t}=Zn(),{setEnvelopeAllocation:e}=pa(),n=rs(),[r]=Ez(),[i,a]=q.useState(""),[o,c]=q.useState(""),u=r.get("type")==="piggybank",[d,h]=q.useState(""),[p,m]=q.useState(""),[b,_]=q.useState("#3B82F6"),E=async S=>{if(S.preventDefault(),!i.trim())return;const A=parseFloat(o),D=isNaN(A)?0:A,R=Zn.getState().envelopes,z=(R.length>0?Math.max(...R.map(C=>C.orderIndex??0)):-1)+1,M={name:i,currentBalance:D,lastUpdated:new Date().toISOString(),createdAt:new Date().toISOString(),isActive:!0,orderIndex:z};u&&(M.isPiggybank=!0,M.piggybankConfig={targetAmount:d?parseFloat(d):void 0,monthlyContribution:parseFloat(p||"0"),color:b,icon:"piggy-bank"});const T=await t(M);T&&await e(T,0),n("/")};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[x.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:x.jsx(Mh,{size:24})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"New Piggybank":"New Envelope"})]}),x.jsx("div",{className:"p-4 max-w-md mx-auto",children:x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[x.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:x.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:u?x.jsx(Ph,{size:40}):x.jsx(uL,{size:40})})}),x.jsxs("form",{onSubmit:E,className:"p-6 space-y-6 pb-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:u?"Piggybank Name":"Envelope Name"}),x.jsx("input",{type:"text",id:"name",value:i,onChange:S=>a(S.target.value),placeholder:u?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),u&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"monthly-contribution",value:p,onChange:S=>m(S.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:u})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"target-amount",value:d,onChange:S=>h(S.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),x.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(S=>x.jsx("button",{type:"button",onClick:()=>_(S.value),className:`w-full aspect-square rounded-lg transition-all ${b===S.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:S.value},title:S.label},S.value))})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),x.jsx("input",{type:"number",id:"balance",value:o,onChange:S=>c(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),x.jsxs("div",{className:"pt-4 flex gap-3",children:[x.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:!i.trim()||u&&!p,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&(!u||p)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:u?"Create Piggybank":"Create Envelope"})]})]})]})})]})},mte=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=q.useState([]),[a,o]=q.useState({}),[c,u]=q.useState(e),d=_=>{i(E=>E.includes(_)?E.filter(S=>S!==_):[...E,_])},h=(_,E)=>{o(S=>({...S,[_]:E}))};q.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),q.useEffect(()=>{const _=Object.values(a).reduce((E,S)=>E+(S||0),0);u(e-_),n(a)},[a,e,n]),q.useEffect(()=>{const _={...a};Object.keys(_).forEach(E=>{r.includes(E)||delete _[E]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const p=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return x.jsxs("div",{className:"space-y-3",children:[r.length>1&&x.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),x.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&x.jsx("button",{type:"button",onClick:p,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),x.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(_=>x.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[x.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),x.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),x.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:E=>h(_.id,parseFloat(E.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},vte=()=>{const t=rs(),{envelopes:e,addTransaction:n}=Zn(),{currentMonth:r}=pa(),[i,a]=q.useState(""),[o,c]=q.useState(""),[u,d]=q.useState(""),[h,p]=q.useState(new Date().toISOString().split("T")[0]),[m,b]=q.useState("expense"),[_,E]=q.useState({}),S=Object.keys(_).length>0,A=Object.values(_).reduce((T,C)=>T+(C||0),0),D=Math.abs(A-parseFloat(i||"0"))<.01,R=i&&parseFloat(i)>0&&S&&D,P=async T=>{if(T.preventDefault(),!R)return;const[C,k,O]=h.split("-").map(Number),L=new Date(C,k-1,O,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",L.toISOString());try{const[F,j]=h.split("-").map(Number),X=`${F}-${j.toString().padStart(2,"0")}`;if(X!==r){const H=`This transaction date (${X}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(H))return}const $=Object.entries(_).filter(([H,Y])=>Y>0);for(const[H,Y]of $)await n({amount:Y,description:u,merchant:o||void 0,date:L.toISOString(),envelopeId:H,type:m==="income"?"Income":"Expense",reconciled:!1});t("/")}catch(F){console.error("Error saving transaction:",F),alert("Failed to save transaction: "+(F instanceof Error?F.message:"Unknown error"))}},z=[...e].sort((T,C)=>{const k=T.orderIndex??0,O=C.orderIndex??0;return k!==O?k-O:T.name.localeCompare(C.name)}),M=m==="income"?"text-green-500":"text-red-500";return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[x.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),x.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),x.jsx("button",{onClick:P,disabled:!R,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),x.jsx("div",{className:"p-4 max-w-md mx-auto",children:x.jsxs("form",{onSubmit:P,className:"space-y-6",children:[x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:x.jsxs("div",{className:"flex",children:[x.jsx("button",{type:"button",onClick:()=>b("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),x.jsx("button",{type:"button",onClick:()=>b("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),x.jsxs("div",{className:"text-center",children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),x.jsxs("div",{className:"relative inline-block",children:[x.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${M}`,children:"$"}),x.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:T=>{const C=T.target.value;(C===""||!isNaN(parseFloat(C))&&parseFloat(C)>=0)&&a(C)},onKeyDown:T=>{(T.key==="e"||T.key==="E"||T.key==="+"||T.key==="-")&&T.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${M} placeholder-gray-700`})]})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),x.jsx("input",{type:"text",value:o,onChange:T=>c(T.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),x.jsx("input",{type:"text",value:u,onChange:T=>d(T.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),x.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[T,C]=h.split("-").map(Number);return`${T}-${C.toString().padStart(2,"0")}`!==r?x.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[x.jsx(Oh,{size:14}),x.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),x.jsx("input",{type:"date",value:h,onChange:T=>p(T.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:x.jsx(mte,{envelopes:z,transactionAmount:parseFloat(i)||0,onSplitChange:E})})]})})]})},yte=()=>{const t=rs(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a}=Zn(),{showToast:o}=Hd(),{currentMonth:c}=pa(),[u,d]=q.useState(!1),[h,p]=q.useState(""),[m,b]=q.useState("all"),[_,E]=q.useState("All"),[S,A]=q.useState(!1),[D,R]=q.useState("all"),[P,z]=q.useState(!1),[M,T]=q.useState(()=>{const $=new Date;return $.setMonth($.getMonth()-1),$.toISOString().split("T")[0]}),[C,k]=q.useState(()=>new Date().toISOString().split("T")[0]),[O,L]=q.useState(null),F=q.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:P,currentMonth:c,transactionMonths:e.map(Y=>({id:Y.id,month:Y.month,date:Y.date}))});let $=e;return P||($=e.filter(Y=>Y.month===c||!Y.month),console.log(" After month filter:",$.length,"transactions remain")),$.map(Y=>{if(!Y)return null;let te=Y.date;if(typeof Y.date=="number"){const pe=(Y.date+978307200)*1e3;te=new Date(pe).toISOString()}else if(!Y.date||typeof Y.date!="string")return null;return{...Y,date:te}}).filter(Boolean).filter(Y=>{if(h){const ce=h.toLowerCase(),pe=n.find(K=>K.id===Y.envelopeId)?.name.toLowerCase()||"",B=Y.amount.toFixed(2);if(!(Y.description.toLowerCase().includes(ce)||pe.includes(ce)||B.includes(ce)))return!1}if(m!=="all"&&Y.envelopeId!==m||_!=="All"&&Y.type!==_||!Y.date||typeof Y.date!="string")return!1;const te=Y.date.split("T")[0];return!(D!=="all"&&new Date(te).getMonth()!==parseInt(D)||S&&!Y.reconciled)}).sort((Y,te)=>new Date(te.date).getTime()-new Date(Y.date).getTime())},[e,n,h,m,_,M,C,S,P,c]);console.log(" Final filtered transactions:",{count:F.length,transactions:F.map($=>({id:$.id,description:$.description,amount:$.amount,date:$.date,month:$.month,type:$.type}))});const j=O?n.find($=>$.id===O.envelopeId):null,X=$=>{const H={...$,reconciled:!$.reconciled};r(H)};return x.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[x.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:x.jsx(Mh,{size:24})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),x.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:x.jsx(fL,{size:20,className:u?"fill-current":""})})]}),x.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[x.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",c]}),x.jsx("button",{onClick:()=>z(!P),className:`text-sm px-3 py-1 rounded-md ${P?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:P?"Current Month Only":"All Time"})]}),x.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"relative",children:[x.jsx(NL,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),x.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:$=>p($.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&x.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:x.jsx(mp,{size:16})})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),x.jsxs("select",{value:m,onChange:$=>b($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[x.jsx("option",{value:"all",children:"All Envelopes"}),n.sort(($,H)=>$.name.localeCompare(H.name)).map($=>x.jsx("option",{value:$.id,children:$.name},$.id))]})]}),x.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map($=>x.jsx("button",{onClick:()=>E($),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${_===$?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:$},$))}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),x.jsxs("select",{value:D,onChange:$=>R($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[x.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},($,H)=>H).map($=>x.jsx("option",{value:$,children:new Date(2022,$).toLocaleString("default",{month:"long"})},$))]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:M,onChange:$=>T($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:C,onChange:$=>k($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),x.jsx("button",{onClick:()=>A(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:x.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),x.jsx("button",{onClick:()=>z(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:x.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]})]})}),x.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:x.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:F.length===0?x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):x.jsx(Lh,{initial:!1,mode:"popLayout",children:F.map($=>{const H=n.find(Y=>Y.id===$.envelopeId);return x.jsx(Md.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:x.jsx(IS,{onDelete:()=>{if(!$.id)return;const Y={...$};i($.id),o("Transaction deleted","neutral",()=>a(Y))},children:x.jsx(u5,{transaction:$,envelopeName:H?.name||"Unknown Envelope",onReconcile:()=>X($),onEdit:()=>{H?L($):alert("Cannot edit: Envelope deleted.")}})})},$.id)})})})}),O&&j&&x.jsx(c5,{isVisible:!!O,onClose:()=>L(null),mode:"edit",currentEnvelope:j,initialTransaction:O})]})},d5=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],bte=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=d5.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},DS=t=>{const e=d5.map(i=>({...i,met:i.regex.test(t)})),n=bte(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},xte=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=DS(t);return r?null:x.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[x.jsx("div",{className:"flex-1",children:x.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>x.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),x.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},_te=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=DS(t);return r?null:x.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?x.jsx(zz,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):x.jsx(mp,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),x.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},wte=()=>{const[t,e]=q.useState(""),[n,r]=q.useState(""),[i,a]=q.useState(""),[o,c]=q.useState(!1),[u,d]=q.useState(!1),[h,p]=q.useState(!1),[m,b]=q.useState(!1),{login:_,register:E,sendPasswordReset:S,isLoading:A,loginError:D,clearError:R}=Hi(),P=DS(n),z=async T=>{if(T.preventDefault(),R(),t.trim()&&n.trim())if(u){if(!i.trim()||!P.isValid)return;await E(t.trim(),n,i.trim())}else await _(t.trim(),n)},M=async T=>{T.preventDefault(),t.trim()&&await S(t.trim())&&b(!0)};return q.useEffect(()=>{e(""),r(""),a(""),b(!1)},[u,h]),x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full space-y-8",children:[x.jsx("div",{className:"text-center",children:x.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),x.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?x.jsxs("form",{onSubmit:M,className:"space-y-6",children:[x.jsxs("div",{className:"text-center mb-2",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(px,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{id:"reset-email",type:"email",value:t,onChange:T=>e(T.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:A,autoComplete:"email"})]})]}),m?x.jsxs("div",{className:"text-center py-4",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:x.jsx(px,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),x.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),x.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",x.jsx("span",{className:"font-medium",children:t})]}),x.jsxs("button",{type:"button",onClick:()=>p(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[x.jsx(Mh,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):x.jsxs(x.Fragment,{children:[x.jsx("button",{type:"submit",disabled:A||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:A?"Sending...":"Send Reset Link"}),x.jsx("div",{className:"mt-4 text-center",children:x.jsxs("button",{type:"button",onClick:()=>p(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:A,children:[x.jsx(Mh,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):x.jsxs("form",{onSubmit:z,className:"space-y-6",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x.jsx("input",{id:"email",type:"email",value:t,onChange:T=>e(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:A,autoComplete:"username"})]}),u&&x.jsxs("div",{children:[x.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),x.jsx("input",{id:"displayName",type:"text",value:i,onChange:T=>a(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:A})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&x.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:A,children:"Forgot password?"})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:T=>r(T.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!P.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:A,autoComplete:u?"new-password":"current-password"}),x.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:A,children:o?x.jsx(iL,{className:"h-5 w-5"}):x.jsx(sL,{className:"h-5 w-5"})})]}),u&&n&&x.jsx("div",{className:"mt-2",children:x.jsx(xte,{password:n})}),u&&n&&x.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:x.jsx(_te,{password:n})})]}),D&&x.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[D,D.includes("verify your email")&&x.jsx("div",{className:"mt-3",children:x.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),x.jsx("button",{type:"submit",disabled:A||!t.trim()||!n.trim()||u&&!i.trim()||u&&!P.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:A?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),x.jsx("div",{className:"mt-6 text-center",children:x.jsxs("button",{type:"button",onClick:()=>{d(!u),p(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:A,children:[x.jsx(KL,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Vk=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Hi();q.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full space-y-8",children:[x.jsx("div",{className:"text-center",children:x.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),x.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:x.jsx(px,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(bv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),x.jsxs("div",{className:"text-left",children:[x.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),x.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[x.jsx("li",{children:"1. Open your email inbox"}),x.jsx("li",{children:"2. Find the email from House Budget"}),x.jsx("li",{children:'3. Click the "Verify Email" link'}),x.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&x.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&x.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),x.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?x.jsxs(x.Fragment,{children:[x.jsx(oc,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):x.jsxs(x.Fragment,{children:[x.jsx(oc,{className:"h-4 w-4"}),"Resend verification email"]})}),x.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[x.jsx(Mh,{className:"h-4 w-4"}),"Back to sign in"]})]})}),x.jsx("div",{className:"text-center",children:x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},Ete=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=Hd(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return x.jsx(Lh,{children:n&&x.jsx(Md.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:x.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[x.jsx("div",{className:"flex items-center flex-1 min-w-0",children:x.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),x.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&x.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[x.jsx(qL,{size:14,className:"inline mr-1"}),"Undo"]}),x.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:x.jsx(mp,{size:16})})]})]})})})};class Ma extends q.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:x.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[x.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:x.jsx(Oh,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[x.jsx(oc,{className:"h-4 w-4"}),"Try Again"]}),x.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[x.jsx(pL,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Ste=()=>{const t=rs(),e=ns(),n=[{path:"/",label:"Budget",icon:x.jsx(ew,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:x.jsx(mL,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:x.jsx(nN,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:x.jsx(gI,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:x.jsx(gI,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&t(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return x.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:x.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((a,o)=>x.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[x.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),x.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function Tte(){const[t,e]=q.useState(!0),{appSettings:n}=Zn(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Hi();if(q.useEffect(()=>{const p=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(p)},[]),q.useEffect(()=>a(),[a]),q.useEffect(()=>{const p=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),b=()=>{const _=n?.theme??"system",E=m.matches;_==="dark"||_==="system"&&E?p.classList.add("dark"):p.classList.remove("dark")};if(b(),n?.theme==="system")return m.addEventListener("change",b),()=>m.removeEventListener("change",b)},[n]),t||!i)return x.jsx(l5,{message:"Initializing Personal Budget..."});if(!r)return u?x.jsx(Ma,{children:x.jsx(Vk,{})}):x.jsx(Ma,{children:x.jsx(wte,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return x.jsxs(Ma,{children:[h&&x.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),x.jsx("div",{className:"ml-3",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),x.jsxs(yz,{children:[x.jsxs(K6,{children:[x.jsx(jo,{path:"/",element:x.jsx(Ma,{children:x.jsx(ste,{})})}),x.jsx(jo,{path:"/envelope/:id",element:x.jsx(Ma,{children:x.jsx(dte,{})})}),x.jsx(jo,{path:"/add-envelope",element:x.jsx(Ma,{children:x.jsx(gte,{})})}),x.jsx(jo,{path:"/add-transaction",element:x.jsx(Ma,{children:x.jsx(vte,{})})}),x.jsx(jo,{path:"/transactions",element:x.jsx(Ma,{children:x.jsx(yte,{})})}),x.jsx(jo,{path:"/settings",element:x.jsx(Ma,{children:x.jsx(pte,{})})}),x.jsx(jo,{path:"/verify-email",element:x.jsx(Ma,{children:x.jsx(Vk,{})})})]}),x.jsx(Ste,{})]}),x.jsx(Ete,{})]})}n6({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});Zj.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(Tte,{})}));
